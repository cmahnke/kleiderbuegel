(()=>{var fM=Object.create;var qm=Object.defineProperty;var mM=Object.getOwnPropertyDescriptor;var gM=Object.getOwnPropertyNames;var yM=Object.getPrototypeOf,_M=Object.prototype.hasOwnProperty;var Ee=(s,o)=>()=>(o||s((o={exports:{}}).exports,o),o.exports),vM=(s,o)=>{for(var p in o)qm(s,p,{get:o[p],enumerable:!0})},bM=(s,o,p,d)=>{if(o&&typeof o=="object"||typeof o=="function")for(let f of gM(o))!_M.call(s,f)&&f!==p&&qm(s,f,{get:()=>o[f],enumerable:!(d=mM(o,f))||d.enumerable});return s};var $i=(s,o,p)=>(p=s!=null?fM(yM(s)):{},bM(o||!s||!s.__esModule?qm(p,"default",{value:s,enumerable:!0}):p,s));var Zm=Ee((F3,Ub)=>{"use strict";var SM=void 0;Ub.exports=function(s){return s!==SM&&s!==null}});var $b=Ee((j3,Zb)=>{"use strict";var TM=Zm(),CM={object:!0,function:!0,undefined:!0};Zb.exports=function(s){return TM(s)?hasOwnProperty.call(CM,typeof s):!1}});var Yb=Ee((N3,Hb)=>{"use strict";var kM=$b();Hb.exports=function(s){if(!kM(s))return!1;try{return s.constructor?s.constructor.prototype===s:!1}catch{return!1}}});var Kb=Ee((q3,Xb)=>{"use strict";var PM=Yb();Xb.exports=function(s){if(typeof s!="function"||!hasOwnProperty.call(s,"length"))return!1;try{if(typeof s.length!="number"||typeof s.call!="function"||typeof s.apply!="function")return!1}catch{return!1}return!PM(s)}});var Qb=Ee((V3,Jb)=>{"use strict";var EM=Kb(),AM=/^\s*class[\s{/}]/,MM=Function.prototype.toString;Jb.exports=function(s){return!(!EM(s)||AM.test(MM.call(s)))}});var tx=Ee((W3,ex)=>{"use strict";ex.exports=function(){var s=Object.assign,o;return typeof s!="function"?!1:(o={foo:"raz"},s(o,{bar:"dwa"},{trzy:"trzy"}),o.foo+o.bar+o.trzy==="razdwatrzy")}});var rx=Ee((G3,ix)=>{"use strict";ix.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}});var ax=Ee((U3,nx)=>{"use strict";nx.exports=function(){}});var pu=Ee((Z3,sx)=>{"use strict";var IM=ax()();sx.exports=function(s){return s!==IM&&s!==null}});var lx=Ee(($3,ox)=>{"use strict";var zM=pu(),LM=Object.keys;ox.exports=function(s){return LM(zM(s)?Object(s):s)}});var ux=Ee((H3,cx)=>{"use strict";cx.exports=rx()()?Object.keys:lx()});var kp=Ee((Y3,hx)=>{"use strict";var OM=pu();hx.exports=function(s){if(!OM(s))throw new TypeError("Cannot use null or undefined");return s}});var px=Ee((X3,dx)=>{"use strict";var DM=ux(),RM=kp(),BM=Math.max;dx.exports=function(s,o){var p,d,f=BM(arguments.length,2),a;for(s=Object(RM(s)),a=function(T){try{s[T]=o[T]}catch(M){p||(p=M)}},d=1;d<f;++d)o=arguments[d],DM(o).forEach(a);if(p!==void 0)throw p;return s}});var mx=Ee((K3,fx)=>{"use strict";fx.exports=tx()()?Object.assign:px()});var yx=Ee((J3,gx)=>{"use strict";var FM=pu(),jM=Array.prototype.forEach,NM=Object.create,qM=function(s,o){var p;for(p in s)o[p]=s[p]};gx.exports=function(s){var o=NM(null);return jM.call(arguments,function(p){FM(p)&&qM(Object(p),o)}),o}});var vx=Ee((Q3,_x)=>{"use strict";var $m="razdwatrzy";_x.exports=function(){return typeof $m.contains!="function"?!1:$m.contains("dwa")===!0&&$m.contains("foo")===!1}});var xx=Ee((eF,bx)=>{"use strict";var VM=String.prototype.indexOf;bx.exports=function(s){return VM.call(this,s,arguments[1])>-1}});var Sx=Ee((tF,wx)=>{"use strict";wx.exports=vx()()?String.prototype.contains:xx()});var oc=Ee((iF,Px)=>{"use strict";var Pp=Zm(),Tx=Qb(),Cx=mx(),kx=yx(),Vh=Sx(),WM=Px.exports=function(s,o){var p,d,f,a,T;return arguments.length<2||typeof s!="string"?(a=o,o=s,s=null):a=arguments[2],Pp(s)?(p=Vh.call(s,"c"),d=Vh.call(s,"e"),f=Vh.call(s,"w")):(p=f=!0,d=!1),T={value:o,configurable:p,enumerable:d,writable:f},a?Cx(kx(a),T):T};WM.gs=function(s,o,p){var d,f,a,T;return typeof s!="string"?(a=p,p=o,o=s,s=null):a=arguments[3],Pp(o)?Tx(o)?Pp(p)?Tx(p)||(a=p,p=void 0):p=void 0:(a=o,o=p=void 0):o=void 0,Pp(s)?(d=Vh.call(s,"c"),f=Vh.call(s,"e")):(d=!0,f=!1),T={get:o,set:p,configurable:d,enumerable:f},a?Cx(kx(a),T):T}});var Hm=Ee((rF,Ex)=>{"use strict";Ex.exports=function(s){if(typeof s!="function")throw new TypeError(s+" is not a function");return s}});var xl=Ee((rg,Lx)=>{"use strict";var Ep=oc(),Jm=Hm(),Km=Function.prototype.apply,Ym=Function.prototype.call,Ax=Object.create,GM=Object.defineProperty,Mx=Object.defineProperties,Qm=Object.prototype.hasOwnProperty,Xm={configurable:!0,enumerable:!1,writable:!0},Ap,eg,Mp,tg,Ix,ig,zx;Ap=function(s,o){var p;return Jm(o),Qm.call(this,"__ee__")?p=this.__ee__:(p=Xm.value=Ax(null),GM(this,"__ee__",Xm),Xm.value=null),p[s]?typeof p[s]=="object"?p[s].push(o):p[s]=[p[s],o]:p[s]=o,this};eg=function(s,o){var p,d;return Jm(o),d=this,Ap.call(this,s,p=function(){Mp.call(d,s,p),Km.call(o,this,arguments)}),p.__eeOnceListener__=o,this};Mp=function(s,o){var p,d,f,a;if(Jm(o),!Qm.call(this,"__ee__"))return this;if(p=this.__ee__,!p[s])return this;if(d=p[s],typeof d=="object")for(a=0;f=d[a];++a)(f===o||f.__eeOnceListener__===o)&&(d.length===2?p[s]=d[a?0:1]:d.splice(a,1));else(d===o||d.__eeOnceListener__===o)&&delete p[s];return this};tg=function(s){var o,p,d,f,a;if(Qm.call(this,"__ee__")&&(f=this.__ee__[s],!!f))if(typeof f=="object"){for(p=arguments.length,a=new Array(p-1),o=1;o<p;++o)a[o-1]=arguments[o];for(f=f.slice(),o=0;d=f[o];++o)Km.call(d,this,a)}else switch(arguments.length){case 1:Ym.call(f,this);break;case 2:Ym.call(f,this,arguments[1]);break;case 3:Ym.call(f,this,arguments[1],arguments[2]);break;default:for(p=arguments.length,a=new Array(p-1),o=1;o<p;++o)a[o-1]=arguments[o];Km.call(f,this,a)}};Ix={on:Ap,once:eg,off:Mp,emit:tg};ig={on:Ep(Ap),once:Ep(eg),off:Ep(Mp),emit:Ep(tg)};zx=Mx({},ig);Lx.exports=rg=function(s){return s==null?Ax(zx):Mx(Object(s),ig)};rg.methods=Ix});var lc=Ee((TF,qx)=>{function Do(s){return{prev:null,next:null,data:s}}function mu(s,o,p){var d;return fu!==null?(d=fu,fu=fu.cursor,d.prev=o,d.next=p,d.cursor=s.cursor):d={prev:o,next:p,cursor:s.cursor},s.cursor=d,d}function gu(s){var o=s.cursor;s.cursor=o.cursor,o.prev=null,o.next=null,o.cursor=fu,fu=o}var fu=null,Ut=function(){this.cursor=null,this.head=null,this.tail=null};Ut.createItem=Do;Ut.prototype.createItem=Do;Ut.prototype.updateCursors=function(s,o,p,d){for(var f=this.cursor;f!==null;)f.prev===s&&(f.prev=o),f.next===p&&(f.next=d),f=f.cursor};Ut.prototype.getSize=function(){for(var s=0,o=this.head;o;)s++,o=o.next;return s};Ut.prototype.fromArray=function(s){var o=null;this.head=null;for(var p=0;p<s.length;p++){var d=Do(s[p]);o!==null?o.next=d:this.head=d,d.prev=o,o=d}return this.tail=o,this};Ut.prototype.toArray=function(){for(var s=this.head,o=[];s;)o.push(s.data),s=s.next;return o};Ut.prototype.toJSON=Ut.prototype.toArray;Ut.prototype.isEmpty=function(){return this.head===null};Ut.prototype.first=function(){return this.head&&this.head.data};Ut.prototype.last=function(){return this.tail&&this.tail.data};Ut.prototype.each=function(s,o){var p;o===void 0&&(o=this);for(var d=mu(this,null,this.head);d.next!==null;)p=d.next,d.next=p.next,s.call(o,p.data,p,this);gu(this)};Ut.prototype.forEach=Ut.prototype.each;Ut.prototype.eachRight=function(s,o){var p;o===void 0&&(o=this);for(var d=mu(this,this.tail,null);d.prev!==null;)p=d.prev,d.prev=p.prev,s.call(o,p.data,p,this);gu(this)};Ut.prototype.forEachRight=Ut.prototype.eachRight;Ut.prototype.reduce=function(s,o,p){var d;p===void 0&&(p=this);for(var f=mu(this,null,this.head),a=o;f.next!==null;)d=f.next,f.next=d.next,a=s.call(p,a,d.data,d,this);return gu(this),a};Ut.prototype.reduceRight=function(s,o,p){var d;p===void 0&&(p=this);for(var f=mu(this,this.tail,null),a=o;f.prev!==null;)d=f.prev,f.prev=d.prev,a=s.call(p,a,d.data,d,this);return gu(this),a};Ut.prototype.nextUntil=function(s,o,p){if(s!==null){var d;p===void 0&&(p=this);for(var f=mu(this,null,s);f.next!==null&&(d=f.next,f.next=d.next,!o.call(p,d.data,d,this)););gu(this)}};Ut.prototype.prevUntil=function(s,o,p){if(s!==null){var d;p===void 0&&(p=this);for(var f=mu(this,s,null);f.prev!==null&&(d=f.prev,f.prev=d.prev,!o.call(p,d.data,d,this)););gu(this)}};Ut.prototype.some=function(s,o){var p=this.head;for(o===void 0&&(o=this);p!==null;){if(s.call(o,p.data,p,this))return!0;p=p.next}return!1};Ut.prototype.map=function(s,o){var p=new Ut,d=this.head;for(o===void 0&&(o=this);d!==null;)p.appendData(s.call(o,d.data,d,this)),d=d.next;return p};Ut.prototype.filter=function(s,o){var p=new Ut,d=this.head;for(o===void 0&&(o=this);d!==null;)s.call(o,d.data,d,this)&&p.appendData(d.data),d=d.next;return p};Ut.prototype.clear=function(){this.head=null,this.tail=null};Ut.prototype.copy=function(){for(var s=new Ut,o=this.head;o!==null;)s.insert(Do(o.data)),o=o.next;return s};Ut.prototype.prepend=function(s){return this.updateCursors(null,s,this.head,s),this.head!==null?(this.head.prev=s,s.next=this.head):this.tail=s,this.head=s,this};Ut.prototype.prependData=function(s){return this.prepend(Do(s))};Ut.prototype.append=function(s){return this.insert(s)};Ut.prototype.appendData=function(s){return this.insert(Do(s))};Ut.prototype.insert=function(s,o){if(o!=null)if(this.updateCursors(o.prev,s,o,s),o.prev===null){if(this.head!==o)throw new Error("before doesn't belong to list");this.head=s,o.prev=s,s.next=o,this.updateCursors(null,s)}else o.prev.next=s,s.prev=o.prev,o.prev=s,s.next=o;else this.updateCursors(this.tail,s,null,s),this.tail!==null?(this.tail.next=s,s.prev=this.tail):this.head=s,this.tail=s;return this};Ut.prototype.insertData=function(s,o){return this.insert(Do(s),o)};Ut.prototype.remove=function(s){if(this.updateCursors(s,s.prev,s,s.next),s.prev!==null)s.prev.next=s.next;else{if(this.head!==s)throw new Error("item doesn't belong to list");this.head=s.next}if(s.next!==null)s.next.prev=s.prev;else{if(this.tail!==s)throw new Error("item doesn't belong to list");this.tail=s.prev}return s.prev=null,s.next=null,s};Ut.prototype.push=function(s){this.insert(Do(s))};Ut.prototype.pop=function(){if(this.tail!==null)return this.remove(this.tail)};Ut.prototype.unshift=function(s){this.prepend(Do(s))};Ut.prototype.shift=function(){if(this.head!==null)return this.remove(this.head)};Ut.prototype.prependList=function(s){return this.insertList(s,this.head)};Ut.prototype.appendList=function(s){return this.insertList(s)};Ut.prototype.insertList=function(s,o){return s.head===null?this:(o!=null?(this.updateCursors(o.prev,s.tail,o,s.head),o.prev!==null?(o.prev.next=s.head,s.head.prev=o.prev):this.head=s.head,o.prev=s.tail,s.tail.next=o):(this.updateCursors(this.tail,s.tail,null,s.head),this.tail!==null?(this.tail.next=s.head,s.head.prev=this.tail):this.head=s.head,this.tail=s.tail),s.head=null,s.tail=null,this)};Ut.prototype.replace=function(s,o){"head"in o?this.insertList(o,s):this.insert(o,s),this.remove(s)};qx.exports=Ut});var Dp=Ee((CF,Vx)=>{Vx.exports=function(o,p){var d=Object.create(SyntaxError.prototype),f=new Error;return d.name=o,d.message=p,Object.defineProperty(d,"stack",{get:function(){return(f.stack||"").replace(/^(.+\n){1,3}/,o+": "+p+`
`)}}),d}});var ug=Ee((kF,Zx)=>{var $M=Dp(),cg=100,Wx=60,Gx="    ";function Ux(s,o){function p(ie,$){return d.slice(ie,$).map(function(ae,te){for(var Te=String(ie+te+1);Te.length<B;)Te=" "+Te;return Te+" |"+ae}).join(`
`)}var d=s.source.split(/\r\n?|\n|\f/),f=s.line,a=s.column,T=Math.max(1,f-o)-1,M=Math.min(f+o,d.length+1),B=Math.max(4,String(M).length)+1,G=0;a+=(Gx.length-1)*(d[f-1].substr(0,a-1).match(/\t/g)||[]).length,a>cg&&(G=a-Wx+3,a=Wx-2);for(var J=T;J<=M;J++)J>=0&&J<d.length&&(d[J]=d[J].replace(/\t/g,Gx),d[J]=(G>0&&d[J].length>G?"\u2026":"")+d[J].substr(G,cg-2)+(d[J].length>G+cg-1?"\u2026":""));return[p(T,f),new Array(a+B+2).join("-")+"^",p(f,M)].filter(Boolean).join(`
`)}var HM=function(s,o,p,d,f){var a=$M("SyntaxError",s);return a.source=o,a.offset=p,a.line=d,a.column=f,a.sourceFragment=function(T){return Ux(a,isNaN(T)?0:T)},Object.defineProperty(a,"formattedMessage",{get:function(){return"Parse error: "+a.message+`
`+Ux(a,2)}}),a.parseError={offset:p,line:d,column:f},a};Zx.exports=HM});var Wh=Ee((PF,$x)=>{var hg={EOF:0,Ident:1,Function:2,AtKeyword:3,Hash:4,String:5,BadString:6,Url:7,BadUrl:8,Delim:9,Number:10,Percentage:11,Dimension:12,WhiteSpace:13,CDO:14,CDC:15,Colon:16,Semicolon:17,Comma:18,LeftSquareBracket:19,RightSquareBracket:20,LeftParenthesis:21,RightParenthesis:22,LeftCurlyBracket:23,RightCurlyBracket:24,Comment:25},YM=Object.keys(hg).reduce(function(s,o){return s[hg[o]]=o,s},{});$x.exports={TYPE:hg,NAME:YM}});var fg=Ee((EF,e0)=>{var XM=0;function wl(s){return s>=48&&s<=57}function KM(s){return wl(s)||s>=65&&s<=70||s>=97&&s<=102}function Hx(s){return s>=65&&s<=90}function Yx(s){return s>=97&&s<=122}function Xx(s){return Hx(s)||Yx(s)}function Kx(s){return s>=128}function Gh(s){return Xx(s)||Kx(s)||s===95}function JM(s){return Gh(s)||wl(s)||s===45}function Jx(s){return s>=0&&s<=8||s===11||s>=14&&s<=31||s===127}function pg(s){return s===10||s===13||s===12}function Qx(s){return pg(s)||s===32||s===9}function dg(s,o){return!(s!==92||pg(o)||o===XM)}function QM(s,o,p){return s===45?Gh(o)||o===45||dg(o,p):Gh(s)?!0:s===92?dg(s,o):!1}function eI(s,o,p){return s===43||s===45?wl(o)?2:o===46&&wl(p)?3:0:s===46?wl(o)?2:0:wl(s)?1:0}function tI(s){return s===65279||s===65534?1:0}var cc=new Array(128);ja.Eof=128;ja.WhiteSpace=130;ja.Digit=131;ja.NameStart=132;ja.NonPrintable=133;for(xa=0;xa<cc.length;xa++)switch(!0){case Qx(xa):cc[xa]=ja.WhiteSpace;break;case wl(xa):cc[xa]=ja.Digit;break;case Gh(xa):cc[xa]=ja.NameStart;break;case Jx(xa):cc[xa]=ja.NonPrintable;break;default:cc[xa]=xa||ja.Eof}var xa;function ja(s){return s<128?cc[s]:ja.NameStart}e0.exports={isDigit:wl,isHexDigit:KM,isUppercaseLetter:Hx,isLowercaseLetter:Yx,isLetter:Xx,isNonAscii:Kx,isNameStart:Gh,isName:JM,isNonPrintable:Jx,isNewline:pg,isWhiteSpace:Qx,isValidEscape:dg,isIdentifierStart:QM,isNumberStart:eI,isBOM:tI,charCodeCategory:ja}});var vu=Ee((AF,s0)=>{var _u=fg(),Rp=_u.isDigit,t0=_u.isHexDigit,i0=_u.isUppercaseLetter,iI=_u.isName,gg=_u.isWhiteSpace,r0=_u.isValidEscape;function yu(s,o){return o<s.length?s.charCodeAt(o):0}function n0(s,o,p){return p===13&&yu(s,o+1)===10?2:1}function a0(s,o,p){var d=s.charCodeAt(o);return i0(d)&&(d=d|32),d===p}function rI(s,o,p,d){if(p-o!==d.length||o<0||p>s.length)return!1;for(var f=o;f<p;f++){var a=s.charCodeAt(f),T=d.charCodeAt(f-o);if(i0(a)&&(a=a|32),a!==T)return!1}return!0}function nI(s,o){for(;o>=0&&gg(s.charCodeAt(o));o--);return o+1}function aI(s,o){for(;o<s.length&&gg(s.charCodeAt(o));o++);return o}function mg(s,o){for(;o<s.length&&Rp(s.charCodeAt(o));o++);return o}function yg(s,o){if(o+=2,t0(yu(s,o-1))){for(var p=Math.min(s.length,o+5);o<p&&t0(yu(s,o));o++);var d=yu(s,o);gg(d)&&(o+=n0(s,o,d))}return o}function sI(s,o){for(;o<s.length;o++){var p=s.charCodeAt(o);if(!iI(p)){if(r0(p,yu(s,o+1))){o=yg(s,o)-1;continue}break}}return o}function oI(s,o){var p=s.charCodeAt(o);if((p===43||p===45)&&(p=s.charCodeAt(o+=1)),Rp(p)&&(o=mg(s,o+1),p=s.charCodeAt(o)),p===46&&Rp(s.charCodeAt(o+1))&&(p=s.charCodeAt(o+=2),o=mg(s,o)),a0(s,o,101)){var d=0;p=s.charCodeAt(o+1),(p===45||p===43)&&(d=1,p=s.charCodeAt(o+2)),Rp(p)&&(o=mg(s,o+1+d+1))}return o}function lI(s,o){for(;o<s.length;o++){var p=s.charCodeAt(o);if(p===41){o++;break}r0(p,yu(s,o+1))&&(o=yg(s,o))}return o}s0.exports={consumeEscaped:yg,consumeName:sI,consumeNumber:oI,consumeBadUrlRemnants:lI,cmpChar:a0,cmpStr:rI,getNewlineLength:n0,findWhiteSpaceStart:nI,findWhiteSpaceEnd:aI}});var Zh=Ee((MF,h0)=>{var c0=Wh(),Uh=c0.TYPE,cI=c0.NAME,uI=vu(),hI=uI.cmpStr,o0=Uh.EOF,l0=Uh.WhiteSpace,dI=Uh.Comment,ys=16777215,bu=24,u0=function(){this.offsetAndType=null,this.balance=null,this.reset()};u0.prototype={reset:function(){this.eof=!1,this.tokenIndex=-1,this.tokenType=0,this.tokenStart=this.firstCharOffset,this.tokenEnd=this.firstCharOffset},lookupType:function(s){return s+=this.tokenIndex,s<this.tokenCount?this.offsetAndType[s]>>bu:o0},lookupOffset:function(s){return s+=this.tokenIndex,s<this.tokenCount?this.offsetAndType[s-1]&ys:this.source.length},lookupValue:function(s,o){return s+=this.tokenIndex,s<this.tokenCount?hI(this.source,this.offsetAndType[s-1]&ys,this.offsetAndType[s]&ys,o):!1},getTokenStart:function(s){return s===this.tokenIndex?this.tokenStart:s>0?s<this.tokenCount?this.offsetAndType[s-1]&ys:this.offsetAndType[this.tokenCount]&ys:this.firstCharOffset},getRawLength:function(s,o){var p=s,d,f=this.offsetAndType[Math.max(p-1,0)]&ys,a;e:for(;p<this.tokenCount;p++){if(d=this.balance[p],d<s)break e;switch(a=this.offsetAndType[p]>>bu,o(a,this.source,f)){case 1:break e;case 2:p++;break e;default:this.balance[d]===p&&(p=d),f=this.offsetAndType[p]&ys}}return p-this.tokenIndex},isBalanceEdge:function(s){return this.balance[this.tokenIndex]<s},isDelim:function(s,o){return o?this.lookupType(o)===Uh.Delim&&this.source.charCodeAt(this.lookupOffset(o))===s:this.tokenType===Uh.Delim&&this.source.charCodeAt(this.tokenStart)===s},getTokenValue:function(){return this.source.substring(this.tokenStart,this.tokenEnd)},getTokenLength:function(){return this.tokenEnd-this.tokenStart},substrToCursor:function(s){return this.source.substring(s,this.tokenStart)},skipWS:function(){for(var s=this.tokenIndex,o=0;s<this.tokenCount&&this.offsetAndType[s]>>bu===l0;s++,o++);o>0&&this.skip(o)},skipSC:function(){for(;this.tokenType===l0||this.tokenType===dI;)this.next()},skip:function(s){var o=this.tokenIndex+s;o<this.tokenCount?(this.tokenIndex=o,this.tokenStart=this.offsetAndType[o-1]&ys,o=this.offsetAndType[o],this.tokenType=o>>bu,this.tokenEnd=o&ys):(this.tokenIndex=this.tokenCount,this.next())},next:function(){var s=this.tokenIndex+1;s<this.tokenCount?(this.tokenIndex=s,this.tokenStart=this.tokenEnd,s=this.offsetAndType[s],this.tokenType=s>>bu,this.tokenEnd=s&ys):(this.tokenIndex=this.tokenCount,this.eof=!0,this.tokenType=o0,this.tokenStart=this.tokenEnd=this.source.length)},forEachToken(s){for(var o=0,p=this.firstCharOffset;o<this.tokenCount;o++){var d=p,f=this.offsetAndType[o],a=f&ys,T=f>>bu;p=a,s(T,d,a,o)}},dump(){var s=new Array(this.tokenCount);return this.forEachToken((o,p,d,f)=>{s[f]={idx:f,type:cI[o],chunk:this.source.substring(p,d),balance:this.balance[f]}}),s}};h0.exports=u0});var Bp=Ee((IF,d0)=>{function pI(s){return s}function fI(s){return s.min===0&&s.max===0?"*":s.min===0&&s.max===1?"?":s.min===1&&s.max===0?s.comma?"#":"+":s.min===1&&s.max===1?"":(s.comma?"#":"")+(s.min===s.max?"{"+s.min+"}":"{"+s.min+","+(s.max!==0?s.max:"")+"}")}function mI(s){switch(s.type){case"Range":return" ["+(s.min===null?"-\u221E":s.min)+","+(s.max===null?"\u221E":s.max)+"]";default:throw new Error("Unknown node type `"+s.type+"`")}}function gI(s,o,p,d){var f=s.combinator===" "||d?s.combinator:" "+s.combinator+" ",a=s.terms.map(function(T){return _g(T,o,p,d)}).join(f);return(s.explicit||p)&&(a=(d||a[0]===","?"[":"[ ")+a+(d?"]":" ]")),a}function _g(s,o,p,d){var f;switch(s.type){case"Group":f=gI(s,o,p,d)+(s.disallowEmpty?"!":"");break;case"Multiplier":return _g(s.term,o,p,d)+o(fI(s),s);case"Type":f="<"+s.name+(s.opts?o(mI(s.opts),s.opts):"")+">";break;case"Property":f="<'"+s.name+"'>";break;case"Keyword":f=s.name;break;case"AtKeyword":f="@"+s.name;break;case"Function":f=s.name+"(";break;case"String":case"Token":f=s.value;break;case"Comma":f=",";break;default:throw new Error("Unknown node type `"+s.type+"`")}return o(f,s)}d0.exports=function(s,o){var p=pI,d=!1,f=!1;return typeof o=="function"?p=o:o&&(d=!!o.forceBraces,f=!!o.compact,typeof o.decorate=="function"&&(p=o.decorate)),_g(s,p,d,f)}});var vg=Ee((zF,m0)=>{var f0=Dp(),yI=Bp(),p0={offset:0,line:1,column:1};function _I(s,o){let p=s.tokens,d=s.longestMatch,f=d<p.length&&p[d].node||null,a=f!==o?f:null,T=0,M=0,B=0,G="",J,ie;for(let $=0;$<p.length;$++){let ae=p[$].value;$===d&&(M=ae.length,T=G.length),a!==null&&p[$].node===a&&($<=d?B++:B=0),G+=ae}return d===p.length||B>1?(J=Fp(a||o,"end")||$h(p0,G),ie=$h(J)):(J=Fp(a,"start")||$h(Fp(o,"start")||p0,G.slice(0,T)),ie=Fp(a,"end")||$h(J,G.substr(T,M))),{css:G,mismatchOffset:T,mismatchLength:M,start:J,end:ie}}function Fp(s,o){let p=s&&s.loc&&s.loc[o];return p?"line"in p?$h(p):p:null}function $h({offset:s,line:o,column:p},d){let f={offset:s,line:o,column:p};if(d){let a=d.split(/\n|\r\n?|\f/);f.offset+=d.length,f.line+=a.length-1,f.column=a.length===1?f.column+d.length:a.pop().length+1}return f}var vI=function(s,o){let p=f0("SyntaxReferenceError",s+(o?" `"+o+"`":""));return p.reference=o,p},bI=function(s,o,p,d){let f=f0("SyntaxMatchError",s),{css:a,mismatchOffset:T,mismatchLength:M,start:B,end:G}=_I(d,p);return f.rawMessage=s,f.syntax=o?yI(o):"<generic>",f.css=a,f.mismatchOffset=T,f.mismatchLength=M,f.message=s+`
  syntax: `+f.syntax+`
   value: `+(a||"<empty string>")+`
  --------`+new Array(f.mismatchOffset+1).join("-")+"^",Object.assign(f,B),f.loc={source:p&&p.loc&&p.loc.source||"<unknown>",start:B,end:G},f};m0.exports={SyntaxReferenceError:vI,SyntaxMatchError:bI}});var qp=Ee((LF,g0)=>{var jp=Object.prototype.hasOwnProperty,xu=Object.create(null),wu=Object.create(null),Np=45;function bg(s,o){return o=o||0,s.length-o>=2&&s.charCodeAt(o)===Np&&s.charCodeAt(o+1)===Np}function xg(s,o){if(o=o||0,s.length-o>=3&&s.charCodeAt(o)===Np&&s.charCodeAt(o+1)!==Np){var p=s.indexOf("-",o+2);if(p!==-1)return s.substring(o,p+1)}return""}function xI(s){if(jp.call(xu,s))return xu[s];var o=s.toLowerCase();if(jp.call(xu,o))return xu[s]=xu[o];var p=bg(o,0),d=p?"":xg(o,0);return xu[s]=Object.freeze({basename:o.substr(d.length),name:o,vendor:d,prefix:d,custom:p})}function wI(s){if(jp.call(wu,s))return wu[s];var o=s,p=s[0];p==="/"?p=s[1]==="/"?"//":"/":p!=="_"&&p!=="*"&&p!=="$"&&p!=="#"&&p!=="+"&&p!=="&"&&(p="");var d=bg(o,p.length);if(!d&&(o=o.toLowerCase(),jp.call(wu,o)))return wu[s]=wu[o];var f=d?"":xg(o,p.length),a=o.substr(0,p.length+f.length);return wu[s]=Object.freeze({basename:o.substr(a.length),name:o.substr(p.length),hack:p,vendor:f,prefix:a,custom:d})}g0.exports={keyword:xI,property:wI,isCustomProperty:bg,vendorPrefix:xg}});var wg=Ee((OF,y0)=>{var SI=16384,TI=typeof Uint32Array<"u"?Uint32Array:Array;y0.exports=function(o,p){return o===null||o.length<p?new TI(Math.max(p+1024,SI)):o}});var vt=Ee((DF,S0)=>{var CI=Zh(),_0=wg(),kg=Wh(),$t=kg.TYPE,Ro=fg(),v0=Ro.isNewline,kI=Ro.isName,Vp=Ro.isValidEscape,Sg=Ro.isNumberStart,Tg=Ro.isIdentifierStart,Na=Ro.charCodeCategory,PI=Ro.isBOM,Bo=vu(),EI=Bo.cmpStr,b0=Bo.getNewlineLength,Wp=Bo.findWhiteSpaceEnd,x0=Bo.consumeEscaped,Gp=Bo.consumeName,AI=Bo.consumeNumber,Cg=Bo.consumeBadUrlRemnants,w0=16777215,Su=24;function Up(s,o){function p(Ze){return Ze<M?s.charCodeAt(Ze):0}function d(){if($=AI(s,$),Tg(p($),p($+1),p($+2))){xe=$t.Dimension,$=Gp(s,$);return}if(p($)===37){xe=$t.Percentage,$++;return}xe=$t.Number}function f(){let Ze=$;if($=Gp(s,$),EI(s,Ze,$,"url")&&p($)===40){if($=Wp(s,$+1),p($)===34||p($)===39){xe=$t.Function,$=Ze+4;return}T();return}if(p($)===40){xe=$t.Function,$++;return}xe=$t.Ident}function a(Ze){for(Ze||(Ze=p($++)),xe=$t.String;$<s.length;$++){var dt=s.charCodeAt($);switch(Na(dt)){case Ze:$++;return;case Na.Eof:return;case Na.WhiteSpace:if(v0(dt)){$+=b0(s,$,dt),xe=$t.BadString;return}break;case 92:if($===s.length-1)break;var mt=p($+1);v0(mt)?$+=b0(s,$+1,mt):Vp(dt,mt)&&($=x0(s,$)-1);break}}}function T(){for(xe=$t.Url,$=Wp(s,$);$<s.length;$++){var Ze=s.charCodeAt($);switch(Na(Ze)){case 41:$++;return;case Na.Eof:return;case Na.WhiteSpace:if($=Wp(s,$),p($)===41||$>=s.length){$<s.length&&$++;return}$=Cg(s,$),xe=$t.BadUrl;return;case 34:case 39:case 40:case Na.NonPrintable:$=Cg(s,$),xe=$t.BadUrl;return;case 92:if(Vp(Ze,p($+1))){$=x0(s,$)-1;break}$=Cg(s,$),xe=$t.BadUrl;return}}}o||(o=new CI),s=String(s||"");for(var M=s.length,B=_0(o.offsetAndType,M+1),G=_0(o.balance,M+1),J=0,ie=PI(p(0)),$=ie,ae=0,te=0,Te=0;$<M;){var We=s.charCodeAt($),xe=0;switch(G[J]=M,Na(We)){case Na.WhiteSpace:xe=$t.WhiteSpace,$=Wp(s,$+1);break;case 34:a();break;case 35:kI(p($+1))||Vp(p($+1),p($+2))?(xe=$t.Hash,$=Gp(s,$+1)):(xe=$t.Delim,$++);break;case 39:a();break;case 40:xe=$t.LeftParenthesis,$++;break;case 41:xe=$t.RightParenthesis,$++;break;case 43:Sg(We,p($+1),p($+2))?d():(xe=$t.Delim,$++);break;case 44:xe=$t.Comma,$++;break;case 45:Sg(We,p($+1),p($+2))?d():p($+1)===45&&p($+2)===62?(xe=$t.CDC,$=$+3):Tg(We,p($+1),p($+2))?f():(xe=$t.Delim,$++);break;case 46:Sg(We,p($+1),p($+2))?d():(xe=$t.Delim,$++);break;case 47:p($+1)===42?(xe=$t.Comment,$=s.indexOf("*/",$+2)+2,$===1&&($=s.length)):(xe=$t.Delim,$++);break;case 58:xe=$t.Colon,$++;break;case 59:xe=$t.Semicolon,$++;break;case 60:p($+1)===33&&p($+2)===45&&p($+3)===45?(xe=$t.CDO,$=$+4):(xe=$t.Delim,$++);break;case 64:Tg(p($+1),p($+2),p($+3))?(xe=$t.AtKeyword,$=Gp(s,$+1)):(xe=$t.Delim,$++);break;case 91:xe=$t.LeftSquareBracket,$++;break;case 92:Vp(We,p($+1))?f():(xe=$t.Delim,$++);break;case 93:xe=$t.RightSquareBracket,$++;break;case 123:xe=$t.LeftCurlyBracket,$++;break;case 125:xe=$t.RightCurlyBracket,$++;break;case Na.Digit:d();break;case Na.NameStart:f();break;case Na.Eof:break;default:xe=$t.Delim,$++}switch(xe){case ae:for(Te=te&w0,te=G[Te],ae=te>>Su,G[J]=Te,G[Te++]=J;Te<J;Te++)G[Te]===M&&(G[Te]=J);break;case $t.LeftParenthesis:case $t.Function:G[J]=te,ae=$t.RightParenthesis,te=ae<<Su|J;break;case $t.LeftSquareBracket:G[J]=te,ae=$t.RightSquareBracket,te=ae<<Su|J;break;case $t.LeftCurlyBracket:G[J]=te,ae=$t.RightCurlyBracket,te=ae<<Su|J;break}B[J++]=xe<<Su|$}for(B[J]=$t.EOF<<Su|$,G[J]=M,G[M]=M;te!==0;)Te=te&w0,te=G[Te],G[Te]=M;return o.source=s,o.firstCharOffset=ie,o.offsetAndType=B,o.tokenCount=J,o.balance=G,o.reset(),o.next(),o}Object.keys(kg).forEach(function(s){Up[s]=kg[s]});Object.keys(Ro).forEach(function(s){Up[s]=Ro[s]});Object.keys(Bo).forEach(function(s){Up[s]=Bo[s]});S0.exports=Up});var k0=Ee((RF,C0)=>{var T0=vt().isDigit,Pg=vt().cmpChar,Cu=vt().TYPE,MI=Cu.Delim,II=Cu.WhiteSpace,zI=Cu.Comment,Zp=Cu.Ident,Mg=Cu.Number,LI=Cu.Dimension,Yh=43,Hs=45,Eg=110,Tu=!0,OI=!1;function Ig(s,o){return s!==null&&s.type===MI&&s.value.charCodeAt(0)===o}function Hh(s,o,p){for(;s!==null&&(s.type===II||s.type===zI);)s=p(++o);return o}function Sl(s,o,p,d){if(!s)return 0;var f=s.value.charCodeAt(o);if(f===Yh||f===Hs){if(p)return 0;o++}for(;o<s.value.length;o++)if(!T0(s.value.charCodeAt(o)))return 0;return d+1}function Ag(s,o,p){var d=!1,f=Hh(s,o,p);if(s=p(f),s===null)return o;if(s.type!==Mg)if(Ig(s,Yh)||Ig(s,Hs)){if(d=!0,f=Hh(p(++f),f,p),s=p(f),s===null&&s.type!==Mg)return 0}else return o;if(!d){var a=s.value.charCodeAt(0);if(a!==Yh&&a!==Hs)return 0}return Sl(s,d?0:1,d,f)}C0.exports=function(o,p){var d=0;if(!o)return 0;if(o.type===Mg)return Sl(o,0,OI,d);if(o.type===Zp&&o.value.charCodeAt(0)===Hs){if(!Pg(o.value,1,Eg))return 0;switch(o.value.length){case 2:return Ag(p(++d),d,p);case 3:return o.value.charCodeAt(2)!==Hs?0:(d=Hh(p(++d),d,p),o=p(d),Sl(o,0,Tu,d));default:return o.value.charCodeAt(2)!==Hs?0:Sl(o,3,Tu,d)}}else if(o.type===Zp||Ig(o,Yh)&&p(d+1).type===Zp){if(o.type!==Zp&&(o=p(++d)),o===null||!Pg(o.value,0,Eg))return 0;switch(o.value.length){case 1:return Ag(p(++d),d,p);case 2:return o.value.charCodeAt(1)!==Hs?0:(d=Hh(p(++d),d,p),o=p(d),Sl(o,0,Tu,d));default:return o.value.charCodeAt(1)!==Hs?0:Sl(o,2,Tu,d)}}else if(o.type===LI){for(var f=o.value.charCodeAt(0),a=f===Yh||f===Hs?1:0,T=a;T<o.value.length&&T0(o.value.charCodeAt(T));T++);return T===a||!Pg(o.value,T,Eg)?0:T+1===o.value.length?Ag(p(++d),d,p):o.value.charCodeAt(T+1)!==Hs?0:T+2===o.value.length?(d=Hh(p(++d),d,p),o=p(d),Sl(o,0,Tu,d)):Sl(o,T+2,Tu,d)}return 0}});var L0=Ee((BF,z0)=>{var DI=vt().isHexDigit,RI=vt().cmpChar,Hp=vt().TYPE,P0=Hp.Ident,BI=Hp.Delim,E0=Hp.Number,A0=Hp.Dimension,zg=43,M0=45,I0=63,FI=117;function Og(s,o){return s!==null&&s.type===BI&&s.value.charCodeAt(0)===o}function Lg(s,o){return s.value.charCodeAt(0)===o}function Xh(s,o,p){for(var d=o,f=0;d<s.value.length;d++){var a=s.value.charCodeAt(d);if(a===M0&&p&&f!==0)return Xh(s,o+f+1,!1)>0?6:0;if(!DI(a)||++f>6)return 0}return f}function $p(s,o,p){if(!s)return 0;for(;Og(p(o),I0);){if(++s>6)return 0;o++}return o}z0.exports=function(o,p){var d=0;if(o===null||o.type!==P0||!RI(o.value,0,FI)||(o=p(++d),o===null))return 0;if(Og(o,zg))return o=p(++d),o===null?0:o.type===P0?$p(Xh(o,0,!0),++d,p):Og(o,I0)?$p(1,++d,p):0;if(o.type===E0){if(!Lg(o,zg))return 0;var f=Xh(o,1,!0);return f===0?0:(o=p(++d),o===null?d:o.type===A0||o.type===E0?!Lg(o,M0)||!Xh(o,1,!1)?0:d+1:$p(f,d,p))}return o.type===A0&&Lg(o,zg)?$p(Xh(o,1,!0),++d,p):0}});var q0=Ee((FF,N0)=>{var ku=vt(),jI=ku.isIdentifierStart,NI=ku.isHexDigit,D0=ku.isDigit,qI=ku.cmpStr,R0=ku.consumeNumber,Lt=ku.TYPE,VI=k0(),WI=L0(),GI=["unset","initial","inherit"],UI=["calc(","-moz-calc(","-webkit-calc("],ZI={px:!0,mm:!0,cm:!0,in:!0,pt:!0,pc:!0,q:!0,em:!0,ex:!0,ch:!0,rem:!0,vh:!0,vw:!0,vmin:!0,vmax:!0,vm:!0},$I={deg:!0,grad:!0,rad:!0,turn:!0},HI={s:!0,ms:!0},YI={hz:!0,khz:!0},XI={dpi:!0,dpcm:!0,dppx:!0,x:!0},KI={fr:!0},JI={db:!0},QI={st:!0};function Kh(s,o){return o<s.length?s.charCodeAt(o):0}function Dg(s,o){return qI(s,0,s.length,o)}function B0(s,o){for(var p=0;p<o.length;p++)if(Dg(s,o[p]))return!0;return!1}function F0(s,o){return o!==s.length-2?!1:s.charCodeAt(o)===92&&D0(s.charCodeAt(o+1))}function Yp(s,o,p){if(s&&s.type==="Range"){var d=Number(p!==void 0&&p!==o.length?o.substr(0,p):o);if(isNaN(d)||s.min!==null&&d<s.min||s.max!==null&&d>s.max)return!0}return!1}function j0(s,o){var p=s.index,d=0;do if(d++,s.balance<=p)break;while(s=o(d));return d}function qa(s){return function(o,p,d){return o===null?0:o.type===Lt.Function&&B0(o.value,UI)?j0(o,p):s(o,p,d)}}function Hi(s){return function(o){return o===null||o.type!==s?0:1}}function ez(s){return s=s+"(",function(o,p){return o!==null&&Dg(o.value,s)?j0(o,p):0}}function tz(s){if(s===null||s.type!==Lt.Ident)return 0;var o=s.value.toLowerCase();return B0(o,GI)||Dg(o,"default")?0:1}function iz(s){return s===null||s.type!==Lt.Ident||Kh(s.value,0)!==45||Kh(s.value,1)!==45?0:1}function rz(s){if(s===null||s.type!==Lt.Hash)return 0;var o=s.value.length;if(o!==4&&o!==5&&o!==7&&o!==9)return 0;for(var p=1;p<o;p++)if(!NI(s.value.charCodeAt(p)))return 0;return 1}function nz(s){return s===null||s.type!==Lt.Hash||!jI(Kh(s.value,1),Kh(s.value,2),Kh(s.value,3))?0:1}function az(s,o){if(!s)return 0;var p=0,d=0,f=s.index;e:do{switch(s.type){case Lt.BadString:case Lt.BadUrl:break e;case Lt.RightCurlyBracket:case Lt.RightParenthesis:case Lt.RightSquareBracket:if(s.balance>s.index||s.balance<f)break e;d--;break;case Lt.Semicolon:if(d===0)break e;break;case Lt.Delim:if(s.value==="!"&&d===0)break e;break;case Lt.Function:case Lt.LeftParenthesis:case Lt.LeftSquareBracket:case Lt.LeftCurlyBracket:d++;break}if(p++,s.balance<=f)break}while(s=o(p));return p}function sz(s,o){if(!s)return 0;var p=s.index,d=0;e:do{switch(s.type){case Lt.BadString:case Lt.BadUrl:break e;case Lt.RightCurlyBracket:case Lt.RightParenthesis:case Lt.RightSquareBracket:if(s.balance>s.index||s.balance<p)break e;break}if(d++,s.balance<=p)break}while(s=o(d));return d}function Fo(s){return function(o,p,d){if(o===null||o.type!==Lt.Dimension)return 0;var f=R0(o.value,0);if(s!==null){var a=o.value.indexOf("\\",f),T=a===-1||!F0(o.value,a)?o.value.substr(f):o.value.substring(f,a);if(s.hasOwnProperty(T.toLowerCase())===!1)return 0}return Yp(d,o.value,f)?0:1}}function oz(s,o,p){return s===null||s.type!==Lt.Percentage||Yp(p,s.value,s.value.length-1)?0:1}function O0(s){return typeof s!="function"&&(s=function(){return 0}),function(o,p,d){return o!==null&&o.type===Lt.Number&&Number(o.value)===0?1:s(o,p,d)}}function lz(s,o,p){if(s===null)return 0;var d=R0(s.value,0),f=d===s.value.length;return!f&&!F0(s.value,d)||Yp(p,s.value,d)?0:1}function cz(s,o,p){if(s===null||s.type!==Lt.Number)return 0;for(var d=s.value.charCodeAt(0)===43||s.value.charCodeAt(0)===45?1:0;d<s.value.length;d++)if(!D0(s.value.charCodeAt(d)))return 0;return Yp(p,s.value,d)?0:1}N0.exports={"ident-token":Hi(Lt.Ident),"function-token":Hi(Lt.Function),"at-keyword-token":Hi(Lt.AtKeyword),"hash-token":Hi(Lt.Hash),"string-token":Hi(Lt.String),"bad-string-token":Hi(Lt.BadString),"url-token":Hi(Lt.Url),"bad-url-token":Hi(Lt.BadUrl),"delim-token":Hi(Lt.Delim),"number-token":Hi(Lt.Number),"percentage-token":Hi(Lt.Percentage),"dimension-token":Hi(Lt.Dimension),"whitespace-token":Hi(Lt.WhiteSpace),"CDO-token":Hi(Lt.CDO),"CDC-token":Hi(Lt.CDC),"colon-token":Hi(Lt.Colon),"semicolon-token":Hi(Lt.Semicolon),"comma-token":Hi(Lt.Comma),"[-token":Hi(Lt.LeftSquareBracket),"]-token":Hi(Lt.RightSquareBracket),"(-token":Hi(Lt.LeftParenthesis),")-token":Hi(Lt.RightParenthesis),"{-token":Hi(Lt.LeftCurlyBracket),"}-token":Hi(Lt.RightCurlyBracket),string:Hi(Lt.String),ident:Hi(Lt.Ident),"custom-ident":tz,"custom-property-name":iz,"hex-color":rz,"id-selector":nz,"an-plus-b":VI,urange:WI,"declaration-value":az,"any-value":sz,dimension:qa(Fo(null)),angle:qa(Fo($I)),decibel:qa(Fo(JI)),frequency:qa(Fo(YI)),flex:qa(Fo(KI)),length:qa(O0(Fo(ZI))),resolution:qa(Fo(XI)),semitones:qa(Fo(QI)),time:qa(Fo(HI)),percentage:qa(oz),zero:O0(),number:qa(lz),integer:qa(cz),"-ms-legacy-expression":ez("expression")}});var Rg=Ee((jF,V0)=>{var uz=Dp();V0.exports=function(o,p,d){var f=uz("SyntaxError",o);return f.input=p,f.offset=d,f.rawMessage=o,f.message=f.rawMessage+`
  `+f.input+`
--`+new Array((f.offset||f.input.length)+1).join("-")+"^",f}});var U0=Ee((NF,G0)=>{var hz=Rg(),dz=9,pz=10,fz=12,mz=13,gz=32,W0=function(s){this.str=s,this.pos=0};W0.prototype={charCodeAt:function(s){return s<this.str.length?this.str.charCodeAt(s):0},charCode:function(){return this.charCodeAt(this.pos)},nextCharCode:function(){return this.charCodeAt(this.pos+1)},nextNonWsCode:function(s){return this.charCodeAt(this.findWsEnd(s))},findWsEnd:function(s){for(;s<this.str.length;s++){var o=this.str.charCodeAt(s);if(o!==mz&&o!==pz&&o!==fz&&o!==gz&&o!==dz)break}return s},substringToPos:function(s){return this.str.substring(this.pos,this.pos=s)},eat:function(s){this.charCode()!==s&&this.error("Expect `"+String.fromCharCode(s)+"`"),this.pos++},peek:function(){return this.pos<this.str.length?this.str.charAt(this.pos++):""},error:function(s){throw new hz(s,this.str,this.pos)}};G0.exports=W0});var rf=Ee((qF,l1)=>{var yz=U0(),_z=9,vz=10,bz=12,xz=13,wz=32,Q0=33,e1=35,Z0=38,Xp=39,t1=40,Sz=41,i1=42,r1=43,jg=44,$0=45,Ng=60,n1=62,a1=63,Tz=64,ef=91,qg=93,Kp=123,H0=124,Y0=125,X0=8734,Fg=Cz(function(s){return/[a-zA-Z0-9\-]/.test(s)}),K0={" ":1,"&&":2,"||":3,"|":4};function Cz(s){for(var o=typeof Uint32Array=="function"?new Uint32Array(128):new Array(128),p=0;p<128;p++)o[p]=s(String.fromCharCode(p))?1:0;return o}function Jp(s){return s.substringToPos(s.findWsEnd(s.pos))}function tf(s){for(var o=s.pos;o<s.str.length;o++){var p=s.str.charCodeAt(o);if(p>=128||Fg[p]===0)break}return s.pos===o&&s.error("Expect a keyword"),s.substringToPos(o)}function Qp(s){for(var o=s.pos;o<s.str.length;o++){var p=s.str.charCodeAt(o);if(p<48||p>57)break}return s.pos===o&&s.error("Expect a number"),s.substringToPos(o)}function kz(s){var o=s.str.indexOf("'",s.pos+1);return o===-1&&(s.pos=s.str.length,s.error("Expect an apostrophe")),s.substringToPos(o+1)}function J0(s){var o=null,p=null;return s.eat(Kp),o=Qp(s),s.charCode()===jg?(s.pos++,s.charCode()!==Y0&&(p=Qp(s))):p=o,s.eat(Y0),{min:Number(o),max:p?Number(p):0}}function Pz(s){var o=null,p=!1;switch(s.charCode()){case i1:s.pos++,o={min:0,max:0};break;case r1:s.pos++,o={min:1,max:0};break;case a1:s.pos++,o={min:0,max:1};break;case e1:s.pos++,p=!0,s.charCode()===Kp?o=J0(s):o={min:1,max:0};break;case Kp:o=J0(s);break;default:return null}return{type:"Multiplier",comma:p,min:o.min,max:o.max,term:null}}function Jh(s,o){var p=Pz(s);return p!==null?(p.term=o,p):o}function Bg(s){var o=s.peek();return o===""?null:{type:"Token",value:o}}function Ez(s){var o;return s.eat(Ng),s.eat(Xp),o=tf(s),s.eat(Xp),s.eat(n1),Jh(s,{type:"Property",name:o})}function Az(s){var o=null,p=null,d=1;return s.eat(ef),s.charCode()===$0&&(s.peek(),d=-1),d==-1&&s.charCode()===X0?s.peek():o=d*Number(Qp(s)),Jp(s),s.eat(jg),Jp(s),s.charCode()===X0?s.peek():(d=1,s.charCode()===$0&&(s.peek(),d=-1),p=d*Number(Qp(s))),s.eat(qg),o===null&&p===null?null:{type:"Range",min:o,max:p}}function Mz(s){var o,p=null;return s.eat(Ng),o=tf(s),s.charCode()===t1&&s.nextCharCode()===Sz&&(s.pos+=2,o+="()"),s.charCodeAt(s.findWsEnd(s.pos))===ef&&(Jp(s),p=Az(s)),s.eat(n1),Jh(s,{type:"Type",name:o,opts:p})}function Iz(s){var o;return o=tf(s),s.charCode()===t1?(s.pos++,{type:"Function",name:o}):Jh(s,{type:"Keyword",name:o})}function zz(s,o){function p(M,B){return{type:"Group",terms:M,combinator:B,disallowEmpty:!1,explicit:!1}}for(o=Object.keys(o).sort(function(M,B){return K0[M]-K0[B]});o.length>0;){for(var d=o.shift(),f=0,a=0;f<s.length;f++){var T=s[f];T.type==="Combinator"&&(T.value===d?(a===-1&&(a=f-1),s.splice(f,1),f--):(a!==-1&&f-a>1&&(s.splice(a,f-a,p(s.slice(a,f),d)),f=a+1),a=-1))}a!==-1&&o.length&&s.splice(a,f-a,p(s.slice(a,f),d))}return d}function s1(s){for(var o=[],p={},d,f=null,a=s.pos;d=Oz(s);)d.type!=="Spaces"&&(d.type==="Combinator"?((f===null||f.type==="Combinator")&&(s.pos=a,s.error("Unexpected combinator")),p[d.value]=!0):f!==null&&f.type!=="Combinator"&&(p[" "]=!0,o.push({type:"Combinator",value:" "})),o.push(d),f=d,a=s.pos);return f!==null&&f.type==="Combinator"&&(s.pos-=a,s.error("Unexpected combinator")),{type:"Group",terms:o,combinator:zz(o,p)||" ",disallowEmpty:!1,explicit:!1}}function Lz(s){var o;return s.eat(ef),o=s1(s),s.eat(qg),o.explicit=!0,s.charCode()===Q0&&(s.pos++,o.disallowEmpty=!0),o}function Oz(s){var o=s.charCode();if(o<128&&Fg[o]===1)return Iz(s);switch(o){case qg:break;case ef:return Jh(s,Lz(s));case Ng:return s.nextCharCode()===Xp?Ez(s):Mz(s);case H0:return{type:"Combinator",value:s.substringToPos(s.nextCharCode()===H0?s.pos+2:s.pos+1)};case Z0:return s.pos++,s.eat(Z0),{type:"Combinator",value:"&&"};case jg:return s.pos++,{type:"Comma"};case Xp:return Jh(s,{type:"String",value:kz(s)});case wz:case _z:case vz:case xz:case bz:return{type:"Spaces",value:Jp(s)};case Tz:return o=s.nextCharCode(),o<128&&Fg[o]===1?(s.pos++,{type:"AtKeyword",name:tf(s)}):Bg(s);case i1:case r1:case a1:case e1:case Q0:break;case Kp:if(o=s.nextCharCode(),o<48||o>57)return Bg(s);break;default:return Bg(s)}}function o1(s){var o=new yz(s),p=s1(o);return o.pos!==s.length&&o.error("Unexpected input"),p.terms.length===1&&p.terms[0].type==="Group"&&(p=p.terms[0]),p}o1("[a&&<b>#|<'c'>*||e() f{2} /,(% g#{1,2} h{2,})]!");l1.exports=o1});var Vg=Ee((VF,u1)=>{var Qh=function(){};function c1(s){return typeof s=="function"?s:Qh}u1.exports=function(s,o,p){function d(T){switch(f.call(p,T),T.type){case"Group":T.terms.forEach(d);break;case"Multiplier":d(T.term);break;case"Type":case"Property":case"Keyword":case"AtKeyword":case"Function":case"String":case"Token":case"Comma":break;default:throw new Error("Unknown type: "+T.type)}a.call(p,T)}var f=Qh,a=Qh;if(typeof o=="function"?f=o:o&&(f=c1(o.enter),a=c1(o.leave)),f===Qh&&a===Qh)throw new Error("Neither `enter` nor `leave` walker handler is set or both aren't a function");d(s,p)}});var p1=Ee((WF,d1)=>{var Dz=vt(),Rz=Zh(),jo=new Rz,Bz={decorator:function(s){var o=null,p={len:0,node:null},d=[p],f="";return{children:s.children,node:function(a){var T=o;o=a,s.node.call(this,a),o=T},chunk:function(a){f+=a,p.node!==o?d.push({len:a.length,node:o}):p.len+=a.length},result:function(){return h1(f,d)}}}};function h1(s,o){var p=[],d=0,f=0,a=o?o[f].node:null;for(Dz(s,jo);!jo.eof;){if(o)for(;f<o.length&&d+o[f].len<=jo.tokenStart;)d+=o[f++].len,a=o[f].node;p.push({type:jo.tokenType,value:jo.getTokenValue(),index:jo.tokenIndex,balance:jo.balance[jo.tokenIndex],node:a}),jo.next()}return p}d1.exports=function(s,o){return typeof s=="string"?h1(s,null):o.generate(s,Bz)}});var Zg=Ee((GF,g1)=>{var Fz=rf(),Sr={type:"Match"},Vn={type:"Mismatch"},Gg={type:"DisallowEmpty"},jz=40,Nz=41;function Sn(s,o,p){return o===Sr&&p===Vn||s===Sr&&o===Sr&&p===Sr?s:(s.type==="If"&&s.else===Vn&&o===Sr&&(o=s.then,s=s.match),{type:"If",match:s,then:o,else:p})}function m1(s){return s.length>2&&s.charCodeAt(s.length-2)===jz&&s.charCodeAt(s.length-1)===Nz}function f1(s){return s.type==="Keyword"||s.type==="AtKeyword"||s.type==="Function"||s.type==="Type"&&m1(s.name)}function Wg(s,o,p){switch(s){case" ":for(var B=Sr,d=o.length-1;d>=0;d--){var f=o[d];B=Sn(f,B,Vn)}return B;case"|":for(var B=Vn,a=null,d=o.length-1;d>=0;d--){var f=o[d];if(f1(f)&&(a===null&&d>0&&f1(o[d-1])&&(a=Object.create(null),B=Sn({type:"Enum",map:a},Sr,B)),a!==null)){var T=(m1(f.name)?f.name.slice(0,-1):f.name).toLowerCase();if(!(T in a)){a[T]=f;continue}}a=null,B=Sn(f,Sr,B)}return B;case"&&":if(o.length>5)return{type:"MatchOnce",terms:o,all:!0};for(var B=Vn,d=o.length-1;d>=0;d--){var f=o[d],M;o.length>1?M=Wg(s,o.filter(function(ie){return ie!==f}),!1):M=Sr,B=Sn(f,M,B)}return B;case"||":if(o.length>5)return{type:"MatchOnce",terms:o,all:!1};for(var B=p?Sr:Vn,d=o.length-1;d>=0;d--){var f=o[d],M;o.length>1?M=Wg(s,o.filter(function($){return $!==f}),!0):M=Sr,B=Sn(f,M,B)}return B}}function qz(s){var o=Sr,p=Ug(s.term);if(s.max===0)p=Sn(p,Gg,Vn),o=Sn(p,null,Vn),o.then=Sn(Sr,Sr,o),s.comma&&(o.then.else=Sn({type:"Comma",syntax:s},o,Vn));else for(var d=s.min||1;d<=s.max;d++)s.comma&&o!==Sr&&(o=Sn({type:"Comma",syntax:s},o,Vn)),o=Sn(p,Sn(Sr,Sr,o),Vn);if(s.min===0)o=Sn(Sr,Sr,o);else for(var d=0;d<s.min-1;d++)s.comma&&o!==Sr&&(o=Sn({type:"Comma",syntax:s},o,Vn)),o=Sn(p,o,Vn);return o}function Ug(s){if(typeof s=="function")return{type:"Generic",fn:s};switch(s.type){case"Group":var o=Wg(s.combinator,s.terms.map(Ug),!1);return s.disallowEmpty&&(o=Sn(o,Gg,Vn)),o;case"Multiplier":return qz(s);case"Type":case"Property":return{type:s.type,name:s.name,syntax:s};case"Keyword":return{type:s.type,name:s.name.toLowerCase(),syntax:s};case"AtKeyword":return{type:s.type,name:"@"+s.name.toLowerCase(),syntax:s};case"Function":return{type:s.type,name:s.name.toLowerCase()+"(",syntax:s};case"String":return s.value.length===3?{type:"Token",value:s.value.charAt(1),syntax:s}:{type:s.type,value:s.value.substr(1,s.value.length-2).replace(/\\'/g,"'"),syntax:s};case"Token":return{type:s.type,value:s.value,syntax:s};case"Comma":return{type:s.type,syntax:s};default:throw new Error("Unknown node type:",s.type)}}g1.exports={MATCH:Sr,MISMATCH:Vn,DISALLOW_EMPTY:Gg,buildMatchGraph:function(s,o){return typeof s=="string"&&(s=Fz(s)),{type:"MatchGraph",match:Ug(s),syntax:o||null,source:s}}}});var P1=Ee((UF,k1)=>{var y1=Object.prototype.hasOwnProperty,Hg=Zg(),_s=Hg.MATCH,ta=Hg.MISMATCH,Vz=Hg.DISALLOW_EMPTY,ia=Wh().TYPE,w1=0,Wz=1,nf=2,Yg=3,_1="Match",Gz="Mismatch",Uz="Maximum iteration number exceeded (please fill an issue on https://github.com/csstree/csstree/issues)",v1=15e3,S1=0;function T1(s){for(var o=null,p=null,d=s;d!==null;)p=d.prev,d.prev=o,o=d,d=p;return o}function $g(s,o){if(s.length!==o.length)return!1;for(var p=0;p<s.length;p++){var d=s.charCodeAt(p),f=o.charCodeAt(p);if(d>=65&&d<=90&&(d=d|32),d!==f)return!1}return!0}function Zz(s){return s.type!==ia.Delim?!1:s.value!=="?"}function b1(s){return s===null?!0:s.type===ia.Comma||s.type===ia.Function||s.type===ia.LeftParenthesis||s.type===ia.LeftSquareBracket||s.type===ia.LeftCurlyBracket||Zz(s)}function x1(s){return s===null?!0:s.type===ia.RightParenthesis||s.type===ia.RightSquareBracket||s.type===ia.RightCurlyBracket||s.type===ia.Delim}function C1(s,o,p){function d(){do Ze++,xe=Ze<s.length?s[Ze]:null;while(xe!==null&&(xe.type===ia.WhiteSpace||xe.type===ia.Comment))}function f(ii){var _t=Ze+ii;return _t<s.length?s[_t]:null}function a(ii,_t){return{nextState:ii,matchStack:mt,syntaxStack:ie,thenStack:$,tokenIndex:Ze,prev:_t}}function T(ii){$={nextState:ii,matchStack:mt,syntaxStack:ie,prev:$}}function M(ii){ae=a(ii,ae)}function B(){mt={type:Wz,syntax:o.syntax,token:xe,prev:mt},d(),te=null,Ze>dt&&(dt=Ze)}function G(){ie={syntax:o.syntax,opts:o.syntax.opts||ie!==null&&ie.opts||null,prev:ie},mt={type:nf,syntax:o.syntax,token:mt.token,prev:mt}}function J(){mt.type===nf?mt=mt.prev:mt={type:Yg,syntax:ie.syntax,token:mt.token,prev:mt},ie=ie.prev}var ie=null,$=null,ae=null,te=null,Te=0,We=null,xe=null,Ze=-1,dt=0,mt={type:w1,syntax:null,token:null,prev:null};for(d();We===null&&++Te<v1;)switch(o.type){case"Match":if($===null){if(xe!==null&&(Ze!==s.length-1||xe.value!=="\\0"&&xe.value!=="\\9")){o=ta;break}We=_1;break}if(o=$.nextState,o===Vz)if($.matchStack===mt){o=ta;break}else o=_s;for(;$.syntaxStack!==ie;)J();$=$.prev;break;case"Mismatch":if(te!==null&&te!==!1)(ae===null||Ze>ae.tokenIndex)&&(ae=te,te=!1);else if(ae===null){We=Gz;break}o=ae.nextState,$=ae.thenStack,ie=ae.syntaxStack,mt=ae.matchStack,Ze=ae.tokenIndex,xe=Ze<s.length?s[Ze]:null,ae=ae.prev;break;case"MatchGraph":o=o.match;break;case"If":o.else!==ta&&M(o.else),o.then!==_s&&T(o.then),o=o.match;break;case"MatchOnce":o={type:"MatchOnceBuffer",syntax:o,index:0,mask:0};break;case"MatchOnceBuffer":var Vt=o.syntax.terms;if(o.index===Vt.length){if(o.mask===0||o.syntax.all){o=ta;break}o=_s;break}if(o.mask===(1<<Vt.length)-1){o=_s;break}for(;o.index<Vt.length;o.index++){var Bt=1<<o.index;if((o.mask&Bt)===0){M(o),T({type:"AddMatchOnce",syntax:o.syntax,mask:o.mask|Bt}),o=Vt[o.index++];break}}break;case"AddMatchOnce":o={type:"MatchOnceBuffer",syntax:o.syntax,index:0,mask:o.mask};break;case"Enum":if(xe!==null){var Tt=xe.value.toLowerCase();if(Tt.indexOf("\\")!==-1&&(Tt=Tt.replace(/\\[09].*$/,"")),y1.call(o.map,Tt)){o=o.map[Tt];break}}o=ta;break;case"Generic":var je=ie!==null?ie.opts:null,Je=Ze+Math.floor(o.fn(xe,f,je));if(!isNaN(Je)&&Je>Ze){for(;Ze<Je;)B();o=_s}else o=ta;break;case"Type":case"Property":var ot=o.type==="Type"?"types":"properties",St=y1.call(p,ot)?p[ot][o.name]:null;if(!St||!St.match)throw new Error("Bad syntax reference: "+(o.type==="Type"?"<"+o.name+">":"<'"+o.name+"'>"));if(te!==!1&&xe!==null&&o.type==="Type"){var Ht=o.name==="custom-ident"&&xe.type===ia.Ident||o.name==="length"&&xe.value==="0";if(Ht){te===null&&(te=a(o,ae)),o=ta;break}}G(),o=St.match;break;case"Keyword":var Tt=o.name;if(xe!==null){var _i=xe.value;if(_i.indexOf("\\")!==-1&&(_i=_i.replace(/\\[09].*$/,"")),$g(_i,Tt)){B(),o=_s;break}}o=ta;break;case"AtKeyword":case"Function":if(xe!==null&&$g(xe.value,o.name)){B(),o=_s;break}o=ta;break;case"Token":if(xe!==null&&xe.value===o.value){B(),o=_s;break}o=ta;break;case"Comma":xe!==null&&xe.type===ia.Comma?b1(mt.token)?o=ta:(B(),o=x1(xe)?ta:_s):o=b1(mt.token)||x1(xe)?_s:ta;break;case"String":for(var ti="",Je=Ze;Je<s.length&&ti.length<o.value.length;Je++)ti+=s[Je].value;if($g(ti,o.value)){for(;Ze<Je;)B();o=_s}else o=ta;break;default:throw new Error("Unknown node type: "+o.type)}switch(S1+=Te,We){case null:console.warn("[csstree-match] BREAK after "+v1+" iterations"),We=Uz,mt=null;break;case _1:for(;ie!==null;)J();break;default:mt=null}return{tokens:s,reason:We,iterations:Te,match:mt,longestMatch:dt}}function $z(s,o,p){var d=C1(s,o,p||{});if(d.match!==null){var f=T1(d.match).prev;for(d.match=[];f!==null;){switch(f.type){case w1:break;case nf:case Yg:d.match.push({type:f.type,syntax:f.syntax});break;default:d.match.push({token:f.token.value,node:f.token.node});break}f=f.prev}}return d}function Hz(s,o,p){var d=C1(s,o,p||{});if(d.match===null)return d;var f=d.match,a=d.match={syntax:o.syntax||null,match:[]},T=[a];for(f=T1(f).prev;f!==null;){switch(f.type){case nf:a.match.push(a={syntax:f.syntax,match:[]}),T.push(a);break;case Yg:T.pop(),a=T[T.length-1];break;default:a.match.push({syntax:f.syntax||null,token:f.token.value,node:f.token.node})}f=f.prev}return d}k1.exports={matchAsList:$z,matchAsTree:Hz,getTotalIterationCount:function(){return S1}}});var M1=Ee((ZF,A1)=>{function E1(s){function o(f){return f===null?!1:f.type==="Type"||f.type==="Property"||f.type==="Keyword"}function p(f){if(Array.isArray(f.match)){for(var a=0;a<f.match.length;a++)if(p(f.match[a]))return o(f.syntax)&&d.unshift(f.syntax),!0}else if(f.node===s)return d=o(f.syntax)?[f.syntax]:[],!0;return!1}var d=null;return this.matched!==null&&p(this.matched),d}function Xg(s,o,p){var d=E1.call(s,o);return d===null?!1:d.some(p)}function Yz(s,o){return Xg(this,s,function(p){return p.type==="Type"&&p.name===o})}function Xz(s,o){return Xg(this,s,function(p){return p.type==="Property"&&p.name===o})}function Kz(s){return Xg(this,s,function(o){return o.type==="Keyword"})}A1.exports={getTrace:E1,isType:Yz,isProperty:Xz,isKeyword:Kz}});var O1=Ee(($F,L1)=>{var Jz=lc();function I1(s){return"node"in s?s.node:I1(s.match[0])}function z1(s){return"node"in s?s.node:z1(s.match[s.match.length-1])}function Qz(s,o,p,d,f){function a(M){if(M.syntax!==null&&M.syntax.type===d&&M.syntax.name===f){var B=I1(M),G=z1(M);s.syntax.walk(o,function(J,ie,$){if(J===B){var ae=new Jz;do{if(ae.appendData(ie.data),ie.data===G)break;ie=ie.next}while(ie!==null);T.push({parent:$,nodes:ae})}})}Array.isArray(M.match)&&M.match.forEach(a)}var T=[];return p.matched!==null&&a(p.matched),T}L1.exports={matchFragments:Qz}});var B1=Ee((HF,R1)=>{var eL=lc(),ed=Object.prototype.hasOwnProperty;function Kg(s){return typeof s=="number"&&isFinite(s)&&Math.floor(s)===s&&s>=0}function D1(s){return!!s&&Kg(s.offset)&&Kg(s.line)&&Kg(s.column)}function tL(s,o){return function(d,f){if(!d||d.constructor!==Object)return f(d,"Type of node should be an Object");for(var a in d){var T=!0;if(ed.call(d,a)!==!1){if(a==="type")d.type!==s&&f(d,"Wrong node type `"+d.type+"`, expected `"+s+"`");else if(a==="loc"){if(d.loc===null)continue;if(d.loc&&d.loc.constructor===Object)if(typeof d.loc.source!="string")a+=".source";else if(!D1(d.loc.start))a+=".start";else if(!D1(d.loc.end))a+=".end";else continue;T=!1}else if(o.hasOwnProperty(a))for(var M=0,T=!1;!T&&M<o[a].length;M++){var B=o[a][M];switch(B){case String:T=typeof d[a]=="string";break;case Boolean:T=typeof d[a]=="boolean";break;case null:T=d[a]===null;break;default:typeof B=="string"?T=d[a]&&d[a].type===B:Array.isArray(B)&&(T=d[a]instanceof eL)}}else f(d,"Unknown field `"+a+"` for "+s+" node type");T||f(d,"Bad value for `"+s+"."+a+"`")}}for(var a in o)ed.call(o,a)&&ed.call(d,a)===!1&&f(d,"Field `"+s+"."+a+"` is missed")}}function iL(s,o){var p=o.structure,d={type:String,loc:!0},f={type:'"'+s+'"'};for(var a in p)if(ed.call(p,a)!==!1){for(var T=[],M=d[a]=Array.isArray(p[a])?p[a].slice():[p[a]],B=0;B<M.length;B++){var G=M[B];if(G===String||G===Boolean)T.push(G.name);else if(G===null)T.push("null");else if(typeof G=="string")T.push("<"+G+">");else if(Array.isArray(G))T.push("List");else throw new Error("Wrong value `"+G+"` in `"+s+"."+a+"` structure definition")}f[a]=T.join(" | ")}return{docs:f,check:tL(s,d)}}R1.exports={getStructureFromConfig:function(s){var o={};if(s.node){for(var p in s.node)if(ed.call(s.node,p)){var d=s.node[p];if(d.structure)o[p]=iL(p,d);else throw new Error("Missed `structure` field in `"+p+"` node type definition")}}return o}}});var W1=Ee((YF,V1)=>{var td=vg().SyntaxReferenceError,rL=vg().SyntaxMatchError,id=qp(),Jg=q0(),nL=rf(),N1=Bp(),aL=Vg(),sL=p1(),sf=Zg().buildMatchGraph,F1=P1().matchAsTree,af=M1(),j1=O1(),oL=B1().getStructureFromConfig,lL=sf("inherit | initial | unset"),cL=sf("inherit | initial | unset | <-ms-legacy-expression>");function Qg(s,o,p){var d={};for(var f in s)s[f].syntax&&(d[f]=p?s[f].syntax:N1(s[f].syntax,{compact:o}));return d}function uL(s,o,p){let d={};for(let[f,a]of Object.entries(s))d[f]={prelude:a.prelude&&(p?a.prelude.syntax:N1(a.prelude.syntax,{compact:o})),descriptors:a.descriptors&&Qg(a.descriptors,o,p)};return d}function hL(s){for(var o=0;o<s.length;o++)if(s[o].value.toLowerCase()==="var(")return!0;return!1}function Ys(s,o,p){return{matched:s,iterations:p,error:o,getTrace:af.getTrace,isType:af.isType,isProperty:af.isProperty,isKeyword:af.isKeyword}}function rd(s,o,p,d){var f=sL(p,s.syntax),a;return hL(f)?Ys(null,new Error("Matching for a tree with var() is not supported")):(d&&(a=F1(f,s.valueCommonSyntax,s)),(!d||!a.match)&&(a=F1(f,o.match,s),!a.match)?Ys(null,new rL(a.reason,o.syntax,p,a),a.iterations):Ys(a.match,null,a.iterations))}var q1=function(s,o,p){if(this.valueCommonSyntax=lL,this.syntax=o,this.generic=!1,this.atrules={},this.properties={},this.types={},this.structure=p||oL(s),s){if(s.types)for(var d in s.types)this.addType_(d,s.types[d]);if(s.generic){this.generic=!0;for(var d in Jg)this.addType_(d,Jg[d])}if(s.atrules)for(var d in s.atrules)this.addAtrule_(d,s.atrules[d]);if(s.properties)for(var d in s.properties)this.addProperty_(d,s.properties[d])}};q1.prototype={structure:{},checkStructure:function(s){function o(f,a){d.push({node:f,message:a})}var p=this.structure,d=[];return this.syntax.walk(s,function(f){p.hasOwnProperty(f.type)?p[f.type].check(f,o):o(f,"Unknown node type `"+f.type+"`")}),d.length?d:!1},createDescriptor:function(s,o,p,d=null){var f={type:o,name:p},a={type:o,name:p,parent:d,syntax:null,match:null};return typeof s=="function"?a.match=sf(s,f):(typeof s=="string"?Object.defineProperty(a,"syntax",{get:function(){return Object.defineProperty(a,"syntax",{value:nL(s)}),a.syntax}}):a.syntax=s,Object.defineProperty(a,"match",{get:function(){return Object.defineProperty(a,"match",{value:sf(a.syntax,f)}),a.match}})),a},addAtrule_:function(s,o){o&&(this.atrules[s]={type:"Atrule",name:s,prelude:o.prelude?this.createDescriptor(o.prelude,"AtrulePrelude",s):null,descriptors:o.descriptors?Object.keys(o.descriptors).reduce((p,d)=>(p[d]=this.createDescriptor(o.descriptors[d],"AtruleDescriptor",d,s),p),{}):null})},addProperty_:function(s,o){o&&(this.properties[s]=this.createDescriptor(o,"Property",s))},addType_:function(s,o){o&&(this.types[s]=this.createDescriptor(o,"Type",s),o===Jg["-ms-legacy-expression"]&&(this.valueCommonSyntax=cL))},checkAtruleName:function(s){if(!this.getAtrule(s))return new td("Unknown at-rule","@"+s)},checkAtrulePrelude:function(s,o){let p=this.checkAtruleName(s);if(p)return p;var d=this.getAtrule(s);if(!d.prelude&&o)return new SyntaxError("At-rule `@"+s+"` should not contain a prelude");if(d.prelude&&!o)return new SyntaxError("At-rule `@"+s+"` should contain a prelude")},checkAtruleDescriptorName:function(s,o){let p=this.checkAtruleName(s);if(p)return p;var d=this.getAtrule(s),f=id.keyword(o);if(!d.descriptors)return new SyntaxError("At-rule `@"+s+"` has no known descriptors");if(!d.descriptors[f.name]&&!d.descriptors[f.basename])return new td("Unknown at-rule descriptor",o)},checkPropertyName:function(s){var o=id.property(s);if(o.custom)return new Error("Lexer matching doesn't applicable for custom properties");if(!this.getProperty(s))return new td("Unknown property",s)},matchAtrulePrelude:function(s,o){var p=this.checkAtrulePrelude(s,o);return p?Ys(null,p):o?rd(this,this.getAtrule(s).prelude,o,!1):Ys(null,null)},matchAtruleDescriptor:function(s,o,p){var d=this.checkAtruleDescriptorName(s,o);if(d)return Ys(null,d);var f=this.getAtrule(s),a=id.keyword(o);return rd(this,f.descriptors[a.name]||f.descriptors[a.basename],p,!1)},matchDeclaration:function(s){return s.type!=="Declaration"?Ys(null,new Error("Not a Declaration node")):this.matchProperty(s.property,s.value)},matchProperty:function(s,o){var p=this.checkPropertyName(s);return p?Ys(null,p):rd(this,this.getProperty(s),o,!0)},matchType:function(s,o){var p=this.getType(s);return p?rd(this,p,o,!1):Ys(null,new td("Unknown type",s))},match:function(s,o){return typeof s!="string"&&(!s||!s.type)?Ys(null,new td("Bad syntax")):((typeof s=="string"||!s.match)&&(s=this.createDescriptor(s,"Type","anonymous")),rd(this,s,o,!1))},findValueFragments:function(s,o,p,d){return j1.matchFragments(this,o,this.matchProperty(s,o),p,d)},findDeclarationValueFragments:function(s,o,p){return j1.matchFragments(this,s.value,this.matchDeclaration(s),o,p)},findAllFragments:function(s,o,p){var d=[];return this.syntax.walk(s,{visit:"Declaration",enter:function(f){d.push.apply(d,this.findDeclarationValueFragments(f,o,p))}.bind(this)}),d},getAtrule:function(s,o=!0){var p=id.keyword(s),d=p.vendor&&o?this.atrules[p.name]||this.atrules[p.basename]:this.atrules[p.name];return d||null},getAtrulePrelude:function(s,o=!0){let p=this.getAtrule(s,o);return p&&p.prelude||null},getAtruleDescriptor:function(s,o){return this.atrules.hasOwnProperty(s)&&this.atrules.declarators&&this.atrules[s].declarators[o]||null},getProperty:function(s,o=!0){var p=id.property(s),d=p.vendor&&o?this.properties[p.name]||this.properties[p.basename]:this.properties[p.name];return d||null},getType:function(s){return this.types.hasOwnProperty(s)?this.types[s]:null},validate:function(){function s(f,a,T,M){if(T.hasOwnProperty(a))return T[a];T[a]=!1,M.syntax!==null&&aL(M.syntax,function(B){if(!(B.type!=="Type"&&B.type!=="Property")){var G=B.type==="Type"?f.types:f.properties,J=B.type==="Type"?o:p;(!G.hasOwnProperty(B.name)||s(f,B.name,J,G[B.name]))&&(T[a]=!0)}},this)}var o={},p={};for(var d in this.types)s(this,d,o,this.types[d]);for(var d in this.properties)s(this,d,p,this.properties[d]);return o=Object.keys(o).filter(function(f){return o[f]}),p=Object.keys(p).filter(function(f){return p[f]}),o.length||p.length?{types:o,properties:p}:null},dump:function(s,o){return{generic:this.generic,types:Qg(this.types,!o,s),properties:Qg(this.properties,!o,s),atrules:uL(this.atrules,!o,s)}},toString:function(){return JSON.stringify(this.dump())}};V1.exports=q1});var U1=Ee((XF,G1)=>{G1.exports={SyntaxError:Rg(),parse:rf(),generate:Bp(),walk:Vg()}});var K1=Ee((KF,X1)=>{var Z1=wg(),dL=vt().isBOM,$1=10,pL=12,H1=13;function fL(s,o){for(var p=o.length,d=Z1(s.lines,p),f=s.startLine,a=Z1(s.columns,p),T=s.startColumn,M=o.length>0?dL(o.charCodeAt(0)):0,B=M;B<p;B++){var G=o.charCodeAt(B);d[B]=f,a[B]=T++,(G===$1||G===H1||G===pL)&&(G===H1&&B+1<p&&o.charCodeAt(B+1)===$1&&(B++,d[B]=f,a[B]=T),f++,T=1)}d[B]=f,a[B]=T,s.lines=d,s.columns=a}var Y1=function(){this.lines=null,this.columns=null,this.linesAndColumnsComputed=!1};Y1.prototype={setSource:function(s,o,p,d){this.source=s,this.startOffset=typeof o>"u"?0:o,this.startLine=typeof p>"u"?1:p,this.startColumn=typeof d>"u"?1:d,this.linesAndColumnsComputed=!1},ensureLinesAndColumnsComputed:function(){this.linesAndColumnsComputed||(fL(this,this.source),this.linesAndColumnsComputed=!0)},getLocation:function(s,o){return this.ensureLinesAndColumnsComputed(),{source:o,offset:this.startOffset+s,line:this.lines[s],column:this.columns[s]}},getLocationRange:function(s,o,p){return this.ensureLinesAndColumnsComputed(),{source:p,start:{offset:this.startOffset+s,line:this.lines[s],column:this.columns[s]},end:{offset:this.startOffset+o,line:this.lines[o],column:this.columns[o]}}}};X1.exports=Y1});var ew=Ee((JF,Q1)=>{var J1=vt().TYPE,mL=J1.WhiteSpace,gL=J1.Comment;Q1.exports=function(o){var p=this.createList(),d=null,f={recognizer:o,space:null,ignoreWS:!1,ignoreWSAfter:!1};for(this.scanner.skipSC();!this.scanner.eof;){switch(this.scanner.tokenType){case gL:this.scanner.next();continue;case mL:f.ignoreWS?this.scanner.next():f.space=this.WhiteSpace();continue}if(d=o.getNode.call(this,f),d===void 0)break;f.space!==null&&(p.push(f.space),f.space=null),p.push(d),f.ignoreWSAfter?(f.ignoreWSAfter=!1,f.ignoreWS=!0):f.ignoreWS=!1}return p}});var ow=Ee((QF,sw)=>{var yL=K1(),_L=ug(),vL=Zh(),tw=lc(),bL=vt(),aw=Wh(),{findWhiteSpaceStart:xL,cmpStr:wL}=vu(),SL=ew(),iw=function(){},Tl=aw.TYPE,TL=aw.NAME,CL=Tl.WhiteSpace,kL=Tl.Comment,PL=Tl.Ident,rw=Tl.Function,EL=Tl.Url,AL=Tl.Hash,ML=Tl.Percentage,IL=Tl.Number,zL=35,nw=0;function LL(s){return function(){return this[s]()}}function OL(s){var o={context:{},scope:{},atrule:{},pseudo:{}};if(s.parseContext)for(var p in s.parseContext)switch(typeof s.parseContext[p]){case"function":o.context[p]=s.parseContext[p];break;case"string":o.context[p]=LL(s.parseContext[p]);break}if(s.scope)for(var p in s.scope)o.scope[p]=s.scope[p];if(s.atrule)for(var p in s.atrule){var d=s.atrule[p];d.parse&&(o.atrule[p]=d.parse)}if(s.pseudo)for(var p in s.pseudo){var f=s.pseudo[p];f.parse&&(o.pseudo[p]=f.parse)}if(s.node)for(var p in s.node)o[p]=s.node[p].parse;return o}sw.exports=function(o){var p={scanner:new vL,locationMap:new yL,filename:"<unknown>",needPositions:!1,onParseError:iw,onParseErrorThrow:!1,parseAtrulePrelude:!0,parseRulePrelude:!0,parseValue:!0,parseCustomProperty:!1,readSequence:SL,createList:function(){return new tw},createSingleNodeList:function(f){return new tw().appendData(f)},getFirstListNode:function(f){return f&&f.first()},getLastListNode:function(f){return f.last()},parseWithFallback:function(f,a){var T=this.scanner.tokenIndex;try{return f.call(this)}catch(B){if(this.onParseErrorThrow)throw B;var M=a.call(this,T);return this.onParseErrorThrow=!0,this.onParseError(B,M),this.onParseErrorThrow=!1,M}},lookupNonWSType:function(f){do{var a=this.scanner.lookupType(f++);if(a!==CL)return a}while(a!==nw);return nw},eat:function(f){if(this.scanner.tokenType!==f){var a=this.scanner.tokenStart,T=TL[f]+" is expected";switch(f){case PL:this.scanner.tokenType===rw||this.scanner.tokenType===EL?(a=this.scanner.tokenEnd-1,T="Identifier is expected but function found"):T="Identifier is expected";break;case AL:this.scanner.isDelim(zL)&&(this.scanner.next(),a++,T="Name is expected");break;case ML:this.scanner.tokenType===IL&&(a=this.scanner.tokenEnd,T="Percent sign is expected");break;default:this.scanner.source.charCodeAt(this.scanner.tokenStart)===f&&(a=a+1)}this.error(T,a)}this.scanner.next()},consume:function(f){var a=this.scanner.getTokenValue();return this.eat(f),a},consumeFunctionName:function(){var f=this.scanner.source.substring(this.scanner.tokenStart,this.scanner.tokenEnd-1);return this.eat(rw),f},getLocation:function(f,a){return this.needPositions?this.locationMap.getLocationRange(f,a,this.filename):null},getLocationFromList:function(f){if(this.needPositions){var a=this.getFirstListNode(f),T=this.getLastListNode(f);return this.locationMap.getLocationRange(a!==null?a.loc.start.offset-this.locationMap.startOffset:this.scanner.tokenStart,T!==null?T.loc.end.offset-this.locationMap.startOffset:this.scanner.tokenStart,this.filename)}return null},error:function(f,a){var T=typeof a<"u"&&a<this.scanner.source.length?this.locationMap.getLocation(a):this.scanner.eof?this.locationMap.getLocation(xL(this.scanner.source,this.scanner.source.length-1)):this.locationMap.getLocation(this.scanner.tokenStart);throw new _L(f||"Unexpected input",this.scanner.source,T.offset,T.line,T.column)}};o=OL(o||{});for(var d in o)p[d]=o[d];return function(f,a){a=a||{};var T=a.context||"default",M=a.onComment,B;if(bL(f,p.scanner),p.locationMap.setSource(f,a.offset,a.line,a.column),p.filename=a.filename||"<unknown>",p.needPositions=!!a.positions,p.onParseError=typeof a.onParseError=="function"?a.onParseError:iw,p.onParseErrorThrow=!1,p.parseAtrulePrelude="parseAtrulePrelude"in a?!!a.parseAtrulePrelude:!0,p.parseRulePrelude="parseRulePrelude"in a?!!a.parseRulePrelude:!0,p.parseValue="parseValue"in a?!!a.parseValue:!0,p.parseCustomProperty="parseCustomProperty"in a?!!a.parseCustomProperty:!1,!p.context.hasOwnProperty(T))throw new Error("Unknown context `"+T+"`");return typeof M=="function"&&p.scanner.forEachToken((G,J,ie)=>{if(G===kL){let $=p.getLocation(J,ie),ae=wL(f,ie-2,ie,"*/")?f.slice(J+2,ie-2):f.slice(J+2,ie);M(ae,$)}}),B=p.context[T].call(p,a),p.scanner.eof||p.error(),B}}});var cw=Ee(ey=>{var lw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");ey.encode=function(s){if(0<=s&&s<lw.length)return lw[s];throw new TypeError("Must be between 0 and 63: "+s)};ey.decode=function(s){var o=65,p=90,d=97,f=122,a=48,T=57,M=43,B=47,G=26,J=52;return o<=s&&s<=p?s-o:d<=s&&s<=f?s-d+G:a<=s&&s<=T?s-a+J:s==M?62:s==B?63:-1}});var fw=Ee(iy=>{var uw=cw(),ty=5,hw=1<<ty,dw=hw-1,pw=hw;function DL(s){return s<0?(-s<<1)+1:(s<<1)+0}function RL(s){var o=(s&1)===1,p=s>>1;return o?-p:p}iy.encode=function(o){var p="",d,f=DL(o);do d=f&dw,f>>>=ty,f>0&&(d|=pw),p+=uw.encode(d);while(f>0);return p};iy.decode=function(o,p,d){var f=o.length,a=0,T=0,M,B;do{if(p>=f)throw new Error("Expected more digits in base 64 VLQ value.");if(B=uw.decode(o.charCodeAt(p++)),B===-1)throw new Error("Invalid base64 digit: "+o.charAt(p-1));M=!!(B&pw),B&=dw,a=a+(B<<T),T+=ty}while(M);d.value=RL(a),d.rest=p}});var of=Ee(Tn=>{function BL(s,o,p){if(o in s)return s[o];if(arguments.length===3)return p;throw new Error('"'+o+'" is a required argument.')}Tn.getArg=BL;var mw=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,FL=/^data:.+\,.+$/;function nd(s){var o=s.match(mw);return o?{scheme:o[1],auth:o[2],host:o[3],port:o[4],path:o[5]}:null}Tn.urlParse=nd;function Pu(s){var o="";return s.scheme&&(o+=s.scheme+":"),o+="//",s.auth&&(o+=s.auth+"@"),s.host&&(o+=s.host),s.port&&(o+=":"+s.port),s.path&&(o+=s.path),o}Tn.urlGenerate=Pu;function ry(s){var o=s,p=nd(s);if(p){if(!p.path)return s;o=p.path}for(var d=Tn.isAbsolute(o),f=o.split(/\/+/),a,T=0,M=f.length-1;M>=0;M--)a=f[M],a==="."?f.splice(M,1):a===".."?T++:T>0&&(a===""?(f.splice(M+1,T),T=0):(f.splice(M,2),T--));return o=f.join("/"),o===""&&(o=d?"/":"."),p?(p.path=o,Pu(p)):o}Tn.normalize=ry;function gw(s,o){s===""&&(s="."),o===""&&(o=".");var p=nd(o),d=nd(s);if(d&&(s=d.path||"/"),p&&!p.scheme)return d&&(p.scheme=d.scheme),Pu(p);if(p||o.match(FL))return o;if(d&&!d.host&&!d.path)return d.host=o,Pu(d);var f=o.charAt(0)==="/"?o:ry(s.replace(/\/+$/,"")+"/"+o);return d?(d.path=f,Pu(d)):f}Tn.join=gw;Tn.isAbsolute=function(s){return s.charAt(0)==="/"||mw.test(s)};function jL(s,o){s===""&&(s="."),s=s.replace(/\/$/,"");for(var p=0;o.indexOf(s+"/")!==0;){var d=s.lastIndexOf("/");if(d<0||(s=s.slice(0,d),s.match(/^([^\/]+:\/)?\/*$/)))return o;++p}return Array(p+1).join("../")+o.substr(s.length+1)}Tn.relative=jL;var yw=(function(){var s=Object.create(null);return!("__proto__"in s)})();function _w(s){return s}function NL(s){return vw(s)?"$"+s:s}Tn.toSetString=yw?_w:NL;function qL(s){return vw(s)?s.slice(1):s}Tn.fromSetString=yw?_w:qL;function vw(s){if(!s)return!1;var o=s.length;if(o<9||s.charCodeAt(o-1)!==95||s.charCodeAt(o-2)!==95||s.charCodeAt(o-3)!==111||s.charCodeAt(o-4)!==116||s.charCodeAt(o-5)!==111||s.charCodeAt(o-6)!==114||s.charCodeAt(o-7)!==112||s.charCodeAt(o-8)!==95||s.charCodeAt(o-9)!==95)return!1;for(var p=o-10;p>=0;p--)if(s.charCodeAt(p)!==36)return!1;return!0}function VL(s,o,p){var d=Eu(s.source,o.source);return d!==0||(d=s.originalLine-o.originalLine,d!==0)||(d=s.originalColumn-o.originalColumn,d!==0||p)||(d=s.generatedColumn-o.generatedColumn,d!==0)||(d=s.generatedLine-o.generatedLine,d!==0)?d:Eu(s.name,o.name)}Tn.compareByOriginalPositions=VL;function WL(s,o,p){var d=s.generatedLine-o.generatedLine;return d!==0||(d=s.generatedColumn-o.generatedColumn,d!==0||p)||(d=Eu(s.source,o.source),d!==0)||(d=s.originalLine-o.originalLine,d!==0)||(d=s.originalColumn-o.originalColumn,d!==0)?d:Eu(s.name,o.name)}Tn.compareByGeneratedPositionsDeflated=WL;function Eu(s,o){return s===o?0:s===null?1:o===null?-1:s>o?1:-1}function GL(s,o){var p=s.generatedLine-o.generatedLine;return p!==0||(p=s.generatedColumn-o.generatedColumn,p!==0)||(p=Eu(s.source,o.source),p!==0)||(p=s.originalLine-o.originalLine,p!==0)||(p=s.originalColumn-o.originalColumn,p!==0)?p:Eu(s.name,o.name)}Tn.compareByGeneratedPositionsInflated=GL;function UL(s){return JSON.parse(s.replace(/^\)]}'[^\n]*\n/,""))}Tn.parseSourceMapInput=UL;function ZL(s,o,p){if(o=o||"",s&&(s[s.length-1]!=="/"&&o[0]!=="/"&&(s+="/"),o=s+o),p){var d=nd(p);if(!d)throw new Error("sourceMapURL could not be parsed");if(d.path){var f=d.path.lastIndexOf("/");f>=0&&(d.path=d.path.substring(0,f+1))}o=gw(Pu(d),o)}return ry(o)}Tn.computeSourceURL=ZL});var xw=Ee(bw=>{var ny=of(),ay=Object.prototype.hasOwnProperty,uc=typeof Map<"u";function No(){this._array=[],this._set=uc?new Map:Object.create(null)}No.fromArray=function(o,p){for(var d=new No,f=0,a=o.length;f<a;f++)d.add(o[f],p);return d};No.prototype.size=function(){return uc?this._set.size:Object.getOwnPropertyNames(this._set).length};No.prototype.add=function(o,p){var d=uc?o:ny.toSetString(o),f=uc?this.has(o):ay.call(this._set,d),a=this._array.length;(!f||p)&&this._array.push(o),f||(uc?this._set.set(o,a):this._set[d]=a)};No.prototype.has=function(o){if(uc)return this._set.has(o);var p=ny.toSetString(o);return ay.call(this._set,p)};No.prototype.indexOf=function(o){if(uc){var p=this._set.get(o);if(p>=0)return p}else{var d=ny.toSetString(o);if(ay.call(this._set,d))return this._set[d]}throw new Error('"'+o+'" is not in the set.')};No.prototype.at=function(o){if(o>=0&&o<this._array.length)return this._array[o];throw new Error("No element indexed by "+o)};No.prototype.toArray=function(){return this._array.slice()};bw.ArraySet=No});var Tw=Ee(Sw=>{var ww=of();function $L(s,o){var p=s.generatedLine,d=o.generatedLine,f=s.generatedColumn,a=o.generatedColumn;return d>p||d==p&&a>=f||ww.compareByGeneratedPositionsInflated(s,o)<=0}function lf(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}lf.prototype.unsortedForEach=function(o,p){this._array.forEach(o,p)};lf.prototype.add=function(o){$L(this._last,o)?(this._last=o,this._array.push(o)):(this._sorted=!1,this._array.push(o))};lf.prototype.toArray=function(){return this._sorted||(this._array.sort(ww.compareByGeneratedPositionsInflated),this._sorted=!0),this._array};Sw.MappingList=lf});var kw=Ee(Cw=>{var ad=fw(),Dr=of(),cf=xw().ArraySet,HL=Tw().MappingList;function Va(s){s||(s={}),this._file=Dr.getArg(s,"file",null),this._sourceRoot=Dr.getArg(s,"sourceRoot",null),this._skipValidation=Dr.getArg(s,"skipValidation",!1),this._sources=new cf,this._names=new cf,this._mappings=new HL,this._sourcesContents=null}Va.prototype._version=3;Va.fromSourceMap=function(o){var p=o.sourceRoot,d=new Va({file:o.file,sourceRoot:p});return o.eachMapping(function(f){var a={generated:{line:f.generatedLine,column:f.generatedColumn}};f.source!=null&&(a.source=f.source,p!=null&&(a.source=Dr.relative(p,a.source)),a.original={line:f.originalLine,column:f.originalColumn},f.name!=null&&(a.name=f.name)),d.addMapping(a)}),o.sources.forEach(function(f){var a=f;p!==null&&(a=Dr.relative(p,f)),d._sources.has(a)||d._sources.add(a);var T=o.sourceContentFor(f);T!=null&&d.setSourceContent(f,T)}),d};Va.prototype.addMapping=function(o){var p=Dr.getArg(o,"generated"),d=Dr.getArg(o,"original",null),f=Dr.getArg(o,"source",null),a=Dr.getArg(o,"name",null);this._skipValidation||this._validateMapping(p,d,f,a),f!=null&&(f=String(f),this._sources.has(f)||this._sources.add(f)),a!=null&&(a=String(a),this._names.has(a)||this._names.add(a)),this._mappings.add({generatedLine:p.line,generatedColumn:p.column,originalLine:d!=null&&d.line,originalColumn:d!=null&&d.column,source:f,name:a})};Va.prototype.setSourceContent=function(o,p){var d=o;this._sourceRoot!=null&&(d=Dr.relative(this._sourceRoot,d)),p!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[Dr.toSetString(d)]=p):this._sourcesContents&&(delete this._sourcesContents[Dr.toSetString(d)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))};Va.prototype.applySourceMap=function(o,p,d){var f=p;if(p==null){if(o.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);f=o.file}var a=this._sourceRoot;a!=null&&(f=Dr.relative(a,f));var T=new cf,M=new cf;this._mappings.unsortedForEach(function(B){if(B.source===f&&B.originalLine!=null){var G=o.originalPositionFor({line:B.originalLine,column:B.originalColumn});G.source!=null&&(B.source=G.source,d!=null&&(B.source=Dr.join(d,B.source)),a!=null&&(B.source=Dr.relative(a,B.source)),B.originalLine=G.line,B.originalColumn=G.column,G.name!=null&&(B.name=G.name))}var J=B.source;J!=null&&!T.has(J)&&T.add(J);var ie=B.name;ie!=null&&!M.has(ie)&&M.add(ie)},this),this._sources=T,this._names=M,o.sources.forEach(function(B){var G=o.sourceContentFor(B);G!=null&&(d!=null&&(B=Dr.join(d,B)),a!=null&&(B=Dr.relative(a,B)),this.setSourceContent(B,G))},this)};Va.prototype._validateMapping=function(o,p,d,f){if(p&&typeof p.line!="number"&&typeof p.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(o&&"line"in o&&"column"in o&&o.line>0&&o.column>=0&&!p&&!d&&!f)){if(o&&"line"in o&&"column"in o&&p&&"line"in p&&"column"in p&&o.line>0&&o.column>=0&&p.line>0&&p.column>=0&&d)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:o,source:d,original:p,name:f}))}};Va.prototype._serializeMappings=function(){for(var o=0,p=1,d=0,f=0,a=0,T=0,M="",B,G,J,ie,$=this._mappings.toArray(),ae=0,te=$.length;ae<te;ae++){if(G=$[ae],B="",G.generatedLine!==p)for(o=0;G.generatedLine!==p;)B+=";",p++;else if(ae>0){if(!Dr.compareByGeneratedPositionsInflated(G,$[ae-1]))continue;B+=","}B+=ad.encode(G.generatedColumn-o),o=G.generatedColumn,G.source!=null&&(ie=this._sources.indexOf(G.source),B+=ad.encode(ie-T),T=ie,B+=ad.encode(G.originalLine-1-f),f=G.originalLine-1,B+=ad.encode(G.originalColumn-d),d=G.originalColumn,G.name!=null&&(J=this._names.indexOf(G.name),B+=ad.encode(J-a),a=J)),M+=B}return M};Va.prototype._generateSourcesContent=function(o,p){return o.map(function(d){if(!this._sourcesContents)return null;p!=null&&(d=Dr.relative(p,d));var f=Dr.toSetString(d);return Object.prototype.hasOwnProperty.call(this._sourcesContents,f)?this._sourcesContents[f]:null},this)};Va.prototype.toJSON=function(){var o={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(o.file=this._file),this._sourceRoot!=null&&(o.sourceRoot=this._sourceRoot),this._sourcesContents&&(o.sourcesContent=this._generateSourcesContent(o.sources,o.sourceRoot)),o};Va.prototype.toString=function(){return JSON.stringify(this.toJSON())};Cw.SourceMapGenerator=Va});var Aw=Ee((sj,Ew)=>{var YL=kw().SourceMapGenerator,Pw={Atrule:!0,Selector:!0,Declaration:!0};Ew.exports=function(o){var p=new YL,d=1,f=0,a={line:1,column:0},T={line:0,column:0},M=!1,B={line:1,column:0},G={generated:B},J=o.node;o.node=function(ae){if(ae.loc&&ae.loc.start&&Pw.hasOwnProperty(ae.type)){var te=ae.loc.start.line,Te=ae.loc.start.column-1;(T.line!==te||T.column!==Te)&&(T.line=te,T.column=Te,a.line=d,a.column=f,M&&(M=!1,(a.line!==B.line||a.column!==B.column)&&p.addMapping(G)),M=!0,p.addMapping({source:ae.loc.source,original:T,generated:a}))}J.call(this,ae),M&&Pw.hasOwnProperty(ae.type)&&(B.line=d,B.column=f)};var ie=o.chunk;o.chunk=function(ae){for(var te=0;te<ae.length;te++)ae.charCodeAt(te)===10?(d++,f=0):f++;ie(ae)};var $=o.result;return o.result=function(){return M&&p.addMapping(G),{css:$(),map:p}},o}});var Iw=Ee((oj,Mw)=>{var XL=Aw(),KL=Object.prototype.hasOwnProperty;function JL(s,o){var p=s.children,d=null;typeof o!="function"?p.forEach(this.node,this):p.forEach(function(f){d!==null&&o.call(this,d),this.node(f),d=f},this)}Mw.exports=function(o){function p(a){if(KL.call(d,a.type))d[a.type].call(this,a);else throw new Error("Unknown node type: "+a.type)}var d={};if(o.node)for(var f in o.node)d[f]=o.node[f].generate;return function(a,T){var M="",B={children:JL,node:p,chunk:function(G){M+=G},result:function(){return M}};return T&&(typeof T.decorator=="function"&&(B=T.decorator(B)),T.sourceMap&&(B=XL(B))),B.node(a),B.result()}}});var Lw=Ee((lj,zw)=>{var sy=lc();zw.exports=function(o){return{fromPlainObject:function(p){return o(p,{enter:function(d){d.children&&!(d.children instanceof sy)&&(d.children=new sy().fromArray(d.children))}}),p},toPlainObject:function(p){return o(p,{leave:function(d){d.children&&d.children instanceof sy&&(d.children=d.children.toArray())}}),p}}}});var jw=Ee((cj,Fw)=>{var oy=Object.prototype.hasOwnProperty,sd=function(){};function Ow(s){return typeof s=="function"?s:sd}function Dw(s,o){return function(p,d,f){p.type===o&&s.call(this,p,d,f)}}function QL(s,o){var p=o.structure,d=[];for(var f in p)if(oy.call(p,f)!==!1){var a=p[f],T={name:f,type:!1,nullable:!1};Array.isArray(p[f])||(a=[p[f]]);for(var M=0;M<a.length;M++){var B=a[M];B===null?T.nullable=!0:typeof B=="string"?T.type="node":Array.isArray(B)&&(T.type="list")}T.type&&d.push(T)}return d.length?{context:o.walkContext,fields:d}:null}function eO(s){var o={};for(var p in s.node)if(oy.call(s.node,p)){var d=s.node[p];if(!d.structure)throw new Error("Missed `structure` field in `"+p+"` node type definition");o[p]=QL(p,d)}return o}function Rw(s,o){var p=s.fields.slice(),d=s.context,f=typeof d=="string";return o&&p.reverse(),function(a,T,M,B){var G;f&&(G=T[d],T[d]=a);for(var J=0;J<p.length;J++){var ie=p[J],$=a[ie.name];if(!ie.nullable||$){if(ie.type==="list"){var ae=o?$.reduceRight(B,!1):$.reduce(B,!1);if(ae)return!0}else if(M($))return!0}}f&&(T[d]=G)}}function Bw(s){return{Atrule:{StyleSheet:s.StyleSheet,Atrule:s.Atrule,Rule:s.Rule,Block:s.Block},Rule:{StyleSheet:s.StyleSheet,Atrule:s.Atrule,Rule:s.Rule,Block:s.Block},Declaration:{StyleSheet:s.StyleSheet,Atrule:s.Atrule,Rule:s.Rule,Block:s.Block,DeclarationList:s.DeclarationList}}}Fw.exports=function(o){var p=eO(o),d={},f={},a=Symbol("break-walk"),T=Symbol("skip-node");for(var M in p)oy.call(p,M)&&p[M]!==null&&(d[M]=Rw(p[M],!1),f[M]=Rw(p[M],!0));var B=Bw(d),G=Bw(f),J=function(ie,$){function ae(dt,mt,Vt){var Bt=Te.call(Ze,dt,mt,Vt);if(Bt===a){debugger;return!0}return Bt===T?!1:!!(xe.hasOwnProperty(dt.type)&&xe[dt.type](dt,Ze,ae,te)||We.call(Ze,dt,mt,Vt)===a)}var te=(dt,mt,Vt,Bt)=>dt||ae(mt,Vt,Bt),Te=sd,We=sd,xe=d,Ze={break:a,skip:T,root:ie,stylesheet:null,atrule:null,atrulePrelude:null,rule:null,selector:null,block:null,declaration:null,function:null};if(typeof $=="function")Te=$;else if($&&(Te=Ow($.enter),We=Ow($.leave),$.reverse&&(xe=f),$.visit)){if(B.hasOwnProperty($.visit))xe=$.reverse?G[$.visit]:B[$.visit];else if(!p.hasOwnProperty($.visit))throw new Error("Bad value `"+$.visit+"` for `visit` option (should be: "+Object.keys(p).join(", ")+")");Te=Dw(Te,$.visit),We=Dw(We,$.visit)}if(Te===sd&&We===sd)throw new Error("Neither `enter` nor `leave` walker handler is set or both aren't a function");ae(ie)};return J.break=a,J.skip=T,J.find=function(ie,$){var ae=null;return J(ie,function(te,Te,We){if($.call(this,te,Te,We))return ae=te,a}),ae},J.findLast=function(ie,$){var ae=null;return J(ie,{reverse:!0,enter:function(te,Te,We){if($.call(this,te,Te,We))return ae=te,a}}),ae},J.findAll=function(ie,$){var ae=[];return J(ie,function(te,Te,We){$.call(this,te,Te,We)&&ae.push(te)}),ae},J}});var qw=Ee((uj,Nw)=>{var tO=lc();Nw.exports=function s(o){var p={};for(var d in o){var f=o[d];f&&(Array.isArray(f)||f instanceof tO?f=f.map(s):f.constructor===Object&&(f=s(f))),p[d]=f}return p}});var Zw=Ee((hj,Uw)=>{var Au=Object.prototype.hasOwnProperty,iO={generic:!0,types:cy,atrules:{prelude:Ww,descriptors:Ww},properties:cy,parseContext:rO,scope:Gw,atrule:["parse"],pseudo:["parse"],node:["name","structure","parse","generate","walkContext"]};function uf(s){return s&&s.constructor===Object}function ly(s){return uf(s)?Object.assign({},s):s}function rO(s,o){return Object.assign(s,o)}function Gw(s,o){for(let p in o)Au.call(o,p)&&(uf(s[p])?Gw(s[p],ly(o[p])):s[p]=ly(o[p]));return s}function Vw(s,o){return typeof o=="string"&&/^\s*\|/.test(o)?typeof s=="string"?s+o:o.replace(/^\s*\|\s*/,""):o||null}function cy(s,o){if(typeof o=="string")return Vw(s,o);let p=Object.assign({},s);for(let d in o)Au.call(o,d)&&(p[d]=Vw(Au.call(s,d)?s[d]:void 0,o[d]));return p}function Ww(s,o){let p=cy(s,o);return!uf(p)||Object.keys(p).length?p:null}function od(s,o,p){for(let d in p)if(Au.call(p,d)!==!1){if(p[d]===!0)d in o&&Au.call(o,d)&&(s[d]=ly(o[d]));else if(p[d]){if(typeof p[d]=="function"){let f=p[d];s[d]=f({},s[d]),s[d]=f(s[d]||{},o[d])}else if(uf(p[d])){let f={};for(let a in s[d])f[a]=od({},s[d][a],p[d]);for(let a in o[d])f[a]=od(f[a]||{},o[d][a],p[d]);s[d]=f}else if(Array.isArray(p[d])){let f={},a=p[d].reduce(function(T,M){return T[M]=!0,T},{});for(let[T,M]of Object.entries(s[d]||{}))f[T]={},M&&od(f[T],M,a);for(let T in o[d])Au.call(o[d],T)&&(f[T]||(f[T]={}),o[d]&&o[d][T]&&od(f[T],o[d][T],a));s[d]=f}}}return s}Uw.exports=(s,o)=>od(s,o,iO)});var Hw=Ee($w=>{var nO=lc(),aO=ug(),sO=Zh(),uy=W1(),oO=U1(),lO=vt(),cO=ow(),uO=Iw(),hO=Lw(),dO=jw(),pO=qw(),hf=qp(),df=Zw();function hy(s){var o=cO(s),p=dO(s),d=uO(s),f=hO(p),a={List:nO,SyntaxError:aO,TokenStream:sO,Lexer:uy,vendorPrefix:hf.vendorPrefix,keyword:hf.keyword,property:hf.property,isCustomProperty:hf.isCustomProperty,definitionSyntax:oO,lexer:null,createLexer:function(T){return new uy(T,a,a.lexer.structure)},tokenize:lO,parse:o,walk:p,generate:d,find:p.find,findLast:p.findLast,findAll:p.findAll,clone:pO,fromPlainObject:f.fromPlainObject,toPlainObject:f.toPlainObject,createSyntax:function(T){return hy(df({},T))},fork:function(T){var M=df({},s);return hy(typeof T=="function"?T(M,Object.assign):df(M,T))}};return a.lexer=new uy({generic:!0,types:s.types,atrules:s.atrules,properties:s.properties,node:s.node},a),a}$w.create=function(s){return hy(df({},s))}});var Yw=Ee((pj,fO)=>{fO.exports={"@charset":{syntax:'@charset "<charset>";',groups:["CSS Charsets"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@charset"},"@counter-style":{syntax:`@counter-style <counter-style-name> {
  [ system: <counter-system>; ] ||
  [ symbols: <counter-symbols>; ] ||
  [ additive-symbols: <additive-symbols>; ] ||
  [ negative: <negative-symbol>; ] ||
  [ prefix: <prefix>; ] ||
  [ suffix: <suffix>; ] ||
  [ range: <range>; ] ||
  [ pad: <padding>; ] ||
  [ speak-as: <speak-as>; ] ||
  [ fallback: <counter-style-name>; ]
}`,interfaces:["CSSCounterStyleRule"],groups:["CSS Counter Styles"],descriptors:{"additive-symbols":{syntax:"[ <integer> && <symbol> ]#",media:"all",initial:"n/a (required)",percentages:"no",computed:"asSpecified",order:"orderOfAppearance",status:"standard"},fallback:{syntax:"<counter-style-name>",media:"all",initial:"decimal",percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},negative:{syntax:"<symbol> <symbol>?",media:"all",initial:'"-" hyphen-minus',percentages:"no",computed:"asSpecified",order:"orderOfAppearance",status:"standard"},pad:{syntax:"<integer> && <symbol>",media:"all",initial:'0 ""',percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},prefix:{syntax:"<symbol>",media:"all",initial:'""',percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},range:{syntax:"[ [ <integer> | infinite ]{2} ]# | auto",media:"all",initial:"auto",percentages:"no",computed:"asSpecified",order:"orderOfAppearance",status:"standard"},"speak-as":{syntax:"auto | bullets | numbers | words | spell-out | <counter-style-name>",media:"all",initial:"auto",percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},suffix:{syntax:"<symbol>",media:"all",initial:'". "',percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},symbols:{syntax:"<symbol>+",media:"all",initial:"n/a (required)",percentages:"no",computed:"asSpecified",order:"orderOfAppearance",status:"standard"},system:{syntax:"cyclic | numeric | alphabetic | symbolic | additive | [ fixed <integer>? ] | [ extends <counter-style-name> ]",media:"all",initial:"symbolic",percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"}},status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@counter-style"},"@document":{syntax:`@document [ <url> | url-prefix(<string>) | domain(<string>) | media-document(<string>) | regexp(<string>) ]# {
  <group-rule-body>
}`,interfaces:["CSSGroupingRule","CSSConditionRule"],groups:["CSS Conditional Rules"],status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@document"},"@font-face":{syntax:`@font-face {
  [ font-family: <family-name>; ] ||
  [ src: <src>; ] ||
  [ unicode-range: <unicode-range>; ] ||
  [ font-variant: <font-variant>; ] ||
  [ font-feature-settings: <font-feature-settings>; ] ||
  [ font-variation-settings: <font-variation-settings>; ] ||
  [ font-stretch: <font-stretch>; ] ||
  [ font-weight: <font-weight>; ] ||
  [ font-style: <font-style>; ]
}`,interfaces:["CSSFontFaceRule"],groups:["CSS Fonts"],descriptors:{"font-display":{syntax:"[ auto | block | swap | fallback | optional ]",media:"visual",percentages:"no",initial:"auto",computed:"asSpecified",order:"uniqueOrder",status:"experimental"},"font-family":{syntax:"<family-name>",media:"all",initial:"n/a (required)",percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},"font-feature-settings":{syntax:"normal | <feature-tag-value>#",media:"all",initial:"normal",percentages:"no",computed:"asSpecified",order:"orderOfAppearance",status:"standard"},"font-variation-settings":{syntax:"normal | [ <string> <number> ]#",media:"all",initial:"normal",percentages:"no",computed:"asSpecified",order:"orderOfAppearance",status:"standard"},"font-stretch":{syntax:"<font-stretch-absolute>{1,2}",media:"all",initial:"normal",percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},"font-style":{syntax:"normal | italic | oblique <angle>{0,2}",media:"all",initial:"normal",percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},"font-weight":{syntax:"<font-weight-absolute>{1,2}",media:"all",initial:"normal",percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},"font-variant":{syntax:"normal | none | [ <common-lig-values> || <discretionary-lig-values> || <historical-lig-values> || <contextual-alt-values> || stylistic(<feature-value-name>) || historical-forms || styleset(<feature-value-name>#) || character-variant(<feature-value-name>#) || swash(<feature-value-name>) || ornaments(<feature-value-name>) || annotation(<feature-value-name>) || [ small-caps | all-small-caps | petite-caps | all-petite-caps | unicase | titling-caps ] || <numeric-figure-values> || <numeric-spacing-values> || <numeric-fraction-values> || ordinal || slashed-zero || <east-asian-variant-values> || <east-asian-width-values> || ruby ]",media:"all",initial:"normal",percentages:"no",computed:"asSpecified",order:"orderOfAppearance",status:"standard"},src:{syntax:"[ <url> [ format( <string># ) ]? | local( <family-name> ) ]#",media:"all",initial:"n/a (required)",percentages:"no",computed:"asSpecified",order:"orderOfAppearance",status:"standard"},"unicode-range":{syntax:"<unicode-range>#",media:"all",initial:"U+0-10FFFF",percentages:"no",computed:"asSpecified",order:"orderOfAppearance",status:"standard"}},status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@font-face"},"@font-feature-values":{syntax:`@font-feature-values <family-name># {
  <feature-value-block-list>
}`,interfaces:["CSSFontFeatureValuesRule"],groups:["CSS Fonts"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@font-feature-values"},"@import":{syntax:"@import [ <string> | <url> ] [ <media-query-list> ]?;",groups:["Media Queries"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@import"},"@keyframes":{syntax:`@keyframes <keyframes-name> {
  <keyframe-block-list>
}`,interfaces:["CSSKeyframeRule","CSSKeyframesRule"],groups:["CSS Animations"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@keyframes"},"@media":{syntax:`@media <media-query-list> {
  <group-rule-body>
}`,interfaces:["CSSGroupingRule","CSSConditionRule","CSSMediaRule","CSSCustomMediaRule"],groups:["CSS Conditional Rules","Media Queries"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@media"},"@namespace":{syntax:"@namespace <namespace-prefix>? [ <string> | <url> ];",groups:["CSS Namespaces"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@namespace"},"@page":{syntax:`@page <page-selector-list> {
  <page-body>
}`,interfaces:["CSSPageRule"],groups:["CSS Pages"],descriptors:{bleed:{syntax:"auto | <length>",media:["visual","paged"],initial:"auto",percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},marks:{syntax:"none | [ crop || cross ]",media:["visual","paged"],initial:"none",percentages:"no",computed:"asSpecified",order:"orderOfAppearance",status:"standard"},size:{syntax:"<length>{1,2} | auto | [ <page-size> || [ portrait | landscape ] ]",media:["visual","paged"],initial:"auto",percentages:"no",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"orderOfAppearance",status:"standard"}},status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@page"},"@property":{syntax:`@property <custom-property-name> {
  <declaration-list>
}`,interfaces:["CSS","CSSPropertyRule"],groups:["CSS Houdini"],descriptors:{syntax:{syntax:"<string>",media:"all",percentages:"no",initial:"n/a (required)",computed:"asSpecified",order:"uniqueOrder",status:"experimental"},inherits:{syntax:"true | false",media:"all",percentages:"no",initial:"auto",computed:"asSpecified",order:"uniqueOrder",status:"experimental"},"initial-value":{syntax:"<string>",media:"all",initial:"n/a (required)",percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"experimental"}},status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@property"},"@supports":{syntax:`@supports <supports-condition> {
  <group-rule-body>
}`,interfaces:["CSSGroupingRule","CSSConditionRule","CSSSupportsRule"],groups:["CSS Conditional Rules"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@supports"},"@viewport":{syntax:`@viewport {
  <group-rule-body>
}`,interfaces:["CSSViewportRule"],groups:["CSS Device Adaptation"],descriptors:{height:{syntax:"<viewport-length>{1,2}",media:["visual","continuous"],initial:["min-height","max-height"],percentages:["min-height","max-height"],computed:["min-height","max-height"],order:"orderOfAppearance",status:"standard"},"max-height":{syntax:"<viewport-length>",media:["visual","continuous"],initial:"auto",percentages:"referToHeightOfInitialViewport",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard"},"max-width":{syntax:"<viewport-length>",media:["visual","continuous"],initial:"auto",percentages:"referToWidthOfInitialViewport",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard"},"max-zoom":{syntax:"auto | <number> | <percentage>",media:["visual","continuous"],initial:"auto",percentages:"the zoom factor itself",computed:"autoNonNegativeOrPercentage",order:"uniqueOrder",status:"standard"},"min-height":{syntax:"<viewport-length>",media:["visual","continuous"],initial:"auto",percentages:"referToHeightOfInitialViewport",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard"},"min-width":{syntax:"<viewport-length>",media:["visual","continuous"],initial:"auto",percentages:"referToWidthOfInitialViewport",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard"},"min-zoom":{syntax:"auto | <number> | <percentage>",media:["visual","continuous"],initial:"auto",percentages:"the zoom factor itself",computed:"autoNonNegativeOrPercentage",order:"uniqueOrder",status:"standard"},orientation:{syntax:"auto | portrait | landscape",media:["visual","continuous"],initial:"auto",percentages:"referToSizeOfBoundingBox",computed:"asSpecified",order:"uniqueOrder",status:"standard"},"user-zoom":{syntax:"zoom | fixed",media:["visual","continuous"],initial:"zoom",percentages:"referToSizeOfBoundingBox",computed:"asSpecified",order:"uniqueOrder",status:"standard"},"viewport-fit":{syntax:"auto | contain | cover",media:["visual","continuous"],initial:"auto",percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},width:{syntax:"<viewport-length>{1,2}",media:["visual","continuous"],initial:["min-width","max-width"],percentages:["min-width","max-width"],computed:["min-width","max-width"],order:"orderOfAppearance",status:"standard"},zoom:{syntax:"auto | <number> | <percentage>",media:["visual","continuous"],initial:"auto",percentages:"the zoom factor itself",computed:"autoNonNegativeOrPercentage",order:"uniqueOrder",status:"standard"}},status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@viewport"}}});var Xw=Ee((fj,mO)=>{mO.exports={"--*":{syntax:"<declaration-value>",media:"all",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Variables"],initial:"seeProse",appliesto:"allElements",computed:"asSpecifiedWithVarsSubstituted",order:"perGrammar",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/--*"},"-ms-accelerator":{syntax:"false | true",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"false",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-accelerator"},"-ms-block-progression":{syntax:"tb | rl | bt | lr",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"tb",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-block-progression"},"-ms-content-zoom-chaining":{syntax:"none | chained",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"none",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-content-zoom-chaining"},"-ms-content-zooming":{syntax:"none | zoom",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"zoomForTheTopLevelNoneForTheRest",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-content-zooming"},"-ms-content-zoom-limit":{syntax:"<'-ms-content-zoom-limit-min'> <'-ms-content-zoom-limit-max'>",media:"interactive",inherited:!1,animationType:"discrete",percentages:["-ms-content-zoom-limit-max","-ms-content-zoom-limit-min"],groups:["Microsoft Extensions"],initial:["-ms-content-zoom-limit-max","-ms-content-zoom-limit-min"],appliesto:"nonReplacedBlockAndInlineBlockElements",computed:["-ms-content-zoom-limit-max","-ms-content-zoom-limit-min"],order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-content-zoom-limit"},"-ms-content-zoom-limit-max":{syntax:"<percentage>",media:"interactive",inherited:!1,animationType:"discrete",percentages:"maxZoomFactor",groups:["Microsoft Extensions"],initial:"400%",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-content-zoom-limit-max"},"-ms-content-zoom-limit-min":{syntax:"<percentage>",media:"interactive",inherited:!1,animationType:"discrete",percentages:"minZoomFactor",groups:["Microsoft Extensions"],initial:"100%",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-content-zoom-limit-min"},"-ms-content-zoom-snap":{syntax:"<'-ms-content-zoom-snap-type'> || <'-ms-content-zoom-snap-points'>",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:["-ms-content-zoom-snap-type","-ms-content-zoom-snap-points"],appliesto:"nonReplacedBlockAndInlineBlockElements",computed:["-ms-content-zoom-snap-type","-ms-content-zoom-snap-points"],order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-content-zoom-snap"},"-ms-content-zoom-snap-points":{syntax:"snapInterval( <percentage>, <percentage> ) | snapList( <percentage># )",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"snapInterval(0%, 100%)",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-content-zoom-snap-points"},"-ms-content-zoom-snap-type":{syntax:"none | proximity | mandatory",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"none",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-content-zoom-snap-type"},"-ms-filter":{syntax:"<string>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:'""',appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-filter"},"-ms-flow-from":{syntax:"[ none | <custom-ident> ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"none",appliesto:"nonReplacedElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-flow-from"},"-ms-flow-into":{syntax:"[ none | <custom-ident> ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"none",appliesto:"iframeElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-flow-into"},"-ms-grid-columns":{syntax:"none | <track-list> | <auto-track-list>",media:"visual",inherited:!1,animationType:"simpleListOfLpcDifferenceLpc",percentages:"referToDimensionOfContentArea",groups:["CSS Grid Layout"],initial:"none",appliesto:"gridContainers",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-grid-columns"},"-ms-grid-rows":{syntax:"none | <track-list> | <auto-track-list>",media:"visual",inherited:!1,animationType:"simpleListOfLpcDifferenceLpc",percentages:"referToDimensionOfContentArea",groups:["CSS Grid Layout"],initial:"none",appliesto:"gridContainers",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-grid-rows"},"-ms-high-contrast-adjust":{syntax:"auto | none",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-high-contrast-adjust"},"-ms-hyphenate-limit-chars":{syntax:"auto | <integer>{1,3}",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-hyphenate-limit-chars"},"-ms-hyphenate-limit-lines":{syntax:"no-limit | <integer>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"no-limit",appliesto:"blockContainerElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-hyphenate-limit-lines"},"-ms-hyphenate-limit-zone":{syntax:"<percentage> | <length>",media:"visual",inherited:!0,animationType:"discrete",percentages:"referToLineBoxWidth",groups:["Microsoft Extensions"],initial:"0",appliesto:"blockContainerElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-hyphenate-limit-zone"},"-ms-ime-align":{syntax:"auto | after",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-ime-align"},"-ms-overflow-style":{syntax:"auto | none | scrollbar | -ms-autohiding-scrollbar",media:"interactive",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"auto",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-overflow-style"},"-ms-scrollbar-3dlight-color":{syntax:"<color>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"dependsOnUserAgent",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scrollbar-3dlight-color"},"-ms-scrollbar-arrow-color":{syntax:"<color>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"ButtonText",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scrollbar-arrow-color"},"-ms-scrollbar-base-color":{syntax:"<color>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"dependsOnUserAgent",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scrollbar-base-color"},"-ms-scrollbar-darkshadow-color":{syntax:"<color>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"ThreeDDarkShadow",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scrollbar-darkshadow-color"},"-ms-scrollbar-face-color":{syntax:"<color>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"ThreeDFace",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scrollbar-face-color"},"-ms-scrollbar-highlight-color":{syntax:"<color>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"ThreeDHighlight",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scrollbar-highlight-color"},"-ms-scrollbar-shadow-color":{syntax:"<color>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"ThreeDDarkShadow",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scrollbar-shadow-color"},"-ms-scrollbar-track-color":{syntax:"<color>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"Scrollbar",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scrollbar-track-color"},"-ms-scroll-chaining":{syntax:"chained | none",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"chained",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-chaining"},"-ms-scroll-limit":{syntax:"<'-ms-scroll-limit-x-min'> <'-ms-scroll-limit-y-min'> <'-ms-scroll-limit-x-max'> <'-ms-scroll-limit-y-max'>",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:["-ms-scroll-limit-x-min","-ms-scroll-limit-y-min","-ms-scroll-limit-x-max","-ms-scroll-limit-y-max"],appliesto:"nonReplacedBlockAndInlineBlockElements",computed:["-ms-scroll-limit-x-min","-ms-scroll-limit-y-min","-ms-scroll-limit-x-max","-ms-scroll-limit-y-max"],order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-limit"},"-ms-scroll-limit-x-max":{syntax:"auto | <length>",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"auto",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-limit-x-max"},"-ms-scroll-limit-x-min":{syntax:"<length>",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"0",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-limit-x-min"},"-ms-scroll-limit-y-max":{syntax:"auto | <length>",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"auto",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-limit-y-max"},"-ms-scroll-limit-y-min":{syntax:"<length>",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"0",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-limit-y-min"},"-ms-scroll-rails":{syntax:"none | railed",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"railed",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-rails"},"-ms-scroll-snap-points-x":{syntax:"snapInterval( <length-percentage>, <length-percentage> ) | snapList( <length-percentage># )",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"snapInterval(0px, 100%)",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-snap-points-x"},"-ms-scroll-snap-points-y":{syntax:"snapInterval( <length-percentage>, <length-percentage> ) | snapList( <length-percentage># )",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"snapInterval(0px, 100%)",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-snap-points-y"},"-ms-scroll-snap-type":{syntax:"none | proximity | mandatory",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"none",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-snap-type"},"-ms-scroll-snap-x":{syntax:"<'-ms-scroll-snap-type'> <'-ms-scroll-snap-points-x'>",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:["-ms-scroll-snap-type","-ms-scroll-snap-points-x"],appliesto:"nonReplacedBlockAndInlineBlockElements",computed:["-ms-scroll-snap-type","-ms-scroll-snap-points-x"],order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-snap-x"},"-ms-scroll-snap-y":{syntax:"<'-ms-scroll-snap-type'> <'-ms-scroll-snap-points-y'>",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:["-ms-scroll-snap-type","-ms-scroll-snap-points-y"],appliesto:"nonReplacedBlockAndInlineBlockElements",computed:["-ms-scroll-snap-type","-ms-scroll-snap-points-y"],order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-snap-y"},"-ms-scroll-translation":{syntax:"none | vertical-to-horizontal",media:"interactive",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-translation"},"-ms-text-autospace":{syntax:"none | ideograph-alpha | ideograph-numeric | ideograph-parenthesis | ideograph-space",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-text-autospace"},"-ms-touch-select":{syntax:"grippers | none",media:"interactive",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"grippers",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-touch-select"},"-ms-user-select":{syntax:"none | element | text",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"text",appliesto:"nonReplacedElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-user-select"},"-ms-wrap-flow":{syntax:"auto | both | start | end | maximum | clear",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"auto",appliesto:"blockLevelElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-wrap-flow"},"-ms-wrap-margin":{syntax:"<length>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"0",appliesto:"exclusionElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-wrap-margin"},"-ms-wrap-through":{syntax:"wrap | none",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"wrap",appliesto:"blockLevelElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-wrap-through"},"-moz-appearance":{syntax:"none | button | button-arrow-down | button-arrow-next | button-arrow-previous | button-arrow-up | button-bevel | button-focus | caret | checkbox | checkbox-container | checkbox-label | checkmenuitem | dualbutton | groupbox | listbox | listitem | menuarrow | menubar | menucheckbox | menuimage | menuitem | menuitemtext | menulist | menulist-button | menulist-text | menulist-textfield | menupopup | menuradio | menuseparator | meterbar | meterchunk | progressbar | progressbar-vertical | progresschunk | progresschunk-vertical | radio | radio-container | radio-label | radiomenuitem | range | range-thumb | resizer | resizerpanel | scale-horizontal | scalethumbend | scalethumb-horizontal | scalethumbstart | scalethumbtick | scalethumb-vertical | scale-vertical | scrollbarbutton-down | scrollbarbutton-left | scrollbarbutton-right | scrollbarbutton-up | scrollbarthumb-horizontal | scrollbarthumb-vertical | scrollbartrack-horizontal | scrollbartrack-vertical | searchfield | separator | sheet | spinner | spinner-downbutton | spinner-textfield | spinner-upbutton | splitter | statusbar | statusbarpanel | tab | tabpanel | tabpanels | tab-scroll-arrow-back | tab-scroll-arrow-forward | textfield | textfield-multiline | toolbar | toolbarbutton | toolbarbutton-dropdown | toolbargripper | toolbox | tooltip | treeheader | treeheadercell | treeheadersortarrow | treeitem | treeline | treetwisty | treetwistyopen | treeview | -moz-mac-unified-toolbar | -moz-win-borderless-glass | -moz-win-browsertabbar-toolbox | -moz-win-communicationstext | -moz-win-communications-toolbox | -moz-win-exclude-glass | -moz-win-glass | -moz-win-mediatext | -moz-win-media-toolbox | -moz-window-button-box | -moz-window-button-box-maximized | -moz-window-button-close | -moz-window-button-maximize | -moz-window-button-minimize | -moz-window-button-restore | -moz-window-frame-bottom | -moz-window-frame-left | -moz-window-frame-right | -moz-window-titlebar | -moz-window-titlebar-maximized",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions","WebKit Extensions"],initial:"noneButOverriddenInUserAgentCSS",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/appearance"},"-moz-binding":{syntax:"<url> | none",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"none",appliesto:"allElementsExceptGeneratedContentOrPseudoElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-binding"},"-moz-border-bottom-colors":{syntax:"<color>+ | none",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-border-bottom-colors"},"-moz-border-left-colors":{syntax:"<color>+ | none",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-border-left-colors"},"-moz-border-right-colors":{syntax:"<color>+ | none",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-border-right-colors"},"-moz-border-top-colors":{syntax:"<color>+ | none",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-border-top-colors"},"-moz-context-properties":{syntax:"none | [ fill | fill-opacity | stroke | stroke-opacity ]#",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"none",appliesto:"allElementsThatCanReferenceImages",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-context-properties"},"-moz-float-edge":{syntax:"border-box | content-box | margin-box | padding-box",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"content-box",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-float-edge"},"-moz-force-broken-image-icon":{syntax:"<integer [0,1]>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"0",appliesto:"images",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-force-broken-image-icon"},"-moz-image-region":{syntax:"<shape> | auto",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"auto",appliesto:"xulImageElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-image-region"},"-moz-orient":{syntax:"inline | block | horizontal | vertical",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"inline",appliesto:"anyElementEffectOnProgressAndMeter",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-orient"},"-moz-outline-radius":{syntax:"<outline-radius>{1,4} [ / <outline-radius>{1,4} ]?",media:"visual",inherited:!1,animationType:["-moz-outline-radius-topleft","-moz-outline-radius-topright","-moz-outline-radius-bottomright","-moz-outline-radius-bottomleft"],percentages:["-moz-outline-radius-topleft","-moz-outline-radius-topright","-moz-outline-radius-bottomright","-moz-outline-radius-bottomleft"],groups:["Mozilla Extensions"],initial:["-moz-outline-radius-topleft","-moz-outline-radius-topright","-moz-outline-radius-bottomright","-moz-outline-radius-bottomleft"],appliesto:"allElements",computed:["-moz-outline-radius-topleft","-moz-outline-radius-topright","-moz-outline-radius-bottomright","-moz-outline-radius-bottomleft"],order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-outline-radius"},"-moz-outline-radius-bottomleft":{syntax:"<outline-radius>",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["Mozilla Extensions"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-outline-radius-bottomleft"},"-moz-outline-radius-bottomright":{syntax:"<outline-radius>",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["Mozilla Extensions"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-outline-radius-bottomright"},"-moz-outline-radius-topleft":{syntax:"<outline-radius>",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["Mozilla Extensions"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-outline-radius-topleft"},"-moz-outline-radius-topright":{syntax:"<outline-radius>",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["Mozilla Extensions"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-outline-radius-topright"},"-moz-stack-sizing":{syntax:"ignore | stretch-to-fit",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"stretch-to-fit",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-stack-sizing"},"-moz-text-blink":{syntax:"none | blink",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-text-blink"},"-moz-user-focus":{syntax:"ignore | normal | select-after | select-before | select-menu | select-same | select-all | none",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-user-focus"},"-moz-user-input":{syntax:"auto | none | enabled | disabled",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-user-input"},"-moz-user-modify":{syntax:"read-only | read-write | write-only",media:"interactive",inherited:!0,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"read-only",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-user-modify"},"-moz-window-dragging":{syntax:"drag | no-drag",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"drag",appliesto:"allElementsCreatingNativeWindows",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-window-dragging"},"-moz-window-shadow":{syntax:"default | menu | tooltip | sheet | none",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"default",appliesto:"allElementsCreatingNativeWindows",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-window-shadow"},"-webkit-appearance":{syntax:"none | button | button-bevel | caret | checkbox | default-button | inner-spin-button | listbox | listitem | media-controls-background | media-controls-fullscreen-background | media-current-time-display | media-enter-fullscreen-button | media-exit-fullscreen-button | media-fullscreen-button | media-mute-button | media-overlay-play-button | media-play-button | media-seek-back-button | media-seek-forward-button | media-slider | media-sliderthumb | media-time-remaining-display | media-toggle-closed-captions-button | media-volume-slider | media-volume-slider-container | media-volume-sliderthumb | menulist | menulist-button | menulist-text | menulist-textfield | meter | progress-bar | progress-bar-value | push-button | radio | searchfield | searchfield-cancel-button | searchfield-decoration | searchfield-results-button | searchfield-results-decoration | slider-horizontal | slider-vertical | sliderthumb-horizontal | sliderthumb-vertical | square-button | textarea | textfield | -apple-pay-button",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"noneButOverriddenInUserAgentCSS",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/appearance"},"-webkit-border-before":{syntax:"<'border-width'> || <'border-style'> || <'color'>",media:"visual",inherited:!0,animationType:"discrete",percentages:["-webkit-border-before-width"],groups:["WebKit Extensions"],initial:["border-width","border-style","color"],appliesto:"allElements",computed:["border-width","border-style","color"],order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-border-before"},"-webkit-border-before-color":{syntax:"<'color'>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",status:"nonstandard"},"-webkit-border-before-style":{syntax:"<'border-style'>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard"},"-webkit-border-before-width":{syntax:"<'border-width'>",media:"visual",inherited:!0,animationType:"discrete",percentages:"logicalWidthOfContainingBlock",groups:["WebKit Extensions"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthZeroIfBorderStyleNoneOrHidden",order:"uniqueOrder",status:"nonstandard"},"-webkit-box-reflect":{syntax:"[ above | below | right | left ]? <length>? <image>?",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-box-reflect"},"-webkit-line-clamp":{syntax:"none | <integer>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["WebKit Extensions","CSS Overflow"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-line-clamp"},"-webkit-mask":{syntax:"[ <mask-reference> || <position> [ / <bg-size> ]? || <repeat-style> || [ <box> | border | padding | content | text ] || [ <box> | border | padding | content ] ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:["-webkit-mask-image","-webkit-mask-repeat","-webkit-mask-attachment","-webkit-mask-position","-webkit-mask-origin","-webkit-mask-clip"],appliesto:"allElements",computed:["-webkit-mask-image","-webkit-mask-repeat","-webkit-mask-attachment","-webkit-mask-position","-webkit-mask-origin","-webkit-mask-clip"],order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask"},"-webkit-mask-attachment":{syntax:"<attachment>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"scroll",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-mask-attachment"},"-webkit-mask-clip":{syntax:"[ <box> | border | padding | content | text ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"border",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-clip"},"-webkit-mask-composite":{syntax:"<composite-style>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"source-over",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-mask-composite"},"-webkit-mask-image":{syntax:"<mask-reference>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"none",appliesto:"allElements",computed:"absoluteURIOrNone",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-image"},"-webkit-mask-origin":{syntax:"[ <box> | border | padding | content ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"padding",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-origin"},"-webkit-mask-position":{syntax:"<position>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"referToSizeOfElement",groups:["WebKit Extensions"],initial:"0% 0%",appliesto:"allElements",computed:"absoluteLengthOrPercentage",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-position"},"-webkit-mask-position-x":{syntax:"[ <length-percentage> | left | center | right ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"referToSizeOfElement",groups:["WebKit Extensions"],initial:"0%",appliesto:"allElements",computed:"absoluteLengthOrPercentage",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-mask-position-x"},"-webkit-mask-position-y":{syntax:"[ <length-percentage> | top | center | bottom ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"referToSizeOfElement",groups:["WebKit Extensions"],initial:"0%",appliesto:"allElements",computed:"absoluteLengthOrPercentage",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-mask-position-y"},"-webkit-mask-repeat":{syntax:"<repeat-style>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"repeat",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-repeat"},"-webkit-mask-repeat-x":{syntax:"repeat | no-repeat | space | round",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"repeat",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-mask-repeat-x"},"-webkit-mask-repeat-y":{syntax:"repeat | no-repeat | space | round",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"repeat",appliesto:"allElements",computed:"absoluteLengthOrPercentage",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-mask-repeat-y"},"-webkit-mask-size":{syntax:"<bg-size>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"relativeToBackgroundPositioningArea",groups:["WebKit Extensions"],initial:"auto auto",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-size"},"-webkit-overflow-scrolling":{syntax:"auto | touch",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"auto",appliesto:"scrollingBoxes",computed:"asSpecified",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-overflow-scrolling"},"-webkit-tap-highlight-color":{syntax:"<color>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"black",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-tap-highlight-color"},"-webkit-text-fill-color":{syntax:"<color>",media:"visual",inherited:!0,animationType:"color",percentages:"no",groups:["WebKit Extensions"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-text-fill-color"},"-webkit-text-stroke":{syntax:"<length> || <color>",media:"visual",inherited:!0,animationType:["-webkit-text-stroke-width","-webkit-text-stroke-color"],percentages:"no",groups:["WebKit Extensions"],initial:["-webkit-text-stroke-width","-webkit-text-stroke-color"],appliesto:"allElements",computed:["-webkit-text-stroke-width","-webkit-text-stroke-color"],order:"canonicalOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-text-stroke"},"-webkit-text-stroke-color":{syntax:"<color>",media:"visual",inherited:!0,animationType:"color",percentages:"no",groups:["WebKit Extensions"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-text-stroke-color"},"-webkit-text-stroke-width":{syntax:"<length>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"0",appliesto:"allElements",computed:"absoluteLength",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-text-stroke-width"},"-webkit-touch-callout":{syntax:"default | none",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"default",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-touch-callout"},"-webkit-user-modify":{syntax:"read-only | read-write | read-write-plaintext-only",media:"interactive",inherited:!0,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"read-only",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard"},"align-content":{syntax:"normal | <baseline-position> | <content-distribution> | <overflow-position>? <content-position>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Alignment"],initial:"normal",appliesto:"multilineFlexContainers",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/align-content"},"align-items":{syntax:"normal | stretch | <baseline-position> | [ <overflow-position>? <self-position> ]",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Alignment"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/align-items"},"align-self":{syntax:"auto | normal | stretch | <baseline-position> | <overflow-position>? <self-position>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Alignment"],initial:"auto",appliesto:"flexItemsGridItemsAndAbsolutelyPositionedBoxes",computed:"autoOnAbsolutelyPositionedElementsValueOfAlignItemsOnParent",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/align-self"},"align-tracks":{syntax:"[ normal | <baseline-position> | <content-distribution> | <overflow-position>? <content-position> ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:"normal",appliesto:"gridContainersWithMasonryLayoutInTheirBlockAxis",computed:"asSpecified",order:"uniqueOrder",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/align-tracks"},all:{syntax:"initial | inherit | unset | revert",media:"noPracticalMedia",inherited:!1,animationType:"eachOfShorthandPropertiesExceptUnicodeBiDiAndDirection",percentages:"no",groups:["CSS Miscellaneous"],initial:"noPracticalInitialValue",appliesto:"allElements",computed:"asSpecifiedAppliesToEachProperty",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/all"},animation:{syntax:"<single-animation>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Animations"],initial:["animation-name","animation-duration","animation-timing-function","animation-delay","animation-iteration-count","animation-direction","animation-fill-mode","animation-play-state"],appliesto:"allElementsAndPseudos",computed:["animation-name","animation-duration","animation-timing-function","animation-delay","animation-direction","animation-iteration-count","animation-fill-mode","animation-play-state"],order:"orderOfAppearance",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/animation"},"animation-delay":{syntax:"<time>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Animations"],initial:"0s",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/animation-delay"},"animation-direction":{syntax:"<single-animation-direction>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Animations"],initial:"normal",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/animation-direction"},"animation-duration":{syntax:"<time>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Animations"],initial:"0s",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/animation-duration"},"animation-fill-mode":{syntax:"<single-animation-fill-mode>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Animations"],initial:"none",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/animation-fill-mode"},"animation-iteration-count":{syntax:"<single-animation-iteration-count>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Animations"],initial:"1",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/animation-iteration-count"},"animation-name":{syntax:"[ none | <keyframes-name> ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Animations"],initial:"none",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/animation-name"},"animation-play-state":{syntax:"<single-animation-play-state>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Animations"],initial:"running",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/animation-play-state"},"animation-timing-function":{syntax:"<timing-function>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Animations"],initial:"ease",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/animation-timing-function"},appearance:{syntax:"none | auto | textfield | menulist-button | <compat-auto>",media:"all",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Basic User Interface"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/appearance"},"aspect-ratio":{syntax:"auto | <ratio>",media:"all",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Basic User Interface"],initial:"auto",appliesto:"allElementsExceptInlineBoxesAndInternalRubyOrTableBoxes",computed:"asSpecified",order:"perGrammar",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/aspect-ratio"},azimuth:{syntax:"<angle> | [ [ left-side | far-left | left | center-left | center | center-right | right | far-right | right-side ] || behind ] | leftwards | rightwards",media:"aural",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Speech"],initial:"center",appliesto:"allElements",computed:"normalizedAngle",order:"orderOfAppearance",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/azimuth"},"backdrop-filter":{syntax:"none | <filter-function-list>",media:"visual",inherited:!1,animationType:"filterList",percentages:"no",groups:["Filter Effects"],initial:"none",appliesto:"allElementsSVGContainerElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/backdrop-filter"},"backface-visibility":{syntax:"visible | hidden",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Transforms"],initial:"visible",appliesto:"transformableElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/backface-visibility"},background:{syntax:"[ <bg-layer> , ]* <final-bg-layer>",media:"visual",inherited:!1,animationType:["background-color","background-image","background-clip","background-position","background-size","background-repeat","background-attachment"],percentages:["background-position","background-size"],groups:["CSS Backgrounds and Borders"],initial:["background-image","background-position","background-size","background-repeat","background-origin","background-clip","background-attachment","background-color"],appliesto:"allElements",computed:["background-image","background-position","background-size","background-repeat","background-origin","background-clip","background-attachment","background-color"],order:"orderOfAppearance",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background"},"background-attachment":{syntax:"<attachment>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"scroll",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-attachment"},"background-blend-mode":{syntax:"<blend-mode>#",media:"none",inherited:!1,animationType:"discrete",percentages:"no",groups:["Compositing and Blending"],initial:"normal",appliesto:"allElementsSVGContainerGraphicsAndGraphicsReferencingElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-blend-mode"},"background-clip":{syntax:"<box>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"border-box",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-clip"},"background-color":{syntax:"<color>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"transparent",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-color"},"background-image":{syntax:"<bg-image>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"none",appliesto:"allElements",computed:"asSpecifiedURLsAbsolute",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-image"},"background-origin":{syntax:"<box>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"padding-box",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-origin"},"background-position":{syntax:"<bg-position>#",media:"visual",inherited:!1,animationType:"repeatableListOfSimpleListOfLpc",percentages:"referToSizeOfBackgroundPositioningAreaMinusBackgroundImageSize",groups:["CSS Backgrounds and Borders"],initial:"0% 0%",appliesto:"allElements",computed:"listEachItemTwoKeywordsOriginOffsets",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-position"},"background-position-x":{syntax:"[ center | [ [ left | right | x-start | x-end ]? <length-percentage>? ]! ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"referToWidthOfBackgroundPositioningAreaMinusBackgroundImageHeight",groups:["CSS Backgrounds and Borders"],initial:"left",appliesto:"allElements",computed:"listEachItemConsistingOfAbsoluteLengthPercentageAndOrigin",order:"uniqueOrder",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-position-x"},"background-position-y":{syntax:"[ center | [ [ top | bottom | y-start | y-end ]? <length-percentage>? ]! ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"referToHeightOfBackgroundPositioningAreaMinusBackgroundImageHeight",groups:["CSS Backgrounds and Borders"],initial:"top",appliesto:"allElements",computed:"listEachItemConsistingOfAbsoluteLengthPercentageAndOrigin",order:"uniqueOrder",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-position-y"},"background-repeat":{syntax:"<repeat-style>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"repeat",appliesto:"allElements",computed:"listEachItemHasTwoKeywordsOnePerDimension",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-repeat"},"background-size":{syntax:"<bg-size>#",media:"visual",inherited:!1,animationType:"repeatableListOfSimpleListOfLpc",percentages:"relativeToBackgroundPositioningArea",groups:["CSS Backgrounds and Borders"],initial:"auto auto",appliesto:"allElements",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-size"},"block-overflow":{syntax:"clip | ellipsis | <string>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Overflow"],initial:"clip",appliesto:"blockContainers",computed:"asSpecified",order:"perGrammar",status:"experimental"},"block-size":{syntax:"<'width'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"blockSizeOfContainingBlock",groups:["CSS Logical Properties"],initial:"auto",appliesto:"sameAsWidthAndHeight",computed:"sameAsWidthAndHeight",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/block-size"},border:{syntax:"<line-width> || <line-style> || <color>",media:"visual",inherited:!1,animationType:["border-color","border-style","border-width"],percentages:"no",groups:["CSS Backgrounds and Borders"],initial:["border-width","border-style","border-color"],appliesto:"allElements",computed:["border-width","border-style","border-color"],order:"orderOfAppearance",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border"},"border-block":{syntax:"<'border-top-width'> || <'border-top-style'> || <'color'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Logical Properties"],initial:["border-top-width","border-top-style","border-top-color"],appliesto:"allElements",computed:["border-top-width","border-top-style","border-top-color"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block"},"border-block-color":{syntax:"<'border-top-color'>{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Logical Properties"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-color"},"border-block-style":{syntax:"<'border-top-style'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Logical Properties"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-style"},"border-block-width":{syntax:"<'border-top-width'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthZeroIfBorderStyleNoneOrHidden",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-width"},"border-block-end":{syntax:"<'border-top-width'> || <'border-top-style'> || <'color'>",media:"visual",inherited:!1,animationType:["border-block-end-color","border-block-end-style","border-block-end-width"],percentages:"no",groups:["CSS Logical Properties"],initial:["border-top-width","border-top-style","border-top-color"],appliesto:"allElements",computed:["border-top-width","border-top-style","border-top-color"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-end"},"border-block-end-color":{syntax:"<'border-top-color'>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Logical Properties"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-end-color"},"border-block-end-style":{syntax:"<'border-top-style'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Logical Properties"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-end-style"},"border-block-end-width":{syntax:"<'border-top-width'>",media:"visual",inherited:!1,animationType:"length",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthZeroIfBorderStyleNoneOrHidden",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-end-width"},"border-block-start":{syntax:"<'border-top-width'> || <'border-top-style'> || <'color'>",media:"visual",inherited:!1,animationType:["border-block-start-color","border-block-start-style","border-block-start-width"],percentages:"no",groups:["CSS Logical Properties"],initial:["border-width","border-style","color"],appliesto:"allElements",computed:["border-width","border-style","border-block-start-color"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-start"},"border-block-start-color":{syntax:"<'border-top-color'>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Logical Properties"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-start-color"},"border-block-start-style":{syntax:"<'border-top-style'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Logical Properties"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-start-style"},"border-block-start-width":{syntax:"<'border-top-width'>",media:"visual",inherited:!1,animationType:"length",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthZeroIfBorderStyleNoneOrHidden",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-start-width"},"border-bottom":{syntax:"<line-width> || <line-style> || <color>",media:"visual",inherited:!1,animationType:["border-bottom-color","border-bottom-style","border-bottom-width"],percentages:"no",groups:["CSS Backgrounds and Borders"],initial:["border-bottom-width","border-bottom-style","border-bottom-color"],appliesto:"allElements",computed:["border-bottom-width","border-bottom-style","border-bottom-color"],order:"orderOfAppearance",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-bottom"},"border-bottom-color":{syntax:"<'border-top-color'>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-bottom-color"},"border-bottom-left-radius":{syntax:"<length-percentage>{1,2}",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["CSS Backgrounds and Borders"],initial:"0",appliesto:"allElementsUAsNotRequiredWhenCollapse",computed:"twoAbsoluteLengthOrPercentages",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-bottom-left-radius"},"border-bottom-right-radius":{syntax:"<length-percentage>{1,2}",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["CSS Backgrounds and Borders"],initial:"0",appliesto:"allElementsUAsNotRequiredWhenCollapse",computed:"twoAbsoluteLengthOrPercentages",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-bottom-right-radius"},"border-bottom-style":{syntax:"<line-style>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-bottom-style"},"border-bottom-width":{syntax:"<line-width>",media:"visual",inherited:!1,animationType:"length",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthOr0IfBorderBottomStyleNoneOrHidden",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-bottom-width"},"border-collapse":{syntax:"collapse | separate",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Table"],initial:"separate",appliesto:"tableElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-collapse"},"border-color":{syntax:"<color>{1,4}",media:"visual",inherited:!1,animationType:["border-bottom-color","border-left-color","border-right-color","border-top-color"],percentages:"no",groups:["CSS Backgrounds and Borders"],initial:["border-top-color","border-right-color","border-bottom-color","border-left-color"],appliesto:"allElements",computed:["border-bottom-color","border-left-color","border-right-color","border-top-color"],order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-color"},"border-end-end-radius":{syntax:"<length-percentage>{1,2}",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["CSS Logical Properties"],initial:"0",appliesto:"allElementsUAsNotRequiredWhenCollapse",computed:"twoAbsoluteLengthOrPercentages",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-end-end-radius"},"border-end-start-radius":{syntax:"<length-percentage>{1,2}",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["CSS Logical Properties"],initial:"0",appliesto:"allElementsUAsNotRequiredWhenCollapse",computed:"twoAbsoluteLengthOrPercentages",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-end-start-radius"},"border-image":{syntax:"<'border-image-source'> || <'border-image-slice'> [ / <'border-image-width'> | / <'border-image-width'>? / <'border-image-outset'> ]? || <'border-image-repeat'>",media:"visual",inherited:!1,animationType:"discrete",percentages:["border-image-slice","border-image-width"],groups:["CSS Backgrounds and Borders"],initial:["border-image-source","border-image-slice","border-image-width","border-image-outset","border-image-repeat"],appliesto:"allElementsExceptTableElementsWhenCollapse",computed:["border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width"],order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-image"},"border-image-outset":{syntax:"[ <length> | <number> ]{1,4}",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"0",appliesto:"allElementsExceptTableElementsWhenCollapse",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-image-outset"},"border-image-repeat":{syntax:"[ stretch | repeat | round | space ]{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"stretch",appliesto:"allElementsExceptTableElementsWhenCollapse",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-image-repeat"},"border-image-slice":{syntax:"<number-percentage>{1,4} && fill?",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"referToSizeOfBorderImage",groups:["CSS Backgrounds and Borders"],initial:"100%",appliesto:"allElementsExceptTableElementsWhenCollapse",computed:"oneToFourPercentagesOrAbsoluteLengthsPlusFill",order:"percentagesOrLengthsFollowedByFill",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-image-slice"},"border-image-source":{syntax:"none | <image>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"none",appliesto:"allElementsExceptTableElementsWhenCollapse",computed:"noneOrImageWithAbsoluteURI",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-image-source"},"border-image-width":{syntax:"[ <length-percentage> | <number> | auto ]{1,4}",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"referToWidthOrHeightOfBorderImageArea",groups:["CSS Backgrounds and Borders"],initial:"1",appliesto:"allElementsExceptTableElementsWhenCollapse",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-image-width"},"border-inline":{syntax:"<'border-top-width'> || <'border-top-style'> || <'color'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Logical Properties"],initial:["border-top-width","border-top-style","border-top-color"],appliesto:"allElements",computed:["border-top-width","border-top-style","border-top-color"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline"},"border-inline-end":{syntax:"<'border-top-width'> || <'border-top-style'> || <'color'>",media:"visual",inherited:!1,animationType:["border-inline-end-color","border-inline-end-style","border-inline-end-width"],percentages:"no",groups:["CSS Logical Properties"],initial:["border-width","border-style","color"],appliesto:"allElements",computed:["border-width","border-style","border-inline-end-color"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-end"},"border-inline-color":{syntax:"<'border-top-color'>{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Logical Properties"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-color"},"border-inline-style":{syntax:"<'border-top-style'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Logical Properties"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-style"},"border-inline-width":{syntax:"<'border-top-width'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthZeroIfBorderStyleNoneOrHidden",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-width"},"border-inline-end-color":{syntax:"<'border-top-color'>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Logical Properties"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-end-color"},"border-inline-end-style":{syntax:"<'border-top-style'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Logical Properties"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-end-style"},"border-inline-end-width":{syntax:"<'border-top-width'>",media:"visual",inherited:!1,animationType:"length",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthZeroIfBorderStyleNoneOrHidden",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-end-width"},"border-inline-start":{syntax:"<'border-top-width'> || <'border-top-style'> || <'color'>",media:"visual",inherited:!1,animationType:["border-inline-start-color","border-inline-start-style","border-inline-start-width"],percentages:"no",groups:["CSS Logical Properties"],initial:["border-width","border-style","color"],appliesto:"allElements",computed:["border-width","border-style","border-inline-start-color"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-start"},"border-inline-start-color":{syntax:"<'border-top-color'>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Logical Properties"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-start-color"},"border-inline-start-style":{syntax:"<'border-top-style'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Logical Properties"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-start-style"},"border-inline-start-width":{syntax:"<'border-top-width'>",media:"visual",inherited:!1,animationType:"length",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthZeroIfBorderStyleNoneOrHidden",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-start-width"},"border-left":{syntax:"<line-width> || <line-style> || <color>",media:"visual",inherited:!1,animationType:["border-left-color","border-left-style","border-left-width"],percentages:"no",groups:["CSS Backgrounds and Borders"],initial:["border-left-width","border-left-style","border-left-color"],appliesto:"allElements",computed:["border-left-width","border-left-style","border-left-color"],order:"orderOfAppearance",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-left"},"border-left-color":{syntax:"<color>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-left-color"},"border-left-style":{syntax:"<line-style>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-left-style"},"border-left-width":{syntax:"<line-width>",media:"visual",inherited:!1,animationType:"length",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthOr0IfBorderLeftStyleNoneOrHidden",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-left-width"},"border-radius":{syntax:"<length-percentage>{1,4} [ / <length-percentage>{1,4} ]?",media:"visual",inherited:!1,animationType:["border-top-left-radius","border-top-right-radius","border-bottom-right-radius","border-bottom-left-radius"],percentages:"referToDimensionOfBorderBox",groups:["CSS Backgrounds and Borders"],initial:["border-top-left-radius","border-top-right-radius","border-bottom-right-radius","border-bottom-left-radius"],appliesto:"allElementsUAsNotRequiredWhenCollapse",computed:["border-bottom-left-radius","border-bottom-right-radius","border-top-left-radius","border-top-right-radius"],order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-radius"},"border-right":{syntax:"<line-width> || <line-style> || <color>",media:"visual",inherited:!1,animationType:["border-right-color","border-right-style","border-right-width"],percentages:"no",groups:["CSS Backgrounds and Borders"],initial:["border-right-width","border-right-style","border-right-color"],appliesto:"allElements",computed:["border-right-width","border-right-style","border-right-color"],order:"orderOfAppearance",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-right"},"border-right-color":{syntax:"<color>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-right-color"},"border-right-style":{syntax:"<line-style>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-right-style"},"border-right-width":{syntax:"<line-width>",media:"visual",inherited:!1,animationType:"length",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthOr0IfBorderRightStyleNoneOrHidden",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-right-width"},"border-spacing":{syntax:"<length> <length>?",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Table"],initial:"0",appliesto:"tableElements",computed:"twoAbsoluteLengths",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-spacing"},"border-start-end-radius":{syntax:"<length-percentage>{1,2}",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["CSS Logical Properties"],initial:"0",appliesto:"allElementsUAsNotRequiredWhenCollapse",computed:"twoAbsoluteLengthOrPercentages",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-start-end-radius"},"border-start-start-radius":{syntax:"<length-percentage>{1,2}",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["CSS Logical Properties"],initial:"0",appliesto:"allElementsUAsNotRequiredWhenCollapse",computed:"twoAbsoluteLengthOrPercentages",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-start-start-radius"},"border-style":{syntax:"<line-style>{1,4}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:["border-top-style","border-right-style","border-bottom-style","border-left-style"],appliesto:"allElements",computed:["border-bottom-style","border-left-style","border-right-style","border-top-style"],order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-style"},"border-top":{syntax:"<line-width> || <line-style> || <color>",media:"visual",inherited:!1,animationType:["border-top-color","border-top-style","border-top-width"],percentages:"no",groups:["CSS Backgrounds and Borders"],initial:["border-top-width","border-top-style","border-top-color"],appliesto:"allElements",computed:["border-top-width","border-top-style","border-top-color"],order:"orderOfAppearance",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-top"},"border-top-color":{syntax:"<color>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-top-color"},"border-top-left-radius":{syntax:"<length-percentage>{1,2}",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["CSS Backgrounds and Borders"],initial:"0",appliesto:"allElementsUAsNotRequiredWhenCollapse",computed:"twoAbsoluteLengthOrPercentages",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-top-left-radius"},"border-top-right-radius":{syntax:"<length-percentage>{1,2}",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["CSS Backgrounds and Borders"],initial:"0",appliesto:"allElementsUAsNotRequiredWhenCollapse",computed:"twoAbsoluteLengthOrPercentages",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-top-right-radius"},"border-top-style":{syntax:"<line-style>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-top-style"},"border-top-width":{syntax:"<line-width>",media:"visual",inherited:!1,animationType:"length",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthOr0IfBorderTopStyleNoneOrHidden",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-top-width"},"border-width":{syntax:"<line-width>{1,4}",media:"visual",inherited:!1,animationType:["border-bottom-width","border-left-width","border-right-width","border-top-width"],percentages:"no",groups:["CSS Backgrounds and Borders"],initial:["border-top-width","border-right-width","border-bottom-width","border-left-width"],appliesto:"allElements",computed:["border-bottom-width","border-left-width","border-right-width","border-top-width"],order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-width"},bottom:{syntax:"<length> | <percentage> | auto",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToContainingBlockHeight",groups:["CSS Positioning"],initial:"auto",appliesto:"positionedElements",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/bottom"},"box-align":{syntax:"start | center | end | baseline | stretch",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions","WebKit Extensions"],initial:"stretch",appliesto:"elementsWithDisplayBoxOrInlineBox",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-align"},"box-decoration-break":{syntax:"slice | clone",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Fragmentation"],initial:"slice",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-decoration-break"},"box-direction":{syntax:"normal | reverse | inherit",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions","WebKit Extensions"],initial:"normal",appliesto:"elementsWithDisplayBoxOrInlineBox",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-direction"},"box-flex":{syntax:"<number>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions","WebKit Extensions"],initial:"0",appliesto:"directChildrenOfElementsWithDisplayMozBoxMozInlineBox",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-flex"},"box-flex-group":{syntax:"<integer>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions","WebKit Extensions"],initial:"1",appliesto:"inFlowChildrenOfBoxElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-flex-group"},"box-lines":{syntax:"single | multiple",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions","WebKit Extensions"],initial:"single",appliesto:"boxElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-lines"},"box-ordinal-group":{syntax:"<integer>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions","WebKit Extensions"],initial:"1",appliesto:"childrenOfBoxElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-ordinal-group"},"box-orient":{syntax:"horizontal | vertical | inline-axis | block-axis | inherit",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions","WebKit Extensions"],initial:"inlineAxisHorizontalInXUL",appliesto:"elementsWithDisplayBoxOrInlineBox",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-orient"},"box-pack":{syntax:"start | center | end | justify",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions","WebKit Extensions"],initial:"start",appliesto:"elementsWithDisplayMozBoxMozInlineBox",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-pack"},"box-shadow":{syntax:"none | <shadow>#",media:"visual",inherited:!1,animationType:"shadowList",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"none",appliesto:"allElements",computed:"absoluteLengthsSpecifiedColorAsSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-shadow"},"box-sizing":{syntax:"content-box | border-box",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Basic User Interface"],initial:"content-box",appliesto:"allElementsAcceptingWidthOrHeight",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-sizing"},"break-after":{syntax:"auto | avoid | always | all | avoid-page | page | left | right | recto | verso | avoid-column | column | avoid-region | region",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Fragmentation"],initial:"auto",appliesto:"blockLevelElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/break-after"},"break-before":{syntax:"auto | avoid | always | all | avoid-page | page | left | right | recto | verso | avoid-column | column | avoid-region | region",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Fragmentation"],initial:"auto",appliesto:"blockLevelElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/break-before"},"break-inside":{syntax:"auto | avoid | avoid-page | avoid-column | avoid-region",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Fragmentation"],initial:"auto",appliesto:"blockLevelElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/break-inside"},"caption-side":{syntax:"top | bottom | block-start | block-end | inline-start | inline-end",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Table"],initial:"top",appliesto:"tableCaptionElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/caption-side"},"caret-color":{syntax:"auto | <color>",media:"interactive",inherited:!0,animationType:"color",percentages:"no",groups:["CSS Basic User Interface"],initial:"auto",appliesto:"allElements",computed:"asAutoOrColor",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/caret-color"},clear:{syntax:"none | left | right | both | inline-start | inline-end",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Positioning"],initial:"none",appliesto:"blockLevelElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/clear"},clip:{syntax:"<shape> | auto",media:"visual",inherited:!1,animationType:"rectangle",percentages:"no",groups:["CSS Masking"],initial:"auto",appliesto:"absolutelyPositionedElements",computed:"autoOrRectangle",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/clip"},"clip-path":{syntax:"<clip-source> | [ <basic-shape> || <geometry-box> ] | none",media:"visual",inherited:!1,animationType:"basicShapeOtherwiseNo",percentages:"referToReferenceBoxWhenSpecifiedOtherwiseBorderBox",groups:["CSS Masking"],initial:"none",appliesto:"allElementsSVGContainerElements",computed:"asSpecifiedURLsAbsolute",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/clip-path"},color:{syntax:"<color>",media:"visual",inherited:!0,animationType:"color",percentages:"no",groups:["CSS Color"],initial:"variesFromBrowserToBrowser",appliesto:"allElements",computed:"translucentValuesRGBAOtherwiseRGB",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/color"},"color-adjust":{syntax:"economy | exact",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Color"],initial:"economy",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/color-adjust"},"column-count":{syntax:"<integer> | auto",media:"visual",inherited:!1,animationType:"integer",percentages:"no",groups:["CSS Columns"],initial:"auto",appliesto:"blockContainersExceptTableWrappers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/column-count"},"column-fill":{syntax:"auto | balance | balance-all",media:"visualInContinuousMediaNoEffectInOverflowColumns",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Columns"],initial:"balance",appliesto:"multicolElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/column-fill"},"column-gap":{syntax:"normal | <length-percentage>",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfContentArea",groups:["CSS Box Alignment"],initial:"normal",appliesto:"multiColumnElementsFlexContainersGridContainers",computed:"asSpecifiedWithLengthsAbsoluteAndNormalComputingToZeroExceptMultiColumn",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/column-gap"},"column-rule":{syntax:"<'column-rule-width'> || <'column-rule-style'> || <'column-rule-color'>",media:"visual",inherited:!1,animationType:["column-rule-color","column-rule-style","column-rule-width"],percentages:"no",groups:["CSS Columns"],initial:["column-rule-width","column-rule-style","column-rule-color"],appliesto:"multicolElements",computed:["column-rule-color","column-rule-style","column-rule-width"],order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/column-rule"},"column-rule-color":{syntax:"<color>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Columns"],initial:"currentcolor",appliesto:"multicolElements",computed:"computedColor",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/column-rule-color"},"column-rule-style":{syntax:"<'border-style'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Columns"],initial:"none",appliesto:"multicolElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/column-rule-style"},"column-rule-width":{syntax:"<'border-width'>",media:"visual",inherited:!1,animationType:"length",percentages:"no",groups:["CSS Columns"],initial:"medium",appliesto:"multicolElements",computed:"absoluteLength0IfColumnRuleStyleNoneOrHidden",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/column-rule-width"},"column-span":{syntax:"none | all",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Columns"],initial:"none",appliesto:"inFlowBlockLevelElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/column-span"},"column-width":{syntax:"<length> | auto",media:"visual",inherited:!1,animationType:"length",percentages:"no",groups:["CSS Columns"],initial:"auto",appliesto:"blockContainersExceptTableWrappers",computed:"absoluteLengthZeroOrLarger",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/column-width"},columns:{syntax:"<'column-width'> || <'column-count'>",media:"visual",inherited:!1,animationType:["column-width","column-count"],percentages:"no",groups:["CSS Columns"],initial:["column-width","column-count"],appliesto:"blockContainersExceptTableWrappers",computed:["column-width","column-count"],order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/columns"},contain:{syntax:"none | strict | content | [ size || layout || style || paint ]",media:"all",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Containment"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/contain"},content:{syntax:"normal | none | [ <content-replacement> | <content-list> ] [/ <string> ]?",media:"all",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Generated Content"],initial:"normal",appliesto:"beforeAndAfterPseudos",computed:"normalOnElementsForPseudosNoneAbsoluteURIStringOrAsSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/content"},"counter-increment":{syntax:"[ <custom-ident> <integer>? ]+ | none",media:"all",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Counter Styles"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/counter-increment"},"counter-reset":{syntax:"[ <custom-ident> <integer>? ]+ | none",media:"all",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Counter Styles"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/counter-reset"},"counter-set":{syntax:"[ <custom-ident> <integer>? ]+ | none",media:"all",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Counter Styles"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/counter-set"},cursor:{syntax:"[ [ <url> [ <x> <y> ]? , ]* [ auto | default | none | context-menu | help | pointer | progress | wait | cell | crosshair | text | vertical-text | alias | copy | move | no-drop | not-allowed | e-resize | n-resize | ne-resize | nw-resize | s-resize | se-resize | sw-resize | w-resize | ew-resize | ns-resize | nesw-resize | nwse-resize | col-resize | row-resize | all-scroll | zoom-in | zoom-out | grab | grabbing ] ]",media:["visual","interactive"],inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Basic User Interface"],initial:"auto",appliesto:"allElements",computed:"asSpecifiedURLsAbsolute",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/cursor"},direction:{syntax:"ltr | rtl",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Writing Modes"],initial:"ltr",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/direction"},display:{syntax:"[ <display-outside> || <display-inside> ] | <display-listitem> | <display-internal> | <display-box> | <display-legacy>",media:"all",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Display"],initial:"inline",appliesto:"allElements",computed:"asSpecifiedExceptPositionedFloatingAndRootElementsKeywordMaybeDifferent",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/display"},"empty-cells":{syntax:"show | hide",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Table"],initial:"show",appliesto:"tableCellElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/empty-cells"},filter:{syntax:"none | <filter-function-list>",media:"visual",inherited:!1,animationType:"filterList",percentages:"no",groups:["Filter Effects"],initial:"none",appliesto:"allElementsSVGContainerElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/filter"},flex:{syntax:"none | [ <'flex-grow'> <'flex-shrink'>? || <'flex-basis'> ]",media:"visual",inherited:!1,animationType:["flex-grow","flex-shrink","flex-basis"],percentages:"no",groups:["CSS Flexible Box Layout"],initial:["flex-grow","flex-shrink","flex-basis"],appliesto:"flexItemsAndInFlowPseudos",computed:["flex-grow","flex-shrink","flex-basis"],order:"orderOfAppearance",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/flex"},"flex-basis":{syntax:"content | <'width'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToFlexContainersInnerMainSize",groups:["CSS Flexible Box Layout"],initial:"auto",appliesto:"flexItemsAndInFlowPseudos",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"lengthOrPercentageBeforeKeywordIfBothPresent",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/flex-basis"},"flex-direction":{syntax:"row | row-reverse | column | column-reverse",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Flexible Box Layout"],initial:"row",appliesto:"flexContainers",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/flex-direction"},"flex-flow":{syntax:"<'flex-direction'> || <'flex-wrap'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Flexible Box Layout"],initial:["flex-direction","flex-wrap"],appliesto:"flexContainers",computed:["flex-direction","flex-wrap"],order:"orderOfAppearance",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/flex-flow"},"flex-grow":{syntax:"<number>",media:"visual",inherited:!1,animationType:"number",percentages:"no",groups:["CSS Flexible Box Layout"],initial:"0",appliesto:"flexItemsAndInFlowPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/flex-grow"},"flex-shrink":{syntax:"<number>",media:"visual",inherited:!1,animationType:"number",percentages:"no",groups:["CSS Flexible Box Layout"],initial:"1",appliesto:"flexItemsAndInFlowPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/flex-shrink"},"flex-wrap":{syntax:"nowrap | wrap | wrap-reverse",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Flexible Box Layout"],initial:"nowrap",appliesto:"flexContainers",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/flex-wrap"},float:{syntax:"left | right | none | inline-start | inline-end",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Positioning"],initial:"none",appliesto:"allElementsNoEffectIfDisplayNone",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/float"},font:{syntax:"[ [ <'font-style'> || <font-variant-css21> || <'font-weight'> || <'font-stretch'> ]? <'font-size'> [ / <'line-height'> ]? <'font-family'> ] | caption | icon | menu | message-box | small-caption | status-bar",media:"visual",inherited:!0,animationType:["font-style","font-variant","font-weight","font-stretch","font-size","line-height","font-family"],percentages:["font-size","line-height"],groups:["CSS Fonts"],initial:["font-style","font-variant","font-weight","font-stretch","font-size","line-height","font-family"],appliesto:"allElements",computed:["font-style","font-variant","font-weight","font-stretch","font-size","line-height","font-family"],order:"orderOfAppearance",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font"},"font-family":{syntax:"[ <family-name> | <generic-family> ]#",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"dependsOnUserAgent",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-family"},"font-feature-settings":{syntax:"normal | <feature-tag-value>#",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-feature-settings"},"font-kerning":{syntax:"auto | normal | none",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-kerning"},"font-language-override":{syntax:"normal | <string>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-language-override"},"font-optical-sizing":{syntax:"auto | none",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-optical-sizing"},"font-variation-settings":{syntax:"normal | [ <string> <number> ]#",media:"visual",inherited:!0,animationType:"transform",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-variation-settings"},"font-size":{syntax:"<absolute-size> | <relative-size> | <length-percentage>",media:"visual",inherited:!0,animationType:"length",percentages:"referToParentElementsFontSize",groups:["CSS Fonts"],initial:"medium",appliesto:"allElements",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-size"},"font-size-adjust":{syntax:"none | <number>",media:"visual",inherited:!0,animationType:"number",percentages:"no",groups:["CSS Fonts"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-size-adjust"},"font-smooth":{syntax:"auto | never | always | <absolute-size> | <length>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-smooth"},"font-stretch":{syntax:"<font-stretch-absolute>",media:"visual",inherited:!0,animationType:"fontStretch",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-stretch"},"font-style":{syntax:"normal | italic | oblique <angle>?",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-style"},"font-synthesis":{syntax:"none | [ weight || style ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"weight style",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-synthesis"},"font-variant":{syntax:"normal | none | [ <common-lig-values> || <discretionary-lig-values> || <historical-lig-values> || <contextual-alt-values> || stylistic( <feature-value-name> ) || historical-forms || styleset( <feature-value-name># ) || character-variant( <feature-value-name># ) || swash( <feature-value-name> ) || ornaments( <feature-value-name> ) || annotation( <feature-value-name> ) || [ small-caps | all-small-caps | petite-caps | all-petite-caps | unicase | titling-caps ] || <numeric-figure-values> || <numeric-spacing-values> || <numeric-fraction-values> || ordinal || slashed-zero || <east-asian-variant-values> || <east-asian-width-values> || ruby ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-variant"},"font-variant-alternates":{syntax:"normal | [ stylistic( <feature-value-name> ) || historical-forms || styleset( <feature-value-name># ) || character-variant( <feature-value-name># ) || swash( <feature-value-name> ) || ornaments( <feature-value-name> ) || annotation( <feature-value-name> ) ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-variant-alternates"},"font-variant-caps":{syntax:"normal | small-caps | all-small-caps | petite-caps | all-petite-caps | unicase | titling-caps",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-variant-caps"},"font-variant-east-asian":{syntax:"normal | [ <east-asian-variant-values> || <east-asian-width-values> || ruby ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-variant-east-asian"},"font-variant-ligatures":{syntax:"normal | none | [ <common-lig-values> || <discretionary-lig-values> || <historical-lig-values> || <contextual-alt-values> ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-variant-ligatures"},"font-variant-numeric":{syntax:"normal | [ <numeric-figure-values> || <numeric-spacing-values> || <numeric-fraction-values> || ordinal || slashed-zero ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-variant-numeric"},"font-variant-position":{syntax:"normal | sub | super",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-variant-position"},"font-weight":{syntax:"<font-weight-absolute> | bolder | lighter",media:"visual",inherited:!0,animationType:"fontWeight",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"keywordOrNumericalValueBolderLighterTransformedToRealValue",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-weight"},gap:{syntax:"<'row-gap'> <'column-gap'>?",media:"visual",inherited:!1,animationType:["row-gap","column-gap"],percentages:"no",groups:["CSS Box Alignment"],initial:["row-gap","column-gap"],appliesto:"multiColumnElementsFlexContainersGridContainers",computed:["row-gap","column-gap"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/gap"},grid:{syntax:"<'grid-template'> | <'grid-template-rows'> / [ auto-flow && dense? ] <'grid-auto-columns'>? | [ auto-flow && dense? ] <'grid-auto-rows'>? / <'grid-template-columns'>",media:"visual",inherited:!1,animationType:"discrete",percentages:["grid-template-rows","grid-template-columns","grid-auto-rows","grid-auto-columns"],groups:["CSS Grid Layout"],initial:["grid-template-rows","grid-template-columns","grid-template-areas","grid-auto-rows","grid-auto-columns","grid-auto-flow","grid-column-gap","grid-row-gap","column-gap","row-gap"],appliesto:"gridContainers",computed:["grid-template-rows","grid-template-columns","grid-template-areas","grid-auto-rows","grid-auto-columns","grid-auto-flow","grid-column-gap","grid-row-gap","column-gap","row-gap"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid"},"grid-area":{syntax:"<grid-line> [ / <grid-line> ]{0,3}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:["grid-row-start","grid-column-start","grid-row-end","grid-column-end"],appliesto:"gridItemsAndBoxesWithinGridContainer",computed:["grid-row-start","grid-column-start","grid-row-end","grid-column-end"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-area"},"grid-auto-columns":{syntax:"<track-size>+",media:"visual",inherited:!1,animationType:"discrete",percentages:"referToDimensionOfContentArea",groups:["CSS Grid Layout"],initial:"auto",appliesto:"gridContainers",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-auto-columns"},"grid-auto-flow":{syntax:"[ row | column ] || dense",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:"row",appliesto:"gridContainers",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-auto-flow"},"grid-auto-rows":{syntax:"<track-size>+",media:"visual",inherited:!1,animationType:"discrete",percentages:"referToDimensionOfContentArea",groups:["CSS Grid Layout"],initial:"auto",appliesto:"gridContainers",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-auto-rows"},"grid-column":{syntax:"<grid-line> [ / <grid-line> ]?",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:["grid-column-start","grid-column-end"],appliesto:"gridItemsAndBoxesWithinGridContainer",computed:["grid-column-start","grid-column-end"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-column"},"grid-column-end":{syntax:"<grid-line>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:"auto",appliesto:"gridItemsAndBoxesWithinGridContainer",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-column-end"},"grid-column-gap":{syntax:"<length-percentage>",media:"visual",inherited:!1,animationType:"length",percentages:"referToDimensionOfContentArea",groups:["CSS Grid Layout"],initial:"0",appliesto:"gridContainers",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/column-gap"},"grid-column-start":{syntax:"<grid-line>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:"auto",appliesto:"gridItemsAndBoxesWithinGridContainer",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-column-start"},"grid-gap":{syntax:"<'grid-row-gap'> <'grid-column-gap'>?",media:"visual",inherited:!1,animationType:["grid-row-gap","grid-column-gap"],percentages:"no",groups:["CSS Grid Layout"],initial:["grid-row-gap","grid-column-gap"],appliesto:"gridContainers",computed:["grid-row-gap","grid-column-gap"],order:"uniqueOrder",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/gap"},"grid-row":{syntax:"<grid-line> [ / <grid-line> ]?",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:["grid-row-start","grid-row-end"],appliesto:"gridItemsAndBoxesWithinGridContainer",computed:["grid-row-start","grid-row-end"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-row"},"grid-row-end":{syntax:"<grid-line>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:"auto",appliesto:"gridItemsAndBoxesWithinGridContainer",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-row-end"},"grid-row-gap":{syntax:"<length-percentage>",media:"visual",inherited:!1,animationType:"length",percentages:"referToDimensionOfContentArea",groups:["CSS Grid Layout"],initial:"0",appliesto:"gridContainers",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/row-gap"},"grid-row-start":{syntax:"<grid-line>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:"auto",appliesto:"gridItemsAndBoxesWithinGridContainer",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-row-start"},"grid-template":{syntax:"none | [ <'grid-template-rows'> / <'grid-template-columns'> ] | [ <line-names>? <string> <track-size>? <line-names>? ]+ [ / <explicit-track-list> ]?",media:"visual",inherited:!1,animationType:"discrete",percentages:["grid-template-columns","grid-template-rows"],groups:["CSS Grid Layout"],initial:["grid-template-columns","grid-template-rows","grid-template-areas"],appliesto:"gridContainers",computed:["grid-template-columns","grid-template-rows","grid-template-areas"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-template"},"grid-template-areas":{syntax:"none | <string>+",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:"none",appliesto:"gridContainers",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-template-areas"},"grid-template-columns":{syntax:"none | <track-list> | <auto-track-list> | subgrid <line-name-list>?",media:"visual",inherited:!1,animationType:"simpleListOfLpcDifferenceLpc",percentages:"referToDimensionOfContentArea",groups:["CSS Grid Layout"],initial:"none",appliesto:"gridContainers",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-template-columns"},"grid-template-rows":{syntax:"none | <track-list> | <auto-track-list> | subgrid <line-name-list>?",media:"visual",inherited:!1,animationType:"simpleListOfLpcDifferenceLpc",percentages:"referToDimensionOfContentArea",groups:["CSS Grid Layout"],initial:"none",appliesto:"gridContainers",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-template-rows"},"hanging-punctuation":{syntax:"none | [ first || [ force-end | allow-end ] || last ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/hanging-punctuation"},height:{syntax:"auto | <length> | <percentage> | min-content | max-content | fit-content(<length-percentage>)",media:"visual",inherited:!1,animationType:"lpc",percentages:"regardingHeightOfGeneratedBoxContainingBlockPercentagesRelativeToContainingBlock",groups:["CSS Box Model"],initial:"auto",appliesto:"allElementsButNonReplacedAndTableColumns",computed:"percentageAutoOrAbsoluteLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/height"},hyphens:{syntax:"none | manual | auto",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"manual",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/hyphens"},"image-orientation":{syntax:"from-image | <angle> | [ <angle>? flip ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Images"],initial:"from-image",appliesto:"allElements",computed:"angleRoundedToNextQuarter",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/image-orientation"},"image-rendering":{syntax:"auto | crisp-edges | pixelated",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Images"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/image-rendering"},"image-resolution":{syntax:"[ from-image || <resolution> ] && snap?",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Images"],initial:"1dppx",appliesto:"allElements",computed:"asSpecifiedWithExceptionOfResolution",order:"uniqueOrder",status:"experimental"},"ime-mode":{syntax:"auto | normal | active | inactive | disabled",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Basic User Interface"],initial:"auto",appliesto:"textFields",computed:"asSpecified",order:"uniqueOrder",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/ime-mode"},"initial-letter":{syntax:"normal | [ <number> <integer>? ]",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Inline"],initial:"normal",appliesto:"firstLetterPseudoElementsAndInlineLevelFirstChildren",computed:"asSpecified",order:"uniqueOrder",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/initial-letter"},"initial-letter-align":{syntax:"[ auto | alphabetic | hanging | ideographic ]",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Inline"],initial:"auto",appliesto:"firstLetterPseudoElementsAndInlineLevelFirstChildren",computed:"asSpecified",order:"uniqueOrder",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/initial-letter-align"},"inline-size":{syntax:"<'width'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"inlineSizeOfContainingBlock",groups:["CSS Logical Properties"],initial:"auto",appliesto:"sameAsWidthAndHeight",computed:"sameAsWidthAndHeight",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/inline-size"},inset:{syntax:"<'top'>{1,4}",media:"visual",inherited:!1,animationType:"lpc",percentages:"logicalHeightOfContainingBlock",groups:["CSS Logical Properties"],initial:"auto",appliesto:"positionedElements",computed:"sameAsBoxOffsets",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/inset"},"inset-block":{syntax:"<'top'>{1,2}",media:"visual",inherited:!1,animationType:"lpc",percentages:"logicalHeightOfContainingBlock",groups:["CSS Logical Properties"],initial:"auto",appliesto:"positionedElements",computed:"sameAsBoxOffsets",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/inset-block"},"inset-block-end":{syntax:"<'top'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"logicalHeightOfContainingBlock",groups:["CSS Logical Properties"],initial:"auto",appliesto:"positionedElements",computed:"sameAsBoxOffsets",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/inset-block-end"},"inset-block-start":{syntax:"<'top'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"logicalHeightOfContainingBlock",groups:["CSS Logical Properties"],initial:"auto",appliesto:"positionedElements",computed:"sameAsBoxOffsets",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/inset-block-start"},"inset-inline":{syntax:"<'top'>{1,2}",media:"visual",inherited:!1,animationType:"lpc",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"auto",appliesto:"positionedElements",computed:"sameAsBoxOffsets",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/inset-inline"},"inset-inline-end":{syntax:"<'top'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"auto",appliesto:"positionedElements",computed:"sameAsBoxOffsets",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/inset-inline-end"},"inset-inline-start":{syntax:"<'top'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"auto",appliesto:"positionedElements",computed:"sameAsBoxOffsets",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/inset-inline-start"},isolation:{syntax:"auto | isolate",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Compositing and Blending"],initial:"auto",appliesto:"allElementsSVGContainerGraphicsAndGraphicsReferencingElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/isolation"},"justify-content":{syntax:"normal | <content-distribution> | <overflow-position>? [ <content-position> | left | right ]",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Alignment"],initial:"normal",appliesto:"flexContainers",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/justify-content"},"justify-items":{syntax:"normal | stretch | <baseline-position> | <overflow-position>? [ <self-position> | left | right ] | legacy | legacy && [ left | right | center ]",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Alignment"],initial:"legacy",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/justify-items"},"justify-self":{syntax:"auto | normal | stretch | <baseline-position> | <overflow-position>? [ <self-position> | left | right ]",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Alignment"],initial:"auto",appliesto:"blockLevelBoxesAndAbsolutelyPositionedBoxesAndGridItems",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/justify-self"},"justify-tracks":{syntax:"[ normal | <content-distribution> | <overflow-position>? [ <content-position> | left | right ] ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:"normal",appliesto:"gridContainersWithMasonryLayoutInTheirInlineAxis",computed:"asSpecified",order:"uniqueOrder",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/justify-tracks"},left:{syntax:"<length> | <percentage> | auto",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToWidthOfContainingBlock",groups:["CSS Positioning"],initial:"auto",appliesto:"positionedElements",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/left"},"letter-spacing":{syntax:"normal | <length>",media:"visual",inherited:!0,animationType:"length",percentages:"no",groups:["CSS Text"],initial:"normal",appliesto:"allElements",computed:"optimumValueOfAbsoluteLengthOrNormal",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/letter-spacing"},"line-break":{syntax:"auto | loose | normal | strict | anywhere",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/line-break"},"line-clamp":{syntax:"none | <integer>",media:"visual",inherited:!1,animationType:"integer",percentages:"no",groups:["CSS Overflow"],initial:"none",appliesto:"blockContainersExceptMultiColumnContainers",computed:"asSpecified",order:"perGrammar",status:"experimental"},"line-height":{syntax:"normal | <number> | <length> | <percentage>",media:"visual",inherited:!0,animationType:"numberOrLength",percentages:"referToElementFontSize",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"absoluteLengthOrAsSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/line-height"},"line-height-step":{syntax:"<length>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"0",appliesto:"blockContainers",computed:"absoluteLength",order:"perGrammar",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/line-height-step"},"list-style":{syntax:"<'list-style-type'> || <'list-style-position'> || <'list-style-image'>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Lists and Counters"],initial:["list-style-type","list-style-position","list-style-image"],appliesto:"listItems",computed:["list-style-image","list-style-position","list-style-type"],order:"orderOfAppearance",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/list-style"},"list-style-image":{syntax:"<url> | none",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Lists and Counters"],initial:"none",appliesto:"listItems",computed:"noneOrImageWithAbsoluteURI",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/list-style-image"},"list-style-position":{syntax:"inside | outside",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Lists and Counters"],initial:"outside",appliesto:"listItems",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/list-style-position"},"list-style-type":{syntax:"<counter-style> | <string> | none",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Lists and Counters"],initial:"disc",appliesto:"listItems",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/list-style-type"},margin:{syntax:"[ <length> | <percentage> | auto ]{1,4}",media:"visual",inherited:!1,animationType:"length",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:["margin-bottom","margin-left","margin-right","margin-top"],appliesto:"allElementsExceptTableDisplayTypes",computed:["margin-bottom","margin-left","margin-right","margin-top"],order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin"},"margin-block":{syntax:"<'margin-left'>{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"dependsOnLayoutModel",groups:["CSS Logical Properties"],initial:"0",appliesto:"sameAsMargin",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-block"},"margin-block-end":{syntax:"<'margin-left'>",media:"visual",inherited:!1,animationType:"length",percentages:"dependsOnLayoutModel",groups:["CSS Logical Properties"],initial:"0",appliesto:"sameAsMargin",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-block-end"},"margin-block-start":{syntax:"<'margin-left'>",media:"visual",inherited:!1,animationType:"length",percentages:"dependsOnLayoutModel",groups:["CSS Logical Properties"],initial:"0",appliesto:"sameAsMargin",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-block-start"},"margin-bottom":{syntax:"<length> | <percentage> | auto",media:"visual",inherited:!1,animationType:"length",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"0",appliesto:"allElementsExceptTableDisplayTypes",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-bottom"},"margin-inline":{syntax:"<'margin-left'>{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"dependsOnLayoutModel",groups:["CSS Logical Properties"],initial:"0",appliesto:"sameAsMargin",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-inline"},"margin-inline-end":{syntax:"<'margin-left'>",media:"visual",inherited:!1,animationType:"length",percentages:"dependsOnLayoutModel",groups:["CSS Logical Properties"],initial:"0",appliesto:"sameAsMargin",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-inline-end"},"margin-inline-start":{syntax:"<'margin-left'>",media:"visual",inherited:!1,animationType:"length",percentages:"dependsOnLayoutModel",groups:["CSS Logical Properties"],initial:"0",appliesto:"sameAsMargin",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-inline-start"},"margin-left":{syntax:"<length> | <percentage> | auto",media:"visual",inherited:!1,animationType:"length",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"0",appliesto:"allElementsExceptTableDisplayTypes",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-left"},"margin-right":{syntax:"<length> | <percentage> | auto",media:"visual",inherited:!1,animationType:"length",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"0",appliesto:"allElementsExceptTableDisplayTypes",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-right"},"margin-top":{syntax:"<length> | <percentage> | auto",media:"visual",inherited:!1,animationType:"length",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"0",appliesto:"allElementsExceptTableDisplayTypes",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-top"},"margin-trim":{syntax:"none | in-flow | all",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Model"],initial:"none",appliesto:"blockContainersAndMultiColumnContainers",computed:"asSpecified",order:"perGrammar",alsoAppliesTo:["::first-letter","::first-line"],status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-trim"},mask:{syntax:"<mask-layer>#",media:"visual",inherited:!1,animationType:["mask-image","mask-mode","mask-repeat","mask-position","mask-clip","mask-origin","mask-size","mask-composite"],percentages:["mask-position"],groups:["CSS Masking"],initial:["mask-image","mask-mode","mask-repeat","mask-position","mask-clip","mask-origin","mask-size","mask-composite"],appliesto:"allElementsSVGContainerElements",computed:["mask-image","mask-mode","mask-repeat","mask-position","mask-clip","mask-origin","mask-size","mask-composite"],order:"perGrammar",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask"},"mask-border":{syntax:"<'mask-border-source'> || <'mask-border-slice'> [ / <'mask-border-width'>? [ / <'mask-border-outset'> ]? ]? || <'mask-border-repeat'> || <'mask-border-mode'>",media:"visual",inherited:!1,animationType:["mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width"],percentages:["mask-border-slice","mask-border-width"],groups:["CSS Masking"],initial:["mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width"],appliesto:"allElementsSVGContainerElements",computed:["mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width"],order:"perGrammar",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-border"},"mask-border-mode":{syntax:"luminance | alpha",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"alpha",appliesto:"allElementsSVGContainerElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-border-mode"},"mask-border-outset":{syntax:"[ <length> | <number> ]{1,4}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"0",appliesto:"allElementsSVGContainerElements",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-border-outset"},"mask-border-repeat":{syntax:"[ stretch | repeat | round | space ]{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"stretch",appliesto:"allElementsSVGContainerElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-border-repeat"},"mask-border-slice":{syntax:"<number-percentage>{1,4} fill?",media:"visual",inherited:!1,animationType:"discrete",percentages:"referToSizeOfMaskBorderImage",groups:["CSS Masking"],initial:"0",appliesto:"allElementsSVGContainerElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-border-slice"},"mask-border-source":{syntax:"none | <image>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"none",appliesto:"allElementsSVGContainerElements",computed:"asSpecifiedURLsAbsolute",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-border-source"},"mask-border-width":{syntax:"[ <length-percentage> | <number> | auto ]{1,4}",media:"visual",inherited:!1,animationType:"discrete",percentages:"relativeToMaskBorderImageArea",groups:["CSS Masking"],initial:"auto",appliesto:"allElementsSVGContainerElements",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-border-width"},"mask-clip":{syntax:"[ <geometry-box> | no-clip ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"border-box",appliesto:"allElementsSVGContainerElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-clip"},"mask-composite":{syntax:"<compositing-operator>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"add",appliesto:"allElementsSVGContainerElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-composite"},"mask-image":{syntax:"<mask-reference>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"none",appliesto:"allElementsSVGContainerElements",computed:"asSpecifiedURLsAbsolute",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-image"},"mask-mode":{syntax:"<masking-mode>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"match-source",appliesto:"allElementsSVGContainerElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-mode"},"mask-origin":{syntax:"<geometry-box>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"border-box",appliesto:"allElementsSVGContainerElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-origin"},"mask-position":{syntax:"<position>#",media:"visual",inherited:!1,animationType:"repeatableListOfSimpleListOfLpc",percentages:"referToSizeOfMaskPaintingArea",groups:["CSS Masking"],initial:"center",appliesto:"allElementsSVGContainerElements",computed:"consistsOfTwoKeywordsForOriginAndOffsets",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-position"},"mask-repeat":{syntax:"<repeat-style>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"no-repeat",appliesto:"allElementsSVGContainerElements",computed:"consistsOfTwoDimensionKeywords",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-repeat"},"mask-size":{syntax:"<bg-size>#",media:"visual",inherited:!1,animationType:"repeatableListOfSimpleListOfLpc",percentages:"no",groups:["CSS Masking"],initial:"auto",appliesto:"allElementsSVGContainerElements",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-size"},"mask-type":{syntax:"luminance | alpha",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"luminance",appliesto:"maskElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-type"},"masonry-auto-flow":{syntax:"[ pack | next ] || [ definite-first | ordered ]",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:"pack",appliesto:"gridContainersWithMasonryLayout",computed:"asSpecified",order:"uniqueOrder",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/masonry-auto-flow"},"math-style":{syntax:"normal | compact",media:"visual",inherited:!0,animationType:"notAnimatable",percentages:"no",groups:["MathML"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/math-style"},"max-block-size":{syntax:"<'max-width'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"blockSizeOfContainingBlock",groups:["CSS Logical Properties"],initial:"0",appliesto:"sameAsWidthAndHeight",computed:"sameAsMaxWidthAndMaxHeight",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/max-block-size"},"max-height":{syntax:"none | <length-percentage> | min-content | max-content | fit-content(<length-percentage>)",media:"visual",inherited:!1,animationType:"lpc",percentages:"regardingHeightOfGeneratedBoxContainingBlockPercentagesNone",groups:["CSS Box Model"],initial:"none",appliesto:"allElementsButNonReplacedAndTableColumns",computed:"percentageAsSpecifiedAbsoluteLengthOrNone",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/max-height"},"max-inline-size":{syntax:"<'max-width'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"inlineSizeOfContainingBlock",groups:["CSS Logical Properties"],initial:"0",appliesto:"sameAsWidthAndHeight",computed:"sameAsMaxWidthAndMaxHeight",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/max-inline-size"},"max-lines":{syntax:"none | <integer>",media:"visual",inherited:!1,animationType:"integer",percentages:"no",groups:["CSS Overflow"],initial:"none",appliesto:"blockContainersExceptMultiColumnContainers",computed:"asSpecified",order:"perGrammar",status:"experimental"},"max-width":{syntax:"none | <length-percentage> | min-content | max-content | fit-content(<length-percentage>)",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"none",appliesto:"allElementsButNonReplacedAndTableRows",computed:"percentageAsSpecifiedAbsoluteLengthOrNone",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/max-width"},"min-block-size":{syntax:"<'min-width'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"blockSizeOfContainingBlock",groups:["CSS Logical Properties"],initial:"0",appliesto:"sameAsWidthAndHeight",computed:"sameAsMinWidthAndMinHeight",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/min-block-size"},"min-height":{syntax:"auto | <length> | <percentage> | min-content | max-content | fit-content(<length-percentage>)",media:"visual",inherited:!1,animationType:"lpc",percentages:"regardingHeightOfGeneratedBoxContainingBlockPercentages0",groups:["CSS Box Model"],initial:"auto",appliesto:"allElementsButNonReplacedAndTableColumns",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/min-height"},"min-inline-size":{syntax:"<'min-width'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"inlineSizeOfContainingBlock",groups:["CSS Logical Properties"],initial:"0",appliesto:"sameAsWidthAndHeight",computed:"sameAsMinWidthAndMinHeight",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/min-inline-size"},"min-width":{syntax:"auto | <length> | <percentage> | min-content | max-content | fit-content(<length-percentage>)",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"auto",appliesto:"allElementsButNonReplacedAndTableRows",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/min-width"},"mix-blend-mode":{syntax:"<blend-mode>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Compositing and Blending"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mix-blend-mode"},"object-fit":{syntax:"fill | contain | cover | none | scale-down",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Images"],initial:"fill",appliesto:"replacedElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/object-fit"},"object-position":{syntax:"<position>",media:"visual",inherited:!0,animationType:"repeatableListOfSimpleListOfLpc",percentages:"referToWidthAndHeightOfElement",groups:["CSS Images"],initial:"50% 50%",appliesto:"replacedElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/object-position"},offset:{syntax:"[ <'offset-position'>? [ <'offset-path'> [ <'offset-distance'> || <'offset-rotate'> ]? ]? ]! [ / <'offset-anchor'> ]?",media:"visual",inherited:!1,animationType:["offset-position","offset-path","offset-distance","offset-anchor","offset-rotate"],percentages:["offset-position","offset-distance","offset-anchor"],groups:["CSS Motion Path"],initial:["offset-position","offset-path","offset-distance","offset-anchor","offset-rotate"],appliesto:"transformableElements",computed:["offset-position","offset-path","offset-distance","offset-anchor","offset-rotate"],order:"perGrammar",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/offset"},"offset-anchor":{syntax:"auto | <position>",media:"visual",inherited:!1,animationType:"position",percentages:"relativeToWidthAndHeight",groups:["CSS Motion Path"],initial:"auto",appliesto:"transformableElements",computed:"forLengthAbsoluteValueOtherwisePercentage",order:"perGrammar",status:"standard"},"offset-distance":{syntax:"<length-percentage>",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToTotalPathLength",groups:["CSS Motion Path"],initial:"0",appliesto:"transformableElements",computed:"forLengthAbsoluteValueOtherwisePercentage",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/offset-distance"},"offset-path":{syntax:"none | ray( [ <angle> && <size> && contain? ] ) | <path()> | <url> | [ <basic-shape> || <geometry-box> ]",media:"visual",inherited:!1,animationType:"angleOrBasicShapeOrPath",percentages:"no",groups:["CSS Motion Path"],initial:"none",appliesto:"transformableElements",computed:"asSpecified",order:"perGrammar",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/offset-path"},"offset-position":{syntax:"auto | <position>",media:"visual",inherited:!1,animationType:"position",percentages:"referToSizeOfContainingBlock",groups:["CSS Motion Path"],initial:"auto",appliesto:"transformableElements",computed:"forLengthAbsoluteValueOtherwisePercentage",order:"perGrammar",status:"experimental"},"offset-rotate":{syntax:"[ auto | reverse ] || <angle>",media:"visual",inherited:!1,animationType:"angleOrBasicShapeOrPath",percentages:"no",groups:["CSS Motion Path"],initial:"auto",appliesto:"transformableElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/offset-rotate"},opacity:{syntax:"<alpha-value>",media:"visual",inherited:!1,animationType:"number",percentages:"no",groups:["CSS Color"],initial:"1.0",appliesto:"allElements",computed:"specifiedValueClipped0To1",order:"uniqueOrder",alsoAppliesTo:["::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/opacity"},order:{syntax:"<integer>",media:"visual",inherited:!1,animationType:"integer",percentages:"no",groups:["CSS Flexible Box Layout"],initial:"0",appliesto:"flexItemsGridItemsAbsolutelyPositionedContainerChildren",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/order"},orphans:{syntax:"<integer>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fragmentation"],initial:"2",appliesto:"blockContainerElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/orphans"},outline:{syntax:"[ <'outline-color'> || <'outline-style'> || <'outline-width'> ]",media:["visual","interactive"],inherited:!1,animationType:["outline-color","outline-width","outline-style"],percentages:"no",groups:["CSS Basic User Interface"],initial:["outline-color","outline-style","outline-width"],appliesto:"allElements",computed:["outline-color","outline-width","outline-style"],order:"orderOfAppearance",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/outline"},"outline-color":{syntax:"<color> | invert",media:["visual","interactive"],inherited:!1,animationType:"color",percentages:"no",groups:["CSS Basic User Interface"],initial:"invertOrCurrentColor",appliesto:"allElements",computed:"invertForTranslucentColorRGBAOtherwiseRGB",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/outline-color"},"outline-offset":{syntax:"<length>",media:["visual","interactive"],inherited:!1,animationType:"length",percentages:"no",groups:["CSS Basic User Interface"],initial:"0",appliesto:"allElements",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/outline-offset"},"outline-style":{syntax:"auto | <'border-style'>",media:["visual","interactive"],inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Basic User Interface"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/outline-style"},"outline-width":{syntax:"<line-width>",media:["visual","interactive"],inherited:!1,animationType:"length",percentages:"no",groups:["CSS Basic User Interface"],initial:"medium",appliesto:"allElements",computed:"absoluteLength0ForNone",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/outline-width"},overflow:{syntax:"[ visible | hidden | clip | scroll | auto ]{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Overflow"],initial:"visible",appliesto:"blockContainersFlexContainersGridContainers",computed:["overflow-x","overflow-y"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/overflow"},"overflow-anchor":{syntax:"auto | none",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Scroll Anchoring"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard"},"overflow-block":{syntax:"visible | hidden | clip | scroll | auto",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Overflow"],initial:"auto",appliesto:"blockContainersFlexContainersGridContainers",computed:"asSpecifiedButVisibleOrClipReplacedToAutoOrHiddenIfOtherValueDifferent",order:"perGrammar",status:"standard"},"overflow-clip-box":{syntax:"padding-box | content-box",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"padding-box",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Mozilla/CSS/overflow-clip-box"},"overflow-inline":{syntax:"visible | hidden | clip | scroll | auto",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Overflow"],initial:"auto",appliesto:"blockContainersFlexContainersGridContainers",computed:"asSpecifiedButVisibleOrClipReplacedToAutoOrHiddenIfOtherValueDifferent",order:"perGrammar",status:"standard"},"overflow-wrap":{syntax:"normal | break-word | anywhere",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"normal",appliesto:"nonReplacedInlineElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/overflow-wrap"},"overflow-x":{syntax:"visible | hidden | clip | scroll | auto",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Overflow"],initial:"visible",appliesto:"blockContainersFlexContainersGridContainers",computed:"asSpecifiedButVisibleOrClipReplacedToAutoOrHiddenIfOtherValueDifferent",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/overflow-x"},"overflow-y":{syntax:"visible | hidden | clip | scroll | auto",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Overflow"],initial:"visible",appliesto:"blockContainersFlexContainersGridContainers",computed:"asSpecifiedButVisibleOrClipReplacedToAutoOrHiddenIfOtherValueDifferent",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/overflow-y"},"overscroll-behavior":{syntax:"[ contain | none | auto ]{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Model"],initial:"auto",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/overscroll-behavior"},"overscroll-behavior-block":{syntax:"contain | none | auto",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Model"],initial:"auto",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/overscroll-behavior-block"},"overscroll-behavior-inline":{syntax:"contain | none | auto",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Model"],initial:"auto",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/overscroll-behavior-inline"},"overscroll-behavior-x":{syntax:"contain | none | auto",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Model"],initial:"auto",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/overscroll-behavior-x"},"overscroll-behavior-y":{syntax:"contain | none | auto",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Model"],initial:"auto",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/overscroll-behavior-y"},padding:{syntax:"[ <length> | <percentage> ]{1,4}",media:"visual",inherited:!1,animationType:"length",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:["padding-bottom","padding-left","padding-right","padding-top"],appliesto:"allElementsExceptInternalTableDisplayTypes",computed:["padding-bottom","padding-left","padding-right","padding-top"],order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding"},"padding-block":{syntax:"<'padding-left'>{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"0",appliesto:"allElements",computed:"asLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding-block"},"padding-block-end":{syntax:"<'padding-left'>",media:"visual",inherited:!1,animationType:"length",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"0",appliesto:"allElements",computed:"asLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding-block-end"},"padding-block-start":{syntax:"<'padding-left'>",media:"visual",inherited:!1,animationType:"length",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"0",appliesto:"allElements",computed:"asLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding-block-start"},"padding-bottom":{syntax:"<length> | <percentage>",media:"visual",inherited:!1,animationType:"length",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"0",appliesto:"allElementsExceptInternalTableDisplayTypes",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding-bottom"},"padding-inline":{syntax:"<'padding-left'>{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"0",appliesto:"allElements",computed:"asLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding-inline"},"padding-inline-end":{syntax:"<'padding-left'>",media:"visual",inherited:!1,animationType:"length",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"0",appliesto:"allElements",computed:"asLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding-inline-end"},"padding-inline-start":{syntax:"<'padding-left'>",media:"visual",inherited:!1,animationType:"length",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"0",appliesto:"allElements",computed:"asLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding-inline-start"},"padding-left":{syntax:"<length> | <percentage>",media:"visual",inherited:!1,animationType:"length",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"0",appliesto:"allElementsExceptInternalTableDisplayTypes",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding-left"},"padding-right":{syntax:"<length> | <percentage>",media:"visual",inherited:!1,animationType:"length",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"0",appliesto:"allElementsExceptInternalTableDisplayTypes",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding-right"},"padding-top":{syntax:"<length> | <percentage>",media:"visual",inherited:!1,animationType:"length",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"0",appliesto:"allElementsExceptInternalTableDisplayTypes",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding-top"},"page-break-after":{syntax:"auto | always | avoid | left | right | recto | verso",media:["visual","paged"],inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Pages"],initial:"auto",appliesto:"blockElementsInNormalFlow",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/page-break-after"},"page-break-before":{syntax:"auto | always | avoid | left | right | recto | verso",media:["visual","paged"],inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Pages"],initial:"auto",appliesto:"blockElementsInNormalFlow",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/page-break-before"},"page-break-inside":{syntax:"auto | avoid",media:["visual","paged"],inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Pages"],initial:"auto",appliesto:"blockElementsInNormalFlow",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/page-break-inside"},"paint-order":{syntax:"normal | [ fill || stroke || markers ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"normal",appliesto:"textElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/paint-order"},perspective:{syntax:"none | <length>",media:"visual",inherited:!1,animationType:"length",percentages:"no",groups:["CSS Transforms"],initial:"none",appliesto:"transformableElements",computed:"absoluteLengthOrNone",order:"uniqueOrder",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/perspective"},"perspective-origin":{syntax:"<position>",media:"visual",inherited:!1,animationType:"simpleListOfLpc",percentages:"referToSizeOfBoundingBox",groups:["CSS Transforms"],initial:"50% 50%",appliesto:"transformableElements",computed:"forLengthAbsoluteValueOtherwisePercentage",order:"oneOrTwoValuesLengthAbsoluteKeywordsPercentages",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/perspective-origin"},"place-content":{syntax:"<'align-content'> <'justify-content'>?",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Alignment"],initial:"normal",appliesto:"multilineFlexContainers",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/place-content"},"place-items":{syntax:"<'align-items'> <'justify-items'>?",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Alignment"],initial:["align-items","justify-items"],appliesto:"allElements",computed:["align-items","justify-items"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/place-items"},"place-self":{syntax:"<'align-self'> <'justify-self'>?",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Alignment"],initial:["align-self","justify-self"],appliesto:"blockLevelBoxesAndAbsolutelyPositionedBoxesAndGridItems",computed:["align-self","justify-self"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/place-self"},"pointer-events":{syntax:"auto | none | visiblePainted | visibleFill | visibleStroke | visible | painted | fill | stroke | all | inherit",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Pointer Events"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/pointer-events"},position:{syntax:"static | relative | absolute | sticky | fixed",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Positioning"],initial:"static",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/position"},quotes:{syntax:"none | auto | [ <string> <string> ]+",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Generated Content"],initial:"dependsOnUserAgent",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/quotes"},resize:{syntax:"none | both | horizontal | vertical | block | inline",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Basic User Interface"],initial:"none",appliesto:"elementsWithOverflowNotVisibleAndReplacedElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/resize"},right:{syntax:"<length> | <percentage> | auto",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToWidthOfContainingBlock",groups:["CSS Positioning"],initial:"auto",appliesto:"positionedElements",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/right"},rotate:{syntax:"none | <angle> | [ x | y | z | <number>{3} ] && <angle>",media:"visual",inherited:!1,animationType:"transform",percentages:"no",groups:["CSS Transforms"],initial:"none",appliesto:"transformableElements",computed:"asSpecified",order:"perGrammar",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/rotate"},"row-gap":{syntax:"normal | <length-percentage>",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfContentArea",groups:["CSS Box Alignment"],initial:"normal",appliesto:"multiColumnElementsFlexContainersGridContainers",computed:"asSpecifiedWithLengthsAbsoluteAndNormalComputingToZeroExceptMultiColumn",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/row-gap"},"ruby-align":{syntax:"start | center | space-between | space-around",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Ruby"],initial:"space-around",appliesto:"rubyBasesAnnotationsBaseAnnotationContainers",computed:"asSpecified",order:"uniqueOrder",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/ruby-align"},"ruby-merge":{syntax:"separate | collapse | auto",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Ruby"],initial:"separate",appliesto:"rubyAnnotationsContainers",computed:"asSpecified",order:"uniqueOrder",status:"experimental"},"ruby-position":{syntax:"over | under | inter-character",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Ruby"],initial:"over",appliesto:"rubyAnnotationsContainers",computed:"asSpecified",order:"uniqueOrder",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/ruby-position"},scale:{syntax:"none | <number>{1,3}",media:"visual",inherited:!1,animationType:"transform",percentages:"no",groups:["CSS Transforms"],initial:"none",appliesto:"transformableElements",computed:"asSpecified",order:"perGrammar",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scale"},"scrollbar-color":{syntax:"auto | dark | light | <color>{2}",media:"visual",inherited:!0,animationType:"color",percentages:"no",groups:["CSS Scrollbars"],initial:"auto",appliesto:"scrollingBoxes",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scrollbar-color"},"scrollbar-gutter":{syntax:"auto | [ stable | always ] && both? && force?",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Overflow"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scrollbar-gutter"},"scrollbar-width":{syntax:"auto | thin | none",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Scrollbars"],initial:"auto",appliesto:"scrollingBoxes",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scrollbar-width"},"scroll-behavior":{syntax:"auto | smooth",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSSOM View"],initial:"auto",appliesto:"scrollingBoxes",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-behavior"},"scroll-margin":{syntax:"<length>{1,4}",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin"},"scroll-margin-block":{syntax:"<length>{1,2}",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin-block"},"scroll-margin-block-start":{syntax:"<length>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin-block-start"},"scroll-margin-block-end":{syntax:"<length>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin-block-end"},"scroll-margin-bottom":{syntax:"<length>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin-bottom"},"scroll-margin-inline":{syntax:"<length>{1,2}",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin-inline"},"scroll-margin-inline-start":{syntax:"<length>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin-inline-start"},"scroll-margin-inline-end":{syntax:"<length>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin-inline-end"},"scroll-margin-left":{syntax:"<length>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin-left"},"scroll-margin-right":{syntax:"<length>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin-right"},"scroll-margin-top":{syntax:"<length>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin-top"},"scroll-padding":{syntax:"[ auto | <length-percentage> ]{1,4}",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding"},"scroll-padding-block":{syntax:"[ auto | <length-percentage> ]{1,2}",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding-block"},"scroll-padding-block-start":{syntax:"auto | <length-percentage>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding-block-start"},"scroll-padding-block-end":{syntax:"auto | <length-percentage>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding-block-end"},"scroll-padding-bottom":{syntax:"auto | <length-percentage>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding-bottom"},"scroll-padding-inline":{syntax:"[ auto | <length-percentage> ]{1,2}",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding-inline"},"scroll-padding-inline-start":{syntax:"auto | <length-percentage>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding-inline-start"},"scroll-padding-inline-end":{syntax:"auto | <length-percentage>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding-inline-end"},"scroll-padding-left":{syntax:"auto | <length-percentage>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding-left"},"scroll-padding-right":{syntax:"auto | <length-percentage>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding-right"},"scroll-padding-top":{syntax:"auto | <length-percentage>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding-top"},"scroll-snap-align":{syntax:"[ none | start | end | center ]{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Scroll Snap"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-snap-align"},"scroll-snap-coordinate":{syntax:"none | <position>#",media:"interactive",inherited:!1,animationType:"position",percentages:"referToBorderBox",groups:["CSS Scroll Snap"],initial:"none",appliesto:"allElements",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-snap-coordinate"},"scroll-snap-destination":{syntax:"<position>",media:"interactive",inherited:!1,animationType:"position",percentages:"relativeToScrollContainerPaddingBoxAxis",groups:["CSS Scroll Snap"],initial:"0px 0px",appliesto:"scrollContainers",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-snap-destination"},"scroll-snap-points-x":{syntax:"none | repeat( <length-percentage> )",media:"interactive",inherited:!1,animationType:"discrete",percentages:"relativeToScrollContainerPaddingBoxAxis",groups:["CSS Scroll Snap"],initial:"none",appliesto:"scrollContainers",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-snap-points-x"},"scroll-snap-points-y":{syntax:"none | repeat( <length-percentage> )",media:"interactive",inherited:!1,animationType:"discrete",percentages:"relativeToScrollContainerPaddingBoxAxis",groups:["CSS Scroll Snap"],initial:"none",appliesto:"scrollContainers",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-snap-points-y"},"scroll-snap-stop":{syntax:"normal | always",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Scroll Snap"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-snap-stop"},"scroll-snap-type":{syntax:"none | [ x | y | block | inline | both ] [ mandatory | proximity ]?",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Scroll Snap"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-snap-type"},"scroll-snap-type-x":{syntax:"none | mandatory | proximity",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Scroll Snap"],initial:"none",appliesto:"scrollContainers",computed:"asSpecified",order:"uniqueOrder",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-snap-type-x"},"scroll-snap-type-y":{syntax:"none | mandatory | proximity",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Scroll Snap"],initial:"none",appliesto:"scrollContainers",computed:"asSpecified",order:"uniqueOrder",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-snap-type-y"},"shape-image-threshold":{syntax:"<alpha-value>",media:"visual",inherited:!1,animationType:"number",percentages:"no",groups:["CSS Shapes"],initial:"0.0",appliesto:"floats",computed:"specifiedValueNumberClipped0To1",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/shape-image-threshold"},"shape-margin":{syntax:"<length-percentage>",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToWidthOfContainingBlock",groups:["CSS Shapes"],initial:"0",appliesto:"floats",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/shape-margin"},"shape-outside":{syntax:"none | <shape-box> || <basic-shape> | <image>",media:"visual",inherited:!1,animationType:"basicShapeOtherwiseNo",percentages:"no",groups:["CSS Shapes"],initial:"none",appliesto:"floats",computed:"asDefinedForBasicShapeWithAbsoluteURIOtherwiseAsSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/shape-outside"},"tab-size":{syntax:"<integer> | <length>",media:"visual",inherited:!0,animationType:"length",percentages:"no",groups:["CSS Text"],initial:"8",appliesto:"blockContainers",computed:"specifiedIntegerOrAbsoluteLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/tab-size"},"table-layout":{syntax:"auto | fixed",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Table"],initial:"auto",appliesto:"tableElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/table-layout"},"text-align":{syntax:"start | end | left | right | center | justify | match-parent",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"startOrNamelessValueIfLTRRightIfRTL",appliesto:"blockContainers",computed:"asSpecifiedExceptMatchParent",order:"orderOfAppearance",alsoAppliesTo:["::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-align"},"text-align-last":{syntax:"auto | start | end | left | right | center | justify",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"auto",appliesto:"blockContainers",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-align-last"},"text-combine-upright":{syntax:"none | all | [ digits <integer>? ]",media:"visual",inherited:!0,animationType:"notAnimatable",percentages:"no",groups:["CSS Writing Modes"],initial:"none",appliesto:"nonReplacedInlineElements",computed:"keywordPlusIntegerIfDigits",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-combine-upright"},"text-decoration":{syntax:"<'text-decoration-line'> || <'text-decoration-style'> || <'text-decoration-color'> || <'text-decoration-thickness'>",media:"visual",inherited:!1,animationType:["text-decoration-color","text-decoration-style","text-decoration-line","text-decoration-thickness"],percentages:"no",groups:["CSS Text Decoration"],initial:["text-decoration-color","text-decoration-style","text-decoration-line"],appliesto:"allElements",computed:["text-decoration-line","text-decoration-style","text-decoration-color","text-decoration-thickness"],order:"orderOfAppearance",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-decoration"},"text-decoration-color":{syntax:"<color>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Text Decoration"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-decoration-color"},"text-decoration-line":{syntax:"none | [ underline || overline || line-through || blink ] | spelling-error | grammar-error",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Text Decoration"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-decoration-line"},"text-decoration-skip":{syntax:"none | [ objects || [ spaces | [ leading-spaces || trailing-spaces ] ] || edges || box-decoration ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text Decoration"],initial:"objects",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-decoration-skip"},"text-decoration-skip-ink":{syntax:"auto | all | none",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text Decoration"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-decoration-skip-ink"},"text-decoration-style":{syntax:"solid | double | dotted | dashed | wavy",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Text Decoration"],initial:"solid",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-decoration-style"},"text-decoration-thickness":{syntax:"auto | from-font | <length> | <percentage> ",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"referToElementFontSize",groups:["CSS Text Decoration"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-decoration-thickness"},"text-emphasis":{syntax:"<'text-emphasis-style'> || <'text-emphasis-color'>",media:"visual",inherited:!1,animationType:["text-emphasis-color","text-emphasis-style"],percentages:"no",groups:["CSS Text Decoration"],initial:["text-emphasis-style","text-emphasis-color"],appliesto:"allElements",computed:["text-emphasis-style","text-emphasis-color"],order:"orderOfAppearance",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-emphasis"},"text-emphasis-color":{syntax:"<color>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Text Decoration"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-emphasis-color"},"text-emphasis-position":{syntax:"[ over | under ] && [ right | left ]",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Text Decoration"],initial:"over right",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-emphasis-position"},"text-emphasis-style":{syntax:"none | [ [ filled | open ] || [ dot | circle | double-circle | triangle | sesame ] ] | <string>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Text Decoration"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-emphasis-style"},"text-indent":{syntax:"<length-percentage> && hanging? && each-line?",media:"visual",inherited:!0,animationType:"lpc",percentages:"referToWidthOfContainingBlock",groups:["CSS Text"],initial:"0",appliesto:"blockContainers",computed:"percentageOrAbsoluteLengthPlusKeywords",order:"lengthOrPercentageBeforeKeywords",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-indent"},"text-justify":{syntax:"auto | inter-character | inter-word | none",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"auto",appliesto:"inlineLevelAndTableCellElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-justify"},"text-orientation":{syntax:"mixed | upright | sideways",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Writing Modes"],initial:"mixed",appliesto:"allElementsExceptTableRowGroupsRowsColumnGroupsAndColumns",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-orientation"},"text-overflow":{syntax:"[ clip | ellipsis | <string> ]{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Basic User Interface"],initial:"clip",appliesto:"blockContainerElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-overflow"},"text-rendering":{syntax:"auto | optimizeSpeed | optimizeLegibility | geometricPrecision",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Miscellaneous"],initial:"auto",appliesto:"textElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-rendering"},"text-shadow":{syntax:"none | <shadow-t>#",media:"visual",inherited:!0,animationType:"shadowList",percentages:"no",groups:["CSS Text Decoration"],initial:"none",appliesto:"allElements",computed:"colorPlusThreeAbsoluteLengths",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-shadow"},"text-size-adjust":{syntax:"none | auto | <percentage>",media:"visual",inherited:!0,animationType:"discrete",percentages:"referToSizeOfFont",groups:["CSS Text"],initial:"autoForSmartphoneBrowsersSupportingInflation",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-size-adjust"},"text-transform":{syntax:"none | capitalize | uppercase | lowercase | full-width | full-size-kana",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-transform"},"text-underline-offset":{syntax:"auto | <length> | <percentage> ",media:"visual",inherited:!0,animationType:"byComputedValueType",percentages:"referToElementFontSize",groups:["CSS Text Decoration"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-underline-offset"},"text-underline-position":{syntax:"auto | from-font | [ under || [ left | right ] ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text Decoration"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-underline-position"},top:{syntax:"<length> | <percentage> | auto",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToContainingBlockHeight",groups:["CSS Positioning"],initial:"auto",appliesto:"positionedElements",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/top"},"touch-action":{syntax:"auto | none | [ [ pan-x | pan-left | pan-right ] || [ pan-y | pan-up | pan-down ] || pinch-zoom ] | manipulation",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Pointer Events"],initial:"auto",appliesto:"allElementsExceptNonReplacedInlineElementsTableRowsColumnsRowColumnGroups",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/touch-action"},transform:{syntax:"none | <transform-list>",media:"visual",inherited:!1,animationType:"transform",percentages:"referToSizeOfBoundingBox",groups:["CSS Transforms"],initial:"none",appliesto:"transformableElements",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/transform"},"transform-box":{syntax:"content-box | border-box | fill-box | stroke-box | view-box",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Transforms"],initial:"view-box",appliesto:"transformableElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/transform-box"},"transform-origin":{syntax:"[ <length-percentage> | left | center | right | top | bottom ] | [ [ <length-percentage> | left | center | right ] && [ <length-percentage> | top | center | bottom ] ] <length>?",media:"visual",inherited:!1,animationType:"simpleListOfLpc",percentages:"referToSizeOfBoundingBox",groups:["CSS Transforms"],initial:"50% 50% 0",appliesto:"transformableElements",computed:"forLengthAbsoluteValueOtherwisePercentage",order:"oneOrTwoValuesLengthAbsoluteKeywordsPercentages",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/transform-origin"},"transform-style":{syntax:"flat | preserve-3d",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Transforms"],initial:"flat",appliesto:"transformableElements",computed:"asSpecified",order:"uniqueOrder",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/transform-style"},transition:{syntax:"<single-transition>#",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Transitions"],initial:["transition-delay","transition-duration","transition-property","transition-timing-function"],appliesto:"allElementsAndPseudos",computed:["transition-delay","transition-duration","transition-property","transition-timing-function"],order:"orderOfAppearance",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/transition"},"transition-delay":{syntax:"<time>#",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Transitions"],initial:"0s",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/transition-delay"},"transition-duration":{syntax:"<time>#",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Transitions"],initial:"0s",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/transition-duration"},"transition-property":{syntax:"none | <single-transition-property>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Transitions"],initial:"all",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/transition-property"},"transition-timing-function":{syntax:"<timing-function>#",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Transitions"],initial:"ease",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/transition-timing-function"},translate:{syntax:"none | <length-percentage> [ <length-percentage> <length>? ]?",media:"visual",inherited:!1,animationType:"transform",percentages:"referToSizeOfBoundingBox",groups:["CSS Transforms"],initial:"none",appliesto:"transformableElements",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"perGrammar",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/translate"},"unicode-bidi":{syntax:"normal | embed | isolate | bidi-override | isolate-override | plaintext",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Writing Modes"],initial:"normal",appliesto:"allElementsSomeValuesNoEffectOnNonInlineElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/unicode-bidi"},"user-select":{syntax:"auto | text | none | contain | all",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Basic User Interface"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/user-select"},"vertical-align":{syntax:"baseline | sub | super | text-top | text-bottom | middle | top | bottom | <percentage> | <length>",media:"visual",inherited:!1,animationType:"length",percentages:"referToLineHeight",groups:["CSS Table"],initial:"baseline",appliesto:"inlineLevelAndTableCellElements",computed:"absoluteLengthOrKeyword",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/vertical-align"},visibility:{syntax:"visible | hidden | collapse",media:"visual",inherited:!0,animationType:"visibility",percentages:"no",groups:["CSS Box Model"],initial:"visible",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/visibility"},"white-space":{syntax:"normal | pre | nowrap | pre-wrap | pre-line | break-spaces",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/white-space"},widows:{syntax:"<integer>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fragmentation"],initial:"2",appliesto:"blockContainerElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/widows"},width:{syntax:"auto | <length> | <percentage> | min-content | max-content | fit-content(<length-percentage>)",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"auto",appliesto:"allElementsButNonReplacedAndTableRows",computed:"percentageAutoOrAbsoluteLength",order:"lengthOrPercentageBeforeKeywordIfBothPresent",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/width"},"will-change":{syntax:"auto | <animateable-feature>#",media:"all",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Will Change"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/will-change"},"word-break":{syntax:"normal | break-all | keep-all | break-word",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/word-break"},"word-spacing":{syntax:"normal | <length-percentage>",media:"visual",inherited:!0,animationType:"length",percentages:"referToWidthOfAffectedGlyph",groups:["CSS Text"],initial:"normal",appliesto:"allElements",computed:"optimumMinAndMaxValueOfAbsoluteLengthPercentageOrNormal",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/word-spacing"},"word-wrap":{syntax:"normal | break-word",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"normal",appliesto:"nonReplacedInlineElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/overflow-wrap"},"writing-mode":{syntax:"horizontal-tb | vertical-rl | vertical-lr | sideways-rl | sideways-lr",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Writing Modes"],initial:"horizontal-tb",appliesto:"allElementsExceptTableRowColumnGroupsTableRowsColumns",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/writing-mode"},"z-index":{syntax:"auto | <integer>",media:"visual",inherited:!1,animationType:"integer",percentages:"no",groups:["CSS Positioning"],initial:"auto",appliesto:"positionedElements",computed:"asSpecified",order:"uniqueOrder",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/z-index"},zoom:{syntax:"normal | reset | <number> | <percentage>",media:"visual",inherited:!1,animationType:"integer",percentages:"no",groups:["Microsoft Extensions"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/zoom"}}});var Kw=Ee((mj,gO)=>{gO.exports={"absolute-size":{syntax:"xx-small | x-small | small | medium | large | x-large | xx-large | xxx-large"},"alpha-value":{syntax:"<number> | <percentage>"},"angle-percentage":{syntax:"<angle> | <percentage>"},"angular-color-hint":{syntax:"<angle-percentage>"},"angular-color-stop":{syntax:"<color> && <color-stop-angle>?"},"angular-color-stop-list":{syntax:"[ <angular-color-stop> [, <angular-color-hint>]? ]# , <angular-color-stop>"},"animateable-feature":{syntax:"scroll-position | contents | <custom-ident>"},attachment:{syntax:"scroll | fixed | local"},"attr()":{syntax:"attr( <attr-name> <type-or-unit>? [, <attr-fallback> ]? )"},"attr-matcher":{syntax:"[ '~' | '|' | '^' | '$' | '*' ]? '='"},"attr-modifier":{syntax:"i | s"},"attribute-selector":{syntax:"'[' <wq-name> ']' | '[' <wq-name> <attr-matcher> [ <string-token> | <ident-token> ] <attr-modifier>? ']'"},"auto-repeat":{syntax:"repeat( [ auto-fill | auto-fit ] , [ <line-names>? <fixed-size> ]+ <line-names>? )"},"auto-track-list":{syntax:`[ <line-names>? [ <fixed-size> | <fixed-repeat> ] ]* <line-names>? <auto-repeat>
[ <line-names>? [ <fixed-size> | <fixed-repeat> ] ]* <line-names>?`},"baseline-position":{syntax:"[ first | last ]? baseline"},"basic-shape":{syntax:"<inset()> | <circle()> | <ellipse()> | <polygon()> | <path()>"},"bg-image":{syntax:"none | <image>"},"bg-layer":{syntax:"<bg-image> || <bg-position> [ / <bg-size> ]? || <repeat-style> || <attachment> || <box> || <box>"},"bg-position":{syntax:"[ [ left | center | right | top | bottom | <length-percentage> ] | [ left | center | right | <length-percentage> ] [ top | center | bottom | <length-percentage> ] | [ center | [ left | right ] <length-percentage>? ] && [ center | [ top | bottom ] <length-percentage>? ] ]"},"bg-size":{syntax:"[ <length-percentage> | auto ]{1,2} | cover | contain"},"blur()":{syntax:"blur( <length> )"},"blend-mode":{syntax:"normal | multiply | screen | overlay | darken | lighten | color-dodge | color-burn | hard-light | soft-light | difference | exclusion | hue | saturation | color | luminosity"},box:{syntax:"border-box | padding-box | content-box"},"brightness()":{syntax:"brightness( <number-percentage> )"},"calc()":{syntax:"calc( <calc-sum> )"},"calc-sum":{syntax:"<calc-product> [ [ '+' | '-' ] <calc-product> ]*"},"calc-product":{syntax:"<calc-value> [ '*' <calc-value> | '/' <number> ]*"},"calc-value":{syntax:"<number> | <dimension> | <percentage> | ( <calc-sum> )"},"cf-final-image":{syntax:"<image> | <color>"},"cf-mixing-image":{syntax:"<percentage>? && <image>"},"circle()":{syntax:"circle( [ <shape-radius> ]? [ at <position> ]? )"},"clamp()":{syntax:"clamp( <calc-sum>#{3} )"},"class-selector":{syntax:"'.' <ident-token>"},"clip-source":{syntax:"<url>"},color:{syntax:"<rgb()> | <rgba()> | <hsl()> | <hsla()> | <hex-color> | <named-color> | currentcolor | <deprecated-system-color>"},"color-stop":{syntax:"<color-stop-length> | <color-stop-angle>"},"color-stop-angle":{syntax:"<angle-percentage>{1,2}"},"color-stop-length":{syntax:"<length-percentage>{1,2}"},"color-stop-list":{syntax:"[ <linear-color-stop> [, <linear-color-hint>]? ]# , <linear-color-stop>"},combinator:{syntax:"'>' | '+' | '~' | [ '||' ]"},"common-lig-values":{syntax:"[ common-ligatures | no-common-ligatures ]"},"compat-auto":{syntax:"searchfield | textarea | push-button | slider-horizontal | checkbox | radio | square-button | menulist | listbox | meter | progress-bar | button"},"composite-style":{syntax:"clear | copy | source-over | source-in | source-out | source-atop | destination-over | destination-in | destination-out | destination-atop | xor"},"compositing-operator":{syntax:"add | subtract | intersect | exclude"},"compound-selector":{syntax:"[ <type-selector>? <subclass-selector>* [ <pseudo-element-selector> <pseudo-class-selector>* ]* ]!"},"compound-selector-list":{syntax:"<compound-selector>#"},"complex-selector":{syntax:"<compound-selector> [ <combinator>? <compound-selector> ]*"},"complex-selector-list":{syntax:"<complex-selector>#"},"conic-gradient()":{syntax:"conic-gradient( [ from <angle> ]? [ at <position> ]?, <angular-color-stop-list> )"},"contextual-alt-values":{syntax:"[ contextual | no-contextual ]"},"content-distribution":{syntax:"space-between | space-around | space-evenly | stretch"},"content-list":{syntax:"[ <string> | contents | <image> | <quote> | <target> | <leader()> ]+"},"content-position":{syntax:"center | start | end | flex-start | flex-end"},"content-replacement":{syntax:"<image>"},"contrast()":{syntax:"contrast( [ <number-percentage> ] )"},"counter()":{syntax:"counter( <custom-ident>, <counter-style>? )"},"counter-style":{syntax:"<counter-style-name> | symbols()"},"counter-style-name":{syntax:"<custom-ident>"},"counters()":{syntax:"counters( <custom-ident>, <string>, <counter-style>? )"},"cross-fade()":{syntax:"cross-fade( <cf-mixing-image> , <cf-final-image>? )"},"cubic-bezier-timing-function":{syntax:"ease | ease-in | ease-out | ease-in-out | cubic-bezier(<number [0,1]>, <number>, <number [0,1]>, <number>)"},"deprecated-system-color":{syntax:"ActiveBorder | ActiveCaption | AppWorkspace | Background | ButtonFace | ButtonHighlight | ButtonShadow | ButtonText | CaptionText | GrayText | Highlight | HighlightText | InactiveBorder | InactiveCaption | InactiveCaptionText | InfoBackground | InfoText | Menu | MenuText | Scrollbar | ThreeDDarkShadow | ThreeDFace | ThreeDHighlight | ThreeDLightShadow | ThreeDShadow | Window | WindowFrame | WindowText"},"discretionary-lig-values":{syntax:"[ discretionary-ligatures | no-discretionary-ligatures ]"},"display-box":{syntax:"contents | none"},"display-inside":{syntax:"flow | flow-root | table | flex | grid | ruby"},"display-internal":{syntax:"table-row-group | table-header-group | table-footer-group | table-row | table-cell | table-column-group | table-column | table-caption | ruby-base | ruby-text | ruby-base-container | ruby-text-container"},"display-legacy":{syntax:"inline-block | inline-list-item | inline-table | inline-flex | inline-grid"},"display-listitem":{syntax:"<display-outside>? && [ flow | flow-root ]? && list-item"},"display-outside":{syntax:"block | inline | run-in"},"drop-shadow()":{syntax:"drop-shadow( <length>{2,3} <color>? )"},"east-asian-variant-values":{syntax:"[ jis78 | jis83 | jis90 | jis04 | simplified | traditional ]"},"east-asian-width-values":{syntax:"[ full-width | proportional-width ]"},"element()":{syntax:"element( <id-selector> )"},"ellipse()":{syntax:"ellipse( [ <shape-radius>{2} ]? [ at <position> ]? )"},"ending-shape":{syntax:"circle | ellipse"},"env()":{syntax:"env( <custom-ident> , <declaration-value>? )"},"explicit-track-list":{syntax:"[ <line-names>? <track-size> ]+ <line-names>?"},"family-name":{syntax:"<string> | <custom-ident>+"},"feature-tag-value":{syntax:"<string> [ <integer> | on | off ]?"},"feature-type":{syntax:"@stylistic | @historical-forms | @styleset | @character-variant | @swash | @ornaments | @annotation"},"feature-value-block":{syntax:"<feature-type> '{' <feature-value-declaration-list> '}'"},"feature-value-block-list":{syntax:"<feature-value-block>+"},"feature-value-declaration":{syntax:"<custom-ident>: <integer>+;"},"feature-value-declaration-list":{syntax:"<feature-value-declaration>"},"feature-value-name":{syntax:"<custom-ident>"},"fill-rule":{syntax:"nonzero | evenodd"},"filter-function":{syntax:"<blur()> | <brightness()> | <contrast()> | <drop-shadow()> | <grayscale()> | <hue-rotate()> | <invert()> | <opacity()> | <saturate()> | <sepia()>"},"filter-function-list":{syntax:"[ <filter-function> | <url> ]+"},"final-bg-layer":{syntax:"<'background-color'> || <bg-image> || <bg-position> [ / <bg-size> ]? || <repeat-style> || <attachment> || <box> || <box>"},"fit-content()":{syntax:"fit-content( [ <length> | <percentage> ] )"},"fixed-breadth":{syntax:"<length-percentage>"},"fixed-repeat":{syntax:"repeat( [ <positive-integer> ] , [ <line-names>? <fixed-size> ]+ <line-names>? )"},"fixed-size":{syntax:"<fixed-breadth> | minmax( <fixed-breadth> , <track-breadth> ) | minmax( <inflexible-breadth> , <fixed-breadth> )"},"font-stretch-absolute":{syntax:"normal | ultra-condensed | extra-condensed | condensed | semi-condensed | semi-expanded | expanded | extra-expanded | ultra-expanded | <percentage>"},"font-variant-css21":{syntax:"[ normal | small-caps ]"},"font-weight-absolute":{syntax:"normal | bold | <number [1,1000]>"},"frequency-percentage":{syntax:"<frequency> | <percentage>"},"general-enclosed":{syntax:"[ <function-token> <any-value> ) ] | ( <ident> <any-value> )"},"generic-family":{syntax:"serif | sans-serif | cursive | fantasy | monospace"},"generic-name":{syntax:"serif | sans-serif | cursive | fantasy | monospace"},"geometry-box":{syntax:"<shape-box> | fill-box | stroke-box | view-box"},gradient:{syntax:"<linear-gradient()> | <repeating-linear-gradient()> | <radial-gradient()> | <repeating-radial-gradient()> | <conic-gradient()>"},"grayscale()":{syntax:"grayscale( <number-percentage> )"},"grid-line":{syntax:"auto | <custom-ident> | [ <integer> && <custom-ident>? ] | [ span && [ <integer> || <custom-ident> ] ]"},"historical-lig-values":{syntax:"[ historical-ligatures | no-historical-ligatures ]"},"hsl()":{syntax:"hsl( <hue> <percentage> <percentage> [ / <alpha-value> ]? ) | hsl( <hue>, <percentage>, <percentage>, <alpha-value>? )"},"hsla()":{syntax:"hsla( <hue> <percentage> <percentage> [ / <alpha-value> ]? ) | hsla( <hue>, <percentage>, <percentage>, <alpha-value>? )"},hue:{syntax:"<number> | <angle>"},"hue-rotate()":{syntax:"hue-rotate( <angle> )"},"id-selector":{syntax:"<hash-token>"},image:{syntax:"<url> | <image()> | <image-set()> | <element()> | <paint()> | <cross-fade()> | <gradient>"},"image()":{syntax:"image( <image-tags>? [ <image-src>? , <color>? ]! )"},"image-set()":{syntax:"image-set( <image-set-option># )"},"image-set-option":{syntax:"[ <image> | <string> ] <resolution>"},"image-src":{syntax:"<url> | <string>"},"image-tags":{syntax:"ltr | rtl"},"inflexible-breadth":{syntax:"<length> | <percentage> | min-content | max-content | auto"},"inset()":{syntax:"inset( <length-percentage>{1,4} [ round <'border-radius'> ]? )"},"invert()":{syntax:"invert( <number-percentage> )"},"keyframes-name":{syntax:"<custom-ident> | <string>"},"keyframe-block":{syntax:`<keyframe-selector># {
  <declaration-list>
}`},"keyframe-block-list":{syntax:"<keyframe-block>+"},"keyframe-selector":{syntax:"from | to | <percentage>"},"leader()":{syntax:"leader( <leader-type> )"},"leader-type":{syntax:"dotted | solid | space | <string>"},"length-percentage":{syntax:"<length> | <percentage>"},"line-names":{syntax:"'[' <custom-ident>* ']'"},"line-name-list":{syntax:"[ <line-names> | <name-repeat> ]+"},"line-style":{syntax:"none | hidden | dotted | dashed | solid | double | groove | ridge | inset | outset"},"line-width":{syntax:"<length> | thin | medium | thick"},"linear-color-hint":{syntax:"<length-percentage>"},"linear-color-stop":{syntax:"<color> <color-stop-length>?"},"linear-gradient()":{syntax:"linear-gradient( [ <angle> | to <side-or-corner> ]? , <color-stop-list> )"},"mask-layer":{syntax:"<mask-reference> || <position> [ / <bg-size> ]? || <repeat-style> || <geometry-box> || [ <geometry-box> | no-clip ] || <compositing-operator> || <masking-mode>"},"mask-position":{syntax:"[ <length-percentage> | left | center | right ] [ <length-percentage> | top | center | bottom ]?"},"mask-reference":{syntax:"none | <image> | <mask-source>"},"mask-source":{syntax:"<url>"},"masking-mode":{syntax:"alpha | luminance | match-source"},"matrix()":{syntax:"matrix( <number>#{6} )"},"matrix3d()":{syntax:"matrix3d( <number>#{16} )"},"max()":{syntax:"max( <calc-sum># )"},"media-and":{syntax:"<media-in-parens> [ and <media-in-parens> ]+"},"media-condition":{syntax:"<media-not> | <media-and> | <media-or> | <media-in-parens>"},"media-condition-without-or":{syntax:"<media-not> | <media-and> | <media-in-parens>"},"media-feature":{syntax:"( [ <mf-plain> | <mf-boolean> | <mf-range> ] )"},"media-in-parens":{syntax:"( <media-condition> ) | <media-feature> | <general-enclosed>"},"media-not":{syntax:"not <media-in-parens>"},"media-or":{syntax:"<media-in-parens> [ or <media-in-parens> ]+"},"media-query":{syntax:"<media-condition> | [ not | only ]? <media-type> [ and <media-condition-without-or> ]?"},"media-query-list":{syntax:"<media-query>#"},"media-type":{syntax:"<ident>"},"mf-boolean":{syntax:"<mf-name>"},"mf-name":{syntax:"<ident>"},"mf-plain":{syntax:"<mf-name> : <mf-value>"},"mf-range":{syntax:`<mf-name> [ '<' | '>' ]? '='? <mf-value>
| <mf-value> [ '<' | '>' ]? '='? <mf-name>
| <mf-value> '<' '='? <mf-name> '<' '='? <mf-value>
| <mf-value> '>' '='? <mf-name> '>' '='? <mf-value>`},"mf-value":{syntax:"<number> | <dimension> | <ident> | <ratio>"},"min()":{syntax:"min( <calc-sum># )"},"minmax()":{syntax:"minmax( [ <length> | <percentage> | min-content | max-content | auto ] , [ <length> | <percentage> | <flex> | min-content | max-content | auto ] )"},"named-color":{syntax:"transparent | aliceblue | antiquewhite | aqua | aquamarine | azure | beige | bisque | black | blanchedalmond | blue | blueviolet | brown | burlywood | cadetblue | chartreuse | chocolate | coral | cornflowerblue | cornsilk | crimson | cyan | darkblue | darkcyan | darkgoldenrod | darkgray | darkgreen | darkgrey | darkkhaki | darkmagenta | darkolivegreen | darkorange | darkorchid | darkred | darksalmon | darkseagreen | darkslateblue | darkslategray | darkslategrey | darkturquoise | darkviolet | deeppink | deepskyblue | dimgray | dimgrey | dodgerblue | firebrick | floralwhite | forestgreen | fuchsia | gainsboro | ghostwhite | gold | goldenrod | gray | green | greenyellow | grey | honeydew | hotpink | indianred | indigo | ivory | khaki | lavender | lavenderblush | lawngreen | lemonchiffon | lightblue | lightcoral | lightcyan | lightgoldenrodyellow | lightgray | lightgreen | lightgrey | lightpink | lightsalmon | lightseagreen | lightskyblue | lightslategray | lightslategrey | lightsteelblue | lightyellow | lime | limegreen | linen | magenta | maroon | mediumaquamarine | mediumblue | mediumorchid | mediumpurple | mediumseagreen | mediumslateblue | mediumspringgreen | mediumturquoise | mediumvioletred | midnightblue | mintcream | mistyrose | moccasin | navajowhite | navy | oldlace | olive | olivedrab | orange | orangered | orchid | palegoldenrod | palegreen | paleturquoise | palevioletred | papayawhip | peachpuff | peru | pink | plum | powderblue | purple | rebeccapurple | red | rosybrown | royalblue | saddlebrown | salmon | sandybrown | seagreen | seashell | sienna | silver | skyblue | slateblue | slategray | slategrey | snow | springgreen | steelblue | tan | teal | thistle | tomato | turquoise | violet | wheat | white | whitesmoke | yellow | yellowgreen"},"namespace-prefix":{syntax:"<ident>"},"ns-prefix":{syntax:"[ <ident-token> | '*' ]? '|'"},"number-percentage":{syntax:"<number> | <percentage>"},"numeric-figure-values":{syntax:"[ lining-nums | oldstyle-nums ]"},"numeric-fraction-values":{syntax:"[ diagonal-fractions | stacked-fractions ]"},"numeric-spacing-values":{syntax:"[ proportional-nums | tabular-nums ]"},nth:{syntax:"<an-plus-b> | even | odd"},"opacity()":{syntax:"opacity( [ <number-percentage> ] )"},"overflow-position":{syntax:"unsafe | safe"},"outline-radius":{syntax:"<length> | <percentage>"},"page-body":{syntax:"<declaration>? [ ; <page-body> ]? | <page-margin-box> <page-body>"},"page-margin-box":{syntax:"<page-margin-box-type> '{' <declaration-list> '}'"},"page-margin-box-type":{syntax:"@top-left-corner | @top-left | @top-center | @top-right | @top-right-corner | @bottom-left-corner | @bottom-left | @bottom-center | @bottom-right | @bottom-right-corner | @left-top | @left-middle | @left-bottom | @right-top | @right-middle | @right-bottom"},"page-selector-list":{syntax:"[ <page-selector># ]?"},"page-selector":{syntax:"<pseudo-page>+ | <ident> <pseudo-page>*"},"path()":{syntax:"path( [ <fill-rule>, ]? <string> )"},"paint()":{syntax:"paint( <ident>, <declaration-value>? )"},"perspective()":{syntax:"perspective( <length> )"},"polygon()":{syntax:"polygon( <fill-rule>? , [ <length-percentage> <length-percentage> ]# )"},position:{syntax:"[ [ left | center | right ] || [ top | center | bottom ] | [ left | center | right | <length-percentage> ] [ top | center | bottom | <length-percentage> ]? | [ [ left | right ] <length-percentage> ] && [ [ top | bottom ] <length-percentage> ] ]"},"pseudo-class-selector":{syntax:"':' <ident-token> | ':' <function-token> <any-value> ')'"},"pseudo-element-selector":{syntax:"':' <pseudo-class-selector>"},"pseudo-page":{syntax:": [ left | right | first | blank ]"},quote:{syntax:"open-quote | close-quote | no-open-quote | no-close-quote"},"radial-gradient()":{syntax:"radial-gradient( [ <ending-shape> || <size> ]? [ at <position> ]? , <color-stop-list> )"},"relative-selector":{syntax:"<combinator>? <complex-selector>"},"relative-selector-list":{syntax:"<relative-selector>#"},"relative-size":{syntax:"larger | smaller"},"repeat-style":{syntax:"repeat-x | repeat-y | [ repeat | space | round | no-repeat ]{1,2}"},"repeating-linear-gradient()":{syntax:"repeating-linear-gradient( [ <angle> | to <side-or-corner> ]? , <color-stop-list> )"},"repeating-radial-gradient()":{syntax:"repeating-radial-gradient( [ <ending-shape> || <size> ]? [ at <position> ]? , <color-stop-list> )"},"rgb()":{syntax:"rgb( <percentage>{3} [ / <alpha-value> ]? ) | rgb( <number>{3} [ / <alpha-value> ]? ) | rgb( <percentage>#{3} , <alpha-value>? ) | rgb( <number>#{3} , <alpha-value>? )"},"rgba()":{syntax:"rgba( <percentage>{3} [ / <alpha-value> ]? ) | rgba( <number>{3} [ / <alpha-value> ]? ) | rgba( <percentage>#{3} , <alpha-value>? ) | rgba( <number>#{3} , <alpha-value>? )"},"rotate()":{syntax:"rotate( [ <angle> | <zero> ] )"},"rotate3d()":{syntax:"rotate3d( <number> , <number> , <number> , [ <angle> | <zero> ] )"},"rotateX()":{syntax:"rotateX( [ <angle> | <zero> ] )"},"rotateY()":{syntax:"rotateY( [ <angle> | <zero> ] )"},"rotateZ()":{syntax:"rotateZ( [ <angle> | <zero> ] )"},"saturate()":{syntax:"saturate( <number-percentage> )"},"scale()":{syntax:"scale( <number> , <number>? )"},"scale3d()":{syntax:"scale3d( <number> , <number> , <number> )"},"scaleX()":{syntax:"scaleX( <number> )"},"scaleY()":{syntax:"scaleY( <number> )"},"scaleZ()":{syntax:"scaleZ( <number> )"},"self-position":{syntax:"center | start | end | self-start | self-end | flex-start | flex-end"},"shape-radius":{syntax:"<length-percentage> | closest-side | farthest-side"},"skew()":{syntax:"skew( [ <angle> | <zero> ] , [ <angle> | <zero> ]? )"},"skewX()":{syntax:"skewX( [ <angle> | <zero> ] )"},"skewY()":{syntax:"skewY( [ <angle> | <zero> ] )"},"sepia()":{syntax:"sepia( <number-percentage> )"},shadow:{syntax:"inset? && <length>{2,4} && <color>?"},"shadow-t":{syntax:"[ <length>{2,3} && <color>? ]"},shape:{syntax:"rect(<top>, <right>, <bottom>, <left>)"},"shape-box":{syntax:"<box> | margin-box"},"side-or-corner":{syntax:"[ left | right ] || [ top | bottom ]"},"single-animation":{syntax:"<time> || <timing-function> || <time> || <single-animation-iteration-count> || <single-animation-direction> || <single-animation-fill-mode> || <single-animation-play-state> || [ none | <keyframes-name> ]"},"single-animation-direction":{syntax:"normal | reverse | alternate | alternate-reverse"},"single-animation-fill-mode":{syntax:"none | forwards | backwards | both"},"single-animation-iteration-count":{syntax:"infinite | <number>"},"single-animation-play-state":{syntax:"running | paused"},"single-transition":{syntax:"[ none | <single-transition-property> ] || <time> || <timing-function> || <time>"},"single-transition-property":{syntax:"all | <custom-ident>"},size:{syntax:"closest-side | farthest-side | closest-corner | farthest-corner | <length> | <length-percentage>{2}"},"step-position":{syntax:"jump-start | jump-end | jump-none | jump-both | start | end"},"step-timing-function":{syntax:"step-start | step-end | steps(<integer>[, <step-position>]?)"},"subclass-selector":{syntax:"<id-selector> | <class-selector> | <attribute-selector> | <pseudo-class-selector>"},"supports-condition":{syntax:"not <supports-in-parens> | <supports-in-parens> [ and <supports-in-parens> ]* | <supports-in-parens> [ or <supports-in-parens> ]*"},"supports-in-parens":{syntax:"( <supports-condition> ) | <supports-feature> | <general-enclosed>"},"supports-feature":{syntax:"<supports-decl> | <supports-selector-fn>"},"supports-decl":{syntax:"( <declaration> )"},"supports-selector-fn":{syntax:"selector( <complex-selector> )"},symbol:{syntax:"<string> | <image> | <custom-ident>"},target:{syntax:"<target-counter()> | <target-counters()> | <target-text()>"},"target-counter()":{syntax:"target-counter( [ <string> | <url> ] , <custom-ident> , <counter-style>? )"},"target-counters()":{syntax:"target-counters( [ <string> | <url> ] , <custom-ident> , <string> , <counter-style>? )"},"target-text()":{syntax:"target-text( [ <string> | <url> ] , [ content | before | after | first-letter ]? )"},"time-percentage":{syntax:"<time> | <percentage>"},"timing-function":{syntax:"linear | <cubic-bezier-timing-function> | <step-timing-function>"},"track-breadth":{syntax:"<length-percentage> | <flex> | min-content | max-content | auto"},"track-list":{syntax:"[ <line-names>? [ <track-size> | <track-repeat> ] ]+ <line-names>?"},"track-repeat":{syntax:"repeat( [ <positive-integer> ] , [ <line-names>? <track-size> ]+ <line-names>? )"},"track-size":{syntax:"<track-breadth> | minmax( <inflexible-breadth> , <track-breadth> ) | fit-content( [ <length> | <percentage> ] )"},"transform-function":{syntax:"<matrix()> | <translate()> | <translateX()> | <translateY()> | <scale()> | <scaleX()> | <scaleY()> | <rotate()> | <skew()> | <skewX()> | <skewY()> | <matrix3d()> | <translate3d()> | <translateZ()> | <scale3d()> | <scaleZ()> | <rotate3d()> | <rotateX()> | <rotateY()> | <rotateZ()> | <perspective()>"},"transform-list":{syntax:"<transform-function>+"},"translate()":{syntax:"translate( <length-percentage> , <length-percentage>? )"},"translate3d()":{syntax:"translate3d( <length-percentage> , <length-percentage> , <length> )"},"translateX()":{syntax:"translateX( <length-percentage> )"},"translateY()":{syntax:"translateY( <length-percentage> )"},"translateZ()":{syntax:"translateZ( <length> )"},"type-or-unit":{syntax:"string | color | url | integer | number | length | angle | time | frequency | cap | ch | em | ex | ic | lh | rlh | rem | vb | vi | vw | vh | vmin | vmax | mm | Q | cm | in | pt | pc | px | deg | grad | rad | turn | ms | s | Hz | kHz | %"},"type-selector":{syntax:"<wq-name> | <ns-prefix>? '*'"},"var()":{syntax:"var( <custom-property-name> , <declaration-value>? )"},"viewport-length":{syntax:"auto | <length-percentage>"},"wq-name":{syntax:"<ns-prefix>? <ident-token>"}}});var Jw=Ee((gj,yO)=>{yO.exports={atrules:{charset:{prelude:"<string>"},"font-face":{descriptors:{"unicode-range":{comment:"replaces <unicode-range>, an old production name",syntax:"<urange>#"}}}},properties:{"-moz-background-clip":{comment:"deprecated syntax in old Firefox, https://developer.mozilla.org/en/docs/Web/CSS/background-clip",syntax:"padding | border"},"-moz-border-radius-bottomleft":{comment:"https://developer.mozilla.org/en-US/docs/Web/CSS/border-bottom-left-radius",syntax:"<'border-bottom-left-radius'>"},"-moz-border-radius-bottomright":{comment:"https://developer.mozilla.org/en-US/docs/Web/CSS/border-bottom-right-radius",syntax:"<'border-bottom-right-radius'>"},"-moz-border-radius-topleft":{comment:"https://developer.mozilla.org/en-US/docs/Web/CSS/border-top-left-radius",syntax:"<'border-top-left-radius'>"},"-moz-border-radius-topright":{comment:"https://developer.mozilla.org/en-US/docs/Web/CSS/border-bottom-right-radius",syntax:"<'border-bottom-right-radius'>"},"-moz-control-character-visibility":{comment:"firefox specific keywords, https://bugzilla.mozilla.org/show_bug.cgi?id=947588",syntax:"visible | hidden"},"-moz-osx-font-smoothing":{comment:"misssed old syntax https://developer.mozilla.org/en-US/docs/Web/CSS/font-smooth",syntax:"auto | grayscale"},"-moz-user-select":{comment:"https://developer.mozilla.org/en-US/docs/Web/CSS/user-select",syntax:"none | text | all | -moz-none"},"-ms-flex-align":{comment:"misssed old syntax implemented in IE, https://www.w3.org/TR/2012/WD-css3-flexbox-20120322/#flex-align",syntax:"start | end | center | baseline | stretch"},"-ms-flex-item-align":{comment:"misssed old syntax implemented in IE, https://www.w3.org/TR/2012/WD-css3-flexbox-20120322/#flex-align",syntax:"auto | start | end | center | baseline | stretch"},"-ms-flex-line-pack":{comment:"misssed old syntax implemented in IE, https://www.w3.org/TR/2012/WD-css3-flexbox-20120322/#flex-line-pack",syntax:"start | end | center | justify | distribute | stretch"},"-ms-flex-negative":{comment:"misssed old syntax implemented in IE; TODO: find references for comfirmation",syntax:"<'flex-shrink'>"},"-ms-flex-pack":{comment:"misssed old syntax implemented in IE, https://www.w3.org/TR/2012/WD-css3-flexbox-20120322/#flex-pack",syntax:"start | end | center | justify | distribute"},"-ms-flex-order":{comment:"misssed old syntax implemented in IE; https://msdn.microsoft.com/en-us/library/jj127303(v=vs.85).aspx",syntax:"<integer>"},"-ms-flex-positive":{comment:"misssed old syntax implemented in IE; TODO: find references for comfirmation",syntax:"<'flex-grow'>"},"-ms-flex-preferred-size":{comment:"misssed old syntax implemented in IE; TODO: find references for comfirmation",syntax:"<'flex-basis'>"},"-ms-interpolation-mode":{comment:"https://msdn.microsoft.com/en-us/library/ff521095(v=vs.85).aspx",syntax:"nearest-neighbor | bicubic"},"-ms-grid-column-align":{comment:"add this property first since it uses as fallback for flexbox, https://msdn.microsoft.com/en-us/library/windows/apps/hh466338.aspx",syntax:"start | end | center | stretch"},"-ms-grid-row-align":{comment:"add this property first since it uses as fallback for flexbox, https://msdn.microsoft.com/en-us/library/windows/apps/hh466348.aspx",syntax:"start | end | center | stretch"},"-ms-hyphenate-limit-last":{comment:"misssed old syntax implemented in IE; https://www.w3.org/TR/css-text-4/#hyphenate-line-limits",syntax:"none | always | column | page | spread"},"-webkit-appearance":{comment:"webkit specific keywords",references:["http://css-infos.net/property/-webkit-appearance"],syntax:"none | button | button-bevel | caps-lock-indicator | caret | checkbox | default-button | inner-spin-button | listbox | listitem | media-controls-background | media-controls-fullscreen-background | media-current-time-display | media-enter-fullscreen-button | media-exit-fullscreen-button | media-fullscreen-button | media-mute-button | media-overlay-play-button | media-play-button | media-seek-back-button | media-seek-forward-button | media-slider | media-sliderthumb | media-time-remaining-display | media-toggle-closed-captions-button | media-volume-slider | media-volume-slider-container | media-volume-sliderthumb | menulist | menulist-button | menulist-text | menulist-textfield | meter | progress-bar | progress-bar-value | push-button | radio | scrollbarbutton-down | scrollbarbutton-left | scrollbarbutton-right | scrollbarbutton-up | scrollbargripper-horizontal | scrollbargripper-vertical | scrollbarthumb-horizontal | scrollbarthumb-vertical | scrollbartrack-horizontal | scrollbartrack-vertical | searchfield | searchfield-cancel-button | searchfield-decoration | searchfield-results-button | searchfield-results-decoration | slider-horizontal | slider-vertical | sliderthumb-horizontal | sliderthumb-vertical | square-button | textarea | textfield | -apple-pay-button"},"-webkit-background-clip":{comment:"https://developer.mozilla.org/en/docs/Web/CSS/background-clip",syntax:"[ <box> | border | padding | content | text ]#"},"-webkit-column-break-after":{comment:"added, http://help.dottoro.com/lcrthhhv.php",syntax:"always | auto | avoid"},"-webkit-column-break-before":{comment:"added, http://help.dottoro.com/lcxquvkf.php",syntax:"always | auto | avoid"},"-webkit-column-break-inside":{comment:"added, http://help.dottoro.com/lclhnthl.php",syntax:"always | auto | avoid"},"-webkit-font-smoothing":{comment:"https://developer.mozilla.org/en-US/docs/Web/CSS/font-smooth",syntax:"auto | none | antialiased | subpixel-antialiased"},"-webkit-mask-box-image":{comment:"missed; https://developer.mozilla.org/en-US/docs/Web/CSS/-webkit-mask-box-image",syntax:"[ <url> | <gradient> | none ] [ <length-percentage>{4} <-webkit-mask-box-repeat>{2} ]?"},"-webkit-print-color-adjust":{comment:"missed",references:["https://developer.mozilla.org/en/docs/Web/CSS/-webkit-print-color-adjust"],syntax:"economy | exact"},"-webkit-text-security":{comment:"missed; http://help.dottoro.com/lcbkewgt.php",syntax:"none | circle | disc | square"},"-webkit-user-drag":{comment:"missed; http://help.dottoro.com/lcbixvwm.php",syntax:"none | element | auto"},"-webkit-user-select":{comment:"auto is supported by old webkit, https://developer.mozilla.org/en-US/docs/Web/CSS/user-select",syntax:"auto | none | text | all"},"alignment-baseline":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/text.html#AlignmentBaselineProperty"],syntax:"auto | baseline | before-edge | text-before-edge | middle | central | after-edge | text-after-edge | ideographic | alphabetic | hanging | mathematical"},"baseline-shift":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/text.html#BaselineShiftProperty"],syntax:"baseline | sub | super | <svg-length>"},behavior:{comment:"added old IE property https://msdn.microsoft.com/en-us/library/ms530723(v=vs.85).aspx",syntax:"<url>+"},"clip-rule":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/masking.html#ClipRuleProperty"],syntax:"nonzero | evenodd"},cue:{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<'cue-before'> <'cue-after'>?"},"cue-after":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<url> <decibel>? | none"},"cue-before":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<url> <decibel>? | none"},cursor:{comment:"added legacy keywords: hand, -webkit-grab. -webkit-grabbing, -webkit-zoom-in, -webkit-zoom-out, -moz-grab, -moz-grabbing, -moz-zoom-in, -moz-zoom-out",references:["https://www.sitepoint.com/css3-cursor-styles/"],syntax:"[ [ <url> [ <x> <y> ]? , ]* [ auto | default | none | context-menu | help | pointer | progress | wait | cell | crosshair | text | vertical-text | alias | copy | move | no-drop | not-allowed | e-resize | n-resize | ne-resize | nw-resize | s-resize | se-resize | sw-resize | w-resize | ew-resize | ns-resize | nesw-resize | nwse-resize | col-resize | row-resize | all-scroll | zoom-in | zoom-out | grab | grabbing | hand | -webkit-grab | -webkit-grabbing | -webkit-zoom-in | -webkit-zoom-out | -moz-grab | -moz-grabbing | -moz-zoom-in | -moz-zoom-out ] ]"},display:{comment:"extended with -ms-flexbox",syntax:"| <-non-standard-display>"},position:{comment:"extended with -webkit-sticky",syntax:"| -webkit-sticky"},"dominant-baseline":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/text.html#DominantBaselineProperty"],syntax:"auto | use-script | no-change | reset-size | ideographic | alphabetic | hanging | mathematical | central | middle | text-after-edge | text-before-edge"},"image-rendering":{comment:"extended with <-non-standard-image-rendering>, added SVG keywords optimizeSpeed and optimizeQuality",references:["https://developer.mozilla.org/en/docs/Web/CSS/image-rendering","https://www.w3.org/TR/SVG/painting.html#ImageRenderingProperty"],syntax:"| optimizeSpeed | optimizeQuality | <-non-standard-image-rendering>"},fill:{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#FillProperty"],syntax:"<paint>"},"fill-opacity":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#FillProperty"],syntax:"<number-zero-one>"},"fill-rule":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#FillProperty"],syntax:"nonzero | evenodd"},filter:{comment:"extend with IE legacy syntaxes",syntax:"| <-ms-filter-function-list>"},"glyph-orientation-horizontal":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/text.html#GlyphOrientationHorizontalProperty"],syntax:"<angle>"},"glyph-orientation-vertical":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/text.html#GlyphOrientationVerticalProperty"],syntax:"<angle>"},kerning:{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/text.html#KerningProperty"],syntax:"auto | <svg-length>"},"letter-spacing":{comment:"fix syntax <length> -> <length-percentage>",references:["https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/letter-spacing"],syntax:"normal | <length-percentage>"},marker:{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#MarkerProperties"],syntax:"none | <url>"},"marker-end":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#MarkerProperties"],syntax:"none | <url>"},"marker-mid":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#MarkerProperties"],syntax:"none | <url>"},"marker-start":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#MarkerProperties"],syntax:"none | <url>"},"max-width":{comment:"fix auto -> none (https://github.com/mdn/data/pull/431); extend by non-standard width keywords https://developer.mozilla.org/en-US/docs/Web/CSS/max-width",syntax:"none | <length-percentage> | min-content | max-content | fit-content(<length-percentage>) | <-non-standard-width>"},width:{comment:"per spec fit-content should be a function, however browsers are supporting it as a keyword (https://github.com/csstree/stylelint-validator/issues/29)",syntax:"| fit-content | -moz-fit-content | -webkit-fit-content"},"min-width":{comment:"extend by non-standard width keywords https://developer.mozilla.org/en-US/docs/Web/CSS/width",syntax:"auto | <length-percentage> | min-content | max-content | fit-content(<length-percentage>) | <-non-standard-width>"},overflow:{comment:"extend by vendor keywords https://developer.mozilla.org/en-US/docs/Web/CSS/overflow",syntax:"| <-non-standard-overflow>"},pause:{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<'pause-before'> <'pause-after'>?"},"pause-after":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<time> | none | x-weak | weak | medium | strong | x-strong"},"pause-before":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<time> | none | x-weak | weak | medium | strong | x-strong"},rest:{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<'rest-before'> <'rest-after'>?"},"rest-after":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<time> | none | x-weak | weak | medium | strong | x-strong"},"rest-before":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<time> | none | x-weak | weak | medium | strong | x-strong"},"shape-rendering":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#ShapeRenderingPropert"],syntax:"auto | optimizeSpeed | crispEdges | geometricPrecision"},src:{comment:"added @font-face's src property https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/src",syntax:"[ <url> [ format( <string># ) ]? | local( <family-name> ) ]#"},speak:{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"auto | none | normal"},"speak-as":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"normal | spell-out || digits || [ literal-punctuation | no-punctuation ]"},stroke:{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#StrokeProperties"],syntax:"<paint>"},"stroke-dasharray":{comment:"added SVG property; a list of comma and/or white space separated <length>s and <percentage>s",references:["https://www.w3.org/TR/SVG/painting.html#StrokeProperties"],syntax:"none | [ <svg-length>+ ]#"},"stroke-dashoffset":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#StrokeProperties"],syntax:"<svg-length>"},"stroke-linecap":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#StrokeProperties"],syntax:"butt | round | square"},"stroke-linejoin":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#StrokeProperties"],syntax:"miter | round | bevel"},"stroke-miterlimit":{comment:"added SVG property (<miterlimit> = <number-one-or-greater>) ",references:["https://www.w3.org/TR/SVG/painting.html#StrokeProperties"],syntax:"<number-one-or-greater>"},"stroke-opacity":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#StrokeProperties"],syntax:"<number-zero-one>"},"stroke-width":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#StrokeProperties"],syntax:"<svg-length>"},"text-anchor":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/text.html#TextAlignmentProperties"],syntax:"start | middle | end"},"unicode-bidi":{comment:"added prefixed keywords https://developer.mozilla.org/en-US/docs/Web/CSS/unicode-bidi",syntax:"| -moz-isolate | -moz-isolate-override | -moz-plaintext | -webkit-isolate | -webkit-isolate-override | -webkit-plaintext"},"unicode-range":{comment:"added missed property https://developer.mozilla.org/en-US/docs/Web/CSS/%40font-face/unicode-range",syntax:"<urange>#"},"voice-balance":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<number> | left | center | right | leftwards | rightwards"},"voice-duration":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"auto | <time>"},"voice-family":{comment:"<name> -> <family-name>, https://www.w3.org/TR/css3-speech/#property-index",syntax:"[ [ <family-name> | <generic-voice> ] , ]* [ <family-name> | <generic-voice> ] | preserve"},"voice-pitch":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<frequency> && absolute | [ [ x-low | low | medium | high | x-high ] || [ <frequency> | <semitones> | <percentage> ] ]"},"voice-range":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<frequency> && absolute | [ [ x-low | low | medium | high | x-high ] || [ <frequency> | <semitones> | <percentage> ] ]"},"voice-rate":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"[ normal | x-slow | slow | medium | fast | x-fast ] || <percentage>"},"voice-stress":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"normal | strong | moderate | none | reduced"},"voice-volume":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"silent | [ [ x-soft | soft | medium | loud | x-loud ] || <decibel> ]"},"writing-mode":{comment:"extend with SVG keywords",syntax:"| <svg-writing-mode>"}},syntaxes:{"-legacy-gradient":{comment:"added collection of legacy gradient syntaxes",syntax:"<-webkit-gradient()> | <-legacy-linear-gradient> | <-legacy-repeating-linear-gradient> | <-legacy-radial-gradient> | <-legacy-repeating-radial-gradient>"},"-legacy-linear-gradient":{comment:"like standard syntax but w/o `to` keyword https://developer.mozilla.org/en-US/docs/Web/CSS/linear-gradient",syntax:"-moz-linear-gradient( <-legacy-linear-gradient-arguments> ) | -webkit-linear-gradient( <-legacy-linear-gradient-arguments> ) | -o-linear-gradient( <-legacy-linear-gradient-arguments> )"},"-legacy-repeating-linear-gradient":{comment:"like standard syntax but w/o `to` keyword https://developer.mozilla.org/en-US/docs/Web/CSS/linear-gradient",syntax:"-moz-repeating-linear-gradient( <-legacy-linear-gradient-arguments> ) | -webkit-repeating-linear-gradient( <-legacy-linear-gradient-arguments> ) | -o-repeating-linear-gradient( <-legacy-linear-gradient-arguments> )"},"-legacy-linear-gradient-arguments":{comment:"like standard syntax but w/o `to` keyword https://developer.mozilla.org/en-US/docs/Web/CSS/linear-gradient",syntax:"[ <angle> | <side-or-corner> ]? , <color-stop-list>"},"-legacy-radial-gradient":{comment:"deprecated syntax that implemented by some browsers https://www.w3.org/TR/2011/WD-css3-images-20110908/#radial-gradients",syntax:"-moz-radial-gradient( <-legacy-radial-gradient-arguments> ) | -webkit-radial-gradient( <-legacy-radial-gradient-arguments> ) | -o-radial-gradient( <-legacy-radial-gradient-arguments> )"},"-legacy-repeating-radial-gradient":{comment:"deprecated syntax that implemented by some browsers https://www.w3.org/TR/2011/WD-css3-images-20110908/#radial-gradients",syntax:"-moz-repeating-radial-gradient( <-legacy-radial-gradient-arguments> ) | -webkit-repeating-radial-gradient( <-legacy-radial-gradient-arguments> ) | -o-repeating-radial-gradient( <-legacy-radial-gradient-arguments> )"},"-legacy-radial-gradient-arguments":{comment:"deprecated syntax that implemented by some browsers https://www.w3.org/TR/2011/WD-css3-images-20110908/#radial-gradients",syntax:"[ <position> , ]? [ [ [ <-legacy-radial-gradient-shape> || <-legacy-radial-gradient-size> ] | [ <length> | <percentage> ]{2} ] , ]? <color-stop-list>"},"-legacy-radial-gradient-size":{comment:"before a standard it contains 2 extra keywords (`contain` and `cover`) https://www.w3.org/TR/2011/WD-css3-images-20110908/#ltsize",syntax:"closest-side | closest-corner | farthest-side | farthest-corner | contain | cover"},"-legacy-radial-gradient-shape":{comment:"define to double sure it doesn't extends in future https://www.w3.org/TR/2011/WD-css3-images-20110908/#ltshape",syntax:"circle | ellipse"},"-non-standard-font":{comment:"non standard fonts",references:["https://webkit.org/blog/3709/using-the-system-font-in-web-content/"],syntax:"-apple-system-body | -apple-system-headline | -apple-system-subheadline | -apple-system-caption1 | -apple-system-caption2 | -apple-system-footnote | -apple-system-short-body | -apple-system-short-headline | -apple-system-short-subheadline | -apple-system-short-caption1 | -apple-system-short-footnote | -apple-system-tall-body"},"-non-standard-color":{comment:"non standard colors",references:["http://cssdot.ru/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B8%D0%BA_CSS/color-i305.html","https://developer.mozilla.org/en-US/docs/Web/CSS/color_value#Mozilla_Color_Preference_Extensions"],syntax:"-moz-ButtonDefault | -moz-ButtonHoverFace | -moz-ButtonHoverText | -moz-CellHighlight | -moz-CellHighlightText | -moz-Combobox | -moz-ComboboxText | -moz-Dialog | -moz-DialogText | -moz-dragtargetzone | -moz-EvenTreeRow | -moz-Field | -moz-FieldText | -moz-html-CellHighlight | -moz-html-CellHighlightText | -moz-mac-accentdarkestshadow | -moz-mac-accentdarkshadow | -moz-mac-accentface | -moz-mac-accentlightesthighlight | -moz-mac-accentlightshadow | -moz-mac-accentregularhighlight | -moz-mac-accentregularshadow | -moz-mac-chrome-active | -moz-mac-chrome-inactive | -moz-mac-focusring | -moz-mac-menuselect | -moz-mac-menushadow | -moz-mac-menutextselect | -moz-MenuHover | -moz-MenuHoverText | -moz-MenuBarText | -moz-MenuBarHoverText | -moz-nativehyperlinktext | -moz-OddTreeRow | -moz-win-communicationstext | -moz-win-mediatext | -moz-activehyperlinktext | -moz-default-background-color | -moz-default-color | -moz-hyperlinktext | -moz-visitedhyperlinktext | -webkit-activelink | -webkit-focus-ring-color | -webkit-link | -webkit-text"},"-non-standard-image-rendering":{comment:"non-standard keywords http://phrogz.net/tmp/canvas_image_zoom.html",syntax:"optimize-contrast | -moz-crisp-edges | -o-crisp-edges | -webkit-optimize-contrast"},"-non-standard-overflow":{comment:"non-standard keywords https://developer.mozilla.org/en-US/docs/Web/CSS/overflow",syntax:"-moz-scrollbars-none | -moz-scrollbars-horizontal | -moz-scrollbars-vertical | -moz-hidden-unscrollable"},"-non-standard-width":{comment:"non-standard keywords https://developer.mozilla.org/en-US/docs/Web/CSS/width",syntax:"fill-available | min-intrinsic | intrinsic | -moz-available | -moz-fit-content | -moz-min-content | -moz-max-content | -webkit-min-content | -webkit-max-content"},"-webkit-gradient()":{comment:"first Apple proposal gradient syntax https://webkit.org/blog/175/introducing-css-gradients/ - TODO: simplify when after match algorithm improvement ( [, point, radius | , point] -> [, radius]? , point )",syntax:"-webkit-gradient( <-webkit-gradient-type>, <-webkit-gradient-point> [, <-webkit-gradient-point> | , <-webkit-gradient-radius>, <-webkit-gradient-point> ] [, <-webkit-gradient-radius>]? [, <-webkit-gradient-color-stop>]* )"},"-webkit-gradient-color-stop":{comment:"first Apple proposal gradient syntax https://webkit.org/blog/175/introducing-css-gradients/",syntax:"from( <color> ) | color-stop( [ <number-zero-one> | <percentage> ] , <color> ) | to( <color> )"},"-webkit-gradient-point":{comment:"first Apple proposal gradient syntax https://webkit.org/blog/175/introducing-css-gradients/",syntax:"[ left | center | right | <length-percentage> ] [ top | center | bottom | <length-percentage> ]"},"-webkit-gradient-radius":{comment:"first Apple proposal gradient syntax https://webkit.org/blog/175/introducing-css-gradients/",syntax:"<length> | <percentage>"},"-webkit-gradient-type":{comment:"first Apple proposal gradient syntax https://webkit.org/blog/175/introducing-css-gradients/",syntax:"linear | radial"},"-webkit-mask-box-repeat":{comment:"missed; https://developer.mozilla.org/en-US/docs/Web/CSS/-webkit-mask-box-image",syntax:"repeat | stretch | round"},"-webkit-mask-clip-style":{comment:"missed; there is no enough information about `-webkit-mask-clip` property, but looks like all those keywords are working",syntax:"border | border-box | padding | padding-box | content | content-box | text"},"-ms-filter-function-list":{comment:"https://developer.mozilla.org/en-US/docs/Web/CSS/-ms-filter",syntax:"<-ms-filter-function>+"},"-ms-filter-function":{comment:"https://developer.mozilla.org/en-US/docs/Web/CSS/-ms-filter",syntax:"<-ms-filter-function-progid> | <-ms-filter-function-legacy>"},"-ms-filter-function-progid":{comment:"https://developer.mozilla.org/en-US/docs/Web/CSS/-ms-filter",syntax:"'progid:' [ <ident-token> '.' ]* [ <ident-token> | <function-token> <any-value>? ) ]"},"-ms-filter-function-legacy":{comment:"https://developer.mozilla.org/en-US/docs/Web/CSS/-ms-filter",syntax:"<ident-token> | <function-token> <any-value>? )"},"-ms-filter":{syntax:"<string>"},age:{comment:"https://www.w3.org/TR/css3-speech/#voice-family",syntax:"child | young | old"},"attr-name":{syntax:"<wq-name>"},"attr-fallback":{syntax:"<any-value>"},"border-radius":{comment:"missed, https://drafts.csswg.org/css-backgrounds-3/#the-border-radius",syntax:"<length-percentage>{1,2}"},bottom:{comment:"missed; not sure we should add it, but no others except `shape` is using it so it's ok for now; https://drafts.fxtf.org/css-masking-1/#funcdef-clip-rect",syntax:"<length> | auto"},"content-list":{comment:"missed -> https://drafts.csswg.org/css-content/#typedef-content-list (document-url, <target> and leader() is omitted util stabilization)",syntax:"[ <string> | contents | <image> | <quote> | <target> | <leader()> | <attr()> | counter( <ident>, <'list-style-type'>? ) ]+"},"element()":{comment:"https://drafts.csswg.org/css-gcpm/#element-syntax & https://drafts.csswg.org/css-images-4/#element-notation",syntax:"element( <custom-ident> , [ first | start | last | first-except ]? ) | element( <id-selector> )"},"generic-voice":{comment:"https://www.w3.org/TR/css3-speech/#voice-family",syntax:"[ <age>? <gender> <integer>? ]"},gender:{comment:"https://www.w3.org/TR/css3-speech/#voice-family",syntax:"male | female | neutral"},"generic-family":{comment:"added -apple-system",references:["https://webkit.org/blog/3709/using-the-system-font-in-web-content/"],syntax:"| -apple-system"},gradient:{comment:"added legacy syntaxes support",syntax:"| <-legacy-gradient>"},left:{comment:"missed; not sure we should add it, but no others except `shape` is using it so it's ok for now; https://drafts.fxtf.org/css-masking-1/#funcdef-clip-rect",syntax:"<length> | auto"},"mask-image":{comment:"missed; https://drafts.fxtf.org/css-masking-1/#the-mask-image",syntax:"<mask-reference>#"},"name-repeat":{comment:"missed, and looks like obsolete, keep it as is since other property syntaxes should be changed too; https://www.w3.org/TR/2015/WD-css-grid-1-20150917/#typedef-name-repeat",syntax:"repeat( [ <positive-integer> | auto-fill ], <line-names>+)"},"named-color":{comment:"added non standard color names",syntax:"| <-non-standard-color>"},paint:{comment:"used by SVG https://www.w3.org/TR/SVG/painting.html#SpecifyingPaint",syntax:"none | <color> | <url> [ none | <color> ]? | context-fill | context-stroke"},"page-size":{comment:"https://www.w3.org/TR/css-page-3/#typedef-page-size-page-size",syntax:"A5 | A4 | A3 | B5 | B4 | JIS-B5 | JIS-B4 | letter | legal | ledger"},ratio:{comment:"missed, https://drafts.csswg.org/mediaqueries-4/#typedef-ratio",syntax:"<integer> / <integer>"},right:{comment:"missed; not sure we should add it, but no others except `shape` is using it so it's ok for now; https://drafts.fxtf.org/css-masking-1/#funcdef-clip-rect",syntax:"<length> | auto"},shape:{comment:"missed spaces in function body and add backwards compatible syntax",syntax:"rect( <top>, <right>, <bottom>, <left> ) | rect( <top> <right> <bottom> <left> )"},"svg-length":{comment:"All coordinates and lengths in SVG can be specified with or without a unit identifier",references:["https://www.w3.org/TR/SVG11/coords.html#Units"],syntax:"<percentage> | <length> | <number>"},"svg-writing-mode":{comment:"SVG specific keywords (deprecated for CSS)",references:["https://developer.mozilla.org/en/docs/Web/CSS/writing-mode","https://www.w3.org/TR/SVG/text.html#WritingModeProperty"],syntax:"lr-tb | rl-tb | tb-rl | lr | rl | tb"},top:{comment:"missed; not sure we should add it, but no others except `shape` is using it so it's ok for now; https://drafts.fxtf.org/css-masking-1/#funcdef-clip-rect",syntax:"<length> | auto"},"track-group":{comment:"used by old grid-columns and grid-rows syntax v0",syntax:"'(' [ <string>* <track-minmax> <string>* ]+ ')' [ '[' <positive-integer> ']' ]? | <track-minmax>"},"track-list-v0":{comment:"used by old grid-columns and grid-rows syntax v0",syntax:"[ <string>* <track-group> <string>* ]+ | none"},"track-minmax":{comment:"used by old grid-columns and grid-rows syntax v0",syntax:"minmax( <track-breadth> , <track-breadth> ) | auto | <track-breadth> | fit-content"},x:{comment:"missed; not sure we should add it, but no others except `cursor` is using it so it's ok for now; https://drafts.csswg.org/css-ui-3/#cursor",syntax:"<number>"},y:{comment:"missed; not sure we should add it, but no others except `cursor` is using so it's ok for now; https://drafts.csswg.org/css-ui-3/#cursor",syntax:"<number>"},declaration:{comment:"missed, restored by https://drafts.csswg.org/css-syntax",syntax:"<ident-token> : <declaration-value>? [ '!' important ]?"},"declaration-list":{comment:"missed, restored by https://drafts.csswg.org/css-syntax",syntax:"[ <declaration>? ';' ]* <declaration>?"},url:{comment:"https://drafts.csswg.org/css-values-4/#urls",syntax:"url( <string> <url-modifier>* ) | <url-token>"},"url-modifier":{comment:"https://drafts.csswg.org/css-values-4/#typedef-url-modifier",syntax:"<ident> | <function-token> <any-value> )"},"number-zero-one":{syntax:"<number [0,1]>"},"number-one-or-greater":{syntax:"<number [1,\u221E]>"},"positive-integer":{syntax:"<integer [0,\u221E]>"},"-non-standard-display":{syntax:"-ms-inline-flexbox | -ms-grid | -ms-inline-grid | -webkit-flex | -webkit-inline-flex | -webkit-box | -webkit-inline-box | -moz-inline-stack | -moz-box | -moz-inline-box"}}}});var iS=Ee((yj,tS)=>{var _O=Yw(),vO=Xw(),bO=Kw(),dy=Jw(),Qw=/^\s*\|\s*/;function xO(s){let o=Object.create(null);for(let p in s){let d=s[p],f=null;if(d.descriptors){f=Object.create(null);for(let a in d.descriptors)f[a]=d.descriptors[a].syntax}o[p.substr(1)]={prelude:d.syntax.trim().match(/^@\S+\s+([^;\{]*)/)[1].trim()||null,descriptors:f}}return o}function py(s,o){let p={};for(let d in s)p[d]=s[d].syntax||s[d];for(let d in o)d in s?o[d].syntax?p[d]=Qw.test(o[d].syntax)?p[d]+" "+o[d].syntax.trim():o[d].syntax:delete p[d]:o[d].syntax&&(p[d]=o[d].syntax.replace(Qw,""));return p}function eS(s){let o={};for(let p in s)o[p]=s[p].syntax;return o}function wO(s,o){let p={};for(let d in s){let f=o[d]&&o[d].descriptors||null;p[d]={prelude:d in o&&"prelude"in o[d]?o[d].prelude:s[d].prelude||null,descriptors:s[d].descriptors?py(s[d].descriptors,f||{}):f&&eS(f)}}for(let d in o)hasOwnProperty.call(s,d)||(p[d]={prelude:o[d].prelude||null,descriptors:o[d].descriptors&&eS(o[d].descriptors)});return p}tS.exports={types:py(bO,dy.syntaxes),atrules:wO(xO(_O),dy.atrules),properties:py(vO,dy.properties)}});var lS=Ee((_j,oS)=>{var aS=vt().cmpChar,sS=vt().isDigit,ld=vt().TYPE,rS=ld.WhiteSpace,nS=ld.Comment,fy=ld.Ident,qo=ld.Number,SO=ld.Dimension,Xs=43,wa=45,pf=110,hc=!0,TO=!1;function ff(s,o){var p=this.scanner.tokenStart+s,d=this.scanner.source.charCodeAt(p);for((d===Xs||d===wa)&&(o&&this.error("Number sign is not allowed"),p++);p<this.scanner.tokenEnd;p++)sS(this.scanner.source.charCodeAt(p))||this.error("Integer is expected",p)}function Mu(s){return ff.call(this,0,s)}function Cl(s,o){if(!aS(this.scanner.source,this.scanner.tokenStart+s,o)){var p="";switch(o){case pf:p="N is expected";break;case wa:p="HyphenMinus is expected";break}this.error(p,this.scanner.tokenStart+s)}}function my(){for(var s=0,o=0,p=this.scanner.tokenType;p===rS||p===nS;)p=this.scanner.lookupType(++s);if(p!==qo)if(this.scanner.isDelim(Xs,s)||this.scanner.isDelim(wa,s)){o=this.scanner.isDelim(Xs,s)?Xs:wa;do p=this.scanner.lookupType(++s);while(p===rS||p===nS);p!==qo&&(this.scanner.skip(s),Mu.call(this,hc))}else return null;return s>0&&this.scanner.skip(s),o===0&&(p=this.scanner.source.charCodeAt(this.scanner.tokenStart),p!==Xs&&p!==wa&&this.error("Number sign is expected")),Mu.call(this,o!==0),o===wa?"-"+this.consume(qo):this.consume(qo)}oS.exports={name:"AnPlusB",structure:{a:[String,null],b:[String,null]},parse:function(){var s=this.scanner.tokenStart,o=null,p=null;if(this.scanner.tokenType===qo)Mu.call(this,TO),p=this.consume(qo);else if(this.scanner.tokenType===fy&&aS(this.scanner.source,this.scanner.tokenStart,wa))switch(o="-1",Cl.call(this,1,pf),this.scanner.getTokenLength()){case 2:this.scanner.next(),p=my.call(this);break;case 3:Cl.call(this,2,wa),this.scanner.next(),this.scanner.skipSC(),Mu.call(this,hc),p="-"+this.consume(qo);break;default:Cl.call(this,2,wa),ff.call(this,3,hc),this.scanner.next(),p=this.scanner.substrToCursor(s+2)}else if(this.scanner.tokenType===fy||this.scanner.isDelim(Xs)&&this.scanner.lookupType(1)===fy){var d=0;switch(o="1",this.scanner.isDelim(Xs)&&(d=1,this.scanner.next()),Cl.call(this,0,pf),this.scanner.getTokenLength()){case 1:this.scanner.next(),p=my.call(this);break;case 2:Cl.call(this,1,wa),this.scanner.next(),this.scanner.skipSC(),Mu.call(this,hc),p="-"+this.consume(qo);break;default:Cl.call(this,1,wa),ff.call(this,2,hc),this.scanner.next(),p=this.scanner.substrToCursor(s+d+1)}}else if(this.scanner.tokenType===SO){for(var f=this.scanner.source.charCodeAt(this.scanner.tokenStart),d=f===Xs||f===wa,a=this.scanner.tokenStart+d;a<this.scanner.tokenEnd&&sS(this.scanner.source.charCodeAt(a));a++);a===this.scanner.tokenStart+d&&this.error("Integer is expected",this.scanner.tokenStart+d),Cl.call(this,a-this.scanner.tokenStart,pf),o=this.scanner.source.substring(s,a),a+1===this.scanner.tokenEnd?(this.scanner.next(),p=my.call(this)):(Cl.call(this,a-this.scanner.tokenStart+1,wa),a+2===this.scanner.tokenEnd?(this.scanner.next(),this.scanner.skipSC(),Mu.call(this,hc),p="-"+this.consume(qo)):(ff.call(this,a-this.scanner.tokenStart+2,hc),this.scanner.next(),p=this.scanner.substrToCursor(a+1)))}else this.error();return o!==null&&o.charCodeAt(0)===Xs&&(o=o.substr(1)),p!==null&&p.charCodeAt(0)===Xs&&(p=p.substr(1)),{type:"AnPlusB",loc:this.getLocation(s,this.scanner.tokenStart),a:o,b:p}},generate:function(s){var o=s.a!==null&&s.a!==void 0,p=s.b!==null&&s.b!==void 0;o?(this.chunk(s.a==="+1"?"+n":s.a==="1"?"n":s.a==="-1"?"-n":s.a+"n"),p&&(p=String(s.b),p.charAt(0)==="-"||p.charAt(0)==="+"?(this.chunk(p.charAt(0)),this.chunk(p.substr(1))):(this.chunk("+"),this.chunk(p)))):this.chunk(String(s.b))}}});var kl=Ee((vj,hS)=>{var CO=vt(),mf=CO.TYPE,kO=mf.WhiteSpace,gy=mf.Semicolon,uS=mf.LeftCurlyBracket,PO=mf.Delim,EO=33;function AO(){return this.scanner.tokenIndex>0&&this.scanner.lookupType(-1)===kO?this.scanner.tokenIndex>1?this.scanner.getTokenStart(this.scanner.tokenIndex-1):this.scanner.firstCharOffset:this.scanner.tokenStart}function cS(){return 0}function MO(s){return s===uS?1:0}function IO(s){return s===uS||s===gy?1:0}function zO(s,o,p){return s===PO&&o.charCodeAt(p)===EO||s===gy?1:0}function LO(s){return s===gy?2:0}hS.exports={name:"Raw",structure:{value:String},parse:function(s,o,p){var d=this.scanner.getTokenStart(s),f;return this.scanner.skip(this.scanner.getRawLength(s,o||cS)),p&&this.scanner.tokenStart>d?f=AO.call(this):f=this.scanner.tokenStart,{type:"Raw",loc:this.getLocation(d,f),value:this.scanner.source.substring(d,f)}},generate:function(s){this.chunk(s.value)},mode:{default:cS,leftCurlyBracket:MO,leftCurlyBracketOrSemicolon:IO,exclamationMarkOrSemicolon:zO,semicolonIncluded:LO}}});var gS=Ee((bj,mS)=>{var gf=vt().TYPE,OO=kl().mode,fS=gf.AtKeyword,dS=gf.Semicolon,yy=gf.LeftCurlyBracket,DO=gf.RightCurlyBracket;function pS(s){return this.Raw(s,OO.leftCurlyBracketOrSemicolon,!0)}function RO(){for(var s=1,o;o=this.scanner.lookupType(s);s++){if(o===DO)return!0;if(o===yy||o===fS)return!1}return!1}mS.exports={name:"Atrule",structure:{name:String,prelude:["AtrulePrelude","Raw",null],block:["Block",null]},parse:function(){var s=this.scanner.tokenStart,o,p,d=null,f=null;switch(this.eat(fS),o=this.scanner.substrToCursor(s+1),p=o.toLowerCase(),this.scanner.skipSC(),this.scanner.eof===!1&&this.scanner.tokenType!==yy&&this.scanner.tokenType!==dS&&(this.parseAtrulePrelude?(d=this.parseWithFallback(this.AtrulePrelude.bind(this,o),pS),d.type==="AtrulePrelude"&&d.children.head===null&&(d=null)):d=pS.call(this,this.scanner.tokenIndex),this.scanner.skipSC()),this.scanner.tokenType){case dS:this.scanner.next();break;case yy:this.atrule.hasOwnProperty(p)&&typeof this.atrule[p].block=="function"?f=this.atrule[p].block.call(this):f=this.Block(RO.call(this));break}return{type:"Atrule",loc:this.getLocation(s,this.scanner.tokenStart),name:o,prelude:d,block:f}},generate:function(s){this.chunk("@"),this.chunk(s.name),s.prelude!==null&&(this.chunk(" "),this.node(s.prelude)),s.block?this.node(s.block):this.chunk(";")},walkContext:"atrule"}});var vS=Ee((xj,_S)=>{var yS=vt().TYPE,BO=yS.Semicolon,FO=yS.LeftCurlyBracket;_S.exports={name:"AtrulePrelude",structure:{children:[[]]},parse:function(s){var o=null;return s!==null&&(s=s.toLowerCase()),this.scanner.skipSC(),this.atrule.hasOwnProperty(s)&&typeof this.atrule[s].prelude=="function"?o=this.atrule[s].prelude.call(this):o=this.readSequence(this.scope.AtrulePrelude),this.scanner.skipSC(),this.scanner.eof!==!0&&this.scanner.tokenType!==FO&&this.scanner.tokenType!==BO&&this.error("Semicolon or block is expected"),o===null&&(o=this.createList()),{type:"AtrulePrelude",loc:this.getLocationFromList(o),children:o}},generate:function(s){this.children(s)},walkContext:"atrulePrelude"}});var SS=Ee((wj,wS)=>{var ud=vt().TYPE,cd=ud.Ident,jO=ud.String,NO=ud.Colon,qO=ud.LeftSquareBracket,bS=ud.RightSquareBracket,VO=36,xS=42,yf=61,WO=94,_y=124,GO=126;function UO(){this.scanner.eof&&this.error("Unexpected end of input");var s=this.scanner.tokenStart,o=!1,p=!0;return this.scanner.isDelim(xS)?(o=!0,p=!1,this.scanner.next()):this.scanner.isDelim(_y)||this.eat(cd),this.scanner.isDelim(_y)?this.scanner.source.charCodeAt(this.scanner.tokenStart+1)!==yf?(this.scanner.next(),this.eat(cd)):o&&this.error("Identifier is expected",this.scanner.tokenEnd):o&&this.error("Vertical line is expected"),p&&this.scanner.tokenType===NO&&(this.scanner.next(),this.eat(cd)),{type:"Identifier",loc:this.getLocation(s,this.scanner.tokenStart),name:this.scanner.substrToCursor(s)}}function ZO(){var s=this.scanner.tokenStart,o=this.scanner.source.charCodeAt(s);return o!==yf&&o!==GO&&o!==WO&&o!==VO&&o!==xS&&o!==_y&&this.error("Attribute selector (=, ~=, ^=, $=, *=, |=) is expected"),this.scanner.next(),o!==yf&&(this.scanner.isDelim(yf)||this.error("Equal sign is expected"),this.scanner.next()),this.scanner.substrToCursor(s)}wS.exports={name:"AttributeSelector",structure:{name:"Identifier",matcher:[String,null],value:["String","Identifier",null],flags:[String,null]},parse:function(){var s=this.scanner.tokenStart,o,p=null,d=null,f=null;return this.eat(qO),this.scanner.skipSC(),o=UO.call(this),this.scanner.skipSC(),this.scanner.tokenType!==bS&&(this.scanner.tokenType!==cd&&(p=ZO.call(this),this.scanner.skipSC(),d=this.scanner.tokenType===jO?this.String():this.Identifier(),this.scanner.skipSC()),this.scanner.tokenType===cd&&(f=this.scanner.getTokenValue(),this.scanner.next(),this.scanner.skipSC())),this.eat(bS),{type:"AttributeSelector",loc:this.getLocation(s,this.scanner.tokenStart),name:o,matcher:p,value:d,flags:f}},generate:function(s){var o=" ";this.chunk("["),this.node(s.name),s.matcher!==null&&(this.chunk(s.matcher),s.value!==null&&(this.node(s.value),s.value.type==="String"&&(o=""))),s.flags!==null&&(this.chunk(o),this.chunk(s.flags)),this.chunk("]")}}});var AS=Ee((Sj,ES)=>{var Iu=vt().TYPE,$O=kl().mode,HO=Iu.WhiteSpace,YO=Iu.Comment,TS=Iu.Semicolon,XO=Iu.AtKeyword,KO=Iu.LeftCurlyBracket,CS=Iu.RightCurlyBracket;function PS(s){return this.Raw(s,null,!0)}function JO(){return this.parseWithFallback(this.Rule,PS)}function kS(s){return this.Raw(s,$O.semicolonIncluded,!0)}function QO(){if(this.scanner.tokenType===TS)return kS.call(this,this.scanner.tokenIndex);var s=this.parseWithFallback(this.Declaration,kS);return this.scanner.tokenType===TS&&this.scanner.next(),s}ES.exports={name:"Block",structure:{children:[["Atrule","Rule","Declaration"]]},parse:function(s){var o=s?QO:JO,p=this.scanner.tokenStart,d=this.createList();this.eat(KO);e:for(;!this.scanner.eof;)switch(this.scanner.tokenType){case CS:break e;case HO:case YO:this.scanner.next();break;case XO:d.push(this.parseWithFallback(this.Atrule,PS));break;default:d.push(o.call(this))}return this.scanner.eof||this.eat(CS),{type:"Block",loc:this.getLocation(p,this.scanner.tokenStart),children:d}},generate:function(s){this.chunk("{"),this.children(s,function(o){o.type==="Declaration"&&this.chunk(";")}),this.chunk("}")},walkContext:"block"}});var zS=Ee((Tj,IS)=>{var MS=vt().TYPE,eD=MS.LeftSquareBracket,tD=MS.RightSquareBracket;IS.exports={name:"Brackets",structure:{children:[[]]},parse:function(s,o){var p=this.scanner.tokenStart,d=null;return this.eat(eD),d=s.call(this,o),this.scanner.eof||this.eat(tD),{type:"Brackets",loc:this.getLocation(p,this.scanner.tokenStart),children:d}},generate:function(s){this.chunk("["),this.children(s),this.chunk("]")}}});var OS=Ee((Cj,LS)=>{var iD=vt().TYPE.CDC;LS.exports={name:"CDC",structure:[],parse:function(){var s=this.scanner.tokenStart;return this.eat(iD),{type:"CDC",loc:this.getLocation(s,this.scanner.tokenStart)}},generate:function(){this.chunk("-->")}}});var RS=Ee((kj,DS)=>{var rD=vt().TYPE.CDO;DS.exports={name:"CDO",structure:[],parse:function(){var s=this.scanner.tokenStart;return this.eat(rD),{type:"CDO",loc:this.getLocation(s,this.scanner.tokenStart)}},generate:function(){this.chunk("<!--")}}});var FS=Ee((Pj,BS)=>{var nD=vt().TYPE,aD=nD.Ident,sD=46;BS.exports={name:"ClassSelector",structure:{name:String},parse:function(){return this.scanner.isDelim(sD)||this.error("Full stop is expected"),this.scanner.next(),{type:"ClassSelector",loc:this.getLocation(this.scanner.tokenStart-1,this.scanner.tokenEnd),name:this.consume(aD)}},generate:function(s){this.chunk("."),this.chunk(s.name)}}});var qS=Ee((Ej,NS)=>{var oD=vt().TYPE,lD=oD.Ident,cD=43,jS=47,uD=62,hD=126;NS.exports={name:"Combinator",structure:{name:String},parse:function(){var s=this.scanner.tokenStart,o=this.scanner.source.charCodeAt(this.scanner.tokenStart);switch(o){case uD:case cD:case hD:this.scanner.next();break;case jS:this.scanner.next(),(this.scanner.tokenType!==lD||this.scanner.lookupValue(0,"deep")===!1)&&this.error("Identifier `deep` is expected"),this.scanner.next(),this.scanner.isDelim(jS)||this.error("Solidus is expected"),this.scanner.next();break;default:this.error("Combinator is expected")}return{type:"Combinator",loc:this.getLocation(s,this.scanner.tokenStart),name:this.scanner.substrToCursor(s)}},generate:function(s){this.chunk(s.name)}}});var WS=Ee((Aj,VS)=>{var dD=vt().TYPE,pD=dD.Comment,fD=42,mD=47;VS.exports={name:"Comment",structure:{value:String},parse:function(){var s=this.scanner.tokenStart,o=this.scanner.tokenEnd;return this.eat(pD),o-s+2>=2&&this.scanner.source.charCodeAt(o-2)===fD&&this.scanner.source.charCodeAt(o-1)===mD&&(o-=2),{type:"Comment",loc:this.getLocation(s,this.scanner.tokenStart),value:this.scanner.source.substring(s+2,o)}},generate:function(s){this.chunk("/*"),this.chunk(s.value),this.chunk("*/")}}});var JS=Ee((Mj,KS)=>{var gD=qp().isCustomProperty,zu=vt().TYPE,ZS=kl().mode,$S=zu.Ident,GS=zu.Hash,yD=zu.Colon,HS=zu.Semicolon,YS=zu.Delim,_D=zu.WhiteSpace,XS=33,vD=35,bD=36,xD=38,wD=42,SD=43,US=47;function TD(s){return this.Raw(s,ZS.exclamationMarkOrSemicolon,!0)}function CD(s){return this.Raw(s,ZS.exclamationMarkOrSemicolon,!1)}function kD(){var s=this.scanner.tokenIndex,o=this.Value();return o.type!=="Raw"&&this.scanner.eof===!1&&this.scanner.tokenType!==HS&&this.scanner.isDelim(XS)===!1&&this.scanner.isBalanceEdge(s)===!1&&this.error(),o}KS.exports={name:"Declaration",structure:{important:[Boolean,String],property:String,value:["Value","Raw"]},parse:function(){var s=this.scanner.tokenStart,o=this.scanner.tokenIndex,p=PD.call(this),d=gD(p),f=d?this.parseCustomProperty:this.parseValue,a=d?CD:TD,T=!1,M;this.scanner.skipSC(),this.eat(yD);let B=this.scanner.tokenIndex;if(d||this.scanner.skipSC(),f?M=this.parseWithFallback(kD,a):M=a.call(this,this.scanner.tokenIndex),d&&M.type==="Value"&&M.children.isEmpty()){for(let G=B-this.scanner.tokenIndex;G<=0;G++)if(this.scanner.lookupType(G)===_D){M.children.appendData({type:"WhiteSpace",loc:null,value:" "});break}}return this.scanner.isDelim(XS)&&(T=ED.call(this),this.scanner.skipSC()),this.scanner.eof===!1&&this.scanner.tokenType!==HS&&this.scanner.isBalanceEdge(o)===!1&&this.error(),{type:"Declaration",loc:this.getLocation(s,this.scanner.tokenStart),important:T,property:p,value:M}},generate:function(s){this.chunk(s.property),this.chunk(":"),this.node(s.value),s.important&&this.chunk(s.important===!0?"!important":"!"+s.important)},walkContext:"declaration"};function PD(){var s=this.scanner.tokenStart,o=0;if(this.scanner.tokenType===YS)switch(this.scanner.source.charCodeAt(this.scanner.tokenStart)){case wD:case bD:case SD:case vD:case xD:this.scanner.next();break;case US:this.scanner.next(),this.scanner.isDelim(US)&&this.scanner.next();break}return o&&this.scanner.skip(o),this.scanner.tokenType===GS?this.eat(GS):this.eat($S),this.scanner.substrToCursor(s)}function ED(){this.eat(YS),this.scanner.skipSC();var s=this.consume($S);return s==="important"?!0:s}});var e2=Ee((Ij,QS)=>{var vy=vt().TYPE,AD=kl().mode,MD=vy.WhiteSpace,ID=vy.Comment,zD=vy.Semicolon;function LD(s){return this.Raw(s,AD.semicolonIncluded,!0)}QS.exports={name:"DeclarationList",structure:{children:[["Declaration"]]},parse:function(){for(var s=this.createList();!this.scanner.eof;)switch(this.scanner.tokenType){case MD:case ID:case zD:this.scanner.next();break;default:s.push(this.parseWithFallback(this.Declaration,LD))}return{type:"DeclarationList",loc:this.getLocationFromList(s),children:s}},generate:function(s){this.children(s,function(o){o.type==="Declaration"&&this.chunk(";")})}}});var i2=Ee((zj,t2)=>{var OD=vu().consumeNumber,DD=vt().TYPE,RD=DD.Dimension;t2.exports={name:"Dimension",structure:{value:String,unit:String},parse:function(){var s=this.scanner.tokenStart,o=OD(this.scanner.source,s);return this.eat(RD),{type:"Dimension",loc:this.getLocation(s,this.scanner.tokenStart),value:this.scanner.source.substring(s,o),unit:this.scanner.source.substring(o,this.scanner.tokenStart)}},generate:function(s){this.chunk(s.value),this.chunk(s.unit)}}});var n2=Ee((Lj,r2)=>{var BD=vt().TYPE,FD=BD.RightParenthesis;r2.exports={name:"Function",structure:{name:String,children:[[]]},parse:function(s,o){var p=this.scanner.tokenStart,d=this.consumeFunctionName(),f=d.toLowerCase(),a;return a=o.hasOwnProperty(f)?o[f].call(this,o):s.call(this,o),this.scanner.eof||this.eat(FD),{type:"Function",loc:this.getLocation(p,this.scanner.tokenStart),name:d,children:a}},generate:function(s){this.chunk(s.name),this.chunk("("),this.children(s),this.chunk(")")},walkContext:"function"}});var s2=Ee((Oj,a2)=>{var jD=vt().TYPE,ND=jD.Hash;a2.exports={name:"Hash",structure:{value:String},parse:function(){var s=this.scanner.tokenStart;return this.eat(ND),{type:"Hash",loc:this.getLocation(s,this.scanner.tokenStart),value:this.scanner.substrToCursor(s+1)}},generate:function(s){this.chunk("#"),this.chunk(s.value)}}});var l2=Ee((Dj,o2)=>{var qD=vt().TYPE,VD=qD.Ident;o2.exports={name:"Identifier",structure:{name:String},parse:function(){return{type:"Identifier",loc:this.getLocation(this.scanner.tokenStart,this.scanner.tokenEnd),name:this.consume(VD)}},generate:function(s){this.chunk(s.name)}}});var u2=Ee((Rj,c2)=>{var WD=vt().TYPE,GD=WD.Hash;c2.exports={name:"IdSelector",structure:{name:String},parse:function(){var s=this.scanner.tokenStart;return this.eat(GD),{type:"IdSelector",loc:this.getLocation(s,this.scanner.tokenStart),name:this.scanner.substrToCursor(s+1)}},generate:function(s){this.chunk("#"),this.chunk(s.name)}}});var f2=Ee((Bj,p2)=>{var dc=vt().TYPE,h2=dc.Ident,UD=dc.Number,ZD=dc.Dimension,$D=dc.LeftParenthesis,d2=dc.RightParenthesis,HD=dc.Colon,YD=dc.Delim;p2.exports={name:"MediaFeature",structure:{name:String,value:["Identifier","Number","Dimension","Ratio",null]},parse:function(){var s=this.scanner.tokenStart,o,p=null;if(this.eat($D),this.scanner.skipSC(),o=this.consume(h2),this.scanner.skipSC(),this.scanner.tokenType!==d2){switch(this.eat(HD),this.scanner.skipSC(),this.scanner.tokenType){case UD:this.lookupNonWSType(1)===YD?p=this.Ratio():p=this.Number();break;case ZD:p=this.Dimension();break;case h2:p=this.Identifier();break;default:this.error("Number, dimension, ratio or identifier is expected")}this.scanner.skipSC()}return this.eat(d2),{type:"MediaFeature",loc:this.getLocation(s,this.scanner.tokenStart),name:o,value:p}},generate:function(s){this.chunk("("),this.chunk(s.name),s.value!==null&&(this.chunk(":"),this.node(s.value)),this.chunk(")")}}});var g2=Ee((Fj,m2)=>{var _f=vt().TYPE,XD=_f.WhiteSpace,KD=_f.Comment,JD=_f.Ident,QD=_f.LeftParenthesis;m2.exports={name:"MediaQuery",structure:{children:[["Identifier","MediaFeature","WhiteSpace"]]},parse:function(){this.scanner.skipSC();var s=this.createList(),o=null,p=null;e:for(;!this.scanner.eof;){switch(this.scanner.tokenType){case KD:this.scanner.next();continue;case XD:p=this.WhiteSpace();continue;case JD:o=this.Identifier();break;case QD:o=this.MediaFeature();break;default:break e}p!==null&&(s.push(p),p=null),s.push(o)}return o===null&&this.error("Identifier or parenthesis is expected"),{type:"MediaQuery",loc:this.getLocationFromList(s),children:s}},generate:function(s){this.children(s)}}});var _2=Ee((jj,y2)=>{var eR=vt().TYPE.Comma;y2.exports={name:"MediaQueryList",structure:{children:[["MediaQuery"]]},parse:function(s){var o=this.createList();for(this.scanner.skipSC();!this.scanner.eof&&(o.push(this.MediaQuery(s)),this.scanner.tokenType===eR);)this.scanner.next();return{type:"MediaQueryList",loc:this.getLocationFromList(o),children:o}},generate:function(s){this.children(s,function(){this.chunk(",")})}}});var b2=Ee((Nj,v2)=>{v2.exports={name:"Nth",structure:{nth:["AnPlusB","Identifier"],selector:["SelectorList",null]},parse:function(s){this.scanner.skipSC();var o=this.scanner.tokenStart,p=o,d=null,f;return this.scanner.lookupValue(0,"odd")||this.scanner.lookupValue(0,"even")?f=this.Identifier():f=this.AnPlusB(),this.scanner.skipSC(),s&&this.scanner.lookupValue(0,"of")?(this.scanner.next(),d=this.SelectorList(),this.needPositions&&(p=this.getLastListNode(d.children).loc.end.offset)):this.needPositions&&(p=f.loc.end.offset),{type:"Nth",loc:this.getLocation(o,p),nth:f,selector:d}},generate:function(s){this.node(s.nth),s.selector!==null&&(this.chunk(" of "),this.node(s.selector))}}});var w2=Ee((qj,x2)=>{var tR=vt().TYPE.Number;x2.exports={name:"Number",structure:{value:String},parse:function(){return{type:"Number",loc:this.getLocation(this.scanner.tokenStart,this.scanner.tokenEnd),value:this.consume(tR)}},generate:function(s){this.chunk(s.value)}}});var T2=Ee((Vj,S2)=>{S2.exports={name:"Operator",structure:{value:String},parse:function(){var s=this.scanner.tokenStart;return this.scanner.next(),{type:"Operator",loc:this.getLocation(s,this.scanner.tokenStart),value:this.scanner.substrToCursor(s)}},generate:function(s){this.chunk(s.value)}}});var P2=Ee((Wj,k2)=>{var C2=vt().TYPE,iR=C2.LeftParenthesis,rR=C2.RightParenthesis;k2.exports={name:"Parentheses",structure:{children:[[]]},parse:function(s,o){var p=this.scanner.tokenStart,d=null;return this.eat(iR),d=s.call(this,o),this.scanner.eof||this.eat(rR),{type:"Parentheses",loc:this.getLocation(p,this.scanner.tokenStart),children:d}},generate:function(s){this.chunk("("),this.children(s),this.chunk(")")}}});var A2=Ee((Gj,E2)=>{var nR=vu().consumeNumber,aR=vt().TYPE,sR=aR.Percentage;E2.exports={name:"Percentage",structure:{value:String},parse:function(){var s=this.scanner.tokenStart,o=nR(this.scanner.source,s);return this.eat(sR),{type:"Percentage",loc:this.getLocation(s,this.scanner.tokenStart),value:this.scanner.source.substring(s,o)}},generate:function(s){this.chunk(s.value),this.chunk("%")}}});var I2=Ee((Uj,M2)=>{var vf=vt().TYPE,oR=vf.Ident,lR=vf.Function,cR=vf.Colon,uR=vf.RightParenthesis;M2.exports={name:"PseudoClassSelector",structure:{name:String,children:[["Raw"],null]},parse:function(){var s=this.scanner.tokenStart,o=null,p,d;return this.eat(cR),this.scanner.tokenType===lR?(p=this.consumeFunctionName(),d=p.toLowerCase(),this.pseudo.hasOwnProperty(d)?(this.scanner.skipSC(),o=this.pseudo[d].call(this),this.scanner.skipSC()):(o=this.createList(),o.push(this.Raw(this.scanner.tokenIndex,null,!1))),this.eat(uR)):p=this.consume(oR),{type:"PseudoClassSelector",loc:this.getLocation(s,this.scanner.tokenStart),name:p,children:o}},generate:function(s){this.chunk(":"),this.chunk(s.name),s.children!==null&&(this.chunk("("),this.children(s),this.chunk(")"))},walkContext:"function"}});var O2=Ee((Zj,L2)=>{var bf=vt().TYPE,hR=bf.Ident,dR=bf.Function,z2=bf.Colon,pR=bf.RightParenthesis;L2.exports={name:"PseudoElementSelector",structure:{name:String,children:[["Raw"],null]},parse:function(){var s=this.scanner.tokenStart,o=null,p,d;return this.eat(z2),this.eat(z2),this.scanner.tokenType===dR?(p=this.consumeFunctionName(),d=p.toLowerCase(),this.pseudo.hasOwnProperty(d)?(this.scanner.skipSC(),o=this.pseudo[d].call(this),this.scanner.skipSC()):(o=this.createList(),o.push(this.Raw(this.scanner.tokenIndex,null,!1))),this.eat(pR)):p=this.consume(hR),{type:"PseudoElementSelector",loc:this.getLocation(s,this.scanner.tokenStart),name:p,children:o}},generate:function(s){this.chunk("::"),this.chunk(s.name),s.children!==null&&(this.chunk("("),this.children(s),this.chunk(")"))},walkContext:"function"}});var F2=Ee(($j,B2)=>{var fR=vt().isDigit,R2=vt().TYPE,mR=R2.Number,gR=R2.Delim,yR=47,_R=46;function D2(){this.scanner.skipWS();for(var s=this.consume(mR),o=0;o<s.length;o++){var p=s.charCodeAt(o);!fR(p)&&p!==_R&&this.error("Unsigned number is expected",this.scanner.tokenStart-s.length+o)}return Number(s)===0&&this.error("Zero number is not allowed",this.scanner.tokenStart-s.length),s}B2.exports={name:"Ratio",structure:{left:String,right:String},parse:function(){var s=this.scanner.tokenStart,o=D2.call(this),p;return this.scanner.skipWS(),this.scanner.isDelim(yR)||this.error("Solidus is expected"),this.eat(gR),p=D2.call(this),{type:"Ratio",loc:this.getLocation(s,this.scanner.tokenStart),left:o,right:p}},generate:function(s){this.chunk(s.left),this.chunk("/"),this.chunk(s.right)}}});var q2=Ee((Hj,N2)=>{var vR=vt().TYPE,bR=kl().mode,xR=vR.LeftCurlyBracket;function j2(s){return this.Raw(s,bR.leftCurlyBracket,!0)}function wR(){var s=this.SelectorList();return s.type!=="Raw"&&this.scanner.eof===!1&&this.scanner.tokenType!==xR&&this.error(),s}N2.exports={name:"Rule",structure:{prelude:["SelectorList","Raw"],block:["Block"]},parse:function(){var s=this.scanner.tokenIndex,o=this.scanner.tokenStart,p,d;return this.parseRulePrelude?p=this.parseWithFallback(wR,j2):p=j2.call(this,s),d=this.Block(!0),{type:"Rule",loc:this.getLocation(o,this.scanner.tokenStart),prelude:p,block:d}},generate:function(s){this.node(s.prelude),this.node(s.block)},walkContext:"rule"}});var W2=Ee((Yj,V2)=>{V2.exports={name:"Selector",structure:{children:[["TypeSelector","IdSelector","ClassSelector","AttributeSelector","PseudoClassSelector","PseudoElementSelector","Combinator","WhiteSpace"]]},parse:function(){var s=this.readSequence(this.scope.Selector);return this.getFirstListNode(s)===null&&this.error("Selector is expected"),{type:"Selector",loc:this.getLocationFromList(s),children:s}},generate:function(s){this.children(s)}}});var U2=Ee((Xj,G2)=>{var SR=vt().TYPE,TR=SR.Comma;G2.exports={name:"SelectorList",structure:{children:[["Selector","Raw"]]},parse:function(){for(var s=this.createList();!this.scanner.eof;){if(s.push(this.Selector()),this.scanner.tokenType===TR){this.scanner.next();continue}break}return{type:"SelectorList",loc:this.getLocationFromList(s),children:s}},generate:function(s){this.children(s,function(){this.chunk(",")})},walkContext:"selector"}});var $2=Ee((Kj,Z2)=>{var CR=vt().TYPE.String;Z2.exports={name:"String",structure:{value:String},parse:function(){return{type:"String",loc:this.getLocation(this.scanner.tokenStart,this.scanner.tokenEnd),value:this.consume(CR)}},generate:function(s){this.chunk(s.value)}}});var X2=Ee((Jj,Y2)=>{var hd=vt().TYPE,kR=hd.WhiteSpace,PR=hd.Comment,ER=hd.AtKeyword,AR=hd.CDO,MR=hd.CDC,IR=33;function H2(s){return this.Raw(s,null,!1)}Y2.exports={name:"StyleSheet",structure:{children:[["Comment","CDO","CDC","Atrule","Rule","Raw"]]},parse:function(){for(var s=this.scanner.tokenStart,o=this.createList(),p;!this.scanner.eof;){switch(this.scanner.tokenType){case kR:this.scanner.next();continue;case PR:if(this.scanner.source.charCodeAt(this.scanner.tokenStart+2)!==IR){this.scanner.next();continue}p=this.Comment();break;case AR:p=this.CDO();break;case MR:p=this.CDC();break;case ER:p=this.parseWithFallback(this.Atrule,H2);break;default:p=this.parseWithFallback(this.Rule,H2)}o.push(p)}return{type:"StyleSheet",loc:this.getLocation(s,this.scanner.tokenStart),children:o}},generate:function(s){this.children(s)},walkContext:"stylesheet"}});var Q2=Ee((Qj,J2)=>{var zR=vt().TYPE,LR=zR.Ident,OR=42,K2=124;function by(){this.scanner.tokenType!==LR&&this.scanner.isDelim(OR)===!1&&this.error("Identifier or asterisk is expected"),this.scanner.next()}J2.exports={name:"TypeSelector",structure:{name:String},parse:function(){var s=this.scanner.tokenStart;return this.scanner.isDelim(K2)?(this.scanner.next(),by.call(this)):(by.call(this),this.scanner.isDelim(K2)&&(this.scanner.next(),by.call(this))),{type:"TypeSelector",loc:this.getLocation(s,this.scanner.tokenStart),name:this.scanner.substrToCursor(s)}},generate:function(s){this.chunk(s.name)}}});var aT=Ee((e4,nT)=>{var DR=vt().isHexDigit,eT=vt().cmpChar,Sy=vt().TYPE,RR=vt().NAME,BR=Sy.Ident,tT=Sy.Number,iT=Sy.Dimension,wf=43,rT=45,wy=63,FR=117;function dd(s,o){for(var p=this.scanner.tokenStart+s,d=0;p<this.scanner.tokenEnd;p++){var f=this.scanner.source.charCodeAt(p);if(f===rT&&o&&d!==0)return dd.call(this,s+d+1,!1)===0&&this.error(),-1;DR(f)||this.error(o&&d!==0?"HyphenMinus"+(d<6?" or hex digit":"")+" is expected":d<6?"Hex digit is expected":"Unexpected input",p),++d>6&&this.error("Too many hex digits",p)}return this.scanner.next(),d}function xf(s){for(var o=0;this.scanner.isDelim(wy);)++o>s&&this.error("Too many question marks"),this.scanner.next()}function xy(s){this.scanner.source.charCodeAt(this.scanner.tokenStart)!==s&&this.error(RR[s]+" is expected")}function jR(){var s=0;if(this.scanner.isDelim(wf)){if(this.scanner.next(),this.scanner.tokenType===BR){s=dd.call(this,0,!0),s>0&&xf.call(this,6-s);return}if(this.scanner.isDelim(wy)){this.scanner.next(),xf.call(this,5);return}this.error("Hex digit or question mark is expected");return}if(this.scanner.tokenType===tT){if(xy.call(this,wf),s=dd.call(this,1,!0),this.scanner.isDelim(wy)){xf.call(this,6-s);return}if(this.scanner.tokenType===iT||this.scanner.tokenType===tT){xy.call(this,rT),dd.call(this,1,!1);return}return}if(this.scanner.tokenType===iT){xy.call(this,wf),s=dd.call(this,1,!0),s>0&&xf.call(this,6-s);return}this.error()}nT.exports={name:"UnicodeRange",structure:{value:String},parse:function(){var s=this.scanner.tokenStart;return eT(this.scanner.source,s,FR)||this.error("U is expected"),eT(this.scanner.source,s+1,wf)||this.error("Plus sign is expected"),this.scanner.next(),jR.call(this),{type:"UnicodeRange",loc:this.getLocation(s,this.scanner.tokenStart),value:this.scanner.substrToCursor(s)}},generate:function(s){this.chunk(s.value)}}});var uT=Ee((t4,cT)=>{var sT=vt().isWhiteSpace,NR=vt().cmpStr,Ty=vt().TYPE,oT=Ty.Function,lT=Ty.Url,qR=Ty.RightParenthesis;cT.exports={name:"Url",structure:{value:["String","Raw"]},parse:function(){var s=this.scanner.tokenStart,o;switch(this.scanner.tokenType){case lT:for(var p=s+4,d=this.scanner.tokenEnd-1;p<d&&sT(this.scanner.source.charCodeAt(p));)p++;for(;p<d&&sT(this.scanner.source.charCodeAt(d-1));)d--;o={type:"Raw",loc:this.getLocation(p,d),value:this.scanner.source.substring(p,d)},this.eat(lT);break;case oT:NR(this.scanner.source,this.scanner.tokenStart,this.scanner.tokenEnd,"url(")||this.error("Function name must be `url`"),this.eat(oT),this.scanner.skipSC(),o=this.String(),this.scanner.skipSC(),this.eat(qR);break;default:this.error("Url or Function is expected")}return{type:"Url",loc:this.getLocation(s,this.scanner.tokenStart),value:o}},generate:function(s){this.chunk("url"),this.chunk("("),this.node(s.value),this.chunk(")")}}});var dT=Ee((i4,hT)=>{hT.exports={name:"Value",structure:{children:[[]]},parse:function(){var s=this.scanner.tokenStart,o=this.readSequence(this.scope.Value);return{type:"Value",loc:this.getLocation(s,this.scanner.tokenStart),children:o}},generate:function(s){this.children(s)}}});var fT=Ee((r4,pT)=>{var VR=vt().TYPE.WhiteSpace,WR=Object.freeze({type:"WhiteSpace",loc:null,value:" "});pT.exports={name:"WhiteSpace",structure:{value:String},parse:function(){return this.eat(VR),WR},generate:function(s){this.chunk(s.value)}}});var Sf=Ee((n4,mT)=>{mT.exports={AnPlusB:lS(),Atrule:gS(),AtrulePrelude:vS(),AttributeSelector:SS(),Block:AS(),Brackets:zS(),CDC:OS(),CDO:RS(),ClassSelector:FS(),Combinator:qS(),Comment:WS(),Declaration:JS(),DeclarationList:e2(),Dimension:i2(),Function:n2(),Hash:s2(),Identifier:l2(),IdSelector:u2(),MediaFeature:f2(),MediaQuery:g2(),MediaQueryList:_2(),Nth:b2(),Number:w2(),Operator:T2(),Parentheses:P2(),Percentage:A2(),PseudoClassSelector:I2(),PseudoElementSelector:O2(),Ratio:F2(),Raw:kl(),Rule:q2(),Selector:W2(),SelectorList:U2(),String:$2(),StyleSheet:X2(),TypeSelector:Q2(),UnicodeRange:aT(),Url:uT(),Value:dT(),WhiteSpace:fT()}});var yT=Ee((a4,gT)=>{var Cy=iS();gT.exports={generic:!0,types:Cy.types,atrules:Cy.atrules,properties:Cy.properties,node:Sf()}});var ky=Ee((s4,bT)=>{var _T=vt().cmpChar,GR=vt().cmpStr,Wa=vt().TYPE,UR=Wa.Ident,ZR=Wa.String,$R=Wa.Number,HR=Wa.Function,YR=Wa.Url,XR=Wa.Hash,KR=Wa.Dimension,JR=Wa.Percentage,QR=Wa.LeftParenthesis,eB=Wa.LeftSquareBracket,tB=Wa.Comma,iB=Wa.Delim,rB=35,nB=42,vT=43,aB=45,sB=47,oB=117;bT.exports=function(o){switch(this.scanner.tokenType){case XR:return this.Hash();case tB:return o.space=null,o.ignoreWSAfter=!0,this.Operator();case QR:return this.Parentheses(this.readSequence,o.recognizer);case eB:return this.Brackets(this.readSequence,o.recognizer);case ZR:return this.String();case KR:return this.Dimension();case JR:return this.Percentage();case $R:return this.Number();case HR:return GR(this.scanner.source,this.scanner.tokenStart,this.scanner.tokenEnd,"url(")?this.Url():this.Function(this.readSequence,o.recognizer);case YR:return this.Url();case UR:return _T(this.scanner.source,this.scanner.tokenStart,oB)&&_T(this.scanner.source,this.scanner.tokenStart+1,vT)?this.UnicodeRange():this.Identifier();case iB:var p=this.scanner.source.charCodeAt(this.scanner.tokenStart);if(p===sB||p===nB||p===vT||p===aB)return this.Operator();p===rB&&this.error("Hex or identifier is expected",this.scanner.tokenStart+1);break}}});var wT=Ee((o4,xT)=>{xT.exports={getNode:ky()}});var kT=Ee((l4,CT)=>{var Pl=vt().TYPE,lB=Pl.Delim,cB=Pl.Ident,uB=Pl.Dimension,hB=Pl.Percentage,dB=Pl.Number,pB=Pl.Hash,ST=Pl.Colon,fB=Pl.LeftSquareBracket,mB=35,gB=42,yB=43,_B=47,TT=46,vB=62,bB=124,xB=126;function wB(s){switch(this.scanner.tokenType){case fB:return this.AttributeSelector();case pB:return this.IdSelector();case ST:return this.scanner.lookupType(1)===ST?this.PseudoElementSelector():this.PseudoClassSelector();case cB:return this.TypeSelector();case dB:case hB:return this.Percentage();case uB:this.scanner.source.charCodeAt(this.scanner.tokenStart)===TT&&this.error("Identifier is expected",this.scanner.tokenStart+1);break;case lB:var o=this.scanner.source.charCodeAt(this.scanner.tokenStart);switch(o){case yB:case vB:case xB:return s.space=null,s.ignoreWSAfter=!0,this.Combinator();case _B:return this.Combinator();case TT:return this.ClassSelector();case gB:case bB:return this.TypeSelector();case mB:return this.IdSelector()}break}}CT.exports={getNode:wB}});var ET=Ee((c4,PT)=>{PT.exports=function(){return this.createSingleNodeList(this.Raw(this.scanner.tokenIndex,null,!1))}});var IT=Ee((u4,MT)=>{var AT=vt().TYPE,SB=kl().mode,TB=AT.Comma,CB=AT.WhiteSpace;MT.exports=function(){var s=this.createList();if(this.scanner.skipSC(),s.push(this.Identifier()),this.scanner.skipSC(),this.scanner.tokenType===TB){s.push(this.Operator());let o=this.scanner.tokenIndex,p=this.parseCustomProperty?this.Value(null):this.Raw(this.scanner.tokenIndex,SB.exclamationMarkOrSemicolon,!1);if(p.type==="Value"&&p.children.isEmpty()){for(let d=o-this.scanner.tokenIndex;d<=0;d++)if(this.scanner.lookupType(d)===CB){p.children.appendData({type:"WhiteSpace",loc:null,value:" "});break}}s.push(p)}return s}});var LT=Ee((h4,zT)=>{zT.exports={getNode:ky(),expression:ET(),var:IT()}});var DT=Ee((d4,OT)=>{OT.exports={AtrulePrelude:wT(),Selector:kT(),Value:LT()}});var BT=Ee((p4,RT)=>{RT.exports={parse:{prelude:null,block:function(){return this.Block(!0)}}}});var jT=Ee((f4,FT)=>{var pd=vt().TYPE,kB=pd.String,PB=pd.Ident,EB=pd.Url,AB=pd.Function,MB=pd.LeftParenthesis;FT.exports={parse:{prelude:function(){var s=this.createList();switch(this.scanner.skipSC(),this.scanner.tokenType){case kB:s.push(this.String());break;case EB:case AB:s.push(this.Url());break;default:this.error("String or url() is expected")}return(this.lookupNonWSType(0)===PB||this.lookupNonWSType(0)===MB)&&(s.push(this.WhiteSpace()),s.push(this.MediaQueryList())),s},block:null}}});var qT=Ee((m4,NT)=>{NT.exports={parse:{prelude:function(){return this.createSingleNodeList(this.MediaQueryList())},block:function(){return this.Block(!1)}}}});var WT=Ee((g4,VT)=>{VT.exports={parse:{prelude:function(){return this.createSingleNodeList(this.SelectorList())},block:function(){return this.Block(!0)}}}});var $T=Ee((y4,ZT)=>{var Lu=vt().TYPE,IB=Lu.WhiteSpace,zB=Lu.Comment,GT=Lu.Ident,LB=Lu.Function,OB=Lu.Colon,DB=Lu.LeftParenthesis;function RB(){return this.createSingleNodeList(this.Raw(this.scanner.tokenIndex,null,!1))}function BB(){return this.scanner.skipSC(),this.scanner.tokenType===GT&&this.lookupNonWSType(1)===OB?this.createSingleNodeList(this.Declaration()):UT.call(this)}function UT(){var s=this.createList(),o=null,p;this.scanner.skipSC();e:for(;!this.scanner.eof;){switch(this.scanner.tokenType){case IB:o=this.WhiteSpace();continue;case zB:this.scanner.next();continue;case LB:p=this.Function(RB,this.scope.AtrulePrelude);break;case GT:p=this.Identifier();break;case DB:p=this.Parentheses(BB,this.scope.AtrulePrelude);break;default:break e}o!==null&&(s.push(o),o=null),s.push(p)}return s}ZT.exports={parse:{prelude:function(){var s=UT.call(this);return this.getFirstListNode(s)===null&&this.error("Condition is expected"),s},block:function(){return this.Block(!1)}}}});var YT=Ee((_4,HT)=>{HT.exports={"font-face":BT(),import:jT(),media:qT(),page:WT(),supports:$T()}});var KT=Ee((v4,XT)=>{XT.exports={parse:function(){return this.createSingleNodeList(this.Identifier())}}});var QT=Ee((b4,JT)=>{JT.exports={parse:function(){return this.createSingleNodeList(this.SelectorList())}}});var tC=Ee((x4,eC)=>{eC.exports={parse:function(){return this.createSingleNodeList(this.Identifier())}}});var Py=Ee((w4,iC)=>{iC.exports={parse:function(){return this.createSingleNodeList(this.SelectorList())}}});var nC=Ee((S4,rC)=>{rC.exports=Py()});var sC=Ee((T4,aC)=>{aC.exports=Py()});var Ey=Ee((C4,oC)=>{var FB=!0;oC.exports={parse:function(){return this.createSingleNodeList(this.Nth(FB))}}});var cC=Ee((k4,lC)=>{lC.exports=Ey()});var hC=Ee((P4,uC)=>{uC.exports=Ey()});var Ay=Ee((E4,dC)=>{var jB=!1;dC.exports={parse:function(){return this.createSingleNodeList(this.Nth(jB))}}});var fC=Ee((A4,pC)=>{pC.exports=Ay()});var gC=Ee((M4,mC)=>{mC.exports=Ay()});var _C=Ee((I4,yC)=>{yC.exports={parse:function(){return this.createSingleNodeList(this.Selector())}}});var bC=Ee((z4,vC)=>{vC.exports={dir:KT(),has:QT(),lang:tC(),matches:nC(),not:sC(),"nth-child":cC(),"nth-last-child":hC(),"nth-last-of-type":fC(),"nth-of-type":gC(),slotted:_C()}});var wC=Ee((L4,xC)=>{xC.exports={parseContext:{default:"StyleSheet",stylesheet:"StyleSheet",atrule:"Atrule",atrulePrelude:function(s){return this.AtrulePrelude(s.atrule?String(s.atrule):null)},mediaQueryList:"MediaQueryList",mediaQuery:"MediaQuery",rule:"Rule",selectorList:"SelectorList",selector:"Selector",block:function(){return this.Block(!0)},declarationList:"DeclarationList",declaration:"Declaration",value:"Value"},scope:DT(),atrule:YT(),pseudo:bC(),node:Sf()}});var TC=Ee((O4,SC)=>{SC.exports={node:Sf()}});var CC=Ee((D4,NB)=>{NB.exports={name:"css-tree",version:"1.1.3",description:"A tool set for CSS: fast detailed parser (CSS \u2192 AST), walker (AST traversal), generator (AST \u2192 CSS) and lexer (validation and matching) based on specs and browser implementations",author:"Roman Dvornov <rdvornov@gmail.com> (https://github.com/lahmatiy)",license:"MIT",repository:"csstree/csstree",keywords:["css","ast","tokenizer","parser","walker","lexer","generator","utils","syntax","validation"],main:"lib/index.js",unpkg:"dist/csstree.min.js",jsdelivr:"dist/csstree.min.js",scripts:{build:"rollup --config",lint:"eslint data lib scripts test && node scripts/review-syntax-patch --lint && node scripts/update-docs --lint","lint-and-test":"npm run lint && npm test","update:docs":"node scripts/update-docs","review:syntax-patch":"node scripts/review-syntax-patch",test:"mocha --reporter progress",coverage:"nyc npm test",travis:"nyc npm run lint-and-test && npm run coveralls",coveralls:"nyc report --reporter=text-lcov | coveralls",prepublishOnly:"npm run build",hydrogen:"node --trace-hydrogen --trace-phase=Z --trace-deopt --code-comments --hydrogen-track-positions --redirect-code-traces --redirect-code-traces-to=code.asm --trace_hydrogen_file=code.cfg --print-opt-code bin/parse --stat -o /dev/null"},dependencies:{"mdn-data":"2.0.14","source-map":"^0.6.1"},devDependencies:{"@rollup/plugin-commonjs":"^11.0.2","@rollup/plugin-json":"^4.0.2","@rollup/plugin-node-resolve":"^7.1.1",coveralls:"^3.0.9",eslint:"^6.8.0","json-to-ast":"^2.1.0",mocha:"^6.2.3",nyc:"^14.1.1",rollup:"^1.32.1","rollup-plugin-terser":"^5.3.0"},engines:{node:">=8.0.0"},files:["data","dist","lib"]}});var kC=Ee((R4,My)=>{function qB(){for(var s={},o=0;o<arguments.length;o++){var p=arguments[o];for(var d in p)s[d]=p[d]}return s}My.exports=Hw().create(qB(yT(),wC(),TC()));My.exports.version=CC().version});var Cn=Ee((B4,PC)=>{PC.exports=kC()});var rk=Ee(gd=>{var VB=/(\[[^\]]+\])/g,WB=/(#[^\s\+>~\.\[:]+)/g,GB=/(\.[^\s\+>~\.\[:]+)/g,UB=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/g,ZB=/(:[^\s\+>~\.\[:]+)/g,$B=/([^\s\+>~\.\[:]+)/g,HB=/:not\(([^\)]*)\)/g,YB=/\{[^]*/gm,XB=/[\*\s\+>~]/g,KB=/[#\.]/g,Du=function(s,o,p,d){var f=d.match(s);if(f)for(var a=0;a<f.length;a++)p[o]++,d=d.replace(f[a]," ");return d},JB=function(s){var o=s.indexOf(",");o!==-1&&(s=s.substring(0,o));var p={a:0,b:0,c:0};return s=s.replace(HB," $1 "),s=s.replace(YB," "),s=Du(VB,"b",p,s),s=Du(WB,"a",p,s),s=Du(GB,"b",p,s),s=Du(UB,"c",p,s),s=Du(ZB,"b",p,s),s=s.replace(XB," "),s=s.replace(KB," "),Du($B,"c",p,s),p.a*100+p.b*10+p.c*1},tk={};gd.calculateSpecificity=function(s){var o=tk[s];return o===void 0&&(o=JB(s),tk[s]=o),o};var ik={},r_=null;gd.isSelectorValid=function(s){var o=ik[s];if(o===void 0){r_==null&&(r_=document.createElement("div"));try{r_.querySelector(s),o=!0}catch{o=!1}ik[s]=o}return o};gd.validateSelector=function(s){if(!gd.isSelectorValid(s)){var o=new SyntaxError(s+" is not a valid selector");throw o.code="EBADSELECTOR",o}}});var ck=Ee((v6,lk)=>{"use strict";lk.exports=function(){var s=Array.from,o,p;return typeof s!="function"?!1:(o=["raz","dwa"],p=s(o),!!(p&&p!==o&&p[1]==="dwa"))}});var hk=Ee((b6,uk)=>{"use strict";uk.exports=function(){return typeof globalThis!="object"||!globalThis?!1:globalThis.Array===Array}});var fk=Ee((x6,pk)=>{var dk=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};pk.exports=(function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return dk()}try{return __global__||dk()}finally{delete Object.prototype.__global__}})()});var yd=Ee((w6,mk)=>{"use strict";mk.exports=hk()()?globalThis:fk()});var yk=Ee((S6,gk)=>{"use strict";var QB=yd(),a_={object:!0,symbol:!0};gk.exports=function(){var s=QB.Symbol,o;if(typeof s!="function")return!1;o=s("test symbol");try{String(o)}catch{return!1}return!(!a_[typeof s.iterator]||!a_[typeof s.toPrimitive]||!a_[typeof s.toStringTag])}});var vk=Ee((T6,_k)=>{"use strict";_k.exports=function(s){return s?typeof s=="symbol"?!0:!s.constructor||s.constructor.name!=="Symbol"?!1:s[s.constructor.toStringTag]==="Symbol":!1}});var s_=Ee((C6,bk)=>{"use strict";var e5=vk();bk.exports=function(s){if(!e5(s))throw new TypeError(s+" is not a symbol");return s}});var Ck=Ee((k6,Tk)=>{"use strict";var xk=oc(),t5=Object.create,wk=Object.defineProperty,i5=Object.prototype,Sk=t5(null);Tk.exports=function(s){for(var o=0,p,d;Sk[s+(o||"")];)++o;return s+=o||"",Sk[s]=!0,p="@@"+s,wk(i5,p,xk.gs(null,function(f){d||(d=!0,wk(this,p,xk(f)),d=!1)})),p}});var Pk=Ee((P6,kk)=>{"use strict";var vs=oc(),fr=yd().Symbol;kk.exports=function(s){return Object.defineProperties(s,{hasInstance:vs("",fr&&fr.hasInstance||s("hasInstance")),isConcatSpreadable:vs("",fr&&fr.isConcatSpreadable||s("isConcatSpreadable")),iterator:vs("",fr&&fr.iterator||s("iterator")),match:vs("",fr&&fr.match||s("match")),replace:vs("",fr&&fr.replace||s("replace")),search:vs("",fr&&fr.search||s("search")),species:vs("",fr&&fr.species||s("species")),split:vs("",fr&&fr.split||s("split")),toPrimitive:vs("",fr&&fr.toPrimitive||s("toPrimitive")),toStringTag:vs("",fr&&fr.toStringTag||s("toStringTag")),unscopables:vs("",fr&&fr.unscopables||s("unscopables"))})}});var Mk=Ee((E6,Ak)=>{"use strict";var Ek=oc(),r5=s_(),_d=Object.create(null);Ak.exports=function(s){return Object.defineProperties(s,{for:Ek(function(o){return _d[o]?_d[o]:_d[o]=s(String(o))}),keyFor:Ek(function(o){var p;r5(o);for(p in _d)if(_d[p]===o)return p})})}});var Lk=Ee((A6,zk)=>{"use strict";var Ks=oc(),o_=s_(),Ef=yd().Symbol,n5=Ck(),a5=Pk(),s5=Mk(),o5=Object.create,l_=Object.defineProperties,Af=Object.defineProperty,kn,Ru,Ik;if(typeof Ef=="function")try{String(Ef()),Ik=!0}catch{}else Ef=null;Ru=function(o){if(this instanceof Ru)throw new TypeError("Symbol is not a constructor");return kn(o)};zk.exports=kn=function s(o){var p;if(this instanceof s)throw new TypeError("Symbol is not a constructor");return Ik?Ef(o):(p=o5(Ru.prototype),o=o===void 0?"":String(o),l_(p,{__description__:Ks("",o),__name__:Ks("",n5(o))}))};a5(kn);s5(kn);l_(Ru.prototype,{constructor:Ks(kn),toString:Ks("",function(){return this.__name__})});l_(kn.prototype,{toString:Ks(function(){return"Symbol ("+o_(this).__description__+")"}),valueOf:Ks(function(){return o_(this)})});Af(kn.prototype,kn.toPrimitive,Ks("",function(){var s=o_(this);return typeof s=="symbol"?s:s.toString()}));Af(kn.prototype,kn.toStringTag,Ks("c","Symbol"));Af(Ru.prototype,kn.toStringTag,Ks("c",kn.prototype[kn.toStringTag]));Af(Ru.prototype,kn.toPrimitive,Ks("c",kn.prototype[kn.toPrimitive]))});var Dk=Ee((M6,Ok)=>{"use strict";Ok.exports=yk()()?yd().Symbol:Lk()});var Fk=Ee((I6,Bk)=>{"use strict";var Rk=Object.prototype.toString,l5=Rk.call((function(){return arguments})());Bk.exports=function(s){return Rk.call(s)===l5}});var Nk=Ee((z6,jk)=>{"use strict";var c5=Object.prototype.toString,u5=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);jk.exports=function(s){return typeof s=="function"&&u5(c5.call(s))}});var Vk=Ee((L6,qk)=>{"use strict";qk.exports=function(){var s=Math.sign;return typeof s!="function"?!1:s(10)===1&&s(-20)===-1}});var Gk=Ee((O6,Wk)=>{"use strict";Wk.exports=function(s){return s=Number(s),isNaN(s)||s===0?s:s>0?1:-1}});var Zk=Ee((D6,Uk)=>{"use strict";Uk.exports=Vk()()?Math.sign:Gk()});var Hk=Ee((R6,$k)=>{"use strict";var h5=Zk(),d5=Math.abs,p5=Math.floor;$k.exports=function(s){return isNaN(s)?0:(s=Number(s),s===0||!isFinite(s)?s:h5(s)*p5(d5(s)))}});var c_=Ee((B6,Yk)=>{"use strict";var f5=Hk(),m5=Math.max;Yk.exports=function(s){return m5(0,f5(s))}});var Jk=Ee((F6,Kk)=>{"use strict";var Xk=Object.prototype.toString,g5=Xk.call("");Kk.exports=function(s){return typeof s=="string"||s&&typeof s=="object"&&(s instanceof String||Xk.call(s)===g5)||!1}});var iP=Ee((j6,tP)=>{"use strict";var y5=Dk().iterator,_5=Fk(),v5=Nk(),b5=c_(),Qk=Hm(),x5=kp(),w5=pu(),S5=Jk(),eP=Array.isArray,u_=Function.prototype.call,pc={configurable:!0,enumerable:!0,writable:!0,value:null},h_=Object.defineProperty;tP.exports=function(s){var o=arguments[1],p=arguments[2],d,f,a,T,M,B,G,J,ie,$;if(s=Object(x5(s)),w5(o)&&Qk(o),!this||this===Array||!v5(this)){if(!o){if(_5(s))return M=s.length,M!==1?Array.apply(null,s):(T=new Array(1),T[0]=s[0],T);if(eP(s)){for(T=new Array(M=s.length),f=0;f<M;++f)T[f]=s[f];return T}}T=[]}else d=this;if(!eP(s)){if((ie=s[y5])!==void 0){for(G=Qk(ie).call(s),d&&(T=new d),J=G.next(),f=0;!J.done;)$=o?u_.call(o,p,J.value,f):J.value,d?(pc.value=$,h_(T,f,pc)):T[f]=$,J=G.next(),++f;M=f}else if(S5(s)){for(M=s.length,d&&(T=new d),f=0,a=0;f<M;++f)$=s[f],f+1<M&&(B=$.charCodeAt(0),B>=55296&&B<=56319&&($+=s[++f])),$=o?u_.call(o,p,$,a):$,d?(pc.value=$,h_(T,a,pc)):T[a]=$,++a;M=a}}if(M===void 0)for(M=b5(s.length),d&&(T=new d(M)),f=0;f<M;++f)$=o?u_.call(o,p,s[f],f):s[f],d?(pc.value=$,h_(T,f,pc)):T[f]=$;return d&&(pc.value=null,T.length=M),T}});var nP=Ee((N6,rP)=>{"use strict";rP.exports=ck()()?Array.from:iP()});var sP=Ee((q6,aP)=>{"use strict";aP.exports=function(){var s=Number.isNaN;return typeof s!="function"?!1:!s({})&&s(NaN)&&!s(34)}});var lP=Ee((V6,oP)=>{"use strict";oP.exports=function(s){return s!==s}});var uP=Ee((W6,cP)=>{"use strict";cP.exports=sP()()?Number.isNaN:lP()});var mP=Ee((G6,fP)=>{"use strict";var hP=uP(),dP=c_(),T5=kp(),C5=Array.prototype.indexOf,k5=Object.prototype.hasOwnProperty,P5=Math.abs,pP=Math.floor;fP.exports=function(s){var o,p,d,f;if(!hP(s))return C5.apply(this,arguments);for(p=dP(T5(this).length),d=arguments[1],isNaN(d)?d=0:d>=0?d=pP(d):d=dP(this.length)-pP(P5(d)),o=d;o<p;++o)if(k5.call(this,o)&&(f=this[o],hP(f)))return o;return-1}});var yP=Ee((U6,gP)=>{"use strict";var E5=mP(),A5=Array.prototype.forEach,M5=Array.prototype.splice;gP.exports=function(s){A5.call(arguments,function(o){var p=E5.call(this,o);p!==-1&&M5.call(this,p,1)},this)}});var vP=Ee((Z6,_P)=>{"use strict";var I5=pu(),z5={function:!0,object:!0};_P.exports=function(s){return I5(s)&&z5[typeof s]||!1}});var xP=Ee(($6,bP)=>{"use strict";var L5=vP();bP.exports=function(s){if(!L5(s))throw new TypeError(s+" is not an Object");return s}});var PP=Ee((H6,kP)=>{"use strict";var O5=nP(),D5=yP(),wP=xP(),SP=oc(),TP=xl().methods.emit,CP=Object.defineProperty,R5=Object.prototype.hasOwnProperty,B5=Object.getOwnPropertyDescriptor;kP.exports=function(s,o){var p,d,f,a;return wP(s)&&wP(o),a=arguments[2],a===void 0&&(a="emit"),d={close:function(){D5.call(p,o)}},R5.call(s,"__eePipes__")?((p=s.__eePipes__).push(o),d):(CP(s,"__eePipes__",SP("c",p=[o])),f=B5(s,a),f?(delete f.get,delete f.set):f=SP("c",void 0),f.value=function(){var T,M,B=O5(p);for(TP.apply(this,arguments),T=0;M=B[T];++T)TP.apply(M,arguments)},CP(s,a,f),d)}});var m_=Ee((Lf,IP)=>{(function(s,o){typeof Lf=="object"&&typeof IP<"u"?o(Lf):typeof define=="function"&&define.amd?define(["exports"],o):(s=typeof globalThis<"u"?globalThis:s||self,o(s.leaflet={}))})(Lf,(function(s){"use strict";var o="1.9.4";function p(c){var v,C,I,q;for(C=1,I=arguments.length;C<I;C++){q=arguments[C];for(v in q)c[v]=q[v]}return c}var d=Object.create||(function(){function c(){}return function(v){return c.prototype=v,new c}})();function f(c,v){var C=Array.prototype.slice;if(c.bind)return c.bind.apply(c,C.call(arguments,1));var I=C.call(arguments,2);return function(){return c.apply(v,I.length?I.concat(C.call(arguments)):arguments)}}var a=0;function T(c){return"_leaflet_id"in c||(c._leaflet_id=++a),c._leaflet_id}function M(c,v,C){var I,q,Q,_e;return _e=function(){I=!1,q&&(Q.apply(C,q),q=!1)},Q=function(){I?q=arguments:(c.apply(C,arguments),setTimeout(_e,v),I=!0)},Q}function B(c,v,C){var I=v[1],q=v[0],Q=I-q;return c===I&&C?c:((c-q)%Q+Q)%Q+q}function G(){return!1}function J(c,v){if(v===!1)return c;var C=Math.pow(10,v===void 0?6:v);return Math.round(c*C)/C}function ie(c){return c.trim?c.trim():c.replace(/^\s+|\s+$/g,"")}function $(c){return ie(c).split(/\s+/)}function ae(c,v){Object.prototype.hasOwnProperty.call(c,"options")||(c.options=c.options?d(c.options):{});for(var C in v)c.options[C]=v[C];return c.options}function te(c,v,C){var I=[];for(var q in c)I.push(encodeURIComponent(C?q.toUpperCase():q)+"="+encodeURIComponent(c[q]));return(!v||v.indexOf("?")===-1?"?":"&")+I.join("&")}var Te=/\{ *([\w_ -]+) *\}/g;function We(c,v){return c.replace(Te,function(C,I){var q=v[I];if(q===void 0)throw new Error("No value provided for variable "+C);return typeof q=="function"&&(q=q(v)),q})}var xe=Array.isArray||function(c){return Object.prototype.toString.call(c)==="[object Array]"};function Ze(c,v){for(var C=0;C<c.length;C++)if(c[C]===v)return C;return-1}var dt="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function mt(c){return window["webkit"+c]||window["moz"+c]||window["ms"+c]}var Vt=0;function Bt(c){var v=+new Date,C=Math.max(0,16-(v-Vt));return Vt=v+C,window.setTimeout(c,C)}var je=window.requestAnimationFrame||mt("RequestAnimationFrame")||Bt,Je=window.cancelAnimationFrame||mt("CancelAnimationFrame")||mt("CancelRequestAnimationFrame")||function(c){window.clearTimeout(c)};function ot(c,v,C){if(C&&je===Bt)c.call(v);else return je.call(window,f(c,v))}function St(c){c&&Je.call(window,c)}var Ht={__proto__:null,extend:p,create:d,bind:f,get lastId(){return a},stamp:T,throttle:M,wrapNum:B,falseFn:G,formatNum:J,trim:ie,splitWords:$,setOptions:ae,getParamString:te,template:We,isArray:xe,indexOf:Ze,emptyImageUrl:dt,requestFn:je,cancelFn:Je,requestAnimFrame:ot,cancelAnimFrame:St};function Tt(){}Tt.extend=function(c){var v=function(){ae(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},C=v.__super__=this.prototype,I=d(C);I.constructor=v,v.prototype=I;for(var q in this)Object.prototype.hasOwnProperty.call(this,q)&&q!=="prototype"&&q!=="__super__"&&(v[q]=this[q]);return c.statics&&p(v,c.statics),c.includes&&(_i(c.includes),p.apply(null,[I].concat(c.includes))),p(I,c),delete I.statics,delete I.includes,I.options&&(I.options=C.options?d(C.options):{},p(I.options,c.options)),I._initHooks=[],I.callInitHooks=function(){if(!this._initHooksCalled){C.callInitHooks&&C.callInitHooks.call(this),this._initHooksCalled=!0;for(var Q=0,_e=I._initHooks.length;Q<_e;Q++)I._initHooks[Q].call(this)}},v},Tt.include=function(c){var v=this.prototype.options;return p(this.prototype,c),c.options&&(this.prototype.options=v,this.mergeOptions(c.options)),this},Tt.mergeOptions=function(c){return p(this.prototype.options,c),this},Tt.addInitHook=function(c){var v=Array.prototype.slice.call(arguments,1),C=typeof c=="function"?c:function(){this[c].apply(this,v)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(C),this};function _i(c){if(!(typeof L>"u"||!L||!L.Mixin)){c=xe(c)?c:[c];for(var v=0;v<c.length;v++)c[v]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ti={on:function(c,v,C){if(typeof c=="object")for(var I in c)this._on(I,c[I],v);else{c=$(c);for(var q=0,Q=c.length;q<Q;q++)this._on(c[q],v,C)}return this},off:function(c,v,C){if(!arguments.length)delete this._events;else if(typeof c=="object")for(var I in c)this._off(I,c[I],v);else{c=$(c);for(var q=arguments.length===1,Q=0,_e=c.length;Q<_e;Q++)q?this._off(c[Q]):this._off(c[Q],v,C)}return this},_on:function(c,v,C,I){if(typeof v!="function"){console.warn("wrong listener type: "+typeof v);return}if(this._listens(c,v,C)===!1){C===this&&(C=void 0);var q={fn:v,ctx:C};I&&(q.once=!0),this._events=this._events||{},this._events[c]=this._events[c]||[],this._events[c].push(q)}},_off:function(c,v,C){var I,q,Q;if(this._events&&(I=this._events[c],!!I)){if(arguments.length===1){if(this._firingCount)for(q=0,Q=I.length;q<Q;q++)I[q].fn=G;delete this._events[c];return}if(typeof v!="function"){console.warn("wrong listener type: "+typeof v);return}var _e=this._listens(c,v,C);if(_e!==!1){var Ae=I[_e];this._firingCount&&(Ae.fn=G,this._events[c]=I=I.slice()),I.splice(_e,1)}}},fire:function(c,v,C){if(!this.listens(c,C))return this;var I=p({},v,{type:c,target:this,sourceTarget:v&&v.sourceTarget||this});if(this._events){var q=this._events[c];if(q){this._firingCount=this._firingCount+1||1;for(var Q=0,_e=q.length;Q<_e;Q++){var Ae=q[Q],qe=Ae.fn;Ae.once&&this.off(c,qe,Ae.ctx),qe.call(Ae.ctx||this,I)}this._firingCount--}}return C&&this._propagateEvent(I),this},listens:function(c,v,C,I){typeof c!="string"&&console.warn('"string" type argument expected');var q=v;typeof v!="function"&&(I=!!v,q=void 0,C=void 0);var Q=this._events&&this._events[c];if(Q&&Q.length&&this._listens(c,q,C)!==!1)return!0;if(I){for(var _e in this._eventParents)if(this._eventParents[_e].listens(c,v,C,I))return!0}return!1},_listens:function(c,v,C){if(!this._events)return!1;var I=this._events[c]||[];if(!v)return!!I.length;C===this&&(C=void 0);for(var q=0,Q=I.length;q<Q;q++)if(I[q].fn===v&&I[q].ctx===C)return q;return!1},once:function(c,v,C){if(typeof c=="object")for(var I in c)this._on(I,c[I],v,!0);else{c=$(c);for(var q=0,Q=c.length;q<Q;q++)this._on(c[q],v,C,!0)}return this},addEventParent:function(c){return this._eventParents=this._eventParents||{},this._eventParents[T(c)]=c,this},removeEventParent:function(c){return this._eventParents&&delete this._eventParents[T(c)],this},_propagateEvent:function(c){for(var v in this._eventParents)this._eventParents[v].fire(c.type,p({layer:c.target,propagatedFrom:c.target},c),!0)}};ti.addEventListener=ti.on,ti.removeEventListener=ti.clearAllEventListeners=ti.off,ti.addOneTimeEventListener=ti.once,ti.fireEvent=ti.fire,ti.hasEventListeners=ti.listens;var ii=Tt.extend(ti);function _t(c,v,C){this.x=C?Math.round(c):c,this.y=C?Math.round(v):v}var ei=Math.trunc||function(c){return c>0?Math.floor(c):Math.ceil(c)};_t.prototype={clone:function(){return new _t(this.x,this.y)},add:function(c){return this.clone()._add(kt(c))},_add:function(c){return this.x+=c.x,this.y+=c.y,this},subtract:function(c){return this.clone()._subtract(kt(c))},_subtract:function(c){return this.x-=c.x,this.y-=c.y,this},divideBy:function(c){return this.clone()._divideBy(c)},_divideBy:function(c){return this.x/=c,this.y/=c,this},multiplyBy:function(c){return this.clone()._multiplyBy(c)},_multiplyBy:function(c){return this.x*=c,this.y*=c,this},scaleBy:function(c){return new _t(this.x*c.x,this.y*c.y)},unscaleBy:function(c){return new _t(this.x/c.x,this.y/c.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ei(this.x),this.y=ei(this.y),this},distanceTo:function(c){c=kt(c);var v=c.x-this.x,C=c.y-this.y;return Math.sqrt(v*v+C*C)},equals:function(c){return c=kt(c),c.x===this.x&&c.y===this.y},contains:function(c){return c=kt(c),Math.abs(c.x)<=Math.abs(this.x)&&Math.abs(c.y)<=Math.abs(this.y)},toString:function(){return"Point("+J(this.x)+", "+J(this.y)+")"}};function kt(c,v,C){return c instanceof _t?c:xe(c)?new _t(c[0],c[1]):c==null?c:typeof c=="object"&&"x"in c&&"y"in c?new _t(c.x,c.y):new _t(c,v,C)}function ni(c,v){if(c)for(var C=v?[c,v]:c,I=0,q=C.length;I<q;I++)this.extend(C[I])}ni.prototype={extend:function(c){var v,C;if(!c)return this;if(c instanceof _t||typeof c[0]=="number"||"x"in c)v=C=kt(c);else if(c=Yi(c),v=c.min,C=c.max,!v||!C)return this;return!this.min&&!this.max?(this.min=v.clone(),this.max=C.clone()):(this.min.x=Math.min(v.x,this.min.x),this.max.x=Math.max(C.x,this.max.x),this.min.y=Math.min(v.y,this.min.y),this.max.y=Math.max(C.y,this.max.y)),this},getCenter:function(c){return kt((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,c)},getBottomLeft:function(){return kt(this.min.x,this.max.y)},getTopRight:function(){return kt(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(c){var v,C;return typeof c[0]=="number"||c instanceof _t?c=kt(c):c=Yi(c),c instanceof ni?(v=c.min,C=c.max):v=C=c,v.x>=this.min.x&&C.x<=this.max.x&&v.y>=this.min.y&&C.y<=this.max.y},intersects:function(c){c=Yi(c);var v=this.min,C=this.max,I=c.min,q=c.max,Q=q.x>=v.x&&I.x<=C.x,_e=q.y>=v.y&&I.y<=C.y;return Q&&_e},overlaps:function(c){c=Yi(c);var v=this.min,C=this.max,I=c.min,q=c.max,Q=q.x>v.x&&I.x<C.x,_e=q.y>v.y&&I.y<C.y;return Q&&_e},isValid:function(){return!!(this.min&&this.max)},pad:function(c){var v=this.min,C=this.max,I=Math.abs(v.x-C.x)*c,q=Math.abs(v.y-C.y)*c;return Yi(kt(v.x-I,v.y-q),kt(C.x+I,C.y+q))},equals:function(c){return c?(c=Yi(c),this.min.equals(c.getTopLeft())&&this.max.equals(c.getBottomRight())):!1}};function Yi(c,v){return!c||c instanceof ni?c:new ni(c,v)}function tr(c,v){if(c)for(var C=v?[c,v]:c,I=0,q=C.length;I<q;I++)this.extend(C[I])}tr.prototype={extend:function(c){var v=this._southWest,C=this._northEast,I,q;if(c instanceof qt)I=c,q=c;else if(c instanceof tr){if(I=c._southWest,q=c._northEast,!I||!q)return this}else return c?this.extend(Ft(c)||Ci(c)):this;return!v&&!C?(this._southWest=new qt(I.lat,I.lng),this._northEast=new qt(q.lat,q.lng)):(v.lat=Math.min(I.lat,v.lat),v.lng=Math.min(I.lng,v.lng),C.lat=Math.max(q.lat,C.lat),C.lng=Math.max(q.lng,C.lng)),this},pad:function(c){var v=this._southWest,C=this._northEast,I=Math.abs(v.lat-C.lat)*c,q=Math.abs(v.lng-C.lng)*c;return new tr(new qt(v.lat-I,v.lng-q),new qt(C.lat+I,C.lng+q))},getCenter:function(){return new qt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new qt(this.getNorth(),this.getWest())},getSouthEast:function(){return new qt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(c){typeof c[0]=="number"||c instanceof qt||"lat"in c?c=Ft(c):c=Ci(c);var v=this._southWest,C=this._northEast,I,q;return c instanceof tr?(I=c.getSouthWest(),q=c.getNorthEast()):I=q=c,I.lat>=v.lat&&q.lat<=C.lat&&I.lng>=v.lng&&q.lng<=C.lng},intersects:function(c){c=Ci(c);var v=this._southWest,C=this._northEast,I=c.getSouthWest(),q=c.getNorthEast(),Q=q.lat>=v.lat&&I.lat<=C.lat,_e=q.lng>=v.lng&&I.lng<=C.lng;return Q&&_e},overlaps:function(c){c=Ci(c);var v=this._southWest,C=this._northEast,I=c.getSouthWest(),q=c.getNorthEast(),Q=q.lat>v.lat&&I.lat<C.lat,_e=q.lng>v.lng&&I.lng<C.lng;return Q&&_e},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(c,v){return c?(c=Ci(c),this._southWest.equals(c.getSouthWest(),v)&&this._northEast.equals(c.getNorthEast(),v)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ci(c,v){return c instanceof tr?c:new tr(c,v)}function qt(c,v,C){if(isNaN(c)||isNaN(v))throw new Error("Invalid LatLng object: ("+c+", "+v+")");this.lat=+c,this.lng=+v,C!==void 0&&(this.alt=+C)}qt.prototype={equals:function(c,v){if(!c)return!1;c=Ft(c);var C=Math.max(Math.abs(this.lat-c.lat),Math.abs(this.lng-c.lng));return C<=(v===void 0?1e-9:v)},toString:function(c){return"LatLng("+J(this.lat,c)+", "+J(this.lng,c)+")"},distanceTo:function(c){return ji.distance(this,Ft(c))},wrap:function(){return ji.wrapLatLng(this)},toBounds:function(c){var v=180*c/40075017,C=v/Math.cos(Math.PI/180*this.lat);return Ci([this.lat-v,this.lng-C],[this.lat+v,this.lng+C])},clone:function(){return new qt(this.lat,this.lng,this.alt)}};function Ft(c,v,C){return c instanceof qt?c:xe(c)&&typeof c[0]!="object"?c.length===3?new qt(c[0],c[1],c[2]):c.length===2?new qt(c[0],c[1]):null:c==null?c:typeof c=="object"&&"lat"in c?new qt(c.lat,"lng"in c?c.lng:c.lon,c.alt):v===void 0?null:new qt(c,v,C)}var gr={latLngToPoint:function(c,v){var C=this.projection.project(c),I=this.scale(v);return this.transformation._transform(C,I)},pointToLatLng:function(c,v){var C=this.scale(v),I=this.transformation.untransform(c,C);return this.projection.unproject(I)},project:function(c){return this.projection.project(c)},unproject:function(c){return this.projection.unproject(c)},scale:function(c){return 256*Math.pow(2,c)},zoom:function(c){return Math.log(c/256)/Math.LN2},getProjectedBounds:function(c){if(this.infinite)return null;var v=this.projection.bounds,C=this.scale(c),I=this.transformation.transform(v.min,C),q=this.transformation.transform(v.max,C);return new ni(I,q)},infinite:!1,wrapLatLng:function(c){var v=this.wrapLng?B(c.lng,this.wrapLng,!0):c.lng,C=this.wrapLat?B(c.lat,this.wrapLat,!0):c.lat,I=c.alt;return new qt(C,v,I)},wrapLatLngBounds:function(c){var v=c.getCenter(),C=this.wrapLatLng(v),I=v.lat-C.lat,q=v.lng-C.lng;if(I===0&&q===0)return c;var Q=c.getSouthWest(),_e=c.getNorthEast(),Ae=new qt(Q.lat-I,Q.lng-q),qe=new qt(_e.lat-I,_e.lng-q);return new tr(Ae,qe)}},ji=p({},gr,{wrapLng:[-180,180],R:6371e3,distance:function(c,v){var C=Math.PI/180,I=c.lat*C,q=v.lat*C,Q=Math.sin((v.lat-c.lat)*C/2),_e=Math.sin((v.lng-c.lng)*C/2),Ae=Q*Q+Math.cos(I)*Math.cos(q)*_e*_e,qe=2*Math.atan2(Math.sqrt(Ae),Math.sqrt(1-Ae));return this.R*qe}}),Sa=6378137,nn={R:Sa,MAX_LATITUDE:85.0511287798,project:function(c){var v=Math.PI/180,C=this.MAX_LATITUDE,I=Math.max(Math.min(C,c.lat),-C),q=Math.sin(I*v);return new _t(this.R*c.lng*v,this.R*Math.log((1+q)/(1-q))/2)},unproject:function(c){var v=180/Math.PI;return new qt((2*Math.atan(Math.exp(c.y/this.R))-Math.PI/2)*v,c.x*v/this.R)},bounds:(function(){var c=Sa*Math.PI;return new ni([-c,-c],[c,c])})()};function Ga(c,v,C,I){if(xe(c)){this._a=c[0],this._b=c[1],this._c=c[2],this._d=c[3];return}this._a=c,this._b=v,this._c=C,this._d=I}Ga.prototype={transform:function(c,v){return this._transform(c.clone(),v)},_transform:function(c,v){return v=v||1,c.x=v*(this._a*c.x+this._b),c.y=v*(this._c*c.y+this._d),c},untransform:function(c,v){return v=v||1,new _t((c.x/v-this._b)/this._a,(c.y/v-this._d)/this._c)}};function Rr(c,v,C,I){return new Ga(c,v,C,I)}var Ua=p({},ji,{code:"EPSG:3857",projection:nn,transformation:(function(){var c=.5/(Math.PI*nn.R);return Rr(c,.5,-c,.5)})()}),cr=p({},Ua,{code:"EPSG:900913"});function an(c){return document.createElementNS("http://www.w3.org/2000/svg",c)}function Pn(c,v){var C="",I,q,Q,_e,Ae,qe;for(I=0,Q=c.length;I<Q;I++){for(Ae=c[I],q=0,_e=Ae.length;q<_e;q++)qe=Ae[q],C+=(q?"L":"M")+qe.x+" "+qe.y;C+=v?Re.svg?"z":"x":""}return C||"M0 0"}var Ei=document.documentElement.style,En="ActiveXObject"in window,Za=En&&!document.addEventListener,$a="msLaunchUri"in navigator&&!("documentMode"in document),Wn=Zr("webkit"),yn=Zr("android"),Ha=Zr("android 2")||Zr("android 3"),bs=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ur=yn&&Zr("Google")&&bs<537&&!("AudioNode"in window),ke=!!window.opera,Y=!$a&&Zr("chrome"),H=Zr("gecko")&&!Wn&&!ke&&!En,re=!Y&&Zr("safari"),ye=Zr("phantom"),ve="OTransition"in Ei,Me=navigator.platform.indexOf("Win")===0,Ce=En&&"transition"in Ei,we="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ha,Oe="MozPerspective"in Ei,Ke=!window.L_DISABLE_3D&&(Ce||we||Oe)&&!ve&&!ye,Ue=typeof orientation<"u"||Zr("mobile"),st=Ue&&Wn,ft=Ue&&we,Et=!window.PointerEvent&&window.MSPointerEvent,ui=!!(window.PointerEvent||Et),ai="ontouchstart"in window||!!window.TouchEvent,ze=!window.L_NO_TOUCH&&(ai||ui),vi=Ue&&ke,yr=Ue&&H,At=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,hi=(function(){var c=!1;try{var v=Object.defineProperty({},"passive",{get:function(){c=!0}});window.addEventListener("testPassiveEventSupport",G,v),window.removeEventListener("testPassiveEventSupport",G,v)}catch{}return c})(),_r=(function(){return!!document.createElement("canvas").getContext})(),bi=!!(document.createElementNS&&an("svg").createSVGRect),Ni=!!bi&&(function(){var c=document.createElement("div");return c.innerHTML="<svg/>",(c.firstChild&&c.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),xi=!bi&&(function(){try{var c=document.createElement("div");c.innerHTML='<v:shape adj="1"/>';var v=c.firstChild;return v.style.behavior="url(#default#VML)",v&&typeof v.adj=="object"}catch{return!1}})(),ir=navigator.platform.indexOf("Mac")===0,Qs=navigator.platform.indexOf("Linux")===0;function Zr(c){return navigator.userAgent.toLowerCase().indexOf(c)>=0}var Re={ie:En,ielt9:Za,edge:$a,webkit:Wn,android:yn,android23:Ha,androidStock:Ur,opera:ke,chrome:Y,gecko:H,safari:re,phantom:ye,opera12:ve,win:Me,ie3d:Ce,webkit3d:we,gecko3d:Oe,any3d:Ke,mobile:Ue,mobileWebkit:st,mobileWebkit3d:ft,msPointer:Et,pointer:ui,touch:ze,touchNative:ai,mobileOpera:vi,mobileGecko:yr,retina:At,passiveEvents:hi,canvas:_r,svg:bi,vml:xi,inlineSvg:Ni,mac:ir,linux:Qs},Cr=Re.msPointer?"MSPointerDown":"pointerdown",kr=Re.msPointer?"MSPointerMove":"pointermove",eo=Re.msPointer?"MSPointerUp":"pointerup",sn=Re.msPointer?"MSPointerCancel":"pointercancel",it={touchstart:Cr,touchmove:kr,touchend:eo,touchcancel:sn},jt={touchstart:io,touchmove:na,touchend:na,touchcancel:na},It={},$r=!1;function Wo(c,v,C){return v==="touchstart"&&Go(),jt[v]?(C=jt[v].bind(this,C),c.addEventListener(it[v],C,!1),C):(console.warn("wrong event specified:",v),G)}function ra(c,v,C){if(!it[v]){console.warn("wrong event specified:",v);return}c.removeEventListener(it[v],C,!1)}function Dt(c){It[c.pointerId]=c}function to(c){It[c.pointerId]&&(It[c.pointerId]=c)}function xs(c){delete It[c.pointerId]}function Go(){$r||(document.addEventListener(Cr,Dt,!0),document.addEventListener(kr,to,!0),document.addEventListener(eo,xs,!0),document.addEventListener(sn,xs,!0),$r=!0)}function na(c,v){if(v.pointerType!==(v.MSPOINTER_TYPE_MOUSE||"mouse")){v.touches=[];for(var C in It)v.touches.push(It[C]);v.changedTouches=[v],c(v)}}function io(c,v){v.MSPOINTER_TYPE_TOUCH&&v.pointerType===v.MSPOINTER_TYPE_TOUCH&&Kt(v),na(c,v)}function ws(c){var v={},C,I;for(I in c)C=c[I],v[I]=C&&C.bind?C.bind(c):C;return c=v,v.type="dblclick",v.detail=2,v.isTrusted=!1,v._simulated=!0,v}var ro=200;function Br(c,v){c.addEventListener("dblclick",v);var C=0,I;function q(Q){if(Q.detail!==1){I=Q.detail;return}if(!(Q.pointerType==="mouse"||Q.sourceCapabilities&&!Q.sourceCapabilities.firesTouchEvents)){var _e=Mn(Q);if(!(_e.some(function(qe){return qe instanceof HTMLLabelElement&&qe.attributes.for})&&!_e.some(function(qe){return qe instanceof HTMLInputElement||qe instanceof HTMLSelectElement}))){var Ae=Date.now();Ae-C<=ro?(I++,I===2&&v(ws(Q))):I=1,C=Ae}}}return c.addEventListener("click",q),{dblclick:v,simDblclick:q}}function di(c,v){c.removeEventListener("dblclick",v.dblclick),c.removeEventListener("click",v.simDblclick)}var Ss=Cs(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Gn=Cs(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ts=Gn==="webkitTransition"||Gn==="OTransition"?Gn+"End":"transitionend";function Ta(c){return typeof c=="string"?document.getElementById(c):c}function Fr(c,v){var C=c.style[v]||c.currentStyle&&c.currentStyle[v];if((!C||C==="auto")&&document.defaultView){var I=document.defaultView.getComputedStyle(c,null);C=I?I[v]:null}return C==="auto"?null:C}function oi(c,v,C){var I=document.createElement(c);return I.className=v||"",C&&C.appendChild(I),I}function mi(c){var v=c.parentNode;v&&v.removeChild(c)}function Ya(c){for(;c.firstChild;)c.removeChild(c.firstChild)}function wi(c){var v=c.parentNode;v&&v.lastChild!==c&&v.appendChild(c)}function Xa(c){var v=c.parentNode;v&&v.firstChild!==c&&v.insertBefore(c,v.firstChild)}function Uo(c,v){if(c.classList!==void 0)return c.classList.contains(v);var C=no(c);return C.length>0&&new RegExp("(^|\\s)"+v+"(\\s|$)").test(C)}function Nt(c,v){if(c.classList!==void 0)for(var C=$(v),I=0,q=C.length;I<q;I++)c.classList.add(C[I]);else if(!Uo(c,v)){var Q=no(c);Zo(c,(Q?Q+" ":"")+v)}}function qi(c,v){c.classList!==void 0?c.classList.remove(v):Zo(c,ie((" "+no(c)+" ").replace(" "+v+" "," ")))}function Zo(c,v){c.className.baseVal===void 0?c.className=v:c.className.baseVal=v}function no(c){return c.correspondingElement&&(c=c.correspondingElement),c.className.baseVal===void 0?c.className:c.className.baseVal}function jr(c,v){"opacity"in c.style?c.style.opacity=v:"filter"in c.style&&Il(c,v)}function Il(c,v){var C=!1,I="DXImageTransform.Microsoft.Alpha";try{C=c.filters.item(I)}catch{if(v===1)return}v=Math.round(v*100),C?(C.Enabled=v!==100,C.Opacity=v):c.style.filter+=" progid:"+I+"(opacity="+v+")"}function Cs(c){for(var v=document.documentElement.style,C=0;C<c.length;C++)if(c[C]in v)return c[C];return!1}function aa(c,v,C){var I=v||new _t(0,0);c.style[Ss]=(Re.ie3d?"translate("+I.x+"px,"+I.y+"px)":"translate3d("+I.x+"px,"+I.y+"px,0)")+(C?" scale("+C+")":"")}function Vi(c,v){c._leaflet_pos=v,Re.any3d?aa(c,v):(c.style.left=v.x+"px",c.style.top=v.y+"px")}function Ka(c){return c._leaflet_pos||new _t(0,0)}var sa,Ca,$o;if("onselectstart"in document)sa=function(){bt(window,"selectstart",Kt)},Ca=function(){ct(window,"selectstart",Kt)};else{var Un=Cs(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);sa=function(){if(Un){var c=document.documentElement.style;$o=c[Un],c[Un]="none"}},Ca=function(){Un&&(document.documentElement.style[Un]=$o,$o=void 0)}}function ao(){bt(window,"dragstart",Kt)}function Ja(){ct(window,"dragstart",Kt)}var An,ka;function Rt(c){for(;c.tabIndex===-1;)c=c.parentNode;c.style&&(ks(),An=c,ka=c.style.outlineStyle,c.style.outlineStyle="none",bt(window,"keydown",ks))}function ks(){An&&(An.style.outlineStyle=ka,An=void 0,ka=void 0,ct(window,"keydown",ks))}function fc(c){do c=c.parentNode;while((!c.offsetWidth||!c.offsetHeight)&&c!==document.body);return c}function so(c){var v=c.getBoundingClientRect();return{x:v.width/c.offsetWidth||1,y:v.height/c.offsetHeight||1,boundingClientRect:v}}var Hr={__proto__:null,TRANSFORM:Ss,TRANSITION:Gn,TRANSITION_END:Ts,get:Ta,getStyle:Fr,create:oi,remove:mi,empty:Ya,toFront:wi,toBack:Xa,hasClass:Uo,addClass:Nt,removeClass:qi,setClass:Zo,getClass:no,setOpacity:jr,testProp:Cs,setTransform:aa,setPosition:Vi,getPosition:Ka,get disableTextSelection(){return sa},get enableTextSelection(){return Ca},disableImageDrag:ao,enableImageDrag:Ja,preventOutline:Rt,restoreOutline:ks,getSizedParentNode:fc,getScale:so};function bt(c,v,C,I){if(v&&typeof v=="object")for(var q in v)vr(c,q,v[q],C);else{v=$(v);for(var Q=0,_e=v.length;Q<_e;Q++)vr(c,v[Q],C,I)}return this}var li="_leaflet_events";function ct(c,v,C,I){if(arguments.length===1)gi(c),delete c[li];else if(v&&typeof v=="object")for(var q in v)Nr(c,q,v[q],C);else if(v=$(v),arguments.length===2)gi(c,function(Ae){return Ze(v,Ae)!==-1});else for(var Q=0,_e=v.length;Q<_e;Q++)Nr(c,v[Q],C,I);return this}function gi(c,v){for(var C in c[li]){var I=C.split(/\d/)[0];(!v||v(I))&&Nr(c,I,null,null,C)}}var Zn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function vr(c,v,C,I){var q=v+T(C)+(I?"_"+T(I):"");if(c[li]&&c[li][q])return this;var Q=function(Ae){return C.call(I||c,Ae||window.event)},_e=Q;!Re.touchNative&&Re.pointer&&v.indexOf("touch")===0?Q=Wo(c,v,Q):Re.touch&&v==="dblclick"?Q=Br(c,Q):"addEventListener"in c?v==="touchstart"||v==="touchmove"||v==="wheel"||v==="mousewheel"?c.addEventListener(Zn[v]||v,Q,Re.passiveEvents?{passive:!1}:!1):v==="mouseenter"||v==="mouseleave"?(Q=function(Ae){Ae=Ae||window.event,In(c,Ae)&&_e(Ae)},c.addEventListener(Zn[v],Q,!1)):c.addEventListener(v,_e,!1):c.attachEvent("on"+v,Q),c[li]=c[li]||{},c[li][q]=Q}function Nr(c,v,C,I,q){q=q||v+T(C)+(I?"_"+T(I):"");var Q=c[li]&&c[li][q];if(!Q)return this;!Re.touchNative&&Re.pointer&&v.indexOf("touch")===0?ra(c,v,Q):Re.touch&&v==="dblclick"?di(c,Q):"removeEventListener"in c?c.removeEventListener(Zn[v]||v,Q,!1):c.detachEvent("on"+v,Q),c[li][q]=null}function Xi(c){return c.stopPropagation?c.stopPropagation():c.originalEvent?c.originalEvent._stopped=!0:c.cancelBubble=!0,this}function Pa(c){return vr(c,"wheel",Xi),this}function _n(c){return bt(c,"mousedown touchstart dblclick contextmenu",Xi),c._leaflet_disable_click=!0,this}function Kt(c){return c.preventDefault?c.preventDefault():c.returnValue=!1,this}function on(c){return Kt(c),Xi(c),this}function Mn(c){if(c.composedPath)return c.composedPath();for(var v=[],C=c.target;C;)v.push(C),C=C.parentNode;return v}function oo(c,v){if(!v)return new _t(c.clientX,c.clientY);var C=so(v),I=C.boundingClientRect;return new _t((c.clientX-I.left)/C.x-v.clientLeft,(c.clientY-I.top)/C.y-v.clientTop)}var Yr=Re.linux&&Re.chrome?window.devicePixelRatio:Re.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ea(c){return Re.edge?c.wheelDeltaY/2:c.deltaY&&c.deltaMode===0?-c.deltaY/Yr:c.deltaY&&c.deltaMode===1?-c.deltaY*20:c.deltaY&&c.deltaMode===2?-c.deltaY*60:c.deltaX||c.deltaZ?0:c.wheelDelta?(c.wheelDeltaY||c.wheelDelta)/2:c.detail&&Math.abs(c.detail)<32765?-c.detail*20:c.detail?c.detail/-32765*60:0}function In(c,v){var C=v.relatedTarget;if(!C)return!0;try{for(;C&&C!==c;)C=C.parentNode}catch{return!1}return C!==c}var mc={__proto__:null,on:bt,off:ct,stopPropagation:Xi,disableScrollPropagation:Pa,disableClickPropagation:_n,preventDefault:Kt,stop:on,getPropagationPath:Mn,getMousePosition:oo,getWheelDelta:Ea,isExternalTarget:In,addListener:bt,removeListener:ct},Ho=ii.extend({run:function(c,v,C,I){this.stop(),this._el=c,this._inProgress=!0,this._duration=C||.25,this._easeOutPower=1/Math.max(I||.5,.2),this._startPos=Ka(c),this._offset=v.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=ot(this._animate,this),this._step()},_step:function(c){var v=+new Date-this._startTime,C=this._duration*1e3;v<C?this._runFrame(this._easeOut(v/C),c):(this._runFrame(1),this._complete())},_runFrame:function(c,v){var C=this._startPos.add(this._offset.multiplyBy(c));v&&C._round(),Vi(this._el,C),this.fire("step")},_complete:function(){St(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(c){return 1-Math.pow(1-c,this._easeOutPower)}}),Zt=ii.extend({options:{crs:Ua,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(c,v){v=ae(this,v),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(c),this._initLayout(),this._onResize=f(this._onResize,this),this._initEvents(),v.maxBounds&&this.setMaxBounds(v.maxBounds),v.zoom!==void 0&&(this._zoom=this._limitZoom(v.zoom)),v.center&&v.zoom!==void 0&&this.setView(Ft(v.center),v.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Gn&&Re.any3d&&!Re.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),bt(this._proxy,Ts,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(c,v,C){if(v=v===void 0?this._zoom:this._limitZoom(v),c=this._limitCenter(Ft(c),v,this.options.maxBounds),C=C||{},this._stop(),this._loaded&&!C.reset&&C!==!0){C.animate!==void 0&&(C.zoom=p({animate:C.animate},C.zoom),C.pan=p({animate:C.animate,duration:C.duration},C.pan));var I=this._zoom!==v?this._tryAnimatedZoom&&this._tryAnimatedZoom(c,v,C.zoom):this._tryAnimatedPan(c,C.pan);if(I)return clearTimeout(this._sizeTimer),this}return this._resetView(c,v,C.pan&&C.pan.noMoveStart),this},setZoom:function(c,v){return this._loaded?this.setView(this.getCenter(),c,{zoom:v}):(this._zoom=c,this)},zoomIn:function(c,v){return c=c||(Re.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+c,v)},zoomOut:function(c,v){return c=c||(Re.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-c,v)},setZoomAround:function(c,v,C){var I=this.getZoomScale(v),q=this.getSize().divideBy(2),Q=c instanceof _t?c:this.latLngToContainerPoint(c),_e=Q.subtract(q).multiplyBy(1-1/I),Ae=this.containerPointToLatLng(q.add(_e));return this.setView(Ae,v,{zoom:C})},_getBoundsCenterZoom:function(c,v){v=v||{},c=c.getBounds?c.getBounds():Ci(c);var C=kt(v.paddingTopLeft||v.padding||[0,0]),I=kt(v.paddingBottomRight||v.padding||[0,0]),q=this.getBoundsZoom(c,!1,C.add(I));if(q=typeof v.maxZoom=="number"?Math.min(v.maxZoom,q):q,q===1/0)return{center:c.getCenter(),zoom:q};var Q=I.subtract(C).divideBy(2),_e=this.project(c.getSouthWest(),q),Ae=this.project(c.getNorthEast(),q),qe=this.unproject(_e.add(Ae).divideBy(2).add(Q),q);return{center:qe,zoom:q}},fitBounds:function(c,v){if(c=Ci(c),!c.isValid())throw new Error("Bounds are not valid.");var C=this._getBoundsCenterZoom(c,v);return this.setView(C.center,C.zoom,v)},fitWorld:function(c){return this.fitBounds([[-90,-180],[90,180]],c)},panTo:function(c,v){return this.setView(c,this._zoom,{pan:v})},panBy:function(c,v){if(c=kt(c).round(),v=v||{},!c.x&&!c.y)return this.fire("moveend");if(v.animate!==!0&&!this.getSize().contains(c))return this._resetView(this.unproject(this.project(this.getCenter()).add(c)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ho,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),v.noMoveStart||this.fire("movestart"),v.animate!==!1){Nt(this._mapPane,"leaflet-pan-anim");var C=this._getMapPanePos().subtract(c).round();this._panAnim.run(this._mapPane,C,v.duration||.25,v.easeLinearity)}else this._rawPanBy(c),this.fire("move").fire("moveend");return this},flyTo:function(c,v,C){if(C=C||{},C.animate===!1||!Re.any3d)return this.setView(c,v,C);this._stop();var I=this.project(this.getCenter()),q=this.project(c),Q=this.getSize(),_e=this._zoom;c=Ft(c),v=v===void 0?_e:v;var Ae=Math.max(Q.x,Q.y),qe=Ae*this.getZoomScale(_e,v),Qe=q.distanceTo(I)||1,ht=1.42,Mt=ht*ht;function Yt(Di){var La=Di?-1:1,sl=Di?qe:Ae,Oa=qe*qe-Ae*Ae+La*Mt*Mt*Qe*Qe,_o=2*sl*Mt*Qe,ma=Oa/_o,ls=Math.sqrt(ma*ma+1)-ma,Dc=ls<1e-9?-18:Math.log(ls);return Dc}function or(Di){return(Math.exp(Di)-Math.exp(-Di))/2}function Ji(Di){return(Math.exp(Di)+Math.exp(-Di))/2}function hn(Di){return or(Di)/Ji(Di)}var qr=Yt(0);function Kn(Di){return Ae*(Ji(qr)/Ji(qr+ht*Di))}function al(Di){return Ae*(Ji(qr)*hn(qr+ht*Di)-or(qr))/Mt}function Lc(Di){return 1-Math.pow(1-Di,1.5)}var Oc=Date.now(),Oi=(Yt(1)-qr)/ht,os=C.duration?1e3*C.duration:1e3*Oi*.8;function dn(){var Di=(Date.now()-Oc)/os,La=Lc(Di)*Oi;Di<=1?(this._flyToFrame=ot(dn,this),this._move(this.unproject(I.add(q.subtract(I).multiplyBy(al(La)/Qe)),_e),this.getScaleZoom(Ae/Kn(La),_e),{flyTo:!0})):this._move(c,v)._moveEnd(!0)}return this._moveStart(!0,C.noMoveStart),dn.call(this),this},flyToBounds:function(c,v){var C=this._getBoundsCenterZoom(c,v);return this.flyTo(C.center,C.zoom,v)},setMaxBounds:function(c){return c=Ci(c),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),c.isValid()?(this.options.maxBounds=c,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(c){var v=this.options.minZoom;return this.options.minZoom=c,this._loaded&&v!==c&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(c):this},setMaxZoom:function(c){var v=this.options.maxZoom;return this.options.maxZoom=c,this._loaded&&v!==c&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(c):this},panInsideBounds:function(c,v){this._enforcingBounds=!0;var C=this.getCenter(),I=this._limitCenter(C,this._zoom,Ci(c));return C.equals(I)||this.panTo(I,v),this._enforcingBounds=!1,this},panInside:function(c,v){v=v||{};var C=kt(v.paddingTopLeft||v.padding||[0,0]),I=kt(v.paddingBottomRight||v.padding||[0,0]),q=this.project(this.getCenter()),Q=this.project(c),_e=this.getPixelBounds(),Ae=Yi([_e.min.add(C),_e.max.subtract(I)]),qe=Ae.getSize();if(!Ae.contains(Q)){this._enforcingBounds=!0;var Qe=Q.subtract(Ae.getCenter()),ht=Ae.extend(Q).getSize().subtract(qe);q.x+=Qe.x<0?-ht.x:ht.x,q.y+=Qe.y<0?-ht.y:ht.y,this.panTo(this.unproject(q),v),this._enforcingBounds=!1}return this},invalidateSize:function(c){if(!this._loaded)return this;c=p({animate:!1,pan:!0},c===!0?{animate:!0}:c);var v=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var C=this.getSize(),I=v.divideBy(2).round(),q=C.divideBy(2).round(),Q=I.subtract(q);return!Q.x&&!Q.y?this:(c.animate&&c.pan?this.panBy(Q):(c.pan&&this._rawPanBy(Q),this.fire("move"),c.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:v,newSize:C}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(c){if(c=this._locateOptions=p({timeout:1e4,watch:!1},c),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var v=f(this._handleGeolocationResponse,this),C=f(this._handleGeolocationError,this);return c.watch?this._locationWatchId=navigator.geolocation.watchPosition(v,C,c):navigator.geolocation.getCurrentPosition(v,C,c),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(c){if(this._container._leaflet_id){var v=c.code,C=c.message||(v===1?"permission denied":v===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:v,message:"Geolocation error: "+C+"."})}},_handleGeolocationResponse:function(c){if(this._container._leaflet_id){var v=c.coords.latitude,C=c.coords.longitude,I=new qt(v,C),q=I.toBounds(c.coords.accuracy*2),Q=this._locateOptions;if(Q.setView){var _e=this.getBoundsZoom(q);this.setView(I,Q.maxZoom?Math.min(_e,Q.maxZoom):_e)}var Ae={latlng:I,bounds:q,timestamp:c.timestamp};for(var qe in c.coords)typeof c.coords[qe]=="number"&&(Ae[qe]=c.coords[qe]);this.fire("locationfound",Ae)}},addHandler:function(c,v){if(!v)return this;var C=this[c]=new v(this);return this._handlers.push(C),this.options[c]&&C.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),mi(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(St(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var c;for(c in this._layers)this._layers[c].remove();for(c in this._panes)mi(this._panes[c]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(c,v){var C="leaflet-pane"+(c?" leaflet-"+c.replace("Pane","")+"-pane":""),I=oi("div",C,v||this._mapPane);return c&&(this._panes[c]=I),I},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var c=this.getPixelBounds(),v=this.unproject(c.getBottomLeft()),C=this.unproject(c.getTopRight());return new tr(v,C)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(c,v,C){c=Ci(c),C=kt(C||[0,0]);var I=this.getZoom()||0,q=this.getMinZoom(),Q=this.getMaxZoom(),_e=c.getNorthWest(),Ae=c.getSouthEast(),qe=this.getSize().subtract(C),Qe=Yi(this.project(Ae,I),this.project(_e,I)).getSize(),ht=Re.any3d?this.options.zoomSnap:1,Mt=qe.x/Qe.x,Yt=qe.y/Qe.y,or=v?Math.max(Mt,Yt):Math.min(Mt,Yt);return I=this.getScaleZoom(or,I),ht&&(I=Math.round(I/(ht/100))*(ht/100),I=v?Math.ceil(I/ht)*ht:Math.floor(I/ht)*ht),Math.max(q,Math.min(Q,I))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new _t(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(c,v){var C=this._getTopLeftPoint(c,v);return new ni(C,C.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(c){return this.options.crs.getProjectedBounds(c===void 0?this.getZoom():c)},getPane:function(c){return typeof c=="string"?this._panes[c]:c},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(c,v){var C=this.options.crs;return v=v===void 0?this._zoom:v,C.scale(c)/C.scale(v)},getScaleZoom:function(c,v){var C=this.options.crs;v=v===void 0?this._zoom:v;var I=C.zoom(c*C.scale(v));return isNaN(I)?1/0:I},project:function(c,v){return v=v===void 0?this._zoom:v,this.options.crs.latLngToPoint(Ft(c),v)},unproject:function(c,v){return v=v===void 0?this._zoom:v,this.options.crs.pointToLatLng(kt(c),v)},layerPointToLatLng:function(c){var v=kt(c).add(this.getPixelOrigin());return this.unproject(v)},latLngToLayerPoint:function(c){var v=this.project(Ft(c))._round();return v._subtract(this.getPixelOrigin())},wrapLatLng:function(c){return this.options.crs.wrapLatLng(Ft(c))},wrapLatLngBounds:function(c){return this.options.crs.wrapLatLngBounds(Ci(c))},distance:function(c,v){return this.options.crs.distance(Ft(c),Ft(v))},containerPointToLayerPoint:function(c){return kt(c).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(c){return kt(c).add(this._getMapPanePos())},containerPointToLatLng:function(c){var v=this.containerPointToLayerPoint(kt(c));return this.layerPointToLatLng(v)},latLngToContainerPoint:function(c){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Ft(c)))},mouseEventToContainerPoint:function(c){return oo(c,this._container)},mouseEventToLayerPoint:function(c){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(c))},mouseEventToLatLng:function(c){return this.layerPointToLatLng(this.mouseEventToLayerPoint(c))},_initContainer:function(c){var v=this._container=Ta(c);if(v){if(v._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");bt(v,"scroll",this._onScroll,this),this._containerId=T(v)},_initLayout:function(){var c=this._container;this._fadeAnimated=this.options.fadeAnimation&&Re.any3d,Nt(c,"leaflet-container"+(Re.touch?" leaflet-touch":"")+(Re.retina?" leaflet-retina":"")+(Re.ielt9?" leaflet-oldie":"")+(Re.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var v=Fr(c,"position");v!=="absolute"&&v!=="relative"&&v!=="fixed"&&v!=="sticky"&&(c.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var c=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Vi(this._mapPane,new _t(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Nt(c.markerPane,"leaflet-zoom-hide"),Nt(c.shadowPane,"leaflet-zoom-hide"))},_resetView:function(c,v,C){Vi(this._mapPane,new _t(0,0));var I=!this._loaded;this._loaded=!0,v=this._limitZoom(v),this.fire("viewprereset");var q=this._zoom!==v;this._moveStart(q,C)._move(c,v)._moveEnd(q),this.fire("viewreset"),I&&this.fire("load")},_moveStart:function(c,v){return c&&this.fire("zoomstart"),v||this.fire("movestart"),this},_move:function(c,v,C,I){v===void 0&&(v=this._zoom);var q=this._zoom!==v;return this._zoom=v,this._lastCenter=c,this._pixelOrigin=this._getNewPixelOrigin(c),I?C&&C.pinch&&this.fire("zoom",C):((q||C&&C.pinch)&&this.fire("zoom",C),this.fire("move",C)),this},_moveEnd:function(c){return c&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return St(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(c){Vi(this._mapPane,this._getMapPanePos().subtract(c))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(c){this._targets={},this._targets[T(this._container)]=this;var v=c?ct:bt;v(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&v(window,"resize",this._onResize,this),Re.any3d&&this.options.transform3DLimit&&(c?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){St(this._resizeRequest),this._resizeRequest=ot(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var c=this._getMapPanePos();Math.max(Math.abs(c.x),Math.abs(c.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(c,v){for(var C=[],I,q=v==="mouseout"||v==="mouseover",Q=c.target||c.srcElement,_e=!1;Q;){if(I=this._targets[T(Q)],I&&(v==="click"||v==="preclick")&&this._draggableMoved(I)){_e=!0;break}if(I&&I.listens(v,!0)&&(q&&!In(Q,c)||(C.push(I),q))||Q===this._container)break;Q=Q.parentNode}return!C.length&&!_e&&!q&&this.listens(v,!0)&&(C=[this]),C},_isClickDisabled:function(c){for(;c&&c!==this._container;){if(c._leaflet_disable_click)return!0;c=c.parentNode}},_handleDOMEvent:function(c){var v=c.target||c.srcElement;if(!(!this._loaded||v._leaflet_disable_events||c.type==="click"&&this._isClickDisabled(v))){var C=c.type;C==="mousedown"&&Rt(v),this._fireDOMEvent(c,C)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(c,v,C){if(c.type==="click"){var I=p({},c);I.type="preclick",this._fireDOMEvent(I,I.type,C)}var q=this._findEventTargets(c,v);if(C){for(var Q=[],_e=0;_e<C.length;_e++)C[_e].listens(v,!0)&&Q.push(C[_e]);q=Q.concat(q)}if(q.length){v==="contextmenu"&&Kt(c);var Ae=q[0],qe={originalEvent:c};if(c.type!=="keypress"&&c.type!=="keydown"&&c.type!=="keyup"){var Qe=Ae.getLatLng&&(!Ae._radius||Ae._radius<=10);qe.containerPoint=Qe?this.latLngToContainerPoint(Ae.getLatLng()):this.mouseEventToContainerPoint(c),qe.layerPoint=this.containerPointToLayerPoint(qe.containerPoint),qe.latlng=Qe?Ae.getLatLng():this.layerPointToLatLng(qe.layerPoint)}for(_e=0;_e<q.length;_e++)if(q[_e].fire(v,qe,!0),qe.originalEvent._stopped||q[_e].options.bubblingMouseEvents===!1&&Ze(this._mouseEvents,v)!==-1)return}},_draggableMoved:function(c){return c=c.dragging&&c.dragging.enabled()?c:this,c.dragging&&c.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var c=0,v=this._handlers.length;c<v;c++)this._handlers[c].disable()},whenReady:function(c,v){return this._loaded?c.call(v||this,{target:this}):this.on("load",c,v),this},_getMapPanePos:function(){return Ka(this._mapPane)||new _t(0,0)},_moved:function(){var c=this._getMapPanePos();return c&&!c.equals([0,0])},_getTopLeftPoint:function(c,v){var C=c&&v!==void 0?this._getNewPixelOrigin(c,v):this.getPixelOrigin();return C.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(c,v){var C=this.getSize()._divideBy(2);return this.project(c,v)._subtract(C)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(c,v,C){var I=this._getNewPixelOrigin(C,v);return this.project(c,v)._subtract(I)},_latLngBoundsToNewLayerBounds:function(c,v,C){var I=this._getNewPixelOrigin(C,v);return Yi([this.project(c.getSouthWest(),v)._subtract(I),this.project(c.getNorthWest(),v)._subtract(I),this.project(c.getSouthEast(),v)._subtract(I),this.project(c.getNorthEast(),v)._subtract(I)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(c){return this.latLngToLayerPoint(c).subtract(this._getCenterLayerPoint())},_limitCenter:function(c,v,C){if(!C)return c;var I=this.project(c,v),q=this.getSize().divideBy(2),Q=new ni(I.subtract(q),I.add(q)),_e=this._getBoundsOffset(Q,C,v);return Math.abs(_e.x)<=1&&Math.abs(_e.y)<=1?c:this.unproject(I.add(_e),v)},_limitOffset:function(c,v){if(!v)return c;var C=this.getPixelBounds(),I=new ni(C.min.add(c),C.max.add(c));return c.add(this._getBoundsOffset(I,v))},_getBoundsOffset:function(c,v,C){var I=Yi(this.project(v.getNorthEast(),C),this.project(v.getSouthWest(),C)),q=I.min.subtract(c.min),Q=I.max.subtract(c.max),_e=this._rebound(q.x,-Q.x),Ae=this._rebound(q.y,-Q.y);return new _t(_e,Ae)},_rebound:function(c,v){return c+v>0?Math.round(c-v)/2:Math.max(0,Math.ceil(c))-Math.max(0,Math.floor(v))},_limitZoom:function(c){var v=this.getMinZoom(),C=this.getMaxZoom(),I=Re.any3d?this.options.zoomSnap:1;return I&&(c=Math.round(c/I)*I),Math.max(v,Math.min(C,c))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){qi(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(c,v){var C=this._getCenterOffset(c)._trunc();return(v&&v.animate)!==!0&&!this.getSize().contains(C)?!1:(this.panBy(C,v),!0)},_createAnimProxy:function(){var c=this._proxy=oi("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(c),this.on("zoomanim",function(v){var C=Ss,I=this._proxy.style[C];aa(this._proxy,this.project(v.center,v.zoom),this.getZoomScale(v.zoom,1)),I===this._proxy.style[C]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){mi(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var c=this.getCenter(),v=this.getZoom();aa(this._proxy,this.project(c,v),this.getZoomScale(v,1))},_catchTransitionEnd:function(c){this._animatingZoom&&c.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(c,v,C){if(this._animatingZoom)return!0;if(C=C||{},!this._zoomAnimated||C.animate===!1||this._nothingToAnimate()||Math.abs(v-this._zoom)>this.options.zoomAnimationThreshold)return!1;var I=this.getZoomScale(v),q=this._getCenterOffset(c)._divideBy(1-1/I);return C.animate!==!0&&!this.getSize().contains(q)?!1:(ot(function(){this._moveStart(!0,C.noMoveStart||!1)._animateZoom(c,v,!0)},this),!0)},_animateZoom:function(c,v,C,I){this._mapPane&&(C&&(this._animatingZoom=!0,this._animateToCenter=c,this._animateToZoom=v,Nt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:c,zoom:v,noUpdate:I}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(f(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&qi(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Si(c,v){return new Zt(c,v)}var Pr=Tt.extend({options:{position:"topright"},initialize:function(c){ae(this,c)},getPosition:function(){return this.options.position},setPosition:function(c){var v=this._map;return v&&v.removeControl(this),this.options.position=c,v&&v.addControl(this),this},getContainer:function(){return this._container},addTo:function(c){this.remove(),this._map=c;var v=this._container=this.onAdd(c),C=this.getPosition(),I=c._controlCorners[C];return Nt(v,"leaflet-control"),C.indexOf("bottom")!==-1?I.insertBefore(v,I.firstChild):I.appendChild(v),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(mi(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(c){this._map&&c&&c.screenX>0&&c.screenY>0&&this._map.getContainer().focus()}}),Wt=function(c){return new Pr(c)};Zt.include({addControl:function(c){return c.addTo(this),this},removeControl:function(c){return c.remove(),this},_initControlPos:function(){var c=this._controlCorners={},v="leaflet-",C=this._controlContainer=oi("div",v+"control-container",this._container);function I(q,Q){var _e=v+q+" "+v+Q;c[q+Q]=oi("div",_e,C)}I("top","left"),I("top","right"),I("bottom","left"),I("bottom","right")},_clearControlPos:function(){for(var c in this._controlCorners)mi(this._controlCorners[c]);mi(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ot=Pr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(c,v,C,I){return C<I?-1:I<C?1:0}},initialize:function(c,v,C){ae(this,C),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var I in c)this._addLayer(c[I],I);for(I in v)this._addLayer(v[I],I,!0)},onAdd:function(c){this._initLayout(),this._update(),this._map=c,c.on("zoomend",this._checkDisabledLayers,this);for(var v=0;v<this._layers.length;v++)this._layers[v].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(c){return Pr.prototype.addTo.call(this,c),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(c,v){return this._addLayer(c,v),this._map?this._update():this},addOverlay:function(c,v){return this._addLayer(c,v,!0),this._map?this._update():this},removeLayer:function(c){c.off("add remove",this._onLayerChange,this);var v=this._getLayer(T(c));return v&&this._layers.splice(this._layers.indexOf(v),1),this._map?this._update():this},expand:function(){Nt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var c=this._map.getSize().y-(this._container.offsetTop+50);return c<this._section.clientHeight?(Nt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=c+"px"):qi(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return qi(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var c="leaflet-control-layers",v=this._container=oi("div",c),C=this.options.collapsed;v.setAttribute("aria-haspopup",!0),_n(v),Pa(v);var I=this._section=oi("section",c+"-list");C&&(this._map.on("click",this.collapse,this),bt(v,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var q=this._layersLink=oi("a",c+"-toggle",v);q.href="#",q.title="Layers",q.setAttribute("role","button"),bt(q,{keydown:function(Q){Q.keyCode===13&&this._expandSafely()},click:function(Q){Kt(Q),this._expandSafely()}},this),C||this.expand(),this._baseLayersList=oi("div",c+"-base",I),this._separator=oi("div",c+"-separator",I),this._overlaysList=oi("div",c+"-overlays",I),v.appendChild(I)},_getLayer:function(c){for(var v=0;v<this._layers.length;v++)if(this._layers[v]&&T(this._layers[v].layer)===c)return this._layers[v]},_addLayer:function(c,v,C){this._map&&c.on("add remove",this._onLayerChange,this),this._layers.push({layer:c,name:v,overlay:C}),this.options.sortLayers&&this._layers.sort(f(function(I,q){return this.options.sortFunction(I.layer,q.layer,I.name,q.name)},this)),this.options.autoZIndex&&c.setZIndex&&(this._lastZIndex++,c.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ya(this._baseLayersList),Ya(this._overlaysList),this._layerControlInputs=[];var c,v,C,I,q=0;for(C=0;C<this._layers.length;C++)I=this._layers[C],this._addItem(I),v=v||I.overlay,c=c||!I.overlay,q+=I.overlay?0:1;return this.options.hideSingleBase&&(c=c&&q>1,this._baseLayersList.style.display=c?"":"none"),this._separator.style.display=v&&c?"":"none",this},_onLayerChange:function(c){this._handlingClick||this._update();var v=this._getLayer(T(c.target)),C=v.overlay?c.type==="add"?"overlayadd":"overlayremove":c.type==="add"?"baselayerchange":null;C&&this._map.fire(C,v)},_createRadioElement:function(c,v){var C='<input type="radio" class="leaflet-control-layers-selector" name="'+c+'"'+(v?' checked="checked"':"")+"/>",I=document.createElement("div");return I.innerHTML=C,I.firstChild},_addItem:function(c){var v=document.createElement("label"),C=this._map.hasLayer(c.layer),I;c.overlay?(I=document.createElement("input"),I.type="checkbox",I.className="leaflet-control-layers-selector",I.defaultChecked=C):I=this._createRadioElement("leaflet-base-layers_"+T(this),C),this._layerControlInputs.push(I),I.layerId=T(c.layer),bt(I,"click",this._onInputClick,this);var q=document.createElement("span");q.innerHTML=" "+c.name;var Q=document.createElement("span");v.appendChild(Q),Q.appendChild(I),Q.appendChild(q);var _e=c.overlay?this._overlaysList:this._baseLayersList;return _e.appendChild(v),this._checkDisabledLayers(),v},_onInputClick:function(){if(!this._preventClick){var c=this._layerControlInputs,v,C,I=[],q=[];this._handlingClick=!0;for(var Q=c.length-1;Q>=0;Q--)v=c[Q],C=this._getLayer(v.layerId).layer,v.checked?I.push(C):v.checked||q.push(C);for(Q=0;Q<q.length;Q++)this._map.hasLayer(q[Q])&&this._map.removeLayer(q[Q]);for(Q=0;Q<I.length;Q++)this._map.hasLayer(I[Q])||this._map.addLayer(I[Q]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var c=this._layerControlInputs,v,C,I=this._map.getZoom(),q=c.length-1;q>=0;q--)v=c[q],C=this._getLayer(v.layerId).layer,v.disabled=C.options.minZoom!==void 0&&I<C.options.minZoom||C.options.maxZoom!==void 0&&I>C.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var c=this._section;this._preventClick=!0,bt(c,"click",Kt),this.expand();var v=this;setTimeout(function(){ct(c,"click",Kt),v._preventClick=!1})}}),Ps=function(c,v,C){return new Ot(c,v,C)},Jt=Pr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(c){var v="leaflet-control-zoom",C=oi("div",v+" leaflet-bar"),I=this.options;return this._zoomInButton=this._createButton(I.zoomInText,I.zoomInTitle,v+"-in",C,this._zoomIn),this._zoomOutButton=this._createButton(I.zoomOutText,I.zoomOutTitle,v+"-out",C,this._zoomOut),this._updateDisabled(),c.on("zoomend zoomlevelschange",this._updateDisabled,this),C},onRemove:function(c){c.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(c){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(c.shiftKey?3:1))},_zoomOut:function(c){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(c.shiftKey?3:1))},_createButton:function(c,v,C,I,q){var Q=oi("a",C,I);return Q.innerHTML=c,Q.href="#",Q.title=v,Q.setAttribute("role","button"),Q.setAttribute("aria-label",v),_n(Q),bt(Q,"click",on),bt(Q,"click",q,this),bt(Q,"click",this._refocusOnMap,this),Q},_updateDisabled:function(){var c=this._map,v="leaflet-disabled";qi(this._zoomInButton,v),qi(this._zoomOutButton,v),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||c._zoom===c.getMinZoom())&&(Nt(this._zoomOutButton,v),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||c._zoom===c.getMaxZoom())&&(Nt(this._zoomInButton,v),this._zoomInButton.setAttribute("aria-disabled","true"))}});Zt.mergeOptions({zoomControl:!0}),Zt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Jt,this.addControl(this.zoomControl))});var lo=function(c){return new Jt(c)},ln=Pr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(c){var v="leaflet-control-scale",C=oi("div",v),I=this.options;return this._addScales(I,v+"-line",C),c.on(I.updateWhenIdle?"moveend":"move",this._update,this),c.whenReady(this._update,this),C},onRemove:function(c){c.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(c,v,C){c.metric&&(this._mScale=oi("div",v,C)),c.imperial&&(this._iScale=oi("div",v,C))},_update:function(){var c=this._map,v=c.getSize().y/2,C=c.distance(c.containerPointToLatLng([0,v]),c.containerPointToLatLng([this.options.maxWidth,v]));this._updateScales(C)},_updateScales:function(c){this.options.metric&&c&&this._updateMetric(c),this.options.imperial&&c&&this._updateImperial(c)},_updateMetric:function(c){var v=this._getRoundNum(c),C=v<1e3?v+" m":v/1e3+" km";this._updateScale(this._mScale,C,v/c)},_updateImperial:function(c){var v=c*3.2808399,C,I,q;v>5280?(C=v/5280,I=this._getRoundNum(C),this._updateScale(this._iScale,I+" mi",I/C)):(q=this._getRoundNum(v),this._updateScale(this._iScale,q+" ft",q/v))},_updateScale:function(c,v,C){c.style.width=Math.round(this.options.maxWidth*C)+"px",c.innerHTML=v},_getRoundNum:function(c){var v=Math.pow(10,(Math.floor(c)+"").length-1),C=c/v;return C=C>=10?10:C>=5?5:C>=3?3:C>=2?2:1,v*C}}),Es=function(c){return new ln(c)},Aa='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Yo=Pr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Re.inlineSvg?Aa+" ":"")+"Leaflet</a>"},initialize:function(c){ae(this,c),this._attributions={}},onAdd:function(c){c.attributionControl=this,this._container=oi("div","leaflet-control-attribution"),_n(this._container);for(var v in c._layers)c._layers[v].getAttribution&&this.addAttribution(c._layers[v].getAttribution());return this._update(),c.on("layeradd",this._addAttribution,this),this._container},onRemove:function(c){c.off("layeradd",this._addAttribution,this)},_addAttribution:function(c){c.layer.getAttribution&&(this.addAttribution(c.layer.getAttribution()),c.layer.once("remove",function(){this.removeAttribution(c.layer.getAttribution())},this))},setPrefix:function(c){return this.options.prefix=c,this._update(),this},addAttribution:function(c){return c?(this._attributions[c]||(this._attributions[c]=0),this._attributions[c]++,this._update(),this):this},removeAttribution:function(c){return c?(this._attributions[c]&&(this._attributions[c]--,this._update()),this):this},_update:function(){if(this._map){var c=[];for(var v in this._attributions)this._attributions[v]&&c.push(v);var C=[];this.options.prefix&&C.push(this.options.prefix),c.length&&C.push(c.join(", ")),this._container.innerHTML=C.join(' <span aria-hidden="true">|</span> ')}}});Zt.mergeOptions({attributionControl:!0}),Zt.addInitHook(function(){this.options.attributionControl&&new Yo().addTo(this)});var co=function(c){return new Yo(c)};Pr.Layers=Ot,Pr.Zoom=Jt,Pr.Scale=ln,Pr.Attribution=Yo,Wt.layers=Ps,Wt.zoom=lo,Wt.scale=Es,Wt.attribution=co;var vn=Tt.extend({initialize:function(c){this._map=c},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});vn.addTo=function(c,v){return c.addHandler(v,this),this};var qu={Events:ti},zl=Re.touch?"touchstart mousedown":"mousedown",Wi=ii.extend({options:{clickTolerance:3},initialize:function(c,v,C,I){ae(this,I),this._element=c,this._dragStartTarget=v||c,this._preventOutline=C},enable:function(){this._enabled||(bt(this._dragStartTarget,zl,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Wi._dragging===this&&this.finishDrag(!0),ct(this._dragStartTarget,zl,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(c){if(this._enabled&&(this._moved=!1,!Uo(this._element,"leaflet-zoom-anim"))){if(c.touches&&c.touches.length!==1){Wi._dragging===this&&this.finishDrag();return}if(!(Wi._dragging||c.shiftKey||c.which!==1&&c.button!==1&&!c.touches)&&(Wi._dragging=this,this._preventOutline&&Rt(this._element),ao(),sa(),!this._moving)){this.fire("down");var v=c.touches?c.touches[0]:c,C=fc(this._element);this._startPoint=new _t(v.clientX,v.clientY),this._startPos=Ka(this._element),this._parentScale=so(C);var I=c.type==="mousedown";bt(document,I?"mousemove":"touchmove",this._onMove,this),bt(document,I?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(c){if(this._enabled){if(c.touches&&c.touches.length>1){this._moved=!0;return}var v=c.touches&&c.touches.length===1?c.touches[0]:c,C=new _t(v.clientX,v.clientY)._subtract(this._startPoint);!C.x&&!C.y||Math.abs(C.x)+Math.abs(C.y)<this.options.clickTolerance||(C.x/=this._parentScale.x,C.y/=this._parentScale.y,Kt(c),this._moved||(this.fire("dragstart"),this._moved=!0,Nt(document.body,"leaflet-dragging"),this._lastTarget=c.target||c.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Nt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(C),this._moving=!0,this._lastEvent=c,this._updatePosition())}},_updatePosition:function(){var c={originalEvent:this._lastEvent};this.fire("predrag",c),Vi(this._element,this._newPos),this.fire("drag",c)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(c){qi(document.body,"leaflet-dragging"),this._lastTarget&&(qi(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ct(document,"mousemove touchmove",this._onMove,this),ct(document,"mouseup touchend touchcancel",this._onUp,this),Ja(),Ca();var v=this._moved&&this._moving;this._moving=!1,Wi._dragging=!1,v&&this.fire("dragend",{noInertia:c,distance:this._newPos.distanceTo(this._startPos)})}});function zn(c,v,C){var I,q=[1,4,2,8],Q,_e,Ae,qe,Qe,ht,Mt,Yt;for(Q=0,ht=c.length;Q<ht;Q++)c[Q]._code=ca(c[Q],v);for(Ae=0;Ae<4;Ae++){for(Mt=q[Ae],I=[],Q=0,ht=c.length,_e=ht-1;Q<ht;_e=Q++)qe=c[Q],Qe=c[_e],qe._code&Mt?Qe._code&Mt||(Yt=la(Qe,qe,Mt,v,C),Yt._code=ca(Yt,v),I.push(Yt)):(Qe._code&Mt&&(Yt=la(Qe,qe,Mt,v,C),Yt._code=ca(Yt,v),I.push(Yt)),I.push(qe));c=I}return c}function ki(c,v){var C,I,q,Q,_e,Ae,qe,Qe,ht;if(!c||c.length===0)throw new Error("latlngs not passed");br(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var Mt=Ft([0,0]),Yt=Ci(c),or=Yt.getNorthWest().distanceTo(Yt.getSouthWest())*Yt.getNorthEast().distanceTo(Yt.getNorthWest());or<1700&&(Mt=oa(c));var Ji=c.length,hn=[];for(C=0;C<Ji;C++){var qr=Ft(c[C]);hn.push(v.project(Ft([qr.lat-Mt.lat,qr.lng-Mt.lng])))}for(Ae=qe=Qe=0,C=0,I=Ji-1;C<Ji;I=C++)q=hn[C],Q=hn[I],_e=q.y*Q.x-Q.y*q.x,qe+=(q.x+Q.x)*_e,Qe+=(q.y+Q.y)*_e,Ae+=_e*3;Ae===0?ht=hn[0]:ht=[qe/Ae,Qe/Ae];var Kn=v.unproject(kt(ht));return Ft([Kn.lat+Mt.lat,Kn.lng+Mt.lng])}function oa(c){for(var v=0,C=0,I=0,q=0;q<c.length;q++){var Q=Ft(c[q]);v+=Q.lat,C+=Q.lng,I++}return Ft([v/I,C/I])}var Ll={__proto__:null,clipPolygon:zn,polygonCenter:ki,centroid:oa};function As(c,v){if(!v||!c.length)return c.slice();var C=v*v;return c=Vu(c,C),c=Ol(c,C),c}function Ii(c,v,C){return Math.sqrt($n(c,v,C,!0))}function gc(c,v,C){return $n(c,v,C)}function Ol(c,v){var C=c.length,I=typeof Uint8Array<"u"?Uint8Array:Array,q=new I(C);q[0]=q[C-1]=1,Xo(c,q,v,0,C-1);var Q,_e=[];for(Q=0;Q<C;Q++)q[Q]&&_e.push(c[Q]);return _e}function Xo(c,v,C,I,q){var Q=0,_e,Ae,qe;for(Ae=I+1;Ae<=q-1;Ae++)qe=$n(c[Ae],c[I],c[q],!0),qe>Q&&(_e=Ae,Q=qe);Q>C&&(v[_e]=1,Xo(c,v,C,I,_e),Xo(c,v,C,_e,q))}function Vu(c,v){for(var C=[c[0]],I=1,q=0,Q=c.length;I<Q;I++)ho(c[I],c[q])>v&&(C.push(c[I]),q=I);return q<Q-1&&C.push(c[Q-1]),C}var Qa;function uo(c,v,C,I,q){var Q=I?Qa:ca(c,C),_e=ca(v,C),Ae,qe,Qe;for(Qa=_e;;){if(!(Q|_e))return[c,v];if(Q&_e)return!1;Ae=Q||_e,qe=la(c,v,Ae,C,q),Qe=ca(qe,C),Ae===Q?(c=qe,Q=Qe):(v=qe,_e=Qe)}}function la(c,v,C,I,q){var Q=v.x-c.x,_e=v.y-c.y,Ae=I.min,qe=I.max,Qe,ht;return C&8?(Qe=c.x+Q*(qe.y-c.y)/_e,ht=qe.y):C&4?(Qe=c.x+Q*(Ae.y-c.y)/_e,ht=Ae.y):C&2?(Qe=qe.x,ht=c.y+_e*(qe.x-c.x)/Q):C&1&&(Qe=Ae.x,ht=c.y+_e*(Ae.x-c.x)/Q),new _t(Qe,ht,q)}function ca(c,v){var C=0;return c.x<v.min.x?C|=1:c.x>v.max.x&&(C|=2),c.y<v.min.y?C|=4:c.y>v.max.y&&(C|=8),C}function ho(c,v){var C=v.x-c.x,I=v.y-c.y;return C*C+I*I}function $n(c,v,C,I){var q=v.x,Q=v.y,_e=C.x-q,Ae=C.y-Q,qe=_e*_e+Ae*Ae,Qe;return qe>0&&(Qe=((c.x-q)*_e+(c.y-Q)*Ae)/qe,Qe>1?(q=C.x,Q=C.y):Qe>0&&(q+=_e*Qe,Q+=Ae*Qe)),_e=c.x-q,Ae=c.y-Q,I?_e*_e+Ae*Ae:new _t(q,Q)}function br(c){return!xe(c[0])||typeof c[0][0]!="object"&&typeof c[0][0]<"u"}function Ki(c){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),br(c)}function Dl(c,v){var C,I,q,Q,_e,Ae,qe,Qe;if(!c||c.length===0)throw new Error("latlngs not passed");br(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var ht=Ft([0,0]),Mt=Ci(c),Yt=Mt.getNorthWest().distanceTo(Mt.getSouthWest())*Mt.getNorthEast().distanceTo(Mt.getNorthWest());Yt<1700&&(ht=oa(c));var or=c.length,Ji=[];for(C=0;C<or;C++){var hn=Ft(c[C]);Ji.push(v.project(Ft([hn.lat-ht.lat,hn.lng-ht.lng])))}for(C=0,I=0;C<or-1;C++)I+=Ji[C].distanceTo(Ji[C+1])/2;if(I===0)Qe=Ji[0];else for(C=0,Q=0;C<or-1;C++)if(_e=Ji[C],Ae=Ji[C+1],q=_e.distanceTo(Ae),Q+=q,Q>I){qe=(Q-I)/q,Qe=[Ae.x-qe*(Ae.x-_e.x),Ae.y-qe*(Ae.y-_e.y)];break}var qr=v.unproject(kt(Qe));return Ft([qr.lat+ht.lat,qr.lng+ht.lng])}var Ms={__proto__:null,simplify:As,pointToSegmentDistance:Ii,closestPointOnSegment:gc,clipSegment:uo,_getEdgeIntersection:la,_getBitCode:ca,_sqClosestPointOnSegment:$n,isFlat:br,_flat:Ki,polylineCenter:Dl},es={project:function(c){return new _t(c.lng,c.lat)},unproject:function(c){return new qt(c.y,c.x)},bounds:new ni([-180,-90],[180,90])},ua={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ni([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(c){var v=Math.PI/180,C=this.R,I=c.lat*v,q=this.R_MINOR/C,Q=Math.sqrt(1-q*q),_e=Q*Math.sin(I),Ae=Math.tan(Math.PI/4-I/2)/Math.pow((1-_e)/(1+_e),Q/2);return I=-C*Math.log(Math.max(Ae,1e-10)),new _t(c.lng*v*C,I)},unproject:function(c){for(var v=180/Math.PI,C=this.R,I=this.R_MINOR/C,q=Math.sqrt(1-I*I),Q=Math.exp(-c.y/C),_e=Math.PI/2-2*Math.atan(Q),Ae=0,qe=.1,Qe;Ae<15&&Math.abs(qe)>1e-7;Ae++)Qe=q*Math.sin(_e),Qe=Math.pow((1-Qe)/(1+Qe),q/2),qe=Math.PI/2-2*Math.atan(Q*Qe)-_e,_e+=qe;return new qt(_e*v,c.x*v/C)}},Wu={__proto__:null,LonLat:es,Mercator:ua,SphericalMercator:nn},Ko=p({},ji,{code:"EPSG:3395",projection:ua,transformation:(function(){var c=.5/(Math.PI*ua.R);return Rr(c,.5,-c,.5)})()}),yc=p({},ji,{code:"EPSG:4326",projection:es,transformation:Rr(1/180,1,-1/180,.5)}),Is=p({},gr,{projection:es,transformation:Rr(1,0,-1,0),scale:function(c){return Math.pow(2,c)},zoom:function(c){return Math.log(c)/Math.LN2},distance:function(c,v){var C=v.lng-c.lng,I=v.lat-c.lat;return Math.sqrt(C*C+I*I)},infinite:!0});gr.Earth=ji,gr.EPSG3395=Ko,gr.EPSG3857=Ua,gr.EPSG900913=cr,gr.EPSG4326=yc,gr.Simple=Is;var Xr=ii.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(c){return c.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(c){return c&&c.removeLayer(this),this},getPane:function(c){return this._map.getPane(c?this.options[c]||c:this.options.pane)},addInteractiveTarget:function(c){return this._map._targets[T(c)]=this,this},removeInteractiveTarget:function(c){return delete this._map._targets[T(c)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(c){var v=c.target;if(v.hasLayer(this)){if(this._map=v,this._zoomAnimated=v._zoomAnimated,this.getEvents){var C=this.getEvents();v.on(C,this),this.once("remove",function(){v.off(C,this)},this)}this.onAdd(v),this.fire("add"),v.fire("layeradd",{layer:this})}}});Zt.include({addLayer:function(c){if(!c._layerAdd)throw new Error("The provided object is not a Layer.");var v=T(c);return this._layers[v]?this:(this._layers[v]=c,c._mapToAdd=this,c.beforeAdd&&c.beforeAdd(this),this.whenReady(c._layerAdd,c),this)},removeLayer:function(c){var v=T(c);return this._layers[v]?(this._loaded&&c.onRemove(this),delete this._layers[v],this._loaded&&(this.fire("layerremove",{layer:c}),c.fire("remove")),c._map=c._mapToAdd=null,this):this},hasLayer:function(c){return T(c)in this._layers},eachLayer:function(c,v){for(var C in this._layers)c.call(v,this._layers[C]);return this},_addLayers:function(c){c=c?xe(c)?c:[c]:[];for(var v=0,C=c.length;v<C;v++)this.addLayer(c[v])},_addZoomLimit:function(c){(!isNaN(c.options.maxZoom)||!isNaN(c.options.minZoom))&&(this._zoomBoundLayers[T(c)]=c,this._updateZoomLevels())},_removeZoomLimit:function(c){var v=T(c);this._zoomBoundLayers[v]&&(delete this._zoomBoundLayers[v],this._updateZoomLevels())},_updateZoomLevels:function(){var c=1/0,v=-1/0,C=this._getZoomSpan();for(var I in this._zoomBoundLayers){var q=this._zoomBoundLayers[I].options;c=q.minZoom===void 0?c:Math.min(c,q.minZoom),v=q.maxZoom===void 0?v:Math.max(v,q.maxZoom)}this._layersMaxZoom=v===-1/0?void 0:v,this._layersMinZoom=c===1/0?void 0:c,C!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ts=Xr.extend({initialize:function(c,v){ae(this,v),this._layers={};var C,I;if(c)for(C=0,I=c.length;C<I;C++)this.addLayer(c[C])},addLayer:function(c){var v=this.getLayerId(c);return this._layers[v]=c,this._map&&this._map.addLayer(c),this},removeLayer:function(c){var v=c in this._layers?c:this.getLayerId(c);return this._map&&this._layers[v]&&this._map.removeLayer(this._layers[v]),delete this._layers[v],this},hasLayer:function(c){var v=typeof c=="number"?c:this.getLayerId(c);return v in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(c){var v=Array.prototype.slice.call(arguments,1),C,I;for(C in this._layers)I=this._layers[C],I[c]&&I[c].apply(I,v);return this},onAdd:function(c){this.eachLayer(c.addLayer,c)},onRemove:function(c){this.eachLayer(c.removeLayer,c)},eachLayer:function(c,v){for(var C in this._layers)c.call(v,this._layers[C]);return this},getLayer:function(c){return this._layers[c]},getLayers:function(){var c=[];return this.eachLayer(c.push,c),c},setZIndex:function(c){return this.invoke("setZIndex",c)},getLayerId:function(c){return T(c)}}),_c=function(c,v){return new ts(c,v)},Ln=ts.extend({addLayer:function(c){return this.hasLayer(c)?this:(c.addEventParent(this),ts.prototype.addLayer.call(this,c),this.fire("layeradd",{layer:c}))},removeLayer:function(c){return this.hasLayer(c)?(c in this._layers&&(c=this._layers[c]),c.removeEventParent(this),ts.prototype.removeLayer.call(this,c),this.fire("layerremove",{layer:c})):this},setStyle:function(c){return this.invoke("setStyle",c)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var c=new tr;for(var v in this._layers){var C=this._layers[v];c.extend(C.getBounds?C.getBounds():C.getLatLng())}return c}}),Rl=function(c,v){return new Ln(c,v)},Ma=Tt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(c){ae(this,c)},createIcon:function(c){return this._createIcon("icon",c)},createShadow:function(c){return this._createIcon("shadow",c)},_createIcon:function(c,v){var C=this._getIconUrl(c);if(!C){if(c==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var I=this._createImg(C,v&&v.tagName==="IMG"?v:null);return this._setIconStyles(I,c),(this.options.crossOrigin||this.options.crossOrigin==="")&&(I.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),I},_setIconStyles:function(c,v){var C=this.options,I=C[v+"Size"];typeof I=="number"&&(I=[I,I]);var q=kt(I),Q=kt(v==="shadow"&&C.shadowAnchor||C.iconAnchor||q&&q.divideBy(2,!0));c.className="leaflet-marker-"+v+" "+(C.className||""),Q&&(c.style.marginLeft=-Q.x+"px",c.style.marginTop=-Q.y+"px"),q&&(c.style.width=q.x+"px",c.style.height=q.y+"px")},_createImg:function(c,v){return v=v||document.createElement("img"),v.src=c,v},_getIconUrl:function(c){return Re.retina&&this.options[c+"RetinaUrl"]||this.options[c+"Url"]}});function vc(c){return new Ma(c)}var zs=Ma.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(c){return typeof zs.imagePath!="string"&&(zs.imagePath=this._detectIconPath()),(this.options.imagePath||zs.imagePath)+Ma.prototype._getIconUrl.call(this,c)},_stripUrl:function(c){var v=function(C,I,q){var Q=I.exec(C);return Q&&Q[q]};return c=v(c,/^url\((['"])?(.+)\1\)$/,2),c&&v(c,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var c=oi("div","leaflet-default-icon-path",document.body),v=Fr(c,"background-image")||Fr(c,"backgroundImage");if(document.body.removeChild(c),v=this._stripUrl(v),v)return v;var C=document.querySelector('link[href$="leaflet.css"]');return C?C.href.substring(0,C.href.length-11-1):""}}),Bl=vn.extend({initialize:function(c){this._marker=c},addHooks:function(){var c=this._marker._icon;this._draggable||(this._draggable=new Wi(c,c,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Nt(c,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&qi(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(c){var v=this._marker,C=v._map,I=this._marker.options.autoPanSpeed,q=this._marker.options.autoPanPadding,Q=Ka(v._icon),_e=C.getPixelBounds(),Ae=C.getPixelOrigin(),qe=Yi(_e.min._subtract(Ae).add(q),_e.max._subtract(Ae).subtract(q));if(!qe.contains(Q)){var Qe=kt((Math.max(qe.max.x,Q.x)-qe.max.x)/(_e.max.x-qe.max.x)-(Math.min(qe.min.x,Q.x)-qe.min.x)/(_e.min.x-qe.min.x),(Math.max(qe.max.y,Q.y)-qe.max.y)/(_e.max.y-qe.max.y)-(Math.min(qe.min.y,Q.y)-qe.min.y)/(_e.min.y-qe.min.y)).multiplyBy(I);C.panBy(Qe,{animate:!1}),this._draggable._newPos._add(Qe),this._draggable._startPos._add(Qe),Vi(v._icon,this._draggable._newPos),this._onDrag(c),this._panRequest=ot(this._adjustPan.bind(this,c))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(c){this._marker.options.autoPan&&(St(this._panRequest),this._panRequest=ot(this._adjustPan.bind(this,c)))},_onDrag:function(c){var v=this._marker,C=v._shadow,I=Ka(v._icon),q=v._map.layerPointToLatLng(I);C&&Vi(C,I),v._latlng=q,c.latlng=q,c.oldLatLng=this._oldLatLng,v.fire("move",c).fire("drag",c)},_onDragEnd:function(c){St(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",c)}}),Hn=Xr.extend({options:{icon:new zs,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(c,v){ae(this,v),this._latlng=Ft(c)},onAdd:function(c){this._zoomAnimated=this._zoomAnimated&&c.options.markerZoomAnimation,this._zoomAnimated&&c.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(c){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&c.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(c){var v=this._latlng;return this._latlng=Ft(c),this.update(),this.fire("move",{oldLatLng:v,latlng:this._latlng})},setZIndexOffset:function(c){return this.options.zIndexOffset=c,this.update()},getIcon:function(){return this.options.icon},setIcon:function(c){return this.options.icon=c,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var c=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(c)}return this},_initIcon:function(){var c=this.options,v="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),C=c.icon.createIcon(this._icon),I=!1;C!==this._icon&&(this._icon&&this._removeIcon(),I=!0,c.title&&(C.title=c.title),C.tagName==="IMG"&&(C.alt=c.alt||"")),Nt(C,v),c.keyboard&&(C.tabIndex="0",C.setAttribute("role","button")),this._icon=C,c.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&bt(C,"focus",this._panOnFocus,this);var q=c.icon.createShadow(this._shadow),Q=!1;q!==this._shadow&&(this._removeShadow(),Q=!0),q&&(Nt(q,v),q.alt=""),this._shadow=q,c.opacity<1&&this._updateOpacity(),I&&this.getPane().appendChild(this._icon),this._initInteraction(),q&&Q&&this.getPane(c.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ct(this._icon,"focus",this._panOnFocus,this),mi(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&mi(this._shadow),this._shadow=null},_setPos:function(c){this._icon&&Vi(this._icon,c),this._shadow&&Vi(this._shadow,c),this._zIndex=c.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(c){this._icon&&(this._icon.style.zIndex=this._zIndex+c)},_animateZoom:function(c){var v=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center).round();this._setPos(v)},_initInteraction:function(){if(this.options.interactive&&(Nt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Bl)){var c=this.options.draggable;this.dragging&&(c=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Bl(this),c&&this.dragging.enable()}},setOpacity:function(c){return this.options.opacity=c,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var c=this.options.opacity;this._icon&&jr(this._icon,c),this._shadow&&jr(this._shadow,c)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var c=this._map;if(c){var v=this.options.icon.options,C=v.iconSize?kt(v.iconSize):kt(0,0),I=v.iconAnchor?kt(v.iconAnchor):kt(0,0);c.panInside(this._latlng,{paddingTopLeft:I,paddingBottomRight:C.subtract(I)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function bc(c,v){return new Hn(c,v)}var Yn=Xr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(c){this._renderer=c.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(c){return ae(this,c),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&c&&Object.prototype.hasOwnProperty.call(c,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ha=Yn.extend({options:{fill:!0,radius:10},initialize:function(c,v){ae(this,v),this._latlng=Ft(c),this._radius=this.options.radius},setLatLng:function(c){var v=this._latlng;return this._latlng=Ft(c),this.redraw(),this.fire("move",{oldLatLng:v,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(c){return this.options.radius=this._radius=c,this.redraw()},getRadius:function(){return this._radius},setStyle:function(c){var v=c&&c.radius||this._radius;return Yn.prototype.setStyle.call(this,c),this.setRadius(v),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var c=this._radius,v=this._radiusY||c,C=this._clickTolerance(),I=[c+C,v+C];this._pxBounds=new ni(this._point.subtract(I),this._point.add(I))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(c){return c.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function xc(c,v){return new ha(c,v)}var Ls=ha.extend({initialize:function(c,v,C){if(typeof v=="number"&&(v=p({},C,{radius:v})),ae(this,v),this._latlng=Ft(c),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(c){return this._mRadius=c,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var c=[this._radius,this._radiusY||this._radius];return new tr(this._map.layerPointToLatLng(this._point.subtract(c)),this._map.layerPointToLatLng(this._point.add(c)))},setStyle:Yn.prototype.setStyle,_project:function(){var c=this._latlng.lng,v=this._latlng.lat,C=this._map,I=C.options.crs;if(I.distance===ji.distance){var q=Math.PI/180,Q=this._mRadius/ji.R/q,_e=C.project([v+Q,c]),Ae=C.project([v-Q,c]),qe=_e.add(Ae).divideBy(2),Qe=C.unproject(qe).lat,ht=Math.acos((Math.cos(Q*q)-Math.sin(v*q)*Math.sin(Qe*q))/(Math.cos(v*q)*Math.cos(Qe*q)))/q;(isNaN(ht)||ht===0)&&(ht=Q/Math.cos(Math.PI/180*v)),this._point=qe.subtract(C.getPixelOrigin()),this._radius=isNaN(ht)?0:qe.x-C.project([Qe,c-ht]).x,this._radiusY=qe.y-_e.y}else{var Mt=I.unproject(I.project(this._latlng).subtract([this._mRadius,0]));this._point=C.latLngToLayerPoint(this._latlng),this._radius=this._point.x-C.latLngToLayerPoint(Mt).x}this._updateBounds()}});function Gu(c,v,C){return new Ls(c,v,C)}var da=Yn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(c,v){ae(this,v),this._setLatLngs(c)},getLatLngs:function(){return this._latlngs},setLatLngs:function(c){return this._setLatLngs(c),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(c){for(var v=1/0,C=null,I=$n,q,Q,_e=0,Ae=this._parts.length;_e<Ae;_e++)for(var qe=this._parts[_e],Qe=1,ht=qe.length;Qe<ht;Qe++){q=qe[Qe-1],Q=qe[Qe];var Mt=I(c,q,Q,!0);Mt<v&&(v=Mt,C=I(c,q,Q))}return C&&(C.distance=Math.sqrt(v)),C},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Dl(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(c,v){return v=v||this._defaultShape(),c=Ft(c),v.push(c),this._bounds.extend(c),this.redraw()},_setLatLngs:function(c){this._bounds=new tr,this._latlngs=this._convertLatLngs(c)},_defaultShape:function(){return br(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(c){for(var v=[],C=br(c),I=0,q=c.length;I<q;I++)C?(v[I]=Ft(c[I]),this._bounds.extend(v[I])):v[I]=this._convertLatLngs(c[I]);return v},_project:function(){var c=new ni;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,c),this._bounds.isValid()&&c.isValid()&&(this._rawPxBounds=c,this._updateBounds())},_updateBounds:function(){var c=this._clickTolerance(),v=new _t(c,c);this._rawPxBounds&&(this._pxBounds=new ni([this._rawPxBounds.min.subtract(v),this._rawPxBounds.max.add(v)]))},_projectLatlngs:function(c,v,C){var I=c[0]instanceof qt,q=c.length,Q,_e;if(I){for(_e=[],Q=0;Q<q;Q++)_e[Q]=this._map.latLngToLayerPoint(c[Q]),C.extend(_e[Q]);v.push(_e)}else for(Q=0;Q<q;Q++)this._projectLatlngs(c[Q],v,C)},_clipPoints:function(){var c=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(c))){if(this.options.noClip){this._parts=this._rings;return}var v=this._parts,C,I,q,Q,_e,Ae,qe;for(C=0,q=0,Q=this._rings.length;C<Q;C++)for(qe=this._rings[C],I=0,_e=qe.length;I<_e-1;I++)Ae=uo(qe[I],qe[I+1],c,I,!0),Ae&&(v[q]=v[q]||[],v[q].push(Ae[0]),(Ae[1]!==qe[I+1]||I===_e-2)&&(v[q].push(Ae[1]),q++))}},_simplifyPoints:function(){for(var c=this._parts,v=this.options.smoothFactor,C=0,I=c.length;C<I;C++)c[C]=As(c[C],v)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(c,v){var C,I,q,Q,_e,Ae,qe=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(C=0,Q=this._parts.length;C<Q;C++)for(Ae=this._parts[C],I=0,_e=Ae.length,q=_e-1;I<_e;q=I++)if(!(!v&&I===0)&&Ii(c,Ae[q],Ae[I])<=qe)return!0;return!1}});function wc(c,v){return new da(c,v)}da._flat=Ki;var Xn=da.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ki(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(c){var v=da.prototype._convertLatLngs.call(this,c),C=v.length;return C>=2&&v[0]instanceof qt&&v[0].equals(v[C-1])&&v.pop(),v},_setLatLngs:function(c){da.prototype._setLatLngs.call(this,c),br(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return br(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var c=this._renderer._bounds,v=this.options.weight,C=new _t(v,v);if(c=new ni(c.min.subtract(C),c.max.add(C)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(c))){if(this.options.noClip){this._parts=this._rings;return}for(var I=0,q=this._rings.length,Q;I<q;I++)Q=zn(this._rings[I],c,!0),Q.length&&this._parts.push(Q)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(c){var v=!1,C,I,q,Q,_e,Ae,qe,Qe;if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(Q=0,qe=this._parts.length;Q<qe;Q++)for(C=this._parts[Q],_e=0,Qe=C.length,Ae=Qe-1;_e<Qe;Ae=_e++)I=C[_e],q=C[Ae],I.y>c.y!=q.y>c.y&&c.x<(q.x-I.x)*(c.y-I.y)/(q.y-I.y)+I.x&&(v=!v);return v||da.prototype._containsPoint.call(this,c,!0)}});function Sc(c,v){return new Xn(c,v)}var On=Ln.extend({initialize:function(c,v){ae(this,v),this._layers={},c&&this.addData(c)},addData:function(c){var v=xe(c)?c:c.features,C,I,q;if(v){for(C=0,I=v.length;C<I;C++)q=v[C],(q.geometries||q.geometry||q.features||q.coordinates)&&this.addData(q);return this}var Q=this.options;if(Q.filter&&!Q.filter(c))return this;var _e=po(c,Q);return _e?(_e.feature=rs(c),_e.defaultOptions=_e.options,this.resetStyle(_e),Q.onEachFeature&&Q.onEachFeature(c,_e),this.addLayer(_e)):this},resetStyle:function(c){return c===void 0?this.eachLayer(this.resetStyle,this):(c.options=p({},c.defaultOptions),this._setLayerStyle(c,this.options.style),this)},setStyle:function(c){return this.eachLayer(function(v){this._setLayerStyle(v,c)},this)},_setLayerStyle:function(c,v){c.setStyle&&(typeof v=="function"&&(v=v(c.feature)),c.setStyle(v))}});function po(c,v){var C=c.type==="Feature"?c.geometry:c,I=C?C.coordinates:null,q=[],Q=v&&v.pointToLayer,_e=v&&v.coordsToLatLng||cn,Ae,qe,Qe,ht;if(!I&&!C)return null;switch(C.type){case"Point":return Ae=_e(I),fo(Q,c,Ae,v);case"MultiPoint":for(Qe=0,ht=I.length;Qe<ht;Qe++)Ae=_e(I[Qe]),q.push(fo(Q,c,Ae,v));return new Ln(q);case"LineString":case"MultiLineString":return qe=is(I,C.type==="LineString"?0:1,_e),new da(qe,v);case"Polygon":case"MultiPolygon":return qe=is(I,C.type==="Polygon"?1:2,_e),new Xn(qe,v);case"GeometryCollection":for(Qe=0,ht=C.geometries.length;Qe<ht;Qe++){var Mt=po({geometry:C.geometries[Qe],type:"Feature",properties:c.properties},v);Mt&&q.push(Mt)}return new Ln(q);case"FeatureCollection":for(Qe=0,ht=C.features.length;Qe<ht;Qe++){var Yt=po(C.features[Qe],v);Yt&&q.push(Yt)}return new Ln(q);default:throw new Error("Invalid GeoJSON object.")}}function fo(c,v,C,I){return c?c(v,C):new Hn(C,I&&I.markersInheritOptions&&I)}function cn(c){return new qt(c[1],c[0],c[2])}function is(c,v,C){for(var I=[],q=0,Q=c.length,_e;q<Q;q++)_e=v?is(c[q],v-1,C):(C||cn)(c[q]),I.push(_e);return I}function mo(c,v){return c=Ft(c),c.alt!==void 0?[J(c.lng,v),J(c.lat,v),J(c.alt,v)]:[J(c.lng,v),J(c.lat,v)]}function Os(c,v,C,I){for(var q=[],Q=0,_e=c.length;Q<_e;Q++)q.push(v?Os(c[Q],br(c[Q])?0:v-1,C,I):mo(c[Q],I));return!v&&C&&q.length>0&&q.push(q[0].slice()),q}function Ia(c,v){return c.feature?p({},c.feature,{geometry:v}):rs(v)}function rs(c){return c.type==="Feature"||c.type==="FeatureCollection"?c:{type:"Feature",properties:{},geometry:c}}var pa={toGeoJSON:function(c){return Ia(this,{type:"Point",coordinates:mo(this.getLatLng(),c)})}};Hn.include(pa),Ls.include(pa),ha.include(pa),da.include({toGeoJSON:function(c){var v=!br(this._latlngs),C=Os(this._latlngs,v?1:0,!1,c);return Ia(this,{type:(v?"Multi":"")+"LineString",coordinates:C})}}),Xn.include({toGeoJSON:function(c){var v=!br(this._latlngs),C=v&&!br(this._latlngs[0]),I=Os(this._latlngs,C?2:v?1:0,!0,c);return v||(I=[I]),Ia(this,{type:(C?"Multi":"")+"Polygon",coordinates:I})}}),ts.include({toMultiPoint:function(c){var v=[];return this.eachLayer(function(C){v.push(C.toGeoJSON(c).geometry.coordinates)}),Ia(this,{type:"MultiPoint",coordinates:v})},toGeoJSON:function(c){var v=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(v==="MultiPoint")return this.toMultiPoint(c);var C=v==="GeometryCollection",I=[];return this.eachLayer(function(q){if(q.toGeoJSON){var Q=q.toGeoJSON(c);if(C)I.push(Q.geometry);else{var _e=rs(Q);_e.type==="FeatureCollection"?I.push.apply(I,_e.features):I.push(_e)}}}),C?Ia(this,{geometries:I,type:"GeometryCollection"}):{type:"FeatureCollection",features:I}}});function Jo(c,v){return new On(c,v)}var Uu=Jo,go=Xr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(c,v,C){this._url=c,this._bounds=Ci(v),ae(this,C)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Nt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){mi(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(c){return this.options.opacity=c,this._image&&this._updateOpacity(),this},setStyle:function(c){return c.opacity&&this.setOpacity(c.opacity),this},bringToFront:function(){return this._map&&wi(this._image),this},bringToBack:function(){return this._map&&Xa(this._image),this},setUrl:function(c){return this._url=c,this._image&&(this._image.src=c),this},setBounds:function(c){return this._bounds=Ci(c),this._map&&this._reset(),this},getEvents:function(){var c={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var c=this._url.tagName==="IMG",v=this._image=c?this._url:oi("img");if(Nt(v,"leaflet-image-layer"),this._zoomAnimated&&Nt(v,"leaflet-zoom-animated"),this.options.className&&Nt(v,this.options.className),v.onselectstart=G,v.onmousemove=G,v.onload=f(this.fire,this,"load"),v.onerror=f(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),c){this._url=v.src;return}v.src=this._url,v.alt=this.options.alt},_animateZoom:function(c){var v=this._map.getZoomScale(c.zoom),C=this._map._latLngBoundsToNewLayerBounds(this._bounds,c.zoom,c.center).min;aa(this._image,C,v)},_reset:function(){var c=this._image,v=new ni(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),C=v.getSize();Vi(c,v.min),c.style.width=C.x+"px",c.style.height=C.y+"px"},_updateOpacity:function(){jr(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var c=this.options.errorOverlayUrl;c&&this._url!==c&&(this._url=c,this._image.src=c)},getCenter:function(){return this._bounds.getCenter()}}),Zu=function(c,v,C){return new go(c,v,C)},Tc=go.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var c=this._url.tagName==="VIDEO",v=this._image=c?this._url:oi("video");if(Nt(v,"leaflet-image-layer"),this._zoomAnimated&&Nt(v,"leaflet-zoom-animated"),this.options.className&&Nt(v,this.options.className),v.onselectstart=G,v.onmousemove=G,v.onloadeddata=f(this.fire,this,"load"),c){for(var C=v.getElementsByTagName("source"),I=[],q=0;q<C.length;q++)I.push(C[q].src);this._url=C.length>0?I:[v.src];return}xe(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(v.style,"objectFit")&&(v.style.objectFit="fill"),v.autoplay=!!this.options.autoplay,v.loop=!!this.options.loop,v.muted=!!this.options.muted,v.playsInline=!!this.options.playsInline;for(var Q=0;Q<this._url.length;Q++){var _e=oi("source");_e.src=this._url[Q],v.appendChild(_e)}}});function Cc(c,v,C){return new Tc(c,v,C)}var kc=go.extend({_initImage:function(){var c=this._image=this._url;Nt(c,"leaflet-image-layer"),this._zoomAnimated&&Nt(c,"leaflet-zoom-animated"),this.options.className&&Nt(c,this.options.className),c.onselectstart=G,c.onmousemove=G}});function ci(c,v,C){return new kc(c,v,C)}var un=Xr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(c,v){c&&(c instanceof qt||xe(c))?(this._latlng=Ft(c),ae(this,v)):(ae(this,c),this._source=v),this.options.content&&(this._content=this.options.content)},openOn:function(c){return c=arguments.length?c:this._source._map,c.hasLayer(this)||c.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(c){return this._map?this.close():(arguments.length?this._source=c:c=this._source,this._prepareOpen(),this.openOn(c._map)),this},onAdd:function(c){this._zoomAnimated=c._zoomAnimated,this._container||this._initLayout(),c._fadeAnimated&&jr(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),c._fadeAnimated&&jr(this._container,1),this.bringToFront(),this.options.interactive&&(Nt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(c){c._fadeAnimated?(jr(this._container,0),this._removeTimeout=setTimeout(f(mi,void 0,this._container),200)):mi(this._container),this.options.interactive&&(qi(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(c){return this._latlng=Ft(c),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(c){return this._content=c,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var c={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&wi(this._container),this},bringToBack:function(){return this._map&&Xa(this._container),this},_prepareOpen:function(c){var v=this._source;if(!v._map)return!1;if(v instanceof Ln){v=null;var C=this._source._layers;for(var I in C)if(C[I]._map){v=C[I];break}if(!v)return!1;this._source=v}if(!c)if(v.getCenter)c=v.getCenter();else if(v.getLatLng)c=v.getLatLng();else if(v.getBounds)c=v.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(c),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var c=this._contentNode,v=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof v=="string")c.innerHTML=v;else{for(;c.hasChildNodes();)c.removeChild(c.firstChild);c.appendChild(v)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var c=this._map.latLngToLayerPoint(this._latlng),v=kt(this.options.offset),C=this._getAnchor();this._zoomAnimated?Vi(this._container,c.add(C)):v=v.add(c).add(C);var I=this._containerBottom=-v.y,q=this._containerLeft=-Math.round(this._containerWidth/2)+v.x;this._container.style.bottom=I+"px",this._container.style.left=q+"px"}},_getAnchor:function(){return[0,0]}});Zt.include({_initOverlay:function(c,v,C,I){var q=v;return q instanceof c||(q=new c(I).setContent(v)),C&&q.setLatLng(C),q}}),Xr.include({_initOverlay:function(c,v,C,I){var q=C;return q instanceof c?(ae(q,I),q._source=this):(q=v&&!I?v:new c(I,this),q.setContent(C)),q}});var ns=un.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(c){return c=arguments.length?c:this._source._map,!c.hasLayer(this)&&c._popup&&c._popup.options.autoClose&&c.removeLayer(c._popup),c._popup=this,un.prototype.openOn.call(this,c)},onAdd:function(c){un.prototype.onAdd.call(this,c),c.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Yn||this._source.on("preclick",Xi))},onRemove:function(c){un.prototype.onRemove.call(this,c),c.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Yn||this._source.off("preclick",Xi))},getEvents:function(){var c=un.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(c.preclick=this.close),this.options.keepInView&&(c.moveend=this._adjustPan),c},_initLayout:function(){var c="leaflet-popup",v=this._container=oi("div",c+" "+(this.options.className||"")+" leaflet-zoom-animated"),C=this._wrapper=oi("div",c+"-content-wrapper",v);if(this._contentNode=oi("div",c+"-content",C),_n(v),Pa(this._contentNode),bt(v,"contextmenu",Xi),this._tipContainer=oi("div",c+"-tip-container",v),this._tip=oi("div",c+"-tip",this._tipContainer),this.options.closeButton){var I=this._closeButton=oi("a",c+"-close-button",v);I.setAttribute("role","button"),I.setAttribute("aria-label","Close popup"),I.href="#close",I.innerHTML='<span aria-hidden="true">&#215;</span>',bt(I,"click",function(q){Kt(q),this.close()},this)}},_updateLayout:function(){var c=this._contentNode,v=c.style;v.width="",v.whiteSpace="nowrap";var C=c.offsetWidth;C=Math.min(C,this.options.maxWidth),C=Math.max(C,this.options.minWidth),v.width=C+1+"px",v.whiteSpace="",v.height="";var I=c.offsetHeight,q=this.options.maxHeight,Q="leaflet-popup-scrolled";q&&I>q?(v.height=q+"px",Nt(c,Q)):qi(c,Q),this._containerWidth=this._container.offsetWidth},_animateZoom:function(c){var v=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center),C=this._getAnchor();Vi(this._container,v.add(C))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var c=this._map,v=parseInt(Fr(this._container,"marginBottom"),10)||0,C=this._container.offsetHeight+v,I=this._containerWidth,q=new _t(this._containerLeft,-C-this._containerBottom);q._add(Ka(this._container));var Q=c.layerPointToContainerPoint(q),_e=kt(this.options.autoPanPadding),Ae=kt(this.options.autoPanPaddingTopLeft||_e),qe=kt(this.options.autoPanPaddingBottomRight||_e),Qe=c.getSize(),ht=0,Mt=0;Q.x+I+qe.x>Qe.x&&(ht=Q.x+I-Qe.x+qe.x),Q.x-ht-Ae.x<0&&(ht=Q.x-Ae.x),Q.y+C+qe.y>Qe.y&&(Mt=Q.y+C-Qe.y+qe.y),Q.y-Mt-Ae.y<0&&(Mt=Q.y-Ae.y),(ht||Mt)&&(this.options.keepInView&&(this._autopanning=!0),c.fire("autopanstart").panBy([ht,Mt]))}},_getAnchor:function(){return kt(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Qo=function(c,v){return new ns(c,v)};Zt.mergeOptions({closePopupOnClick:!0}),Zt.include({openPopup:function(c,v,C){return this._initOverlay(ns,c,v,C).openOn(this),this},closePopup:function(c){return c=arguments.length?c:this._popup,c&&c.close(),this}}),Xr.include({bindPopup:function(c,v){return this._popup=this._initOverlay(ns,this._popup,c,v),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(c){return this._popup&&(this instanceof Ln||(this._popup._source=this),this._popup._prepareOpen(c||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(c){return this._popup&&this._popup.setContent(c),this},getPopup:function(){return this._popup},_openPopup:function(c){if(!(!this._popup||!this._map)){on(c);var v=c.layer||c.target;if(this._popup._source===v&&!(v instanceof Yn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(c.latlng);return}this._popup._source=v,this.openPopup(c.latlng)}},_movePopup:function(c){this._popup.setLatLng(c.latlng)},_onKeyPress:function(c){c.originalEvent.keyCode===13&&this._openPopup(c)}});var Ds=un.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(c){un.prototype.onAdd.call(this,c),this.setOpacity(this.options.opacity),c.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(c){un.prototype.onRemove.call(this,c),c.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var c=un.prototype.getEvents.call(this);return this.options.permanent||(c.preclick=this.close),c},_initLayout:function(){var c="leaflet-tooltip",v=c+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=oi("div",v),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+T(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(c){var v,C,I=this._map,q=this._container,Q=I.latLngToContainerPoint(I.getCenter()),_e=I.layerPointToContainerPoint(c),Ae=this.options.direction,qe=q.offsetWidth,Qe=q.offsetHeight,ht=kt(this.options.offset),Mt=this._getAnchor();Ae==="top"?(v=qe/2,C=Qe):Ae==="bottom"?(v=qe/2,C=0):Ae==="center"?(v=qe/2,C=Qe/2):Ae==="right"?(v=0,C=Qe/2):Ae==="left"?(v=qe,C=Qe/2):_e.x<Q.x?(Ae="right",v=0,C=Qe/2):(Ae="left",v=qe+(ht.x+Mt.x)*2,C=Qe/2),c=c.subtract(kt(v,C,!0)).add(ht).add(Mt),qi(q,"leaflet-tooltip-right"),qi(q,"leaflet-tooltip-left"),qi(q,"leaflet-tooltip-top"),qi(q,"leaflet-tooltip-bottom"),Nt(q,"leaflet-tooltip-"+Ae),Vi(q,c)},_updatePosition:function(){var c=this._map.latLngToLayerPoint(this._latlng);this._setPosition(c)},setOpacity:function(c){this.options.opacity=c,this._container&&jr(this._container,c)},_animateZoom:function(c){var v=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center);this._setPosition(v)},_getAnchor:function(){return kt(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),as=function(c,v){return new Ds(c,v)};Zt.include({openTooltip:function(c,v,C){return this._initOverlay(Ds,c,v,C).openOn(this),this},closeTooltip:function(c){return c.close(),this}}),Xr.include({bindTooltip:function(c,v){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ds,this._tooltip,c,v),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(c){if(!(!c&&this._tooltipHandlersAdded)){var v=c?"off":"on",C={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?C.add=this._openTooltip:(C.mouseover=this._openTooltip,C.mouseout=this.closeTooltip,C.click=this._openTooltip,this._map?this._addFocusListeners():C.add=this._addFocusListeners),this._tooltip.options.sticky&&(C.mousemove=this._moveTooltip),this[v](C),this._tooltipHandlersAdded=!c}},openTooltip:function(c){return this._tooltip&&(this instanceof Ln||(this._tooltip._source=this),this._tooltip._prepareOpen(c)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(c){return this._tooltip&&this._tooltip.setContent(c),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(c){var v=typeof c.getElement=="function"&&c.getElement();v&&(bt(v,"focus",function(){this._tooltip._source=c,this.openTooltip()},this),bt(v,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(c){var v=typeof c.getElement=="function"&&c.getElement();v&&v.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(c){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var v=this;this._map.once("moveend",function(){v._openOnceFlag=!1,v._openTooltip(c)});return}this._tooltip._source=c.layer||c.target,this.openTooltip(this._tooltip.options.sticky?c.latlng:void 0)}},_moveTooltip:function(c){var v=c.latlng,C,I;this._tooltip.options.sticky&&c.originalEvent&&(C=this._map.mouseEventToContainerPoint(c.originalEvent),I=this._map.containerPointToLayerPoint(C),v=this._map.layerPointToLatLng(I)),this._tooltip.setLatLng(v)}});var Rs=Ma.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(c){var v=c&&c.tagName==="DIV"?c:document.createElement("div"),C=this.options;if(C.html instanceof Element?(Ya(v),v.appendChild(C.html)):v.innerHTML=C.html!==!1?C.html:"",C.bgPos){var I=kt(C.bgPos);v.style.backgroundPosition=-I.x+"px "+-I.y+"px"}return this._setIconStyles(v,"icon"),v},createShadow:function(){return null}});function Bs(c){return new Rs(c)}Ma.Default=zs;var Er=Xr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Re.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(c){ae(this,c)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(c){c._addZoomLimit(this)},onRemove:function(c){this._removeAllTiles(),mi(this._container),c._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(wi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Xa(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(c){return this.options.opacity=c,this._updateOpacity(),this},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var c=this._clampZoom(this._map.getZoom());c!==this._tileZoom&&(this._tileZoom=c,this._updateLevels()),this._update()}return this},getEvents:function(){var c={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=M(this._onMoveEnd,this.options.updateInterval,this)),c.move=this._onMove),this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},createTile:function(){return document.createElement("div")},getTileSize:function(){var c=this.options.tileSize;return c instanceof _t?c:new _t(c,c)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(c){for(var v=this.getPane().children,C=-c(-1/0,1/0),I=0,q=v.length,Q;I<q;I++)Q=v[I].style.zIndex,v[I]!==this._container&&Q&&(C=c(C,+Q));isFinite(C)&&(this.options.zIndex=C+c(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Re.ielt9){jr(this._container,this.options.opacity);var c=+new Date,v=!1,C=!1;for(var I in this._tiles){var q=this._tiles[I];if(!(!q.current||!q.loaded)){var Q=Math.min(1,(c-q.loaded)/200);jr(q.el,Q),Q<1?v=!0:(q.active?C=!0:this._onOpaqueTile(q),q.active=!0)}}C&&!this._noPrune&&this._pruneTiles(),v&&(St(this._fadeFrame),this._fadeFrame=ot(this._updateOpacity,this))}},_onOpaqueTile:G,_initContainer:function(){this._container||(this._container=oi("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var c=this._tileZoom,v=this.options.maxZoom;if(c!==void 0){for(var C in this._levels)C=Number(C),this._levels[C].el.children.length||C===c?(this._levels[C].el.style.zIndex=v-Math.abs(c-C),this._onUpdateLevel(C)):(mi(this._levels[C].el),this._removeTilesAtZoom(C),this._onRemoveLevel(C),delete this._levels[C]);var I=this._levels[c],q=this._map;return I||(I=this._levels[c]={},I.el=oi("div","leaflet-tile-container leaflet-zoom-animated",this._container),I.el.style.zIndex=v,I.origin=q.project(q.unproject(q.getPixelOrigin()),c).round(),I.zoom=c,this._setZoomTransform(I,q.getCenter(),q.getZoom()),G(I.el.offsetWidth),this._onCreateLevel(I)),this._level=I,I}},_onUpdateLevel:G,_onRemoveLevel:G,_onCreateLevel:G,_pruneTiles:function(){if(this._map){var c,v,C=this._map.getZoom();if(C>this.options.maxZoom||C<this.options.minZoom){this._removeAllTiles();return}for(c in this._tiles)v=this._tiles[c],v.retain=v.current;for(c in this._tiles)if(v=this._tiles[c],v.current&&!v.active){var I=v.coords;this._retainParent(I.x,I.y,I.z,I.z-5)||this._retainChildren(I.x,I.y,I.z,I.z+2)}for(c in this._tiles)this._tiles[c].retain||this._removeTile(c)}},_removeTilesAtZoom:function(c){for(var v in this._tiles)this._tiles[v].coords.z===c&&this._removeTile(v)},_removeAllTiles:function(){for(var c in this._tiles)this._removeTile(c)},_invalidateAll:function(){for(var c in this._levels)mi(this._levels[c].el),this._onRemoveLevel(Number(c)),delete this._levels[c];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(c,v,C,I){var q=Math.floor(c/2),Q=Math.floor(v/2),_e=C-1,Ae=new _t(+q,+Q);Ae.z=+_e;var qe=this._tileCoordsToKey(Ae),Qe=this._tiles[qe];return Qe&&Qe.active?(Qe.retain=!0,!0):(Qe&&Qe.loaded&&(Qe.retain=!0),_e>I?this._retainParent(q,Q,_e,I):!1)},_retainChildren:function(c,v,C,I){for(var q=2*c;q<2*c+2;q++)for(var Q=2*v;Q<2*v+2;Q++){var _e=new _t(q,Q);_e.z=C+1;var Ae=this._tileCoordsToKey(_e),qe=this._tiles[Ae];if(qe&&qe.active){qe.retain=!0;continue}else qe&&qe.loaded&&(qe.retain=!0);C+1<I&&this._retainChildren(q,Q,C+1,I)}},_resetView:function(c){var v=c&&(c.pinch||c.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),v,v)},_animateZoom:function(c){this._setView(c.center,c.zoom,!0,c.noUpdate)},_clampZoom:function(c){var v=this.options;return v.minNativeZoom!==void 0&&c<v.minNativeZoom?v.minNativeZoom:v.maxNativeZoom!==void 0&&v.maxNativeZoom<c?v.maxNativeZoom:c},_setView:function(c,v,C,I){var q=Math.round(v);this.options.maxZoom!==void 0&&q>this.options.maxZoom||this.options.minZoom!==void 0&&q<this.options.minZoom?q=void 0:q=this._clampZoom(q);var Q=this.options.updateWhenZooming&&q!==this._tileZoom;(!I||Q)&&(this._tileZoom=q,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),q!==void 0&&this._update(c),C||this._pruneTiles(),this._noPrune=!!C),this._setZoomTransforms(c,v)},_setZoomTransforms:function(c,v){for(var C in this._levels)this._setZoomTransform(this._levels[C],c,v)},_setZoomTransform:function(c,v,C){var I=this._map.getZoomScale(C,c.zoom),q=c.origin.multiplyBy(I).subtract(this._map._getNewPixelOrigin(v,C)).round();Re.any3d?aa(c.el,q,I):Vi(c.el,q)},_resetGrid:function(){var c=this._map,v=c.options.crs,C=this._tileSize=this.getTileSize(),I=this._tileZoom,q=this._map.getPixelWorldBounds(this._tileZoom);q&&(this._globalTileRange=this._pxBoundsToTileRange(q)),this._wrapX=v.wrapLng&&!this.options.noWrap&&[Math.floor(c.project([0,v.wrapLng[0]],I).x/C.x),Math.ceil(c.project([0,v.wrapLng[1]],I).x/C.y)],this._wrapY=v.wrapLat&&!this.options.noWrap&&[Math.floor(c.project([v.wrapLat[0],0],I).y/C.x),Math.ceil(c.project([v.wrapLat[1],0],I).y/C.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(c){var v=this._map,C=v._animatingZoom?Math.max(v._animateToZoom,v.getZoom()):v.getZoom(),I=v.getZoomScale(C,this._tileZoom),q=v.project(c,this._tileZoom).floor(),Q=v.getSize().divideBy(I*2);return new ni(q.subtract(Q),q.add(Q))},_update:function(c){var v=this._map;if(v){var C=this._clampZoom(v.getZoom());if(c===void 0&&(c=v.getCenter()),this._tileZoom!==void 0){var I=this._getTiledPixelBounds(c),q=this._pxBoundsToTileRange(I),Q=q.getCenter(),_e=[],Ae=this.options.keepBuffer,qe=new ni(q.getBottomLeft().subtract([Ae,-Ae]),q.getTopRight().add([Ae,-Ae]));if(!(isFinite(q.min.x)&&isFinite(q.min.y)&&isFinite(q.max.x)&&isFinite(q.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Qe in this._tiles){var ht=this._tiles[Qe].coords;(ht.z!==this._tileZoom||!qe.contains(new _t(ht.x,ht.y)))&&(this._tiles[Qe].current=!1)}if(Math.abs(C-this._tileZoom)>1){this._setView(c,C);return}for(var Mt=q.min.y;Mt<=q.max.y;Mt++)for(var Yt=q.min.x;Yt<=q.max.x;Yt++){var or=new _t(Yt,Mt);if(or.z=this._tileZoom,!!this._isValidTile(or)){var Ji=this._tiles[this._tileCoordsToKey(or)];Ji?Ji.current=!0:_e.push(or)}}if(_e.sort(function(qr,Kn){return qr.distanceTo(Q)-Kn.distanceTo(Q)}),_e.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var hn=document.createDocumentFragment();for(Yt=0;Yt<_e.length;Yt++)this._addTile(_e[Yt],hn);this._level.el.appendChild(hn)}}}},_isValidTile:function(c){var v=this._map.options.crs;if(!v.infinite){var C=this._globalTileRange;if(!v.wrapLng&&(c.x<C.min.x||c.x>C.max.x)||!v.wrapLat&&(c.y<C.min.y||c.y>C.max.y))return!1}if(!this.options.bounds)return!0;var I=this._tileCoordsToBounds(c);return Ci(this.options.bounds).overlaps(I)},_keyToBounds:function(c){return this._tileCoordsToBounds(this._keyToTileCoords(c))},_tileCoordsToNwSe:function(c){var v=this._map,C=this.getTileSize(),I=c.scaleBy(C),q=I.add(C),Q=v.unproject(I,c.z),_e=v.unproject(q,c.z);return[Q,_e]},_tileCoordsToBounds:function(c){var v=this._tileCoordsToNwSe(c),C=new tr(v[0],v[1]);return this.options.noWrap||(C=this._map.wrapLatLngBounds(C)),C},_tileCoordsToKey:function(c){return c.x+":"+c.y+":"+c.z},_keyToTileCoords:function(c){var v=c.split(":"),C=new _t(+v[0],+v[1]);return C.z=+v[2],C},_removeTile:function(c){var v=this._tiles[c];v&&(mi(v.el),delete this._tiles[c],this.fire("tileunload",{tile:v.el,coords:this._keyToTileCoords(c)}))},_initTile:function(c){Nt(c,"leaflet-tile");var v=this.getTileSize();c.style.width=v.x+"px",c.style.height=v.y+"px",c.onselectstart=G,c.onmousemove=G,Re.ielt9&&this.options.opacity<1&&jr(c,this.options.opacity)},_addTile:function(c,v){var C=this._getTilePos(c),I=this._tileCoordsToKey(c),q=this.createTile(this._wrapCoords(c),f(this._tileReady,this,c));this._initTile(q),this.createTile.length<2&&ot(f(this._tileReady,this,c,null,q)),Vi(q,C),this._tiles[I]={el:q,coords:c,current:!0},v.appendChild(q),this.fire("tileloadstart",{tile:q,coords:c})},_tileReady:function(c,v,C){v&&this.fire("tileerror",{error:v,tile:C,coords:c});var I=this._tileCoordsToKey(c);C=this._tiles[I],C&&(C.loaded=+new Date,this._map._fadeAnimated?(jr(C.el,0),St(this._fadeFrame),this._fadeFrame=ot(this._updateOpacity,this)):(C.active=!0,this._pruneTiles()),v||(Nt(C.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:C.el,coords:c})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Re.ielt9||!this._map._fadeAnimated?ot(this._pruneTiles,this):setTimeout(f(this._pruneTiles,this),250)))},_getTilePos:function(c){return c.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(c){var v=new _t(this._wrapX?B(c.x,this._wrapX):c.x,this._wrapY?B(c.y,this._wrapY):c.y);return v.z=c.z,v},_pxBoundsToTileRange:function(c){var v=this.getTileSize();return new ni(c.min.unscaleBy(v).floor(),c.max.unscaleBy(v).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var c in this._tiles)if(!this._tiles[c].loaded)return!1;return!0}});function Pc(c){return new Er(c)}var ss=Er.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(c,v){this._url=c,v=ae(this,v),v.detectRetina&&Re.retina&&v.maxZoom>0?(v.tileSize=Math.floor(v.tileSize/2),v.zoomReverse?(v.zoomOffset--,v.minZoom=Math.min(v.maxZoom,v.minZoom+1)):(v.zoomOffset++,v.maxZoom=Math.max(v.minZoom,v.maxZoom-1)),v.minZoom=Math.max(0,v.minZoom)):v.zoomReverse?v.minZoom=Math.min(v.maxZoom,v.minZoom):v.maxZoom=Math.max(v.minZoom,v.maxZoom),typeof v.subdomains=="string"&&(v.subdomains=v.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(c,v){return this._url===c&&v===void 0&&(v=!0),this._url=c,v||this.redraw(),this},createTile:function(c,v){var C=document.createElement("img");return bt(C,"load",f(this._tileOnLoad,this,v,C)),bt(C,"error",f(this._tileOnError,this,v,C)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(C.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(C.referrerPolicy=this.options.referrerPolicy),C.alt="",C.src=this.getTileUrl(c),C},getTileUrl:function(c){var v={r:Re.retina?"@2x":"",s:this._getSubdomain(c),x:c.x,y:c.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var C=this._globalTileRange.max.y-c.y;this.options.tms&&(v.y=C),v["-y"]=C}return We(this._url,p(v,this.options))},_tileOnLoad:function(c,v){Re.ielt9?setTimeout(f(c,this,null,v),0):c(null,v)},_tileOnError:function(c,v,C){var I=this.options.errorTileUrl;I&&v.getAttribute("src")!==I&&(v.src=I),c(C,v)},_onTileRemove:function(c){c.tile.onload=null},_getZoomForUrl:function(){var c=this._tileZoom,v=this.options.maxZoom,C=this.options.zoomReverse,I=this.options.zoomOffset;return C&&(c=v-c),c+I},_getSubdomain:function(c){var v=Math.abs(c.x+c.y)%this.options.subdomains.length;return this.options.subdomains[v]},_abortLoading:function(){var c,v;for(c in this._tiles)if(this._tiles[c].coords.z!==this._tileZoom&&(v=this._tiles[c].el,v.onload=G,v.onerror=G,!v.complete)){v.src=dt;var C=this._tiles[c].coords;mi(v),delete this._tiles[c],this.fire("tileabort",{tile:v,coords:C})}},_removeTile:function(c){var v=this._tiles[c];if(v)return v.el.setAttribute("src",dt),Er.prototype._removeTile.call(this,c)},_tileReady:function(c,v,C){if(!(!this._map||C&&C.getAttribute("src")===dt))return Er.prototype._tileReady.call(this,c,v,C)}});function el(c,v){return new ss(c,v)}var za=ss.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(c,v){this._url=c;var C=p({},this.defaultWmsParams);for(var I in v)I in this.options||(C[I]=v[I]);v=ae(this,v);var q=v.detectRetina&&Re.retina?2:1,Q=this.getTileSize();C.width=Q.x*q,C.height=Q.y*q,this.wmsParams=C},onAdd:function(c){this._crs=this.options.crs||c.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var v=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[v]=this._crs.code,ss.prototype.onAdd.call(this,c)},getTileUrl:function(c){var v=this._tileCoordsToNwSe(c),C=this._crs,I=Yi(C.project(v[0]),C.project(v[1])),q=I.min,Q=I.max,_e=(this._wmsVersion>=1.3&&this._crs===yc?[q.y,q.x,Q.y,Q.x]:[q.x,q.y,Q.x,Q.y]).join(","),Ae=ss.prototype.getTileUrl.call(this,c);return Ae+te(this.wmsParams,Ae,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+_e},setParams:function(c,v){return p(this.wmsParams,c),v||this.redraw(),this}});function tl(c,v){return new za(c,v)}ss.WMS=za,el.wms=tl;var bn=Xr.extend({options:{padding:.1},initialize:function(c){ae(this,c),T(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Nt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var c={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(c.zoomanim=this._onAnimZoom),c},_onAnimZoom:function(c){this._updateTransform(c.center,c.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(c,v){var C=this._map.getZoomScale(v,this._zoom),I=this._map.getSize().multiplyBy(.5+this.options.padding),q=this._map.project(this._center,v),Q=I.multiplyBy(-C).add(q).subtract(this._map._getNewPixelOrigin(c,v));Re.any3d?aa(this._container,Q,C):Vi(this._container,Q)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var c in this._layers)this._layers[c]._reset()},_onZoomEnd:function(){for(var c in this._layers)this._layers[c]._project()},_updatePaths:function(){for(var c in this._layers)this._layers[c]._update()},_update:function(){var c=this.options.padding,v=this._map.getSize(),C=this._map.containerPointToLayerPoint(v.multiplyBy(-c)).round();this._bounds=new ni(C,C.add(v.multiplyBy(1+c*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Fs=bn.extend({options:{tolerance:0},getEvents:function(){var c=bn.prototype.getEvents.call(this);return c.viewprereset=this._onViewPreReset,c},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){bn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var c=this._container=document.createElement("canvas");bt(c,"mousemove",this._onMouseMove,this),bt(c,"click dblclick mousedown mouseup contextmenu",this._onClick,this),bt(c,"mouseout",this._handleMouseOut,this),c._leaflet_disable_events=!0,this._ctx=c.getContext("2d")},_destroyContainer:function(){St(this._redrawRequest),delete this._ctx,mi(this._container),ct(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var c;this._redrawBounds=null;for(var v in this._layers)c=this._layers[v],c._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){bn.prototype._update.call(this);var c=this._bounds,v=this._container,C=c.getSize(),I=Re.retina?2:1;Vi(v,c.min),v.width=I*C.x,v.height=I*C.y,v.style.width=C.x+"px",v.style.height=C.y+"px",Re.retina&&this._ctx.scale(2,2),this._ctx.translate(-c.min.x,-c.min.y),this.fire("update")}},_reset:function(){bn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(c){this._updateDashArray(c),this._layers[T(c)]=c;var v=c._order={layer:c,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=v),this._drawLast=v,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(c){this._requestRedraw(c)},_removePath:function(c){var v=c._order,C=v.next,I=v.prev;C?C.prev=I:this._drawLast=I,I?I.next=C:this._drawFirst=C,delete c._order,delete this._layers[T(c)],this._requestRedraw(c)},_updatePath:function(c){this._extendRedrawBounds(c),c._project(),c._update(),this._requestRedraw(c)},_updateStyle:function(c){this._updateDashArray(c),this._requestRedraw(c)},_updateDashArray:function(c){if(typeof c.options.dashArray=="string"){var v=c.options.dashArray.split(/[, ]+/),C=[],I,q;for(q=0;q<v.length;q++){if(I=Number(v[q]),isNaN(I))return;C.push(I)}c.options._dashArray=C}else c.options._dashArray=c.options.dashArray},_requestRedraw:function(c){this._map&&(this._extendRedrawBounds(c),this._redrawRequest=this._redrawRequest||ot(this._redraw,this))},_extendRedrawBounds:function(c){if(c._pxBounds){var v=(c.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ni,this._redrawBounds.extend(c._pxBounds.min.subtract([v,v])),this._redrawBounds.extend(c._pxBounds.max.add([v,v]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var c=this._redrawBounds;if(c){var v=c.getSize();this._ctx.clearRect(c.min.x,c.min.y,v.x,v.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var c,v=this._redrawBounds;if(this._ctx.save(),v){var C=v.getSize();this._ctx.beginPath(),this._ctx.rect(v.min.x,v.min.y,C.x,C.y),this._ctx.clip()}this._drawing=!0;for(var I=this._drawFirst;I;I=I.next)c=I.layer,(!v||c._pxBounds&&c._pxBounds.intersects(v))&&c._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(c,v){if(this._drawing){var C,I,q,Q,_e=c._parts,Ae=_e.length,qe=this._ctx;if(Ae){for(qe.beginPath(),C=0;C<Ae;C++){for(I=0,q=_e[C].length;I<q;I++)Q=_e[C][I],qe[I?"lineTo":"moveTo"](Q.x,Q.y);v&&qe.closePath()}this._fillStroke(qe,c)}}},_updateCircle:function(c){if(!(!this._drawing||c._empty())){var v=c._point,C=this._ctx,I=Math.max(Math.round(c._radius),1),q=(Math.max(Math.round(c._radiusY),1)||I)/I;q!==1&&(C.save(),C.scale(1,q)),C.beginPath(),C.arc(v.x,v.y/q,I,0,Math.PI*2,!1),q!==1&&C.restore(),this._fillStroke(C,c)}},_fillStroke:function(c,v){var C=v.options;C.fill&&(c.globalAlpha=C.fillOpacity,c.fillStyle=C.fillColor||C.color,c.fill(C.fillRule||"evenodd")),C.stroke&&C.weight!==0&&(c.setLineDash&&c.setLineDash(v.options&&v.options._dashArray||[]),c.globalAlpha=C.opacity,c.lineWidth=C.weight,c.strokeStyle=C.color,c.lineCap=C.lineCap,c.lineJoin=C.lineJoin,c.stroke())},_onClick:function(c){for(var v=this._map.mouseEventToLayerPoint(c),C,I,q=this._drawFirst;q;q=q.next)C=q.layer,C.options.interactive&&C._containsPoint(v)&&(!(c.type==="click"||c.type==="preclick")||!this._map._draggableMoved(C))&&(I=C);this._fireEvent(I?[I]:!1,c)},_onMouseMove:function(c){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var v=this._map.mouseEventToLayerPoint(c);this._handleMouseHover(c,v)}},_handleMouseOut:function(c){var v=this._hoveredLayer;v&&(qi(this._container,"leaflet-interactive"),this._fireEvent([v],c,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(c,v){if(!this._mouseHoverThrottled){for(var C,I,q=this._drawFirst;q;q=q.next)C=q.layer,C.options.interactive&&C._containsPoint(v)&&(I=C);I!==this._hoveredLayer&&(this._handleMouseOut(c),I&&(Nt(this._container,"leaflet-interactive"),this._fireEvent([I],c,"mouseover"),this._hoveredLayer=I)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,c),this._mouseHoverThrottled=!0,setTimeout(f(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(c,v,C){this._map._fireDOMEvent(v,C||v.type,c)},_bringToFront:function(c){var v=c._order;if(v){var C=v.next,I=v.prev;if(C)C.prev=I;else return;I?I.next=C:C&&(this._drawFirst=C),v.prev=this._drawLast,this._drawLast.next=v,v.next=null,this._drawLast=v,this._requestRedraw(c)}},_bringToBack:function(c){var v=c._order;if(v){var C=v.next,I=v.prev;if(I)I.next=C;else return;C?C.prev=I:I&&(this._drawLast=I),v.prev=null,v.next=this._drawFirst,this._drawFirst.prev=v,this._drawFirst=v,this._requestRedraw(c)}}});function yo(c){return Re.canvas?new Fs(c):null}var js=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(c){return document.createElement("<lvml:"+c+' class="lvml">')}}catch{}return function(c){return document.createElement("<"+c+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Ns={_initContainer:function(){this._container=oi("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(bn.prototype._update.call(this),this.fire("update"))},_initPath:function(c){var v=c._container=js("shape");Nt(v,"leaflet-vml-shape "+(this.options.className||"")),v.coordsize="1 1",c._path=js("path"),v.appendChild(c._path),this._updateStyle(c),this._layers[T(c)]=c},_addPath:function(c){var v=c._container;this._container.appendChild(v),c.options.interactive&&c.addInteractiveTarget(v)},_removePath:function(c){var v=c._container;mi(v),c.removeInteractiveTarget(v),delete this._layers[T(c)]},_updateStyle:function(c){var v=c._stroke,C=c._fill,I=c.options,q=c._container;q.stroked=!!I.stroke,q.filled=!!I.fill,I.stroke?(v||(v=c._stroke=js("stroke")),q.appendChild(v),v.weight=I.weight+"px",v.color=I.color,v.opacity=I.opacity,I.dashArray?v.dashStyle=xe(I.dashArray)?I.dashArray.join(" "):I.dashArray.replace(/( *, *)/g," "):v.dashStyle="",v.endcap=I.lineCap.replace("butt","flat"),v.joinstyle=I.lineJoin):v&&(q.removeChild(v),c._stroke=null),I.fill?(C||(C=c._fill=js("fill")),q.appendChild(C),C.color=I.fillColor||I.color,C.opacity=I.fillOpacity):C&&(q.removeChild(C),c._fill=null)},_updateCircle:function(c){var v=c._point.round(),C=Math.round(c._radius),I=Math.round(c._radiusY||C);this._setPath(c,c._empty()?"M0 0":"AL "+v.x+","+v.y+" "+C+","+I+" 0,"+65535*360)},_setPath:function(c,v){c._path.v=v},_bringToFront:function(c){wi(c._container)},_bringToBack:function(c){Xa(c._container)}},fa=Re.vml?js:an,qs=bn.extend({_initContainer:function(){this._container=fa("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=fa("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){mi(this._container),ct(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){bn.prototype._update.call(this);var c=this._bounds,v=c.getSize(),C=this._container;(!this._svgSize||!this._svgSize.equals(v))&&(this._svgSize=v,C.setAttribute("width",v.x),C.setAttribute("height",v.y)),Vi(C,c.min),C.setAttribute("viewBox",[c.min.x,c.min.y,v.x,v.y].join(" ")),this.fire("update")}},_initPath:function(c){var v=c._path=fa("path");c.options.className&&Nt(v,c.options.className),c.options.interactive&&Nt(v,"leaflet-interactive"),this._updateStyle(c),this._layers[T(c)]=c},_addPath:function(c){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(c._path),c.addInteractiveTarget(c._path)},_removePath:function(c){mi(c._path),c.removeInteractiveTarget(c._path),delete this._layers[T(c)]},_updatePath:function(c){c._project(),c._update()},_updateStyle:function(c){var v=c._path,C=c.options;v&&(C.stroke?(v.setAttribute("stroke",C.color),v.setAttribute("stroke-opacity",C.opacity),v.setAttribute("stroke-width",C.weight),v.setAttribute("stroke-linecap",C.lineCap),v.setAttribute("stroke-linejoin",C.lineJoin),C.dashArray?v.setAttribute("stroke-dasharray",C.dashArray):v.removeAttribute("stroke-dasharray"),C.dashOffset?v.setAttribute("stroke-dashoffset",C.dashOffset):v.removeAttribute("stroke-dashoffset")):v.setAttribute("stroke","none"),C.fill?(v.setAttribute("fill",C.fillColor||C.color),v.setAttribute("fill-opacity",C.fillOpacity),v.setAttribute("fill-rule",C.fillRule||"evenodd")):v.setAttribute("fill","none"))},_updatePoly:function(c,v){this._setPath(c,Pn(c._parts,v))},_updateCircle:function(c){var v=c._point,C=Math.max(Math.round(c._radius),1),I=Math.max(Math.round(c._radiusY),1)||C,q="a"+C+","+I+" 0 1,0 ",Q=c._empty()?"M0 0":"M"+(v.x-C)+","+v.y+q+C*2+",0 "+q+-C*2+",0 ";this._setPath(c,Q)},_setPath:function(c,v){c._path.setAttribute("d",v)},_bringToFront:function(c){wi(c._path)},_bringToBack:function(c){Xa(c._path)}});Re.vml&&qs.include(Ns);function il(c){return Re.svg||Re.vml?new qs(c):null}Zt.include({getRenderer:function(c){var v=c.options.renderer||this._getPaneRenderer(c.options.pane)||this.options.renderer||this._renderer;return v||(v=this._renderer=this._createRenderer()),this.hasLayer(v)||this.addLayer(v),v},_getPaneRenderer:function(c){if(c==="overlayPane"||c===void 0)return!1;var v=this._paneRenderers[c];return v===void 0&&(v=this._createRenderer({pane:c}),this._paneRenderers[c]=v),v},_createRenderer:function(c){return this.options.preferCanvas&&yo(c)||il(c)}});var Gt=Xn.extend({initialize:function(c,v){Xn.prototype.initialize.call(this,this._boundsToLatLngs(c),v)},setBounds:function(c){return this.setLatLngs(this._boundsToLatLngs(c))},_boundsToLatLngs:function(c){return c=Ci(c),[c.getSouthWest(),c.getNorthWest(),c.getNorthEast(),c.getSouthEast()]}});function rl(c,v){return new Gt(c,v)}qs.create=fa,qs.pointsToPath=Pn,On.geometryToLayer=po,On.coordsToLatLng=cn,On.coordsToLatLngs=is,On.latLngToCoords=mo,On.latLngsToCoords=Os,On.getFeature=Ia,On.asFeature=rs,Zt.mergeOptions({boxZoom:!0});var Ec=vn.extend({initialize:function(c){this._map=c,this._container=c._container,this._pane=c._panes.overlayPane,this._resetStateTimeout=0,c.on("unload",this._destroy,this)},addHooks:function(){bt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ct(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){mi(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(c){if(!c.shiftKey||c.which!==1&&c.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),sa(),ao(),this._startPoint=this._map.mouseEventToContainerPoint(c),bt(document,{contextmenu:on,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(c){this._moved||(this._moved=!0,this._box=oi("div","leaflet-zoom-box",this._container),Nt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(c);var v=new ni(this._point,this._startPoint),C=v.getSize();Vi(this._box,v.min),this._box.style.width=C.x+"px",this._box.style.height=C.y+"px"},_finish:function(){this._moved&&(mi(this._box),qi(this._container,"leaflet-crosshair")),Ca(),Ja(),ct(document,{contextmenu:on,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(c){if(!(c.which!==1&&c.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(f(this._resetState,this),0);var v=new tr(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(v).fire("boxzoomend",{boxZoomBounds:v})}},_onKeyDown:function(c){c.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Zt.addInitHook("addHandler","boxZoom",Ec),Zt.mergeOptions({doubleClickZoom:!0});var Fl=vn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(c){var v=this._map,C=v.getZoom(),I=v.options.zoomDelta,q=c.originalEvent.shiftKey?C-I:C+I;v.options.doubleClickZoom==="center"?v.setZoom(q):v.setZoomAround(c.containerPoint,q)}});Zt.addInitHook("addHandler","doubleClickZoom",Fl),Zt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Vs=vn.extend({addHooks:function(){if(!this._draggable){var c=this._map;this._draggable=new Wi(c._mapPane,c._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),c.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),c.on("zoomend",this._onZoomEnd,this),c.whenReady(this._onZoomEnd,this))}Nt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){qi(this._map._container,"leaflet-grab"),qi(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var c=this._map;if(c._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var v=Ci(this._map.options.maxBounds);this._offsetLimit=Yi(this._map.latLngToContainerPoint(v.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(v.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;c.fire("movestart").fire("dragstart"),c.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(c){if(this._map.options.inertia){var v=this._lastTime=+new Date,C=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(C),this._times.push(v),this._prunePositions(v)}this._map.fire("move",c).fire("drag",c)},_prunePositions:function(c){for(;this._positions.length>1&&c-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var c=this._map.getSize().divideBy(2),v=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=v.subtract(c).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(c,v){return c-(c-v)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var c=this._draggable._newPos.subtract(this._draggable._startPos),v=this._offsetLimit;c.x<v.min.x&&(c.x=this._viscousLimit(c.x,v.min.x)),c.y<v.min.y&&(c.y=this._viscousLimit(c.y,v.min.y)),c.x>v.max.x&&(c.x=this._viscousLimit(c.x,v.max.x)),c.y>v.max.y&&(c.y=this._viscousLimit(c.y,v.max.y)),this._draggable._newPos=this._draggable._startPos.add(c)}},_onPreDragWrap:function(){var c=this._worldWidth,v=Math.round(c/2),C=this._initialWorldOffset,I=this._draggable._newPos.x,q=(I-v+C)%c+v-C,Q=(I+v+C)%c-v-C,_e=Math.abs(q+C)<Math.abs(Q+C)?q:Q;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=_e},_onDragEnd:function(c){var v=this._map,C=v.options,I=!C.inertia||c.noInertia||this._times.length<2;if(v.fire("dragend",c),I)v.fire("moveend");else{this._prunePositions(+new Date);var q=this._lastPos.subtract(this._positions[0]),Q=(this._lastTime-this._times[0])/1e3,_e=C.easeLinearity,Ae=q.multiplyBy(_e/Q),qe=Ae.distanceTo([0,0]),Qe=Math.min(C.inertiaMaxSpeed,qe),ht=Ae.multiplyBy(Qe/qe),Mt=Qe/(C.inertiaDeceleration*_e),Yt=ht.multiplyBy(-Mt/2).round();!Yt.x&&!Yt.y?v.fire("moveend"):(Yt=v._limitOffset(Yt,v.options.maxBounds),ot(function(){v.panBy(Yt,{duration:Mt,easeLinearity:_e,noMoveStart:!0,animate:!0})}))}}});Zt.addInitHook("addHandler","dragging",Vs),Zt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Ac=vn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(c){this._map=c,this._setPanDelta(c.options.keyboardPanDelta),this._setZoomDelta(c.options.zoomDelta)},addHooks:function(){var c=this._map._container;c.tabIndex<=0&&(c.tabIndex="0"),bt(c,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ct(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var c=document.body,v=document.documentElement,C=c.scrollTop||v.scrollTop,I=c.scrollLeft||v.scrollLeft;this._map._container.focus(),window.scrollTo(I,C)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(c){var v=this._panKeys={},C=this.keyCodes,I,q;for(I=0,q=C.left.length;I<q;I++)v[C.left[I]]=[-1*c,0];for(I=0,q=C.right.length;I<q;I++)v[C.right[I]]=[c,0];for(I=0,q=C.down.length;I<q;I++)v[C.down[I]]=[0,c];for(I=0,q=C.up.length;I<q;I++)v[C.up[I]]=[0,-1*c]},_setZoomDelta:function(c){var v=this._zoomKeys={},C=this.keyCodes,I,q;for(I=0,q=C.zoomIn.length;I<q;I++)v[C.zoomIn[I]]=c;for(I=0,q=C.zoomOut.length;I<q;I++)v[C.zoomOut[I]]=-c},_addHooks:function(){bt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ct(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(c){if(!(c.altKey||c.ctrlKey||c.metaKey)){var v=c.keyCode,C=this._map,I;if(v in this._panKeys){if(!C._panAnim||!C._panAnim._inProgress)if(I=this._panKeys[v],c.shiftKey&&(I=kt(I).multiplyBy(3)),C.options.maxBounds&&(I=C._limitOffset(kt(I),C.options.maxBounds)),C.options.worldCopyJump){var q=C.wrapLatLng(C.unproject(C.project(C.getCenter()).add(I)));C.panTo(q)}else C.panBy(I)}else if(v in this._zoomKeys)C.setZoom(C.getZoom()+(c.shiftKey?3:1)*this._zoomKeys[v]);else if(v===27&&C._popup&&C._popup.options.closeOnEscapeKey)C.closePopup();else return;on(c)}}});Zt.addInitHook("addHandler","keyboard",Ac),Zt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Mc=vn.extend({addHooks:function(){bt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ct(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(c){var v=Ea(c),C=this._map.options.wheelDebounceTime;this._delta+=v,this._lastMousePos=this._map.mouseEventToContainerPoint(c),this._startTime||(this._startTime=+new Date);var I=Math.max(C-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f(this._performZoom,this),I),on(c)},_performZoom:function(){var c=this._map,v=c.getZoom(),C=this._map.options.zoomSnap||0;c._stop();var I=this._delta/(this._map.options.wheelPxPerZoomLevel*4),q=4*Math.log(2/(1+Math.exp(-Math.abs(I))))/Math.LN2,Q=C?Math.ceil(q/C)*C:q,_e=c._limitZoom(v+(this._delta>0?Q:-Q))-v;this._delta=0,this._startTime=null,_e&&(c.options.scrollWheelZoom==="center"?c.setZoom(v+_e):c.setZoomAround(this._lastMousePos,v+_e))}});Zt.addInitHook("addHandler","scrollWheelZoom",Mc);var Ic=600;Zt.mergeOptions({tapHold:Re.touchNative&&Re.safari&&Re.mobile,tapTolerance:15});var zc=vn.extend({addHooks:function(){bt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ct(this._map._container,"touchstart",this._onDown,this)},_onDown:function(c){if(clearTimeout(this._holdTimeout),c.touches.length===1){var v=c.touches[0];this._startPos=this._newPos=new _t(v.clientX,v.clientY),this._holdTimeout=setTimeout(f(function(){this._cancel(),this._isTapValid()&&(bt(document,"touchend",Kt),bt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",v))},this),Ic),bt(document,"touchend touchcancel contextmenu",this._cancel,this),bt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function c(){ct(document,"touchend",Kt),ct(document,"touchend touchcancel",c)},_cancel:function(){clearTimeout(this._holdTimeout),ct(document,"touchend touchcancel contextmenu",this._cancel,this),ct(document,"touchmove",this._onMove,this)},_onMove:function(c){var v=c.touches[0];this._newPos=new _t(v.clientX,v.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(c,v){var C=new MouseEvent(c,{bubbles:!0,cancelable:!0,view:window,screenX:v.screenX,screenY:v.screenY,clientX:v.clientX,clientY:v.clientY});C._simulated=!0,v.target.dispatchEvent(C)}});Zt.addInitHook("addHandler","tapHold",zc),Zt.mergeOptions({touchZoom:Re.touch,bounceAtZoomLimits:!0});var nl=vn.extend({addHooks:function(){Nt(this._map._container,"leaflet-touch-zoom"),bt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){qi(this._map._container,"leaflet-touch-zoom"),ct(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(c){var v=this._map;if(!(!c.touches||c.touches.length!==2||v._animatingZoom||this._zooming)){var C=v.mouseEventToContainerPoint(c.touches[0]),I=v.mouseEventToContainerPoint(c.touches[1]);this._centerPoint=v.getSize()._divideBy(2),this._startLatLng=v.containerPointToLatLng(this._centerPoint),v.options.touchZoom!=="center"&&(this._pinchStartLatLng=v.containerPointToLatLng(C.add(I)._divideBy(2))),this._startDist=C.distanceTo(I),this._startZoom=v.getZoom(),this._moved=!1,this._zooming=!0,v._stop(),bt(document,"touchmove",this._onTouchMove,this),bt(document,"touchend touchcancel",this._onTouchEnd,this),Kt(c)}},_onTouchMove:function(c){if(!(!c.touches||c.touches.length!==2||!this._zooming)){var v=this._map,C=v.mouseEventToContainerPoint(c.touches[0]),I=v.mouseEventToContainerPoint(c.touches[1]),q=C.distanceTo(I)/this._startDist;if(this._zoom=v.getScaleZoom(q,this._startZoom),!v.options.bounceAtZoomLimits&&(this._zoom<v.getMinZoom()&&q<1||this._zoom>v.getMaxZoom()&&q>1)&&(this._zoom=v._limitZoom(this._zoom)),v.options.touchZoom==="center"){if(this._center=this._startLatLng,q===1)return}else{var Q=C._add(I)._divideBy(2)._subtract(this._centerPoint);if(q===1&&Q.x===0&&Q.y===0)return;this._center=v.unproject(v.project(this._pinchStartLatLng,this._zoom).subtract(Q),this._zoom)}this._moved||(v._moveStart(!0,!1),this._moved=!0),St(this._animRequest);var _e=f(v._move,v,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=ot(_e,this,!0),Kt(c)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,St(this._animRequest),ct(document,"touchmove",this._onTouchMove,this),ct(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Zt.addInitHook("addHandler","touchZoom",nl),Zt.BoxZoom=Ec,Zt.DoubleClickZoom=Fl,Zt.Drag=Vs,Zt.Keyboard=Ac,Zt.ScrollWheelZoom=Mc,Zt.TapHold=zc,Zt.TouchZoom=nl,s.Bounds=ni,s.Browser=Re,s.CRS=gr,s.Canvas=Fs,s.Circle=Ls,s.CircleMarker=ha,s.Class=Tt,s.Control=Pr,s.DivIcon=Rs,s.DivOverlay=un,s.DomEvent=mc,s.DomUtil=Hr,s.Draggable=Wi,s.Evented=ii,s.FeatureGroup=Ln,s.GeoJSON=On,s.GridLayer=Er,s.Handler=vn,s.Icon=Ma,s.ImageOverlay=go,s.LatLng=qt,s.LatLngBounds=tr,s.Layer=Xr,s.LayerGroup=ts,s.LineUtil=Ms,s.Map=Zt,s.Marker=Hn,s.Mixin=qu,s.Path=Yn,s.Point=_t,s.PolyUtil=Ll,s.Polygon=Xn,s.Polyline=da,s.Popup=ns,s.PosAnimation=Ho,s.Projection=Wu,s.Rectangle=Gt,s.Renderer=bn,s.SVG=qs,s.SVGOverlay=kc,s.TileLayer=ss,s.Tooltip=Ds,s.Transformation=Ga,s.Util=Ht,s.VideoOverlay=Tc,s.bind=f,s.bounds=Yi,s.canvas=yo,s.circle=Gu,s.circleMarker=xc,s.control=Wt,s.divIcon=Bs,s.extend=p,s.featureGroup=Rl,s.geoJSON=Jo,s.geoJson=Uu,s.gridLayer=Pc,s.icon=vc,s.imageOverlay=Zu,s.latLng=Ft,s.latLngBounds=Ci,s.layerGroup=_c,s.map=Si,s.marker=bc,s.point=kt,s.polygon=Sc,s.polyline=wc,s.popup=Qo,s.rectangle=rl,s.setOptions=ae,s.stamp=T,s.svg=il,s.svgOverlay=ci,s.tileLayer=el,s.tooltip=as,s.transformation=Rr,s.version=o,s.videoOverlay=Cc;var Ws=window.L;s.noConflict=function(){return window.L=Ws,this},window.L=s}))});var LP=Ee((Of,zP)=>{(function(s,o){typeof Of=="object"&&typeof zP<"u"?o(Of):typeof define=="function"&&define.amd?define(["exports"],o):(s=s||self,o((s.Leaflet=s.Leaflet||{},s.Leaflet.markercluster={})))})(Of,function(s){"use strict";var o=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(d){L.Util.setOptions(this,d),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var f=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,f?this._withAnimation:this._noAnimation),this._markerCluster=f?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(d){if(d instanceof L.LayerGroup)return this.addLayers([d]);if(!d.getLatLng)return this._nonPointGroup.addLayer(d),this.fire("layeradd",{layer:d}),this;if(!this._map)return this._needsClustering.push(d),this.fire("layeradd",{layer:d}),this;if(this.hasLayer(d))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(d,this._maxZoom),this.fire("layeradd",{layer:d}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var f=d,a=this._zoom;if(d.__parent)for(;f.__parent._zoom>=a;)f=f.__parent;return this._currentShownBounds.contains(f.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(d,f):this._animationAddLayerNonAnimated(d,f)),this},removeLayer:function(d){return d instanceof L.LayerGroup?this.removeLayers([d]):d.getLatLng?this._map?d.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(d)),this._removeLayer(d,!0),this.fire("layerremove",{layer:d}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),d.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(d)&&(this._featureGroup.removeLayer(d),d.clusterShow&&d.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,d)&&this.hasLayer(d)&&this._needsRemoving.push({layer:d,latlng:d._latlng}),this.fire("layerremove",{layer:d}),this):(this._nonPointGroup.removeLayer(d),this.fire("layerremove",{layer:d}),this)},addLayers:function(d,f){if(!L.Util.isArray(d))return this.addLayer(d);var a=this._featureGroup,T=this._nonPointGroup,M=this.options.chunkedLoading,B=this.options.chunkInterval,G=this.options.chunkProgress,J=d.length,ie=0,$=!0,ae;if(this._map){var te=new Date().getTime(),Te=L.bind(function(){var xe=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();ie<J;ie++){if(M&&ie%200===0){var Ze=new Date().getTime()-xe;if(Ze>B)break}if(ae=d[ie],ae instanceof L.LayerGroup){$&&(d=d.slice(),$=!1),this._extractNonGroupLayers(ae,d),J=d.length;continue}if(!ae.getLatLng){T.addLayer(ae),f||this.fire("layeradd",{layer:ae});continue}if(!this.hasLayer(ae)&&(this._addLayer(ae,this._maxZoom),f||this.fire("layeradd",{layer:ae}),ae.__parent&&ae.__parent.getChildCount()===2)){var dt=ae.__parent.getAllChildMarkers(),mt=dt[0]===ae?dt[1]:dt[0];a.removeLayer(mt)}}G&&G(ie,J,new Date().getTime()-te),ie===J?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(Te,this.options.chunkDelay)},this);Te()}else for(var We=this._needsClustering;ie<J;ie++){if(ae=d[ie],ae instanceof L.LayerGroup){$&&(d=d.slice(),$=!1),this._extractNonGroupLayers(ae,d),J=d.length;continue}if(!ae.getLatLng){T.addLayer(ae);continue}this.hasLayer(ae)||We.push(ae)}return this},removeLayers:function(d){var f,a,T=d.length,M=this._featureGroup,B=this._nonPointGroup,G=!0;if(!this._map){for(f=0;f<T;f++){if(a=d[f],a instanceof L.LayerGroup){G&&(d=d.slice(),G=!1),this._extractNonGroupLayers(a,d),T=d.length;continue}this._arraySplice(this._needsClustering,a),B.removeLayer(a),this.hasLayer(a)&&this._needsRemoving.push({layer:a,latlng:a._latlng}),this.fire("layerremove",{layer:a})}return this}if(this._unspiderfy){this._unspiderfy();var J=d.slice(),ie=T;for(f=0;f<ie;f++){if(a=J[f],a instanceof L.LayerGroup){this._extractNonGroupLayers(a,J),ie=J.length;continue}this._unspiderfyLayer(a)}}for(f=0;f<T;f++){if(a=d[f],a instanceof L.LayerGroup){G&&(d=d.slice(),G=!1),this._extractNonGroupLayers(a,d),T=d.length;continue}if(!a.__parent){B.removeLayer(a),this.fire("layerremove",{layer:a});continue}this._removeLayer(a,!0,!0),this.fire("layerremove",{layer:a}),M.hasLayer(a)&&(M.removeLayer(a),a.clusterShow&&a.clusterShow())}return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(d){d.off(this._childMarkerEventHandlers,this),delete d.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var d=new L.LatLngBounds;this._topClusterLevel&&d.extend(this._topClusterLevel._bounds);for(var f=this._needsClustering.length-1;f>=0;f--)d.extend(this._needsClustering[f].getLatLng());return d.extend(this._nonPointGroup.getBounds()),d},eachLayer:function(d,f){var a=this._needsClustering.slice(),T=this._needsRemoving,M,B,G;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(a),B=a.length-1;B>=0;B--){for(M=!0,G=T.length-1;G>=0;G--)if(T[G].layer===a[B]){M=!1;break}M&&d.call(f,a[B])}this._nonPointGroup.eachLayer(d,f)},getLayers:function(){var d=[];return this.eachLayer(function(f){d.push(f)}),d},getLayer:function(d){var f=null;return d=parseInt(d,10),this.eachLayer(function(a){L.stamp(a)===d&&(f=a)}),f},hasLayer:function(d){if(!d)return!1;var f,a=this._needsClustering;for(f=a.length-1;f>=0;f--)if(a[f]===d)return!0;for(a=this._needsRemoving,f=a.length-1;f>=0;f--)if(a[f].layer===d)return!1;return!!(d.__parent&&d.__parent._group===this)||this._nonPointGroup.hasLayer(d)},zoomToShowLayer:function(d,f){var a=this._map;typeof f!="function"&&(f=function(){});var T=function(){(a.hasLayer(d)||a.hasLayer(d.__parent))&&!this._inZoomAnimation&&(this._map.off("moveend",T,this),this.off("animationend",T,this),a.hasLayer(d)?f():d.__parent._icon&&(this.once("spiderfied",f,this),d.__parent.spiderfy()))};d._icon&&this._map.getBounds().contains(d.getLatLng())?f():d.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",T,this),this._map.panTo(d.getLatLng())):(this._map.on("moveend",T,this),this.on("animationend",T,this),d.__parent.zoomToBounds())},onAdd:function(d){this._map=d;var f,a,T;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(d),this._nonPointGroup.addTo(d),this._gridClusters||this._generateInitialClusters(),this._maxLat=d.options.crs.projection.MAX_LATITUDE,f=0,a=this._needsRemoving.length;f<a;f++)T=this._needsRemoving[f],T.newlatlng=T.layer._latlng,T.layer._latlng=T.latlng;for(f=0,a=this._needsRemoving.length;f<a;f++)T=this._needsRemoving[f],this._removeLayer(T.layer,!0),T.layer._latlng=T.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),a=this._needsClustering,this._needsClustering=[],this.addLayers(a,!0)},onRemove:function(d){d.off("zoomend",this._zoomEnd,this),d.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(d){for(var f=d;f&&!f._icon;)f=f.__parent;return f||null},_arraySplice:function(d,f){for(var a=d.length-1;a>=0;a--)if(d[a]===f)return d.splice(a,1),!0},_removeFromGridUnclustered:function(d,f){for(var a=this._map,T=this._gridUnclustered,M=Math.floor(this._map.getMinZoom());f>=M&&T[f].removeObject(d,a.project(d.getLatLng(),f));f--);},_childMarkerDragStart:function(d){d.target.__dragStart=d.target._latlng},_childMarkerMoved:function(d){if(!this._ignoreMove&&!d.target.__dragStart){var f=d.target._popup&&d.target._popup.isOpen();this._moveChild(d.target,d.oldLatLng,d.latlng),f&&d.target.openPopup()}},_moveChild:function(d,f,a){d._latlng=f,this.removeLayer(d),d._latlng=a,this.addLayer(d)},_childMarkerDragEnd:function(d){var f=d.target.__dragStart;delete d.target.__dragStart,f&&this._moveChild(d.target,f,d.target._latlng)},_removeLayer:function(d,f,a){var T=this._gridClusters,M=this._gridUnclustered,B=this._featureGroup,G=this._map,J=Math.floor(this._map.getMinZoom());f&&this._removeFromGridUnclustered(d,this._maxZoom);var ie=d.__parent,$=ie._markers,ae;for(this._arraySplice($,d);ie&&(ie._childCount--,ie._boundsNeedUpdate=!0,!(ie._zoom<J));)f&&ie._childCount<=1?(ae=ie._markers[0]===d?ie._markers[1]:ie._markers[0],T[ie._zoom].removeObject(ie,G.project(ie._cLatLng,ie._zoom)),M[ie._zoom].addObject(ae,G.project(ae.getLatLng(),ie._zoom)),this._arraySplice(ie.__parent._childClusters,ie),ie.__parent._markers.push(ae),ae.__parent=ie.__parent,ie._icon&&(B.removeLayer(ie),a||B.addLayer(ae))):ie._iconNeedsUpdate=!0,ie=ie.__parent;delete d.__parent},_isOrIsParent:function(d,f){for(;f;){if(d===f)return!0;f=f.parentNode}return!1},fire:function(d,f,a){if(f&&f.layer instanceof L.MarkerCluster){if(f.originalEvent&&this._isOrIsParent(f.layer._icon,f.originalEvent.relatedTarget))return;d="cluster"+d}L.FeatureGroup.prototype.fire.call(this,d,f,a)},listens:function(d,f){return L.FeatureGroup.prototype.listens.call(this,d,f)||L.FeatureGroup.prototype.listens.call(this,"cluster"+d,f)},_defaultIconCreateFunction:function(d){var f=d.getChildCount(),a=" marker-cluster-";return f<10?a+="small":f<100?a+="medium":a+="large",new L.DivIcon({html:"<div><span>"+f+"</span></div>",className:"marker-cluster"+a,iconSize:new L.Point(40,40)})},_bindEvents:function(){var d=this._map,f=this.options.spiderfyOnMaxZoom,a=this.options.showCoverageOnHover,T=this.options.zoomToBoundsOnClick,M=this.options.spiderfyOnEveryZoom;(f||T||M)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),a&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),d.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(d){var f=d.layer,a=f;if(!(d.type==="clusterkeypress"&&d.originalEvent&&d.originalEvent.keyCode!==13)){for(;a._childClusters.length===1;)a=a._childClusters[0];a._zoom===this._maxZoom&&a._childCount===f._childCount&&this.options.spiderfyOnMaxZoom?f.spiderfy():this.options.zoomToBoundsOnClick&&f.zoomToBounds(),this.options.spiderfyOnEveryZoom&&f.spiderfy(),d.originalEvent&&d.originalEvent.keyCode===13&&this._map._container.focus()}},_showCoverage:function(d){var f=this._map;this._inZoomAnimation||(this._shownPolygon&&f.removeLayer(this._shownPolygon),d.layer.getChildCount()>2&&d.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(d.layer.getConvexHull(),this.options.polygonOptions),f.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var d=this.options.spiderfyOnMaxZoom,f=this.options.showCoverageOnHover,a=this.options.zoomToBoundsOnClick,T=this.options.spiderfyOnEveryZoom,M=this._map;(d||a||T)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),f&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),M.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var d=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,d),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),d),this._currentShownBounds=d}},_generateInitialClusters:function(){var d=Math.ceil(this._map.getMaxZoom()),f=Math.floor(this._map.getMinZoom()),a=this.options.maxClusterRadius,T=a;typeof a!="function"&&(T=function(){return a}),this.options.disableClusteringAtZoom!==null&&(d=this.options.disableClusteringAtZoom-1),this._maxZoom=d,this._gridClusters={},this._gridUnclustered={};for(var M=d;M>=f;M--)this._gridClusters[M]=new L.DistanceGrid(T(M)),this._gridUnclustered[M]=new L.DistanceGrid(T(M));this._topClusterLevel=new this._markerCluster(this,f-1)},_addLayer:function(d,f){var a=this._gridClusters,T=this._gridUnclustered,M=Math.floor(this._map.getMinZoom()),B,G;for(this.options.singleMarkerMode&&this._overrideMarkerIcon(d),d.on(this._childMarkerEventHandlers,this);f>=M;f--){B=this._map.project(d.getLatLng(),f);var J=a[f].getNearObject(B);if(J){J._addChild(d),d.__parent=J;return}if(J=T[f].getNearObject(B),J){var ie=J.__parent;ie&&this._removeLayer(J,!1);var $=new this._markerCluster(this,f,J,d);a[f].addObject($,this._map.project($._cLatLng,f)),J.__parent=$,d.__parent=$;var ae=$;for(G=f-1;G>ie._zoom;G--)ae=new this._markerCluster(this,G,ae),a[G].addObject(ae,this._map.project(J.getLatLng(),G));ie._addChild(ae),this._removeFromGridUnclustered(J,f);return}T[f].addObject(d,B)}this._topClusterLevel._addChild(d),d.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(d){d instanceof L.MarkerCluster&&d._iconNeedsUpdate&&d._updateIcon()})},_enqueue:function(d){this._queue.push(d),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var d=0;d<this._queue.length;d++)this._queue[d].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var d=Math.round(this._map._zoom);this._processQueue(),this._zoom<d&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,d)):this._zoom>d?(this._animationStart(),this._animationZoomOut(this._zoom,d)):this._moveEnd()},_getExpandedVisibleBounds:function(){if(this.options.removeOutsideVisibleBounds){if(L.Browser.mobile)return this._checkBoundsMaxLat(this._map.getBounds())}else return this._mapBoundsInfinite;return this._checkBoundsMaxLat(this._map.getBounds().pad(1))},_checkBoundsMaxLat:function(d){var f=this._maxLat;return f!==void 0&&(d.getNorth()>=f&&(d._northEast.lat=1/0),d.getSouth()<=-f&&(d._southWest.lat=-1/0)),d},_animationAddLayerNonAnimated:function(d,f){if(f===d)this._featureGroup.addLayer(d);else if(f._childCount===2){f._addToMap();var a=f.getAllChildMarkers();this._featureGroup.removeLayer(a[0]),this._featureGroup.removeLayer(a[1])}else f._updateIcon()},_extractNonGroupLayers:function(d,f){var a=d.getLayers(),T=0,M;for(f=f||[];T<a.length;T++){if(M=a[T],M instanceof L.LayerGroup){this._extractNonGroupLayers(M,f);continue}f.push(M)}return f},_overrideMarkerIcon:function(d){var f=d.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[d]}});return f}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(d,f){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),d),this._topClusterLevel._recursivelyAddChildrenToMap(null,f,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(d,f){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),d),this._topClusterLevel._recursivelyAddChildrenToMap(null,f,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(d,f){this._animationAddLayerNonAnimated(d,f)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(d,f){var a=this._getExpandedVisibleBounds(),T=this._featureGroup,M=Math.floor(this._map.getMinZoom()),B;this._ignoreMove=!0,this._topClusterLevel._recursively(a,d,M,function(G){var J=G._latlng,ie=G._markers,$;for(a.contains(J)||(J=null),G._isSingleParent()&&d+1===f?(T.removeLayer(G),G._recursivelyAddChildrenToMap(null,f,a)):(G.clusterHide(),G._recursivelyAddChildrenToMap(J,f,a)),B=ie.length-1;B>=0;B--)$=ie[B],a.contains($._latlng)||T.removeLayer($)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(a,f),T.eachLayer(function(G){!(G instanceof L.MarkerCluster)&&G._icon&&G.clusterShow()}),this._topClusterLevel._recursively(a,d,f,function(G){G._recursivelyRestoreChildPositions(f)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(a,d,M,function(G){T.removeLayer(G),G.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(d,f){this._animationZoomOutSingle(this._topClusterLevel,d-1,f),this._topClusterLevel._recursivelyAddChildrenToMap(null,f,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),d,this._getExpandedVisibleBounds())},_animationAddLayer:function(d,f){var a=this,T=this._featureGroup;T.addLayer(d),f!==d&&(f._childCount>2?(f._updateIcon(),this._forceLayout(),this._animationStart(),d._setPos(this._map.latLngToLayerPoint(f.getLatLng())),d.clusterHide(),this._enqueue(function(){T.removeLayer(d),d.clusterShow(),a._animationEnd()})):(this._forceLayout(),a._animationStart(),a._animationZoomOutSingle(f,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(d,f,a){var T=this._getExpandedVisibleBounds(),M=Math.floor(this._map.getMinZoom());d._recursivelyAnimateChildrenInAndAddSelfToMap(T,M,f+1,a);var B=this;this._forceLayout(),d._recursivelyBecomeVisible(T,a),this._enqueue(function(){if(d._childCount===1){var G=d._markers[0];this._ignoreMove=!0,G.setLatLng(G.getLatLng()),this._ignoreMove=!1,G.clusterShow&&G.clusterShow()}else d._recursively(T,a,M,function(J){J._recursivelyRemoveChildrenFromMap(T,M,f+1)});B._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(d){return new L.MarkerClusterGroup(d)};var p=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(d,f,a,T){L.Marker.prototype.initialize.call(this,a?a._cLatLng||a.getLatLng():new L.LatLng(0,0),{icon:this,pane:d.options.clusterPane}),this._group=d,this._zoom=f,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,a&&this._addChild(a),T&&this._addChild(T)},getAllChildMarkers:function(d,f){d=d||[];for(var a=this._childClusters.length-1;a>=0;a--)this._childClusters[a].getAllChildMarkers(d,f);for(var T=this._markers.length-1;T>=0;T--)f&&this._markers[T].__dragStart||d.push(this._markers[T]);return d},getChildCount:function(){return this._childCount},zoomToBounds:function(d){for(var f=this._childClusters.slice(),a=this._group._map,T=a.getBoundsZoom(this._bounds),M=this._zoom+1,B=a.getZoom(),G;f.length>0&&T>M;){M++;var J=[];for(G=0;G<f.length;G++)J=J.concat(f[G]._childClusters);f=J}T>M?this._group._map.setView(this._latlng,M):T<=B?this._group._map.setView(this._latlng,B+1):this._group._map.fitBounds(this._bounds,d)},getBounds:function(){var d=new L.LatLngBounds;return d.extend(this._bounds),d},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(d,f){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(d),d instanceof L.MarkerCluster?(f||(this._childClusters.push(d),d.__parent=this),this._childCount+=d._childCount):(f||this._markers.push(d),this._childCount++),this.__parent&&this.__parent._addChild(d,!0)},_setClusterCenter:function(d){this._cLatLng||(this._cLatLng=d._cLatLng||d._latlng)},_resetBounds:function(){var d=this._bounds;d._southWest&&(d._southWest.lat=1/0,d._southWest.lng=1/0),d._northEast&&(d._northEast.lat=-1/0,d._northEast.lng=-1/0)},_recalculateBounds:function(){var d=this._markers,f=this._childClusters,a=0,T=0,M=this._childCount,B,G,J,ie;if(M!==0){for(this._resetBounds(),B=0;B<d.length;B++)J=d[B]._latlng,this._bounds.extend(J),a+=J.lat,T+=J.lng;for(B=0;B<f.length;B++)G=f[B],G._boundsNeedUpdate&&G._recalculateBounds(),this._bounds.extend(G._bounds),J=G._wLatLng,ie=G._childCount,a+=J.lat*ie,T+=J.lng*ie;this._latlng=this._wLatLng=new L.LatLng(a/M,T/M),this._boundsNeedUpdate=!1}},_addToMap:function(d){d&&(this._backupLatlng=this._latlng,this.setLatLng(d)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(d,f,a){this._recursively(d,this._group._map.getMinZoom(),a-1,function(T){var M=T._markers,B,G;for(B=M.length-1;B>=0;B--)G=M[B],G._icon&&(G._setPos(f),G.clusterHide())},function(T){var M=T._childClusters,B,G;for(B=M.length-1;B>=0;B--)G=M[B],G._icon&&(G._setPos(f),G.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(d,f,a,T){this._recursively(d,T,f,function(M){M._recursivelyAnimateChildrenIn(d,M._group._map.latLngToLayerPoint(M.getLatLng()).round(),a),M._isSingleParent()&&a-1===T?(M.clusterShow(),M._recursivelyRemoveChildrenFromMap(d,f,a)):M.clusterHide(),M._addToMap()})},_recursivelyBecomeVisible:function(d,f){this._recursively(d,this._group._map.getMinZoom(),f,null,function(a){a.clusterShow()})},_recursivelyAddChildrenToMap:function(d,f,a){this._recursively(a,this._group._map.getMinZoom()-1,f,function(T){if(f!==T._zoom)for(var M=T._markers.length-1;M>=0;M--){var B=T._markers[M];a.contains(B._latlng)&&(d&&(B._backupLatlng=B.getLatLng(),B.setLatLng(d),B.clusterHide&&B.clusterHide()),T._group._featureGroup.addLayer(B))}},function(T){T._addToMap(d)})},_recursivelyRestoreChildPositions:function(d){for(var f=this._markers.length-1;f>=0;f--){var a=this._markers[f];a._backupLatlng&&(a.setLatLng(a._backupLatlng),delete a._backupLatlng)}if(d-1===this._zoom)for(var T=this._childClusters.length-1;T>=0;T--)this._childClusters[T]._restorePosition();else for(var M=this._childClusters.length-1;M>=0;M--)this._childClusters[M]._recursivelyRestoreChildPositions(d)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(d,f,a,T){var M,B;this._recursively(d,f-1,a-1,function(G){for(B=G._markers.length-1;B>=0;B--)M=G._markers[B],(!T||!T.contains(M._latlng))&&(G._group._featureGroup.removeLayer(M),M.clusterShow&&M.clusterShow())},function(G){for(B=G._childClusters.length-1;B>=0;B--)M=G._childClusters[B],(!T||!T.contains(M._latlng))&&(G._group._featureGroup.removeLayer(M),M.clusterShow&&M.clusterShow())})},_recursively:function(d,f,a,T,M){var B=this._childClusters,G=this._zoom,J,ie;if(f<=G&&(T&&T(this),M&&G===a&&M(this)),G<f||G<a)for(J=B.length-1;J>=0;J--)ie=B[J],ie._boundsNeedUpdate&&ie._recalculateBounds(),d.intersects(ie._bounds)&&ie._recursively(d,f,a,T,M)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var d=this.options.opacity;return this.setOpacity(0),this.options.opacity=d,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(d){this._cellSize=d,this._sqCellSize=d*d,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(d,f){var a=this._getCoord(f.x),T=this._getCoord(f.y),M=this._grid,B=M[T]=M[T]||{},G=B[a]=B[a]||[],J=L.Util.stamp(d);this._objectPoint[J]=f,G.push(d)},updateObject:function(d,f){this.removeObject(d),this.addObject(d,f)},removeObject:function(d,f){var a=this._getCoord(f.x),T=this._getCoord(f.y),M=this._grid,B=M[T]=M[T]||{},G=B[a]=B[a]||[],J,ie;for(delete this._objectPoint[L.Util.stamp(d)],J=0,ie=G.length;J<ie;J++)if(G[J]===d)return G.splice(J,1),ie===1&&delete B[a],!0},eachObject:function(d,f){var a,T,M,B,G,J,ie,$=this._grid;for(a in $){G=$[a];for(T in G)for(J=G[T],M=0,B=J.length;M<B;M++)ie=d.call(f,J[M]),ie&&(M--,B--)}},getNearObject:function(d){var f=this._getCoord(d.x),a=this._getCoord(d.y),T,M,B,G,J,ie,$,ae,te=this._objectPoint,Te=this._sqCellSize,We=null;for(T=a-1;T<=a+1;T++)if(G=this._grid[T],G){for(M=f-1;M<=f+1;M++)if(J=G[M],J)for(B=0,ie=J.length;B<ie;B++)$=J[B],ae=this._sqDist(te[L.Util.stamp($)],d),(ae<Te||ae<=Te&&We===null)&&(Te=ae,We=$)}return We},_getCoord:function(d){var f=Math.floor(d/this._cellSize);return isFinite(f)?f:d},_sqDist:function(d,f){var a=f.x-d.x,T=f.y-d.y;return a*a+T*T}},(function(){L.QuickHull={getDistant:function(d,f){var a=f[1].lat-f[0].lat,T=f[0].lng-f[1].lng;return T*(d.lat-f[0].lat)+a*(d.lng-f[0].lng)},findMostDistantPointFromBaseLine:function(d,f){var a=0,T=null,M=[],B,G,J;for(B=f.length-1;B>=0;B--){if(G=f[B],J=this.getDistant(G,d),J>0)M.push(G);else continue;J>a&&(a=J,T=G)}return{maxPoint:T,newPoints:M}},buildConvexHull:function(d,f){var a=[],T=this.findMostDistantPointFromBaseLine(d,f);return T.maxPoint?(a=a.concat(this.buildConvexHull([d[0],T.maxPoint],T.newPoints)),a=a.concat(this.buildConvexHull([T.maxPoint,d[1]],T.newPoints)),a):[d[0]]},getConvexHull:function(d){var f=!1,a=!1,T=!1,M=!1,B=null,G=null,J=null,ie=null,$=null,ae=null,te;for(te=d.length-1;te>=0;te--){var Te=d[te];(f===!1||Te.lat>f)&&(B=Te,f=Te.lat),(a===!1||Te.lat<a)&&(G=Te,a=Te.lat),(T===!1||Te.lng>T)&&(J=Te,T=Te.lng),(M===!1||Te.lng<M)&&(ie=Te,M=Te.lng)}a!==f?(ae=G,$=B):(ae=ie,$=J);var We=[].concat(this.buildConvexHull([ae,$],d),this.buildConvexHull([$,ae],d));return We}}})(),L.MarkerCluster.include({getConvexHull:function(){var d=this.getAllChildMarkers(),f=[],a,T;for(T=d.length-1;T>=0;T--)a=d[T].getLatLng(),f.push(a);return L.QuickHull.getConvexHull(f)}}),L.MarkerCluster.include({_2PI:Math.PI*2,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(!(this._group._spiderfied===this||this._group._inZoomAnimation)){var d=this.getAllChildMarkers(null,!0),f=this._group,a=f._map,T=a.latLngToLayerPoint(this._latlng),M;this._group._unspiderfy(),this._group._spiderfied=this,this._group.options.spiderfyShapePositions?M=this._group.options.spiderfyShapePositions(d.length,T):d.length>=this._circleSpiralSwitchover?M=this._generatePointsSpiral(d.length,T):(T.y+=10,M=this._generatePointsCircle(d.length,T)),this._animationSpiderfy(d,M)}},unspiderfy:function(d){this._group._inZoomAnimation||(this._animationUnspiderfy(d),this._group._spiderfied=null)},_generatePointsCircle:function(d,f){var a=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+d),T=a/this._2PI,M=this._2PI/d,B=[],G,J;for(T=Math.max(T,35),B.length=d,G=0;G<d;G++)J=this._circleStartAngle+G*M,B[G]=new L.Point(f.x+T*Math.cos(J),f.y+T*Math.sin(J))._round();return B},_generatePointsSpiral:function(d,f){var a=this._group.options.spiderfyDistanceMultiplier,T=a*this._spiralLengthStart,M=a*this._spiralFootSeparation,B=a*this._spiralLengthFactor*this._2PI,G=0,J=[],ie;for(J.length=d,ie=d;ie>=0;ie--)ie<d&&(J[ie]=new L.Point(f.x+T*Math.cos(G),f.y+T*Math.sin(G))._round()),G+=M/T+ie*5e-4,T+=B/G;return J},_noanimationUnspiderfy:function(){var d=this._group,f=d._map,a=d._featureGroup,T=this.getAllChildMarkers(null,!0),M,B;for(d._ignoreMove=!0,this.setOpacity(1),B=T.length-1;B>=0;B--)M=T[B],a.removeLayer(M),M._preSpiderfyLatlng&&(M.setLatLng(M._preSpiderfyLatlng),delete M._preSpiderfyLatlng),M.setZIndexOffset&&M.setZIndexOffset(0),M._spiderLeg&&(f.removeLayer(M._spiderLeg),delete M._spiderLeg);d.fire("unspiderfied",{cluster:this,markers:T}),d._ignoreMove=!1,d._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(d,f){var a=this._group,T=a._map,M=a._featureGroup,B=this._group.options.spiderLegPolylineOptions,G,J,ie,$;for(a._ignoreMove=!0,G=0;G<d.length;G++)$=T.layerPointToLatLng(f[G]),J=d[G],ie=new L.Polyline([this._latlng,$],B),T.addLayer(ie),J._spiderLeg=ie,J._preSpiderfyLatlng=J._latlng,J.setLatLng($),J.setZIndexOffset&&J.setZIndexOffset(1e6),M.addLayer(J);this.setOpacity(.3),a._ignoreMove=!1,a.fire("spiderfied",{cluster:this,markers:d})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(d,f){var a=this,T=this._group,M=T._map,B=T._featureGroup,G=this._latlng,J=M.latLngToLayerPoint(G),ie=L.Path.SVG,$=L.extend({},this._group.options.spiderLegPolylineOptions),ae=$.opacity,te,Te,We,xe,Ze,dt;for(ae===void 0&&(ae=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),ie?($.opacity=0,$.className=($.className||"")+" leaflet-cluster-spider-leg"):$.opacity=ae,T._ignoreMove=!0,te=0;te<d.length;te++)Te=d[te],dt=M.layerPointToLatLng(f[te]),We=new L.Polyline([G,dt],$),M.addLayer(We),Te._spiderLeg=We,ie&&(xe=We._path,Ze=xe.getTotalLength()+.1,xe.style.strokeDasharray=Ze,xe.style.strokeDashoffset=Ze),Te.setZIndexOffset&&Te.setZIndexOffset(1e6),Te.clusterHide&&Te.clusterHide(),B.addLayer(Te),Te._setPos&&Te._setPos(J);for(T._forceLayout(),T._animationStart(),te=d.length-1;te>=0;te--)dt=M.layerPointToLatLng(f[te]),Te=d[te],Te._preSpiderfyLatlng=Te._latlng,Te.setLatLng(dt),Te.clusterShow&&Te.clusterShow(),ie&&(We=Te._spiderLeg,xe=We._path,xe.style.strokeDashoffset=0,We.setStyle({opacity:ae}));this.setOpacity(.3),T._ignoreMove=!1,setTimeout(function(){T._animationEnd(),T.fire("spiderfied",{cluster:a,markers:d})},200)},_animationUnspiderfy:function(d){var f=this,a=this._group,T=a._map,M=a._featureGroup,B=d?T._latLngToNewLayerPoint(this._latlng,d.zoom,d.center):T.latLngToLayerPoint(this._latlng),G=this.getAllChildMarkers(null,!0),J=L.Path.SVG,ie,$,ae,te,Te,We;for(a._ignoreMove=!0,a._animationStart(),this.setOpacity(1),$=G.length-1;$>=0;$--)ie=G[$],ie._preSpiderfyLatlng&&(ie.closePopup(),ie.setLatLng(ie._preSpiderfyLatlng),delete ie._preSpiderfyLatlng,We=!0,ie._setPos&&(ie._setPos(B),We=!1),ie.clusterHide&&(ie.clusterHide(),We=!1),We&&M.removeLayer(ie),J&&(ae=ie._spiderLeg,te=ae._path,Te=te.getTotalLength()+.1,te.style.strokeDashoffset=Te,ae.setStyle({opacity:0})));a._ignoreMove=!1,setTimeout(function(){var xe=0;for($=G.length-1;$>=0;$--)ie=G[$],ie._spiderLeg&&xe++;for($=G.length-1;$>=0;$--)ie=G[$],ie._spiderLeg&&(ie.clusterShow&&ie.clusterShow(),ie.setZIndexOffset&&ie.setZIndexOffset(0),xe>1&&M.removeLayer(ie),T.removeLayer(ie._spiderLeg),delete ie._spiderLeg);a._animationEnd(),a.fire("unspiderfied",{cluster:f,markers:G})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(d){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(d))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(d){this._spiderfied&&this._spiderfied.unspiderfy(d)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(d){d._spiderLeg&&(this._featureGroup.removeLayer(d),d.clusterShow&&d.clusterShow(),d.setZIndexOffset&&d.setZIndexOffset(0),this._map.removeLayer(d._spiderLeg),delete d._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(d){return d?d instanceof L.MarkerClusterGroup?d=d._topClusterLevel.getAllChildMarkers():d instanceof L.LayerGroup?d=d._layers:d instanceof L.MarkerCluster?d=d.getAllChildMarkers():d instanceof L.Marker&&(d=[d]):d=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(d),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(d),this},_flagParentsIconsNeedUpdate:function(d){var f,a;for(f in d)for(a=d[f].__parent;a;)a._iconNeedsUpdate=!0,a=a.__parent},_refreshSingleMarkerModeMarkers:function(d){var f,a;for(f in d)a=d[f],this.hasLayer(a)&&a.setIcon(this._overrideMarkerIcon(a))}}),L.Marker.include({refreshIconOptions:function(d,f){var a=this.options.icon;return L.setOptions(a,d),this.setIcon(a),f&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),s.MarkerClusterGroup=o,s.MarkerCluster=p,Object.defineProperty(s,"__esModule",{value:!0})})});var NP=Ee((__,v_)=>{(function(s,o){typeof __=="object"&&typeof v_<"u"?v_.exports=o():typeof define=="function"&&define.amd?define(o):(s=typeof globalThis<"u"?globalThis:s||self,s.maplibregl=o())})(__,(function(){"use strict";var s={},o={};function p(f,a,T){if(o[f]=T,f==="index"){var M="var sharedModule = {}; ("+o.shared+")(sharedModule); ("+o.worker+")(sharedModule);",B={};return o.shared(B),o.index(s,B),typeof window<"u"&&s.setWorkerUrl(window.URL.createObjectURL(new Blob([M],{type:"text/javascript"}))),s}}p("shared",["exports"],(function(f){"use strict";function a(r,e,i,l){return new(i||(i=Promise))((function(h,g){function y(P){try{S(l.next(P))}catch(A){g(A)}}function x(P){try{S(l.throw(P))}catch(A){g(A)}}function S(P){var A;P.done?h(P.value):(A=P.value,A instanceof i?A:new i((function(O){O(A)}))).then(y,x)}S((l=l.apply(r,e||[])).next())}))}function T(r,e){this.x=r,this.y=e}function M(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var B,G;typeof SuppressedError=="function"&&SuppressedError,T.prototype={clone(){return new T(this.x,this.y)},add(r){return this.clone()._add(r)},sub(r){return this.clone()._sub(r)},multByPoint(r){return this.clone()._multByPoint(r)},divByPoint(r){return this.clone()._divByPoint(r)},mult(r){return this.clone()._mult(r)},div(r){return this.clone()._div(r)},rotate(r){return this.clone()._rotate(r)},rotateAround(r,e){return this.clone()._rotateAround(r,e)},matMult(r){return this.clone()._matMult(r)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(r){return this.x===r.x&&this.y===r.y},dist(r){return Math.sqrt(this.distSqr(r))},distSqr(r){let e=r.x-this.x,i=r.y-this.y;return e*e+i*i},angle(){return Math.atan2(this.y,this.x)},angleTo(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith(r){return this.angleWithSep(r.x,r.y)},angleWithSep(r,e){return Math.atan2(this.x*e-this.y*r,this.x*r+this.y*e)},_matMult(r){let e=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=e,this},_add(r){return this.x+=r.x,this.y+=r.y,this},_sub(r){return this.x-=r.x,this.y-=r.y,this},_mult(r){return this.x*=r,this.y*=r,this},_div(r){return this.x/=r,this.y/=r,this},_multByPoint(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint(r){return this.x/=r.x,this.y/=r.y,this},_unit(){return this._div(this.mag()),this},_perp(){let r=this.y;return this.y=this.x,this.x=-r,this},_rotate(r){let e=Math.cos(r),i=Math.sin(r),l=i*this.x+e*this.y;return this.x=e*this.x-i*this.y,this.y=l,this},_rotateAround(r,e){let i=Math.cos(r),l=Math.sin(r),h=e.y+l*(this.x-e.x)+i*(this.y-e.y);return this.x=e.x+i*(this.x-e.x)-l*(this.y-e.y),this.y=h,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:T},T.convert=function(r){if(r instanceof T)return r;if(Array.isArray(r))return new T(+r[0],+r[1]);if(r.x!==void 0&&r.y!==void 0)return new T(+r.x,+r.y);throw new Error("Expected [x, y] or {x, y} point format")};var J=(function(){if(G)return B;function r(e,i,l,h){this.cx=3*e,this.bx=3*(l-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(h-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=i,this.p2x=l,this.p2y=h}return G=1,B=r,r.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,i){if(i===void 0&&(i=1e-6),e<0)return 0;if(e>1)return 1;for(var l=e,h=0;h<8;h++){var g=this.sampleCurveX(l)-e;if(Math.abs(g)<i)return l;var y=this.sampleCurveDerivativeX(l);if(Math.abs(y)<1e-6)break;l-=g/y}var x=0,S=1;for(l=e,h=0;h<20&&(g=this.sampleCurveX(l),!(Math.abs(g-e)<i));h++)e>g?x=l:S=l,l=.5*(S-x)+x;return l},solve:function(e,i){return this.sampleCurveY(this.solveCurveX(e,i))}},B})(),ie=M(J);let $,ae;function te(){return $==null&&($=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),$}function Te(){if(ae==null&&(ae=!1,te())){let e=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(e){for(let l=0;l<25;l++){let h=4*l;e.fillStyle=`rgb(${h},${h+1},${h+2})`,e.fillRect(l%5,Math.floor(l/5),1,1)}let i=e.getImageData(0,0,5,5).data;for(let l=0;l<100;l++)if(l%4!=3&&i[l]!==l){ae=!0;break}}}return ae||!1}var We=1e-6,xe=typeof Float32Array<"u"?Float32Array:Array;function Ze(){var r=new xe(9);return xe!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function dt(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function mt(){var r=new xe(3);return xe!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function Vt(r){var e=r[0],i=r[1],l=r[2];return Math.sqrt(e*e+i*i+l*l)}function Bt(r,e,i){var l=new xe(3);return l[0]=r,l[1]=e,l[2]=i,l}function je(r,e,i){return r[0]=e[0]+i[0],r[1]=e[1]+i[1],r[2]=e[2]+i[2],r}function Je(r,e,i){return r[0]=e[0]*i,r[1]=e[1]*i,r[2]=e[2]*i,r}function ot(r,e,i){var l=e[0],h=e[1],g=e[2],y=i[0],x=i[1],S=i[2];return r[0]=h*S-g*x,r[1]=g*y-l*S,r[2]=l*x-h*y,r}var St,Ht=Vt;function Tt(r,e,i){var l=e[0],h=e[1],g=e[2],y=e[3];return r[0]=i[0]*l+i[4]*h+i[8]*g+i[12]*y,r[1]=i[1]*l+i[5]*h+i[9]*g+i[13]*y,r[2]=i[2]*l+i[6]*h+i[10]*g+i[14]*y,r[3]=i[3]*l+i[7]*h+i[11]*g+i[15]*y,r}function _i(){var r=new xe(4);return xe!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r[3]=1,r}function ti(r,e,i,l){var h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",g=Math.PI/360;e*=g,l*=g,i*=g;var y=Math.sin(e),x=Math.cos(e),S=Math.sin(i),P=Math.cos(i),A=Math.sin(l),O=Math.cos(l);switch(h){case"xyz":r[0]=y*P*O+x*S*A,r[1]=x*S*O-y*P*A,r[2]=x*P*A+y*S*O,r[3]=x*P*O-y*S*A;break;case"xzy":r[0]=y*P*O-x*S*A,r[1]=x*S*O-y*P*A,r[2]=x*P*A+y*S*O,r[3]=x*P*O+y*S*A;break;case"yxz":r[0]=y*P*O+x*S*A,r[1]=x*S*O-y*P*A,r[2]=x*P*A-y*S*O,r[3]=x*P*O+y*S*A;break;case"yzx":r[0]=y*P*O+x*S*A,r[1]=x*S*O+y*P*A,r[2]=x*P*A-y*S*O,r[3]=x*P*O-y*S*A;break;case"zxy":r[0]=y*P*O-x*S*A,r[1]=x*S*O+y*P*A,r[2]=x*P*A+y*S*O,r[3]=x*P*O-y*S*A;break;case"zyx":r[0]=y*P*O-x*S*A,r[1]=x*S*O+y*P*A,r[2]=x*P*A-y*S*O,r[3]=x*P*O+y*S*A;break;default:throw new Error("Unknown angle order "+h)}return r}function ii(){var r=new xe(2);return xe!=Float32Array&&(r[0]=0,r[1]=0),r}function _t(r,e){var i=new xe(2);return i[0]=r,i[1]=e,i}mt(),St=new xe(4),xe!=Float32Array&&(St[0]=0,St[1]=0,St[2]=0,St[3]=0),mt(),Bt(1,0,0),Bt(0,1,0),_i(),_i(),Ze(),ii();let ei=8192;function kt(r,e,i){return e*(ei/(r.tileSize*Math.pow(2,i-r.tileID.overscaledZ)))}function ni(r,e){return(r%e+e)%e}function Yi(r,e,i){return r*(1-i)+e*i}function tr(r){if(r<=0)return 0;if(r>=1)return 1;let e=r*r,i=e*r;return 4*(r<.5?i:3*(r-e)+i-.75)}function Ci(r,e,i,l){let h=new ie(r,e,i,l);return g=>h.solve(g)}let qt=Ci(.25,.1,.25,1);function Ft(r,e,i){return Math.min(i,Math.max(e,r))}function gr(r,e,i){let l=i-e,h=((r-e)%l+l)%l+e;return h===e?i:h}function ji(r,...e){for(let i of e)for(let l in i)r[l]=i[l];return r}let Sa=1;function nn(r,e,i){let l={};for(let h in r)l[h]=e.call(this,r[h],h,r);return l}function Ga(r,e,i){let l={};for(let h in r)e.call(this,r[h],h,r)&&(l[h]=r[h]);return l}function Rr(r){return Array.isArray(r)?r.map(Rr):typeof r=="object"&&r?nn(r,Rr):r}let Ua={};function cr(r){Ua[r]||(typeof console<"u"&&console.warn(r),Ua[r]=!0)}function an(r,e,i){return(i.y-r.y)*(e.x-r.x)>(e.y-r.y)*(i.x-r.x)}function Pn(r){return typeof WorkerGlobalScope<"u"&&r!==void 0&&r instanceof WorkerGlobalScope}let Ei=null;function En(r){return typeof ImageBitmap<"u"&&r instanceof ImageBitmap}let Za="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function $a(r,e,i,l,h){return a(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");let g=new VideoFrame(r,{timestamp:0});try{let y=g?.format;if(!y||!y.startsWith("BGR")&&!y.startsWith("RGB"))throw new Error(`Unrecognized format ${y}`);let x=y.startsWith("BGR"),S=new Uint8ClampedArray(l*h*4);if(yield g.copyTo(S,(function(P,A,O,R,F){let V=4*Math.max(-A,0),W=(Math.max(0,O)-O)*R*4+V,Z=4*R,K=Math.max(0,A),ue=Math.max(0,O);return{rect:{x:K,y:ue,width:Math.min(P.width,A+R)-K,height:Math.min(P.height,O+F)-ue},layout:[{offset:W,stride:Z}]}})(r,e,i,l,h)),x)for(let P=0;P<S.length;P+=4){let A=S[P];S[P]=S[P+2],S[P+2]=A}return S}finally{g.close()}}))}let Wn,yn;function Ha(r,e,i,l){return r.addEventListener(e,i,l),{unsubscribe:()=>{r.removeEventListener(e,i,l)}}}function bs(r){return r*Math.PI/180}function Ur(r){return r/Math.PI*180}let ke={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},Y={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},H="AbortError";class re extends Error{constructor(e=H){super(e instanceof Error?e.message:e),this.name=H,e instanceof Error&&e.stack&&(this.stack=e.stack)}}function ye(r){return r.name===H}let ve={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Me(r){return ve.REGISTERED_PROTOCOLS[r.substring(0,r.indexOf("://"))]}let Ce="global-dispatcher";class we extends Error{constructor(e,i,l,h){super(`AJAXError: ${i} (${e}): ${l}`),this.status=e,this.statusText=i,this.url=l,this.body=h}}let Oe=()=>Pn(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Ke=function(r,e){if(/:\/\//.test(r.url)&&!/^https?:|^file:/.test(r.url)){let l=Me(r.url);if(l)return l(r,e);if(Pn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:r,targetMapId:Ce},e)}if(!(/^file:/.test(i=r.url)||/^file:/.test(Oe())&&!/^\w+:/.test(i))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(l,h){return a(this,void 0,void 0,(function*(){let g=new Request(l.url,{method:l.method||"GET",body:l.body,credentials:l.credentials,headers:l.headers,cache:l.cache,referrer:Oe(),signal:h.signal}),y,x;l.type!=="json"||g.headers.has("Accept")||g.headers.set("Accept","application/json");try{y=yield fetch(g)}catch(P){throw ye(P)?P:new we(0,P.message,l.url,new Blob)}if(!y.ok){let P=yield y.blob();throw new we(y.status,y.statusText,l.url,P)}x=l.type==="arrayBuffer"||l.type==="image"?y.arrayBuffer():l.type==="json"?y.json():y.text();let S=yield x;return h.signal.throwIfAborted(),{data:S,cacheControl:y.headers.get("Cache-Control"),expires:y.headers.get("Expires")}}))})(r,e);if(Pn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:r,mustQueue:!0,targetMapId:Ce},e)}var i;return(function(l,h){return new Promise(((g,y)=>{var x;let S=new XMLHttpRequest;S.open(l.method||"GET",l.url,!0),l.type!=="arrayBuffer"&&l.type!=="image"||(S.responseType="arraybuffer");for(let P in l.headers)S.setRequestHeader(P,l.headers[P]);l.type==="json"&&(S.responseType="text",!((x=l.headers)===null||x===void 0)&&x.Accept||S.setRequestHeader("Accept","application/json")),S.withCredentials=l.credentials==="include",S.onerror=()=>{y(new Error(S.statusText))},S.onload=()=>{if(!h.signal.aborted)if((S.status>=200&&S.status<300||S.status===0)&&S.response!==null){let P=S.response;if(l.type==="json")try{P=JSON.parse(S.response)}catch(A){return void y(A)}g({data:P,cacheControl:S.getResponseHeader("Cache-Control"),expires:S.getResponseHeader("Expires")})}else{let P=new Blob([S.response],{type:S.getResponseHeader("Content-Type")});y(new we(S.status,S.statusText,l.url,P))}},h.signal.addEventListener("abort",(()=>{S.abort(),y(new re(h.signal.reason))})),S.send(l.body)}))})(r,e)};function Ue(r){if(!r||r.indexOf("://")<=0||r.indexOf("data:image/")===0||r.indexOf("blob:")===0)return!0;let e=new URL(r),i=window.location;return e.protocol===i.protocol&&e.host===i.host}function st(r,e,i){i[r]&&i[r].indexOf(e)!==-1||(i[r]=i[r]||[],i[r].push(e))}function ft(r,e,i){if(i&&i[r]){let l=i[r].indexOf(e);l!==-1&&i[r].splice(l,1)}}class Et{constructor(e,i={}){ji(this,i),this.type=e}}class ui extends Et{constructor(e,i={}){super("error",ji({error:e},i))}}class ai{on(e,i){return this._listeners=this._listeners||{},st(e,i,this._listeners),{unsubscribe:()=>{this.off(e,i)}}}off(e,i){return ft(e,i,this._listeners),ft(e,i,this._oneTimeListeners),this}once(e,i){return i?(this._oneTimeListeners=this._oneTimeListeners||{},st(e,i,this._oneTimeListeners),this):new Promise((l=>this.once(e,l)))}fire(e,i){typeof e=="string"&&(e=new Et(e,i||{}));let l=e.type;if(this.listens(l)){e.target=this;let h=this._listeners&&this._listeners[l]?this._listeners[l].slice():[];for(let x of h)x.call(this,e);let g=this._oneTimeListeners&&this._oneTimeListeners[l]?this._oneTimeListeners[l].slice():[];for(let x of g)ft(l,x,this._oneTimeListeners),x.call(this,e);let y=this._eventedParent;y&&(ji(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),y.fire(e))}else e instanceof ui&&console.error(e.error);return this}listens(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)}setEventedParent(e,i){return this._eventedParent=e,this._eventedParentData=i,this}}var ze={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"array",value:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};let vi=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function yr(r,e){let i={};for(let l in r)l!=="ref"&&(i[l]=r[l]);return vi.forEach((l=>{l in e&&(i[l]=e[l])})),i}function At(r,e){if(Array.isArray(r)){if(!Array.isArray(e)||r.length!==e.length)return!1;for(let i=0;i<r.length;i++)if(!At(r[i],e[i]))return!1;return!0}if(typeof r=="object"&&r!==null&&e!==null){if(typeof e!="object"||Object.keys(r).length!==Object.keys(e).length)return!1;for(let i in r)if(!At(r[i],e[i]))return!1;return!0}return r===e}function hi(r,e){r.push(e)}function _r(r,e,i){hi(i,{command:"addSource",args:[r,e[r]]})}function bi(r,e,i){hi(e,{command:"removeSource",args:[r]}),i[r]=!0}function Ni(r,e,i,l){bi(r,i,l),_r(r,e,i)}function xi(r,e,i){let l;for(l in r[i])if(Object.prototype.hasOwnProperty.call(r[i],l)&&l!=="data"&&!At(r[i][l],e[i][l]))return!1;for(l in e[i])if(Object.prototype.hasOwnProperty.call(e[i],l)&&l!=="data"&&!At(r[i][l],e[i][l]))return!1;return!0}function ir(r,e,i,l,h,g){r=r||{},e=e||{};for(let y in r)Object.prototype.hasOwnProperty.call(r,y)&&(At(r[y],e[y])||i.push({command:g,args:[l,y,e[y],h]}));for(let y in e)Object.prototype.hasOwnProperty.call(e,y)&&!Object.prototype.hasOwnProperty.call(r,y)&&(At(r[y],e[y])||i.push({command:g,args:[l,y,e[y],h]}))}function Qs(r){return r.id}function Zr(r,e){return r[e.id]=e,r}class Re{constructor(e,i,l,h){this.message=(e?`${e}: `:"")+l,h&&(this.identifier=h),i!=null&&i.__line__&&(this.line=i.__line__)}}function Cr(r,...e){for(let i of e)for(let l in i)r[l]=i[l];return r}class kr extends Error{constructor(e,i){super(i),this.message=i,this.key=e}}class eo{constructor(e,i=[]){this.parent=e,this.bindings={};for(let[l,h]of i)this.bindings[l]=h}concat(e){return new eo(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}let sn={kind:"null"},it={kind:"number"},jt={kind:"string"},It={kind:"boolean"},$r={kind:"color"},Wo={kind:"projectionDefinition"},ra={kind:"object"},Dt={kind:"value"},to={kind:"collator"},xs={kind:"formatted"},Go={kind:"padding"},na={kind:"colorArray"},io={kind:"numberArray"},ws={kind:"resolvedImage"},ro={kind:"variableAnchorOffsetCollection"};function Br(r,e){return{kind:"array",itemType:r,N:e}}function di(r){if(r.kind==="array"){let e=di(r.itemType);return typeof r.N=="number"?`array<${e}, ${r.N}>`:r.itemType.kind==="value"?"array":`array<${e}>`}return r.kind}let Ss=[sn,it,jt,It,$r,Wo,xs,ra,Br(Dt),Go,io,na,ws,ro];function Gn(r,e){if(e.kind==="error")return null;if(r.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!Gn(r.itemType,e.itemType))&&(typeof r.N!="number"||r.N===e.N))return null}else{if(r.kind===e.kind)return null;if(r.kind==="value"){for(let i of Ss)if(!Gn(i,e))return null}}return`Expected ${di(r)} but found ${di(e)} instead.`}function Ts(r,e){return e.some((i=>i.kind===r.kind))}function Ta(r,e){return e.some((i=>i==="null"?r===null:i==="array"?Array.isArray(r):i==="object"?r&&!Array.isArray(r)&&typeof r=="object":i===typeof r))}function Fr(r,e){return r.kind==="array"&&e.kind==="array"?r.itemType.kind===e.itemType.kind&&typeof r.N=="number":r.kind===e.kind}let oi=.96422,mi=.82521,Ya=4/29,wi=6/29,Xa=3*wi*wi,Uo=wi*wi*wi,Nt=Math.PI/180,qi=180/Math.PI;function Zo(r){return(r%=360)<0&&(r+=360),r}function no([r,e,i,l]){let h,g,y=Il((.2225045*(r=jr(r))+.7168786*(e=jr(e))+.0606169*(i=jr(i)))/1);r===e&&e===i?h=g=y:(h=Il((.4360747*r+.3850649*e+.1430804*i)/oi),g=Il((.0139322*r+.0971045*e+.7141733*i)/mi));let x=116*y-16;return[x<0?0:x,500*(h-y),200*(y-g),l]}function jr(r){return r<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function Il(r){return r>Uo?Math.pow(r,1/3):r/Xa+Ya}function Cs([r,e,i,l]){let h=(r+16)/116,g=isNaN(e)?h:h+e/500,y=isNaN(i)?h:h-i/200;return h=1*Vi(h),g=oi*Vi(g),y=mi*Vi(y),[aa(3.1338561*g-1.6168667*h-.4906146*y),aa(-.9787684*g+1.9161415*h+.033454*y),aa(.0719453*g-.2289914*h+1.4052427*y),l]}function aa(r){return(r=r<=.00304?12.92*r:1.055*Math.pow(r,1/2.4)-.055)<0?0:r>1?1:r}function Vi(r){return r>wi?r*r*r:Xa*(r-Ya)}let Ka=Object.hasOwn||function(r,e){return Object.prototype.hasOwnProperty.call(r,e)};function sa(r,e){return Ka(r,e)?r[e]:void 0}function Ca(r){return parseInt(r.padEnd(2,r),16)/255}function $o(r,e){return Un(e?r/100:r,0,1)}function Un(r,e,i){return Math.min(Math.max(e,r),i)}function ao(r){return!r.some(Number.isNaN)}let Ja={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function An(r,e,i){return r+i*(e-r)}function ka(r,e,i){return r.map(((l,h)=>An(l,e[h],i)))}class Rt{constructor(e,i,l,h=1,g=!0){this.r=e,this.g=i,this.b=l,this.a=h,g||(this.r*=h,this.g*=h,this.b*=h,h||this.overwriteGetter("rgb",[e,i,l,h]))}static parse(e){if(e instanceof Rt)return e;if(typeof e!="string")return;let i=(function(l){if((l=l.toLowerCase().trim())==="transparent")return[0,0,0,0];let h=sa(Ja,l);if(h){let[y,x,S]=h;return[y/255,x/255,S/255,1]}if(l.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(l)){let y=l.length<6?1:2,x=1;return[Ca(l.slice(x,x+=y)),Ca(l.slice(x,x+=y)),Ca(l.slice(x,x+=y)),Ca(l.slice(x,x+y)||"ff")]}if(l.startsWith("rgb")){let y=l.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(y){let[x,S,P,A,O,R,F,V,W,Z,K,ue]=y,ee=[A||" ",F||" ",Z].join("");if(ee==="  "||ee==="  /"||ee===",,"||ee===",,,"){let ne=[P,R,W].join(""),de=ne==="%%%"?100:ne===""?255:0;if(de){let fe=[Un(+S/de,0,1),Un(+O/de,0,1),Un(+V/de,0,1),K?$o(+K,ue):1];if(ao(fe))return fe}}return}}let g=l.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(g){let[y,x,S,P,A,O,R,F,V]=g,W=[S||" ",A||" ",R].join("");if(W==="  "||W==="  /"||W===",,"||W===",,,"){let Z=[+x,Un(+P,0,100),Un(+O,0,100),F?$o(+F,V):1];if(ao(Z))return(function([K,ue,ee,ne]){function de(fe){let Pe=(fe+K/30)%12,Ge=ue*Math.min(ee,1-ee);return ee-Ge*Math.max(-1,Math.min(Pe-3,9-Pe,1))}return K=Zo(K),ue/=100,ee/=100,[de(0),de(8),de(4),ne]})(Z)}}})(e);return i?new Rt(...i,!1):void 0}get rgb(){let{r:e,g:i,b:l,a:h}=this,g=h||1/0;return this.overwriteGetter("rgb",[e/g,i/g,l/g,h])}get hcl(){return this.overwriteGetter("hcl",(function(e){let[i,l,h,g]=no(e),y=Math.sqrt(l*l+h*h);return[Math.round(1e4*y)?Zo(Math.atan2(h,l)*qi):NaN,y,i,g]})(this.rgb))}get lab(){return this.overwriteGetter("lab",no(this.rgb))}overwriteGetter(e,i){return Object.defineProperty(this,e,{value:i}),i}toString(){let[e,i,l,h]=this.rgb;return`rgba(${[e,i,l].map((g=>Math.round(255*g))).join(",")},${h})`}static interpolate(e,i,l,h="rgb"){switch(h){case"rgb":{let[g,y,x,S]=ka(e.rgb,i.rgb,l);return new Rt(g,y,x,S,!1)}case"hcl":{let[g,y,x,S]=e.hcl,[P,A,O,R]=i.hcl,F,V;if(isNaN(g)||isNaN(P))isNaN(g)?isNaN(P)?F=NaN:(F=P,x!==1&&x!==0||(V=A)):(F=g,O!==1&&O!==0||(V=y));else{let ee=P-g;P>g&&ee>180?ee-=360:P<g&&g-P>180&&(ee+=360),F=g+l*ee}let[W,Z,K,ue]=(function([ee,ne,de,fe]){return ee=isNaN(ee)?0:ee*Nt,Cs([de,Math.cos(ee)*ne,Math.sin(ee)*ne,fe])})([F,V??An(y,A,l),An(x,O,l),An(S,R,l)]);return new Rt(W,Z,K,ue,!1)}case"lab":{let[g,y,x,S]=Cs(ka(e.lab,i.lab,l));return new Rt(g,y,x,S,!1)}}}}Rt.black=new Rt(0,0,0,1),Rt.white=new Rt(1,1,1,1),Rt.transparent=new Rt(0,0,0,0),Rt.red=new Rt(1,0,0,1);class ks{constructor(e,i,l){this.sensitivity=e?i?"variant":"case":i?"accent":"base",this.locale=l,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,i){return this.collator.compare(e,i)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}let fc=["bottom","center","top"];class so{constructor(e,i,l,h,g,y){this.text=e,this.image=i,this.scale=l,this.fontStack=h,this.textColor=g,this.verticalAlign=y}}class Hr{constructor(e){this.sections=e}static fromString(e){return new Hr([new so(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((e=>e.text.length!==0||e.image&&e.image.name.length!==0))}static factory(e){return e instanceof Hr?e:Hr.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map((e=>e.text)).join("")}}class bt{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof bt)return e;if(typeof e=="number")return new bt([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(let i of e)if(typeof i!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]]}return new bt(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,i,l){return new bt(ka(e.values,i.values,l))}}class li{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof li)return e;if(typeof e=="number")return new li([e]);if(Array.isArray(e)){for(let i of e)if(typeof i!="number")return;return new li(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,i,l){return new li(ka(e.values,i.values,l))}}class ct{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof ct)return e;if(typeof e=="string"){let l=Rt.parse(e);return l?new ct([l]):void 0}if(!Array.isArray(e))return;let i=[];for(let l of e){if(typeof l!="string")return;let h=Rt.parse(l);if(!h)return;i.push(h)}return new ct(i)}toString(){return JSON.stringify(this.values)}static interpolate(e,i,l,h="rgb"){let g=[];if(e.values.length!=i.values.length)throw new Error(`colorArray: Arrays have mismatched length (${e.values.length} vs. ${i.values.length}), cannot interpolate.`);for(let y=0;y<e.values.length;y++)g.push(Rt.interpolate(e.values[y],i.values[y],l,h));return new ct(g)}}class gi extends Error{constructor(e){super(e),this.name="RuntimeError"}toJSON(){return this.message}}let Zn=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class vr{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof vr)return e;if(Array.isArray(e)&&!(e.length<1)&&e.length%2==0){for(let i=0;i<e.length;i+=2){let l=e[i],h=e[i+1];if(typeof l!="string"||!Zn.has(l)||!Array.isArray(h)||h.length!==2||typeof h[0]!="number"||typeof h[1]!="number")return}return new vr(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,i,l){let h=e.values,g=i.values;if(h.length!==g.length)throw new gi(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${i.toString()}`);let y=[];for(let x=0;x<h.length;x+=2){if(h[x]!==g[x])throw new gi(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${h[x]}, to[${x}]: ${g[x]}`);y.push(h[x]);let[S,P]=h[x+1],[A,O]=g[x+1];y.push([An(S,A,l),An(P,O,l)])}return new vr(y)}}class Nr{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Nr({name:e,available:!1}):null}}class Xi{constructor(e,i,l){this.from=e,this.to=i,this.transition=l}static interpolate(e,i,l){return new Xi(e,i,l)}static parse(e){return e instanceof Xi?e:Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number"?new Xi(e[0],e[1],e[2]):typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number"?new Xi(e.from,e.to,e.transition):typeof e=="string"?new Xi(e,e,1):void 0}}function Pa(r,e,i,l){return typeof r=="number"&&r>=0&&r<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof i=="number"&&i>=0&&i<=255?l===void 0||typeof l=="number"&&l>=0&&l<=1?null:`Invalid rgba value [${[r,e,i,l].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof l=="number"?[r,e,i,l]:[r,e,i]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function _n(r){if(r===null||typeof r=="string"||typeof r=="boolean"||typeof r=="number"||r instanceof Xi||r instanceof Rt||r instanceof ks||r instanceof Hr||r instanceof bt||r instanceof li||r instanceof ct||r instanceof vr||r instanceof Nr)return!0;if(Array.isArray(r)){for(let e of r)if(!_n(e))return!1;return!0}if(typeof r=="object"){for(let e in r)if(!_n(r[e]))return!1;return!0}return!1}function Kt(r){if(r===null)return sn;if(typeof r=="string")return jt;if(typeof r=="boolean")return It;if(typeof r=="number")return it;if(r instanceof Rt)return $r;if(r instanceof Xi)return Wo;if(r instanceof ks)return to;if(r instanceof Hr)return xs;if(r instanceof bt)return Go;if(r instanceof li)return io;if(r instanceof ct)return na;if(r instanceof vr)return ro;if(r instanceof Nr)return ws;if(Array.isArray(r)){let e=r.length,i;for(let l of r){let h=Kt(l);if(i){if(i===h)continue;i=Dt;break}i=h}return Br(i||Dt,e)}return ra}function on(r){let e=typeof r;return r===null?"":e==="string"||e==="number"||e==="boolean"?String(r):r instanceof Rt||r instanceof Xi||r instanceof Hr||r instanceof bt||r instanceof li||r instanceof ct||r instanceof vr||r instanceof Nr?r.toString():JSON.stringify(r)}class Mn{constructor(e,i){this.type=e,this.value=i}static parse(e,i){if(e.length!==2)return i.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!_n(e[1]))return i.error("invalid value");let l=e[1],h=Kt(l),g=i.expectedType;return h.kind!=="array"||h.N!==0||!g||g.kind!=="array"||typeof g.N=="number"&&g.N!==0||(h=g),new Mn(h,l)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}let oo={string:jt,number:it,boolean:It,object:ra};class Yr{constructor(e,i){this.type=e,this.args=i}static parse(e,i){if(e.length<2)return i.error("Expected at least one argument.");let l,h=1,g=e[0];if(g==="array"){let x,S;if(e.length>2){let P=e[1];if(typeof P!="string"||!(P in oo)||P==="object")return i.error('The item type argument of "array" must be one of string, number, boolean',1);x=oo[P],h++}else x=Dt;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return i.error('The length argument to "array" must be a positive integer literal',2);S=e[2],h++}l=Br(x,S)}else{if(!oo[g])throw new Error(`Types doesn't contain name = ${g}`);l=oo[g]}let y=[];for(;h<e.length;h++){let x=i.parse(e[h],h,Dt);if(!x)return null;y.push(x)}return new Yr(l,y)}evaluate(e){for(let i=0;i<this.args.length;i++){let l=this.args[i].evaluate(e);if(!Gn(this.type,Kt(l)))return l;if(i===this.args.length-1)throw new gi(`Expected value to be of type ${di(this.type)}, but found ${di(Kt(l))} instead.`)}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}let Ea={"to-boolean":It,"to-color":$r,"to-number":it,"to-string":jt};class In{constructor(e,i){this.type=e,this.args=i}static parse(e,i){if(e.length<2)return i.error("Expected at least one argument.");let l=e[0];if(!Ea[l])throw new Error(`Can't parse ${l} as it is not part of the known types`);if((l==="to-boolean"||l==="to-string")&&e.length!==2)return i.error("Expected one argument.");let h=Ea[l],g=[];for(let y=1;y<e.length;y++){let x=i.parse(e[y],y,Dt);if(!x)return null;g.push(x)}return new In(h,g)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let i,l;for(let h of this.args){if(i=h.evaluate(e),l=null,i instanceof Rt)return i;if(typeof i=="string"){let g=e.parseColor(i);if(g)return g}else if(Array.isArray(i)&&(l=i.length<3||i.length>4?`Invalid rgba value ${JSON.stringify(i)}: expected an array containing either three or four numeric values.`:Pa(i[0],i[1],i[2],i[3]),!l))return new Rt(i[0]/255,i[1]/255,i[2]/255,i[3])}throw new gi(l||`Could not parse color from value '${typeof i=="string"?i:JSON.stringify(i)}'`)}case"padding":{let i;for(let l of this.args){i=l.evaluate(e);let h=bt.parse(i);if(h)return h}throw new gi(`Could not parse padding from value '${typeof i=="string"?i:JSON.stringify(i)}'`)}case"numberArray":{let i;for(let l of this.args){i=l.evaluate(e);let h=li.parse(i);if(h)return h}throw new gi(`Could not parse numberArray from value '${typeof i=="string"?i:JSON.stringify(i)}'`)}case"colorArray":{let i;for(let l of this.args){i=l.evaluate(e);let h=ct.parse(i);if(h)return h}throw new gi(`Could not parse colorArray from value '${typeof i=="string"?i:JSON.stringify(i)}'`)}case"variableAnchorOffsetCollection":{let i;for(let l of this.args){i=l.evaluate(e);let h=vr.parse(i);if(h)return h}throw new gi(`Could not parse variableAnchorOffsetCollection from value '${typeof i=="string"?i:JSON.stringify(i)}'`)}case"number":{let i=null;for(let l of this.args){if(i=l.evaluate(e),i===null)return 0;let h=Number(i);if(!isNaN(h))return h}throw new gi(`Could not convert ${JSON.stringify(i)} to number.`)}case"formatted":return Hr.fromString(on(this.args[0].evaluate(e)));case"resolvedImage":return Nr.fromString(on(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return on(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}let mc=["Unknown","Point","LineString","Polygon"];class Ho{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?mc[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let i=this._parseColorCache.get(e);return i||(i=Rt.parse(e),this._parseColorCache.set(e,i)),i}}class Zt{constructor(e,i,l=[],h,g=new eo,y=[]){this.registry=e,this.path=l,this.key=l.map((x=>`[${x}]`)).join(""),this.scope=g,this.errors=y,this.expectedType=h,this._isConstant=i}parse(e,i,l,h,g={}){return i?this.concat(i,l,h)._parse(e,g):this._parse(e,g)}_parse(e,i){function l(h,g,y){return y==="assert"?new Yr(g,[h]):y==="coerce"?new In(g,[h]):h}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');let h=e[0];if(typeof h!="string")return this.error(`Expression name must be a string, but found ${typeof h} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;let g=this.registry[h];if(g){let y=g.parse(e,this);if(!y)return null;if(this.expectedType){let x=this.expectedType,S=y.type;if(x.kind!=="string"&&x.kind!=="number"&&x.kind!=="boolean"&&x.kind!=="object"&&x.kind!=="array"||S.kind!=="value"){if(x.kind==="projectionDefinition"&&["string","array"].includes(S.kind)||["color","formatted","resolvedImage"].includes(x.kind)&&["value","string"].includes(S.kind)||["padding","numberArray"].includes(x.kind)&&["value","number","array"].includes(S.kind)||x.kind==="colorArray"&&["value","string","array"].includes(S.kind)||x.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(S.kind))y=l(y,x,i.typeAnnotation||"coerce");else if(this.checkSubtype(x,S))return null}else y=l(y,x,i.typeAnnotation||"assert")}if(!(y instanceof Mn)&&y.type.kind!=="resolvedImage"&&this._isConstant(y)){let x=new Ho;try{y=new Mn(y.type,y.evaluate(x))}catch(S){return this.error(S.message),null}}return y}return this.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,i,l){let h=typeof e=="number"?this.path.concat(e):this.path,g=l?this.scope.concat(l):this.scope;return new Zt(this.registry,this._isConstant,h,i||null,g,this.errors)}error(e,...i){let l=`${this.key}${i.map((h=>`[${h}]`)).join("")}`;this.errors.push(new kr(l,e))}checkSubtype(e,i){let l=Gn(e,i);return l&&this.error(l),l}}class Si{constructor(e,i){this.type=i.type,this.bindings=[].concat(e),this.result=i}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(let i of this.bindings)e(i[1]);e(this.result)}static parse(e,i){if(e.length<4)return i.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);let l=[];for(let g=1;g<e.length-1;g+=2){let y=e[g];if(typeof y!="string")return i.error(`Expected string, but found ${typeof y} instead.`,g);if(/[^a-zA-Z0-9_]/.test(y))return i.error("Variable names must contain only alphanumeric characters or '_'.",g);let x=i.parse(e[g+1],g+1);if(!x)return null;l.push([y,x])}let h=i.parse(e[e.length-1],e.length-1,i.expectedType,l);return h?new Si(l,h):null}outputDefined(){return this.result.outputDefined()}}class Pr{constructor(e,i){this.type=i.type,this.name=e,this.boundExpression=i}static parse(e,i){if(e.length!==2||typeof e[1]!="string")return i.error("'var' expression requires exactly one string literal argument.");let l=e[1];return i.scope.has(l)?new Pr(l,i.scope.get(l)):i.error(`Unknown variable "${l}". Make sure "${l}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class Wt{constructor(e,i,l){this.type=e,this.index=i,this.input=l}static parse(e,i){if(e.length!==3)return i.error(`Expected 2 arguments, but found ${e.length-1} instead.`);let l=i.parse(e[1],1,it),h=i.parse(e[2],2,Br(i.expectedType||Dt));return l&&h?new Wt(h.type.itemType,l,h):null}evaluate(e){let i=this.index.evaluate(e),l=this.input.evaluate(e);if(i<0)throw new gi(`Array index out of bounds: ${i} < 0.`);if(i>=l.length)throw new gi(`Array index out of bounds: ${i} > ${l.length-1}.`);if(i!==Math.floor(i))throw new gi(`Array index must be an integer, but found ${i} instead.`);return l[i]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class Ot{constructor(e,i){this.type=It,this.needle=e,this.haystack=i}static parse(e,i){if(e.length!==3)return i.error(`Expected 2 arguments, but found ${e.length-1} instead.`);let l=i.parse(e[1],1,Dt),h=i.parse(e[2],2,Dt);return l&&h?Ts(l.type,[It,jt,it,sn,Dt])?new Ot(l,h):i.error(`Expected first argument to be of type boolean, string, number or null, but found ${di(l.type)} instead`):null}evaluate(e){let i=this.needle.evaluate(e),l=this.haystack.evaluate(e);if(!l)return!1;if(!Ta(i,["boolean","string","number","null"]))throw new gi(`Expected first argument to be of type boolean, string, number or null, but found ${di(Kt(i))} instead.`);if(!Ta(l,["string","array"]))throw new gi(`Expected second argument to be of type array or string, but found ${di(Kt(l))} instead.`);return l.indexOf(i)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class Ps{constructor(e,i,l){this.type=it,this.needle=e,this.haystack=i,this.fromIndex=l}static parse(e,i){if(e.length<=2||e.length>=5)return i.error(`Expected 2 or 3 arguments, but found ${e.length-1} instead.`);let l=i.parse(e[1],1,Dt),h=i.parse(e[2],2,Dt);if(!l||!h)return null;if(!Ts(l.type,[It,jt,it,sn,Dt]))return i.error(`Expected first argument to be of type boolean, string, number or null, but found ${di(l.type)} instead`);if(e.length===4){let g=i.parse(e[3],3,it);return g?new Ps(l,h,g):null}return new Ps(l,h)}evaluate(e){let i=this.needle.evaluate(e),l=this.haystack.evaluate(e);if(!Ta(i,["boolean","string","number","null"]))throw new gi(`Expected first argument to be of type boolean, string, number or null, but found ${di(Kt(i))} instead.`);let h;if(this.fromIndex&&(h=this.fromIndex.evaluate(e)),Ta(l,["string"])){let g=l.indexOf(i,h);return g===-1?-1:[...l.slice(0,g)].length}if(Ta(l,["array"]))return l.indexOf(i,h);throw new gi(`Expected second argument to be of type array or string, but found ${di(Kt(l))} instead.`)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class Jt{constructor(e,i,l,h,g,y){this.inputType=e,this.type=i,this.input=l,this.cases=h,this.outputs=g,this.otherwise=y}static parse(e,i){if(e.length<5)return i.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return i.error("Expected an even number of arguments.");let l,h;i.expectedType&&i.expectedType.kind!=="value"&&(h=i.expectedType);let g={},y=[];for(let P=2;P<e.length-1;P+=2){let A=e[P],O=e[P+1];Array.isArray(A)||(A=[A]);let R=i.concat(P);if(A.length===0)return R.error("Expected at least one branch label.");for(let V of A){if(typeof V!="number"&&typeof V!="string")return R.error("Branch labels must be numbers or strings.");if(typeof V=="number"&&Math.abs(V)>Number.MAX_SAFE_INTEGER)return R.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof V=="number"&&Math.floor(V)!==V)return R.error("Numeric branch labels must be integer values.");if(l){if(R.checkSubtype(l,Kt(V)))return null}else l=Kt(V);if(g[String(V)]!==void 0)return R.error("Branch labels must be unique.");g[String(V)]=y.length}let F=i.parse(O,P,h);if(!F)return null;h=h||F.type,y.push(F)}let x=i.parse(e[1],1,Dt);if(!x)return null;let S=i.parse(e[e.length-1],e.length-1,h);return S?x.type.kind!=="value"&&i.concat(1).checkSubtype(l,x.type)?null:new Jt(l,h,x,g,y,S):null}evaluate(e){let i=this.input.evaluate(e);return(Kt(i)===this.inputType&&this.outputs[this.cases[i]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))&&this.otherwise.outputDefined()}}class lo{constructor(e,i,l){this.type=e,this.branches=i,this.otherwise=l}static parse(e,i){if(e.length<4)return i.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return i.error("Expected an odd number of arguments.");let l;i.expectedType&&i.expectedType.kind!=="value"&&(l=i.expectedType);let h=[];for(let y=1;y<e.length-1;y+=2){let x=i.parse(e[y],y,It);if(!x)return null;let S=i.parse(e[y+1],y+1,l);if(!S)return null;h.push([x,S]),l=l||S.type}let g=i.parse(e[e.length-1],e.length-1,l);if(!g)return null;if(!l)throw new Error("Can't infer output type");return new lo(l,h,g)}evaluate(e){for(let[i,l]of this.branches)if(i.evaluate(e))return l.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(let[i,l]of this.branches)e(i),e(l);e(this.otherwise)}outputDefined(){return this.branches.every((([e,i])=>i.outputDefined()))&&this.otherwise.outputDefined()}}class ln{constructor(e,i,l,h){this.type=e,this.input=i,this.beginIndex=l,this.endIndex=h}static parse(e,i){if(e.length<=2||e.length>=5)return i.error(`Expected 2 or 3 arguments, but found ${e.length-1} instead.`);let l=i.parse(e[1],1,Dt),h=i.parse(e[2],2,it);if(!l||!h)return null;if(!Ts(l.type,[Br(Dt),jt,Dt]))return i.error(`Expected first argument to be of type array or string, but found ${di(l.type)} instead`);if(e.length===4){let g=i.parse(e[3],3,it);return g?new ln(l.type,l,h,g):null}return new ln(l.type,l,h)}evaluate(e){let i=this.input.evaluate(e),l=this.beginIndex.evaluate(e),h;if(this.endIndex&&(h=this.endIndex.evaluate(e)),Ta(i,["string"]))return[...i].slice(l,h).join("");if(Ta(i,["array"]))return i.slice(l,h);throw new gi(`Expected first argument to be of type array or string, but found ${di(Kt(i))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function Es(r,e){let i=r.length-1,l,h,g=0,y=i,x=0;for(;g<=y;)if(x=Math.floor((g+y)/2),l=r[x],h=r[x+1],l<=e){if(x===i||e<h)return x;g=x+1}else{if(!(l>e))throw new gi("Input is not a number.");y=x-1}return 0}class Aa{constructor(e,i,l){this.type=e,this.input=i,this.labels=[],this.outputs=[];for(let[h,g]of l)this.labels.push(h),this.outputs.push(g)}static parse(e,i){if(e.length-1<4)return i.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return i.error("Expected an even number of arguments.");let l=i.parse(e[1],1,it);if(!l)return null;let h=[],g=null;i.expectedType&&i.expectedType.kind!=="value"&&(g=i.expectedType);for(let y=1;y<e.length;y+=2){let x=y===1?-1/0:e[y],S=e[y+1],P=y,A=y+1;if(typeof x!="number")return i.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',P);if(h.length&&h[h.length-1][0]>=x)return i.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',P);let O=i.parse(S,A,g);if(!O)return null;g=g||O.type,h.push([x,O])}return new Aa(g,l,h)}evaluate(e){let i=this.labels,l=this.outputs;if(i.length===1)return l[0].evaluate(e);let h=this.input.evaluate(e);if(h<=i[0])return l[0].evaluate(e);let g=i.length;return h>=i[g-1]?l[g-1].evaluate(e):l[Es(i,h)].evaluate(e)}eachChild(e){e(this.input);for(let i of this.outputs)e(i)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}}function Yo(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var co,vn,qu=(function(){if(vn)return co;function r(e,i,l,h){this.cx=3*e,this.bx=3*(l-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(h-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=i,this.p2x=l,this.p2y=h}return vn=1,co=r,r.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,i){if(i===void 0&&(i=1e-6),e<0)return 0;if(e>1)return 1;for(var l=e,h=0;h<8;h++){var g=this.sampleCurveX(l)-e;if(Math.abs(g)<i)return l;var y=this.sampleCurveDerivativeX(l);if(Math.abs(y)<1e-6)break;l-=g/y}var x=0,S=1;for(l=e,h=0;h<20&&(g=this.sampleCurveX(l),!(Math.abs(g-e)<i));h++)e>g?x=l:S=l,l=.5*(S-x)+x;return l},solve:function(e,i){return this.sampleCurveY(this.solveCurveX(e,i))}},co})(),zl=Yo(qu);class Wi{constructor(e,i,l,h,g){this.type=e,this.operator=i,this.interpolation=l,this.input=h,this.labels=[],this.outputs=[];for(let[y,x]of g)this.labels.push(y),this.outputs.push(x)}static interpolationFactor(e,i,l,h){let g=0;if(e.name==="exponential")g=zn(i,e.base,l,h);else if(e.name==="linear")g=zn(i,1,l,h);else if(e.name==="cubic-bezier"){let y=e.controlPoints;g=new zl(y[0],y[1],y[2],y[3]).solve(zn(i,1,l,h))}return g}static parse(e,i){let[l,h,g,...y]=e;if(!Array.isArray(h)||h.length===0)return i.error("Expected an interpolation type expression.",1);if(h[0]==="linear")h={name:"linear"};else if(h[0]==="exponential"){let P=h[1];if(typeof P!="number")return i.error("Exponential interpolation requires a numeric base.",1,1);h={name:"exponential",base:P}}else{if(h[0]!=="cubic-bezier")return i.error(`Unknown interpolation type ${String(h[0])}`,1,0);{let P=h.slice(1);if(P.length!==4||P.some((A=>typeof A!="number"||A<0||A>1)))return i.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);h={name:"cubic-bezier",controlPoints:P}}}if(e.length-1<4)return i.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return i.error("Expected an even number of arguments.");if(g=i.parse(g,2,it),!g)return null;let x=[],S=null;l!=="interpolate-hcl"&&l!=="interpolate-lab"||i.expectedType==na?i.expectedType&&i.expectedType.kind!=="value"&&(S=i.expectedType):S=$r;for(let P=0;P<y.length;P+=2){let A=y[P],O=y[P+1],R=P+3,F=P+4;if(typeof A!="number")return i.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',R);if(x.length&&x[x.length-1][0]>=A)return i.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',R);let V=i.parse(O,F,S);if(!V)return null;S=S||V.type,x.push([A,V])}return Fr(S,it)||Fr(S,Wo)||Fr(S,$r)||Fr(S,Go)||Fr(S,io)||Fr(S,na)||Fr(S,ro)||Fr(S,Br(it))?new Wi(S,l,h,g,x):i.error(`Type ${di(S)} is not interpolatable.`)}evaluate(e){let i=this.labels,l=this.outputs;if(i.length===1)return l[0].evaluate(e);let h=this.input.evaluate(e);if(h<=i[0])return l[0].evaluate(e);let g=i.length;if(h>=i[g-1])return l[g-1].evaluate(e);let y=Es(i,h),x=Wi.interpolationFactor(this.interpolation,h,i[y],i[y+1]),S=l[y].evaluate(e),P=l[y+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return An(S,P,x);case"color":return Rt.interpolate(S,P,x);case"padding":return bt.interpolate(S,P,x);case"colorArray":return ct.interpolate(S,P,x);case"numberArray":return li.interpolate(S,P,x);case"variableAnchorOffsetCollection":return vr.interpolate(S,P,x);case"array":return ka(S,P,x);case"projectionDefinition":return Xi.interpolate(S,P,x)}case"interpolate-hcl":switch(this.type.kind){case"color":return Rt.interpolate(S,P,x,"hcl");case"colorArray":return ct.interpolate(S,P,x,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Rt.interpolate(S,P,x,"lab");case"colorArray":return ct.interpolate(S,P,x,"lab")}}}eachChild(e){e(this.input);for(let i of this.outputs)e(i)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}}function zn(r,e,i,l){let h=l-i,g=r-i;return h===0?0:e===1?g/h:(Math.pow(e,g)-1)/(Math.pow(e,h)-1)}let ki={color:Rt.interpolate,number:An,padding:bt.interpolate,numberArray:li.interpolate,colorArray:ct.interpolate,variableAnchorOffsetCollection:vr.interpolate,array:ka};class oa{constructor(e,i){this.type=e,this.args=i}static parse(e,i){if(e.length<2)return i.error("Expected at least one argument.");let l=null,h=i.expectedType;h&&h.kind!=="value"&&(l=h);let g=[];for(let x of e.slice(1)){let S=i.parse(x,1+g.length,l,void 0,{typeAnnotation:"omit"});if(!S)return null;l=l||S.type,g.push(S)}if(!l)throw new Error("No output type");let y=h&&g.some((x=>Gn(h,x.type)));return new oa(y?Dt:l,g)}evaluate(e){let i,l=null,h=0;for(let g of this.args)if(h++,l=g.evaluate(e),l&&l instanceof Nr&&!l.available&&(i||(i=l.name),l=null,h===this.args.length&&(l=i)),l!==null)break;return l}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}function Ll(r,e){return r==="=="||r==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function As(r,e,i,l){return l.compare(e,i)===0}function Ii(r,e,i){let l=r!=="=="&&r!=="!=";return class jP{constructor(g,y,x){this.type=It,this.lhs=g,this.rhs=y,this.collator=x,this.hasUntypedArgument=g.type.kind==="value"||y.type.kind==="value"}static parse(g,y){if(g.length!==3&&g.length!==4)return y.error("Expected two or three arguments.");let x=g[0],S=y.parse(g[1],1,Dt);if(!S)return null;if(!Ll(x,S.type))return y.concat(1).error(`"${x}" comparisons are not supported for type '${di(S.type)}'.`);let P=y.parse(g[2],2,Dt);if(!P)return null;if(!Ll(x,P.type))return y.concat(2).error(`"${x}" comparisons are not supported for type '${di(P.type)}'.`);if(S.type.kind!==P.type.kind&&S.type.kind!=="value"&&P.type.kind!=="value")return y.error(`Cannot compare types '${di(S.type)}' and '${di(P.type)}'.`);l&&(S.type.kind==="value"&&P.type.kind!=="value"?S=new Yr(P.type,[S]):S.type.kind!=="value"&&P.type.kind==="value"&&(P=new Yr(S.type,[P])));let A=null;if(g.length===4){if(S.type.kind!=="string"&&P.type.kind!=="string"&&S.type.kind!=="value"&&P.type.kind!=="value")return y.error("Cannot use collator to compare non-string types.");if(A=y.parse(g[3],3,to),!A)return null}return new jP(S,P,A)}evaluate(g){let y=this.lhs.evaluate(g),x=this.rhs.evaluate(g);if(l&&this.hasUntypedArgument){let S=Kt(y),P=Kt(x);if(S.kind!==P.kind||S.kind!=="string"&&S.kind!=="number")throw new gi(`Expected arguments for "${r}" to be (string, string) or (number, number), but found (${S.kind}, ${P.kind}) instead.`)}if(this.collator&&!l&&this.hasUntypedArgument){let S=Kt(y),P=Kt(x);if(S.kind!=="string"||P.kind!=="string")return e(g,y,x)}return this.collator?i(g,y,x,this.collator.evaluate(g)):e(g,y,x)}eachChild(g){g(this.lhs),g(this.rhs),this.collator&&g(this.collator)}outputDefined(){return!0}}}let gc=Ii("==",(function(r,e,i){return e===i}),As),Ol=Ii("!=",(function(r,e,i){return e!==i}),(function(r,e,i,l){return!As(0,e,i,l)})),Xo=Ii("<",(function(r,e,i){return e<i}),(function(r,e,i,l){return l.compare(e,i)<0})),Vu=Ii(">",(function(r,e,i){return e>i}),(function(r,e,i,l){return l.compare(e,i)>0})),Qa=Ii("<=",(function(r,e,i){return e<=i}),(function(r,e,i,l){return l.compare(e,i)<=0})),uo=Ii(">=",(function(r,e,i){return e>=i}),(function(r,e,i,l){return l.compare(e,i)>=0}));class la{constructor(e,i,l){this.type=to,this.locale=l,this.caseSensitive=e,this.diacriticSensitive=i}static parse(e,i){if(e.length!==2)return i.error("Expected one argument.");let l=e[1];if(typeof l!="object"||Array.isArray(l))return i.error("Collator options argument must be an object.");let h=i.parse(l["case-sensitive"]!==void 0&&l["case-sensitive"],1,It);if(!h)return null;let g=i.parse(l["diacritic-sensitive"]!==void 0&&l["diacritic-sensitive"],1,It);if(!g)return null;let y=null;return l.locale&&(y=i.parse(l.locale,1,jt),!y)?null:new la(h,g,y)}evaluate(e){return new ks(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class ca{constructor(e,i,l,h,g){this.type=jt,this.number=e,this.locale=i,this.currency=l,this.minFractionDigits=h,this.maxFractionDigits=g}static parse(e,i){if(e.length!==3)return i.error("Expected two arguments.");let l=i.parse(e[1],1,it);if(!l)return null;let h=e[2];if(typeof h!="object"||Array.isArray(h))return i.error("NumberFormat options argument must be an object.");let g=null;if(h.locale&&(g=i.parse(h.locale,1,jt),!g))return null;let y=null;if(h.currency&&(y=i.parse(h.currency,1,jt),!y))return null;let x=null;if(h["min-fraction-digits"]&&(x=i.parse(h["min-fraction-digits"],1,it),!x))return null;let S=null;return h["max-fraction-digits"]&&(S=i.parse(h["max-fraction-digits"],1,it),!S)?null:new ca(l,g,y,x,S)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class ho{constructor(e){this.type=xs,this.sections=e}static parse(e,i){if(e.length<2)return i.error("Expected at least one argument.");let l=e[1];if(!Array.isArray(l)&&typeof l=="object")return i.error("First argument must be an image or text section.");let h=[],g=!1;for(let y=1;y<=e.length-1;++y){let x=e[y];if(g&&typeof x=="object"&&!Array.isArray(x)){g=!1;let S=null;if(x["font-scale"]&&(S=i.parse(x["font-scale"],1,it),!S))return null;let P=null;if(x["text-font"]&&(P=i.parse(x["text-font"],1,Br(jt)),!P))return null;let A=null;if(x["text-color"]&&(A=i.parse(x["text-color"],1,$r),!A))return null;let O=null;if(x["vertical-align"]){if(typeof x["vertical-align"]=="string"&&!fc.includes(x["vertical-align"]))return i.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${x["vertical-align"]}' instead.`);if(O=i.parse(x["vertical-align"],1,jt),!O)return null}let R=h[h.length-1];R.scale=S,R.font=P,R.textColor=A,R.verticalAlign=O}else{let S=i.parse(e[y],1,Dt);if(!S)return null;let P=S.type.kind;if(P!=="string"&&P!=="value"&&P!=="null"&&P!=="resolvedImage")return i.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");g=!0,h.push({content:S,scale:null,font:null,textColor:null,verticalAlign:null})}}return new ho(h)}evaluate(e){return new Hr(this.sections.map((i=>{let l=i.content.evaluate(e);return Kt(l)===ws?new so("",l,null,null,null,i.verticalAlign?i.verticalAlign.evaluate(e):null):new so(on(l),null,i.scale?i.scale.evaluate(e):null,i.font?i.font.evaluate(e).join(","):null,i.textColor?i.textColor.evaluate(e):null,i.verticalAlign?i.verticalAlign.evaluate(e):null)})))}eachChild(e){for(let i of this.sections)e(i.content),i.scale&&e(i.scale),i.font&&e(i.font),i.textColor&&e(i.textColor),i.verticalAlign&&e(i.verticalAlign)}outputDefined(){return!1}}class $n{constructor(e){this.type=ws,this.input=e}static parse(e,i){if(e.length!==2)return i.error("Expected two arguments.");let l=i.parse(e[1],1,jt);return l?new $n(l):i.error("No image name provided.")}evaluate(e){let i=this.input.evaluate(e),l=Nr.fromString(i);return l&&e.availableImages&&(l.available=e.availableImages.indexOf(i)>-1),l}eachChild(e){e(this.input)}outputDefined(){return!1}}class br{constructor(e){this.type=it,this.input=e}static parse(e,i){if(e.length!==2)return i.error(`Expected 1 argument, but found ${e.length-1} instead.`);let l=i.parse(e[1],1);return l?l.type.kind!=="array"&&l.type.kind!=="string"&&l.type.kind!=="value"?i.error(`Expected argument of type string or array, but found ${di(l.type)} instead.`):new br(l):null}evaluate(e){let i=this.input.evaluate(e);if(typeof i=="string")return[...i].length;if(Array.isArray(i))return i.length;throw new gi(`Expected value to be of type string or array, but found ${di(Kt(i))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}let Ki=8192;function Dl(r,e){let i=(180+r[0])/360,l=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r[1]*Math.PI/360)))/360,h=Math.pow(2,e.z);return[Math.round(i*h*Ki),Math.round(l*h*Ki)]}function Ms(r,e){let i=Math.pow(2,e.z);return[(h=(r[0]/Ki+e.x)/i,360*h-180),(l=(r[1]/Ki+e.y)/i,360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90)];var l,h}function es(r,e){r[0]=Math.min(r[0],e[0]),r[1]=Math.min(r[1],e[1]),r[2]=Math.max(r[2],e[0]),r[3]=Math.max(r[3],e[1])}function ua(r,e){return!(r[0]<=e[0]||r[2]>=e[2]||r[1]<=e[1]||r[3]>=e[3])}function Wu(r,e,i){let l=r[0]-e[0],h=r[1]-e[1],g=r[0]-i[0],y=r[1]-i[1];return l*y-g*h==0&&l*g<=0&&h*y<=0}function Ko(r,e,i,l){return(h=[l[0]-i[0],l[1]-i[1]])[0]*(g=[e[0]-r[0],e[1]-r[1]])[1]-h[1]*g[0]!=0&&!(!Ln(r,e,i,l)||!Ln(i,l,r,e));var h,g}function yc(r,e,i){for(let l of i)for(let h=0;h<l.length-1;++h)if(Ko(r,e,l[h],l[h+1]))return!0;return!1}function Is(r,e,i=!1){let l=!1;for(let x of e)for(let S=0;S<x.length-1;S++){if(Wu(r,x[S],x[S+1]))return i;(g=x[S])[1]>(h=r)[1]!=(y=x[S+1])[1]>h[1]&&h[0]<(y[0]-g[0])*(h[1]-g[1])/(y[1]-g[1])+g[0]&&(l=!l)}var h,g,y;return l}function Xr(r,e){for(let i of e)if(Is(r,i))return!0;return!1}function ts(r,e){for(let i of r)if(!Is(i,e))return!1;for(let i=0;i<r.length-1;++i)if(yc(r[i],r[i+1],e))return!1;return!0}function _c(r,e){for(let i of e)if(ts(r,i))return!0;return!1}function Ln(r,e,i,l){let h=l[0]-i[0],g=l[1]-i[1],y=(r[0]-i[0])*g-h*(r[1]-i[1]),x=(e[0]-i[0])*g-h*(e[1]-i[1]);return y>0&&x<0||y<0&&x>0}function Rl(r,e,i){let l=[];for(let h=0;h<r.length;h++){let g=[];for(let y=0;y<r[h].length;y++){let x=Dl(r[h][y],i);es(e,x),g.push(x)}l.push(g)}return l}function Ma(r,e,i){let l=[];for(let h=0;h<r.length;h++){let g=Rl(r[h],e,i);l.push(g)}return l}function vc(r,e,i,l){if(r[0]<i[0]||r[0]>i[2]){let h=.5*l,g=r[0]-i[0]>h?-l:i[0]-r[0]>h?l:0;g===0&&(g=r[0]-i[2]>h?-l:i[2]-r[0]>h?l:0),r[0]+=g}es(e,r)}function zs(r,e,i,l){let h=Math.pow(2,l.z)*Ki,g=[l.x*Ki,l.y*Ki],y=[];for(let x of r)for(let S of x){let P=[S.x+g[0],S.y+g[1]];vc(P,e,i,h),y.push(P)}return y}function Bl(r,e,i,l){let h=Math.pow(2,l.z)*Ki,g=[l.x*Ki,l.y*Ki],y=[];for(let S of r){let P=[];for(let A of S){let O=[A.x+g[0],A.y+g[1]];es(e,O),P.push(O)}y.push(P)}if(e[2]-e[0]<=h/2){(x=e)[0]=x[1]=1/0,x[2]=x[3]=-1/0;for(let S of y)for(let P of S)vc(P,e,i,h)}var x;return y}class Hn{constructor(e,i){this.type=It,this.geojson=e,this.geometries=i}static parse(e,i){if(e.length!==2)return i.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(_n(e[1])){let l=e[1];if(l.type==="FeatureCollection"){let h=[];for(let g of l.features){let{type:y,coordinates:x}=g.geometry;y==="Polygon"&&h.push(x),y==="MultiPolygon"&&h.push(...x)}if(h.length)return new Hn(l,{type:"MultiPolygon",coordinates:h})}else if(l.type==="Feature"){let h=l.geometry.type;if(h==="Polygon"||h==="MultiPolygon")return new Hn(l,l.geometry)}else if(l.type==="Polygon"||l.type==="MultiPolygon")return new Hn(l,l)}return i.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return(function(i,l){let h=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],y=i.canonicalID();if(l.type==="Polygon"){let x=Rl(l.coordinates,g,y),S=zs(i.geometry(),h,g,y);if(!ua(h,g))return!1;for(let P of S)if(!Is(P,x))return!1}if(l.type==="MultiPolygon"){let x=Ma(l.coordinates,g,y),S=zs(i.geometry(),h,g,y);if(!ua(h,g))return!1;for(let P of S)if(!Xr(P,x))return!1}return!0})(e,this.geometries);if(e.geometryType()==="LineString")return(function(i,l){let h=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],y=i.canonicalID();if(l.type==="Polygon"){let x=Rl(l.coordinates,g,y),S=Bl(i.geometry(),h,g,y);if(!ua(h,g))return!1;for(let P of S)if(!ts(P,x))return!1}if(l.type==="MultiPolygon"){let x=Ma(l.coordinates,g,y),S=Bl(i.geometry(),h,g,y);if(!ua(h,g))return!1;for(let P of S)if(!_c(P,x))return!1}return!0})(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let bc=class{constructor(r=[],e=(i,l)=>i<l?-1:i>l?1:0){if(this.data=r,this.length=this.data.length,this.compare=e,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(r){this.data.push(r),this._up(this.length++)}pop(){if(this.length===0)return;let r=this.data[0],e=this.data.pop();return--this.length>0&&(this.data[0]=e,this._down(0)),r}peek(){return this.data[0]}_up(r){let{data:e,compare:i}=this,l=e[r];for(;r>0;){let h=r-1>>1,g=e[h];if(i(l,g)>=0)break;e[r]=g,r=h}e[r]=l}_down(r){let{data:e,compare:i}=this,l=this.length>>1,h=e[r];for(;r<l;){let g=1+(r<<1),y=g+1;if(y<this.length&&i(e[y],e[g])<0&&(g=y),i(e[g],h)>=0)break;e[r]=e[g],r=g}e[r]=h}};function Yn(r,e,i=0,l=r.length-1,h=xc){for(;l>i;){if(l-i>600){let S=l-i+1,P=e-i+1,A=Math.log(S),O=.5*Math.exp(2*A/3),R=.5*Math.sqrt(A*O*(S-O)/S)*(P-S/2<0?-1:1);Yn(r,e,Math.max(i,Math.floor(e-P*O/S+R)),Math.min(l,Math.floor(e+(S-P)*O/S+R)),h)}let g=r[e],y=i,x=l;for(ha(r,i,e),h(r[l],g)>0&&ha(r,i,l);y<x;){for(ha(r,y,x),y++,x--;h(r[y],g)<0;)y++;for(;h(r[x],g)>0;)x--}h(r[i],g)===0?ha(r,i,x):(x++,ha(r,x,l)),x<=e&&(i=x+1),e<=x&&(l=x-1)}}function ha(r,e,i){let l=r[e];r[e]=r[i],r[i]=l}function xc(r,e){return r<e?-1:r>e?1:0}function Ls(r,e){if(r.length<=1)return[r];let i=[],l,h;for(let g of r){let y=da(g);y!==0&&(g.area=Math.abs(y),h===void 0&&(h=y<0),h===y<0?(l&&i.push(l),l=[g]):l.push(g))}if(l&&i.push(l),e>1)for(let g=0;g<i.length;g++)i[g].length<=e||(Yn(i[g],e,1,i[g].length-1,Gu),i[g]=i[g].slice(0,e));return i}function Gu(r,e){return e.area-r.area}function da(r){let e=0;for(let i,l,h=0,g=r.length,y=g-1;h<g;y=h++)i=r[h],l=r[y],e+=(l.x-i.x)*(i.y+l.y);return e}let wc=1/298.257223563,Xn=wc*(2-wc),Sc=Math.PI/180;class On{constructor(e){let i=6378.137*Sc*1e3,l=Math.cos(e*Sc),h=1/(1-Xn*(1-l*l)),g=Math.sqrt(h);this.kx=i*g*l,this.ky=i*g*h*(1-Xn)}distance(e,i){let l=this.wrap(e[0]-i[0])*this.kx,h=(e[1]-i[1])*this.ky;return Math.sqrt(l*l+h*h)}pointOnLine(e,i){let l,h,g,y,x=1/0;for(let S=0;S<e.length-1;S++){let P=e[S][0],A=e[S][1],O=this.wrap(e[S+1][0]-P)*this.kx,R=(e[S+1][1]-A)*this.ky,F=0;O===0&&R===0||(F=(this.wrap(i[0]-P)*this.kx*O+(i[1]-A)*this.ky*R)/(O*O+R*R),F>1?(P=e[S+1][0],A=e[S+1][1]):F>0&&(P+=O/this.kx*F,A+=R/this.ky*F)),O=this.wrap(i[0]-P)*this.kx,R=(i[1]-A)*this.ky;let V=O*O+R*R;V<x&&(x=V,l=P,h=A,g=S,y=F)}return{point:[l,h],index:g,t:Math.max(0,Math.min(1,y))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}function po(r,e){return e[0]-r[0]}function fo(r){return r[1]-r[0]+1}function cn(r,e){return r[1]>=r[0]&&r[1]<e}function is(r,e){if(r[0]>r[1])return[null,null];let i=fo(r);if(e){if(i===2)return[r,null];let h=Math.floor(i/2);return[[r[0],r[0]+h],[r[0]+h,r[1]]]}if(i===1)return[r,null];let l=Math.floor(i/2)-1;return[[r[0],r[0]+l],[r[0]+l+1,r[1]]]}function mo(r,e){if(!cn(e,r.length))return[1/0,1/0,-1/0,-1/0];let i=[1/0,1/0,-1/0,-1/0];for(let l=e[0];l<=e[1];++l)es(i,r[l]);return i}function Os(r){let e=[1/0,1/0,-1/0,-1/0];for(let i of r)for(let l of i)es(e,l);return e}function Ia(r){return r[0]!==-1/0&&r[1]!==-1/0&&r[2]!==1/0&&r[3]!==1/0}function rs(r,e,i){if(!Ia(r)||!Ia(e))return NaN;let l=0,h=0;return r[2]<e[0]&&(l=e[0]-r[2]),r[0]>e[2]&&(l=r[0]-e[2]),r[1]>e[3]&&(h=r[1]-e[3]),r[3]<e[1]&&(h=e[1]-r[3]),i.distance([0,0],[l,h])}function pa(r,e,i){let l=i.pointOnLine(e,r);return i.distance(r,l.point)}function Jo(r,e,i,l,h){let g=Math.min(pa(r,[i,l],h),pa(e,[i,l],h)),y=Math.min(pa(i,[r,e],h),pa(l,[r,e],h));return Math.min(g,y)}function Uu(r,e,i,l,h){if(!cn(e,r.length)||!cn(l,i.length))return 1/0;let g=1/0;for(let y=e[0];y<e[1];++y){let x=r[y],S=r[y+1];for(let P=l[0];P<l[1];++P){let A=i[P],O=i[P+1];if(Ko(x,S,A,O))return 0;g=Math.min(g,Jo(x,S,A,O,h))}}return g}function go(r,e,i,l,h){if(!cn(e,r.length)||!cn(l,i.length))return NaN;let g=1/0;for(let y=e[0];y<=e[1];++y)for(let x=l[0];x<=l[1];++x)if(g=Math.min(g,h.distance(r[y],i[x])),g===0)return g;return g}function Zu(r,e,i){if(Is(r,e,!0))return 0;let l=1/0;for(let h of e){let g=h[0],y=h[h.length-1];if(g!==y&&(l=Math.min(l,pa(r,[y,g],i)),l===0))return l;let x=i.pointOnLine(h,r);if(l=Math.min(l,i.distance(r,x.point)),l===0)return l}return l}function Tc(r,e,i,l){if(!cn(e,r.length))return NaN;for(let g=e[0];g<=e[1];++g)if(Is(r[g],i,!0))return 0;let h=1/0;for(let g=e[0];g<e[1];++g){let y=r[g],x=r[g+1];for(let S of i)for(let P=0,A=S.length,O=A-1;P<A;O=P++){let R=S[O],F=S[P];if(Ko(y,x,R,F))return 0;h=Math.min(h,Jo(y,x,R,F,l))}}return h}function Cc(r,e){for(let i of r)for(let l of i)if(Is(l,e,!0))return!0;return!1}function kc(r,e,i,l=1/0){let h=Os(r),g=Os(e);if(l!==1/0&&rs(h,g,i)>=l)return l;if(ua(h,g)){if(Cc(r,e))return 0}else if(Cc(e,r))return 0;let y=1/0;for(let x of r)for(let S=0,P=x.length,A=P-1;S<P;A=S++){let O=x[A],R=x[S];for(let F of e)for(let V=0,W=F.length,Z=W-1;V<W;Z=V++){let K=F[Z],ue=F[V];if(Ko(O,R,K,ue))return 0;y=Math.min(y,Jo(O,R,K,ue,i))}}return y}function ci(r,e,i,l,h,g){if(!g)return;let y=rs(mo(l,g),h,i);y<e&&r.push([y,g,[0,0]])}function un(r,e,i,l,h,g,y){if(!g||!y)return;let x=rs(mo(l,g),mo(h,y),i);x<e&&r.push([x,g,y])}function ns(r,e,i,l,h=1/0){let g=Math.min(l.distance(r[0],i[0][0]),h);if(g===0)return g;let y=new bc([[0,[0,r.length-1],[0,0]]],po),x=Os(i);for(;y.length>0;){let S=y.pop();if(S[0]>=g)continue;let P=S[1],A=e?50:100;if(fo(P)<=A){if(!cn(P,r.length))return NaN;if(e){let O=Tc(r,P,i,l);if(isNaN(O)||O===0)return O;g=Math.min(g,O)}else for(let O=P[0];O<=P[1];++O){let R=Zu(r[O],i,l);if(g=Math.min(g,R),g===0)return 0}}else{let O=is(P,e);ci(y,g,l,r,x,O[0]),ci(y,g,l,r,x,O[1])}}return g}function Qo(r,e,i,l,h,g=1/0){let y=Math.min(g,h.distance(r[0],i[0]));if(y===0)return y;let x=new bc([[0,[0,r.length-1],[0,i.length-1]]],po);for(;x.length>0;){let S=x.pop();if(S[0]>=y)continue;let P=S[1],A=S[2],O=e?50:100,R=l?50:100;if(fo(P)<=O&&fo(A)<=R){if(!cn(P,r.length)&&cn(A,i.length))return NaN;let F;if(e&&l)F=Uu(r,P,i,A,h),y=Math.min(y,F);else if(e&&!l){let V=r.slice(P[0],P[1]+1);for(let W=A[0];W<=A[1];++W)if(F=pa(i[W],V,h),y=Math.min(y,F),y===0)return y}else if(!e&&l){let V=i.slice(A[0],A[1]+1);for(let W=P[0];W<=P[1];++W)if(F=pa(r[W],V,h),y=Math.min(y,F),y===0)return y}else F=go(r,P,i,A,h),y=Math.min(y,F)}else{let F=is(P,e),V=is(A,l);un(x,y,h,r,i,F[0],V[0]),un(x,y,h,r,i,F[0],V[1]),un(x,y,h,r,i,F[1],V[0]),un(x,y,h,r,i,F[1],V[1])}}return y}function Ds(r){return r.type==="MultiPolygon"?r.coordinates.map((e=>({type:"Polygon",coordinates:e}))):r.type==="MultiLineString"?r.coordinates.map((e=>({type:"LineString",coordinates:e}))):r.type==="MultiPoint"?r.coordinates.map((e=>({type:"Point",coordinates:e}))):[r]}class as{constructor(e,i){this.type=it,this.geojson=e,this.geometries=i}static parse(e,i){if(e.length!==2)return i.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(_n(e[1])){let l=e[1];if(l.type==="FeatureCollection")return new as(l,l.features.map((h=>Ds(h.geometry))).flat());if(l.type==="Feature")return new as(l,Ds(l.geometry));if("type"in l&&"coordinates"in l)return new as(l,Ds(l))}return i.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return(function(i,l){let h=i.geometry(),g=h.flat().map((S=>Ms([S.x,S.y],i.canonical)));if(h.length===0)return NaN;let y=new On(g[0][1]),x=1/0;for(let S of l){switch(S.type){case"Point":x=Math.min(x,Qo(g,!1,[S.coordinates],!1,y,x));break;case"LineString":x=Math.min(x,Qo(g,!1,S.coordinates,!0,y,x));break;case"Polygon":x=Math.min(x,ns(g,!1,S.coordinates,y,x))}if(x===0)return x}return x})(e,this.geometries);if(e.geometryType()==="LineString")return(function(i,l){let h=i.geometry(),g=h.flat().map((S=>Ms([S.x,S.y],i.canonical)));if(h.length===0)return NaN;let y=new On(g[0][1]),x=1/0;for(let S of l){switch(S.type){case"Point":x=Math.min(x,Qo(g,!0,[S.coordinates],!1,y,x));break;case"LineString":x=Math.min(x,Qo(g,!0,S.coordinates,!0,y,x));break;case"Polygon":x=Math.min(x,ns(g,!0,S.coordinates,y,x))}if(x===0)return x}return x})(e,this.geometries);if(e.geometryType()==="Polygon")return(function(i,l){let h=i.geometry();if(h.length===0||h[0].length===0)return NaN;let g=Ls(h,0).map((S=>S.map((P=>P.map((A=>Ms([A.x,A.y],i.canonical))))))),y=new On(g[0][0][0][1]),x=1/0;for(let S of l)for(let P of g){switch(S.type){case"Point":x=Math.min(x,ns([S.coordinates],!1,P,y,x));break;case"LineString":x=Math.min(x,ns(S.coordinates,!0,P,y,x));break;case"Polygon":x=Math.min(x,kc(P,S.coordinates,y,x))}if(x===0)return x}return x})(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Rs{constructor(e){this.type=Dt,this.key=e}static parse(e,i){if(e.length!==2)return i.error(`Expected 1 argument, but found ${e.length-1} instead.`);let l=e[1];return l==null?i.error("Global state property must be defined."):typeof l!="string"?i.error(`Global state property must be string, but found ${typeof e[1]} instead.`):new Rs(l)}evaluate(e){var i;let l=(i=e.globals)===null||i===void 0?void 0:i.globalState;return l&&Object.keys(l).length!==0?sa(l,this.key):null}eachChild(){}outputDefined(){return!1}}let Bs={"==":gc,"!=":Ol,">":Vu,"<":Xo,">=":uo,"<=":Qa,array:Yr,at:Wt,boolean:Yr,case:lo,coalesce:oa,collator:la,format:ho,image:$n,in:Ot,"index-of":Ps,interpolate:Wi,"interpolate-hcl":Wi,"interpolate-lab":Wi,length:br,let:Si,literal:Mn,match:Jt,number:Yr,"number-format":ca,object:Yr,slice:ln,step:Aa,string:Yr,"to-boolean":In,"to-color":In,"to-number":In,"to-string":In,var:Pr,within:Hn,distance:as,"global-state":Rs};class Er{constructor(e,i,l,h){this.name=e,this.type=i,this._evaluate=l,this.args=h}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,i){let l=e[0],h=Er.definitions[l];if(!h)return i.error(`Unknown expression "${l}". If you wanted a literal array, use ["literal", [...]].`,0);let g=Array.isArray(h)?h[0]:h.type,y=Array.isArray(h)?[[h[1],h[2]]]:h.overloads,x=y.filter((([P])=>!Array.isArray(P)||P.length===e.length-1)),S=null;for(let[P,A]of x){S=new Zt(i.registry,tl,i.path,null,i.scope);let O=[],R=!1;for(let F=1;F<e.length;F++){let V=e[F],W=Array.isArray(P)?P[F-1]:P.type,Z=S.parse(V,1+O.length,W);if(!Z){R=!0;break}O.push(Z)}if(!R)if(Array.isArray(P)&&P.length!==O.length)S.error(`Expected ${P.length} arguments, but found ${O.length} instead.`);else{for(let F=0;F<O.length;F++){let V=Array.isArray(P)?P[F]:P.type,W=O[F];S.concat(F+1).checkSubtype(V,W.type)}if(S.errors.length===0)return new Er(l,g,A,O)}}if(x.length===1)i.errors.push(...S.errors);else{let P=(x.length?x:y).map((([O])=>{return R=O,Array.isArray(R)?`(${R.map(di).join(", ")})`:`(${di(R.type)}...)`;var R})).join(" | "),A=[];for(let O=1;O<e.length;O++){let R=i.parse(e[O],1+A.length);if(!R)return null;A.push(di(R.type))}i.error(`Expected arguments of type ${P}, but found (${A.join(", ")}) instead.`)}return null}static register(e,i){Er.definitions=i;for(let l in i)e[l]=Er}}function Pc(r,[e,i,l,h]){e=e.evaluate(r),i=i.evaluate(r),l=l.evaluate(r);let g=h?h.evaluate(r):1,y=Pa(e,i,l,g);if(y)throw new gi(y);return new Rt(e/255,i/255,l/255,g,!1)}function ss(r,e){return r in e}function el(r,e){let i=e[r];return i===void 0?null:i}function za(r){return{type:r}}function tl(r){if(r instanceof Pr)return tl(r.boundExpression);if(r instanceof Er&&r.name==="error"||r instanceof la||r instanceof Hn||r instanceof as||r instanceof Rs)return!1;let e=r instanceof In||r instanceof Yr,i=!0;return r.eachChild((l=>{i=e?i&&tl(l):i&&l instanceof Mn})),!!i&&bn(r)&&yo(r,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function bn(r){if(r instanceof Er&&(r.name==="get"&&r.args.length===1||r.name==="feature-state"||r.name==="has"&&r.args.length===1||r.name==="properties"||r.name==="geometry-type"||r.name==="id"||/^filter-/.test(r.name))||r instanceof Hn||r instanceof as)return!1;let e=!0;return r.eachChild((i=>{e&&!bn(i)&&(e=!1)})),e}function Fs(r){if(r instanceof Er&&r.name==="feature-state")return!1;let e=!0;return r.eachChild((i=>{e&&!Fs(i)&&(e=!1)})),e}function yo(r,e){if(r instanceof Er&&e.indexOf(r.name)>=0)return!1;let i=!0;return r.eachChild((l=>{i&&!yo(l,e)&&(i=!1)})),i}function js(r){return{result:"success",value:r}}function Ns(r){return{result:"error",value:r}}function fa(r){return r["property-type"]==="data-driven"||r["property-type"]==="cross-faded-data-driven"}function qs(r){return!!r.expression&&r.expression.parameters.indexOf("zoom")>-1}function il(r){return!!r.expression&&r.expression.interpolated}function Gt(r){return r instanceof Number?"number":r instanceof String?"string":r instanceof Boolean?"boolean":Array.isArray(r)?"array":r===null?"null":typeof r}function rl(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)&&Kt(r)===ra}function Ec(r){return r}function Fl(r,e){let i=r.stops&&typeof r.stops[0][0]=="object",l=i||!(i||r.property!==void 0),h=r.type||(il(e)?"exponential":"interval"),g=(function(A){switch(A.type){case"color":return Rt.parse;case"padding":return bt.parse;case"numberArray":return li.parse;case"colorArray":return ct.parse;default:return null}})(e);if(g&&((r=Cr({},r)).stops&&(r.stops=r.stops.map((A=>[A[0],g(A[1])]))),r.default=g(r.default?r.default:e.default)),r.colorSpace&&(y=r.colorSpace)!=="rgb"&&y!=="hcl"&&y!=="lab")throw new Error(`Unknown color space: "${r.colorSpace}"`);var y;let x=(function(A){switch(A){case"exponential":return Ic;case"interval":return Mc;case"categorical":return Ac;case"identity":return zc;default:throw new Error(`Unknown function type "${A}"`)}})(h),S,P;if(h==="categorical"){S=Object.create(null);for(let A of r.stops)S[A[0]]=A[1];P=typeof r.stops[0][0]}if(i){let A={},O=[];for(let V=0;V<r.stops.length;V++){let W=r.stops[V],Z=W[0].zoom;A[Z]===void 0&&(A[Z]={zoom:Z,type:r.type,property:r.property,default:r.default,stops:[]},O.push(Z)),A[Z].stops.push([W[0].value,W[1]])}let R=[];for(let V of O)R.push([A[V].zoom,Fl(A[V],e)]);let F={name:"linear"};return{kind:"composite",interpolationType:F,interpolationFactor:Wi.interpolationFactor.bind(void 0,F),zoomStops:R.map((V=>V[0])),evaluate:({zoom:V},W)=>Ic({stops:R,base:r.base},e,V).evaluate(V,W)}}if(l){let A=h==="exponential"?{name:"exponential",base:r.base!==void 0?r.base:1}:null;return{kind:"camera",interpolationType:A,interpolationFactor:Wi.interpolationFactor.bind(void 0,A),zoomStops:r.stops.map((O=>O[0])),evaluate:({zoom:O})=>x(r,e,O,S,P)}}return{kind:"source",evaluate(A,O){let R=O&&O.properties?O.properties[r.property]:void 0;return R===void 0?Vs(r.default,e.default):x(r,e,R,S,P)}}}function Vs(r,e,i){return r!==void 0?r:e!==void 0?e:i!==void 0?i:void 0}function Ac(r,e,i,l,h){return Vs(typeof i===h?l[i]:void 0,r.default,e.default)}function Mc(r,e,i){if(Gt(i)!=="number")return Vs(r.default,e.default);let l=r.stops.length;if(l===1||i<=r.stops[0][0])return r.stops[0][1];if(i>=r.stops[l-1][0])return r.stops[l-1][1];let h=Es(r.stops.map((g=>g[0])),i);return r.stops[h][1]}function Ic(r,e,i){let l=r.base!==void 0?r.base:1;if(Gt(i)!=="number")return Vs(r.default,e.default);let h=r.stops.length;if(h===1||i<=r.stops[0][0])return r.stops[0][1];if(i>=r.stops[h-1][0])return r.stops[h-1][1];let g=Es(r.stops.map((A=>A[0])),i),y=(function(A,O,R,F){let V=F-R,W=A-R;return V===0?0:O===1?W/V:(Math.pow(O,W)-1)/(Math.pow(O,V)-1)})(i,l,r.stops[g][0],r.stops[g+1][0]),x=r.stops[g][1],S=r.stops[g+1][1],P=ki[e.type]||Ec;return typeof x.evaluate=="function"?{evaluate(...A){let O=x.evaluate.apply(void 0,A),R=S.evaluate.apply(void 0,A);if(O!==void 0&&R!==void 0)return P(O,R,y,r.colorSpace)}}:P(x,S,y,r.colorSpace)}function zc(r,e,i){switch(e.type){case"color":i=Rt.parse(i);break;case"formatted":i=Hr.fromString(i.toString());break;case"resolvedImage":i=Nr.fromString(i.toString());break;case"padding":i=bt.parse(i);break;case"colorArray":i=ct.parse(i);break;case"numberArray":i=li.parse(i);break;default:Gt(i)===e.type||e.type==="enum"&&e.values[i]||(i=void 0)}return Vs(i,r.default,e.default)}Er.register(Bs,{error:[{kind:"error"},[jt],(r,[e])=>{throw new gi(e.evaluate(r))}],typeof:[jt,[Dt],(r,[e])=>di(Kt(e.evaluate(r)))],"to-rgba":[Br(it,4),[$r],(r,[e])=>{let[i,l,h,g]=e.evaluate(r).rgb;return[255*i,255*l,255*h,g]}],rgb:[$r,[it,it,it],Pc],rgba:[$r,[it,it,it,it],Pc],has:{type:It,overloads:[[[jt],(r,[e])=>ss(e.evaluate(r),r.properties())],[[jt,ra],(r,[e,i])=>ss(e.evaluate(r),i.evaluate(r))]]},get:{type:Dt,overloads:[[[jt],(r,[e])=>el(e.evaluate(r),r.properties())],[[jt,ra],(r,[e,i])=>el(e.evaluate(r),i.evaluate(r))]]},"feature-state":[Dt,[jt],(r,[e])=>el(e.evaluate(r),r.featureState||{})],properties:[ra,[],r=>r.properties()],"geometry-type":[jt,[],r=>r.geometryType()],id:[Dt,[],r=>r.id()],zoom:[it,[],r=>r.globals.zoom],"heatmap-density":[it,[],r=>r.globals.heatmapDensity||0],elevation:[it,[],r=>r.globals.elevation||0],"line-progress":[it,[],r=>r.globals.lineProgress||0],accumulated:[Dt,[],r=>r.globals.accumulated===void 0?null:r.globals.accumulated],"+":[it,za(it),(r,e)=>{let i=0;for(let l of e)i+=l.evaluate(r);return i}],"*":[it,za(it),(r,e)=>{let i=1;for(let l of e)i*=l.evaluate(r);return i}],"-":{type:it,overloads:[[[it,it],(r,[e,i])=>e.evaluate(r)-i.evaluate(r)],[[it],(r,[e])=>-e.evaluate(r)]]},"/":[it,[it,it],(r,[e,i])=>e.evaluate(r)/i.evaluate(r)],"%":[it,[it,it],(r,[e,i])=>e.evaluate(r)%i.evaluate(r)],ln2:[it,[],()=>Math.LN2],pi:[it,[],()=>Math.PI],e:[it,[],()=>Math.E],"^":[it,[it,it],(r,[e,i])=>Math.pow(e.evaluate(r),i.evaluate(r))],sqrt:[it,[it],(r,[e])=>Math.sqrt(e.evaluate(r))],log10:[it,[it],(r,[e])=>Math.log(e.evaluate(r))/Math.LN10],ln:[it,[it],(r,[e])=>Math.log(e.evaluate(r))],log2:[it,[it],(r,[e])=>Math.log(e.evaluate(r))/Math.LN2],sin:[it,[it],(r,[e])=>Math.sin(e.evaluate(r))],cos:[it,[it],(r,[e])=>Math.cos(e.evaluate(r))],tan:[it,[it],(r,[e])=>Math.tan(e.evaluate(r))],asin:[it,[it],(r,[e])=>Math.asin(e.evaluate(r))],acos:[it,[it],(r,[e])=>Math.acos(e.evaluate(r))],atan:[it,[it],(r,[e])=>Math.atan(e.evaluate(r))],min:[it,za(it),(r,e)=>Math.min(...e.map((i=>i.evaluate(r))))],max:[it,za(it),(r,e)=>Math.max(...e.map((i=>i.evaluate(r))))],abs:[it,[it],(r,[e])=>Math.abs(e.evaluate(r))],round:[it,[it],(r,[e])=>{let i=e.evaluate(r);return i<0?-Math.round(-i):Math.round(i)}],floor:[it,[it],(r,[e])=>Math.floor(e.evaluate(r))],ceil:[it,[it],(r,[e])=>Math.ceil(e.evaluate(r))],"filter-==":[It,[jt,Dt],(r,[e,i])=>r.properties()[e.value]===i.value],"filter-id-==":[It,[Dt],(r,[e])=>r.id()===e.value],"filter-type-==":[It,[jt],(r,[e])=>r.geometryType()===e.value],"filter-<":[It,[jt,Dt],(r,[e,i])=>{let l=r.properties()[e.value],h=i.value;return typeof l==typeof h&&l<h}],"filter-id-<":[It,[Dt],(r,[e])=>{let i=r.id(),l=e.value;return typeof i==typeof l&&i<l}],"filter->":[It,[jt,Dt],(r,[e,i])=>{let l=r.properties()[e.value],h=i.value;return typeof l==typeof h&&l>h}],"filter-id->":[It,[Dt],(r,[e])=>{let i=r.id(),l=e.value;return typeof i==typeof l&&i>l}],"filter-<=":[It,[jt,Dt],(r,[e,i])=>{let l=r.properties()[e.value],h=i.value;return typeof l==typeof h&&l<=h}],"filter-id-<=":[It,[Dt],(r,[e])=>{let i=r.id(),l=e.value;return typeof i==typeof l&&i<=l}],"filter->=":[It,[jt,Dt],(r,[e,i])=>{let l=r.properties()[e.value],h=i.value;return typeof l==typeof h&&l>=h}],"filter-id->=":[It,[Dt],(r,[e])=>{let i=r.id(),l=e.value;return typeof i==typeof l&&i>=l}],"filter-has":[It,[Dt],(r,[e])=>e.value in r.properties()],"filter-has-id":[It,[],r=>r.id()!==null&&r.id()!==void 0],"filter-type-in":[It,[Br(jt)],(r,[e])=>e.value.indexOf(r.geometryType())>=0],"filter-id-in":[It,[Br(Dt)],(r,[e])=>e.value.indexOf(r.id())>=0],"filter-in-small":[It,[jt,Br(Dt)],(r,[e,i])=>i.value.indexOf(r.properties()[e.value])>=0],"filter-in-large":[It,[jt,Br(Dt)],(r,[e,i])=>(function(l,h,g,y){for(;g<=y;){let x=g+y>>1;if(h[x]===l)return!0;h[x]>l?y=x-1:g=x+1}return!1})(r.properties()[e.value],i.value,0,i.value.length-1)],all:{type:It,overloads:[[[It,It],(r,[e,i])=>e.evaluate(r)&&i.evaluate(r)],[za(It),(r,e)=>{for(let i of e)if(!i.evaluate(r))return!1;return!0}]]},any:{type:It,overloads:[[[It,It],(r,[e,i])=>e.evaluate(r)||i.evaluate(r)],[za(It),(r,e)=>{for(let i of e)if(i.evaluate(r))return!0;return!1}]]},"!":[It,[It],(r,[e])=>!e.evaluate(r)],"is-supported-script":[It,[jt],(r,[e])=>{let i=r.globals&&r.globals.isSupportedScript;return!i||i(e.evaluate(r))}],upcase:[jt,[jt],(r,[e])=>e.evaluate(r).toUpperCase()],downcase:[jt,[jt],(r,[e])=>e.evaluate(r).toLowerCase()],concat:[jt,za(Dt),(r,e)=>e.map((i=>on(i.evaluate(r)))).join("")],"resolved-locale":[jt,[to],(r,[e])=>e.evaluate(r).resolvedLocale()]});class nl{constructor(e,i,l){this.expression=e,this._warningHistory={},this._evaluator=new Ho,this._defaultValue=i?(function(h){if(h.type==="color"&&rl(h.default))return new Rt(0,0,0,0);switch(h.type){case"color":return Rt.parse(h.default)||null;case"padding":return bt.parse(h.default)||null;case"numberArray":return li.parse(h.default)||null;case"colorArray":return ct.parse(h.default)||null;case"variableAnchorOffsetCollection":return vr.parse(h.default)||null;case"projectionDefinition":return Xi.parse(h.default)||null;default:return h.default===void 0?null:h.default}})(i):null,this._enumValues=i&&i.type==="enum"?i.values:null,this._globalState=l}evaluateWithoutErrorHandling(e,i,l,h,g,y){return this._globalState&&(e=Ae(e,this._globalState)),this._evaluator.globals=e,this._evaluator.feature=i,this._evaluator.featureState=l,this._evaluator.canonical=h,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=y,this.expression.evaluate(this._evaluator)}evaluate(e,i,l,h,g,y){this._globalState&&(e=Ae(e,this._globalState)),this._evaluator.globals=e,this._evaluator.feature=i||null,this._evaluator.featureState=l||null,this._evaluator.canonical=h,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=y||null;try{let x=this.expression.evaluate(this._evaluator);if(x==null||typeof x=="number"&&x!=x)return this._defaultValue;if(this._enumValues&&!(x in this._enumValues))throw new gi(`Expected value to be one of ${Object.keys(this._enumValues).map((S=>JSON.stringify(S))).join(", ")}, but found ${JSON.stringify(x)} instead.`);return x}catch(x){return this._warningHistory[x.message]||(this._warningHistory[x.message]=!0,typeof console<"u"&&console.warn(x.message)),this._defaultValue}}}function Ws(r){return Array.isArray(r)&&r.length>0&&typeof r[0]=="string"&&r[0]in Bs}function c(r,e,i){let l=new Zt(Bs,tl,[],e?(function(g){let y={color:$r,string:jt,number:it,enum:jt,boolean:It,formatted:xs,padding:Go,numberArray:io,colorArray:na,projectionDefinition:Wo,resolvedImage:ws,variableAnchorOffsetCollection:ro};return g.type==="array"?Br(y[g.value]||Dt,g.length):y[g.type]})(e):void 0),h=l.parse(r,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?js(new nl(h,e,i)):Ns(l.errors)}class v{constructor(e,i,l){this.kind=e,this._styleExpression=i,this.isStateDependent=e!=="constant"&&!Fs(i.expression),this.globalStateRefs=_e(i.expression),this._globalState=l}evaluateWithoutErrorHandling(e,i,l,h,g,y){return this._globalState&&(e=Ae(e,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(e,i,l,h,g,y)}evaluate(e,i,l,h,g,y){return this._globalState&&(e=Ae(e,this._globalState)),this._styleExpression.evaluate(e,i,l,h,g,y)}}class C{constructor(e,i,l,h,g){this.kind=e,this.zoomStops=l,this._styleExpression=i,this.isStateDependent=e!=="camera"&&!Fs(i.expression),this.globalStateRefs=_e(i.expression),this.interpolationType=h,this._globalState=g}evaluateWithoutErrorHandling(e,i,l,h,g,y){return this._globalState&&(e=Ae(e,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(e,i,l,h,g,y)}evaluate(e,i,l,h,g,y){return this._globalState&&(e=Ae(e,this._globalState)),this._styleExpression.evaluate(e,i,l,h,g,y)}interpolationFactor(e,i,l){return this.interpolationType?Wi.interpolationFactor(this.interpolationType,e,i,l):0}}function I(r,e,i){let l=c(r,e,i);if(l.result==="error")return l;let h=l.value.expression,g=bn(h);if(!g&&!fa(e))return Ns([new kr("","data expressions not supported")]);let y=yo(h,["zoom"]);if(!y&&!qs(e))return Ns([new kr("","zoom expressions not supported")]);let x=Q(h);return x||y?x instanceof kr?Ns([x]):x instanceof Wi&&!il(e)?Ns([new kr("",'"interpolate" expressions cannot be used with this property')]):js(x?new C(g?"camera":"composite",l.value,x.labels,x instanceof Wi?x.interpolation:void 0,i):new v(g?"constant":"source",l.value,i)):Ns([new kr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class q{constructor(e,i){this._parameters=e,this._specification=i,Cr(this,Fl(this._parameters,this._specification))}static deserialize(e){return new q(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function Q(r){let e=null;if(r instanceof Si)e=Q(r.result);else if(r instanceof oa){for(let i of r.args)if(e=Q(i),e)break}else(r instanceof Aa||r instanceof Wi)&&r.input instanceof Er&&r.input.name==="zoom"&&(e=r);return e instanceof kr||r.eachChild((i=>{let l=Q(i);l instanceof kr?e=l:!e&&l?e=new kr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&l&&e!==l&&(e=new kr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),e}function _e(r,e=new Set){return r instanceof Rs&&e.add(r.key),r.eachChild((i=>{_e(i,e)})),e}function Ae(r,e){let{zoom:i,heatmapDensity:l,elevation:h,lineProgress:g,isSupportedScript:y,accumulated:x}=r??{};return{zoom:i,heatmapDensity:l,elevation:h,lineProgress:g,isSupportedScript:y,accumulated:x,globalState:e}}function qe(r){if(r===!0||r===!1)return!0;if(!Array.isArray(r)||r.length===0)return!1;switch(r[0]){case"has":return r.length>=2&&r[1]!=="$id"&&r[1]!=="$type";case"in":return r.length>=3&&(typeof r[1]!="string"||Array.isArray(r[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return r.length!==3||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(let e of r.slice(1))if(!qe(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}let Qe={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ht(r,e){if(r==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};qe(r)||(r=or(r));let i=c(r,Qe,e);if(i.result==="error")throw new Error(i.value.map((l=>`${l.key}: ${l.message}`)).join(", "));return{filter:(l,h,g)=>i.value.evaluate(l,h,{},g),needGeometry:Yt(r),getGlobalStateRefs:()=>_e(i.value.expression)}}function Mt(r,e){return r<e?-1:r>e?1:0}function Yt(r){if(!Array.isArray(r))return!1;if(r[0]==="within"||r[0]==="distance")return!0;for(let e=1;e<r.length;e++)if(Yt(r[e]))return!0;return!1}function or(r){if(!r)return!0;let e=r[0];return r.length<=1?e!=="any":e==="=="?Ji(r[1],r[2],"=="):e==="!="?Kn(Ji(r[1],r[2],"==")):e==="<"||e===">"||e==="<="||e===">="?Ji(r[1],r[2],e):e==="any"?(i=r.slice(1),["any"].concat(i.map(or))):e==="all"?["all"].concat(r.slice(1).map(or)):e==="none"?["all"].concat(r.slice(1).map(or).map(Kn)):e==="in"?hn(r[1],r.slice(2)):e==="!in"?Kn(hn(r[1],r.slice(2))):e==="has"?qr(r[1]):e!=="!has"||Kn(qr(r[1]));var i}function Ji(r,e,i){switch(r){case"$type":return[`filter-type-${i}`,e];case"$id":return[`filter-id-${i}`,e];default:return[`filter-${i}`,r,e]}}function hn(r,e){if(e.length===0)return!1;switch(r){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((i=>typeof i!=typeof e[0]))?["filter-in-large",r,["literal",e.sort(Mt)]]:["filter-in-small",r,["literal",e]]}}function qr(r){switch(r){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",r]}}function Kn(r){return["!",r]}function al(r){let e=typeof r;if(e==="number"||e==="boolean"||e==="string"||r==null)return JSON.stringify(r);if(Array.isArray(r)){let h="[";for(let g of r)h+=`${al(g)},`;return`${h}]`}let i=Object.keys(r).sort(),l="{";for(let h=0;h<i.length;h++)l+=`${JSON.stringify(i[h])}:${al(r[i[h]])},`;return`${l}}`}function Lc(r){let e="";for(let i of vi)e+=`/${al(r[i])}`;return e}function Oc(r){let e=r.value;return e?[new Re(r.key,e,"constants have been deprecated as of v8")]:[]}function Oi(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}function os(r){if(Array.isArray(r))return r.map(os);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){let e={};for(let i in r)e[i]=os(r[i]);return e}return Oi(r)}function dn(r){let e=r.key,i=r.value,l=r.valueSpec||{},h=r.objectElementValidators||{},g=r.style,y=r.styleSpec,x=r.validateSpec,S=[],P=Gt(i);if(P!=="object")return[new Re(e,i,`object expected, ${P} found`)];for(let A in i){let O=A.split(".")[0],R=sa(l,O)||l["*"],F;if(sa(h,O))F=h[O];else if(sa(l,O))F=x;else if(h["*"])F=h["*"];else{if(!l["*"]){S.push(new Re(e,i[A],`unknown property "${A}"`));continue}F=x}S=S.concat(F({key:(e&&`${e}.`)+A,value:i[A],valueSpec:R,style:g,styleSpec:y,object:i,objectKey:A,validateSpec:x},i))}for(let A in l)h[A]||l[A].required&&l[A].default===void 0&&i[A]===void 0&&S.push(new Re(e,i,`missing required property "${A}"`));return S}function Di(r){let e=r.value,i=r.valueSpec,l=r.style,h=r.styleSpec,g=r.key,y=r.arrayElementValidator||r.validateSpec;if(Gt(e)!=="array")return[new Re(g,e,`array expected, ${Gt(e)} found`)];if(i.length&&e.length!==i.length)return[new Re(g,e,`array length ${i.length} expected, length ${e.length} found`)];if(i["min-length"]&&e.length<i["min-length"])return[new Re(g,e,`array length at least ${i["min-length"]} expected, length ${e.length} found`)];let x={type:i.value,values:i.values};h.$version<7&&(x.function=i.function),Gt(i.value)==="object"&&(x=i.value);let S=[];for(let P=0;P<e.length;P++)S=S.concat(y({array:e,arrayIndex:P,value:e[P],valueSpec:x,validateSpec:r.validateSpec,style:l,styleSpec:h,key:`${g}[${P}]`}));return S}function La(r){let e=r.key,i=r.value,l=r.valueSpec,h=Gt(i);return h==="number"&&i!=i&&(h="NaN"),h!=="number"?[new Re(e,i,`number expected, ${h} found`)]:"minimum"in l&&i<l.minimum?[new Re(e,i,`${i} is less than the minimum value ${l.minimum}`)]:"maximum"in l&&i>l.maximum?[new Re(e,i,`${i} is greater than the maximum value ${l.maximum}`)]:[]}function sl(r){let e=r.valueSpec,i=Oi(r.value.type),l,h,g,y={},x=i!=="categorical"&&r.value.property===void 0,S=!x,P=Gt(r.value.stops)==="array"&&Gt(r.value.stops[0])==="array"&&Gt(r.value.stops[0][0])==="object",A=dn({key:r.key,value:r.value,valueSpec:r.styleSpec.function,validateSpec:r.validateSpec,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{stops:function(F){if(i==="identity")return[new Re(F.key,F.value,'identity function may not have a "stops" property')];let V=[],W=F.value;return V=V.concat(Di({key:F.key,value:W,valueSpec:F.valueSpec,validateSpec:F.validateSpec,style:F.style,styleSpec:F.styleSpec,arrayElementValidator:O})),Gt(W)==="array"&&W.length===0&&V.push(new Re(F.key,W,"array must have at least one stop")),V},default:function(F){return F.validateSpec({key:F.key,value:F.value,valueSpec:e,validateSpec:F.validateSpec,style:F.style,styleSpec:F.styleSpec})}}});return i==="identity"&&x&&A.push(new Re(r.key,r.value,'missing required property "property"')),i==="identity"||r.value.stops||A.push(new Re(r.key,r.value,'missing required property "stops"')),i==="exponential"&&r.valueSpec.expression&&!il(r.valueSpec)&&A.push(new Re(r.key,r.value,"exponential functions not supported")),r.styleSpec.$version>=8&&(S&&!fa(r.valueSpec)?A.push(new Re(r.key,r.value,"property functions not supported")):x&&!qs(r.valueSpec)&&A.push(new Re(r.key,r.value,"zoom functions not supported"))),i!=="categorical"&&!P||r.value.property!==void 0||A.push(new Re(r.key,r.value,'"property" property is required')),A;function O(F){let V=[],W=F.value,Z=F.key;if(Gt(W)!=="array")return[new Re(Z,W,`array expected, ${Gt(W)} found`)];if(W.length!==2)return[new Re(Z,W,`array length 2 expected, length ${W.length} found`)];if(P){if(Gt(W[0])!=="object")return[new Re(Z,W,`object expected, ${Gt(W[0])} found`)];if(W[0].zoom===void 0)return[new Re(Z,W,"object stop key must have zoom")];if(W[0].value===void 0)return[new Re(Z,W,"object stop key must have value")];if(g&&g>Oi(W[0].zoom))return[new Re(Z,W[0].zoom,"stop zoom values must appear in ascending order")];Oi(W[0].zoom)!==g&&(g=Oi(W[0].zoom),h=void 0,y={}),V=V.concat(dn({key:`${Z}[0]`,value:W[0],valueSpec:{zoom:{}},validateSpec:F.validateSpec,style:F.style,styleSpec:F.styleSpec,objectElementValidators:{zoom:La,value:R}}))}else V=V.concat(R({key:`${Z}[0]`,value:W[0],validateSpec:F.validateSpec,style:F.style,styleSpec:F.styleSpec},W));return Ws(os(W[1]))?V.concat([new Re(`${Z}[1]`,W[1],"expressions are not allowed in function stops.")]):V.concat(F.validateSpec({key:`${Z}[1]`,value:W[1],valueSpec:e,validateSpec:F.validateSpec,style:F.style,styleSpec:F.styleSpec}))}function R(F,V){let W=Gt(F.value),Z=Oi(F.value),K=F.value!==null?F.value:V;if(l){if(W!==l)return[new Re(F.key,K,`${W} stop domain type must match previous stop domain type ${l}`)]}else l=W;if(W!=="number"&&W!=="string"&&W!=="boolean")return[new Re(F.key,K,"stop domain value must be a number, string, or boolean")];if(W!=="number"&&i!=="categorical"){let ue=`number expected, ${W} found`;return fa(e)&&i===void 0&&(ue+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Re(F.key,K,ue)]}return i!=="categorical"||W!=="number"||isFinite(Z)&&Math.floor(Z)===Z?i!=="categorical"&&W==="number"&&h!==void 0&&Z<h?[new Re(F.key,K,"stop domain values must appear in ascending order")]:(h=Z,i==="categorical"&&Z in y?[new Re(F.key,K,"stop domain values must be unique")]:(y[Z]=!0,[])):[new Re(F.key,K,`integer expected, found ${Z}`)]}}function Oa(r){let e=(r.expressionContext==="property"?I:c)(os(r.value),r.valueSpec);if(e.result==="error")return e.value.map((l=>new Re(`${r.key}${l.key}`,r.value,l.message)));let i=e.value.expression||e.value._styleExpression.expression;if(r.expressionContext==="property"&&r.propertyKey==="text-font"&&!i.outputDefined())return[new Re(r.key,r.value,`Invalid data expression for "${r.propertyKey}". Output values must be contained as literals within the expression.`)];if(r.expressionContext==="property"&&r.propertyType==="layout"&&!Fs(i))return[new Re(r.key,r.value,'"feature-state" data expressions are not supported with layout properties.')];if(r.expressionContext==="filter"&&!Fs(i))return[new Re(r.key,r.value,'"feature-state" data expressions are not supported with filters.')];if(r.expressionContext&&r.expressionContext.indexOf("cluster")===0){if(!yo(i,["zoom","feature-state"]))return[new Re(r.key,r.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(r.expressionContext==="cluster-initial"&&!bn(i))return[new Re(r.key,r.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function _o(r){let e=r.key,i=r.value,l=Gt(i);return l!=="string"?[new Re(e,i,`color expected, ${l} found`)]:Rt.parse(String(i))?[]:[new Re(e,i,`color expected, "${i}" found`)]}function ma(r){let e=r.key,i=r.value,l=r.valueSpec,h=[];return Array.isArray(l.values)?l.values.indexOf(Oi(i))===-1&&h.push(new Re(e,i,`expected one of [${l.values.join(", ")}], ${JSON.stringify(i)} found`)):Object.keys(l.values).indexOf(Oi(i))===-1&&h.push(new Re(e,i,`expected one of [${Object.keys(l.values).join(", ")}], ${JSON.stringify(i)} found`)),h}function ls(r){return qe(os(r.value))?Oa(Cr({},r,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Dc(r)}function Dc(r){let e=r.value,i=r.key;if(Gt(e)!=="array")return[new Re(i,e,`array expected, ${Gt(e)} found`)];let l=r.styleSpec,h,g=[];if(e.length<1)return[new Re(i,e,"filter array must have at least 1 element")];switch(g=g.concat(ma({key:`${i}[0]`,value:e[0],valueSpec:l.filter_operator,style:r.style,styleSpec:r.styleSpec})),Oi(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&Oi(e[1])==="$type"&&g.push(new Re(i,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&g.push(new Re(i,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(h=Gt(e[1]),h!=="string"&&g.push(new Re(`${i}[1]`,e[1],`string expected, ${h} found`)));for(let y=2;y<e.length;y++)h=Gt(e[y]),Oi(e[1])==="$type"?g=g.concat(ma({key:`${i}[${y}]`,value:e[y],valueSpec:l.geometry_type,style:r.style,styleSpec:r.styleSpec})):h!=="string"&&h!=="number"&&h!=="boolean"&&g.push(new Re(`${i}[${y}]`,e[y],`string, number, or boolean expected, ${h} found`));break;case"any":case"all":case"none":for(let y=1;y<e.length;y++)g=g.concat(Dc({key:`${i}[${y}]`,value:e[y],style:r.style,styleSpec:r.styleSpec}));break;case"has":case"!has":h=Gt(e[1]),e.length!==2?g.push(new Re(i,e,`filter array for "${e[0]}" operator must have 2 elements`)):h!=="string"&&g.push(new Re(`${i}[1]`,e[1],`string expected, ${h} found`))}return g}function vd(r,e){let i=r.key,l=r.validateSpec,h=r.style,g=r.styleSpec,y=r.value,x=r.objectKey,S=g[`${e}_${r.layerType}`];if(!S)return[];let P=x.match(/^(.*)-transition$/);if(e==="paint"&&P&&S[P[1]]&&S[P[1]].transition)return l({key:i,value:y,valueSpec:g.transition,style:h,styleSpec:g});let A=r.valueSpec||S[x];if(!A)return[new Re(i,y,`unknown property "${x}"`)];let O;if(Gt(y)==="string"&&fa(A)&&!A.tokens&&(O=/^{([^}]+)}$/.exec(y)))return[new Re(i,y,`"${x}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(O[1])} }\`.`)];let R=[];return r.layerType==="symbol"&&x==="text-font"&&rl(os(y))&&Oi(y.type)==="identity"&&R.push(new Re(i,y,'"text-font" does not support identity functions')),R.concat(l({key:r.key,value:y,valueSpec:A,style:h,styleSpec:g,expressionContext:"property",propertyType:e,propertyKey:x}))}function bd(r){return vd(r,"paint")}function xd(r){return vd(r,"layout")}function wd(r){let e=[],i=r.value,l=r.key,h=r.style,g=r.styleSpec;if(Gt(i)!=="object")return[new Re(l,i,`object expected, ${Gt(i)} found`)];i.type||i.ref||e.push(new Re(l,i,'either "type" or "ref" is required'));let y=Oi(i.type),x=Oi(i.ref);if(i.id){let S=Oi(i.id);for(let P=0;P<r.arrayIndex;P++){let A=h.layers[P];Oi(A.id)===S&&e.push(new Re(l,i.id,`duplicate layer id "${i.id}", previously used at line ${A.id.__line__}`))}}if("ref"in i){let S;["type","source","source-layer","filter","layout"].forEach((P=>{P in i&&e.push(new Re(l,i[P],`"${P}" is prohibited for ref layers`))})),h.layers.forEach((P=>{Oi(P.id)===x&&(S=P)})),S?S.ref?e.push(new Re(l,i.ref,"ref cannot reference another ref layer")):y=Oi(S.type):e.push(new Re(l,i.ref,`ref layer "${x}" not found`))}else if(y!=="background")if(i.source){let S=h.sources&&h.sources[i.source],P=S&&Oi(S.type);S?P==="vector"&&y==="raster"?e.push(new Re(l,i.source,`layer "${i.id}" requires a raster source`)):P!=="raster-dem"&&y==="hillshade"||P!=="raster-dem"&&y==="color-relief"?e.push(new Re(l,i.source,`layer "${i.id}" requires a raster-dem source`)):P==="raster"&&y!=="raster"?e.push(new Re(l,i.source,`layer "${i.id}" requires a vector source`)):P!=="vector"||i["source-layer"]?P==="raster-dem"&&y!=="hillshade"&&y!=="color-relief"?e.push(new Re(l,i.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):y!=="line"||!i.paint||!i.paint["line-gradient"]||P==="geojson"&&S.lineMetrics||e.push(new Re(l,i,`layer "${i.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new Re(l,i,`layer "${i.id}" must specify a "source-layer"`)):e.push(new Re(l,i.source,`source "${i.source}" not found`))}else e.push(new Re(l,i,'missing required property "source"'));return e=e.concat(dn({key:l,value:i,valueSpec:g.layer,style:r.style,styleSpec:r.styleSpec,validateSpec:r.validateSpec,objectElementValidators:{"*":()=>[],type:()=>r.validateSpec({key:`${l}.type`,value:i.type,valueSpec:g.layer.type,style:r.style,styleSpec:r.styleSpec,validateSpec:r.validateSpec,object:i,objectKey:"type"}),filter:ls,layout:S=>dn({layer:i,key:S.key,value:S.value,style:S.style,styleSpec:S.styleSpec,validateSpec:S.validateSpec,objectElementValidators:{"*":P=>xd(Cr({layerType:y},P))}}),paint:S=>dn({layer:i,key:S.key,value:S.value,style:S.style,styleSpec:S.styleSpec,validateSpec:S.validateSpec,objectElementValidators:{"*":P=>bd(Cr({layerType:y},P))}})}})),e}function vo(r){let e=r.value,i=r.key,l=Gt(e);return l!=="string"?[new Re(i,e,`string expected, ${l} found`)]:[]}let $u={promoteId:function({key:r,value:e}){if(Gt(e)==="string")return vo({key:r,value:e});{let i=[];for(let l in e)i.push(...vo({key:`${r}.${l}`,value:e[l]}));return i}}};function Hu(r){let e=r.value,i=r.key,l=r.styleSpec,h=r.style,g=r.validateSpec;if(!e.type)return[new Re(i,e,'"type" is required')];let y=Oi(e.type),x;switch(y){case"vector":case"raster":return x=dn({key:i,value:e,valueSpec:l[`source_${y.replace("-","_")}`],style:r.style,styleSpec:l,objectElementValidators:$u,validateSpec:g}),x;case"raster-dem":return x=(function(S){var P;let A=(P=S.sourceName)!==null&&P!==void 0?P:"",O=S.value,R=S.styleSpec,F=R.source_raster_dem,V=S.style,W=[],Z=Gt(O);if(O===void 0)return W;if(Z!=="object")return W.push(new Re("source_raster_dem",O,`object expected, ${Z} found`)),W;let K=Oi(O.encoding)==="custom",ue=["redFactor","greenFactor","blueFactor","baseShift"],ee=S.value.encoding?`"${S.value.encoding}"`:"Default";for(let ne in O)!K&&ue.includes(ne)?W.push(new Re(ne,O[ne],`In "${A}": "${ne}" is only valid when "encoding" is set to "custom". ${ee} encoding found`)):F[ne]?W=W.concat(S.validateSpec({key:ne,value:O[ne],valueSpec:F[ne],validateSpec:S.validateSpec,style:V,styleSpec:R})):W.push(new Re(ne,O[ne],`unknown property "${ne}"`));return W})({sourceName:i,value:e,style:r.style,styleSpec:l,validateSpec:g}),x;case"geojson":if(x=dn({key:i,value:e,valueSpec:l.source_geojson,style:h,styleSpec:l,validateSpec:g,objectElementValidators:$u}),e.cluster)for(let S in e.clusterProperties){let[P,A]=e.clusterProperties[S],O=typeof P=="string"?[P,["accumulated"],["get",S]]:P;x.push(...Oa({key:`${i}.${S}.map`,value:A,expressionContext:"cluster-map"})),x.push(...Oa({key:`${i}.${S}.reduce`,value:O,expressionContext:"cluster-reduce"}))}return x;case"video":return dn({key:i,value:e,valueSpec:l.source_video,style:h,validateSpec:g,styleSpec:l});case"image":return dn({key:i,value:e,valueSpec:l.source_image,style:h,validateSpec:g,styleSpec:l});case"canvas":return[new Re(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ma({key:`${i}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function jl(r){let e=r.value,i=r.styleSpec,l=i.light,h=r.style,g=[],y=Gt(e);if(e===void 0)return g;if(y!=="object")return g=g.concat([new Re("light",e,`object expected, ${y} found`)]),g;for(let x in e){let S=x.match(/^(.*)-transition$/);g=g.concat(S&&l[S[1]]&&l[S[1]].transition?r.validateSpec({key:x,value:e[x],valueSpec:i.transition,validateSpec:r.validateSpec,style:h,styleSpec:i}):l[x]?r.validateSpec({key:x,value:e[x],valueSpec:l[x],validateSpec:r.validateSpec,style:h,styleSpec:i}):[new Re(x,e[x],`unknown property "${x}"`)])}return g}function Sd(r){let e=r.value,i=r.styleSpec,l=i.sky,h=r.style,g=Gt(e);if(e===void 0)return[];if(g!=="object")return[new Re("sky",e,`object expected, ${g} found`)];let y=[];for(let x in e)y=y.concat(l[x]?r.validateSpec({key:x,value:e[x],valueSpec:l[x],style:h,styleSpec:i}):[new Re(x,e[x],`unknown property "${x}"`)]);return y}function Yu(r){let e=r.value,i=r.styleSpec,l=i.terrain,h=r.style,g=[],y=Gt(e);if(e===void 0)return g;if(y!=="object")return g=g.concat([new Re("terrain",e,`object expected, ${y} found`)]),g;for(let x in e)g=g.concat(l[x]?r.validateSpec({key:x,value:e[x],valueSpec:l[x],validateSpec:r.validateSpec,style:h,styleSpec:i}):[new Re(x,e[x],`unknown property "${x}"`)]);return g}function Xu(r){let e=[],i=r.value,l=r.key;if(Array.isArray(i)){let h=[],g=[];for(let y in i)i[y].id&&h.includes(i[y].id)&&e.push(new Re(l,i,`all the sprites' ids must be unique, but ${i[y].id} is duplicated`)),h.push(i[y].id),i[y].url&&g.includes(i[y].url)&&e.push(new Re(l,i,`all the sprites' URLs must be unique, but ${i[y].url} is duplicated`)),g.push(i[y].url),e=e.concat(dn({key:`${l}[${y}]`,value:i[y],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:r.validateSpec}));return e}return vo({key:l,value:i})}function Td(r){return e=r.value,e&&e.constructor===Object?[]:[new Re(r.key,r.value,`object expected, ${Gt(r.value)} found`)];var e}let Ku={"*":()=>[],array:Di,boolean:function(r){let e=r.value,i=r.key,l=Gt(e);return l!=="boolean"?[new Re(i,e,`boolean expected, ${l} found`)]:[]},number:La,color:_o,constants:Oc,enum:ma,filter:ls,function:sl,layer:wd,object:dn,source:Hu,light:jl,sky:Sd,terrain:Yu,projection:function(r){let e=r.value,i=r.styleSpec,l=i.projection,h=r.style,g=Gt(e);if(e===void 0)return[];if(g!=="object")return[new Re("projection",e,`object expected, ${g} found`)];let y=[];for(let x in e)y=y.concat(l[x]?r.validateSpec({key:x,value:e[x],valueSpec:l[x],style:h,styleSpec:i}):[new Re(x,e[x],`unknown property "${x}"`)]);return y},projectionDefinition:function(r){let e=r.key,i=r.value;i=i instanceof String?i.valueOf():i;let l=Gt(i);return l!=="array"||(function(h){return Array.isArray(h)&&h.length===3&&typeof h[0]=="string"&&typeof h[1]=="string"&&typeof h[2]=="number"})(i)||(function(h){return!!["interpolate","step","literal"].includes(h[0])})(i)?["array","string"].includes(l)?[]:[new Re(e,i,`projection expected, invalid type "${l}" found`)]:[new Re(e,i,`projection expected, invalid array ${JSON.stringify(i)} found`)]},string:vo,formatted:function(r){return vo(r).length===0?[]:Oa(r)},resolvedImage:function(r){return vo(r).length===0?[]:Oa(r)},padding:function(r){let e=r.key,i=r.value;if(Gt(i)==="array"){if(i.length<1||i.length>4)return[new Re(e,i,`padding requires 1 to 4 values; ${i.length} values found`)];let l={type:"number"},h=[];for(let g=0;g<i.length;g++)h=h.concat(r.validateSpec({key:`${e}[${g}]`,value:i[g],validateSpec:r.validateSpec,valueSpec:l}));return h}return La({key:e,value:i,valueSpec:{}})},numberArray:function(r){let e=r.key,i=r.value;if(Gt(i)==="array"){let l={type:"number"};if(i.length<1)return[new Re(e,i,"array length at least 1 expected, length 0 found")];let h=[];for(let g=0;g<i.length;g++)h=h.concat(r.validateSpec({key:`${e}[${g}]`,value:i[g],validateSpec:r.validateSpec,valueSpec:l}));return h}return La({key:e,value:i,valueSpec:{}})},colorArray:function(r){let e=r.key,i=r.value;if(Gt(i)==="array"){if(i.length<1)return[new Re(e,i,"array length at least 1 expected, length 0 found")];let l=[];for(let h=0;h<i.length;h++)l=l.concat(_o({key:`${e}[${h}]`,value:i[h]}));return l}return _o({key:e,value:i})},variableAnchorOffsetCollection:function(r){let e=r.key,i=r.value,l=Gt(i),h=r.styleSpec;if(l!=="array"||i.length<1||i.length%2!=0)return[new Re(e,i,"variableAnchorOffsetCollection requires a non-empty array of even length")];let g=[];for(let y=0;y<i.length;y+=2)g=g.concat(ma({key:`${e}[${y}]`,value:i[y],valueSpec:h.layout_symbol["text-anchor"]})),g=g.concat(Di({key:`${e}[${y+1}]`,value:i[y+1],valueSpec:{length:2,value:"number"},validateSpec:r.validateSpec,style:r.style,styleSpec:h}));return g},sprite:Xu,state:Td};function Nl(r){let e=r.value,i=r.valueSpec,l=r.styleSpec;return r.validateSpec=Nl,i.expression&&rl(Oi(e))?sl(r):i.expression&&Ws(os(e))?Oa(r):i.type&&Ku[i.type]?Ku[i.type](r):dn(Cr({},r,{valueSpec:i.type?l[i.type]:i}))}function ol(r){let e=r.value,i=r.key,l=vo(r);return l.length||(e.indexOf("{fontstack}")===-1&&l.push(new Re(i,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&l.push(new Re(i,e,'"glyphs" url must include a "{range}" token'))),l}function Jn(r,e=ze){let i=[];return i=i.concat(Nl({key:"",value:r,valueSpec:e.$root,styleSpec:e,style:r,validateSpec:Nl,objectElementValidators:{glyphs:ol,"*":()=>[]}})),r.constants&&(i=i.concat(Oc({key:"constants",value:r.constants}))),Cd(i)}function ga(r){return function(e){return r(Object.assign({},e,{validateSpec:Nl}))}}function Cd(r){return[].concat(r).sort(((e,i)=>e.line-i.line))}function ya(r){return function(...e){return Cd(r.apply(this,e))}}Jn.source=ya(ga(Hu)),Jn.sprite=ya(ga(Xu)),Jn.glyphs=ya(ga(ol)),Jn.light=ya(ga(jl)),Jn.sky=ya(ga(Sd)),Jn.terrain=ya(ga(Yu)),Jn.state=ya(ga(Td)),Jn.layer=ya(ga(wd)),Jn.filter=ya(ga(ls)),Jn.paintProperty=ya(ga(bd)),Jn.layoutProperty=ya(ga(xd));let Ff=ze,ll=Jn,ql=ll.light,Vl=ll.sky,Dn=ll.paintProperty,Wl=ll.layoutProperty;function Ju(r,e){let i=!1;if(e&&e.length)for(let l of e)r.fire(new ui(new Error(l.message))),i=!0;return i}class Gl{constructor(e,i,l){let h=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;let y=new Int32Array(this.arrayBuffer);e=y[0],this.d=(i=y[1])+2*(l=y[2]);for(let S=0;S<this.d*this.d;S++){let P=y[3+S],A=y[3+S+1];h.push(P===A?null:y.subarray(P,A))}let x=y[3+h.length+1];this.keys=y.subarray(y[3+h.length],x),this.bboxes=y.subarray(x),this.insert=this._insertReadonly}else{this.d=i+2*l;for(let y=0;y<this.d*this.d;y++)h.push([]);this.keys=[],this.bboxes=[]}this.n=i,this.extent=e,this.padding=l,this.scale=i/e,this.uid=0;let g=l/i*e;this.min=-g,this.max=e+g}insert(e,i,l,h,g){this._forEachCell(i,l,h,g,this._insertCell,this.uid++,void 0,void 0),this.keys.push(e),this.bboxes.push(i),this.bboxes.push(l),this.bboxes.push(h),this.bboxes.push(g)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(e,i,l,h,g,y){this.cells[g].push(y)}query(e,i,l,h,g){let y=this.min,x=this.max;if(e<=y&&i<=y&&x<=l&&x<=h&&!g)return Array.prototype.slice.call(this.keys);{let S=[];return this._forEachCell(e,i,l,h,this._queryCell,S,{},g),S}}_queryCell(e,i,l,h,g,y,x,S){let P=this.cells[g];if(P!==null){let A=this.keys,O=this.bboxes;for(let R=0;R<P.length;R++){let F=P[R];if(x[F]===void 0){let V=4*F;(S?S(O[V+0],O[V+1],O[V+2],O[V+3]):e<=O[V+2]&&i<=O[V+3]&&l>=O[V+0]&&h>=O[V+1])?(x[F]=!0,y.push(A[F])):x[F]=!1}}}}_forEachCell(e,i,l,h,g,y,x,S){let P=this._convertToCellCoord(e),A=this._convertToCellCoord(i),O=this._convertToCellCoord(l),R=this._convertToCellCoord(h);for(let F=P;F<=O;F++)for(let V=A;V<=R;V++){let W=this.d*V+F;if((!S||S(this._convertFromCellCoord(F),this._convertFromCellCoord(V),this._convertFromCellCoord(F+1),this._convertFromCellCoord(V+1)))&&g.call(this,e,i,l,h,W,y,x,S))return}}_convertFromCellCoord(e){return(e-this.padding)/this.scale}_convertToCellCoord(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;let e=this.cells,i=3+this.cells.length+1+1,l=0;for(let y=0;y<this.cells.length;y++)l+=this.cells[y].length;let h=new Int32Array(i+l+this.keys.length+this.bboxes.length);h[0]=this.extent,h[1]=this.n,h[2]=this.padding;let g=i;for(let y=0;y<e.length;y++){let x=e[y];h[3+y]=g,h.set(x,g),g+=x.length}return h[3+e.length]=g,h.set(this.keys,g),g+=this.keys.length,h[3+e.length+1]=g,h.set(this.bboxes,g),g+=this.bboxes.length,h.buffer}static serialize(e,i){let l=e.toArrayBuffer();return i&&i.push(l),{buffer:l}}static deserialize(e){return new Gl(e.buffer)}}let cs={};function at(r,e,i={}){if(cs[r])throw new Error(`${r} is already registered.`);Object.defineProperty(e,"_classRegistryKey",{value:r,writeable:!1}),cs[r]={klass:e,omit:i.omit||[],shallow:i.shallow||[]}}at("Object",Object),at("Set",Set),at("TransferableGridIndex",Gl),at("Color",Rt),at("Error",Error),at("AJAXError",we),at("ResolvedImage",Nr),at("StylePropertyFunction",q),at("StyleExpression",nl,{omit:["_evaluator"]}),at("ZoomDependentExpression",C),at("ZoomConstantExpression",v),at("CompoundExpression",Er,{omit:["_evaluate"]});for(let r in Bs)Bs[r]._classRegistryKey||at(`Expression_${r}`,Bs[r]);function Qu(r){return r&&typeof ArrayBuffer<"u"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}function Ul(r){return r.$name||r.constructor._classRegistryKey}function kd(r){return!(function(e){if(e===null||typeof e!="object")return!1;let i=Ul(e);return!(!i||i==="Object")})(r)&&(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||r instanceof Blob||r instanceof Error||Qu(r)||En(r)||ArrayBuffer.isView(r)||r instanceof ImageData)}function bo(r,e){if(kd(r))return(Qu(r)||En(r))&&e&&e.push(r),ArrayBuffer.isView(r)&&e&&e.push(r.buffer),r instanceof ImageData&&e&&e.push(r.data.buffer),r;if(Array.isArray(r)){let g=[];for(let y of r)g.push(bo(y,e));return g}if(typeof r!="object")throw new Error("can't serialize object of type "+typeof r);let i=Ul(r);if(!i)throw new Error(`can't serialize object of unregistered class ${r.constructor.name}`);if(!cs[i])throw new Error(`${i} is not registered.`);let{klass:l}=cs[i],h=l.serialize?l.serialize(r,e):{};if(l.serialize){if(e&&h===e[e.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(let g in r){if(!r.hasOwnProperty(g)||cs[i].omit.indexOf(g)>=0)continue;let y=r[g];h[g]=cs[i].shallow.indexOf(g)>=0?y:bo(y,e)}r instanceof Error&&(h.message=r.message)}if(h.$name)throw new Error("$name property is reserved for worker serialization logic.");return i!=="Object"&&(h.$name=i),h}function Zl(r){if(kd(r))return r;if(Array.isArray(r))return r.map(Zl);if(typeof r!="object")throw new Error("can't deserialize object of type "+typeof r);let e=Ul(r)||"Object";if(!cs[e])throw new Error(`can't deserialize unregistered class ${e}`);let{klass:i}=cs[e];if(!i)throw new Error(`can't deserialize unregistered class ${e}`);if(i.deserialize)return i.deserialize(r);let l=Object.create(i.prototype);for(let h of Object.keys(r)){if(h==="$name")continue;let g=r[h];l[h]=cs[e].shallow.indexOf(h)>=0?g:Zl(g)}return l}class xo{constructor(){this.first=!0}update(e,i){let l=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=l,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=l,!0):(this.lastFloorZoom>l?(this.lastIntegerZoom=l+1,this.lastIntegerZoomTime=i):this.lastFloorZoom<l&&(this.lastIntegerZoom=l,this.lastIntegerZoomTime=i),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=l,!0))}}function jf(r){return/[\u02EA\u02EB\u2E80-\u2FDF\u2FF0-\u303F\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u3105-\u312F\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(r))}function eh(r){return/[\u02EA\u02EB\u1100-\u11FF\u1400-\u167F\u18B0-\u18F5\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303F\u3041-\u3096\u309D-\u30FB\u30FD-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE48\uFE50-\uFE57\uFE5F-\uFE62\uFE67-\uFE6F\uFF00-\uFF07\uFF0A-\uFF0C\uFF0E-\uFF19\uFF1F-\uFF3A\uFF3C\uFF3E\uFF40-\uFF5A\uFFE0-\uFFE2\uFFE4-\uFFE7]|\uD802[\uDD80-\uDD9F]|\uD805[\uDD80-\uDDFF]|\uD806[\uDE00-\uDEBF]|\uD811[\uDC00-\uDE7F]|\uD81B[\uDFE0-\uDFE4\uDFF0-\uDFF6]|[\uD81C-\uD822\uD83D\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD30-\uDEFB]|\uD833[\uDEC0-\uDFCF]|\uD834[\uDC00-\uDDFF\uDEE0-\uDF7F]|\uD836[\uDC00-\uDEAF]|\uD83C[\uDC00-\uDE00\uDF00-\uDFFF]|\uD83E[\uDD00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(r))}function Pd(r){return/\s/u.test(String.fromCodePoint(r))}function wo(r){for(let e of r)if(eh(e.codePointAt(0)))return!0;return!1}function Nf(r){for(let e of r)if(!qf(e.codePointAt(0)))return!1;return!0}function Ed(r){let e=r.map((i=>{try{return new RegExp(`\\p{sc=${i}}`,"u").source}catch{return null}})).filter((i=>i));return new RegExp(e.join("|"),"u")}let Rc=Ed(["Arab","Dupl","Mong","Ougr","Syrc"]);function qf(r){return!Rc.test(String.fromCodePoint(r))}function Bc(r){return!(eh(r)||(e=r,/[\xA7\xA9\xAE\xB1\xBC-\xBE\xD7\xF7\u2016\u2020\u2021\u2030\u2031\u203B\u203C\u2042\u2047-\u2049\u2051\u2100-\u218F\u221E\u2234\u2235\u2300-\u2307\u230C-\u231F\u2324-\u2328\u232B\u237D-\u239A\u23BE-\u23CD\u23CF\u23D1-\u23DB\u23E2-\u2422\u2424-\u24FF\u25A0-\u2619\u2620-\u2767\u2776-\u2793\u2B12-\u2B2F\u2B50-\u2B59\u2BB8-\u2BEB\u3000-\u303F\u30A0-\u30FF\uE000-\uF8FF\uFE30-\uFE6F\uFF00-\uFFEF\uFFFC\uFFFD]|[\uDB80-\uDBFF][\uDC00-\uDFFF]/gim.test(String.fromCodePoint(e))));var e}let Fc=Ed(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function th(r){return Fc.test(String.fromCodePoint(r))}function Ad(r,e){return!(!e&&th(r)||/[\u0900-\u0DFF\u0F00-\u109F\u1780-\u17FF]/gim.test(String.fromCodePoint(r)))}function Md(r){for(let e of r)if(th(e.codePointAt(0)))return!0;return!1}let us=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(r){this.pluginStatus=r.pluginStatus,this.pluginURL=r.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(r){if(us.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=r.applyArabicShaping,this.processBidirectionalText=r.processBidirectionalText,this.processStyledBidirectionalText=r.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(r,e){return a(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(r.pluginStatus!=="loading")return this.setState(r),r;let i=r.pluginURL,l=new Promise((g=>{this.loadScriptResolve=g}));e(i);let h=new Promise((g=>setTimeout((()=>g()),this.TIMEOUT)));if(yield Promise.race([l,h]),this.isParsed()){let g={pluginStatus:"loaded",pluginURL:i};return this.setState(g),g}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${i}`)}))}};class Ti{constructor(e,i){this.isSupportedScript=Id,this.zoom=e,i?(this.now=i.now||0,this.fadeDuration=i.fadeDuration||0,this.zoomHistory=i.zoomHistory||new xo,this.transition=i.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new xo,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){let e=this.zoom,i=e-Math.floor(e),l=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:i+(1-i)*l}:{fromScale:.5,toScale:1,t:1-(1-l)*i}}}function Id(r){return(function(e,i){for(let l of e)if(!Ad(l.codePointAt(0),i))return!1;return!0})(r,us.getRTLTextPluginStatus()==="loaded")}let jc="-transition";class $l{constructor(e,i,l){this.property=e,this.value=i,this.expression=(function(h,g,y){if(rl(h))return new q(h,g);if(Ws(h)){let x=I(h,g,y);if(x.result==="error")throw new Error(x.value.map((S=>`${S.key}: ${S.message}`)).join(", "));return x.value}{let x=h;return g.type==="color"&&typeof h=="string"?x=Rt.parse(h):g.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?g.type!=="numberArray"||typeof h!="number"&&!Array.isArray(h)?g.type!=="colorArray"||typeof h!="string"&&!Array.isArray(h)?g.type==="variableAnchorOffsetCollection"&&Array.isArray(h)?x=vr.parse(h):g.type==="projectionDefinition"&&typeof h=="string"&&(x=Xi.parse(h)):x=ct.parse(h):x=li.parse(h):x=bt.parse(h),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>x}}})(i===void 0?e.specification.default:i,e.specification,l)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(e,i,l){return this.property.possiblyEvaluate(this,e,i,l)}}class ih{constructor(e,i){this.property=e,this.value=new $l(e,void 0,i)}transitioned(e,i){return new zd(this.property,this.value,i,ji({},e.transition,this.transition),e.now)}untransitioned(){return new zd(this.property,this.value,null,{},0)}}class rh{constructor(e,i){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues),this._globalState=i}getValue(e){return Rr(this._values[e].value.value)}setValue(e,i){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new ih(this._values[e].property,this._globalState)),this._values[e].value=new $l(this._values[e].property,i===null?void 0:Rr(i),this._globalState)}getTransition(e){return Rr(this._values[e].transition)}setTransition(e,i){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new ih(this._values[e].property,this._globalState)),this._values[e].transition=Rr(i)||void 0}serialize(){let e={};for(let i of Object.keys(this._values)){let l=this.getValue(i);l!==void 0&&(e[i]=l);let h=this.getTransition(i);h!==void 0&&(e[`${i}${jc}`]=h)}return e}transitioned(e,i){let l=new nh(this._properties);for(let h of Object.keys(this._values))l._values[h]=this._values[h].transitioned(e,i._values[h]);return l}untransitioned(){let e=new nh(this._properties);for(let i of Object.keys(this._values))e._values[i]=this._values[i].untransitioned();return e}}class zd{constructor(e,i,l,h,g){this.property=e,this.value=i,this.begin=g+h.delay||0,this.end=this.begin+h.duration||0,e.specification.transition&&(h.delay||h.duration)&&(this.prior=l)}possiblyEvaluate(e,i,l){let h=e.now||0,g=this.value.possiblyEvaluate(e,i,l),y=this.prior;if(y){if(h>this.end)return this.prior=null,g;if(this.value.isDataDriven())return this.prior=null,g;if(h<this.begin)return y.possiblyEvaluate(e,i,l);{let x=(h-this.begin)/(this.end-this.begin);return this.property.interpolate(y.possiblyEvaluate(e,i,l),g,tr(x))}}return g}}class nh{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,i,l){let h=new Nc(this._properties);for(let g of Object.keys(this._values))h._values[g]=this._values[g].possiblyEvaluate(e,i,l);return h}hasTransition(){for(let e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class Ld{constructor(e,i){this._properties=e,this._values=Object.create(e.defaultPropertyValues),this._globalState=i}hasValue(e){return this._values[e].value!==void 0}getValue(e){return Rr(this._values[e].value)}setValue(e,i){this._values[e]=new $l(this._values[e].property,i===null?void 0:Rr(i),this._globalState)}serialize(){let e={};for(let i of Object.keys(this._values)){let l=this.getValue(i);l!==void 0&&(e[i]=l)}return e}possiblyEvaluate(e,i,l){let h=new Nc(this._properties);for(let g of Object.keys(this._values))h._values[g]=this._values[g].possiblyEvaluate(e,i,l);return h}}class Da{constructor(e,i,l){this.property=e,this.value=i,this.parameters=l}isConstant(){return this.value.kind==="constant"}constantOr(e){return this.value.kind==="constant"?this.value.value:e}evaluate(e,i,l,h){return this.property.evaluate(this.value,this.parameters,e,i,l,h)}}class Nc{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class gt{constructor(e){this.specification=e}possiblyEvaluate(e,i){if(e.isDataDriven())throw new Error("Value should not be data driven");return e.expression.evaluate(i)}interpolate(e,i,l){let h=ki[this.specification.type];return h?h(e,i,l):e}}class wt{constructor(e,i){this.specification=e,this.overrides=i}possiblyEvaluate(e,i,l,h){return new Da(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(i,null,{},l,h)}:e.expression,i)}interpolate(e,i,l){if(e.value.kind!=="constant"||i.value.kind!=="constant")return e;if(e.value.value===void 0||i.value.value===void 0)return new Da(this,{kind:"constant",value:void 0},e.parameters);let h=ki[this.specification.type];if(h){let g=h(e.value.value,i.value.value,l);return new Da(this,{kind:"constant",value:g},e.parameters)}return e}evaluate(e,i,l,h,g,y){return e.kind==="constant"?e.value:e.evaluate(i,l,h,g,y)}}class cl extends wt{possiblyEvaluate(e,i,l,h){if(e.value===void 0)return new Da(this,{kind:"constant",value:void 0},i);if(e.expression.kind==="constant"){let g=e.expression.evaluate(i,null,{},l,h),y=e.property.specification.type==="resolvedImage"&&typeof g!="string"?g.name:g,x=this._calculate(y,y,y,i);return new Da(this,{kind:"constant",value:x},i)}if(e.expression.kind==="camera"){let g=this._calculate(e.expression.evaluate({zoom:i.zoom-1}),e.expression.evaluate({zoom:i.zoom}),e.expression.evaluate({zoom:i.zoom+1}),i);return new Da(this,{kind:"constant",value:g},i)}return new Da(this,e.expression,i)}evaluate(e,i,l,h,g,y){if(e.kind==="source"){let x=e.evaluate(i,l,h,g,y);return this._calculate(x,x,x,i)}return e.kind==="composite"?this._calculate(e.evaluate({zoom:Math.floor(i.zoom)-1},l,h),e.evaluate({zoom:Math.floor(i.zoom)},l,h),e.evaluate({zoom:Math.floor(i.zoom)+1},l,h),i):e.value}_calculate(e,i,l,h){return h.zoom>h.zoomHistory.lastIntegerZoom?{from:e,to:i}:{from:l,to:i}}interpolate(e){return e}}class ah{constructor(e){this.specification=e}possiblyEvaluate(e,i,l,h){if(e.value!==void 0){if(e.expression.kind==="constant"){let g=e.expression.evaluate(i,null,{},l,h);return this._calculate(g,g,g,i)}return this._calculate(e.expression.evaluate(new Ti(Math.floor(i.zoom-1),i)),e.expression.evaluate(new Ti(Math.floor(i.zoom),i)),e.expression.evaluate(new Ti(Math.floor(i.zoom+1),i)),i)}}_calculate(e,i,l,h){return h.zoom>h.zoomHistory.lastIntegerZoom?{from:e,to:i}:{from:l,to:i}}interpolate(e){return e}}class So{constructor(e){this.specification=e}possiblyEvaluate(e,i,l,h){return!!e.expression.evaluate(i,null,{},l,h)}interpolate(){return!1}}class pn{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(let i in e){let l=e[i];l.specification.overridable&&this.overridableProperties.push(i);let h=this.defaultPropertyValues[i]=new $l(l,void 0,void 0),g=this.defaultTransitionablePropertyValues[i]=new ih(l,void 0);this.defaultTransitioningPropertyValues[i]=g.untransitioned(),this.defaultPossiblyEvaluatedValues[i]=h.possiblyEvaluate({})}}}at("DataDrivenProperty",wt),at("DataConstantProperty",gt),at("CrossFadedDataDrivenProperty",cl),at("CrossFadedProperty",ah),at("ColorRampProperty",So);class Rn extends ai{constructor(e,i,l){if(super(),this.id=e.id,this.type=e.type,this._globalState=l,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},e.type!=="custom"&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,e.type!=="background"&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter,this._featureFilter=ht(e.filter,l)),i.layout&&(this._unevaluatedLayout=new Ld(i.layout,l)),i.paint)){this._transitionablePaint=new rh(i.paint,l);for(let h in e.paint)this.setPaintProperty(h,e.paint[h],{validate:!1});for(let h in e.layout)this.setLayoutProperty(h,e.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Nc(i.paint)}}setFilter(e){this.filter=e,this._featureFilter=ht(e,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return e==="visibility"?this.visibility:this._unevaluatedLayout.getValue(e)}getLayoutAffectingGlobalStateRefs(){let e=new Set;if(this._unevaluatedLayout)for(let i in this._unevaluatedLayout._values){let l=this._unevaluatedLayout._values[i];for(let h of l.getGlobalStateRefs())e.add(h)}for(let i of this._featureFilter.getGlobalStateRefs())e.add(i);return e}getPaintAffectingGlobalStateRefs(){var e;let i=new globalThis.Map;if(this._transitionablePaint)for(let l in this._transitionablePaint._values){let h=this._transitionablePaint._values[l].value;for(let g of h.getGlobalStateRefs()){let y=(e=i.get(g))!==null&&e!==void 0?e:[];y.push({name:l,value:h.value}),i.set(g,y)}}return i}setLayoutProperty(e,i,l={}){i!=null&&this._validate(Wl,`layers.${this.id}.layout.${e}`,e,i,l)||(e!=="visibility"?this._unevaluatedLayout.setValue(e,i):this.visibility=i)}getPaintProperty(e){return e.endsWith(jc)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}setPaintProperty(e,i,l={}){if(i!=null&&this._validate(Dn,`layers.${this.id}.paint.${e}`,e,i,l))return!1;if(e.endsWith(jc))return this._transitionablePaint.setTransition(e.slice(0,-11),i||void 0),!1;{let h=this._transitionablePaint._values[e],g=h.property.specification["property-type"]==="cross-faded-data-driven",y=h.value.isDataDriven(),x=h.value;this._transitionablePaint.setValue(e,i),this._handleSpecialPaintPropertyUpdate(e);let S=this._transitionablePaint._values[e].value;return S.isDataDriven()||y||g||this._handleOverridablePaintPropertyUpdate(e,x,S)}}_handleSpecialPaintPropertyUpdate(e){}_handleOverridablePaintPropertyUpdate(e,i,l){return!1}isHidden(e,i=!1){return!!(this.minzoom&&e<(i?Math.floor(this.minzoom):this.minzoom))||!!(this.maxzoom&&e>=this.maxzoom)||this.visibility==="none"}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,i){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,i)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,i)}serialize(){let e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),Ga(e,((i,l)=>!(i===void 0||l==="layout"&&!Object.keys(i).length||l==="paint"&&!Object.keys(i).length)))}_validate(e,i,l,h,g={}){return(!g||g.validate!==!1)&&Ju(this,e.call(ll,{key:i,layerType:this.type,objectKey:l,value:h,styleSpec:ze,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(let e in this.paint._values){let i=this.paint.get(e);if(i instanceof Da&&fa(i.property.specification)&&(i.value.kind==="source"||i.value.kind==="composite")&&i.value.isStateDependent)return!0}return!1}}let Od;var Vf={get paint(){return Od=Od||new pn({"raster-opacity":new gt(ze.paint_raster["raster-opacity"]),"raster-hue-rotate":new gt(ze.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new gt(ze.paint_raster["raster-brightness-min"]),"raster-brightness-max":new gt(ze.paint_raster["raster-brightness-max"]),"raster-saturation":new gt(ze.paint_raster["raster-saturation"]),"raster-contrast":new gt(ze.paint_raster["raster-contrast"]),"raster-resampling":new gt(ze.paint_raster["raster-resampling"]),"raster-fade-duration":new gt(ze.paint_raster["raster-fade-duration"])})}};class Dd extends Rn{constructor(e,i){super(e,Vf,i)}}let Rd={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ul{constructor(e,i){this._structArray=e,this._pos1=i*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Gi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,i){return e._trim(),i&&(e.isTransferred=!0,i.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){let i=Object.create(this.prototype);return i.arrayBuffer=e.arrayBuffer,i.length=e.length,i.capacity=e.arrayBuffer.byteLength/i.bytesPerElement,i._refreshViews(),i}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);let i=this.uint8;this._refreshViews(),i&&this.uint8.set(i)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function rr(r,e=1){let i=0,l=0;return{members:r.map((h=>{let g=Rd[h.type].BYTES_PER_ELEMENT,y=i=Bd(i,Math.max(e,g)),x=h.components||1;return l=Math.max(l,g),i+=g*x,{name:h.name,type:h.type,components:x,offset:y}})),size:Bd(i,Math.max(l,e)),alignment:e}}function Bd(r,e){return Math.ceil(r/e)*e}class Hl extends Gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,i){let l=this.length;return this.resize(l+1),this.emplace(l,e,i)}emplace(e,i,l){let h=2*e;return this.int16[h+0]=i,this.int16[h+1]=l,e}}Hl.prototype.bytesPerElement=4,at("StructArrayLayout2i4",Hl);class qc extends Gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,i,l){let h=this.length;return this.resize(h+1),this.emplace(h,e,i,l)}emplace(e,i,l,h){let g=3*e;return this.int16[g+0]=i,this.int16[g+1]=l,this.int16[g+2]=h,e}}qc.prototype.bytesPerElement=6,at("StructArrayLayout3i6",qc);class Gs extends Gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,i,l,h){let g=this.length;return this.resize(g+1),this.emplace(g,e,i,l,h)}emplace(e,i,l,h,g){let y=4*e;return this.int16[y+0]=i,this.int16[y+1]=l,this.int16[y+2]=h,this.int16[y+3]=g,e}}Gs.prototype.bytesPerElement=8,at("StructArrayLayout4i8",Gs);class sh extends Gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,i,l,h,g,y){let x=this.length;return this.resize(x+1),this.emplace(x,e,i,l,h,g,y)}emplace(e,i,l,h,g,y,x){let S=6*e;return this.int16[S+0]=i,this.int16[S+1]=l,this.int16[S+2]=h,this.int16[S+3]=g,this.int16[S+4]=y,this.int16[S+5]=x,e}}sh.prototype.bytesPerElement=12,at("StructArrayLayout2i4i12",sh);class oh extends Gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,i,l,h,g,y){let x=this.length;return this.resize(x+1),this.emplace(x,e,i,l,h,g,y)}emplace(e,i,l,h,g,y,x){let S=4*e,P=8*e;return this.int16[S+0]=i,this.int16[S+1]=l,this.uint8[P+4]=h,this.uint8[P+5]=g,this.uint8[P+6]=y,this.uint8[P+7]=x,e}}oh.prototype.bytesPerElement=8,at("StructArrayLayout2i4ub8",oh);class Yl extends Gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i){let l=this.length;return this.resize(l+1),this.emplace(l,e,i)}emplace(e,i,l){let h=2*e;return this.float32[h+0]=i,this.float32[h+1]=l,e}}Yl.prototype.bytesPerElement=8,at("StructArrayLayout2f8",Yl);class Vc extends Gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,i,l,h,g,y,x,S,P,A){let O=this.length;return this.resize(O+1),this.emplace(O,e,i,l,h,g,y,x,S,P,A)}emplace(e,i,l,h,g,y,x,S,P,A,O){let R=10*e;return this.uint16[R+0]=i,this.uint16[R+1]=l,this.uint16[R+2]=h,this.uint16[R+3]=g,this.uint16[R+4]=y,this.uint16[R+5]=x,this.uint16[R+6]=S,this.uint16[R+7]=P,this.uint16[R+8]=A,this.uint16[R+9]=O,e}}Vc.prototype.bytesPerElement=20,at("StructArrayLayout10ui20",Vc);class lh extends Gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,i,l,h,g,y,x,S){let P=this.length;return this.resize(P+1),this.emplace(P,e,i,l,h,g,y,x,S)}emplace(e,i,l,h,g,y,x,S,P){let A=8*e;return this.uint16[A+0]=i,this.uint16[A+1]=l,this.uint16[A+2]=h,this.uint16[A+3]=g,this.uint16[A+4]=y,this.uint16[A+5]=x,this.uint16[A+6]=S,this.uint16[A+7]=P,e}}lh.prototype.bytesPerElement=16,at("StructArrayLayout8ui16",lh);class ch extends Gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,i,l,h,g,y,x,S,P,A,O,R){let F=this.length;return this.resize(F+1),this.emplace(F,e,i,l,h,g,y,x,S,P,A,O,R)}emplace(e,i,l,h,g,y,x,S,P,A,O,R,F){let V=12*e;return this.int16[V+0]=i,this.int16[V+1]=l,this.int16[V+2]=h,this.int16[V+3]=g,this.uint16[V+4]=y,this.uint16[V+5]=x,this.uint16[V+6]=S,this.uint16[V+7]=P,this.int16[V+8]=A,this.int16[V+9]=O,this.int16[V+10]=R,this.int16[V+11]=F,e}}ch.prototype.bytesPerElement=24,at("StructArrayLayout4i4ui4i24",ch);class hs extends Gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i,l){let h=this.length;return this.resize(h+1),this.emplace(h,e,i,l)}emplace(e,i,l,h){let g=3*e;return this.float32[g+0]=i,this.float32[g+1]=l,this.float32[g+2]=h,e}}hs.prototype.bytesPerElement=12,at("StructArrayLayout3f12",hs);class Wc extends Gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){let i=this.length;return this.resize(i+1),this.emplace(i,e)}emplace(e,i){return this.uint32[1*e+0]=i,e}}Wc.prototype.bytesPerElement=4,at("StructArrayLayout1ul4",Wc);class Xl extends Gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,i,l,h,g,y,x,S,P){let A=this.length;return this.resize(A+1),this.emplace(A,e,i,l,h,g,y,x,S,P)}emplace(e,i,l,h,g,y,x,S,P,A){let O=10*e,R=5*e;return this.int16[O+0]=i,this.int16[O+1]=l,this.int16[O+2]=h,this.int16[O+3]=g,this.int16[O+4]=y,this.int16[O+5]=x,this.uint32[R+3]=S,this.uint16[O+8]=P,this.uint16[O+9]=A,e}}Xl.prototype.bytesPerElement=20,at("StructArrayLayout6i1ul2ui20",Xl);class Gc extends Gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,i,l,h,g,y){let x=this.length;return this.resize(x+1),this.emplace(x,e,i,l,h,g,y)}emplace(e,i,l,h,g,y,x){let S=6*e;return this.int16[S+0]=i,this.int16[S+1]=l,this.int16[S+2]=h,this.int16[S+3]=g,this.int16[S+4]=y,this.int16[S+5]=x,e}}Gc.prototype.bytesPerElement=12,at("StructArrayLayout2i2i2i12",Gc);class Kl extends Gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,i,l,h,g){let y=this.length;return this.resize(y+1),this.emplace(y,e,i,l,h,g)}emplace(e,i,l,h,g,y){let x=4*e,S=8*e;return this.float32[x+0]=i,this.float32[x+1]=l,this.float32[x+2]=h,this.int16[S+6]=g,this.int16[S+7]=y,e}}Kl.prototype.bytesPerElement=16,at("StructArrayLayout2f1f2i16",Kl);class uh extends Gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,i,l,h,g,y){let x=this.length;return this.resize(x+1),this.emplace(x,e,i,l,h,g,y)}emplace(e,i,l,h,g,y,x){let S=16*e,P=4*e,A=8*e;return this.uint8[S+0]=i,this.uint8[S+1]=l,this.float32[P+1]=h,this.float32[P+2]=g,this.int16[A+6]=y,this.int16[A+7]=x,e}}uh.prototype.bytesPerElement=16,at("StructArrayLayout2ub2f2i16",uh);class To extends Gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,i,l){let h=this.length;return this.resize(h+1),this.emplace(h,e,i,l)}emplace(e,i,l,h){let g=3*e;return this.uint16[g+0]=i,this.uint16[g+1]=l,this.uint16[g+2]=h,e}}To.prototype.bytesPerElement=6,at("StructArrayLayout3ui6",To);class Co extends Gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i,l,h,g,y,x,S,P,A,O,R,F,V,W,Z,K){let ue=this.length;return this.resize(ue+1),this.emplace(ue,e,i,l,h,g,y,x,S,P,A,O,R,F,V,W,Z,K)}emplace(e,i,l,h,g,y,x,S,P,A,O,R,F,V,W,Z,K,ue){let ee=24*e,ne=12*e,de=48*e;return this.int16[ee+0]=i,this.int16[ee+1]=l,this.uint16[ee+2]=h,this.uint16[ee+3]=g,this.uint32[ne+2]=y,this.uint32[ne+3]=x,this.uint32[ne+4]=S,this.uint16[ee+10]=P,this.uint16[ee+11]=A,this.uint16[ee+12]=O,this.float32[ne+7]=R,this.float32[ne+8]=F,this.uint8[de+36]=V,this.uint8[de+37]=W,this.uint8[de+38]=Z,this.uint32[ne+10]=K,this.int16[ee+22]=ue,e}}Co.prototype.bytesPerElement=48,at("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Co);class hh extends Gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i,l,h,g,y,x,S,P,A,O,R,F,V,W,Z,K,ue,ee,ne,de,fe,Pe,Ge,Ne,$e,tt,Ye){let Ve=this.length;return this.resize(Ve+1),this.emplace(Ve,e,i,l,h,g,y,x,S,P,A,O,R,F,V,W,Z,K,ue,ee,ne,de,fe,Pe,Ge,Ne,$e,tt,Ye)}emplace(e,i,l,h,g,y,x,S,P,A,O,R,F,V,W,Z,K,ue,ee,ne,de,fe,Pe,Ge,Ne,$e,tt,Ye,Ve){let Be=32*e,lt=16*e;return this.int16[Be+0]=i,this.int16[Be+1]=l,this.int16[Be+2]=h,this.int16[Be+3]=g,this.int16[Be+4]=y,this.int16[Be+5]=x,this.int16[Be+6]=S,this.int16[Be+7]=P,this.uint16[Be+8]=A,this.uint16[Be+9]=O,this.uint16[Be+10]=R,this.uint16[Be+11]=F,this.uint16[Be+12]=V,this.uint16[Be+13]=W,this.uint16[Be+14]=Z,this.uint16[Be+15]=K,this.uint16[Be+16]=ue,this.uint16[Be+17]=ee,this.uint16[Be+18]=ne,this.uint16[Be+19]=de,this.uint16[Be+20]=fe,this.uint16[Be+21]=Pe,this.uint16[Be+22]=Ge,this.uint32[lt+12]=Ne,this.float32[lt+13]=$e,this.float32[lt+14]=tt,this.uint16[Be+30]=Ye,this.uint16[Be+31]=Ve,e}}hh.prototype.bytesPerElement=64,at("StructArrayLayout8i15ui1ul2f2ui64",hh);class Jl extends Gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){let i=this.length;return this.resize(i+1),this.emplace(i,e)}emplace(e,i){return this.float32[1*e+0]=i,e}}Jl.prototype.bytesPerElement=4,at("StructArrayLayout1f4",Jl);class ko extends Gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i,l){let h=this.length;return this.resize(h+1),this.emplace(h,e,i,l)}emplace(e,i,l,h){let g=3*e;return this.uint16[6*e+0]=i,this.float32[g+1]=l,this.float32[g+2]=h,e}}ko.prototype.bytesPerElement=12,at("StructArrayLayout1ui2f12",ko);class dh extends Gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,i,l){let h=this.length;return this.resize(h+1),this.emplace(h,e,i,l)}emplace(e,i,l,h){let g=4*e;return this.uint32[2*e+0]=i,this.uint16[g+2]=l,this.uint16[g+3]=h,e}}dh.prototype.bytesPerElement=8,at("StructArrayLayout1ul2ui8",dh);class ph extends Gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,i){let l=this.length;return this.resize(l+1),this.emplace(l,e,i)}emplace(e,i,l){let h=2*e;return this.uint16[h+0]=i,this.uint16[h+1]=l,e}}ph.prototype.bytesPerElement=4,at("StructArrayLayout2ui4",ph);class Uc extends Gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){let i=this.length;return this.resize(i+1),this.emplace(i,e)}emplace(e,i){return this.uint16[1*e+0]=i,e}}Uc.prototype.bytesPerElement=2,at("StructArrayLayout1ui2",Uc);class fh extends Gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i,l,h){let g=this.length;return this.resize(g+1),this.emplace(g,e,i,l,h)}emplace(e,i,l,h,g){let y=4*e;return this.float32[y+0]=i,this.float32[y+1]=l,this.float32[y+2]=h,this.float32[y+3]=g,e}}fh.prototype.bytesPerElement=16,at("StructArrayLayout4f16",fh);class _ extends ul{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new T(this.anchorPointX,this.anchorPointY)}}_.prototype.size=20;class t extends Xl{get(e){return new _(this,e)}}at("CollisionBoxArray",t);class n extends ul{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(e){this._structArray.uint8[this._pos1+37]=e}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(e){this._structArray.uint8[this._pos1+38]=e}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(e){this._structArray.uint32[this._pos4+10]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}n.prototype.size=48;class u extends Co{get(e){return new n(this,e)}}at("PlacedSymbolArray",u);class m extends ul{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(e){this._structArray.uint32[this._pos4+12]=e}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}m.prototype.size=64;class b extends hh{get(e){return new m(this,e)}}at("SymbolInstanceArray",b);class w extends Jl{getoffsetX(e){return this.float32[1*e+0]}}at("GlyphOffsetArray",w);class k extends qc{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}at("SymbolLineVertexArray",k);class E extends ul{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}E.prototype.size=12;class z extends ko{get(e){return new E(this,e)}}at("TextAnchorOffsetArray",z);class D extends ul{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}D.prototype.size=8;class N extends dh{get(e){return new D(this,e)}}at("FeatureIndexArray",N);class j extends Hl{}class U extends Hl{}class X extends Hl{}class se extends sh{}class le extends oh{}class oe extends Yl{}class ce extends Vc{}class me extends lh{}class he extends ch{}class ge extends hs{}class be extends Wc{}class pe extends Gc{}class Se extends uh{}class De extends To{}class Ie extends ph{}let Le=rr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Fe}=Le;class Xe{constructor(e=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=e}prepareSegment(e,i,l,h){let g=this.segments[this.segments.length-1];return e>Xe.MAX_VERTEX_ARRAY_LENGTH&&cr(`Max vertices per segment is ${Xe.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Xe.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!g||g.vertexLength+e>Xe.MAX_VERTEX_ARRAY_LENGTH||g.sortKey!==h?this.createNewSegment(i,l,h):g}createNewSegment(e,i,l){let h={vertexOffset:e.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0,vaos:{}};return l!==void 0&&(h.sortKey=l),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(h),h}getOrCreateLatestSegment(e,i,l){return this.prepareSegment(0,e,i,l)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(let e of this.segments)for(let i in e.vaos)e.vaos[i].destroy()}static simpleSegment(e,i,l,h){return new Xe([{vertexOffset:e,primitiveOffset:i,vertexLength:l,primitiveLength:h,vaos:{},sortKey:0}])}}function et(r,e){return 256*(r=Ft(Math.floor(r),0,255))+Ft(Math.floor(e),0,255)}Xe.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,at("SegmentVector",Xe);let He=rr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),pt=rr([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var zt,pi,Ai,yi={exports:{}},Ri={exports:{}},Pi={exports:{}},xr=(function(){if(Ai)return yi.exports;Ai=1;var r=(zt||(zt=1,Ri.exports=function(i,l){var h,g,y,x,S,P,A,O;for(g=i.length-(h=3&i.length),y=l,S=3432918353,P=461845907,O=0;O<g;)A=255&i.charCodeAt(O)|(255&i.charCodeAt(++O))<<8|(255&i.charCodeAt(++O))<<16|(255&i.charCodeAt(++O))<<24,++O,y=27492+(65535&(x=5*(65535&(y=(y^=A=(65535&(A=(A=(65535&A)*S+(((A>>>16)*S&65535)<<16)&4294967295)<<15|A>>>17))*P+(((A>>>16)*P&65535)<<16)&4294967295)<<13|y>>>19))+((5*(y>>>16)&65535)<<16)&4294967295))+((58964+(x>>>16)&65535)<<16);switch(A=0,h){case 3:A^=(255&i.charCodeAt(O+2))<<16;case 2:A^=(255&i.charCodeAt(O+1))<<8;case 1:y^=A=(65535&(A=(A=(65535&(A^=255&i.charCodeAt(O)))*S+(((A>>>16)*S&65535)<<16)&4294967295)<<15|A>>>17))*P+(((A>>>16)*P&65535)<<16)&4294967295}return y^=i.length,y=2246822507*(65535&(y^=y>>>16))+((2246822507*(y>>>16)&65535)<<16)&4294967295,y=3266489909*(65535&(y^=y>>>13))+((3266489909*(y>>>16)&65535)<<16)&4294967295,(y^=y>>>16)>>>0}),Ri.exports),e=(pi||(pi=1,Pi.exports=function(i,l){for(var h,g=i.length,y=l^g,x=0;g>=4;)h=1540483477*(65535&(h=255&i.charCodeAt(x)|(255&i.charCodeAt(++x))<<8|(255&i.charCodeAt(++x))<<16|(255&i.charCodeAt(++x))<<24))+((1540483477*(h>>>16)&65535)<<16),y=1540483477*(65535&y)+((1540483477*(y>>>16)&65535)<<16)^(h=1540483477*(65535&(h^=h>>>24))+((1540483477*(h>>>16)&65535)<<16)),g-=4,++x;switch(g){case 3:y^=(255&i.charCodeAt(x+2))<<16;case 2:y^=(255&i.charCodeAt(x+1))<<8;case 1:y=1540483477*(65535&(y^=255&i.charCodeAt(x)))+((1540483477*(y>>>16)&65535)<<16)}return y=1540483477*(65535&(y^=y>>>13))+((1540483477*(y>>>16)&65535)<<16),(y^=y>>>15)>>>0}),Pi.exports);return yi.exports=r,yi.exports.murmur3=r,yi.exports.murmur2=e,yi.exports})(),zi=M(xr);class ur{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,i,l,h){this.ids.push(nr(e)),this.positions.push(i,l,h)}getPositions(e){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");let i=nr(e),l=0,h=this.ids.length-1;for(;l<h;){let y=l+h>>1;this.ids[y]>=i?h=y:l=y+1}let g=[];for(;this.ids[l]===i;)g.push({index:this.positions[3*l],start:this.positions[3*l+1],end:this.positions[3*l+2]}),l++;return g}static serialize(e,i){let l=new Float64Array(e.ids),h=new Uint32Array(e.positions);return ar(l,h,0,l.length-1),i&&i.push(l.buffer,h.buffer),{ids:l,positions:h}}static deserialize(e){let i=new ur;return i.ids=e.ids,i.positions=e.positions,i.indexed=!0,i}}function nr(r){let e=+r;return!isNaN(e)&&e<=Number.MAX_SAFE_INTEGER?e:zi(String(r))}function ar(r,e,i,l){for(;i<l;){let h=r[i+l>>1],g=i-1,y=l+1;for(;;){do g++;while(r[g]<h);do y--;while(r[y]>h);if(g>=y)break;Vr(r,g,y),Vr(e,3*g,3*y),Vr(e,3*g+1,3*y+1),Vr(e,3*g+2,3*y+2)}y-i<l-y?(ar(r,e,i,y),i=y+1):(ar(r,e,y+1,l),l=y)}}function Vr(r,e,i){let l=r[e];r[e]=r[i],r[i]=l}at("FeaturePositionMap",ur);class fn{constructor(e,i){this.gl=e.gl,this.location=i}}class Ra extends fn{constructor(e,i){super(e,i),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class Us extends fn{constructor(e,i){super(e,i),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class Po extends fn{constructor(e,i){super(e,i),this.current=Rt.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}let Zc=new Float32Array(16);function hl(r){return[et(255*r.r,255*r.g),et(255*r.b,255*r.a)]}class Ba{constructor(e,i,l){this.value=e,this.uniformNames=i.map((h=>`u_${h}`)),this.type=l}setUniform(e,i,l){e.set(l.constantOr(this.value))}getBinding(e,i,l){return this.type==="color"?new Po(e,i):new Ra(e,i)}}class Ar{constructor(e,i){this.uniformNames=i.map((l=>`u_${l}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,i){this.pixelRatioFrom=i.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=i.tlbr,this.patternTo=e.tlbr}setConstantDashPositions(e,i){this.dashTo=[0,e.y,e.height,e.width],this.dashFrom=[0,i.y,i.height,i.width]}setUniform(e,i,l,h){let g=null;h==="u_pattern_to"?g=this.patternTo:h==="u_pattern_from"?g=this.patternFrom:h==="u_dasharray_to"?g=this.dashTo:h==="u_dasharray_from"?g=this.dashFrom:h==="u_pixel_ratio_to"?g=this.pixelRatioTo:h==="u_pixel_ratio_from"&&(g=this.pixelRatioFrom),g!==null&&e.set(g)}getBinding(e,i,l){return l.substr(0,9)==="u_pattern"||l.substr(0,12)==="u_dasharray_"?new Us(e,i):new Ra(e,i)}}class Kr{constructor(e,i,l,h){this.expression=e,this.type=l,this.maxValue=0,this.paintVertexAttributes=i.map((g=>({name:`a_${g}`,type:"Float32",components:l==="color"?2:1,offset:0}))),this.paintVertexArray=new h}populatePaintArray(e,i,l){let h=this.paintVertexArray.length,g=this.expression.evaluate(new Ti(0,l),i,{},l.canonical,[],l.formattedSection);this.paintVertexArray.resize(e),this._setPaintValue(h,e,g)}updatePaintArray(e,i,l,h,g){let y=this.expression.evaluate(new Ti(0,g),l,h);this._setPaintValue(e,i,y)}_setPaintValue(e,i,l){if(this.type==="color"){let h=hl(l);for(let g=e;g<i;g++)this.paintVertexArray.emplace(g,h[0],h[1])}else{for(let h=e;h<i;h++)this.paintVertexArray.emplace(h,l);this.maxValue=Math.max(this.maxValue,Math.abs(l))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Wr{constructor(e,i,l,h,g,y){this.expression=e,this.uniformNames=i.map((x=>`u_${x}_t`)),this.type=l,this.useIntegerZoom=h,this.zoom=g,this.maxValue=0,this.paintVertexAttributes=i.map((x=>({name:`a_${x}`,type:"Float32",components:l==="color"?4:2,offset:0}))),this.paintVertexArray=new y}populatePaintArray(e,i,l){let h=this.expression.evaluate(new Ti(this.zoom,l),i,{},l.canonical,[],l.formattedSection),g=this.expression.evaluate(new Ti(this.zoom+1,l),i,{},l.canonical,[],l.formattedSection),y=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(y,e,h,g)}updatePaintArray(e,i,l,h,g){let y=this.expression.evaluate(new Ti(this.zoom,g),l,h),x=this.expression.evaluate(new Ti(this.zoom+1,g),l,h);this._setPaintValue(e,i,y,x)}_setPaintValue(e,i,l,h){if(this.type==="color"){let g=hl(l),y=hl(h);for(let x=e;x<i;x++)this.paintVertexArray.emplace(x,g[0],g[1],y[0],y[1])}else{for(let g=e;g<i;g++)this.paintVertexArray.emplace(g,l,h);this.maxValue=Math.max(this.maxValue,Math.abs(l),Math.abs(h))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,i){let l=this.useIntegerZoom?Math.floor(i.zoom):i.zoom,h=Ft(this.expression.interpolationFactor(l,this.zoom,this.zoom+1),0,1);e.set(h)}getBinding(e,i,l){return new Ra(e,i)}}class Qn{constructor(e,i,l,h,g,y){this.expression=e,this.type=i,this.useIntegerZoom=l,this.zoom=h,this.layerId=y,this.zoomInPaintVertexArray=new g,this.zoomOutPaintVertexArray=new g}populatePaintArray(e,i,l){let h=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(h,e,this.getPositionIds(i),l)}updatePaintArray(e,i,l,h,g){this._setPaintValues(e,i,this.getPositionIds(l),g)}_setPaintValues(e,i,l,h){let g=this.getPositions(h);if(!g||!l)return;let y=g[l.min],x=g[l.mid],S=g[l.max];if(y&&x&&S)for(let P=e;P<i;P++)this.emplace(this.zoomInPaintVertexArray,P,x,y),this.emplace(this.zoomOutPaintVertexArray,P,x,S)}upload(e){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){let i=this.getVertexAttributes();this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,i,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,i,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class hr extends Qn{getPositions(e){return e.imagePositions}getPositionIds(e){return e.patterns&&e.patterns[this.layerId]}getVertexAttributes(){return He.members}emplace(e,i,l,h){e.emplace(i,l.tlbr[0],l.tlbr[1],l.tlbr[2],l.tlbr[3],h.tlbr[0],h.tlbr[1],h.tlbr[2],h.tlbr[3],l.pixelRatio,h.pixelRatio)}}class wr extends Qn{getPositions(e){return e.dashPositions}getPositionIds(e){return e.dashes&&e.dashes[this.layerId]}getVertexAttributes(){return pt.members}emplace(e,i,l,h){e.emplace(i,0,l.y,l.height,l.width,0,h.y,h.height,h.width)}}class Bn{constructor(e,i,l){this.binders={},this._buffers=[];let h=[];for(let g in e.paint._values){if(!l(g))continue;let y=e.paint.get(g);if(!(y instanceof Da&&fa(y.property.specification)))continue;let x=Wf(g,e.type),S=y.value,P=y.property.specification.type,A=y.property.useIntegerZoom,O=y.property.specification["property-type"],R=O==="cross-faded"||O==="cross-faded-data-driven";if(S.kind==="constant")this.binders[g]=R?new Ar(S.value,x):new Ba(S.value,x,P),h.push(`/u_${g}`);else if(S.kind==="source"||R){let F=Fd(g,P,"source");this.binders[g]=R?g==="line-dasharray"?new wr(S,P,A,i,F,e.id):new hr(S,P,A,i,F,e.id):new Kr(S,x,P,F),h.push(`/a_${g}`)}else{let F=Fd(g,P,"composite");this.binders[g]=new Wr(S,x,P,A,i,F),h.push(`/z_${g}`)}}this.cacheKey=h.sort().join("")}getMaxValue(e){let i=this.binders[e];return i instanceof Kr||i instanceof Wr?i.maxValue:0}populatePaintArrays(e,i,l){for(let h in this.binders){let g=this.binders[h];(g instanceof Kr||g instanceof Wr||g instanceof Qn)&&g.populatePaintArray(e,i,l)}}setConstantPatternPositions(e,i){for(let l in this.binders){let h=this.binders[l];h instanceof Ar&&h.setConstantPatternPositions(e,i)}}setConstantDashPositions(e,i){for(let l in this.binders){let h=this.binders[l];h instanceof Ar&&h.setConstantDashPositions(e,i)}}updatePaintArrays(e,i,l,h,g){let y=!1;for(let x in e){let S=i.getPositions(x);for(let P of S){let A=l.feature(P.index);for(let O in this.binders){let R=this.binders[O];if((R instanceof Kr||R instanceof Wr||R instanceof Qn)&&R.expression.isStateDependent===!0){let F=h.paint.get(O);R.expression=F.value,R.updatePaintArray(P.start,P.end,A,e[x],g),y=!0}}}}return y}defines(){let e=[];for(let i in this.binders){let l=this.binders[i];(l instanceof Ba||l instanceof Ar)&&e.push(...l.uniformNames.map((h=>`#define HAS_UNIFORM_${h}`)))}return e}getBinderAttributes(){let e=[];for(let i in this.binders){let l=this.binders[i];if(l instanceof Kr||l instanceof Wr)for(let h=0;h<l.paintVertexAttributes.length;h++)e.push(l.paintVertexAttributes[h].name);else if(l instanceof Qn){let h=l.getVertexAttributes();for(let g of h)e.push(g.name)}}return e}getBinderUniforms(){let e=[];for(let i in this.binders){let l=this.binders[i];if(l instanceof Ba||l instanceof Ar||l instanceof Wr)for(let h of l.uniformNames)e.push(h)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,i){let l=[];for(let h in this.binders){let g=this.binders[h];if(g instanceof Ba||g instanceof Ar||g instanceof Wr){for(let y of g.uniformNames)if(i[y]){let x=g.getBinding(e,i[y],y);l.push({name:y,property:h,binding:x})}}}return l}setUniforms(e,i,l,h){for(let{name:g,property:y,binding:x}of i)this.binders[y].setUniform(x,h,l.get(y),g)}updatePaintBuffers(e){this._buffers=[];for(let i in this.binders){let l=this.binders[i];if(e&&l instanceof Qn){let h=e.fromScale===2?l.zoomInPaintVertexBuffer:l.zoomOutPaintVertexBuffer;h&&this._buffers.push(h)}else(l instanceof Kr||l instanceof Wr)&&l.paintVertexBuffer&&this._buffers.push(l.paintVertexBuffer)}}upload(e){for(let i in this.binders){let l=this.binders[i];(l instanceof Kr||l instanceof Wr||l instanceof Qn)&&l.upload(e)}this.updatePaintBuffers()}destroy(){for(let e in this.binders){let i=this.binders[e];(i instanceof Kr||i instanceof Wr||i instanceof Qn)&&i.destroy()}}}class Ui{constructor(e,i,l=()=>!0){this.programConfigurations={};for(let h of e)this.programConfigurations[h.id]=new Bn(h,i,l);this.needsUpload=!1,this._featureMap=new ur,this._bufferOffset=0}populatePaintArrays(e,i,l,h){for(let g in this.programConfigurations)this.programConfigurations[g].populatePaintArrays(e,i,h);i.id!==void 0&&this._featureMap.add(i.id,l,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,i,l,h){for(let g of l)this.needsUpload=this.programConfigurations[g.id].updatePaintArrays(e,this._featureMap,i,g,h)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(let i in this.programConfigurations)this.programConfigurations[i].upload(e);this.needsUpload=!1}}destroy(){for(let e in this.programConfigurations)this.programConfigurations[e].destroy()}}function Wf(r,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[r]||[r.replace(`${e}-`,"").replace(/-/g,"_")]}function Fd(r,e,i){let l={color:{source:Yl,composite:fh},number:{source:Jl,composite:Yl}},h=(function(g){return{"line-pattern":{source:ce,composite:ce},"fill-pattern":{source:ce,composite:ce},"fill-extrusion-pattern":{source:ce,composite:ce},"line-dasharray":{source:me,composite:me}}[g]})(r);return h&&h[i]||l[e][i]}at("ConstantBinder",Ba),at("CrossFadedConstantBinder",Ar),at("SourceExpressionBinder",Kr),at("CrossFadedPatternBinder",hr),at("CrossFadedDasharrayBinder",wr),at("CompositeExpressionBinder",Wr),at("ProgramConfiguration",Bn,{omit:["_buffers"]}),at("ProgramConfigurationSet",Ui);let mh=Math.pow(2,14)-1,jd=-mh-1;function Eo(r){let e=ei/r.extent,i=r.loadGeometry();for(let l=0;l<i.length;l++){let h=i[l];for(let g=0;g<h.length;g++){let y=h[g],x=Math.round(y.x*e),S=Math.round(y.y*e);y.x=Ft(x,jd,mh),y.y=Ft(S,jd,mh),(x<y.x||x>y.x+1||S<y.y||S>y.y+1)&&cr("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return i}function Ao(r,e){return{type:r.type,id:r.id,properties:r.properties,geometry:e?Eo(r):[]}}let Zs=-32768;function Nd(r,e,i,l,h){r.emplaceBack(Zs+8*e+l,Zs+8*i+h)}class $c{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((i=>i.id)),this.index=e.index,this.hasDependencies=!1,this.layoutVertexArray=new U,this.indexArray=new De,this.segments=new Xe,this.programConfigurations=new Ui(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter((i=>i.isStateDependent())).map((i=>i.id))}populate(e,i,l){let h=this.layers[0],g=[],y=null,x=!1,S=h.type==="heatmap";if(h.type==="circle"){let A=h;y=A.layout.get("circle-sort-key"),x=!y.isConstant(),S=S||A.paint.get("circle-pitch-alignment")==="map"}let P=S?i.subdivisionGranularity.circle:1;for(let{feature:A,id:O,index:R,sourceLayerIndex:F}of e){let V=this.layers[0]._featureFilter.needGeometry,W=Ao(A,V);if(!this.layers[0]._featureFilter.filter(new Ti(this.zoom),W,l))continue;let Z=x?y.evaluate(W,{},l):void 0,K={id:O,properties:A.properties,type:A.type,sourceLayerIndex:F,index:R,geometry:V?W.geometry:Eo(A),patterns:{},sortKey:Z};g.push(K)}x&&g.sort(((A,O)=>A.sortKey-O.sortKey));for(let A of g){let{geometry:O,index:R,sourceLayerIndex:F}=A,V=e[R].feature;this.addFeature(A,O,R,l,P),i.featureIndex.insert(V,O,R,F,this.index)}}update(e,i,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,i,this.stateDependentLayers,{imagePositions:l})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Fe),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,i,l,h,g=1){let y;switch(g){case 1:y=[0,7];break;case 3:y=[0,2,5,7];break;case 5:y=[0,1,3,4,6,7];break;case 7:y=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${g}; valid values are 1, 3, 5, 7.`)}let x=y.length;for(let S of i)for(let P of S){let A=P.x,O=P.y;if(A<0||A>=ei||O<0||O>=ei)continue;let R=this.segments.prepareSegment(x*x,this.layoutVertexArray,this.indexArray,e.sortKey),F=R.vertexLength;for(let V=0;V<x;V++)for(let W=0;W<x;W++)Nd(this.layoutVertexArray,A,O,y[W],y[V]);for(let V=0;V<x-1;V++)for(let W=0;W<x-1;W++){let Z=F+V*x+W,K=F+(V+1)*x+W;this.indexArray.emplaceBack(Z,K+1,Z+1),this.indexArray.emplaceBack(Z,K,K+1)}R.vertexLength+=x*x,R.primitiveLength+=(x-1)*(x-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,l,{imagePositions:{},canonical:h})}}function gh(r,e){for(let i=0;i<r.length;i++)if(Hc(e,r[i]))return!0;for(let i=0;i<e.length;i++)if(Hc(r,e[i]))return!0;return!!Gf(r,e)}function dl(r,e,i){return!!Hc(r,e)||!!Uf(e,r,i)}function yh(r,e){if(r.length===1)return S_(e,r[0]);for(let i=0;i<e.length;i++){let l=e[i];for(let h=0;h<l.length;h++)if(Hc(r,l[h]))return!0}for(let i=0;i<r.length;i++)if(S_(e,r[i]))return!0;for(let i=0;i<e.length;i++)if(Gf(r,e[i]))return!0;return!1}function _h(r,e,i){if(r.length>1){if(Gf(r,e))return!0;for(let l=0;l<e.length;l++)if(Uf(e[l],r,i))return!0}for(let l=0;l<r.length;l++)if(Uf(r[l],e,i))return!0;return!1}function Gf(r,e){if(r.length===0||e.length===0)return!1;for(let i=0;i<r.length-1;i++){let l=r[i],h=r[i+1];for(let g=0;g<e.length-1;g++)if(UP(l,h,e[g],e[g+1]))return!0}return!1}function UP(r,e,i,l){return an(r,i,l)!==an(e,i,l)&&an(r,e,i)!==an(r,e,l)}function Uf(r,e,i){let l=i*i;if(e.length===1)return r.distSqr(e[0])<l;for(let h=1;h<e.length;h++)if(w_(r,e[h-1],e[h])<l)return!0;return!1}function w_(r,e,i){let l=e.distSqr(i);if(l===0)return r.distSqr(e);let h=((r.x-e.x)*(i.x-e.x)+(r.y-e.y)*(i.y-e.y))/l;return r.distSqr(h<0?e:h>1?i:i.sub(e)._mult(h)._add(e))}function S_(r,e){let i,l,h,g=!1;for(let y=0;y<r.length;y++){i=r[y];for(let x=0,S=i.length-1;x<i.length;S=x++)l=i[x],h=i[S],l.y>e.y!=h.y>e.y&&e.x<(h.x-l.x)*(e.y-l.y)/(h.y-l.y)+l.x&&(g=!g)}return g}function Hc(r,e){let i=!1;for(let l=0,h=r.length-1;l<r.length;h=l++){let g=r[l],y=r[h];g.y>e.y!=y.y>e.y&&e.x<(y.x-g.x)*(e.y-g.y)/(y.y-g.y)+g.x&&(i=!i)}return i}function ZP(r,e,i){let l=i[0],h=i[2];if(r.x<l.x&&e.x<l.x||r.x>h.x&&e.x>h.x||r.y<l.y&&e.y<l.y||r.y>h.y&&e.y>h.y)return!1;let g=an(r,e,i[0]);return g!==an(r,e,i[1])||g!==an(r,e,i[2])||g!==an(r,e,i[3])}function Yc(r,e,i){let l=e.paint.get(r).value;return l.kind==="constant"?l.value:i.programConfigurations.get(e.id).getMaxValue(r)}function qd(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function Vd(r,e,i,l,h){if(!e[0]&&!e[1])return r;let g=T.convert(e)._mult(h);i==="viewport"&&g._rotate(-l);let y=[];for(let x=0;x<r.length;x++)y.push(r[x].sub(g));return y}function $P(r){let e=[];for(let i=0;i<r.length;i++){let l=r[i],h=e.at(-1);(i===0||h&&!l.equals(h))&&e.push(l)}return e}function HP({queryGeometry:r,size:e},i){return dl(r,i,e)}function YP({queryGeometry:r,size:e,transform:i,unwrappedTileID:l,getElevation:h},g){return dl(r,g,e*(i.projectTileCoordinates(g.x,g.y,l,h).signedDistanceFromCamera/i.cameraToCenterDistance))}function XP({queryGeometry:r,size:e,transform:i,unwrappedTileID:l,getElevation:h},g){let y=i.projectTileCoordinates(g.x,g.y,l,h).signedDistanceFromCamera,x=e*(i.cameraToCenterDistance/y);return dl(r,Zf(g,i,l,h),x)}function KP({queryGeometry:r,size:e,transform:i,unwrappedTileID:l,getElevation:h},g){return dl(r,Zf(g,i,l,h),e)}function T_({queryGeometry:r,size:e,transform:i,unwrappedTileID:l,getElevation:h,pitchAlignment:g="map",pitchScale:y="map"},x){let S=g==="map"?y==="map"?HP:YP:y==="map"?XP:KP,P={queryGeometry:r,size:e,transform:i,unwrappedTileID:l,getElevation:h};for(let A of x)for(let O of A)if(S(P,O))return!0;return!1}function Zf(r,e,i,l){let h=e.projectTileCoordinates(r.x,r.y,i,l).point;return new T((.5*h.x+.5)*e.width,(.5*-h.y+.5)*e.height)}let C_,k_;at("CircleBucket",$c,{omit:["layers"]});var JP={get paint(){return k_=k_||new pn({"circle-radius":new wt(ze.paint_circle["circle-radius"]),"circle-color":new wt(ze.paint_circle["circle-color"]),"circle-blur":new wt(ze.paint_circle["circle-blur"]),"circle-opacity":new wt(ze.paint_circle["circle-opacity"]),"circle-translate":new gt(ze.paint_circle["circle-translate"]),"circle-translate-anchor":new gt(ze.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new gt(ze.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new gt(ze.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new wt(ze.paint_circle["circle-stroke-width"]),"circle-stroke-color":new wt(ze.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new wt(ze.paint_circle["circle-stroke-opacity"])})},get layout(){return C_=C_||new pn({"circle-sort-key":new wt(ze.layout_circle["circle-sort-key"])})}};class QP extends Rn{constructor(e,i){super(e,JP,i)}createBucket(e){return new $c(e)}queryRadius(e){let i=e;return Yc("circle-radius",this,i)+Yc("circle-stroke-width",this,i)+qd(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:e,feature:i,featureState:l,geometry:h,transform:g,pixelsToTileUnits:y,unwrappedTileID:x,getElevation:S}){let P=Vd(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-g.bearingInRadians,y),A=this.paint.get("circle-radius").evaluate(i,l)+this.paint.get("circle-stroke-width").evaluate(i,l),O=this.paint.get("circle-pitch-scale"),R=this.paint.get("circle-pitch-alignment"),F,V;return R==="map"?(F=P,V=A*y):(F=(function(W,Z,K,ue){return W.map((ee=>Zf(ee,Z,K,ue)))})(P,g,x,S),V=A),T_({queryGeometry:F,size:V,transform:g,unwrappedTileID:x,getElevation:S,pitchAlignment:R,pitchScale:O},h)}}class P_ extends $c{}let E_;at("HeatmapBucket",P_,{omit:["layers"]});var eE={get paint(){return E_=E_||new pn({"heatmap-radius":new wt(ze.paint_heatmap["heatmap-radius"]),"heatmap-weight":new wt(ze.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new gt(ze.paint_heatmap["heatmap-intensity"]),"heatmap-color":new So(ze.paint_heatmap["heatmap-color"]),"heatmap-opacity":new gt(ze.paint_heatmap["heatmap-opacity"])})}};function $f(r,{width:e,height:i},l,h){if(h){if(h instanceof Uint8ClampedArray)h=new Uint8Array(h.buffer);else if(h.length!==e*i*l)throw new RangeError(`mismatched image size. expected: ${h.length} but got: ${e*i*l}`)}else h=new Uint8Array(e*i*l);return r.width=e,r.height=i,r.data=h,r}function A_(r,{width:e,height:i},l){if(e===r.width&&i===r.height)return;let h=$f({},{width:e,height:i},l);Hf(r,h,{x:0,y:0},{x:0,y:0},{width:Math.min(r.width,e),height:Math.min(r.height,i)},l),r.width=e,r.height=i,r.data=h.data}function Hf(r,e,i,l,h,g){if(h.width===0||h.height===0)return e;if(h.width>r.width||h.height>r.height||i.x>r.width-h.width||i.y>r.height-h.height)throw new RangeError("out of range source coordinates for image copy");if(h.width>e.width||h.height>e.height||l.x>e.width-h.width||l.y>e.height-h.height)throw new RangeError("out of range destination coordinates for image copy");let y=r.data,x=e.data;if(y===x)throw new Error("srcData equals dstData, so image is already copied");for(let S=0;S<h.height;S++){let P=((i.y+S)*r.width+i.x)*g,A=((l.y+S)*e.width+l.x)*g;for(let O=0;O<h.width*g;O++)x[A+O]=y[P+O]}return e}class vh{constructor(e,i){$f(this,e,1,i)}resize(e){A_(this,e,1)}clone(){return new vh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,i,l,h,g){Hf(e,i,l,h,g,1)}}class Fn{constructor(e,i){$f(this,e,4,i)}resize(e){A_(this,e,4)}replace(e,i){i?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new Fn({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,i,l,h,g){Hf(e,i,l,h,g,4)}setPixel(e,i,l){let h=4*(e*this.width+i);this.data[h+0]=Math.round(255*l.r/l.a),this.data[h+1]=Math.round(255*l.g/l.a),this.data[h+2]=Math.round(255*l.b/l.a),this.data[h+3]=Math.round(255*l.a)}}function M_(r){let e={},i=r.resolution||256,l=r.clips?r.clips.length:1,h=r.image||new Fn({width:i,height:l});if(Math.log(i)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${i}`);let g=(y,x,S)=>{e[r.evaluationKey]=S;let P=r.expression.evaluate(e);h.setPixel(y/4/i,x/4,P)};if(r.clips)for(let y=0,x=0;y<l;++y,x+=4*i)for(let S=0,P=0;S<i;S++,P+=4){let A=S/(i-1),{start:O,end:R}=r.clips[y];g(x,P,O*(1-A)+R*A)}else for(let y=0,x=0;y<i;y++,x+=4)g(0,x,y/(i-1));return h}at("AlphaImage",vh),at("RGBAImage",Fn);let Yf="big-fb";class tE extends Rn{createBucket(e){return new P_(e)}constructor(e,i){super(e,eE,i),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){e==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=M_({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Yf)&&this.heatmapFbos.delete(Yf)}queryRadius(e){return Yc("heatmap-radius",this,e)}queryIntersectsFeature({queryGeometry:e,feature:i,featureState:l,geometry:h,transform:g,pixelsToTileUnits:y,unwrappedTileID:x,getElevation:S}){return T_({queryGeometry:e,size:this.paint.get("heatmap-radius").evaluate(i,l)*y,transform:g,unwrappedTileID:x,getElevation:S},h)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let I_;var iE={get paint(){return I_=I_||new pn({"hillshade-illumination-direction":new gt(ze.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new gt(ze.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new gt(ze.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new gt(ze.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new gt(ze.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new gt(ze.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new gt(ze.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new gt(ze.paint_hillshade["hillshade-method"])})}};class rE extends Rn{constructor(e,i){super(e,iE,i),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let e=this.paint.get("hillshade-illumination-direction").values,i=this.paint.get("hillshade-illumination-altitude").values,l=this.paint.get("hillshade-highlight-color").values,h=this.paint.get("hillshade-shadow-color").values,g=Math.max(e.length,i.length,l.length,h.length);e=e.concat(Array(g-e.length).fill(e.at(-1))),i=i.concat(Array(g-i.length).fill(i.at(-1))),l=l.concat(Array(g-l.length).fill(l.at(-1))),h=h.concat(Array(g-h.length).fill(h.at(-1)));let y=i.map(bs);return{directionRadians:e.map(bs),altitudeRadians:y,shadowColor:h,highlightColor:l}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let z_;var nE={get paint(){return z_=z_||new pn({"color-relief-opacity":new gt(ze["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new So(ze["paint_color-relief"]["color-relief-color"])})}};class Xf{constructor(e,i,l,h){this.context=e,this.format=l,this.texture=e.gl.createTexture(),this.update(i,h)}update(e,i,l){let{width:h,height:g}=e,y=!(this.size&&this.size[0]===h&&this.size[1]===g||l),{context:x}=this,{gl:S}=x;if(this.useMipmap=!!(i&&i.useMipmap),S.bindTexture(S.TEXTURE_2D,this.texture),x.pixelStoreUnpackFlipY.set(!1),x.pixelStoreUnpack.set(1),x.pixelStoreUnpackPremultiplyAlpha.set(this.format===S.RGBA&&(!i||i.premultiply!==!1)),y)this.size=[h,g],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||En(e)?S.texImage2D(S.TEXTURE_2D,0,this.format,this.format,S.UNSIGNED_BYTE,e):S.texImage2D(S.TEXTURE_2D,0,this.format,h,g,0,this.format,S.UNSIGNED_BYTE,e.data);else{let{x:P,y:A}=l||{x:0,y:0};e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||En(e)?S.texSubImage2D(S.TEXTURE_2D,0,P,A,S.RGBA,S.UNSIGNED_BYTE,e):S.texSubImage2D(S.TEXTURE_2D,0,P,A,h,g,S.RGBA,S.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&S.generateMipmap(S.TEXTURE_2D),x.pixelStoreUnpackFlipY.setDefault(),x.pixelStoreUnpack.setDefault(),x.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(e,i,l){let{context:h}=this,{gl:g}=h;g.bindTexture(g.TEXTURE_2D,this.texture),l!==g.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(l=g.LINEAR),e!==this.filter&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,e),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,l||e),this.filter=e),i!==this.wrap&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,i),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,i),this.wrap=i)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){let{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class L_{constructor(e,i,l,h=1,g=1,y=1,x=0){if(this.uid=e,i.height!==i.width)throw new RangeError("DEM tiles must be square");if(l&&!["mapbox","terrarium","custom"].includes(l))return void cr(`"${l}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=i.height;let S=this.dim=i.height-2;switch(this.data=new Uint32Array(i.data.buffer),l){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=h,this.greenFactor=g,this.blueFactor=y,this.baseShift=x;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let P=0;P<S;P++)this.data[this._idx(-1,P)]=this.data[this._idx(0,P)],this.data[this._idx(S,P)]=this.data[this._idx(S-1,P)],this.data[this._idx(P,-1)]=this.data[this._idx(P,0)],this.data[this._idx(P,S)]=this.data[this._idx(P,S-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(S,-1)]=this.data[this._idx(S-1,0)],this.data[this._idx(-1,S)]=this.data[this._idx(0,S-1)],this.data[this._idx(S,S)]=this.data[this._idx(S-1,S-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let P=0;P<S;P++)for(let A=0;A<S;A++){let O=this.get(P,A);O>this.max&&(this.max=O),O<this.min&&(this.min=O)}}get(e,i){let l=new Uint8Array(this.data.buffer),h=4*this._idx(e,i);return this.unpack(l[h],l[h+1],l[h+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(e,i){if(e<-1||e>=this.dim+1||i<-1||i>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(i+1)*this.stride+(e+1)}unpack(e,i,l){return e*this.redFactor+i*this.greenFactor+l*this.blueFactor-this.baseShift}pack(e){return O_(e,this.getUnpackVector())}getPixels(){return new Fn({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(e,i,l){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let h=i*this.dim,g=i*this.dim+this.dim,y=l*this.dim,x=l*this.dim+this.dim;switch(i){case-1:h=g-1;break;case 1:g=h+1}switch(l){case-1:y=x-1;break;case 1:x=y+1}let S=-i*this.dim,P=-l*this.dim;for(let A=y;A<x;A++)for(let O=h;O<g;O++)this.data[this._idx(O,A)]=e.data[this._idx(O+S,A+P)]}}function O_(r,e){let i=e[0],l=e[1],h=e[2],g=e[3],y=Math.min(i,l,h),x=Math.round((r+g)/y);return{r:Math.floor(x*y/i)%256,g:Math.floor(x*y/l)%256,b:Math.floor(x*y/h)%256}}at("DEMData",L_);class aE extends Rn{constructor(e,i){super(e,nE,i)}_createColorRamp(e){let i={elevationStops:[],colorStops:[]},l=this._transitionablePaint._values["color-relief-color"].value.expression;if(l instanceof v&&l._styleExpression.expression instanceof Wi){this.colorRampExpression=l;let y=l._styleExpression.expression;i.elevationStops=y.labels,i.colorStops=[];for(let x of i.elevationStops)i.colorStops.push(y.evaluate({globals:{elevation:x}}))}if(i.elevationStops.length<1&&(i.elevationStops=[0],i.colorStops=[Rt.transparent]),i.elevationStops.length<2&&(i.elevationStops.push(i.elevationStops[0]+1),i.colorStops.push(i.colorStops[0])),i.elevationStops.length<=e)return i;let h={elevationStops:[],colorStops:[]},g=(i.elevationStops.length-1)/(e-1);for(let y=0;y<i.elevationStops.length-.5;y+=g)h.elevationStops.push(i.elevationStops[Math.round(y)]),h.colorStops.push(i.colorStops[Math.round(y)]);return cr(`Too many colors in specification of ${this.id} color-relief layer, may not render properly. Max possible colors: ${e}, provided: ${i.elevationStops.length}`),h}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(e,i,l){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;let h=this._createColorRamp(i),g=new Fn({width:h.colorStops.length,height:1}),y=new Fn({width:h.colorStops.length,height:1});for(let x=0;x<h.elevationStops.length;x++){let S=O_(h.elevationStops[x],l);y.setPixel(0,x,new Rt(S.r/255,S.g/255,S.b/255,1)),g.setPixel(0,x,h.colorStops[x])}return this.colorRampTextures={elevationTexture:new Xf(e,y,e.gl.RGBA),colorTexture:new Xf(e,g,e.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}let sE=rr([{name:"a_pos",components:2,type:"Int16"}],4),{members:oE}=sE;function Wd(r,e,i){let l=i.patternDependencies,h=!1;for(let g of e){let y=g.paint.get(`${r}-pattern`);y.isConstant()||(h=!0);let x=y.constantOr(null);x&&(h=!0,l[x.to]=!0,l[x.from]=!0)}return h}function Kf(r,e,i,l,h){let{zoom:g}=l,y=h.patternDependencies;for(let x of e){let S=x.paint.get(`${r}-pattern`).value;if(S.kind!=="constant"){let P=S.evaluate({zoom:g-1},i,{},h.availableImages),A=S.evaluate({zoom:g},i,{},h.availableImages),O=S.evaluate({zoom:g+1},i,{},h.availableImages);P=P&&P.name?P.name:P,A=A&&A.name?A.name:A,O=O&&O.name?O.name:O,y[P]=!0,y[A]=!0,y[O]=!0,i.patterns[x.id]={min:P,mid:A,max:O}}}return i}function D_(r,e,i,l,h){let g;if(h===(function(y,x,S,P){let A=0;for(let O=x,R=S-P;O<S;O+=P)A+=(y[R]-y[O])*(y[O+1]+y[R+1]),R=O;return A})(r,e,i,l)>0)for(let y=e;y<i;y+=l)g=j_(y/l|0,r[y],r[y+1],g);else for(let y=i-l;y>=e;y-=l)g=j_(y/l|0,r[y],r[y+1],g);return g&&Xc(g,g.next)&&(Sh(g),g=g.next),g}function Ql(r,e){if(!r)return r;e||(e=r);let i,l=r;do if(i=!1,l.steiner||!Xc(l,l.next)&&lr(l.prev,l,l.next)!==0)l=l.next;else{if(Sh(l),l=e=l.prev,l===l.next)break;i=!0}while(i||l!==e);return e}function bh(r,e,i,l,h,g,y){if(!r)return;!y&&g&&(function(S,P,A,O){let R=S;do R.z===0&&(R.z=Jf(R.x,R.y,P,A,O)),R.prevZ=R.prev,R.nextZ=R.next,R=R.next;while(R!==S);R.prevZ.nextZ=null,R.prevZ=null,(function(F){let V,W=1;do{let Z,K=F;F=null;let ue=null;for(V=0;K;){V++;let ee=K,ne=0;for(let fe=0;fe<W&&(ne++,ee=ee.nextZ,ee);fe++);let de=W;for(;ne>0||de>0&&ee;)ne!==0&&(de===0||!ee||K.z<=ee.z)?(Z=K,K=K.nextZ,ne--):(Z=ee,ee=ee.nextZ,de--),ue?ue.nextZ=Z:F=Z,Z.prevZ=ue,ue=Z;K=ee}ue.nextZ=null,W*=2}while(V>1)})(R)})(r,l,h,g);let x=r;for(;r.prev!==r.next;){let S=r.prev,P=r.next;if(g?cE(r,l,h,g):lE(r))e.push(S.i,r.i,P.i),Sh(r),r=P.next,x=P.next;else if((r=P)===x){y?y===1?bh(r=uE(Ql(r),e),e,i,l,h,g,2):y===2&&hE(r,e,i,l,h,g):bh(Ql(r),e,i,l,h,g,1);break}}}function lE(r){let e=r.prev,i=r,l=r.next;if(lr(e,i,l)>=0)return!1;let h=e.x,g=i.x,y=l.x,x=e.y,S=i.y,P=l.y,A=Math.min(h,g,y),O=Math.min(x,S,P),R=Math.max(h,g,y),F=Math.max(x,S,P),V=l.next;for(;V!==e;){if(V.x>=A&&V.x<=R&&V.y>=O&&V.y<=F&&xh(h,x,g,S,y,P,V.x,V.y)&&lr(V.prev,V,V.next)>=0)return!1;V=V.next}return!0}function cE(r,e,i,l){let h=r.prev,g=r,y=r.next;if(lr(h,g,y)>=0)return!1;let x=h.x,S=g.x,P=y.x,A=h.y,O=g.y,R=y.y,F=Math.min(x,S,P),V=Math.min(A,O,R),W=Math.max(x,S,P),Z=Math.max(A,O,R),K=Jf(F,V,e,i,l),ue=Jf(W,Z,e,i,l),ee=r.prevZ,ne=r.nextZ;for(;ee&&ee.z>=K&&ne&&ne.z<=ue;){if(ee.x>=F&&ee.x<=W&&ee.y>=V&&ee.y<=Z&&ee!==h&&ee!==y&&xh(x,A,S,O,P,R,ee.x,ee.y)&&lr(ee.prev,ee,ee.next)>=0||(ee=ee.prevZ,ne.x>=F&&ne.x<=W&&ne.y>=V&&ne.y<=Z&&ne!==h&&ne!==y&&xh(x,A,S,O,P,R,ne.x,ne.y)&&lr(ne.prev,ne,ne.next)>=0))return!1;ne=ne.nextZ}for(;ee&&ee.z>=K;){if(ee.x>=F&&ee.x<=W&&ee.y>=V&&ee.y<=Z&&ee!==h&&ee!==y&&xh(x,A,S,O,P,R,ee.x,ee.y)&&lr(ee.prev,ee,ee.next)>=0)return!1;ee=ee.prevZ}for(;ne&&ne.z<=ue;){if(ne.x>=F&&ne.x<=W&&ne.y>=V&&ne.y<=Z&&ne!==h&&ne!==y&&xh(x,A,S,O,P,R,ne.x,ne.y)&&lr(ne.prev,ne,ne.next)>=0)return!1;ne=ne.nextZ}return!0}function uE(r,e){let i=r;do{let l=i.prev,h=i.next.next;!Xc(l,h)&&B_(l,i,i.next,h)&&wh(l,h)&&wh(h,l)&&(e.push(l.i,i.i,h.i),Sh(i),Sh(i.next),i=r=h),i=i.next}while(i!==r);return Ql(i)}function hE(r,e,i,l,h,g){let y=r;do{let x=y.next.next;for(;x!==y.prev;){if(y.i!==x.i&&gE(y,x)){let S=F_(y,x);return y=Ql(y,y.next),S=Ql(S,S.next),bh(y,e,i,l,h,g,0),void bh(S,e,i,l,h,g,0)}x=x.next}y=y.next}while(y!==r)}function dE(r,e){let i=r.x-e.x;return i===0&&(i=r.y-e.y,i===0)&&(i=(r.next.y-r.y)/(r.next.x-r.x)-(e.next.y-e.y)/(e.next.x-e.x)),i}function pE(r,e){let i=(function(h,g){let y=g,x=h.x,S=h.y,P,A=-1/0;if(Xc(h,y))return y;do{if(Xc(h,y.next))return y.next;if(S<=y.y&&S>=y.next.y&&y.next.y!==y.y){let W=y.x+(S-y.y)*(y.next.x-y.x)/(y.next.y-y.y);if(W<=x&&W>A&&(A=W,P=y.x<y.next.x?y:y.next,W===x))return P}y=y.next}while(y!==g);if(!P)return null;let O=P,R=P.x,F=P.y,V=1/0;y=P;do{if(x>=y.x&&y.x>=R&&x!==y.x&&R_(S<F?x:A,S,R,F,S<F?A:x,S,y.x,y.y)){let W=Math.abs(S-y.y)/(x-y.x);wh(y,h)&&(W<V||W===V&&(y.x>P.x||y.x===P.x&&fE(P,y)))&&(P=y,V=W)}y=y.next}while(y!==O);return P})(r,e);if(!i)return e;let l=F_(i,r);return Ql(l,l.next),Ql(i,i.next)}function fE(r,e){return lr(r.prev,r,e.prev)<0&&lr(e.next,r,r.next)<0}function Jf(r,e,i,l,h){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-i)*h|0)|r<<8))|r<<4))|r<<2))|r<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-l)*h|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function mE(r){let e=r,i=r;do(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next;while(e!==r);return i}function R_(r,e,i,l,h,g,y,x){return(h-y)*(e-x)>=(r-y)*(g-x)&&(r-y)*(l-x)>=(i-y)*(e-x)&&(i-y)*(g-x)>=(h-y)*(l-x)}function xh(r,e,i,l,h,g,y,x){return!(r===y&&e===x)&&R_(r,e,i,l,h,g,y,x)}function gE(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!(function(i,l){let h=i;do{if(h.i!==i.i&&h.next.i!==i.i&&h.i!==l.i&&h.next.i!==l.i&&B_(h,h.next,i,l))return!0;h=h.next}while(h!==i);return!1})(r,e)&&(wh(r,e)&&wh(e,r)&&(function(i,l){let h=i,g=!1,y=(i.x+l.x)/2,x=(i.y+l.y)/2;do h.y>x!=h.next.y>x&&h.next.y!==h.y&&y<(h.next.x-h.x)*(x-h.y)/(h.next.y-h.y)+h.x&&(g=!g),h=h.next;while(h!==i);return g})(r,e)&&(lr(r.prev,r,e.prev)||lr(r,e.prev,e))||Xc(r,e)&&lr(r.prev,r,r.next)>0&&lr(e.prev,e,e.next)>0)}function lr(r,e,i){return(e.y-r.y)*(i.x-e.x)-(e.x-r.x)*(i.y-e.y)}function Xc(r,e){return r.x===e.x&&r.y===e.y}function B_(r,e,i,l){let h=Ud(lr(r,e,i)),g=Ud(lr(r,e,l)),y=Ud(lr(i,l,r)),x=Ud(lr(i,l,e));return h!==g&&y!==x||!(h!==0||!Gd(r,i,e))||!(g!==0||!Gd(r,l,e))||!(y!==0||!Gd(i,r,l))||!(x!==0||!Gd(i,e,l))}function Gd(r,e,i){return e.x<=Math.max(r.x,i.x)&&e.x>=Math.min(r.x,i.x)&&e.y<=Math.max(r.y,i.y)&&e.y>=Math.min(r.y,i.y)}function Ud(r){return r>0?1:r<0?-1:0}function wh(r,e){return lr(r.prev,r,r.next)<0?lr(r,e,r.next)>=0&&lr(r,r.prev,e)>=0:lr(r,e,r.prev)<0||lr(r,r.next,e)<0}function F_(r,e){let i=Qf(r.i,r.x,r.y),l=Qf(e.i,e.x,e.y),h=r.next,g=e.prev;return r.next=e,e.prev=r,i.next=h,h.prev=i,l.next=i,i.prev=l,g.next=l,l.prev=g,l}function j_(r,e,i,l){let h=Qf(r,e,i);return l?(h.next=l.next,h.prev=l,l.next.prev=h,l.next=h):(h.prev=h,h.next=h),h}function Sh(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function Qf(r,e,i){return{i:r,x:e,y:i,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Kc{constructor(e,i){if(i>e)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=e,this._minGranularity=i}getGranularityForZoomLevel(e){return Math.max(Math.floor(this._baseZoomGranularity/(1<<e)),this._minGranularity,1)}}class Zd{constructor(e){this.fill=e.fill,this.line=e.line,this.tile=e.tile,this.stencil=e.stencil,this.circle=e.circle}}Zd.noSubdivision=new Zd({fill:new Kc(0,0),line:new Kc(0,0),tile:new Kc(0,0),stencil:new Kc(0,0),circle:1}),at("SubdivisionGranularityExpression",Kc),at("SubdivisionGranularitySetting",Zd);let Jc=-32768,Th=32767;class yE{constructor(e,i){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=e,this._granularityCellSize=ei/e,this._canonical=i}_getKey(e,i){return(e+=32768)<<16|i+32768}_vertexToIndex(e,i){if(e<-32768||i<-32768||e>32767||i>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");let l=0|Math.round(e),h=0|Math.round(i),g=this._getKey(l,h);if(this._vertexDictionary.has(g))return this._vertexDictionary.get(g);let y=this._vertexBuffer.length/2;return this._vertexDictionary.set(g,y),this._vertexBuffer.push(l,h),y}_subdivideTrianglesScanline(e){if(this._granularity<2)return(function(h,g){let y=[];for(let x=0;x<g.length;x+=3){let S=g[x],P=g[x+1],A=g[x+2],O=h[2*S],R=h[2*S+1];(h[2*P]-O)*(h[2*A+1]-R)-(h[2*P+1]-R)*(h[2*A]-O)>0?(y.push(S),y.push(A),y.push(P)):(y.push(S),y.push(P),y.push(A))}return y})(this._vertexBuffer,e);let i=[],l=e.length;for(let h=0;h<l;h+=3){let g=[e[h+0],e[h+1],e[h+2]],y=[this._vertexBuffer[2*e[h+0]+0],this._vertexBuffer[2*e[h+0]+1],this._vertexBuffer[2*e[h+1]+0],this._vertexBuffer[2*e[h+1]+1],this._vertexBuffer[2*e[h+2]+0],this._vertexBuffer[2*e[h+2]+1]],x=1/0,S=1/0,P=-1/0,A=-1/0;for(let W=0;W<3;W++){let Z=y[2*W],K=y[2*W+1];x=Math.min(x,Z),P=Math.max(P,Z),S=Math.min(S,K),A=Math.max(A,K)}if(x===P||S===A)continue;let O=Math.floor(x/this._granularityCellSize),R=Math.ceil(P/this._granularityCellSize),F=Math.floor(S/this._granularityCellSize),V=Math.ceil(A/this._granularityCellSize);if(O!==R||F!==V)for(let W=F;W<V;W++){let Z=this._scanlineGenerateVertexRingForCellRow(W,y,g);_E(this._vertexBuffer,Z,i)}else i.push(...g)}return i}_scanlineGenerateVertexRingForCellRow(e,i,l){let h=e*this._granularityCellSize,g=h+this._granularityCellSize,y=[];for(let x=0;x<3;x++){let S=i[2*x],P=i[2*x+1],A=i[2*(x+1)%6],O=i[(2*(x+1)+1)%6],R=i[2*(x+2)%6],F=i[(2*(x+2)+1)%6],V=A-S,W=O-P,Z=V===0,K=W===0,ue=(h-P)/W,ee=(g-P)/W,ne=Math.min(ue,ee),de=Math.max(ue,ee);if(!K&&(ne>=1||de<=0)||K&&(P<h||P>g)){O>=h&&O<=g&&y.push(l[(x+1)%3]);continue}!K&&ne>0&&y.push(this._vertexToIndex(S+V*ne,P+W*ne));let fe=S+V*Math.max(ne,0),Pe=S+V*Math.min(de,1);Z||this._generateIntraEdgeVertices(y,S,P,A,O,fe,Pe),!K&&de<1&&y.push(this._vertexToIndex(S+V*de,P+W*de)),(K||O>=h&&O<=g)&&y.push(l[(x+1)%3]),!K&&(O<=h||O>=g)&&this._generateInterEdgeVertices(y,S,P,A,O,R,F,Pe,h,g)}return y}_generateIntraEdgeVertices(e,i,l,h,g,y,x){let S=h-i,P=g-l,A=P===0,O=A?Math.min(i,h):Math.min(y,x),R=A?Math.max(i,h):Math.max(y,x),F=Math.floor(O/this._granularityCellSize)+1,V=Math.ceil(R/this._granularityCellSize)-1;if(A?i<h:y<x)for(let W=F;W<=V;W++){let Z=W*this._granularityCellSize;e.push(this._vertexToIndex(Z,l+P*(Z-i)/S))}else for(let W=V;W>=F;W--){let Z=W*this._granularityCellSize;e.push(this._vertexToIndex(Z,l+P*(Z-i)/S))}}_generateInterEdgeVertices(e,i,l,h,g,y,x,S,P,A){let O=g-l,R=y-h,F=x-g,V=(P-g)/F,W=(A-g)/F,Z=Math.min(V,W),K=Math.max(V,W),ue=h+R*Z,ee=Math.floor(Math.min(ue,S)/this._granularityCellSize)+1,ne=Math.ceil(Math.max(ue,S)/this._granularityCellSize)-1,de=S<ue,fe=F===0;if(fe&&(x===P||x===A))return;if(fe||Z>=1||K<=0){let Ge=l-x,Ne=y+(i-y)*Math.min((P-x)/Ge,(A-x)/Ge);ee=Math.floor(Math.min(Ne,S)/this._granularityCellSize)+1,ne=Math.ceil(Math.max(Ne,S)/this._granularityCellSize)-1,de=S<Ne}let Pe=O>0?A:P;if(de)for(let Ge=ee;Ge<=ne;Ge++)e.push(this._vertexToIndex(Ge*this._granularityCellSize,Pe));else for(let Ge=ne;Ge>=ee;Ge--)e.push(this._vertexToIndex(Ge*this._granularityCellSize,Pe))}_generateOutline(e){let i=[];for(let l of e){let h=ec(l,this._granularity,!0),g=this._pointArrayToIndices(h),y=[];for(let x=1;x<g.length;x++)y.push(g[x-1]),y.push(g[x]);i.push(y)}return i}_handlePoles(e){let i=!1,l=!1;this._canonical&&(this._canonical.y===0&&(i=!0),this._canonical.y===(1<<this._canonical.z)-1&&(l=!0)),(i||l)&&this._fillPoles(e,i,l)}_ensureNoPoleVertices(){let e=this._vertexBuffer;for(let i=0;i<e.length;i+=2){let l=e[i+1];l===Jc&&(e[i+1]=-32767),l===Th&&(e[i+1]=32766)}}_generatePoleQuad(e,i,l,h,g,y){h>g!=(y===Jc)?(e.push(i),e.push(l),e.push(this._vertexToIndex(h,y)),e.push(l),e.push(this._vertexToIndex(g,y)),e.push(this._vertexToIndex(h,y))):(e.push(l),e.push(i),e.push(this._vertexToIndex(h,y)),e.push(this._vertexToIndex(g,y)),e.push(l),e.push(this._vertexToIndex(h,y)))}_fillPoles(e,i,l){let h=this._vertexBuffer,g=ei,y=e.length;for(let x=2;x<y;x+=3){let S=e[x-2],P=e[x-1],A=e[x],O=h[2*S],R=h[2*S+1],F=h[2*P],V=h[2*P+1],W=h[2*A],Z=h[2*A+1];i&&(R===0&&V===0&&this._generatePoleQuad(e,S,P,O,F,Jc),V===0&&Z===0&&this._generatePoleQuad(e,P,A,F,W,Jc),Z===0&&R===0&&this._generatePoleQuad(e,A,S,W,O,Jc)),l&&(R===g&&V===g&&this._generatePoleQuad(e,S,P,O,F,Th),V===g&&Z===g&&this._generatePoleQuad(e,P,A,F,W,Th),Z===g&&R===g&&this._generatePoleQuad(e,A,S,W,O,Th))}}_initializeVertices(e){for(let i=0;i<e.length;i+=2)this._vertexToIndex(e[i],e[i+1])}subdividePolygonInternal(e,i){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;let{flattened:l,holeIndices:h}=(function(x){let S=[],P=[];for(let A of x)if(A.length!==0){A!==x[0]&&S.push(P.length/2);for(let O=0;O<A.length;O++)P.push(A[O].x),P.push(A[O].y)}return{flattened:P,holeIndices:S}})(e),g;this._initializeVertices(l);try{let x=(function(P,A,O=2){let R=A&&A.length,F=R?A[0]*O:P.length,V=D_(P,0,F,O,!0),W=[];if(!V||V.next===V.prev)return W;let Z,K,ue;if(R&&(V=(function(ee,ne,de,fe){let Pe=[];for(let Ge=0,Ne=ne.length;Ge<Ne;Ge++){let $e=D_(ee,ne[Ge]*fe,Ge<Ne-1?ne[Ge+1]*fe:ee.length,fe,!1);$e===$e.next&&($e.steiner=!0),Pe.push(mE($e))}Pe.sort(dE);for(let Ge=0;Ge<Pe.length;Ge++)de=pE(Pe[Ge],de);return de})(P,A,V,O)),P.length>80*O){Z=P[0],K=P[1];let ee=Z,ne=K;for(let de=O;de<F;de+=O){let fe=P[de],Pe=P[de+1];fe<Z&&(Z=fe),Pe<K&&(K=Pe),fe>ee&&(ee=fe),Pe>ne&&(ne=Pe)}ue=Math.max(ee-Z,ne-K),ue=ue!==0?32767/ue:0}return bh(V,W,O,Z,K,ue,0),W})(l,h),S=this._convertIndices(l,x);g=this._subdivideTrianglesScanline(S)}catch(x){console.error(x)}let y=[];return i&&(y=this._generateOutline(e)),this._ensureNoPoleVertices(),this._handlePoles(g),{verticesFlattened:this._vertexBuffer,indicesTriangles:g,indicesLineList:y}}_convertIndices(e,i){let l=[];for(let h=0;h<i.length;h++)l.push(this._vertexToIndex(e[2*i[h]],e[2*i[h]+1]));return l}_pointArrayToIndices(e){let i=[];for(let l=0;l<e.length;l++){let h=e[l];i.push(this._vertexToIndex(h.x,h.y))}return i}}function N_(r,e,i,l=!0){return new yE(i,e).subdividePolygonInternal(r,l)}function ec(r,e,i=!1){if(!r||r.length<1)return[];if(r.length<2)return[];let l=r[0],h=r[r.length-1],g=i&&(l.x!==h.x||l.y!==h.y);if(e<2)return g?[...r,r[0]]:[...r];let y=Math.floor(ei/e),x=[];x.push(new T(r[0].x,r[0].y));let S=r.length,P=g?S:S-1;for(let A=0;A<P;A++){let O=r[A],R=A<S-1?r[A+1]:r[0],F=O.x,V=O.y,W=R.x,Z=R.y,K=F!==W,ue=V!==Z;if(!K&&!ue)continue;let ee=W-F,ne=Z-V,de=Math.abs(ee),fe=Math.abs(ne),Pe=F,Ge=V;for(;;){let $e=ee>0?(Math.floor(Pe/y)+1)*y:(Math.ceil(Pe/y)-1)*y,tt=ne>0?(Math.floor(Ge/y)+1)*y:(Math.ceil(Ge/y)-1)*y,Ye=Math.abs(Pe-$e),Ve=Math.abs(Ge-tt),Be=Math.abs(Pe-W),lt=Math.abs(Ge-Z),nt=K?Ye/de:Number.POSITIVE_INFINITY,ut=ue?Ve/fe:Number.POSITIVE_INFINITY;if((Be<=Ye||!K)&&(lt<=Ve||!ue))break;if(nt<ut&&K||!ue){Pe=$e,Ge+=ne*nt;let rt=new T(Pe,Math.round(Ge));x[x.length-1].x===rt.x&&x[x.length-1].y===rt.y||x.push(rt)}else{Pe+=ee*ut,Ge=tt;let rt=new T(Math.round(Pe),Ge);x[x.length-1].x===rt.x&&x[x.length-1].y===rt.y||x.push(rt)}}let Ne=new T(W,Z);x[x.length-1].x===Ne.x&&x[x.length-1].y===Ne.y||x.push(Ne)}return x}function _E(r,e,i){if(e.length===0)throw new Error("Subdivision vertex ring is empty.");let l=0,h=r[2*e[0]];for(let S=1;S<e.length;S++){let P=r[2*e[S]];P<h&&(h=P,l=S)}let g=e.length,y=l,x=(y+1)%g;for(;;){let S=y-1>=0?y-1:g-1,P=(x+1)%g,A=r[2*e[S]],O=r[2*e[P]],R=r[2*e[y]],F=r[2*e[y]+1],V=r[2*e[x]+1],W=!1;if(A<O)W=!0;else if(A>O)W=!1;else{let Z=V-F,K=-(r[2*e[x]]-R),ue=F<V?1:-1;((A-R)*Z+(r[2*e[S]+1]-F)*K)*ue>((O-R)*Z+(r[2*e[P]+1]-F)*K)*ue&&(W=!0)}if(W){let Z=e[S],K=e[y],ue=e[x];Z!==K&&Z!==ue&&K!==ue&&i.push(ue,K,Z),y--,y<0&&(y=g-1)}else{let Z=e[P],K=e[y],ue=e[x];Z!==K&&Z!==ue&&K!==ue&&i.push(ue,K,Z),x++,x>=g&&(x=0)}if(S===P)break}}function q_(r,e,i,l,h,g,y,x,S){let P=h.length/2,A=y&&x&&S;if(P<Xe.MAX_VERTEX_ARRAY_LENGTH){let O=e.prepareSegment(P,i,l),R=O.vertexLength;for(let W=0;W<g.length;W+=3)l.emplaceBack(R+g[W],R+g[W+1],R+g[W+2]);let F,V;O.vertexLength+=P,O.primitiveLength+=g.length/3,A&&(V=y.prepareSegment(P,i,x),F=V.vertexLength,V.vertexLength+=P);for(let W=0;W<h.length;W+=2)r(h[W],h[W+1]);if(A)for(let W=0;W<S.length;W++){let Z=S[W];for(let K=1;K<Z.length;K+=2)x.emplaceBack(F+Z[K-1],F+Z[K]);V.primitiveLength+=Z.length/2}}else(function(O,R,F,V,W,Z){let K=[];for(let fe=0;fe<V.length/2;fe++)K.push(-1);let ue={count:0},ee=0,ne=O.getOrCreateLatestSegment(R,F),de=ne.vertexLength;for(let fe=2;fe<W.length;fe+=3){let Pe=W[fe-2],Ge=W[fe-1],Ne=W[fe],$e=K[Pe]<ee,tt=K[Ge]<ee,Ye=K[Ne]<ee;ne.vertexLength+(($e?1:0)+(tt?1:0)+(Ye?1:0))>Xe.MAX_VERTEX_ARRAY_LENGTH&&(ne=O.createNewSegment(R,F),ee=ue.count,$e=!0,tt=!0,Ye=!0,de=0);let Ve=Ch(K,V,Z,ue,Pe,$e,ne),Be=Ch(K,V,Z,ue,Ge,tt,ne),lt=Ch(K,V,Z,ue,Ne,Ye,ne);F.emplaceBack(de+Ve-ee,de+Be-ee,de+lt-ee),ne.primitiveLength++}})(e,i,l,h,g,r),A&&(function(O,R,F,V,W,Z){let K=[];for(let fe=0;fe<V.length/2;fe++)K.push(-1);let ue={count:0},ee=0,ne=O.getOrCreateLatestSegment(R,F),de=ne.vertexLength;for(let fe=0;fe<W.length;fe++){let Pe=W[fe];for(let Ge=1;Ge<W[fe].length;Ge+=2){let Ne=Pe[Ge-1],$e=Pe[Ge],tt=K[Ne]<ee,Ye=K[$e]<ee;ne.vertexLength+((tt?1:0)+(Ye?1:0))>Xe.MAX_VERTEX_ARRAY_LENGTH&&(ne=O.createNewSegment(R,F),ee=ue.count,tt=!0,Ye=!0,de=0);let Ve=Ch(K,V,Z,ue,Ne,tt,ne),Be=Ch(K,V,Z,ue,$e,Ye,ne);F.emplaceBack(de+Ve-ee,de+Be-ee),ne.primitiveLength++}}})(y,i,x,h,S,r),e.forceNewSegmentOnNextPrepare(),y?.forceNewSegmentOnNextPrepare()}function Ch(r,e,i,l,h,g,y){if(g){let x=l.count;return i(e[2*h],e[2*h+1]),r[h]=l.count,l.count++,y.vertexLength++,x}return r[h]}class em{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((i=>i.id)),this.index=e.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new X,this.indexArray=new De,this.indexArray2=new Ie,this.programConfigurations=new Ui(e.layers,e.zoom),this.segments=new Xe,this.segments2=new Xe,this.stateDependentLayerIds=this.layers.filter((i=>i.isStateDependent())).map((i=>i.id))}populate(e,i,l){this.hasDependencies=Wd("fill",this.layers,i);let h=this.layers[0].layout.get("fill-sort-key"),g=!h.isConstant(),y=[];for(let{feature:x,id:S,index:P,sourceLayerIndex:A}of e){let O=this.layers[0]._featureFilter.needGeometry,R=Ao(x,O);if(!this.layers[0]._featureFilter.filter(new Ti(this.zoom),R,l))continue;let F=g?h.evaluate(R,{},l,i.availableImages):void 0,V={id:S,properties:x.properties,type:x.type,sourceLayerIndex:A,index:P,geometry:O?R.geometry:Eo(x),patterns:{},sortKey:F};y.push(V)}g&&y.sort(((x,S)=>x.sortKey-S.sortKey));for(let x of y){let{geometry:S,index:P,sourceLayerIndex:A}=x;if(this.hasDependencies){let O=Kf("fill",this.layers,x,{zoom:this.zoom},i);this.patternFeatures.push(O)}else this.addFeature(x,S,P,l,{},i.subdivisionGranularity);i.featureIndex.insert(e[P].feature,S,P,A,this.index)}}update(e,i,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,i,this.stateDependentLayers,{imagePositions:l})}addFeatures(e,i,l){for(let h of this.patternFeatures)this.addFeature(h,h.geometry,h.index,i,l,e.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,oE),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,i,l,h,g,y){for(let x of Ls(i,500)){let S=N_(x,h,y.fill.getGranularityForZoomLevel(h.z)),P=this.layoutVertexArray;q_(((A,O)=>{P.emplaceBack(A,O)}),this.segments,this.layoutVertexArray,this.indexArray,S.verticesFlattened,S.indicesTriangles,this.segments2,this.indexArray2,S.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,l,{imagePositions:g,canonical:h})}}let V_,W_;at("FillBucket",em,{omit:["layers","patternFeatures"]});var vE={get paint(){return W_=W_||new pn({"fill-antialias":new gt(ze.paint_fill["fill-antialias"]),"fill-opacity":new wt(ze.paint_fill["fill-opacity"]),"fill-color":new wt(ze.paint_fill["fill-color"]),"fill-outline-color":new wt(ze.paint_fill["fill-outline-color"]),"fill-translate":new gt(ze.paint_fill["fill-translate"]),"fill-translate-anchor":new gt(ze.paint_fill["fill-translate-anchor"]),"fill-pattern":new cl(ze.paint_fill["fill-pattern"])})},get layout(){return V_=V_||new pn({"fill-sort-key":new wt(ze.layout_fill["fill-sort-key"])})}};class bE extends Rn{constructor(e,i){super(e,vE,i)}recalculate(e,i){super.recalculate(e,i);let l=this.paint._values["fill-outline-color"];l.value.kind==="constant"&&l.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new em(e)}queryRadius(){return qd(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:e,geometry:i,transform:l,pixelsToTileUnits:h}){return yh(Vd(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-l.bearingInRadians,h),i)}isTileClipped(){return!0}}let xE=rr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),wE=rr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:SE}=xE;class kh{constructor(e,i,l,h,g){this.properties={},this.extent=l,this.type=0,this.id=void 0,this._pbf=e,this._geometry=-1,this._keys=h,this._values=g,e.readFields(TE,this,i)}loadGeometry(){let e=this._pbf;e.pos=this._geometry;let i=e.readVarint()+e.pos,l=[],h,g=1,y=0,x=0,S=0;for(;e.pos<i;){if(y<=0){let P=e.readVarint();g=7&P,y=P>>3}if(y--,g===1||g===2)x+=e.readSVarint(),S+=e.readSVarint(),g===1&&(h&&l.push(h),h=[]),h&&h.push(new T(x,S));else{if(g!==7)throw new Error(`unknown command ${g}`);h&&h.push(h[0].clone())}}return h&&l.push(h),l}bbox(){let e=this._pbf;e.pos=this._geometry;let i=e.readVarint()+e.pos,l=1,h=0,g=0,y=0,x=1/0,S=-1/0,P=1/0,A=-1/0;for(;e.pos<i;){if(h<=0){let O=e.readVarint();l=7&O,h=O>>3}if(h--,l===1||l===2)g+=e.readSVarint(),y+=e.readSVarint(),g<x&&(x=g),g>S&&(S=g),y<P&&(P=y),y>A&&(A=y);else if(l!==7)throw new Error(`unknown command ${l}`)}return[x,P,S,A]}toGeoJSON(e,i,l){let h=this.extent*Math.pow(2,l),g=this.extent*e,y=this.extent*i,x=this.loadGeometry();function S(R){return[360*(R.x+g)/h-180,360/Math.PI*Math.atan(Math.exp((1-2*(R.y+y)/h)*Math.PI))-90]}function P(R){return R.map(S)}let A;if(this.type===1){let R=[];for(let V of x)R.push(V[0]);let F=P(R);A=R.length===1?{type:"Point",coordinates:F[0]}:{type:"MultiPoint",coordinates:F}}else if(this.type===2){let R=x.map(P);A=R.length===1?{type:"LineString",coordinates:R[0]}:{type:"MultiLineString",coordinates:R}}else{if(this.type!==3)throw new Error("unknown feature type");{let R=G_(x),F=[];for(let V of R)F.push(V.map(P));A=F.length===1?{type:"Polygon",coordinates:F[0]}:{type:"MultiPolygon",coordinates:F}}}let O={type:"Feature",geometry:A,properties:this.properties};return this.id!=null&&(O.id=this.id),O}}function TE(r,e,i){r===1?e.id=i.readVarint():r===2?(function(l,h){let g=l.readVarint()+l.pos;for(;l.pos<g;){let y=h._keys[l.readVarint()],x=h._values[l.readVarint()];h.properties[y]=x}})(i,e):r===3?e.type=i.readVarint():r===4&&(e._geometry=i.pos)}function G_(r){let e=r.length;if(e<=1)return[r];let i=[],l,h;for(let g=0;g<e;g++){let y=CE(r[g]);y!==0&&(h===void 0&&(h=y<0),h===y<0?(l&&i.push(l),l=[r[g]]):l&&l.push(r[g]))}return l&&i.push(l),i}function CE(r){let e=0;for(let i,l,h=0,g=r.length,y=g-1;h<g;y=h++)i=r[h],l=r[y],e+=(l.x-i.x)*(i.y+l.y);return e}kh.types=["Unknown","Point","LineString","Polygon"];class kE{constructor(e,i){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(PE,this,i),this.length=this._features.length}feature(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];let i=this._pbf.readVarint()+this._pbf.pos;return new kh(this._pbf,i,this.extent,this._keys,this._values)}}function PE(r,e,i){r===15?e.version=i.readVarint():r===1?e.name=i.readString():r===5?e.extent=i.readVarint():r===2?e._features.push(i.pos):r===3?e._keys.push(i.readString()):r===4&&e._values.push((function(l){let h=null,g=l.readVarint()+l.pos;for(;l.pos<g;){let y=l.readVarint()>>3;h=y===1?l.readString():y===2?l.readFloat():y===3?l.readDouble():y===4?l.readVarint64():y===5?l.readVarint():y===6?l.readSVarint():y===7?l.readBoolean():null}if(h==null)throw new Error("unknown feature value");return h})(i))}class U_{constructor(e,i){this.layers=e.readFields(EE,{},i)}}function EE(r,e,i){if(r===3){let l=new kE(i,i.readVarint()+i.pos);l.length&&(e[l.name]=l)}}let tm=Math.pow(2,13);function Ph(r,e,i,l,h,g,y,x){r.emplaceBack(e,i,2*Math.floor(l*tm)+y,h*tm*2,g*tm*2,Math.round(x))}class im{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((i=>i.id)),this.index=e.index,this.hasDependencies=!1,this.layoutVertexArray=new se,this.centroidVertexArray=new j,this.indexArray=new De,this.programConfigurations=new Ui(e.layers,e.zoom),this.segments=new Xe,this.stateDependentLayerIds=this.layers.filter((i=>i.isStateDependent())).map((i=>i.id))}populate(e,i,l){this.features=[],this.hasDependencies=Wd("fill-extrusion",this.layers,i);for(let{feature:h,id:g,index:y,sourceLayerIndex:x}of e){let S=this.layers[0]._featureFilter.needGeometry,P=Ao(h,S);if(!this.layers[0]._featureFilter.filter(new Ti(this.zoom),P,l))continue;let A={id:g,sourceLayerIndex:x,index:y,geometry:S?P.geometry:Eo(h),properties:h.properties,type:h.type,patterns:{}};this.hasDependencies?this.features.push(Kf("fill-extrusion",this.layers,A,{zoom:this.zoom},i)):this.addFeature(A,A.geometry,y,l,{},i.subdivisionGranularity),i.featureIndex.insert(h,A.geometry,y,x,this.index,!0)}}addFeatures(e,i,l){for(let h of this.features){let{geometry:g}=h;this.addFeature(h,g,h.index,i,l,e.subdivisionGranularity)}}update(e,i,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,i,this.stateDependentLayers,{imagePositions:l})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,SE),this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,wE.members,!0),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(e,i,l,h,g,y){for(let x of Ls(i,500)){let S={x:0,y:0,sampleCount:0},P=this.layoutVertexArray.length;this.processPolygon(S,h,e,x,y);let A=this.layoutVertexArray.length-P,O=Math.floor(S.x/S.sampleCount),R=Math.floor(S.y/S.sampleCount);for(let F=0;F<A;F++)this.centroidVertexArray.emplaceBack(O,R)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,l,{imagePositions:g,canonical:h})}processPolygon(e,i,l,h,g){if(h.length<1||Z_(h[0]))return;for(let O of h)O.length!==0&&AE(e,O);let y={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},x=g.fill.getGranularityForZoomLevel(i.z),S=kh.types[l.type]==="Polygon";for(let O of h){if(O.length===0||Z_(O))continue;let R=ec(O,x,S);this._generateSideFaces(R,y)}if(!S)return;let P=N_(h,i,x,!1),A=this.layoutVertexArray;q_(((O,R)=>{Ph(A,O,R,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,P.verticesFlattened,P.indicesTriangles)}_generateSideFaces(e,i){let l=0;for(let h=1;h<e.length;h++){let g=e[h],y=e[h-1];if(ME(g,y))continue;i.segment.vertexLength+4>Xe.MAX_VERTEX_ARRAY_LENGTH&&(i.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));let x=g.sub(y)._perp()._unit(),S=y.dist(g);l+S>32768&&(l=0),Ph(this.layoutVertexArray,g.x,g.y,x.x,x.y,0,0,l),Ph(this.layoutVertexArray,g.x,g.y,x.x,x.y,0,1,l),l+=S,Ph(this.layoutVertexArray,y.x,y.y,x.x,x.y,0,0,l),Ph(this.layoutVertexArray,y.x,y.y,x.x,x.y,0,1,l);let P=i.segment.vertexLength;this.indexArray.emplaceBack(P,P+2,P+1),this.indexArray.emplaceBack(P+1,P+2,P+3),i.segment.vertexLength+=4,i.segment.primitiveLength+=2}}}function AE(r,e){for(let i=0;i<e.length;i++){let l=e[i];i===e.length-1&&e[0].x===l.x&&e[0].y===l.y||(r.x+=l.x,r.y+=l.y,r.sampleCount++)}}function ME(r,e){return r.x===e.x&&(r.x<0||r.x>ei)||r.y===e.y&&(r.y<0||r.y>ei)}function Z_(r){return r.every((e=>e.x<0))||r.every((e=>e.x>ei))||r.every((e=>e.y<0))||r.every((e=>e.y>ei))}let $_;at("FillExtrusionBucket",im,{omit:["layers","features"]});var IE={get paint(){return $_=$_||new pn({"fill-extrusion-opacity":new gt(ze["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new wt(ze["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new gt(ze["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new gt(ze["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new cl(ze["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new wt(ze["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new wt(ze["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new gt(ze["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class zE extends Rn{constructor(e,i){super(e,IE,i)}createBucket(e){return new im(e)}queryRadius(){return qd(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:e,feature:i,featureState:l,geometry:h,transform:g,pixelsToTileUnits:y,pixelPosMatrix:x}){let S=Vd(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-g.bearingInRadians,y),P=this.paint.get("fill-extrusion-height").evaluate(i,l),A=this.paint.get("fill-extrusion-base").evaluate(i,l),O=(function(F,V){let W=[];for(let Z of F){let K=[Z.x,Z.y,0,1];Tt(K,K,V),W.push(new T(K[0]/K[3],K[1]/K[3]))}return W})(S,x),R=(function(F,V,W,Z){let K=[],ue=[],ee=Z[8]*V,ne=Z[9]*V,de=Z[10]*V,fe=Z[11]*V,Pe=Z[8]*W,Ge=Z[9]*W,Ne=Z[10]*W,$e=Z[11]*W;for(let tt of F){let Ye=[],Ve=[];for(let Be of tt){let lt=Be.x,nt=Be.y,ut=Z[0]*lt+Z[4]*nt+Z[12],rt=Z[1]*lt+Z[5]*nt+Z[13],yt=Z[2]*lt+Z[6]*nt+Z[14],si=Z[3]*lt+Z[7]*nt+Z[15],Xt=yt+de,Bi=si+fe,en=ut+Pe,dr=rt+Ge,Fi=yt+Ne,Li=si+$e,fi=new T((ut+ee)/Bi,(rt+ne)/Bi);fi.z=Xt/Bi,Ye.push(fi);let Qi=new T(en/Li,dr/Li);Qi.z=Fi/Li,Ve.push(Qi)}K.push(Ye),ue.push(Ve)}return[K,ue]})(h,A,P,x);return(function(F,V,W){let Z=1/0;yh(W,V)&&(Z=H_(W,V[0]));for(let K=0;K<V.length;K++){let ue=V[K],ee=F[K];for(let ne=0;ne<ue.length-1;ne++){let de=ue[ne],fe=[de,ue[ne+1],ee[ne+1],ee[ne],de];gh(W,fe)&&(Z=Math.min(Z,H_(W,fe)))}}return Z!==1/0&&Z})(R[0],R[1],O)}}function Eh(r,e){return r.x*e.x+r.y*e.y}function H_(r,e){if(r.length===1){let i=0,l=e[i++],h;for(;!h||l.equals(h);)if(h=e[i++],!h)return 1/0;for(;i<e.length;i++){let g=e[i],y=r[0],x=h.sub(l),S=g.sub(l),P=y.sub(l),A=Eh(x,x),O=Eh(x,S),R=Eh(S,S),F=Eh(P,x),V=Eh(P,S),W=A*R-O*O,Z=(R*F-O*V)/W,K=(A*V-O*F)/W,ue=l.z*(1-Z-K)+h.z*Z+g.z*K;if(isFinite(ue))return ue}return 1/0}{let i=1/0;for(let l of e)i=Math.min(i,l.z);return i}}let LE=rr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:OE}=LE,DE=rr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:RE}=DE,BE=Math.cos(Math.PI/180*37.5),Y_=Math.pow(2,14)/.5;class rm{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((i=>i.id)),this.index=e.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((i=>{this.gradients[i.id]={}})),this.layoutVertexArray=new le,this.layoutVertexArray2=new oe,this.indexArray=new De,this.programConfigurations=new Ui(e.layers,e.zoom),this.segments=new Xe,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((i=>i.isStateDependent())).map((i=>i.id))}populate(e,i,l){this.hasDependencies=Wd("line",this.layers,i)||this.hasLineDasharray(this.layers);let h=this.layers[0].layout.get("line-sort-key"),g=!h.isConstant(),y=[];for(let{feature:x,id:S,index:P,sourceLayerIndex:A}of e){let O=this.layers[0]._featureFilter.needGeometry,R=Ao(x,O);if(!this.layers[0]._featureFilter.filter(new Ti(this.zoom),R,l))continue;let F=g?h.evaluate(R,{},l):void 0,V={id:S,properties:x.properties,type:x.type,sourceLayerIndex:A,index:P,geometry:O?R.geometry:Eo(x),patterns:{},dashes:{},sortKey:F};y.push(V)}g&&y.sort(((x,S)=>x.sortKey-S.sortKey));for(let x of y){let{geometry:S,index:P,sourceLayerIndex:A}=x;this.hasDependencies?(Wd("line",this.layers,i)?Kf("line",this.layers,x,{zoom:this.zoom},i):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,x,this.zoom,i),this.patternFeatures.push(x)):this.addFeature(x,S,P,l,{},{},i.subdivisionGranularity),i.featureIndex.insert(e[P].feature,S,P,A,this.index)}}update(e,i,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,i,this.stateDependentLayers,{imagePositions:l,dashPositions:h})}addFeatures(e,i,l,h){for(let g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,i,l,h,e.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,RE)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,OE),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,i,l,h,g,y,x){let S=this.layers[0].layout,P=S.get("line-join").evaluate(e,{}),A=S.get("line-cap"),O=S.get("line-miter-limit"),R=S.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(let F of i)this.addLine(F,e,P,A,O,R,h,x);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,l,{imagePositions:g,dashPositions:y,canonical:h})}addLine(e,i,l,h,g,y,x,S){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,e=ec(e,x?S.line.getGranularityForZoomLevel(x.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ee=0;ee<e.length-1;ee++)this.totalDistance+=e[ee].dist(e[ee+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}let P=kh.types[i.type]==="Polygon",A=e.length;for(;A>=2&&e[A-1].equals(e[A-2]);)A--;let O=0;for(;O<A-1&&e[O].equals(e[O+1]);)O++;if(A<(P?3:2))return;l==="bevel"&&(g=1.05);let R=this.overscaling<=16?122880/(512*this.overscaling):0,F=this.segments.prepareSegment(10*A,this.layoutVertexArray,this.indexArray),V,W,Z,K,ue;this.e1=this.e2=-1,P&&(V=e[A-2],ue=e[O].sub(V)._unit()._perp());for(let ee=O;ee<A;ee++){if(Z=ee===A-1?P?e[O+1]:void 0:e[ee+1],Z&&e[ee].equals(Z))continue;ue&&(K=ue),V&&(W=V),V=e[ee],ue=Z?Z.sub(V)._unit()._perp():K,K=K||ue;let ne=K.add(ue);ne.x===0&&ne.y===0||ne._unit();let de=K.x*ue.x+K.y*ue.y,fe=ne.x*ue.x+ne.y*ue.y,Pe=fe!==0?1/fe:1/0,Ge=2*Math.sqrt(2-2*fe),Ne=fe<BE&&W&&Z,$e=K.x*ue.y-K.y*ue.x>0;if(Ne&&ee>O){let Ve=V.dist(W);if(Ve>2*R){let Be=V.sub(V.sub(W)._mult(R/Ve)._round());this.updateDistance(W,Be),this.addCurrentVertex(Be,K,0,0,F),W=Be}}let tt=W&&Z,Ye=tt?l:P?"butt":h;if(tt&&Ye==="round"&&(Pe<y?Ye="miter":Pe<=2&&(Ye="fakeround")),Ye==="miter"&&Pe>g&&(Ye="bevel"),Ye==="bevel"&&(Pe>2&&(Ye="flipbevel"),Pe<g&&(Ye="miter")),W&&this.updateDistance(W,V),Ye==="miter")ne._mult(Pe),this.addCurrentVertex(V,ne,0,0,F);else if(Ye==="flipbevel"){if(Pe>100)ne=ue.mult(-1);else{let Ve=Pe*K.add(ue).mag()/K.sub(ue).mag();ne._perp()._mult(Ve*($e?-1:1))}this.addCurrentVertex(V,ne,0,0,F),this.addCurrentVertex(V,ne.mult(-1),0,0,F)}else if(Ye==="bevel"||Ye==="fakeround"){let Ve=-Math.sqrt(Pe*Pe-1),Be=$e?Ve:0,lt=$e?0:Ve;if(W&&this.addCurrentVertex(V,K,Be,lt,F),Ye==="fakeround"){let nt=Math.round(180*Ge/Math.PI/20);for(let ut=1;ut<nt;ut++){let rt=ut/nt;if(rt!==.5){let si=rt-.5;rt+=rt*si*(rt-1)*((1.0904+de*(de*(3.55645-1.43519*de)-3.2452))*si*si+(.848013+de*(.215638*de-1.06021)))}let yt=ue.sub(K)._mult(rt)._add(K)._unit()._mult($e?-1:1);this.addHalfVertex(V,yt.x,yt.y,!1,$e,0,F)}}Z&&this.addCurrentVertex(V,ue,-Be,-lt,F)}else if(Ye==="butt")this.addCurrentVertex(V,ne,0,0,F);else if(Ye==="square"){let Ve=W?1:-1;this.addCurrentVertex(V,ne,Ve,Ve,F)}else Ye==="round"&&(W&&(this.addCurrentVertex(V,K,0,0,F),this.addCurrentVertex(V,K,1,1,F,!0)),Z&&(this.addCurrentVertex(V,ue,-1,-1,F,!0),this.addCurrentVertex(V,ue,0,0,F)));if(Ne&&ee<A-1){let Ve=V.dist(Z);if(Ve>2*R){let Be=V.add(Z.sub(V)._mult(R/Ve)._round());this.updateDistance(V,Be),this.addCurrentVertex(Be,ue,0,0,F),V=Be}}}}addCurrentVertex(e,i,l,h,g,y=!1){let x=i.y*h-i.x,S=-i.y-i.x*h;this.addHalfVertex(e,i.x+i.y*l,i.y-i.x*l,y,!1,l,g),this.addHalfVertex(e,x,S,y,!0,-h,g),this.distance>Y_/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(e,i,l,h,g,y))}addHalfVertex({x:e,y:i},l,h,g,y,x,S){let P=.5*(this.lineClips?this.scaledDistance*(Y_-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e<<1)+(g?1:0),(i<<1)+(y?1:0),Math.round(63*l)+128,Math.round(63*h)+128,1+(x===0?0:x<0?-1:1)|(63&P)<<2,P>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);let A=S.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,A,this.e2),S.primitiveLength++),y?this.e2=A:this.e1=A}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(e,i){this.distance+=e.dist(i),this.updateScaledDistance()}hasLineDasharray(e){for(let i of e){let l=i.paint.get("line-dasharray");if(l&&!l.isConstant())return!0}return!1}addLineDashDependencies(e,i,l,h){for(let g of e){let y=g.paint.get("line-dasharray");if(!y||y.value.kind==="constant")continue;let x=g.layout.get("line-cap")==="round",S={dasharray:y.value.evaluate({zoom:l-1},i,{}),round:x},P={dasharray:y.value.evaluate({zoom:l},i,{}),round:x},A={dasharray:y.value.evaluate({zoom:l+1},i,{}),round:x},O=`${S.dasharray.join(",")},${S.round}`,R=`${P.dasharray.join(",")},${P.round}`,F=`${A.dasharray.join(",")},${A.round}`;h.dashDependencies[O]=S,h.dashDependencies[R]=P,h.dashDependencies[F]=A,i.dashes[g.id]={min:O,mid:R,max:F}}}}let X_,K_;at("LineBucket",rm,{omit:["layers","patternFeatures"]});var J_={get paint(){return K_=K_||new pn({"line-opacity":new wt(ze.paint_line["line-opacity"]),"line-color":new wt(ze.paint_line["line-color"]),"line-translate":new gt(ze.paint_line["line-translate"]),"line-translate-anchor":new gt(ze.paint_line["line-translate-anchor"]),"line-width":new wt(ze.paint_line["line-width"]),"line-gap-width":new wt(ze.paint_line["line-gap-width"]),"line-offset":new wt(ze.paint_line["line-offset"]),"line-blur":new wt(ze.paint_line["line-blur"]),"line-dasharray":new cl(ze.paint_line["line-dasharray"]),"line-pattern":new cl(ze.paint_line["line-pattern"]),"line-gradient":new So(ze.paint_line["line-gradient"])})},get layout(){return X_=X_||new pn({"line-cap":new gt(ze.layout_line["line-cap"]),"line-join":new wt(ze.layout_line["line-join"]),"line-miter-limit":new gt(ze.layout_line["line-miter-limit"]),"line-round-limit":new gt(ze.layout_line["line-round-limit"]),"line-sort-key":new wt(ze.layout_line["line-sort-key"])})}};class FE extends wt{possiblyEvaluate(e,i){return i=new Ti(Math.floor(i.zoom),{now:i.now,fadeDuration:i.fadeDuration,zoomHistory:i.zoomHistory,transition:i.transition}),super.possiblyEvaluate(e,i)}evaluate(e,i,l,h){return i=ji({},i,{zoom:Math.floor(i.zoom)}),super.evaluate(e,i,l,h)}}let $d;class jE extends Rn{constructor(e,i){super(e,J_,i),this.gradientVersion=0,$d||($d=new FE(J_.paint.properties["line-width"].specification),$d.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(e){if(e==="line-gradient"){let i=this.gradientExpression();this.stepInterpolant=!!(function(l){return l._styleExpression!==void 0})(i)&&i._styleExpression.expression instanceof Aa,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(e,i){super.recalculate(e,i),this.paint._values["line-floorwidth"]=$d.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new rm(e)}queryRadius(e){let i=e,l=Q_(Yc("line-width",this,i),Yc("line-gap-width",this,i)),h=Yc("line-offset",this,i);return l/2+Math.abs(h)+qd(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:e,feature:i,featureState:l,geometry:h,transform:g,pixelsToTileUnits:y}){let x=Vd(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-g.bearingInRadians,y),S=y/2*Q_(this.paint.get("line-width").evaluate(i,l),this.paint.get("line-gap-width").evaluate(i,l)),P=this.paint.get("line-offset").evaluate(i,l);return P&&(h=(function(A,O){let R=[];for(let F=0;F<A.length;F++){let V=$P(A[F]),W=[];for(let Z=0;Z<V.length;Z++){let K=V[Z],ue=V[Z-1],ee=V[Z+1],ne=Z===0?new T(0,0):K.sub(ue)._unit()._perp(),de=Z===V.length-1?new T(0,0):ee.sub(K)._unit()._perp(),fe=ne._add(de)._unit(),Pe=fe.x*de.x+fe.y*de.y;Pe!==0&&fe._mult(1/Pe),W.push(fe._mult(O)._add(K))}R.push(W)}return R})(h,P*y)),(function(A,O,R){for(let F=0;F<O.length;F++){let V=O[F];if(A.length>=3){for(let W=0;W<V.length;W++)if(Hc(A,V[W]))return!0}if(_h(A,V,R))return!0}return!1})(x,h,S)}isTileClipped(){return!0}}function Q_(r,e){return e>0?e+2*r:r}let NE=rr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),qE=rr([{name:"a_projected_pos",components:3,type:"Float32"}],4);rr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);let VE=rr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);rr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);let ev=rr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),WE=rr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function GE(r,e,i){return r.sections.forEach((l=>{l.text=(function(h,g,y){let x=g.layout.get("text-transform").evaluate(y,{});return x==="uppercase"?h=h.toLocaleUpperCase():x==="lowercase"&&(h=h.toLocaleLowerCase()),us.applyArabicShaping&&(h=us.applyArabicShaping(h)),h})(l.text,e,i)})),r}rr([{name:"triangle",components:3,type:"Uint16"}]),rr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),rr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),rr([{type:"Float32",name:"offsetX"}]),rr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),rr([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);var Mr=24;let Ah={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u22EF":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},UE={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},ZE={40:!0};function tv(r,e,i,l,h,g){if("fontStack"in e){let y=i[e.fontStack],x=y&&y[r];return x?x.metrics.advance*e.scale+h:0}{let y=l[e.imageName];return y?y.displaySize[0]*e.scale*Mr/g+h:0}}function iv(r,e,i,l){let h=Math.pow(r-e,2);return l?r<e?h/2:2*h:h+Math.abs(i)*i}function $E(r,e,i){let l=0;return r===10&&(l-=1e4),i&&(l+=150),r!==40&&r!==65288||(l+=50),e!==41&&e!==65289||(l+=50),l}function rv(r,e,i,l,h,g){let y=null,x=iv(e,i,h,g);for(let S of l){let P=iv(e-S.x,i,h,g)+S.badness;P<=x&&(y=S,x=P)}return{index:r,x:e,priorBreak:y,badness:x}}function nv(r){return r?nv(r.priorBreak).concat(r.index):[]}class Qc{constructor(e="",i=[],l=[]){this.text=e,this.sections=i,this.sectionIndex=l,this.imageSectionID=null}static fromFeature(e,i){let l=new Qc;for(let h=0;h<e.sections.length;h++){let g=e.sections[h];g.image?l.addImageSection(g):l.addTextSection(g,i)}return l}length(){return[...this.text].length}getSection(e){return this.sections[this.sectionIndex[e]]}getSectionIndex(e){return this.sectionIndex[e]}verticalizePunctuation(){this.text=(function(e){let i="",l={premature:!0,value:void 0},h=e[Symbol.iterator](),g=h.next(),y=e[Symbol.iterator]();y.next();let x=y.next();for(;!g.done;)i+=!x.done&&Bc(x.value.codePointAt(0))&&!Ah[x.value]||!l.premature&&Bc(l.value.codePointAt(0))&&!Ah[l.value]||!Ah[g.value]?g.value:Ah[g.value],l={value:g.value,premature:!1},g=h.next(),x=y.next();return i})(this.text)}hasZeroWidthSpaces(){return this.text.includes("\u200B")}trim(){let e=this.text.match(/^\s*/),i=e?e[0].length:0,l=this.text.match(/\S\s*$/),h=l?l[0].length-1:0;this.text=this.text.substring(i,this.text.length-h),this.sectionIndex=this.sectionIndex.slice(i,this.sectionIndex.length-h)}substring(e,i){let l=[...this.text].slice(e,i).join(""),h=this.sectionIndex.slice(e,i);return new Qc(l,this.sections,h)}toCodeUnitIndex(e){return[...this.text].slice(0,e).join("").length}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((e,i)=>Math.max(e,this.sections[i].scale)),0)}getMaxImageSize(e){let i=0,l=0;for(let h=0;h<this.length();h++){let g=this.getSection(h);if("imageName"in g){let y=e[g.imageName];if(!y)continue;let x=y.displaySize;i=Math.max(i,x[0]),l=Math.max(l,x[1])}}return{maxImageWidth:i,maxImageHeight:l}}addTextSection(e,i){this.text+=e.text,this.sections.push({scale:e.scale||1,verticalAlign:e.verticalAlign||"bottom",fontStack:e.fontStack||i});let l=this.sections.length-1;this.sectionIndex.push(...[...e.text].map((()=>l)))}addImageSection(e){let i=e.image?e.image.name:"";if(i.length===0)return void cr("Can't add FormattedSection with an empty image.");let l=this.getNextImageSectionCharCode();l?(this.text+=String.fromCharCode(l),this.sections.push({scale:1,verticalAlign:e.verticalAlign||"bottom",imageName:i}),this.sectionIndex.push(this.sections.length-1)):cr("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}determineLineBreaks(e,i,l,h,g){let y=[],x=this.determineAverageLineWidth(e,i,l,h,g),S=this.hasZeroWidthSpaces(),P=0,A=0,O=this.text[Symbol.iterator](),R=O.next(),F=this.text[Symbol.iterator]();F.next();let V=F.next(),W=this.text[Symbol.iterator]();W.next(),W.next();let Z=W.next();for(;!R.done;){let K=this.getSection(A),ue=R.value.codePointAt(0);if(Pd(ue)||(P+=tv(ue,K,l,h,e,g)),!V.done){let ee=jf(ue),ne=V.value.codePointAt(0);(UE[ue]||ee||"imageName"in K||!Z.done&&ZE[ne])&&y.push(rv(A+1,P,x,y,$E(ue,ne,ee&&S),!1))}A++,R=O.next(),V=F.next(),Z=W.next()}return nv(rv(this.length(),P,x,y,0,!0))}determineAverageLineWidth(e,i,l,h,g){let y=0,x=0;for(let S of this.text){let P=this.getSection(x);y+=tv(S.codePointAt(0),P,l,h,e,g),x++}return y/Math.max(1,Math.ceil(y/i))}}let nm=4294967296,av=1/nm,sv=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class Hd{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,i,l=this.length){for(;this.pos<l;){let h=this.readVarint(),g=h>>3,y=this.pos;this.type=7&h,e(g,i,this),this.pos===y&&this.skip(h)}return i}readMessage(e,i){return this.readFields(e,i,this.readVarint()+this.pos)}readFixed32(){let e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){let e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){let e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*nm;return this.pos+=8,e}readSFixed64(){let e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*nm;return this.pos+=8,e}readFloat(){let e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){let e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){let i=this.buf,l,h;return h=i[this.pos++],l=127&h,h<128?l:(h=i[this.pos++],l|=(127&h)<<7,h<128?l:(h=i[this.pos++],l|=(127&h)<<14,h<128?l:(h=i[this.pos++],l|=(127&h)<<21,h<128?l:(h=i[this.pos],l|=(15&h)<<28,(function(g,y,x){let S=x.buf,P,A;if(A=S[x.pos++],P=(112&A)>>4,A<128||(A=S[x.pos++],P|=(127&A)<<3,A<128)||(A=S[x.pos++],P|=(127&A)<<10,A<128)||(A=S[x.pos++],P|=(127&A)<<17,A<128)||(A=S[x.pos++],P|=(127&A)<<24,A<128)||(A=S[x.pos++],P|=(1&A)<<31,A<128))return eu(g,P,y);throw new Error("Expected varint not more than 10 bytes")})(l,e,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){let e=this.readVarint();return e%2==1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){let e=this.readVarint()+this.pos,i=this.pos;return this.pos=e,e-i>=12&&sv?sv.decode(this.buf.subarray(i,e)):(function(l,h,g){let y="",x=h;for(;x<g;){let S=l[x],P,A,O,R=null,F=S>239?4:S>223?3:S>191?2:1;if(x+F>g)break;F===1?S<128&&(R=S):F===2?(P=l[x+1],(192&P)==128&&(R=(31&S)<<6|63&P,R<=127&&(R=null))):F===3?(P=l[x+1],A=l[x+2],(192&P)==128&&(192&A)==128&&(R=(15&S)<<12|(63&P)<<6|63&A,(R<=2047||R>=55296&&R<=57343)&&(R=null))):F===4&&(P=l[x+1],A=l[x+2],O=l[x+3],(192&P)==128&&(192&A)==128&&(192&O)==128&&(R=(15&S)<<18|(63&P)<<12|(63&A)<<6|63&O,(R<=65535||R>=1114112)&&(R=null))),R===null?(R=65533,F=1):R>65535&&(R-=65536,y+=String.fromCharCode(R>>>10&1023|55296),R=56320|1023&R),y+=String.fromCharCode(R),x+=F}return y})(this.buf,i,e)}readBytes(){let e=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,e);return this.pos=e,i}readPackedVarint(e=[],i){let l=this.readPackedEnd();for(;this.pos<l;)e.push(this.readVarint(i));return e}readPackedSVarint(e=[]){let i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){let i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){let i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readFloat());return e}readPackedDouble(e=[]){let i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){let i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){let i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){let i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){let i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(e){let i=7&e;if(i===0)for(;this.buf[this.pos++]>127;);else if(i===2)this.pos=this.readVarint()+this.pos;else if(i===5)this.pos+=4;else{if(i!==1)throw new Error(`Unimplemented type: ${i}`);this.pos+=8}}writeTag(e,i){this.writeVarint(e<<3|i)}realloc(e){let i=this.length||16;for(;i<this.pos+e;)i*=2;if(i!==this.length){let l=new Uint8Array(i);l.set(this.buf),this.buf=l,this.dataView=new DataView(l.buffer),this.length=i}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,-1&e,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*av),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,-1&e,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*av),!0),this.pos+=8}writeVarint(e){(e=+e||0)>268435455||e<0?(function(i,l){let h,g;if(i>=0?(h=i%4294967296|0,g=i/4294967296|0):(h=~(-i%4294967296),g=~(-i/4294967296),4294967295^h?h=h+1|0:(h=0,g=g+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");l.realloc(10),(function(y,x,S){S.buf[S.pos++]=127&y|128,y>>>=7,S.buf[S.pos++]=127&y|128,y>>>=7,S.buf[S.pos++]=127&y|128,y>>>=7,S.buf[S.pos++]=127&y|128,S.buf[S.pos]=127&(y>>>=7)})(h,0,l),(function(y,x){let S=(7&y)<<4;x.buf[x.pos++]|=S|((y>>>=3)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y)))))})(g,l)})(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))}writeSVarint(e){this.writeVarint(e<0?2*-e-1:2*e)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(4*e.length),this.pos++;let i=this.pos;this.pos=(function(h,g,y){for(let x,S,P=0;P<g.length;P++){if(x=g.charCodeAt(P),x>55295&&x<57344){if(!S){x>56319||P+1===g.length?(h[y++]=239,h[y++]=191,h[y++]=189):S=x;continue}if(x<56320){h[y++]=239,h[y++]=191,h[y++]=189,S=x;continue}x=S-55296<<10|x-56320|65536,S=null}else S&&(h[y++]=239,h[y++]=191,h[y++]=189,S=null);x<128?h[y++]=x:(x<2048?h[y++]=x>>6|192:(x<65536?h[y++]=x>>12|224:(h[y++]=x>>18|240,h[y++]=x>>12&63|128),h[y++]=x>>6&63|128),h[y++]=63&x|128)}return y})(this.buf,e,this.pos);let l=this.pos-i;l>=128&&ov(i,l,this),this.pos=i-1,this.writeVarint(l),this.pos+=l}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){let i=e.length;this.writeVarint(i),this.realloc(i);for(let l=0;l<i;l++)this.buf[this.pos++]=e[l]}writeRawMessage(e,i){this.pos++;let l=this.pos;e(i,this);let h=this.pos-l;h>=128&&ov(l,h,this),this.pos=l-1,this.writeVarint(h),this.pos+=h}writeMessage(e,i,l){this.writeTag(e,2),this.writeRawMessage(i,l)}writePackedVarint(e,i){i.length&&this.writeMessage(e,HE,i)}writePackedSVarint(e,i){i.length&&this.writeMessage(e,YE,i)}writePackedBoolean(e,i){i.length&&this.writeMessage(e,JE,i)}writePackedFloat(e,i){i.length&&this.writeMessage(e,XE,i)}writePackedDouble(e,i){i.length&&this.writeMessage(e,KE,i)}writePackedFixed32(e,i){i.length&&this.writeMessage(e,QE,i)}writePackedSFixed32(e,i){i.length&&this.writeMessage(e,eA,i)}writePackedFixed64(e,i){i.length&&this.writeMessage(e,tA,i)}writePackedSFixed64(e,i){i.length&&this.writeMessage(e,iA,i)}writeBytesField(e,i){this.writeTag(e,2),this.writeBytes(i)}writeFixed32Field(e,i){this.writeTag(e,5),this.writeFixed32(i)}writeSFixed32Field(e,i){this.writeTag(e,5),this.writeSFixed32(i)}writeFixed64Field(e,i){this.writeTag(e,1),this.writeFixed64(i)}writeSFixed64Field(e,i){this.writeTag(e,1),this.writeSFixed64(i)}writeVarintField(e,i){this.writeTag(e,0),this.writeVarint(i)}writeSVarintField(e,i){this.writeTag(e,0),this.writeSVarint(i)}writeStringField(e,i){this.writeTag(e,2),this.writeString(i)}writeFloatField(e,i){this.writeTag(e,5),this.writeFloat(i)}writeDoubleField(e,i){this.writeTag(e,1),this.writeDouble(i)}writeBooleanField(e,i){this.writeVarintField(e,+i)}}function eu(r,e,i){return i?4294967296*e+(r>>>0):4294967296*(e>>>0)+(r>>>0)}function ov(r,e,i){let l=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));i.realloc(l);for(let h=i.pos-1;h>=r;h--)i.buf[h+l]=i.buf[h]}function HE(r,e){for(let i=0;i<r.length;i++)e.writeVarint(r[i])}function YE(r,e){for(let i=0;i<r.length;i++)e.writeSVarint(r[i])}function XE(r,e){for(let i=0;i<r.length;i++)e.writeFloat(r[i])}function KE(r,e){for(let i=0;i<r.length;i++)e.writeDouble(r[i])}function JE(r,e){for(let i=0;i<r.length;i++)e.writeBoolean(r[i])}function QE(r,e){for(let i=0;i<r.length;i++)e.writeFixed32(r[i])}function eA(r,e){for(let i=0;i<r.length;i++)e.writeSFixed32(r[i])}function tA(r,e){for(let i=0;i<r.length;i++)e.writeFixed64(r[i])}function iA(r,e){for(let i=0;i<r.length;i++)e.writeSFixed64(r[i])}function rA(r,e,i){r===1&&i.readMessage(nA,e)}function nA(r,e,i){if(r===3){let{id:l,bitmap:h,width:g,height:y,left:x,top:S,advance:P}=i.readMessage(aA,{});e.push({id:l,bitmap:new vh({width:g+6,height:y+6},h),metrics:{width:g,height:y,left:x,top:S,advance:P}})}}function aA(r,e,i){r===1?e.id=i.readVarint():r===2?e.bitmap=i.readBytes():r===3?e.width=i.readVarint():r===4?e.height=i.readVarint():r===5?e.left=i.readSVarint():r===6?e.top=i.readSVarint():r===7&&(e.advance=i.readVarint())}function lv(r){let e=0,i=0;for(let y of r)e+=y.w*y.h,i=Math.max(i,y.w);r.sort(((y,x)=>x.h-y.h));let l=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),i),h:1/0}],h=0,g=0;for(let y of r)for(let x=l.length-1;x>=0;x--){let S=l[x];if(!(y.w>S.w||y.h>S.h)){if(y.x=S.x,y.y=S.y,g=Math.max(g,y.y+y.h),h=Math.max(h,y.x+y.w),y.w===S.w&&y.h===S.h){let P=l.pop();P&&x<l.length&&(l[x]=P)}else y.h===S.h?(S.x+=y.w,S.w-=y.w):y.w===S.w?(S.y+=y.h,S.h-=y.h):(l.push({x:S.x+y.w,y:S.y,w:S.w-y.w,h:y.h}),S.y+=y.h,S.h-=y.h);break}}return{w:h,h:g,fill:e/(h*g)||0}}class am{constructor(e,{pixelRatio:i,version:l,stretchX:h,stretchY:g,content:y,textFitWidth:x,textFitHeight:S}){this.paddedRect=e,this.pixelRatio=i,this.stretchX=h,this.stretchY=g,this.content=y,this.version=l,this.textFitWidth=x,this.textFitHeight=S}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class cv{constructor(e,i){let l={},h={};this.haveRenderCallbacks=[];let g=[];this.addImages(e,l,g),this.addImages(i,h,g);let{w:y,h:x}=lv(g),S=new Fn({width:y||1,height:x||1});for(let P in e){let A=e[P],O=l[P].paddedRect;Fn.copy(A.data,S,{x:0,y:0},{x:O.x+1,y:O.y+1},A.data)}for(let P in i){let A=i[P],O=h[P].paddedRect,R=O.x+1,F=O.y+1,V=A.data.width,W=A.data.height;Fn.copy(A.data,S,{x:0,y:0},{x:R,y:F},A.data),Fn.copy(A.data,S,{x:0,y:W-1},{x:R,y:F-1},{width:V,height:1}),Fn.copy(A.data,S,{x:0,y:0},{x:R,y:F+W},{width:V,height:1}),Fn.copy(A.data,S,{x:V-1,y:0},{x:R-1,y:F},{width:1,height:W}),Fn.copy(A.data,S,{x:0,y:0},{x:R+V,y:F},{width:1,height:W})}this.image=S,this.iconPositions=l,this.patternPositions=h}addImages(e,i,l){for(let h in e){let g=e[h],y={x:0,y:0,w:g.data.width+2,h:g.data.height+2};l.push(y),i[h]=new am(y,g),g.hasRenderCallback&&this.haveRenderCallbacks.push(h)}}patchUpdatedImages(e,i){e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(let l in e.updatedImages)this.patchUpdatedImage(this.iconPositions[l],e.getImage(l),i),this.patchUpdatedImage(this.patternPositions[l],e.getImage(l),i)}patchUpdatedImage(e,i,l){if(!e||!i||e.version===i.version)return;e.version=i.version;let[h,g]=e.tl;l.update(i.data,void 0,{x:h,y:g})}}var pl;function Yd(r,e,i,l,h,g,y,x,S,P,A,O,R,F,V){let W=Qc.fromFeature(r,h),Z;O===f.aA.vertical&&W.verticalizePunctuation();let K=W.determineLineBreaks(P,g,e,l,F),{processBidirectionalText:ue,processStyledBidirectionalText:ee}=us;if(ue&&W.sections.length===1){Z=[],K=K.map((Pe=>W.toCodeUnitIndex(Pe)));let fe=ue(W.toString(),K);for(let Pe of fe){let Ge=[...Pe].map((()=>0));Z.push(new Qc(Pe,W.sections,Ge))}}else if(ee){Z=[],K=K.map((Ne=>W.toCodeUnitIndex(Ne)));let fe=0,Pe=[];for(let Ne of W.text)Pe.push(...Array(Ne.length).fill(W.sectionIndex[fe])),fe++;let Ge=ee(W.text,Pe,K);for(let Ne of Ge){let $e=[],tt="";for(let Ye of Ne[0])$e.push(Ne[1][tt.length]),tt+=Ye;Z.push(new Qc(Ne[0],W.sections,$e))}}else Z=(function(fe,Pe){let Ge=[],Ne=0;for(let $e of Pe)Ge.push(fe.substring(Ne,$e)),Ne=$e;return Ne<fe.length()&&Ge.push(fe.substring(Ne,fe.length())),Ge})(W,K);let ne=[],de={positionedLines:ne,text:W.toString(),top:A[1],bottom:A[1],left:A[0],right:A[0],writingMode:O,iconsInText:!1,verticalizable:!1};return(function(fe,Pe,Ge,Ne,$e,tt,Ye,Ve,Be,lt,nt,ut){let rt=0,yt=0,si=0,Xt=0,Bi=Ve==="right"?1:Ve==="left"?0:.5,en=Mr/ut,dr=0;for(let fi of $e){fi.trim();let Qi=fi.getMaxScale(),sr={positionedGlyphs:[],lineOffset:0};fe.positionedLines[dr]=sr;let Mi=sr.positionedGlyphs,jn=0;if(!fi.length()){yt+=tt,++dr;continue}let tn=sA(Ne,fi,en),Nn=0;for(let Lr of fi.text){let Zi=fi.getSection(Nn),pr=Lr.codePointAt(0),er=oA(Be,nt,pr),Or={glyph:pr,imageName:null,x:rt,y:yt+-17,vertical:er,scale:1,fontStack:"",sectionIndex:fi.getSectionIndex(Nn),metrics:null,rect:null},zo;if("fontStack"in Zi){if(zo=lA(Zi,pr,er,tn,Pe,Ge),!zo)continue;Or.fontStack=Zi.fontStack}else{if(fe.iconsInText=!0,Zi.scale*=en,zo=cA(Zi,er,Qi,tn,Ne),!zo)continue;jn=Math.max(jn,zo.imageOffset),Or.imageName=Zi.imageName}let{rect:fs,metrics:Bh,baselineOffset:_l}=zo;Or.y+=_l,Or.scale=Zi.scale,Or.metrics=Bh,Or.rect=fs,Mi.push(Or),er?(fe.verticalizable=!0,rt+=("imageName"in Zi?Bh.advance:Mr)*Zi.scale+lt):rt+=Bh.advance*Zi.scale+lt,Nn++}Mi.length!==0&&(si=Math.max(rt-lt,si),uA(Mi,0,Mi.length-1,Bi)),rt=0,sr.lineOffset=Math.max(jn,(Qi-1)*Mr);let Fa=tt*Qi+jn;yt+=Fa,Xt=Math.max(Fa,Xt),++dr}let{horizontalAlign:Fi,verticalAlign:Li}=sm(Ye);(function(fi,Qi,sr,Mi,jn,tn,Nn,Fa,Lr){let Zi=(Qi-sr)*jn,pr=0;pr=tn!==Nn?-Fa*Mi- -17:-Mi*Lr*Nn+.5*Nn;for(let er of fi)for(let Or of er.positionedGlyphs)Or.x+=Zi,Or.y+=pr})(fe.positionedLines,Bi,Fi,Li,si,Xt,tt,yt,$e.length),fe.top+=-Li*yt,fe.bottom=fe.top+yt,fe.left+=-Fi*si,fe.right=fe.left+si})(de,e,i,l,Z,y,x,S,O,P,R,V),!(function(fe){for(let Pe of fe)if(Pe.positionedGlyphs.length!==0)return!1;return!0})(ne)&&de}function sm(r){let e=.5,i=.5;switch(r){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(r){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:e,verticalAlign:i}}function sA(r,e,i){let l=e.getMaxScale()*Mr,{maxImageWidth:h,maxImageHeight:g}=e.getMaxImageSize(r),y=Math.max(l,g*i);return{verticalLineContentWidth:Math.max(l,h*i),horizontalLineContentHeight:y}}function uv(r){switch(r){case"top":return 0;case"center":return .5;default:return 1}}function oA(r,e,i){return!(r===f.aA.horizontal||!e&&!eh(i)||e&&(Pd(i)||(l=i,/\p{sc=Arab}/u.test(String.fromCodePoint(l)))));var l}function lA(r,e,i,l,h,g){let y=g[r.fontStack],x=(function(P,A,O,R){if(P&&P.rect)return P;let F=A[O.fontStack],V=F&&F[R];return V?{rect:null,metrics:V.metrics}:null})(y&&y[e],h,r,e);if(x===null)return null;let S;if(i)S=l.verticalLineContentWidth-r.scale*Mr;else{let P=uv(r.verticalAlign);S=(l.horizontalLineContentHeight-r.scale*Mr)*P}return{rect:x.rect,metrics:x.metrics,baselineOffset:S}}function cA(r,e,i,l,h){let g=h[r.imageName];if(!g)return null;let y=g.paddedRect,x=g.displaySize,S={width:x[0],height:x[1],left:1,top:-3,advance:e?x[1]:x[0]},P;if(e)P=l.verticalLineContentWidth-x[1]*r.scale;else{let A=uv(r.verticalAlign);P=(l.horizontalLineContentHeight-x[1]*r.scale)*A}return{rect:y,metrics:S,baselineOffset:P,imageOffset:(e?x[0]:x[1])*r.scale-Mr*i}}function uA(r,e,i,l){if(l===0)return;let h=r[i],g=(r[i].x+h.metrics.advance*h.scale)*l;for(let y=e;y<=i;y++)r[y].x-=g}function hA(r,e,i){let{horizontalAlign:l,verticalAlign:h}=sm(i),g=e[0]-r.displaySize[0]*l,y=e[1]-r.displaySize[1]*h;return{image:r,top:y,bottom:y+r.displaySize[1],left:g,right:g+r.displaySize[0]}}function hv(r){var e,i;let l=r.left,h=r.top,g=r.right-l,y=r.bottom-h,x=(e=r.image.textFitWidth)!==null&&e!==void 0?e:"stretchOrShrink",S=(i=r.image.textFitHeight)!==null&&i!==void 0?i:"stretchOrShrink",P=(r.image.content[2]-r.image.content[0])/(r.image.content[3]-r.image.content[1]);if(S==="proportional"){if(x==="stretchOnly"&&g/y<P||x==="proportional"){let A=Math.ceil(y*P);l*=A/g,g=A}}else if(x==="proportional"&&S==="stretchOnly"&&P!==0&&g/y>P){let A=Math.ceil(g/P);h*=A/y,y=A}return{x1:l,y1:h,x2:l+g,y2:h+y}}function dv(r,e,i,l,h,g){let y=r.image,x;if(y.content){let Z=y.content,K=y.pixelRatio||1;x=[Z[0]/K,Z[1]/K,y.displaySize[0]-Z[2]/K,y.displaySize[1]-Z[3]/K]}let S=e.left*g,P=e.right*g,A,O,R,F;i==="width"||i==="both"?(F=h[0]+S-l[3],O=h[0]+P+l[1]):(F=h[0]+(S+P-y.displaySize[0])/2,O=F+y.displaySize[0]);let V=e.top*g,W=e.bottom*g;return i==="height"||i==="both"?(A=h[1]+V-l[0],R=h[1]+W+l[2]):(A=h[1]+(V+W-y.displaySize[1])/2,R=A+y.displaySize[1]),{image:y,top:A,right:O,bottom:R,left:F,collisionPadding:x}}at("ImagePosition",am),at("ImageAtlas",cv),f.aA=void 0,(pl=f.aA||(f.aA={}))[pl.none=0]="none",pl[pl.horizontal=1]="horizontal",pl[pl.vertical=2]="vertical",pl[pl.horizontalOnly=3]="horizontalOnly";let Mo=128,fl=32640;function pv(r,e){let{expression:i}=e;if(i.kind==="constant")return{kind:"constant",layoutSize:i.evaluate(new Ti(r+1))};if(i.kind==="source")return{kind:"source"};{let{zoomStops:l,interpolationType:h}=i,g=0;for(;g<l.length&&l[g]<=r;)g++;g=Math.max(0,g-1);let y=g;for(;y<l.length&&l[y]<r+1;)y++;y=Math.min(l.length-1,y);let x=l[g],S=l[y];return i.kind==="composite"?{kind:"composite",minZoom:x,maxZoom:S,interpolationType:h}:{kind:"camera",minZoom:x,maxZoom:S,minSize:i.evaluate(new Ti(x)),maxSize:i.evaluate(new Ti(S)),interpolationType:h}}}function om(r,e,i){let l="never",h=r.get(e);return h?l=h:r.get(i)&&(l="always"),l}let dA=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Xd(r,e,i,l,h,g,y,x,S,P,A,O,R){let F=x?Math.min(fl,Math.round(x[0])):0,V=x?Math.min(fl,Math.round(x[1])):0;r.emplaceBack(e,i,Math.round(32*l),Math.round(32*h),g,y,(F<<1)+(S?1:0),V,16*P,16*A,256*O,256*R)}function lm(r,e,i){r.emplaceBack(e.x,e.y,i),r.emplaceBack(e.x,e.y,i),r.emplaceBack(e.x,e.y,i),r.emplaceBack(e.x,e.y,i)}function pA(r){for(let e of r.sections)if(Md(e.text))return!0;return!1}class cm{constructor(e){this.layoutVertexArray=new he,this.indexArray=new De,this.programConfigurations=e,this.segments=new Xe,this.dynamicLayoutVertexArray=new ge,this.opacityVertexArray=new be,this.hasVisibleVertices=!1,this.placedSymbolArray=new u}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(e,i,l,h){this.isEmpty()||(l&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,NE.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,i),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,qE.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,dA,!0),this.opacityVertexBuffer.itemSize=1),(l||h)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}at("SymbolBuffers",cm);class um{constructor(e,i,l){this.layoutVertexArray=new e,this.layoutAttributes=i,this.indexArray=new l,this.segments=new Xe,this.collisionVertexArray=new Se}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,VE.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}at("CollisionBuffers",um);class tu{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((y=>y.id)),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];let i=this.layers[0]._unevaluatedLayout._values;this.textSizeData=pv(this.zoom,i["text-size"]),this.iconSizeData=pv(this.zoom,i["icon-size"]);let l=this.layers[0].layout,h=l.get("symbol-sort-key"),g=l.get("symbol-z-order");this.canOverlap=om(l,"text-overlap","text-allow-overlap")!=="never"||om(l,"icon-overlap","icon-allow-overlap")!=="never"||l.get("text-ignore-placement")||l.get("icon-ignore-placement"),this.sortFeaturesByKey=g!=="viewport-y"&&!h.isConstant(),this.sortFeaturesByY=(g==="viewport-y"||g==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,l.get("symbol-placement")==="point"&&(this.writingModes=l.get("text-writing-mode").map((y=>f.aA[y]))),this.stateDependentLayerIds=this.layers.filter((y=>y.isStateDependent())).map((y=>y.id)),this.sourceID=e.sourceID}createArrays(){this.text=new cm(new Ui(this.layers,this.zoom,(e=>/^text/.test(e)))),this.icon=new cm(new Ui(this.layers,this.zoom,(e=>/^icon/.test(e)))),this.glyphOffsetArray=new w,this.lineVertexArray=new k,this.symbolInstances=new b,this.textAnchorOffsets=new z}calculateGlyphDependencies(e,i,l,h,g){for(let y of e)if(i[y.codePointAt(0)]=!0,(l||h)&&g){let x=Ah[y];x&&(i[x.codePointAt(0)]=!0)}}populate(e,i,l){let h=this.layers[0],g=h.layout,y=g.get("text-font"),x=g.get("text-field"),S=g.get("icon-image"),P=(x.value.kind!=="constant"||x.value.value instanceof Hr&&!x.value.value.isEmpty()||x.value.value.toString().length>0)&&(y.value.kind!=="constant"||y.value.value.length>0),A=S.value.kind!=="constant"||!!S.value.value||Object.keys(S.parameters).length>0,O=g.get("symbol-sort-key");if(this.features=[],!P&&!A)return;let R=i.iconDependencies,F=i.glyphDependencies,V=i.availableImages,W=new Ti(this.zoom);for(let{feature:Z,id:K,index:ue,sourceLayerIndex:ee}of e){let ne=h._featureFilter.needGeometry,de=Ao(Z,ne);if(!h._featureFilter.filter(W,de,l))continue;let fe,Pe;if(ne||(de.geometry=Eo(Z)),P){let Ne=h.getValueAndResolveTokens("text-field",de,l,V),$e=Hr.factory(Ne),tt=this.hasRTLText=this.hasRTLText||pA($e);(!tt||us.getRTLTextPluginStatus()==="unavailable"||tt&&us.isParsed())&&(fe=GE($e,h,de))}if(A){let Ne=h.getValueAndResolveTokens("icon-image",de,l,V);Pe=Ne instanceof Nr?Ne:Nr.fromString(Ne)}if(!fe&&!Pe)continue;let Ge=this.sortFeaturesByKey?O.evaluate(de,{},l):void 0;if(this.features.push({id:K,text:fe,icon:Pe,index:ue,sourceLayerIndex:ee,geometry:de.geometry,properties:Z.properties,type:kh.types[Z.type],sortKey:Ge}),Pe&&(R[Pe.name]=!0),fe){let Ne=y.evaluate(de,{},l).join(","),$e=g.get("text-rotation-alignment")!=="viewport"&&g.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(f.aA.vertical)>=0;for(let tt of fe.sections)if(tt.image)R[tt.image.name]=!0;else{let Ye=wo(fe.toString()),Ve=tt.fontStack||Ne,Be=F[Ve]=F[Ve]||{};this.calculateGlyphDependencies(tt.text,Be,$e,this.allowVerticalPlacement,Ye)}}}g.get("symbol-placement")==="line"&&(this.features=(function(Z){let K={},ue={},ee=[],ne=0;function de(Ne){ee.push(Z[Ne]),ne++}function fe(Ne,$e,tt){let Ye=ue[Ne];return delete ue[Ne],ue[$e]=Ye,ee[Ye].geometry[0].pop(),ee[Ye].geometry[0]=ee[Ye].geometry[0].concat(tt[0]),Ye}function Pe(Ne,$e,tt){let Ye=K[$e];return delete K[$e],K[Ne]=Ye,ee[Ye].geometry[0].shift(),ee[Ye].geometry[0]=tt[0].concat(ee[Ye].geometry[0]),Ye}function Ge(Ne,$e,tt){let Ye=tt?$e[0][$e[0].length-1]:$e[0][0];return`${Ne}:${Ye.x}:${Ye.y}`}for(let Ne=0;Ne<Z.length;Ne++){let $e=Z[Ne],tt=$e.geometry,Ye=$e.text?$e.text.toString():null;if(!Ye){de(Ne);continue}let Ve=Ge(Ye,tt),Be=Ge(Ye,tt,!0);if(Ve in ue&&Be in K&&ue[Ve]!==K[Be]){let lt=Pe(Ve,Be,tt),nt=fe(Ve,Be,ee[lt].geometry);delete K[Ve],delete ue[Be],ue[Ge(Ye,ee[nt].geometry,!0)]=nt,ee[lt].geometry=null}else Ve in ue?fe(Ve,Be,tt):Be in K?Pe(Ve,Be,tt):(de(Ne),K[Ve]=ne-1,ue[Be]=ne-1)}return ee.filter((Ne=>Ne.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((Z,K)=>Z.sortKey-K.sortKey))}update(e,i,l){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,i,this.layers,{imagePositions:l}),this.icon.programConfigurations.updatePaintArrays(e,i,this.layers,{imagePositions:l}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,i){let l=this.lineVertexArray.length;if(e.segment!==void 0){let h=e.dist(i[e.segment+1]),g=e.dist(i[e.segment]),y={};for(let x=e.segment+1;x<i.length;x++)y[x]={x:i[x].x,y:i[x].y,tileUnitDistanceFromAnchor:h},x<i.length-1&&(h+=i[x+1].dist(i[x]));for(let x=e.segment||0;x>=0;x--)y[x]={x:i[x].x,y:i[x].y,tileUnitDistanceFromAnchor:g},x>0&&(g+=i[x-1].dist(i[x]));for(let x=0;x<i.length;x++){let S=y[x];this.lineVertexArray.emplaceBack(S.x,S.y,S.tileUnitDistanceFromAnchor)}}return{lineStartIndex:l,lineLength:this.lineVertexArray.length-l}}addSymbols(e,i,l,h,g,y,x,S,P,A,O,R){let F=e.indexArray,V=e.layoutVertexArray,W=e.segments.prepareSegment(4*i.length,V,F,this.canOverlap?y.sortKey:void 0),Z=this.glyphOffsetArray.length,K=W.vertexLength,ue=this.allowVerticalPlacement&&x===f.aA.vertical?Math.PI/2:0,ee=y.text&&y.text.sections;for(let ne=0;ne<i.length;ne++){let{tl:de,tr:fe,bl:Pe,br:Ge,tex:Ne,pixelOffsetTL:$e,pixelOffsetBR:tt,minFontScaleX:Ye,minFontScaleY:Ve,glyphOffset:Be,isSDF:lt,sectionIndex:nt}=i[ne],ut=W.vertexLength,rt=Be[1];Xd(V,S.x,S.y,de.x,rt+de.y,Ne.x,Ne.y,l,lt,$e.x,$e.y,Ye,Ve),Xd(V,S.x,S.y,fe.x,rt+fe.y,Ne.x+Ne.w,Ne.y,l,lt,tt.x,$e.y,Ye,Ve),Xd(V,S.x,S.y,Pe.x,rt+Pe.y,Ne.x,Ne.y+Ne.h,l,lt,$e.x,tt.y,Ye,Ve),Xd(V,S.x,S.y,Ge.x,rt+Ge.y,Ne.x+Ne.w,Ne.y+Ne.h,l,lt,tt.x,tt.y,Ye,Ve),lm(e.dynamicLayoutVertexArray,S,ue),F.emplaceBack(ut,ut+2,ut+1),F.emplaceBack(ut+1,ut+2,ut+3),W.vertexLength+=4,W.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Be[0]),ne!==i.length-1&&nt===i[ne+1].sectionIndex||e.programConfigurations.populatePaintArrays(V.length,y,y.index,{imagePositions:{},canonical:R,formattedSection:ee&&ee[nt]})}e.placedSymbolArray.emplaceBack(S.x,S.y,Z,this.glyphOffsetArray.length-Z,K,P,A,S.segment,l?l[0]:0,l?l[1]:0,h[0],h[1],x,0,!1,0,O)}_addCollisionDebugVertex(e,i,l,h,g,y){return i.emplaceBack(0,0),e.emplaceBack(l.x,l.y,h,g,Math.round(y.x),Math.round(y.y))}addCollisionDebugVertices(e,i,l,h,g,y,x){let S=g.segments.prepareSegment(4,g.layoutVertexArray,g.indexArray),P=S.vertexLength,A=g.layoutVertexArray,O=g.collisionVertexArray,R=x.anchorX,F=x.anchorY;this._addCollisionDebugVertex(A,O,y,R,F,new T(e,i)),this._addCollisionDebugVertex(A,O,y,R,F,new T(l,i)),this._addCollisionDebugVertex(A,O,y,R,F,new T(l,h)),this._addCollisionDebugVertex(A,O,y,R,F,new T(e,h)),S.vertexLength+=4;let V=g.indexArray;V.emplaceBack(P,P+1),V.emplaceBack(P+1,P+2),V.emplaceBack(P+2,P+3),V.emplaceBack(P+3,P),S.primitiveLength+=4}addDebugCollisionBoxes(e,i,l,h){for(let g=e;g<i;g++){let y=this.collisionBoxArray.get(g);this.addCollisionDebugVertices(y.x1,y.y1,y.x2,y.y2,h?this.textCollisionBox:this.iconCollisionBox,y.anchorPoint,l)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new um(pe,ev.members,Ie),this.iconCollisionBox=new um(pe,ev.members,Ie);for(let e=0;e<this.symbolInstances.length;e++){let i=this.symbolInstances.get(e);this.addDebugCollisionBoxes(i.textBoxStartIndex,i.textBoxEndIndex,i,!0),this.addDebugCollisionBoxes(i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i,!0),this.addDebugCollisionBoxes(i.iconBoxStartIndex,i.iconBoxEndIndex,i,!1),this.addDebugCollisionBoxes(i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex,i,!1)}}_deserializeCollisionBoxesForSymbol(e,i,l,h,g,y,x,S,P){let A={};for(let O=i;O<l;O++){let R=e.get(O);A.textBox={x1:R.x1,y1:R.y1,x2:R.x2,y2:R.y2,anchorPointX:R.anchorPointX,anchorPointY:R.anchorPointY},A.textFeatureIndex=R.featureIndex;break}for(let O=h;O<g;O++){let R=e.get(O);A.verticalTextBox={x1:R.x1,y1:R.y1,x2:R.x2,y2:R.y2,anchorPointX:R.anchorPointX,anchorPointY:R.anchorPointY},A.verticalTextFeatureIndex=R.featureIndex;break}for(let O=y;O<x;O++){let R=e.get(O);A.iconBox={x1:R.x1,y1:R.y1,x2:R.x2,y2:R.y2,anchorPointX:R.anchorPointX,anchorPointY:R.anchorPointY},A.iconFeatureIndex=R.featureIndex;break}for(let O=S;O<P;O++){let R=e.get(O);A.verticalIconBox={x1:R.x1,y1:R.y1,x2:R.x2,y2:R.y2,anchorPointX:R.anchorPointX,anchorPointY:R.anchorPointY},A.verticalIconFeatureIndex=R.featureIndex;break}return A}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let i=0;i<this.symbolInstances.length;i++){let l=this.symbolInstances.get(i);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,l.textBoxStartIndex,l.textBoxEndIndex,l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l.iconBoxStartIndex,l.iconBoxEndIndex,l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,i){let l=e.placedSymbolArray.get(i),h=l.vertexStartIndex+4*l.numGlyphs;for(let g=l.vertexStartIndex;g<h;g+=4)e.indexArray.emplaceBack(g,g+2,g+1),e.indexArray.emplaceBack(g+1,g+2,g+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;let i=Math.sin(e),l=Math.cos(e),h=[],g=[],y=[];for(let x=0;x<this.symbolInstances.length;++x){y.push(x);let S=this.symbolInstances.get(x);h.push(0|Math.round(i*S.anchorX+l*S.anchorY)),g.push(S.featureIndex)}return y.sort(((x,S)=>h[x]-h[S]||g[S]-g[x])),y}addToSortKeyRanges(e,i){let l=this.sortKeyRanges[this.sortKeyRanges.length-1];l&&l.sortKey===i?l.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:i,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(let i of this.symbolInstanceIndexes){let l=this.symbolInstances.get(i);this.featureSortOrder.push(l.featureIndex),[l.rightJustifiedTextSymbolIndex,l.centerJustifiedTextSymbolIndex,l.leftJustifiedTextSymbolIndex].forEach(((h,g,y)=>{h>=0&&y.indexOf(h)===g&&this.addIndicesForPlacedSymbol(this.text,h)})),l.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,l.verticalPlacedTextSymbolIndex),l.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,l.placedIconSymbolIndex),l.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,l.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let fv,mv;at("SymbolBucket",tu,{omit:["layers","collisionBoxArray","features","compareText"]}),tu.MAX_GLYPHS=65535,tu.addDynamicAttributes=lm;var hm={get paint(){return mv=mv||new pn({"icon-opacity":new wt(ze.paint_symbol["icon-opacity"]),"icon-color":new wt(ze.paint_symbol["icon-color"]),"icon-halo-color":new wt(ze.paint_symbol["icon-halo-color"]),"icon-halo-width":new wt(ze.paint_symbol["icon-halo-width"]),"icon-halo-blur":new wt(ze.paint_symbol["icon-halo-blur"]),"icon-translate":new gt(ze.paint_symbol["icon-translate"]),"icon-translate-anchor":new gt(ze.paint_symbol["icon-translate-anchor"]),"text-opacity":new wt(ze.paint_symbol["text-opacity"]),"text-color":new wt(ze.paint_symbol["text-color"],{runtimeType:$r,getOverride:r=>r.textColor,hasOverride:r=>!!r.textColor}),"text-halo-color":new wt(ze.paint_symbol["text-halo-color"]),"text-halo-width":new wt(ze.paint_symbol["text-halo-width"]),"text-halo-blur":new wt(ze.paint_symbol["text-halo-blur"]),"text-translate":new gt(ze.paint_symbol["text-translate"]),"text-translate-anchor":new gt(ze.paint_symbol["text-translate-anchor"])})},get layout(){return fv=fv||new pn({"symbol-placement":new gt(ze.layout_symbol["symbol-placement"]),"symbol-spacing":new gt(ze.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new gt(ze.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new wt(ze.layout_symbol["symbol-sort-key"]),"symbol-z-order":new gt(ze.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new gt(ze.layout_symbol["icon-allow-overlap"]),"icon-overlap":new gt(ze.layout_symbol["icon-overlap"]),"icon-ignore-placement":new gt(ze.layout_symbol["icon-ignore-placement"]),"icon-optional":new gt(ze.layout_symbol["icon-optional"]),"icon-rotation-alignment":new gt(ze.layout_symbol["icon-rotation-alignment"]),"icon-size":new wt(ze.layout_symbol["icon-size"]),"icon-text-fit":new gt(ze.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new gt(ze.layout_symbol["icon-text-fit-padding"]),"icon-image":new wt(ze.layout_symbol["icon-image"]),"icon-rotate":new wt(ze.layout_symbol["icon-rotate"]),"icon-padding":new wt(ze.layout_symbol["icon-padding"]),"icon-keep-upright":new gt(ze.layout_symbol["icon-keep-upright"]),"icon-offset":new wt(ze.layout_symbol["icon-offset"]),"icon-anchor":new wt(ze.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new gt(ze.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new gt(ze.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new gt(ze.layout_symbol["text-rotation-alignment"]),"text-field":new wt(ze.layout_symbol["text-field"]),"text-font":new wt(ze.layout_symbol["text-font"]),"text-size":new wt(ze.layout_symbol["text-size"]),"text-max-width":new wt(ze.layout_symbol["text-max-width"]),"text-line-height":new gt(ze.layout_symbol["text-line-height"]),"text-letter-spacing":new wt(ze.layout_symbol["text-letter-spacing"]),"text-justify":new wt(ze.layout_symbol["text-justify"]),"text-radial-offset":new wt(ze.layout_symbol["text-radial-offset"]),"text-variable-anchor":new gt(ze.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new wt(ze.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new wt(ze.layout_symbol["text-anchor"]),"text-max-angle":new gt(ze.layout_symbol["text-max-angle"]),"text-writing-mode":new gt(ze.layout_symbol["text-writing-mode"]),"text-rotate":new wt(ze.layout_symbol["text-rotate"]),"text-padding":new gt(ze.layout_symbol["text-padding"]),"text-keep-upright":new gt(ze.layout_symbol["text-keep-upright"]),"text-transform":new wt(ze.layout_symbol["text-transform"]),"text-offset":new wt(ze.layout_symbol["text-offset"]),"text-allow-overlap":new gt(ze.layout_symbol["text-allow-overlap"]),"text-overlap":new gt(ze.layout_symbol["text-overlap"]),"text-ignore-placement":new gt(ze.layout_symbol["text-ignore-placement"]),"text-optional":new gt(ze.layout_symbol["text-optional"])})}};class gv{constructor(e){if(e.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=e.property.overrides?e.property.overrides.runtimeType:sn,this.defaultValue=e}evaluate(e){if(e.formattedSection){let i=this.defaultValue.property.overrides;if(i&&i.hasOverride(e.formattedSection))return i.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}at("FormatSectionOverride",gv,{omit:["defaultValue"]});class Kd extends Rn{constructor(e,i){super(e,hm,i)}recalculate(e,i){if(super.recalculate(e,i),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){let l=this.layout.get("text-writing-mode");if(l){let h=[];for(let g of l)h.indexOf(g)<0&&h.push(g);this.layout._values["text-writing-mode"]=h}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(e,i,l,h){let g=this.layout.get(e).evaluate(i,{},l,h),y=this._unevaluatedLayout._values[e];return y.isDataDriven()||Ws(y.value)||!g?g:(function(x,S){return S.replace(/{([^{}]+)}/g,((P,A)=>x&&A in x?String(x[A]):""))})(i.properties,g)}createBucket(e){return new tu(e)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(let e of hm.paint.overridableProperties){if(!Kd.hasPaintOverride(this.layout,e))continue;let i=this.paint.get(e),l=new gv(i),h=new nl(l,i.property.specification),g=null;g=i.value.kind==="constant"||i.value.kind==="source"?new v("source",h):new C("composite",h,i.value.zoomStops),this.paint._values[e]=new Da(i.property,g,i.parameters)}}_handleOverridablePaintPropertyUpdate(e,i,l){return!(!this.layout||i.isDataDriven()||l.isDataDriven())&&Kd.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,i){let l=e.get("text-field"),h=hm.paint.properties[i],g=!1,y=x=>{for(let S of x)if(h.overrides&&h.overrides.hasOverride(S))return void(g=!0)};if(l.value.kind==="constant"&&l.value.value instanceof Hr)y(l.value.value.sections);else if(l.value.kind==="source"||l.value.kind==="composite"){let x=P=>{g||(P instanceof Mn&&Kt(P.value)===xs?y(P.value.sections):P instanceof ho?y(P.sections):P.eachChild(x))},S=l.value;S._styleExpression&&x(S._styleExpression.expression)}return g}}let yv;var fA={get paint(){return yv=yv||new pn({"background-color":new gt(ze.paint_background["background-color"]),"background-pattern":new ah(ze.paint_background["background-pattern"]),"background-opacity":new gt(ze.paint_background["background-opacity"])})}};class mA extends Rn{constructor(e,i){super(e,fA,i)}}class gA extends Rn{constructor(e,i){super(e,{},i),this.onAdd=l=>{this.implementation.onAdd&&this.implementation.onAdd(l,l.painter.context.gl)},this.onRemove=l=>{this.implementation.onRemove&&this.implementation.onRemove(l,l.painter.context.gl)},this.implementation=e}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class yA{constructor(e){this._methodToThrottle=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}let _A={once:!0},dm=63710088e-1;class ml{constructor(e,i){if(isNaN(e)||isNaN(i))throw new Error(`Invalid LngLat object: (${e}, ${i})`);if(this.lng=+e,this.lat=+i,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ml(gr(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){let i=Math.PI/180,l=this.lat*i,h=e.lat*i,g=Math.sin(l)*Math.sin(h)+Math.cos(l)*Math.cos(h)*Math.cos((e.lng-this.lng)*i);return dm*Math.acos(Math.min(g,1))}static convert(e){if(e instanceof ml)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new ml(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new ml(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}let _v=2*Math.PI*dm;function vv(r){return _v*Math.cos(r*Math.PI/180)}function bv(r){return(180+r)/360}function xv(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function wv(r,e){return r/vv(e)}function Sv(r){return 360*r-180}function Jd(r){return 360/Math.PI*Math.atan(Math.exp((180-360*r)*Math.PI/180))-90}function Tv(r,e){return r*vv(Jd(e))}class Mh{constructor(e,i,l=0){this.x=+e,this.y=+i,this.z=+l}static fromLngLat(e,i=0){let l=ml.convert(e);return new Mh(bv(l.lng),xv(l.lat),wv(i,l.lat))}toLngLat(){return new ml(Sv(this.x),Jd(this.y))}toAltitude(){return Tv(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/_v*(e=Jd(this.y),1/Math.cos(e*Math.PI/180));var e}}function Cv(r,e,i){var l=2*Math.PI*6378137/256/Math.pow(2,i);return[r*l-2*Math.PI*6378137/2,e*l-2*Math.PI*6378137/2]}class pm{constructor(e,i,l){if(!(function(h,g,y){return!(h<0||h>25||y<0||y>=Math.pow(2,h)||g<0||g>=Math.pow(2,h))})(e,i,l))throw new Error(`x=${i}, y=${l}, z=${e} outside of bounds. 0<=x<${Math.pow(2,e)}, 0<=y<${Math.pow(2,e)} 0<=z<=25 `);this.z=e,this.x=i,this.y=l,this.key=iu(0,e,e,i,l)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,i,l){let h=(function(y,x,S){var P=Cv(256*y,256*(x=Math.pow(2,S)-x-1),S),A=Cv(256*(y+1),256*(x+1),S);return P[0]+","+P[1]+","+A[0]+","+A[1]})(this.x,this.y,this.z),g=(function(y,x,S){let P,A="";for(let O=y;O>0;O--)P=1<<O-1,A+=(x&P?1:0)+(S&P?2:0);return A})(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(l==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,i>1?"@2x":"").replace(/{quadkey}/g,g).replace(/{bbox-epsg-3857}/g,h)}isChildOf(e){let i=this.z-e.z;return i>0&&e.x===this.x>>i&&e.y===this.y>>i}getTilePoint(e){let i=Math.pow(2,this.z);return new T((e.x*i-this.x)*ei,(e.y*i-this.y)*ei)}toString(){return`${this.z}/${this.x}/${this.y}`}}class kv{constructor(e,i){this.wrap=e,this.canonical=i,this.key=iu(e,i.z,i.z,i.x,i.y)}}class _a{constructor(e,i,l,h,g){if(this.terrainRttPosMatrix32f=null,e<l)throw new Error(`overscaledZ should be >= z; overscaledZ = ${e}; z = ${l}`);this.overscaledZ=e,this.wrap=i,this.canonical=new pm(l,+h,+g),this.key=iu(i,e,l,h,g)}clone(){return new _a(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);let i=this.canonical.z-e;return e>this.canonical.z?new _a(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new _a(e,this.wrap,e,this.canonical.x>>i,this.canonical.y>>i)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(e,i){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);let l=this.canonical.z-e;return e>this.canonical.z?iu(this.wrap*+i,e,this.canonical.z,this.canonical.x,this.canonical.y):iu(this.wrap*+i,e,e,this.canonical.x>>l,this.canonical.y>>l)}isChildOf(e){if(e.wrap!==this.wrap||this.overscaledZ-e.overscaledZ<=0)return!1;if(e.overscaledZ===0)return this.overscaledZ>0;let i=this.canonical.z-e.canonical.z;return!(i<0)&&e.canonical.x===this.canonical.x>>i&&e.canonical.y===this.canonical.y>>i}children(e){if(this.overscaledZ>=e)return[new _a(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];let i=this.canonical.z+1,l=2*this.canonical.x,h=2*this.canonical.y;return[new _a(i,this.wrap,i,l,h),new _a(i,this.wrap,i,l+1,h),new _a(i,this.wrap,i,l,h+1),new _a(i,this.wrap,i,l+1,h+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new _a(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new _a(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new kv(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(e){return this.canonical.getTilePoint(new Mh(e.x-this.wrap,e.y))}}function iu(r,e,i,l,h){(r*=2)<0&&(r=-1*r-1);let g=1<<i;return(g*g*r+g*h+l).toString(36)+i.toString(36)+e.toString(36)}function Ih(r,e){return e?r.properties[e]:r.id}function vA(r,e){let i={id:r.id};if(e.removeAllProperties&&(delete r.removeProperties,delete r.addOrUpdateProperties,delete e.removeProperties),e.removeProperties)for(let l of e.removeProperties){let h=r.addOrUpdateProperties.findIndex((g=>g.key===l));h>-1&&r.addOrUpdateProperties.splice(h,1)}return(r.removeAllProperties||e.removeAllProperties)&&(i.removeAllProperties=!0),(r.removeProperties||e.removeProperties)&&(i.removeProperties=[...r.removeProperties||[],...e.removeProperties||[]]),(r.addOrUpdateProperties||e.addOrUpdateProperties)&&(i.addOrUpdateProperties=[...r.addOrUpdateProperties||[],...e.addOrUpdateProperties||[]]),(r.newGeometry||e.newGeometry)&&(i.newGeometry=e.newGeometry||r.newGeometry),i}function Pv(r){var e,i;if(!r)return{};let l={};return l.removeAll=r.removeAll,l.remove=new Set(r.remove||[]),l.add=new Map((e=r.add)===null||e===void 0?void 0:e.map((h=>[h.id,h]))),l.update=new Map((i=r.update)===null||i===void 0?void 0:i.map((h=>[h.id,h]))),l}at("CanonicalTileID",pm),at("OverscaledTileID",_a,{omit:["terrainRttPosMatrix32f"]});class Ev{constructor(e){this._stringToNumber={},this._numberToString=[];for(let i=0;i<e.length;i++){let l=e[i];this._stringToNumber[l]=i,this._numberToString[i]=l}}encode(e){return this._stringToNumber[e]}decode(e){if(e>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${e} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[e]}}class Av{constructor(e,i,l,h,g){this.type="Feature",this._vectorTileFeature=e,this._x=l,this._y=h,this._z=i,this.properties=e.properties,this.id=g}projectPoint(e,i,l,h){return[360*(e.x+i)/h-180,360/Math.PI*Math.atan(Math.exp((1-2*(e.y+l)/h)*Math.PI))-90]}projectLine(e,i,l,h){return e.map((g=>this.projectPoint(g,i,l,h)))}get geometry(){if(this._geometry)return this._geometry;let e=this._vectorTileFeature,i=e.extent*Math.pow(2,this._z),l=e.extent*this._x,h=e.extent*this._y,g=e.loadGeometry();switch(e.type){case 1:{let y=[];for(let S of g)y.push(S[0]);let x=this.projectLine(y,l,h,i);this._geometry=y.length===1?{type:"Point",coordinates:x[0]}:{type:"MultiPoint",coordinates:x};break}case 2:{let y=g.map((x=>this.projectLine(x,l,h,i)));this._geometry=y.length===1?{type:"LineString",coordinates:y[0]}:{type:"MultiLineString",coordinates:y};break}case 3:{let y=G_(g),x=[];for(let S of y)x.push(S.map((P=>this.projectLine(P,l,h,i))));this._geometry=x.length===1?{type:"Polygon",coordinates:x[0]}:{type:"MultiPolygon",coordinates:x};break}default:throw new Error(`unknown feature type: ${e.type}`)}return this._geometry}set geometry(e){this._geometry=e}toJSON(){let e={geometry:this.geometry};for(let i in this)i!=="_geometry"&&i!=="_vectorTileFeature"&&i!=="_x"&&i!=="_y"&&i!=="_z"&&(e[i]=this[i]);return e}}class ru{_name;dataBuffer;nullabilityBuffer;_size;constructor(e,i,l){this._name=e,this.dataBuffer=i,typeof l=="number"?this._size=l:(this.nullabilityBuffer=l,this._size=l.size())}getValue(e){return this.nullabilityBuffer&&!this.nullabilityBuffer.get(e)?null:this.getValueFromBuffer(e)}has(e){return this.nullabilityBuffer&&this.nullabilityBuffer.get(e)||!this.nullabilityBuffer}get name(){return this._name}get size(){return this._size}}class Qd extends ru{}class fm extends Qd{getValueFromBuffer(e){return this.dataBuffer[e]}}class mm extends Qd{getValueFromBuffer(e){return this.dataBuffer[e]}}class Mv extends ru{delta;constructor(e,i,l,h){super(e,i,h),this.delta=l}}class gm extends Mv{constructor(e,i,l,h){super(e,Int32Array.of(i),l,h)}getValueFromBuffer(e){return this.dataBuffer[0]+e*this.delta}}class ym extends ru{constructor(e,i,l){super(e,Int32Array.of(i),l)}getValueFromBuffer(e){return this.dataBuffer[0]}}class bA{_name;_geometryVector;_idVector;_propertyVectors;_extent;propertyVectorsMap;constructor(e,i,l,h,g=4096){this._name=e,this._geometryVector=i,this._idVector=l,this._propertyVectors=h,this._extent=g}get name(){return this._name}get idVector(){return this._idVector}get geometryVector(){return this._geometryVector}get propertyVectors(){return this._propertyVectors}getPropertyVector(e){return this.propertyVectorsMap||(this.propertyVectorsMap=new Map(this._propertyVectors.map((i=>[i.name,i])))),this.propertyVectorsMap.get(e)}*[Symbol.iterator](){let e=this.geometryVector[Symbol.iterator](),i=0;for(;i<this.numFeatures;){let l;this.idVector&&(l=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(i)):this.idVector.getValue(i));let h=e?.next().value,g={};for(let y of this.propertyVectors){if(!y)continue;let x=y.name,S=y.getValue(i);S!==null&&(g[x]=S)}i++,yield{id:l,geometry:h,properties:g}}}get numFeatures(){return this.geometryVector.numGeometries}get extent(){return this._extent}getFeatures(){let e=[],i=this.geometryVector.getGeometries();for(let l=0;l<this.numFeatures;l++){let h;this.idVector&&(h=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(l)):this.idVector.getValue(l));let g={coordinates:i[l],type:this.geometryVector.geometryType(l)},y={};for(let x of this.propertyVectors){if(!x)continue;let S=x.name,P=x.getValue(l);P!==null&&(y[S]=P)}e.push({id:h,geometry:g,properties:y})}return e}containsMaxSaveIntegerValues(e){return e instanceof fm||e instanceof ym&&e instanceof gm||e instanceof mm}}class xA{value;constructor(e){this.value=e}get(){return this.value}set(e){this.value=e}increment(){return this.value++}add(e){this.value+=e}}var Qt,Io,Jr,ds,tc,ea,Ir,zr,Iv,va;function Gr(r,e,i){let l=new Int32Array(i),h=0,g=e.get();for(let y=0;y<l.length;y++){let x=r[g++],S=127&x;x<128||(x=r[g++],S|=(127&x)<<7,x<128||(x=r[g++],S|=(127&x)<<14,x<128||(x=r[g++],S|=(127&x)<<21,x<128||(x=r[g++],S|=(15&x)<<28)))),l[h++]=S}return e.set(g),l}function ep(r,e,i){let l=new BigInt64Array(i);for(let h=0;h<l.length;h++)l[h]=SA(r,e);return l}function wA(r,e){let i,l;return l=r[e.get()],e.increment(),i=127&l,l<128?i:(l=r[e.get()],e.increment(),i|=(127&l)<<7,l<128?i:(l=r[e.get()],e.increment(),i|=(127&l)<<14,l<128?i:(l=r[e.get()],e.increment(),i|=(127&l)<<21,l<128?i:(l=r[e.get()],i|=(15&l)<<28,(function(h,g,y){let x,S;if(S=g[y.get()],y.increment(),x=(112&S)>>4,S<128||(S=g[y.get()],y.increment(),x|=(127&S)<<3,S<128)||(S=g[y.get()],y.increment(),x|=(127&S)<<10,S<128)||(S=g[y.get()],y.increment(),x|=(127&S)<<17,S<128)||(S=g[y.get()],y.increment(),x|=(127&S)<<24,S<128)||(S=g[y.get()],y.increment(),x|=(1&S)<<31,S<128))return 4294967296*x+(h>>>0);throw new Error("Expected varint not more than 10 bytes")})(i,r,e)))))}function zv(r,e,i,l){throw new Error("FastPFor is not implemented yet.")}function ic(r){return r>>>1^-(1&r)}function nu(r){return r>>1n^-(1n&r)}function SA(r,e){let i=0n,l=0,h=e.get();for(;h<r.length;){let g=r[h++];if(i|=BigInt(127&g)<<BigInt(l),!(128&g))break;if(l+=7,l>=64)throw new Error("Varint too long")}return e.set(h),i}function Lv(r,e,i){let l=new Int32Array(i),h=0;for(let g=0;g<e;g++){let y=r[g];l.fill(r[g+e],h,h+y),h+=y}return l}function Ov(r,e,i){let l=new BigInt64Array(i),h=0;for(let g=0;g<e;g++){let y=Number(r[g]);l.fill(r[g+e],h,h+y),h+=y}return l}function Dv(r,e,i){let l=new Float64Array(i),h=0;for(let g=0;g<e;g++){let y=r[g];l.fill(r[g+e],h,h+y),h+=y}return l}function _m(r){let e=r.length/4*4,i=1;if(e>=4)for(let l=r[0];i<e-4;i+=4)l=r[i]+=l,l=r[i+1]+=l,l=r[i+2]+=l,l=r[i+3]+=l;for(;i!=r.length;)r[i]+=r[i-1],++i}function Rv(r){r[0]=r[0]>>>1^-(1&r[0]),r[1]=r[1]>>>1^-(1&r[1]);let e=r.length/4*4,i=2;if(e>=4)for(;i<e-4;i+=4){let l=r[i],h=r[i+1],g=r[i+2],y=r[i+3];r[i]=(l>>>1^-(1&l))+r[i-2],r[i+1]=(h>>>1^-(1&h))+r[i-1],r[i+2]=(g>>>1^-(1&g))+r[i],r[i+3]=(y>>>1^-(1&y))+r[i+1]}for(;i!=r.length;i+=2)r[i]=(r[i]>>>1^-(1&r[i]))+r[i-2],r[i+1]=(r[i+1]>>>1^-(1&r[i+1]))+r[i-1]}(function(r){r.NONE="NONE",r.DELTA="DELTA",r.COMPONENTWISE_DELTA="COMPONENTWISE_DELTA",r.RLE="RLE",r.MORTON="MORTON",r.PDE="PDE"})(Qt||(Qt={})),(function(r){r.NONE="NONE",r.FAST_PFOR="FAST_PFOR",r.VARINT="VARINT",r.ALP="ALP"})(Io||(Io={})),(function(r){r.PRESENT="PRESENT",r.DATA="DATA",r.OFFSET="OFFSET",r.LENGTH="LENGTH"})(Jr||(Jr={}));class vm{_dictionaryType;_offsetType;_lengthType;constructor(e,i,l){this._dictionaryType=e,this._offsetType=i,this._lengthType=l}get dictionaryType(){return this._dictionaryType}get offsetType(){return this._offsetType}get lengthType(){return this._lengthType}}function xn(r,e){let i=(function(l,h){let g=l[h.get()],y=Object.values(Jr)[g>>4],x=null;switch(y){case Jr.DATA:x=new vm(Object.values(ds)[15&g]);break;case Jr.OFFSET:x=new vm(null,Object.values(tc)[15&g]);break;case Jr.LENGTH:x=new vm(null,null,Object.values(ea)[15&g])}h.increment();let S=l[h.get()],P=Object.values(Qt)[S>>5],A=Object.values(Qt)[S>>2&7],O=Object.values(Io)[3&S];h.increment();let R=Gr(l,h,2),F=R[0];return{physicalStreamType:y,logicalStreamType:x,logicalLevelTechnique1:P,logicalLevelTechnique2:A,physicalLevelTechnique:O,numValues:F,byteLength:R[1],decompressedCount:F}})(r,e);return i.logicalLevelTechnique1===Qt.MORTON?(function(l,h,g){let y=Gr(h,g,2);return{physicalStreamType:l.physicalStreamType,logicalStreamType:l.logicalStreamType,logicalLevelTechnique1:l.logicalLevelTechnique1,logicalLevelTechnique2:l.logicalLevelTechnique2,physicalLevelTechnique:l.physicalLevelTechnique,numValues:l.numValues,byteLength:l.byteLength,decompressedCount:l.decompressedCount,numBits:y[0],coordinateShift:y[1]}})(i,r,e):Qt.RLE!==i.logicalLevelTechnique1&&Qt.RLE!==i.logicalLevelTechnique2||Io.NONE===i.physicalLevelTechnique?i:(function(l,h,g){let y=Gr(h,g,2);return{physicalStreamType:l.physicalStreamType,logicalStreamType:l.logicalStreamType,logicalLevelTechnique1:l.logicalLevelTechnique1,logicalLevelTechnique2:l.logicalLevelTechnique2,physicalLevelTechnique:l.physicalLevelTechnique,numValues:l.numValues,byteLength:l.byteLength,decompressedCount:y[1],runs:y[0],numRleValues:y[1]}})(i,r,e)}(function(r){r.NONE="NONE",r.SINGLE="SINGLE",r.SHARED="SHARED",r.VERTEX="VERTEX",r.MORTON="MORTON",r.FSST="FSST"})(ds||(ds={})),(function(r){r.VERTEX="VERTEX",r.INDEX="INDEX",r.STRING="STRING",r.KEY="KEY"})(tc||(tc={})),(function(r){r.VAR_BINARY="VAR_BINARY",r.GEOMETRIES="GEOMETRIES",r.PARTS="PARTS",r.RINGS="RINGS",r.TRIANGLES="TRIANGLES",r.SYMBOL="SYMBOL",r.DICTIONARY="DICTIONARY"})(ea||(ea={})),(function(r){r[r.FLAT=0]="FLAT",r[r.CONST=1]="CONST",r[r.SEQUENCE=2]="SEQUENCE",r[r.DICTIONARY=3]="DICTIONARY",r[r.FSST_DICTIONARY=4]="FSST_DICTIONARY"})(Ir||(Ir={}));class ps{values;_size;constructor(e,i){this.values=e,this._size=i}get(e){let i=Math.floor(e/8);return(this.values[i]>>e%8&1)==1}set(e,i){let l=Math.floor(e/8);this.values[l]=this.values[l]|(i?1:0)<<e%8}getInt(e){let i=Math.floor(e/8);return this.values[i]>>e%8&1}size(){return this._size}getBuffer(){return this.values}}function wn(r,e,i,l,h){return(function(g,y,x){switch(y.logicalLevelTechnique1){case Qt.DELTA:return y.logicalLevelTechnique2===Qt.RLE?(function(S,P,A){let O=new Int32Array(A),R=0,F=0;for(let V=0;V<P;V++){let W=S[V],Z=ic(S[V+P]);for(let K=0;K<W;K++)F+=Z,O[R++]=F}return O})(g,y.runs,y.numRleValues):((function(S){S[0]=S[0]>>>1^-(1&S[0]);let P=S.length/4*4,A=1;if(P>=4)for(;A<P-4;A+=4){let O=S[A],R=S[A+1],F=S[A+2],V=S[A+3];S[A]=(O>>>1^-(1&O))+S[A-1],S[A+1]=(R>>>1^-(1&R))+S[A],S[A+2]=(F>>>1^-(1&F))+S[A+1],S[A+3]=(V>>>1^-(1&V))+S[A+2]}for(;A!=S.length;++A)S[A]=(S[A]>>>1^-(1&S[A]))+S[A-1]})(g),g);case Qt.RLE:return(function(S,P,A){return A?(function(O,R,F){let V=new Int32Array(F),W=0;for(let Z=0;Z<R;Z++){let K=O[Z],ue=O[Z+R];ue=ue>>>1^-(1&ue),V.fill(ue,W,W+K),W+=K}return V})(S,P.runs,P.numRleValues):Lv(S,P.runs,P.numRleValues)})(g,y,x);case Qt.MORTON:return _m(g),g;case Qt.COMPONENTWISE_DELTA:return Rv(g),g;case Qt.NONE:return x&&(function(S){for(let P=0;P<S.length;P++){let A=S[P];S[P]=A>>>1^-(1&A)}})(g),g;default:throw new Error(`The specified Logical level technique is not supported: ${y.logicalLevelTechnique1}`)}})(tp(r,e,i),i,l)}function gl(r,e,i){return(function(l,h){if(h.logicalLevelTechnique1===Qt.DELTA&&h.logicalLevelTechnique2===Qt.NONE)return(function(y){let x=new Int32Array(y.length+1);x[0]=0,x[1]=ic(y[0]);let S=x[1],P=2;for(;P!=x.length;++P){let A=y[P-1];S+=A>>>1^-(1&A),x[P]=x[P-1]+S}return x})(l);if(h.logicalLevelTechnique1===Qt.RLE&&h.logicalLevelTechnique2===Qt.NONE)return(function(y,x,S){let P=new Int32Array(S+1);P[0]=0;let A=1,O=P[0];for(let R=0;R<x;R++){let F=y[R],V=y[R+x];for(let W=A;W<A+F;W++)P[W]=V+O,O=P[W];A+=F}return P})(l,h.runs,h.numRleValues);if(h.logicalLevelTechnique1===Qt.NONE&&h.logicalLevelTechnique2===Qt.NONE){(function(y){let x=0;for(let S=0;S<y.length;S++)y[S]+=x,x=y[S]})(l);let g=new Int32Array(h.numValues+1);return g[0]=0,g.set(l,1),g}if(h.logicalLevelTechnique1===Qt.DELTA&&h.logicalLevelTechnique2===Qt.RLE){let g=(function(y,x,S){let P=new Int32Array(S+1);P[0]=0;let A=1,O=P[0];for(let R=0;R<x;R++){let F=y[R],V=y[R+x];V=V>>>1^-(1&V);for(let W=A;W<A+F;W++)P[W]=V+O,O=P[W];A+=F}return P})(l,h.runs,h.numRleValues);return _m(g),g}throw new Error("Only delta encoding is supported for transforming length to offset streams yet.")})(tp(r,e,i),i)}function tp(r,e,i){let l=i.physicalLevelTechnique;if(l===Io.FAST_PFOR)return zv();if(l===Io.VARINT)return Gr(r,e,i.numValues);if(l===Io.NONE){let h=e.get();e.add(i.byteLength);let g=r.subarray(h,e.get());return new Int32Array(g)}throw new Error("Specified physicalLevelTechnique is not supported (yet).")}function bm(r,e,i,l){let h=tp(r,e,i);if(h.length===1){let g=h[0];return l?ic(g):g}return l?(function(g){return ic(g[1])})(h):(function(g){return g[1]})(h)}function Bv(r,e,i){return(function(l){if(l.length==2){let h=ic(l[1]);return[h,h]}return[ic(l[2]),ic(l[3])]})(tp(r,e,i))}function Fv(r,e,i){return(function(l){if(l.length==2){let h=nu(l[1]);return[h,h]}return[nu(l[2]),nu(l[3])]})(ep(r,e,i.numValues))}function jv(r,e,i,l){return(function(h,g,y){switch(g.logicalLevelTechnique1){case Qt.DELTA:return g.logicalLevelTechnique2===Qt.RLE?(function(x,S,P){let A=new BigInt64Array(P),O=0,R=0n;for(let F=0;F<S;F++){let V=Number(x[F]),W=nu(x[F+S]);for(let Z=0;Z<V;Z++)R+=W,A[O++]=R}return A})(h,g.runs,g.numRleValues):((function(x){x[0]=x[0]>>1n^-(1n&x[0]);let S=x.length/4*4,P=1;if(S>=4)for(;P<S-4;P+=4){let A=x[P],O=x[P+1],R=x[P+2],F=x[P+3];x[P]=(A>>1n^-(1n&A))+x[P-1],x[P+1]=(O>>1n^-(1n&O))+x[P],x[P+2]=(R>>1n^-(1n&R))+x[P+1],x[P+3]=(F>>1n^-(1n&F))+x[P+2]}for(;P!=x.length;++P)x[P]=(x[P]>>1n^-(1n&x[P]))+x[P-1]})(h),h);case Qt.RLE:return(function(x,S,P){return P?(function(A,O,R){let F=new BigInt64Array(R),V=0;for(let W=0;W<O;W++){let Z=Number(A[W]),K=A[W+O];K=K>>1n^-(1n&K),F.fill(K,V,V+Z),V+=Z}return F})(x,S.runs,S.numRleValues):Ov(x,S.runs,S.numRleValues)})(h,g,y);case Qt.NONE:return y&&(function(x){for(let S=0;S<x.length;S++){let P=x[S];x[S]=P>>1n^-(1n&P)}})(h),h;default:throw new Error(`The specified Logical level technique is not supported: ${g.logicalLevelTechnique1}`)}})(ep(r,e,i.numValues),i,l)}function Nv(r,e,i,l){let h=ep(r,e,i.numValues);if(h.length===1){let g=h[0];return l?nu(g):g}return l?(function(g){return nu(g[1])})(h):(function(g){return g[1]})(h)}function xm(r,e,i,l,h){return(function(g,y,x,S){switch(y.logicalLevelTechnique1){case Qt.DELTA:return y.logicalLevelTechnique2===Qt.RLE&&(g=Lv(g,y.runs,y.numRleValues)),(function(P,A){let O=new Int32Array(P.size()),R=0;P.get(0)?(O[0]=P.get(0)?A[0]>>>1^-(1&A[0]):0,R=1):O[0]=0;let F=1;for(;F!=O.length;++F)O[F]=P.get(F)?O[F-1]+(A[R]>>>1^-(1&A[R++])):O[F-1];return O})(S,g);case Qt.RLE:return(function(P,A,O,R){let F=A;return O?(function(V,W,Z){let K=new Int32Array(V.size()),ue=0;for(let ee=0;ee<Z;ee++){let ne=W[ee],de=W[ee+Z];de=de>>>1^-(1&de);for(let fe=ue;fe<ue+ne;fe++)V.get(fe)?K[fe]=de:(K[fe]=0,ue++);ue+=ne}return K})(R,P,F.runs):(function(V,W,Z){let K=new Int32Array(V.size()),ue=0;for(let ee=0;ee<Z;ee++){let ne=W[ee],de=W[ee+Z];for(let fe=ue;fe<ue+ne;fe++)V.get(fe)?K[fe]=de:(K[fe]=0,ue++);ue+=ne}return K})(R,P,F.runs)})(g,y,x,S);case Qt.MORTON:return _m(g),g;case Qt.COMPONENTWISE_DELTA:return Rv(g),g;case Qt.NONE:return g=x?(function(P,A){let O=new Int32Array(P.size()),R=0,F=0;for(;F!=O.length;++F)if(P.get(F)){let V=A[R++];O[F]=V>>>1^-(1&V)}else O[F]=0;return O})(S,g):(function(P,A){let O=new Int32Array(P.size()),R=0,F=0;for(;F!=O.length;++F)O[F]=P.get(F)?A[R++]:0;return O})(S,g),g;default:throw new Error("The specified Logical level technique is not supported")}})(i.physicalLevelTechnique===Io.FAST_PFOR?zv():Gr(r,e,i.numValues),i,l,h)}function ip(r,e,i,l){let h=r.logicalLevelTechnique1;if(h===Qt.RLE)return r.runs===1?Ir.CONST:Ir.FLAT;let g=e instanceof ps?e.size():e;if(h===Qt.DELTA&&r.logicalLevelTechnique2===Qt.RLE){let y=r.runs,x=2;if(r.numRleValues!==g)return Ir.FLAT;if(y===1)return Ir.SEQUENCE;if(y===2){let S=l.get(),P;if(r.physicalLevelTechnique===Io.VARINT)P=Gr(i,l,4);else{let A=l.get();P=new Int32Array(i.buffer,i.byteOffset+A,4)}if(l.set(S),P[2]===x&&P[3]===x)return Ir.SEQUENCE}}return r.numValues===1?Ir.CONST:Ir.FLAT}class qv extends Qd{getValueFromBuffer(e){return this.dataBuffer[e]}}class Vv extends Mv{constructor(e,i,l,h){super(e,BigInt64Array.of(i),l,h)}getValueFromBuffer(e){return this.dataBuffer[0]+BigInt(e)*this.delta}}class au{_geometryOffsets;_partOffsets;_ringOffsets;constructor(e,i,l){this._geometryOffsets=e,this._partOffsets=i,this._ringOffsets=l}get geometryOffsets(){return this._geometryOffsets}get partOffsets(){return this._partOffsets}get ringOffsets(){return this._ringOffsets}}function wm(r,e,i){return{x:Wv(r,e)-i,y:Wv(r>>1,e)-i}}function Wv(r,e){let i=0;for(let l=0;l<e;l++)i|=(r&1<<2*l)>>l;return i}(function(r){r[r.POINT=0]="POINT",r[r.LINESTRING=1]="LINESTRING",r[r.POLYGON=2]="POLYGON",r[r.MULTIPOINT=3]="MULTIPOINT",r[r.MULTILINESTRING=4]="MULTILINESTRING",r[r.MULTIPOLYGON=5]="MULTIPOLYGON"})(zr||(zr={})),(function(r){r[r.POINT=0]="POINT",r[r.LINESTRING=1]="LINESTRING",r[r.POLYGON=2]="POLYGON"})(Iv||(Iv={})),(function(r){r[r.MORTON=0]="MORTON",r[r.VEC_2=1]="VEC_2",r[r.VEC_3=2]="VEC_3"})(va||(va={}));class TA{createPoint(e){return[[e]]}createMultiPoint(e){return e.map((i=>[i]))}createLineString(e){return[e]}createMultiLineString(e){return e}createPolygon(e,i){return[e].concat(i)}createMultiPolygon(e){return e.flat()}}function Gv(r){let e=new Array(r.numGeometries),i=1,l=1,h=1,g=0,y=new TA,x=0,S=0,P=r.mortonSettings,A=r.topologyVector,O=A.geometryOffsets,R=A.partOffsets,F=A.ringOffsets,V=r.vertexOffsets,W=r.containsPolygonGeometry(),Z=r.vertexBuffer;for(let K=0;K<r.numGeometries;K++){let ue=r.geometryType(K);if(ue===zr.POINT){if(V&&V.length!==0)if(r.vertexBufferType===va.VEC_2){let ee=2*V[S++],ne=new T(Z[ee],Z[ee+1]);e[g++]=y.createPoint(ne)}else{let ee=wm(Z[V[S++]],P.numBits,P.coordinateShift),ne=new T(ee.x,ee.y);e[g++]=y.createPoint(ne)}else{let ee=new T(Z[x++],Z[x++]);e[g++]=y.createPoint(ee)}O&&h++,R&&i++,F&&l++}else if(ue===zr.MULTIPOINT){let ee=O[h]-O[h-1];h++;let ne=new Array(ee);if(V&&V.length!==0){for(let de=0;de<ee;de++){let fe=2*V[S++];ne[de]=new T(Z[fe],Z[fe+1])}e[g++]=y.createMultiPoint(ne)}else{for(let de=0;de<ee;de++){let fe=Z[x++],Pe=Z[x++];ne[de]=new T(fe,Pe)}e[g++]=y.createMultiPoint(ne)}}else if(ue===zr.LINESTRING){let ee,ne=0;W?(ne=F[l]-F[l-1],l++):ne=R[i]-R[i-1],i++,V&&V.length!==0?(ee=r.vertexBufferType===va.VEC_2?Tm(Z,V,S,ne,!1):Cm(Z,V,S,ne,!1,P),S+=ne):(ee=Sm(Z,x,ne,!1),x+=2*ne),e[g++]=y.createLineString(ee),O&&h++}else if(ue===zr.POLYGON){let ee=R[i]-R[i-1];i++;let ne=new Array(ee-1),de=F[l]-F[l-1];if(l++,V&&V.length!==0){let fe=r.vertexBufferType===va.VEC_2?np(Z,V,S,de):ap(Z,V,S,de,0,P);S+=de;for(let Pe=0;Pe<ne.length;Pe++)de=F[l]-F[l-1],l++,ne[Pe]=r.vertexBufferType===va.VEC_2?np(Z,V,S,de):ap(Z,V,S,de,0,P),S+=de;e[g++]=y.createPolygon(fe,ne)}else{let fe=rp(Z,x,de);x+=2*de;for(let Pe=0;Pe<ne.length;Pe++)de=F[l]-F[l-1],l++,ne[Pe]=rp(Z,x,de),x+=2*de;e[g++]=y.createPolygon(fe,ne)}O&&h++}else if(ue===zr.MULTILINESTRING){let ee=O[h]-O[h-1];h++;let ne=new Array(ee);if(V&&V.length!==0){for(let de=0;de<ee;de++){let fe=0;W?(fe=F[l]-F[l-1],l++):fe=R[i]-R[i-1],i++;let Pe=r.vertexBufferType===va.VEC_2?Tm(Z,V,S,fe,!1):Cm(Z,V,S,fe,!1,P);ne[de]=Pe,S+=fe}e[g++]=y.createMultiLineString(ne)}else{for(let de=0;de<ee;de++){let fe=0;W?(fe=F[l]-F[l-1],l++):fe=R[i]-R[i-1],i++,ne[de]=Sm(Z,x,fe,!1),x+=2*fe}e[g++]=y.createMultiLineString(ne)}}else{if(ue!==zr.MULTIPOLYGON)throw new Error("The specified geometry type is currently not supported.");{let ee=O[h]-O[h-1];h++;let ne=new Array(ee),de=0;if(V&&V.length!==0){for(let fe=0;fe<ee;fe++){let Pe=R[i]-R[i-1];i++;let Ge=new Array(Pe-1);de=F[l]-F[l-1],l++;let Ne=r.vertexBufferType===va.VEC_2?np(Z,V,S,de):ap(Z,V,S,de,0,P);S+=de;for(let $e=0;$e<Ge.length;$e++)de=F[l]-F[l-1],l++,Ge[$e]=r.vertexBufferType===va.VEC_2?np(Z,V,S,de):ap(Z,V,S,de,0,P),S+=de;ne[fe]=y.createPolygon(Ne,Ge)}e[g++]=y.createMultiPolygon(ne)}else{for(let fe=0;fe<ee;fe++){let Pe=R[i]-R[i-1];i++;let Ge=new Array(Pe-1);de=F[l]-F[l-1],l++;let Ne=rp(Z,x,de);x+=2*de;for(let $e=0;$e<Ge.length;$e++){let tt=F[l]-F[l-1];l++,Ge[$e]=rp(Z,x,tt),x+=2*tt}ne[fe]=y.createPolygon(Ne,Ge)}e[g++]=y.createMultiPolygon(ne)}}}}return e}function rp(r,e,i){return Sm(r,e,i,!0)}function np(r,e,i,l){return Tm(r,e,i,l,!0)}function ap(r,e,i,l,h,g){return Cm(r,e,i,l,!0,g)}function Sm(r,e,i,l){let h=new Array(l?i+1:i);for(let g=0;g<2*i;g+=2)h[g/2]=new T(r[e+g],r[e+g+1]);return l&&(h[h.length-1]=h[0]),h}function Tm(r,e,i,l,h){let g=new Array(h?l+1:l);for(let y=0;y<2*l;y+=2){let x=2*e[i+y/2];g[y/2]=new T(r[x],r[x+1])}return h&&(g[g.length-1]=g[0]),g}function Cm(r,e,i,l,h,g){let y=new Array(h?l+1:l);for(let x=0;x<l;x++){let S=wm(r[e[i+x]],g.numBits,g.coordinateShift);y[x]=new T(S.x,S.y)}return h&&(y[y.length-1]=y[0]),y}class Uv{_vertexBufferType;_topologyVector;_vertexOffsets;_vertexBuffer;_mortonSettings;constructor(e,i,l,h,g){this._vertexBufferType=e,this._topologyVector=i,this._vertexOffsets=l,this._vertexBuffer=h,this._mortonSettings=g}get vertexBufferType(){return this._vertexBufferType}get topologyVector(){return this._topologyVector}get vertexOffsets(){return this._vertexOffsets}get vertexBuffer(){return this._vertexBuffer}*[Symbol.iterator](){let e=Gv(this),i=0;for(;i<this.numGeometries;)yield{coordinates:e[i],type:this.geometryType(i)},i++}getSimpleEncodedVertex(e){let i=this.vertexOffsets?2*this.vertexOffsets[e]:2*e;return[this.vertexBuffer[i],this.vertexBuffer[i+1]]}getVertex(e){if(this.vertexOffsets&&this.mortonSettings){let l=wm(this.vertexBuffer[this.vertexOffsets[e]],this.mortonSettings.numBits,this.mortonSettings.coordinateShift);return[l.x,l.y]}let i=this.vertexOffsets?2*this.vertexOffsets[e]:2*e;return[this.vertexBuffer[i],this.vertexBuffer[i+1]]}getGeometries(){return Gv(this)}get mortonSettings(){return this._mortonSettings}}class Zv extends Uv{_numGeometries;_geometryType;constructor(e,i,l,h,g,y,x){super(l,h,g,y,x),this._numGeometries=e,this._geometryType=i}geometryType(e){return this._geometryType}get numGeometries(){return this._numGeometries}containsPolygonGeometry(){return this._geometryType===zr.POLYGON||this._geometryType===zr.MULTIPOLYGON}containsSingleGeometryType(){return!0}}class $v extends Uv{_geometryTypes;constructor(e,i,l,h,g,y){super(e,l,h,g,y),this._geometryTypes=i}geometryType(e){return this._geometryTypes[e]}get numGeometries(){return this._geometryTypes.length}containsPolygonGeometry(){for(let e=0;e<this.numGeometries;e++)if(this.geometryType(e)===zr.POLYGON||this.geometryType(e)===zr.MULTIPOLYGON)return!0;return!1}containsSingleGeometryType(){return!1}}class Hv{_triangleOffsets;_indexBuffer;_vertexBuffer;_topologyVector;constructor(e,i,l,h){this._triangleOffsets=e,this._indexBuffer=i,this._vertexBuffer=l,this._topologyVector=h}get triangleOffsets(){return this._triangleOffsets}get indexBuffer(){return this._indexBuffer}get vertexBuffer(){return this._vertexBuffer}get topologyVector(){return this._topologyVector}getGeometries(){if(!this._topologyVector)throw new Error("Cannot convert GpuVector to coordinates without topology information");let e=new Array(this.numGeometries),i=this._topologyVector,l=i.partOffsets,h=i.ringOffsets,g=i.geometryOffsets,y=0,x=1,S=1,P=1;for(let A=0;A<this.numGeometries;A++)switch(this.geometryType(A)){case zr.POLYGON:{let O=l[x]-l[x-1];x++;let R=[];for(let F=0;F<O;F++){let V=h[S]-h[S-1];S++;let W=[];for(let Z=0;Z<V;Z++){let K=this._vertexBuffer[y++],ue=this._vertexBuffer[y++];W.push(new T(K,ue))}W.length>0&&W.push(W[0]),R.push(W)}e[A]=R,g&&P++}break;case zr.MULTIPOLYGON:{let O=g[P]-g[P-1];P++;let R=[];for(let F=0;F<O;F++){let V=l[x]-l[x-1];x++;for(let W=0;W<V;W++){let Z=h[S]-h[S-1];S++;let K=[];for(let ue=0;ue<Z;ue++){let ee=this._vertexBuffer[y++],ne=this._vertexBuffer[y++];K.push(new T(ee,ne))}K.length>0&&K.push(K[0]),R.push(K)}}e[A]=R}}return e}[Symbol.iterator](){return null}}function Yv(r,e,i,l,h,g){return new CA(r,e,i,l,h,g)}class CA extends Hv{_numGeometries;_geometryType;constructor(e,i,l,h,g,y){super(l,h,g,y),this._numGeometries=e,this._geometryType=i}geometryType(e){return this._geometryType}get numGeometries(){return this._numGeometries}containsSingleGeometryType(){return!0}}function Xv(r,e,i,l,h){return new kA(r,e,i,l,h)}class kA extends Hv{_geometryTypes;constructor(e,i,l,h,g){super(i,l,h,g),this._geometryTypes=e}geometryType(e){return this._geometryTypes[e]}get numGeometries(){return this._geometryTypes.length}containsSingleGeometryType(){return!1}}function PA(r,e,i,l,h){let g=xn(r,i),y=null,x=null,S=null,P=null,A=null,O=null,R=null,F=null;if(ip(g,l,r,i)===Ir.CONST){let W=bm(r,i,g,!1);for(let Z=0;Z<e-1;Z++){let K=xn(r,i);switch(K.physicalStreamType){case Jr.LENGTH:switch(K.logicalStreamType.lengthType){case ea.GEOMETRIES:y=gl(r,i,K);break;case ea.PARTS:x=gl(r,i,K);break;case ea.RINGS:S=gl(r,i,K);break;case ea.TRIANGLES:R=gl(r,i,K)}break;case Jr.OFFSET:switch(K.logicalStreamType.offsetType){case tc.VERTEX:P=wn(r,i,K,!1);break;case tc.INDEX:F=wn(r,i,K,!1)}break;case Jr.DATA:ds.VERTEX===K.logicalStreamType.dictionaryType?A=wn(r,i,K,!0):(O={numBits:K.numBits,coordinateShift:K.coordinateShift},A=wn(r,i,K,!1))}}return F!==null?y!=null||x!=null?Yv(l,W,R,F,A,new au(y,x,S)):Yv(l,W,R,F,A):O===null?(function(Z,K,ue,ee,ne){return new Zv(Z,K,va.VEC_2,ue,ee,ne)})(l,W,new au(y,x,S),P,A):(function(Z,K,ue,ee,ne,de){return new Zv(Z,K,va.MORTON,ue,ee,ne,de)})(l,W,new au(y,x,S),P,A,O)}let V=wn(r,i,g,!1);for(let W=0;W<e-1;W++){let Z=xn(r,i);switch(Z.physicalStreamType){case Jr.LENGTH:switch(Z.logicalStreamType.lengthType){case ea.GEOMETRIES:y=wn(r,i,Z,!1);break;case ea.PARTS:x=wn(r,i,Z,!1);break;case ea.RINGS:S=wn(r,i,Z,!1);break;case ea.TRIANGLES:R=gl(r,i,Z)}break;case Jr.OFFSET:switch(Z.logicalStreamType.offsetType){case tc.VERTEX:P=wn(r,i,Z,!1);break;case tc.INDEX:F=wn(r,i,Z,!1)}break;case Jr.DATA:ds.VERTEX===Z.logicalStreamType.dictionaryType?A=wn(r,i,Z,!0):(O={numBits:Z.numBits,coordinateShift:Z.coordinateShift},A=wn(r,i,Z,!1))}}return F!==null&&x===null?Xv(V,R,F,A):(y!==null?(y=km(V,y,2),x!==null&&S!==null?(x=Kv(V,y,x,!1),S=(function(W,Z,K,ue){let ee=new Int32Array(K[K.length-1]+1),ne=0;ee[0]=ne;let de=1,fe=1,Pe=0;for(let Ge=0;Ge<W.length;Ge++){let Ne=W[Ge],$e=Z[Ge+1]-Z[Ge];if(Ne!==0&&Ne!==3)for(let tt=0;tt<$e;tt++){let Ye=K[de]-K[de-1];de++;for(let Ve=0;Ve<Ye;Ve++)ne=ee[fe++]=ne+ue[Pe++]}else for(let tt=0;tt<$e;tt++)ee[fe++]=++ne,de++}return ee})(V,y,x,S)):x!==null&&(x=(function(W,Z,K){let ue=new Int32Array(Z[Z.length-1]+1),ee=0;ue[0]=ee;let ne=1,de=0;for(let fe=0;fe<W.length;fe++){let Pe=W[fe],Ge=Z[fe+1]-Z[fe];if(Pe===4||Pe===1)for(let Ne=0;Ne<Ge;Ne++)ee=ue[ne++]=ee+K[de++];else for(let Ne=0;Ne<Ge;Ne++)ue[ne++]=++ee}return ue})(V,y,x))):x!==null&&S!==null?(x=km(V,x,1),S=Kv(V,x,S,!0)):x!==null&&(x=km(V,x,0)),F!==null?Xv(V,R,F,A,new au(y,x,S)):O===null?(function(W,Z,K,ue){return new $v(va.VEC_2,W,Z,K,ue)})(V,new au(y,x,S),P,A):(function(W,Z,K,ue,ee){return new $v(va.MORTON,W,Z,K,ue,ee)})(V,new au(y,x,S),P,A,O))}function km(r,e,i){let l=new Int32Array(r.length+1),h=0;l[0]=h;let g=0;for(let y=0;y<r.length;y++)h=l[y+1]=h+(r[y]>i?e[g++]:1);return l}function Kv(r,e,i,l){let h=new Int32Array(e[e.length-1]+1),g=0;h[0]=g;let y=1,x=0;for(let S=0;S<r.length;S++){let P=r[S],A=e[S+1]-e[S];if(P===5||P===2||l&&(P===4||P===1))for(let O=0;O<A;O++)g=h[y++]=g+i[x++];else for(let O=0;O<A;O++)h[y++]=++g}return h}class EA extends ru{dataVector;constructor(e,i,l){super(e,i.getBuffer(),l),this.dataVector=i}getValueFromBuffer(e){return this.dataVector.get(e)}}class AA extends Qd{getValueFromBuffer(e){return this.dataBuffer[e]}}class Jv extends ru{constructor(e,i,l){super(e,BigInt64Array.of(i),l)}getValueFromBuffer(e){return this.dataBuffer[0]}}function zh(r,e,i){return Qv(r,Math.ceil(e/8),i)}function Qv(r,e,i){let l=new Uint8Array(e),h=0;for(;h<e;){let g=r[i.increment()];if(g<=127){let y=g+3,x=r[i.increment()],S=h+y;l.fill(x,h,S),h=S}else{let y=256-g;for(let x=0;x<y;x++)l[h++]=r[i.increment()]}}return l}let MA=new TextDecoder;function Pm(r,e,i){return i-e>=12?MA.decode(r.subarray(e,i)):(function(l,h,g){let y="",x=h;for(;x<g;){let S=l[x],P,A,O,R=null,F=S>239?4:S>223?3:S>191?2:1;if(x+F>g)break;F===1?S<128&&(R=S):F===2?(P=l[x+1],(192&P)==128&&(R=(31&S)<<6|63&P,R<=127&&(R=null))):F===3?(P=l[x+1],A=l[x+2],(192&P)==128&&(192&A)==128&&(R=(15&S)<<12|(63&P)<<6|63&A,(R<=2047||R>=55296&&R<=57343)&&(R=null))):F===4&&(P=l[x+1],A=l[x+2],O=l[x+3],(192&P)==128&&(192&A)==128&&(192&O)==128&&(R=(15&S)<<18|(63&P)<<12|(63&A)<<6|63&O,(R<=65535||R>=1114112)&&(R=null))),R===null?(R=65533,F=1):R>65535&&(R-=65536,y+=String.fromCharCode(R>>>10&1023|55296),R=56320|1023&R),y+=String.fromCharCode(R),x+=F}return y})(r,e,i)}class Em extends ru{offsetBuffer;constructor(e,i,l,h){super(e,l,h),this.offsetBuffer=i}}class eb extends Em{textEncoder;constructor(e,i,l,h){super(e,i,l,h??i.length-1),this.textEncoder=new TextEncoder}getValueFromBuffer(e){return Pm(this.dataBuffer,this.offsetBuffer[e],this.offsetBuffer[e+1])}}class su extends Em{indexBuffer;textEncoder;constructor(e,i,l,h,g){super(e,l,h,g??i.length),this.indexBuffer=i,this.indexBuffer=i,this.textEncoder=new TextEncoder}getValueFromBuffer(e){let i=this.indexBuffer[e];return Pm(this.dataBuffer,this.offsetBuffer[i],this.offsetBuffer[i+1])}}class tb extends Em{indexBuffer;symbolOffsetBuffer;symbolTableBuffer;textEncoder;symbolLengthBuffer;lengthBuffer;decodedDictionary;constructor(e,i,l,h,g,y,x){super(e,l,h,x),this.indexBuffer=i,this.symbolOffsetBuffer=g,this.symbolTableBuffer=y,this.textEncoder=new TextEncoder}getValueFromBuffer(e){this.decodedDictionary==null&&(this.symbolLengthBuffer==null&&(this.symbolLengthBuffer=this.offsetToLengthBuffer(this.symbolOffsetBuffer),this.lengthBuffer=this.offsetToLengthBuffer(this.offsetBuffer)),this.decodedDictionary=(function(l,h,g){let y=[],x=new Array(h.length).fill(0);for(let S=1;S<h.length;S++)x[S]=x[S-1]+h[S-1];for(let S=0;S<g.length;S++)if(g[S]===255)y.push(g[++S]);else{let P=h[g[S]],A=x[g[S]];for(let O=0;O<P;O++)y.push(l[A+O])}return new Uint8Array(y)})(this.symbolTableBuffer,this.symbolLengthBuffer,this.dataBuffer));let i=this.indexBuffer[e];return Pm(this.decodedDictionary,this.offsetBuffer[i],this.offsetBuffer[i+1])}offsetToLengthBuffer(e){let i=new Uint32Array(e.length-1),l=e[0];for(let h=1;h<e.length;h++){let g=e[h];i[h-1]=g-l,l=g}return i}}function IA(r,e,i,l,h,g){return i.type==="scalarType"?(function(y,x,S,P,A,O){let R=null,F=0;if(y===0)return null;if(O.nullable){let W=xn(x,S);F=W.numValues;let Z=S.get(),K=zh(x,F,S);S.set(Z+W.byteLength),R=new ps(K,W.numValues)}let V=R??P;switch(A.physicalType){case 4:case 3:return(function(W,Z,K,ue,ee){let ne=xn(W,Z),de=ip(ne,ee,W,Z),fe=ue.physicalType===3;if(de===Ir.FLAT){let Pe=Lh(ee)?xm(W,Z,ne,fe,ee):wn(W,Z,ne,fe);return new fm(K.name,Pe,ee)}if(de===Ir.SEQUENCE){let Pe=Bv(W,Z,ne);return new gm(K.name,Pe[0],Pe[1],ne.numRleValues)}{let Pe=bm(W,Z,ne,fe);return new ym(K.name,Pe,ee)}})(x,S,O,A,V);case 9:return(function(W,Z,K,ue,ee){let ne=null,de=null,fe=null,Pe=null,Ge=null,Ne=null,$e=null,tt=null;for(let Ye=0;Ye<ue;Ye++){let Ve=xn(Z,K);if(Ve.byteLength!==0)switch(Ve.physicalStreamType){case Jr.PRESENT:{let Be=zh(Z,Ve.numValues,K);Ne=new ps(Be,Ve.numValues);break}case Jr.OFFSET:de=ee!=null||Ne!=null?xm(Z,K,Ve,!1,ee??Ne):wn(Z,K,Ve,!1);break;case Jr.LENGTH:{let Be=gl(Z,K,Ve);ea.DICTIONARY===Ve.logicalStreamType.lengthType?ne=Be:ea.SYMBOL===Ve.logicalStreamType.lengthType?Pe=Be:$e=Be;break}case Jr.DATA:{let Be=Z.subarray(K.get(),K.get()+Ve.byteLength);K.add(Ve.byteLength);let lt=Ve.logicalStreamType.dictionaryType;ds.FSST===lt?Ge=Be:ds.SINGLE===lt||ds.SHARED===lt?fe=Be:ds.NONE===lt&&(tt=Be);break}}}return(function(Ye,Ve,Be,lt,nt,ut,rt){return Ve?new tb(Ye,Be,lt,nt,ut,Ve,rt):null})(W,Ge,de,ne,fe,Pe,ee??Ne)??(function(Ye,Ve,Be,lt,nt){return Ve?nt?new su(Ye,Be,lt,Ve,nt):new su(Ye,Be,lt,Ve):null})(W,fe,de,ne,ee??Ne)??(function(Ye,Ve,Be,lt,nt){if(!Ve||!Be)return null;if(lt)return nt?new su(Ye,lt,Ve,Be,nt):new su(Ye,lt,Ve,Be);if(nt&&nt.size()!==Ve.length-1){let ut=new Int32Array(nt.size()),rt=0;for(let yt=0;yt<nt.size();yt++)ut[yt]=nt.get(yt)?rt++:0;return new su(Ye,ut,Ve,Be,nt)}return nt?new eb(Ye,Ve,Be,nt):new eb(Ye,Ve,Be)})(W,$e,tt,de,ee??Ne)})(O.name,x,S,O.nullable?y-1:y,R);case 0:return(function(W,Z,K,ue,ee){let ne=xn(W,Z),de=ne.numValues,fe=Z.get(),Pe=Lh(ee)?(function(Ne,$e,tt,Ye){let Ve=Qv(Ne,Math.ceil($e/8),tt),Be=new ps(Ve,$e),lt=Ye.size(),nt=new ps(new Uint8Array(lt),lt),ut=0;for(let rt=0;rt<Ye.size();rt++){let yt=!!Ye.get(rt)&&Be.get(ut++);nt.set(rt,yt)}return nt.getBuffer()})(W,de,Z,ee):zh(W,de,Z);Z.set(fe+ne.byteLength);let Ge=new ps(Pe,de);return new EA(K.name,Ge,ee)})(x,S,O,0,V);case 6:case 5:return(function(W,Z,K,ue,ee){let ne=xn(W,Z),de=ip(ne,ue,W,Z),fe=ee.physicalType===5;if(de===Ir.FLAT){let Pe=Lh(ue)?(function(Ge,Ne,$e,tt,Ye){return(function(Ve,Be,lt,nt){switch(Be.logicalLevelTechnique1){case Qt.DELTA:return Be.logicalLevelTechnique2===Qt.RLE&&(Ve=Ov(Ve,Be.runs,Be.numRleValues)),(function(ut,rt){let yt=new BigInt64Array(ut.size()),si=0;ut.get(0)?(yt[0]=ut.get(0)?rt[0]>>1n^-(1n&rt[0]):0n,si=1):yt[0]=0n;let Xt=1;for(;Xt!=yt.length;++Xt)yt[Xt]=ut.get(Xt)?yt[Xt-1]+(rt[si]>>1n^-(1n&rt[si++])):yt[Xt-1];return yt})(nt,Ve);case Qt.RLE:return(function(ut,rt,yt,si){let Xt=rt;return yt?(function(Bi,en,dr){let Fi=new BigInt64Array(Bi.size()),Li=0;for(let fi=0;fi<dr;fi++){let Qi=Number(en[fi]),sr=en[fi+dr];sr=sr>>1n^-(1n&sr);for(let Mi=Li;Mi<Li+Qi;Mi++)Bi.get(Mi)?Fi[Mi]=sr:(Fi[Mi]=0n,Li++);Li+=Qi}return Fi})(si,ut,Xt.runs):(function(Bi,en,dr){let Fi=new BigInt64Array(Bi.size()),Li=0;for(let fi=0;fi<dr;fi++){let Qi=Number(en[fi]),sr=en[fi+dr];for(let Mi=Li;Mi<Li+Qi;Mi++)Bi.get(Mi)?Fi[Mi]=sr:(Fi[Mi]=0n,Li++);Li+=Qi}return Fi})(si,ut,Xt.runs)})(Ve,Be,lt,nt);case Qt.NONE:return Ve=lt?(function(ut,rt){let yt=new BigInt64Array(ut.size()),si=0,Xt=0;for(;Xt!=yt.length;++Xt)if(ut.get(Xt)){let Bi=rt[si++];yt[Xt]=Bi>>1n^-(1n&Bi)}else yt[Xt]=0n;return yt})(nt,Ve):(function(ut,rt){let yt=new BigInt64Array(ut.size()),si=0,Xt=0;for(;Xt!=yt.length;++Xt)yt[Xt]=ut.get(Xt)?rt[si++]:0n;return yt})(nt,Ve),Ve;default:throw new Error("The specified Logical level technique is not supported")}})(ep(Ge,Ne,$e.numValues),$e,tt,Ye)})(W,Z,ne,fe,ue):jv(W,Z,ne,fe);return new qv(K.name,Pe,ue)}if(de===Ir.SEQUENCE){let Pe=Fv(W,Z,ne);return new Vv(K.name,Pe[0],Pe[1],ne.numRleValues)}{let Pe=Nv(W,Z,ne,fe);return new Jv(K.name,Pe,ue)}})(x,S,O,V,A);case 7:return(function(W,Z,K,ue){let ee=xn(W,Z),ne=Lh(ue)?(function(de,fe,Pe,Ge){let Ne=fe.get(),$e=Ne+Ge*Float32Array.BYTES_PER_ELEMENT,tt=new Uint8Array(de.subarray(Ne,$e)).buffer,Ye=new Float32Array(tt);fe.set($e);let Ve=Pe.size(),Be=new Float32Array(Ve),lt=0;for(let nt=0;nt<Ve;nt++)Be[nt]=Pe.get(nt)?Ye[lt++]:0;return Be})(W,Z,ue,ee.numValues):(function(de,fe,Pe){let Ge=fe.get(),Ne=Ge+Pe*Float32Array.BYTES_PER_ELEMENT,$e=new Uint8Array(de.subarray(Ge,Ne)).buffer,tt=new Float32Array($e);return fe.set(Ne),tt})(W,Z,ee.numValues);return new AA(K.name,ne,ue)})(x,S,O,V);case 8:return(function(W,Z,K,ue){let ee=xn(W,Z),ne=Lh(ue)?(function(de,fe,Pe,Ge){let Ne=fe.get(),$e=Ne+Ge*Float64Array.BYTES_PER_ELEMENT,tt=new Uint8Array(de.subarray(Ne,$e)).buffer,Ye=new Float64Array(tt);fe.set($e);let Ve=Pe.size(),Be=new Float64Array(Ve),lt=0;for(let nt=0;nt<Ve;nt++)Be[nt]=Pe.get(nt)?Ye[lt++]:0;return Be})(W,Z,ue,ee.numValues):(function(de,fe,Pe){let Ge=fe.get(),Ne=Ge+Pe*Float64Array.BYTES_PER_ELEMENT,$e=new Uint8Array(de.subarray(Ge,Ne)).buffer,tt=new Float64Array($e);return fe.set(Ne),tt})(W,Z,ee.numValues);return new mm(K.name,ne,ue)})(x,S,O,V);default:throw new Error(`The specified data type for the field is currently not supported: ${A}`)}})(l,r,e,h,i.scalarType,i):l!=1?null:(function(y,x,S,P){let A=null,O=null,R=null,F=null,V=!1;for(;!V;){let ue=xn(y,x);switch(ue.physicalStreamType){case Jr.LENGTH:ea.DICTIONARY===ue.logicalStreamType.lengthType?A=gl(y,x,ue):R=gl(y,x,ue);break;case Jr.DATA:ds.SINGLE===ue.logicalStreamType.dictionaryType||ds.SHARED===ue.logicalStreamType.dictionaryType?(O=y.subarray(x.get(),x.get()+ue.byteLength),V=!0):F=y.subarray(x.get(),x.get()+ue.byteLength),x.add(ue.byteLength)}}let W=S.complexType.children,Z=[],K=0;for(let ue of W){let ee=Gr(y,x,1)[0];if(ee==0)continue;let ne=`${S.name}${ue.name==="default"?"":":"+ue.name}`;if(ee!==2||ue.type!=="scalarField"||ue.scalarField.physicalType!==9)throw new Error("Currently only optional string fields are implemented for a struct.");let de=xn(y,x),fe=zh(y,de.numValues,x),Pe=xn(y,x),Ge=Pe.decompressedCount!==P?xm(y,x,Pe,!1,new ps(fe,de.numValues)):wn(y,x,Pe,!1);Z[K++]=F?new tb(ne,Ge,A,O,R,F,new ps(fe,de.numValues)):new su(ne,Ge,A,O,new ps(fe,de.numValues))}return Z})(r,e,i,h)}function Lh(r){return r instanceof ps}function zA(r){if(r.name==="id")return!1;if(r.type==="scalarType"){let e=r.scalarType;if(e.type==="physicalType")switch(e.physicalType){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:default:return!1;case 9:return!0}else if(e.type==="logicalType")return!1}else if(r.type==="complexType"){let e=r.complexType;if(e.type==="physicalType")switch(e.physicalType){case 0:case 1:return!0;default:return!1}}return console.warn("Unexpected column type in hasStreamCount",r),!1}let LA=new TextDecoder;function ib(r,e){let i=Gr(r,e,1)[0];if(i===0)return"";let l=e.get(),h=r.subarray(l,l+i);return e.add(i),LA.decode(h)}function rb(r,e){let i=Gr(r,e,1)[0]>>>0,l=!!(4&i),h=!!(2&i),g=Gr(r,e,1)[0]>>>0,y={};if(1&i&&(y.nullable=!0),h){let x={};if(l?(x.type="logicalType",x.logicalType=g):(x.type="physicalType",x.physicalType=g),8&i){let S=Gr(r,e,1)[0]>>>0;x.children=new Array(S);for(let P=0;P<S;P++)x.children[P]=rb(r,e)}y.type="complexField",y.complexField=x}else{let x={};l?(x.type="logicalType",x.logicalType=g):(x.type="physicalType",x.physicalType=g),y.type="scalarField",y.scalarField=x}return y}function OA(r,e){let i=Gr(r,e,1)[0]>>>0,l=(function(h){switch(h){case 0:case 1:case 2:case 3:{let g={};g.nullable=!!(1&h),g.columnScope=0;let y={};return y.physicalType=h>1?6:4,y.type="physicalType",g.scalarType=y,g.type="scalarType",g}case 4:{let g={nullable:!1,columnScope:0},y={type:"physicalType",physicalType:0};return g.type="complexType",g.complexType=y,g}case 30:{let g={nullable:!1,columnScope:0},y={type:"physicalType",physicalType:1};return g.type="complexType",g.complexType=y,g}default:return(function(g){let y=null;switch(g){case 10:case 11:y=0;break;case 12:case 13:y=1;break;case 14:case 15:y=2;break;case 16:case 17:y=3;break;case 18:case 19:y=4;break;case 20:case 21:y=5;break;case 22:case 23:y=6;break;case 24:case 25:y=7;break;case 26:case 27:y=8;break;case 28:case 29:y=9;break;default:return null}let x={};x.nullable=!!(1&g),x.columnScope=0;let S={type:"physicalType"};return S.physicalType=y,x.type="scalarType",x.scalarType=S,x})(h)}})(i);if(!l)throw new Error(`Unsupported column type code: ${i}`);if((function(h){return h>=10})(i)?l.name=ib(r,e):i>=0&&i<=3?l.name="id":i===4&&(l.name="geometry"),(function(h){return h===30})(i)){let h=Gr(r,e,1)[0]>>>0,g=l.complexType;g.children=new Array(h);for(let y=0;y<h;y++)g.children[y]=rb(r,e)}return l}function DA(r,e){let i={featureTables:[]},l={};l.name=ib(r,e);let h=Gr(r,e,1)[0]>>>0,g=Gr(r,e,1)[0]>>>0;l.columns=new Array(g);for(let y=0;y<g;y++)l.columns[y]=OA(r,e);return i.featureTables.push(l),[i,h]}function RA(r,e,i,l,h,g,y=!1){let x=e.scalarType.physicalType,S=ip(h,g,r,i);if(x===4)switch(S){case Ir.FLAT:{let P=wn(r,i,h,!1);return new fm(l,P,g)}case Ir.SEQUENCE:{let P=Bv(r,i,h);return new gm(l,P[0],P[1],h.numRleValues)}case Ir.CONST:{let P=bm(r,i,h,!1);return new ym(l,P,g)}}else switch(S){case Ir.FLAT:{if(y){let A=(function(O,R,F,V){let W=(function(Z,K,ue){let ee=new Float64Array(K);for(let ne=0;ne<K;ne++)ee[ne]=wA(Z,ue);return ee})(O,F.numValues,R);return(function(Z,K,ue){switch(K.logicalLevelTechnique1){case Qt.DELTA:return K.logicalLevelTechnique2===Qt.RLE&&(Z=Dv(Z,K.runs,K.numRleValues)),(function(ee){ee[0]=ee[0]%2==1?(ee[0]+1)/-2:ee[0]/2;let ne=ee.length/4*4,de=1;if(ne>=4)for(;de<ne-4;de+=4){let fe=ee[de],Pe=ee[de+1],Ge=ee[de+2],Ne=ee[de+3];ee[de]=(fe%2==1?(fe+1)/-2:fe/2)+ee[de-1],ee[de+1]=(Pe%2==1?(Pe+1)/-2:Pe/2)+ee[de],ee[de+2]=(Ge%2==1?(Ge+1)/-2:Ge/2)+ee[de+1],ee[de+3]=(Ne%2==1?(Ne+1)/-2:Ne/2)+ee[de+2]}for(;de!=ee.length;++de)ee[de]=(ee[de]%2==1?(ee[de]+1)/-2:ee[de]/2)+ee[de-1]})(Z),Z;case Qt.RLE:return(function(ee,ne,de){return de?(function(fe,Pe,Ge){let Ne=new Float64Array(Ge),$e=0;for(let tt=0;tt<Pe;tt++){let Ye=fe[tt],Ve=fe[tt+Pe];Ve=Ve%2==1?(Ve+1)/-2:Ve/2,Ne.fill(Ve,$e,$e+Ye),$e+=Ye}return Ne})(ee,ne.runs,ne.numRleValues):Dv(ee,ne.runs,ne.numRleValues)})(Z,K,ue);case Qt.NONE:return Z;default:throw new Error(`The specified Logical level technique is not supported: ${K.logicalLevelTechnique1}`)}})(W,F,V)})(r,i,h,!1);return new mm(l,A,g)}let P=jv(r,i,h,!1);return new qv(l,P,g)}case Ir.SEQUENCE:{let P=Fv(r,i,h);return new Vv(l,P[0],P[1],h.numRleValues)}case Ir.CONST:{let P=Nv(r,i,h,!1);return new Jv(l,P,g)}}throw new Error("Vector type not supported for id column.")}class BA{constructor(e,i){var l;switch(this._featureData=e,this.properties=this._featureData.properties||{},(l=this._featureData.geometry)===null||l===void 0?void 0:l.type){case zr.POINT:case zr.MULTIPOINT:this.type=1;break;case zr.LINESTRING:case zr.MULTILINESTRING:this.type=2;break;case zr.POLYGON:case zr.MULTIPOLYGON:this.type=3;break;default:this.type=0}this.extent=i,this.id=Number(this._featureData.id)}loadGeometry(){let e=[];for(let i of this._featureData.geometry.coordinates){let l=[];for(let h of i)l.push(new T(h.x,h.y));e.push(l)}return e}}class FA{constructor(e){this.features=[],this.featureTable=e,this.name=e.name,this.extent=e.extent,this.version=2,this.features=e.getFeatures(),this.length=this.features.length}feature(e){return new BA(this.features[e],this.extent)}}class nb{constructor(e){this.layers={};let i=(function(l,h,g=!0){let y=new xA(0),x=[];for(;y.get()<l.length;){let S=Gr(l,y,1)[0]>>>0,P=y.get()+S;if(P>l.length)throw new Error(`Block overruns tile: ${P} > ${l.length}`);if(Gr(l,y,1)[0]>>>0!=1){y.set(P);continue}let A=DA(l,y),O=A[1],R=A[0].featureTables[0],F=null,V=null,W=[],Z=0;for(let ue of R.columns){let ee=ue.name;if(ee==="id"){let ne=null;if(ue.nullable){let fe=xn(l,y),Pe=y.get(),Ge=zh(l,fe.numValues,y);y.set(Pe+fe.byteLength),ne=new ps(Ge,fe.numValues)}let de=xn(l,y);Z=de.decompressedCount,F=RA(l,ue,y,ee,de,ne??Z,g)}else if(ee==="geometry"){let ne=Gr(l,y,1)[0];if(Z===0){let de=y.get();Z=xn(l,y).decompressedCount,y.set(de)}V=PA(l,ne,y,Z)}else{let ne=zA(ue)?Gr(l,y,1)[0]:1;if(ne===0&&ue.type==="scalarType")continue;let de=IA(l,y,ue,ne,Z);if(de)if(Array.isArray(de))for(let fe of de)W.push(fe);else W.push(de)}}let K=new bA(R.name,V,F,W,O);x.push(K),y.set(P)}return x})(new Uint8Array(e));this.layers=i.reduce(((l,h)=>Object.assign(Object.assign({},l),{[h.name]:new FA(h)})),{})}}class rc{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(e){return this.minX=Math.min(this.minX,e.x),this.minY=Math.min(this.minY,e.y),this.maxX=Math.max(this.maxX,e.x),this.maxY=Math.max(this.maxY,e.y),this}expandBy(e){return this.minX-=e,this.minY-=e,this.maxX+=e,this.maxY+=e,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(e){return this.expandBy(-e)}map(e){let i=new rc;return i.extend(e(new T(this.minX,this.minY))),i.extend(e(new T(this.maxX,this.minY))),i.extend(e(new T(this.minX,this.maxY))),i.extend(e(new T(this.maxX,this.maxY))),i}static fromPoints(e){let i=new rc;for(let l of e)i.extend(l);return i}contains(e){return e.x>=this.minX&&e.x<=this.maxX&&e.y>=this.minY&&e.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(e){return!this.empty()&&!e.empty()&&e.minX>=this.minX&&e.maxX<=this.maxX&&e.minY>=this.minY&&e.maxY<=this.maxY}intersects(e){return!this.empty()&&!e.empty()&&e.minX<=this.maxX&&e.maxX>=this.minX&&e.minY<=this.maxY&&e.maxY>=this.minY}}class jA{constructor(e,i){this.feature=e,this.type=e.type,this.properties=e.tags?e.tags:{},this.extent=i,"id"in e&&(typeof e.id=="string"?this.id=parseInt(e.id,10):typeof e.id!="number"||isNaN(e.id)||(this.id=e.id))}loadGeometry(){let e=[],i=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(let l of i){let h=[];for(let g of l)h.push(new T(g[0],g[1]));e.push(h)}return e}}let Oh="_geojsonTileLayer";function NA(r,e){e.writeVarintField(15,r.version||1),e.writeStringField(1,r.name||""),e.writeVarintField(5,r.extent||4096);let i={keys:[],values:[],keycache:{},valuecache:{}};for(let g=0;g<r.length;g++)i.feature=r.feature(g),e.writeMessage(2,qA,i);let l=i.keys;for(let g of l)e.writeStringField(3,g);let h=i.values;for(let g of h)e.writeMessage(4,GA,g)}function qA(r,e){if(!r.feature)return;let i=r.feature;i.id!==void 0&&e.writeVarintField(1,i.id),e.writeMessage(2,VA,r),e.writeVarintField(3,i.type),e.writeMessage(4,WA,i)}function VA(r,e){for(let i in r.feature?.properties){let l=r.feature.properties[i],h=r.keycache[i];if(l===null)continue;h===void 0&&(r.keys.push(i),h=r.keys.length-1,r.keycache[i]=h),e.writeVarint(h),typeof l!="string"&&typeof l!="boolean"&&typeof l!="number"&&(l=JSON.stringify(l));let g=typeof l+":"+l,y=r.valuecache[g];y===void 0&&(r.values.push(l),y=r.values.length-1,r.valuecache[g]=y),e.writeVarint(y)}}function Am(r,e){return(e<<3)+(7&r)}function ab(r){return r<<1^r>>31}function WA(r,e){let i=r.loadGeometry(),l=r.type,h=0,g=0;for(let y of i){let x=1;l===1&&(x=y.length),e.writeVarint(Am(1,x));let S=l===3?y.length-1:y.length;for(let P=0;P<S;P++){P===1&&l!==1&&e.writeVarint(Am(2,S-1));let A=y[P].x-h,O=y[P].y-g;e.writeVarint(ab(A)),e.writeVarint(ab(O)),h+=A,g+=O}r.type===3&&e.writeVarint(Am(7,1))}}function GA(r,e){let i=typeof r;i==="string"?e.writeStringField(1,r):i==="boolean"?e.writeBooleanField(7,r):i==="number"&&(r%1!=0?e.writeDoubleField(3,r):r<0?e.writeSVarintField(6,r):e.writeVarintField(5,r))}class sb{constructor(e,i){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Gl(ei,16,0),this.grid3D=new Gl(ei,16,0),this.featureIndexArray=new N,this.promoteId=i}insert(e,i,l,h,g,y){let x=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(l,h,g);let S=y?this.grid3D:this.grid;for(let P=0;P<i.length;P++){let A=i[P],O=[1/0,1/0,-1/0,-1/0];for(let R=0;R<A.length;R++){let F=A[R];O[0]=Math.min(O[0],F.x),O[1]=Math.min(O[1],F.y),O[2]=Math.max(O[2],F.x),O[3]=Math.max(O[3],F.y)}O[0]<ei&&O[1]<ei&&O[2]>=0&&O[3]>=0&&S.insert(x,O[0],O[1],O[2],O[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=this.encoding!=="mlt"?new U_(new Hd(this.rawTileData)).layers:new nb(this.rawTileData).layers,this.sourceLayerCoder=new Ev(this.vtLayers?Object.keys(this.vtLayers).sort():[Oh])),this.vtLayers}query(e,i,l,h){this.loadVTLayers();let g=e.params,y=ei/e.tileSize/e.scale,x=ht(g.filter,g.globalState),S=e.queryGeometry,P=e.queryPadding*y,A=rc.fromPoints(S),O=this.grid.query(A.minX-P,A.minY-P,A.maxX+P,A.maxY+P),R=rc.fromPoints(e.cameraQueryGeometry).expandBy(P),F=this.grid3D.query(R.minX,R.minY,R.maxX,R.maxY,((Z,K,ue,ee)=>(function(ne,de,fe,Pe,Ge){for(let $e of ne)if(de<=$e.x&&fe<=$e.y&&Pe>=$e.x&&Ge>=$e.y)return!0;let Ne=[new T(de,fe),new T(de,Ge),new T(Pe,Ge),new T(Pe,fe)];if(ne.length>2){for(let $e of Ne)if(Hc(ne,$e))return!0}for(let $e=0;$e<ne.length-1;$e++)if(ZP(ne[$e],ne[$e+1],Ne))return!0;return!1})(e.cameraQueryGeometry,Z-P,K-P,ue+P,ee+P)));for(let Z of F)O.push(Z);O.sort(UA);let V={},W;for(let Z=0;Z<O.length;Z++){let K=O[Z];if(K===W)continue;W=K;let ue=this.featureIndexArray.get(K),ee=null;this.loadMatchingFeature(V,ue.bucketIndex,ue.sourceLayerIndex,ue.featureIndex,x,g.layers,g.availableImages,i,l,h,((ne,de,fe)=>(ee||(ee=Eo(ne)),de.queryIntersectsFeature({queryGeometry:S,feature:ne,featureState:fe,geometry:ee,zoom:this.z,transform:e.transform,pixelsToTileUnits:y,pixelPosMatrix:e.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:e.getElevation}))))}return V}loadMatchingFeature(e,i,l,h,g,y,x,S,P,A,O){let R=this.bucketLayerIDs[i];if(y&&!R.some((Z=>y.has(Z))))return;let F=this.sourceLayerCoder.decode(l),V=this.vtLayers[F].feature(h);if(g.needGeometry){let Z=Ao(V,!0);if(!g.filter(new Ti(this.tileID.overscaledZ),Z,this.tileID.canonical))return}else if(!g.filter(new Ti(this.tileID.overscaledZ),V))return;let W=this.getId(V,F);for(let Z=0;Z<R.length;Z++){let K=R[Z];if(y&&!y.has(K))continue;let ue=S[K];if(!ue)continue;let ee={};W&&A&&(ee=A.getState(ue.sourceLayer||Oh,W));let ne=ji({},P[K]);ne.paint=ob(ne.paint,ue.paint,V,ee,x),ne.layout=ob(ne.layout,ue.layout,V,ee,x);let de=!O||O(V,ue,ee);if(!de)continue;let fe=new Av(V,this.z,this.x,this.y,W);fe.layer=ne;let Pe=e[K];Pe===void 0&&(Pe=e[K]=[]),Pe.push({featureIndex:h,feature:fe,intersectionZ:de})}}lookupSymbolFeatures(e,i,l,h,g,y,x,S){let P={};this.loadVTLayers();let A=ht(g.filterSpec,g.globalState);for(let O of e)this.loadMatchingFeature(P,l,h,O,A,y,x,S,i);return P}hasLayer(e){for(let i of this.bucketLayerIDs)for(let l of i)if(e===l)return!0;return!1}getId(e,i){var l;let h=e.id;return this.promoteId&&(h=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[i]],typeof h=="boolean"&&(h=Number(h)),h===void 0&&(!((l=e.properties)===null||l===void 0)&&l.cluster)&&this.promoteId&&(h=Number(e.properties.cluster_id))),h}}function ob(r,e,i,l,h){return nn(r,((g,y)=>{let x=e instanceof Nc?e.get(y):null;return x&&x.evaluate?x.evaluate(i,l,h):x}))}function UA(r,e){return e-r}function lb(r,e,i,l,h){let g=[];for(let y=0;y<r.length;y++){let x=r[y],S;for(let P=0;P<x.length-1;P++){let A=x[P],O=x[P+1];A.x<e&&O.x<e||(A.x<e?A=new T(e,A.y+(e-A.x)/(O.x-A.x)*(O.y-A.y))._round():O.x<e&&(O=new T(e,A.y+(e-A.x)/(O.x-A.x)*(O.y-A.y))._round()),A.y<i&&O.y<i||(A.y<i?A=new T(A.x+(i-A.y)/(O.y-A.y)*(O.x-A.x),i)._round():O.y<i&&(O=new T(A.x+(i-A.y)/(O.y-A.y)*(O.x-A.x),i)._round()),A.x>=l&&O.x>=l||(A.x>=l?A=new T(l,A.y+(l-A.x)/(O.x-A.x)*(O.y-A.y))._round():O.x>=l&&(O=new T(l,A.y+(l-A.x)/(O.x-A.x)*(O.y-A.y))._round()),A.y>=h&&O.y>=h||(A.y>=h?A=new T(A.x+(h-A.y)/(O.y-A.y)*(O.x-A.x),h)._round():O.y>=h&&(O=new T(A.x+(h-A.y)/(O.y-A.y)*(O.x-A.x),h)._round()),S&&A.equals(S[S.length-1])||(S=[A],g.push(S)),S.push(O)))))}}return g}function cb(r,e,i,l,h){switch(e){case 1:return(function(g,y,x,S){let P=[];for(let A of g)for(let O of A){let R=S===0?O.x:O.y;R>=y&&R<=x&&P.push([O])}return P})(r,i,l,h);case 2:return ub(r,i,l,h,!1);case 3:return ub(r,i,l,h,!0)}return[]}function ZA(r,e,i,l,h){let g=l===0?$A:HA,y=[],x=[];for(let A=0;A<r.length-1;A++){let O=r[A],R=r[A+1],F=l===0?O.x:O.y,V=l===0?R.x:R.y,W=!1;F<e?V>e&&y.push(g(O,R,e)):F>i?V<i&&y.push(g(O,R,i)):y.push(O),V<e&&F>=e&&(y.push(g(O,R,e)),W=!0),V>i&&F<=i&&(y.push(g(O,R,i)),W=!0),!h&&W&&(x.push(y),y=[])}let S=r.length-1,P=l===0?r[S].x:r[S].y;return P>=e&&P<=i&&y.push(r[S]),h&&y.length>0&&!y[0].equals(y[y.length-1])&&y.push(new T(y[0].x,y[0].y)),y.length>0&&x.push(y),x}function ub(r,e,i,l,h){let g=[];for(let y of r){let x=ZA(y,e,i,l,h);x.length>0&&g.push(...x)}return g}function $A(r,e,i){return new T(i,r.y+(i-r.x)/(e.x-r.x)*(e.y-r.y))}function HA(r,e,i){return new T(r.x+(i-r.y)/(e.y-r.y)*(e.x-r.x),i)}at("FeatureIndex",sb,{omit:["rawTileData","sourceLayerCoder"]});class yl extends T{constructor(e,i,l,h){super(e,i),this.angle=l,h!==void 0&&(this.segment=h)}clone(){return new yl(this.x,this.y,this.angle,this.segment)}}function hb(r,e,i,l,h){if(e.segment===void 0||i===0)return!0;let g=e,y=e.segment+1,x=0;for(;x>-i/2;){if(y--,y<0)return!1;x-=r[y].dist(g),g=r[y]}x+=r[y].dist(r[y+1]),y++;let S=[],P=0;for(;x<i/2;){let A=r[y],O=r[y+1];if(!O)return!1;let R=r[y-1].angleTo(A)-A.angleTo(O);for(R=Math.abs((R+3*Math.PI)%(2*Math.PI)-Math.PI),S.push({distance:x,angleDelta:R}),P+=R;x-S[0].distance>l;)P-=S.shift().angleDelta;if(P>h)return!1;y++,x+=A.dist(O)}return!0}function db(r){let e=0;for(let i=0;i<r.length-1;i++)e+=r[i].dist(r[i+1]);return e}function pb(r,e,i){return r?.6*e*i:0}function fb(r,e){return Math.max(r?r.right-r.left:0,e?e.right-e.left:0)}function YA(r,e,i,l,h,g){let y=pb(i,h,g),x=fb(i,l)*g,S=0,P=db(r)/2;for(let A=0;A<r.length-1;A++){let O=r[A],R=r[A+1],F=O.dist(R);if(S+F>P){let V=(P-S)/F,W=ki.number(O.x,R.x,V),Z=ki.number(O.y,R.y,V),K=new yl(W,Z,R.angleTo(O),A);return K._round(),!y||hb(r,K,x,y,e)?K:void 0}S+=F}}function XA(r,e,i,l,h,g,y,x,S){let P=pb(l,g,y),A=fb(l,h),O=A*y,R=r[0].x===0||r[0].x===S||r[0].y===0||r[0].y===S;return e-O<e/4&&(e=O+e/4),mb(r,R?e/2*x%e:(A/2+2*g)*y*x%e,e,P,i,O,R,!1,S)}function mb(r,e,i,l,h,g,y,x,S){let P=g/2,A=db(r),O=0,R=e-i,F=[];for(let V=0;V<r.length-1;V++){let W=r[V],Z=r[V+1],K=W.dist(Z),ue=Z.angleTo(W);for(;R+i<O+K;){R+=i;let ee=(R-O)/K,ne=ki.number(W.x,Z.x,ee),de=ki.number(W.y,Z.y,ee);if(ne>=0&&ne<S&&de>=0&&de<S&&R-P>=0&&R+P<=A){let fe=new yl(ne,de,ue,V);fe._round(),l&&!hb(r,fe,g,l,h)||F.push(fe)}}O+=K}return x||F.length||y||(F=mb(r,O/2,i,l,h,g,y,!0,S)),F}function gb(r,e,i,l){let h=[],g=r.image,y=g.pixelRatio,x=g.paddedRect.w-2,S=g.paddedRect.h-2,P={x1:r.left,y1:r.top,x2:r.right,y2:r.bottom},A=g.stretchX||[[0,x]],O=g.stretchY||[[0,S]],R=(Be,lt)=>Be+lt[1]-lt[0],F=A.reduce(R,0),V=O.reduce(R,0),W=x-F,Z=S-V,K=0,ue=F,ee=0,ne=V,de=0,fe=W,Pe=0,Ge=Z;if(g.content&&l){let Be=g.content,lt=Be[2]-Be[0],nt=Be[3]-Be[1];(g.textFitWidth||g.textFitHeight)&&(P=hv(r)),K=sp(A,0,Be[0]),ee=sp(O,0,Be[1]),ue=sp(A,Be[0],Be[2]),ne=sp(O,Be[1],Be[3]),de=Be[0]-K,Pe=Be[1]-ee,fe=lt-ue,Ge=nt-ne}let Ne=P.x1,$e=P.y1,tt=P.x2-Ne,Ye=P.y2-$e,Ve=(Be,lt,nt,ut)=>{let rt=op(Be.stretch-K,ue,tt,Ne),yt=lp(Be.fixed-de,fe,Be.stretch,F),si=op(lt.stretch-ee,ne,Ye,$e),Xt=lp(lt.fixed-Pe,Ge,lt.stretch,V),Bi=op(nt.stretch-K,ue,tt,Ne),en=lp(nt.fixed-de,fe,nt.stretch,F),dr=op(ut.stretch-ee,ne,Ye,$e),Fi=lp(ut.fixed-Pe,Ge,ut.stretch,V),Li=new T(rt,si),fi=new T(Bi,si),Qi=new T(Bi,dr),sr=new T(rt,dr),Mi=new T(yt/y,Xt/y),jn=new T(en/y,Fi/y),tn=e*Math.PI/180;if(tn){let Lr=Math.sin(tn),Zi=Math.cos(tn),pr=[Zi,-Lr,Lr,Zi];Li._matMult(pr),fi._matMult(pr),sr._matMult(pr),Qi._matMult(pr)}let Nn=Be.stretch+Be.fixed,Fa=lt.stretch+lt.fixed;return{tl:Li,tr:fi,bl:sr,br:Qi,tex:{x:g.paddedRect.x+1+Nn,y:g.paddedRect.y+1+Fa,w:nt.stretch+nt.fixed-Nn,h:ut.stretch+ut.fixed-Fa},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Mi,pixelOffsetBR:jn,minFontScaleX:fe/y/tt,minFontScaleY:Ge/y/Ye,isSDF:i}};if(l&&(g.stretchX||g.stretchY)){let Be=yb(A,W,F),lt=yb(O,Z,V);for(let nt=0;nt<Be.length-1;nt++){let ut=Be[nt],rt=Be[nt+1];for(let yt=0;yt<lt.length-1;yt++)h.push(Ve(ut,lt[yt],rt,lt[yt+1]))}}else h.push(Ve({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:x+1},{fixed:0,stretch:S+1}));return h}function sp(r,e,i){let l=0;for(let h of r)l+=Math.max(e,Math.min(i,h[1]))-Math.max(e,Math.min(i,h[0]));return l}function yb(r,e,i){let l=[{fixed:-1,stretch:0}];for(let[h,g]of r){let y=l[l.length-1];l.push({fixed:h-y.stretch,stretch:y.stretch}),l.push({fixed:h-y.stretch,stretch:y.stretch+(g-h)})}return l.push({fixed:e+1,stretch:i}),l}function op(r,e,i,l){return r/e*i+l}function lp(r,e,i,l){return r-e*i/l}at("Anchor",yl);class cp{constructor(e,i,l,h,g,y,x,S,P,A){var O;if(this.boxStartIndex=e.length,P){let R=y.top,F=y.bottom,V=y.collisionPadding;V&&(R-=V[1],F+=V[3]);let W=F-R;W>0&&(W=Math.max(10,W),this.circleDiameter=W)}else{let R=!((O=y.image)===null||O===void 0)&&O.content&&(y.image.textFitWidth||y.image.textFitHeight)?hv(y):{x1:y.left,y1:y.top,x2:y.right,y2:y.bottom};R.y1=R.y1*x-S[0],R.y2=R.y2*x+S[2],R.x1=R.x1*x-S[3],R.x2=R.x2*x+S[1];let F=y.collisionPadding;if(F&&(R.x1-=F[0]*x,R.y1-=F[1]*x,R.x2+=F[2]*x,R.y2+=F[3]*x),A){let V=new T(R.x1,R.y1),W=new T(R.x2,R.y1),Z=new T(R.x1,R.y2),K=new T(R.x2,R.y2),ue=A*Math.PI/180;V._rotate(ue),W._rotate(ue),Z._rotate(ue),K._rotate(ue),R.x1=Math.min(V.x,W.x,Z.x,K.x),R.x2=Math.max(V.x,W.x,Z.x,K.x),R.y1=Math.min(V.y,W.y,Z.y,K.y),R.y2=Math.max(V.y,W.y,Z.y,K.y)}e.emplaceBack(i.x,i.y,R.x1,R.y1,R.x2,R.y2,l,h,g)}this.boxEndIndex=e.length}}class KA{constructor(e=[],i=(l,h)=>l<h?-1:l>h?1:0){if(this.data=e,this.length=this.data.length,this.compare=i,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;let e=this.data[0],i=this.data.pop();return--this.length>0&&(this.data[0]=i,this._down(0)),e}peek(){return this.data[0]}_up(e){let{data:i,compare:l}=this,h=i[e];for(;e>0;){let g=e-1>>1,y=i[g];if(l(h,y)>=0)break;i[e]=y,e=g}i[e]=h}_down(e){let{data:i,compare:l}=this,h=this.length>>1,g=i[e];for(;e<h;){let y=1+(e<<1),x=y+1;if(x<this.length&&l(i[x],i[y])<0&&(y=x),l(i[y],g)>=0)break;i[e]=i[y],e=y}i[e]=g}}function JA(r,e=1,i=!1){let l=rc.fromPoints(r[0]),h=Math.min(l.width(),l.height()),g=h/2,y=new KA([],QA),{minX:x,minY:S,maxX:P,maxY:A}=l;if(h===0)return new T(x,S);for(let F=x;F<P;F+=h)for(let V=S;V<A;V+=h)y.push(new ou(F+g,V+g,g,r));let O=(function(F){let V=0,W=0,Z=0,K=F[0];for(let ue=0,ee=K.length,ne=ee-1;ue<ee;ne=ue++){let de=K[ue],fe=K[ne],Pe=de.x*fe.y-fe.x*de.y;W+=(de.x+fe.x)*Pe,Z+=(de.y+fe.y)*Pe,V+=3*Pe}return new ou(W/V,Z/V,0,F)})(r),R=y.length;for(;y.length;){let F=y.pop();(F.d>O.d||!O.d)&&(O=F,i&&console.log("found best %d after %d probes",Math.round(1e4*F.d)/1e4,R)),F.max-O.d<=e||(g=F.h/2,y.push(new ou(F.p.x-g,F.p.y-g,g,r)),y.push(new ou(F.p.x+g,F.p.y-g,g,r)),y.push(new ou(F.p.x-g,F.p.y+g,g,r)),y.push(new ou(F.p.x+g,F.p.y+g,g,r)),R+=4)}return i&&(console.log(`num probes: ${R}`),console.log(`best distance: ${O.d}`)),O.p}function QA(r,e){return e.max-r.max}function ou(r,e,i,l){this.p=new T(r,e),this.h=i,this.d=(function(h,g){let y=!1,x=1/0;for(let S=0;S<g.length;S++){let P=g[S];for(let A=0,O=P.length,R=O-1;A<O;R=A++){let F=P[A],V=P[R];F.y>h.y!=V.y>h.y&&h.x<(V.x-F.x)*(h.y-F.y)/(V.y-F.y)+F.x&&(y=!y),x=Math.min(x,w_(h,F,V))}}return(y?1:-1)*Math.sqrt(x)})(this.p,l),this.max=this.d+this.h*Math.SQRT2}var Qr;f.aQ=void 0,(Qr=f.aQ||(f.aQ={}))[Qr.center=1]="center",Qr[Qr.left=2]="left",Qr[Qr.right=3]="right",Qr[Qr.top=4]="top",Qr[Qr.bottom=5]="bottom",Qr[Qr["top-left"]=6]="top-left",Qr[Qr["top-right"]=7]="top-right",Qr[Qr["bottom-left"]=8]="bottom-left",Qr[Qr["bottom-right"]=9]="bottom-right";let Mm=Number.POSITIVE_INFINITY;function _b(r,e){return e[1]!==Mm?(function(i,l,h){let g=0,y=0;switch(l=Math.abs(l),h=Math.abs(h),i){case"top-right":case"top-left":case"top":y=h-7;break;case"bottom-right":case"bottom-left":case"bottom":y=7-h}switch(i){case"top-right":case"bottom-right":case"right":g=-l;break;case"top-left":case"bottom-left":case"left":g=l}return[g,y]})(r,e[0],e[1]):(function(i,l){let h=0,g=0;l<0&&(l=0);let y=l/Math.SQRT2;switch(i){case"top-right":case"top-left":g=y-7;break;case"bottom-right":case"bottom-left":g=7-y;break;case"bottom":g=7-l;break;case"top":g=l-7}switch(i){case"top-right":case"bottom-right":h=-y;break;case"top-left":case"bottom-left":h=y;break;case"left":h=l;break;case"right":h=-l}return[h,g]})(r,e[0])}function vb(r,e,i){var l;let h=r.layout,g=(l=h.get("text-variable-anchor-offset"))===null||l===void 0?void 0:l.evaluate(e,{},i);if(g){let x=g.values,S=[];for(let P=0;P<x.length;P+=2){let A=S[P]=x[P],O=x[P+1].map((R=>R*Mr));A.startsWith("top")?O[1]-=7:A.startsWith("bottom")&&(O[1]+=7),S[P+1]=O}return new vr(S)}let y=h.get("text-variable-anchor");if(y){let x;x=r._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[h.get("text-radial-offset").evaluate(e,{},i)*Mr,Mm]:h.get("text-offset").evaluate(e,{},i).map((P=>P*Mr));let S=[];for(let P of y)S.push(P,_b(P,x));return new vr(S)}return null}function Im(r){switch(r){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function eM(r,e,i,l,h,g,y,x,S,P,A,O){let R=g.textMaxSize.evaluate(e,{});R===void 0&&(R=y);let F=r.layers[0].layout,V=F.get("icon-offset").evaluate(e,{},A),W=xb(i.horizontal),Z=y/24,K=r.tilePixelRatio*Z,ue=r.tilePixelRatio*R/24,ee=r.tilePixelRatio*x,ne=r.tilePixelRatio*F.get("symbol-spacing"),de=F.get("text-padding")*r.tilePixelRatio,fe=(function(nt,ut,rt,yt=1){let si=nt.get("icon-padding").evaluate(ut,{},rt),Xt=si&&si.values;return[Xt[0]*yt,Xt[1]*yt,Xt[2]*yt,Xt[3]*yt]})(F,e,A,r.tilePixelRatio),Pe=F.get("text-max-angle")/180*Math.PI,Ge=F.get("text-rotation-alignment")!=="viewport"&&F.get("symbol-placement")!=="point",Ne=F.get("icon-rotation-alignment")==="map"&&F.get("symbol-placement")!=="point",$e=F.get("symbol-placement"),tt=ne/2,Ye=F.get("icon-text-fit"),Ve;l&&Ye!=="none"&&(r.allowVerticalPlacement&&i.vertical&&(Ve=dv(l,i.vertical,Ye,F.get("icon-text-fit-padding"),V,Z)),W&&(l=dv(l,W,Ye,F.get("icon-text-fit-padding"),V,Z)));let Be=A?O.line.getGranularityForZoomLevel(A.z):1,lt=(nt,ut)=>{ut.x<0||ut.x>=ei||ut.y<0||ut.y>=ei||(function(rt,yt,si,Xt,Bi,en,dr,Fi,Li,fi,Qi,sr,Mi,jn,tn,Nn,Fa,Lr,Zi,pr,er,Or,zo,fs,Bh){let _l=rt.addToLineVertexArray(yt,si),nc,lu,cu,uu,Cb=0,kb=0,Pb=0,Eb=0,jm=-1,Nm=-1,Lo={},Ab=zi("");if(rt.allowVerticalPlacement&&Xt.vertical){let mn=Fi.layout.get("text-rotate").evaluate(er,{},fs)+90;cu=new cp(Li,yt,fi,Qi,sr,Xt.vertical,Mi,jn,tn,mn),dr&&(uu=new cp(Li,yt,fi,Qi,sr,dr,Fa,Lr,tn,mn))}if(Bi){let mn=Fi.layout.get("icon-rotate").evaluate(er,{}),ba=Fi.layout.get("icon-text-fit")!=="none",ac=gb(Bi,mn,zo,ba),gs=dr?gb(dr,mn,zo,ba):void 0;lu=new cp(Li,yt,fi,Qi,sr,Bi,Fa,Lr,!1,mn),Cb=4*ac.length;let sc=rt.iconSizeData,$s=null;sc.kind==="source"?($s=[Mo*Fi.layout.get("icon-size").evaluate(er,{})],$s[0]>fl&&cr(`${rt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):sc.kind==="composite"&&($s=[Mo*Or.compositeIconSizes[0].evaluate(er,{},fs),Mo*Or.compositeIconSizes[1].evaluate(er,{},fs)],($s[0]>fl||$s[1]>fl)&&cr(`${rt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),rt.addSymbols(rt.icon,ac,$s,pr,Zi,er,f.aA.none,yt,_l.lineStartIndex,_l.lineLength,-1,fs),jm=rt.icon.placedSymbolArray.length-1,gs&&(kb=4*gs.length,rt.addSymbols(rt.icon,gs,$s,pr,Zi,er,f.aA.vertical,yt,_l.lineStartIndex,_l.lineLength,-1,fs),Nm=rt.icon.placedSymbolArray.length-1)}let Mb=Object.keys(Xt.horizontal);for(let mn of Mb){let ba=Xt.horizontal[mn];if(!nc){Ab=zi(ba.text);let gs=Fi.layout.get("text-rotate").evaluate(er,{},fs);nc=new cp(Li,yt,fi,Qi,sr,ba,Mi,jn,tn,gs)}let ac=ba.positionedLines.length===1;if(Pb+=bb(rt,yt,ba,en,Fi,tn,er,Nn,_l,Xt.vertical?f.aA.horizontal:f.aA.horizontalOnly,ac?Mb:[mn],Lo,jm,Or,fs),ac)break}Xt.vertical&&(Eb+=bb(rt,yt,Xt.vertical,en,Fi,tn,er,Nn,_l,f.aA.vertical,["vertical"],Lo,Nm,Or,fs));let rM=nc?nc.boxStartIndex:rt.collisionBoxArray.length,nM=nc?nc.boxEndIndex:rt.collisionBoxArray.length,aM=cu?cu.boxStartIndex:rt.collisionBoxArray.length,sM=cu?cu.boxEndIndex:rt.collisionBoxArray.length,oM=lu?lu.boxStartIndex:rt.collisionBoxArray.length,lM=lu?lu.boxEndIndex:rt.collisionBoxArray.length,cM=uu?uu.boxStartIndex:rt.collisionBoxArray.length,uM=uu?uu.boxEndIndex:rt.collisionBoxArray.length,ms=-1,hp=(mn,ba)=>mn&&mn.circleDiameter?Math.max(mn.circleDiameter,ba):ba;ms=hp(nc,ms),ms=hp(cu,ms),ms=hp(lu,ms),ms=hp(uu,ms);let Ib=ms>-1?1:0;Ib&&(ms*=Bh/Mr),rt.glyphOffsetArray.length>=tu.MAX_GLYPHS&&cr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),er.sortKey!==void 0&&rt.addToSortKeyRanges(rt.symbolInstances.length,er.sortKey);let hM=vb(Fi,er,fs),[dM,pM]=(function(mn,ba){let ac=mn.length,gs=ba?.values;if(gs?.length>0)for(let sc=0;sc<gs.length;sc+=2){let $s=gs[sc+1];mn.emplaceBack(f.aQ[gs[sc]],$s[0],$s[1])}return[ac,mn.length]})(rt.textAnchorOffsets,hM);rt.symbolInstances.emplaceBack(yt.x,yt.y,Lo.right>=0?Lo.right:-1,Lo.center>=0?Lo.center:-1,Lo.left>=0?Lo.left:-1,Lo.vertical||-1,jm,Nm,Ab,rM,nM,aM,sM,oM,lM,cM,uM,fi,Pb,Eb,Cb,kb,Ib,0,Mi,ms,dM,pM)})(r,ut,nt,i,l,h,Ve,r.layers[0],r.collisionBoxArray,e.index,e.sourceLayerIndex,r.index,K,[de,de,de,de],Ge,S,ee,fe,Ne,V,e,g,P,A,y)};if($e==="line")for(let nt of lb(e.geometry,0,0,ei,ei)){let ut=ec(nt,Be),rt=XA(ut,ne,Pe,i.vertical||W,l,24,ue,r.overscaling,ei);for(let yt of rt)W&&tM(r,W.text,tt,yt)||lt(ut,yt)}else if($e==="line-center"){for(let nt of e.geometry)if(nt.length>1){let ut=ec(nt,Be),rt=YA(ut,Pe,i.vertical||W,l,24,ue);rt&&lt(ut,rt)}}else if(e.type==="Polygon")for(let nt of Ls(e.geometry,0)){let ut=JA(nt,16);lt(ec(nt[0],Be,!0),new yl(ut.x,ut.y,0))}else if(e.type==="LineString")for(let nt of e.geometry){let ut=ec(nt,Be);lt(ut,new yl(ut[0].x,ut[0].y,0))}else if(e.type==="Point")for(let nt of e.geometry)for(let ut of nt)lt([ut],new yl(ut.x,ut.y,0))}function bb(r,e,i,l,h,g,y,x,S,P,A,O,R,F,V){let W=(function(ue,ee,ne,de,fe,Pe,Ge,Ne){let $e=de.layout.get("text-rotate").evaluate(Pe,{})*Math.PI/180,tt=[];for(let Ye of ee.positionedLines)for(let Ve of Ye.positionedGlyphs){if(!Ve.rect)continue;let Be=Ve.rect||{},lt=4,nt=!0,ut=1,rt=0,yt=(fe||Ne)&&Ve.vertical,si=Ve.metrics.advance*Ve.scale/2;if(Ne&&ee.verticalizable&&(rt=Ye.lineOffset/2-(Ve.imageName?-(Mr-Ve.metrics.width*Ve.scale)/2:(Ve.scale-1)*Mr)),Ve.imageName){let Lr=Ge[Ve.imageName];nt=Lr.sdf,ut=Lr.pixelRatio,lt=1/ut}let Xt=fe?[Ve.x+si,Ve.y]:[0,0],Bi=fe?[0,0]:[Ve.x+si+ne[0],Ve.y+ne[1]-rt],en=[0,0];yt&&(en=Bi,Bi=[0,0]);let dr=Ve.metrics.isDoubleResolution?2:1,Fi=(Ve.metrics.left-lt)*Ve.scale-si+Bi[0],Li=(-Ve.metrics.top-lt)*Ve.scale+Bi[1],fi=Fi+Be.w/dr*Ve.scale/ut,Qi=Li+Be.h/dr*Ve.scale/ut,sr=new T(Fi,Li),Mi=new T(fi,Li),jn=new T(Fi,Qi),tn=new T(fi,Qi);if(yt){let Lr=new T(-si,si- -17),Zi=-Math.PI/2,pr=12-si,er=new T(22-pr,-(Ve.imageName?pr:0)),Or=new T(...en);sr._rotateAround(Zi,Lr)._add(er)._add(Or),Mi._rotateAround(Zi,Lr)._add(er)._add(Or),jn._rotateAround(Zi,Lr)._add(er)._add(Or),tn._rotateAround(Zi,Lr)._add(er)._add(Or)}if($e){let Lr=Math.sin($e),Zi=Math.cos($e),pr=[Zi,-Lr,Lr,Zi];sr._matMult(pr),Mi._matMult(pr),jn._matMult(pr),tn._matMult(pr)}let Nn=new T(0,0),Fa=new T(0,0);tt.push({tl:sr,tr:Mi,bl:jn,br:tn,tex:Be,writingMode:ee.writingMode,glyphOffset:Xt,sectionIndex:Ve.sectionIndex,isSDF:nt,pixelOffsetTL:Nn,pixelOffsetBR:Fa,minFontScaleX:0,minFontScaleY:0})}return tt})(0,i,x,h,g,y,l,r.allowVerticalPlacement),Z=r.textSizeData,K=null;Z.kind==="source"?(K=[Mo*h.layout.get("text-size").evaluate(y,{})],K[0]>fl&&cr(`${r.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Z.kind==="composite"&&(K=[Mo*F.compositeTextSizes[0].evaluate(y,{},V),Mo*F.compositeTextSizes[1].evaluate(y,{},V)],(K[0]>fl||K[1]>fl)&&cr(`${r.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),r.addSymbols(r.text,W,K,x,g,y,P,e,S.lineStartIndex,S.lineLength,R,V);for(let ue of A)O[ue]=r.text.placedSymbolArray.length-1;return 4*W.length}function xb(r){for(let e in r)return r[e];return null}function tM(r,e,i,l){let h=r.compareText;if(e in h){let g=h[e];for(let y=g.length-1;y>=0;y--)if(l.dist(g[y])<i)return!0}else h[e]=[];return h[e].push(l),!1}let wb=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class zm{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");let[i,l]=new Uint8Array(e,0,2);if(i!==219)throw new Error("Data does not appear to be in a KDBush format.");let h=l>>4;if(h!==1)throw new Error(`Got v${h} data when expected v1.`);let g=wb[15&l];if(!g)throw new Error("Unrecognized array type.");let[y]=new Uint16Array(e,2,1),[x]=new Uint32Array(e,4,1);return new zm(x,y,g,e)}constructor(e,i=64,l=Float64Array,h){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+i,2),65535),this.ArrayType=l,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;let g=wb.indexOf(this.ArrayType),y=2*e*this.ArrayType.BYTES_PER_ELEMENT,x=e*this.IndexArrayType.BYTES_PER_ELEMENT,S=(8-x%8)%8;if(g<0)throw new Error(`Unexpected typed array class: ${l}.`);h&&h instanceof ArrayBuffer?(this.data=h,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+x+S,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+y+x+S),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+x+S,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+g]),new Uint16Array(this.data,2,1)[0]=i,new Uint32Array(this.data,4,1)[0]=e)}add(e,i){let l=this._pos>>1;return this.ids[l]=l,this.coords[this._pos++]=e,this.coords[this._pos++]=i,l}finish(){let e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return Lm(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,i,l,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:g,coords:y,nodeSize:x}=this,S=[0,g.length-1,0],P=[];for(;S.length;){let A=S.pop()||0,O=S.pop()||0,R=S.pop()||0;if(O-R<=x){for(let Z=R;Z<=O;Z++){let K=y[2*Z],ue=y[2*Z+1];K>=e&&K<=l&&ue>=i&&ue<=h&&P.push(g[Z])}continue}let F=R+O>>1,V=y[2*F],W=y[2*F+1];V>=e&&V<=l&&W>=i&&W<=h&&P.push(g[F]),(A===0?e<=V:i<=W)&&(S.push(R),S.push(F-1),S.push(1-A)),(A===0?l>=V:h>=W)&&(S.push(F+1),S.push(O),S.push(1-A))}return P}within(e,i,l){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:h,coords:g,nodeSize:y}=this,x=[0,h.length-1,0],S=[],P=l*l;for(;x.length;){let A=x.pop()||0,O=x.pop()||0,R=x.pop()||0;if(O-R<=y){for(let Z=R;Z<=O;Z++)Tb(g[2*Z],g[2*Z+1],e,i)<=P&&S.push(h[Z]);continue}let F=R+O>>1,V=g[2*F],W=g[2*F+1];Tb(V,W,e,i)<=P&&S.push(h[F]),(A===0?e-l<=V:i-l<=W)&&(x.push(R),x.push(F-1),x.push(1-A)),(A===0?e+l>=V:i+l>=W)&&(x.push(F+1),x.push(O),x.push(1-A))}return S}}function Lm(r,e,i,l,h,g){if(h-l<=i)return;let y=l+h>>1;Sb(r,e,y,l,h,g),Lm(r,e,i,l,y-1,1-g),Lm(r,e,i,y+1,h,1-g)}function Sb(r,e,i,l,h,g){for(;h>l;){if(h-l>600){let P=h-l+1,A=i-l+1,O=Math.log(P),R=.5*Math.exp(2*O/3),F=.5*Math.sqrt(O*R*(P-R)/P)*(A-P/2<0?-1:1);Sb(r,e,i,Math.max(l,Math.floor(i-A*R/P+F)),Math.min(h,Math.floor(i+(P-A)*R/P+F)),g)}let y=e[2*i+g],x=l,S=h;for(Dh(r,e,l,i),e[2*h+g]>y&&Dh(r,e,l,h);x<S;){for(Dh(r,e,x,S),x++,S--;e[2*x+g]<y;)x++;for(;e[2*S+g]>y;)S--}e[2*l+g]===y?Dh(r,e,l,S):(S++,Dh(r,e,S,h)),S<=i&&(l=S+1),i<=S&&(h=S-1)}}function Dh(r,e,i,l){Om(r,i,l),Om(e,2*i,2*l),Om(e,2*i+1,2*l+1)}function Om(r,e,i){let l=r[e];r[e]=r[i],r[i]=l}function Tb(r,e,i,l){let h=r-i,g=e-l;return h*h+g*g}var Dm;f.cI=void 0,(Dm=f.cI||(f.cI={})).create="create",Dm.load="load",Dm.fullLoad="fullLoad";let up=null,Rh=[],Rm=1e3/60,Bm="loadTime",Fm="fullLoadTime",iM={mark(r){performance.mark(r)},frame(r){let e=r;up!=null&&Rh.push(e-up),up=e},clearMetrics(){up=null,Rh=[],performance.clearMeasures(Bm),performance.clearMeasures(Fm);for(let r in f.cI)performance.clearMarks(f.cI[r])},getPerformanceMetrics(){performance.measure(Bm,f.cI.create,f.cI.load),performance.measure(Fm,f.cI.create,f.cI.fullLoad);let r=performance.getEntriesByName(Bm)[0].duration,e=performance.getEntriesByName(Fm)[0].duration,i=Rh.length,l=1/(Rh.reduce(((g,y)=>g+y),0)/i/1e3),h=Rh.filter((g=>g>Rm)).reduce(((g,y)=>g+(y-Rm)/Rm),0);return{loadTime:r,fullLoadTime:e,fps:l,percentDroppedFrames:h/(i+h)*100,totalFrames:i}}};f.$=te,f.A=xe,f.B=Ju,f.C=ll,f.D=gt,f.E=ai,f.F=function([r,e,i]){return e+=90,e*=Math.PI/180,i*=Math.PI/180,{x:r*Math.cos(e)*Math.sin(i),y:r*Math.sin(e)*Math.sin(i),z:r*Math.cos(i)}},f.G=ki,f.H=Ti,f.I=am,f.J=Vl,f.K=function(r){if(Ei==null){let e=r.navigator?r.navigator.userAgent:null;Ei=!!r.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return Ei},f.L=class{constructor(r,e){this.target=r,this.mapId=e,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new yA((()=>this.process())),this.subscription=Ha(this.target,"message",(i=>this.receive(i)),!1),this.globalScope=Pn(self)?r:window}registerMessageHandler(r,e){this.messageHandlers[r]=e}unregisterMessageHandler(r){delete this.messageHandlers[r]}sendAsync(r,e){return new Promise(((i,l)=>{let h=Math.round(1e18*Math.random()).toString(36).substring(0,10),g=e?Ha(e.signal,"abort",(()=>{g?.unsubscribe(),delete this.resolveRejects[h];let S={id:h,type:"<cancel>",origin:location.origin,targetMapId:r.targetMapId,sourceMapId:this.mapId};this.target.postMessage(S)}),_A):null;this.resolveRejects[h]={resolve:S=>{g?.unsubscribe(),i(S)},reject:S=>{g?.unsubscribe(),l(S)}};let y=[],x=Object.assign(Object.assign({},r),{id:h,sourceMapId:this.mapId,origin:location.origin,data:bo(r.data,y)});this.target.postMessage(x,{transfer:y})}))}receive(r){let e=r.data,i=e.id;if(!(e.origin!=="file://"&&location.origin!=="file://"&&e.origin!=="resource://android"&&location.origin!=="resource://android"&&e.origin!==location.origin||e.targetMapId&&this.mapId!==e.targetMapId)){if(e.type==="<cancel>"){delete this.tasks[i];let l=this.abortControllers[i];return delete this.abortControllers[i],void(l&&l.abort())}if(Pn(self)||e.mustQueue)return this.tasks[i]=e,this.taskQueue.push(i),void this.invoker.trigger();this.processTask(i,e)}}process(){if(this.taskQueue.length===0)return;let r=this.taskQueue.shift(),e=this.tasks[r];delete this.tasks[r],this.taskQueue.length>0&&this.invoker.trigger(),e&&this.processTask(r,e)}processTask(r,e){return a(this,void 0,void 0,(function*(){if(e.type==="<response>"){let h=this.resolveRejects[r];return delete this.resolveRejects[r],h?void(e.error?h.reject(Zl(e.error)):h.resolve(Zl(e.data))):void 0}if(!this.messageHandlers[e.type])return void this.completeTask(r,new Error(`Could not find a registered handler for ${e.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));let i=Zl(e.data),l=new AbortController;this.abortControllers[r]=l;try{let h=yield this.messageHandlers[e.type](e.sourceMapId,i,l);this.completeTask(r,null,h)}catch(h){this.completeTask(r,h)}}))}completeTask(r,e,i){let l=[];delete this.abortControllers[r];let h={id:r,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:e?bo(e):null,data:bo(i,l)};this.target.postMessage(h,{transfer:l})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},f.M=Ce,f.N=function(){var r=new xe(16);return xe!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r},f.O=function(r,e,i){var l,h,g,y,x,S,P,A,O,R,F,V,W=i[0],Z=i[1],K=i[2];return e===r?(r[12]=e[0]*W+e[4]*Z+e[8]*K+e[12],r[13]=e[1]*W+e[5]*Z+e[9]*K+e[13],r[14]=e[2]*W+e[6]*Z+e[10]*K+e[14],r[15]=e[3]*W+e[7]*Z+e[11]*K+e[15]):(h=e[1],g=e[2],y=e[3],x=e[4],S=e[5],P=e[6],A=e[7],O=e[8],R=e[9],F=e[10],V=e[11],r[0]=l=e[0],r[1]=h,r[2]=g,r[3]=y,r[4]=x,r[5]=S,r[6]=P,r[7]=A,r[8]=O,r[9]=R,r[10]=F,r[11]=V,r[12]=l*W+x*Z+O*K+e[12],r[13]=h*W+S*Z+R*K+e[13],r[14]=g*W+P*Z+F*K+e[14],r[15]=y*W+A*Z+V*K+e[15]),r},f.P=T,f.Q=function(r,e,i){var l=i[0],h=i[1],g=i[2];return r[0]=e[0]*l,r[1]=e[1]*l,r[2]=e[2]*l,r[3]=e[3]*l,r[4]=e[4]*h,r[5]=e[5]*h,r[6]=e[6]*h,r[7]=e[7]*h,r[8]=e[8]*g,r[9]=e[9]*g,r[10]=e[10]*g,r[11]=e[11]*g,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r},f.R=Fn,f.S=function(r,e,i){var l=e[0],h=e[1],g=e[2],y=e[3],x=e[4],S=e[5],P=e[6],A=e[7],O=e[8],R=e[9],F=e[10],V=e[11],W=e[12],Z=e[13],K=e[14],ue=e[15],ee=i[0],ne=i[1],de=i[2],fe=i[3];return r[0]=ee*l+ne*x+de*O+fe*W,r[1]=ee*h+ne*S+de*R+fe*Z,r[2]=ee*g+ne*P+de*F+fe*K,r[3]=ee*y+ne*A+de*V+fe*ue,r[4]=(ee=i[4])*l+(ne=i[5])*x+(de=i[6])*O+(fe=i[7])*W,r[5]=ee*h+ne*S+de*R+fe*Z,r[6]=ee*g+ne*P+de*F+fe*K,r[7]=ee*y+ne*A+de*V+fe*ue,r[8]=(ee=i[8])*l+(ne=i[9])*x+(de=i[10])*O+(fe=i[11])*W,r[9]=ee*h+ne*S+de*R+fe*Z,r[10]=ee*g+ne*P+de*F+fe*K,r[11]=ee*y+ne*A+de*V+fe*ue,r[12]=(ee=i[12])*l+(ne=i[13])*x+(de=i[14])*O+(fe=i[15])*W,r[13]=ee*h+ne*S+de*R+fe*Z,r[14]=ee*g+ne*P+de*F+fe*K,r[15]=ee*y+ne*A+de*V+fe*ue,r},f.T=Xf,f.U=function(r,e){let i={};for(let l=0;l<e.length;l++){let h=e[l];h in r&&(i[h]=r[h])}return i},f.V=ml,f.W=gr,f.X=xv,f.Y=bv,f.Z=ye,f._=a,f.a=re,f.a$=Tv,f.a0=Te,f.a1=$a,f.a2=_a,f.a3=Sv,f.a4=Jd,f.a5=ei,f.a6=function(r,e,i){if(!r)return e||{};if(!e)return r||{};let l=Pv(r),h=Pv(e);(function(y,x){x.removeAll&&(y.add.clear(),y.update.clear(),y.remove.clear(),x.remove.clear());for(let S of x.remove)y.add.delete(S),y.update.delete(S);for(let[S,P]of x.update){let A=y.update.get(S);A&&(x.update.set(S,vA(A,P)),y.update.delete(S))}})(l,h);let g={};if((l.removeAll||h.removeAll)&&(g.removeAll=!0),g.remove=new Set([...l.remove,...h.remove]),g.add=new Map([...l.add,...h.add]),g.update=new Map([...l.update,...h.update]),g.remove.size&&g.add.size)for(let y of g.add.keys())g.remove.delete(y);return(function(y){let x={};return y.removeAll&&(x.removeAll=y.removeAll),y.remove&&(x.remove=Array.from(y.remove)),y.add&&(x.add=Array.from(y.add.values())),y.update&&(x.update=Array.from(y.update.values())),x})(g)},f.a7=function(r,e){if(r==null||r.type==null)return!0;if(r.type==="Feature")return Ih(r,e)!=null;if(r.type==="FeatureCollection"){let i=new Set;for(let l of r.features){let h=Ih(l,e);if(h==null||i.has(h))return!1;i.add(h)}return!0}return!1},f.a8=function(r,e){let i=new Map;if(!(r==null||r.type==null))if(r.type==="Feature")i.set(Ih(r,e),r);else for(let l of r.features)i.set(Ih(l,e),l);return i},f.a9=function(r,e,i){var l,h;if(e.removeAll)r.clear();else if(e.remove)for(let g of e.remove)r.delete(g);if(e.add)for(let g of e.add){let y=Ih(g,i);y!=null&&r.set(y,g)}if(e.update)for(let g of e.update){let y=r.get(g.id);if(!y)continue;let x=!!g.newGeometry,S=g.removeAllProperties||((l=g.removeProperties)===null||l===void 0?void 0:l.length)>0||((h=g.addOrUpdateProperties)===null||h===void 0?void 0:h.length)>0;if((x||S)&&(y=Object.assign({},y),r.set(g.id,y),x&&(y.geometry=g.newGeometry),S)){if(y.properties=g.removeAllProperties?{}:Object.assign({},y.properties||{}),g.removeProperties)for(let P of g.removeProperties)delete y.properties[P];if(g.addOrUpdateProperties)for(let{key:P,value:A}of g.addOrUpdateProperties)y.properties[P]=A}}},f.aB=function(r,{uSize:e,uSizeT:i},{lowerSize:l,upperSize:h}){return r.kind==="source"?l/Mo:r.kind==="composite"?ki.number(l/Mo,h/Mo,i):e},f.aC=function(r,e){var i=e[0],l=e[1],h=e[2],g=e[3],y=e[4],x=e[5],S=e[6],P=e[7],A=e[8],O=e[9],R=e[10],F=e[11],V=e[12],W=e[13],Z=e[14],K=e[15],ue=i*x-l*y,ee=i*S-h*y,ne=i*P-g*y,de=l*S-h*x,fe=l*P-g*x,Pe=h*P-g*S,Ge=A*W-O*V,Ne=A*Z-R*V,$e=A*K-F*V,tt=O*Z-R*W,Ye=O*K-F*W,Ve=R*K-F*Z,Be=ue*Ve-ee*Ye+ne*tt+de*$e-fe*Ne+Pe*Ge;return Be?(r[0]=(x*Ve-S*Ye+P*tt)*(Be=1/Be),r[1]=(h*Ye-l*Ve-g*tt)*Be,r[2]=(W*Pe-Z*fe+K*de)*Be,r[3]=(R*fe-O*Pe-F*de)*Be,r[4]=(S*$e-y*Ve-P*Ne)*Be,r[5]=(i*Ve-h*$e+g*Ne)*Be,r[6]=(Z*ne-V*Pe-K*ee)*Be,r[7]=(A*Pe-R*ne+F*ee)*Be,r[8]=(y*Ye-x*$e+P*Ge)*Be,r[9]=(l*$e-i*Ye-g*Ge)*Be,r[10]=(V*fe-W*ne+K*ue)*Be,r[11]=(O*ne-A*fe-F*ue)*Be,r[12]=(x*Ne-y*tt-S*Ge)*Be,r[13]=(i*tt-l*Ne+h*Ge)*Be,r[14]=(W*ee-V*de-Z*ue)*Be,r[15]=(A*de-O*ee+R*ue)*Be,r):null},f.aD=ii,f.aE=function(r){var e=r[0],i=r[1];return Math.sqrt(e*e+i*i)},f.aF=function(r){return r[0]=0,r[1]=0,r},f.aG=function(r,e,i){return r[0]=e[0]*i,r[1]=e[1]*i,r},f.aH=lm,f.aI=Tt,f.aJ=function(r,e,i,l){let h=e.y-r.y,g=e.x-r.x,y=l.y-i.y,x=l.x-i.x,S=y*g-x*h;if(S===0)return null;let P=(x*(r.y-i.y)-y*(r.x-i.x))/S;return new T(r.x+P*g,r.y+P*h)},f.aK=lb,f.aL=gh,f.aM=function(r){let e=1/0,i=1/0,l=-1/0,h=-1/0;for(let g of r)e=Math.min(e,g.x),i=Math.min(i,g.y),l=Math.max(l,g.x),h=Math.max(h,g.y);return[e,i,l,h]},f.aN=Mr,f.aO=kt,f.aP=function(r,e,i,l,h=!1){if(!i[0]&&!i[1])return[0,0];let g=h?l==="map"?-r.bearingInRadians:0:l==="viewport"?r.bearingInRadians:0;if(g){let y=Math.sin(g),x=Math.cos(g);i=[i[0]*x-i[1]*y,i[0]*y+i[1]*x]}return[h?i[0]:kt(e,i[0],r.zoom),h?i[1]:kt(e,i[1],r.zoom)]},f.aR=om,f.aS=Im,f.aT=sm,f.aU=zm,f.aV=rr,f.aW=Zd,f.aX=j,f.aY=Xe,f.aZ=De,f.a_=Ur,f.aa=Oh,f.ab=Mh,f.ac=rc,f.ad=25,f.ae=pm,f.af=r=>{let e=window.document.createElement("video");return e.muted=!0,new Promise((i=>{e.onloadstart=()=>{i(e)};for(let l of r){let h=window.document.createElement("source");Ue(l)||(e.crossOrigin="Anonymous"),h.src=l,e.appendChild(h)}}))},f.ag=Re,f.ah=function(){return Sa++},f.ai=t,f.aj=tu,f.ak=ht,f.al=Ao,f.am=Av,f.an=function(r){let e={};if(r.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((i,l,h,g)=>{let y=h||g;return e[l]=!y||y.toLowerCase(),""})),e["max-age"]){let i=parseInt(e["max-age"],10);isNaN(i)?delete e["max-age"]:e["max-age"]=i}return e},f.ao=Ft,f.ap=85.051129,f.aq=bs,f.ar=function(r){return Math.pow(2,r)},f.as=dt,f.at=wv,f.au=function(r){return Math.log(r)/Math.LN2},f.av=function(r){var e=r[0],i=r[1];return e*e+i*i},f.aw=function(r){if(!r.length)return new Set;let e=Math.max(...r.map((S=>S.canonical.z))),i=1/0,l=-1/0,h=1/0,g=-1/0,y=[];for(let S of r){let{x:P,y:A,z:O}=S.canonical,R=Math.pow(2,e-O),F=P*R,V=A*R;y.push({id:S,x:F,y:V}),F<i&&(i=F),F>l&&(l=F),V<h&&(h=V),V>g&&(g=V)}let x=new Set;for(let S of y)S.x!==i&&S.x!==l&&S.y!==h&&S.y!==g||x.add(S.id);return x},f.ax=function(r,e){let i=Math.abs(2*r.wrap)-+(r.wrap<0),l=Math.abs(2*e.wrap)-+(e.wrap<0);return r.overscaledZ-e.overscaledZ||l-i||e.canonical.y-r.canonical.y||e.canonical.x-r.canonical.x},f.ay=class{constructor(r,e){this.max=r,this.onRemove=e,this.reset()}reset(){for(let r in this.data)for(let e of this.data[r])e.timeout&&clearTimeout(e.timeout),this.onRemove(e.value);return this.data={},this.order=[],this}add(r,e,i){let l=r.wrapped().key;this.data[l]===void 0&&(this.data[l]=[]);let h={value:e,timeout:void 0};if(i!==void 0&&(h.timeout=setTimeout((()=>{this.remove(r,h)}),i)),this.data[l].push(h),this.order.push(l),this.order.length>this.max){let g=this._getAndRemoveByKey(this.order[0]);g&&this.onRemove(g)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){let e=this.data[r].shift();return e.timeout&&clearTimeout(e.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),e.value}getByKey(r){let e=this.data[r];return e?e[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,e){if(!this.has(r))return this;let i=r.wrapped().key,l=e===void 0?0:this.data[i].indexOf(e),h=this.data[i][l];return this.data[i].splice(l,1),h.timeout&&clearTimeout(h.timeout),this.data[i].length===0&&delete this.data[i],this.onRemove(h.value),this.order.splice(this.order.indexOf(i),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){let e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}filter(r){let e=[];for(let i in this.data)for(let l of this.data[i])r(l.value)||e.push(l);for(let i of e)this.remove(i.value.tileID,i)}},f.az=function(r,e){let i=0,l=0;if(r.kind==="constant")l=r.layoutSize;else if(r.kind!=="source"){let{interpolationType:h,minZoom:g,maxZoom:y}=r,x=h?Ft(Wi.interpolationFactor(h,e,g,y),0,1):0;r.kind==="camera"?l=ki.number(r.minSize,r.maxSize,x):i=x}return{uSizeT:i,uSize:l}},f.b=En,f.b$=class extends fn{constructor(r,e){super(r,e),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1i(this.location,r))}},f.b0=Je,f.b1=je,f.b2=function(r){var e=new xe(3);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e},f.b3=function(r,e,i){return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],r},f.b4=function(r,e){var i=e[0],l=e[1],h=e[2],g=i*i+l*l+h*h;return g>0&&(g=1/Math.sqrt(g)),r[0]=e[0]*g,r[1]=e[1]*g,r[2]=e[2]*g,r},f.b5=ot,f.b6=function(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]},f.b7=function(r,e,i){return r[0]=e[0]*i[0],r[1]=e[1]*i[1],r[2]=e[2]*i[2],r[3]=e[3]*i[3],r},f.b8=Vt,f.b9=function(r,e,i){let l=e[0]*i[0]+e[1]*i[1]+e[2]*i[2];return l===0?null:(-(r[0]*i[0]+r[1]*i[1]+r[2]*i[2])-i[3])/l},f.bA=function(){return new Float64Array(3)},f.bB=function(r,e,i,l){return r[0]=e[0]+i[0]*l,r[1]=e[1]+i[1]*l,r[2]=e[2]+i[2]*l,r},f.bC=ti,f.bD=function(r,e,i){var l=i[0],h=i[1],g=i[2],y=i[3],x=e[0],S=e[1],P=e[2],A=h*P-g*S,O=g*x-l*P,R=l*S-h*x;return r[0]=x+y*(A+=A)+h*(R+=R)-g*(O+=O),r[1]=S+y*O+g*A-l*R,r[2]=P+y*R+l*O-h*A,r},f.bE=function(r,e,i){let l=(function(S){var P=S[3],A=S[4],O=S[5],R=S[6],F=S[7],V=S[8];return S[0]*(V*A-O*F)+S[1]*(-V*P+O*R)+S[2]*(F*P-A*R)})([r[0],r[1],r[2],e[0],e[1],e[2],i[0],i[1],i[2]]);if(l===0)return null;let h=ot([],[e[0],e[1],e[2]],[i[0],i[1],i[2]]),g=ot([],[i[0],i[1],i[2]],[r[0],r[1],r[2]]),y=ot([],[r[0],r[1],r[2]],[e[0],e[1],e[2]]),x=Je([],h,-r[3]);return je(x,x,Je([],g,-e[3])),je(x,x,Je([],y,-i[3])),Je(x,x,1/l),x},f.bF=dm,f.bG=function(){return new Float64Array(4)},f.bH=function(r,e,i,l){var h=[],g=[];return h[0]=e[0]-i[0],h[1]=e[1]-i[1],h[2]=e[2]-i[2],g[0]=h[0]*Math.cos(l)-h[1]*Math.sin(l),g[1]=h[0]*Math.sin(l)+h[1]*Math.cos(l),g[2]=h[2],r[0]=g[0]+i[0],r[1]=g[1]+i[1],r[2]=g[2]+i[2],r},f.bI=function(r,e,i,l){var h=[],g=[];return h[0]=e[0]-i[0],h[1]=e[1]-i[1],h[2]=e[2]-i[2],g[0]=h[0],g[1]=h[1]*Math.cos(l)-h[2]*Math.sin(l),g[2]=h[1]*Math.sin(l)+h[2]*Math.cos(l),r[0]=g[0]+i[0],r[1]=g[1]+i[1],r[2]=g[2]+i[2],r},f.bJ=function(r,e,i,l){var h=[],g=[];return h[0]=e[0]-i[0],h[1]=e[1]-i[1],h[2]=e[2]-i[2],g[0]=h[2]*Math.sin(l)+h[0]*Math.cos(l),g[1]=h[1],g[2]=h[2]*Math.cos(l)-h[0]*Math.sin(l),r[0]=g[0]+i[0],r[1]=g[1]+i[1],r[2]=g[2]+i[2],r},f.bK=function(r,e,i){var l=Math.sin(i),h=Math.cos(i),g=e[0],y=e[1],x=e[2],S=e[3],P=e[8],A=e[9],O=e[10],R=e[11];return e!==r&&(r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=g*h-P*l,r[1]=y*h-A*l,r[2]=x*h-O*l,r[3]=S*h-R*l,r[8]=g*l+P*h,r[9]=y*l+A*h,r[10]=x*l+O*h,r[11]=S*l+R*h,r},f.bL=function(r,e){let i=ni(r,360),l=ni(e,360),h=l-i,g=l>i?h-360:h+360;return Math.abs(h)<Math.abs(g)?h:g},f.bM=function(r){return r[0]=0,r[1]=0,r[2]=0,r},f.bN=function(r,e,i,l){let h=Math.sqrt(r*r+e*e),g=Math.sqrt(i*i+l*l);r/=h,e/=h,i/=g,l/=g;let y=Math.acos(r*i+e*l);return-e*i+r*l>0?y:-y},f.bO=function(r,e){let i=ni(r,2*Math.PI),l=ni(e,2*Math.PI);return Math.min(Math.abs(i-l),Math.abs(i-l+2*Math.PI),Math.abs(i-l-2*Math.PI))},f.bP=function(){let r={},e=ze.$version;for(let i in ze.$root){let l=ze.$root[i];if(l.required){let h=null;h=i==="version"?e:l.type==="array"?[]:{},h!=null&&(r[i]=h)}}return r},f.bQ=Oe,f.bR=xo,f.bS=function r(e,i){if(Array.isArray(e)){if(!Array.isArray(i)||e.length!==i.length)return!1;for(let l=0;l<e.length;l++)if(!r(e[l],i[l]))return!1;return!0}if(typeof e=="object"&&e!==null&&i!==null){if(typeof i!="object"||Object.keys(e).length!==Object.keys(i).length)return!1;for(let l in e)if(!r(e[l],i[l]))return!1;return!0}return e===i},f.bT=function(r){r=r.slice();let e=Object.create(null);for(let i=0;i<r.length;i++)e[r[i].id]=r[i];for(let i=0;i<r.length;i++)"ref"in r[i]&&(r[i]=yr(r[i],e[r[i].ref]));return r},f.bU=function(r,e){if(r.type==="custom")return new gA(r,e);switch(r.type){case"background":return new mA(r,e);case"circle":return new QP(r,e);case"color-relief":return new aE(r,e);case"fill":return new bE(r,e);case"fill-extrusion":return new zE(r,e);case"heatmap":return new tE(r,e);case"hillshade":return new rE(r,e);case"line":return new jE(r,e);case"raster":return new Dd(r,e);case"symbol":return new Kd(r,e)}},f.bV=r=>r.type==="raster",f.bW=Rr,f.bX=function(r,e){if(!r)return[{command:"setStyle",args:[e]}];let i=[];try{if(!At(r.version,e.version))return[{command:"setStyle",args:[e]}];At(r.center,e.center)||i.push({command:"setCenter",args:[e.center]}),At(r.state,e.state)||i.push({command:"setGlobalState",args:[e.state]}),At(r.centerAltitude,e.centerAltitude)||i.push({command:"setCenterAltitude",args:[e.centerAltitude]}),At(r.zoom,e.zoom)||i.push({command:"setZoom",args:[e.zoom]}),At(r.bearing,e.bearing)||i.push({command:"setBearing",args:[e.bearing]}),At(r.pitch,e.pitch)||i.push({command:"setPitch",args:[e.pitch]}),At(r.roll,e.roll)||i.push({command:"setRoll",args:[e.roll]}),At(r.sprite,e.sprite)||i.push({command:"setSprite",args:[e.sprite]}),At(r.glyphs,e.glyphs)||i.push({command:"setGlyphs",args:[e.glyphs]}),At(r.transition,e.transition)||i.push({command:"setTransition",args:[e.transition]}),At(r.light,e.light)||i.push({command:"setLight",args:[e.light]}),At(r.terrain,e.terrain)||i.push({command:"setTerrain",args:[e.terrain]}),At(r.sky,e.sky)||i.push({command:"setSky",args:[e.sky]}),At(r.projection,e.projection)||i.push({command:"setProjection",args:[e.projection]});let l={},h=[];(function(y,x,S,P){let A;for(A in x=x||{},y=y||{})Object.prototype.hasOwnProperty.call(y,A)&&(Object.prototype.hasOwnProperty.call(x,A)||bi(A,S,P));for(A in x)Object.prototype.hasOwnProperty.call(x,A)&&(Object.prototype.hasOwnProperty.call(y,A)?At(y[A],x[A])||(y[A].type==="geojson"&&x[A].type==="geojson"&&xi(y,x,A)?hi(S,{command:"setGeoJSONSourceData",args:[A,x[A].data]}):Ni(A,x,S,P)):_r(A,x,S))})(r.sources,e.sources,h,l);let g=[];r.layers&&r.layers.forEach((y=>{"source"in y&&l[y.source]?i.push({command:"removeLayer",args:[y.id]}):g.push(y)})),i=i.concat(h),(function(y,x,S){x=x||[];let P=(y=y||[]).map(Qs),A=x.map(Qs),O=y.reduce(Zr,{}),R=x.reduce(Zr,{}),F=P.slice(),V=Object.create(null),W,Z,K,ue,ee;for(let ne=0,de=0;ne<P.length;ne++)W=P[ne],Object.prototype.hasOwnProperty.call(R,W)?de++:(hi(S,{command:"removeLayer",args:[W]}),F.splice(F.indexOf(W,de),1));for(let ne=0,de=0;ne<A.length;ne++)W=A[A.length-1-ne],F[F.length-1-ne]!==W&&(Object.prototype.hasOwnProperty.call(O,W)?(hi(S,{command:"removeLayer",args:[W]}),F.splice(F.lastIndexOf(W,F.length-de),1)):de++,ue=F[F.length-ne],hi(S,{command:"addLayer",args:[R[W],ue]}),F.splice(F.length-ne,0,W),V[W]=!0);for(let ne=0;ne<A.length;ne++)if(W=A[ne],Z=O[W],K=R[W],!V[W]&&!At(Z,K))if(At(Z.source,K.source)&&At(Z["source-layer"],K["source-layer"])&&At(Z.type,K.type)){for(ee in ir(Z.layout,K.layout,S,W,null,"setLayoutProperty"),ir(Z.paint,K.paint,S,W,null,"setPaintProperty"),At(Z.filter,K.filter)||hi(S,{command:"setFilter",args:[W,K.filter]}),At(Z.minzoom,K.minzoom)&&At(Z.maxzoom,K.maxzoom)||hi(S,{command:"setLayerZoomRange",args:[W,K.minzoom,K.maxzoom]}),Z)Object.prototype.hasOwnProperty.call(Z,ee)&&ee!=="layout"&&ee!=="paint"&&ee!=="filter"&&ee!=="metadata"&&ee!=="minzoom"&&ee!=="maxzoom"&&(ee.indexOf("paint.")===0?ir(Z[ee],K[ee],S,W,ee.slice(6),"setPaintProperty"):At(Z[ee],K[ee])||hi(S,{command:"setLayerProperty",args:[W,ee,K[ee]]}));for(ee in K)Object.prototype.hasOwnProperty.call(K,ee)&&!Object.prototype.hasOwnProperty.call(Z,ee)&&ee!=="layout"&&ee!=="paint"&&ee!=="filter"&&ee!=="metadata"&&ee!=="minzoom"&&ee!=="maxzoom"&&(ee.indexOf("paint.")===0?ir(Z[ee],K[ee],S,W,ee.slice(6),"setPaintProperty"):At(Z[ee],K[ee])||hi(S,{command:"setLayerProperty",args:[W,ee,K[ee]]}))}else hi(S,{command:"removeLayer",args:[W]}),ue=F[F.lastIndexOf(W)+1],hi(S,{command:"addLayer",args:[K,ue]})})(g,e.layers,i)}catch(l){console.warn("Unable to compute style diff:",l),i=[{command:"setStyle",args:[e]}]}return i},f.bY=function(r){let e=[],i=r.id;return i===void 0&&e.push({message:`layers.${i}: missing required property "id"`}),r.render===void 0&&e.push({message:`layers.${i}: missing required method "render"`}),r.renderingMode&&r.renderingMode!=="2d"&&r.renderingMode!=="3d"&&e.push({message:`layers.${i}: property "renderingMode" must be either "2d" or "3d"`}),e},f.bZ=nn,f.b_=Ga,f.ba=Ht,f.bb=function(r,e,i){return r[0]=e[0]*i,r[1]=e[1]*i,r[2]=e[2]*i,r[3]=e[3]*i,r},f.bc=function(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]+r[3]},f.bd=kv,f.be=iu,f.bf=function(r,e,i,l,h){var g=1/Math.tan(e/2);if(r[0]=g/i,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=g,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,h!=null&&h!==1/0){var y=1/(l-h);r[10]=(h+l)*y,r[14]=2*h*l*y}else r[10]=-1,r[14]=-2*l;return r},f.bg=function(r){var e=new xe(16);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e},f.bh=function(r,e,i){var l=Math.sin(i),h=Math.cos(i),g=e[0],y=e[1],x=e[2],S=e[3],P=e[4],A=e[5],O=e[6],R=e[7];return e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=g*h+P*l,r[1]=y*h+A*l,r[2]=x*h+O*l,r[3]=S*h+R*l,r[4]=P*h-g*l,r[5]=A*h-y*l,r[6]=O*h-x*l,r[7]=R*h-S*l,r},f.bi=function(r,e,i){var l=Math.sin(i),h=Math.cos(i),g=e[4],y=e[5],x=e[6],S=e[7],P=e[8],A=e[9],O=e[10],R=e[11];return e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[4]=g*h+P*l,r[5]=y*h+A*l,r[6]=x*h+O*l,r[7]=S*h+R*l,r[8]=P*h-g*l,r[9]=A*h-y*l,r[10]=O*h-x*l,r[11]=R*h-S*l,r},f.bj=function(){let r=new Float32Array(16);return dt(r),r},f.bk=function(){let r=new Float64Array(16);return dt(r),r},f.bl=function(){return new Float64Array(16)},f.bm=function(r,e,i){let l=new Float64Array(4);return ti(l,r,e-90,i),l},f.bn=function(r,e,i,l){var h,g,y,x,S,P=e[0],A=e[1],O=e[2],R=e[3],F=i[0],V=i[1],W=i[2],Z=i[3];return(g=P*F+A*V+O*W+R*Z)<0&&(g=-g,F=-F,V=-V,W=-W,Z=-Z),1-g>We?(h=Math.acos(g),y=Math.sin(h),x=Math.sin((1-l)*h)/y,S=Math.sin(l*h)/y):(x=1-l,S=l),r[0]=x*P+S*F,r[1]=x*A+S*V,r[2]=x*O+S*W,r[3]=x*R+S*Z,r},f.bo=function(r){let e=new Float64Array(9);(function(g,y){var x=y[0],S=y[1],P=y[2],A=y[3],O=x+x,R=S+S,F=P+P,V=x*O,W=S*O,Z=S*R,K=P*O,ue=P*R,ee=P*F,ne=A*O,de=A*R,fe=A*F;g[0]=1-Z-ee,g[3]=W-fe,g[6]=K+de,g[1]=W+fe,g[4]=1-V-ee,g[7]=ue-ne,g[2]=K-de,g[5]=ue+ne,g[8]=1-V-Z})(e,r);let i=Ur(-Math.asin(Ft(e[2],-1,1))),l,h;return Math.hypot(e[5],e[8])<.001?(l=0,h=-Ur(Math.atan2(e[3],e[4]))):(l=Ur(e[5]===0&&e[8]===0?0:Math.atan2(e[5],e[8])),h=Ur(e[1]===0&&e[0]===0?0:Math.atan2(e[1],e[0]))),{roll:l,pitch:i+90,bearing:h}},f.bp=function(r,e){return r.roll==e.roll&&r.pitch==e.pitch&&r.bearing==e.bearing},f.bq=Rt,f.br=Ra,f.bs=Jc,f.bt=Th,f.bu=Kc,f.bv=Yi,f.bw=tr,f.bx=Xi,f.by=function(r,e,i,l,h){return Yi(l,h,Ft((r-e)/(i-e),0,1))},f.bz=ni,f.c=ve,f.c$=class{constructor(r){this._marks={start:[r.url,"start"].join("#"),end:[r.url,"end"].join("#"),measure:r.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let r=performance.getEntriesByName(this._marks.measure);return r.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),r=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),r}},f.c0=Po,f.c1=class extends fn{constructor(r,e){super(r,e),this.current=Zc}set(r){if(r[12]!==this.current[12]||r[0]!==this.current[0])return this.current=r,void this.gl.uniformMatrix4fv(this.location,!1,r);for(let e=1;e<16;e++)if(r[e]!==this.current[e]){this.current=r,this.gl.uniformMatrix4fv(this.location,!1,r);break}}},f.c2=Us,f.c3=class extends fn{constructor(r,e){super(r,e),this.current=[0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]||(this.current=r,this.gl.uniform3f(this.location,r[0],r[1],r[2]))}},f.c4=class extends fn{constructor(r,e){super(r,e),this.current=[0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]||(this.current=r,this.gl.uniform2f(this.location,r[0],r[1]))}},f.c5=Ze,f.c6=function(r,e){var i=Math.sin(e),l=Math.cos(e);return r[0]=l,r[1]=i,r[2]=0,r[3]=-i,r[4]=l,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r},f.c7=function(r,e,i){var l=e[0],h=e[1],g=e[2];return r[0]=l*i[0]+h*i[3]+g*i[6],r[1]=l*i[1]+h*i[4]+g*i[7],r[2]=l*i[2]+h*i[5]+g*i[8],r},f.c8=function(r,e,i,l,h,g,y){var x=1/(e-i),S=1/(l-h),P=1/(g-y);return r[0]=-2*x,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*S,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*P,r[11]=0,r[12]=(e+i)*x,r[13]=(h+l)*S,r[14]=(y+g)*P,r[15]=1,r},f.c9=class extends fn{constructor(r,e){super(r,e),this.current=new Array}set(r){if(r!=this.current){this.current=r;let e=new Float32Array(4*r.length);for(let i=0;i<r.length;i++)e[4*i]=r[i].r,e[4*i+1]=r[i].g,e[4*i+2]=r[i].b,e[4*i+3]=r[i].a;this.gl.uniform4fv(this.location,e)}}},f.cA=function(r,e){return Y[e]&&(r instanceof MouseEvent||r instanceof WheelEvent)},f.cB=function(r,e){return ke[e]&&"touches"in r},f.cC=function(r){return ke[r]||Y[r]},f.cD=function(r,e,i){var l=e[0],h=e[1];return r[0]=i[0]*l+i[4]*h+i[12],r[1]=i[1]*l+i[5]*h+i[13],r},f.cE=function(r,e){let{x:i,y:l}=Mh.fromLngLat(e);return!(r<0||r>25||l<0||l>=1||i<0||i>=1)},f.cF=function(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=e[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=e[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},f.cG=class extends qc{},f.cH=iM,f.cJ=we,f.cK=function(r,e){ve.REGISTERED_PROTOCOLS[r]=e},f.cL=function(r){delete ve.REGISTERED_PROTOCOLS[r]},f.cM=function(r,e){let i={};for(let h=0;h<r.length;h++){let g=e&&e[r[h].id]||Lc(r[h]);e&&(e[r[h].id]=g);let y=i[g];y||(y=i[g]=[]),y.push(r[h])}let l=[];for(let h in i)l.push(i[h]);return l},f.cN=at,f.cO=Ev,f.cP=sb,f.cQ=cv,f.cR=function(r){r.bucket.createArrays(),r.bucket.tilePixelRatio=ei/(512*r.bucket.overscaling),r.bucket.compareText={},r.bucket.iconsNeedLinear=!1;let e=r.bucket.layers[0],i=e.layout,l=e._unevaluatedLayout._values,h={layoutIconSize:l["icon-size"].possiblyEvaluate(new Ti(r.bucket.zoom+1),r.canonical),layoutTextSize:l["text-size"].possiblyEvaluate(new Ti(r.bucket.zoom+1),r.canonical),textMaxSize:l["text-size"].possiblyEvaluate(new Ti(18))};if(r.bucket.textSizeData.kind==="composite"){let{minZoom:P,maxZoom:A}=r.bucket.textSizeData;h.compositeTextSizes=[l["text-size"].possiblyEvaluate(new Ti(P),r.canonical),l["text-size"].possiblyEvaluate(new Ti(A),r.canonical)]}if(r.bucket.iconSizeData.kind==="composite"){let{minZoom:P,maxZoom:A}=r.bucket.iconSizeData;h.compositeIconSizes=[l["icon-size"].possiblyEvaluate(new Ti(P),r.canonical),l["icon-size"].possiblyEvaluate(new Ti(A),r.canonical)]}let g=i.get("text-line-height")*Mr,y=i.get("text-rotation-alignment")!=="viewport"&&i.get("symbol-placement")!=="point",x=i.get("text-keep-upright"),S=i.get("text-size");for(let P of r.bucket.features){let A=i.get("text-font").evaluate(P,{},r.canonical).join(","),O=S.evaluate(P,{},r.canonical),R=h.layoutTextSize.evaluate(P,{},r.canonical),F=h.layoutIconSize.evaluate(P,{},r.canonical),V={horizontal:{},vertical:void 0},W=P.text,Z,K=[0,0];if(W){let ne=W.toString(),de=i.get("text-letter-spacing").evaluate(P,{},r.canonical)*Mr,fe=Nf(ne)?de:0,Pe=i.get("text-anchor").evaluate(P,{},r.canonical),Ge=vb(e,P,r.canonical);if(!Ge){let Ye=i.get("text-radial-offset").evaluate(P,{},r.canonical);K=Ye?_b(Pe,[Ye*Mr,Mm]):i.get("text-offset").evaluate(P,{},r.canonical).map((Ve=>Ve*Mr))}let Ne=y?"center":i.get("text-justify").evaluate(P,{},r.canonical),$e=i.get("symbol-placement")==="point"?i.get("text-max-width").evaluate(P,{},r.canonical)*Mr:1/0,tt=()=>{r.bucket.allowVerticalPlacement&&wo(ne)&&(V.vertical=Yd(W,r.glyphMap,r.glyphPositions,r.imagePositions,A,$e,g,Pe,"left",fe,K,f.aA.vertical,!0,R,O))};if(!y&&Ge){let Ye=new Set;if(Ne==="auto")for(let Be=0;Be<Ge.values.length;Be+=2)Ye.add(Im(Ge.values[Be]));else Ye.add(Ne);let Ve=!1;for(let Be of Ye)if(!V.horizontal[Be])if(Ve)V.horizontal[Be]=V.horizontal[0];else{let lt=Yd(W,r.glyphMap,r.glyphPositions,r.imagePositions,A,$e,g,"center",Be,fe,K,f.aA.horizontal,!1,R,O);lt&&(V.horizontal[Be]=lt,Ve=lt.positionedLines.length===1)}tt()}else{Ne==="auto"&&(Ne=Im(Pe));let Ye=Yd(W,r.glyphMap,r.glyphPositions,r.imagePositions,A,$e,g,Pe,Ne,fe,K,f.aA.horizontal,!1,R,O);Ye&&(V.horizontal[Ne]=Ye),tt(),wo(ne)&&y&&x&&(V.vertical=Yd(W,r.glyphMap,r.glyphPositions,r.imagePositions,A,$e,g,Pe,Ne,fe,K,f.aA.vertical,!1,R,O))}}let ue=!1;if(P.icon&&P.icon.name){let ne=r.imageMap[P.icon.name];ne&&(Z=hA(r.imagePositions[P.icon.name],i.get("icon-offset").evaluate(P,{},r.canonical),i.get("icon-anchor").evaluate(P,{},r.canonical)),ue=!!ne.sdf,r.bucket.sdfIcons===void 0?r.bucket.sdfIcons=ue:r.bucket.sdfIcons!==ue&&cr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ne.pixelRatio!==r.bucket.pixelRatio||i.get("icon-rotate").constantOr(1)!==0)&&(r.bucket.iconsNeedLinear=!0))}let ee=xb(V.horizontal)||V.vertical;r.bucket.iconsInText=!!ee&&ee.iconsInText,(ee||Z)&&eM(r.bucket,P,V,Z,r.imageMap,h,R,F,K,ue,r.canonical,r.subdivisionGranularity)}r.showCollisionBoxes&&r.bucket.generateCollisionDebugBuffers()},f.cS=em,f.cT=im,f.cU=rm,f.cV=function(r){let e=new Hd;return(function(i,l){for(let h in i.layers)l.writeMessage(3,NA,i.layers[h])})(r,e),e.finish()},f.cW=function(r,e,i,l,h,g){let y=cb(r,e,i,h,0);return y=cb(y,e,l,g,1),y},f.cX=class{constructor(r){this.maxEntries=r,this.map=new Map}get(r){let e=this.map.get(r);return e!==void 0&&(this.map.delete(r),this.map.set(r,e)),e}set(r,e){if(this.map.has(r))this.map.delete(r);else if(this.map.size>=this.maxEntries){let i=this.map.keys().next().value;this.map.delete(i)}this.map.set(r,e)}clear(){this.map.clear()}},f.cY=U_,f.cZ=Hd,f.c_=nb,f.ca=class extends fn{constructor(r,e){super(r,e),this.current=new Array}set(r){if(r!=this.current){this.current=r;let e=new Float32Array(r);this.gl.uniform1fv(this.location,e)}}},f.cb=class extends Kl{},f.cc=WE,f.cd=class extends To{},f.ce=Yf,f.cf=function(r){return r<=1?1:Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))},f.cg=M_,f.ch=function(r,e,i){var l=e[0],h=e[1],g=e[2],y=i[3]*l+i[7]*h+i[11]*g+i[15];return r[0]=(i[0]*l+i[4]*h+i[8]*g+i[12])/(y=y||1),r[1]=(i[1]*l+i[5]*h+i[9]*g+i[13])/y,r[2]=(i[2]*l+i[6]*h+i[10]*g+i[14])/y,r},f.ci=class extends Gs{},f.cj=class extends Uc{},f.ck=function(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]&&r[6]===e[6]&&r[7]===e[7]&&r[8]===e[8]&&r[9]===e[9]&&r[10]===e[10]&&r[11]===e[11]&&r[12]===e[12]&&r[13]===e[13]&&r[14]===e[14]&&r[15]===e[15]},f.cl=function(r,e){var i=r[0],l=r[1],h=r[2],g=r[3],y=r[4],x=r[5],S=r[6],P=r[7],A=r[8],O=r[9],R=r[10],F=r[11],V=r[12],W=r[13],Z=r[14],K=r[15],ue=e[0],ee=e[1],ne=e[2],de=e[3],fe=e[4],Pe=e[5],Ge=e[6],Ne=e[7],$e=e[8],tt=e[9],Ye=e[10],Ve=e[11],Be=e[12],lt=e[13],nt=e[14],ut=e[15];return Math.abs(i-ue)<=We*Math.max(1,Math.abs(i),Math.abs(ue))&&Math.abs(l-ee)<=We*Math.max(1,Math.abs(l),Math.abs(ee))&&Math.abs(h-ne)<=We*Math.max(1,Math.abs(h),Math.abs(ne))&&Math.abs(g-de)<=We*Math.max(1,Math.abs(g),Math.abs(de))&&Math.abs(y-fe)<=We*Math.max(1,Math.abs(y),Math.abs(fe))&&Math.abs(x-Pe)<=We*Math.max(1,Math.abs(x),Math.abs(Pe))&&Math.abs(S-Ge)<=We*Math.max(1,Math.abs(S),Math.abs(Ge))&&Math.abs(P-Ne)<=We*Math.max(1,Math.abs(P),Math.abs(Ne))&&Math.abs(A-$e)<=We*Math.max(1,Math.abs(A),Math.abs($e))&&Math.abs(O-tt)<=We*Math.max(1,Math.abs(O),Math.abs(tt))&&Math.abs(R-Ye)<=We*Math.max(1,Math.abs(R),Math.abs(Ye))&&Math.abs(F-Ve)<=We*Math.max(1,Math.abs(F),Math.abs(Ve))&&Math.abs(V-Be)<=We*Math.max(1,Math.abs(V),Math.abs(Be))&&Math.abs(W-lt)<=We*Math.max(1,Math.abs(W),Math.abs(lt))&&Math.abs(Z-nt)<=We*Math.max(1,Math.abs(Z),Math.abs(nt))&&Math.abs(K-ut)<=We*Math.max(1,Math.abs(K),Math.abs(ut))},f.cm=function(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r},f.cn=r=>r.type==="symbol",f.co=r=>r.type==="circle",f.cp=r=>r.type==="heatmap",f.cq=r=>r.type==="line",f.cr=r=>r.type==="fill",f.cs=r=>r.type==="fill-extrusion",f.ct=r=>r.type==="hillshade",f.cu=r=>r.type==="color-relief",f.cv=r=>r.type==="background",f.cw=r=>r.type==="custom",f.cx=Ci,f.cy=function(r,e,i){let l=_t(e.x-i.x,e.y-i.y),h=_t(r.x-i.x,r.y-i.y),g=Math.atan2(l[0]*h[1]-l[1]*h[0],(function(y,x){return y[0]*x[0]+y[1]*x[1]})(l,h));return Ur(g)},f.cz=qt,f.d=Ue,f.d0=function(r,e,i,l,h){return a(this,void 0,void 0,(function*(){if(Te())try{return yield $a(r,e,i,l,h)}catch{}return(function(g,y,x,S,P){let A=g.width,O=g.height;Wn&&yn||(Wn=new OffscreenCanvas(A,O),yn=Wn.getContext("2d",{willReadFrequently:!0})),Wn.width=A,Wn.height=O,yn.drawImage(g,0,0,A,O);let R=yn.getImageData(y,x,S,P);return yn.clearRect(0,0,A,O),R.data})(r,e,i,l,h)}))},f.d1=L_,f.d2=M,f.d3=class{constructor(r,e){this.layers={[Oh]:this},this.name=Oh,this.version=e?e.version:1,this.extent=e?e.extent:4096,this.length=r.length,this.features=r}feature(r){return new jA(this.features[r],this.extent)}},f.d4=c,f.d5=us,f.e=ji,f.f=r=>a(void 0,void 0,void 0,(function*(){if(r.byteLength===0)return createImageBitmap(new ImageData(1,1));let e=new Blob([new Uint8Array(r)],{type:"image/png"});try{return createImageBitmap(e)}catch(i){throw new Error(`Could not load image because of ${i.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),f.g=Me,f.h=r=>new Promise(((e,i)=>{let l=new Image;l.onload=()=>{e(l),URL.revokeObjectURL(l.src),l.onload=null,window.requestAnimationFrame((()=>{l.src=Za}))},l.onerror=()=>i(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));let h=new Blob([new Uint8Array(r)],{type:"image/png"});l.src=r.byteLength?URL.createObjectURL(h):Za})),f.i=Pn,f.j=(r,e)=>Ke(ji(r,{type:"json"}),e),f.k=ui,f.l=Et,f.m=Ke,f.n=(r,e)=>Ke(ji(r,{type:"arrayBuffer"}),e),f.o=function(r){return new Hd(r).readFields(rA,[])},f.p=lv,f.q=function(r){return/[\u02EA\u02EB\u1100-\u11FF\u2E80-\u2FDF\u3000-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(r))},f.r=vh,f.s=Ha,f.t=pn,f.u=ze,f.v=Ff,f.w=cr,f.x=rh,f.y=ql,f.z=jc})),p("worker",["./shared"],(function(f){"use strict";class a{constructor(Y,H){this.keyCache={},Y&&this.replace(Y,H)}replace(Y,H){this._layerConfigs={},this._layers={},this.update(Y,[],H)}update(Y,H,re){for(let ve of Y){this._layerConfigs[ve.id]=ve;let Me=this._layers[ve.id]=f.bU(ve,re);Me._featureFilter=f.ak(Me.filter,re),this.keyCache[ve.id]&&delete this.keyCache[ve.id]}for(let ve of H)delete this.keyCache[ve],delete this._layerConfigs[ve],delete this._layers[ve];this.familiesBySource={};let ye=f.cM(Object.values(this._layerConfigs),this.keyCache);for(let ve of ye){let Me=ve.map((st=>this._layers[st.id])),Ce=Me[0];if(Ce.visibility==="none")continue;let we=Ce.source||"",Oe=this.familiesBySource[we];Oe||(Oe=this.familiesBySource[we]={});let Ke=Ce.sourceLayer||f.aa,Ue=Oe[Ke];Ue||(Ue=Oe[Ke]=[]),Ue.push(Me)}}}class T{constructor(Y){let H={},re=[];for(let Ce in Y){let we=Y[Ce],Oe=H[Ce]={};for(let Ke in we){let Ue=we[+Ke];if(!Ue||Ue.bitmap.width===0||Ue.bitmap.height===0)continue;let st={x:0,y:0,w:Ue.bitmap.width+2,h:Ue.bitmap.height+2};re.push(st),Oe[Ke]={rect:st,metrics:Ue.metrics}}}let{w:ye,h:ve}=f.p(re),Me=new f.r({width:ye||1,height:ve||1});for(let Ce in Y){let we=Y[Ce];for(let Oe in we){let Ke=we[+Oe];if(!Ke||Ke.bitmap.width===0||Ke.bitmap.height===0)continue;let Ue=H[Ce][Oe].rect;f.r.copy(Ke.bitmap,Me,{x:0,y:0},{x:Ue.x+1,y:Ue.y+1},Ke.bitmap)}}this.image=Me,this.positions=H}}f.cN("GlyphAtlas",T);class M{constructor(Y){this.tileID=new f.a2(Y.tileID.overscaledZ,Y.tileID.wrap,Y.tileID.canonical.z,Y.tileID.canonical.x,Y.tileID.canonical.y),this.uid=Y.uid,this.zoom=Y.zoom,this.pixelRatio=Y.pixelRatio,this.tileSize=Y.tileSize,this.source=Y.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Y.showCollisionBoxes,this.collectResourceTiming=!!Y.collectResourceTiming,this.returnDependencies=!!Y.returnDependencies,this.promoteId=Y.promoteId,this.inFlightDependencies=[]}parse(Y,H,re,ye,ve){return f._(this,void 0,void 0,(function*(){this.status="parsing",this.data=Y,this.collisionBoxArray=new f.ai;let Me=new f.cO(Object.keys(Y.layers).sort()),Ce=new f.cP(this.tileID,this.promoteId);Ce.bucketLayerIDs=[];let we={},Oe={featureIndex:Ce,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:re,subdivisionGranularity:ve},Ke=H.familiesBySource[this.source];for(let xi in Ke){let ir=Y.layers[xi];if(!ir)continue;ir.version===1&&f.w(`Vector tile source "${this.source}" layer "${xi}" does not use vector tile spec v2 and therefore may have some rendering errors.`);let Qs=Me.encode(xi),Zr=[];for(let Re=0;Re<ir.length;Re++){let Cr=ir.feature(Re),kr=Ce.getId(Cr,xi);Zr.push({feature:Cr,id:kr,index:Re,sourceLayerIndex:Qs})}for(let Re of Ke[xi]){let Cr=Re[0];Cr.source!==this.source&&f.w(`layer.source = ${Cr.source} does not equal this.source = ${this.source}`),Cr.isHidden(this.zoom,!0)||(B(Re,this.zoom,re),(we[Cr.id]=Cr.createBucket({index:Ce.bucketLayerIDs.length,layers:Re,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Qs,sourceID:this.source})).populate(Zr,Oe,this.tileID.canonical),Ce.bucketLayerIDs.push(Re.map((kr=>kr.id))))}}let Ue=f.bZ(Oe.glyphDependencies,(xi=>Object.keys(xi).map(Number)));this.inFlightDependencies.forEach((xi=>xi?.abort())),this.inFlightDependencies=[];let st=Promise.resolve({});if(Object.keys(Ue).length){let xi=new AbortController;this.inFlightDependencies.push(xi),st=ye.sendAsync({type:"GG",data:{stacks:Ue,source:this.source,tileID:this.tileID,type:"glyphs"}},xi)}let ft=Object.keys(Oe.iconDependencies),Et=Promise.resolve({});if(ft.length){let xi=new AbortController;this.inFlightDependencies.push(xi),Et=ye.sendAsync({type:"GI",data:{icons:ft,source:this.source,tileID:this.tileID,type:"icons"}},xi)}let ui=Object.keys(Oe.patternDependencies),ai=Promise.resolve({});if(ui.length){let xi=new AbortController;this.inFlightDependencies.push(xi),ai=ye.sendAsync({type:"GI",data:{icons:ui,source:this.source,tileID:this.tileID,type:"patterns"}},xi)}let ze=Oe.dashDependencies,vi=Promise.resolve({});if(Object.keys(ze).length){let xi=new AbortController;this.inFlightDependencies.push(xi),vi=ye.sendAsync({type:"GDA",data:{dashes:ze}},xi)}let[yr,At,hi,_r]=yield Promise.all([st,Et,ai,vi]),bi=new T(yr),Ni=new f.cQ(At,hi);for(let xi in we){let ir=we[xi];ir instanceof f.aj?(B(ir.layers,this.zoom,re),f.cR({bucket:ir,glyphMap:yr,glyphPositions:bi.positions,imageMap:At,imagePositions:Ni.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Oe.subdivisionGranularity})):ir.hasDependencies&&(ir instanceof f.cS||ir instanceof f.cT||ir instanceof f.cU)&&(B(ir.layers,this.zoom,re),ir.addFeatures(Oe,this.tileID.canonical,Ni.patternPositions,_r))}return this.status="done",{buckets:Object.values(we).filter((xi=>!xi.isEmpty())),featureIndex:Ce,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:bi.image,imageAtlas:Ni,dashPositions:_r,glyphMap:this.returnDependencies?yr:null,iconMap:this.returnDependencies?At:null,glyphPositions:this.returnDependencies?bi.positions:null}}))}}function B(ke,Y,H){let re=new f.H(Y);for(let ye of ke)ye.recalculate(re,H)}class G{constructor(Y,H,re,ye,ve){this.type=Y,this.properties=re||{},this.extent=ve,this.pointsArray=H,this.id=ye}loadGeometry(){return this.pointsArray.map((Y=>Y.map((H=>new f.P(H.x,H.y)))))}}class J{constructor(Y,H,re){this.version=2,this._myFeatures=Y,this.name=H,this.length=Y.length,this.extent=re}feature(Y){return this._myFeatures[Y]}}class ie{constructor(){this.layers={}}addLayer(Y){this.layers[Y.name]=Y}}function $(ke){let Y=f.cV(ke);return Y.byteOffset===0&&Y.byteLength===Y.buffer.byteLength||(Y=new Uint8Array(Y)),{vectorTile:ke,rawData:Y.buffer}}function ae(ke,Y,H){let{extent:re}=ke,ye=Math.pow(2,H.z-Y.z),ve=(H.x-Y.x*ye)*re,Me=(H.y-Y.y*ye)*re,Ce=[];for(let we=0;we<ke.length;we++){let Oe=ke.feature(we),Ke=Oe.loadGeometry();for(let st of Ke)for(let ft of st)ft.x=ft.x*ye-ve,ft.y=ft.y*ye-Me;let Ue=128;Ke=f.cW(Ke,Oe.type,-Ue,-Ue,re+Ue,re+Ue),Ke.length!==0&&Ce.push(new G(Oe.type,Ke,Oe.properties,Oe.id,re))}return new J(Ce,ke.name,re)}class te{constructor(Y,H,re){this.actor=Y,this.layerIndex=H,this.availableImages=re,this.fetching={},this.loading={},this.loaded={},this.overzoomedTileResultCache=new f.cX(1e3)}loadVectorTile(Y,H){return f._(this,void 0,void 0,(function*(){let re=yield f.n(Y.request,H);try{return{vectorTile:Y.encoding!=="mlt"?new f.cY(new f.cZ(re.data)):new f.c_(re.data),rawData:re.data,cacheControl:re.cacheControl,expires:re.expires}}catch(ye){let ve=new Uint8Array(re.data),Me=`Unable to parse the tile at ${Y.request.url}, `;throw Me+=ve[0]===31&&ve[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${ye.message}`,new Error(Me)}}))}loadTile(Y){return f._(this,void 0,void 0,(function*(){let{uid:H,overzoomParameters:re}=Y;re&&(Y.request=re.overzoomRequest);let ye=!!(Y&&Y.request&&Y.request.collectResourceTiming)&&new f.c$(Y.request),ve=new M(Y);this.loading[H]=ve;let Me=new AbortController;ve.abort=Me;try{let Ce=yield this.loadVectorTile(Y,Me);if(delete this.loading[H],!Ce)return null;if(re){let st=this._getOverzoomTile(Y,Ce.vectorTile);Ce.rawData=st.rawData,Ce.vectorTile=st.vectorTile}let we=Ce.rawData,Oe={};Ce.expires&&(Oe.expires=Ce.expires),Ce.cacheControl&&(Oe.cacheControl=Ce.cacheControl);let Ke={};if(ye){let st=ye.finish();st&&(Ke.resourceTiming=JSON.parse(JSON.stringify(st)))}ve.vectorTile=Ce.vectorTile;let Ue=ve.parse(Ce.vectorTile,this.layerIndex,this.availableImages,this.actor,Y.subdivisionGranularity);this.loaded[H]=ve,this.fetching[H]={rawTileData:we,cacheControl:Oe,resourceTiming:Ke};try{let st=yield Ue;return f.e({rawTileData:we.slice(0),encoding:Y.encoding},st,Oe,Ke)}finally{delete this.fetching[H]}}catch(Ce){throw delete this.loading[H],ve.status="done",this.loaded[H]=ve,Ce}}))}_getOverzoomTile(Y,H){let{tileID:re,source:ye,overzoomParameters:ve}=Y,{maxZoomTileID:Me}=ve,Ce=`${Me.key}_${re.key}`,we=this.overzoomedTileResultCache.get(Ce);if(we)return we;let Oe=new ie,Ke=this.layerIndex.familiesBySource[ye];for(let st in Ke){let ft=H.layers[st];if(!ft)continue;let Et=ae(ft,Me,re.canonical);Et.length>0&&Oe.addLayer(Et)}let Ue=$(Oe);return this.overzoomedTileResultCache.set(Ce,Ue),Ue}reloadTile(Y){return f._(this,void 0,void 0,(function*(){let H=Y.uid;if(!this.loaded||!this.loaded[H])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");let re=this.loaded[H];if(re.showCollisionBoxes=Y.showCollisionBoxes,re.status==="parsing"){let ye=yield re.parse(re.vectorTile,this.layerIndex,this.availableImages,this.actor,Y.subdivisionGranularity),ve;if(this.fetching[H]){let{rawTileData:Me,cacheControl:Ce,resourceTiming:we}=this.fetching[H];delete this.fetching[H],ve=f.e({rawTileData:Me.slice(0),encoding:Y.encoding},ye,Ce,we)}else ve=ye;return ve}if(re.status==="done"&&re.vectorTile)return re.parse(re.vectorTile,this.layerIndex,this.availableImages,this.actor,Y.subdivisionGranularity)}))}abortTile(Y){return f._(this,void 0,void 0,(function*(){let H=this.loading,re=Y.uid;H&&H[re]&&H[re].abort&&(H[re].abort.abort(),delete H[re])}))}removeTile(Y){return f._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[Y.uid]&&delete this.loaded[Y.uid]}))}}class Te{constructor(){this.loaded={}}loadTile(Y){return f._(this,void 0,void 0,(function*(){let{uid:H,encoding:re,rawImageData:ye,redFactor:ve,greenFactor:Me,blueFactor:Ce,baseShift:we}=Y,Oe=ye.width+2,Ke=ye.height+2,Ue=f.b(ye)?new f.R({width:Oe,height:Ke},yield f.d0(ye,-1,-1,Oe,Ke)):ye,st=new f.d1(H,Ue,re,ve,Me,Ce,we);return this.loaded=this.loaded||{},this.loaded[H]=st,st}))}removeTile(Y){let H=this.loaded,re=Y.uid;H&&H[re]&&delete H[re]}}var We,xe,Ze=(function(){if(xe)return We;function ke(H,re){if(H.length!==0){Y(H[0],re);for(var ye=1;ye<H.length;ye++)Y(H[ye],!re)}}function Y(H,re){for(var ye=0,ve=0,Me=0,Ce=H.length,we=Ce-1;Me<Ce;we=Me++){var Oe=(H[Me][0]-H[we][0])*(H[we][1]+H[Me][1]),Ke=ye+Oe;ve+=Math.abs(ye)>=Math.abs(Oe)?ye-Ke+Oe:Oe-Ke+ye,ye=Ke}ye+ve>=0!=!!re&&H.reverse()}return xe=1,We=function H(re,ye){var ve,Me=re&&re.type;if(Me==="FeatureCollection")for(ve=0;ve<re.features.length;ve++)H(re.features[ve],ye);else if(Me==="GeometryCollection")for(ve=0;ve<re.geometries.length;ve++)H(re.geometries[ve],ye);else if(Me==="Feature")H(re.geometry,ye);else if(Me==="Polygon")ke(re.coordinates,ye);else if(Me==="MultiPolygon")for(ve=0;ve<re.coordinates.length;ve++)ke(re.coordinates[ve],ye);return re}})(),dt=f.d2(Ze);let mt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ke=>ke},Vt=Math.fround||(Bt=new Float32Array(1),ke=>(Bt[0]=+ke,Bt[0]));var Bt;class je{constructor(Y){this.options=Object.assign(Object.create(mt),Y),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Y){let{log:H,minZoom:re,maxZoom:ye}=this.options;H&&console.time("total time");let ve=`prepare ${Y.length} points`;H&&console.time(ve),this.points=Y;let Me=[];for(let we=0;we<Y.length;we++){let Oe=Y[we];if(!Oe.geometry)continue;let[Ke,Ue]=Oe.geometry.coordinates,st=Vt(St(Ke)),ft=Vt(Ht(Ue));Me.push(st,ft,1/0,we,-1,1),this.options.reduce&&Me.push(0)}let Ce=this.trees[ye+1]=this._createTree(Me);H&&console.timeEnd(ve);for(let we=ye;we>=re;we--){let Oe=+Date.now();Ce=this.trees[we]=this._createTree(this._cluster(Ce,we)),H&&console.log("z%d: %d clusters in %dms",we,Ce.numItems,+Date.now()-Oe)}return H&&console.timeEnd("total time"),this}getClusters(Y,H){let re=((Y[0]+180)%360+360)%360-180,ye=Math.max(-90,Math.min(90,Y[1])),ve=Y[2]===180?180:((Y[2]+180)%360+360)%360-180,Me=Math.max(-90,Math.min(90,Y[3]));if(Y[2]-Y[0]>=360)re=-180,ve=180;else if(re>ve){let Ue=this.getClusters([re,ye,180,Me],H),st=this.getClusters([-180,ye,ve,Me],H);return Ue.concat(st)}let Ce=this.trees[this._limitZoom(H)],we=Ce.range(St(re),Ht(Me),St(ve),Ht(ye)),Oe=Ce.data,Ke=[];for(let Ue of we){let st=this.stride*Ue;Ke.push(Oe[st+5]>1?Je(Oe,st,this.clusterProps):this.points[Oe[st+3]])}return Ke}getChildren(Y){let H=this._getOriginId(Y),re=this._getOriginZoom(Y),ye="No cluster with the specified id.",ve=this.trees[re];if(!ve)throw new Error(ye);let Me=ve.data;if(H*this.stride>=Me.length)throw new Error(ye);let Ce=this.options.radius/(this.options.extent*Math.pow(2,re-1)),we=ve.within(Me[H*this.stride],Me[H*this.stride+1],Ce),Oe=[];for(let Ke of we){let Ue=Ke*this.stride;Me[Ue+4]===Y&&Oe.push(Me[Ue+5]>1?Je(Me,Ue,this.clusterProps):this.points[Me[Ue+3]])}if(Oe.length===0)throw new Error(ye);return Oe}getLeaves(Y,H,re){let ye=[];return this._appendLeaves(ye,Y,H=H||10,re=re||0,0),ye}getTile(Y,H,re){let ye=this.trees[this._limitZoom(Y)],ve=Math.pow(2,Y),{extent:Me,radius:Ce}=this.options,we=Ce/Me,Oe=(re-we)/ve,Ke=(re+1+we)/ve,Ue={features:[]};return this._addTileFeatures(ye.range((H-we)/ve,Oe,(H+1+we)/ve,Ke),ye.data,H,re,ve,Ue),H===0&&this._addTileFeatures(ye.range(1-we/ve,Oe,1,Ke),ye.data,ve,re,ve,Ue),H===ve-1&&this._addTileFeatures(ye.range(0,Oe,we/ve,Ke),ye.data,-1,re,ve,Ue),Ue.features.length?Ue:null}getClusterExpansionZoom(Y){let H=this._getOriginZoom(Y)-1;for(;H<=this.options.maxZoom;){let re=this.getChildren(Y);if(H++,re.length!==1)break;Y=re[0].properties.cluster_id}return H}_appendLeaves(Y,H,re,ye,ve){let Me=this.getChildren(H);for(let Ce of Me){let we=Ce.properties;if(we&&we.cluster?ve+we.point_count<=ye?ve+=we.point_count:ve=this._appendLeaves(Y,we.cluster_id,re,ye,ve):ve<ye?ve++:Y.push(Ce),Y.length===re)break}return ve}_createTree(Y){let H=new f.aU(Y.length/this.stride|0,this.options.nodeSize,Float32Array);for(let re=0;re<Y.length;re+=this.stride)H.add(Y[re],Y[re+1]);return H.finish(),H.data=Y,H}_addTileFeatures(Y,H,re,ye,ve,Me){for(let Ce of Y){let we=Ce*this.stride,Oe=H[we+5]>1,Ke,Ue,st;if(Oe)Ke=ot(H,we,this.clusterProps),Ue=H[we],st=H[we+1];else{let ui=this.points[H[we+3]];Ke=ui.properties;let[ai,ze]=ui.geometry.coordinates;Ue=St(ai),st=Ht(ze)}let ft={type:1,geometry:[[Math.round(this.options.extent*(Ue*ve-re)),Math.round(this.options.extent*(st*ve-ye))]],tags:Ke},Et;Et=Oe||this.options.generateId?H[we+3]:this.points[H[we+3]].id,Et!==void 0&&(ft.id=Et),Me.features.push(ft)}}_limitZoom(Y){return Math.max(this.options.minZoom,Math.min(Math.floor(+Y),this.options.maxZoom+1))}_cluster(Y,H){let{radius:re,extent:ye,reduce:ve,minPoints:Me}=this.options,Ce=re/(ye*Math.pow(2,H)),we=Y.data,Oe=[],Ke=this.stride;for(let Ue=0;Ue<we.length;Ue+=Ke){if(we[Ue+2]<=H)continue;we[Ue+2]=H;let st=we[Ue],ft=we[Ue+1],Et=Y.within(we[Ue],we[Ue+1],Ce),ui=we[Ue+5],ai=ui;for(let ze of Et){let vi=ze*Ke;we[vi+2]>H&&(ai+=we[vi+5])}if(ai>ui&&ai>=Me){let ze,vi=st*ui,yr=ft*ui,At=-1,hi=(Ue/Ke<<5)+(H+1)+this.points.length;for(let _r of Et){let bi=_r*Ke;if(we[bi+2]<=H)continue;we[bi+2]=H;let Ni=we[bi+5];vi+=we[bi]*Ni,yr+=we[bi+1]*Ni,we[bi+4]=hi,ve&&(ze||(ze=this._map(we,Ue,!0),At=this.clusterProps.length,this.clusterProps.push(ze)),ve(ze,this._map(we,bi)))}we[Ue+4]=hi,Oe.push(vi/ai,yr/ai,1/0,hi,-1,ai),ve&&Oe.push(At)}else{for(let ze=0;ze<Ke;ze++)Oe.push(we[Ue+ze]);if(ai>1)for(let ze of Et){let vi=ze*Ke;if(!(we[vi+2]<=H)){we[vi+2]=H;for(let yr=0;yr<Ke;yr++)Oe.push(we[vi+yr])}}}}return Oe}_getOriginId(Y){return Y-this.points.length>>5}_getOriginZoom(Y){return(Y-this.points.length)%32}_map(Y,H,re){if(Y[H+5]>1){let Me=this.clusterProps[Y[H+6]];return re?Object.assign({},Me):Me}let ye=this.points[Y[H+3]].properties,ve=this.options.map(ye);return re&&ve===ye?Object.assign({},ve):ve}}function Je(ke,Y,H){return{type:"Feature",id:ke[Y+3],properties:ot(ke,Y,H),geometry:{type:"Point",coordinates:[(re=ke[Y],360*(re-.5)),Tt(ke[Y+1])]}};var re}function ot(ke,Y,H){let re=ke[Y+5],ye=re>=1e4?`${Math.round(re/1e3)}k`:re>=1e3?Math.round(re/100)/10+"k":re,ve=ke[Y+6],Me=ve===-1?{}:Object.assign({},H[ve]);return Object.assign(Me,{cluster:!0,cluster_id:ke[Y+3],point_count:re,point_count_abbreviated:ye})}function St(ke){return ke/360+.5}function Ht(ke){let Y=Math.sin(ke*Math.PI/180),H=.5-.25*Math.log((1+Y)/(1-Y))/Math.PI;return H<0?0:H>1?1:H}function Tt(ke){let Y=(180-360*ke)*Math.PI/180;return 360*Math.atan(Math.exp(Y))/Math.PI-90}function _i(ke,Y,H,re){let ye=re,ve=Y+(H-Y>>1),Me,Ce=H-Y,we=ke[Y],Oe=ke[Y+1],Ke=ke[H],Ue=ke[H+1];for(let st=Y+3;st<H;st+=3){let ft=ti(ke[st],ke[st+1],we,Oe,Ke,Ue);if(ft>ye)Me=st,ye=ft;else if(ft===ye){let Et=Math.abs(st-ve);Et<Ce&&(Me=st,Ce=Et)}}ye>re&&(Me-Y>3&&_i(ke,Y,Me,re),ke[Me+2]=ye,H-Me>3&&_i(ke,Me,H,re))}function ti(ke,Y,H,re,ye,ve){let Me=ye-H,Ce=ve-re;if(Me!==0||Ce!==0){let we=((ke-H)*Me+(Y-re)*Ce)/(Me*Me+Ce*Ce);we>1?(H=ye,re=ve):we>0&&(H+=Me*we,re+=Ce*we)}return Me=ke-H,Ce=Y-re,Me*Me+Ce*Ce}function ii(ke,Y,H,re){let ye={id:ke??null,type:Y,geometry:H,tags:re,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(Y==="Point"||Y==="MultiPoint"||Y==="LineString")_t(ye,H);else if(Y==="Polygon")_t(ye,H[0]);else if(Y==="MultiLineString")for(let ve of H)_t(ye,ve);else if(Y==="MultiPolygon")for(let ve of H)_t(ye,ve[0]);return ye}function _t(ke,Y){for(let H=0;H<Y.length;H+=3)ke.minX=Math.min(ke.minX,Y[H]),ke.minY=Math.min(ke.minY,Y[H+1]),ke.maxX=Math.max(ke.maxX,Y[H]),ke.maxY=Math.max(ke.maxY,Y[H+1])}function ei(ke,Y,H,re){if(!Y.geometry)return;let ye=Y.geometry.coordinates;if(ye&&ye.length===0)return;let ve=Y.geometry.type,Me=Math.pow(H.tolerance/((1<<H.maxZoom)*H.extent),2),Ce=[],we=Y.id;if(H.promoteId?we=Y.properties[H.promoteId]:H.generateId&&(we=re||0),ve==="Point")kt(ye,Ce);else if(ve==="MultiPoint")for(let Oe of ye)kt(Oe,Ce);else if(ve==="LineString")ni(ye,Ce,Me,!1);else if(ve==="MultiLineString"){if(H.lineMetrics){for(let Oe of ye)Ce=[],ni(Oe,Ce,Me,!1),ke.push(ii(we,"LineString",Ce,Y.properties));return}Yi(ye,Ce,Me,!1)}else if(ve==="Polygon")Yi(ye,Ce,Me,!0);else{if(ve!=="MultiPolygon"){if(ve==="GeometryCollection"){for(let Oe of Y.geometry.geometries)ei(ke,{id:we,geometry:Oe,properties:Y.properties},H,re);return}throw new Error("Input data is not a valid GeoJSON object.")}for(let Oe of ye){let Ke=[];Yi(Oe,Ke,Me,!0),Ce.push(Ke)}}ke.push(ii(we,ve,Ce,Y.properties))}function kt(ke,Y){Y.push(tr(ke[0]),Ci(ke[1]),0)}function ni(ke,Y,H,re){let ye,ve,Me=0;for(let we=0;we<ke.length;we++){let Oe=tr(ke[we][0]),Ke=Ci(ke[we][1]);Y.push(Oe,Ke,0),we>0&&(Me+=re?(ye*Ke-Oe*ve)/2:Math.sqrt(Math.pow(Oe-ye,2)+Math.pow(Ke-ve,2))),ye=Oe,ve=Ke}let Ce=Y.length-3;Y[2]=1,_i(Y,0,Ce,H),Y[Ce+2]=1,Y.size=Math.abs(Me),Y.start=0,Y.end=Y.size}function Yi(ke,Y,H,re){for(let ye=0;ye<ke.length;ye++){let ve=[];ni(ke[ye],ve,H,re),Y.push(ve)}}function tr(ke){return ke/360+.5}function Ci(ke){let Y=Math.sin(ke*Math.PI/180),H=.5-.25*Math.log((1+Y)/(1-Y))/Math.PI;return H<0?0:H>1?1:H}function qt(ke,Y,H,re,ye,ve,Me,Ce){if(re/=Y,ve>=(H/=Y)&&Me<re)return ke;if(Me<H||ve>=re)return null;let we=[];for(let Oe of ke){let Ke=Oe.geometry,Ue=Oe.type,st=ye===0?Oe.minX:Oe.minY,ft=ye===0?Oe.maxX:Oe.maxY;if(st>=H&&ft<re){we.push(Oe);continue}if(ft<H||st>=re)continue;let Et=[];if(Ue==="Point"||Ue==="MultiPoint")Ft(Ke,Et,H,re,ye);else if(Ue==="LineString")gr(Ke,Et,H,re,ye,!1,Ce.lineMetrics);else if(Ue==="MultiLineString")Sa(Ke,Et,H,re,ye,!1);else if(Ue==="Polygon")Sa(Ke,Et,H,re,ye,!0);else if(Ue==="MultiPolygon")for(let ui of Ke){let ai=[];Sa(ui,ai,H,re,ye,!0),ai.length&&Et.push(ai)}if(Et.length){if(Ce.lineMetrics&&Ue==="LineString"){for(let ui of Et)we.push(ii(Oe.id,Ue,ui,Oe.tags));continue}Ue!=="LineString"&&Ue!=="MultiLineString"||(Et.length===1?(Ue="LineString",Et=Et[0]):Ue="MultiLineString"),Ue!=="Point"&&Ue!=="MultiPoint"||(Ue=Et.length===3?"Point":"MultiPoint"),we.push(ii(Oe.id,Ue,Et,Oe.tags))}}return we.length?we:null}function Ft(ke,Y,H,re,ye){for(let ve=0;ve<ke.length;ve+=3){let Me=ke[ve+ye];Me>=H&&Me<=re&&nn(Y,ke[ve],ke[ve+1],ke[ve+2])}}function gr(ke,Y,H,re,ye,ve,Me){let Ce=ji(ke),we=ye===0?Ga:Rr,Oe,Ke,Ue=ke.start;for(let ai=0;ai<ke.length-3;ai+=3){let ze=ke[ai],vi=ke[ai+1],yr=ke[ai+2],At=ke[ai+3],hi=ke[ai+4],_r=ye===0?ze:vi,bi=ye===0?At:hi,Ni=!1;Me&&(Oe=Math.sqrt(Math.pow(ze-At,2)+Math.pow(vi-hi,2))),_r<H?bi>H&&(Ke=we(Ce,ze,vi,At,hi,H),Me&&(Ce.start=Ue+Oe*Ke)):_r>re?bi<re&&(Ke=we(Ce,ze,vi,At,hi,re),Me&&(Ce.start=Ue+Oe*Ke)):nn(Ce,ze,vi,yr),bi<H&&_r>=H&&(Ke=we(Ce,ze,vi,At,hi,H),Ni=!0),bi>re&&_r<=re&&(Ke=we(Ce,ze,vi,At,hi,re),Ni=!0),!ve&&Ni&&(Me&&(Ce.end=Ue+Oe*Ke),Y.push(Ce),Ce=ji(ke)),Me&&(Ue+=Oe)}let st=ke.length-3,ft=ke[st],Et=ke[st+1],ui=ye===0?ft:Et;ui>=H&&ui<=re&&nn(Ce,ft,Et,ke[st+2]),st=Ce.length-3,ve&&st>=3&&(Ce[st]!==Ce[0]||Ce[st+1]!==Ce[1])&&nn(Ce,Ce[0],Ce[1],Ce[2]),Ce.length&&Y.push(Ce)}function ji(ke){let Y=[];return Y.size=ke.size,Y.start=ke.start,Y.end=ke.end,Y}function Sa(ke,Y,H,re,ye,ve){for(let Me of ke)gr(Me,Y,H,re,ye,ve,!1)}function nn(ke,Y,H,re){ke.push(Y,H,re)}function Ga(ke,Y,H,re,ye,ve){let Me=(ve-Y)/(re-Y);return nn(ke,ve,H+(ye-H)*Me,1),Me}function Rr(ke,Y,H,re,ye,ve){let Me=(ve-H)/(ye-H);return nn(ke,Y+(re-Y)*Me,ve,1),Me}function Ua(ke,Y){let H=[];for(let re=0;re<ke.length;re++){let ye=ke[re],ve=ye.type,Me;if(ve==="Point"||ve==="MultiPoint"||ve==="LineString")Me=cr(ye.geometry,Y);else if(ve==="MultiLineString"||ve==="Polygon"){Me=[];for(let Ce of ye.geometry)Me.push(cr(Ce,Y))}else if(ve==="MultiPolygon"){Me=[];for(let Ce of ye.geometry){let we=[];for(let Oe of Ce)we.push(cr(Oe,Y));Me.push(we)}}H.push(ii(ye.id,ve,Me,ye.tags))}return H}function cr(ke,Y){let H=[];H.size=ke.size,ke.start!==void 0&&(H.start=ke.start,H.end=ke.end);for(let re=0;re<ke.length;re+=3)H.push(ke[re]+Y,ke[re+1],ke[re+2]);return H}function an(ke,Y){if(ke.transformed)return ke;let H=1<<ke.z,re=ke.x,ye=ke.y;for(let ve of ke.features){let Me=ve.geometry,Ce=ve.type;if(ve.geometry=[],Ce===1)for(let we=0;we<Me.length;we+=2)ve.geometry.push(Pn(Me[we],Me[we+1],Y,H,re,ye));else for(let we=0;we<Me.length;we++){let Oe=[];for(let Ke=0;Ke<Me[we].length;Ke+=2)Oe.push(Pn(Me[we][Ke],Me[we][Ke+1],Y,H,re,ye));ve.geometry.push(Oe)}}return ke.transformed=!0,ke}function Pn(ke,Y,H,re,ye,ve){return[Math.round(H*(ke*re-ye)),Math.round(H*(Y*re-ve))]}function Ei(ke,Y,H,re,ye){let ve=Y===ye.maxZoom?0:ye.tolerance/((1<<Y)*ye.extent),Me={features:[],numPoints:0,numSimplified:0,numFeatures:ke.length,source:null,x:H,y:re,z:Y,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(let Ce of ke)En(Me,Ce,ve,ye);return Me}function En(ke,Y,H,re){let ye=Y.geometry,ve=Y.type,Me=[];if(ke.minX=Math.min(ke.minX,Y.minX),ke.minY=Math.min(ke.minY,Y.minY),ke.maxX=Math.max(ke.maxX,Y.maxX),ke.maxY=Math.max(ke.maxY,Y.maxY),ve==="Point"||ve==="MultiPoint")for(let Ce=0;Ce<ye.length;Ce+=3)Me.push(ye[Ce],ye[Ce+1]),ke.numPoints++,ke.numSimplified++;else if(ve==="LineString")Za(Me,ye,ke,H,!1,!1);else if(ve==="MultiLineString"||ve==="Polygon")for(let Ce=0;Ce<ye.length;Ce++)Za(Me,ye[Ce],ke,H,ve==="Polygon",Ce===0);else if(ve==="MultiPolygon")for(let Ce=0;Ce<ye.length;Ce++){let we=ye[Ce];for(let Oe=0;Oe<we.length;Oe++)Za(Me,we[Oe],ke,H,!0,Oe===0)}if(Me.length){let Ce=Y.tags||null;if(ve==="LineString"&&re.lineMetrics){Ce={};for(let Oe in Y.tags)Ce[Oe]=Y.tags[Oe];Ce.mapbox_clip_start=ye.start/ye.size,Ce.mapbox_clip_end=ye.end/ye.size}let we={geometry:Me,type:ve==="Polygon"||ve==="MultiPolygon"?3:ve==="LineString"||ve==="MultiLineString"?2:1,tags:Ce};Y.id!==null&&(we.id=Y.id),ke.features.push(we)}}function Za(ke,Y,H,re,ye,ve){let Me=re*re;if(re>0&&Y.size<(ye?Me:re))return void(H.numPoints+=Y.length/3);let Ce=[];for(let we=0;we<Y.length;we+=3)(re===0||Y[we+2]>Me)&&(H.numSimplified++,Ce.push(Y[we],Y[we+1])),H.numPoints++;ye&&(function(we,Oe){let Ke=0;for(let Ue=0,st=we.length,ft=st-2;Ue<st;ft=Ue,Ue+=2)Ke+=(we[Ue]-we[ft])*(we[Ue+1]+we[ft+1]);if(Ke>0===Oe)for(let Ue=0,st=we.length;Ue<st/2;Ue+=2){let ft=we[Ue],Et=we[Ue+1];we[Ue]=we[st-2-Ue],we[Ue+1]=we[st-1-Ue],we[st-2-Ue]=ft,we[st-1-Ue]=Et}})(Ce,ve),ke.push(Ce)}let $a={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Wn{constructor(Y,H){let re=(H=this.options=(function(ve,Me){for(let Ce in Me)ve[Ce]=Me[Ce];return ve})(Object.create($a),H)).debug;if(re&&console.time("preprocess data"),H.maxZoom<0||H.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(H.promoteId&&H.generateId)throw new Error("promoteId and generateId cannot be used together.");let ye=(function(ve,Me){let Ce=[];if(ve.type==="FeatureCollection")for(let we=0;we<ve.features.length;we++)ei(Ce,ve.features[we],Me,we);else ei(Ce,ve.type==="Feature"?ve:{geometry:ve},Me);return Ce})(Y,H);this.tiles={},this.tileCoords=[],re&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",H.indexMaxZoom,H.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ye=(function(ve,Me){let Ce=Me.buffer/Me.extent,we=ve,Oe=qt(ve,1,-1-Ce,Ce,0,-1,2,Me),Ke=qt(ve,1,1-Ce,2+Ce,0,-1,2,Me);return(Oe||Ke)&&(we=qt(ve,1,-Ce,1+Ce,0,-1,2,Me)||[],Oe&&(we=Ua(Oe,1).concat(we)),Ke&&(we=we.concat(Ua(Ke,-1)))),we})(ye,H),ye.length&&this.splitTile(ye,0,0,0),re&&(ye.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(Y,H,re,ye,ve,Me,Ce){let we=[Y,H,re,ye],Oe=this.options,Ke=Oe.debug;for(;we.length;){ye=we.pop(),re=we.pop(),H=we.pop(),Y=we.pop();let Ue=1<<H,st=yn(H,re,ye),ft=this.tiles[st];if(!ft&&(Ke>1&&console.time("creation"),ft=this.tiles[st]=Ei(Y,H,re,ye,Oe),this.tileCoords.push({z:H,x:re,y:ye}),Ke)){Ke>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",H,re,ye,ft.numFeatures,ft.numPoints,ft.numSimplified),console.timeEnd("creation"));let Ni=`z${H}`;this.stats[Ni]=(this.stats[Ni]||0)+1,this.total++}if(ft.source=Y,ve==null){if(H===Oe.indexMaxZoom||ft.numPoints<=Oe.indexMaxPoints)continue}else{if(H===Oe.maxZoom||H===ve)continue;if(ve!=null){let Ni=ve-H;if(re!==Me>>Ni||ye!==Ce>>Ni)continue}}if(ft.source=null,Y.length===0)continue;Ke>1&&console.time("clipping");let Et=.5*Oe.buffer/Oe.extent,ui=.5-Et,ai=.5+Et,ze=1+Et,vi=null,yr=null,At=null,hi=null,_r=qt(Y,Ue,re-Et,re+ai,0,ft.minX,ft.maxX,Oe),bi=qt(Y,Ue,re+ui,re+ze,0,ft.minX,ft.maxX,Oe);Y=null,_r&&(vi=qt(_r,Ue,ye-Et,ye+ai,1,ft.minY,ft.maxY,Oe),yr=qt(_r,Ue,ye+ui,ye+ze,1,ft.minY,ft.maxY,Oe),_r=null),bi&&(At=qt(bi,Ue,ye-Et,ye+ai,1,ft.minY,ft.maxY,Oe),hi=qt(bi,Ue,ye+ui,ye+ze,1,ft.minY,ft.maxY,Oe),bi=null),Ke>1&&console.timeEnd("clipping"),we.push(vi||[],H+1,2*re,2*ye),we.push(yr||[],H+1,2*re,2*ye+1),we.push(At||[],H+1,2*re+1,2*ye),we.push(hi||[],H+1,2*re+1,2*ye+1)}}getTile(Y,H,re){Y=+Y,H=+H,re=+re;let ye=this.options,{extent:ve,debug:Me}=ye;if(Y<0||Y>24)return null;let Ce=1<<Y,we=yn(Y,H=H+Ce&Ce-1,re);if(this.tiles[we])return an(this.tiles[we],ve);Me>1&&console.log("drilling down to z%d-%d-%d",Y,H,re);let Oe,Ke=Y,Ue=H,st=re;for(;!Oe&&Ke>0;)Ke--,Ue>>=1,st>>=1,Oe=this.tiles[yn(Ke,Ue,st)];return Oe&&Oe.source?(Me>1&&(console.log("found parent tile z%d-%d-%d",Ke,Ue,st),console.time("drilling down")),this.splitTile(Oe.source,Ke,Ue,st,Y,H,re),Me>1&&console.timeEnd("drilling down"),this.tiles[we]?an(this.tiles[we],ve):null):null}}function yn(ke,Y,H){return 32*((1<<ke)*H+Y)+ke}class Ha extends te{constructor(Y,H,re,ye=bs){super(Y,H,re),this._dataUpdateable=new Map,this._createGeoJSONIndex=ye}loadVectorTile(Y,H){return f._(this,void 0,void 0,(function*(){let re=Y.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");let ye=this._geoJSONIndex.getTile(re.z,re.x,re.y);return ye?$(new f.d3(ye.features,{version:2,extent:f.a5})):null}))}loadData(Y){return f._(this,void 0,void 0,(function*(){var H;(H=this._pendingRequest)===null||H===void 0||H.abort();let re=this._startPerformance(Y);this._pendingRequest=new AbortController;try{(!this._pendingData||Y.request||Y.data||Y.dataDiff)&&(this._pendingData=this.loadAndProcessGeoJSON(Y,this._pendingRequest));let ye=yield this._pendingData;this._geoJSONIndex=this._createGeoJSONIndex(ye,Y),this.loaded={};let ve={};return this._finishPerformance(re,Y,ve),ve}catch(ye){if(delete this._pendingRequest,f.Z(ye))return{abandoned:!0};throw ye}}))}_startPerformance(Y){var H;if(!((H=Y?.request)===null||H===void 0)&&H.collectResourceTiming)return new f.c$(Y.request)}_finishPerformance(Y,H,re){if(!Y)return;let ye=Y.finish();ye&&(re.resourceTiming={},re.resourceTiming[H.source]=JSON.parse(JSON.stringify(ye)))}getData(){return f._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(Y){let H=this.loaded;return H&&H[Y.uid]?super.reloadTile(Y):this.loadTile(Y)}loadAndProcessGeoJSON(Y,H){return f._(this,void 0,void 0,(function*(){let re;if(Y.request?re=yield this.loadGeoJSONFromUrl(Y.request,Y.promoteId,H):Y.data?re=this._loadGeoJSONFromObject(Y.data,Y.promoteId):Y.dataDiff&&(re=this._loadGeoJSONFromDiff(Y.dataDiff,Y.promoteId,Y.source)),delete this._pendingRequest,typeof re!="object")throw new Error(`Input data given to '${Y.source}' is not a valid GeoJSON object.`);return dt(re,!0),Y.filter&&(re=this._filterGeoJSON(re,Y.filter)),re}))}loadGeoJSONFromUrl(Y,H,re){return f._(this,void 0,void 0,(function*(){let ye=yield f.j(Y,re);return this._dataUpdateable=f.a7(ye.data,H)?f.a8(ye.data,H):void 0,ye.data}))}_loadGeoJSONFromObject(Y,H){return this._dataUpdateable=f.a7(Y,H)?f.a8(Y,H):void 0,Y}_loadGeoJSONFromDiff(Y,H,re){if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${re}`);f.a9(this._dataUpdateable,Y,H);let ye=Array.from(this._dataUpdateable.values());return this._toFeatureCollection(ye)}_filterGeoJSON(Y,H){let re=f.d4(H,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(re.result==="error")throw new Error(re.value.map((ve=>`${ve.key}: ${ve.message}`)).join(", "));let ye=Y.features.filter((ve=>re.value.evaluate({zoom:0},ve)));return this._toFeatureCollection(ye)}_toFeatureCollection(Y){return{type:"FeatureCollection",features:Y}}removeSource(Y){return f._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(Y){return this._geoJSONIndex.getClusterExpansionZoom(Y.clusterId)}getClusterChildren(Y){return this._geoJSONIndex.getChildren(Y.clusterId)}getClusterLeaves(Y){return this._geoJSONIndex.getLeaves(Y.clusterId,Y.limit,Y.offset)}}function bs(ke,Y){return Y.cluster?new je((function({superclusterOptions:H,clusterProperties:re}){if(!re||!H)return H;let ye={},ve={},Me={accumulated:null,zoom:0},Ce={properties:null},we=Object.keys(re);for(let Oe of we){let[Ke,Ue]=re[Oe],st=f.d4(Ue),ft=f.d4(typeof Ke=="string"?[Ke,["accumulated"],["get",Oe]]:Ke);ye[Oe]=st.value,ve[Oe]=ft.value}return H.map=Oe=>{Ce.properties=Oe;let Ke={};for(let Ue of we)Ke[Ue]=ye[Ue].evaluate(Me,Ce);return Ke},H.reduce=(Oe,Ke)=>{Ce.properties=Ke;for(let Ue of we)Me.accumulated=Oe[Ue],Oe[Ue]=ve[Ue].evaluate(Me,Ce)},H})(Y)).load(ke.features):(function(H,re){return new Wn(H,re)})(ke,Y.geojsonVtOptions)}class Ur{constructor(Y){this.self=Y,this.actor=new f.L(Y),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(H,re)=>{if(this.externalWorkerSourceTypes[H])throw new Error(`Worker source with name "${H}" already registered.`);this.externalWorkerSourceTypes[H]=re},this.self.addProtocol=f.cK,this.self.removeProtocol=f.cL,this.self.registerRTLTextPlugin=H=>{f.d5.setMethods(H)},this.actor.registerMessageHandler("LDT",((H,re)=>this._getDEMWorkerSource(H,re.source).loadTile(re))),this.actor.registerMessageHandler("RDT",((H,re)=>f._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(H,re.source).removeTile(re)})))),this.actor.registerMessageHandler("GCEZ",((H,re)=>f._(this,void 0,void 0,(function*(){return this._getWorkerSource(H,re.type,re.source).getClusterExpansionZoom(re)})))),this.actor.registerMessageHandler("GCC",((H,re)=>f._(this,void 0,void 0,(function*(){return this._getWorkerSource(H,re.type,re.source).getClusterChildren(re)})))),this.actor.registerMessageHandler("GCL",((H,re)=>f._(this,void 0,void 0,(function*(){return this._getWorkerSource(H,re.type,re.source).getClusterLeaves(re)})))),this.actor.registerMessageHandler("LD",((H,re)=>this._getWorkerSource(H,re.type,re.source).loadData(re))),this.actor.registerMessageHandler("GD",((H,re)=>this._getWorkerSource(H,re.type,re.source).getData())),this.actor.registerMessageHandler("LT",((H,re)=>this._getWorkerSource(H,re.type,re.source).loadTile(re))),this.actor.registerMessageHandler("RT",((H,re)=>this._getWorkerSource(H,re.type,re.source).reloadTile(re))),this.actor.registerMessageHandler("AT",((H,re)=>this._getWorkerSource(H,re.type,re.source).abortTile(re))),this.actor.registerMessageHandler("RMT",((H,re)=>this._getWorkerSource(H,re.type,re.source).removeTile(re))),this.actor.registerMessageHandler("RS",((H,re)=>f._(this,void 0,void 0,(function*(){if(!this.workerSources[H]||!this.workerSources[H][re.type]||!this.workerSources[H][re.type][re.source])return;let ye=this.workerSources[H][re.type][re.source];delete this.workerSources[H][re.type][re.source],ye.removeSource!==void 0&&ye.removeSource(re)})))),this.actor.registerMessageHandler("RM",(H=>f._(this,void 0,void 0,(function*(){delete this.layerIndexes[H],delete this.availableImages[H],delete this.workerSources[H],delete this.demWorkerSources[H],this.globalStates.delete(H)})))),this.actor.registerMessageHandler("SR",((H,re)=>f._(this,void 0,void 0,(function*(){this.referrer=re})))),this.actor.registerMessageHandler("SRPS",((H,re)=>this._syncRTLPluginState(H,re))),this.actor.registerMessageHandler("IS",((H,re)=>f._(this,void 0,void 0,(function*(){this.self.importScripts(re)})))),this.actor.registerMessageHandler("SI",((H,re)=>this._setImages(H,re))),this.actor.registerMessageHandler("UL",((H,re)=>f._(this,void 0,void 0,(function*(){this._getLayerIndex(H).update(re.layers,re.removedIds,this._getGlobalState(H))})))),this.actor.registerMessageHandler("UGS",((H,re)=>f._(this,void 0,void 0,(function*(){let ye=this._getGlobalState(H);for(let ve in re)ye[ve]=re[ve]})))),this.actor.registerMessageHandler("SL",((H,re)=>f._(this,void 0,void 0,(function*(){this._getLayerIndex(H).replace(re,this._getGlobalState(H))}))))}_getGlobalState(Y){let H=this.globalStates.get(Y);return H||(H={},this.globalStates.set(Y,H)),H}_setImages(Y,H){return f._(this,void 0,void 0,(function*(){this.availableImages[Y]=H;for(let re in this.workerSources[Y]){let ye=this.workerSources[Y][re];for(let ve in ye)ye[ve].availableImages=H}}))}_syncRTLPluginState(Y,H){return f._(this,void 0,void 0,(function*(){return yield f.d5.syncState(H,this.self.importScripts)}))}_getAvailableImages(Y){let H=this.availableImages[Y];return H||(H=[]),H}_getLayerIndex(Y){let H=this.layerIndexes[Y];return H||(H=this.layerIndexes[Y]=new a),H}_getWorkerSource(Y,H,re){if(this.workerSources[Y]||(this.workerSources[Y]={}),this.workerSources[Y][H]||(this.workerSources[Y][H]={}),!this.workerSources[Y][H][re]){let ye={sendAsync:(ve,Me)=>(ve.targetMapId=Y,this.actor.sendAsync(ve,Me))};switch(H){case"vector":this.workerSources[Y][H][re]=new te(ye,this._getLayerIndex(Y),this._getAvailableImages(Y));break;case"geojson":this.workerSources[Y][H][re]=new Ha(ye,this._getLayerIndex(Y),this._getAvailableImages(Y));break;default:this.workerSources[Y][H][re]=new this.externalWorkerSourceTypes[H](ye,this._getLayerIndex(Y),this._getAvailableImages(Y))}}return this.workerSources[Y][H][re]}_getDEMWorkerSource(Y,H){return this.demWorkerSources[Y]||(this.demWorkerSources[Y]={}),this.demWorkerSources[Y][H]||(this.demWorkerSources[Y][H]=new Te),this.demWorkerSources[Y][H]}}return f.i(self)&&(self.worker=new Ur(self)),Ur})),p("index",["exports","./shared"],(function(f,a){"use strict";var T="5.14.0";function M(){var _=new a.A(4);return a.A!=Float32Array&&(_[1]=0,_[2]=0),_[0]=1,_[3]=1,_}let B,G,J,ie={frame(_,t,n){let u=requestAnimationFrame((b=>{m(),t(b)})),{unsubscribe:m}=a.s(_.signal,"abort",(()=>{m(),cancelAnimationFrame(u),n(new a.a(_.signal.reason))}),!1)},frameAsync(_){return new Promise(((t,n)=>{this.frame(_,t,n)}))},getImageData(_,t=0){return this.getImageCanvasContext(_).getImageData(-t,-t,_.width+2*t,_.height+2*t)},getImageCanvasContext(_){let t=window.document.createElement("canvas"),n=t.getContext("2d",{willReadFrequently:!0});if(!n)throw new Error("failed to create canvas 2d context");return t.width=_.width,t.height=_.height,n.drawImage(_,0,0,_.width,_.height),n},resolveURL:_=>(B||(B=document.createElement("a")),B.href=_,B.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return J!==void 0?J:!!matchMedia&&(G==null&&(G=matchMedia("(prefers-reduced-motion: reduce)")),G.matches)},set prefersReducedMotion(_){J=_}},$=new class{constructor(){this._realTime=typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),this._frozenAt=null}getCurrentTime(){return this._frozenAt!==null?this._frozenAt:this._realTime()}setNow(_){this._frozenAt=_}restoreNow(){this._frozenAt=null}isFrozen(){return this._frozenAt!==null}};function ae(){return $.getCurrentTime()}class te{static testProp(t){if(!te.docStyle)return t[0];for(let n=0;n<t.length;n++)if(t[n]in te.docStyle)return t[n];return t[0]}static create(t,n,u){let m=window.document.createElement(t);return n!==void 0&&(m.className=n),u&&u.appendChild(m),m}static createNS(t,n){return window.document.createElementNS(t,n)}static disableDrag(){te.docStyle&&te.selectProp&&(te.userSelect=te.docStyle[te.selectProp],te.docStyle[te.selectProp]="none")}static enableDrag(){te.docStyle&&te.selectProp&&(te.docStyle[te.selectProp]=te.userSelect)}static setTransform(t,n){t.style[te.transformProp]=n}static addEventListener(t,n,u,m={}){t.addEventListener(n,u,"passive"in m?m:m.capture)}static removeEventListener(t,n,u,m={}){t.removeEventListener(n,u,"passive"in m?m:m.capture)}static suppressClickInternal(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("click",te.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",te.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",te.suppressClickInternal,!0)}),0)}static getScale(t){let n=t.getBoundingClientRect();return{x:n.width/t.offsetWidth||1,y:n.height/t.offsetHeight||1,boundingClientRect:n}}static getPoint(t,n,u){let m=n.boundingClientRect;return new a.P((u.clientX-m.left)/n.x-t.clientLeft,(u.clientY-m.top)/n.y-t.clientTop)}static mousePos(t,n){let u=te.getScale(t);return te.getPoint(t,u,n)}static touchPos(t,n){let u=[],m=te.getScale(t);for(let b=0;b<n.length;b++)u.push(te.getPoint(t,m,n[b]));return u}static mouseButton(t){return t.button}static remove(t){t.parentNode&&t.parentNode.removeChild(t)}static sanitize(t){let n=new DOMParser().parseFromString(t,"text/html").body||document.createElement("body"),u=n.querySelectorAll("script");for(let m of u)m.remove();return te.clean(n),n.innerHTML}static isPossiblyDangerous(t,n){let u=n.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(t)||!u.includes("javascript:")&&!u.includes("data:"))||!!t.startsWith("on")||void 0}static clean(t){let n=t.children;for(let u of n)te.removeAttributes(u),te.clean(u)}static removeAttributes(t){for(let{name:n,value:u}of t.attributes)te.isPossiblyDangerous(n,u)&&t.removeAttribute(n)}}te.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,te.selectProp=te.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),te.transformProp=te.testProp(["transform","WebkitTransform"]);let Te={supported:!1,testSupport:function(_){!Ze&&xe&&(dt?mt(_):We=_)}},We,xe,Ze=!1,dt=!1;function mt(_){let t=_.createTexture();_.bindTexture(_.TEXTURE_2D,t);try{if(_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,xe),_.isContextLost())return;Te.supported=!0}catch{}_.deleteTexture(t),Ze=!0}var Vt;typeof document<"u"&&(xe=document.createElement("img"),xe.onload=()=>{We&&mt(We),We=null,dt=!0},xe.onerror=()=>{Ze=!0,We=null},xe.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(_){let t,n,u,m;_.resetRequestQueue=()=>{t=[],n=0,u=0,m={}},_.addThrottleControl=E=>{let z=u++;return m[z]=E,z},_.removeThrottleControl=E=>{delete m[E],w()},_.getImage=(E,z,D=!0)=>new Promise(((N,j)=>{Te.supported&&(E.headers||(E.headers={}),E.headers.accept="image/webp,*/*"),a.e(E,{type:"image"}),t.push({abortController:z,requestParameters:E,supportImageRefresh:D,state:"queued",onError:U=>{j(U)},onSuccess:U=>{N(U)}}),w()}));let b=E=>a._(this,void 0,void 0,(function*(){E.state="running";let{requestParameters:z,supportImageRefresh:D,onError:N,onSuccess:j,abortController:U}=E,X=D===!1&&!a.i(self)&&!a.g(z.url)&&(!z.headers||Object.keys(z.headers).reduce(((oe,ce)=>oe&&ce==="accept"),!0));n++;let se=X?k(z,U):a.m(z,U);try{let oe=yield se;delete E.abortController,E.state="completed",oe.data instanceof HTMLImageElement||a.b(oe.data)?j(oe):oe.data&&j({data:yield(le=oe.data,typeof createImageBitmap=="function"?a.f(le):a.h(le)),cacheControl:oe.cacheControl,expires:oe.expires})}catch(oe){delete E.abortController,N(oe)}finally{n--,w()}var le})),w=()=>{let E=(()=>{for(let z of Object.keys(m))if(m[z]())return!0;return!1})()?a.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let z=n;z<E&&t.length>0;z++){let D=t.shift();D.abortController.signal.aborted?z--:b(D)}},k=(E,z)=>new Promise(((D,N)=>{let j=new Image,U=E.url,X=E.credentials;X&&X==="include"?j.crossOrigin="use-credentials":(X&&X==="same-origin"||!a.d(U))&&(j.crossOrigin="anonymous"),z.signal.addEventListener("abort",(()=>{j.src="",N(new a.a(z.signal.reason))})),j.fetchPriority="high",j.onload=()=>{j.onerror=j.onload=null,D({data:j})},j.onerror=()=>{j.onerror=j.onload=null,z.signal.aborted||N(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},j.src=U}))})(Vt||(Vt={})),Vt.resetRequestQueue();class Bt{constructor(t){this._transformRequestFn=t??null}transformRequest(t,n){return this._transformRequestFn&&this._transformRequestFn(t,n)||{url:t}}setTransformRequest(t){this._transformRequestFn=t}}function je(_){let t=[];if(typeof _=="string")t.push({id:"default",url:_});else if(_&&_.length>0){let n=[];for(let{id:u,url:m}of _){let b=`${u}${m}`;n.indexOf(b)===-1&&(n.push(b),t.push({id:u,url:m}))}}return t}function Je(_,t,n){try{let u=new URL(_);return u.pathname+=`${t}${n}`,u.toString()}catch{throw new Error(`Invalid sprite URL "${_}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function ot(_){let{userImage:t}=_;return!!(t&&t.render&&t.render())&&(_.data.replace(new Uint8Array(t.data.buffer)),!0)}class St extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}destroy(){this.atlasTexture&&(this.atlasTexture.destroy(),this.atlasTexture=null);for(let t of Object.keys(this.images))this.removeImage(t);this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(let{ids:n,promiseResolve:u}of this.requestors)u(this._getImagesForIds(n));this.requestors=[]}}getImage(t){let n=this.images[t];if(n&&!n.data&&n.spriteData){let u=n.spriteData;n.data=new a.R({width:u.width,height:u.height},u.context.getImageData(u.x,u.y,u.width,u.height).data),n.spriteData=null}return n}addImage(t,n){if(this.images[t])throw new Error(`Image id ${t} already exist, use updateImage instead`);this._validate(t,n)&&(this.images[t]=n)}_validate(t,n){let u=!0,m=n.data||n.spriteData;return this._validateStretch(n.stretchX,m&&m.width)||(this.fire(new a.k(new Error(`Image "${t}" has invalid "stretchX" value`))),u=!1),this._validateStretch(n.stretchY,m&&m.height)||(this.fire(new a.k(new Error(`Image "${t}" has invalid "stretchY" value`))),u=!1),this._validateContent(n.content,n)||(this.fire(new a.k(new Error(`Image "${t}" has invalid "content" value`))),u=!1),u}_validateStretch(t,n){if(!t)return!0;let u=0;for(let m of t){if(m[0]<u||m[1]<m[0]||n<m[1])return!1;u=m[1]}return!0}_validateContent(t,n){if(!t)return!0;if(t.length!==4)return!1;let u=n.spriteData,m=u&&u.width||n.data.width,b=u&&u.height||n.data.height;return!(t[0]<0||m<t[0]||t[1]<0||b<t[1]||t[2]<0||m<t[2]||t[3]<0||b<t[3]||t[2]<t[0]||t[3]<t[1])}updateImage(t,n,u=!0){let m=this.getImage(t);if(u&&(m.data.width!==n.data.width||m.data.height!==n.data.height))throw new Error(`size mismatch between old image (${m.data.width}x${m.data.height}) and new image (${n.data.width}x${n.data.height}).`);n.version=m.version+1,this.images[t]=n,this.updatedImages[t]=!0}removeImage(t){let n=this.images[t];delete this.images[t],delete this.patterns[t],n.userImage&&n.userImage.onRemove&&n.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t){return new Promise(((n,u)=>{let m=!0;if(!this.isLoaded())for(let b of t)this.images[b]||(m=!1);this.isLoaded()||m?n(this._getImagesForIds(t)):this.requestors.push({ids:t,promiseResolve:n})}))}_getImagesForIds(t){let n={};for(let u of t){let m=this.getImage(u);m||(this.fire(new a.l("styleimagemissing",{id:u})),m=this.getImage(u)),m?n[u]={data:m.data.clone(),pixelRatio:m.pixelRatio,sdf:m.sdf,version:m.version,stretchX:m.stretchX,stretchY:m.stretchY,content:m.content,textFitWidth:m.textFitWidth,textFitHeight:m.textFitHeight,hasRenderCallback:!!(m.userImage&&m.userImage.render)}:a.w(`Image "${u}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return n}getPixelSize(){let{width:t,height:n}=this.atlasImage;return{width:t,height:n}}getPattern(t){let n=this.patterns[t],u=this.getImage(t);if(!u)return null;if(n&&n.position.version===u.version)return n.position;if(n)n.position.version=u.version;else{let m={w:u.data.width+2,h:u.data.height+2,x:0,y:0},b=new a.I(m,u);this.patterns[t]={bin:m,position:b}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){let n=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.T(t,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}_updatePatternAtlas(){let t=[];for(let b in this.patterns)t.push(this.patterns[b].bin);let{w:n,h:u}=a.p(t),m=this.atlasImage;m.resize({width:n||1,height:u||1});for(let b in this.patterns){let{bin:w}=this.patterns[b],k=w.x+1,E=w.y+1,z=this.getImage(b).data,D=z.width,N=z.height;a.R.copy(z,m,{x:0,y:0},{x:k,y:E},{width:D,height:N}),a.R.copy(z,m,{x:0,y:N-1},{x:k,y:E-1},{width:D,height:1}),a.R.copy(z,m,{x:0,y:0},{x:k,y:E+N},{width:D,height:1}),a.R.copy(z,m,{x:D-1,y:0},{x:k-1,y:E},{width:1,height:N}),a.R.copy(z,m,{x:0,y:0},{x:k+D,y:E},{width:1,height:N})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(let n of t){if(this.callbackDispatchedThisFrame[n])continue;this.callbackDispatchedThisFrame[n]=!0;let u=this.getImage(n);u||a.w(`Image with ID: "${n}" was not found`),ot(u)&&this.updateImage(n,u)}}cloneImages(){let t={};for(let n in this.images){let u=this.images[n];t[n]=Object.assign(Object.assign({},u),{data:u.data?u.data.clone():null})}return t}}let Ht=1e20;function Tt(_,t,n,u,m,b,w,k,E){for(let z=t;z<t+u;z++)_i(_,n*b+z,b,m,w,k,E);for(let z=n;z<n+m;z++)_i(_,z*b+t,1,u,w,k,E)}function _i(_,t,n,u,m,b,w){b[0]=0,w[0]=-Ht,w[1]=Ht,m[0]=_[t];for(let k=1,E=0,z=0;k<u;k++){m[k]=_[t+k*n];let D=k*k;do{let N=b[E];z=(m[k]-m[N]+D-N*N)/(k-N)/2}while(z<=w[E]&&--E>-1);E++,b[E]=k,w[E]=z,w[E+1]=Ht}for(let k=0,E=0;k<u;k++){for(;w[E+1]<k;)E++;let z=b[E],D=k-z;_[t+k*n]=m[z]+D*D}}let ti=a.v.layout_symbol["text-font"].default.join(",");class ii{constructor(t,n,u){this.requestManager=t,this.localIdeographFontFamily=n,this.entries={},this.lang=u}setURL(t){this.url=t}getGlyphs(t){return a._(this,void 0,void 0,(function*(){let n=[];for(let b in t)for(let w of t[b])n.push(this._getAndCacheGlyphsPromise(b,w));let u=yield Promise.all(n),m={};for(let{stack:b,id:w,glyph:k}of u)m[b]||(m[b]={}),m[b][w]=k&&{id:k.id,bitmap:k.bitmap.clone(),metrics:k.metrics};return m}))}_getAndCacheGlyphsPromise(t,n){return a._(this,void 0,void 0,(function*(){let u=this.entries[t];u||(u=this.entries[t]={glyphs:{},requests:{},ranges:{}});let m=u.glyphs[n];return m!==void 0?{stack:t,id:n,glyph:m}:!this.url||this._charUsesLocalIdeographFontFamily(n)?(m=u.glyphs[n]=this._drawGlyph(u,t,n),{stack:t,id:n,glyph:m}):yield this._downloadAndCacheRangePromise(t,n)}))}_downloadAndCacheRangePromise(t,n){return a._(this,void 0,void 0,(function*(){let u=this.entries[t],m=Math.floor(n/256);if(u.ranges[m])return{stack:t,id:n,glyph:null};if(!u.requests[m]){let b=ii.loadGlyphRange(t,m,this.url,this.requestManager);u.requests[m]=b}try{let b=yield u.requests[m];for(let w in b)u.glyphs[+w]=b[+w];return u.ranges[m]=!0,{stack:t,id:n,glyph:b[n]||null}}catch(b){let w=u.glyphs[n]=this._drawGlyph(u,t,n);return this._warnOnMissingGlyphRange(w,m,n,b),{stack:t,id:n,glyph:w}}}))}_warnOnMissingGlyphRange(t,n,u,m){let b=256*n,w=b+255,k=u.toString(16).padStart(4,"0").toUpperCase();a.w(`Unable to load glyph range ${n}, ${b}-${w}. Rendering codepoint U+${k} locally instead. ${m}`)}_charUsesLocalIdeographFontFamily(t){return!!this.localIdeographFontFamily&&a.q(t)}_drawGlyph(t,n,u){let m=n===ti&&this.localIdeographFontFamily!==""&&this._charUsesLocalIdeographFontFamily(u),b=m?"ideographTinySDF":"tinySDF";t[b]||(t[b]=this._createTinySDF(m?this.localIdeographFontFamily:n));let w=t[b].draw(String.fromCodePoint(u));return{id:u,bitmap:new a.r({width:w.width||60,height:w.height||60},w.data),metrics:{width:w.glyphWidth/2||24,height:w.glyphHeight/2||24,left:w.glyphLeft/2+.5||0,top:w.glyphTop/2-27.5||-8,advance:w.glyphAdvance/2||24,isDoubleResolution:!0}}}_createTinySDF(t){let n=t?t.split(","):[];n.push("sans-serif");let u=n.map((m=>/[-\w]+/.test(m)?m:`'${CSS.escape(m)}'`)).join(",");return new ii.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:u,fontWeight:this._fontWeight(n[0]),fontStyle:this._fontStyle(n[0]),lang:this.lang})}_fontStyle(t){return/italic/i.test(t)?"italic":/oblique/i.test(t)?"oblique":"normal"}_fontWeight(t){let n={thin:100,hairline:100,"extra light":200,"ultra light":200,light:300,normal:400,regular:400,medium:500,semibold:600,demibold:600,bold:700,"extra bold":800,"ultra bold":800,black:900,heavy:900,"extra black":950,"ultra black":950},u;for(let[m,b]of Object.entries(n))new RegExp(`\\b${m}\\b`,"i").test(t)&&(u=`${b}`);return u}destroy(){for(let t in this.entries){let n=this.entries[t];n.tinySDF&&(n.tinySDF=null),n.ideographTinySDF&&(n.ideographTinySDF=null),n.glyphs={},n.requests={},n.ranges={}}this.entries={}}}ii.loadGlyphRange=function(_,t,n,u){return a._(this,void 0,void 0,(function*(){let m=256*t,b=m+255,w=u.transformRequest(n.replace("{fontstack}",_).replace("{range}",`${m}-${b}`),"Glyphs"),k=yield a.n(w,new AbortController);if(!k||!k.data)throw new Error(`Could not load glyph range. range: ${t}, ${m}-${b}`);let E={};for(let z of a.o(k.data))E[z.id]=z;return E}))},ii.TinySDF=class{constructor({fontSize:_=24,buffer:t=3,radius:n=8,cutoff:u=.25,fontFamily:m="sans-serif",fontWeight:b="normal",fontStyle:w="normal",lang:k=null}={}){this.buffer=t,this.cutoff=u,this.radius=n,this.lang=k;let E=this.size=_+4*t,z=this._createCanvas(E),D=this.ctx=z.getContext("2d",{willReadFrequently:!0});D.font=`${w} ${b} ${_}px ${m}`,D.textBaseline="alphabetic",D.textAlign="left",D.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Uint16Array(E)}_createCanvas(_){let t=document.createElement("canvas");return t.width=t.height=_,t}draw(_){let{width:t,actualBoundingBoxAscent:n,actualBoundingBoxDescent:u,actualBoundingBoxLeft:m,actualBoundingBoxRight:b}=this.ctx.measureText(_),w=Math.ceil(n),k=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(b-m))),E=Math.min(this.size-this.buffer,w+Math.ceil(u)),z=k+2*this.buffer,D=E+2*this.buffer,N=Math.max(z*D,0),j=new Uint8ClampedArray(N),U={data:j,width:z,height:D,glyphWidth:k,glyphHeight:E,glyphTop:w,glyphLeft:0,glyphAdvance:t};if(k===0||E===0)return U;let{ctx:X,buffer:se,gridInner:le,gridOuter:oe}=this;this.lang&&(X.lang=this.lang),X.clearRect(se,se,k,E),X.fillText(_,se,se+w);let ce=X.getImageData(se,se,k,E);oe.fill(Ht,0,N),le.fill(0,0,N);for(let me=0;me<E;me++)for(let he=0;he<k;he++){let ge=ce.data[4*(me*k+he)+3]/255;if(ge===0)continue;let be=(me+se)*z+he+se;if(ge===1)oe[be]=0,le[be]=Ht;else{let pe=.5-ge;oe[be]=pe>0?pe*pe:0,le[be]=pe<0?pe*pe:0}}Tt(oe,0,0,z,D,z,this.f,this.v,this.z),Tt(le,se,se,k,E,z,this.f,this.v,this.z);for(let me=0;me<N;me++){let he=Math.sqrt(oe[me])-Math.sqrt(le[me]);j[me]=Math.round(255-255*(he/this.radius+this.cutoff))}return U}};class _t{constructor(){this.specification=a.u.light.position}possiblyEvaluate(t,n){return a.F(t.expression.evaluate(n))}interpolate(t,n,u){return{x:a.G.number(t.x,n.x,u),y:a.G.number(t.y,n.y,u),z:a.G.number(t.z,n.z,u)}}}let ei;class kt extends a.E{constructor(t){super(),ei=ei||new a.t({anchor:new a.D(a.u.light.anchor),position:new _t,color:new a.D(a.u.light.color),intensity:new a.D(a.u.light.intensity)}),this._transitionable=new a.x(ei,void 0),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,n={}){if(!this._validate(a.y,t,n))for(let u in t){let m=t[u];u.endsWith(a.z)?this._transitionable.setTransition(u.slice(0,-a.z.length),m):this._transitionable.setValue(u,m)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,n,u){return(!u||u.validate!==!1)&&a.B(this,t.call(a.C,{value:n,style:{glyphs:!0,sprite:!0},styleSpec:a.u}))}}let ni=new a.t({"sky-color":new a.D(a.u.sky["sky-color"]),"horizon-color":new a.D(a.u.sky["horizon-color"]),"fog-color":new a.D(a.u.sky["fog-color"]),"fog-ground-blend":new a.D(a.u.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.u.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.u.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.u.sky["atmosphere-blend"])});class Yi extends a.E{constructor(t){super(),this._transitionable=new a.x(ni,void 0),this.setSky(t),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.H(0))}setSky(t,n={}){if(!this._validate(a.J,t,n)){t||(t={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(let u in t){let m=t[u];u.endsWith(a.z)?this._transitionable.setTransition(u.slice(0,-a.z.length),m):this._transitionable.setValue(u,m)}}}getSky(){return this._transitionable.serialize()}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,n,u={}){return u?.validate!==!1&&a.B(this,t.call(a.C,a.e({value:n,style:{glyphs:!0,sprite:!0},styleSpec:a.u})))}calculateFogBlendOpacity(t){return t<60?0:t<70?(t-60)/10:1}}class tr{constructor(t,n){this.width=t,this.height=n,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(t,n){let u=t.join(",")+String(n);return this.dashEntry[u]||(this.dashEntry[u]=this.addDash(t,n)),this.dashEntry[u]}getDashRanges(t,n,u){let m=[],b=t.length%2==1?-t[t.length-1]*u:0,w=t[0]*u,k=!0;m.push({left:b,right:w,isDash:k,zeroLength:t[0]===0});let E=t[0];for(let z=1;z<t.length;z++){k=!k;let D=t[z];b=E*u,E+=D,w=E*u,m.push({left:b,right:w,isDash:k,zeroLength:D===0})}return m}addRoundDash(t,n,u){let m=n/2;for(let b=-u;b<=u;b++){let w=this.width*(this.nextRow+u+b),k=0,E=t[k];for(let z=0;z<this.width;z++){z/E.right>1&&(E=t[++k]);let D=Math.abs(z-E.left),N=Math.abs(z-E.right),j=Math.min(D,N),U,X=b/u*(m+1);if(E.isDash){let se=m-Math.abs(X);U=Math.sqrt(j*j+se*se)}else U=m-Math.sqrt(j*j+X*X);this.data[w+z]=Math.max(0,Math.min(255,U+128))}}}addRegularDash(t){for(let k=t.length-1;k>=0;--k){let E=t[k],z=t[k+1];E.zeroLength?t.splice(k,1):z&&z.isDash===E.isDash&&(z.left=E.left,t.splice(k,1))}let n=t[0],u=t[t.length-1];n.isDash===u.isDash&&(n.left=u.left-this.width,u.right=n.right+this.width);let m=this.width*this.nextRow,b=0,w=t[b];for(let k=0;k<this.width;k++){k/w.right>1&&(w=t[++b]);let E=Math.abs(k-w.left),z=Math.abs(k-w.right),D=Math.min(E,z);this.data[m+k]=Math.max(0,Math.min(255,(w.isDash?D:-D)+128))}}addDash(t,n){let u=n?7:0,m=2*u+1;if(this.nextRow+m>this.height)return a.w("LineAtlas out of space"),null;let b=0;for(let k=0;k<t.length;k++)b+=t[k];if(b!==0){let k=this.width/b,E=this.getDashRanges(t,this.width,k);n?this.addRoundDash(E,k,u):this.addRegularDash(E)}let w={y:this.nextRow+u,height:2*u,width:b};return this.nextRow+=m,this.dirty=!0,w}bind(t){let n=t.gl;this.texture?(n.bindTexture(n.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,n.texSubImage2D(n.TEXTURE_2D,0,0,0,this.width,this.height,n.ALPHA,n.UNSIGNED_BYTE,this.data))):(this.texture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.REPEAT),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.REPEAT),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texImage2D(n.TEXTURE_2D,0,n.ALPHA,this.width,this.height,0,n.ALPHA,n.UNSIGNED_BYTE,this.data))}}let Ci="maplibre_preloaded_worker_pool";class qt{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<qt.workerCount;)this.workers.push(new Worker(a.c.WORKER_URL));return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],this.numActive()===0&&(this.workers.forEach((n=>{n.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[Ci]}numActive(){return Object.keys(this.active).length}}let Ft=Math.floor(ie.hardwareConcurrency/2),gr,ji;function Sa(){return gr||(gr=new qt),gr}qt.workerCount=a.K(globalThis)?Math.max(Math.min(Ft,3),1):1;class nn{constructor(t,n){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=n;let u=this.workerPool.acquire(n);for(let m=0;m<u.length;m++){let b=new a.L(u[m],n);b.name=`Worker ${m}`,this.actors.push(b)}if(!this.actors.length)throw new Error("No actors found")}broadcast(t,n){let u=[];for(let m of this.actors)u.push(m.sendAsync({type:t,data:n}));return Promise.all(u)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(t=!0){this.actors.forEach((n=>{n.remove()})),this.actors=[],t&&this.workerPool.release(this.id)}registerMessageHandler(t,n){for(let u of this.actors)u.registerMessageHandler(t,n)}unregisterMessageHandler(t){for(let n of this.actors)n.unregisterMessageHandler(t)}}function Ga(){return ji||(ji=new nn(Sa(),a.M),ji.registerMessageHandler("GR",((_,t,n)=>a.m(t,n)))),ji}function Rr(_,t){let n=a.N();return a.O(n,n,[1,1,0]),a.Q(n,n,[.5*_.width,.5*_.height,1]),_.calculatePosMatrix?a.S(n,n,_.calculatePosMatrix(t.toUnwrapped())):n}function Ua(_,t,n,u,m,b,w){var k;let E=(function(j,U,X){if(j)for(let se of j){let le=U[se];if(le&&le.source===X&&le.type==="fill-extrusion")return!0}else for(let se in U){let le=U[se];if(le.source===X&&le.type==="fill-extrusion")return!0}return!1})((k=m?.layers)!==null&&k!==void 0?k:null,t,_.id),z=b.maxPitchScaleFactor(),D=_.tilesIn(u,z,E);D.sort(cr);let N=[];for(let j of D)N.push({wrappedTileID:j.tileID.wrapped().key,queryResults:j.tile.queryRenderedFeatures(t,n,_.getState(),j.queryGeometry,j.cameraQueryGeometry,j.scale,m,b,z,Rr(b,j.tileID),w?(U,X)=>w(j.tileID,U,X):void 0)});return(function(j,U){for(let X in j)for(let se of j[X])an(se,U);return j})((function(j){let U={},X={};for(let se of j){let le=se.queryResults,oe=se.wrappedTileID,ce=X[oe]=X[oe]||{};for(let me in le){let he=le[me],ge=ce[me]=ce[me]||{},be=U[me]=U[me]||[];for(let pe of he)ge[pe.featureIndex]||(ge[pe.featureIndex]=!0,be.push(pe))}}return U})(N),_)}function cr(_,t){let n=_.tileID,u=t.tileID;return n.overscaledZ-u.overscaledZ||n.canonical.y-u.canonical.y||n.wrap-u.wrap||n.canonical.x-u.canonical.x}function an(_,t){let n=_.feature,u=t.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=u}function Pn(_,t,n){return a._(this,void 0,void 0,(function*(){let u=_;if(_.url?u=(yield a.j(t.transformRequest(_.url,"Source"),n)).data:yield ie.frameAsync(n),!u)return null;let m=a.U(a.e(u,_),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in u&&u.vector_layers&&(m.vectorLayerIds=u.vector_layers.map((b=>b.id))),m}))}class Ei{constructor(t,n){t&&(n?this.setSouthWest(t).setNorthEast(n):Array.isArray(t)&&(t.length===4?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1])))}setNorthEast(t){return this._ne=t instanceof a.V?new a.V(t.lng,t.lat):a.V.convert(t),this}setSouthWest(t){return this._sw=t instanceof a.V?new a.V(t.lng,t.lat):a.V.convert(t),this}extend(t){let n=this._sw,u=this._ne,m,b;if(t instanceof a.V)m=t,b=t;else{if(!(t instanceof Ei))return Array.isArray(t)?t.length===4||t.every(Array.isArray)?this.extend(Ei.convert(t)):this.extend(a.V.convert(t)):t&&("lng"in t||"lon"in t)&&"lat"in t?this.extend(a.V.convert(t)):this;if(m=t._sw,b=t._ne,!m||!b)return this}return n||u?(n.lng=Math.min(m.lng,n.lng),n.lat=Math.min(m.lat,n.lat),u.lng=Math.max(b.lng,u.lng),u.lat=Math.max(b.lat,u.lat)):(this._sw=new a.V(m.lng,m.lat),this._ne=new a.V(b.lng,b.lat)),this}getCenter(){return new a.V((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.V(this.getWest(),this.getNorth())}getSouthEast(){return new a.V(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){let{lng:n,lat:u}=a.V.convert(t),m=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=u&&u<=this._ne.lat&&m}intersects(t){if(!((t=Ei.convert(t)).getNorth()>=this.getSouth()&&t.getSouth()<=this.getNorth()))return!1;let n=a.W(this.getWest(),-180,180),u=a.W(this.getEast(),-180,180),m=a.W(t.getWest(),-180,180),b=a.W(t.getEast(),-180,180),w=n>=u,k=m>=b;return!(!w||!k)||(w?b>=n||m<=u:k?u>=m||n<=b:m<=u&&b>=n)}static convert(t){return t instanceof Ei?t:t&&new Ei(t)}static fromLngLat(t,n=0){let u=360*n/40075017,m=u/Math.cos(Math.PI/180*t.lat);return new Ei(new a.V(t.lng-m,t.lat-u),new a.V(t.lng+m,t.lat+u))}adjustAntiMeridian(){let t=new a.V(this._sw.lng,this._sw.lat),n=new a.V(this._ne.lng,this._ne.lat);return new Ei(t,t.lng>n.lng?new a.V(n.lng+360,n.lat):n)}}class En{constructor(t,n,u){this.bounds=Ei.convert(this.validateBounds(t)),this.minzoom=n||0,this.maxzoom=u||24}validateBounds(t){return Array.isArray(t)&&t.length===4?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(t){let n=Math.pow(2,t.z),u=Math.floor(a.Y(this.bounds.getWest())*n),m=Math.floor(a.X(this.bounds.getNorth())*n),b=Math.ceil(a.Y(this.bounds.getEast())*n),w=Math.ceil(a.X(this.bounds.getSouth())*n);return t.x>=u&&t.x<b&&t.y>=m&&t.y<w}}class Za extends a.E{constructor(t,n,u,m){if(super(),this.id=t,this.dispatcher=u,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.U(n,["url","scheme","tileSize","promoteId","encoding"])),this._options=a.e({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m)}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let t=yield Pn(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.tileManagers[this.id].clearTiles(),t&&(a.e(this,t),t.bounds&&(this.tileBounds=new En(t.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})))}catch(t){this._tileJSONRequest=null,this._loaded=!0,a.Z(t)||this.fire(new a.k(t))}}))}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}setSourceProperty(t){this._tileJSONRequest&&this._tileJSONRequest.abort(),t(),this.load()}setTiles(t){return this.setSourceProperty((()=>{this._options.tiles=t})),this}setUrl(t){return this.setSourceProperty((()=>{this.url=t,this._options.url=t})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(t){return a._(this,void 0,void 0,(function*(){let n=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),u={request:this.map._requestManager.transformRequest(n,"Tile"),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,encoding:this.encoding,overzoomParameters:this._getOverzoomParameters(t)};u.request.collectResourceTiming=this._collectResourceTiming;let m="RT";if(t.actor&&t.state!=="expired"){if(t.state==="loading")return new Promise(((b,w)=>{t.reloadPromise={resolve:b,reject:w}}))}else t.actor=this.dispatcher.getActor(),m="LT";t.abortController=new AbortController;try{let b=yield t.actor.sendAsync({type:m,data:u},t.abortController);if(delete t.abortController,t.aborted)return;this._afterTileLoadWorkerResponse(t,b)}catch(b){if(delete t.abortController,t.aborted)return;if(b&&b.status!==404)throw b;this._afterTileLoadWorkerResponse(t,null)}}))}_getOverzoomParameters(t){if(t.tileID.canonical.z<=this.maxzoom||this.map._zoomLevelsToOverscale===void 0)return;let n=t.tileID.scaledTo(this.maxzoom).canonical,u=n.url(this.tiles,this.map.getPixelRatio(),this.scheme);return{maxZoomTileID:n,overzoomRequest:this.map._requestManager.transformRequest(u,"Tile")}}_afterTileLoadWorkerResponse(t,n){if(n&&n.resourceTiming&&(t.resourceTiming=n.resourceTiming),n&&this.map._refreshExpiredTiles&&t.setExpiryData(n),t.loadVectorData(n,this.map.painter),t.reloadPromise){let u=t.reloadPromise;t.reloadPromise=null,this.loadTile(t).then(u.resolve).catch(u.reject)}}abortTile(t){return a._(this,void 0,void 0,(function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.actor&&(yield t.actor.sendAsync({type:"AT",data:{uid:t.uid,type:this.type,source:this.id}}))}))}unloadTile(t){return a._(this,void 0,void 0,(function*(){t.unloadVectorData(),t.actor&&(yield t.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class $a extends a.E{constructor(t,n,u,m){super(),this.id=t,this.dispatcher=u,this.setEventedParent(m),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},n),a.e(this,a.U(n,["url","scheme","tileSize"]))}load(){return a._(this,arguments,void 0,(function*(t=!1){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let n=yield Pn(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,n&&(a.e(this,n),n.bounds&&(this.tileBounds=new En(n.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:t})))}catch(n){this._tileJSONRequest=null,this._loaded=!0,a.Z(n)||this.fire(new a.k(n))}}))}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(t){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),t(),this.load(!0)}setTiles(t){return this.setSourceProperty((()=>{this._options.tiles=t})),this}setUrl(t){return this.setSourceProperty((()=>{this.url=t,this._options.url=t})),this}serialize(){return a.e({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(t){return a._(this,void 0,void 0,(function*(){let n=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);t.abortController=new AbortController;try{let u=yield Vt.getImage(this.map._requestManager.transformRequest(n,"Tile"),t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(u&&u.data){this.map._refreshExpiredTiles&&(u.cacheControl||u.expires)&&t.setExpiryData({cacheControl:u.cacheControl,expires:u.expires});let m=this.map.painter.context,b=m.gl,w=u.data;t.texture=this.map.painter.getTileTexture(w.width),t.texture?t.texture.update(w,{useMipmap:!0}):(t.texture=new a.T(m,w,b.RGBA,{useMipmap:!0}),t.texture.bind(b.LINEAR,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST)),t.state="loaded"}}catch(u){if(delete t.abortController,t.aborted)t.state="unloaded";else if(u)throw t.state="errored",u}}))}abortTile(t){return a._(this,void 0,void 0,(function*(){t.abortController&&(t.abortController.abort(),delete t.abortController)}))}unloadTile(t){return a._(this,void 0,void 0,(function*(){t.texture&&this.map.painter.saveTileTexture(t.texture)}))}hasTransition(){return!1}}class Wn extends $a{constructor(t,n,u,m){super(t,n,u,m),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},n),this.encoding=n.encoding||"mapbox",this.redFactor=n.redFactor,this.greenFactor=n.greenFactor,this.blueFactor=n.blueFactor,this.baseShift=n.baseShift}loadTile(t){return a._(this,void 0,void 0,(function*(){let n=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),u=this.map._requestManager.transformRequest(n,"Tile");t.neighboringTiles=this._getNeighboringTiles(t.tileID),t.abortController=new AbortController;try{let m=yield Vt.getImage(u,t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(m&&m.data){let b=m.data;this.map._refreshExpiredTiles&&(m.cacheControl||m.expires)&&t.setExpiryData({cacheControl:m.cacheControl,expires:m.expires});let w=a.b(b)&&a.$()?b:yield this.readImageNow(b),k={type:this.type,uid:t.uid,source:this.id,rawImageData:w,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!t.actor||t.state==="expired"){t.actor=this.dispatcher.getActor();let E=yield t.actor.sendAsync({type:"LDT",data:k});t.dem=E,t.needsHillshadePrepare=!0,t.needsTerrainPrepare=!0,t.state="loaded"}}}catch(m){if(delete t.abortController,t.aborted)t.state="unloaded";else if(m)throw t.state="errored",m}}))}readImageNow(t){return a._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&a.a0()){let n=t.width+2,u=t.height+2;try{return new a.R({width:n,height:u},yield a.a1(t,-1,-1,n,u))}catch{}}return ie.getImageData(t,1)}))}_getNeighboringTiles(t){let n=t.canonical,u=Math.pow(2,n.z),m=(n.x-1+u)%u,b=n.x===0?t.wrap-1:t.wrap,w=(n.x+1+u)%u,k=n.x+1===u?t.wrap+1:t.wrap,E={};return E[new a.a2(t.overscaledZ,b,n.z,m,n.y).key]={backfilled:!1},E[new a.a2(t.overscaledZ,k,n.z,w,n.y).key]={backfilled:!1},n.y>0&&(E[new a.a2(t.overscaledZ,b,n.z,m,n.y-1).key]={backfilled:!1},E[new a.a2(t.overscaledZ,t.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},E[new a.a2(t.overscaledZ,k,n.z,w,n.y-1).key]={backfilled:!1}),n.y+1<u&&(E[new a.a2(t.overscaledZ,b,n.z,m,n.y+1).key]={backfilled:!1},E[new a.a2(t.overscaledZ,t.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},E[new a.a2(t.overscaledZ,k,n.z,w,n.y+1).key]={backfilled:!1}),E}unloadTile(t){return a._(this,void 0,void 0,(function*(){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&(yield t.actor.sendAsync({type:"RDT",data:{type:this.type,uid:t.uid,source:this.id}}))}))}}function yn(_){return _.type==="GeometryCollection"?_.geometries.map((t=>t.coordinates)).flat(1/0):_.coordinates.flat(1/0)}function Ha(_){let t=new Ei,n;switch(_.type){case"FeatureCollection":n=_.features.map((u=>yn(u.geometry))).flat(1/0);break;case"Feature":n=yn(_.geometry);break;default:n=yn(_)}if(n.length==0)return t;for(let u=0;u<n.length-1;u+=2)t.extend([n[u],n[u+1]]);return t}class bs extends a.E{constructor(t,n,u,m){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:n.data},this.actor=u.getActor(),this.setEventedParent(m),this._data=typeof n.data=="string"?{url:n.data}:{geojson:n.data},this._options=a.e({},n),this._collectResourceTiming=n.collectResourceTiming,n.maxzoom!==void 0&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution),this.promoteId=n.promoteId,n.clusterMaxZoom!==void 0&&this.maxzoom<=n.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${n.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(n.buffer!==void 0?n.buffer:128),tolerance:this._pixelsToTileUnits(n.tolerance!==void 0?n.tolerance:.375),extent:a.a5,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(n.clusterMaxZoom),minPoints:Math.max(2,n.clusterMinPoints||2),extent:a.a5,radius:this._pixelsToTileUnits(n.clusterRadius||50),log:!1,generateId:n.generateId||!1},clusterProperties:n.clusterProperties,filter:n.filter},n.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_hasPendingWorkerUpdate(){return this._pendingWorkerUpdate.data!==void 0||this._pendingWorkerUpdate.diff!==void 0||this._pendingWorkerUpdate.optionsChanged}_pixelsToTileUnits(t){return t*(a.a5/this.tileSize)}_getClusterMaxZoom(t){let n=t?Math.round(t):this.maxzoom-1;return Number.isInteger(t)||t===void 0||a.w(`Integer expected for option 'clusterMaxZoom': provided value "${t}" rounded to "${n}"`),n}load(){return a._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(t){this.map=t,this.load()}setData(t,n){this._data=typeof t=="string"?{url:t}:{geojson:t},this._pendingWorkerUpdate={data:t};let u=this._updateWorkerData();return n?u:this}updateData(t,n){this._pendingWorkerUpdate.diff=a.a6(this._pendingWorkerUpdate.diff,t);let u=this._updateWorkerData();return n?u:this}getData(){return a._(this,void 0,void 0,(function*(){let t=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:t})}))}getBounds(){return a._(this,void 0,void 0,(function*(){return Ha(yield this.getData())}))}setClusterOptions(t){return this.workerOptions.cluster=t.cluster,t.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(t.clusterRadius)),t.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(t.clusterMaxZoom)),this._pendingWorkerUpdate.optionsChanged=!0,this._updateWorkerData(),this}getClusterExpansionZoom(t){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:t,source:this.id}})}getClusterChildren(t){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:t,source:this.id}})}getClusterLeaves(t,n,u){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:t,limit:n,offset:u}})}_updateWorkerData(){return a._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;if(!this._hasPendingWorkerUpdate())return void a.w(`No pending worker updates for GeoJSONSource ${this.id}.`);let{data:t,diff:n}=this._pendingWorkerUpdate,u=a.e({type:this.type},this.workerOptions);t!==void 0?(typeof t=="string"?(u.request=this.map._requestManager.transformRequest(ie.resolveURL(t),"Source"),u.request.collectResourceTiming=this._collectResourceTiming):u.data=t,this._pendingWorkerUpdate.data=void 0):n&&(u.dataDiff=n,this._pendingWorkerUpdate.diff=void 0),this._pendingWorkerUpdate.optionsChanged=void 0,this._isUpdatingWorker=!0,this.fire(new a.l("dataloading",{dataType:"source"}));try{let m=yield this.actor.sendAsync({type:"LD",data:u});if(this._isUpdatingWorker=!1,this._removed||m.abandoned)return void this.fire(new a.l("dataabort",{dataType:"source"}));n&&this._applyDiff(n);let b=null;m.resourceTiming&&m.resourceTiming[this.id]&&(b=m.resourceTiming[this.id].slice(0));let w={dataType:"source"};this._collectResourceTiming&&b&&b.length>0&&a.e(w,{resourceTiming:b}),this.fire(new a.l("data",Object.assign(Object.assign({},w),{sourceDataType:"metadata"}))),this.fire(new a.l("data",Object.assign(Object.assign({},w),{sourceDataType:"content",shouldReloadTileOptions:this._getShouldReloadTileOptions(n)})))}catch(m){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new a.l("dataabort",{dataType:"source"}));this.fire(new a.k(m))}finally{this._hasPendingWorkerUpdate()&&this._updateWorkerData()}}))}_applyDiff(t){let n=typeof this.promoteId=="string"?this.promoteId:void 0;if(!this._data.url&&!this._data.updateable){if(!a.a7(this._data.geojson,n))throw new Error(`GeoJSONSource "${this.id}": GeoJSON data is not compatible with updateData`);this._data={updateable:a.a8(this._data.geojson,n)}}this._data.updateable&&a.a9(this._data.updateable,t,n)}_getShouldReloadTileOptions(t){if(this._options.cluster||!t||t.removeAll)return;let{add:n=[],update:u=[],remove:m=[]}=t||{},b=new Set([...u.map((w=>w.id)),...m]);for(let w of b.values())if(typeof w!="number"&&this.promoteId==null)return void a.w(`GeoJSONSource "${this.id}": updateData is slower when using string GeoJSON feature IDs. Consider using promoteId or numeric IDs for better performance.`);return{nextBounds:[...u.map((w=>w.newGeometry)),...n.map((w=>w.geometry))].filter(Boolean).map((w=>Ha(w))),prevIds:b}}shouldReloadTile(t,{nextBounds:n,prevIds:u}){if(!t.latestFeatureIndex)return t.state!=="unloaded";let m=t.latestFeatureIndex.loadVTLayers();for(let E=0;E<t.latestFeatureIndex.featureIndexArray.length;E++){let z=t.latestFeatureIndex.featureIndexArray.get(E),D=m[a.aa].feature(z.featureIndex),N=t.latestFeatureIndex.getId(D,a.aa);if(u.has(N))return!0}let{buffer:b,extent:w}=this.workerOptions.geojsonVtOptions,k=(function({x:E,y:z,z:D},N=0){let j=a.a3((E-N)/Math.pow(2,D)),U=a.a4((z+1+N)/Math.pow(2,D)),X=a.a3((E+1+N)/Math.pow(2,D)),se=a.a4((z-N)/Math.pow(2,D));return new Ei([j,U],[X,se])})(t.tileID.canonical,b/w);for(let E of n)if(k.intersects(E))return!0;return!1}loaded(){return!this._isUpdatingWorker&&!this._hasPendingWorkerUpdate()}loadTile(t){return a._(this,void 0,void 0,(function*(){let n=t.actor?"RT":"LT";t.actor=this.actor;let u={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};t.abortController=new AbortController;let m=yield this.actor.sendAsync({type:n,data:u},t.abortController);delete t.abortController,t.unloadVectorData(),t.aborted||t.loadVectorData(m,this.map.painter,n==="RT")}))}abortTile(t){return a._(this,void 0,void 0,(function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.aborted=!0}))}unloadTile(t){return a._(this,void 0,void 0,(function*(){t.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data.updateable?{type:"FeatureCollection",features:Array.from(this._data.updateable.values())}:this._data.url||this._data.geojson})}hasTransition(){return!1}}class Ur extends a.E{constructor(t,n,u,m){super(),this.flippedWindingOrder=!1,this.id=t,this.dispatcher=u,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(m),this.options=n}load(t){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{let n=yield Vt.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,n&&n.data&&(this.image=n.data,t&&(this.coordinates=t),this._finishLoading())}catch(n){this._request=null,this._loaded=!0,a.Z(n)||this.fire(new a.k(n))}}))}loaded(){return this._loaded}updateImage(t){return t.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=t.url,this.load(t.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(t){this.coordinates=t;let n=t.map(a.ab.fromLngLat);var u;return this.tileID=(function(m){let b=a.ac.fromPoints(m),w=b.width(),k=b.height(),E=Math.max(w,k),z=Math.max(0,Math.floor(-Math.log(E)/Math.LN2)),D=Math.pow(2,z);return new a.ae(z,Math.floor((b.minX+b.maxX)/2*D),Math.floor((b.minY+b.maxY)/2*D))})(n),this.terrainTileRanges=this._getOverlappingTileRanges(n),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=n.map((m=>this.tileID.getTilePoint(m)._round())),this.flippedWindingOrder=((u=this.tileCoords)[1].x-u[0].x)*(u[2].y-u[0].y)-(u[1].y-u[0].y)*(u[2].x-u[0].x)<0,this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;let t=this.map.painter.context,n=t.gl;this.texture||(this.texture=new a.T(t,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));let u=!1;for(let m in this.tiles){let b=this.tiles[m];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,u=!0)}u&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(t){return a._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={}):t.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(t){let{minX:n,minY:u,maxX:m,maxY:b}=a.ac.fromPoints(t),w={};for(let k=0;k<=a.ad;k++){let E=Math.pow(2,k),z=Math.floor(n*E),D=Math.floor(u*E),N=Math.floor(m*E),j=Math.floor(b*E);w[k]={minTileX:z,minTileY:D,maxTileX:N,maxTileY:j}}return w}}class ke extends Ur{constructor(t,n,u,m){super(t,n,u,m),this.roundZoom=!0,this.type="video",this.options=n}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1;let t=this.options;this.urls=[];for(let n of t.urls)this.urls.push(this.map._requestManager.transformRequest(n,"Source").url);try{let n=yield a.af(this.urls);if(this._loaded=!0,!n)return;this.video=n,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(n){this.fire(new a.k(n))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){let n=this.video.seekable;t<n.start(0)||t>n.end(0)?this.fire(new a.k(new a.ag(`sources.${this.id}`,null,`Playback for this video can be set only between the ${n.start(0)} and ${n.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;let t=this.map.painter.context,n=t.gl;this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new a.T(t,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));let u=!1;for(let m in this.tiles){let b=this.tiles[m];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,u=!0)}u&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Y extends Ur{constructor(t,n,u,m){super(t,n,u,m),n.coordinates?Array.isArray(n.coordinates)&&n.coordinates.length===4&&!n.coordinates.some((b=>!Array.isArray(b)||b.length!==2||b.some((w=>typeof w!="number"))))||this.fire(new a.k(new a.ag(`sources.${t}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.k(new a.ag(`sources.${t}`,null,'missing required property "coordinates"'))),n.animate&&typeof n.animate!="boolean"&&this.fire(new a.k(new a.ag(`sources.${t}`,null,'optional "animate" property must be a boolean value'))),n.canvas?typeof n.canvas=="string"||n.canvas instanceof HTMLCanvasElement||this.fire(new a.k(new a.ag(`sources.${t}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.k(new a.ag(`sources.${t}`,null,'missing required property "canvas"'))),this.options=n,this.animate=n.animate===void 0||n.animate}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;let n=this.map.painter.context,u=n.gl;this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):(this.texture=new a.T(n,this.canvas,u.RGBA,{premultiply:!0}),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let m=!1;for(let b in this.tiles){let w=this.tiles[b];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,m=!0)}m&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",animate:this.animate,canvas:this.options.canvas,coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(let t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}}let H={},re=_=>{switch(_){case"geojson":return bs;case"image":return Ur;case"raster":return $a;case"raster-dem":return Wn;case"vector":return Za;case"video":return ke;case"canvas":return Y}return H[_]},ye="RTLPluginLoaded";class ve extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Ga()}_syncState(t){return this.status=t,this.dispatcher.broadcast("SRPS",{pluginStatus:t,pluginURL:this.url}).catch((n=>{throw this.status="error",n}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(t){return a._(this,arguments,void 0,(function*(n,u=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=ie.resolveURL(n),!this.url)throw new Error(`requested url ${n} is invalid`);if(this.status==="unavailable"){if(!u)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return a._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.l(ye))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Me=null;function Ce(){return Me||(Me=new ve),Me}var we,Oe;(function(_){_[_.Base=0]="Base",_[_.Parent=1]="Parent"})(we||(we={})),(function(_){_[_.Departing=0]="Departing",_[_.Incoming=1]="Incoming"})(Oe||(Oe={}));class Ke{constructor(t,n){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=t,this.uid=a.ah(),this.uses=0,this.tileSize=n,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(t){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(t||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:t,fadingDirection:n,fadingParentID:u,fadeEndTime:m}){this.resetFadeLogic(),this.fadingRole=t,this.fadingDirection=n,this.fadingParentID=u,this.fadeEndTime=m}setSelfFadeLogic(t){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=t}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=ae(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(t){this.demTexture&&t.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(t,n,u){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData,this.latestFeatureIndex.encoding=t.encoding):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData,this.latestFeatureIndex.encoding=this.latestEncoding)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=(function(m,b){let w={};if(!b)return w;for(let k of m){let E=k.layerIds.map((z=>b.getLayer(z))).filter(Boolean);if(E.length!==0){k.layers=E,k.stateDependentLayerIds&&(k.stateDependentLayers=k.stateDependentLayerIds.map((z=>E.filter((D=>D.id===z))[0])));for(let z of E)w[z.id]=k}}return w})(t.buckets,n?.style),this.hasSymbolBuckets=!1;for(let m in this.buckets){let b=this.buckets[m];if(b instanceof a.aj){if(this.hasSymbolBuckets=!0,!u)break;b.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(let m in this.buckets){let b=this.buckets[m];if(b instanceof a.aj&&b.hasRTLText){this.hasRTLText=!0,Ce().lazyLoad();break}}this.queryPadding=0;for(let m in this.buckets){let b=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,n.style.getLayer(m).queryRadius(b))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage),this.dashPositions=t.dashPositions}else this.collisionBoxArray=new a.ai}unloadVectorData(){for(let t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(t){return this.buckets[t.id]}upload(t){for(let u in this.buckets){let m=this.buckets[u];m.uploadPending()&&m.upload(t)}let n=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new a.T(t,this.imageAtlas.image,n.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new a.T(t,this.glyphAtlasImage,n.ALPHA),this.glyphAtlasImage=null)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,n,u,m,b,w,k,E,z,D,N){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:m,cameraQueryGeometry:b,scale:w,tileSize:this.tileSize,pixelPosMatrix:D,transform:E,params:k,queryPadding:this.queryPadding*z,getElevation:N},t,n,u):{}}querySourceFeatures(t,n){let u=this.latestFeatureIndex;if(!u||!u.rawTileData)return;let m=u.loadVTLayers(),b=n&&n.sourceLayer?n.sourceLayer:"",w=m[a.aa]||m[b];if(!w)return;let k=a.ak(n?.filter,n?.globalState),{z:E,x:z,y:D}=this.tileID.canonical,N={z:E,x:z,y:D};for(let j=0;j<w.length;j++){let U=w.feature(j);if(k.needGeometry){let le=a.al(U,!0);if(!k.filter(new a.H(this.tileID.overscaledZ),le,this.tileID.canonical))continue}else if(!k.filter(new a.H(this.tileID.overscaledZ),U))continue;let X=u.getId(U,b),se=new a.am(U,E,z,D,X);se.tile=N,t.push(se)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){let n=this.expirationTime;if(t.cacheControl){let u=a.an(t.cacheControl);u["max-age"]&&(this.expirationTime=Date.now()+1e3*u["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){let u=Date.now(),m=!1;if(this.expirationTime>u)m=!1;else if(n)if(this.expirationTime<n)m=!0;else{let b=this.expirationTime-n;b?this.expirationTime=u+Math.max(b,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(t,n){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(t).length===0)return;let u=this.latestFeatureIndex.loadVTLayers();for(let m in this.buckets){if(!n.style.hasLayer(m))continue;let b=this.buckets[m],w=b.layers[0].sourceLayer||a.aa,k=u[w],E=t[w];if(!k||!E||Object.keys(E).length===0)continue;b.update(E,k,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});let z=n&&n.style&&n.style.getLayer(m);z&&(this.queryPadding=Math.max(this.queryPadding,z.queryRadius(b)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ae()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(t){this.symbolFadeHoldUntil=ae()+t}setDependencies(t,n){let u={};for(let m of n)u[m]=!0;this.dependencies[t]=u}hasDependency(t,n){for(let u of t){let m=this.dependencies[u];if(m){for(let b of n)if(m[b])return!0}}return!1}}class Ue{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,n,u){let m=String(n);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][m]=this.stateChanges[t][m]||{},a.e(this.stateChanges[t][m],u),this.deletedStates[t]===null){this.deletedStates[t]={};for(let b in this.state[t])b!==m&&(this.deletedStates[t][b]=null)}else if(this.deletedStates[t]&&this.deletedStates[t][m]===null){this.deletedStates[t][m]={};for(let b in this.state[t][m])u[b]||(this.deletedStates[t][m][b]=null)}else for(let b in u)this.deletedStates[t]&&this.deletedStates[t][m]&&this.deletedStates[t][m][b]===null&&delete this.deletedStates[t][m][b]}removeFeatureState(t,n,u){if(this.deletedStates[t]===null)return;let m=String(n);if(this.deletedStates[t]=this.deletedStates[t]||{},u&&n!==void 0)this.deletedStates[t][m]!==null&&(this.deletedStates[t][m]=this.deletedStates[t][m]||{},this.deletedStates[t][m][u]=null);else if(n!==void 0)if(this.stateChanges[t]&&this.stateChanges[t][m])for(u in this.deletedStates[t][m]={},this.stateChanges[t][m])this.deletedStates[t][m][u]=null;else this.deletedStates[t][m]=null;else this.deletedStates[t]=null}getState(t,n){let u=String(n),m=a.e({},(this.state[t]||{})[u],(this.stateChanges[t]||{})[u]);if(this.deletedStates[t]===null)return{};if(this.deletedStates[t]){let b=this.deletedStates[t][n];if(b===null)return{};for(let w in b)delete m[w]}return m}initializeTileState(t,n){t.setFeatureState(this.state,n)}coalesceChanges(t,n){let u={};for(let m in this.stateChanges){this.state[m]=this.state[m]||{};let b={};for(let w in this.stateChanges[m])this.state[m][w]||(this.state[m][w]={}),a.e(this.state[m][w],this.stateChanges[m][w]),b[w]=this.state[m][w];u[m]=b}for(let m in this.deletedStates){this.state[m]=this.state[m]||{};let b={};if(this.deletedStates[m]===null)for(let w in this.state[m])b[w]={},this.state[m][w]={};else for(let w in this.deletedStates[m]){if(this.deletedStates[m][w]===null)this.state[m][w]={};else for(let k of Object.keys(this.deletedStates[m][w]))delete this.state[m][w][k];b[w]=this.state[m][w]}u[m]=u[m]||{},a.e(u[m],b)}this.stateChanges={},this.deletedStates={},Object.keys(u).length!==0&&t.setFeatureState(u,n)}}let st=89.25;function ft(_,t){let n=a.ao(t.lat,-a.ap,a.ap);return new a.P(a.Y(t.lng)*_,a.X(n)*_)}function Et(_,t){return new a.ab(t.x/_,t.y/_).toLngLat()}function ui(_){return _.cameraToCenterDistance*Math.min(.85*Math.tan(a.aq(90-_.pitch)),Math.tan(a.aq(st-_.pitch)))}function ai(_,t){let n=_.canonical,u=t/a.ar(n.z),m=n.x+Math.pow(2,n.z)*_.wrap,b=a.as(new Float64Array(16));return a.O(b,b,[m*u,n.y*u,0]),a.Q(b,b,[u/a.a5,u/a.a5,1]),b}function ze(_,t,n,u,m){let b=a.ab.fromLngLat(_,t),w=m*a.at(1,_.lat),{x:k,y:E,z}=vi(n,u);return new a.ab(b.x+w*-k,b.y+w*-E,b.z+w*-z)}function vi(_,t){let n=a.aq(_),u=a.aq(t),m=Math.cos(-n),b=Math.sin(n);return{x:b*Math.sin(u),y:-b*Math.cos(u),z:m}}function yr(_,t,n){let u=t.intersectsFrustum(_);if(!n||u===0)return u;let m=t.intersectsPlane(n);return m===0?0:u===2&&m===2?2:1}function At(_,t,n){let u=0,m=(n-t)/10;for(let b=0;b<10;b++)u+=m*Math.pow(Math.cos(t+(b+.5)/10*(n-t)),_);return u}function hi(_,t){return function(n,u,m,b,w){let k=2*((_-1)/a.au(Math.cos(a.aq(st-w))/Math.cos(a.aq(st)))-1),E=Math.acos(m/b),z=2*At(k-1,0,a.aq(w/2)),D=Math.min(a.aq(st),E+a.aq(w/2)),N=At(k-1,Math.min(D,E-a.aq(w/2)),D),j=Math.atan(u/m),U=Math.hypot(u,m),X=n;return X+=a.au(b/U/Math.max(.5,Math.cos(a.aq(w/2)))),X+=k*a.au(Math.cos(j))/2,X-=a.au(Math.max(1,N/z/t))/2,X}}let _r=hi(9.314,3);function bi(_,t){let n=(t.roundZoom?Math.round:Math.floor)(_.zoom+a.au(_.tileSize/t.tileSize));return Math.max(0,n)}function Ni(_,t){let n=_.getCameraFrustum(),u=_.getClippingPlane(),m=_.screenPointToMercatorCoordinate(_.getCameraPoint()),b=a.ab.fromLngLat(_.center,_.elevation);m.z=b.z+Math.cos(_.pitchInRadians)*_.cameraToCenterDistance/_.worldSize;let w=_.getCoveringTilesDetailsProvider(),k=w.allowVariableZoom(_,t),E=bi(_,t),z=t.minzoom||0,D=t.maxzoom!==void 0?t.maxzoom:_.maxZoom,N=Math.min(Math.max(0,E),D),j=Math.pow(2,N),U=[j*m.x,j*m.y,0],X=[j*b.x,j*b.y,0],se=Math.hypot(b.x-m.x,b.y-m.y),le=Math.abs(b.z-m.z),oe=Math.hypot(se,le),ce=ge=>({zoom:0,x:0,y:0,wrap:ge,fullyVisible:!1}),me=[],he=[];if(_.renderWorldCopies&&w.allowWorldCopies())for(let ge=1;ge<=3;ge++)me.push(ce(-ge)),me.push(ce(ge));for(me.push(ce(0));me.length>0;){let ge=me.pop(),be=ge.x,pe=ge.y,Se=ge.fullyVisible,De={x:be,y:pe,z:ge.zoom},Ie=w.getTileBoundingVolume(De,ge.wrap,_.elevation,t);if(!Se){let et=yr(n,Ie,u);if(et===0)continue;Se=et===2}let Le=w.distanceToTile2d(m.x,m.y,De,Ie),Fe=E;k&&(Fe=(t.calculateTileZoom||_r)(_.zoom+a.au(_.tileSize/t.tileSize),Le,le,oe,_.fov)),Fe=(t.roundZoom?Math.round:Math.floor)(Fe),Fe=Math.max(0,Fe);let Xe=Math.min(Fe,D);if(ge.wrap=w.getWrap(b,De,ge.wrap),ge.zoom>=Xe){if(ge.zoom<z)continue;let et=N-ge.zoom,He=U[0]-.5-(be<<et),pt=U[1]-.5-(pe<<et),zt=t.reparseOverscaled?Math.max(ge.zoom,Fe):ge.zoom;he.push({tileID:new a.a2(ge.zoom===D?zt:ge.zoom,ge.wrap,ge.zoom,be,pe),distanceSq:a.av([X[0]-.5-be,X[1]-.5-pe]),tileDistanceToCamera:Math.sqrt(He*He+pt*pt)})}else for(let et=0;et<4;et++)me.push({zoom:ge.zoom+1,x:(be<<1)+et%2,y:(pe<<1)+(et>>1),wrap:ge.wrap,fullyVisible:Se})}return he.sort(((ge,be)=>ge.distanceSq-be.distanceSq)).map((ge=>ge.tileID))}let xi=a.ac.fromPoints([new a.P(0,0),new a.P(a.a5,a.a5)]);function ir(_){return _==="raster"||_==="image"||_==="video"}function Qs(_,t,n,u,m,b,w){if(!t.hasData())return!1;let{tileID:k,fadingRole:E,fadingDirection:z,fadingParentID:D}=t;if(E===we.Base&&z===Oe.Incoming&&D)return n[D.key]=D,!0;let N=Math.max(k.overscaledZ-m,b);for(let j=k.overscaledZ-1;j>=N;j--){let U=k.scaledTo(j),X=_.getLoadedTile(U);if(X)return t.setCrossFadeLogic({fadingRole:we.Base,fadingDirection:Oe.Incoming,fadingParentID:X.tileID,fadeEndTime:u+w}),X.setCrossFadeLogic({fadingRole:we.Parent,fadingDirection:Oe.Departing,fadeEndTime:u+w}),n[U.key]=U,!0}return!1}function Zr(_,t,n,u,m,b){if(!t.hasData())return!1;let w=t.tileID.children(m),k=Re(_,t,w,n,u,m,b);if(k)return!0;for(let E of w)Re(_,t,E.children(m),n,u,m,b)&&(k=!0);return k}function Re(_,t,n,u,m,b,w){if(n[0].overscaledZ>=b)return!1;let k=!1;for(let E of n){let z=_.getLoadedTile(E);if(!z)continue;let{fadingRole:D,fadingDirection:N,fadingParentID:j}=z;D===we.Base&&N===Oe.Departing&&j||(z.setCrossFadeLogic({fadingRole:we.Base,fadingDirection:Oe.Departing,fadingParentID:t.tileID,fadeEndTime:m+w}),t.setCrossFadeLogic({fadingRole:we.Parent,fadingDirection:Oe.Incoming,fadeEndTime:m+w})),u[E.key]=E,k=!0}return k}function Cr(_,t,n,u){let m=_.tileID;return!!_.selfFading||!_.hasData()&&!!t.has(m)&&(_.setSelfFadeLogic(n+u),!0)}function kr(_,t){var n;_.needsHillshadePrepare=!0,_.needsTerrainPrepare=!0;let u=t.tileID.canonical.x-_.tileID.canonical.x,m=t.tileID.canonical.y-_.tileID.canonical.y,b=Math.pow(2,_.tileID.canonical.z),w=t.tileID.key;u===0&&m===0||Math.abs(m)>1||(Math.abs(u)>1&&(Math.abs(u+b)===1?u+=b:Math.abs(u-b)===1&&(u-=b)),t.dem&&_.dem&&(_.dem.backfillBorder(t.dem,u,m),!((n=_.neighboringTiles)===null||n===void 0)&&n[w]&&(_.neighboringTiles[w].backfilled=!0)))}class eo{constructor(){this._tiles={}}handleWrapJump(t){let n={};for(let u in this._tiles){let m=this._tiles[u];m.tileID=m.tileID.unwrapTo(m.tileID.wrap+t),n[m.tileID.key]=m}this._tiles=n}setFeatureState(t,n){for(let u in this._tiles)this._tiles[u].setFeatureState(t,n)}getAllTiles(){return Object.values(this._tiles)}getAllIds(t=!1){return t?Object.values(this._tiles).map((n=>n.tileID)).sort(a.ax).map((n=>n.key)):Object.keys(this._tiles)}getTileById(t){return this._tiles[t]}setTile(t,n){this._tiles[t]=n}deleteTileById(t){delete this._tiles[t]}getLoadedTile(t){let n=this.getTileById(t.key);return n?.hasData()?n:null}isIdRenderable(t,n=!1){var u;return(u=this.getTileById(t))===null||u===void 0?void 0:u.isRenderable(n)}getRenderableIds(t=0,n){let u=[];for(let m of this.getAllIds())this.isIdRenderable(m,n)&&u.push(this.getTileById(m));return n?u.sort(((m,b)=>{let w=m.tileID,k=b.tileID,E=new a.P(w.canonical.x,w.canonical.y)._rotate(-t),z=new a.P(k.canonical.x,k.canonical.y)._rotate(-t);return w.overscaledZ-k.overscaledZ||z.y-E.y||z.x-E.x})).map((m=>m.tileID.key)):u.map((m=>m.tileID)).sort(a.ax).map((m=>m.key))}}class sn extends a.E{constructor(t,n,u){super(),this.id=t,this.dispatcher=u,this.on("data",(m=>this._dataHandler(m))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((m,b,w,k)=>{let E=new(re(b.type))(m,b,w,k);if(E.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${E.id}`);return E})(t,n,u,this),this._inViewTiles=new eo,this._outOfViewCache=new a.ay(0,(m=>this._unloadTile(m))),this._timers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new Ue,this._didEmitContent=!1,this._updated=!1}onAdd(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._maxTileCacheZoomLevels=t?t._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(t)}onRemove(t){for(let n of this._inViewTiles.getAllTiles())n.unloadVectorData();this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(t),this._inViewTiles=new eo}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(let t of this._inViewTiles.getAllTiles())if(t.state!=="loaded"&&t.state!=="errored")return!1;return!0}getSource(){return this._source}getState(){return this._state}pause(){this._paused=!0}resume(){if(!this._paused)return;let t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(t,n,u){return a._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(t),this._tileLoaded(t,n,u)}catch(m){t.state="errored",m.status!==404?this._source.fire(new a.k(m,{tile:t})):this.update(this.transform,this.terrain)}}))}_unloadTile(t){this._source.unloadTile&&this._source.unloadTile(t)}_abortTile(t){this._source.abortTile&&this._source.abortTile(t),this._source.fire(new a.l("dataabort",{tile:t,coord:t.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._inViewTiles,this.map?this.map.painter:null);for(let n of this._inViewTiles.getAllTiles())n.upload(t),n.prepare(this.map.style.imageManager)}getIds(){return this._inViewTiles.getAllIds(!0)}getRenderableIds(t){var n;return this._inViewTiles.getRenderableIds((n=this.transform)===null||n===void 0?void 0:n.bearingInRadians,t)}hasRenderableParent(t){let n=t.overscaledZ-1;if(n>=this._source.minzoom){let u=this.getLoadedTile(t.scaledTo(n));if(u)return this._inViewTiles.isIdRenderable(u.tileID.key)}return!1}reload(t,n=void 0){if(this._paused)this._shouldReloadOnResume=!0;else{this._outOfViewCache.reset();for(let u of this._inViewTiles.getAllIds()){let m=this._inViewTiles.getTileById(u);n&&!this._source.shouldReloadTile(m,n)||(t?this._reloadTile(u,"expired"):m.state!=="errored"&&this._reloadTile(u,"reloading"))}}}_reloadTile(t,n){return a._(this,void 0,void 0,(function*(){let u=this._inViewTiles.getTileById(t);u&&(u.state!=="loading"&&(u.state=n),yield this._loadTile(u,t,n))}))}_tileLoaded(t,n,u){t.timeAdded=ae(),t.selfFading&&(t.fadeEndTime=t.timeAdded+this._rasterFadeDuration),u==="expired"&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(n,t),this.getSource().type==="raster-dem"&&t.dem&&(function(m,b){var w,k;let E=b.getRenderableIds();for(let z of E){if(!m.neighboringTiles||!m.neighboringTiles[z])continue;let D=b.getTileById(z);m.neighboringTiles[z].backfilled||kr(m,D),!((k=(w=D.neighboringTiles)===null||w===void 0?void 0:w[m.tileID.key])===null||k===void 0)&&k.backfilled||kr(D,m)}})(t,this._inViewTiles),this._state.initializeTileState(t,this.map?this.map.painter:null),t.aborted||this._source.fire(new a.l("data",{dataType:"source",tile:t,coord:t.tileID}))}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._inViewTiles.getTileById(t)}_retainLoadedChildren(t,n){let u=this._getLoadedDescendents(n),m=new Set;for(let b of n){let w=u[b.key];if(!w?.length){m.add(b);continue}let k=b.overscaledZ+sn.maxOverzooming,E=w.filter((N=>N.tileID.overscaledZ<=k));if(!E.length){m.add(b);continue}let z=Math.min(...E.map((N=>N.tileID.overscaledZ))),D=E.filter((N=>N.tileID.overscaledZ===z)).map((N=>N.tileID));for(let N of D)t[N.key]=N;this._areDescendentsComplete(D,z,b.overscaledZ)||m.add(b)}return m}_getLoadedDescendents(t){var n;let u={};for(let m of this._inViewTiles.getAllTiles().filter((b=>b.hasData())))for(let b of t)m.tileID.isChildOf(b)&&(u[n=b.key]||(u[n]=[])).push(m);return u}_areDescendentsComplete(t,n,u){return t.length===1&&t[0].isOverscaled()?t[0].overscaledZ===n:Math.pow(4,n-u)===t.length}getLoadedTile(t){return this._inViewTiles.getLoadedTile(t)}updateCacheSize(t){let n=Math.ceil(t.width/this._source.tileSize)+1,u=Math.ceil(t.height/this._source.tileSize)+1,m=Math.floor(n*u*(this._maxTileCacheZoomLevels===null?a.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,m):m;this._outOfViewCache.setMaxSize(b)}handleWrapJump(t){let n=Math.round((t-(this._prevLng===void 0?t:this._prevLng))/360);this._prevLng=t,n&&(this._inViewTiles.handleWrapJump(n),this._resetTileReloadTimers())}update(t,n){if(!this._sourceLoaded||this._paused)return;let u;this.transform=t,this.terrain=n,this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?u=t.getVisibleUnwrappedCoordinates(this._source.tileID).map((E=>new a.a2(E.canonical.z,E.wrap,E.canonical.z,E.canonical.x,E.canonical.y))):(u=Ni(t,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.type==="vector"&&this.map._zoomLevelsToOverscale!==void 0?t.maxZoom-this.map._zoomLevelsToOverscale:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:n,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(u=u.filter((E=>this._source.hasTile(E))))):u=[],this.usedForTerrain&&(u=this._addTerrainIdealTiles(u));let m=u.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,m&&this.fire(new a.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));let b=bi(t,this._source),w=this._updateRetainedTiles(u,b),k=ir(this._source.type);k&&this._rasterFadeDuration>0&&!n&&(function(E,z,D,N,j,U,X){let se=ae(),le=a.aw(z);for(let oe of z){let ce=E.getTileById(oe.key);ce.fadingDirection!==Oe.Departing&&ce.fadeOpacity!==0||ce.resetFadeLogic(),Qs(E,ce,D,se,N,j,X)||Zr(E,ce,D,se,U,X)||Cr(ce,le,se,X)||ce.resetFadeLogic()}})(this._inViewTiles,u,w,this._maxFadingAncestorLevels,this._source.minzoom,this._source.maxzoom,this._rasterFadeDuration),k?this._cleanUpRasterTiles(w):this._cleanUpVectorTiles(w)}_cleanUpRasterTiles(t){for(let n of this._inViewTiles.getAllIds())t[n]||this._removeTile(n)}_cleanUpVectorTiles(t){for(let n of this._inViewTiles.getAllIds()){let u=this._inViewTiles.getTileById(n);t[n]?u.clearSymbolFadeHold():u.hasSymbolBuckets?u.holdingForSymbolFade()?u.symbolFadeFinished()&&this._removeTile(n):u.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(n)}}_addTerrainIdealTiles(t){let n=[];for(let u of t)if(u.canonical.z>this._source.minzoom){let m=u.scaledTo(u.canonical.z-1);n.push(m);let b=u.scaledTo(Math.max(this._source.minzoom,Math.min(u.canonical.z,5)));n.push(b)}return t.concat(n)}releaseSymbolFadeTiles(){for(let t of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(t).holdingForSymbolFade()&&this._removeTile(t)}_updateRetainedTiles(t,n){var u;let m=new Set;for(let z of t)this._addTile(z).hasData()||m.add(z);let b=t.reduce(((z,D)=>(z[D.key]=D,z)),{}),w=this._retainLoadedChildren(b,m),k={},E=Math.max(n-sn.maxUnderzooming,this._source.minzoom);for(let z of w){let D=this._inViewTiles.getTileById(z.key),N=D?.wasRequested();for(let j=z.overscaledZ-1;j>=E;--j){let U=z.scaledTo(j);if(k[U.key])break;if(k[U.key]=!0,D=this.getTile(U),!D&&N&&(D=this._addTile(U)),D){let X=D.hasData();if((X||!(!((u=this.map)===null||u===void 0)&&u.cancelPendingTileRequestsWhileZooming)||N)&&(b[U.key]=U),N=D.wasRequested(),X)break}}}return b}_addTile(t){let n=this._inViewTiles.getTileById(t.key);if(n)return n;n=this._outOfViewCache.getAndRemove(t),n&&(n.resetFadeLogic(),this._setTileReloadTimer(t.key,n),n.tileID=t,this._state.initializeTileState(n,this.map?this.map.painter:null));let u=n;return n||(n=new Ke(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(n,t.key,n.state)),n.uses++,this._inViewTiles.setTile(t.key,n),u||this._source.fire(new a.l("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n}_setTileReloadTimer(t,n){this._clearTileReloadTimer(t);let u=n.getExpiryTimeout();u&&(this._timers[t]=setTimeout((()=>{this._reloadTile(t,"expired"),delete this._timers[t]}),u))}_clearTileReloadTimer(t){let n=this._timers[t];n&&(clearTimeout(n),delete this._timers[t])}_resetTileReloadTimers(){for(let t in this._timers)clearTimeout(this._timers[t]),delete this._timers[t];for(let t of this._inViewTiles.getAllIds()){let n=this._inViewTiles.getTileById(t);this._setTileReloadTimer(t,n)}}refreshTiles(t){for(let n of this._inViewTiles.getAllIds()){let u=this._inViewTiles.getTileById(n);(this._inViewTiles.isIdRenderable(n)||u.state=="errored")&&t.some((m=>m.equals(u.tileID.canonical)))&&this._reloadTile(n,"expired")}}_removeTile(t){let n=this._inViewTiles.getTileById(t);n&&(n.uses--,this._inViewTiles.deleteTileById(t),this._clearTileReloadTimer(t),n.uses>0||(n.hasData()&&n.state!=="reloading"?this._outOfViewCache.add(n.tileID,n,n.getExpiryTimeout()):(n.aborted=!0,this._abortTile(n),this._unloadTile(n))))}_dataHandler(t){t.dataType==="source"&&(t.sourceDataType!=="metadata"?t.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(t.sourceDataChanged,t.shouldReloadTileOptions),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(let t of this._inViewTiles.getAllIds())this._removeTile(t);this._outOfViewCache.reset()}tilesIn(t,n,u){let m=[],b=this.transform;if(!b)return m;let w=b.getCoveringTilesDetailsProvider().allowWorldCopies(),k=u?b.getCameraQueryGeometry(t):t,E=U=>b.screenPointToMercatorCoordinate(U,this.terrain),z=this.transformBbox(t,E,!w),D=this.transformBbox(k,E,!w),N=this.getIds(),j=a.ac.fromPoints(D);for(let U=0;U<N.length;U++){let X=this._inViewTiles.getTileById(N[U]);if(X.holdingForSymbolFade())continue;let se=w?[X.tileID]:[X.tileID.unwrapTo(-1),X.tileID.unwrapTo(0)],le=Math.pow(2,b.zoom-X.tileID.overscaledZ),oe=n*X.queryPadding*a.a5/X.tileSize/le;for(let ce of se){let me=j.map((he=>ce.getTilePoint(new a.ab(he.x,he.y))));if(me.expandBy(oe),me.intersects(xi)){let he=z.map((be=>ce.getTilePoint(be))),ge=D.map((be=>ce.getTilePoint(be)));m.push({tile:X,tileID:w?ce:ce.unwrapTo(0),queryGeometry:he,cameraQueryGeometry:ge,scale:le})}}}return m}transformBbox(t,n,u){let m=t.map(n);if(u){let b=a.ac.fromPoints(t);b.shrinkBy(.001*Math.min(b.width(),b.height()));let w=b.map(n);a.ac.fromPoints(m).covers(w)||(m=m.map((k=>k.x>.5?new a.ab(k.x-1,k.y,k.z):k)))}return m}getVisibleCoordinates(t){let n=this.getRenderableIds(t).map((u=>this._inViewTiles.getTileById(u).tileID));return this.transform&&this.transform.populateCache(n),n}hasTransition(){return!!this._source.hasTransition()||!(!ir(this._source.type)||!(function(t,n){if(n<=0)return!1;let u=ae();for(let m of t.getAllTiles())if(m.fadeEndTime>=u)return!0;return!1})(this._inViewTiles,this._rasterFadeDuration))}setRasterFadeDuration(t){this._rasterFadeDuration=t}setFeatureState(t,n,u){this._state.updateState(t=t||a.aa,n,u)}removeFeatureState(t,n,u){this._state.removeFeatureState(t=t||a.aa,n,u)}getFeatureState(t,n){return this._state.getState(t=t||a.aa,n)}setDependencies(t,n,u){let m=this._inViewTiles.getTileById(t);m&&m.setDependencies(n,u)}reloadTilesForDependencies(t,n){for(let u of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(u).hasDependency(t,n)&&this._reloadTile(u,"reloading");this._outOfViewCache.filter((u=>!u.hasDependency(t,n)))}areTilesLoaded(){for(let t of this._inViewTiles.getAllTiles())if(t.state!=="loaded"&&t.state!=="errored")return!1;return!0}}sn.maxUnderzooming=10,sn.maxOverzooming=3;class it{constructor(t,n){this.reset(t,n)}reset(t,n){this.points=t||[],this._distances=[0];for(let u=1;u<this.points.length;u++)this._distances[u]=this._distances[u-1]+this.points[u].dist(this.points[u-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(n||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(this.points.length===1)return this.points[0];t=a.ao(t,0,1);let n=1,u=this._distances[n],m=t*this.paddedLength+this.padding;for(;u<m&&n<this._distances.length;)u=this._distances[++n];let b=n-1,w=this._distances[b],k=u-w,E=k>0?(m-w)/k:0;return this.points[b].mult(1-E).add(this.points[n].mult(E))}}function jt(_,t){let n=!0;return _==="always"||_!=="never"&&t!=="never"||(n=!1),n}class It{constructor(t,n,u){let m=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(t/u),this.yCellCount=Math.ceil(n/u);for(let w=0;w<this.xCellCount*this.yCellCount;w++)m.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=n,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/n,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,n,u,m,b){this._forEachCell(n,u,m,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(n),this.bboxes.push(u),this.bboxes.push(m),this.bboxes.push(b)}insertCircle(t,n,u,m){this._forEachCell(n-m,u-m,n+m,u+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(n),this.circles.push(u),this.circles.push(m)}_insertBoxCell(t,n,u,m,b,w){this.boxCells[b].push(w)}_insertCircleCell(t,n,u,m,b,w){this.circleCells[b].push(w)}_query(t,n,u,m,b,w,k){if(u<0||t>this.width||m<0||n>this.height)return[];let E=[];if(t<=0&&n<=0&&this.width<=u&&this.height<=m){if(b)return[{key:null,x1:t,y1:n,x2:u,y2:m}];for(let z=0;z<this.boxKeys.length;z++)E.push({key:this.boxKeys[z],x1:this.bboxes[4*z],y1:this.bboxes[4*z+1],x2:this.bboxes[4*z+2],y2:this.bboxes[4*z+3]});for(let z=0;z<this.circleKeys.length;z++){let D=this.circles[3*z],N=this.circles[3*z+1],j=this.circles[3*z+2];E.push({key:this.circleKeys[z],x1:D-j,y1:N-j,x2:D+j,y2:N+j})}}else this._forEachCell(t,n,u,m,this._queryCell,E,{hitTest:b,overlapMode:w,seenUids:{box:{},circle:{}}},k);return E}query(t,n,u,m){return this._query(t,n,u,m,!1,null)}hitTest(t,n,u,m,b,w){return this._query(t,n,u,m,!0,b,w).length>0}hitTestCircle(t,n,u,m,b){let w=t-u,k=t+u,E=n-u,z=n+u;if(k<0||w>this.width||z<0||E>this.height)return!1;let D=[];return this._forEachCell(w,E,k,z,this._queryCellCircle,D,{hitTest:!0,overlapMode:m,circle:{x:t,y:n,radius:u},seenUids:{box:{},circle:{}}},b),D.length>0}_queryCell(t,n,u,m,b,w,k,E){let{seenUids:z,hitTest:D,overlapMode:N}=k,j=this.boxCells[b];if(j!==null){let X=this.bboxes;for(let se of j)if(!z.box[se]){z.box[se]=!0;let le=4*se,oe=this.boxKeys[se];if(t<=X[le+2]&&n<=X[le+3]&&u>=X[le+0]&&m>=X[le+1]&&(!E||E(oe))&&(!D||!jt(N,oe.overlapMode))&&(w.push({key:oe,x1:X[le],y1:X[le+1],x2:X[le+2],y2:X[le+3]}),D))return!0}}let U=this.circleCells[b];if(U!==null){let X=this.circles;for(let se of U)if(!z.circle[se]){z.circle[se]=!0;let le=3*se,oe=this.circleKeys[se];if(this._circleAndRectCollide(X[le],X[le+1],X[le+2],t,n,u,m)&&(!E||E(oe))&&(!D||!jt(N,oe.overlapMode))){let ce=X[le],me=X[le+1],he=X[le+2];if(w.push({key:oe,x1:ce-he,y1:me-he,x2:ce+he,y2:me+he}),D)return!0}}}return!1}_queryCellCircle(t,n,u,m,b,w,k,E){let{circle:z,seenUids:D,overlapMode:N}=k,j=this.boxCells[b];if(j!==null){let X=this.bboxes;for(let se of j)if(!D.box[se]){D.box[se]=!0;let le=4*se,oe=this.boxKeys[se];if(this._circleAndRectCollide(z.x,z.y,z.radius,X[le+0],X[le+1],X[le+2],X[le+3])&&(!E||E(oe))&&!jt(N,oe.overlapMode))return w.push(!0),!0}}let U=this.circleCells[b];if(U!==null){let X=this.circles;for(let se of U)if(!D.circle[se]){D.circle[se]=!0;let le=3*se,oe=this.circleKeys[se];if(this._circlesCollide(X[le],X[le+1],X[le+2],z.x,z.y,z.radius)&&(!E||E(oe))&&!jt(N,oe.overlapMode))return w.push(!0),!0}}}_forEachCell(t,n,u,m,b,w,k,E){let z=this._convertToXCellCoord(t),D=this._convertToYCellCoord(n),N=this._convertToXCellCoord(u),j=this._convertToYCellCoord(m);for(let U=z;U<=N;U++)for(let X=D;X<=j;X++)if(b.call(this,t,n,u,m,this.xCellCount*X+U,w,k,E))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,n,u,m,b,w){let k=m-t,E=b-n,z=u+w;return z*z>k*k+E*E}_circleAndRectCollide(t,n,u,m,b,w,k){let E=(w-m)/2,z=Math.abs(t-(m+E));if(z>E+u)return!1;let D=(k-b)/2,N=Math.abs(n-(b+D));if(N>D+u)return!1;if(z<=E||N<=D)return!0;let j=z-E,U=N-D;return j*j+U*U<=u*u}}function $r(_,t,n){let u=a.N();if(!_){let{vecSouth:N,vecEast:j}=ra(t),U=M();U[0]=j[0],U[1]=j[1],U[2]=N[0],U[3]=N[1],m=U,(D=(w=(b=U)[0])*(z=b[3])-(E=b[2])*(k=b[1]))&&(m[0]=z*(D=1/D),m[1]=-k*D,m[2]=-E*D,m[3]=w*D),u[0]=U[0],u[1]=U[1],u[4]=U[2],u[5]=U[3]}var m,b,w,k,E,z,D;return a.Q(u,u,[1/n,1/n,1]),u}function Wo(_,t,n,u){if(_){let m=a.N();if(!t){let{vecSouth:b,vecEast:w}=ra(n);m[0]=w[0],m[1]=w[1],m[4]=b[0],m[5]=b[1]}return a.Q(m,m,[u,u,1]),m}return n.pixelsToClipSpaceMatrix}function ra(_){let t=Math.cos(_.rollInRadians),n=Math.sin(_.rollInRadians),u=Math.cos(_.pitchInRadians),m=Math.cos(_.bearingInRadians),b=Math.sin(_.bearingInRadians),w=a.aD();w[0]=-m*u*n-b*t,w[1]=-b*u*n+m*t;let k=a.aE(w);k<1e-9?a.aF(w):a.aG(w,w,1/k);let E=a.aD();E[0]=m*u*t-b*n,E[1]=b*u*t+m*n;let z=a.aE(E);return z<1e-9?a.aF(E):a.aG(E,E,1/z),{vecEast:E,vecSouth:w}}function Dt(_,t,n,u){let m;u?(m=[_,t,u(_,t),1],a.aI(m,m,n)):(m=[_,t,0,1],Ya(m,m,n));let b=m[3];return{point:new a.P(m[0]/b,m[1]/b),signedDistanceFromCamera:b,isOccluded:!1}}function to(_,t){return .5+_/t*.5}function xs(_,t){return _.x>=-t[0]&&_.x<=t[0]&&_.y>=-t[1]&&_.y<=t[1]}function Go(_,t,n,u,m,b,w,k,E,z,D,N,j){let U=n?_.textSizeData:_.iconSizeData,X=a.az(U,t.transform.zoom),se=[256/t.width*2+1,256/t.height*2+1],le=n?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;le.clear();let oe=_.lineVertexArray,ce=n?_.text.placedSymbolArray:_.icon.placedSymbolArray,me=t.transform.width/t.transform.height,he=!1;for(let ge=0;ge<ce.length;ge++){let be=ce.get(ge);if(be.hidden||be.writingMode===a.aA.vertical&&!he){mi(be.numGlyphs,le);continue}he=!1;let pe=new a.P(be.anchorX,be.anchorY),Se={getElevation:j,pitchedLabelPlaneMatrix:u,lineVertexArray:oe,pitchWithMap:b,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:t.transform,tileAnchorPoint:pe,unwrappedTileID:E,width:z,height:D,translation:N},De=Gn(be.anchorX,be.anchorY,Se);if(!xs(De.point,se)){mi(be.numGlyphs,le);continue}let Ie=to(t.transform.cameraToCenterDistance,De.signedDistanceFromCamera),Le=a.aB(U,X,be),Fe=b?Le*t.transform.getPitchedTextCorrection(be.anchorX,be.anchorY,E)/Ie:Le*Ie,Xe=ws({projectionContext:Se,pitchedLabelPlaneMatrixInverse:m,symbol:be,fontSize:Fe,flip:!1,keepUpright:w,glyphOffsetArray:_.glyphOffsetArray,dynamicLayoutVertexArray:le,aspectRatio:me,rotateToLine:k});he=Xe.useVertical,(Xe.notEnoughRoom||he||Xe.needsFlipping&&ws({projectionContext:Se,pitchedLabelPlaneMatrixInverse:m,symbol:be,fontSize:Fe,flip:!0,keepUpright:w,glyphOffsetArray:_.glyphOffsetArray,dynamicLayoutVertexArray:le,aspectRatio:me,rotateToLine:k}).notEnoughRoom)&&mi(be.numGlyphs,le)}n?_.text.dynamicLayoutVertexBuffer.updateData(le):_.icon.dynamicLayoutVertexBuffer.updateData(le)}function na(_,t,n,u,m,b,w,k){let E=b.glyphStartIndex+b.numGlyphs,z=b.lineStartIndex,D=b.lineStartIndex+b.lineLength,N=t.getoffsetX(b.glyphStartIndex),j=t.getoffsetX(E-1),U=Fr(_*N,n,u,m,b.segment,z,D,k,w);if(!U)return null;let X=Fr(_*j,n,u,m,b.segment,z,D,k,w);return X?k.projectionCache.anyProjectionOccluded?null:{first:U,last:X}:null}function io(_,t,n,u){return _===a.aA.horizontal&&Math.abs(n.y-t.y)>Math.abs(n.x-t.x)*u?{useVertical:!0}:(_===a.aA.vertical?t.y<n.y:t.x>n.x)?{needsFlipping:!0}:null}function ws(_){let{projectionContext:t,pitchedLabelPlaneMatrixInverse:n,symbol:u,fontSize:m,flip:b,keepUpright:w,glyphOffsetArray:k,dynamicLayoutVertexArray:E,aspectRatio:z,rotateToLine:D}=_,N=m/24,j=u.lineOffsetX*N,U=u.lineOffsetY*N,X;if(u.numGlyphs>1){let se=u.glyphStartIndex+u.numGlyphs,le=u.lineStartIndex,oe=u.lineStartIndex+u.lineLength,ce=na(N,k,j,U,b,u,D,t);if(!ce)return{notEnoughRoom:!0};let me=Ss(ce.first.point.x,ce.first.point.y,t,n),he=Ss(ce.last.point.x,ce.last.point.y,t,n);if(w&&!b){let ge=io(u.writingMode,me,he,z);if(ge)return ge}X=[ce.first];for(let ge=u.glyphStartIndex+1;ge<se-1;ge++){let be=Fr(N*k.getoffsetX(ge),j,U,b,u.segment,le,oe,t,D);if(!be)return{notEnoughRoom:!0};X.push(be)}X.push(ce.last)}else{if(w&&!b){let le=di(t.tileAnchorPoint.x,t.tileAnchorPoint.y,t).point,oe=u.lineStartIndex+u.segment+1,ce=new a.P(t.lineVertexArray.getx(oe),t.lineVertexArray.gety(oe)),me=di(ce.x,ce.y,t),he=me.signedDistanceFromCamera>0?me.point:ro(t.tileAnchorPoint,ce,le,1,t),ge=Ss(le.x,le.y,t,n),be=Ss(he.x,he.y,t,n),pe=io(u.writingMode,ge,be,z);if(pe)return pe}let se=Fr(N*k.getoffsetX(u.glyphStartIndex),j,U,b,u.segment,u.lineStartIndex,u.lineStartIndex+u.lineLength,t,D);if(!se||t.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};X=[se]}for(let se of X)a.aH(E,se.point,se.angle);return{}}function ro(_,t,n,u,m){let b=_.add(_.sub(t)._unit()),w=di(b.x,b.y,m).point,k=n.sub(w);return n.add(k._mult(u/k.mag()))}function Br(_,t,n){let u=t.projectionCache;if(u.projections[_])return u.projections[_];let m=new a.P(t.lineVertexArray.getx(_),t.lineVertexArray.gety(_)),b=di(m.x,m.y,t);if(b.signedDistanceFromCamera>0)return u.projections[_]=b.point,u.anyProjectionOccluded=u.anyProjectionOccluded||b.isOccluded,b.point;let w=_-n.direction;return ro(n.distanceFromAnchor===0?t.tileAnchorPoint:new a.P(t.lineVertexArray.getx(w),t.lineVertexArray.gety(w)),m,n.previousVertex,n.absOffsetX-n.distanceFromAnchor+1,t)}function di(_,t,n){let u=_+n.translation[0],m=t+n.translation[1],b;return n.pitchWithMap?(b=Dt(u,m,n.pitchedLabelPlaneMatrix,n.getElevation),b.isOccluded=!1):(b=n.transform.projectTileCoordinates(u,m,n.unwrappedTileID,n.getElevation),b.point.x=(.5*b.point.x+.5)*n.width,b.point.y=(.5*-b.point.y+.5)*n.height),b}function Ss(_,t,n,u){if(n.pitchWithMap){let m=[_,t,0,1];return a.aI(m,m,u),n.transform.projectTileCoordinates(m[0]/m[3],m[1]/m[3],n.unwrappedTileID,n.getElevation).point}return{x:_/n.width*2-1,y:1-t/n.height*2}}function Gn(_,t,n){return n.transform.projectTileCoordinates(_,t,n.unwrappedTileID,n.getElevation)}function Ts(_,t,n){return _._unit()._perp()._mult(t*n)}function Ta(_,t,n,u,m,b,w,k,E){if(k.projectionCache.offsets[_])return k.projectionCache.offsets[_];let z=n.add(t);if(_+E.direction<u||_+E.direction>=m)return k.projectionCache.offsets[_]=z,z;let D=Br(_+E.direction,k,E),N=Ts(D.sub(n),w,E.direction),j=n.add(N),U=D.add(N);return k.projectionCache.offsets[_]=a.aJ(b,z,j,U)||z,k.projectionCache.offsets[_]}function Fr(_,t,n,u,m,b,w,k,E){let z=u?_-t:_+t,D=z>0?1:-1,N=0;u&&(D*=-1,N=Math.PI),D<0&&(N+=Math.PI);let j,U=D>0?b+m:b+m+1;k.projectionCache.cachedAnchorPoint?j=k.projectionCache.cachedAnchorPoint:(j=di(k.tileAnchorPoint.x,k.tileAnchorPoint.y,k).point,k.projectionCache.cachedAnchorPoint=j);let X,se,le=j,oe=j,ce=0,me=0,he=Math.abs(z),ge=[],be;for(;ce+me<=he;){if(U+=D,U<b||U>=w)return null;ce+=me,oe=le,se=X;let De={absOffsetX:he,direction:D,distanceFromAnchor:ce,previousVertex:oe};if(le=Br(U,k,De),n===0)ge.push(oe),be=le.sub(oe);else{let Ie,Le=le.sub(oe);Ie=Le.mag()===0?Ts(Br(U+D,k,De).sub(le),n,D):Ts(Le,n,D),se||(se=oe.add(Ie)),X=Ta(U,Ie,le,b,w,se,n,k,De),ge.push(se),be=X.sub(se)}me=be.mag()}let pe=be._mult((he-ce)/me)._add(se||oe),Se=N+Math.atan2(le.y-oe.y,le.x-oe.x);return ge.push(pe),{point:pe,angle:E?Se:0,path:ge}}let oi=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function mi(_,t){for(let n=0;n<_;n++){let u=t.length;t.resize(u+4),t.float32.set(oi,3*u)}}function Ya(_,t,n){let u=t[0],m=t[1];return _[0]=n[0]*u+n[4]*m+n[12],_[1]=n[1]*u+n[5]*m+n[13],_[3]=n[3]*u+n[7]*m+n[15],_}let wi=100;class Xa{constructor(t,n=new It(t.width+200,t.height+200,25),u=new It(t.width+200,t.height+200,25)){this.transform=t,this.grid=n,this.ignoredGrid=u,this.pitchFactor=Math.cos(t.pitch*Math.PI/180)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+wi,this.screenBottomBoundary=t.height+wi,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(t,n,u,m,b,w,k,E,z,D,N,j){let U=this.projectAndGetPerspectiveRatio(t.anchorPointX+E[0],t.anchorPointY+E[1],b,D,j),X=u*U.perspectiveRatio,se;if(w||k)se=this._projectCollisionBox(t,X,m,b,w,k,E,U,D,N,j);else{let be=U.x+(N?N.x*X:0),pe=U.y+(N?N.y*X:0);se={allPointsOccluded:!1,box:[be+t.x1*X,pe+t.y1*X,be+t.x2*X,pe+t.y2*X]}}let[le,oe,ce,me]=se.box,he=w?se.allPointsOccluded:U.isOccluded,ge=he;return ge||(ge=U.perspectiveRatio<this.perspectiveRatioCutoff),ge||(ge=!this.isInsideGrid(le,oe,ce,me)),ge||n!=="always"&&this.grid.hitTest(le,oe,ce,me,n,z)?{box:[le,oe,ce,me],placeable:!1,offscreen:!1,occluded:he}:{box:[le,oe,ce,me],placeable:!0,offscreen:this.isOffscreen(le,oe,ce,me),occluded:he}}placeCollisionCircles(t,n,u,m,b,w,k,E,z,D,N,j,U,X){let se=[],le=new a.P(n.anchorX,n.anchorY),oe=this.getPerspectiveRatio(le.x,le.y,w,X),ce=(z?b*this.transform.getPitchedTextCorrection(n.anchorX,n.anchorY,w)/oe:b*oe)/a.aN,me={getElevation:X,pitchedLabelPlaneMatrix:k,lineVertexArray:u,pitchWithMap:z,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:le,unwrappedTileID:w,width:this.transform.width,height:this.transform.height,translation:U},he=na(ce,m,n.lineOffsetX*ce,n.lineOffsetY*ce,!1,n,!1,me),ge=!1,be=!1,pe=!0;if(he){let Se=.5*N*oe+j,De=new a.P(-100,-100),Ie=new a.P(this.screenRightBoundary,this.screenBottomBoundary),Le=new it,Fe=he.first,Xe=he.last,et=[];for(let zt=Fe.path.length-1;zt>=1;zt--)et.push(Fe.path[zt]);for(let zt=1;zt<Xe.path.length;zt++)et.push(Xe.path[zt]);let He=2.5*Se;if(z){let zt=this.projectPathToScreenSpace(et,me);et=zt.some((pi=>pi.signedDistanceFromCamera<=0))?[]:zt.map((pi=>pi.point))}let pt=[];if(et.length>0){let zt=et[0].clone(),pi=et[0].clone();for(let Ai=1;Ai<et.length;Ai++)zt.x=Math.min(zt.x,et[Ai].x),zt.y=Math.min(zt.y,et[Ai].y),pi.x=Math.max(pi.x,et[Ai].x),pi.y=Math.max(pi.y,et[Ai].y);pt=zt.x>=De.x&&pi.x<=Ie.x&&zt.y>=De.y&&pi.y<=Ie.y?[et]:pi.x<De.x||zt.x>Ie.x||pi.y<De.y||zt.y>Ie.y?[]:a.aK([et],De.x,De.y,Ie.x,Ie.y)}for(let zt of pt){Le.reset(zt,.25*Se);let pi=0;pi=Le.length<=.5*Se?1:Math.ceil(Le.paddedLength/He)+1;for(let Ai=0;Ai<pi;Ai++){let yi=Ai/Math.max(pi-1,1),Ri=Le.lerp(yi),Pi=Ri.x+wi,xr=Ri.y+wi;se.push(Pi,xr,Se,0);let zi=Pi-Se,ur=xr-Se,nr=Pi+Se,ar=xr+Se;if(pe=pe&&this.isOffscreen(zi,ur,nr,ar),be=be||this.isInsideGrid(zi,ur,nr,ar),t!=="always"&&this.grid.hitTestCircle(Pi,xr,Se,t,D)&&(ge=!0,!E))return{circles:[],offscreen:!1,collisionDetected:ge}}}}return{circles:!E&&ge||!be||oe<this.perspectiveRatioCutoff?[]:se,offscreen:pe,collisionDetected:ge}}projectPathToScreenSpace(t,n){let u=(function(m,b){let w=a.N();return a.aC(w,b.pitchedLabelPlaneMatrix),m.map((k=>{let E=Dt(k.x,k.y,w,b.getElevation),z=b.transform.projectTileCoordinates(E.point.x,E.point.y,b.unwrappedTileID,b.getElevation);return z.point.x=(.5*z.point.x+.5)*b.width,z.point.y=(.5*-z.point.y+.5)*b.height,z}))})(t,n);return(function(m){let b=0,w=0,k=0,E=0;for(let z=0;z<m.length;z++)m[z].isOccluded?(k=z+1,E=0):(E++,E>w&&(w=E,b=k));return m.slice(b,b+w)})(u)}queryRenderedSymbols(t){if(t.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};let n=[],u=new a.ac;for(let N of t){let j=new a.P(N.x+wi,N.y+wi);u.extend(j),n.push(j)}let{minX:m,minY:b,maxX:w,maxY:k}=u,E=this.grid.query(m,b,w,k).concat(this.ignoredGrid.query(m,b,w,k)),z={},D={};for(let N of E){let j=N.key;if(z[j.bucketInstanceId]===void 0&&(z[j.bucketInstanceId]={}),z[j.bucketInstanceId][j.featureIndex])continue;let U=[new a.P(N.x1,N.y1),new a.P(N.x2,N.y1),new a.P(N.x2,N.y2),new a.P(N.x1,N.y2)];a.aL(n,U)&&(z[j.bucketInstanceId][j.featureIndex]=!0,D[j.bucketInstanceId]===void 0&&(D[j.bucketInstanceId]=[]),D[j.bucketInstanceId].push(j.featureIndex))}return D}insertCollisionBox(t,n,u,m,b,w){(u?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:b,collisionGroupID:w,overlapMode:n},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,n,u,m,b,w){let k=u?this.ignoredGrid:this.grid,E={bucketInstanceId:m,featureIndex:b,collisionGroupID:w,overlapMode:n};for(let z=0;z<t.length;z+=4)k.insertCircle(E,t[z],t[z+1],t[z+2])}projectAndGetPerspectiveRatio(t,n,u,m,b){if(b){let w;m?(w=[t,n,m(t,n),1],a.aI(w,w,b)):(w=[t,n,0,1],Ya(w,w,b));let k=w[3];return{x:(w[0]/k+1)/2*this.transform.width+wi,y:(-w[1]/k+1)/2*this.transform.height+wi,perspectiveRatio:.5+this.transform.cameraToCenterDistance/k*.5,isOccluded:!1,signedDistanceFromCamera:k}}{let w=this.transform.projectTileCoordinates(t,n,u,m);return{x:(w.point.x+1)/2*this.transform.width+wi,y:(1-w.point.y)/2*this.transform.height+wi,perspectiveRatio:.5+this.transform.cameraToCenterDistance/w.signedDistanceFromCamera*.5,isOccluded:w.isOccluded,signedDistanceFromCamera:w.signedDistanceFromCamera}}}getPerspectiveRatio(t,n,u,m){let b=this.transform.projectTileCoordinates(t,n,u,m);return .5+this.transform.cameraToCenterDistance/b.signedDistanceFromCamera*.5}isOffscreen(t,n,u,m){return u<wi||t>=this.screenRightBoundary||m<wi||n>this.screenBottomBoundary}isInsideGrid(t,n,u,m){return u>=0&&t<this.gridRightBoundary&&m>=0&&n<this.gridBottomBoundary}getViewportMatrix(){let t=a.as([]);return a.O(t,t,[-100,-100,0]),t}_projectCollisionBox(t,n,u,m,b,w,k,E,z,D,N){let j=1,U=0,X=0,se=1,le=t.anchorPointX+k[0],oe=t.anchorPointY+k[1];if(w&&!b){let et=this.projectAndGetPerspectiveRatio(le+1,oe,m,z,N),He=et.x-E.x,pt=Math.atan((et.y-E.y)/He)+(He<0?Math.PI:0),zt=Math.sin(pt),pi=Math.cos(pt);j=pi,U=zt,X=-zt,se=pi}else if(!w&&b){let et=ra(this.transform);j=et.vecEast[0],U=et.vecEast[1],X=et.vecSouth[0],se=et.vecSouth[1]}let ce=E.x,me=E.y,he=n;b&&(ce=le,me=oe,he=Math.pow(2,-(this.transform.zoom-u.overscaledZ)),he*=this.transform.getPitchedTextCorrection(le,oe,m),D||(he*=a.ao(.5+E.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),D&&(ce+=j*D.x*he+X*D.y*he,me+=U*D.x*he+se*D.y*he);let ge=t.x1*he,be=t.x2*he,pe=(ge+be)/2,Se=t.y1*he,De=t.y2*he,Ie=(Se+De)/2,Le=[{offsetX:ge,offsetY:Se},{offsetX:pe,offsetY:Se},{offsetX:be,offsetY:Se},{offsetX:be,offsetY:Ie},{offsetX:be,offsetY:De},{offsetX:pe,offsetY:De},{offsetX:ge,offsetY:De},{offsetX:ge,offsetY:Ie}],Fe=[];for(let{offsetX:et,offsetY:He}of Le)Fe.push(new a.P(ce+j*et+X*He,me+U*et+se*He));let Xe=!1;if(b){let et=Fe.map((He=>this.projectAndGetPerspectiveRatio(He.x,He.y,m,z,N)));Xe=et.some((He=>!He.isOccluded)),Fe=et.map((He=>new a.P(He.x,He.y)))}else Xe=!0;return{box:a.aM(Fe),allPointsOccluded:!Xe}}}class Uo{constructor(t,n,u,m){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?n:-n))):m&&u?1:0,this.placed=u}isHidden(){return this.opacity===0&&!this.placed}}class Nt{constructor(t,n,u,m,b){this.text=new Uo(t?t.text:null,n,u,b),this.icon=new Uo(t?t.icon:null,n,m,b)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class qi{constructor(t,n,u){this.text=t,this.icon=n,this.skipFade=u}}class Zo{constructor(t,n,u,m,b){this.bucketInstanceId=t,this.featureIndex=n,this.sourceLayerIndex=u,this.bucketIndex=m,this.tileID=b}}class no{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){let n=++this.maxGroupID;this.collisionGroups[t]={ID:n,predicate:u=>u.collisionGroupID===n}}return this.collisionGroups[t]}}function jr(_,t,n,u,m){let{horizontalAlign:b,verticalAlign:w}=a.aT(_);return new a.P(-(b-.5)*t+u[0]*m,-(w-.5)*n+u[1]*m)}class Il{constructor(t,n,u,m,b){this.transform=t.clone(),this.terrain=n,this.collisionIndex=new Xa(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=u,this.retainedQueryData={},this.collisionGroups=new no(m),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=b,b&&(b.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(t){let n=this.terrain;return n?(u,m)=>n.getElevation(t,u,m):null}getBucketParts(t,n,u,m){let b=u.getBucket(n),w=u.latestFeatureIndex;if(!b||!w||n.id!==b.layerIds[0])return;let k=u.collisionBoxArray,E=b.layers[0].layout,z=b.layers[0].paint,D=Math.pow(2,this.transform.zoom-u.tileID.overscaledZ),N=u.tileSize/a.a5,j=u.tileID.toUnwrapped(),U=E.get("text-rotation-alignment")==="map",X=a.aO(u,1,this.transform.zoom),se=a.aP(this.collisionIndex.transform,u,z.get("text-translate"),z.get("text-translate-anchor")),le=a.aP(this.collisionIndex.transform,u,z.get("icon-translate"),z.get("icon-translate-anchor")),oe=$r(U,this.transform,X);this.retainedQueryData[b.bucketInstanceId]=new Zo(b.bucketInstanceId,w,b.sourceLayerIndex,b.index,u.tileID);let ce={bucket:b,layout:E,translationText:se,translationIcon:le,unwrappedTileID:j,pitchedLabelPlaneMatrix:oe,scale:D,textPixelRatio:N,holdingForFade:u.holdingForSymbolFade(),collisionBoxArray:k,partiallyEvaluatedTextSize:a.az(b.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(m)for(let me of b.sortKeyRanges){let{sortKey:he,symbolInstanceStart:ge,symbolInstanceEnd:be}=me;t.push({sortKey:he,symbolInstanceStart:ge,symbolInstanceEnd:be,parameters:ce})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:ce})}attemptAnchorPlacement(t,n,u,m,b,w,k,E,z,D,N,j,U,X,se,le,oe,ce,me,he){let ge=a.aQ[t.textAnchor],be=[t.textOffset0,t.textOffset1],pe=jr(ge,u,m,be,b),Se=this.collisionIndex.placeCollisionBox(n,j,E,z,D,k,w,le,N.predicate,me,pe,he);if((!ce||this.collisionIndex.placeCollisionBox(ce,j,E,z,D,k,w,oe,N.predicate,me,pe,he).placeable)&&Se.placeable){let De;if(this.prevPlacement&&this.prevPlacement.variableOffsets[U.crossTileID]&&this.prevPlacement.placements[U.crossTileID]&&this.prevPlacement.placements[U.crossTileID].text&&(De=this.prevPlacement.variableOffsets[U.crossTileID].anchor),U.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[U.crossTileID]={textOffset:be,width:u,height:m,anchor:ge,textBoxScale:b,prevAnchor:De},this.markUsedJustification(X,ge,U,se),X.allowVerticalPlacement&&(this.markUsedOrientation(X,se,U),this.placedOrientations[U.crossTileID]=se),{shift:pe,placedGlyphBoxes:Se}}}placeLayerBucketPart(t,n,u){let{bucket:m,layout:b,translationText:w,translationIcon:k,unwrappedTileID:E,pitchedLabelPlaneMatrix:z,textPixelRatio:D,holdingForFade:N,collisionBoxArray:j,partiallyEvaluatedTextSize:U,collisionGroup:X}=t.parameters,se=b.get("text-optional"),le=b.get("icon-optional"),oe=a.aR(b,"text-overlap","text-allow-overlap"),ce=oe==="always",me=a.aR(b,"icon-overlap","icon-allow-overlap"),he=me==="always",ge=b.get("text-rotation-alignment")==="map",be=b.get("text-pitch-alignment")==="map",pe=b.get("icon-text-fit")!=="none",Se=b.get("symbol-z-order")==="viewport-y",De=ce&&(he||!m.hasIconData()||le),Ie=he&&(ce||!m.hasTextData()||se);!m.collisionArrays&&j&&m.deserializeCollisionBoxes(j);let Le=this.retainedQueryData[m.bucketInstanceId].tileID,Fe=this._getTerrainElevationFunc(Le),Xe=this.transform.getFastPathSimpleProjectionMatrix(Le),et=(He,pt,zt)=>{var pi,Ai;if(n[He.crossTileID])return;if(N)return void(this.placements[He.crossTileID]=new qi(!1,!1,!1));let yi=!1,Ri=!1,Pi=!0,xr=null,zi={box:null,placeable:!1,offscreen:null,occluded:!1},ur={placeable:!1},nr=null,ar=null,Vr=null,fn=0,Ra=0,Us=0;pt.textFeatureIndex?fn=pt.textFeatureIndex:He.useRuntimeCollisionCircles&&(fn=He.featureIndex),pt.verticalTextFeatureIndex&&(Ra=pt.verticalTextFeatureIndex);let Po=pt.textBox;if(Po){let Ar=hr=>{let wr=a.aA.horizontal;if(m.allowVerticalPlacement&&!hr&&this.prevPlacement){let Bn=this.prevPlacement.placedOrientations[He.crossTileID];Bn&&(this.placedOrientations[He.crossTileID]=Bn,wr=Bn,this.markUsedOrientation(m,wr,He))}return wr},Kr=(hr,wr)=>{if(m.allowVerticalPlacement&&He.numVerticalGlyphVertices>0&&pt.verticalTextBox){for(let Bn of m.writingModes)if(Bn===a.aA.vertical?(zi=wr(),ur=zi):zi=hr(),zi&&zi.placeable)break}else zi=hr()},Wr=He.textAnchorOffsetStartIndex,Qn=He.textAnchorOffsetEndIndex;if(Qn===Wr){let hr=(wr,Bn)=>{let Ui=this.collisionIndex.placeCollisionBox(wr,oe,D,Le,E,be,ge,w,X.predicate,Fe,void 0,Xe);return Ui&&Ui.placeable&&(this.markUsedOrientation(m,Bn,He),this.placedOrientations[He.crossTileID]=Bn),Ui};Kr((()=>hr(Po,a.aA.horizontal)),(()=>{let wr=pt.verticalTextBox;return m.allowVerticalPlacement&&He.numVerticalGlyphVertices>0&&wr?hr(wr,a.aA.vertical):{box:null,offscreen:null}})),Ar(zi&&zi.placeable)}else{let hr=a.aQ[(Ai=(pi=this.prevPlacement)===null||pi===void 0?void 0:pi.variableOffsets[He.crossTileID])===null||Ai===void 0?void 0:Ai.anchor],wr=(Ui,Wf,Fd)=>{let mh=Ui.x2-Ui.x1,jd=Ui.y2-Ui.y1,Eo=He.textBoxScale,Ao=pe&&me==="never"?Wf:null,Zs=null,Nd=oe==="never"?1:2,$c="never";hr&&Nd++;for(let gh=0;gh<Nd;gh++){for(let dl=Wr;dl<Qn;dl++){let yh=m.textAnchorOffsets.get(dl);if(hr&&yh.textAnchor!==hr)continue;let _h=this.attemptAnchorPlacement(yh,Ui,mh,jd,Eo,ge,be,D,Le,E,X,$c,He,m,Fd,w,k,Ao,Fe);if(_h&&(Zs=_h.placedGlyphBoxes,Zs&&Zs.placeable))return yi=!0,xr=_h.shift,Zs}hr?hr=null:$c=oe}return u&&!Zs&&(Zs={box:this.collisionIndex.placeCollisionBox(Po,"always",D,Le,E,be,ge,w,X.predicate,Fe,void 0,Xe).box,offscreen:!1,placeable:!1,occluded:!1}),Zs};Kr((()=>wr(Po,pt.iconBox,a.aA.horizontal)),(()=>{let Ui=pt.verticalTextBox;return m.allowVerticalPlacement&&(!zi||!zi.placeable)&&He.numVerticalGlyphVertices>0&&Ui?wr(Ui,pt.verticalIconBox,a.aA.vertical):{box:null,occluded:!0,offscreen:null}})),zi&&(yi=zi.placeable,Pi=zi.offscreen);let Bn=Ar(zi&&zi.placeable);if(!yi&&this.prevPlacement){let Ui=this.prevPlacement.variableOffsets[He.crossTileID];Ui&&(this.variableOffsets[He.crossTileID]=Ui,this.markUsedJustification(m,Ui.anchor,He,Bn))}}}if(nr=zi,yi=nr&&nr.placeable,Pi=nr&&nr.offscreen,He.useRuntimeCollisionCircles&&He.centerJustifiedTextSymbolIndex>=0){let Ar=m.text.placedSymbolArray.get(He.centerJustifiedTextSymbolIndex),Kr=a.aB(m.textSizeData,U,Ar),Wr=b.get("text-padding");ar=this.collisionIndex.placeCollisionCircles(oe,Ar,m.lineVertexArray,m.glyphOffsetArray,Kr,E,z,u,be,X.predicate,He.collisionCircleDiameter,Wr,w,Fe),ar.circles.length&&ar.collisionDetected&&!u&&a.w("Collisions detected, but collision boxes are not shown"),yi=ce||ar.circles.length>0&&!ar.collisionDetected,Pi=Pi&&ar.offscreen}if(pt.iconFeatureIndex&&(Us=pt.iconFeatureIndex),pt.iconBox){let Ar=Kr=>this.collisionIndex.placeCollisionBox(Kr,me,D,Le,E,be,ge,k,X.predicate,Fe,pe&&xr?xr:void 0,Xe);ur&&ur.placeable&&pt.verticalIconBox?(Vr=Ar(pt.verticalIconBox),Ri=Vr.placeable):(Vr=Ar(pt.iconBox),Ri=Vr.placeable),Pi=Pi&&Vr.offscreen}let Zc=se||He.numHorizontalGlyphVertices===0&&He.numVerticalGlyphVertices===0,hl=le||He.numIconVertices===0;Zc||hl?hl?Zc||(Ri=Ri&&yi):yi=Ri&&yi:Ri=yi=Ri&&yi;let Ba=Ri&&Vr.placeable;if(yi&&nr.placeable&&this.collisionIndex.insertCollisionBox(nr.box,oe,b.get("text-ignore-placement"),m.bucketInstanceId,ur&&ur.placeable&&Ra?Ra:fn,X.ID),Ba&&this.collisionIndex.insertCollisionBox(Vr.box,me,b.get("icon-ignore-placement"),m.bucketInstanceId,Us,X.ID),ar&&yi&&this.collisionIndex.insertCollisionCircles(ar.circles,oe,b.get("text-ignore-placement"),m.bucketInstanceId,fn,X.ID),u&&this.storeCollisionData(m.bucketInstanceId,zt,pt,nr,Vr,ar),He.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(m.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[He.crossTileID]=new qi((yi||De)&&!nr?.occluded,(Ri||Ie)&&!Vr?.occluded,Pi||m.justReloaded),n[He.crossTileID]=!0};if(Se){if(t.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");let He=m.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let pt=He.length-1;pt>=0;--pt){let zt=He[pt];et(m.symbolInstances.get(zt),m.collisionArrays[zt],zt)}}else for(let He=t.symbolInstanceStart;He<t.symbolInstanceEnd;He++)et(m.symbolInstances.get(He),m.collisionArrays[He],He);m.justReloaded=!1}storeCollisionData(t,n,u,m,b,w){if(u.textBox||u.iconBox){let k,E;this.collisionBoxArrays.has(t)?k=this.collisionBoxArrays.get(t):(k=new Map,this.collisionBoxArrays.set(t,k)),k.has(n)?E=k.get(n):(E={text:null,icon:null},k.set(n,E)),u.textBox&&(E.text=m.box),u.iconBox&&(E.icon=b.box)}if(w){let k=this.collisionCircleArrays[t];k===void 0&&(k=this.collisionCircleArrays[t]=[]);for(let E=0;E<w.circles.length;E+=4)k.push(w.circles[E+0]-wi),k.push(w.circles[E+1]-wi),k.push(w.circles[E+2]),k.push(w.collisionDetected?1:0)}}markUsedJustification(t,n,u,m){let b;b=m===a.aA.vertical?u.verticalPlacedTextSymbolIndex:{left:u.leftJustifiedTextSymbolIndex,center:u.centerJustifiedTextSymbolIndex,right:u.rightJustifiedTextSymbolIndex}[a.aS(n)];let w=[u.leftJustifiedTextSymbolIndex,u.centerJustifiedTextSymbolIndex,u.rightJustifiedTextSymbolIndex,u.verticalPlacedTextSymbolIndex];for(let k of w)k>=0&&(t.text.placedSymbolArray.get(k).crossTileID=b>=0&&k!==b?0:u.crossTileID)}markUsedOrientation(t,n,u){let m=n===a.aA.horizontal||n===a.aA.horizontalOnly?n:0,b=n===a.aA.vertical?n:0,w=[u.leftJustifiedTextSymbolIndex,u.centerJustifiedTextSymbolIndex,u.rightJustifiedTextSymbolIndex];for(let k of w)t.text.placedSymbolArray.get(k).placedOrientation=m;u.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(u.verticalPlacedTextSymbolIndex).placedOrientation=b)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;let n=this.prevPlacement,u=!1;this.prevZoomAdjustment=n?n.zoomAdjustment(this.transform.zoom):0;let m=n?n.symbolFadeChange(t):1,b=n?n.opacities:{},w=n?n.variableOffsets:{},k=n?n.placedOrientations:{};for(let E in this.placements){let z=this.placements[E],D=b[E];D?(this.opacities[E]=new Nt(D,m,z.text,z.icon),u=u||z.text!==D.text.placed||z.icon!==D.icon.placed):(this.opacities[E]=new Nt(null,m,z.text,z.icon,z.skipFade),u=u||z.text||z.icon)}for(let E in b){let z=b[E];if(!this.opacities[E]){let D=new Nt(z,m,!1,!1);D.isHidden()||(this.opacities[E]=D,u=u||z.text.placed||z.icon.placed)}}for(let E in w)this.variableOffsets[E]||!this.opacities[E]||this.opacities[E].isHidden()||(this.variableOffsets[E]=w[E]);for(let E in k)this.placedOrientations[E]||!this.opacities[E]||this.opacities[E].isHidden()||(this.placedOrientations[E]=k[E]);if(n&&n.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");u?this.lastPlacementChangeTime=t:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=n?n.lastPlacementChangeTime:t)}updateLayerOpacities(t,n){let u={};for(let m of n){let b=m.getBucket(t);b&&m.latestFeatureIndex&&t.id===b.layerIds[0]&&this.updateBucketOpacities(b,m.tileID,u,m.collisionBoxArray)}}updateBucketOpacities(t,n,u,m){t.hasTextData()&&(t.text.opacityVertexArray.clear(),t.text.hasVisibleVertices=!1),t.hasIconData()&&(t.icon.opacityVertexArray.clear(),t.icon.hasVisibleVertices=!1),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();let b=t.layers[0],w=b.layout,k=new Nt(null,0,!1,!1,!0),E=w.get("text-allow-overlap"),z=w.get("icon-allow-overlap"),D=b._unevaluatedLayout.hasValue("text-variable-anchor")||b._unevaluatedLayout.hasValue("text-variable-anchor-offset"),N=w.get("text-rotation-alignment")==="map",j=w.get("text-pitch-alignment")==="map",U=w.get("icon-text-fit")!=="none",X=new Nt(null,0,E&&(z||!t.hasIconData()||w.get("icon-optional")),z&&(E||!t.hasTextData()||w.get("text-optional")),!0);!t.collisionArrays&&m&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(m);let se=(oe,ce,me)=>{for(let he=0;he<ce/4;he++)oe.opacityVertexArray.emplaceBack(me);oe.hasVisibleVertices=oe.hasVisibleVertices||me!==Ja},le=this.collisionBoxArrays.get(t.bucketInstanceId);for(let oe=0;oe<t.symbolInstances.length;oe++){let ce=t.symbolInstances.get(oe),{numHorizontalGlyphVertices:me,numVerticalGlyphVertices:he,crossTileID:ge}=ce,be=this.opacities[ge];u[ge]?be=k:be||(be=X,this.opacities[ge]=be),u[ge]=!0;let pe=ce.numIconVertices>0,Se=this.placedOrientations[ce.crossTileID],De=Se===a.aA.vertical,Ie=Se===a.aA.horizontal||Se===a.aA.horizontalOnly;if(me>0||he>0){let Fe=ao(be.text);se(t.text,me,De?Ja:Fe),se(t.text,he,Ie?Ja:Fe);let Xe=be.text.isHidden();[ce.rightJustifiedTextSymbolIndex,ce.centerJustifiedTextSymbolIndex,ce.leftJustifiedTextSymbolIndex].forEach((pt=>{pt>=0&&(t.text.placedSymbolArray.get(pt).hidden=Xe||De?1:0)})),ce.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(ce.verticalPlacedTextSymbolIndex).hidden=Xe||Ie?1:0);let et=this.variableOffsets[ce.crossTileID];et&&this.markUsedJustification(t,et.anchor,ce,Se);let He=this.placedOrientations[ce.crossTileID];He&&(this.markUsedJustification(t,"left",ce,He),this.markUsedOrientation(t,He,ce))}if(pe){let Fe=ao(be.icon),Xe=!(U&&ce.verticalPlacedIconSymbolIndex&&De);ce.placedIconSymbolIndex>=0&&(se(t.icon,ce.numIconVertices,Xe?Fe:Ja),t.icon.placedSymbolArray.get(ce.placedIconSymbolIndex).hidden=be.icon.isHidden()),ce.verticalPlacedIconSymbolIndex>=0&&(se(t.icon,ce.numVerticalIconVertices,Xe?Ja:Fe),t.icon.placedSymbolArray.get(ce.verticalPlacedIconSymbolIndex).hidden=be.icon.isHidden())}let Le=le&&le.has(oe)?le.get(oe):{text:null,icon:null};if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){let Fe=t.collisionArrays[oe];if(Fe){let Xe=new a.P(0,0);if(Fe.textBox||Fe.verticalTextBox){let et=!0;if(D){let He=this.variableOffsets[ge];He?(Xe=jr(He.anchor,He.width,He.height,He.textOffset,He.textBoxScale),N&&Xe._rotate(j?-this.transform.bearingInRadians:this.transform.bearingInRadians)):et=!1}if(Fe.textBox||Fe.verticalTextBox){let He;Fe.textBox&&(He=De),Fe.verticalTextBox&&(He=Ie),Cs(t.textCollisionBox.collisionVertexArray,be.text.placed,!et||He,Le.text,Xe.x,Xe.y)}}if(Fe.iconBox||Fe.verticalIconBox){let et=!!(!Ie&&Fe.verticalIconBox),He;Fe.iconBox&&(He=et),Fe.verticalIconBox&&(He=!et),Cs(t.iconCollisionBox.collisionVertexArray,be.icon.placed,He,Le.icon,U?Xe.x:0,U?Xe.y:0)}}}}if(t.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.text.opacityVertexArray.length!==t.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${t.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${t.text.layoutVertexArray.length}) / 4`);if(t.icon.opacityVertexArray.length!==t.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${t.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${t.icon.layoutVertexArray.length}) / 4`);t.bucketInstanceId in this.collisionCircleArrays&&(t.collisionCircleArray=this.collisionCircleArrays[t.bucketInstanceId],delete this.collisionCircleArrays[t.bucketInstanceId])}symbolFadeChange(t){return this.fadeDuration===0?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,n){let u=this.zoomAtLastRecencyCheck===n?1-this.zoomAdjustment(n):1;return this.zoomAtLastRecencyCheck=n,this.commitTime+this.fadeDuration*u>t}setStale(){this.stale=!0}}function Cs(_,t,n,u,m,b){u&&u.length!==0||(u=[0,0,0,0]);let w=u[0]-wi,k=u[1]-wi,E=u[2]-wi,z=u[3]-wi;_.emplaceBack(t?1:0,n?1:0,m||0,b||0,w,k),_.emplaceBack(t?1:0,n?1:0,m||0,b||0,E,k),_.emplaceBack(t?1:0,n?1:0,m||0,b||0,E,z),_.emplaceBack(t?1:0,n?1:0,m||0,b||0,w,z)}let aa=Math.pow(2,25),Vi=Math.pow(2,24),Ka=Math.pow(2,17),sa=Math.pow(2,16),Ca=Math.pow(2,9),$o=Math.pow(2,8),Un=Math.pow(2,1);function ao(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;let t=_.placed?1:0,n=Math.floor(127*_.opacity);return n*aa+t*Vi+n*Ka+t*sa+n*Ca+t*$o+n*Un+t}let Ja=0;class An{constructor(t){this._sortAcrossTiles=t.layout.get("symbol-z-order")!=="viewport-y"&&!t.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,n,u,m,b){let w=this._bucketParts;for(;this._currentTileIndex<t.length;)if(n.getBucketParts(w,m,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,w.sort(((k,E)=>k.sortKey-E.sortKey)));this._currentPartIndex<w.length;)if(n.placeLayerBucketPart(w[this._currentPartIndex],this._seenCrossTileIDs,u),this._currentPartIndex++,b())return!0;return!1}}class ka{constructor(t,n,u,m,b,w,k,E){this.placement=new Il(t,n,w,k,E),this._currentPlacementIndex=u.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=b,this._done=!1}isDone(){return this._done}continuePlacement(t,n,u){let m=ae(),b=()=>!this._forceFullPlacement&&ae()-m>2;for(;this._currentPlacementIndex>=0;){let w=n[t[this._currentPlacementIndex]],k=this.placement.collisionIndex.transform.zoom;if(w.type==="symbol"&&(!w.minzoom||w.minzoom<=k)&&(!w.maxzoom||w.maxzoom>k)){if(this._inProgressLayer||(this._inProgressLayer=new An(w)),this._inProgressLayer.continuePlacement(u[w.source],this.placement,this._showCollisionBoxes,w,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}let Rt=512/a.a5/2;class ks{constructor(t,n,u){this.tileID=t,this.bucketInstanceId=u,this._symbolsByKey={};let m=new Map;for(let b=0;b<n.length;b++){let w=n.get(b),k=w.key,E=m.get(k);E?E.push(w):m.set(k,[w])}for(let[b,w]of m){let k={positions:w.map((E=>({x:Math.floor(E.anchorX*Rt),y:Math.floor(E.anchorY*Rt)}))),crossTileIDs:w.map((E=>E.crossTileID))};if(k.positions.length>128){let E=new a.aU(k.positions.length,16,Uint16Array);for(let{x:z,y:D}of k.positions)E.add(z,D);E.finish(),delete k.positions,k.index=E}this._symbolsByKey[b]=k}}getScaledCoordinates(t,n){let{x:u,y:m,z:b}=this.tileID.canonical,{x:w,y:k,z:E}=n.canonical,z=Rt/Math.pow(2,E-b),D=(k*a.a5+t.anchorY)*z,N=m*a.a5*Rt;return{x:Math.floor((w*a.a5+t.anchorX)*z-u*a.a5*Rt),y:Math.floor(D-N)}}findMatches(t,n,u){let m=this.tileID.canonical.z<n.canonical.z?1:Math.pow(2,this.tileID.canonical.z-n.canonical.z);for(let b=0;b<t.length;b++){let w=t.get(b);if(w.crossTileID)continue;let k=this._symbolsByKey[w.key];if(!k)continue;let E=this.getScaledCoordinates(w,n);if(k.index){let z=k.index.range(E.x-m,E.y-m,E.x+m,E.y+m).sort();for(let D of z){let N=k.crossTileIDs[D];if(!u[N]){u[N]=!0,w.crossTileID=N;break}}}else if(k.positions)for(let z=0;z<k.positions.length;z++){let D=k.positions[z],N=k.crossTileIDs[z];if(Math.abs(D.x-E.x)<=m&&Math.abs(D.y-E.y)<=m&&!u[N]){u[N]=!0,w.crossTileID=N;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:t})=>t))}}class fc{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class so{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){let n=Math.round((t-this.lng)/360);if(n!==0)for(let u in this.indexes){let m=this.indexes[u],b={};for(let w in m){let k=m[w];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+n),b[k.tileID.key]=k}this.indexes[u]=b}this.lng=t}addBucket(t,n,u){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===n.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let b=0;b<n.symbolInstances.length;b++)n.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});let m=this.usedCrossTileIDs[t.overscaledZ];for(let b in this.indexes){let w=this.indexes[b];if(Number(b)>t.overscaledZ)for(let k in w){let E=w[k];E.tileID.isChildOf(t)&&E.findMatches(n.symbolInstances,t,m)}else{let k=w[t.scaledTo(Number(b)).key];k&&k.findMatches(n.symbolInstances,t,m)}}for(let b=0;b<n.symbolInstances.length;b++){let w=n.symbolInstances.get(b);w.crossTileID||(w.crossTileID=u.generate(),m[w.crossTileID]=!0)}return this.indexes[t.overscaledZ]===void 0&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new ks(t,n.symbolInstances,n.bucketInstanceId),!0}removeBucketCrossTileIDs(t,n){for(let u of n.getCrossTileIDsLists())for(let m of u)delete this.usedCrossTileIDs[t][m]}removeStaleBuckets(t){let n=!1;for(let u in this.indexes){let m=this.indexes[u];for(let b in m)t[m[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(u,m[b]),delete m[b],n=!0)}return n}}class Hr{constructor(){this.layerIndexes={},this.crossTileIDs=new fc,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,n,u){let m=this.layerIndexes[t.id];m===void 0&&(m=this.layerIndexes[t.id]=new so);let b=!1,w={};m.handleWrapJump(u);for(let k of n){let E=k.getBucket(t);E&&t.id===E.layerIds[0]&&(E.bucketInstanceId||(E.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(k.tileID,E,this.crossTileIDs)&&(b=!0),w[E.bucketInstanceId]=!0)}return m.removeStaleBuckets(w)&&(b=!0),b}pruneUnusedLayers(t){let n={};t.forEach((u=>{n[u]=!0}));for(let u in this.layerIndexes)n[u]||delete this.layerIndexes[u]}}var bt="void main() {fragColor=vec4(1.0);}";let li={prelude:ct(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:ct("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:ct("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:ct(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:ct(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:ct(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:ct(bt,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:ct(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:ct(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:ct("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:ct("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:ct(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:ct("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:ct(bt,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:ct(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:ct(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:ct(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:ct(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:ct(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:ct(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:ct(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ct(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:ct(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:ct(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:ct(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:ct(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0/u_device_pixel_ratio)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:ct(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:ct(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:ct(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:ct(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:ct(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:ct("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:ct("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:ct("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:ct("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:ct(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:ct("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function ct(_,t){let n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,u=t.match(/in ([\w]+) ([\w]+)/g),m=_.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=b?b.concat(m):m,k={};return{fragmentSource:_=_.replace(n,((E,z,D,N,j)=>(k[j]=!0,z==="define"?`
#ifndef HAS_UNIFORM_u_${j}
in ${D} ${N} ${j};
#else
uniform ${D} ${N} u_${j};
#endif
`:`
#ifdef HAS_UNIFORM_u_${j}
    ${D} ${N} ${j} = u_${j};
#endif
`))),vertexSource:t=t.replace(n,((E,z,D,N,j)=>{let U=N==="float"?"vec2":"vec4",X=j.match(/color/)?"color":U;return k[j]?z==="define"?`
#ifndef HAS_UNIFORM_u_${j}
uniform lowp float u_${j}_t;
in ${D} ${U} a_${j};
out ${D} ${N} ${j};
#else
uniform ${D} ${N} u_${j};
#endif
`:X==="vec4"?`
#ifndef HAS_UNIFORM_u_${j}
    ${j} = a_${j};
#else
    ${D} ${N} ${j} = u_${j};
#endif
`:`
#ifndef HAS_UNIFORM_u_${j}
    ${j} = unpack_mix_${X}(a_${j}, u_${j}_t);
#else
    ${D} ${N} ${j} = u_${j};
#endif
`:z==="define"?`
#ifndef HAS_UNIFORM_u_${j}
uniform lowp float u_${j}_t;
in ${D} ${U} a_${j};
#else
uniform ${D} ${N} u_${j};
#endif
`:X==="vec4"?`
#ifndef HAS_UNIFORM_u_${j}
    ${D} ${N} ${j} = a_${j};
#else
    ${D} ${N} ${j} = u_${j};
#endif
`:`
#ifndef HAS_UNIFORM_u_${j}
    ${D} ${N} ${j} = unpack_mix_${X}(a_${j}, u_${j}_t);
#else
    ${D} ${N} ${j} = u_${j};
#endif
`})),staticAttributes:u,staticUniforms:w}}class gi{constructor(t,n,u){this.vertexBuffer=t,this.indexBuffer=n,this.segments=u}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Zn=a.aV([{name:"a_pos",type:"Int16",components:2}]);let vr="#define PROJECTION_MERCATOR",Nr="mercator";class Xi{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Nr}get shaderDefine(){return vr}get shaderPreludeCode(){return li.projectionMercator}get vertexShaderPreludeCode(){return li.projectionMercator.vertexSource}get subdivisionGranularity(){return a.aW.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(t){}getMeshFromTileID(t,n,u,m,b){if(this._cachedMesh)return this._cachedMesh;let w=new a.aX;w.emplaceBack(0,0),w.emplaceBack(a.a5,0),w.emplaceBack(0,a.a5),w.emplaceBack(a.a5,a.a5);let k=t.createVertexBuffer(w,Zn.members),E=a.aY.simpleSegment(0,0,4,2),z=new a.aZ;z.emplaceBack(1,0,2),z.emplaceBack(1,2,3);let D=t.createIndexBuffer(z);return this._cachedMesh=new gi(k,D,E),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(t){}}class Pa{constructor(t=0,n=0,u=0,m=0){if(isNaN(t)||t<0||isNaN(n)||n<0||isNaN(u)||u<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=n,this.left=u,this.right=m}interpolate(t,n,u){return n.top!=null&&t.top!=null&&(this.top=a.G.number(t.top,n.top,u)),n.bottom!=null&&t.bottom!=null&&(this.bottom=a.G.number(t.bottom,n.bottom,u)),n.left!=null&&t.left!=null&&(this.left=a.G.number(t.left,n.left,u)),n.right!=null&&t.right!=null&&(this.right=a.G.number(t.right,n.right,u)),this}getCenter(t,n){let u=a.ao((this.left+t-this.right)/2,0,t),m=a.ao((this.top+n-this.bottom)/2,0,n);return new a.P(u,m)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new Pa(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function _n(_,t){if(!_.renderWorldCopies||_.lngRange)return;let n=t.lng-_.center.lng;t.lng+=n>180?-360:n<-180?360:0}function Kt(_){return Math.max(0,Math.floor(_))}class on{constructor(t,n){var u;this.applyConstrain=(m,b)=>this._constrainOverride!==null?this._constrainOverride(m,b):this._callbacks.defaultConstrain(m,b),this._callbacks=t,this._tileSize=512,this._renderWorldCopies=n?.renderWorldCopies===void 0||!!n?.renderWorldCopies,this._minZoom=n?.minZoom||0,this._maxZoom=n?.maxZoom||22,this._minPitch=n?.minPitch==null?0:n?.minPitch,this._maxPitch=n?.maxPitch==null?60:n?.maxPitch,this._constrainOverride=(u=n?.constrainOverride)!==null&&u!==void 0?u:null,this.setMaxBounds(),this._width=0,this._height=0,this._center=new a.V(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Kt(this._zoom),this._scale=a.ar(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Pa,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(t,n,u){this._constrainOverride=t.constrainOverride,this._latRange=t.latRange,this._lngRange=t.lngRange,this._width=t.width,this._height=t.height,this._center=t.center,this._elevation=t.elevation,this._minElevationForCurrentTile=t.minElevationForCurrentTile,this._zoom=t.zoom,this._tileZoom=Kt(this._zoom),this._scale=a.ar(this._zoom),this._bearingInRadians=t.bearingInRadians,this._fovInRadians=t.fovInRadians,this._pitchInRadians=t.pitchInRadians,this._rollInRadians=t.rollInRadians,this._unmodified=t.unmodified,this._edgeInsets=new Pa(t.padding.top,t.padding.bottom,t.padding.left,t.padding.right),this._minZoom=t.minZoom,this._maxZoom=t.maxZoom,this._minPitch=t.minPitch,this._maxPitch=t.maxPitch,this._renderWorldCopies=t.renderWorldCopies,this._cameraToCenterDistance=t.cameraToCenterDistance,this._nearZ=t.nearZ,this._farZ=t.farZ,this._autoCalculateNearFarZ=!u&&t.autoCalculateNearFarZ,n&&this.constrainInternal(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(t){this._minElevationForCurrentTile=t}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(t){this._minZoom!==t&&(this._minZoom=t,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(t){this._minPitch!==t&&(this._minPitch=t,this.setPitch(Math.max(this.pitch,t)))}get maxPitch(){return this._maxPitch}setMaxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.setPitch(Math.min(this.pitch,t)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(t){t===void 0?t=!0:t===null&&(t=!1),this._renderWorldCopies=t}get constrainOverride(){return this._constrainOverride}setConstrainOverride(t){t===void 0&&(t=null),this._constrainOverride!==t&&(this._constrainOverride=t,this.constrainInternal(),this._calcMatrices())}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(t){let n=a.W(t,-180,180)*Math.PI/180;var u,m,b,w,k,E,z,D,N;this._bearingInRadians!==n&&(this._unmodified=!1,this._bearingInRadians=n,this._calcMatrices(),this._rotationMatrix=M(),u=this._rotationMatrix,b=-this._bearingInRadians,w=(m=this._rotationMatrix)[0],k=m[1],E=m[2],z=m[3],D=Math.sin(b),N=Math.cos(b),u[0]=w*N+E*D,u[1]=k*N+z*D,u[2]=w*-D+E*N,u[3]=k*-D+z*N)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(t){let n=a.ao(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==n&&(this._unmodified=!1,this._pitchInRadians=n,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(t){let n=t/180*Math.PI;this._rollInRadians!==n&&(this._unmodified=!1,this._rollInRadians=n,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return a.a_(this._fovInRadians)}setFov(t){t=a.ao(t,.1,150),this.fov!==t&&(this._unmodified=!1,this._fovInRadians=a.aq(t),this._calcMatrices())}get zoom(){return this._zoom}setZoom(t){let n=this.applyConstrain(this._center,t).zoom;this._zoom!==n&&(this._unmodified=!1,this._zoom=n,this._tileZoom=Math.max(0,Math.floor(n)),this._scale=a.ar(n),this.constrainInternal(),this._calcMatrices())}get center(){return this._center}setCenter(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this.constrainInternal(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(t){t!==this._elevation&&(this._elevation=t,this.constrainInternal(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(t,n){this._autoCalculateNearFarZ=!1,this._nearZ=t,this._farZ=n,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,n,u){this._unmodified=!1,this._edgeInsets.interpolate(t,n,u),this.constrainInternal(),this._calcMatrices()}resize(t,n,u=!0){this._width=t,this._height=n,u&&this.constrainInternal(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Ei([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(t){t?(this._lngRange=[t.getWest(),t.getEast()],this._latRange=[t.getSouth(),t.getNorth()],this.constrainInternal()):(this._lngRange=null,this._latRange=[-a.ap,a.ap])}getCameraQueryGeometry(t,n){if(n.length===1)return[n[0],t];{let{minX:u,minY:m,maxX:b,maxY:w}=a.ac.fromPoints(n).extend(t);return[new a.P(u,m),new a.P(b,m),new a.P(b,w),new a.P(u,w),new a.P(u,m)]}}constrainInternal(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;let t=this._unmodified,{center:n,zoom:u}=this.applyConstrain(this.center,this.zoom);this.setCenter(n),this.setZoom(u),this._unmodified=t,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let t=a.as(new Float64Array(16));a.Q(t,t,[this._width/2,-this._height/2,1]),a.O(t,t,[1,-1,0]),this._clipSpaceToPixelsMatrix=t,t=a.as(new Float64Array(16)),a.Q(t,t,[1,-1,1]),a.O(t,t,[-1,-1,0]),a.Q(t,t,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=t,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(t,n,u,m){let b=u!==void 0?u:this.bearing,w=m=m!==void 0?m:this.pitch,{distanceToCenter:k,clampedElevation:E}=this._distanceToCenterFromAltElevationPitch(n,this.elevation,w),{x:z,y:D}=vi(w,b),N=a.ab.fromLngLat(t,n),j,U,X=a.a$(1,N.y),se=0;do{if(se+=1,se>10)break;U=k/X,j=new a.ab(N.x+z*U,N.y+D*U),X=1/j.meterInMercatorCoordinateUnits()}while(Math.abs(k-U*X)>1e-12);return{center:j.toLngLat(),elevation:E,zoom:a.au(this.height/2/Math.tan(this.fovInRadians/2)/U/this.tileSize)}}recalculateZoomAndCenter(t){if(this.elevation-t==0)return;let n=1/this.worldSize,u=a.at(1,this.center.lat)*this.worldSize,m=a.ab.fromLngLat(this.center,this.elevation),b=m.x/n,w=m.y/n,k=m.z/n,E=this.pitch,z=this.bearing,{x:D,y:N,z:j}=vi(E,z),U=this.cameraToCenterDistance,X=b+U*-D,se=w+U*-N,le=k+U*j,{distanceToCenter:oe,clampedElevation:ce}=this._distanceToCenterFromAltElevationPitch(le/u,t,E),me=oe*u,he=new a.ab((X+D*me)*n,(se+N*me)*n,0).toLngLat(),ge=a.at(1,he.lat),be=a.au(this.height/2/Math.tan(this.fovInRadians/2)/oe/ge/this.tileSize);this._elevation=ce,this._center=he,this.setZoom(be)}_distanceToCenterFromAltElevationPitch(t,n,u){let m=-Math.cos(a.aq(u)),b=t-n,w,k=n;return m*b>=0||Math.abs(m)<.1?(w=1e4,k=t+w*m):w=-b/m,{distanceToCenter:w,clampedElevation:k}}getCameraPoint(){let t=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(t*Math.sin(this.rollInRadians),t*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){let t=a.at(1,this.center.lat)*this.worldSize;return ze(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/t).toLngLat()}getMercatorTileCoordinates(t){if(!t)return[0,0,1,1];let n=t.canonical.z>=0?1<<t.canonical.z:Math.pow(2,t.canonical.z);return[t.canonical.x/n,t.canonical.y/n,1/n/a.a5,1/n/a.a5]}}class Mn{constructor(t,n){this.min=t,this.max=n,this.center=a.b0([],a.b1([],this.min,this.max),.5)}quadrant(t){let n=[t%2==0,t<2],u=a.b2(this.min),m=a.b2(this.max);for(let b=0;b<n.length;b++)u[b]=n[b]?this.min[b]:this.center[b],m[b]=n[b]?this.center[b]:this.max[b];return m[2]=this.max[2],new Mn(u,m)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}intersectsFrustum(t){let n=!0;for(let u=0;u<t.planes.length;u++){let m=this.intersectsPlane(t.planes[u]);if(m===0)return 0;m===1&&(n=!1)}return n?2:t.aabb.min[0]>this.max[0]||t.aabb.min[1]>this.max[1]||t.aabb.min[2]>this.max[2]||t.aabb.max[0]<this.min[0]||t.aabb.max[1]<this.min[1]||t.aabb.max[2]<this.min[2]?0:1}intersectsPlane(t){let n=t[3],u=t[3];for(let m=0;m<3;m++)t[m]>0?(n+=t[m]*this.min[m],u+=t[m]*this.max[m]):(u+=t[m]*this.min[m],n+=t[m]*this.max[m]);return n>=0?2:u<0?0:1}}class oo{distanceToTile2d(t,n,u,m){let b=m.distanceX([t,n]),w=m.distanceY([t,n]);return Math.hypot(b,w)}getWrap(t,n,u){return u}getTileBoundingVolume(t,n,u,m){var b,w;let k=0,E=0;if(m?.terrain){let D=new a.a2(t.z,n,t.z,t.x,t.y),N=m.terrain.getMinMaxElevation(D);k=(b=N.minElevation)!==null&&b!==void 0?b:Math.min(0,u),E=(w=N.maxElevation)!==null&&w!==void 0?w:Math.max(0,u)}let z=1<<t.z;return new Mn([n+t.x/z,t.y/z,k],[n+(t.x+1)/z,(t.y+1)/z,E])}allowVariableZoom(t,n){let u=t.fov*(Math.abs(Math.cos(t.rollInRadians))*t.height+Math.abs(Math.sin(t.rollInRadians))*t.width)/t.height,m=a.ao(78.5-u/2,0,60);return!!n.terrain||t.pitch>m}allowWorldCopies(){return!0}prepareNextFrame(){}}class Yr{constructor(t,n,u){this.points=t,this.planes=n,this.aabb=u}static fromInvProjectionMatrix(t,n=1,u=0,m,b){let w=b?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],k=Math.pow(2,u),E=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((j=>(function(U,X,se,le){let oe=a.aI([],U,X),ce=1/oe[3]/se*le;return a.b7(oe,oe,[ce,ce,1/oe[3],ce])})(j,t,n,k)));m&&(function(j,U,X,se){let le=se?4:0,oe=se?0:4,ce=0,me=[],he=[];for(let pe=0;pe<4;pe++){let Se=a.b3([],j[pe+oe],j[pe+le]),De=a.b8(Se);a.b0(Se,Se,1/De),me.push(De),he.push(Se)}for(let pe=0;pe<4;pe++){let Se=a.b9(j[pe+le],he[pe],X);ce=Se!==null&&Se>=0?Math.max(ce,Se):Math.max(ce,me[pe])}let ge=(function(pe,Se){let De=a.b3([],pe[Se[0]],pe[Se[1]]),Ie=a.b3([],pe[Se[2]],pe[Se[1]]),Le=[0,0,0,0];return a.b4(Le,a.b5([],De,Ie)),Le[3]=-a.b6(Le,pe[Se[0]]),Le})(j,U),be=(function(pe,Se){let De=a.ba(pe),Ie=a.bb([],pe,1/De),Le=a.b3([],Se,a.b0([],Ie,a.b6(Se,Ie))),Fe=a.ba(Le);if(Fe>0){let Xe=Math.sqrt(1-Ie[3]*Ie[3]),et=a.b0([],Ie,-Ie[3]),He=a.b1([],et,a.b0([],Le,Xe/Fe));return a.bc(Se,He)}return null})(X,ge);if(be!==null){let pe=be/a.b6(he[0],ge);ce=Math.min(ce,pe)}for(let pe=0;pe<4;pe++){let Se=Math.min(ce,me[pe]);j[pe+oe]=[j[pe+le][0]+he[pe][0]*Se,j[pe+le][1]+he[pe][1]*Se,j[pe+le][2]+he[pe][2]*Se,1]}})(E,w[0],m,b);let z=w.map((j=>{let U=a.b3([],E[j[0]],E[j[1]]),X=a.b3([],E[j[2]],E[j[1]]),se=a.b4([],a.b5([],U,X)),le=-a.b6(se,E[j[1]]);return se.concat(le)})),D=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],N=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(let j of E)for(let U=0;U<3;U++)D[U]=Math.min(D[U],j[U]),N[U]=Math.max(N[U],j[U]);return new Yr(E,z,new Mn(D,N))}}class Ea{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(t){this._helper.setMinZoom(t)}setMaxZoom(t){this._helper.setMaxZoom(t)}setMinPitch(t){this._helper.setMinPitch(t)}setMaxPitch(t){this._helper.setMaxPitch(t)}setRenderWorldCopies(t){this._helper.setRenderWorldCopies(t)}setBearing(t){this._helper.setBearing(t)}setPitch(t){this._helper.setPitch(t)}setRoll(t){this._helper.setRoll(t)}setFov(t){this._helper.setFov(t)}setZoom(t){this._helper.setZoom(t)}setCenter(t){this._helper.setCenter(t)}setElevation(t){this._helper.setElevation(t)}setMinElevationForCurrentTile(t){this._helper.setMinElevationForCurrentTile(t)}setPadding(t){this._helper.setPadding(t)}interpolatePadding(t,n,u){return this._helper.interpolatePadding(t,n,u)}isPaddingEqual(t){return this._helper.isPaddingEqual(t)}resize(t,n,u=!0){this._helper.resize(t,n,u)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(t){this._helper.setMaxBounds(t)}setConstrainOverride(t){this._helper.setConstrainOverride(t)}overrideNearFarZ(t,n){this._helper.overrideNearFarZ(t,n)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(t){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),t)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(t,n){}constructor(t){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this.defaultConstrain=(n,u)=>{u=a.ao(+u,this.minZoom,this.maxZoom);let m={center:new a.V(n.lng,n.lat),zoom:u},b=this._helper._lngRange;if(!this._helper._renderWorldCopies&&b===null){let he=179.9999999999;b=[-he,he]}let w=this.tileSize*a.ar(m.zoom),k=0,E=w,z=0,D=w,N=0,j=0,{x:U,y:X}=this.size;if(this._helper._latRange){let he=this._helper._latRange;k=a.X(he[1])*w,E=a.X(he[0])*w,E-k<X&&(N=X/(E-k))}b&&(z=a.W(a.Y(b[0])*w,0,w),D=a.W(a.Y(b[1])*w,0,w),D<z&&(D+=w),D-z<U&&(j=U/(D-z)));let{x:se,y:le}=ft(w,n),oe,ce,me=Math.max(j||0,N||0);if(me){let he=new a.P(j?(D+z)/2:se,N?(E+k)/2:le);return m.center=Et(w,he).wrap(),m.zoom+=a.au(me),m}if(this._helper._latRange){let he=X/2;le-he<k&&(ce=k+he),le+he>E&&(ce=E-he)}if(b){let he=(z+D)/2,ge=se;this._helper._renderWorldCopies&&(ge=a.W(se,he-w/2,he+w/2));let be=U/2;ge-be<z&&(oe=z+be),ge+be>D&&(oe=D-be)}if(oe!==void 0||ce!==void 0){let he=new a.P(oe??se,ce??le);m.center=Et(w,he).wrap()}return m},this.applyConstrain=(n,u)=>this._helper.applyConstrain(n,u),this._helper=new on({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(n,u)=>this.defaultConstrain(n,u)},t),this._coveringTilesDetailsProvider=new oo}clone(){let t=new Ea;return t.apply(this),t}apply(t,n,u){this._helper.apply(t,n,u)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(t){let n=[new a.bd(0,t)];if(this._helper._renderWorldCopies){let u=this.screenPointToMercatorCoordinate(new a.P(0,0)),m=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,0)),b=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,this._helper._height)),w=this.screenPointToMercatorCoordinate(new a.P(0,this._helper._height)),k=Math.floor(Math.min(u.x,m.x,b.x,w.x)),E=Math.floor(Math.max(u.x,m.x,b.x,w.x)),z=1;for(let D=k-z;D<=E+z;D++)D!==0&&n.push(new a.bd(D,t))}return n}getCameraFrustum(){return Yr.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(t){let n=this.screenPointToLocation(this.centerPoint,t),u=t?t.getElevationForLngLatZoom(n,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(u)}setLocationAtPoint(t,n){let u=a.at(this.elevation,this.center.lat),m=this.screenPointToMercatorCoordinateAtZ(n,u),b=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,u),w=a.ab.fromLngLat(t),k=new a.ab(w.x-(m.x-b.x),w.y-(m.y-b.y));this.setCenter(k?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(t,n){return n?this.coordinatePoint(a.ab.fromLngLat(t),n.getElevationForLngLat(t),this._pixelMatrix3D):this.coordinatePoint(a.ab.fromLngLat(t))}screenPointToLocation(t,n){var u;return(u=this.screenPointToMercatorCoordinate(t,n))===null||u===void 0?void 0:u.toLngLat()}screenPointToMercatorCoordinate(t,n){if(n){let u=n.pointCoordinate(t);if(u!=null)return u}return this.screenPointToMercatorCoordinateAtZ(t)}screenPointToMercatorCoordinateAtZ(t,n){let u=n||0,m=[t.x,t.y,0,1],b=[t.x,t.y,1,1];a.aI(m,m,this._pixelMatrixInverse),a.aI(b,b,this._pixelMatrixInverse);let w=m[3],k=b[3],E=m[1]/w,z=b[1]/k,D=m[2]/w,N=b[2]/k,j=D===N?0:(u-D)/(N-D);return new a.ab(a.G.number(m[0]/w,b[0]/k,j)/this.worldSize,a.G.number(E,z,j)/this.worldSize,u)}coordinatePoint(t,n=0,u=this._pixelMatrix){let m=[t.x*this.worldSize,t.y*this.worldSize,n,1];return a.aI(m,m,u),new a.P(m[0]/m[3],m[1]/m[3])}getBounds(){let t=Math.max(0,this._helper._height/2-ui(this));return new Ei().extend(this.screenPointToLocation(new a.P(0,t))).extend(this.screenPointToLocation(new a.P(this._helper._width,t))).extend(this.screenPointToLocation(new a.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new a.P(0,this._helper._height)))}isPointOnMapSurface(t,n){return n?n.pointCoordinate(t)!=null:t.y>this.height/2-ui(this)}calculatePosMatrix(t,n=!1,u){var m;let b=(m=t.key)!==null&&m!==void 0?m:a.be(t.wrap,t.canonical.z,t.canonical.z,t.canonical.x,t.canonical.y),w=n?this._alignedPosMatrixCache:this._posMatrixCache;if(w.has(b)){let z=w.get(b);return u?z.f32:z.f64}let k=ai(t,this.worldSize);a.S(k,n?this._alignedProjMatrix:this._viewProjMatrix,k);let E={f64:k,f32:new Float32Array(k)};return w.set(b,E),u?E.f32:E.f64}calculateFogMatrix(t){let n=t.key,u=this._fogMatrixCacheF32;if(u.has(n))return u.get(n);let m=ai(t,this.worldSize);return a.S(m,this._fogMatrix,m),u.set(n,new Float32Array(m)),u.get(n)}calculateCenterFromCameraLngLatAlt(t,n,u,m){return this._helper.calculateCenterFromCameraLngLatAlt(t,n,u,m)}_calculateNearFarZIfNeeded(t,n,u){if(!this._helper.autoCalculateNearFarZ)return;let m=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),b=t-m*this._helper._pixelPerMeter/Math.cos(n),w=m<0?b:t,k=Math.PI/2+this.pitchInRadians,E=a.aq(this.fov)*(Math.abs(Math.cos(a.aq(this.roll)))*this.height+Math.abs(Math.sin(a.aq(this.roll)))*this.width)/this.height*(.5+u.y/this.height),z=Math.sin(E)*w/Math.sin(a.ao(Math.PI-k-E,.01,Math.PI-.01)),D=ui(this),N=Math.atan(D/this._helper.cameraToCenterDistance),j=a.aq(.75),U=N>j?2*N*(.5+u.y/(2*D)):j,X=Math.sin(U)*w/Math.sin(a.ao(Math.PI-k-U,.01,Math.PI-.01)),se=Math.min(z,X);this._helper._farZ=1.01*(Math.cos(Math.PI/2-n)*se+w),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;let t=this.centerOffset,n=ft(this.worldSize,this.center),u=n.x,m=n.y;this._helper._pixelPerMeter=a.at(1,this.center.lat)*this.worldSize;let b=a.aq(Math.min(this.pitch,st)),w=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(b)),k;this._calculateNearFarZIfNeeded(w,b,t),k=new Float64Array(16),a.bf(k,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),a.aC(this._invProjMatrix,k),k[8]=2*-t.x/this._helper._width,k[9]=2*t.y/this._helper._height,this._projectionMatrix=a.bg(k),a.Q(k,k,[1,-1,1]),a.O(k,k,[0,0,-this._helper.cameraToCenterDistance]),a.bh(k,k,-this.rollInRadians),a.bi(k,k,this.pitchInRadians),a.bh(k,k,-this.bearingInRadians),a.O(k,k,[-u,-m,0]),this._mercatorMatrix=a.Q([],k,[this.worldSize,this.worldSize,this.worldSize]),a.Q(k,k,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=a.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,k),a.O(k,k,[0,0,-this.elevation]),this._viewProjMatrix=k,this._invViewProjMatrix=a.aC([],k);let E=[0,0,-1,1];a.aI(E,E,this._invViewProjMatrix),this._cameraPosition=[E[0]/E[3],E[1]/E[3],E[2]/E[3]],this._fogMatrix=new Float64Array(16),a.bf(this._fogMatrix,this.fovInRadians,this.width/this.height,w,this._helper._farZ),this._fogMatrix[8]=2*-t.x/this.width,this._fogMatrix[9]=2*t.y/this.height,a.Q(this._fogMatrix,this._fogMatrix,[1,-1,1]),a.O(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),a.bh(this._fogMatrix,this._fogMatrix,-this.rollInRadians),a.bi(this._fogMatrix,this._fogMatrix,this.pitchInRadians),a.bh(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),a.O(this._fogMatrix,this._fogMatrix,[-u,-m,0]),a.Q(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),a.O(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=a.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,k);let z=this._helper._width%2/2,D=this._helper._height%2/2,N=Math.cos(this.bearingInRadians),j=Math.sin(-this.bearingInRadians),U=u-Math.round(u)+N*z+j*D,X=m-Math.round(m)+N*D+j*z,se=new Float64Array(k);if(a.O(se,se,[U>.5?U-1:U,X>.5?X-1:X,0]),this._alignedProjMatrix=se,k=a.aC(new Float64Array(16),this._pixelMatrix),!k)throw new Error("failed to invert matrix");this._pixelMatrixInverse=k,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;let t=this.screenPointToMercatorCoordinate(new a.P(0,0)),n=[t.x*this.worldSize,t.y*this.worldSize,0,1];return a.aI(n,n,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){let t=a.at(1,this.center.lat)*this.worldSize;return ze(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/t).toLngLat()}lngLatToCameraDepth(t,n){let u=a.ab.fromLngLat(t),m=[u.x*this.worldSize,u.y*this.worldSize,n,1];return a.aI(m,m,this._viewProjMatrix),m[2]/m[3]}getProjectionData(t){let{overscaledTileID:n,aligned:u,applyTerrainMatrix:m}=t,b=this._helper.getMercatorTileCoordinates(n),w=n?this.calculatePosMatrix(n,u,!0):null,k;return k=n&&n.terrainRttPosMatrix32f&&m?n.terrainRttPosMatrix32f:w||a.bj(),{mainMatrix:k,tileMercatorCoords:b,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:k}}isLocationOccluded(t){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(t,n,u){return 1}transformLightDirection(t){return a.b2(t)}getRayDirectionFromPixel(t){throw new Error("Not implemented.")}projectTileCoordinates(t,n,u,m){let b=this.calculatePosMatrix(u),w;m?(w=[t,n,m(t,n),1],a.aI(w,w,b)):(w=[t,n,0,1],Ya(w,w,b));let k=w[3];return{point:new a.P(w[0]/k,w[1]/k),signedDistanceFromCamera:k,isOccluded:!1}}populateCache(t){for(let n of t)this.calculatePosMatrix(n)}getMatrixForModel(t,n){let u=a.ab.fromLngLat(t,n),m=u.meterInMercatorCoordinateUnits(),b=a.bk();return a.O(b,b,[u.x,u.y,u.z]),a.bh(b,b,Math.PI),a.bi(b,b,Math.PI/2),a.Q(b,b,[-m,m,m]),b}getProjectionDataForCustomLayer(t=!0){let n=new a.a2(0,0,0,0,0),u=this.getProjectionData({overscaledTileID:n,applyGlobeMatrix:t}),m=ai(n,this.worldSize);a.S(m,this._viewProjMatrix,m),u.tileMercatorCoords=[0,0,1,1];let b=[a.a5,a.a5,this.worldSize/this._helper.pixelsPerMeter],w=a.bl();return a.Q(w,m,b),u.fallbackMatrix=w,u.mainMatrix=w,u}getFastPathSimpleProjectionMatrix(t){return this.calculatePosMatrix(t)}}function In(){a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function mc(_){if(_.useSlerp)if(_.k<1){let t=a.bm(_.startEulerAngles.roll,_.startEulerAngles.pitch,_.startEulerAngles.bearing),n=a.bm(_.endEulerAngles.roll,_.endEulerAngles.pitch,_.endEulerAngles.bearing),u=new Float64Array(4);a.bn(u,t,n,_.k);let m=a.bo(u);_.tr.setRoll(m.roll),_.tr.setPitch(m.pitch),_.tr.setBearing(m.bearing)}else _.tr.setRoll(_.endEulerAngles.roll),_.tr.setPitch(_.endEulerAngles.pitch),_.tr.setBearing(_.endEulerAngles.bearing);else _.tr.setRoll(a.G.number(_.startEulerAngles.roll,_.endEulerAngles.roll,_.k)),_.tr.setPitch(a.G.number(_.startEulerAngles.pitch,_.endEulerAngles.pitch,_.k)),_.tr.setBearing(a.G.number(_.startEulerAngles.bearing,_.endEulerAngles.bearing,_.k))}function Ho(_,t,n,u,m){let b=m.padding,w=ft(m.worldSize,n.getNorthWest()),k=ft(m.worldSize,n.getNorthEast()),E=ft(m.worldSize,n.getSouthEast()),z=ft(m.worldSize,n.getSouthWest()),D=a.aq(-u),N=w.rotate(D),j=k.rotate(D),U=E.rotate(D),X=z.rotate(D),se=new a.P(Math.max(N.x,j.x,X.x,U.x),Math.max(N.y,j.y,X.y,U.y)),le=new a.P(Math.min(N.x,j.x,X.x,U.x),Math.min(N.y,j.y,X.y,U.y)),oe=se.sub(le),ce=(m.width-(b.left+b.right+t.left+t.right))/oe.x,me=(m.height-(b.top+b.bottom+t.top+t.bottom))/oe.y;if(me<0||ce<0)return void In();let he=Math.min(a.au(m.scale*Math.min(ce,me)),_.maxZoom),ge=a.P.convert(_.offset),be=new a.P((t.left-t.right)/2,(t.top-t.bottom)/2).rotate(a.aq(u)),pe=ge.add(be).mult(m.scale/a.ar(he));return{center:Et(m.worldSize,w.add(E).div(2).sub(pe)),zoom:he,bearing:u}}class Zt{get useGlobeControls(){return!1}handlePanInertia(t,n){let u=t.mag(),m=Math.abs(ui(n));return{easingOffset:t.mult(Math.min(.75*m/u,1)),easingCenter:n.center}}handleMapControlsRollPitchBearingZoom(t,n){t.bearingDelta&&n.setBearing(n.bearing+t.bearingDelta),t.pitchDelta&&n.setPitch(n.pitch+t.pitchDelta),t.rollDelta&&n.setRoll(n.roll+t.rollDelta),t.zoomDelta&&n.setZoom(n.zoom+t.zoomDelta)}handleMapControlsPan(t,n,u){t.around.distSqr(n.centerPoint)<.01||n.setLocationAtPoint(u,t.around)}cameraForBoxAndBearing(t,n,u,m,b){return Ho(t,n,u,m,b)}handleJumpToCenterZoom(t,n){t.zoom!==(n.zoom!==void 0?+n.zoom:t.zoom)&&t.setZoom(+n.zoom),n.center!==void 0&&t.setCenter(a.V.convert(n.center))}handleEaseTo(t,n){let u=t.zoom,m=t.padding,b={roll:t.roll,pitch:t.pitch,bearing:t.bearing},w={roll:n.roll===void 0?t.roll:n.roll,pitch:n.pitch===void 0?t.pitch:n.pitch,bearing:n.bearing===void 0?t.bearing:n.bearing},k=n.zoom!==void 0,E=!t.isPaddingEqual(n.padding),z=!1,D=k?+n.zoom:t.zoom,N=t.centerPoint.add(n.offsetAsPoint),j=t.screenPointToLocation(N),{center:U,zoom:X}=t.applyConstrain(a.V.convert(n.center||j),D??u);_n(t,U);let se=ft(t.worldSize,j),le=ft(t.worldSize,U).sub(se),oe=a.ar(X-u);return z=X!==u,{easeFunc:ce=>{if(z&&t.setZoom(a.G.number(u,X,ce)),a.bp(b,w)||mc({startEulerAngles:b,endEulerAngles:w,tr:t,k:ce,useSlerp:b.roll!=w.roll}),E&&(t.interpolatePadding(m,n.padding,ce),N=t.centerPoint.add(n.offsetAsPoint)),n.around)t.setLocationAtPoint(n.around,n.aroundPoint);else{let me=a.ar(t.zoom-u),he=X>u?Math.min(2,oe):Math.max(.5,oe),ge=Math.pow(he,1-ce),be=Et(t.worldSize,se.add(le.mult(ce*ge)).mult(me));t.setLocationAtPoint(t.renderWorldCopies?be.wrap():be,N)}},isZooming:z,elevationCenter:U}}handleFlyTo(t,n){let u=n.zoom!==void 0,m=t.zoom,b=t.applyConstrain(a.V.convert(n.center||n.locationAtOffset),u?+n.zoom:m),w=b.center,k=b.zoom;_n(t,w);let E=ft(t.worldSize,n.locationAtOffset),z=ft(t.worldSize,w).sub(E),D=z.mag(),N=a.ar(k-m),j;if(n.minZoom!==void 0){let U=Math.min(+n.minZoom,m,k),X=t.applyConstrain(w,U).zoom;j=a.ar(X-m)}return{easeFunc:(U,X,se,le)=>{t.setZoom(U===1?k:m+a.au(X));let oe=U===1?w:Et(t.worldSize,E.add(z.mult(se)).mult(X));t.setLocationAtPoint(t.renderWorldCopies?oe.wrap():oe,le)},scaleOfZoom:N,targetCenter:w,scaleOfMinZoom:j,pixelPathLength:D}}}class Si{constructor(t,n,u){this.blendFunction=t,this.blendColor=n,this.mask=u}}Si.Replace=[1,0],Si.disabled=new Si(Si.Replace,a.bq.transparent,[!1,!1,!1,!1]),Si.unblended=new Si(Si.Replace,a.bq.transparent,[!0,!0,!0,!0]),Si.alphaBlended=new Si([1,771],a.bq.transparent,[!0,!0,!0,!0]);let Pr=2305;class Wt{constructor(t,n,u){this.enable=t,this.mode=n,this.frontFace=u}}Wt.disabled=new Wt(!1,1029,Pr),Wt.backCCW=new Wt(!0,1029,Pr),Wt.frontCCW=new Wt(!0,1028,Pr);class Ot{constructor(t,n,u){this.func=t,this.mask=n,this.range=u}}Ot.ReadOnly=!1,Ot.ReadWrite=!0,Ot.disabled=new Ot(519,Ot.ReadOnly,[0,1]);let Ps=7680;class Jt{constructor(t,n,u,m,b,w){this.test=t,this.ref=n,this.mask=u,this.fail=m,this.depthFail=b,this.pass=w}}Jt.disabled=new Jt({func:519,mask:0},0,0,Ps,Ps,Ps);let lo=new WeakMap;function ln(_){var t;if(lo.has(_))return lo.get(_);{let n=(t=_.getParameter(_.VERSION))===null||t===void 0?void 0:t.startsWith("WebGL 2.0");return lo.set(_,n),n}}class Es{get awaitingQuery(){return!!this._readbackQueue}constructor(t){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=t;let n=t.context,u=n.gl;this._texFormat=u.RGBA,this._texType=u.UNSIGNED_BYTE;let m=new a.aX;m.emplaceBack(-1,-1),m.emplaceBack(2,-1),m.emplaceBack(-1,2);let b=new a.aZ;b.emplaceBack(0,1,2),this._fullscreenTriangle=new gi(n.createVertexBuffer(m,Zn.members),n.createIndexBuffer(b),a.aY.simpleSegment(0,0,m.length,b.length)),this._resultBuffer=new Uint8Array(4),n.activeTexture.set(u.TEXTURE1);let w=u.createTexture();u.bindTexture(u.TEXTURE_2D,w),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.NEAREST),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.NEAREST),u.texImage2D(u.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=n.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(w),ln(u)&&(this._pbo=u.createBuffer(),u.bindBuffer(u.PIXEL_PACK_BUFFER,this._pbo),u.bufferData(u.PIXEL_PACK_BUFFER,4,u.STREAM_READ),u.bindBuffer(u.PIXEL_PACK_BUFFER,null))}destroy(){let t=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),t.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(t,n){let u=this._updateCount;return this._readbackQueue?u>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():u>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(t,n),this._updateCount++,this._measuredError}_bindFramebuffer(){let t=this._cachedRenderContext.context,n=t.gl;t.activeTexture.set(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,this._fbo.colorAttachment.get()),t.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(t,n){let u=this._cachedRenderContext.context,m=u.gl;if(this._bindFramebuffer(),u.viewport.set([0,0,this._texWidth,this._texHeight]),u.clear({color:a.bq.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(u,m.TRIANGLES,Ot.disabled,Jt.disabled,Si.unblended,Wt.disabled,((b,w)=>({u_input:b,u_output_expected:w}))(t,n),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&ln(m)){m.bindBuffer(m.PIXEL_PACK_BUFFER,this._pbo),m.readBuffer(m.COLOR_ATTACHMENT0),m.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),m.bindBuffer(m.PIXEL_PACK_BUFFER,null);let b=m.fenceSync(m.SYNC_GPU_COMMANDS_COMPLETE,0);m.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:b}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){let t=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&ln(t)){let n=t.clientWaitSync(this._readbackQueue.sync,0,0);if(n===t.WAIT_FAILED)return a.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(n===t.TIMEOUT_EXPIRED)return;t.bindBuffer(t.PIXEL_PACK_BUFFER,this._pbo),t.getBufferSubData(t.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),t.bindBuffer(t.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),t.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Es._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(t){let n=0;return n+=t[0]/256,n+=t[1]/65536,n+=t[2]/16777216,t[3]<127&&(n=-n),n/128}}let Aa=a.a5/128;function Yo(_,t){let n=_.granularity!==void 0?Math.max(_.granularity,1):1,u=n+(_.generateBorders?2:0),m=n+(_.extendToNorthPole||_.generateBorders?1:0)+(_.extendToSouthPole||_.generateBorders?1:0),b=u+1,w=m+1,k=_.generateBorders?-1:0,E=_.generateBorders||_.extendToNorthPole?-1:0,z=n+(_.generateBorders?1:0),D=n+(_.generateBorders||_.extendToSouthPole?1:0),N=b*w,j=u*m*6,U=b*w>65536;if(U&&t==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");let X=U||t==="32bit",se=new Int16Array(2*N),le=0;for(let me=E;me<=D;me++)for(let he=k;he<=z;he++){let ge=he/n*a.a5;he===-1&&(ge=-Aa),he===n+1&&(ge=a.a5+Aa);let be=me/n*a.a5;me===-1&&(be=_.extendToNorthPole?a.bs:-Aa),me===n+1&&(be=_.extendToSouthPole?a.bt:a.a5+Aa),se[le++]=ge,se[le++]=be}let oe=X?new Uint32Array(j):new Uint16Array(j),ce=0;for(let me=0;me<m;me++)for(let he=0;he<u;he++){let ge=he+1+me*b,be=he+(me+1)*b,pe=he+1+(me+1)*b;oe[ce++]=he+me*b,oe[ce++]=be,oe[ce++]=ge,oe[ce++]=ge,oe[ce++]=be,oe[ce++]=pe}return{vertices:se.buffer.slice(0),indices:oe.buffer.slice(0),uses32bitIndices:X}}let co=new a.aW({fill:new a.bu(128,2),line:new a.bu(512,0),tile:new a.bu(128,32),stencil:new a.bu(128,1),circle:3});class vn{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return li.projectionGlobe}get vertexShaderPreludeCode(){return li.projectionMercator.vertexSource}get subdivisionGranularity(){return co}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(t){this._errorMeasurement||(this._errorMeasurement=new Es(t));let n=a.X(this._errorQueryLatitudeDegrees),u=2*Math.atan(Math.exp(Math.PI-n*Math.PI*2))-.5*Math.PI,m=this._errorMeasurement.updateErrorLoop(n,u),b=ae();m!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=m,this._errorMeasurementLastChangeTime=b);let w=Math.min(Math.max((b-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=a.bv(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,a.bw(w))}_getMeshKey(t){return`${t.granularity.toString(36)}_${t.generateBorders?"b":""}${t.extendToNorthPole?"n":""}${t.extendToSouthPole?"s":""}`}getMeshFromTileID(t,n,u,m,b){let w=(b==="stencil"?co.stencil:co.tile).getGranularityForZoomLevel(n.z);return this._getMesh(t,{granularity:w,generateBorders:u,extendToNorthPole:n.y===0&&m,extendToSouthPole:n.y===(1<<n.z)-1&&m})}_getMesh(t,n){let u=this._getMeshKey(n);if(u in this._tileMeshCache)return this._tileMeshCache[u];let m=(function(b,w){let k=Yo(w,"16bit"),E=a.aX.deserialize({arrayBuffer:k.vertices,length:k.vertices.byteLength/2/2}),z=a.aZ.deserialize({arrayBuffer:k.indices,length:k.indices.byteLength/2/3});return new gi(b.createVertexBuffer(E,Zn.members),b.createIndexBuffer(z),a.aY.simpleSegment(0,0,E.length,z.length))})(t,n);return this._tileMeshCache[u]=m,m}recalculate(t){}hasTransition(){let t=ae(),n=!1;return n=n||(t-this._errorMeasurementLastChangeTime)/1e3<.7,n=n||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,n}setErrorQueryLatitudeDegrees(t){this._errorQueryLatitudeDegrees=t}}let qu=new a.t({type:new a.D(a.u.projection.type)});class zl extends a.E{constructor(t){super(),this._transitionable=new a.x(qu,void 0),this.setProjection(t),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.H(0)),this._mercatorProjection=new Xi,this._verticalPerspectiveProjection=new vn}get transitionState(){let t=this.properties.get("type");if(typeof t=="string"&&t==="mercator")return 0;if(typeof t=="string"&&t==="vertical-perspective")return 1;if(t instanceof a.bx){if(t.from==="vertical-perspective"&&t.to==="mercator")return 1-t.transition;if(t.from==="mercator"&&t.to==="vertical-perspective")return t.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(t){this._mercatorProjection.updateGPUdependent(t),this._verticalPerspectiveProjection.updateGPUdependent(t)}getMeshFromTileID(t,n,u,m,b){return this.currentProjection.getMeshFromTileID(t,n,u,m,b)}setProjection(t){this._transitionable.setValue("type",t?.type||"mercator")}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}setErrorQueryLatitudeDegrees(t){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(t),this._mercatorProjection.setErrorQueryLatitudeDegrees(t)}}function Wi(_){let t=oa(_.worldSize,_.center.lat);return 2*Math.PI*t}function zn(_,t,n,u,m){let b=1/(1<<m),w=t/a.a5*b+u*b,k=a.bz((_/a.a5*b+n*b)*Math.PI*2+Math.PI,2*Math.PI),E=2*Math.atan(Math.exp(Math.PI-w*Math.PI*2))-.5*Math.PI,z=Math.cos(E),D=new Float64Array(3);return D[0]=Math.sin(k)*z,D[1]=Math.sin(E),D[2]=Math.cos(k)*z,D}function ki(_){return(function(t,n){let u=Math.cos(n),m=new Float64Array(3);return m[0]=Math.sin(t)*u,m[1]=Math.sin(n),m[2]=Math.cos(t)*u,m})(_.lng*Math.PI/180,_.lat*Math.PI/180)}function oa(_,t){return _/(2*Math.PI)/Math.cos(t*Math.PI/180)}function Ll(_){let t=Math.asin(_[1])/Math.PI*180,n=Math.sqrt(_[0]*_[0]+_[2]*_[2]);if(n>1e-6){let u=_[0]/n,m=Math.acos(_[2]/n),b=(u>0?m:-m)/Math.PI*180;return new a.V(a.W(b,-180,180),t)}return new a.V(0,t)}function As(_){return Math.cos(_*Math.PI/180)}function Ii(_,t){let n=As(_),u=As(t);return a.au(u/n)}function gc(_,t){let n=_.rotate(t.bearingInRadians),u=t.zoom+Ii(t.center.lat,0),m=a.bv(1/As(t.center.lat),1/As(Math.min(Math.abs(t.center.lat),60)),a.by(u,7,3,0,1)),b=360/Wi({worldSize:t.worldSize,center:{lat:t.center.lat}});return new a.V(t.center.lng-n.x*b*m,a.ao(t.center.lat+n.y*b,-a.ap,a.ap))}function Ol(_){let t=.5*_,n=Math.sin(t),u=Math.cos(t);return Math.log(n+u)-Math.log(u-n)}function Xo(_,t,n,u){let m=_.lat+n*u;if(Math.abs(n)>1){let b=(Math.sign(_.lat+n)!==Math.sign(_.lat)?-Math.abs(_.lat):Math.abs(_.lat))*Math.PI/180,w=Math.abs(_.lat+n)*Math.PI/180,k=Ol(b+u*(w-b)),E=Ol(b),z=Ol(w);return new a.V(_.lng+t*((k-E)/(z-E)),m)}return new a.V(_.lng+t*u,m)}class Vu{constructor(t){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=t}swapBuffers(){if(!this._hadAnyChanges)return;let t=this._cachePrevious;this._cachePrevious=this._cache,this._cache=t,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(t,n,u,m){let b=`${t.z}_${t.x}_${t.y}_${m?.terrain?"t":""}`,w=this._cache.get(b);if(w)return w;let k=this._cachePrevious.get(b);if(k)return this._cache.set(b,k),k;let E=this._boundingVolumeFactory(t,n,u,m);return this._cache.set(b,E),this._hadAnyChanges=!0,E}}class Qa{constructor(t,n,u,m){this.min=u,this.max=m,this.points=t,this.planes=n}static fromAabb(t,n){let u=[];for(let m=0;m<8;m++)u.push([1&~m?t[0]:n[0],(m>>1&1)==1?n[1]:t[1],(m>>2&1)==1?n[2]:t[2]]);return new Qa(u,[[-1,0,0,n[0]],[1,0,0,-t[0]],[0,-1,0,n[1]],[0,1,0,-t[1]],[0,0,-1,n[2]],[0,0,1,-t[2]]],t,n)}static fromCenterSizeAngles(t,n,u){let m=a.bC([],u[0],u[1],u[2]),b=a.bD([],[n[0],0,0],m),w=a.bD([],[0,n[1],0],m),k=a.bD([],[0,0,n[2]],m),E=[...t],z=[...t];for(let N=0;N<8;N++)for(let j=0;j<3;j++){let U=t[j]+b[j]*(1&~N?-1:1)+w[j]*((N>>1&1)==1?1:-1)+k[j]*((N>>2&1)==1?1:-1);E[j]=Math.min(E[j],U),z[j]=Math.max(z[j],U)}let D=[];for(let N=0;N<8;N++){let j=[...t];a.b1(j,j,a.b0([],b,1&~N?-1:1)),a.b1(j,j,a.b0([],w,(N>>1&1)==1?1:-1)),a.b1(j,j,a.b0([],k,(N>>2&1)==1?1:-1)),D.push(j)}return new Qa(D,[[...b,-a.b6(b,D[0])],[...w,-a.b6(w,D[0])],[...k,-a.b6(k,D[0])],[-b[0],-b[1],-b[2],-a.b6(b,D[7])],[-w[0],-w[1],-w[2],-a.b6(w,D[7])],[-k[0],-k[1],-k[2],-a.b6(k,D[7])]],E,z)}intersectsFrustum(t){let n=!0,u=this.points.length,m=this.planes.length,b=t.planes.length,w=t.points.length;for(let k=0;k<b;k++){let E=t.planes[k],z=0;for(let D=0;D<u;D++){let N=this.points[D];E[0]*N[0]+E[1]*N[1]+E[2]*N[2]+E[3]>=0&&z++}if(z===0)return 0;z<u&&(n=!1)}if(n)return 2;for(let k=0;k<m;k++){let E=this.planes[k],z=0;for(let D=0;D<w;D++){let N=t.points[D];E[0]*N[0]+E[1]*N[1]+E[2]*N[2]+E[3]>=0&&z++}if(z===0)return 0}return 1}intersectsPlane(t){let n=this.points.length,u=0;for(let m=0;m<n;m++){let b=this.points[m];t[0]*b[0]+t[1]*b[1]+t[2]*b[2]+t[3]>=0&&u++}return u===n?2:u===0?0:1}}function uo(_,t,n){let u=_-t;return u<0?-u:Math.max(0,u-n)}function la(_,t,n,u,m){let b=_-n,w;return w=b<0?Math.min(-b,1+b-m):b>1?Math.min(Math.max(b-m,0),1-b):0,Math.max(w,uo(t,u,m))}class ca{constructor(){this._boundingVolumeCache=new Vu(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(t,n,u,m){let b=1<<u.z,w=1/b,k=u.x/b,E=u.y/b,z=2;return z=Math.min(z,la(t,n,k,E,w)),z=Math.min(z,la(t,n,k+.5,-E-w,w)),z=Math.min(z,la(t,n,k+.5,2-E-w,w)),z}getWrap(t,n,u){let m=1<<n.z,b=1/m,w=n.x/m,k=uo(t.x,w,b),E=uo(t.x,w-1,b),z=uo(t.x,w+1,b),D=Math.min(k,E,z);return D===z?1:D===E?-1:0}allowVariableZoom(t,n){return bi(t,n)>4}allowWorldCopies(){return!1}getTileBoundingVolume(t,n,u,m){return this._boundingVolumeCache.getTileBoundingVolume(t,n,u,m)}_computeTileBoundingVolume(t,n,u,m){var b,w;let k=0,E=0;if(m?.terrain){let z=new a.a2(t.z,n,t.z,t.x,t.y),D=m.terrain.getMinMaxElevation(z);k=(b=D.minElevation)!==null&&b!==void 0?b:Math.min(0,u),E=(w=D.maxElevation)!==null&&w!==void 0?w:Math.max(0,u)}if(k/=a.bF,E/=a.bF,k+=1,E+=1,t.z<=0)return Qa.fromAabb([-E,-E,-E],[E,E,E]);if(t.z===1)return Qa.fromAabb([t.x===0?-E:0,t.y===0?0:-E,-E],[t.x===0?0:E,t.y===0?E:0,E]);{let z=[zn(0,0,t.x,t.y,t.z),zn(a.a5,0,t.x,t.y,t.z),zn(a.a5,a.a5,t.x,t.y,t.z),zn(0,a.a5,t.x,t.y,t.z)],D=[];for(let Le of z)D.push(a.b0([],Le,E));if(E!==k)for(let Le of z)D.push(a.b0([],Le,k));t.y===0&&D.push([0,1,0]),t.y===(1<<t.z)-1&&D.push([0,-1,0]);let N=[1,1,1],j=[-1,-1,-1];for(let Le of D)for(let Fe=0;Fe<3;Fe++)N[Fe]=Math.min(N[Fe],Le[Fe]),j[Fe]=Math.max(j[Fe],Le[Fe]);let U=zn(a.a5/2,a.a5/2,t.x,t.y,t.z),X=a.b5([],[0,1,0],U);a.b4(X,X);let se=a.b5([],U,X);a.b4(se,se);let le=a.b5([],z[2],z[1]);a.b4(le,le);let oe=a.b5([],z[0],z[3]);a.b4(oe,oe),D.push(a.b0([],U,E)),t.y>=(1<<t.z)/2&&D.push(a.b0([],zn(a.a5/2,0,t.x,t.y,t.z),E)),t.y<(1<<t.z)/2&&D.push(a.b0([],zn(a.a5/2,a.a5,t.x,t.y,t.z),E));let ce=ho(U,D),me=ho(se,D),he=[-U[0],-U[1],-U[2],ce.max],ge=[U[0],U[1],U[2],-ce.min],be=[-se[0],-se[1],-se[2],me.max],pe=[se[0],se[1],se[2],-me.min],Se=[...le,0],De=[...oe,0],Ie=[];return t.y===0?Ie.push(a.bE(De,Se,he),a.bE(De,Se,ge)):Ie.push(a.bE(be,Se,he),a.bE(be,Se,ge),a.bE(be,De,he),a.bE(be,De,ge)),t.y===(1<<t.z)-1?Ie.push(a.bE(De,Se,he),a.bE(De,Se,ge)):Ie.push(a.bE(pe,Se,he),a.bE(pe,Se,ge),a.bE(pe,De,he),a.bE(pe,De,ge)),new Qa(Ie,[he,ge,be,pe,Se,De],N,j)}}}function ho(_,t){let n=1/0,u=-1/0;for(let m of t){let b=a.b6(_,m);n=Math.min(n,b),u=Math.max(u,b)}return{min:n,max:u}}class $n{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(t){this._helper.setMinZoom(t)}setMaxZoom(t){this._helper.setMaxZoom(t)}setMinPitch(t){this._helper.setMinPitch(t)}setMaxPitch(t){this._helper.setMaxPitch(t)}setRenderWorldCopies(t){this._helper.setRenderWorldCopies(t)}setBearing(t){this._helper.setBearing(t)}setPitch(t){this._helper.setPitch(t)}setRoll(t){this._helper.setRoll(t)}setFov(t){this._helper.setFov(t)}setZoom(t){this._helper.setZoom(t)}setCenter(t){this._helper.setCenter(t)}setElevation(t){this._helper.setElevation(t)}setMinElevationForCurrentTile(t){this._helper.setMinElevationForCurrentTile(t)}setPadding(t){this._helper.setPadding(t)}interpolatePadding(t,n,u){return this._helper.interpolatePadding(t,n,u)}isPaddingEqual(t){return this._helper.isPaddingEqual(t)}resize(t,n){this._helper.resize(t,n)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(t){this._helper.setMaxBounds(t)}setConstrainOverride(t){this._helper.setConstrainOverride(t)}overrideNearFarZ(t,n){this._helper.overrideNearFarZ(t,n)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(t){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),t)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(t){}constructor(t){this._cachedClippingPlane=a.bG(),this._projectionMatrix=a.bk(),this._globeViewProjMatrix32f=a.bj(),this._globeViewProjMatrixNoCorrection=a.bk(),this._globeViewProjMatrixNoCorrectionInverted=a.bk(),this._globeProjMatrixInverted=a.bk(),this._cameraPosition=a.bA(),this._globeLatitudeErrorCorrectionRadians=0,this.defaultConstrain=(n,u)=>{let m=a.ao(n.lat,-a.ap,a.ap),b=a.ao(+u,this.minZoom+Ii(0,m),this.maxZoom);return{center:new a.V(n.lng,m),zoom:b}},this.applyConstrain=(n,u)=>this._helper.applyConstrain(n,u),this._helper=new on({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(n,u)=>this.defaultConstrain(n,u)},t),this._coveringTilesDetailsProvider=new ca}clone(){let t=new $n;return t.apply(this),t}apply(t,n){this._globeLatitudeErrorCorrectionRadians=n||0,this._helper.apply(t)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){let t=a.bA();return t[0]=this._cameraPosition[0],t[1]=this._cameraPosition[1],t[2]=this._cameraPosition[2],t}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(t){let{overscaledTileID:n,applyGlobeMatrix:u}=t,m=this._helper.getMercatorTileCoordinates(n);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:m,clippingPlane:this._cachedClippingPlane,projectionTransition:u?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(t){let n=this.pitchInRadians,u=this.cameraToCenterDistance/t,m=Math.sin(n)*u,b=Math.cos(n)*u+1,w=1/Math.sqrt(m*m+b*b)*1,k=-m,E=b,z=Math.sqrt(k*k+E*E);k/=z,E/=z;let D=[0,k,E];a.bH(D,D,[0,0,0],-this.bearingInRadians),a.bI(D,D,[0,0,0],-1*this.center.lat*Math.PI/180),a.bJ(D,D,[0,0,0],this.center.lng*Math.PI/180);let N=1/a.b8(D);return a.b0(D,D,N),[...D,-w*N]}isLocationOccluded(t){return!this.isSurfacePointVisible(ki(t))}transformLightDirection(t){let n=this._helper._center.lng*Math.PI/180,u=this._helper._center.lat*Math.PI/180,m=Math.cos(u),b=[Math.sin(n)*m,Math.sin(u),Math.cos(n)*m],w=[b[2],0,-b[0]],k=[0,0,0];a.b5(k,w,b),a.b4(w,w),a.b4(k,k);let E=[0,0,0];return a.b4(E,[w[0]*t[0]+k[0]*t[1]+b[0]*t[2],w[1]*t[0]+k[1]*t[1]+b[1]*t[2],w[2]*t[0]+k[2]*t[1]+b[2]*t[2]]),E}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(t,n,u){let m=(function(k,E,z){let D=1/(1<<z.z);return new a.ab(k/a.a5*D+z.x*D,E/a.a5*D+z.y*D)})(t,n,u.canonical),b=(w=m.y,[a.bz(m.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-w*Math.PI*2))-.5*Math.PI]);var w;return this.getCircleRadiusCorrection()/Math.cos(b[1])}projectTileCoordinates(t,n,u,m){let b=u.canonical,w=zn(t,n,b.x,b.y,b.z),k=1+(m?m(t,n):0)/a.bF,E=[w[0]*k,w[1]*k,w[2]*k,1];a.aI(E,E,this._globeViewProjMatrixNoCorrection);let z=this._cachedClippingPlane,D=z[0]*w[0]+z[1]*w[1]+z[2]*w[2]+z[3]<0;return{point:new a.P(E[0]/E[3],E[1]/E[3]),signedDistanceFromCamera:E[3],isOccluded:D}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;let t=oa(this.worldSize,this.center.lat),n=a.bl(),u=a.bl();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*t),a.bf(n,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);let m=this.centerOffset;n[8]=2*-m.x/this._helper._width,n[9]=2*m.y/this._helper._height,this._projectionMatrix=a.bg(n),this._globeProjMatrixInverted=a.bl(),a.aC(this._globeProjMatrixInverted,n),a.O(n,n,[0,0,-this.cameraToCenterDistance]),a.bh(n,n,this.rollInRadians),a.bi(n,n,-this.pitchInRadians),a.bh(n,n,this.bearingInRadians),a.O(n,n,[0,0,-t]);let b=a.bA();b[0]=t,b[1]=t,b[2]=t,a.bi(u,n,this.center.lat*Math.PI/180),a.bK(u,u,-this.center.lng*Math.PI/180),a.Q(u,u,b),this._globeViewProjMatrixNoCorrection=u,a.bi(n,n,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),a.bK(n,n,-this.center.lng*Math.PI/180),a.Q(n,n,b),this._globeViewProjMatrix32f=new Float32Array(n),this._globeViewProjMatrixNoCorrectionInverted=a.bl(),a.aC(this._globeViewProjMatrixNoCorrectionInverted,u);let w=a.bA();this._cameraPosition=a.bA(),this._cameraPosition[2]=this.cameraToCenterDistance/t,a.bH(this._cameraPosition,this._cameraPosition,w,-this.rollInRadians),a.bI(this._cameraPosition,this._cameraPosition,w,this.pitchInRadians),a.bH(this._cameraPosition,this._cameraPosition,w,-this.bearingInRadians),a.b1(this._cameraPosition,this._cameraPosition,[0,0,1]),a.bI(this._cameraPosition,this._cameraPosition,w,-this.center.lat*Math.PI/180),a.bJ(this._cameraPosition,this._cameraPosition,w,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(t);let k=a.bg(this._globeViewProjMatrixNoCorrectionInverted);a.Q(k,k,[1,1,-1]),this._cachedFrustum=Yr.fromInvProjectionMatrix(k,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(t){a.w("calculateFogMatrix is not supported on globe projection.");let n=a.bl();return a.as(n),n}getVisibleUnwrappedCoordinates(t){return[new a.bd(0,t)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(t){t&&a.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(t,n){if(!this._globeViewProjMatrixNoCorrection)return 1;let u=ki(t);a.b0(u,u,1+n/a.bF);let m=a.bG();return a.aI(m,[u[0],u[1],u[2],1],this._globeViewProjMatrixNoCorrection),m[2]/m[3]}populateCache(t){}getBounds(){let t=.5*this.width,n=.5*this.height,u=[new a.P(0,0),new a.P(t,0),new a.P(this.width,0),new a.P(this.width,n),new a.P(this.width,this.height),new a.P(t,this.height),new a.P(0,this.height),new a.P(0,n)],m=[];for(let N of u)m.push(this.unprojectScreenPoint(N));let b=0,w=0,k=0,E=0,z=this.center;for(let N of m){let j=a.bL(z.lng,N.lng),U=a.bL(z.lat,N.lat);j<w&&(w=j),j>b&&(b=j),U<E&&(E=U),U>k&&(k=U)}let D=[z.lng+w,z.lat+E,z.lng+b,z.lat+k];return this.isSurfacePointOnScreen([0,1,0])&&(D[3]=90,D[0]=-180,D[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(D[1]=-90,D[0]=-180,D[2]=180),new Ei(D)}calculateCenterFromCameraLngLatAlt(t,n,u,m){return this._helper.calculateCenterFromCameraLngLatAlt(t,n,u,m)}setLocationAtPoint(t,n){let u=ki(this.unprojectScreenPoint(n)),m=ki(t),b=a.bA();a.bM(b);let w=a.bA();a.bJ(w,u,b,-this.center.lng*Math.PI/180),a.bI(w,w,b,this.center.lat*Math.PI/180);let k=m[0]*m[0]+m[2]*m[2],E=w[0]*w[0];if(k<E)return;let z=Math.sqrt(k-E),D=-z,N=a.bN(m[0],m[2],w[0],z),j=a.bN(m[0],m[2],w[0],D),U=a.bA();a.bJ(U,m,b,-N);let X=a.bN(U[1],U[2],w[1],w[2]),se=a.bA();a.bJ(se,m,b,-j);let le=a.bN(se[1],se[2],w[1],w[2]),oe=.5*Math.PI,ce=X>=-oe&&X<=oe,me=le>=-oe&&le<=oe,he,ge;if(ce&&me){let De=this.center.lng*Math.PI/180,Ie=this.center.lat*Math.PI/180;a.bO(N,De)+a.bO(X,Ie)<a.bO(j,De)+a.bO(le,Ie)?(he=N,ge=X):(he=j,ge=le)}else if(ce)he=N,ge=X;else{if(!me)return;he=j,ge=le}let be=he/Math.PI*180,pe=ge/Math.PI*180,Se=this.center.lat;this.setCenter(new a.V(be,a.ao(pe,-90,90))),this.setZoom(this.zoom+Ii(Se,this.center.lat))}locationToScreenPoint(t,n){let u=ki(t);if(n){let m=n.getElevationForLngLatZoom(t,this._helper._tileZoom);a.b0(u,u,1+m/a.bF)}return this._projectSurfacePointToScreen(u)}_projectSurfacePointToScreen(t){let n=a.bG();return a.aI(n,[...t,1],this._globeViewProjMatrixNoCorrection),n[0]/=n[3],n[1]/=n[3],new a.P((.5*n[0]+.5)*this.width,(.5*-n[1]+.5)*this.height)}screenPointToMercatorCoordinate(t,n){if(n){let u=n.pointCoordinate(t);if(u)return u}return a.ab.fromLngLat(this.unprojectScreenPoint(t))}screenPointToLocation(t,n){var u;return(u=this.screenPointToMercatorCoordinate(t,n))===null||u===void 0?void 0:u.toLngLat()}isPointOnMapSurface(t,n){let u=this._cameraPosition,m=this.getRayDirectionFromPixel(t);return!!this.rayPlanetIntersection(u,m)}getRayDirectionFromPixel(t){let n=a.bG();n[0]=t.x/this.width*2-1,n[1]=-1*(t.y/this.height*2-1),n[2]=1,n[3]=1,a.aI(n,n,this._globeViewProjMatrixNoCorrectionInverted),n[0]/=n[3],n[1]/=n[3],n[2]/=n[3];let u=a.bA();u[0]=n[0]-this._cameraPosition[0],u[1]=n[1]-this._cameraPosition[1],u[2]=n[2]-this._cameraPosition[2];let m=a.bA();return a.b4(m,u),m}isSurfacePointVisible(t){let n=this._cachedClippingPlane;return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]>=0}isSurfacePointOnScreen(t){if(!this.isSurfacePointVisible(t))return!1;let n=a.bG();return a.aI(n,[...t,1],this._globeViewProjMatrixNoCorrection),n[0]/=n[3],n[1]/=n[3],n[2]/=n[3],n[0]>-1&&n[0]<1&&n[1]>-1&&n[1]<1&&n[2]>-1&&n[2]<1}rayPlanetIntersection(t,n){let u=a.b6(t,n),m=a.bA(),b=a.bA();a.b0(b,n,u),a.b3(m,t,b);let w=1-a.b6(m,m);if(w<0)return null;let k=a.b6(t,t)-1,E=-u+(u<0?1:-1)*Math.sqrt(w),z=k/E,D=E;return{tMin:Math.min(z,D),tMax:Math.max(z,D)}}unprojectScreenPoint(t){let n=this._cameraPosition,u=this.getRayDirectionFromPixel(t),m=this.rayPlanetIntersection(n,u);if(m){let D=a.bA();a.b1(D,n,[u[0]*m.tMin,u[1]*m.tMin,u[2]*m.tMin]);let N=a.bA();return a.b4(N,D),Ll(N)}let b=this._cachedClippingPlane,w=b[0]*u[0]+b[1]*u[1]+b[2]*u[2],k=-a.bc(b,n)/w,E=a.bA();if(k>0)a.b1(E,n,[u[0]*k,u[1]*k,u[2]*k]);else{let D=a.bA();a.b1(D,n,[2*u[0],2*u[1],2*u[2]]);let N=a.bc(this._cachedClippingPlane,D);a.b3(E,D,[this._cachedClippingPlane[0]*N,this._cachedClippingPlane[1]*N,this._cachedClippingPlane[2]*N])}let z=(function(D){let N=a.bA();return N[0]=D[0]*-D[3],N[1]=D[1]*-D[3],N[2]=D[2]*-D[3],{center:N,radius:Math.sqrt(1-D[3]*D[3])}})(b);return Ll((function(D,N,j){let U=a.bA();a.b3(U,j,D);let X=a.bA();return a.bB(X,D,U,N/a.ba(U)),X})(z.center,z.radius,E))}getMatrixForModel(t,n){let u=a.V.convert(t),m=1/a.bF,b=a.bk();return a.bK(b,b,u.lng/180*Math.PI),a.bi(b,b,-u.lat/180*Math.PI),a.O(b,b,[0,0,1+n/a.bF]),a.bi(b,b,.5*Math.PI),a.Q(b,b,[m,m,m]),b}getProjectionDataForCustomLayer(t=!0){let n=this.getProjectionData({overscaledTileID:new a.a2(0,0,0,0,0),applyGlobeMatrix:t});return n.tileMercatorCoords=[0,0,1,1],n}getFastPathSimpleProjectionMatrix(t){}}class br{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(t){this._helper.setMinZoom(t)}setMaxZoom(t){this._helper.setMaxZoom(t)}setMinPitch(t){this._helper.setMinPitch(t)}setMaxPitch(t){this._helper.setMaxPitch(t)}setRenderWorldCopies(t){this._helper.setRenderWorldCopies(t)}setBearing(t){this._helper.setBearing(t)}setPitch(t){this._helper.setPitch(t)}setRoll(t){this._helper.setRoll(t)}setFov(t){this._helper.setFov(t)}setZoom(t){this._helper.setZoom(t)}setCenter(t){this._helper.setCenter(t)}setElevation(t){this._helper.setElevation(t)}setMinElevationForCurrentTile(t){this._helper.setMinElevationForCurrentTile(t)}setPadding(t){this._helper.setPadding(t)}interpolatePadding(t,n,u){return this._helper.interpolatePadding(t,n,u)}isPaddingEqual(t){return this._helper.isPaddingEqual(t)}resize(t,n,u=!0){this._helper.resize(t,n,u)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(t){this._helper.setMaxBounds(t)}setConstrainOverride(t){this._helper.setConstrainOverride(t)}overrideNearFarZ(t,n){this._helper.overrideNearFarZ(t,n)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(t){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),t)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(t,n){this._globeness=t,this._globeLatitudeErrorCorrectionRadians=n,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(t){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this.defaultConstrain=(n,u)=>this.currentTransform.defaultConstrain(n,u),this.applyConstrain=(n,u)=>this._helper.applyConstrain(n,u),this._helper=new on({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(n,u)=>this.defaultConstrain(n,u)},t),this._globeness=1,this._mercatorTransform=new Ea,this._verticalPerspectiveTransform=new $n}clone(){let t=new br;return t._globeness=this._globeness,t._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,t.apply(this),t}apply(t){this._helper.apply(t),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(t){let n=this._mercatorTransform.getProjectionData(t),u=this._verticalPerspectiveTransform.getProjectionData(t);return{mainMatrix:this.isGlobeRendering?u.mainMatrix:n.mainMatrix,clippingPlane:u.clippingPlane,tileMercatorCoords:u.tileMercatorCoords,projectionTransition:t.applyGlobeMatrix?this._globeness:0,fallbackMatrix:n.fallbackMatrix}}isLocationOccluded(t){return this.currentTransform.isLocationOccluded(t)}transformLightDirection(t){return this.currentTransform.transformLightDirection(t)}getPixelScale(){return a.bv(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return a.bv(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(t,n,u){let m=this._mercatorTransform.getPitchedTextCorrection(t,n,u),b=this._verticalPerspectiveTransform.getPitchedTextCorrection(t,n,u);return a.bv(m,b,this._globeness)}projectTileCoordinates(t,n,u,m){return this.currentTransform.projectTileCoordinates(t,n,u,m)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(t){return this.currentTransform.calculateFogMatrix(t)}getVisibleUnwrappedCoordinates(t){return this.currentTransform.getVisibleUnwrappedCoordinates(t)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(t){this._mercatorTransform.recalculateZoomAndCenter(t),this._verticalPerspectiveTransform.recalculateZoomAndCenter(t)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(t,n){return this.currentTransform.lngLatToCameraDepth(t,n)}populateCache(t){this._mercatorTransform.populateCache(t),this._verticalPerspectiveTransform.populateCache(t)}getBounds(){return this.currentTransform.getBounds()}calculateCenterFromCameraLngLatAlt(t,n,u,m){return this._helper.calculateCenterFromCameraLngLatAlt(t,n,u,m)}setLocationAtPoint(t,n){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(t,n),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(t,n),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(t,n){return this.currentTransform.locationToScreenPoint(t,n)}screenPointToMercatorCoordinate(t,n){return this.currentTransform.screenPointToMercatorCoordinate(t,n)}screenPointToLocation(t,n){return this.currentTransform.screenPointToLocation(t,n)}isPointOnMapSurface(t,n){return this.currentTransform.isPointOnMapSurface(t,n)}getRayDirectionFromPixel(t){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(t)}getMatrixForModel(t,n){return this.currentTransform.getMatrixForModel(t,n)}getProjectionDataForCustomLayer(t=!0){let n=this._mercatorTransform.getProjectionDataForCustomLayer(t);if(!this.isGlobeRendering)return n;let u=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(t);return u.fallbackMatrix=n.mainMatrix,u}getFastPathSimpleProjectionMatrix(t){return this.currentTransform.getFastPathSimpleProjectionMatrix(t)}}class Ki{get useGlobeControls(){return!0}handlePanInertia(t,n){let u=gc(t,n);return Math.abs(u.lng-n.center.lng)>180&&(u.lng=n.center.lng+179.5*Math.sign(u.lng-n.center.lng)),{easingCenter:u,easingOffset:new a.P(0,0)}}handleMapControlsRollPitchBearingZoom(t,n){let u=t.around,m=n.screenPointToLocation(u);t.bearingDelta&&n.setBearing(n.bearing+t.bearingDelta),t.pitchDelta&&n.setPitch(n.pitch+t.pitchDelta),t.rollDelta&&n.setRoll(n.roll+t.rollDelta);let b=n.zoom;t.zoomDelta&&n.setZoom(n.zoom+t.zoomDelta);let w=n.zoom-b;if(w===0)return;let k=a.bL(n.center.lng,m.lng),E=k/(Math.abs(k/180)+1),z=a.bL(n.center.lat,m.lat),D=n.getRayDirectionFromPixel(u),N=n.cameraPosition,j=-1*a.b6(N,D),U=a.bA();a.b1(U,N,[D[0]*j,D[1]*j,D[2]*j]);let X=a.b8(U)-1,se=Math.exp(.5*-Math.max(X-.3,0)),le=oa(n.worldSize,n.center.lat)/Math.min(n.width,n.height),oe=a.by(le,.9,.5,1,.25),ce=(1-a.ar(-w))*Math.min(se,oe),me=n.center.lat,he=n.zoom,ge=new a.V(n.center.lng+E*ce,a.ao(n.center.lat+z*ce,-a.ap,a.ap));n.setLocationAtPoint(m,u);let be=n.center,pe=a.by(Math.abs(k),45,85,0,1),Se=a.by(le,.75,.35,0,1),De=Math.pow(Math.max(pe,Se),.25),Ie=a.bL(be.lng,ge.lng),Le=a.bL(be.lat,ge.lat);n.setCenter(new a.V(be.lng+Ie*De,be.lat+Le*De).wrap()),n.setZoom(he+Ii(me,n.center.lat))}handleMapControlsPan(t,n,u){if(!t.panDelta)return;let m=n.center.lat,b=n.zoom;n.setCenter(gc(t.panDelta,n).wrap()),n.setZoom(b+Ii(m,n.center.lat))}cameraForBoxAndBearing(t,n,u,m,b){let w=Ho(t,n,u,m,b),k=n.left/b.width*2-1,E=(b.width-n.right)/b.width*2-1,z=n.top/b.height*-2+1,D=(b.height-n.bottom)/b.height*-2+1,N=a.bL(u.getWest(),u.getEast())<0,j=N?u.getEast():u.getWest(),U=N?u.getWest():u.getEast(),X=Math.max(u.getNorth(),u.getSouth()),se=Math.min(u.getNorth(),u.getSouth()),le=j+.5*a.bL(j,U),oe=X+.5*a.bL(X,se),ce=b.clone();ce.setCenter(w.center),ce.setBearing(w.bearing),ce.setPitch(0),ce.setRoll(0),ce.setZoom(w.zoom);let me=ce.modelViewProjectionMatrix,he=[ki(u.getNorthWest()),ki(u.getNorthEast()),ki(u.getSouthWest()),ki(u.getSouthEast()),ki(new a.V(U,oe)),ki(new a.V(j,oe)),ki(new a.V(le,X)),ki(new a.V(le,se))],ge=ki(w.center),be=Number.POSITIVE_INFINITY;for(let pe of he)k<0&&(be=Ki.getLesserNonNegativeNonNull(be,Ki.solveVectorScale(pe,ge,me,"x",k))),E>0&&(be=Ki.getLesserNonNegativeNonNull(be,Ki.solveVectorScale(pe,ge,me,"x",E))),z>0&&(be=Ki.getLesserNonNegativeNonNull(be,Ki.solveVectorScale(pe,ge,me,"y",z))),D<0&&(be=Ki.getLesserNonNegativeNonNull(be,Ki.solveVectorScale(pe,ge,me,"y",D)));if(Number.isFinite(be)&&be!==0)return w.zoom=ce.zoom+a.au(be),w;In()}handleJumpToCenterZoom(t,n){let u=t.center.lat,m=t.applyConstrain(n.center?a.V.convert(n.center):t.center,t.zoom).center;t.setCenter(m.wrap());let b=n.zoom!==void 0?+n.zoom:t.zoom+Ii(u,m.lat);t.zoom!==b&&t.setZoom(b)}handleEaseTo(t,n){let u=t.zoom,m=t.center,b=t.padding,w={roll:t.roll,pitch:t.pitch,bearing:t.bearing},k={roll:n.roll===void 0?t.roll:n.roll,pitch:n.pitch===void 0?t.pitch:n.pitch,bearing:n.bearing===void 0?t.bearing:n.bearing},E=n.zoom!==void 0,z=!t.isPaddingEqual(n.padding),D=!1,N=n.center?a.V.convert(n.center):m,j=t.applyConstrain(N,u).center;_n(t,j);let U=t.clone();U.setCenter(j),U.setZoom(E?+n.zoom:u+Ii(m.lat,N.lat)),U.setBearing(n.bearing);let X=new a.P(a.ao(t.centerPoint.x+n.offsetAsPoint.x,0,t.width),a.ao(t.centerPoint.y+n.offsetAsPoint.y,0,t.height));U.setLocationAtPoint(j,X);let se=(n.offset&&n.offsetAsPoint.mag())>0?U.center:j,le=E?+n.zoom:u+Ii(m.lat,se.lat),oe=u+Ii(m.lat,0),ce=le+Ii(se.lat,0),me=a.bL(m.lng,se.lng),he=a.bL(m.lat,se.lat),ge=a.ar(ce-oe);return D=le!==u,{easeFunc:be=>{if(a.bp(w,k)||mc({startEulerAngles:w,endEulerAngles:k,tr:t,k:be,useSlerp:w.roll!=k.roll}),z&&t.interpolatePadding(b,n.padding,be),n.around)a.w("Easing around a point is not supported under globe projection."),t.setLocationAtPoint(n.around,n.aroundPoint);else{let pe=ce>oe?Math.min(2,ge):Math.max(.5,ge),Se=Math.pow(pe,1-be),De=Xo(m,me,he,be*Se);t.setCenter(De.wrap())}if(D){let pe=a.G.number(oe,ce,be)+Ii(0,t.center.lat);t.setZoom(pe)}},isZooming:D,elevationCenter:se}}handleFlyTo(t,n){let u=n.zoom!==void 0,m=t.center,b=t.zoom,w=t.padding,k=!t.isPaddingEqual(n.padding),E=t.applyConstrain(a.V.convert(n.center||n.locationAtOffset),b).center,z=u?+n.zoom:t.zoom+Ii(t.center.lat,E.lat),D=t.clone();D.setCenter(E),D.setZoom(z),D.setBearing(n.bearing);let N=new a.P(a.ao(t.centerPoint.x+n.offsetAsPoint.x,0,t.width),a.ao(t.centerPoint.y+n.offsetAsPoint.y,0,t.height));D.setLocationAtPoint(E,N);let j=D.center;_n(t,j);let U=(function(he,ge,be){let pe=ki(ge),Se=ki(be),De=a.b6(pe,Se),Ie=Math.acos(De),Le=Wi(he);return Ie/(2*Math.PI)*Le})(t,m,j),X=b+Ii(m.lat,0),se=z+Ii(j.lat,0),le=a.ar(se-X),oe;if(typeof n.minZoom=="number"){let he=+n.minZoom+Ii(j.lat,0),ge=Math.min(he,X,se)+Ii(0,j.lat),be=t.applyConstrain(j,ge).zoom+Ii(j.lat,0);oe=a.ar(be-X)}let ce=a.bL(m.lng,j.lng),me=a.bL(m.lat,j.lat);return{easeFunc:(he,ge,be,pe)=>{let Se=Xo(m,ce,me,be);k&&t.interpolatePadding(w,n.padding,he);let De=he===1?j:Se;t.setCenter(De.wrap());let Ie=X+a.au(ge);t.setZoom(he===1?z:Ie+Ii(0,De.lat))},scaleOfZoom:le,targetCenter:j,scaleOfMinZoom:oe,pixelPathLength:U}}static solveVectorScale(t,n,u,m,b){let w=m==="x"?[u[0],u[4],u[8],u[12]]:[u[1],u[5],u[9],u[13]],k=[u[3],u[7],u[11],u[15]],E=t[0]*w[0]+t[1]*w[1]+t[2]*w[2],z=t[0]*k[0]+t[1]*k[1]+t[2]*k[2],D=n[0]*w[0]+n[1]*w[1]+n[2]*w[2],N=n[0]*k[0]+n[1]*k[1]+n[2]*k[2];return D+b*z===E+b*N||k[3]*(E-D)+w[3]*(N-z)+E*N==D*z?null:(D+w[3]-b*N-b*k[3])/(D-E-b*N+b*z)}static getLesserNonNegativeNonNull(t,n){return n!==null&&n>=0&&n<t?n:t}}class Dl{constructor(t){this._globe=t,this._mercatorCameraHelper=new Zt,this._verticalPerspectiveCameraHelper=new Ki}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(t,n){return this.currentHelper.handlePanInertia(t,n)}handleMapControlsRollPitchBearingZoom(t,n){return this.currentHelper.handleMapControlsRollPitchBearingZoom(t,n)}handleMapControlsPan(t,n,u){this.currentHelper.handleMapControlsPan(t,n,u)}cameraForBoxAndBearing(t,n,u,m,b){return this.currentHelper.cameraForBoxAndBearing(t,n,u,m,b)}handleJumpToCenterZoom(t,n){this.currentHelper.handleJumpToCenterZoom(t,n)}handleEaseTo(t,n){return this.currentHelper.handleEaseTo(t,n)}handleFlyTo(t,n){return this.currentHelper.handleFlyTo(t,n)}}let Ms=(_,t)=>a.B(_,t&&t.filter((n=>n.identifier!=="source.canvas"))),es=a.bP();class ua extends a.E{constructor(t,n={}){var u,m;super(),this._rtlPluginLoaded=()=>{for(let w in this.tileManagers){let k=this.tileManagers[w].getSource().type;k!=="vector"&&k!=="geojson"||this.tileManagers[w].reload()}},this.map=t,this.dispatcher=new nn(Sa(),t._getMapId()),this.dispatcher.registerMessageHandler("GG",((w,k)=>this.getGlyphs(w,k))),this.dispatcher.registerMessageHandler("GI",((w,k)=>this.getImages(w,k))),this.dispatcher.registerMessageHandler("GDA",((w,k)=>this.getDashes(w,k))),this.imageManager=new St,this.imageManager.setEventedParent(this);let b=((u=t._container)===null||u===void 0?void 0:u.lang)||typeof document<"u"&&((m=document.documentElement)===null||m===void 0?void 0:m.lang)||void 0;this.glyphManager=new ii(t._requestManager,n.localIdeographFontFamily,b),this.lineAtlas=new tr(256,512),this.crossTileSymbolIndex=new Hr,this._setInitialValues(),this._resetUpdates(),this.dispatcher.broadcast("SR",a.bQ()),Ce().on(ye,this._rtlPluginLoaded),this.on("data",(w=>{if(w.dataType!=="source"||w.sourceDataType!=="metadata")return;let k=this.tileManagers[w.sourceId];if(!k)return;let E=k.getSource();if(E&&E.vectorLayerIds)for(let z in this._layers){let D=this._layers[z];D.source===E.id&&this._validateLayer(D)}}))}_setInitialValues(){var t;this._spritesImagesIds={},this._layers={},this._order=[],this.tileManagers={},this.zoomHistory=new a.bR,this._availableImages=[],this._globalState={},this._serializedLayers={},this.stylesheet=null,this.light=null,this.sky=null,this.projection&&(this.projection.destroy(),delete this.projection),this._loaded=!1,this._changed=!1,this._updatedLayers={},this._updatedSources={},this._changedImages={},this._glyphsDidChange=!1,this._updatedPaintProps={},this._layerOrderChanged=!1,this.crossTileSymbolIndex=new(((t=this.crossTileSymbolIndex)===null||t===void 0?void 0:t.constructor)||Object),this.pauseablePlacement=void 0,this.placement=void 0,this.z=0}setGlobalStateProperty(t,n){var u,m,b;this._checkLoaded();let w=n===null?(b=(m=(u=this.stylesheet.state)===null||u===void 0?void 0:u[t])===null||m===void 0?void 0:m.default)!==null&&b!==void 0?b:null:n;if(a.bS(w,this._globalState[t]))return this;this._globalState[t]=w,this._applyGlobalStateChanges([t])}getGlobalState(){return this._globalState}setGlobalState(t){this._checkLoaded();let n=[];for(let u in t)!a.bS(this._globalState[u],t[u].default)&&(n.push(u),this._globalState[u]=t[u].default);this._applyGlobalStateChanges(n)}_applyGlobalStateChanges(t){if(t.length===0)return;let n=new Set,u={};for(let m of t){u[m]=this._globalState[m];for(let b in this._layers){let w=this._layers[b],k=w.getLayoutAffectingGlobalStateRefs(),E=w.getPaintAffectingGlobalStateRefs();if(k.has(m)&&n.add(w.source),E.has(m))for(let{name:z,value:D}of E.get(m))this._updatePaintProperty(w,z,D)}}this.dispatcher.broadcast("UGS",u);for(let m in this.tileManagers)n.has(m)&&(this._reloadSource(m),this._changed=!0)}loadURL(t,n={},u){this.fire(new a.l("dataloading",{dataType:"style"})),n.validate=typeof n.validate!="boolean"||n.validate;let m=this.map._requestManager.transformRequest(t,"Style");this._loadStyleRequest=new AbortController;let b=this._loadStyleRequest;a.j(m,this._loadStyleRequest).then((w=>{this._loadStyleRequest=null,this._load(w.data,n,u)})).catch((w=>{this._loadStyleRequest=null,w&&!b.signal.aborted&&this.fire(new a.k(w))}))}loadJSON(t,n={},u){this.fire(new a.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,ie.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,n.validate=n.validate!==!1,this._load(t,n,u)})).catch((()=>{}))}loadEmpty(){this.fire(new a.l("dataloading",{dataType:"style"})),this._load(es,{validate:!1})}_load(t,n,u){var m,b;let w=n.transformStyle?n.transformStyle(u,t):t;if(!n.validate||!Ms(this,a.C(w))){w=Object.assign({},w),this._loaded=!0,this.stylesheet=w;for(let k in w.sources)this.addSource(k,w.sources[k],{validate:!1});w.sprite?this._loadSprite(w.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(w.glyphs),this._createLayers(),this.light=new kt(this.stylesheet.light),this._setProjectionInternal(((m=this.stylesheet.projection)===null||m===void 0?void 0:m.type)||"mercator"),this.sky=new Yi(this.stylesheet.sky),this.map.setTerrain((b=this.stylesheet.terrain)!==null&&b!==void 0?b:null),this.fire(new a.l("data",{dataType:"style"})),this.fire(new a.l("style.load"))}}_createLayers(){var t,n,u;let m=a.bT(this.stylesheet.layers);this.setGlobalState((t=this.stylesheet.state)!==null&&t!==void 0?t:null),this.dispatcher.broadcast("SL",m),this._order=m.map((b=>b.id)),this._layers={},this._serializedLayers=null;for(let b of m){let w=a.bU(b,this._globalState);if(w.setEventedParent(this,{layer:{id:b.id}}),this._layers[b.id]=w,a.bV(w)&&this.tileManagers[w.source]){let k=(u=(n=b.paint)===null||n===void 0?void 0:n["raster-fade-duration"])!==null&&u!==void 0?u:w.paint.get("raster-fade-duration");this.tileManagers[w.source].setRasterFadeDuration(k)}}}_loadSprite(t,n=!1,u=void 0){this.imageManager.setLoaded(!1);let m=new AbortController,b;this._spriteRequest=m,(function(w,k,E,z){return a._(this,void 0,void 0,(function*(){let D=je(w),N=E>1?"@2x":"",j={},U={};for(let{id:X,url:se}of D){let le=k.transformRequest(Je(se,N,".json"),"SpriteJSON");j[X]=a.j(le,z);let oe=k.transformRequest(Je(se,N,".png"),"SpriteImage");U[X]=Vt.getImage(oe,z)}return yield Promise.all([...Object.values(j),...Object.values(U)]),(function(X,se){return a._(this,void 0,void 0,(function*(){let le={};for(let oe in X){le[oe]={};let ce=ie.getImageCanvasContext((yield se[oe]).data),me=(yield X[oe]).data;for(let he in me){let{width:ge,height:be,x:pe,y:Se,sdf:De,pixelRatio:Ie,stretchX:Le,stretchY:Fe,content:Xe,textFitWidth:et,textFitHeight:He}=me[he];le[oe][he]={data:null,pixelRatio:Ie,sdf:De,stretchX:Le,stretchY:Fe,content:Xe,textFitWidth:et,textFitHeight:He,spriteData:{width:ge,height:be,x:pe,y:Se,context:ce}}}}return le}))})(j,U)}))})(t,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((w=>{if(this._spriteRequest=null,w)for(let k in w){this._spritesImagesIds[k]=[];let E=this._spritesImagesIds[k]?this._spritesImagesIds[k].filter((z=>!(z in w))):[];for(let z of E)this.imageManager.removeImage(z),this._changedImages[z]=!0;for(let z in w[k]){let D=k==="default"?z:`${k}:${z}`;this._spritesImagesIds[k].push(D),D in this.imageManager.images?this.imageManager.updateImage(D,w[k][z],!1):this.imageManager.addImage(D,w[k][z]),n&&(this._changedImages[D]=!0)}}})).catch((w=>{this._spriteRequest=null,b=w,m.signal.aborted||this.fire(new a.k(b))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),n&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"})),u&&u(b)}))}_unloadSprite(){for(let t of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(t),this._changedImages[t]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}_validateLayer(t){let n=this.tileManagers[t.source];if(!n)return;let u=t.sourceLayer;if(!u)return;let m=n.getSource();(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(u)===-1)&&this.fire(new a.k(new Error(`Source layer "${u}" does not exist on source "${m.id}" as specified by style layer "${t.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(let t in this.tileManagers)if(!this.tileManagers[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(t,n=!1){let u=this._serializedAllLayers();if(!t||t.length===0)return Object.values(n?a.bW(u):u);let m=[];for(let b of t)if(u[b]){let w=n?a.bW(u[b]):u[b];m.push(w)}return m}_serializedAllLayers(){let t=this._serializedLayers;if(t)return t;t=this._serializedLayers={};let n=Object.keys(this._layers);for(let u of n){let m=this._layers[u];m.type!=="custom"&&(t[u]=m.serialize())}return t}hasTransitions(){var t,n,u;if(!((t=this.light)===null||t===void 0)&&t.hasTransition()||!((n=this.sky)===null||n===void 0)&&n.hasTransition()||!((u=this.projection)===null||u===void 0)&&u.hasTransition())return!0;for(let m in this.tileManagers)if(this.tileManagers[m].hasTransition())return!0;for(let m in this._layers)if(this._layers[m].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(t){if(!this._loaded)return;let n=this._changed;if(n){let m=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);(m.length||b.length)&&this._updateWorkerLayers(m,b);for(let w in this._updatedSources){let k=this._updatedSources[w];if(k==="reload")this._reloadSource(w);else{if(k!=="clear")throw new Error(`Invalid action ${k}`);this._clearSource(w)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(let w in this._updatedPaintProps)this._layers[w].updateTransitions(t);this.light.updateTransitions(t),this.sky.updateTransitions(t),this._resetUpdates()}let u={};for(let m in this.tileManagers){let b=this.tileManagers[m];u[m]=b.used,b.used=!1}for(let m of this._order){let b=this._layers[m];b.recalculate(t,this._availableImages),!b.isHidden(t.zoom)&&b.source&&(this.tileManagers[b.source].used=!0)}for(let m in u){let b=this.tileManagers[m];!!u[m]!=!!b.used&&b.fire(new a.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:m}))}this.light.recalculate(t),this.sky.recalculate(t),this.projection.recalculate(t),this.z=t.zoom,n&&this.fire(new a.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){let t=Object.keys(this._changedImages);if(t.length){for(let n in this.tileManagers)this.tileManagers[n].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(let t in this.tileManagers)this.tileManagers[t].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(t,n){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(t,!1),removedIds:n})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(t,n={}){var u;this._checkLoaded();let m=this.serialize();if(t=n.transformStyle?n.transformStyle(m,t):t,((u=n.validate)===null||u===void 0||u)&&Ms(this,a.C(t)))return!1;(t=a.bW(t)).layers=a.bT(t.layers);let b=a.bX(m,t),w=this._getOperationsToPerform(b);if(w.unimplemented.length>0)throw new Error(`Unimplemented: ${w.unimplemented.join(", ")}.`);if(w.operations.length===0)return!1;for(let k of w.operations)k();return this.stylesheet=t,this._serializedLayers=null,!0}_getOperationsToPerform(t){let n=[],u=[];for(let m of t)switch(m.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":n.push((()=>this.addLayer.apply(this,m.args)));break;case"removeLayer":n.push((()=>this.removeLayer.apply(this,m.args)));break;case"setPaintProperty":n.push((()=>this.setPaintProperty.apply(this,m.args)));break;case"setLayoutProperty":n.push((()=>this.setLayoutProperty.apply(this,m.args)));break;case"setFilter":n.push((()=>this.setFilter.apply(this,m.args)));break;case"addSource":n.push((()=>this.addSource.apply(this,m.args)));break;case"removeSource":n.push((()=>this.removeSource.apply(this,m.args)));break;case"setLayerZoomRange":n.push((()=>this.setLayerZoomRange.apply(this,m.args)));break;case"setLight":n.push((()=>this.setLight.apply(this,m.args)));break;case"setGeoJSONSourceData":n.push((()=>this.setGeoJSONSourceData.apply(this,m.args)));break;case"setGlyphs":n.push((()=>this.setGlyphs.apply(this,m.args)));break;case"setSprite":n.push((()=>this.setSprite.apply(this,m.args)));break;case"setTerrain":n.push((()=>this.map.setTerrain.apply(this,m.args)));break;case"setSky":n.push((()=>this.setSky.apply(this,m.args)));break;case"setProjection":this.setProjection.apply(this,m.args);break;case"setGlobalState":n.push((()=>this.setGlobalState.apply(this,m.args)));break;case"setTransition":n.push((()=>{}));break;default:u.push(m.command)}return{operations:n,unimplemented:u}}addImage(t,n){if(this.getImage(t))return this.fire(new a.k(new Error(`An image named "${t}" already exists.`)));this.imageManager.addImage(t,n),this._afterImageUpdated(t)}updateImage(t,n){this.imageManager.updateImage(t,n)}getImage(t){return this.imageManager.getImage(t)}removeImage(t){if(!this.getImage(t))return this.fire(new a.k(new Error(`An image named "${t}" does not exist.`)));this.imageManager.removeImage(t),this._afterImageUpdated(t)}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(t,n,u={}){if(this._checkLoaded(),this.tileManagers[t]!==void 0)throw new Error(`Source "${t}" already exists.`);if(!n.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(n).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(a.C.source,`sources.${t}`,n,null,u))return;this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);let m=this.tileManagers[t]=new sn(t,n,this.dispatcher);m.style=this,m.setEventedParent(this,(()=>({isSourceLoaded:m.loaded(),source:m.serialize(),sourceId:t}))),m.onAdd(this.map),this._changed=!0}removeSource(t){if(this._checkLoaded(),this.tileManagers[t]===void 0)throw new Error("There is no source with this ID");for(let u in this._layers)if(this._layers[u].source===t)return this.fire(new a.k(new Error(`Source "${t}" cannot be removed while layer "${u}" is using it.`)));let n=this.tileManagers[t];delete this.tileManagers[t],delete this._updatedSources[t],n.fire(new a.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),n.setEventedParent(null),n.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(t,n){if(this._checkLoaded(),this.tileManagers[t]===void 0)throw new Error(`There is no source with this ID=${t}`);let u=this.tileManagers[t].getSource();if(u.type!=="geojson")throw new Error(`geojsonSource.type is ${u.type}, which is !== 'geojson`);u.setData(n),this._changed=!0}getSource(t){return this.tileManagers[t]&&this.tileManagers[t].getSource()}addLayer(t,n,u={}){this._checkLoaded();let m=t.id;if(this.getLayer(m))return void this.fire(new a.k(new Error(`Layer "${m}" already exists on this map.`)));let b;if(t.type==="custom"){if(Ms(this,a.bY(t)))return;b=a.bU(t,this._globalState)}else{if("source"in t&&typeof t.source=="object"&&(this.addSource(m,t.source),t=a.bW(t),t=a.e(t,{source:m})),this._validate(a.C.layer,`layers.${m}`,t,{arrayIndex:-1},u))return;b=a.bU(t,this._globalState),this._validateLayer(b),b.setEventedParent(this,{layer:{id:m}})}let w=n?this._order.indexOf(n):this._order.length;if(n&&w===-1)this.fire(new a.k(new Error(`Cannot add layer "${m}" before non-existing layer "${n}".`)));else{if(this._order.splice(w,0,m),this._layerOrderChanged=!0,this._layers[m]=b,this._removedLayers[m]&&b.source&&b.type!=="custom"){let k=this._removedLayers[m];delete this._removedLayers[m],k.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",this.tileManagers[b.source].pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map)}}moveLayer(t,n){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new a.k(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===n)return;let u=this._order.indexOf(t);this._order.splice(u,1);let m=n?this._order.indexOf(n):this._order.length;n&&m===-1?this.fire(new a.k(new Error(`Cannot move layer "${t}" before non-existing layer "${n}".`))):(this._order.splice(m,0,t),this._layerOrderChanged=!0)}removeLayer(t){this._checkLoaded();let n=this._layers[t];if(!n)return void this.fire(new a.k(new Error(`Cannot remove non-existing layer "${t}".`)));n.setEventedParent(null);let u=this._order.indexOf(t);this._order.splice(u,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=n,delete this._layers[t],this._serializedLayers&&delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],n.onRemove&&n.onRemove(this.map)}getLayer(t){return this._layers[t]}getLayersOrder(){return[...this._order]}hasLayer(t){return t in this._layers}setLayerZoomRange(t,n,u){this._checkLoaded();let m=this.getLayer(t);m?m.minzoom===n&&m.maxzoom===u||(n!=null&&(m.minzoom=n),u!=null&&(m.maxzoom=u),this._updateLayer(m)):this.fire(new a.k(new Error(`Cannot set the zoom range of non-existing layer "${t}".`)))}setFilter(t,n,u={}){this._checkLoaded();let m=this.getLayer(t);if(m){if(!a.bS(m.filter,n))return n==null?(m.setFilter(void 0),void this._updateLayer(m)):void(this._validate(a.C.filter,`layers.${m.id}.filter`,n,null,u)||(m.setFilter(a.bW(n)),this._updateLayer(m)))}else this.fire(new a.k(new Error(`Cannot filter non-existing layer "${t}".`)))}getFilter(t){return a.bW(this.getLayer(t).filter)}setLayoutProperty(t,n,u,m={}){this._checkLoaded();let b=this.getLayer(t);b?a.bS(b.getLayoutProperty(n),u)||(b.setLayoutProperty(n,u,m),this._updateLayer(b)):this.fire(new a.k(new Error(`Cannot style non-existing layer "${t}".`)))}getLayoutProperty(t,n){let u=this.getLayer(t);if(u)return u.getLayoutProperty(n);this.fire(new a.k(new Error(`Cannot get style of non-existing layer "${t}".`)))}setPaintProperty(t,n,u,m={}){this._checkLoaded();let b=this.getLayer(t);b?a.bS(b.getPaintProperty(n),u)||this._updatePaintProperty(b,n,u,m):this.fire(new a.k(new Error(`Cannot style non-existing layer "${t}".`)))}_updatePaintProperty(t,n,u,m={}){t.setPaintProperty(n,u,m)&&this._updateLayer(t),a.bV(t)&&n==="raster-fade-duration"&&this.tileManagers[t.source].setRasterFadeDuration(u),this._changed=!0,this._updatedPaintProps[t.id]=!0,this._serializedLayers=null}getPaintProperty(t,n){return this.getLayer(t).getPaintProperty(n)}setFeatureState(t,n){this._checkLoaded();let u=t.source,m=t.sourceLayer,b=this.tileManagers[u];if(b===void 0)return void this.fire(new a.k(new Error(`The source '${u}' does not exist in the map's style.`)));let w=b.getSource().type;w==="geojson"&&m?this.fire(new a.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):w!=="vector"||m?(t.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),b.setFeatureState(m,t.id,n)):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(t,n){this._checkLoaded();let u=t.source,m=this.tileManagers[u];if(m===void 0)return void this.fire(new a.k(new Error(`The source '${u}' does not exist in the map's style.`)));let b=m.getSource().type,w=b==="vector"?t.sourceLayer:void 0;b!=="vector"||w?n&&typeof t.id!="string"&&typeof t.id!="number"?this.fire(new a.k(new Error("A feature id is required to remove its specific state property."))):m.removeFeatureState(w,t.id,n):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(t){this._checkLoaded();let n=t.source,u=t.sourceLayer,m=this.tileManagers[n];if(m!==void 0)return m.getSource().type!=="vector"||u?(t.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),m.getFeatureState(u,t.id)):void this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.k(new Error(`The source '${n}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;let t=a.bZ(this.tileManagers,(b=>b.serialize())),n=this._serializeByIds(this._order,!0),u=this.map.getTerrain()||void 0,m=this.stylesheet;return a.b_({version:m.version,name:m.name,metadata:m.metadata,light:m.light,sky:m.sky,center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,sprite:m.sprite,glyphs:m.glyphs,transition:m.transition,projection:m.projection,sources:t,layers:n,terrain:u},(b=>b!==void 0))}_updateLayer(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&this.tileManagers[t.source].getSource().type!=="raster"&&(this._updatedSources[t.source]="reload",this.tileManagers[t.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(t){let n=w=>this._layers[w].type==="fill-extrusion",u={},m=[];for(let w=this._order.length-1;w>=0;w--){let k=this._order[w];if(n(k)){u[k]=w;for(let E of t){let z=E[k];if(z)for(let D of z)m.push(D)}}}m.sort(((w,k)=>k.intersectionZ-w.intersectionZ));let b=[];for(let w=this._order.length-1;w>=0;w--){let k=this._order[w];if(n(k))for(let E=m.length-1;E>=0;E--){let z=m[E].feature;if(u[z.layer.id]<w)break;b.push(z),m.pop()}else for(let E of t){let z=E[k];if(z)for(let D of z)b.push(D.feature)}}return b}queryRenderedFeatures(t,n,u){n&&n.filter&&this._validate(a.C.filter,"queryRenderedFeatures.filter",n.filter,null,n);let m={};if(n&&n.layers){if(!(Array.isArray(n.layers)||n.layers instanceof Set))return this.fire(new a.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(let z of n.layers){let D=this._layers[z];if(!D)return this.fire(new a.k(new Error(`The layer '${z}' does not exist in the map's style and cannot be queried for features.`))),[];m[D.source]=!0}}let b=[];n.availableImages=this._availableImages;let w=this._serializedAllLayers(),k=n.layers instanceof Set?n.layers:Array.isArray(n.layers)?new Set(n.layers):null,E=Object.assign(Object.assign({},n),{layers:k,globalState:this._globalState});for(let z in this.tileManagers)n.layers&&!m[z]||b.push(Ua(this.tileManagers[z],this._layers,w,t,E,u,this.map.terrain?(D,N,j)=>this.map.terrain.getElevation(D,N,j):void 0));return this.placement&&b.push((function(z,D,N,j,U,X,se){let le={},oe=X.queryRenderedSymbols(j),ce=[];for(let me of Object.keys(oe).map(Number))ce.push(se[me]);ce.sort(cr);for(let me of ce){let he=me.featureIndex.lookupSymbolFeatures(oe[me.bucketInstanceId],D,me.bucketIndex,me.sourceLayerIndex,{filterSpec:U.filter,globalState:U.globalState},U.layers,U.availableImages,z);for(let ge in he){let be=le[ge]=le[ge]||[],pe=he[ge];pe.sort(((Se,De)=>{let Ie=me.featureSortOrder;if(Ie){let Le=Ie.indexOf(Se.featureIndex);return Ie.indexOf(De.featureIndex)-Le}return De.featureIndex-Se.featureIndex}));for(let Se of pe)be.push(Se)}}return(function(me,he,ge){for(let be in me)for(let pe of me[be])an(pe,ge[he[be].source]);return me})(le,z,N)})(this._layers,w,this.tileManagers,t,E,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(b)}querySourceFeatures(t,n){n?.filter&&this._validate(a.C.filter,"querySourceFeatures.filter",n.filter,null,n);let u=this.tileManagers[t];return u?(function(m,b){let w=m.getRenderableIds().map((z=>m.getTileByID(z))),k=[],E={};for(let z=0;z<w.length;z++){let D=w[z],N=D.tileID.canonical.key;E[N]||(E[N]=!0,D.querySourceFeatures(k,b))}return k})(u,n?Object.assign(Object.assign({},n),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(t,n={}){this._checkLoaded();let u=this.light.getLight(),m=!1;for(let w in t)if(!a.bS(t[w],u[w])){m=!0;break}if(!m)return;let b={now:ae(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,n),this.light.updateTransitions(b)}getProjection(){var t;return(t=this.stylesheet)===null||t===void 0?void 0:t.projection}setProjection(t){if(this._checkLoaded(),this.projection){if(this.projection.name===t.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=t,this._setProjectionInternal(t.type)}getSky(){var t;return(t=this.stylesheet)===null||t===void 0?void 0:t.sky}setSky(t,n={}){this._checkLoaded();let u=this.getSky(),m=!1;if(!t&&!u)return;if(t&&!u)m=!0;else if(!t&&u)m=!0;else for(let w in t)if(!a.bS(t[w],u[w])){m=!0;break}if(!m)return;let b={now:ae(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=t,this.sky.setSky(t,n),this.sky.updateTransitions(b)}_setProjectionInternal(t){let n=(function(u,m){let b={constrainOverride:m};if(Array.isArray(u)){let w=new zl({type:u});return{projection:w,transform:new br(b),cameraHelper:new Dl(w)}}switch(u){case"mercator":return{projection:new Xi,transform:new Ea(b),cameraHelper:new Zt};case"globe":{let w=new zl({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:w,transform:new br(b),cameraHelper:new Dl(w)}}case"vertical-perspective":return{projection:new vn,transform:new $n(b),cameraHelper:new Ki};default:return a.w(`Unknown projection name: ${u}. Falling back to mercator projection.`),{projection:new Xi,transform:new Ea(b),cameraHelper:new Zt}}})(t,this.map.transformConstrain);this.projection=n.projection,this.map.migrateProjection(n.transform,n.cameraHelper);for(let u in this.tileManagers)this.tileManagers[u].reload()}_validate(t,n,u,m,b={}){return(!b||b.validate!==!1)&&Ms(this,t.call(a.C,a.e({key:n,style:this.serialize(),value:u,styleSpec:a.u},m)))}_remove(t=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Ce().off(ye,this._rtlPluginLoaded);for(let n in this._layers)this._layers[n].setEventedParent(null);for(let n in this.tileManagers){let u=this.tileManagers[n];u.setEventedParent(null),u.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),t&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(t)}_clearSource(t){this.tileManagers[t].clearTiles()}_reloadSource(t){this.tileManagers[t].resume(),this.tileManagers[t].reload()}_updateSources(t){for(let n in this.tileManagers)this.tileManagers[n].update(t,this.map.terrain)}_generateCollisionBoxes(){for(let t in this.tileManagers)this._reloadSource(t)}_updatePlacement(t,n,u,m,b=!1){let w=!1,k=!1,E={};for(let z of this._order){let D=this._layers[z];if(D.type!=="symbol")continue;if(!E[D.source]){let j=this.tileManagers[D.source];E[D.source]=j.getRenderableIds(!0).map((U=>j.getTileByID(U))).sort(((U,X)=>X.tileID.overscaledZ-U.tileID.overscaledZ||(U.tileID.isLessThan(X.tileID)?-1:1)))}let N=this.crossTileSymbolIndex.addLayer(D,E[D.source],t.center.lng);w=w||N}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((b=b||this._layerOrderChanged||u===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(ae(),t.zoom))&&(this.pauseablePlacement=new ka(t,this.map.terrain,this._order,b,n,u,m,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,E),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(ae()),k=!0),w&&this.pauseablePlacement.placement.setStale()),k||w)for(let z of this._order){let D=this._layers[z];D.type==="symbol"&&this.placement.updateLayerOpacities(D,E[D.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(ae())}_releaseSymbolFadeTiles(){for(let t in this.tileManagers)this.tileManagers[t].releaseSymbolFadeTiles()}getImages(t,n){return a._(this,void 0,void 0,(function*(){let u=yield this.imageManager.getImages(n.icons);this._updateTilesForChangedImages();let m=this.tileManagers[n.source];return m&&m.setDependencies(n.tileID.key,n.type,n.icons),u}))}getGlyphs(t,n){return a._(this,void 0,void 0,(function*(){let u=yield this.glyphManager.getGlyphs(n.stacks),m=this.tileManagers[n.source];return m&&m.setDependencies(n.tileID.key,n.type,[""]),u}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(t,n={}){this._checkLoaded(),t&&this._validate(a.C.glyphs,"glyphs",t,null,n)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=t,this.glyphManager.entries={},this.glyphManager.setURL(t))}getDashes(t,n){return a._(this,void 0,void 0,(function*(){let u={};for(let[m,b]of Object.entries(n.dashes))u[m]=this.lineAtlas.getDash(b.dasharray,b.round);return u}))}addSprite(t,n,u={},m){this._checkLoaded();let b=[{id:t,url:n}],w=[...je(this.stylesheet.sprite),...b];this._validate(a.C.sprite,"sprite",w,null,u)||(this.stylesheet.sprite=w,this._loadSprite(b,!0,m))}removeSprite(t){this._checkLoaded();let n=je(this.stylesheet.sprite);if(n.find((u=>u.id===t))){if(this._spritesImagesIds[t])for(let u of this._spritesImagesIds[t])this.imageManager.removeImage(u),this._changedImages[u]=!0;n.splice(n.findIndex((u=>u.id===t)),1),this.stylesheet.sprite=n.length>0?n:void 0,delete this._spritesImagesIds[t],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}else this.fire(new a.k(new Error(`Sprite "${t}" doesn't exists on this map.`)))}getSprite(){return je(this.stylesheet.sprite)}setSprite(t,n={},u){this._checkLoaded(),t&&this._validate(a.C.sprite,"sprite",t,null,n)||(this.stylesheet.sprite=t,t?this._loadSprite(t,!0,u):(this._unloadSprite(),u&&u(null)))}destroy(){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null);for(let t in this.tileManagers){let n=this.tileManagers[t];n.setEventedParent(null),n.onRemove(this.map)}this.tileManagers={},this.imageManager&&(this.imageManager.setEventedParent(null),this.imageManager.destroy(),this._availableImages=[],this._spritesImagesIds={}),this.glyphManager&&this.glyphManager.destroy();for(let t in this._layers){let n=this._layers[t];n.setEventedParent(null),n.onRemove&&n.onRemove(this.map)}this._setInitialValues(),this.setEventedParent(null),this.dispatcher.unregisterMessageHandler("GG"),this.dispatcher.unregisterMessageHandler("GI"),this.dispatcher.unregisterMessageHandler("GDA"),this.dispatcher.remove(!0),this._listeners={},this._oneTimeListeners={}}}var Wu=a.aV([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Ko{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(t,n,u,m,b,w,k,E,z){this.context=t;let D=this.boundPaintVertexBuffers.length!==m.length;for(let N=0;!D&&N<m.length;N++)this.boundPaintVertexBuffers[N]!==m[N]&&(D=!0);!this.vao||this.boundProgram!==n||this.boundLayoutVertexBuffer!==u||D||this.boundIndexBuffer!==b||this.boundVertexOffset!==w||this.boundDynamicVertexBuffer!==k||this.boundDynamicVertexBuffer2!==E||this.boundDynamicVertexBuffer3!==z?this.freshBind(n,u,m,b,w,k,E,z):(t.bindVertexArray.set(this.vao),k&&k.bind(),b&&b.dynamicDraw&&b.bind(),E&&E.bind(),z&&z.bind())}freshBind(t,n,u,m,b,w,k,E){let z=t.numAttributes,D=this.context,N=D.gl;this.vao&&this.destroy(),this.vao=D.createVertexArray(),D.bindVertexArray.set(this.vao),this.boundProgram=t,this.boundLayoutVertexBuffer=n,this.boundPaintVertexBuffers=u,this.boundIndexBuffer=m,this.boundVertexOffset=b,this.boundDynamicVertexBuffer=w,this.boundDynamicVertexBuffer2=k,this.boundDynamicVertexBuffer3=E,n.enableAttributes(N,t);for(let j of u)j.enableAttributes(N,t);w&&w.enableAttributes(N,t),k&&k.enableAttributes(N,t),E&&E.enableAttributes(N,t),n.bind(),n.setVertexAttribPointers(N,t,b);for(let j of u)j.bind(),j.setVertexAttribPointers(N,t,b);w&&(w.bind(),w.setVertexAttribPointers(N,t,b)),m&&m.bind(),k&&(k.bind(),k.setVertexAttribPointers(N,t,b)),E&&(E.bind(),E.setVertexAttribPointers(N,t,b)),D.currentNumAttributes=z}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}let yc=(_,t,n,u,m)=>({u_texture:0,u_ele_delta:_,u_fog_matrix:t,u_fog_color:n?n.properties.get("fog-color"):a.bq.white,u_fog_ground_blend:n?n.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:m?0:n?n.calculateFogBlendOpacity(u):0,u_horizon_color:n?n.properties.get("horizon-color"):a.bq.white,u_horizon_fog_blend:n?n.properties.get("horizon-fog-blend"):1,u_is_globe_mode:m?1:0}),Is={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Xr(_){let t=[];for(let n=0;n<_.length;n++){if(_[n]===null)continue;let u=_[n].split(" ");t.push(u.pop())}return t}class ts{constructor(t,n,u,m,b,w,k,E,z=[]){let D=t.gl;this.program=D.createProgram();let N=Xr(n.staticAttributes),j=u?u.getBinderAttributes():[],U=N.concat(j),X=li.prelude.staticUniforms?Xr(li.prelude.staticUniforms):[],se=k.staticUniforms?Xr(k.staticUniforms):[],le=n.staticUniforms?Xr(n.staticUniforms):[],oe=u?u.getBinderUniforms():[],ce=X.concat(se).concat(le).concat(oe),me=[];for(let Ie of ce)me.indexOf(Ie)<0&&me.push(Ie);let he=u?u.defines():[];ln(D)&&he.unshift("#version 300 es"),b&&he.push("#define OVERDRAW_INSPECTOR;"),w&&he.push("#define TERRAIN3D;"),E&&he.push(E),z&&he.push(...z);let ge=he.concat(li.prelude.fragmentSource,k.fragmentSource,n.fragmentSource).join(`
`),be=he.concat(li.prelude.vertexSource,k.vertexSource,n.vertexSource).join(`
`);ln(D)||(ge=(function(Ie){return Ie.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(ge),be=(function(Ie){return Ie.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(be));let pe=D.createShader(D.FRAGMENT_SHADER);if(D.isContextLost())return void(this.failedToCreate=!0);if(D.shaderSource(pe,ge),D.compileShader(pe),!D.getShaderParameter(pe,D.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${D.getShaderInfoLog(pe)}`);D.attachShader(this.program,pe);let Se=D.createShader(D.VERTEX_SHADER);if(D.isContextLost())return void(this.failedToCreate=!0);if(D.shaderSource(Se,be),D.compileShader(Se),!D.getShaderParameter(Se,D.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${D.getShaderInfoLog(Se)}`);D.attachShader(this.program,Se),this.attributes={};let De={};this.numAttributes=U.length;for(let Ie=0;Ie<this.numAttributes;Ie++)U[Ie]&&(D.bindAttribLocation(this.program,Ie,U[Ie]),this.attributes[U[Ie]]=Ie);if(D.linkProgram(this.program),!D.getProgramParameter(this.program,D.LINK_STATUS))throw new Error(`Program failed to link: ${D.getProgramInfoLog(this.program)}`);D.deleteShader(Se),D.deleteShader(pe);for(let Ie=0;Ie<me.length;Ie++){let Le=me[Ie];if(Le&&!De[Le]){let Fe=D.getUniformLocation(this.program,Le);Fe&&(De[Le]=Fe)}}this.fixedUniforms=m(t,De),this.terrainUniforms=((Ie,Le)=>({u_depth:new a.b$(Ie,Le.u_depth),u_terrain:new a.b$(Ie,Le.u_terrain),u_terrain_dim:new a.br(Ie,Le.u_terrain_dim),u_terrain_matrix:new a.c1(Ie,Le.u_terrain_matrix),u_terrain_unpack:new a.c2(Ie,Le.u_terrain_unpack),u_terrain_exaggeration:new a.br(Ie,Le.u_terrain_exaggeration)}))(t,De),this.projectionUniforms=((Ie,Le)=>({u_projection_matrix:new a.c1(Ie,Le.u_projection_matrix),u_projection_tile_mercator_coords:new a.c2(Ie,Le.u_projection_tile_mercator_coords),u_projection_clipping_plane:new a.c2(Ie,Le.u_projection_clipping_plane),u_projection_transition:new a.br(Ie,Le.u_projection_transition),u_projection_fallback_matrix:new a.c1(Ie,Le.u_projection_fallback_matrix)}))(t,De),this.binderUniforms=u?u.getUniforms(t,De):[]}draw(t,n,u,m,b,w,k,E,z,D,N,j,U,X,se,le,oe,ce,me){let he=t.gl;if(this.failedToCreate)return;if(t.program.set(this.program),t.setDepthMode(u),t.setStencilMode(m),t.setColorMode(b),t.setCullFace(w),E){t.activeTexture.set(he.TEXTURE2),he.bindTexture(he.TEXTURE_2D,E.depthTexture),t.activeTexture.set(he.TEXTURE3),he.bindTexture(he.TEXTURE_2D,E.texture);for(let be in this.terrainUniforms)this.terrainUniforms[be].set(E[be])}if(z)for(let be in z)this.projectionUniforms[Is[be]].set(z[be]);if(k)for(let be in this.fixedUniforms)this.fixedUniforms[be].set(k[be]);le&&le.setUniforms(t,this.binderUniforms,X,{zoom:se});let ge=0;switch(n){case he.LINES:ge=2;break;case he.TRIANGLES:ge=3;break;case he.LINE_STRIP:ge=1}for(let be of U.get()){let pe=be.vaos||(be.vaos={});(pe[D]||(pe[D]=new Ko)).bind(t,this,N,le?le.getPaintVertexBuffers():[],j,be.vertexOffset,oe,ce,me),he.drawElements(n,be.primitiveLength*ge,he.UNSIGNED_SHORT,be.primitiveOffset*ge*2)}}}function _c(_,t,n){let u=1/a.aO(n,1,t.transform.tileZoom),m=Math.pow(2,n.tileID.overscaledZ),b=n.tileSize*Math.pow(2,t.transform.tileZoom)/m,w=b*(n.tileID.canonical.x+n.tileID.wrap*m),k=b*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[u,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[w>>16,k>>16],u_pixel_coord_lower:[65535&w,65535&k]}}let Ln=(_,t,n,u)=>{let m=_.style.light,b=m.properties.get("position"),w=[b.x,b.y,b.z],k=a.c5();m.properties.get("anchor")==="viewport"&&a.c6(k,_.transform.bearingInRadians),a.c7(w,w,k);let E=_.transform.transformLightDirection(w),z=m.properties.get("color");return{u_lightpos:w,u_lightpos_globe:E,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[z.r,z.g,z.b],u_vertical_gradient:+t,u_opacity:n,u_fill_translate:u}},Rl=(_,t,n,u,m,b,w)=>a.e(Ln(_,t,n,u),_c(b,_,w),{u_height_factor:-Math.pow(2,m.overscaledZ)/w.tileSize/8}),Ma=(_,t,n,u)=>a.e(_c(t,_,n),{u_fill_translate:u}),vc=(_,t)=>({u_world:_,u_fill_translate:t}),zs=(_,t,n,u,m)=>a.e(Ma(_,t,n,m),{u_world:u}),Bl=(_,t,n,u,m)=>{let b=_.transform,w,k,E=0;if(n.paint.get("circle-pitch-alignment")==="map"){let z=a.aO(t,1,b.zoom);w=!0,k=[z,z],E=z/(a.a5*Math.pow(2,t.tileID.overscaledZ))*2*Math.PI*m}else w=!1,k=b.pixelsToGLUnits;return{u_camera_to_center_distance:b.cameraToCenterDistance,u_scale_with_map:+(n.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+w,u_device_pixel_ratio:_.pixelRatio,u_extrude_scale:k,u_globe_extrude_scale:E,u_translate:u}},Hn=_=>({u_pixel_extrude_scale:[1/_.width,1/_.height]}),bc=_=>({u_viewport_size:[_.width,_.height]}),Yn=(_,t=1)=>({u_color:_,u_overlay:0,u_overlay_scale:t}),ha=(_,t,n,u)=>{let m=a.aO(_,1,t)/(a.a5*Math.pow(2,_.tileID.overscaledZ))*2*Math.PI*u;return{u_extrude_scale:a.aO(_,1,t),u_intensity:n,u_globe_extrude_scale:m}},xc=(_,t,n,u)=>{let m=a.N();a.c8(m,0,_.width,_.height,0,0,1);let b=_.context.gl;return{u_matrix:m,u_world:[b.drawingBufferWidth,b.drawingBufferHeight],u_image:n,u_color_ramp:u,u_opacity:t.paint.get("heatmap-opacity")}},Ls=(_,t,n)=>{let u=n.paint.get("hillshade-accent-color"),m;switch(n.paint.get("hillshade-method")){case"basic":m=4;break;case"combined":m=1;break;case"igor":m=2;break;case"multidirectional":m=3;break;default:m=0}let b=n.getIlluminationProperties();for(let w=0;w<b.directionRadians.length;w++)n.paint.get("hillshade-illumination-anchor")==="viewport"&&(b.directionRadians[w]+=_.transform.bearingInRadians);return{u_image:0,u_latrange:da(0,t.tileID),u_exaggeration:n.paint.get("hillshade-exaggeration"),u_altitudes:b.altitudeRadians,u_azimuths:b.directionRadians,u_accent:u,u_method:m,u_highlights:b.highlightColor,u_shadows:b.shadowColor}},Gu=(_,t)=>{let n=t.stride,u=a.N();return a.c8(u,0,a.a5,-a.a5,0,0,1),a.O(u,u,[0,-a.a5,0]),{u_matrix:u,u_image:1,u_dimension:[n,n],u_zoom:_.overscaledZ,u_unpack:t.getUnpackVector()}};function da(_,t){let n=Math.pow(2,t.canonical.z),u=t.canonical.y;return[new a.ab(0,u/n).toLngLat().lat,new a.ab(0,(u+1)/n).toLngLat().lat]}let wc=(_,t,n=0)=>({u_image:0,u_unpack:t.getUnpackVector(),u_dimension:[t.stride,t.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:n,u_opacity:_.paint.get("color-relief-opacity")}),Xn=(_,t,n,u)=>{let m=_.transform;return{u_translation:is(_,t,n),u_ratio:u/a.aO(t,1,m.zoom),u_device_pixel_ratio:_.pixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},Sc=(_,t,n,u,m)=>a.e(Xn(_,t,n,u),{u_image:0,u_image_height:m}),On=(_,t,n,u,m)=>{let b=_.transform,w=cn(t,b);return{u_translation:is(_,t,n),u_texsize:t.imageAtlasTexture.size,u_ratio:u/a.aO(t,1,b.zoom),u_device_pixel_ratio:_.pixelRatio,u_image:0,u_scale:[w,m.fromScale,m.toScale],u_fade:m.t,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},po=(_,t,n,u,m)=>{let b=cn(t,_.transform);return a.e(Xn(_,t,n,u),{u_tileratio:b,u_crossfade_from:m.fromScale,u_crossfade_to:m.toScale,u_image:0,u_mix:m.t,u_lineatlas_width:_.lineAtlas.width,u_lineatlas_height:_.lineAtlas.height})},fo=(_,t,n,u,m,b)=>{let w=cn(t,_.transform);return a.e(Xn(_,t,n,u),{u_image:0,u_image_height:b,u_tileratio:w,u_crossfade_from:m.fromScale,u_crossfade_to:m.toScale,u_image_dash:1,u_mix:m.t,u_lineatlas_width:_.lineAtlas.width,u_lineatlas_height:_.lineAtlas.height})};function cn(_,t){return 1/a.aO(_,1,t.tileZoom)}function is(_,t,n){return a.aP(_.transform,t,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}let mo=(_,t,n,u,m)=>{return{u_tl_parent:_,u_scale_parent:t,u_buffer_scale:1,u_fade_t:n.mix,u_opacity:n.opacity*u.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:u.paint.get("raster-brightness-min"),u_brightness_high:u.paint.get("raster-brightness-max"),u_saturation_factor:(w=u.paint.get("raster-saturation"),w>0?1-1/(1.001-w):-w),u_contrast_factor:(b=u.paint.get("raster-contrast"),b>0?1/(1-b):1+b),u_spin_weights:Os(u.paint.get("raster-hue-rotate")),u_coords_top:[m[0].x,m[0].y,m[1].x,m[1].y],u_coords_bottom:[m[3].x,m[3].y,m[2].x,m[2].y]};var b,w};function Os(_){_*=Math.PI/180;let t=Math.sin(_),n=Math.cos(_);return[(2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3]}let Ia=(_,t,n,u,m,b,w,k,E,z,D,N,j)=>{let U=w.transform;return{u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:U.cameraToCenterDistance,u_pitch:U.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:U.width/U.height,u_fade_change:w.options.fadeDuration?w.symbolFadeChange:1,u_label_plane_matrix:k,u_coord_matrix:E,u_is_text:+D,u_pitch_with_map:+u,u_is_along_line:m,u_is_variable_anchor:b,u_texsize:N,u_texture:0,u_translation:z,u_pitched_scale:j}},rs=(_,t,n,u,m,b,w,k,E,z,D,N,j,U)=>{let X=w.transform;return a.e(Ia(_,t,n,u,m,b,w,k,E,z,D,N,U),{u_gamma_scale:u?Math.cos(X.pitch*Math.PI/180)*X.cameraToCenterDistance:1,u_device_pixel_ratio:w.pixelRatio,u_is_halo:1})},pa=(_,t,n,u,m,b,w,k,E,z,D,N,j)=>a.e(rs(_,t,n,u,m,b,w,k,E,z,!0,D,0,j),{u_texsize_icon:N,u_texture_icon:1}),Jo=(_,t)=>({u_opacity:_,u_color:t}),Uu=(_,t,n,u,m)=>a.e((function(b,w,k,E){let z=k.imageManager.getPattern(b.from.toString()),D=k.imageManager.getPattern(b.to.toString()),{width:N,height:j}=k.imageManager.getPixelSize(),U=Math.pow(2,E.tileID.overscaledZ),X=E.tileSize*Math.pow(2,k.transform.tileZoom)/U,se=X*(E.tileID.canonical.x+E.tileID.wrap*U),le=X*E.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:z.tl,u_pattern_br_a:z.br,u_pattern_tl_b:D.tl,u_pattern_br_b:D.br,u_texsize:[N,j],u_mix:w.t,u_pattern_size_a:z.displaySize,u_pattern_size_b:D.displaySize,u_scale_a:w.fromScale,u_scale_b:w.toScale,u_tile_units_to_pixels:1/a.aO(E,1,k.transform.tileZoom),u_pixel_coord_upper:[se>>16,le>>16],u_pixel_coord_lower:[65535&se,65535&le]}})(n,m,t,u),{u_opacity:_}),go=(_,t)=>{},Zu={fillExtrusion:(_,t)=>({u_lightpos:new a.c3(_,t.u_lightpos),u_lightpos_globe:new a.c3(_,t.u_lightpos_globe),u_lightintensity:new a.br(_,t.u_lightintensity),u_lightcolor:new a.c3(_,t.u_lightcolor),u_vertical_gradient:new a.br(_,t.u_vertical_gradient),u_opacity:new a.br(_,t.u_opacity),u_fill_translate:new a.c4(_,t.u_fill_translate)}),fillExtrusionPattern:(_,t)=>({u_lightpos:new a.c3(_,t.u_lightpos),u_lightpos_globe:new a.c3(_,t.u_lightpos_globe),u_lightintensity:new a.br(_,t.u_lightintensity),u_lightcolor:new a.c3(_,t.u_lightcolor),u_vertical_gradient:new a.br(_,t.u_vertical_gradient),u_height_factor:new a.br(_,t.u_height_factor),u_opacity:new a.br(_,t.u_opacity),u_fill_translate:new a.c4(_,t.u_fill_translate),u_image:new a.b$(_,t.u_image),u_texsize:new a.c4(_,t.u_texsize),u_pixel_coord_upper:new a.c4(_,t.u_pixel_coord_upper),u_pixel_coord_lower:new a.c4(_,t.u_pixel_coord_lower),u_scale:new a.c3(_,t.u_scale),u_fade:new a.br(_,t.u_fade)}),fill:(_,t)=>({u_fill_translate:new a.c4(_,t.u_fill_translate)}),fillPattern:(_,t)=>({u_image:new a.b$(_,t.u_image),u_texsize:new a.c4(_,t.u_texsize),u_pixel_coord_upper:new a.c4(_,t.u_pixel_coord_upper),u_pixel_coord_lower:new a.c4(_,t.u_pixel_coord_lower),u_scale:new a.c3(_,t.u_scale),u_fade:new a.br(_,t.u_fade),u_fill_translate:new a.c4(_,t.u_fill_translate)}),fillOutline:(_,t)=>({u_world:new a.c4(_,t.u_world),u_fill_translate:new a.c4(_,t.u_fill_translate)}),fillOutlinePattern:(_,t)=>({u_world:new a.c4(_,t.u_world),u_image:new a.b$(_,t.u_image),u_texsize:new a.c4(_,t.u_texsize),u_pixel_coord_upper:new a.c4(_,t.u_pixel_coord_upper),u_pixel_coord_lower:new a.c4(_,t.u_pixel_coord_lower),u_scale:new a.c3(_,t.u_scale),u_fade:new a.br(_,t.u_fade),u_fill_translate:new a.c4(_,t.u_fill_translate)}),circle:(_,t)=>({u_camera_to_center_distance:new a.br(_,t.u_camera_to_center_distance),u_scale_with_map:new a.b$(_,t.u_scale_with_map),u_pitch_with_map:new a.b$(_,t.u_pitch_with_map),u_extrude_scale:new a.c4(_,t.u_extrude_scale),u_device_pixel_ratio:new a.br(_,t.u_device_pixel_ratio),u_globe_extrude_scale:new a.br(_,t.u_globe_extrude_scale),u_translate:new a.c4(_,t.u_translate)}),collisionBox:(_,t)=>({u_pixel_extrude_scale:new a.c4(_,t.u_pixel_extrude_scale)}),collisionCircle:(_,t)=>({u_viewport_size:new a.c4(_,t.u_viewport_size)}),debug:(_,t)=>({u_color:new a.c0(_,t.u_color),u_overlay:new a.b$(_,t.u_overlay),u_overlay_scale:new a.br(_,t.u_overlay_scale)}),depth:go,clippingMask:go,heatmap:(_,t)=>({u_extrude_scale:new a.br(_,t.u_extrude_scale),u_intensity:new a.br(_,t.u_intensity),u_globe_extrude_scale:new a.br(_,t.u_globe_extrude_scale)}),heatmapTexture:(_,t)=>({u_matrix:new a.c1(_,t.u_matrix),u_world:new a.c4(_,t.u_world),u_image:new a.b$(_,t.u_image),u_color_ramp:new a.b$(_,t.u_color_ramp),u_opacity:new a.br(_,t.u_opacity)}),hillshade:(_,t)=>({u_image:new a.b$(_,t.u_image),u_latrange:new a.c4(_,t.u_latrange),u_exaggeration:new a.br(_,t.u_exaggeration),u_altitudes:new a.ca(_,t.u_altitudes),u_azimuths:new a.ca(_,t.u_azimuths),u_accent:new a.c0(_,t.u_accent),u_method:new a.b$(_,t.u_method),u_shadows:new a.c9(_,t.u_shadows),u_highlights:new a.c9(_,t.u_highlights)}),hillshadePrepare:(_,t)=>({u_matrix:new a.c1(_,t.u_matrix),u_image:new a.b$(_,t.u_image),u_dimension:new a.c4(_,t.u_dimension),u_zoom:new a.br(_,t.u_zoom),u_unpack:new a.c2(_,t.u_unpack)}),colorRelief:(_,t)=>({u_image:new a.b$(_,t.u_image),u_unpack:new a.c2(_,t.u_unpack),u_dimension:new a.c4(_,t.u_dimension),u_elevation_stops:new a.b$(_,t.u_elevation_stops),u_color_stops:new a.b$(_,t.u_color_stops),u_color_ramp_size:new a.b$(_,t.u_color_ramp_size),u_opacity:new a.br(_,t.u_opacity)}),line:(_,t)=>({u_translation:new a.c4(_,t.u_translation),u_ratio:new a.br(_,t.u_ratio),u_device_pixel_ratio:new a.br(_,t.u_device_pixel_ratio),u_units_to_pixels:new a.c4(_,t.u_units_to_pixels)}),lineGradient:(_,t)=>({u_translation:new a.c4(_,t.u_translation),u_ratio:new a.br(_,t.u_ratio),u_device_pixel_ratio:new a.br(_,t.u_device_pixel_ratio),u_units_to_pixels:new a.c4(_,t.u_units_to_pixels),u_image:new a.b$(_,t.u_image),u_image_height:new a.br(_,t.u_image_height)}),linePattern:(_,t)=>({u_translation:new a.c4(_,t.u_translation),u_texsize:new a.c4(_,t.u_texsize),u_ratio:new a.br(_,t.u_ratio),u_device_pixel_ratio:new a.br(_,t.u_device_pixel_ratio),u_image:new a.b$(_,t.u_image),u_units_to_pixels:new a.c4(_,t.u_units_to_pixels),u_scale:new a.c3(_,t.u_scale),u_fade:new a.br(_,t.u_fade)}),lineSDF:(_,t)=>({u_translation:new a.c4(_,t.u_translation),u_ratio:new a.br(_,t.u_ratio),u_device_pixel_ratio:new a.br(_,t.u_device_pixel_ratio),u_units_to_pixels:new a.c4(_,t.u_units_to_pixels),u_image:new a.b$(_,t.u_image),u_mix:new a.br(_,t.u_mix),u_tileratio:new a.br(_,t.u_tileratio),u_crossfade_from:new a.br(_,t.u_crossfade_from),u_crossfade_to:new a.br(_,t.u_crossfade_to),u_lineatlas_width:new a.br(_,t.u_lineatlas_width),u_lineatlas_height:new a.br(_,t.u_lineatlas_height)}),lineGradientSDF:(_,t)=>({u_translation:new a.c4(_,t.u_translation),u_ratio:new a.br(_,t.u_ratio),u_device_pixel_ratio:new a.br(_,t.u_device_pixel_ratio),u_units_to_pixels:new a.c4(_,t.u_units_to_pixels),u_image:new a.b$(_,t.u_image),u_image_height:new a.br(_,t.u_image_height),u_tileratio:new a.br(_,t.u_tileratio),u_crossfade_from:new a.br(_,t.u_crossfade_from),u_crossfade_to:new a.br(_,t.u_crossfade_to),u_image_dash:new a.b$(_,t.u_image_dash),u_mix:new a.br(_,t.u_mix),u_lineatlas_width:new a.br(_,t.u_lineatlas_width),u_lineatlas_height:new a.br(_,t.u_lineatlas_height)}),raster:(_,t)=>({u_tl_parent:new a.c4(_,t.u_tl_parent),u_scale_parent:new a.br(_,t.u_scale_parent),u_buffer_scale:new a.br(_,t.u_buffer_scale),u_fade_t:new a.br(_,t.u_fade_t),u_opacity:new a.br(_,t.u_opacity),u_image0:new a.b$(_,t.u_image0),u_image1:new a.b$(_,t.u_image1),u_brightness_low:new a.br(_,t.u_brightness_low),u_brightness_high:new a.br(_,t.u_brightness_high),u_saturation_factor:new a.br(_,t.u_saturation_factor),u_contrast_factor:new a.br(_,t.u_contrast_factor),u_spin_weights:new a.c3(_,t.u_spin_weights),u_coords_top:new a.c2(_,t.u_coords_top),u_coords_bottom:new a.c2(_,t.u_coords_bottom)}),symbolIcon:(_,t)=>({u_is_size_zoom_constant:new a.b$(_,t.u_is_size_zoom_constant),u_is_size_feature_constant:new a.b$(_,t.u_is_size_feature_constant),u_size_t:new a.br(_,t.u_size_t),u_size:new a.br(_,t.u_size),u_camera_to_center_distance:new a.br(_,t.u_camera_to_center_distance),u_pitch:new a.br(_,t.u_pitch),u_rotate_symbol:new a.b$(_,t.u_rotate_symbol),u_aspect_ratio:new a.br(_,t.u_aspect_ratio),u_fade_change:new a.br(_,t.u_fade_change),u_label_plane_matrix:new a.c1(_,t.u_label_plane_matrix),u_coord_matrix:new a.c1(_,t.u_coord_matrix),u_is_text:new a.b$(_,t.u_is_text),u_pitch_with_map:new a.b$(_,t.u_pitch_with_map),u_is_along_line:new a.b$(_,t.u_is_along_line),u_is_variable_anchor:new a.b$(_,t.u_is_variable_anchor),u_texsize:new a.c4(_,t.u_texsize),u_texture:new a.b$(_,t.u_texture),u_translation:new a.c4(_,t.u_translation),u_pitched_scale:new a.br(_,t.u_pitched_scale)}),symbolSDF:(_,t)=>({u_is_size_zoom_constant:new a.b$(_,t.u_is_size_zoom_constant),u_is_size_feature_constant:new a.b$(_,t.u_is_size_feature_constant),u_size_t:new a.br(_,t.u_size_t),u_size:new a.br(_,t.u_size),u_camera_to_center_distance:new a.br(_,t.u_camera_to_center_distance),u_pitch:new a.br(_,t.u_pitch),u_rotate_symbol:new a.b$(_,t.u_rotate_symbol),u_aspect_ratio:new a.br(_,t.u_aspect_ratio),u_fade_change:new a.br(_,t.u_fade_change),u_label_plane_matrix:new a.c1(_,t.u_label_plane_matrix),u_coord_matrix:new a.c1(_,t.u_coord_matrix),u_is_text:new a.b$(_,t.u_is_text),u_pitch_with_map:new a.b$(_,t.u_pitch_with_map),u_is_along_line:new a.b$(_,t.u_is_along_line),u_is_variable_anchor:new a.b$(_,t.u_is_variable_anchor),u_texsize:new a.c4(_,t.u_texsize),u_texture:new a.b$(_,t.u_texture),u_gamma_scale:new a.br(_,t.u_gamma_scale),u_device_pixel_ratio:new a.br(_,t.u_device_pixel_ratio),u_is_halo:new a.b$(_,t.u_is_halo),u_translation:new a.c4(_,t.u_translation),u_pitched_scale:new a.br(_,t.u_pitched_scale)}),symbolTextAndIcon:(_,t)=>({u_is_size_zoom_constant:new a.b$(_,t.u_is_size_zoom_constant),u_is_size_feature_constant:new a.b$(_,t.u_is_size_feature_constant),u_size_t:new a.br(_,t.u_size_t),u_size:new a.br(_,t.u_size),u_camera_to_center_distance:new a.br(_,t.u_camera_to_center_distance),u_pitch:new a.br(_,t.u_pitch),u_rotate_symbol:new a.b$(_,t.u_rotate_symbol),u_aspect_ratio:new a.br(_,t.u_aspect_ratio),u_fade_change:new a.br(_,t.u_fade_change),u_label_plane_matrix:new a.c1(_,t.u_label_plane_matrix),u_coord_matrix:new a.c1(_,t.u_coord_matrix),u_is_text:new a.b$(_,t.u_is_text),u_pitch_with_map:new a.b$(_,t.u_pitch_with_map),u_is_along_line:new a.b$(_,t.u_is_along_line),u_is_variable_anchor:new a.b$(_,t.u_is_variable_anchor),u_texsize:new a.c4(_,t.u_texsize),u_texsize_icon:new a.c4(_,t.u_texsize_icon),u_texture:new a.b$(_,t.u_texture),u_texture_icon:new a.b$(_,t.u_texture_icon),u_gamma_scale:new a.br(_,t.u_gamma_scale),u_device_pixel_ratio:new a.br(_,t.u_device_pixel_ratio),u_is_halo:new a.b$(_,t.u_is_halo),u_translation:new a.c4(_,t.u_translation),u_pitched_scale:new a.br(_,t.u_pitched_scale)}),background:(_,t)=>({u_opacity:new a.br(_,t.u_opacity),u_color:new a.c0(_,t.u_color)}),backgroundPattern:(_,t)=>({u_opacity:new a.br(_,t.u_opacity),u_image:new a.b$(_,t.u_image),u_pattern_tl_a:new a.c4(_,t.u_pattern_tl_a),u_pattern_br_a:new a.c4(_,t.u_pattern_br_a),u_pattern_tl_b:new a.c4(_,t.u_pattern_tl_b),u_pattern_br_b:new a.c4(_,t.u_pattern_br_b),u_texsize:new a.c4(_,t.u_texsize),u_mix:new a.br(_,t.u_mix),u_pattern_size_a:new a.c4(_,t.u_pattern_size_a),u_pattern_size_b:new a.c4(_,t.u_pattern_size_b),u_scale_a:new a.br(_,t.u_scale_a),u_scale_b:new a.br(_,t.u_scale_b),u_pixel_coord_upper:new a.c4(_,t.u_pixel_coord_upper),u_pixel_coord_lower:new a.c4(_,t.u_pixel_coord_lower),u_tile_units_to_pixels:new a.br(_,t.u_tile_units_to_pixels)}),terrain:(_,t)=>({u_texture:new a.b$(_,t.u_texture),u_ele_delta:new a.br(_,t.u_ele_delta),u_fog_matrix:new a.c1(_,t.u_fog_matrix),u_fog_color:new a.c0(_,t.u_fog_color),u_fog_ground_blend:new a.br(_,t.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.br(_,t.u_fog_ground_blend_opacity),u_horizon_color:new a.c0(_,t.u_horizon_color),u_horizon_fog_blend:new a.br(_,t.u_horizon_fog_blend),u_is_globe_mode:new a.br(_,t.u_is_globe_mode)}),terrainDepth:(_,t)=>({u_ele_delta:new a.br(_,t.u_ele_delta)}),terrainCoords:(_,t)=>({u_texture:new a.b$(_,t.u_texture),u_terrain_coords_id:new a.br(_,t.u_terrain_coords_id),u_ele_delta:new a.br(_,t.u_ele_delta)}),projectionErrorMeasurement:(_,t)=>({u_input:new a.br(_,t.u_input),u_output_expected:new a.br(_,t.u_output_expected)}),atmosphere:(_,t)=>({u_sun_pos:new a.c3(_,t.u_sun_pos),u_atmosphere_blend:new a.br(_,t.u_atmosphere_blend),u_globe_position:new a.c3(_,t.u_globe_position),u_globe_radius:new a.br(_,t.u_globe_radius),u_inv_proj_matrix:new a.c1(_,t.u_inv_proj_matrix)}),sky:(_,t)=>({u_sky_color:new a.c0(_,t.u_sky_color),u_horizon_color:new a.c0(_,t.u_horizon_color),u_horizon:new a.c4(_,t.u_horizon),u_horizon_normal:new a.c4(_,t.u_horizon_normal),u_sky_horizon_blend:new a.br(_,t.u_sky_horizon_blend),u_sky_blend:new a.br(_,t.u_sky_blend)})};class Tc{constructor(t,n,u){this.context=t;let m=t.gl;this.buffer=m.createBuffer(),this.dynamicDraw=!!u,this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,n.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete n.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){let n=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),n.bufferSubData(n.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let Cc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class kc{constructor(t,n,u,m){this.length=n.length,this.attributes=u,this.itemSize=n.bytesPerElement,this.dynamicDraw=m,this.context=t;let b=t.gl;this.buffer=b.createBuffer(),t.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,n.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete n.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){if(t.length!==this.length)throw new Error(`Length of new data is ${t.length}, which doesn't match current length of ${this.length}`);let n=this.context.gl;this.bind(),n.bufferSubData(n.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,n){for(let u=0;u<this.attributes.length;u++){let m=n.attributes[this.attributes[u].name];m!==void 0&&t.enableVertexAttribArray(m)}}setVertexAttribPointers(t,n,u){for(let m=0;m<this.attributes.length;m++){let b=this.attributes[m],w=n.attributes[b.name];w!==void 0&&t.vertexAttribPointer(w,b.components,t[Cc[b.type]],!1,this.itemSize,b.offset+this.itemSize*(u||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class ci{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class un extends ci{getDefault(){return a.bq.transparent}set(t){let n=this.current;(t.r!==n.r||t.g!==n.g||t.b!==n.b||t.a!==n.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class ns extends ci{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class Qo extends ci{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class Ds extends ci{getDefault(){return[!0,!0,!0,!0]}set(t){let n=this.current;(t[0]!==n[0]||t[1]!==n[1]||t[2]!==n[2]||t[3]!==n[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class as extends ci{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class Rs extends ci{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class Bs extends ci{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){let n=this.current;(t.func!==n.func||t.ref!==n.ref||t.mask!==n.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class Er extends ci{getDefault(){let t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){let n=this.current;(t[0]!==n[0]||t[1]!==n[1]||t[2]!==n[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class Pc extends ci{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;let n=this.gl;t?n.enable(n.STENCIL_TEST):n.disable(n.STENCIL_TEST),this.current=t,this.dirty=!1}}class ss extends ci{getDefault(){return[0,1]}set(t){let n=this.current;(t[0]!==n[0]||t[1]!==n[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class el extends ci{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;let n=this.gl;t?n.enable(n.DEPTH_TEST):n.disable(n.DEPTH_TEST),this.current=t,this.dirty=!1}}class za extends ci{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class tl extends ci{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;let n=this.gl;t?n.enable(n.BLEND):n.disable(n.BLEND),this.current=t,this.dirty=!1}}class bn extends ci{getDefault(){let t=this.gl;return[t.ONE,t.ZERO]}set(t){let n=this.current;(t[0]!==n[0]||t[1]!==n[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class Fs extends ci{getDefault(){return a.bq.transparent}set(t){let n=this.current;(t.r!==n.r||t.g!==n.g||t.b!==n.b||t.a!==n.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class yo extends ci{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class js extends ci{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;let n=this.gl;t?n.enable(n.CULL_FACE):n.disable(n.CULL_FACE),this.current=t,this.dirty=!1}}class Ns extends ci{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class fa extends ci{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class qs extends ci{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class il extends ci{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class Gt extends ci{getDefault(){let t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){let n=this.current;(t[0]!==n[0]||t[1]!==n[1]||t[2]!==n[2]||t[3]!==n[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class rl extends ci{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;let n=this.gl;n.bindFramebuffer(n.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class Ec extends ci{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;let n=this.gl;n.bindRenderbuffer(n.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class Fl extends ci{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;let n=this.gl;n.bindTexture(n.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class Vs extends ci{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;let n=this.gl;n.bindBuffer(n.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class Ac extends ci{getDefault(){return null}set(t){let n=this.gl;n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class Mc extends ci{getDefault(){return null}set(t){var n;if(t===this.current&&!this.dirty)return;let u=this.gl;ln(u)?u.bindVertexArray(t):(n=u.getExtension("OES_vertex_array_object"))===null||n===void 0||n.bindVertexArrayOES(t),this.current=t,this.dirty=!1}}class Ic extends ci{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;let n=this.gl;n.pixelStorei(n.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class zc extends ci{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;let n=this.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class nl extends ci{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;let n=this.gl;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class Ws extends ci{constructor(t,n){super(t),this.context=t,this.parent=n}getDefault(){return null}}class c extends Ws{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let n=this.gl;n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class v extends Ws{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let n=this.gl;n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class C extends Ws{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let n=this.gl;n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,t),this.current=t,this.dirty=!1}}let I="Framebuffer is not complete";class q{constructor(t,n,u,m,b){this.context=t,this.width=n,this.height=u;let w=t.gl,k=this.framebuffer=w.createFramebuffer();if(this.colorAttachment=new c(t,k),m)this.depthAttachment=b?new C(t,k):new v(t,k);else if(b)throw new Error("Stencil cannot be set without depth");if(w.checkFramebufferStatus(w.FRAMEBUFFER)!==w.FRAMEBUFFER_COMPLETE)throw new Error(I)}destroy(){let t=this.context.gl,n=this.colorAttachment.get();if(n&&t.deleteTexture(n),this.depthAttachment){let u=this.depthAttachment.get();u&&t.deleteRenderbuffer(u)}t.deleteFramebuffer(this.framebuffer)}}class Q{constructor(t){var n,u;if(this.gl=t,this.clearColor=new un(this),this.clearDepth=new ns(this),this.clearStencil=new Qo(this),this.colorMask=new Ds(this),this.depthMask=new as(this),this.stencilMask=new Rs(this),this.stencilFunc=new Bs(this),this.stencilOp=new Er(this),this.stencilTest=new Pc(this),this.depthRange=new ss(this),this.depthTest=new el(this),this.depthFunc=new za(this),this.blend=new tl(this),this.blendFunc=new bn(this),this.blendColor=new Fs(this),this.blendEquation=new yo(this),this.cullFace=new js(this),this.cullFaceSide=new Ns(this),this.frontFace=new fa(this),this.program=new qs(this),this.activeTexture=new il(this),this.viewport=new Gt(this),this.bindFramebuffer=new rl(this),this.bindRenderbuffer=new Ec(this),this.bindTexture=new Fl(this),this.bindVertexBuffer=new Vs(this),this.bindElementBuffer=new Ac(this),this.bindVertexArray=new Mc(this),this.pixelStoreUnpack=new Ic(this),this.pixelStoreUnpackPremultiplyAlpha=new zc(this),this.pixelStoreUnpackFlipY=new nl(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),ln(t)){this.HALF_FLOAT=t.HALF_FLOAT;let m=t.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(n=t.RGBA16F)!==null&&n!==void 0?n:m?.RGBA16F_EXT,this.RGB16F=(u=t.RGB16F)!==null&&u!==void 0?u:m?.RGB16F_EXT,t.getExtension("EXT_color_buffer_float")}else{t.getExtension("EXT_color_buffer_half_float"),t.getExtension("OES_texture_half_float_linear");let m=t.getExtension("OES_texture_half_float");this.HALF_FLOAT=m?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,n){return new Tc(this,t,n)}createVertexBuffer(t,n,u){return new kc(this,t,n,u)}createRenderbuffer(t,n,u){let m=this.gl,b=m.createRenderbuffer();return this.bindRenderbuffer.set(b),m.renderbufferStorage(m.RENDERBUFFER,t,n,u),this.bindRenderbuffer.set(null),b}createFramebuffer(t,n,u,m){return new q(this,t,n,u,m)}clear({color:t,depth:n,stencil:u}){let m=this.gl,b=0;t&&(b|=m.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),n!==void 0&&(b|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),u!==void 0&&(b|=m.STENCIL_BUFFER_BIT,this.clearStencil.set(u),this.stencilMask.set(255)),m.clear(b)}setCullFace(t){t.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(t){a.bS(t.blendFunction,Si.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}createVertexArray(){var t;return ln(this.gl)?this.gl.createVertexArray():(t=this.gl.getExtension("OES_vertex_array_object"))===null||t===void 0?void 0:t.createVertexArrayOES()}deleteVertexArray(t){var n;return ln(this.gl)?this.gl.deleteVertexArray(t):(n=this.gl.getExtension("OES_vertex_array_object"))===null||n===void 0?void 0:n.deleteVertexArrayOES(t)}unbindVAO(){this.bindVertexArray.set(null)}}let _e;function Ae(_,t,n,u,m){let b=_.context,w=_.transform,k=b.gl,E=_.useProgram("collisionBox"),z=[],D=0,N=0;for(let oe=0;oe<u.length;oe++){let ce=u[oe],me=t.getTile(ce).getBucket(n);if(!me)continue;let he=m?me.textCollisionBox:me.iconCollisionBox,ge=me.collisionCircleArray;ge.length>0&&(z.push({circleArray:ge,circleOffset:N,coord:ce}),D+=ge.length/4,N=D),he&&E.draw(b,k.LINES,Ot.disabled,Jt.disabled,_.colorModeForRenderPass(),Wt.disabled,Hn(_.transform),_.style.map.terrain&&_.style.map.terrain.getTerrainData(ce),w.getProjectionData({overscaledTileID:ce,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),n.id,he.layoutVertexBuffer,he.indexBuffer,he.segments,null,_.transform.zoom,null,null,he.collisionVertexBuffer)}if(!m||!z.length)return;let j=_.useProgram("collisionCircle"),U=new a.cb;U.resize(4*D),U._trim();let X=0;for(let oe of z)for(let ce=0;ce<oe.circleArray.length/4;ce++){let me=4*ce,he=oe.circleArray[me+0],ge=oe.circleArray[me+1],be=oe.circleArray[me+2],pe=oe.circleArray[me+3];U.emplace(X++,he,ge,be,pe,0),U.emplace(X++,he,ge,be,pe,1),U.emplace(X++,he,ge,be,pe,2),U.emplace(X++,he,ge,be,pe,3)}(!_e||_e.length<2*D)&&(_e=(function(oe){let ce=2*oe,me=new a.cd;me.resize(ce),me._trim();for(let he=0;he<ce;he++){let ge=6*he;me.uint16[ge+0]=4*he+0,me.uint16[ge+1]=4*he+1,me.uint16[ge+2]=4*he+2,me.uint16[ge+3]=4*he+2,me.uint16[ge+4]=4*he+3,me.uint16[ge+5]=4*he+0}return me})(D));let se=b.createIndexBuffer(_e,!0),le=b.createVertexBuffer(U,a.cc.members,!0);for(let oe of z){let ce=bc(_.transform);j.draw(b,k.TRIANGLES,Ot.disabled,Jt.disabled,_.colorModeForRenderPass(),Wt.disabled,ce,_.style.map.terrain&&_.style.map.terrain.getTerrainData(oe.coord),null,n.id,le,se,a.aY.simpleSegment(0,2*oe.circleOffset,oe.circleArray.length,oe.circleArray.length/2),null,_.transform.zoom,null,null,null)}le.destroy(),se.destroy()}let qe=a.as(new Float32Array(16));function Qe(_,t,n,u,m,b){let{horizontalAlign:w,verticalAlign:k}=a.aT(_);return new a.P((-(w-.5)*t/m+u[0])*b,(-(k-.5)*n/m+u[1])*b)}function ht(_,t,n,u,m,b){let w=t.tileAnchorPoint.add(new a.P(t.translation[0],t.translation[1]));if(t.pitchWithMap){let k=u.mult(b);n||(k=k.rotate(-m));let E=w.add(k);return Dt(E.x,E.y,t.pitchedLabelPlaneMatrix,t.getElevation).point}if(n){let k=di(t.tileAnchorPoint.x+1,t.tileAnchorPoint.y,t).point.sub(_),E=Math.atan(k.y/k.x)+(k.x<0?Math.PI:0);return _.add(u.rotate(E))}return _.add(u)}function Mt(_,t,n,u,m,b,w,k,E,z,D,N){let j=_.text.placedSymbolArray,U=_.text.dynamicLayoutVertexArray,X=_.icon.dynamicLayoutVertexArray,se={};U.clear();for(let le=0;le<j.length;le++){let oe=j.get(le),ce=oe.hidden||!oe.crossTileID||_.allowVerticalPlacement&&!oe.placedOrientation?null:u[oe.crossTileID];if(ce){let me=new a.P(oe.anchorX,oe.anchorY),he={getElevation:N,width:m.width,height:m.height,pitchedLabelPlaneMatrix:b,pitchWithMap:n,transform:m,tileAnchorPoint:me,translation:z,unwrappedTileID:D},ge=n?Gn(me.x,me.y,he):di(me.x,me.y,he),be=to(m.cameraToCenterDistance,ge.signedDistanceFromCamera),pe=a.aB(_.textSizeData,k,oe)*be/a.aN;n&&(pe*=_.tilePixelRatio/w);let{width:Se,height:De,anchor:Ie,textOffset:Le,textBoxScale:Fe}=ce,Xe=Qe(Ie,Se,De,Le,Fe,pe),et=m.getPitchedTextCorrection(me.x+z[0],me.y+z[1],D),He=ht(ge.point,he,t,Xe,-m.bearingInRadians,et),pt=_.allowVerticalPlacement&&oe.placedOrientation===a.aA.vertical?Math.PI/2:0;for(let zt=0;zt<oe.numGlyphs;zt++)a.aH(U,He,pt);E&&oe.associatedIconIndex>=0&&(se[oe.associatedIconIndex]={shiftedAnchor:He,angle:pt})}else mi(oe.numGlyphs,U)}if(E){X.clear();let le=_.icon.placedSymbolArray;for(let oe=0;oe<le.length;oe++){let ce=le.get(oe);if(ce.hidden)mi(ce.numGlyphs,X);else{let me=se[oe];if(me)for(let he=0;he<ce.numGlyphs;he++)a.aH(X,me.shiftedAnchor,me.angle);else mi(ce.numGlyphs,X)}}_.icon.dynamicLayoutVertexBuffer.updateData(X)}_.text.dynamicLayoutVertexBuffer.updateData(U)}function Yt(_,t,n){return n.iconsInText&&t?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function or(_,t,n,u,m,b,w,k,E,z,D,N,j){let U=_.context,X=U.gl,se=_.transform,le=k==="map",oe=E==="map",ce=k!=="viewport"&&n.layout.get("symbol-placement")!=="point",me=le&&!oe&&!ce,he=!n.layout.get("symbol-sort-key").isConstant(),ge=!1,be=_.getDepthModeForSublayer(0,Ot.ReadOnly),pe=n._unevaluatedLayout.hasValue("text-variable-anchor")||n._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Se=[],De=se.getCircleRadiusCorrection();for(let Ie of u){let Le=t.getTile(Ie),Fe=Le.getBucket(n);if(!Fe)continue;let Xe=m?Fe.text:Fe.icon;if(!Xe||!Xe.segments.get().length||!Xe.hasVisibleVertices)continue;let et=Xe.programConfigurations.get(n.id),He=m||Fe.sdfIcons,pt=m?Fe.textSizeData:Fe.iconSizeData,zt=oe||se.pitch!==0,pi=_.useProgram(Yt(He,m,Fe),et),Ai=a.az(pt,se.zoom),yi=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ie),Ri,Pi,xr,zi,ur=[0,0],nr=null;if(m)Pi=Le.glyphAtlasTexture,xr=X.LINEAR,Ri=Le.glyphAtlasTexture.size,Fe.iconsInText&&(ur=Le.imageAtlasTexture.size,nr=Le.imageAtlasTexture,zi=zt||_.options.rotating||_.options.zooming||pt.kind==="composite"||pt.kind==="camera"?X.LINEAR:X.NEAREST);else{let hr=n.layout.get("icon-size").constantOr(0)!==1||Fe.iconsNeedLinear;Pi=Le.imageAtlasTexture,xr=He||_.options.rotating||_.options.zooming||hr||zt?X.LINEAR:X.NEAREST,Ri=Le.imageAtlasTexture.size}let ar=a.aO(Le,1,_.transform.zoom),Vr=$r(le,_.transform,ar),fn=a.N();a.aC(fn,Vr);let Ra=Wo(oe,le,_.transform,ar),Us=a.aP(se,Le,b,w),Po=se.getProjectionData({overscaledTileID:Ie,applyGlobeMatrix:!j,applyTerrainMatrix:!0}),Zc=pe&&Fe.hasTextData(),hl=n.layout.get("icon-text-fit")!=="none"&&Zc&&Fe.hasIconData();if(ce){let hr=_.style.map.terrain?(Bn,Ui)=>_.style.map.terrain.getElevation(Ie,Bn,Ui):null,wr=n.layout.get("text-rotation-alignment")==="map";Go(Fe,_,m,Vr,fn,oe,z,wr,Ie.toUnwrapped(),se.width,se.height,Us,hr)}let Ba=m&&pe||hl,Ar=ce||Ba?qe:oe?Vr:_.transform.clipSpaceToPixelsMatrix,Kr=He&&n.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Wr;Wr=He?Fe.iconsInText?pa(pt.kind,Ai,me,oe,ce,Ba,_,Ar,Ra,Us,Ri,ur,De):rs(pt.kind,Ai,me,oe,ce,Ba,_,Ar,Ra,Us,m,Ri,0,De):Ia(pt.kind,Ai,me,oe,ce,Ba,_,Ar,Ra,Us,m,Ri,De);let Qn={program:pi,buffers:Xe,uniformValues:Wr,projectionData:Po,atlasTexture:Pi,atlasTextureIcon:nr,atlasInterpolation:xr,atlasInterpolationIcon:zi,isSDF:He,hasHalo:Kr};if(he&&Fe.canOverlap){ge=!0;let hr=Xe.segments.get();for(let wr of hr)Se.push({segments:new a.aY([wr]),sortKey:wr.sortKey,state:Qn,terrainData:yi})}else Se.push({segments:Xe.segments,sortKey:0,state:Qn,terrainData:yi})}ge&&Se.sort(((Ie,Le)=>Ie.sortKey-Le.sortKey));for(let Ie of Se){let Le=Ie.state;if(U.activeTexture.set(X.TEXTURE0),Le.atlasTexture.bind(Le.atlasInterpolation,X.CLAMP_TO_EDGE),Le.atlasTextureIcon&&(U.activeTexture.set(X.TEXTURE1),Le.atlasTextureIcon&&Le.atlasTextureIcon.bind(Le.atlasInterpolationIcon,X.CLAMP_TO_EDGE)),Le.isSDF){let Fe=Le.uniformValues;Le.hasHalo&&(Fe.u_is_halo=1,Ji(Le.buffers,Ie.segments,n,_,Le.program,be,D,N,Fe,Le.projectionData,Ie.terrainData)),Fe.u_is_halo=0}Ji(Le.buffers,Ie.segments,n,_,Le.program,be,D,N,Le.uniformValues,Le.projectionData,Ie.terrainData)}}function Ji(_,t,n,u,m,b,w,k,E,z,D){let N=u.context;m.draw(N,N.gl.TRIANGLES,b,w,k,Wt.backCCW,E,D,z,n.id,_.layoutVertexBuffer,_.indexBuffer,t,n.paint,u.transform.zoom,_.programConfigurations.get(n.id),_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer)}function hn(_,t,n,u,m){let b=_.context,w=b.gl,k=Jt.disabled,E=new Si([w.ONE,w.ONE],a.bq.transparent,[!0,!0,!0,!0]),z=t.getBucket(n);if(!z)return;let D=u.key,N=n.heatmapFbos.get(D);N||(N=Kn(b,t.tileSize,t.tileSize),n.heatmapFbos.set(D,N)),b.bindFramebuffer.set(N.framebuffer),b.viewport.set([0,0,t.tileSize,t.tileSize]),b.clear({color:a.bq.transparent});let j=z.programConfigurations.get(n.id),U=_.useProgram("heatmap",j,!m),X=_.transform.getProjectionData({overscaledTileID:t.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),se=_.style.map.terrain.getTerrainData(u);U.draw(b,w.TRIANGLES,Ot.disabled,k,E,Wt.disabled,ha(t,_.transform.zoom,n.paint.get("heatmap-intensity"),1),se,X,n.id,z.layoutVertexBuffer,z.indexBuffer,z.segments,n.paint,_.transform.zoom,j)}function qr(_,t,n,u,m){let b=_.context,w=b.gl,k=_.transform;b.setColorMode(_.colorModeForRenderPass());let E=al(b,t),z=n.key,D=t.heatmapFbos.get(z);if(!D)return;b.activeTexture.set(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,D.colorAttachment.get()),b.activeTexture.set(w.TEXTURE1),E.bind(w.LINEAR,w.CLAMP_TO_EDGE);let N=k.getProjectionData({overscaledTileID:n,applyTerrainMatrix:m,applyGlobeMatrix:!u});_.useProgram("heatmapTexture").draw(b,w.TRIANGLES,Ot.disabled,Jt.disabled,_.colorModeForRenderPass(),Wt.disabled,xc(_,t,0,1),null,N,t.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments,t.paint,k.zoom),D.destroy(),t.heatmapFbos.delete(z)}function Kn(_,t,n){var u,m;let b=_.gl,w=b.createTexture();b.bindTexture(b.TEXTURE_2D,w),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);let k=(u=_.HALF_FLOAT)!==null&&u!==void 0?u:b.UNSIGNED_BYTE,E=(m=_.RGBA16F)!==null&&m!==void 0?m:b.RGBA;b.texImage2D(b.TEXTURE_2D,0,E,t,n,0,b.RGBA,k,null);let z=_.createFramebuffer(t,n,!1,!1);return z.colorAttachment.set(w),z}function al(_,t){return t.colorRampTexture||(t.colorRampTexture=new a.T(_,t.colorRamp,_.gl.RGBA)),t.colorRampTexture}function Lc(_,t,n,u,m,b,w,k){let E=256;if(m.stepInterpolant){let z=t.getSource().maxzoom,D=w.canonical.z===z?Math.ceil(1<<_.transform.maxZoom-w.canonical.z):1;E=a.ao(a.cf(b.maxLineLength/a.a5*1024*D),256,n.maxTextureSize)}return k.gradient=a.cg({expression:m.gradientExpression(),evaluationKey:"lineProgress",resolution:E,image:k.gradient||void 0,clips:b.lineClipsArray}),k.texture?k.texture.update(k.gradient):k.texture=new a.T(n,k.gradient,u.RGBA),k.version=m.gradientVersion,k.texture}function Oc(_,t,n,u,m){_.activeTexture.set(t.TEXTURE0),n.imageAtlasTexture.bind(t.LINEAR,t.CLAMP_TO_EDGE),u.updatePaintBuffers(m)}function Oi(_,t,n,u,m,b){(m||_.lineAtlas.dirty)&&(t.activeTexture.set(n.TEXTURE0),_.lineAtlas.bind(t)),u.updatePaintBuffers(b)}function os(_,t,n,u,m,b,w){let k=b.gradients[m.id],E=k.texture;m.gradientVersion!==k.version&&(E=Lc(_,t,n,u,m,b,w,k)),n.activeTexture.set(u.TEXTURE0),E.bind(m.stepInterpolant?u.NEAREST:u.LINEAR,u.CLAMP_TO_EDGE)}function dn(_,t,n,u,m,b,w,k,E){let z=b.gradients[m.id],D=z.texture;m.gradientVersion!==z.version&&(D=Lc(_,t,n,u,m,b,w,z)),n.activeTexture.set(u.TEXTURE0),D.bind(m.stepInterpolant?u.NEAREST:u.LINEAR,u.CLAMP_TO_EDGE),n.activeTexture.set(u.TEXTURE1),_.lineAtlas.bind(n),k.updatePaintBuffers(E)}function Di(_,t,n,u,m){if(!n||!u||!u.imageAtlas)return;let b=u.imageAtlas.patternPositions,w=b[n.to.toString()],k=b[n.from.toString()];if(!w&&k&&(w=k),!k&&w&&(k=w),!w||!k){let E=m.getPaintProperty(t);w=b[E],k=b[E]}w&&k&&_.setConstantPatternPositions(w,k)}function La(_,t,n,u,m,b,w,k){let E=_.context.gl,z="fill-pattern",D=n.paint.get(z),N=D&&D.constantOr(1),j=n.getCrossfadeParameters(),U,X,se,le,oe,ce=_.transform,me=n.paint.get("fill-translate"),he=n.paint.get("fill-translate-anchor");w?(X=N&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",U=E.LINES):(X=N?"fillPattern":"fill",U=E.TRIANGLES);let ge=D.constantOr(null);for(let be of u){let pe=t.getTile(be);if(N&&!pe.patternsLoaded())continue;let Se=pe.getBucket(n);if(!Se)continue;let De=Se.programConfigurations.get(n.id),Ie=_.useProgram(X,De),Le=_.style.map.terrain&&_.style.map.terrain.getTerrainData(be);N&&(_.context.activeTexture.set(E.TEXTURE0),pe.imageAtlasTexture.bind(E.LINEAR,E.CLAMP_TO_EDGE),De.updatePaintBuffers(j)),Di(De,z,ge,pe,n);let Fe=ce.getProjectionData({overscaledTileID:be,applyGlobeMatrix:!k,applyTerrainMatrix:!0}),Xe=a.aP(ce,pe,me,he);if(w){le=Se.indexBuffer2,oe=Se.segments2;let He=[E.drawingBufferWidth,E.drawingBufferHeight];se=X==="fillOutlinePattern"&&N?zs(_,j,pe,He,Xe):vc(He,Xe)}else le=Se.indexBuffer,oe=Se.segments,se=N?Ma(_,j,pe,Xe):{u_fill_translate:Xe};let et=_.stencilModeForClipping(be);Ie.draw(_.context,U,m,et,b,Wt.backCCW,se,Le,Fe,n.id,Se.layoutVertexBuffer,le,oe,n.paint,_.transform.zoom,De)}}function sl(_,t,n,u,m,b,w,k){let E=_.context,z=E.gl,D="fill-extrusion-pattern",N=n.paint.get(D),j=N.constantOr(1),U=n.getCrossfadeParameters(),X=n.paint.get("fill-extrusion-opacity"),se=N.constantOr(null),le=_.transform;for(let oe of u){let ce=t.getTile(oe),me=ce.getBucket(n);if(!me)continue;let he=_.style.map.terrain&&_.style.map.terrain.getTerrainData(oe),ge=me.programConfigurations.get(n.id),be=_.useProgram(j?"fillExtrusionPattern":"fillExtrusion",ge);j&&(_.context.activeTexture.set(z.TEXTURE0),ce.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),ge.updatePaintBuffers(U));let pe=le.getProjectionData({overscaledTileID:oe,applyGlobeMatrix:!k,applyTerrainMatrix:!0});Di(ge,D,se,ce,n);let Se=a.aP(le,ce,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),De=n.paint.get("fill-extrusion-vertical-gradient"),Ie=j?Rl(_,De,X,Se,oe,U,ce):Ln(_,De,X,Se);be.draw(E,E.gl.TRIANGLES,m,b,w,Wt.backCCW,Ie,he,pe,n.id,me.layoutVertexBuffer,me.indexBuffer,me.segments,n.paint,_.transform.zoom,ge,_.style.map.terrain&&me.centroidVertexBuffer)}}function Oa(_,t,n,u,m,b,w,k,E){var z;let D=_.style.projection,N=_.context,j=_.transform,U=N.gl,X=[`#define NUM_ILLUMINATION_SOURCES ${n.paint.get("hillshade-highlight-color").values.length}`],se=_.useProgram("hillshade",null,!1,X),le=!_.options.moving;for(let oe of u){let ce=t.getTile(oe),me=ce.fbo;if(!me)continue;let he=D.getMeshFromTileID(N,oe.canonical,k,!0,"raster"),ge=(z=_.style.map.terrain)===null||z===void 0?void 0:z.getTerrainData(oe);N.activeTexture.set(U.TEXTURE0),U.bindTexture(U.TEXTURE_2D,me.colorAttachment.get());let be=j.getProjectionData({overscaledTileID:oe,aligned:le,applyGlobeMatrix:!E,applyTerrainMatrix:!0});se.draw(N,U.TRIANGLES,b,m[oe.overscaledZ],w,Wt.backCCW,Ls(_,ce,n),ge,be,n.id,he.vertexBuffer,he.indexBuffer,he.segments)}}function _o(_,t,n,u,m,b,w,k,E){var z;let D=_.style.projection,N=_.context,j=_.transform,U=N.gl,X=_.useProgram("colorRelief"),se=!_.options.moving,le=!0,oe=0;for(let ce of u){let me=t.getTile(ce),he=me.dem;if(le){let Ie=U.getParameter(U.MAX_TEXTURE_SIZE),{elevationTexture:Le,colorTexture:Fe}=n.getColorRampTextures(N,Ie,he.getUnpackVector());N.activeTexture.set(U.TEXTURE1),Le.bind(U.NEAREST,U.CLAMP_TO_EDGE),N.activeTexture.set(U.TEXTURE4),Fe.bind(U.LINEAR,U.CLAMP_TO_EDGE),le=!1,oe=Le.size[0]}if(!he||!he.data)continue;let ge=he.stride,be=he.getPixels();if(N.activeTexture.set(U.TEXTURE0),N.pixelStoreUnpackPremultiplyAlpha.set(!1),me.demTexture=me.demTexture||_.getTileTexture(ge),me.demTexture){let Ie=me.demTexture;Ie.update(be,{premultiply:!1}),Ie.bind(U.LINEAR,U.CLAMP_TO_EDGE)}else me.demTexture=new a.T(N,be,U.RGBA,{premultiply:!1}),me.demTexture.bind(U.LINEAR,U.CLAMP_TO_EDGE);let pe=D.getMeshFromTileID(N,ce.canonical,k,!0,"raster"),Se=(z=_.style.map.terrain)===null||z===void 0?void 0:z.getTerrainData(ce),De=j.getProjectionData({overscaledTileID:ce,aligned:se,applyGlobeMatrix:!E,applyTerrainMatrix:!0});X.draw(N,U.TRIANGLES,b,m[ce.overscaledZ],w,Wt.backCCW,wc(n,me.dem,oe),Se,De,n.id,pe.vertexBuffer,pe.indexBuffer,pe.segments)}}let ma=[new a.P(0,0),new a.P(a.a5,0),new a.P(a.a5,a.a5),new a.P(0,a.a5)];function ls(_,t,n,u,m,b,w,k,E=!1,z=!1){let D=u[u.length-1].overscaledZ,N=_.context,j=N.gl,U=_.useProgram("raster"),X=_.transform,se=_.style.projection,le=_.colorModeForRenderPass(),oe=!_.options.moving,ce=n.paint.get("raster-opacity"),me=n.paint.get("raster-resampling"),he=n.paint.get("raster-fade-duration"),ge=!!_.style.map.terrain;for(let be of u){let pe=_.getDepthModeForSublayer(be.overscaledZ-D,ce===1?Ot.ReadWrite:Ot.ReadOnly,j.LESS),Se=t.getTile(be),De=me==="nearest"?j.NEAREST:j.LINEAR;N.activeTexture.set(j.TEXTURE0),Se.texture.bind(De,j.CLAMP_TO_EDGE,j.LINEAR_MIPMAP_NEAREST),N.activeTexture.set(j.TEXTURE1);let{parentTile:Ie,parentScaleBy:Le,parentTopLeft:Fe,fadeValues:Xe}=Dc(Se,t,he,ge);Se.fadeOpacity=Xe.tileOpacity,Ie?(Ie.fadeOpacity=Xe.parentTileOpacity,Ie.texture.bind(De,j.CLAMP_TO_EDGE,j.LINEAR_MIPMAP_NEAREST)):Se.texture.bind(De,j.CLAMP_TO_EDGE,j.LINEAR_MIPMAP_NEAREST),Se.texture.useMipmap&&N.extTextureFilterAnisotropic&&_.transform.pitch>20&&j.texParameterf(j.TEXTURE_2D,N.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,N.extTextureFilterAnisotropicMax);let et=_.style.map.terrain&&_.style.map.terrain.getTerrainData(be),He=X.getProjectionData({overscaledTileID:be,aligned:oe,applyGlobeMatrix:!z,applyTerrainMatrix:!0}),pt=mo(Fe,Le,Xe.fadeMix,n,k),zt=se.getMeshFromTileID(N,be.canonical,b,w,"raster");U.draw(N,j.TRIANGLES,pe,m?m[be.overscaledZ]:Jt.disabled,le,E?Wt.frontCCW:Wt.backCCW,pt,et,He,n.id,zt.vertexBuffer,zt.indexBuffer,zt.segments)}}function Dc(_,t,n,u){let m={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(n===0||u)return m;if(_.fadingParentID){let b=t.getLoadedTile(_.fadingParentID);if(!b)return m;let w=Math.pow(2,b.tileID.overscaledZ-_.tileID.overscaledZ),k=[_.tileID.canonical.x*w%1,_.tileID.canonical.y*w%1],E=(function(z,D,N){let j=ae(),U=(j-D.timeAdded)/N,X=z.fadingDirection===Oe.Incoming,se=a.ao((j-z.timeAdded)/N,0,1),le=a.ao(1-U,0,1),oe=X?se:le;return{tileOpacity:oe,parentTileOpacity:X?le:se,fadeMix:{opacity:1,mix:1-oe}}})(_,b,n);return{parentTile:b,parentScaleBy:w,parentTopLeft:k,fadeValues:E}}if(_.selfFading){let b=(function(w,k){let E=(ae()-w.timeAdded)/k,z=a.ao(E,0,1);return{tileOpacity:z,fadeMix:{opacity:z,mix:0}}})(_,n);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:b}}return m}let vd=new a.bq(1,0,0,1),bd=new a.bq(0,1,0,1),xd=new a.bq(0,0,1,1),wd=new a.bq(1,0,1,1),vo=new a.bq(0,1,1,1);function $u(_,t,n,u){jl(_,0,t+n/2,_.transform.width,n,u)}function Hu(_,t,n,u){jl(_,t-n/2,0,n,_.transform.height,u)}function jl(_,t,n,u,m,b){let w=_.context,k=w.gl;k.enable(k.SCISSOR_TEST),k.scissor(t*_.pixelRatio,n*_.pixelRatio,u*_.pixelRatio,m*_.pixelRatio),w.clear({color:b}),k.disable(k.SCISSOR_TEST)}function Sd(_,t,n){let u=_.context,m=u.gl,b=_.useProgram("debug"),w=Ot.disabled,k=Jt.disabled,E=_.colorModeForRenderPass(),z="$debug",D=_.style.map.terrain&&_.style.map.terrain.getTerrainData(n);u.activeTexture.set(m.TEXTURE0);let N=t.getTileByID(n.key).latestRawTileData,j=Math.floor((N&&N.byteLength||0)/1024),U=t.getTile(n).tileSize,X=512/Math.min(U,512)*(n.overscaledZ/_.transform.zoom)*.5,se=n.canonical.toString();n.overscaledZ!==n.canonical.z&&(se+=` => ${n.overscaledZ}`),(function(oe,ce){oe.initDebugOverlayCanvas();let me=oe.debugOverlayCanvas,he=oe.context.gl,ge=oe.debugOverlayCanvas.getContext("2d");ge.clearRect(0,0,me.width,me.height),ge.shadowColor="white",ge.shadowBlur=2,ge.lineWidth=1.5,ge.strokeStyle="white",ge.textBaseline="top",ge.font="bold 36px Open Sans, sans-serif",ge.fillText(ce,5,5),ge.strokeText(ce,5,5),oe.debugOverlayTexture.update(me),oe.debugOverlayTexture.bind(he.LINEAR,he.CLAMP_TO_EDGE)})(_,`${se} ${j}kB`);let le=_.transform.getProjectionData({overscaledTileID:n,applyGlobeMatrix:!0,applyTerrainMatrix:!0});b.draw(u,m.TRIANGLES,w,k,Si.alphaBlended,Wt.disabled,Yn(a.bq.transparent,X),null,le,z,_.debugBuffer,_.quadTriangleIndexBuffer,_.debugSegments),b.draw(u,m.LINE_STRIP,w,k,E,Wt.disabled,Yn(a.bq.red),D,le,z,_.debugBuffer,_.tileBorderIndexBuffer,_.debugSegments)}function Yu(_,t,n,u){let{isRenderingGlobe:m}=u,b=_.context,w=b.gl,k=_.transform,E=_.colorModeForRenderPass(),z=_.getDepthModeFor3D(),D=_.useProgram("terrain");b.bindFramebuffer.set(null),b.viewport.set([0,0,_.width,_.height]);for(let N of n){let j=t.getTerrainMesh(N.tileID),U=_.renderToTexture.getTexture(N),X=t.getTerrainData(N.tileID);b.activeTexture.set(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,U.texture);let se=t.getMeshFrameDelta(k.zoom),le=k.calculateFogMatrix(N.tileID.toUnwrapped()),oe=yc(se,le,_.style.sky,k.pitch,m),ce=k.getProjectionData({overscaledTileID:N.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});D.draw(b,w.TRIANGLES,z,Jt.disabled,E,Wt.backCCW,oe,X,ce,"terrain",j.vertexBuffer,j.indexBuffer,j.segments)}}function Xu(_,t){if(!t.mesh){let n=new a.aX;n.emplaceBack(-1,-1),n.emplaceBack(1,-1),n.emplaceBack(1,1),n.emplaceBack(-1,1);let u=new a.aZ;u.emplaceBack(0,1,2),u.emplaceBack(0,2,3),t.mesh=new gi(_.createVertexBuffer(n,Zn.members),_.createIndexBuffer(u),a.aY.simpleSegment(0,0,n.length,u.length))}return t.mesh}class Td{constructor(t,n){this.context=new Q(t),this.transform=n,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.as(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=sn.maxOverzooming+sn.maxUnderzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Hr}resize(t,n,u){if(this.width=Math.floor(t*u),this.height=Math.floor(n*u),this.pixelRatio=u,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(let m of this.style._order)this.style._layers[m].resize()}setup(){let t=this.context,n=new a.aX;n.emplaceBack(0,0),n.emplaceBack(a.a5,0),n.emplaceBack(0,a.a5),n.emplaceBack(a.a5,a.a5),this.tileExtentBuffer=t.createVertexBuffer(n,Zn.members),this.tileExtentSegments=a.aY.simpleSegment(0,0,4,2);let u=new a.aX;u.emplaceBack(0,0),u.emplaceBack(a.a5,0),u.emplaceBack(0,a.a5),u.emplaceBack(a.a5,a.a5),this.debugBuffer=t.createVertexBuffer(u,Zn.members),this.debugSegments=a.aY.simpleSegment(0,0,4,5);let m=new a.ci;m.emplaceBack(0,0,0,0),m.emplaceBack(a.a5,0,a.a5,0),m.emplaceBack(0,a.a5,0,a.a5),m.emplaceBack(a.a5,a.a5,a.a5,a.a5),this.rasterBoundsBuffer=t.createVertexBuffer(m,Wu.members),this.rasterBoundsSegments=a.aY.simpleSegment(0,0,4,2);let b=new a.aX;b.emplaceBack(0,0),b.emplaceBack(a.a5,0),b.emplaceBack(0,a.a5),b.emplaceBack(a.a5,a.a5),this.rasterBoundsBufferPosOnly=t.createVertexBuffer(b,Zn.members),this.rasterBoundsSegmentsPosOnly=a.aY.simpleSegment(0,0,4,5);let w=new a.aX;w.emplaceBack(0,0),w.emplaceBack(1,0),w.emplaceBack(0,1),w.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(w,Zn.members),this.viewportSegments=a.aY.simpleSegment(0,0,4,2);let k=new a.cj;k.emplaceBack(0),k.emplaceBack(1),k.emplaceBack(3),k.emplaceBack(2),k.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(k);let E=new a.aZ;E.emplaceBack(1,0,2),E.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(E);let z=this.context.gl;this.stencilClearMode=new Jt({func:z.ALWAYS,mask:0},0,255,z.ZERO,z.ZERO,z.ZERO),this.tileExtentMesh=new gi(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){let t=this.context,n=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;let u=a.N();a.c8(u,0,this.width,this.height,0,0,1),a.Q(u,u,[n.drawingBufferWidth,n.drawingBufferHeight,0]);let m={mainMatrix:u,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:u};this.useProgram("clippingMask",null,!0).draw(t,n.TRIANGLES,Ot.disabled,this.stencilClearMode,Si.disabled,Wt.disabled,null,null,m,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(t,n,u){if(this.currentStencilSource===t.source||!t.isTileClipped()||!n||!n.length)return;this.currentStencilSource=t.source,this.nextStencilID+n.length>256&&this.clearStencil();let m=this.context;m.setColorMode(Si.disabled),m.setDepthMode(Ot.disabled);let b={};for(let w of n)b[w.key]=this.nextStencilID++;this._renderTileMasks(b,n,u,!0),this._renderTileMasks(b,n,u,!1),this._tileClippingMaskIDs=b}_renderTileMasks(t,n,u,m){let b=this.context,w=b.gl,k=this.style.projection,E=this.transform,z=this.useProgram("clippingMask");for(let D of n){let N=t[D.key],j=this.style.map.terrain&&this.style.map.terrain.getTerrainData(D),U=k.getMeshFromTileID(this.context,D.canonical,m,!0,"stencil"),X=E.getProjectionData({overscaledTileID:D,applyGlobeMatrix:!u,applyTerrainMatrix:!0});z.draw(b,w.TRIANGLES,Ot.disabled,new Jt({func:w.ALWAYS,mask:0},N,255,w.KEEP,w.KEEP,w.REPLACE),Si.disabled,u?Wt.disabled:Wt.backCCW,null,j,X,"$clipping",U.vertexBuffer,U.indexBuffer,U.segments)}}_renderTilesDepthBuffer(){let t=this.context,n=t.gl,u=this.style.projection,m=this.transform,b=this.useProgram("depth"),w=this.getDepthModeFor3D(),k=Ni(m,{tileSize:m.tileSize});for(let E of k){let z=this.style.map.terrain&&this.style.map.terrain.getTerrainData(E),D=u.getMeshFromTileID(this.context,E.canonical,!0,!0,"raster"),N=m.getProjectionData({overscaledTileID:E,applyGlobeMatrix:!0,applyTerrainMatrix:!0});b.draw(t,n.TRIANGLES,w,Jt.disabled,Si.disabled,Wt.backCCW,null,z,N,"$clipping",D.vertexBuffer,D.indexBuffer,D.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();let t=this.nextStencilID++,n=this.context.gl;return new Jt({func:n.NOTEQUAL,mask:255},t,255,n.KEEP,n.KEEP,n.REPLACE)}stencilModeForClipping(t){let n=this.context.gl;return new Jt({func:n.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,n.KEEP,n.KEEP,n.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(t){let n=this.context.gl,u=t.sort(((w,k)=>k.overscaledZ-w.overscaledZ)),m=u[u.length-1].overscaledZ,b=u[0].overscaledZ-m+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();let w={};for(let k=0;k<b;k++)w[k+m]=new Jt({func:n.GEQUAL,mask:255},k+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=b,[w,u]}return[{[m]:Jt.disabled},u]}stencilConfigForOverlapTwoPass(t){let n=this.context.gl,u=t.sort(((w,k)=>k.overscaledZ-w.overscaledZ)),m=u[u.length-1].overscaledZ,b=u[0].overscaledZ-m+1;if(this.clearStencil(),b>1){let w={},k={};for(let E=0;E<b;E++)w[E+m]=new Jt({func:n.GREATER,mask:255},b+1+E,255,n.KEEP,n.KEEP,n.REPLACE),k[E+m]=new Jt({func:n.GREATER,mask:255},1+E,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID=2*b+1,[w,k,u]}return this.nextStencilID=3,[{[m]:new Jt({func:n.GREATER,mask:255},2,255,n.KEEP,n.KEEP,n.REPLACE)},{[m]:new Jt({func:n.GREATER,mask:255},1,255,n.KEEP,n.KEEP,n.REPLACE)},u]}colorModeForRenderPass(){let t=this.context.gl;return this._showOverdrawInspector?new Si([t.CONSTANT_COLOR,t.ONE],new a.bq(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Si.unblended:Si.alphaBlended}getDepthModeForSublayer(t,n,u){if(!this.opaquePassEnabledForLayer())return Ot.disabled;let m=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new Ot(u||this.context.gl.LEQUAL,n,[m,m])}getDepthModeFor3D(){return new Ot(this.context.gl.LEQUAL,Ot.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,n){var u,m;this.style=t,this.options=n,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(ae()),this.imageManager.beginFrame();let b=this.style._order,w=this.style.tileManagers,k={},E={},z={},D={isRenderingToTexture:!1,isRenderingGlobe:((u=t.projection)===null||u===void 0?void 0:u.transitionState)>0};for(let j in w){let U=w[j];U.used&&U.prepare(this.context),k[j]=U.getVisibleCoordinates(!1),E[j]=k[j].slice().reverse(),z[j]=U.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let j=0;j<b.length;j++)if(this.style._layers[b[j]].is3D()){this.opaquePassCutoff=j;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(let j of b){let U=this.style._layers[j];if(!U.hasOffscreenPass()||U.isHidden(this.transform.zoom))continue;let X=E[U.source];(U.type==="custom"||X.length)&&this.renderLayer(this,w[U.source],U,X,D)}if((m=this.style.projection)===null||m===void 0||m.updateGPUdependent({context:this.context,useProgram:j=>this.useProgram(j)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?a.bq.black:a.bq.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(j,U){let X=j.context,se=X.gl,le=((be,pe,Se)=>{let De=Math.cos(pe.rollInRadians),Ie=Math.sin(pe.rollInRadians),Le=ui(pe),Fe=pe.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:be.properties.get("sky-color"),u_horizon_color:be.properties.get("horizon-color"),u_horizon:[(pe.width/2-Le*Ie)*Se,(pe.height/2+Le*De)*Se],u_horizon_normal:[-Ie,De],u_sky_horizon_blend:be.properties.get("sky-horizon-blend")*pe.height/2*Se,u_sky_blend:Fe}})(U,j.style.map.transform,j.pixelRatio),oe=new Ot(se.LEQUAL,Ot.ReadWrite,[0,1]),ce=Jt.disabled,me=j.colorModeForRenderPass(),he=j.useProgram("sky"),ge=Xu(X,U);he.draw(X,se.TRIANGLES,oe,ce,me,Wt.disabled,le,null,void 0,"sky",ge.vertexBuffer,ge.indexBuffer,ge.segments)})(this,this.style.sky),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=b.length-1;this.currentLayer>=0;this.currentLayer--){let j=this.style._layers[b[this.currentLayer]],U=w[j.source],X=k[j.source];this._renderTileClippingMasks(j,X,!1),this.renderLayer(this,U,j,X,D)}this.renderPass="translucent";let N=!1;for(this.currentLayer=0;this.currentLayer<b.length;this.currentLayer++){let j=this.style._layers[b[this.currentLayer]],U=w[j.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(j,D))continue;this.opaquePassEnabledForLayer()||N||(N=!0,D.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());let X=(j.type==="symbol"?z:E)[j.source];this._renderTileClippingMasks(j,k[j.source],!!this.renderToTexture),this.renderLayer(this,U,j,X,D)}if(D.isRenderingGlobe&&(function(j,U,X){let se=j.context,le=se.gl,oe=j.useProgram("atmosphere"),ce=new Ot(le.LEQUAL,Ot.ReadOnly,[0,1]),me=j.transform,he=(function(Fe,Xe){let et=Fe.properties.get("position"),He=[-et.x,-et.y,-et.z],pt=a.as(new Float64Array(16));return Fe.properties.get("anchor")==="map"&&(a.bh(pt,pt,Xe.rollInRadians),a.bi(pt,pt,-Xe.pitchInRadians),a.bh(pt,pt,Xe.bearingInRadians),a.bi(pt,pt,Xe.center.lat*Math.PI/180),a.bK(pt,pt,-Xe.center.lng*Math.PI/180)),a.ch(He,He,pt),He})(X,j.transform),ge=me.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),be=U.properties.get("atmosphere-blend")*ge.projectionTransition;if(be===0)return;let pe=oa(me.worldSize,me.center.lat),Se=me.inverseProjectionMatrix,De=new Float64Array(4);De[3]=1,a.aI(De,De,me.modelViewProjectionMatrix),De[0]/=De[3],De[1]/=De[3],De[2]/=De[3],De[3]=1,a.aI(De,De,Se),De[0]/=De[3],De[1]/=De[3],De[2]/=De[3],De[3]=1;let Ie=((Fe,Xe,et,He,pt)=>({u_sun_pos:Fe,u_atmosphere_blend:Xe,u_globe_position:et,u_globe_radius:He,u_inv_proj_matrix:pt}))(he,be,[De[0],De[1],De[2]],pe,Se),Le=Xu(se,U);oe.draw(se,le.TRIANGLES,ce,Jt.disabled,Si.alphaBlended,Wt.disabled,Ie,null,null,"atmosphere",Le.vertexBuffer,Le.indexBuffer,Le.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){let j=(function(U,X){let se=null,le=Object.values(U._layers).flatMap((he=>he.source&&!he.isHidden(X)?[U.tileManagers[he.source]]:[])),oe=le.filter((he=>he.getSource().type==="vector")),ce=le.filter((he=>he.getSource().type!=="vector")),me=he=>{(!se||se.getSource().maxzoom<he.getSource().maxzoom)&&(se=he)};return oe.forEach((he=>me(he))),se||ce.forEach((he=>me(he))),se})(this.style,this.transform.zoom);j&&(function(U,X,se){for(let le=0;le<se.length;le++)Sd(U,X,se[le])})(this,j,j.getVisibleCoordinates())}this.options.showPadding&&(function(j){let U=j.transform.padding;$u(j,j.transform.height-(U.top||0),3,vd),$u(j,U.bottom||0,3,bd),Hu(j,U.left||0,3,xd),Hu(j,j.transform.width-(U.right||0),3,wd);let X=j.transform.centerPoint;(function(se,le,oe,ce){jl(se,le-1,oe-10,2,20,ce),jl(se,le-10,oe-1,20,2,ce)})(j,X.x,j.transform.height-X.y,vo)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(t){if(!this.style||!this.style.map||!this.style.map.terrain)return;let n=this.terrainFacilitator.matrix,u=this.transform.modelViewProjectionMatrix,m=this.terrainFacilitator.dirty;m||(m=t?!a.ck(n,u):!a.cl(n,u)),m||(m=this.style.map.terrain.tileManager.anyTilesAfterTime(this.terrainFacilitator.renderTime)),m&&(a.cm(n,u),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(b,w){let k=b.context,E=k.gl,z=b.transform,D=Si.unblended,N=new Ot(E.LEQUAL,Ot.ReadWrite,[0,1]),j=w.tileManager.getRenderableTiles(),U=b.useProgram("terrainDepth");k.bindFramebuffer.set(w.getFramebuffer("depth").framebuffer),k.viewport.set([0,0,b.width/devicePixelRatio,b.height/devicePixelRatio]),k.clear({color:a.bq.transparent,depth:1});for(let X of j){let se=w.getTerrainMesh(X.tileID),le=w.getTerrainData(X.tileID),oe=z.getProjectionData({overscaledTileID:X.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),ce={u_ele_delta:w.getMeshFrameDelta(z.zoom)};U.draw(k,E.TRIANGLES,N,Jt.disabled,D,Wt.backCCW,ce,le,oe,"terrain",se.vertexBuffer,se.indexBuffer,se.segments)}k.bindFramebuffer.set(null),k.viewport.set([0,0,b.width,b.height])})(this,this.style.map.terrain),(function(b,w){let k=b.context,E=k.gl,z=b.transform,D=Si.unblended,N=new Ot(E.LEQUAL,Ot.ReadWrite,[0,1]),j=w.getCoordsTexture(),U=w.tileManager.getRenderableTiles(),X=b.useProgram("terrainCoords");k.bindFramebuffer.set(w.getFramebuffer("coords").framebuffer),k.viewport.set([0,0,b.width/devicePixelRatio,b.height/devicePixelRatio]),k.clear({color:a.bq.transparent,depth:1}),w.coordsIndex=[];for(let se of U){let le=w.getTerrainMesh(se.tileID),oe=w.getTerrainData(se.tileID);k.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,j.texture);let ce={u_terrain_coords_id:(255-w.coordsIndex.length)/255,u_texture:0,u_ele_delta:w.getMeshFrameDelta(z.zoom)},me=z.getProjectionData({overscaledTileID:se.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});X.draw(k,E.TRIANGLES,N,Jt.disabled,D,Wt.backCCW,ce,oe,me,"terrain",le.vertexBuffer,le.indexBuffer,le.segments),w.coordsIndex.push(se.tileID.key)}k.bindFramebuffer.set(null),k.viewport.set([0,0,b.width,b.height])})(this,this.style.map.terrain))}renderLayer(t,n,u,m,b){u.isHidden(this.transform.zoom)||(u.type==="background"||u.type==="custom"||(m||[]).length)&&(this.id=u.id,a.cn(u)?(function(w,k,E,z,D,N){if(w.renderPass!=="translucent")return;let{isRenderingToTexture:j}=N,U=Jt.disabled,X=w.colorModeForRenderPass();(E._unevaluatedLayout.hasValue("text-variable-anchor")||E._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(se,le,oe,ce,me,he,ge,be,pe){let Se=le.transform,De=le.style.map.terrain,Ie=me==="map",Le=he==="map";for(let Fe of se){let Xe=ce.getTile(Fe),et=Xe.getBucket(oe);if(!et||!et.text||!et.text.segments.get().length)continue;let He=a.az(et.textSizeData,Se.zoom),pt=a.aO(Xe,1,le.transform.zoom),zt=$r(Ie,le.transform,pt),pi=oe.layout.get("icon-text-fit")!=="none"&&et.hasIconData();if(He){let Ai=Math.pow(2,Se.zoom-Xe.tileID.overscaledZ),yi=De?(Ri,Pi)=>De.getElevation(Fe,Ri,Pi):null;Mt(et,Ie,Le,pe,Se,zt,Ai,He,pi,a.aP(Se,Xe,ge,be),Fe.toUnwrapped(),yi)}}})(z,w,E,k,E.layout.get("text-rotation-alignment"),E.layout.get("text-pitch-alignment"),E.paint.get("text-translate"),E.paint.get("text-translate-anchor"),D),E.paint.get("icon-opacity").constantOr(1)!==0&&or(w,k,E,z,!1,E.paint.get("icon-translate"),E.paint.get("icon-translate-anchor"),E.layout.get("icon-rotation-alignment"),E.layout.get("icon-pitch-alignment"),E.layout.get("icon-keep-upright"),U,X,j),E.paint.get("text-opacity").constantOr(1)!==0&&or(w,k,E,z,!0,E.paint.get("text-translate"),E.paint.get("text-translate-anchor"),E.layout.get("text-rotation-alignment"),E.layout.get("text-pitch-alignment"),E.layout.get("text-keep-upright"),U,X,j),k.map.showCollisionBoxes&&(Ae(w,k,E,z,!0),Ae(w,k,E,z,!1))})(t,n,u,m,this.style.placement.variableOffsets,b):a.co(u)?(function(w,k,E,z,D){if(w.renderPass!=="translucent")return;let{isRenderingToTexture:N}=D,j=E.paint.get("circle-opacity"),U=E.paint.get("circle-stroke-width"),X=E.paint.get("circle-stroke-opacity"),se=!E.layout.get("circle-sort-key").isConstant();if(j.constantOr(1)===0&&(U.constantOr(1)===0||X.constantOr(1)===0))return;let le=w.context,oe=le.gl,ce=w.transform,me=w.getDepthModeForSublayer(0,Ot.ReadOnly),he=Jt.disabled,ge=w.colorModeForRenderPass(),be=[],pe=ce.getCircleRadiusCorrection();for(let Se=0;Se<z.length;Se++){let De=z[Se],Ie=k.getTile(De),Le=Ie.getBucket(E);if(!Le)continue;let Fe=E.paint.get("circle-translate"),Xe=E.paint.get("circle-translate-anchor"),et=a.aP(ce,Ie,Fe,Xe),He=Le.programConfigurations.get(E.id),pt=w.useProgram("circle",He),zt=Le.layoutVertexBuffer,pi=Le.indexBuffer,Ai=w.style.map.terrain&&w.style.map.terrain.getTerrainData(De),yi={programConfiguration:He,program:pt,layoutVertexBuffer:zt,indexBuffer:pi,uniformValues:Bl(w,Ie,E,et,pe),terrainData:Ai,projectionData:ce.getProjectionData({overscaledTileID:De,applyGlobeMatrix:!N,applyTerrainMatrix:!0})};if(se){let Ri=Le.segments.get();for(let Pi of Ri)be.push({segments:new a.aY([Pi]),sortKey:Pi.sortKey,state:yi})}else be.push({segments:Le.segments,sortKey:0,state:yi})}se&&be.sort(((Se,De)=>Se.sortKey-De.sortKey));for(let Se of be){let{programConfiguration:De,program:Ie,layoutVertexBuffer:Le,indexBuffer:Fe,uniformValues:Xe,terrainData:et,projectionData:He}=Se.state;Ie.draw(le,oe.TRIANGLES,me,he,ge,Wt.backCCW,Xe,et,He,E.id,Le,Fe,Se.segments,E.paint,w.transform.zoom,De)}})(t,n,u,m,b):a.cp(u)?(function(w,k,E,z,D){if(E.paint.get("heatmap-opacity")===0)return;let N=w.context,{isRenderingToTexture:j,isRenderingGlobe:U}=D;if(w.style.map.terrain){for(let X of z){let se=k.getTile(X);k.hasRenderableParent(X)||(w.renderPass==="offscreen"?hn(w,se,E,X,U):w.renderPass==="translucent"&&qr(w,E,X,j,U))}N.viewport.set([0,0,w.width,w.height])}else w.renderPass==="offscreen"?(function(X,se,le,oe){let ce=X.context,me=ce.gl,he=X.transform,ge=Jt.disabled,be=new Si([me.ONE,me.ONE],a.bq.transparent,[!0,!0,!0,!0]);(function(pe,Se,De){let Ie=pe.gl;pe.activeTexture.set(Ie.TEXTURE1),pe.viewport.set([0,0,Se.width/4,Se.height/4]);let Le=De.heatmapFbos.get(a.ce);Le?(Ie.bindTexture(Ie.TEXTURE_2D,Le.colorAttachment.get()),pe.bindFramebuffer.set(Le.framebuffer)):(Le=Kn(pe,Se.width/4,Se.height/4),De.heatmapFbos.set(a.ce,Le))})(ce,X,le),ce.clear({color:a.bq.transparent});for(let pe=0;pe<oe.length;pe++){let Se=oe[pe];if(se.hasRenderableParent(Se))continue;let De=se.getTile(Se),Ie=De.getBucket(le);if(!Ie)continue;let Le=Ie.programConfigurations.get(le.id),Fe=X.useProgram("heatmap",Le),Xe=he.getProjectionData({overscaledTileID:Se,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),et=he.getCircleRadiusCorrection();Fe.draw(ce,me.TRIANGLES,Ot.disabled,ge,be,Wt.backCCW,ha(De,he.zoom,le.paint.get("heatmap-intensity"),et),null,Xe,le.id,Ie.layoutVertexBuffer,Ie.indexBuffer,Ie.segments,le.paint,he.zoom,Le)}ce.viewport.set([0,0,X.width,X.height])})(w,k,E,z):w.renderPass==="translucent"&&(function(X,se){let le=X.context,oe=le.gl;le.setColorMode(X.colorModeForRenderPass());let ce=se.heatmapFbos.get(a.ce);ce&&(le.activeTexture.set(oe.TEXTURE0),oe.bindTexture(oe.TEXTURE_2D,ce.colorAttachment.get()),le.activeTexture.set(oe.TEXTURE1),al(le,se).bind(oe.LINEAR,oe.CLAMP_TO_EDGE),X.useProgram("heatmapTexture").draw(le,oe.TRIANGLES,Ot.disabled,Jt.disabled,X.colorModeForRenderPass(),Wt.disabled,xc(X,se,0,1),null,null,se.id,X.viewportBuffer,X.quadTriangleIndexBuffer,X.viewportSegments,se.paint,X.transform.zoom))})(w,E)})(t,n,u,m,b):a.cq(u)?(function(w,k,E,z,D){if(w.renderPass!=="translucent")return;let{isRenderingToTexture:N}=D,j=E.paint.get("line-opacity"),U=E.paint.get("line-width");if(j.constantOr(1)===0||U.constantOr(1)===0)return;let X=w.getDepthModeForSublayer(0,Ot.ReadOnly),se=w.colorModeForRenderPass(),le=E.paint.get("line-dasharray"),oe=le.constantOr(1),ce=E.paint.get("line-pattern"),me=ce.constantOr(1),he=E.paint.get("line-gradient"),ge=E.getCrossfadeParameters(),be;be=me?"linePattern":oe&&he?"lineGradientSDF":oe?"lineSDF":he?"lineGradient":"line";let pe=w.context,Se=pe.gl,De=w.transform,Ie=!0;for(let Le of z){let Fe=k.getTile(Le);if(me&&!Fe.patternsLoaded())continue;let Xe=Fe.getBucket(E);if(!Xe)continue;let et=Xe.programConfigurations.get(E.id),He=w.context.program.get(),pt=w.useProgram(be,et),zt=Ie||pt.program!==He,pi=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Le),Ai=ce.constantOr(null),yi=le&&le.constantOr(null);if(Ai&&Fe.imageAtlas){let ur=Fe.imageAtlas,nr=ur.patternPositions[Ai.to.toString()],ar=ur.patternPositions[Ai.from.toString()];nr&&ar&&et.setConstantPatternPositions(nr,ar)}else if(yi){let ur=E.layout.get("line-cap")==="round",nr=w.lineAtlas.getDash(yi.to,ur),ar=w.lineAtlas.getDash(yi.from,ur);et.setConstantDashPositions(nr,ar)}let Ri=De.getProjectionData({overscaledTileID:Le,applyGlobeMatrix:!N,applyTerrainMatrix:!0}),Pi=De.getPixelScale(),xr;me?(xr=On(w,Fe,E,Pi,ge),Oc(pe,Se,Fe,et,ge)):oe&&he?(xr=fo(w,Fe,E,Pi,ge,Xe.lineClipsArray.length),dn(w,k,pe,Se,E,Xe,Le,et,ge)):oe?(xr=po(w,Fe,E,Pi,ge),Oi(w,pe,Se,et,zt,ge)):he?(xr=Sc(w,Fe,E,Pi,Xe.lineClipsArray.length),os(w,k,pe,Se,E,Xe,Le)):xr=Xn(w,Fe,E,Pi);let zi=w.stencilModeForClipping(Le);pt.draw(pe,Se.TRIANGLES,X,zi,se,Wt.disabled,xr,pi,Ri,E.id,Xe.layoutVertexBuffer,Xe.indexBuffer,Xe.segments,E.paint,w.transform.zoom,et,Xe.layoutVertexBuffer2),Ie=!1}})(t,n,u,m,b):a.cr(u)?(function(w,k,E,z,D){let N=E.paint.get("fill-color"),j=E.paint.get("fill-opacity");if(j.constantOr(1)===0)return;let{isRenderingToTexture:U}=D,X=w.colorModeForRenderPass(),se=E.paint.get("fill-pattern"),le=w.opaquePassEnabledForLayer()&&!se.constantOr(1)&&N.constantOr(a.bq.transparent).a===1&&j.constantOr(0)===1?"opaque":"translucent";if(w.renderPass===le){let oe=w.getDepthModeForSublayer(1,w.renderPass==="opaque"?Ot.ReadWrite:Ot.ReadOnly);La(w,k,E,z,oe,X,!1,U)}if(w.renderPass==="translucent"&&E.paint.get("fill-antialias")){let oe=w.getDepthModeForSublayer(E.getPaintProperty("fill-outline-color")?2:0,Ot.ReadOnly);La(w,k,E,z,oe,X,!0,U)}})(t,n,u,m,b):a.cs(u)?(function(w,k,E,z,D){let N=E.paint.get("fill-extrusion-opacity");if(N===0)return;let{isRenderingToTexture:j}=D;if(w.renderPass==="translucent"){let U=new Ot(w.context.gl.LEQUAL,Ot.ReadWrite,w.depthRangeFor3D);if(N!==1||E.paint.get("fill-extrusion-pattern").constantOr(1))sl(w,k,E,z,U,Jt.disabled,Si.disabled,j),sl(w,k,E,z,U,w.stencilModeFor3D(),w.colorModeForRenderPass(),j);else{let X=w.colorModeForRenderPass();sl(w,k,E,z,U,Jt.disabled,X,j)}}})(t,n,u,m,b):a.ct(u)?(function(w,k,E,z,D){if(w.renderPass!=="offscreen"&&w.renderPass!=="translucent")return;let{isRenderingToTexture:N}=D,j=w.context,U=w.style.projection.useSubdivision,X=w.getDepthModeForSublayer(0,Ot.ReadOnly),se=w.colorModeForRenderPass();if(w.renderPass==="offscreen")(function(le,oe,ce,me,he,ge,be){let pe=le.context,Se=pe.gl;for(let De of ce){let Ie=oe.getTile(De),Le=Ie.dem;if(!Le||!Le.data||!Ie.needsHillshadePrepare)continue;let Fe=Le.dim,Xe=Le.stride,et=Le.getPixels();if(pe.activeTexture.set(Se.TEXTURE1),pe.pixelStoreUnpackPremultiplyAlpha.set(!1),Ie.demTexture=Ie.demTexture||le.getTileTexture(Xe),Ie.demTexture){let pt=Ie.demTexture;pt.update(et,{premultiply:!1}),pt.bind(Se.NEAREST,Se.CLAMP_TO_EDGE)}else Ie.demTexture=new a.T(pe,et,Se.RGBA,{premultiply:!1}),Ie.demTexture.bind(Se.NEAREST,Se.CLAMP_TO_EDGE);pe.activeTexture.set(Se.TEXTURE0);let He=Ie.fbo;if(!He){let pt=new a.T(pe,{width:Fe,height:Fe,data:null},Se.RGBA);pt.bind(Se.LINEAR,Se.CLAMP_TO_EDGE),He=Ie.fbo=pe.createFramebuffer(Fe,Fe,!0,!1),He.colorAttachment.set(pt.texture)}pe.bindFramebuffer.set(He.framebuffer),pe.viewport.set([0,0,Fe,Fe]),le.useProgram("hillshadePrepare").draw(pe,Se.TRIANGLES,he,ge,be,Wt.disabled,Gu(Ie.tileID,Le),null,null,me.id,le.rasterBoundsBuffer,le.quadTriangleIndexBuffer,le.rasterBoundsSegments),Ie.needsHillshadePrepare=!1}})(w,k,z,E,X,Jt.disabled,se),j.viewport.set([0,0,w.width,w.height]);else if(w.renderPass==="translucent")if(U){let[le,oe,ce]=w.stencilConfigForOverlapTwoPass(z);Oa(w,k,E,ce,le,X,se,!1,N),Oa(w,k,E,ce,oe,X,se,!0,N)}else{let[le,oe]=w.getStencilConfigForOverlapAndUpdateStencilID(z);Oa(w,k,E,oe,le,X,se,!1,N)}})(t,n,u,m,b):a.cu(u)?(function(w,k,E,z,D){if(w.renderPass!=="translucent"||!z.length)return;let{isRenderingToTexture:N}=D,j=w.style.projection.useSubdivision,U=w.getDepthModeForSublayer(0,Ot.ReadOnly),X=w.colorModeForRenderPass();if(j){let[se,le,oe]=w.stencilConfigForOverlapTwoPass(z);_o(w,k,E,oe,se,U,X,!1,N),_o(w,k,E,oe,le,U,X,!0,N)}else{let[se,le]=w.getStencilConfigForOverlapAndUpdateStencilID(z);_o(w,k,E,le,se,U,X,!1,N)}})(t,n,u,m,b):a.bV(u)?(function(w,k,E,z,D){if(w.renderPass!=="translucent"||E.paint.get("raster-opacity")===0||!z.length)return;let{isRenderingToTexture:N}=D,j=k.getSource(),U=w.style.projection.useSubdivision;if(j instanceof Ur)ls(w,k,E,z,null,!1,!1,j.tileCoords,j.flippedWindingOrder,N);else if(U){let[X,se,le]=w.stencilConfigForOverlapTwoPass(z);ls(w,k,E,le,X,!1,!0,ma,!1,N),ls(w,k,E,le,se,!0,!0,ma,!1,N)}else{let[X,se]=w.getStencilConfigForOverlapAndUpdateStencilID(z);ls(w,k,E,se,X,!1,!0,ma,!1,N)}})(t,n,u,m,b):a.cv(u)?(function(w,k,E,z,D){let N=E.paint.get("background-color"),j=E.paint.get("background-opacity");if(j===0)return;let{isRenderingToTexture:U}=D,X=w.context,se=X.gl,le=w.style.projection,oe=w.transform,ce=oe.tileSize,me=E.paint.get("background-pattern");if(w.isPatternMissing(me))return;let he=!me&&N.a===1&&j===1&&w.opaquePassEnabledForLayer()?"opaque":"translucent";if(w.renderPass!==he)return;let ge=Jt.disabled,be=w.getDepthModeForSublayer(0,he==="opaque"?Ot.ReadWrite:Ot.ReadOnly),pe=w.colorModeForRenderPass(),Se=w.useProgram(me?"backgroundPattern":"background"),De=z||Ni(oe,{tileSize:ce,terrain:w.style.map.terrain});me&&(X.activeTexture.set(se.TEXTURE0),w.imageManager.bind(w.context));let Ie=E.getCrossfadeParameters();for(let Le of De){let Fe=oe.getProjectionData({overscaledTileID:Le,applyGlobeMatrix:!U,applyTerrainMatrix:!0}),Xe=me?Uu(j,w,me,{tileID:Le,tileSize:ce},Ie):Jo(j,N),et=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Le),He=le.getMeshFromTileID(X,Le.canonical,!1,!0,"raster");Se.draw(X,se.TRIANGLES,be,ge,pe,Wt.backCCW,Xe,et,Fe,E.id,He.vertexBuffer,He.indexBuffer,He.segments)}})(t,0,u,m,b):a.cw(u)&&(function(w,k,E,z){let{isRenderingGlobe:D}=z,N=w.context,j=E.implementation,U=w.style.projection,X=w.transform,se=X.getProjectionDataForCustomLayer(D),le={farZ:X.farZ,nearZ:X.nearZ,fov:X.fov*Math.PI/180,modelViewProjectionMatrix:X.modelViewProjectionMatrix,projectionMatrix:X.projectionMatrix,shaderData:{variantName:U.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${U.shaderPreludeCode.vertexSource}`,define:U.shaderDefine},defaultProjectionData:se},oe=j.renderingMode?j.renderingMode:"2d";if(w.renderPass==="offscreen"){let ce=j.prerender;ce&&(w.setCustomLayerDefaults(),N.setColorMode(w.colorModeForRenderPass()),ce.call(j,N.gl,le),N.setDirty(),w.setBaseState())}else if(w.renderPass==="translucent"){w.setCustomLayerDefaults(),N.setColorMode(w.colorModeForRenderPass()),N.setStencilMode(Jt.disabled);let ce=oe==="3d"?w.getDepthModeFor3D():w.getDepthModeForSublayer(0,Ot.ReadOnly);N.setDepthMode(ce),j.render(N.gl,le),N.setDirty(),w.setBaseState(),N.bindFramebuffer.set(null)}})(t,0,u,b))}saveTileTexture(t){let n=this._tileTextures[t.size[0]];n?n.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){let n=this._tileTextures[t];return n&&n.length>0?n.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;let n=this.imageManager.getPattern(t.from.toString()),u=this.imageManager.getPattern(t.to.toString());return!n||!u}useProgram(t,n,u=!1,m=[]){this.cache=this.cache||{};let b=!!this.style.map.terrain,w=this.style.projection,k=u?li.projectionMercator:w.shaderPreludeCode,E=u?vr:w.shaderDefine,z=t+(n?n.cacheKey:"")+`/${u?Nr:w.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(b?"/terrain":"")+(m?`/${m.join("/")}`:"");return this.cache[z]||(this.cache[z]=new ts(this.context,li[t],n,Zu[t],this._showOverdrawInspector,b,k,E,m)),this.cache[z]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){let t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){var t,n;if(this._tileTextures){for(let u in this._tileTextures){let m=this._tileTextures[u];if(m)for(let b of m)b.destroy()}this._tileTextures={}}if(this.tileExtentBuffer&&this.tileExtentBuffer.destroy(),this.debugBuffer&&this.debugBuffer.destroy(),this.rasterBoundsBuffer&&this.rasterBoundsBuffer.destroy(),this.rasterBoundsBufferPosOnly&&this.rasterBoundsBufferPosOnly.destroy(),this.viewportBuffer&&this.viewportBuffer.destroy(),this.tileBorderIndexBuffer&&this.tileBorderIndexBuffer.destroy(),this.quadTriangleIndexBuffer&&this.quadTriangleIndexBuffer.destroy(),this.tileExtentMesh&&((t=this.tileExtentMesh.vertexBuffer)===null||t===void 0||t.destroy()),this.tileExtentMesh&&((n=this.tileExtentMesh.indexBuffer)===null||n===void 0||n.destroy()),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.cache){for(let u in this.cache){let m=this.cache[u];m&&m.program&&this.context.gl.deleteProgram(m.program)}this.cache={}}this.context&&this.context.setDefault()}overLimit(){let{drawingBufferWidth:t,drawingBufferHeight:n}=this.context.gl;return this.width!==t||this.height!==n}}function Ku(_,t){let n,u=!1,m=null,b=null,w=()=>{m=null,u&&(_.apply(b,n),m=setTimeout(w,t),u=!1)};return(...k)=>(u=!0,b=this,n=k,m||w(),m)}class Nl{constructor(t){this._getCurrentHash=()=>{let n=window.location.hash.replace("#","");if(this._hashName){let u;return n.split("&").map((m=>m.split("="))).forEach((m=>{m[0]===this._hashName&&(u=m)})),(u&&u[1]||"").split("/")}return n.split("/")},this._onHashChange=()=>{let n=this._getCurrentHash();if(!this._isValidHash(n))return!1;let u=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(n[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+n[2],+n[1]],zoom:+n[0],bearing:u,pitch:+(n[4]||0)}),!0},this._updateHashUnthrottled=()=>{let n=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,n)},this._removeHash=()=>{let n=this._getCurrentHash();if(n.length===0)return;let u=n.join("/"),m=u;m.split("&").length>0&&(m=m.split("&")[0]),this._hashName&&(m=`${this._hashName}=${u}`);let b=window.location.hash.replace(m,"");b.startsWith("#&")?b=b.slice(0,1)+b.slice(2):b==="#"&&(b="");let w=window.location.href.replace(/(#.+)?$/,b);w=w.replace("&&","&"),window.history.replaceState(window.history.state,null,w)},this._updateHash=Ku(this._updateHashUnthrottled,300),this._hashName=t&&encodeURIComponent(t)}addTo(t){return this._map=t,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(t){let n=this._map.getCenter(),u=Math.round(100*this._map.getZoom())/100,m=Math.ceil((u*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,m),w=Math.round(n.lng*b)/b,k=Math.round(n.lat*b)/b,E=this._map.getBearing(),z=this._map.getPitch(),D="";if(D+=t?`/${w}/${k}/${u}`:`${u}/${k}/${w}`,(E||z)&&(D+="/"+Math.round(10*E)/10),z&&(D+=`/${Math.round(z)}`),this._hashName){let N=this._hashName,j=!1,U=window.location.hash.slice(1).split("&").map((X=>{let se=X.split("=")[0];return se===N?(j=!0,`${se}=${D}`):X})).filter((X=>X));return j||U.push(`${N}=${D}`),`#${U.join("&")}`}return`#${D}`}_isValidHash(t){if(t.length<3||t.some(isNaN))return!1;try{new a.V(+t[2],+t[1])}catch{return!1}let n=+t[0],u=+(t[3]||0),m=+(t[4]||0);return n>=this._map.getMinZoom()&&n<=this._map.getMaxZoom()&&u>=-180&&u<=180&&m>=this._map.getMinPitch()&&m<=this._map.getMaxPitch()}}let ol={linearity:.3,easing:a.cx(0,0,.3,1)},Jn=a.e({deceleration:2500,maxSpeed:1400},ol),ga=a.e({deceleration:20,maxSpeed:1400},ol),Cd=a.e({deceleration:1e3,maxSpeed:360},ol),ya=a.e({deceleration:1e3,maxSpeed:90},ol),Ff=a.e({deceleration:1e3,maxSpeed:360},ol);class ll{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:ae(),settings:t})}_drainInertiaBuffer(){let t=this._inertiaBuffer,n=ae();for(;t.length>0&&n-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;let n={zoom:0,bearing:0,pitch:0,roll:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(let{settings:b}of this._inertiaBuffer)n.zoom+=b.zoomDelta||0,n.bearing+=b.bearingDelta||0,n.pitch+=b.pitchDelta||0,n.roll+=b.rollDelta||0,b.panDelta&&n.pan._add(b.panDelta),b.around&&(n.around=b.around),b.pinchAround&&(n.pinchAround=b.pinchAround);let u=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,m={};if(n.pan.mag()){let b=Vl(n.pan.mag(),u,a.e({},Jn,t||{})),w=n.pan.mult(b.amount/n.pan.mag()),k=this._map.cameraHelper.handlePanInertia(w,this._map.transform);m.center=k.easingCenter,m.offset=k.easingOffset,ql(m,b)}if(n.zoom){let b=Vl(n.zoom,u,ga);m.zoom=this._map.transform.zoom+b.amount,ql(m,b)}if(n.bearing){let b=Vl(n.bearing,u,Cd);m.bearing=this._map.transform.bearing+a.ao(b.amount,-179,179),ql(m,b)}if(n.pitch){let b=Vl(n.pitch,u,ya);m.pitch=this._map.transform.pitch+b.amount,ql(m,b)}if(n.roll){let b=Vl(n.roll,u,Ff);m.roll=this._map.transform.roll+a.ao(b.amount,-179,179),ql(m,b)}if(m.zoom||m.bearing){let b=n.pinchAround===void 0?n.around:n.pinchAround;m.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),a.e(m,{noMoveStart:!0})}}function ql(_,t){(!_.duration||_.duration<t.duration)&&(_.duration=t.duration,_.easing=t.easing)}function Vl(_,t,n){let{maxSpeed:u,linearity:m,deceleration:b}=n,w=a.ao(_*m/(t/1e3),-u,u),k=Math.abs(w)/(b*m);return{easing:n.easing,duration:1e3*k,amount:w*(k/2)}}class Dn extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,n,u,m={}){u=u instanceof MouseEvent?u:new MouseEvent(t,u);let b=te.mousePos(n.getCanvas(),u),w=n.unproject(b);super(t,a.e({point:b,lngLat:w,originalEvent:u},m)),this._defaultPrevented=!1,this.target=n}}class Wl extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,n,u){let m=t==="touchend"?u.changedTouches:u.touches,b=te.touchPos(n.getCanvasContainer(),m),w=b.map((E=>n.unproject(E))),k=b.reduce(((E,z,D,N)=>E.add(z.div(N.length))),new a.P(0,0));super(t,{points:b,point:k,lngLats:w,lngLat:n.unproject(k),originalEvent:u}),this._defaultPrevented=!1}}class Ju extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,n,u){super(t,{originalEvent:u}),this._defaultPrevented=!1}}class Gl{constructor(t,n){this._map=t,this._clickTolerance=n.clickTolerance}reset(){delete this._mousedownPos}wheel(t){return this._firePreventable(new Ju(t.type,this._map,t))}mousedown(t,n){return this._mousedownPos=n,this._firePreventable(new Dn(t.type,this._map,t))}mouseup(t){this._map.fire(new Dn(t.type,this._map,t))}click(t,n){this._mousedownPos&&this._mousedownPos.dist(n)>=this._clickTolerance||this._map.fire(new Dn(t.type,this._map,t))}dblclick(t){return this._firePreventable(new Dn(t.type,this._map,t))}mouseover(t){this._map.fire(new Dn(t.type,this._map,t))}mouseout(t){this._map.fire(new Dn(t.type,this._map,t))}touchstart(t){return this._firePreventable(new Wl(t.type,this._map,t))}touchmove(t){this._map.fire(new Wl(t.type,this._map,t))}touchend(t){this._map.fire(new Wl(t.type,this._map,t))}touchcancel(t){this._map.fire(new Wl(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class cs{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(t){this._map.fire(new Dn(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Dn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._ignoreContextMenu||this._map.fire(new Dn(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class at{constructor(t){this._map=t}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(t){return this.transform.screenPointToLocation(a.P.convert(t),this._map.terrain)}}class Qu{constructor(t,n){this._map=t,this._tr=new at(t),this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=n.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,n){this.isEnabled()&&t.shiftKey&&t.button===0&&(te.disableDrag(),this._startPos=this._lastPos=n,this._active=!0)}mousemoveWindow(t,n){if(!this._active)return;let u=n;if(this._lastPos.equals(u)||!this._box&&u.dist(this._startPos)<this._clickTolerance)return;let m=this._startPos;this._lastPos=u,this._box||(this._box=te.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",t));let b=Math.min(m.x,u.x),w=Math.max(m.x,u.x),k=Math.min(m.y,u.y),E=Math.max(m.y,u.y);te.setTransform(this._box,`translate(${b}px,${k}px)`),this._box.style.width=w-b+"px",this._box.style.height=E-k+"px"}mouseupWindow(t,n){if(!this._active||t.button!==0)return;let u=this._startPos,m=n;if(this.reset(),te.suppressClick(),u.x!==m.x||u.y!==m.y)return this._map.fire(new a.l("boxzoomend",{originalEvent:t})),{cameraAnimation:b=>b.fitScreenCoordinates(u,m,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",t)}keydown(t){this._active&&t.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",t))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(te.remove(this._box),this._box=null),te.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(t,n){return this._map.fire(new a.l(t,{originalEvent:n}))}}function Ul(_,t){if(_.length!==t.length)throw new Error(`The number of touches and points are not equal - touches ${_.length}, points ${t.length}`);let n={};for(let u=0;u<_.length;u++)n[_[u].identifier]=t[u];return n}class kd{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(t,n,u){(this.centroid||u.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=t.timeStamp),u.length===this.numTouches&&(this.centroid=(function(m){let b=new a.P(0,0);for(let w of m)b._add(w);return b.div(m.length)})(n),this.touches=Ul(u,n)))}touchmove(t,n,u){if(this.aborted||!this.centroid)return;let m=Ul(u,n);for(let b in this.touches){let w=m[b];(!w||w.dist(this.touches[b])>30)&&(this.aborted=!0)}}touchend(t,n,u){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),u.length===0){let m=!this.aborted&&this.centroid;if(this.reset(),m)return m}}}class bo{constructor(t){this.singleTap=new kd(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(t,n,u){this.singleTap.touchstart(t,n,u)}touchmove(t,n,u){this.singleTap.touchmove(t,n,u)}touchend(t,n,u){let m=this.singleTap.touchend(t,n,u);if(m){let b=t.timeStamp-this.lastTime<500,w=!this.lastTap||this.lastTap.dist(m)<30;if(b&&w||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}}}class Zl{constructor(t){this._tr=new at(t),this._zoomIn=new bo({numTouches:1,numTaps:2}),this._zoomOut=new bo({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,n,u){this._zoomIn.touchstart(t,n,u),this._zoomOut.touchstart(t,n,u)}touchmove(t,n,u){this._zoomIn.touchmove(t,n,u),this._zoomOut.touchmove(t,n,u)}touchend(t,n,u){let m=this._zoomIn.touchend(t,n,u),b=this._zoomOut.touchend(t,n,u),w=this._tr;return m?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:w.zoom+1,around:w.unproject(m)},{originalEvent:t})}):b?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:w.zoom-1,around:w.unproject(b)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class xo{constructor(t){this._enabled=!!t.enable,this._moveStateManager=t.moveStateManager,this._clickTolerance=t.clickTolerance||1,this._moveFunction=t.move,this._activateOnStart=!!t.activateOnStart,t.assignEvents(this),this.reset()}reset(t){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(t)}_move(...t){let n=this._moveFunction(...t);if(n.bearingDelta||n.pitchDelta||n.rollDelta||n.around||n.panDelta)return this._active=!0,n}dragStart(t,n){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(t)&&(this._moveStateManager.startMove(t),this._lastPoint=Array.isArray(n)?n[0]:n,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(t,n){if(!this.isEnabled())return;let u=this._lastPoint;if(!u)return;if(t.preventDefault(),!this._moveStateManager.isValidMoveEvent(t))return void this.reset(t);let m=Array.isArray(n)?n[0]:n;return!this._moved&&m.dist(u)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=m,this._move(u,m))}dragEnd(t){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(t)&&(this._moved&&te.suppressClick(),this.reset(t))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}let jf=0,eh=2,Pd={[jf]:1,[eh]:2};class wo{constructor(t){this._correctEvent=t.checkCorrectEvent}startMove(t){let n=te.mouseButton(t);this._eventButton=n}endMove(t){delete this._eventButton}isValidStartEvent(t){return this._correctEvent(t)}isValidMoveEvent(t){return!(function(n,u){let m=Pd[u];return n.buttons===void 0||(n.buttons&m)!==m})(t,this._eventButton)}isValidEndEvent(t){return te.mouseButton(t)===this._eventButton}}class Nf{constructor(){this._firstTouch=void 0}_isOneFingerTouch(t){return t.targetTouches.length===1}_isSameTouchEvent(t){return t.targetTouches[0].identifier===this._firstTouch}startMove(t){this._firstTouch=t.targetTouches[0].identifier}endMove(t){delete this._firstTouch}isValidStartEvent(t){return this._isOneFingerTouch(t)}isValidMoveEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}isValidEndEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}}class Ed{constructor(t=new wo({checkCorrectEvent:()=>!0}),n=new Nf){this.mouseMoveStateManager=t,this.oneFingerTouchMoveStateManager=n}_executeRelevantHandler(t,n,u){return t instanceof MouseEvent?n(t):typeof TouchEvent<"u"&&t instanceof TouchEvent?u(t):void 0}startMove(t){this._executeRelevantHandler(t,(n=>this.mouseMoveStateManager.startMove(n)),(n=>this.oneFingerTouchMoveStateManager.startMove(n)))}endMove(t){this._executeRelevantHandler(t,(n=>this.mouseMoveStateManager.endMove(n)),(n=>this.oneFingerTouchMoveStateManager.endMove(n)))}isValidStartEvent(t){return this._executeRelevantHandler(t,(n=>this.mouseMoveStateManager.isValidStartEvent(n)),(n=>this.oneFingerTouchMoveStateManager.isValidStartEvent(n)))}isValidMoveEvent(t){return this._executeRelevantHandler(t,(n=>this.mouseMoveStateManager.isValidMoveEvent(n)),(n=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(n)))}isValidEndEvent(t){return this._executeRelevantHandler(t,(n=>this.mouseMoveStateManager.isValidEndEvent(n)),(n=>this.oneFingerTouchMoveStateManager.isValidEndEvent(n)))}}let Rc=_=>{_.mousedown=_.dragStart,_.mousemoveWindow=_.dragMove,_.mouseup=_.dragEnd,_.contextmenu=t=>{t.preventDefault()}};class qf{constructor(t,n){this._clickTolerance=t.clickTolerance||1,this._map=n,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(t){return t<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(t,n,u){return this._calculateTransform(t,n,u)}touchmove(t,n,u){if(this._active){if(!this._shouldBePrevented(u.length))return t.preventDefault(),this._calculateTransform(t,n,u);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",t)}}touchend(t,n,u){this._calculateTransform(t,n,u),this._active&&this._shouldBePrevented(u.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,n,u){u.length>0&&(this._active=!0);let m=Ul(u,n),b=new a.P(0,0),w=new a.P(0,0),k=0;for(let z in m){let D=m[z],N=this._touches[z];N&&(b._add(D),w._add(D.sub(N)),k++,m[z]=D)}if(this._touches=m,this._shouldBePrevented(k)||!w.mag())return;let E=w.div(k);return this._sum._add(E),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(k),panDelta:E}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Bc{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(t,n,u){this._firstTwoTouches||u.length<2||(this._firstTwoTouches=[u[0].identifier,u[1].identifier],this._start([n[0],n[1]]))}touchmove(t,n,u){if(!this._firstTwoTouches)return;t.preventDefault();let[m,b]=this._firstTwoTouches,w=Fc(u,n,m),k=Fc(u,n,b);if(!w||!k)return;let E=this._aroundCenter?null:w.add(k).div(2);return this._move([w,k],E,t)}touchend(t,n,u){if(!this._firstTwoTouches)return;let[m,b]=this._firstTwoTouches,w=Fc(u,n,m),k=Fc(u,n,b);w&&k||(this._active&&te.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&t.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Fc(_,t,n){for(let u=0;u<_.length;u++)if(_[u].identifier===n)return t[u]}function th(_,t){return Math.log(_/t)/Math.LN2}class Ad extends Bc{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,n){let u=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(th(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:th(this._distance,u),pinchAround:n}}}function Md(_,t){return 180*_.angleWith(t)/Math.PI}class us extends Bc{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,n,u){let m=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Md(this._vector,m),pinchAround:n}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());let n=25/(Math.PI*this._minDiameter)*360,u=Md(t,this._startVector);return Math.abs(u)<n}}function Ti(_){return Math.abs(_.y)>Math.abs(_.x)}class Id extends Bc{constructor(t){super(),this._currentTouchCount=0,this._map=t}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(t,n,u){super.touchstart(t,n,u),this._currentTouchCount=u.length}_start(t){this._lastPoints=t,Ti(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,n,u){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;let m=t[0].sub(this._lastPoints[0]),b=t[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(m,b,u.timeStamp),this._valid?(this._lastPoints=t,this._active=!0,{pitchDelta:(m.y+b.y)/2*-.5}):void 0}gestureBeginsVertically(t,n,u){if(this._valid!==void 0)return this._valid;let m=t.mag()>=2,b=n.mag()>=2;if(!m&&!b)return;if(!m||!b)return this._firstMove===void 0&&(this._firstMove=u),u-this._firstMove<100&&void 0;let w=t.y>0==n.y>0;return Ti(t)&&Ti(n)&&w}}let jc={panStep:100,bearingStep:15,pitchStep:10};class $l{constructor(t){this._tr=new at(t);let n=jc;this._panStep=n.panStep,this._bearingStep=n.bearingStep,this._pitchStep=n.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let n=0,u=0,m=0,b=0,w=0;switch(t.keyCode){case 61:case 107:case 171:case 187:n=1;break;case 189:case 109:case 173:n=-1;break;case 37:t.shiftKey?u=-1:(t.preventDefault(),b=-1);break;case 39:t.shiftKey?u=1:(t.preventDefault(),b=1);break;case 38:t.shiftKey?m=1:(t.preventDefault(),w=-1);break;case 40:t.shiftKey?m=-1:(t.preventDefault(),w=1);break;default:return}return this._rotationDisabled&&(u=0,m=0),{cameraAnimation:k=>{let E=this._tr;k.easeTo({duration:300,easeId:"keyboardHandler",easing:ih,zoom:n?Math.round(E.zoom)+n*(t.shiftKey?2:1):E.zoom,bearing:E.bearing+u*this._bearingStep,pitch:E.pitch+m*this._pitchStep,offset:[-b*this._panStep,-w*this._panStep],center:E.center},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function ih(_){return _*(2-_)}let rh=4.000244140625,zd=1/450;class nh{constructor(t,n){this._onTimeout=u=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(u)},this._map=t,this._tr=new at(t),this._triggerRenderFrame=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=zd}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!t&&t.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(t){return!!this._map.cooperativeGestures.isEnabled()&&!(t.ctrlKey||this._map.cooperativeGestures.isBypassed(t))}wheel(t){if(!this.isEnabled())return;if(this._shouldBePrevented(t))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",t);let n=t.deltaMode===WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY,u=ae(),m=u-(this._lastWheelEventTime||0);this._lastWheelEventTime=u,n!==0&&n%rh==0?this._type="wheel":n!==0&&Math.abs(n)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(m*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),t.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=t,this._delta-=n,this._active||this._start(t)),t.preventDefault()}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);let n=te.mousePos(this._map.getCanvas(),t),u=this._tr;this._aroundPoint=this._aroundCenter?u.transform.locationToScreenPoint(a.V.convert(u.center)):n,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;let t=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){let k=t.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=k),typeof this._targetZoom=="number"&&(this._targetZoom+=k)}if(this._delta!==0){let k=this._type==="wheel"&&Math.abs(this._delta)>rh?this._wheelZoomRate:this._defaultZoomRate,E=2/(1+Math.exp(-Math.abs(this._delta*k)));this._delta<0&&E!==0&&(E=1/E);let z=typeof this._targetZoom!="number"?t.scale:a.ar(this._targetZoom);this._targetZoom=t.applyConstrain(t.getCameraLngLat(),a.au(z*E)).zoom,this._type==="wheel"&&(this._startZoom=t.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}let n=typeof this._targetZoom!="number"?t.zoom:this._targetZoom,u=this._startZoom,m=this._easing,b,w=!1;if(this._type==="wheel"&&u&&m){let k=ae()-this._lastWheelEventTime,E=Math.min((k+5)/200,1),z=m(E);b=a.G.number(u,n,z),E<1?this._frameId||(this._frameId=!0):w=!0}else b=n,w=!0;return this._active=!0,w&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=b,{noInertia:!0,needsRenderFrame:!w,zoomDelta:b-t.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let n=a.cz;if(this._prevEase){let u=this._prevEase,m=(ae()-u.start)/u.duration,b=u.easing(m+.01)-u.easing(m),w=.27/Math.sqrt(b*b+1e-4)*.01,k=Math.sqrt(.0729-w*w);n=a.cx(w,k,.25,1)}return this._prevEase={start:ae(),duration:t,easing:n},n}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Ld{constructor(t,n){this._clickZoom=t,this._tapZoom=n}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Da{constructor(t){this._tr=new at(t),this.reset()}reset(){this._active=!1}dblclick(t,n){return t.preventDefault(),{cameraAnimation:u=>{u.easeTo({duration:300,zoom:this._tr.zoom+(t.shiftKey?-1:1),around:this._tr.unproject(n)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Nc{constructor(){this._tap=new bo({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(t,n,u){if(!this._swipePoint)if(this._tapTime){let m=n[0],b=t.timeStamp-this._tapTime<500,w=this._tapPoint.dist(m)<30;b&&w?u.length>0&&(this._swipePoint=m,this._swipeTouch=u[0].identifier):this.reset()}else this._tap.touchstart(t,n,u)}touchmove(t,n,u){if(this._tapTime){if(this._swipePoint){if(u[0].identifier!==this._swipeTouch)return;let m=n[0],b=m.y-this._swipePoint.y;return this._swipePoint=m,t.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(t,n,u)}touchend(t,n,u){if(this._tapTime)this._swipePoint&&u.length===0&&this.reset();else{let m=this._tap.touchend(t,n,u);m&&(this._tapTime=t.timeStamp,this._tapPoint=m)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class gt{constructor(t,n,u){this._el=t,this._mousePan=n,this._touchPan=u}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class wt{constructor(t,n,u,m){this._pitchWithRotate=t.pitchWithRotate,this._rollEnabled=t.rollEnabled,this._mouseRotate=n,this._mousePitch=u,this._mouseRoll=m}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class cl{constructor(t,n,u,m){this._el=t,this._touchZoom=n,this._touchRotate=u,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class ah{constructor(t,n){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=t,this._options=n,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;let t=this._map.getCanvasContainer();t.classList.add("maplibregl-cooperative-gestures"),this._container=te.create("div","maplibregl-cooperative-gesture-screen",t);let n=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(n=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));let u=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),m=document.createElement("div");m.className="maplibregl-desktop-message",m.textContent=n,this._container.appendChild(m);let b=document.createElement("div");b.className="maplibregl-mobile-message",b.textContent=u,this._container.appendChild(b),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(te.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(t){return t[this._bypassKey]}notifyGestureBlocked(t,n){this._enabled&&(this._map.fire(new a.l("cooperativegestureprevented",{gestureType:t,originalEvent:n})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}let So=_=>_.zoom||_.drag||_.roll||_.pitch||_.rotate;class pn extends a.l{}function Rn(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta||_.rollDelta}class Od{constructor(t,n){this.handleWindowEvent=m=>{this.handleEvent(m,`${m.type}Window`)},this.handleEvent=(m,b)=>{if(m.type==="blur")return void this.stop(!0);this._updatingCamera=!0;let w=m.type==="renderFrame"?void 0:m,k={needsRenderFrame:!1},E={},z={};for(let{handlerName:j,handler:U,allowed:X}of this._handlers){if(!U.isEnabled())continue;let se;if(this._blockedByActive(z,X,j))U.reset();else if(U[b||m.type]){if(a.cA(m,b||m.type)){let le=te.mousePos(this._map.getCanvas(),m);se=U[b||m.type](m,le)}else if(a.cB(m,b||m.type)){let le=this._getMapTouches(m.touches),oe=te.touchPos(this._map.getCanvas(),le);se=U[b||m.type](m,oe,le)}else a.cC(b||m.type)||(se=U[b||m.type](m));this.mergeHandlerResult(k,E,se,j,w),se&&se.needsRenderFrame&&this._triggerRenderFrame()}(se||U.isActive())&&(z[j]=U)}let D={};for(let j in this._previousActiveHandlers)z[j]||(D[j]=w);this._previousActiveHandlers=z,(Object.keys(D).length||Rn(k))&&(this._changes.push([k,E,D]),this._triggerRenderFrame()),(Object.keys(z).length||Rn(k))&&this._map._stop(!0),this._updatingCamera=!1;let{cameraAnimation:N}=k;N&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],N(this._map))},this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ll(t),this._bearingSnap=n.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(n);let u=this._el;this._listeners=[[u,"touchstart",{passive:!0}],[u,"touchmove",{passive:!1}],[u,"touchend",void 0],[u,"touchcancel",void 0],[u,"mousedown",void 0],[u,"mousemove",void 0],[u,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[u,"mouseover",void 0],[u,"mouseout",void 0],[u,"dblclick",void 0],[u,"click",void 0],[u,"keydown",{capture:!1}],[u,"keyup",void 0],[u,"wheel",{passive:!1}],[u,"contextmenu",void 0],[window,"blur",void 0]];for(let[m,b,w]of this._listeners)te.addEventListener(m,b,m===document?this.handleWindowEvent:this.handleEvent,w)}destroy(){for(let[t,n,u]of this._listeners)te.removeEventListener(t,n,t===document?this.handleWindowEvent:this.handleEvent,u)}_addDefaultHandlers(t){let n=this._map,u=n.getCanvasContainer();this._add("mapEvent",new Gl(n,t));let m=n.boxZoom=new Qu(n,t);this._add("boxZoom",m),t.interactive&&t.boxZoom&&m.enable();let b=n.cooperativeGestures=new ah(n,t.cooperativeGestures);this._add("cooperativeGestures",b),t.cooperativeGestures&&b.enable();let w=new Zl(n),k=new Da(n);n.doubleClickZoom=new Ld(k,w),this._add("tapZoom",w),this._add("clickZoom",k),t.interactive&&t.doubleClickZoom&&n.doubleClickZoom.enable();let E=new Nc;this._add("tapDragZoom",E);let z=n.touchPitch=new Id(n);this._add("touchPitch",z),t.interactive&&t.touchPitch&&n.touchPitch.enable(t.touchPitch);let D=()=>n.project(n.getCenter()),N=(function({enable:he,clickTolerance:ge,aroundCenter:be=!0,minPixelCenterThreshold:pe=100,rotateDegreesPerPixelMoved:Se=.8},De){let Ie=new wo({checkCorrectEvent:Le=>te.mouseButton(Le)===0&&Le.ctrlKey||te.mouseButton(Le)===2&&!Le.ctrlKey});return new xo({clickTolerance:ge,move:(Le,Fe)=>{let Xe=De();if(be&&Math.abs(Xe.y-Le.y)>pe)return{bearingDelta:a.cy(new a.P(Le.x,Fe.y),Fe,Xe)};let et=(Fe.x-Le.x)*Se;return be&&Fe.y<Xe.y&&(et=-et),{bearingDelta:et}},moveStateManager:Ie,enable:he,assignEvents:Rc})})(t,D),j=(function({enable:he,clickTolerance:ge,pitchDegreesPerPixelMoved:be=-.5}){let pe=new wo({checkCorrectEvent:Se=>te.mouseButton(Se)===0&&Se.ctrlKey||te.mouseButton(Se)===2});return new xo({clickTolerance:ge,move:(Se,De)=>({pitchDelta:(De.y-Se.y)*be}),moveStateManager:pe,enable:he,assignEvents:Rc})})(t),U=(function({enable:he,clickTolerance:ge,rollDegreesPerPixelMoved:be=.3},pe){let Se=new wo({checkCorrectEvent:De=>te.mouseButton(De)===2&&De.ctrlKey});return new xo({clickTolerance:ge,move:(De,Ie)=>{let Le=pe(),Fe=(Ie.x-De.x)*be;return Ie.y<Le.y&&(Fe=-Fe),{rollDelta:Fe}},moveStateManager:Se,enable:he,assignEvents:Rc})})(t,D);n.dragRotate=new wt(t,N,j,U),this._add("mouseRotate",N,["mousePitch"]),this._add("mousePitch",j,["mouseRotate","mouseRoll"]),this._add("mouseRoll",U,["mousePitch"]),t.interactive&&t.dragRotate&&n.dragRotate.enable();let X=(function({enable:he,clickTolerance:ge}){let be=new wo({checkCorrectEvent:pe=>te.mouseButton(pe)===0&&!pe.ctrlKey});return new xo({clickTolerance:ge,move:(pe,Se)=>({around:Se,panDelta:Se.sub(pe)}),activateOnStart:!0,moveStateManager:be,enable:he,assignEvents:Rc})})(t),se=new qf(t,n);n.dragPan=new gt(u,X,se),this._add("mousePan",X),this._add("touchPan",se,["touchZoom","touchRotate"]),t.interactive&&t.dragPan&&n.dragPan.enable(t.dragPan);let le=new us,oe=new Ad;n.touchZoomRotate=new cl(u,oe,le,E),this._add("touchRotate",le,["touchPan","touchZoom"]),this._add("touchZoom",oe,["touchPan","touchRotate"]),t.interactive&&t.touchZoomRotate&&n.touchZoomRotate.enable(t.touchZoomRotate),this._add("blockableMapEvent",new cs(n));let ce=n.scrollZoom=new nh(n,(()=>this._triggerRenderFrame()));this._add("scrollZoom",ce,["mousePan"]),t.interactive&&t.scrollZoom&&n.scrollZoom.enable(t.scrollZoom);let me=n.keyboard=new $l(n);this._add("keyboard",me),t.interactive&&t.keyboard&&n.keyboard.enable()}_add(t,n,u){this._handlers.push({handlerName:t,handler:n,allowed:u}),this._handlersById[t]=n}stop(t){if(!this._updatingCamera){for(let{handler:n}of this._handlers)n.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(let{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!So(this._eventsInProgress)||this.isZooming()}_blockedByActive(t,n,u){for(let m in t)if(m!==u&&(!n||n.indexOf(m)<0))return!0;return!1}_getMapTouches(t){let n=[];for(let u of t)this._el.contains(u.target)&&n.push(u);return n}mergeHandlerResult(t,n,u,m,b){if(!u)return;a.e(t,u);let w={handlerName:m,originalEvent:u.originalEvent||b};u.zoomDelta!==void 0&&(n.zoom=w),u.panDelta!==void 0&&(n.drag=w),u.rollDelta!==void 0&&(n.roll=w),u.pitchDelta!==void 0&&(n.pitch=w),u.bearingDelta!==void 0&&(n.rotate=w)}_applyChanges(){let t={},n={},u={};for(let[m,b,w]of this._changes)m.panDelta&&(t.panDelta=(t.panDelta||new a.P(0,0))._add(m.panDelta)),m.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+m.zoomDelta),m.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+m.bearingDelta),m.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+m.pitchDelta),m.rollDelta&&(t.rollDelta=(t.rollDelta||0)+m.rollDelta),m.around!==void 0&&(t.around=m.around),m.pinchAround!==void 0&&(t.pinchAround=m.pinchAround),m.noInertia&&(t.noInertia=m.noInertia),a.e(n,b),a.e(u,w);this._updateMapTransform(t,n,u),this._changes=[]}_updateMapTransform(t,n,u){let m=this._map,b=m._getTransformForUpdate(),w=m.terrain;if(!(Rn(t)||w&&this._terrainMovement))return this._fireEvents(n,u,!0);m._stop(!0);let{panDelta:k,zoomDelta:E,bearingDelta:z,pitchDelta:D,rollDelta:N,around:j,pinchAround:U}=t;U!==void 0&&(j=U),j=j||m.transform.centerPoint,w&&!b.isPointOnMapSurface(j)&&(j=b.centerPoint);let X={panDelta:k,zoomDelta:E,rollDelta:N,pitchDelta:D,bearingDelta:z,around:j};this._map.cameraHelper.useGlobeControls&&!b.isPointOnMapSurface(j)&&(j=b.centerPoint);let se=j.distSqr(b.centerPoint)<.01?b.center:b.screenPointToLocation(k?j.sub(k):j);this._handleMapControls({terrain:w,tr:b,deltasForHelper:X,preZoomAroundLoc:se,combinedEventsInProgress:n,panDelta:k}),m._applyUpdatedTransform(b),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(n,u,!0)}_handleMapControls({terrain:t,tr:n,deltasForHelper:u,preZoomAroundLoc:m,combinedEventsInProgress:b,panDelta:w}){let k=this._map.cameraHelper;if(k.handleMapControlsRollPitchBearingZoom(u,n),t)return k.useGlobeControls?(this._terrainMovement||!b.drag&&!b.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void k.handleMapControlsPan(u,n,m)):this._terrainMovement||!b.drag&&!b.zoom?void(b.drag&&this._terrainMovement&&w?n.setCenter(n.screenPointToLocation(n.centerPoint.sub(w))):k.handleMapControlsPan(u,n,m)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void k.handleMapControlsPan(u,n,m));k.handleMapControlsPan(u,n,m)}_fireEvents(t,n,u){let m=So(this._eventsInProgress),b=So(t),w={};for(let N in t){let{originalEvent:j}=t[N];this._eventsInProgress[N]||(w[`${N}start`]=j),this._eventsInProgress[N]=t[N]}!m&&b&&this._fireEvent("movestart",b.originalEvent);for(let N in w)this._fireEvent(N,w[N]);b&&this._fireEvent("move",b.originalEvent);for(let N in t){let{originalEvent:j}=t[N];this._fireEvent(N,j)}let k={},E;for(let N in this._eventsInProgress){let{handlerName:j,originalEvent:U}=this._eventsInProgress[N];this._handlersById[j].isActive()||(delete this._eventsInProgress[N],E=n[j]||U,k[`${N}end`]=E)}for(let N in k)this._fireEvent(N,k[N]);let z=So(this._eventsInProgress),D=(m||b)&&!z;if(D&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;let N=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&N.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(N)}if(u&&D){this._updatingCamera=!0;let N=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),j=U=>U!==0&&-this._bearingSnap<U&&U<this._bearingSnap;!N||!N.essential&&ie.prefersReducedMotion?(this._map.fire(new a.l("moveend",{originalEvent:E})),j(this._map.getBearing())&&this._map.resetNorth()):(j(N.bearing||this._map.getBearing())&&(N.bearing=0),N.freezeElevation=!0,this._map.easeTo(N,{originalEvent:E})),this._updatingCamera=!1}}_fireEvent(t,n){this._map.fire(new a.l(t,n?{originalEvent:n}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((t=>{delete this._frameId,this.handleEvent(new pn("renderFrame",{timeStamp:t})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Vf extends a.E{constructor(t,n,u){super(),this._renderFrameCallback=()=>{let m=Math.min((ae()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(m)),m<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=u.bearingSnap,this.cameraHelper=n,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(t,n){t.apply(this.transform),this.transform=t,this.cameraHelper=n}getCenter(){return new a.V(this.transform.center.lng,this.transform.center.lat)}setCenter(t,n){return this.jumpTo({center:t},n)}getCenterElevation(){return this.transform.elevation}setCenterElevation(t,n){return this.jumpTo({elevation:t},n),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(t){this._centerClampedToGround=t}panBy(t,n,u){return t=a.P.convert(t).mult(-1),this.panTo(this.transform.center,a.e({offset:t},n),u)}panTo(t,n,u){return this.easeTo(a.e({center:t},n),u)}getZoom(){return this.transform.zoom}setZoom(t,n){return this.jumpTo({zoom:t},n),this}zoomTo(t,n,u){return this.easeTo(a.e({zoom:t},n),u)}zoomIn(t,n){return this.zoomTo(this.getZoom()+1,t,n),this}zoomOut(t,n){return this.zoomTo(this.getZoom()-1,t,n),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(t,n){return t!=this.transform.fov&&(this.transform.setFov(t),this.fire(new a.l("movestart",n)).fire(new a.l("move",n)).fire(new a.l("moveend",n))),this}getBearing(){return this.transform.bearing}setBearing(t,n){return this.jumpTo({bearing:t},n),this}getPadding(){return this.transform.padding}setPadding(t,n){return this.jumpTo({padding:t},n),this}rotateTo(t,n,u){return this.easeTo(a.e({bearing:t},n),u)}resetNorth(t,n){return this.rotateTo(0,a.e({duration:1e3},t),n),this}resetNorthPitch(t,n){return this.easeTo(a.e({bearing:0,pitch:0,roll:0,duration:1e3},t),n),this}snapToNorth(t,n){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,n):this}getPitch(){return this.transform.pitch}setPitch(t,n){return this.jumpTo({pitch:t},n),this}getRoll(){return this.transform.roll}setRoll(t,n){return this.jumpTo({roll:t},n),this}cameraForBounds(t,n){t=Ei.convert(t).adjustAntiMeridian();let u=n&&n.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),u,n)}_cameraForBoxAndBearing(t,n,u,m){let b={top:0,bottom:0,right:0,left:0};if(typeof(m=a.e({padding:b,offset:[0,0],maxZoom:this.transform.maxZoom},m)).padding=="number"){let z=m.padding;m.padding={top:z,bottom:z,right:z,left:z}}let w=a.e(b,m.padding);m.padding=w;let k=this.transform,E=new Ei(t,n);return this.cameraHelper.cameraForBoxAndBearing(m,w,E,u,k)}fitBounds(t,n,u){return this._fitInternal(this.cameraForBounds(t,n),n,u)}fitScreenCoordinates(t,n,u,m,b){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(a.P.convert(t)),this.transform.screenPointToLocation(a.P.convert(n)),u,m),m,b)}_fitInternal(t,n,u){return t?(delete(n=a.e(t,n)).padding,n.linear?this.easeTo(n,u):this.flyTo(n,u)):this}jumpTo(t,n){this.stop();let u=this._getTransformForUpdate(),m=!1,b=!1,w=!1,k=u.zoom;this.cameraHelper.handleJumpToCenterZoom(u,t);let E=u.zoom!==k;return"elevation"in t&&u.elevation!==+t.elevation&&u.setElevation(+t.elevation),"bearing"in t&&u.bearing!==+t.bearing&&(m=!0,u.setBearing(+t.bearing)),"pitch"in t&&u.pitch!==+t.pitch&&(b=!0,u.setPitch(+t.pitch)),"roll"in t&&u.roll!==+t.roll&&(w=!0,u.setRoll(+t.roll)),t.padding==null||u.isPaddingEqual(t.padding)||u.setPadding(t.padding),this._applyUpdatedTransform(u),this.fire(new a.l("movestart",n)).fire(new a.l("move",n)),E&&this.fire(new a.l("zoomstart",n)).fire(new a.l("zoom",n)).fire(new a.l("zoomend",n)),m&&this.fire(new a.l("rotatestart",n)).fire(new a.l("rotate",n)).fire(new a.l("rotateend",n)),b&&this.fire(new a.l("pitchstart",n)).fire(new a.l("pitch",n)).fire(new a.l("pitchend",n)),w&&this.fire(new a.l("rollstart",n)).fire(new a.l("roll",n)).fire(new a.l("rollend",n)),this.fire(new a.l("moveend",n))}calculateCameraOptionsFromTo(t,n,u,m=0){let b=a.ab.fromLngLat(t,n),w=a.ab.fromLngLat(u,m),k=w.x-b.x,E=w.y-b.y,z=w.z-b.z,D=Math.hypot(k,E,z);if(D===0)throw new Error("Can't calculate camera options with same From and To");let N=Math.hypot(k,E),j=a.au(this.transform.cameraToCenterDistance/D/this.transform.tileSize),U=180*Math.atan2(k,-E)/Math.PI,X=180*Math.acos(N/D)/Math.PI;return X=z<0?90-X:90+X,{center:w.toLngLat(),elevation:m,zoom:j,pitch:X,bearing:U}}calculateCameraOptionsFromCameraLngLatAltRotation(t,n,u,m,b){let w=this.transform.calculateCenterFromCameraLngLatAlt(t,n,u,m);return{center:w.center,elevation:w.elevation,zoom:w.zoom,bearing:u,pitch:m,roll:b}}easeTo(t,n){this._stop(!1,t.easeId),((t=a.e({offset:[0,0],duration:500,easing:a.cz},t)).animate===!1||!t.essential&&ie.prefersReducedMotion)&&(t.duration=0);let u=this._getTransformForUpdate(),m=this.getBearing(),b=u.pitch,w=u.roll,k="bearing"in t?this._normalizeBearing(t.bearing,m):m,E="pitch"in t?+t.pitch:b,z="roll"in t?this._normalizeBearing(t.roll,w):w,D="padding"in t?t.padding:u.padding,N=a.P.convert(t.offset),j,U;t.around&&(j=a.V.convert(t.around),U=u.locationToScreenPoint(j));let X={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},se=this.cameraHelper.handleEaseTo(u,{bearing:k,pitch:E,roll:z,padding:D,around:j,aroundPoint:U,offsetAsPoint:N,offset:t.offset,zoom:t.zoom,center:t.center});return this._rotating=this._rotating||m!==k,this._pitching=this._pitching||E!==b,this._rolling=this._rolling||z!==w,this._padding=!u.isPaddingEqual(D),this._zooming=this._zooming||se.isZooming,this._easeId=t.easeId,this._prepareEase(n,t.noMoveStart,X),this.terrain&&this._prepareElevation(se.elevationCenter),this._ease((le=>{se.easeFunc(le),this.terrain&&!t.freezeElevation&&this._updateElevation(le),this._applyUpdatedTransform(u),this._fireMoveEvents(n)}),(le=>{this.terrain&&t.freezeElevation&&this._finalizeElevation(),this._afterEase(n,le)}),t),this}_prepareEase(t,n,u={}){this._moving=!0,n||u.moving||this.fire(new a.l("movestart",t)),this._zooming&&!u.zooming&&this.fire(new a.l("zoomstart",t)),this._rotating&&!u.rotating&&this.fire(new a.l("rotatestart",t)),this._pitching&&!u.pitching&&this.fire(new a.l("pitchstart",t)),this._rolling&&!u.rolling&&this.fire(new a.l("rollstart",t))}_prepareElevation(t){this._elevationCenter=t,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(t,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(t){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));let n=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(t<1&&n!==this._elevationTarget){let u=this._elevationTarget-this._elevationStart;this._elevationStart+=t*(u-(n-(u*t+this._elevationStart))/(1-t)),this._elevationTarget=n}this.transform.setElevation(a.G.number(this._elevationStart,this._elevationTarget,t))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(t){if(!this.terrain&&t.elevation>=0&&t.pitch<=90)return{};let n=t.getCameraLngLat(),u=t.getCameraAltitude(),m=this.terrain?this.terrain.getElevationForLngLatZoom(n,t.zoom):0;if(u<m){let b=this.calculateCameraOptionsFromTo(n,m,t.center,t.elevation);return{pitch:b.pitch,zoom:b.zoom}}return{}}_applyUpdatedTransform(t){let n=[];if(n.push((m=>this._elevateCameraIfInsideTerrain(m))),this.transformCameraUpdate&&n.push((m=>this.transformCameraUpdate(m))),!n.length)return;let u=t.clone();for(let m of n){let b=u.clone(),{center:w,zoom:k,roll:E,pitch:z,bearing:D,elevation:N}=m(b);w&&b.setCenter(w),N!==void 0&&b.setElevation(N),k!==void 0&&b.setZoom(k),E!==void 0&&b.setRoll(E),z!==void 0&&b.setPitch(z),D!==void 0&&b.setBearing(D),u.apply(b)}this.transform.apply(u)}_fireMoveEvents(t){this.fire(new a.l("move",t)),this._zooming&&this.fire(new a.l("zoom",t)),this._rotating&&this.fire(new a.l("rotate",t)),this._pitching&&this.fire(new a.l("pitch",t)),this._rolling&&this.fire(new a.l("roll",t))}_afterEase(t,n){if(this._easeId&&n&&this._easeId===n)return;delete this._easeId;let u=this._zooming,m=this._rotating,b=this._pitching,w=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,u&&this.fire(new a.l("zoomend",t)),m&&this.fire(new a.l("rotateend",t)),b&&this.fire(new a.l("pitchend",t)),w&&this.fire(new a.l("rollend",t)),this.fire(new a.l("moveend",t))}flyTo(t,n){if(!t.essential&&ie.prefersReducedMotion){let Fe=a.U(t,["center","zoom","bearing","pitch","roll","elevation","padding"]);return this.jumpTo(Fe,n)}this.stop(),t=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.cz},t);let u=this._getTransformForUpdate(),m=u.bearing,b=u.pitch,w=u.roll,k=u.padding,E="bearing"in t?this._normalizeBearing(t.bearing,m):m,z="pitch"in t?+t.pitch:b,D="roll"in t?this._normalizeBearing(t.roll,w):w,N="padding"in t?t.padding:u.padding,j=a.P.convert(t.offset),U=u.centerPoint.add(j),X=u.screenPointToLocation(U),se=this.cameraHelper.handleFlyTo(u,{bearing:E,pitch:z,roll:D,padding:N,locationAtOffset:X,offsetAsPoint:j,center:t.center,minZoom:t.minZoom,zoom:t.zoom}),le=t.curve,oe=Math.max(u.width,u.height),ce=oe/se.scaleOfZoom,me=se.pixelPathLength;typeof se.scaleOfMinZoom=="number"&&(le=Math.sqrt(oe/se.scaleOfMinZoom/me*2));let he=le*le;function ge(Fe){let Xe=(ce*ce-oe*oe+(Fe?-1:1)*he*he*me*me)/(2*(Fe?ce:oe)*he*me);return Math.log(Math.sqrt(Xe*Xe+1)-Xe)}function be(Fe){return(Math.exp(Fe)-Math.exp(-Fe))/2}function pe(Fe){return(Math.exp(Fe)+Math.exp(-Fe))/2}let Se=ge(!1),De=function(Fe){return pe(Se)/pe(Se+le*Fe)},Ie=function(Fe){return oe*((pe(Se)*(be(Xe=Se+le*Fe)/pe(Xe))-be(Se))/he)/me;var Xe},Le=(ge(!0)-Se)/le;if(Math.abs(me)<2e-6||!isFinite(Le)){if(Math.abs(oe-ce)<1e-6)return this.easeTo(t,n);let Fe=ce<oe?-1:1;Le=Math.abs(Math.log(ce/oe))/le,Ie=()=>0,De=Xe=>Math.exp(Fe*le*Xe)}return t.duration="duration"in t?+t.duration:1e3*Le/("screenSpeed"in t?+t.screenSpeed/le:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=m!==E,this._pitching=z!==b,this._rolling=D!==w,this._padding=!u.isPaddingEqual(N),this._prepareEase(n,!1),this.terrain&&this._prepareElevation(se.targetCenter),this._ease((Fe=>{let Xe=Fe*Le,et=1/De(Xe),He=Ie(Xe);this._rotating&&u.setBearing(a.G.number(m,E,Fe)),this._pitching&&u.setPitch(a.G.number(b,z,Fe)),this._rolling&&u.setRoll(a.G.number(w,D,Fe)),this._padding&&(u.interpolatePadding(k,N,Fe),U=u.centerPoint.add(j)),se.easeFunc(Fe,et,He,U),this.terrain&&!t.freezeElevation&&this._updateElevation(Fe),this._applyUpdatedTransform(u),this._fireMoveEvents(n)}),(()=>{this.terrain&&t.freezeElevation&&this._finalizeElevation(),this._afterEase(n)}),t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,n){var u;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){let m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,n)}return t||(u=this.handlers)===null||u===void 0||u.stop(!1),this}_ease(t,n,u){u.animate===!1||u.duration===0?(t(1),n()):(this._easeStart=ae(),this._easeOptions=u,this._onEaseFrame=t,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(t,n){t=a.W(t,-180,180);let u=Math.abs(t-n);return Math.abs(t-360-n)<u&&(t-=360),Math.abs(t+360-n)<u&&(t+=360),t}queryTerrainElevation(t){return this.terrain?this.terrain.getElevationForLngLat(a.V.convert(t)):null}}let Dd={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Rd{constructor(t=Dd){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=n=>{!n||n.sourceDataType!=="metadata"&&n.sourceDataType!=="visibility"&&n.dataType!=="style"&&n.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=t}getDefaultPosition(){return"bottom-right"}onAdd(t){return this._map=t,this._compact=this.options.compact,this._container=te.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=te.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=te.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){te.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(t,n){let u=this._map._getUIString(`AttributionControl.${n}`);t.title=u,t.setAttribute("aria-label",u)}_updateAttributions(){if(!this._map.style)return;let t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((m=>typeof m!="string"?"":m))):typeof this.options.customAttribution=="string"&&t.push(this.options.customAttribution)),this._map.style.stylesheet){let m=this._map.style.stylesheet;this.styleOwner=m.owner,this.styleId=m.id}let n=this._map.style.tileManagers;for(let m in n){let b=n[m];if(b.used||b.usedForTerrain){let w=b.getSource();w.attribution&&t.indexOf(w.attribution)<0&&t.push(w.attribution)}}t=t.filter((m=>String(m).trim())),t.sort(((m,b)=>m.length-b.length)),t=t.filter(((m,b)=>{for(let w=b+1;w<t.length;w++)if(t[w].indexOf(m)>=0)return!1;return!0}));let u=t.join(" | ");u!==this._attribHTML&&(this._attribHTML=u,t.length?(this._innerContainer.innerHTML=te.sanitize(u),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class ul{constructor(t={}){this._updateCompact=()=>{let n=this._container.children;if(n.length){let u=n[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&u.classList.add("maplibregl-compact"):u.classList.remove("maplibregl-compact")}},this.options=t}getDefaultPosition(){return"bottom-left"}onAdd(t){this._map=t,this._compact=this.options&&this.options.compact,this._container=te.create("div","maplibregl-ctrl");let n=te.create("a","maplibregl-ctrl-logo");return n.target="_blank",n.rel="noopener nofollow",n.href="https://maplibre.org/",n.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),n.setAttribute("rel","noopener nofollow"),this._container.appendChild(n),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){te.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Gi{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){let n=++this._id;return this._queue.push({callback:t,id:n,cancelled:!1}),n}remove(t){let n=this._currentlyRunning,u=n?this._queue.concat(n):this._queue;for(let m of u)if(m.id===t)return void(m.cancelled=!0)}run(t=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");let n=this._currentlyRunning=this._queue;this._queue=[];for(let u of n)if(!u.cancelled&&(u.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var rr=a.aV([{name:"a_pos3d",type:"Int16",components:3}]);class Bd extends a.E{constructor(t){super(),this._lastTilesetChange=ae(),this.tileManager=t,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=t._source.tileSize*2**this.deltaZoom,t.usedForTerrain=!0,t.tileSize=this.tileSize}destruct(){this.tileManager.usedForTerrain=!1,this.tileManager.tileSize=null}getSource(){return this.tileManager._source}update(t,n){this.tileManager.update(t,n),this._renderableTilesKeys=[];let u={};for(let m of Ni(t,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:n,calculateTileZoom:this.tileManager._source.calculateTileZoom}))u[m.key]=!0,this._renderableTilesKeys.push(m.key),this._tiles[m.key]||(m.terrainRttPosMatrix32f=new Float64Array(16),a.c8(m.terrainRttPosMatrix32f,0,a.a5,a.a5,0,0,1),this._tiles[m.key]=new Ke(m,this.tileSize),this._lastTilesetChange=ae());for(let m in this._tiles)u[m]||delete this._tiles[m]}freeRtt(t){for(let n in this._tiles){let u=this._tiles[n];(!t||u.tileID.equals(t)||u.tileID.isChildOf(t)||t.isChildOf(u.tileID))&&(u.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((t=>this.getTileByID(t)))}getTileByID(t){return this._tiles[t]}getTerrainCoords(t,n){return n?this._getTerrainCoordsForTileRanges(t,n):this._getTerrainCoordsForRegularTile(t)}_getTerrainCoordsForRegularTile(t){let n={};for(let u of this._renderableTilesKeys){let m=this._tiles[u].tileID,b=t.clone(),w=a.bl();if(m.canonical.equals(t.canonical))a.c8(w,0,a.a5,a.a5,0,0,1);else if(m.canonical.isChildOf(t.canonical)){let k=m.canonical.z-t.canonical.z,E=m.canonical.x-(m.canonical.x>>k<<k),z=m.canonical.y-(m.canonical.y>>k<<k),D=a.a5>>k;a.c8(w,0,D,D,0,0,1),a.O(w,w,[-E*D,-z*D,0])}else{if(!t.canonical.isChildOf(m.canonical))continue;{let k=t.canonical.z-m.canonical.z,E=t.canonical.x-(t.canonical.x>>k<<k),z=t.canonical.y-(t.canonical.y>>k<<k),D=a.a5>>k;a.c8(w,0,a.a5,a.a5,0,0,1),a.O(w,w,[E*D,z*D,0]),a.Q(w,w,[1/2**k,1/2**k,0])}}b.terrainRttPosMatrix32f=new Float32Array(w),n[u]=b}return n}_getTerrainCoordsForTileRanges(t,n){let u={};for(let m of this._renderableTilesKeys){let b=this._tiles[m].tileID;if(!this._isWithinTileRanges(b,n))continue;let w=t.clone(),k=a.bl();if(b.canonical.z===t.canonical.z){let E=t.canonical.x-b.canonical.x,z=t.canonical.y-b.canonical.y;a.c8(k,0,a.a5,a.a5,0,0,1),a.O(k,k,[E*a.a5,z*a.a5,0])}else if(b.canonical.z>t.canonical.z){let E=b.canonical.z-t.canonical.z,z=b.canonical.x-(b.canonical.x>>E<<E),D=b.canonical.y-(b.canonical.y>>E<<E),N=t.canonical.x-(b.canonical.x>>E),j=t.canonical.y-(b.canonical.y>>E),U=a.a5>>E;a.c8(k,0,U,U,0,0,1),a.O(k,k,[-z*U+N*a.a5,-D*U+j*a.a5,0])}else{let E=t.canonical.z-b.canonical.z,z=t.canonical.x-(t.canonical.x>>E<<E),D=t.canonical.y-(t.canonical.y>>E<<E),N=(t.canonical.x>>E)-b.canonical.x,j=(t.canonical.y>>E)-b.canonical.y,U=a.a5<<E;a.c8(k,0,U,U,0,0,1),a.O(k,k,[z*a.a5+N*U,D*a.a5+j*U,0])}w.terrainRttPosMatrix32f=new Float32Array(k),u[m]=w}return u}getSourceTile(t,n){let u=this.tileManager._source,m=t.overscaledZ-this.deltaZoom;if(m>u.maxzoom&&(m=u.maxzoom),m<u.minzoom)return;this._sourceTileCache[t.key]||(this._sourceTileCache[t.key]=t.scaledTo(m).key);let b=this.findTileInCaches(this._sourceTileCache[t.key]);if(!b?.dem&&n)for(;m>=u.minzoom&&!b?.dem;)b=this.findTileInCaches(t.scaledTo(m--).key);return b}findTileInCaches(t){let n=this.tileManager.getTileByID(t);return n||(n=this.tileManager._outOfViewCache.getByKey(t),n)}anyTilesAfterTime(t=Date.now()){return this._lastTilesetChange>=t}_isWithinTileRanges(t,n){return n[t.canonical.z]&&t.canonical.x>=n[t.canonical.z].minTileX&&t.canonical.x<=n[t.canonical.z].maxTileX&&t.canonical.y>=n[t.canonical.z].minTileY&&t.canonical.y<=n[t.canonical.z].maxTileY}}class Hl{constructor(t,n,u){this._meshCache={},this.painter=t,this.tileManager=new Bd(n),this.options=u,this.exaggeration=typeof u.exaggeration=="number"?u.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(t,n,u,m=a.a5){var b;if(!(n>=0&&n<m&&u>=0&&u<m))return 0;let w=this.getTerrainData(t),k=(b=w.tile)===null||b===void 0?void 0:b.dem;if(!k)return 0;let E=a.cD([],[n/m*a.a5,u/m*a.a5],w.u_terrain_matrix),z=[E[0]*k.dim,E[1]*k.dim],D=Math.floor(z[0]),N=Math.floor(z[1]),j=z[0]-D,U=z[1]-N;return k.get(D,N)*(1-j)*(1-U)+k.get(D+1,N)*j*(1-U)+k.get(D,N+1)*(1-j)*U+k.get(D+1,N+1)*j*U}getElevationForLngLatZoom(t,n){if(!a.cE(n,t.wrap()))return 0;let{tileID:u,mercatorX:m,mercatorY:b}=this._getOverscaledTileIDFromLngLatZoom(t,n);return this.getElevation(u,m%a.a5,b%a.a5,a.a5)}getElevationForLngLat(t){return this.getElevationForLngLatZoom(t,this.tileManager.maxzoom)}getElevation(t,n,u,m=a.a5){return this.getDEMElevation(t,n,u,m)*this.exaggeration}getTerrainData(t){if(!this._emptyDemTexture){let m=this.painter.context,b=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new a.T(m,b,m.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new a.T(m,new a.R({width:1,height:1}),m.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.as([])}let n=this.tileManager.getSourceTile(t,!0);if(n&&n.dem&&(!n.demTexture||n.needsTerrainPrepare)){let m=this.painter.context;n.demTexture=this.painter.getTileTexture(n.dem.stride),n.demTexture?n.demTexture.update(n.dem.getPixels(),{premultiply:!1}):n.demTexture=new a.T(m,n.dem.getPixels(),m.gl.RGBA,{premultiply:!1}),n.demTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),n.needsTerrainPrepare=!1}let u=n&&n+n.tileID.key+t.key;if(u&&!this._demMatrixCache[u]){let m=this.tileManager.getSource().maxzoom,b=t.canonical.z-n.tileID.canonical.z;t.overscaledZ>t.canonical.z&&(t.canonical.z>=m?b=t.canonical.z-m:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));let w=t.canonical.x-(t.canonical.x>>b<<b),k=t.canonical.y-(t.canonical.y>>b<<b),E=a.cF(new Float64Array(16),[1/(a.a5<<b),1/(a.a5<<b),0]);a.O(E,E,[w*a.a5,k*a.a5,0]),this._demMatrixCache[t.key]={matrix:E,coord:t}}return{u_depth:2,u_terrain:3,u_terrain_dim:n&&n.dem&&n.dem.dim||1,u_terrain_matrix:u?this._demMatrixCache[t.key].matrix:this._emptyDemMatrix,u_terrain_unpack:n&&n.dem&&n.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(n&&n.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:n}}getFramebuffer(t){let n=this.painter,u=n.width/devicePixelRatio,m=n.height/devicePixelRatio;return!this._fbo||this._fbo.width===u&&this._fbo.height===m||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new a.T(n.context,{width:u,height:m,data:null},n.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(n.context.gl.NEAREST,n.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new a.T(n.context,{width:u,height:m,data:null},n.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(n.context.gl.NEAREST,n.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=n.context.createFramebuffer(u,m,!0,!1),this._fbo.depthAttachment.set(n.context.createRenderbuffer(n.context.gl.DEPTH_COMPONENT16,u,m))),this._fbo.colorAttachment.set(t==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){let t=this.painter.context;if(this._coordsTexture)return this._coordsTexture;let n=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let b=0,w=0;b<this._coordsTextureSize;b++)for(let k=0;k<this._coordsTextureSize;k++,w+=4)n[w+0]=255&k,n[w+1]=255&b,n[w+2]=k>>8<<4|b>>8,n[w+3]=0;let u=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(n.buffer)),m=new a.T(t,u,t.gl.RGBA,{premultiply:!1});return m.bind(t.gl.NEAREST,t.gl.CLAMP_TO_EDGE),this._coordsTexture=m,m}pointCoordinate(t){this.painter.maybeDrawDepthAndCoords(!0);let n=new Uint8Array(4),u=this.painter.context,m=u.gl,b=Math.round(t.x*this.painter.pixelRatio/devicePixelRatio),w=Math.round(t.y*this.painter.pixelRatio/devicePixelRatio),k=Math.round(this.painter.height/devicePixelRatio);u.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),m.readPixels(b,k-w-1,1,1,m.RGBA,m.UNSIGNED_BYTE,n),u.bindFramebuffer.set(null);let E=n[0]+(n[2]>>4<<8),z=n[1]+((15&n[2])<<8),D=this.coordsIndex[255-n[3]],N=D&&this.tileManager.getTileByID(D);if(!N)return null;let j=this._coordsTextureSize,U=(1<<N.tileID.canonical.z)*j;return new a.ab((N.tileID.canonical.x*j+E)/U+N.tileID.wrap,(N.tileID.canonical.y*j+z)/U,this.getElevation(N.tileID,E,z,j))}depthAtPoint(t){let n=new Uint8Array(4),u=this.painter.context,m=u.gl;return u.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),m.readPixels(t.x,this.painter.height/devicePixelRatio-t.y-1,1,1,m.RGBA,m.UNSIGNED_BYTE,n),u.bindFramebuffer.set(null),(n[0]/16777216+n[1]/65536+n[2]/256+n[3])/256}getTerrainMesh(t){var n;let u=((n=this.painter.style.projection)===null||n===void 0?void 0:n.transitionState)>0,m=u&&t.canonical.y===0,b=u&&t.canonical.y===(1<<t.canonical.z)-1,w=`m_${m?"n":""}_${b?"s":""}`;if(this._meshCache[w])return this._meshCache[w];let k=this.painter.context,E=new a.cG,z=new a.aZ,D=this.meshSize,N=a.a5/D,j=D*D;for(let pe=0;pe<=D;pe++)for(let Se=0;Se<=D;Se++)E.emplaceBack(Se*N,pe*N,0);for(let pe=0;pe<j;pe+=D+1)for(let Se=0;Se<D;Se++)z.emplaceBack(Se+pe,D+Se+pe+1,D+Se+pe+2),z.emplaceBack(Se+pe,D+Se+pe+2,Se+pe+1);let U=E.length,X=U+(D+1),se=(D+1)*D,le=m?a.bs:0,oe=m?0:1,ce=b?a.bt:a.a5,me=b?0:1;for(let pe=0;pe<=D;pe++)E.emplaceBack(pe*N,le,oe);for(let pe=0;pe<=D;pe++)E.emplaceBack(pe*N,ce,me);for(let pe=0;pe<D;pe++)z.emplaceBack(se+pe,X+pe,X+pe+1),z.emplaceBack(se+pe,X+pe+1,se+pe+1),z.emplaceBack(0+pe,U+pe+1,U+pe),z.emplaceBack(0+pe,0+pe+1,U+pe+1);let he=E.length,ge=he+2*(D+1);for(let pe of[0,1])for(let Se=0;Se<=D;Se++)for(let De of[0,1])E.emplaceBack(pe*a.a5,Se*N,De);for(let pe=0;pe<2*D;pe+=2)z.emplaceBack(he+pe,he+pe+1,he+pe+3),z.emplaceBack(he+pe,he+pe+3,he+pe+2),z.emplaceBack(ge+pe,ge+pe+3,ge+pe+1),z.emplaceBack(ge+pe,ge+pe+2,ge+pe+3);let be=new gi(k.createVertexBuffer(E,rr.members),k.createIndexBuffer(z),a.aY.simpleSegment(0,0,E.length,z.length));return this._meshCache[w]=be,be}getMeshFrameDelta(t){return 2*Math.PI*a.bF/Math.pow(2,Math.max(t,0))/5}getMinTileElevationForLngLatZoom(t,n){var u;if(!a.cE(n,t.wrap()))return 0;let{tileID:m}=this._getOverscaledTileIDFromLngLatZoom(t,n);return(u=this.getMinMaxElevation(m).minElevation)!==null&&u!==void 0?u:0}getMinMaxElevation(t){let n=this.getTerrainData(t).tile,u={minElevation:null,maxElevation:null};return n&&n.dem&&(u.minElevation=n.dem.min*this.exaggeration,u.maxElevation=n.dem.max*this.exaggeration),u}_getOverscaledTileIDFromLngLatZoom(t,n){let u=a.ab.fromLngLat(t.wrap()),m=(1<<n)*a.a5,b=u.x*m,w=u.y*m,k=Math.floor(b/a.a5),E=Math.floor(w/a.a5);return{tileID:new a.a2(n,0,n,k,E),mercatorX:b,mercatorY:w}}}class qc{constructor(t,n,u){this._context=t,this._size=n,this._tileSize=u,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(let t of this._objects)t.texture.destroy(),t.fbo.destroy()}_createObject(t){let n=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),u=new a.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return u.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),n.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),n.colorAttachment.set(u.texture),{id:t,fbo:n,texture:u,stamp:-1,inUse:!1}}getObjectForId(t){return this._objects[t]}useObject(t){t.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((n=>t.id!==n)),this._recentlyUsed.push(t.id)}stampObject(t){t.stamp=++this._stamp}getOrCreateFreeObject(){for(let n of this._recentlyUsed)if(!this._objects[n].inUse)return this._objects[n];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");let t=this._createObject(this._objects.length);return this._objects.push(t),t}freeObject(t){t.inUse=!1}freeAllObjects(){for(let t of this._objects)this.freeObject(t)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((t=>!t.inUse))===!1}}let Gs={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class sh{constructor(t,n){this.painter=t,this.terrain=n,this.pool=new qc(t.context,30,n.tileManager.tileSize*n.qualityFactor)}destruct(){this.pool.destruct()}getTexture(t){return this.pool.getObjectForId(t.rtt[this._stacks.length-1].id).texture}prepareForRender(t,n){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.tileManager.getRenderableTiles(),this._renderableLayerIds=t._order.filter((u=>!t._layers[u].isHidden(n))),this._coordsAscending={};for(let u in t.tileManagers){this._coordsAscending[u]={};let m=t.tileManagers[u].getVisibleCoordinates(),b=t.tileManagers[u].getSource(),w=b instanceof Ur?b.terrainTileRanges:null;for(let k of m){let E=this.terrain.tileManager.getTerrainCoords(k,w);for(let z in E)this._coordsAscending[u][z]||(this._coordsAscending[u][z]=[]),this._coordsAscending[u][z].push(E[z])}}this._coordsAscendingStr={};for(let u of t._order){let m=t._layers[u],b=m.source;if(Gs[m.type]&&!this._coordsAscendingStr[b]){this._coordsAscendingStr[b]={};for(let w in this._coordsAscending[b])this._coordsAscendingStr[b][w]=this._coordsAscending[b][w].map((k=>k.key)).sort().join()}}for(let u of this._renderableTiles)for(let m in this._coordsAscendingStr){let b=this._coordsAscendingStr[m][u.tileID.key];b&&b!==u.rttCoords[m]&&(u.rtt=[])}}renderLayer(t,n){if(t.isHidden(this.painter.transform.zoom))return!1;let u=Object.assign(Object.assign({},n),{isRenderingToTexture:!0}),m=t.type,b=this.painter,w=this._renderableLayerIds[this._renderableLayerIds.length-1]===t.id;if(Gs[m]&&(this._prevType&&Gs[this._prevType]||this._stacks.push([]),this._prevType=m,this._stacks[this._stacks.length-1].push(t.id),!w))return!0;if(Gs[this._prevType]||Gs[m]&&w){this._prevType=m;let k=this._stacks.length-1,E=this._stacks[k]||[];for(let z of this._renderableTiles){if(this.pool.isFull()&&(Yu(this.painter,this.terrain,this._rttTiles,u),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(z),z.rtt[k]){let N=this.pool.getObjectForId(z.rtt[k].id);if(N.stamp===z.rtt[k].stamp){this.pool.useObject(N);continue}}let D=this.pool.getOrCreateFreeObject();this.pool.useObject(D),this.pool.stampObject(D),z.rtt[k]={id:D.id,stamp:D.stamp},b.context.bindFramebuffer.set(D.fbo.framebuffer),b.context.clear({color:a.bq.transparent,stencil:0}),b.currentStencilSource=void 0;for(let N=0;N<E.length;N++){let j=b.style._layers[E[N]],U=j.source?this._coordsAscending[j.source][z.tileID.key]:[z.tileID];b.context.viewport.set([0,0,D.fbo.width,D.fbo.height]),b._renderTileClippingMasks(j,U,!0),b.renderLayer(b,b.style.tileManagers[j.source],j,U,u),j.source&&(z.rttCoords[j.source]=this._coordsAscendingStr[j.source][z.tileID.key])}}return Yu(this.painter,this.terrain,this._rttTiles,u),this._rttTiles=[],this.pool.freeAllObjects(),Gs[m]}return!1}}let oh={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Yl=T,Vc={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Dd,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.c.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,transformConstrain:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,reduceMotion:void 0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0,experimentalZoomLevelsToOverscale:void 0},lh={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class ch{constructor(t,n,u=!1){this.mousedown=b=>{this.startMove(b,te.mousePos(this.element,b)),te.addEventListener(window,"mousemove",this.mousemove),te.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=b=>{this.move(b,te.mousePos(this.element,b))},this.mouseup=b=>{this._rotatePitchHandler.dragEnd(b),this.offTemp()},this.touchstart=b=>{b.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=te.touchPos(this.element,b.targetTouches)[0],this.startMove(b,this._startPos),te.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),te.addEventListener(window,"touchend",this.touchend))},this.touchmove=b=>{b.targetTouches.length!==1?this.reset():(this._lastPos=te.touchPos(this.element,b.targetTouches)[0],this.move(b,this._lastPos))},this.touchend=b=>{b.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=n;let m=new Ed;this._rotatePitchHandler=new xo({clickTolerance:3,move:(b,w)=>{let k=n.getBoundingClientRect(),E=new a.P((k.bottom-k.top)/2,(k.right-k.left)/2);return{bearingDelta:a.cy(new a.P(b.x,w.y),w,E),pitchDelta:u?-.5*(w.y-b.y):void 0}},moveStateManager:m,enable:!0,assignEvents:()=>{}}),this.map=t,te.addEventListener(n,"mousedown",this.mousedown),te.addEventListener(n,"touchstart",this.touchstart,{passive:!1}),te.addEventListener(n,"touchcancel",this.reset)}startMove(t,n){this._rotatePitchHandler.dragStart(t,n),te.disableDrag()}move(t,n){let u=this.map,{bearingDelta:m,pitchDelta:b}=this._rotatePitchHandler.dragMove(t,n)||{};m&&u.setBearing(u.getBearing()+m),b&&u.setPitch(u.getPitch()+b)}off(){let t=this.element;te.removeEventListener(t,"mousedown",this.mousedown),te.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),te.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),te.removeEventListener(window,"touchend",this.touchend),te.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}offTemp(){te.enableDrag(),te.removeEventListener(window,"mousemove",this.mousemove),te.removeEventListener(window,"mouseup",this.mouseup),te.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),te.removeEventListener(window,"touchend",this.touchend)}}let hs;function Wc(_,t,n,u=!1){if(u||!n.getCoveringTilesDetailsProvider().allowWorldCopies())return _?.wrap();let m=new a.V(_.lng,_.lat);if(_=new a.V(_.lng,_.lat),t){let b=new a.V(_.lng-360,_.lat),w=new a.V(_.lng+360,_.lat),k=n.locationToScreenPoint(_).distSqr(t);n.locationToScreenPoint(b).distSqr(t)<k?_=b:n.locationToScreenPoint(w).distSqr(t)<k&&(_=w)}for(;Math.abs(_.lng-n.center.lng)>180;){let b=n.locationToScreenPoint(_);if(b.x>=0&&b.y>=0&&b.x<=n.width&&b.y<=n.height)break;_.lng>n.center.lng?_.lng-=360:_.lng+=360}return _.lng!==m.lng&&n.isPointOnMapSurface(n.locationToScreenPoint(_))?_:m}let Xl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Gc(_,t,n){let u=_.classList;for(let m in Xl)u.remove(`maplibregl-${n}-anchor-${m}`);u.add(`maplibregl-${n}-anchor-${t}`)}class Kl extends a.E{constructor(t){if(super(),this._onKeyPress=n=>{let u=n.code,m=n.charCode||n.keyCode;u!=="Space"&&u!=="Enter"&&m!==32&&m!==13||this.togglePopup()},this._onMapClick=n=>{let u=n.originalEvent.target,m=this._element;this._popup&&(u===m||m.contains(u))&&this.togglePopup()},this._update=n=>{if(!this._map)return;let u=this._map.loaded()&&!this._map.isMoving();(n?.type==="terrain"||n?.type==="render"&&!u)&&this._map.once("render",this._update),this._lngLat=Wc(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let m="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?m=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(m=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let b="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?b="rotateX(0deg)":this._pitchAlignment==="map"&&(b=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||n&&n.type!=="moveend"||(this._pos=this._pos.round()),te.setTransform(this._element,`${Xl[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${b} ${m}`),ie.frameAsync(new AbortController).then((()=>{this._updateOpacity(n&&n.type==="moveend")})).catch((()=>{}))},this._onMove=n=>{if(!this._isDragging){let u=this._clickTolerance||this._map._clickTolerance;this._isDragging=n.point.dist(this._pointerdownPos)>=u}this._isDragging&&(this._pos=n.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.l("dragstart"))),this.fire(new a.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.l("dragend")),this._state="inactive"},this._addDragHandler=n=>{this._element.contains(n.originalEvent.target)&&(n.preventDefault(),this._positionDelta=n.point.sub(this._pos).add(this._offset),this._pointerdownPos=n.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._subpixelPositioning=t&&t.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&t.pitchAlignment!=="auto"?t.pitchAlignment:this._rotationAlignment,this.setOpacity(t?.opacity,t?.opacityWhenCovered),t&&t.element)this._element=t.element,this._offset=a.P.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=te.create("div");let n=te.createNS("http://www.w3.org/2000/svg","svg"),u=41,m=27;n.setAttributeNS(null,"display","block"),n.setAttributeNS(null,"height",`${u}px`),n.setAttributeNS(null,"width",`${m}px`),n.setAttributeNS(null,"viewBox",`0 0 ${m} ${u}`);let b=te.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"stroke","none"),b.setAttributeNS(null,"stroke-width","1"),b.setAttributeNS(null,"fill","none"),b.setAttributeNS(null,"fill-rule","evenodd");let w=te.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"fill-rule","nonzero");let k=te.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"transform","translate(3.0, 29.0)"),k.setAttributeNS(null,"fill","#000000");let E=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(let oe of E){let ce=te.createNS("http://www.w3.org/2000/svg","ellipse");ce.setAttributeNS(null,"opacity","0.04"),ce.setAttributeNS(null,"cx","10.5"),ce.setAttributeNS(null,"cy","5.80029008"),ce.setAttributeNS(null,"rx",oe.rx),ce.setAttributeNS(null,"ry",oe.ry),k.appendChild(ce)}let z=te.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill",this._color);let D=te.createNS("http://www.w3.org/2000/svg","path");D.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),z.appendChild(D);let N=te.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"opacity","0.25"),N.setAttributeNS(null,"fill","#000000");let j=te.createNS("http://www.w3.org/2000/svg","path");j.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),N.appendChild(j);let U=te.createNS("http://www.w3.org/2000/svg","g");U.setAttributeNS(null,"transform","translate(6.0, 7.0)"),U.setAttributeNS(null,"fill","#FFFFFF");let X=te.createNS("http://www.w3.org/2000/svg","g");X.setAttributeNS(null,"transform","translate(8.0, 8.0)");let se=te.createNS("http://www.w3.org/2000/svg","circle");se.setAttributeNS(null,"fill","#000000"),se.setAttributeNS(null,"opacity","0.25"),se.setAttributeNS(null,"cx","5.5"),se.setAttributeNS(null,"cy","5.5"),se.setAttributeNS(null,"r","5.4999962");let le=te.createNS("http://www.w3.org/2000/svg","circle");le.setAttributeNS(null,"fill","#FFFFFF"),le.setAttributeNS(null,"cx","5.5"),le.setAttributeNS(null,"cy","5.5"),le.setAttributeNS(null,"r","5.4999962"),X.appendChild(se),X.appendChild(le),w.appendChild(k),w.appendChild(z),w.appendChild(N),w.appendChild(U),w.appendChild(X),n.appendChild(w),n.setAttributeNS(null,"height",u*this._scale+"px"),n.setAttributeNS(null,"width",m*this._scale+"px"),this._element.appendChild(n),this._offset=a.P.convert(t&&t.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(n=>{n.preventDefault()})),this._element.addEventListener("mousedown",(n=>{n.preventDefault()})),Gc(this._element,this._anchor,"marker"),t&&t.className)for(let n of t.className.split(" "))this._element.classList.add(n);this._popup=null}addTo(t){return this.remove(),this._map=t,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",t._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),t.on("terrain",this._update),t.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),te.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=a.V.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){let m=Math.abs(13.5)/Math.SQRT2;t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(38.1-13.5+m)],"bottom-right":[-m,-1*(38.1-13.5+m)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=t,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(t){return this._subpixelPositioning=t,this}getPopup(){return this._popup}togglePopup(){let t=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:t?(t.isOpen()?t.remove():(t.setLngLat(this._lngLat),t.addTo(this._map)),this):this}_updateOpacity(t=!1){var n,u;let m=(n=this._map)===null||n===void 0?void 0:n.terrain,b=this._map.transform.isLocationOccluded(this._lngLat);if(!m||b){let U=b?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==U&&(this._element.style.opacity=U))}if(t)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}let w=this._map,k=w.terrain.depthAtPoint(this._pos),E=w.terrain.getElevationForLngLat(this._lngLat);if(w.transform.lngLatToCameraDepth(this._lngLat,E)-k<.006)return void(this._element.style.opacity=this._opacity);let z=-this._offset.y/w.transform.pixelsPerMeter,D=Math.sin(w.getPitch()*Math.PI/180)*z,N=w.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),j=w.transform.lngLatToCameraDepth(this._lngLat,E+D)-N>.006;!((u=this._popup)===null||u===void 0)&&u.isOpen()&&j&&this._popup.remove(),this._element.style.opacity=j?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(t){return this._offset=a.P.convert(t),this._update(),this}addClassName(t){this._element.classList.add(t)}removeClassName(t){this._element.classList.remove(t)}toggleClassName(t){return this._element.classList.toggle(t)}setDraggable(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t&&t!=="auto"?t:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(t,n){return(this._opacity===void 0||t===void 0&&n===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),t!==void 0&&(this._opacity=t),n!==void 0&&(this._opacityWhenCovered=n),this._map&&this._updateOpacity(!0),this}}let uh={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},To=0,Co=!1,hh={maxWidth:100,unit:"metric"};function Jl(_,t,n){let u=n&&n.maxWidth||100,m=_._container.clientHeight/2,b=_._container.clientWidth/2,w=_.unproject([b-u/2,m]),k=_.unproject([b+u/2,m]),E=Math.round(_.project(k).x-_.project(w).x),z=Math.min(u,E,_._container.clientWidth),D=w.distanceTo(k);if(n&&n.unit==="imperial"){let N=3.2808*D;N>5280?ko(t,z,N/5280,_._getUIString("ScaleControl.Miles")):ko(t,z,N,_._getUIString("ScaleControl.Feet"))}else n&&n.unit==="nautical"?ko(t,z,D/1852,_._getUIString("ScaleControl.NauticalMiles")):D>=1e3?ko(t,z,D/1e3,_._getUIString("ScaleControl.Kilometers")):ko(t,z,D,_._getUIString("ScaleControl.Meters"))}function ko(_,t,n,u){let m=(function(b){let w=Math.pow(10,`${Math.floor(b)}`.length-1),k=b/w;return k=k>=10?10:k>=5?5:k>=3?3:k>=2?2:k>=1?1:(function(E){let z=Math.pow(10,Math.ceil(-Math.log(E)/Math.LN10));return Math.round(E*z)/z})(k),w*k})(n);_.style.width=t*(m/n)+"px",_.innerHTML=`${m}&nbsp;${u}`}let dh={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},ph=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Uc(_){if(_){if(typeof _=="number"){let t=Math.round(Math.abs(_)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,_),"top-left":new a.P(t,t),"top-right":new a.P(-t,t),bottom:new a.P(0,-_),"bottom-left":new a.P(t,-t),"bottom-right":new a.P(-t,-t),left:new a.P(_,0),right:new a.P(-_,0)}}if(_ instanceof a.P||Array.isArray(_)){let t=a.P.convert(_);return{center:t,top:t,"top-left":t,"top-right":t,bottom:t,"bottom-left":t,"bottom-right":t,left:t,right:t}}return{center:a.P.convert(_.center||[0,0]),top:a.P.convert(_.top||[0,0]),"top-left":a.P.convert(_["top-left"]||[0,0]),"top-right":a.P.convert(_["top-right"]||[0,0]),bottom:a.P.convert(_.bottom||[0,0]),"bottom-left":a.P.convert(_["bottom-left"]||[0,0]),"bottom-right":a.P.convert(_["bottom-right"]||[0,0]),left:a.P.convert(_.left||[0,0]),right:a.P.convert(_.right||[0,0])}}return Uc(new a.P(0,0))}let fh=T;f.AJAXError=a.cJ,f.Event=a.l,f.Evented=a.E,f.LngLat=a.V,f.MercatorCoordinate=a.ab,f.Point=a.P,f.addProtocol=a.cK,f.config=a.c,f.removeProtocol=a.cL,f.AttributionControl=Rd,f.BoxZoomHandler=Qu,f.CanvasSource=Y,f.CooperativeGesturesHandler=ah,f.DoubleClickZoomHandler=Ld,f.DragPanHandler=gt,f.DragRotateHandler=wt,f.EdgeInsets=Pa,f.FullscreenControl=class extends a.E{constructor(_={}){super(),this._onFullscreenChange=()=>{var t;let n=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((t=n?.shadowRoot)===null||t===void 0)&&t.fullscreenElement;)n=n.shadowRoot.fullscreenElement;n===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,_&&_.container&&(_.container instanceof HTMLElement?this._container=_.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=te.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){te.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){let _=this._fullscreenButton=te.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);te.create("span","maplibregl-ctrl-icon",_).setAttribute("aria-hidden","true"),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){let _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.title=_}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},f.GeoJSONSource=bs,f.GeolocateControl=class extends a.E{constructor(_){super(),this._onSuccess=t=>{if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new a.l("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(t),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.l("geolocate",t)),this._finish()}},this._updateCamera=t=>{let n=new a.V(t.coords.longitude,t.coords.latitude),u=t.coords.accuracy,m=this._map.getBearing(),b=a.e({bearing:m},this.options.fitBoundsOptions),w=Ei.fromLngLat(n,u);this._map.fitBounds(w,b,{geolocateSource:!0})},this._updateMarker=t=>{if(t){let n=new a.V(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=t.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=t=>{if(this._map){if(t.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;let n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(t.code===3&&Co)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.l("error",t)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this._geolocateButton=te.create("button","maplibregl-ctrl-geolocate",this._container),te.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=t=>{if(this._map){if(t===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");let n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}else{let n=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=te.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Kl({element:this._dotElement}),this._circleElement=te.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Kl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(n=>{let u=n?.[0]instanceof ResizeObserverEntry;n.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.l("trackuserlocationend")),this.fire(new a.l("userlocationlostfocus")))}))}},this.options=a.e({},uh,_)}onAdd(_){return this._map=_,this._container=te.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return a._(this,arguments,void 0,(function*(t=!1){if(hs!==void 0&&!t)return hs;if(window.navigator.permissions===void 0)return hs=!!window.navigator.geolocation,hs;try{hs=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{hs=!!window.navigator.geolocation}return hs}))})().then((t=>this._finishSetupUI(t))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),te.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,To=0,Co=!1}_isOutOfMapMaxBounds(_){let t=this._map.getMaxBounds(),n=_.coords;return t&&(n.longitude<t.getWest()||n.longitude>t.getEast()||n.latitude<t.getSouth()||n.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){let _=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&_))return;let t=this._map.project(_),n=this._map.unproject([t.x+100,t.y]),u=_.distanceTo(n)/100,m=2*this._accuracy/u;this._circleElement.style.width=`${m.toFixed(2)}px`,this._circleElement.style.height=`${m.toFixed(2)}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":To--,Co=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.l("trackuserlocationstart")),this.fire(new a.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let _;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),To++,To>1?(_={maximumAge:6e5,timeout:0},Co=!0):(_=this.options.positionOptions,Co=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,_)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},f.GlobeControl=class{constructor(){this._toggleProjection=()=>{var _;let t=(_=this._map.getProjection())===null||_===void 0?void 0:_.type;this._map.setProjection(t!=="mercator"&&t?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var _;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((_=this._map.getProjection())===null||_===void 0?void 0:_.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(_){return this._map=_,this._container=te.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=te.create("button","maplibregl-ctrl-globe",this._container),te.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){te.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},f.Hash=Nl,f.ImageSource=Ur,f.KeyboardHandler=$l,f.LngLatBounds=Ei,f.LogoControl=ul,f.Map=class extends Vf{constructor(_){var t,n;a.cH.mark(a.cI.create);let u=Object.assign(Object.assign(Object.assign({},Vc),_),{canvasContextAttributes:Object.assign(Object.assign({},Vc.canvasContextAttributes),_.canvasContextAttributes)});if(u.minZoom!=null&&u.maxZoom!=null&&u.minZoom>u.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(u.minPitch!=null&&u.maxPitch!=null&&u.minPitch>u.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(u.minPitch!=null&&u.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(u.maxPitch!=null&&u.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");let m=new Ea,b=new Zt;if(u.minZoom!==void 0&&m.setMinZoom(u.minZoom),u.maxZoom!==void 0&&m.setMaxZoom(u.maxZoom),u.minPitch!==void 0&&m.setMinPitch(u.minPitch),u.maxPitch!==void 0&&m.setMaxPitch(u.maxPitch),u.renderWorldCopies!==void 0&&m.setRenderWorldCopies(u.renderWorldCopies),u.transformConstrain!==null&&m.setConstrainOverride(u.transformConstrain),super(m,b,{bearingSnap:u.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Gi,this._controls=[],this._mapId=a.ah(),this._lostContextStyle={style:null,images:null},this._contextLost=k=>{k.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.painter.destroy();for(let E of Object.values(this.style._layers))if(E.type==="custom"&&console.warn(`Custom layer with id '${E.id}' cannot be restored after WebGL context loss. You will need to re-add it manually after context restoration.`),E._listeners)for(let[z]of Object.entries(E._listeners))console.warn(`Custom layer with id '${E.id}' had event listeners for event '${z}' which cannot be restored after WebGL context loss. You will need to re-add them manually after context restoration.`);this._lostContextStyle=this._getStyleAndImages(),this.style.destroy(),this.style=null,this.fire(new a.l("webglcontextlost",{originalEvent:k}))},this._contextRestored=k=>{this._lostContextStyle.style&&this.setStyle(this._lostContextStyle.style,{diff:!1}),this._lostContextStyle.images&&(this.style.imageManager.images=this._lostContextStyle.images),this._setupPainter(),this.resize(),this._update(),this.fire(new a.l("webglcontextrestored",{originalEvent:k}))},this._onMapScroll=k=>{if(k.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=u.interactive,this._maxTileCacheSize=u.maxTileCacheSize,this._maxTileCacheZoomLevels=u.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},u.canvasContextAttributes),this._trackResize=u.trackResize===!0,this._bearingSnap=u.bearingSnap,this._centerClampedToGround=u.centerClampedToGround,this._refreshExpiredTiles=u.refreshExpiredTiles===!0,this._fadeDuration=u.fadeDuration,this._crossSourceCollisions=u.crossSourceCollisions===!0,this._collectResourceTiming=u.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},oh),u.locale),this._clickTolerance=u.clickTolerance,this._overridePixelRatio=u.pixelRatio,this._maxCanvasSize=u.maxCanvasSize,this._zoomLevelsToOverscale=u.experimentalZoomLevelsToOverscale,this.transformCameraUpdate=u.transformCameraUpdate,this.transformConstrain=u.transformConstrain,this.cancelPendingTileRequestsWhileZooming=u.cancelPendingTileRequestsWhileZooming===!0,u.reduceMotion!==void 0&&(ie.prefersReducedMotion=u.reduceMotion),this._imageQueueHandle=Vt.addThrottleControl((()=>this.isMoving())),this._requestManager=new Bt(u.transformRequest),typeof u.container=="string"){if(this._container=document.getElementById(u.container),!this._container)throw new Error(`Container '${u.container}' not found.`)}else{if(!(u.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=u.container}if(u.maxBounds&&this.setMaxBounds(u.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let k=!1,E=Ku((z=>{this._trackResize&&!this._removed&&(this.resize(z),this.redraw())}),50);this._resizeObserver=new ResizeObserver((z=>{k?E(z):k=!0})),this._resizeObserver.observe(this._container)}this.handlers=new Od(this,u),this._hash=u.hash&&new Nl(typeof u.hash=="string"&&u.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:u.center,elevation:u.elevation,zoom:u.zoom,bearing:u.bearing,pitch:u.pitch,roll:u.roll}),u.bounds&&(this.resize(),this.fitBounds(u.bounds,a.e({},u.fitBoundsOptions,{duration:0}))));let w=typeof u.style=="string"||((n=(t=u.style)===null||t===void 0?void 0:t.projection)===null||n===void 0?void 0:n.type)!=="globe";this.resize(null,w),this._localIdeographFontFamily=u.localIdeographFontFamily,this._validateStyle=u.validateStyle,u.style&&this.setStyle(u.style,{localIdeographFontFamily:u.localIdeographFontFamily}),u.attributionControl&&this.addControl(new Rd(typeof u.attributionControl=="boolean"?void 0:u.attributionControl)),u.maplibreLogo&&this.addControl(new ul,u.logoPosition),this.on("style.load",(()=>{if(w||this._resizeTransform(),this.transform.unmodified){let k=a.U(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(k)}})),this.on("data",(k=>{this._update(k.dataType==="style"),this.fire(new a.l(`${k.dataType}data`,k))})),this.on("dataloading",(k=>{this.fire(new a.l(`${k.dataType}dataloading`,k))})),this.on("dataabort",(k=>{this.fire(new a.l("sourcedataabort",k))}))}_getMapId(){return this._mapId}setGlobalStateProperty(_,t){return this.style.setGlobalStateProperty(_,t),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(_,t){if(t===void 0&&(t=_.getDefaultPosition?_.getDefaultPosition():"top-right"),!_||!_.onAdd)return this.fire(new a.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));let n=_.onAdd(this);this._controls.push(_);let u=this._controlPositions[t];return t.indexOf("bottom")!==-1?u.insertBefore(n,u.firstChild):u.appendChild(n),this}removeControl(_){if(!_||!_.onRemove)return this.fire(new a.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));let t=this._controls.indexOf(_);return t>-1&&this._controls.splice(t,1),_.onRemove(this),this}hasControl(_){return this._controls.indexOf(_)>-1}coveringTiles(_){return Ni(this.transform,_)}calculateCameraOptionsFromTo(_,t,n,u){return u==null&&this.terrain&&(u=this.terrain.getElevationForLngLat(n)),super.calculateCameraOptionsFromTo(_,t,n,u)}resize(_,t=!0){let[n,u]=this._containerDimensions(),m=this._getClampedPixelRatio(n,u);if(this._resizeCanvas(n,u,m),this.painter.resize(n,u,m),this.painter.overLimit()){let w=this.painter.context.gl;this._maxCanvasSize=[w.drawingBufferWidth,w.drawingBufferHeight];let k=this._getClampedPixelRatio(n,u);this._resizeCanvas(n,u,k),this.painter.resize(n,u,k)}this._resizeTransform(t);let b=!this._moving;return b&&(this.stop(),this.fire(new a.l("movestart",_)).fire(new a.l("move",_))),this.fire(new a.l("resize",_)),b&&this.fire(new a.l("moveend",_)),this}_resizeTransform(_=!0){var t;let[n,u]=this._containerDimensions();this.transform.resize(n,u,_),(t=this._requestedCameraState)===null||t===void 0||t.resize(n,u,_)}_getClampedPixelRatio(_,t){let{0:n,1:u}=this._maxCanvasSize,m=this.getPixelRatio(),b=_*m,w=t*m;return Math.min(b>n?n/b:1,w>u?u/w:1)*m}getPixelRatio(){var _;return(_=this._overridePixelRatio)!==null&&_!==void 0?_:devicePixelRatio}setPixelRatio(_){this._overridePixelRatio=_,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(_){return this.transform.setMaxBounds(Ei.convert(_)),this._update()}setMinZoom(_){if((_=_??-2)>=-2&&_<=this.transform.maxZoom)return this.transform.setMinZoom(_),this._update(),this.getZoom()<_&&this.setZoom(_),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_){if((_=_??22)>=this.transform.minZoom)return this.transform.setMaxZoom(_),this._update(),this.getZoom()>_&&this.setZoom(_),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_){if((_=_??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(_>=0&&_<=this.transform.maxPitch)return this.transform.setMinPitch(_),this._update(),this.getPitch()<_&&this.setPitch(_),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_){if((_=_??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(_>=this.transform.minPitch)return this.transform.setMaxPitch(_),this._update(),this.getPitch()>_&&this.setPitch(_),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_){return this.transform.setRenderWorldCopies(_),this._update()}setTransformConstrain(_){return this.transform.setConstrainOverride(_),this._update()}project(_){return this.transform.locationToScreenPoint(a.V.convert(_),this.style&&this.terrain)}unproject(_){return this.transform.screenPointToLocation(a.P.convert(_),this.terrain)}isMoving(){var _;return this._moving||((_=this.handlers)===null||_===void 0?void 0:_.isMoving())}isZooming(){var _;return this._zooming||((_=this.handlers)===null||_===void 0?void 0:_.isZooming())}isRotating(){var _;return this._rotating||((_=this.handlers)===null||_===void 0?void 0:_.isRotating())}_createDelegatedListener(_,t,n){if(_==="mouseenter"||_==="mouseover"){let u=!1;return{layers:t,listener:n,delegates:{mousemove:b=>{let w=t.filter((E=>this.getLayer(E))),k=w.length!==0?this.queryRenderedFeatures(b.point,{layers:w}):[];k.length?u||(u=!0,n.call(this,new Dn(_,this,b.originalEvent,{features:k}))):u=!1},mouseout:()=>{u=!1}}}}if(_==="mouseleave"||_==="mouseout"){let u=!1;return{layers:t,listener:n,delegates:{mousemove:w=>{let k=t.filter((E=>this.getLayer(E)));(k.length!==0?this.queryRenderedFeatures(w.point,{layers:k}):[]).length?u=!0:u&&(u=!1,n.call(this,new Dn(_,this,w.originalEvent)))},mouseout:w=>{u&&(u=!1,n.call(this,new Dn(_,this,w.originalEvent)))}}}}{let u=m=>{let b=t.filter((k=>this.getLayer(k))),w=b.length!==0?this.queryRenderedFeatures(m.point,{layers:b}):[];w.length&&(m.features=w,n.call(this,m),delete m.features)};return{layers:t,listener:n,delegates:{[_]:u}}}}_saveDelegatedListener(_,t){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_]=this._delegatedListeners[_]||[],this._delegatedListeners[_].push(t)}_removeDelegatedListener(_,t,n){if(!this._delegatedListeners||!this._delegatedListeners[_])return;let u=this._delegatedListeners[_];for(let m=0;m<u.length;m++){let b=u[m];if(b.listener===n&&b.layers.length===t.length&&b.layers.every((w=>t.includes(w)))){for(let w in b.delegates)this.off(w,b.delegates[w]);return void u.splice(m,1)}}}on(_,t,n){if(n===void 0)return super.on(_,t);let u=typeof t=="string"?[t]:t,m=this._createDelegatedListener(_,u,n);this._saveDelegatedListener(_,m);for(let b in m.delegates)this.on(b,m.delegates[b]);return{unsubscribe:()=>{this._removeDelegatedListener(_,u,n)}}}once(_,t,n){if(n===void 0)return super.once(_,t);let u=typeof t=="string"?[t]:t,m=this._createDelegatedListener(_,u,n);for(let b in m.delegates){let w=m.delegates[b];m.delegates[b]=(...k)=>{this._removeDelegatedListener(_,u,n),w(...k)}}this._saveDelegatedListener(_,m);for(let b in m.delegates)this.once(b,m.delegates[b]);return this}off(_,t,n){return n===void 0?super.off(_,t):(this._removeDelegatedListener(_,typeof t=="string"?[t]:t,n),this)}queryRenderedFeatures(_,t){if(!this.style)return[];let n,u=_ instanceof a.P||Array.isArray(_),m=u?_:[[0,0],[this.transform.width,this.transform.height]];if(t=t||(u?{}:_)||{},m instanceof a.P||typeof m[0]=="number")n=[a.P.convert(m)];else{let b=a.P.convert(m[0]),w=a.P.convert(m[1]);n=[b,new a.P(w.x,b.y),w,new a.P(b.x,w.y),b]}return this.style.queryRenderedFeatures(n,t,this.transform)}querySourceFeatures(_,t){return this.style.querySourceFeatures(_,t)}setStyle(_,t){return(t=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},t)).diff!==!1&&t.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&_?(this._diffStyle(_,t),this):(this._localIdeographFontFamily=t.localIdeographFontFamily,this._updateStyle(_,t))}setTransformRequest(_){return this._requestManager.setTransformRequest(_),this}_getUIString(_){let t=this._locale[_];if(t==null)throw new Error(`Missing UI string '${_}'`);return t}_updateStyle(_,t){var n,u;if(t.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(_,t)));let m=this.style&&t.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!_)),_?(this.style=new ua(this,t||{}),this.style.setEventedParent(this,{style:this.style}),typeof _=="string"?this.style.loadURL(_,t,m):this.style.loadJSON(_,t,m),this):((u=(n=this.style)===null||n===void 0?void 0:n.projection)===null||u===void 0||u.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new ua(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(_,t){if(typeof _=="string"){let n=this._requestManager.transformRequest(_,"Style");a.j(n,new AbortController).then((u=>{this._updateDiff(u.data,t)})).catch((u=>{u&&this.fire(new a.k(u))}))}else typeof _=="object"&&this._updateDiff(_,t)}_updateDiff(_,t){try{this.style.setState(_,t)&&this._update(!0)}catch(n){a.w(`Unable to perform style diff: ${n.message||n.error||n}.  Rebuilding the style from scratch.`),this._updateStyle(_,t)}}getStyle(){if(this.style)return this.style.serialize()}_getStyleAndImages(){return this.style?{style:this.style.serialize(),images:this.style.imageManager.cloneImages()}:{style:null,images:{}}}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(_,t){return this._lazyInitEmptyStyle(),this.style.addSource(_,t),this._update(!0)}isSourceLoaded(_){let t=this.style&&this.style.tileManagers[_];if(t!==void 0)return t.loaded();this.fire(new a.k(new Error(`There is no tile manager with ID '${_}'`)))}setTerrain(_){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),_){let t=this.style.tileManagers[_.source];if(!t)throw new Error(`cannot load terrain, because there exists no source with ID: ${_.source}`);this.terrain===null&&t.reload();for(let n in this.style._layers){let u=this.style._layers[n];u.type==="hillshade"&&u.source===_.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),u.type==="color-relief"&&u.source===_.source&&a.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Hl(this.painter,t,_),this.painter.renderToTexture=new sh(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=n=>{var u;n.dataType==="style"?this.terrain.tileManager.freeRtt():n.dataType==="source"&&n.tile&&(n.sourceId!==_.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((u=n.source)===null||u===void 0?void 0:u.type)==="image"?this.terrain.tileManager.freeRtt():this.terrain.tileManager.freeRtt(n.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.tileManager.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new a.l("terrain",{terrain:_})),this}getTerrain(){var _,t;return(t=(_=this.terrain)===null||_===void 0?void 0:_.options)!==null&&t!==void 0?t:null}areTilesLoaded(){let _=this.style&&this.style.tileManagers;for(let t of Object.values(_))if(!t.areTilesLoaded())return!1;return!0}removeSource(_){return this.style.removeSource(_),this._update(!0)}getSource(_){return this.style.getSource(_)}setSourceTileLodParams(_,t,n){if(n){let u=this.getSource(n);if(!u)throw new Error(`There is no source with ID "${n}", cannot set LOD parameters`);u.calculateTileZoom=hi(Math.max(1,_),Math.max(1,t))}else for(let u in this.style.tileManagers)this.style.tileManagers[u].getSource().calculateTileZoom=hi(Math.max(1,_),Math.max(1,t));return this._update(!0),this}refreshTiles(_,t){let n=this.style.tileManagers[_];if(!n)throw new Error(`There is no tile manager with ID "${_}", cannot refresh tile`);t===void 0?n.reload(!0):n.refreshTiles(t.map((u=>new a.ae(u.z,u.x,u.y))))}addImage(_,t,n={}){let{pixelRatio:u=1,sdf:m=!1,stretchX:b,stretchY:w,content:k,textFitWidth:E,textFitHeight:z}=n;if(this._lazyInitEmptyStyle(),!(t instanceof HTMLImageElement||a.b(t))){if(t.width===void 0||t.height===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{let{width:D,height:N,data:j}=t,U=t;return this.style.addImage(_,{data:new a.R({width:D,height:N},new Uint8Array(j)),pixelRatio:u,stretchX:b,stretchY:w,content:k,textFitWidth:E,textFitHeight:z,sdf:m,version:0,userImage:U}),U.onAdd&&U.onAdd(this,_),this}}{let{width:D,height:N,data:j}=ie.getImageData(t);this.style.addImage(_,{data:new a.R({width:D,height:N},j),pixelRatio:u,stretchX:b,stretchY:w,content:k,textFitWidth:E,textFitHeight:z,sdf:m,version:0})}}updateImage(_,t){let n=this.style.getImage(_);if(!n)return this.fire(new a.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));let u=t instanceof HTMLImageElement||a.b(t)?ie.getImageData(t):t,{width:m,height:b,data:w}=u;if(m===void 0||b===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(m!==n.data.width||b!==n.data.height)return this.fire(new a.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));let k=!(t instanceof HTMLImageElement||a.b(t));return n.data.replace(w,k),this.style.updateImage(_,n),this}getImage(_){return this.style.getImage(_)}hasImage(_){return _?!!this.style.getImage(_):(this.fire(new a.k(new Error("Missing required image id"))),!1)}removeImage(_){this.style.removeImage(_)}loadImage(_){return Vt.getImage(this._requestManager.transformRequest(_,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(_,t){return this._lazyInitEmptyStyle(),this.style.addLayer(_,t),this._update(!0)}moveLayer(_,t){return this.style.moveLayer(_,t),this._update(!0)}removeLayer(_){return this.style.removeLayer(_),this._update(!0)}getLayer(_){return this.style.getLayer(_)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(_,t,n){return this.style.setLayerZoomRange(_,t,n),this._update(!0)}setFilter(_,t,n={}){return this.style.setFilter(_,t,n),this._update(!0)}getFilter(_){return this.style.getFilter(_)}setPaintProperty(_,t,n,u={}){return this.style.setPaintProperty(_,t,n,u),this._update(!0)}getPaintProperty(_,t){return this.style.getPaintProperty(_,t)}setLayoutProperty(_,t,n,u={}){return this.style.setLayoutProperty(_,t,n,u),this._update(!0)}getLayoutProperty(_,t){return this.style.getLayoutProperty(_,t)}setGlyphs(_,t={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(_,t),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(_,t,n={}){return this._lazyInitEmptyStyle(),this.style.addSprite(_,t,n,(u=>{u||this._update(!0)})),this}removeSprite(_){return this._lazyInitEmptyStyle(),this.style.removeSprite(_),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(_,t={}){return this._lazyInitEmptyStyle(),this.style.setSprite(_,t,(n=>{n||this._update(!0)})),this}setLight(_,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(_,t),this._update(!0)}getLight(){return this.style.getLight()}setSky(_,t={}){return this._lazyInitEmptyStyle(),this.style.setSky(_,t),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(_,t){return this.style.setFeatureState(_,t),this._update()}removeFeatureState(_,t){return this.style.removeFeatureState(_,t),this._update()}getFeatureState(_){return this.style.getFeatureState(_)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let _=0,t=0;return this._container&&(_=this._container.clientWidth||400,t=this._container.clientHeight||300),[_,t]}_setupContainer(){let _=this._container;_.classList.add("maplibregl-map");let t=this._canvasContainer=te.create("div","maplibregl-canvas-container",_);this._interactive&&t.classList.add("maplibregl-interactive"),this._canvas=te.create("canvas","maplibregl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");let n=this._containerDimensions(),u=this._getClampedPixelRatio(n[0],n[1]);this._resizeCanvas(n[0],n[1],u);let m=this._controlContainer=te.create("div","maplibregl-control-container",_),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((w=>{b[w]=te.create("div",`maplibregl-ctrl-${w} `,m)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(_,t,n){this._canvas.width=Math.floor(n*_),this._canvas.height=Math.floor(n*t),this._canvas.style.width=`${_}px`,this._canvas.style.height=`${t}px`}_setupPainter(){let _=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0}),t=null;this._canvas.addEventListener("webglcontextcreationerror",(u=>{t={requestedAttributes:_},u&&(t.statusMessage=u.statusMessage,t.type=u.type)}),{once:!0});let n=null;if(n=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,_):this._canvas.getContext("webgl2",_)||this._canvas.getContext("webgl",_),!n){let u="Failed to initialize WebGL";throw t?(t.message=u,new Error(JSON.stringify(t))):new Error(u)}this.painter=new Td(n,this.transform),Te.testSupport(n)}migrateProjection(_,t){super.migrateProjection(_,t),this.painter.transform=_,this.fire(new a.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(_){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||_,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_){return this._update(),this._renderTaskQueue.add(_)}_cancelRenderFrame(_){this._renderTaskQueue.remove(_)}_render(_){var t,n,u,m,b;let w=this._idleTriggered?this._fadeDuration:0,k=((t=this.style.projection)===null||t===void 0?void 0:t.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(_),this._removed)return;let E=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;let N=this.transform.zoom,j=ae();this.style.zoomHistory.update(N,j);let U=new a.H(N,{now:j,fadeDuration:w,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),X=U.crossFadingFactor();X===1&&X===this._crossFadingFactor||(E=!0,this._crossFadingFactor=X),this.style.update(U)}let z=((n=this.style.projection)===null||n===void 0?void 0:n.transitionState)>0!==k;(u=this.style.projection)===null||u===void 0||u.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((m=this.style.projection)===null||m===void 0?void 0:m.transitionState,(b=this.style.projection)===null||b===void 0?void 0:b.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||z)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.tileManager.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,w,this._crossSourceCollisions,z),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:w,showPadding:this.showPadding}),this.fire(new a.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.cH.mark(a.cI.load),this.fire(new a.l("load"))),this.style&&(this.style.hasTransitions()||E)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();let D=this._sourcesDirty||this._styleDirty||this._placementDirty;return D||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.l("idle")),!this._loaded||this._fullyLoaded||D||(this._fullyLoaded=!0,a.cH.mark(a.cI.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var _;this._hash&&this._hash.remove();for(let n of this._controls)n.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),Vt.removeThrottleControl(this._imageQueueHandle),(_=this._resizeObserver)===null||_===void 0||_.disconnect();let t=this.painter.context.gl.getExtension("WEBGL_lose_context");t?.loseContext&&t.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),te.remove(this._canvasContainer),te.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),a.cH.clearMetrics(),this._removed=!0,this.fire(new a.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,ie.frame(this._frameRequest,(_=>{a.cH.frame(_),this._frameRequest=null;try{this._render(_)}catch(t){if(!a.Z(t)&&!(function(n){return n.message===I})(t))throw t}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_){this._showPadding!==_&&(this._showPadding=_,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,_?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())}get repaint(){return!!this._repaint}set repaint(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_){this._vertices=_,this._update()}get version(){return Yl}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(_){return this._lazyInitEmptyStyle(),this.style.setProjection(_),this._update(!0)}},f.MapMouseEvent=Dn,f.MapTouchEvent=Wl,f.MapWheelEvent=Ju,f.Marker=Kl,f.NavigationControl=class{constructor(_){this._updateZoomButtons=()=>{let t=this._map.getZoom(),n=t===this._map.getMaxZoom(),u=t===this._map.getMinZoom();this._zoomInButton.disabled=n,this._zoomOutButton.disabled=u,this._zoomInButton.setAttribute("aria-disabled",n.toString()),this._zoomOutButton.setAttribute("aria-disabled",u.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(t,n)=>{let u=this._map._getUIString(`NavigationControl.${n}`);t.title=u,t.setAttribute("aria-label",u)},this.options=a.e({},lh,_),this._container=te.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(t=>this._map.zoomIn({},{originalEvent:t}))),te.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(t=>this._map.zoomOut({},{originalEvent:t}))),te.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(t=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})})),this._compassIcon=te.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ch(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){te.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(_,t){let n=te.create("button",_,this._container);return n.type="button",n.addEventListener("click",t),n}},f.Popup=class extends a.E{constructor(_){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&te.remove(this._content),this._container&&(te.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.l("close"))),this),this._onMouseUp=t=>{this._update(t.point)},this._onMouseMove=t=>{this._update(t.point)},this._onDrag=t=>{this._update(t.point)},this._update=t=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=te.create("div","maplibregl-popup",this._map.getContainer()),this._tip=te.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(let w of this.options.className.split(" "))this._container.classList.add(w);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Wc(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!t)return;let n=this._flatPos=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&t?t:this._map.transform.locationToScreenPoint(this._lngLat));let u=this.options.anchor,m=Uc(this.options.offset);if(!u){let w=this._container.offsetWidth,k=this._container.offsetHeight,E;E=n.y+m.bottom.y<k?["top"]:n.y>this._map.transform.height-k?["bottom"]:[],n.x<w/2?E.push("left"):n.x>this._map.transform.width-w/2&&E.push("right"),u=E.length===0?"bottom":E.join("-")}let b=n.add(m[u]);this.options.subpixelPositioning||(b=b.round()),te.setTransform(this._container,`${Xl[u]} translate(${b.x}px,${b.y}px)`),Gc(this._container,u,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(dh),_)}addTo(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(_){return this._lngLat=a.V.convert(_),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(_){return this.setDOMContent(document.createTextNode(_))}setHTML(_){let t=document.createDocumentFragment(),n=document.createElement("body"),u;for(n.innerHTML=_;u=n.firstChild,u;)t.appendChild(u);return this.setDOMContent(t)}getMaxWidth(){var _;return(_=this._container)===null||_===void 0?void 0:_.style.maxWidth}setMaxWidth(_){return this.options.maxWidth=_,this._update(),this}setDOMContent(_){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=te.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(_),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(_){return this._container&&this._container.classList.add(_),this}removeClassName(_){return this._container&&this._container.classList.remove(_),this}setOffset(_){return this.options.offset=_,this._update(),this}toggleClassName(_){if(this._container)return this._container.classList.toggle(_)}setSubpixelPositioning(_){this.options.subpixelPositioning=_}_createCloseButton(){this.options.closeButton&&(this._closeButton=te.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;let _=this._container.querySelector(ph);_&&_.focus()}},f.RasterDEMTileSource=Wn,f.RasterTileSource=$a,f.ScaleControl=class{constructor(_){this._onMove=()=>{Jl(this._map,this._container,this.options)},this.setUnit=t=>{this.options.unit=t,Jl(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},hh),_)}getDefaultPosition(){return"bottom-left"}onAdd(_){return this._map=_,this._container=te.create("div","maplibregl-ctrl maplibregl-ctrl-scale",_.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){te.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},f.ScrollZoomHandler=nh,f.Style=ua,f.TerrainControl=class{constructor(_){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=_}onAdd(_){return this._map=_,this._container=te.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=te.create("button","maplibregl-ctrl-terrain",this._container),te.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){te.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},f.TwoFingersTouchPitchHandler=Id,f.TwoFingersTouchRotateHandler=us,f.TwoFingersTouchZoomHandler=Ad,f.TwoFingersTouchZoomRotateHandler=cl,f.VectorTileSource=Za,f.VideoSource=ke,f.addSourceType=(_,t)=>a._(void 0,void 0,void 0,(function*(){if(re(_))throw new Error(`A source type called "${_}" already exists.`);((n,u)=>{H[n]=u})(_,t)})),f.clearPrewarmedResources=function(){let _=gr;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(Ci),gr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},f.createTileMesh=Yo,f.getMaxParallelImageRequests=function(){return a.c.MAX_PARALLEL_IMAGE_REQUESTS},f.getRTLTextPluginStatus=function(){return Ce().getRTLTextPluginStatus()},f.getVersion=function(){return fh},f.getWorkerCount=function(){return qt.workerCount},f.getWorkerUrl=function(){return a.c.WORKER_URL},f.importScriptInWorkers=function(_){return Ga().broadcast("IS",_)},f.isTimeFrozen=function(){return $.isFrozen()},f.now=ae,f.prewarm=function(){Sa().acquire(Ci)},f.restoreNow=function(){$.restoreNow()},f.setMaxParallelImageRequests=function(_){a.c.MAX_PARALLEL_IMAGE_REQUESTS=_},f.setNow=function(_){$.setNow(_)},f.setRTLTextPlugin=function(_,t){return Ce().setRTLTextPlugin(_,t)},f.setWorkerCount=function(_){qt.workerCount=_},f.setWorkerUrl=function(_){a.c.WORKER_URL=_}}));var d=s;return d}))});var VP=Ee((b_,qP)=>{(function(s,o){typeof define=="function"&&define.amd?define(["leaflet","maplibre-gl"],o):typeof b_=="object"?qP.exports=o(m_(),NP()):s.returnExports=o(s.L,s.maplibregl)})(typeof globalThis<"u"?globalThis:b_||self,function(s,o){s.MaplibreGL=s.Layer.extend({options:{updateInterval:32,padding:.1,interactive:!1,pane:"tilePane"},initialize:function(p){s.setOptions(this,p),this._throttledUpdate=s.Util.throttle(this._update,this.options.updateInterval,this)},onAdd:function(p){this._container||this._initContainer();var d=this.getPaneName();p.getPane(d).appendChild(this._container),this._initGL(),this._offset=this._map.containerPointToLayerPoint([0,0]),p.options.zoomAnimation&&s.DomEvent.on(p._proxy,s.DomUtil.TRANSITION_END,this._transitionEnd,this)},onRemove:function(p){this._map._proxy&&this._map.options.zoomAnimation&&s.DomEvent.off(this._map._proxy,s.DomUtil.TRANSITION_END,this._transitionEnd,this);var d=this.getPaneName();p.getPane(d).removeChild(this._container),this._glMap.remove(),this._glMap=null},getEvents:function(){return{move:this._throttledUpdate,zoomanim:this._animateZoom,zoom:this._pinchZoom,zoomstart:this._zoomStart,zoomend:this._zoomEnd,resize:this._resize}},getAttribution:function(){if(this.options.attributionControl)return this.options.attributionControl.customAttribution;var p=this._glMap;if(p&&this.options.attributionControl!==!1){var d=p.getStyle();if(d&&d.sources)return Object.keys(d.sources).map(function(f){var a=p.getSource(f);return a&&typeof a.attribution=="string"?a.attribution.trim():null}).filter(Boolean).join(", ")}return""},getMaplibreMap:function(){return this._glMap},getCanvas:function(){return this._glMap.getCanvas()},getSize:function(){return this._map.getSize().multiplyBy(1+this.options.padding*2)},getBounds:function(){var p=this.getSize().multiplyBy(.5),d=this._map.latLngToContainerPoint(this._map.getCenter());return s.latLngBounds(this._map.containerPointToLatLng(d.subtract(p)),this._map.containerPointToLatLng(d.add(p)))},getContainer:function(){return this._container},getPaneName:function(){return this._map.getPane(this.options.pane)?this.options.pane:"tilePane"},_roundPoint:function(p){return{x:Math.round(p.x),y:Math.round(p.y)}},_initContainer:function(){var p=this._container=s.DomUtil.create("div","leaflet-gl-layer");this._resizeContainer();var d=this._map.getSize().multiplyBy(this.options.padding),f=this._map.containerPointToLayerPoint([0,0]).subtract(d);s.DomUtil.setPosition(p,this._roundPoint(f))},_resizeContainer:function(){var p=this.getSize();this._container.style.width=p.x+"px",this._container.style.height=p.y+"px"},_initGL:function(){var p=this._map.getCenter(),d=s.extend({},this.options,{container:this._container,center:[p.lng,p.lat],zoom:this._map.getZoom()-1,attributionControl:!1});this._glMap=new o.Map(d);var f=this._map,a=this.getAttribution(),T=this.getAttribution.bind(this);this._glMap.on("load",function(){f&&f.attributionControl&&(f.attributionControl.removeAttribution(a),f.attributionControl.addAttribution(T()))});var M=Object.getPrototypeOf(this._glMap.transform),B=Object.getOwnPropertyDescriptor(M,"latRange");(!B||B.set||B.writable)&&(this._glMap.transform.latRange=null);var G=Object.getOwnPropertyDescriptor(M,"maxValidLatitude");(!G||G.set||G.writable)&&(this._glMap.transform.maxValidLatitude=1/0),this._glMap.transform._helper&&this._glMap.transform._helper._latRange&&(this._glMap.transform._helper._latRange=[-1/0,1/0]),this._transformGL(this._glMap),this._glMap._canvas.canvas?this._glMap._actualCanvas=this._glMap._canvas.canvas:this._glMap._actualCanvas=this._glMap._canvas;var J=this._glMap._actualCanvas;s.DomUtil.addClass(J,"leaflet-image-layer"),s.DomUtil.addClass(J,"leaflet-zoom-animated"),this.options.interactive&&s.DomUtil.addClass(J,"leaflet-interactive"),this.options.className&&s.DomUtil.addClass(J,this.options.className)},_update:function(p){if(this._map&&(this._offset=this._map.containerPointToLayerPoint([0,0]),!this._zooming)){var d=this._container,f=this._glMap,a=this._map.getSize().multiplyBy(this.options.padding),T=this._map.containerPointToLayerPoint([0,0]).subtract(a);s.DomUtil.setPosition(d,this._roundPoint(T)),this._transformGL(f)}},_transformGL:function(p){var d=this._map.getCenter(),f=p._getTransformForUpdate();f.setCenter?(f.setCenter(o.LngLat.convert([d.lng,d.lat])),f.setZoom(this._map.getZoom()-1),p.transform.apply(f)):(f=p.transform,f.center=o.LngLat.convert([d.lng,d.lat]),f.zoom=this._map.getZoom()-1),p._fireMoveEvents()},_pinchZoom:function(p){this._glMap.jumpTo({zoom:this._map.getZoom()-1,center:this._map.getCenter()})},_animateZoom:function(p){var d=this._map.getZoomScale(p.zoom),f=this._map.getSize().multiplyBy(this.options.padding*d),a=this.getSize()._divideBy(2),T=this._map.project(p.center,p.zoom)._subtract(a)._add(this._map._getMapPanePos().add(f))._round(),M=this._map.project(this._map.getBounds().getNorthWest(),p.zoom)._subtract(T);s.DomUtil.setTransform(this._glMap._actualCanvas,M.subtract(this._offset),d)},_zoomStart:function(p){this._zooming=!0},_zoomEnd:function(){var p=this._map.getZoomScale(this._map.getZoom());s.DomUtil.setTransform(this._glMap._actualCanvas,null,p),this._zooming=!1,this._update()},_transitionEnd:function(p){s.Util.requestAnimFrame(function(){var d=this._map.getZoom(),f=this._map.getCenter(),a=this._map.latLngToContainerPoint(this._map.getBounds().getNorthWest());this._resizeContainer(),s.DomUtil.setTransform(this._glMap._actualCanvas,a,1),this._glMap.once("moveend",s.Util.bind(function(){this._zoomEnd()},this)),this._glMap.jumpTo({center:f,zoom:d-1})},this)},_resize:function(p){this._transitionEnd(p)}}),s.maplibreGL=function(p){return new s.MaplibreGL(p)}})});function dp(s){if(!s)return;let o;if(typeof s.getBoundingClientRect<"u")o=s.getBoundingClientRect();else{let p=document.createRange();p.selectNode(s),o=p.getBoundingClientRect()}return o}function zb(s){if(!s)return;let o;if(typeof s.getClientRects<"u")o=s.getClientRects();else{let p=document.createRange();p.selectNode(s),o=p.getClientRects()}return o}function qn(){var s=new Date().getTime();return typeof performance<"u"&&typeof performance.now=="function"&&(s+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){var p=(s+Math.random()*16)%16|0;return s=Math.floor(s/16),(o==="x"?p:p&3|8).toString(16)})}function pp(s,o){for(var p=0;p<o.length;p++)if(s.hasAttribute(o[p]))return s.getAttribute(o[p])}function fp(s){if(arguments.length==0)throw new TypeError("`CSS.escape` requires an argument.");for(var o=String(s),p=o.length,d=-1,f,a="",T=o.charCodeAt(0);++d<p;){if(f=o.charCodeAt(d),f==0){a+="\uFFFD";continue}if(f>=1&&f<=31||f==127||d==0&&f>=48&&f<=57||d==1&&f>=48&&f<=57&&T==45){a+="\\"+f.toString(16)+" ";continue}if(d==0&&p==1&&f==45){a+="\\"+o.charAt(d);continue}if(f==46&&o.charAt(0)=="#"){a+="\\.";continue}if(f>=128||f==45||f==95||f==35||f==46||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122){a+=o.charAt(d);continue}a+="\\"+o.charAt(d)}return a}function mp(){this.resolve=null,this.reject=null,this.id=qn(),this.promise=new Promise((s,o)=>{this.resolve=s,this.reject=o}),Object.freeze(this)}var Lb=typeof window<"u"&&("requestIdleCallback"in window?window.requestIdleCallback:window.requestAnimationFrame);function xt(s){return s.value+(s.unit||"")}function rn(s){return s&&s.nodeType===1}function Oo(s){return s&&s.nodeType===3}function*jh(s,o){let p=s;for(;p;)if(yield p,p.childNodes.length)p=p.firstChild;else if(p.nextSibling){if(o&&p===o){p=void 0;break}p=p.nextSibling}else for(;p;){if(p=p.parentNode,o&&p===o){p=void 0;break}if(p&&p.nextSibling){p=p.nextSibling;break}}}function vl(s,o){if(o&&s===o)return;let p=yp(s);if(p)return p;if(s.parentNode)for(;s=s.parentNode;){if(o&&s===o)return;if(p=yp(s),p)return p}}function Fh(s,o){if(o&&s===o)return;let p=gp(s);if(p)return p;if(s.parentNode)for(;s=s.parentNode;){if(o&&s===o)return;if(p=gp(s),p)return p}}function Ob(s,o){let p=vl(s,o);for(;p&&p.nodeType!==1;)p=vl(p,o);return p}function Db(s,o){let p=Fh(s,o);for(;p&&p.nodeType!==1;)p=Fh(p,o);return p}function Vm(s,o){let p=Ob(s,o);for(;p&&p.dataset.undisplayed;)p=Ob(p,o);return p}function Bb(s,o){let p=Db(s,o);for(;p&&p.dataset.undisplayed;)p=Db(p,o);return p}function _p(s){let o,p,d=[],f=[],a=document.createDocumentFragment();if(s.nodeName==="TR"){let B=s.previousElementSibling,G=1;for(;B;){if(B.childElementCount>s.childElementCount){let J=Array.from(s.children);for(;s.firstChild;)s.firstChild.remove();let ie=0;for(let $=0;$<B.children.length;$++){let ae=B.children[$];if(ae.rowSpan&&ae.rowSpan>G){let te=ae.cloneNode(!0);te.rowSpan=ae.rowSpan-G,s.appendChild(te)}else{let te=J[ie++];te&&s.appendChild(te)}}}B=B.previousElementSibling,G++}}let T=s;for(;T.parentNode&&T.parentNode.nodeType===1;)d.unshift(T.parentNode),T=T.parentNode;for(var M=0;M<d.length;M++){if(p=d[M],o=p.cloneNode(!1),o.setAttribute("data-split-from",o.getAttribute("data-ref")),o.hasAttribute("id")){let B=o.getAttribute("id");o.setAttribute("data-id",B),o.removeAttribute("id")}if(o.hasAttribute("data-break-before")&&o.removeAttribute("data-break-before"),o.hasAttribute("data-previous-break-after")&&o.removeAttribute("data-previous-break-after"),f.length?f[f.length-1].appendChild(o):a.appendChild(o),f.push(o),o.nodeName==="TD"&&p.parentElement.contains(p)){let B=p,G=o;for(;B=B.previousElementSibling;){let J=B.cloneNode(!1);o.parentElement.insertBefore(J,G),G=J}}}return f=void 0,a}function vp(s){return typeof s<"u"&&typeof s.dataset<"u"&&typeof s.dataset.breakBefore<"u"&&(s.dataset.breakBefore==="always"||s.dataset.breakBefore==="page"||s.dataset.breakBefore==="left"||s.dataset.breakBefore==="right"||s.dataset.breakBefore==="recto"||s.dataset.breakBefore==="verso")}function Fb(s){return typeof s<"u"&&typeof s.dataset<"u"&&typeof s.dataset.previousBreakAfter<"u"&&(s.dataset.previousBreakAfter==="always"||s.dataset.previousBreakAfter==="page"||s.dataset.previousBreakAfter==="left"||s.dataset.previousBreakAfter==="right"||s.dataset.previousBreakAfter==="recto"||s.dataset.previousBreakAfter==="verso")}function bp(s,o){if(typeof s>"u"||!o||qh(s)||s.dataset&&s.dataset.undisplayed)return!1;let p=o.dataset?o.dataset.page:void 0;if(typeof p>"u"){let f=Rb(o);f&&(p=f.dataset.page)}let d=s.dataset?s.dataset.page:void 0;if(typeof d>"u"){let f=Rb(s,o);f&&(d=f.dataset.page)}return d!==p}function*jb(s){let o=s.nodeValue,p=o.length,d=0,f,a,T=s.parentElement&&s.parentElement.nodeName==="PRE";for(;d<p;)f=o[d],/^[\S\u202F\u00A0]$/.test(f)||T?a||(a=document.createRange(),a.setStart(s,d)):a&&(a.setEnd(s,d),yield a,a=void 0),d+=1;a&&(a.setEnd(s,d),yield a)}function*Nb(s){let o=s.startContainer,p=o.length,d=s.startOffset,f;for(;d<p;)f=document.createRange(),f.setStart(o,d),f.setEnd(o,d+1),yield f,d+=1}function xp(s){let o;if(typeof s.tagName>"u")return!0;if(s.style&&s.style.display==="none")return!1;switch(s.tagName){case"A":case"ABBR":case"ACRONYM":case"B":case"BDO":case"BIG":case"BR":case"BUTTON":case"CITE":case"CODE":case"DFN":case"EM":case"I":case"IMG":case"INPUT":case"KBD":case"LABEL":case"MAP":case"OBJECT":case"Q":case"SAMP":case"SCRIPT":case"SELECT":case"SMALL":case"SPAN":case"STRONG":case"SUB":case"SUP":case"TEXTAREA":case"TIME":case"TT":case"VAR":case"P":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"FIGCAPTION":case"BLOCKQUOTE":case"PRE":case"LI":case"TD":case"DT":case"DD":case"VIDEO":case"CANVAS":o=!1;break;default:o=!0}return o}function qb(s,o=!1){return s.cloneNode(o)}function gn(s,o,p){let d=s.getAttribute("data-ref");return xM(d,o,p)}function xM(s,o,p){return!p&&o.indexOfRefs&&o.indexOfRefs[s]?o.indexOfRefs[s]:o.querySelector(`[data-ref='${s}']`)}function wp(s){return!!(Oo(s)||rn(s)&&s.dataset.ref)}function Nh(s){for(;!wp(s)&&(s.previousSibling?s=s.previousSibling:s=s.parentNode,!!s););return s}function Vb(s){let o=s.parentNode;return o?Array.prototype.indexOf.call(o.childNodes,s):0}function Sp(s,o){return s.childNodes[o]}function Wb(s){return rn(s)?!0:!!(Oo(s)&&s.textContent.trim().length)}function Wm(s,o){if(!Oo(s))return-1;let p=s.textContent,d,f=-1;for(var a=0;a<o.childNodes.length;a++)if(d=o.childNodes[a],d.nodeType===3&&o.childNodes[a].textContent.includes(p)){f=a;break}return f}function qh(s){return s.nodeType===8||s.nodeType===3&&wM(s)}function wM(s){return!/[^\t\n\r ]/.test(s.textContent)}function gp(s){for(;s=s.previousSibling;)if(!qh(s))return s;return null}function Rb(s,o){if(s&&s.dataset&&s.dataset.page)return s;if(s.parentNode)for(;s=s.parentNode;){if(o&&s===o)return;if(s.dataset&&s.dataset.page)return s}return null}function Gb(s){for(;s=s.parentNode;)if(s&&s.dataset&&s.dataset.breakInside==="avoid")return s;return null}function Tp(s,o,p){if(!(p&&s===p)&&s.parentNode)for(;s=s.parentNode;){if(p&&s===p)return;if(s.nodeName===o)return s}}function yp(s){for(;s=s.nextSibling;)if(!qh(s))return s;return null}function Cp(s,o,p){let d=document.createTreeWalker(s||this.dom,p||NodeFilter.SHOW_ALL,o?{acceptNode:o}:null,!1),f,a;for(f=d.nextNode();f;)a=f,f=d.nextNode(),a.parentNode.removeChild(a)}var Gm=class{constructor(o,p){this.node=o,this.offset=p}equals(o){return!(!o||this.node&&o.node&&this.node!==o.node||this.offset&&o.offset&&this.offset!==o.offset)}toJSON(o){let p,d=0;return this.node?(rn(this.node)&&this.node.dataset.ref?p=this.node.dataset.ref:o&&(p=this.node.parentElement.dataset.ref),this.node.parentElement&&(d=Array.from(this.node.parentElement.childNodes).indexOf(this.node)),JSON.stringify({node:p,index:d,offset:this.offset})):{}}},hu=Gm;var Um=class{constructor(o,p){this.breakToken=o,this.error=p}},bl=class extends Error{constructor(o,p){super(o),this.items=p}},du=Um;var Ox=$i(xl(),1);var ng=class{constructor(o){this.context=o||this,this.hooks=[]}register(){for(var o=0;o<arguments.length;++o)if(typeof arguments[o]=="function")this.hooks.push(arguments[o]);else for(var p=0;p<arguments[o].length;++p)this.hooks.push(arguments[o][p])}trigger(){var o=arguments,p=this.context,d=[];return this.hooks.forEach(function(f){var a=f.apply(p,o);a&&typeof a.then=="function"?d.push(a):d.push(new Promise((T,M)=>{T(a)}))}),Promise.all(d)}triggerSync(){var o=arguments,p=this.context,d=[];return this.hooks.forEach(function(f){var a=f.apply(p,o);d.push(a)}),d}list(){return this.hooks}clear(){return this.hooks=[]}},Pt=ng;var UM=1500,Ip=class{constructor(o,p,d){this.element=o,this.bounds=this.element.getBoundingClientRect(),this.parentBounds=this.element.offsetParent.getBoundingClientRect();let f=parseFloat(window.getComputedStyle(this.element).columnGap);if(f){let a=this.bounds.left-this.parentBounds.left;this.gap=f-a}else this.gap=0;p?this.hooks=p:(this.hooks={},this.hooks.onPageLayout=new Pt,this.hooks.layout=new Pt,this.hooks.renderNode=new Pt,this.hooks.layoutNode=new Pt,this.hooks.beforeOverflow=new Pt,this.hooks.onOverflow=new Pt,this.hooks.afterOverflowRemoved=new Pt,this.hooks.onBreakToken=new Pt,this.hooks.beforeRenderResult=new Pt),this.settings=d||{},this.maxChars=this.settings.maxChars||UM,this.forceRenderBreak=!1}async renderTo(o,p,d,f=this.bounds){let a=this.getStart(p,d),T=jh(a,p),M,B,G,J,ie=!1,$,ae=0,te=d||new hu(a);for(this.hooks&&this.hooks.onPageLayout.trigger(o,te,this);!G&&!$;){if(J=T.next(),B=M,M=J.value,G=J.done,!M){this.hooks&&this.hooks.layout.trigger(o,this);let xe=o.querySelectorAll("img");return xe.length&&await this.waitForImages(xe),$=this.findBreakToken(o,p,f,te),$&&$.equals(te)?(console.warn("Unable to layout item: ",B),this.hooks&&this.hooks.beforeRenderResult.trigger(void 0,o,this),new du(void 0,new bl("Unable to layout item",[B]))):(this.rebuildTableFromBreakToken($,o),this.hooks&&this.hooks.beforeRenderResult.trigger($,o,this),new du($))}if(this.hooks&&this.hooks.layoutNode.trigger(M),ie&&this.shouldBreak(M,a)){this.hooks&&this.hooks.layout.trigger(o,this);let xe=o.querySelectorAll("img");if(xe.length&&await this.waitForImages(xe),$=this.findBreakToken(o,p,f,te),$?this.rebuildTableFromBreakToken($,o):$=this.breakAt(M),$&&$.equals(te)){console.warn("Unable to layout item: ",M);let Ze=$.node&&vl($.node);if(Ze)$=new hu(Ze);else return new du(void 0,new bl("Unable to layout item",[M]))}ae=0;break}if(M.dataset&&M.dataset.page){let xe=M.dataset.page,Ze=this.element.closest(".pagedjs_page");Ze.classList.add("pagedjs_named_page"),Ze.classList.add("pagedjs_"+xe+"_page"),M.dataset.splitFrom||Ze.classList.add("pagedjs_"+xe+"_first_page")}let Te=xp(M),We=this.append(M,o,d,Te);if(ae+=We.textContent.length,ie||(ie=Wb(M)),Te||(T=jh(vl(M,p),p)),this.forceRenderBreak){this.hooks&&this.hooks.layout.trigger(o,this),$=this.findBreakToken(o,p,f,te),$?this.rebuildTableFromBreakToken($,o):$=this.breakAt(M),ae=0,this.forceRenderBreak=!1;break}if(ae>=this.maxChars){this.hooks&&this.hooks.layout.trigger(o,this);let xe=o.querySelectorAll("img");if(xe.length&&await this.waitForImages(xe),$=this.findBreakToken(o,p,f,te),$&&(ae=0,this.rebuildTableFromBreakToken($,o)),$&&$.equals(te)){console.warn("Unable to layout item: ",M);let Ze=$.node&&vl($.node);if(Ze)$=new hu(Ze);else return this.hooks&&this.hooks.beforeRenderResult.trigger(void 0,o,this),new du(void 0,new bl("Unable to layout item",[M]))}}}return this.hooks&&this.hooks.beforeRenderResult.trigger($,o,this),new du($)}breakAt(o,p=0){let d=new hu(o,p);return this.hooks.onBreakToken.triggerSync(d,void 0,o,this).forEach(a=>{typeof a<"u"&&(d=a)}),d}shouldBreak(o,p){let d=Fh(o,p),f=o.parentNode,a=vp(o)&&f&&!d&&vp(f),T;return a&&(T=o.dataset.breakBefore===f.dataset.breakBefore),!T&&vp(o)||Fb(o)||bp(o,d)}forceBreak(){this.forceRenderBreak=!0}getStart(o,p){let d,f=p&&p.node;return f?d=f:d=o.firstChild,d}append(o,p,d,f=!0,a=!0){let T=qb(o,!f);if(o.parentNode&&rn(o.parentNode)){let B=gn(o.parentNode,p);if(B)B.appendChild(T);else if(a){let G=_p(o);B=gn(o.parentNode,G),B?(d&&Oo(d.node)&&d.offset>0&&(T.textContent=T.textContent.substring(d.offset)),B.appendChild(T)):p.appendChild(T),p.appendChild(G)}else p.appendChild(T)}else p.appendChild(T);return T.dataset&&T.dataset.ref&&(p.indexOfRefs||(p.indexOfRefs={}),p.indexOfRefs[T.dataset.ref]=T),this.hooks.renderNode.triggerSync(T,o,this).forEach(B=>{typeof B<"u"&&(T=B)}),T}rebuildTableFromBreakToken(o,p){if(!o||!o.node)return;let d=o.node,f=rn(d)?d.closest("td"):d.parentElement.closest("td");if(f){if(!gn(f,p,!0))return;for(;f=f.nextElementSibling;)this.append(f,p,null,!0)}}async waitForImages(o){let p=Array.from(o).map(async d=>this.awaitImageLoaded(d));await Promise.all(p)}async awaitImageLoaded(o){return new Promise(p=>{if(o.complete!==!0)o.onload=function(){let{width:d,height:f}=window.getComputedStyle(o);p(d,f)},o.onerror=function(d){let{width:f,height:a}=window.getComputedStyle(o);p(f,a,d)};else{let{width:d,height:f}=window.getComputedStyle(o);p(d,f)}})}avoidBreakInside(o,p){let d;if(o!==p){for(;o.parentNode&&(o=o.parentNode,o!==p);)if(window.getComputedStyle(o)["break-inside"]==="avoid"){d=o;break}return d}}createBreakToken(o,p,d){let f=o.startContainer,a=o.startOffset,T,M,B,G,J;if(rn(f))if(J=Sp(f,a),rn(J))if(M=gn(J,p),M)T=gn(M,d),a=0;else{let ie=Nh(J);if(rn(ie)||(ie=ie.parentElement),M=gn(ie,p),!J.nextSibling){let $=gn(M,d),te=document.createTreeWalker($,NodeFilter.SHOW_ELEMENT).lastChild();if(!gn(te,p))return}T=gn(M,d).nextSibling,a=0}else M=gn(f,p),M||(M=gn(Nh(f),p)),B=gn(M,d),G=Wm(J,B),G===0?(T=B,a=0):(T=Sp(B,G),a=0);else{if(M=gn(f.parentNode,p),M||(M=gn(Nh(f.parentNode),p)),B=gn(M,d),G=Wm(f,B),G===-1)return;T=Sp(B,G),a+=T.textContent.indexOf(f.textContent)}if(T)return new hu(T,a)}findBreakToken(o,p,d=this.bounds,f,a=!0){let T=this.findOverflow(o,d),M,B;if(this.hooks.onOverflow.triggerSync(T,o,d,this).forEach(J=>{typeof J<"u"&&(T=J)}),T){if(M=this.createBreakToken(T,o,p),this.hooks.onBreakToken.triggerSync(M,T,o,this).forEach(ie=>{typeof ie<"u"&&(M=ie)}),M&&M.equals(f))return M;if(M&&M.node&&M.offset&&M.node.textContent?B=M.node.textContent.charAt(M.offset):B=void 0,M&&M.node&&a){let ie=this.removeOverflow(T,B);this.hooks&&this.hooks.afterOverflowRemoved.trigger(ie,o,this)}}return M}hasOverflow(o,p=this.bounds){let d=o&&o.parentNode,{width:f,height:a}=o.getBoundingClientRect(),T=d?d.scrollWidth:0,M=d?d.scrollHeight:0;return Math.max(Math.floor(f),T)>Math.round(p.width)||Math.max(Math.floor(a),M)>Math.round(p.height)}findOverflow(o,p=this.bounds,d=this.gap){if(!this.hasOverflow(o,p))return;let f=Math.floor(p.left),a=Math.round(p.right+d),T=Math.round(p.top),M=Math.round(p.bottom),B,G=jh(o.firstChild,o),J,ie,$,ae,te,Te,We,xe;for(;!ie;)if(J=G.next(),ie=J.done,$=J.value,te=!1,Te=!1,We=void 0,xe=void 0,$){let dt=dp($),mt=Math.round(dt.left),Vt=Math.floor(dt.right),Bt=Math.round(dt.top),je=Math.floor(dt.bottom);if(!B&&(mt>=a||Bt>=M)){let Je=!1,ot=Tp($,"TD",o);if(ot&&window.getComputedStyle(ot)["break-inside"]==="avoid")We=ot.parentElement;else if(rn($)){let Ht=window.getComputedStyle($);Je=Ht.getPropertyValue("float")!=="none",te=Ht.getPropertyValue("break-inside")==="avoid",Te=$.dataset.breakBefore==="avoid"||$.dataset.previousBreakAfter==="avoid",We=Te&&Fh($,o),xe=$.tagName==="BR"||$.tagName==="WBR"}let St;if($.nodeName==="TR"?St=$:St=Tp($,"TR",o),St){let Ht=St.parentElement;["TBODY","THEAD"].includes(Ht.nodeName)&&window.getComputedStyle(Ht).getPropertyValue("break-inside")==="avoid"&&(We=Ht);let Tt=Tp(St,"TABLE",o),_i=Tt.querySelector("[colspan]");if(Tt&&_i){let ti=0;for(let ii of Array.from(Tt.rows[0].cells))ti+=parseInt(ii.getAttribute("colspan")||"1");if(St.cells.length!==ti){let ii=St.previousElementSibling,_t;for(;ii!==null;){_t=0;for(let ei of Array.from(ii.cells))_t+=parseInt(ei.getAttribute("colspan")||"1");if(_t===ti)break;ii=ii.previousElementSibling}_t===ti&&(We=ii)}}}if(We){B=document.createRange(),B.selectNode(We);break}if(!xe&&!Je&&rn($)){B=document.createRange(),B.selectNode($);break}if(Oo($)&&$.textContent.trim().length){B=document.createRange(),B.selectNode($);break}}if(!B&&Oo($)&&$.textContent.trim().length&&!Gb($.parentNode)){let Je=zb($),ot;mt=0,Bt=0;for(var Ze=0;Ze!=Je.length;Ze++)ot=Je[Ze],ot.width>0&&(!mt||ot.left>mt)&&(mt=ot.left),ot.height>0&&(!Bt||ot.top>Bt)&&(Bt=ot.top);if(mt>=a||Bt>=M){B=document.createRange(),ae=this.textBreak($,f,a,T,M),ae?B.setStart($,ae):B=void 0;break}}(te||Vt<=a&&je<=M)&&(J=vl($,o),J&&(G=jh(J,o)))}if(B)return B.setEndAfter(o.lastChild),B}findEndToken(o,p){if(o.childNodes.length===0)return;let d=o.lastChild,f;for(;d&&d.lastChild;)if(!wp(d))d=d.previousSibling;else if(wp(d.lastChild))d=d.lastChild;else{d=Nh(d.lastChild);break}Oo(d)&&(d.parentNode.dataset.ref?(f=Vb(d),d=d.parentNode):d=d.previousSibling);let a=gn(d,p);f&&(a=a.childNodes[f]);let T=vl(a);return this.breakAt(T)}textBreak(o,p,d,f,a){let T=jb(o),M=0,B=0,G=0,J=0,ie,$,ae,te,Te;for(;!ae&&($=T.next(),ie=$.value,ae=$.done,!!ie);){if(te=dp(ie),M=Math.floor(te.left),B=Math.floor(te.right),G=Math.floor(te.top),J=Math.floor(te.bottom),M>=d||G>=a){Te=ie.startOffset;break}if(B>d||J>a){let We=Nb(ie),xe,Ze,dt;for(;!dt&&(Ze=We.next(),xe=Ze.value,dt=Ze.done,!!xe);)if(te=dp(xe),M=Math.floor(te.left),G=Math.floor(te.top),M>=d||G>=a){Te=xe.startOffset,ae=!0;break}}}return Te}removeOverflow(o,p){let{startContainer:d}=o,f=o.extractContents();return this.hyphenateAtBreak(d,p),f}hyphenateAtBreak(o,p){if(Oo(o)){let d=o.textContent,f=d[d.length-1];(p&&/^\w|\u00AD$/.test(f)&&/^\w|\u00AD$/.test(p)||!p&&/^\w|\u00AD$/.test(f))&&(o.parentNode.classList.add("pagedjs_hyphen"),o.textContent+=this.settings.hyphenGlyph||"\u2011")}}equalTokens(o,p){return!(!o||!p||o.node&&p.node&&o.node!==p.node||o.offset&&p.offset&&o.offset!==p.offset)}};(0,Ox.default)(Ip.prototype);var zp=Ip;var Dx=$i(xl(),1),Lp=class{constructor(o,p,d,f,a){this.pagesArea=o,this.pageTemplate=p,this.blank=d,this.width=void 0,this.height=void 0,this.hooks=f,this.settings=a||{}}create(o,p){let d=document.importNode(this.pageTemplate.content,!0),f,a;p?(this.pagesArea.insertBefore(d,p.nextElementSibling),a=Array.prototype.indexOf.call(this.pagesArea.children,p.nextElementSibling),f=this.pagesArea.children[a]):(this.pagesArea.appendChild(d),f=this.pagesArea.lastChild);let T=f.querySelector(".pagedjs_pagebox"),M=f.querySelector(".pagedjs_page_content"),B=f.querySelector(".pagedjs_footnote_area"),G=M.getBoundingClientRect();return M.style.columnWidth=Math.round(G.width)+"px",M.style.columnGap="calc(var(--pagedjs-margin-right) + var(--pagedjs-margin-left) + var(--pagedjs-bleed-right) + var(--pagedjs-bleed-left) + var(--pagedjs-column-gap-offset))",this.width=Math.round(G.width),this.height=Math.round(G.height),this.element=f,this.pagebox=T,this.area=M,this.footnotesArea=B,f}createWrapper(){let o=document.createElement("div");return this.area.appendChild(o),this.wrapper=o,o}index(o){this.position=o;let p=this.element,d=o+1,f=`page-${d}`;this.id=f,p.dataset.pageNumber=d,p.setAttribute("id",f),this.name&&p.classList.add("pagedjs_"+this.name+"_page"),this.blank&&p.classList.add("pagedjs_blank_page"),o===0&&p.classList.add("pagedjs_first_page"),o%2!==1?(p.classList.remove("pagedjs_left_page"),p.classList.add("pagedjs_right_page")):(p.classList.remove("pagedjs_right_page"),p.classList.add("pagedjs_left_page"))}async layout(o,p,d){this.clear(),this.startToken=p;let f=this.settings;!f.maxChars&&d&&(f.maxChars=d),this.layoutMethod=new zp(this.area,this.hooks,f);let T=(await this.layoutMethod.renderTo(this.wrapper,o,p)).breakToken;return this.addListeners(o),this.endToken=T,T}async append(o,p){if(!this.layoutMethod)return this.layout(o,p);let f=(await this.layoutMethod.renderTo(this.wrapper,o,p)).breakToken;return this.endToken=f,f}getByParent(o,p){let d;for(var f=0;f<p.length;f++)if(d=p[f],d.dataset.ref===o)return d}onOverflow(o){this._onOverflow=o}onUnderflow(o){this._onUnderflow=o}clear(){this.removeListeners(),this.wrapper&&this.wrapper.remove(),this.createWrapper()}addListeners(o){return typeof ResizeObserver<"u"?this.addResizeObserver(o):(this._checkOverflowAfterResize=this.checkOverflowAfterResize.bind(this,o),this.element.addEventListener("overflow",this._checkOverflowAfterResize,!1),this.element.addEventListener("underflow",this._checkOverflowAfterResize,!1)),this._onScroll=function(){this.listening&&(this.element.scrollLeft=0)}.bind(this),this.element.addEventListener("scroll",this._onScroll),this.listening=!0,!0}removeListeners(){this.listening=!1,typeof ResizeObserver<"u"&&this.ro?this.ro.disconnect():this.element&&(this.element.removeEventListener("overflow",this._checkOverflowAfterResize,!1),this.element.removeEventListener("underflow",this._checkOverflowAfterResize,!1)),this.element&&this.element.removeEventListener("scroll",this._onScroll)}addResizeObserver(o){let p=this.wrapper,d=p.getBoundingClientRect().height;this.ro=new ResizeObserver(f=>{this.listening&&requestAnimationFrame(()=>{for(let a of f){let T=a.contentRect;T.height>d?(this.checkOverflowAfterResize(o),d=p.getBoundingClientRect().height):T.height<d&&(this.checkUnderflowAfterResize(o),d=T.height)}})}),this.ro.observe(p)}checkOverflowAfterResize(o){if(!this.listening||!this.layoutMethod)return;let p=this.layoutMethod.findBreakToken(this.wrapper,o,this.startToken);p&&(this.endToken=p,this._onOverflow&&this._onOverflow(p))}checkUnderflowAfterResize(o){if(!this.listening||!this.layoutMethod)return;let p=this.layoutMethod.findEndToken(this.wrapper,o);p&&this._onUnderflow&&this._onUnderflow(p)}destroy(){this.removeListeners(),this.element.remove(),this.element=void 0,this.wrapper=void 0}};(0,Dx.default)(Lp.prototype);var ag=Lp;var sg=class{constructor(o,p){return o&&o.nodeType?this.dom=this.add(o):typeof o=="string"&&(this.dom=this.parse(o)),this.dom}parse(o,p){let f=document.createRange().createContextualFragment(o);return this.addRefs(f),f}add(o){return this.addRefs(o),o}addRefs(o){var p=document.createTreeWalker(o,NodeFilter.SHOW_ELEMENT,null,!1);let d=p.nextNode();for(;d;){if(!d.hasAttribute("data-ref")){let f=qn();d.setAttribute("data-ref",f)}d.id&&d.setAttribute("data-id",d.id),d=p.nextNode()}}find(o){return this.refs[o]}destroy(){this.refs=void 0,this.dom=void 0}},Rx=sg;var Nx=$i(xl(),1);var og=class{constructor(o){this._q=[],this.context=o,this.tick=requestAnimationFrame,this.running=!1,this.paused=!1}enqueue(){var o,p,d,f=[].shift.call(arguments),a=arguments;if(!f)throw new Error("No Task Provided");return typeof f=="function"?(o=new mp,p=o.promise,d={task:f,args:a,deferred:o,promise:p}):d={promise:f},this._q.push(d),this.paused==!1&&!this.running&&this.run(),d.promise}dequeue(){var o,p,d;if(this._q.length&&!this.paused){if(o=this._q.shift(),p=o.task,p)return d=p.apply(this.context,o.args),d&&typeof d.then=="function"?d.then(function(){o.deferred.resolve.apply(this.context,arguments)}.bind(this),function(){o.deferred.reject.apply(this.context,arguments)}.bind(this)):(o.deferred.resolve.apply(this.context,d),o.promise);if(o.promise)return o.promise}else return o=new mp,o.deferred.resolve(),o.promise}dump(){for(;this._q.length;)this.dequeue()}run(){return this.running||(this.running=!0,this.defered=new mp),this.tick.call(window,()=>{this._q.length?this.dequeue().then(function(){this.run()}.bind(this)):(this.defered.resolve(),this.running=void 0)}),this.paused==!0&&(this.paused=!1),this.defered.promise}flush(){if(this.running)return this.running;if(this._q.length)return this.running=this.dequeue().then(function(){return this.running=void 0,this.flush()}.bind(this)),this.running}clear(){this._q=[]}length(){return this._q.length}pause(){this.paused=!0}stop(){this._q=[],this.running=!1,this.paused=!0}};var Bx=og;var Fx=!1,jx=!1,ZM=`
<div class="pagedjs_page">
	<div class="pagedjs_sheet">
		<div class="pagedjs_bleed pagedjs_bleed-top">
			<div class="pagedjs_marks-crop"></div>
			<div class="pagedjs_marks-middle">
				<div class="pagedjs_marks-cross"></div>
			</div>
			<div class="pagedjs_marks-crop"></div>
		</div>
		<div class="pagedjs_bleed pagedjs_bleed-bottom">
			<div class="pagedjs_marks-crop"></div>
			<div class="pagedjs_marks-middle">
				<div class="pagedjs_marks-cross"></div>
			</div>		<div class="pagedjs_marks-crop"></div>
		</div>
		<div class="pagedjs_bleed pagedjs_bleed-left">
			<div class="pagedjs_marks-crop"></div>
			<div class="pagedjs_marks-middle">
				<div class="pagedjs_marks-cross"></div>
			</div>		<div class="pagedjs_marks-crop"></div>
		</div>
		<div class="pagedjs_bleed pagedjs_bleed-right">
			<div class="pagedjs_marks-crop"></div>
			<div class="pagedjs_marks-middle">
				<div class="pagedjs_marks-cross"></div>
			</div>
			<div class="pagedjs_marks-crop"></div>
		</div>
		<div class="pagedjs_pagebox">
			<div class="pagedjs_margin-top-left-corner-holder">
				<div class="pagedjs_margin pagedjs_margin-top-left-corner"><div class="pagedjs_margin-content"></div></div>
			</div>
			<div class="pagedjs_margin-top">
				<div class="pagedjs_margin pagedjs_margin-top-left"><div class="pagedjs_margin-content"></div></div>
				<div class="pagedjs_margin pagedjs_margin-top-center"><div class="pagedjs_margin-content"></div></div>
				<div class="pagedjs_margin pagedjs_margin-top-right"><div class="pagedjs_margin-content"></div></div>
			</div>
			<div class="pagedjs_margin-top-right-corner-holder">
				<div class="pagedjs_margin pagedjs_margin-top-right-corner"><div class="pagedjs_margin-content"></div></div>
			</div>
			<div class="pagedjs_margin-right">
				<div class="pagedjs_margin pagedjs_margin-right-top"><div class="pagedjs_margin-content"></div></div>
				<div class="pagedjs_margin pagedjs_margin-right-middle"><div class="pagedjs_margin-content"></div></div>
				<div class="pagedjs_margin pagedjs_margin-right-bottom"><div class="pagedjs_margin-content"></div></div>
			</div>
			<div class="pagedjs_margin-left">
				<div class="pagedjs_margin pagedjs_margin-left-top"><div class="pagedjs_margin-content"></div></div>
				<div class="pagedjs_margin pagedjs_margin-left-middle"><div class="pagedjs_margin-content"></div></div>
				<div class="pagedjs_margin pagedjs_margin-left-bottom"><div class="pagedjs_margin-content"></div></div>
			</div>
			<div class="pagedjs_margin-bottom-left-corner-holder">
				<div class="pagedjs_margin pagedjs_margin-bottom-left-corner"><div class="pagedjs_margin-content"></div></div>
			</div>
			<div class="pagedjs_margin-bottom">
				<div class="pagedjs_margin pagedjs_margin-bottom-left"><div class="pagedjs_margin-content"></div></div>
				<div class="pagedjs_margin pagedjs_margin-bottom-center"><div class="pagedjs_margin-content"></div></div>
				<div class="pagedjs_margin pagedjs_margin-bottom-right"><div class="pagedjs_margin-content"></div></div>
			</div>
			<div class="pagedjs_margin-bottom-right-corner-holder">
				<div class="pagedjs_margin pagedjs_margin-bottom-right-corner"><div class="pagedjs_margin-content"></div></div>
			</div>
			<div class="pagedjs_area">
				<div class="pagedjs_page_content"></div>
				<div class="pagedjs_footnote_area">
					<div class="pagedjs_footnote_content pagedjs_footnote_empty">
						<div class="pagedjs_footnote_inner_content"></div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>`,Op=class{constructor(o,p,d){this.settings=d||{},this.hooks={},this.hooks.beforeParsed=new Pt(this),this.hooks.filter=new Pt(this),this.hooks.afterParsed=new Pt(this),this.hooks.beforePageLayout=new Pt(this),this.hooks.onPageLayout=new Pt(this),this.hooks.layout=new Pt(this),this.hooks.renderNode=new Pt(this),this.hooks.layoutNode=new Pt(this),this.hooks.onOverflow=new Pt(this),this.hooks.afterOverflowRemoved=new Pt(this),this.hooks.onBreakToken=new Pt,this.hooks.beforeRenderResult=new Pt(this),this.hooks.afterPageLayout=new Pt(this),this.hooks.finalizePage=new Pt(this),this.hooks.afterRendered=new Pt(this),this.pages=[],this.total=0,this.q=new Bx(this),this.stopped=!1,this.rendered=!1,this.content=o,this.charsPerBreak=[],this.maxChars,o&&this.flow(o,p)}setup(o){this.pagesArea=document.createElement("div"),this.pagesArea.classList.add("pagedjs_pages"),o?o.appendChild(this.pagesArea):document.querySelector("body").appendChild(this.pagesArea),this.pageTemplate=document.createElement("template"),this.pageTemplate.innerHTML=ZM}async flow(o,p){let d;await this.hooks.beforeParsed.trigger(o,this),d=new Rx(o),this.hooks.filter.triggerSync(d),this.source=d,this.breakToken=void 0,this.pagesArea&&this.pageTemplate?(this.q.clear(),this.removePages()):this.setup(p),this.emit("rendering",d),await this.hooks.afterParsed.trigger(d,this),await this.loadFonts();let f=await this.render(d,this.breakToken);for(;f.canceled;)this.start(),f=await this.render(d,this.breakToken);return this.rendered=!0,this.pagesArea.style.setProperty("--pagedjs-page-count",this.total),await this.hooks.afterRendered.trigger(this.pages,this),this.emit("rendered",this.pages),this}async render(o,p){let d=this.layout(o,p),f=!1,a,T=0;for(;!f;)if(a=await this.q.enqueue(()=>this.renderAsync(d)),f=a.done,jx&&(T+=1,T>=jx)){this.stop();break}return a}start(){this.rendered=!1,this.stopped=!1}stop(){this.stopped=!0}renderOnIdle(o){return new Promise(p=>{Lb(async()=>{if(this.stopped)return p({done:!0,canceled:!0});let d=await o.next();this.stopped?p({done:!0,canceled:!0}):p(d)})})}async renderAsync(o){if(this.stopped)return{done:!0,canceled:!0};let p=await o.next();return this.stopped?{done:!0,canceled:!0}:p}async handleBreaks(o,p){let d=this.total+1,f=d%2===0?"left":"right",a=d%2===0?"verso":"recto",T,M,B;d!==1&&(o&&typeof o.dataset<"u"&&typeof o.dataset.previousBreakAfter<"u"&&(T=o.dataset.previousBreakAfter),o&&typeof o.dataset<"u"&&typeof o.dataset.breakBefore<"u"&&(M=o.dataset.breakBefore),p?B=this.addPage(!0):T&&(T==="left"||T==="right")&&T!==f?B=this.addPage(!0):T&&(T==="verso"||T==="recto")&&T!==a?B=this.addPage(!0):M&&(M==="left"||M==="right")&&M!==f?B=this.addPage(!0):M&&(M==="verso"||M==="recto")&&M!==a&&(B=this.addPage(!0)),B&&(await this.hooks.beforePageLayout.trigger(B,void 0,void 0,this),this.emit("page",B),await this.hooks.afterPageLayout.trigger(B.element,B,void 0,this),await this.hooks.finalizePage.trigger(B.element,B,void 0,this),this.emit("renderedPage",B)))}async*layout(o,p){let d=p||!1,f=[];for(;d!==void 0&&(!Fx||this.total<Fx);){d&&d.node?await this.handleBreaks(d.node):await this.handleBreaks(o.firstChild);let a=this.addPage();if(await this.hooks.beforePageLayout.trigger(a,o,d,this),this.emit("page",a),d=await a.layout(o,d,this.maxChars),d){let T=d.toJSON(!0);if(f.lastIndexOf(T)>-1){let M=new bl("Layout repeated",[d.node]);return console.error("Layout repeated at: ",d.node),M}else f.push(T)}await this.hooks.afterPageLayout.trigger(a.element,a,d,this),await this.hooks.finalizePage.trigger(a.element,a,void 0,this),this.emit("renderedPage",a),this.recoredCharLength(a.wrapper.textContent.length),yield d}}recoredCharLength(o){o!==0&&(this.charsPerBreak.push(o),this.charsPerBreak.length>4&&this.charsPerBreak.shift(),this.maxChars=this.charsPerBreak.reduce((p,d)=>p+d,0)/this.charsPerBreak.length)}removePages(o=0){if(!(o>=this.pages.length)){for(let p=o;p<this.pages.length;p++)this.pages[p].destroy();o>0?this.pages.splice(o):this.pages=[],this.total=this.pages.length}}addPage(o){let p=this.pages[this.pages.length-1],d=new ag(this.pagesArea,this.pageTemplate,o,this.hooks,this.settings);return this.pages.push(d),d.create(void 0,p&&p.element),d.index(this.total),o||(d.onOverflow(f=>{if(console.warn("overflow on",d.id,f),this.rendered)return;let a=this.pages.indexOf(d)+1;this.stop(),this.breakToken=f,this.removePages(a),this.rendered===!0&&(this.rendered=!1,this.q.enqueue(async()=>{this.start(),await this.render(this.source,this.breakToken),this.rendered=!0}))}),d.onUnderflow(f=>{})),this.total=this.pages.length,d}async clonePage(o){let p=this.pages[this.pages.length-1],d=new ag(this.pagesArea,this.pageTemplate,!1,this.hooks);this.pages.push(d),d.create(void 0,p&&p.element),d.index(this.total),await this.hooks.beforePageLayout.trigger(d,void 0,void 0,this),this.emit("page",d);for(let f of o.element.classList)f!=="pagedjs_left_page"&&f!=="pagedjs_right_page"&&d.element.classList.add(f);await this.hooks.afterPageLayout.trigger(d.element,d,void 0,this),await this.hooks.finalizePage.trigger(d.element,d,void 0,this),this.emit("renderedPage",d)}loadFonts(){let o=[];return(document.fonts||[]).forEach(p=>{if(p.status!=="loaded"){let d=p.load().then(f=>p.family,f=>(console.warn("Failed to preload font-family:",p.family),p.family));o.push(d)}}),Promise.all(o).catch(p=>{console.warn(p)})}destroy(){this.pagesArea.remove(),this.pageTemplate.remove()}};(0,Nx.default)(Op.prototype);var lg=Op;var Tr=$i(Cn(),1);var Iy=class{constructor(o,p){p?this.hooks=p:(this.hooks={},this.hooks.onUrl=new Pt(this),this.hooks.onAtPage=new Pt(this),this.hooks.onAtMedia=new Pt(this),this.hooks.onRule=new Pt(this),this.hooks.onDeclaration=new Pt(this),this.hooks.onSelector=new Pt(this),this.hooks.onPseudoSelector=new Pt(this),this.hooks.onContent=new Pt(this),this.hooks.onImport=new Pt(this),this.hooks.beforeTreeParse=new Pt(this),this.hooks.beforeTreeWalk=new Pt(this),this.hooks.afterTreeWalk=new Pt(this));try{this.url=new URL(o,window.location.href)}catch{this.url=new URL(window.location.href)}}async parse(o){return this.text=o,await this.hooks.beforeTreeParse.trigger(this.text,this),this.ast=Tr.default.parse(this._text),await this.hooks.beforeTreeWalk.trigger(this.ast),this.replaceUrls(this.ast),this.id=qn(),this.replaceIds(this.ast),this.imported=[],this.urls(this.ast),this.rules(this.ast),this.atrules(this.ast),await this.hooks.afterTreeWalk.trigger(this.ast,this),this.ast}insertRule(o){let p=this.ast.children.appendData(o);return this.declarations(o),p}urls(o){Tr.default.walk(o,{visit:"Url",enter:(p,d,f)=>{this.hooks.onUrl.trigger(p,d,f)}})}atrules(o){Tr.default.walk(o,{visit:"Atrule",enter:(p,d,f)=>{let a=Tr.default.keyword(p.name).basename;a==="page"&&(this.hooks.onAtPage.trigger(p,d,f),this.declarations(p,d,f)),a==="media"&&(this.hooks.onAtMedia.trigger(p,d,f),this.declarations(p,d,f)),a==="import"&&(this.hooks.onImport.trigger(p,d,f),this.imports(p,d,f))}})}rules(o){Tr.default.walk(o,{visit:"Rule",enter:(p,d,f)=>{this.hooks.onRule.trigger(p,d,f),this.declarations(p,d,f),this.onSelector(p,d,f)}})}declarations(o,p,d){Tr.default.walk(o,{visit:"Declaration",enter:(f,a,T)=>{this.hooks.onDeclaration.trigger(f,a,T,{ruleNode:o,ruleItem:p,rulelist:d}),f.property==="content"&&Tr.default.walk(f,{visit:"Function",enter:(M,B,G)=>{this.hooks.onContent.trigger(M,B,G,{declarationNode:f,dItem:a,dList:T},{ruleNode:o,ruleItem:p,rulelist:d})}})}})}onSelector(o,p,d){Tr.default.walk(o,{visit:"Selector",enter:(f,a,T)=>{this.hooks.onSelector.trigger(f,a,T,{ruleNode:o,ruleItem:p,rulelist:d}),f.children.forEach(M=>{M.type==="PseudoElementSelector"&&Tr.default.walk(M,{visit:"PseudoElementSelector",enter:(B,G,J)=>{this.hooks.onPseudoSelector.trigger(B,G,J,{selectNode:f,selectItem:a,selectList:T},{ruleNode:o,ruleItem:p,rulelist:d})}})})}})}replaceUrls(o){Tr.default.walk(o,{visit:"Url",enter:(p,d,f)=>{let a=p.value.value;if(!(p.value.type==="Raw"&&a.startsWith("data:")||p.value.type==="String"&&(a.startsWith('"data:')||a.startsWith("'data:")))){let T=a.replace(/["']/g,""),M=new URL(T,this.url);p.value.value=M.toString()}}})}addScope(o,p){Tr.default.walk(o,{visit:"Selector",enter:(d,f,a)=>{let T=d.children;T.prepend(T.createItem({type:"WhiteSpace",value:" "})),T.prepend(T.createItem({type:"IdSelector",name:p,loc:null,children:null}))}})}getNamedPageSelectors(o){let p={};return Tr.default.walk(o,{visit:"Rule",enter:(d,f,a)=>{Tr.default.walk(d,{visit:"Declaration",enter:(T,M,B)=>{if(T.property==="page"){let G=T.value.children.first(),J=G.name,ie=Tr.default.generate(d.prelude);p[J]={name:J,selector:ie},T.property="break-before",G.type="Identifier",G.name="always"}}})}}),p}replaceIds(o){Tr.default.walk(o,{visit:"Rule",enter:(p,d,f)=>{Tr.default.walk(p,{visit:"IdSelector",enter:(a,T,M)=>{let B=a.name;a.flags=null,a.matcher="=",a.name={type:"Identifier",loc:null,name:"data-id"},a.type="AttributeSelector",a.value={type:"String",loc:null,value:`"${B}"`}}})}})}imports(o,p,d){let f=[];Tr.default.walk(o,{visit:"MediaQuery",enter:(T,M,B)=>{Tr.default.walk(T,{visit:"Identifier",enter:(G,J,ie)=>{f.push(G.name)}})}}),!f.some((T,M)=>{let B=T;return B==="not"?(B=f[M+1],!(B==="screen"||B==="speech")):B==="screen"||B==="speech"})&&Tr.default.walk(o,{visit:"String",enter:(T,M,B)=>{let G=T.value.replace(/["']/g,""),ie=new URL(G,this.url).toString();this.imported.push(ie),d.remove(p)}})}set text(o){this._text=o}get text(){return this._text}toString(o){return Tr.default.generate(o||this.ast)}},EC=Iy;var AC=`
:root {
	--pagedjs-width: 8.5in;
	--pagedjs-height: 11in;
	--pagedjs-width-right: 8.5in;
	--pagedjs-height-right: 11in;
	--pagedjs-width-left: 8.5in;
	--pagedjs-height-left: 11in;
	--pagedjs-pagebox-width: 8.5in;
	--pagedjs-pagebox-height: 11in;
	--pagedjs-footnotes-height: 0mm;
	--pagedjs-margin-top: 1in;
	--pagedjs-margin-right: 1in;
	--pagedjs-margin-bottom: 1in;
	--pagedjs-margin-left: 1in;
	--pagedjs-padding-top: 0mm;
	--pagedjs-padding-right: 0mm;
	--pagedjs-padding-bottom: 0mm;
	--pagedjs-padding-left: 0mm;
	--pagedjs-border-top: 0mm;
	--pagedjs-border-right: 0mm;
	--pagedjs-border-bottom: 0mm;
	--pagedjs-border-left: 0mm;
	--pagedjs-bleed-top: 0mm;
	--pagedjs-bleed-right: 0mm;
	--pagedjs-bleed-bottom: 0mm;
	--pagedjs-bleed-left: 0mm;
	--pagedjs-bleed-right-top: 0mm;
	--pagedjs-bleed-right-right: 0mm;
	--pagedjs-bleed-right-bottom: 0mm;
	--pagedjs-bleed-right-left: 0mm;
	--pagedjs-bleed-left-top: 0mm;
	--pagedjs-bleed-left-right: 0mm;
	--pagedjs-bleed-left-bottom: 0mm;
	--pagedjs-bleed-left-left: 0mm;
	--pagedjs-crop-color: black;
	--pagedjs-crop-shadow: white;
	--pagedjs-crop-offset: 2mm;
	--pagedjs-crop-stroke: 1px;
	--pagedjs-cross-size: 5mm;
	--pagedjs-mark-cross-display: none;
	--pagedjs-mark-crop-display: none;
	--pagedjs-page-count: 0;
	--pagedjs-page-counter-increment: 1;
	--pagedjs-footnotes-count: 0;
	--pagedjs-column-gap-offset: 1000px;
}

@page {
	size: letter;
	margin: 0;
}

.pagedjs_sheet {
	box-sizing: border-box;
	width: var(--pagedjs-width);
	height: var(--pagedjs-height);
	overflow: hidden;
	position: relative;
	display: grid;
	grid-template-columns: [bleed-left] var(--pagedjs-bleed-left) [sheet-center] calc(var(--pagedjs-width) - var(--pagedjs-bleed-left) - var(--pagedjs-bleed-right)) [bleed-right] var(--pagedjs-bleed-right);
	grid-template-rows: [bleed-top] var(--pagedjs-bleed-top) [sheet-middle] calc(var(--pagedjs-height) - var(--pagedjs-bleed-top) - var(--pagedjs-bleed-bottom)) [bleed-bottom] var(--pagedjs-bleed-bottom);
}

.pagedjs_right_page .pagedjs_sheet {
	width: var(--pagedjs-width-right);
	height: var(--pagedjs-height-right);
	grid-template-columns: [bleed-left] var(--pagedjs-bleed-right-left) [sheet-center] calc(var(--pagedjs-width) - var(--pagedjs-bleed-right-left) - var(--pagedjs-bleed-right-right)) [bleed-right] var(--pagedjs-bleed-right-right);
	grid-template-rows: [bleed-top] var(--pagedjs-bleed-right-top) [sheet-middle] calc(var(--pagedjs-height) - var(--pagedjs-bleed-right-top) - var(--pagedjs-bleed-right-bottom)) [bleed-bottom] var(--pagedjs-bleed-right-bottom);
}

.pagedjs_left_page .pagedjs_sheet {
	width: var(--pagedjs-width-left);
	height: var(--pagedjs-height-left);
	grid-template-columns: [bleed-left] var(--pagedjs-bleed-left-left) [sheet-center] calc(var(--pagedjs-width) - var(--pagedjs-bleed-left-left) - var(--pagedjs-bleed-left-right)) [bleed-right] var(--pagedjs-bleed-left-right);
	grid-template-rows: [bleed-top] var(--pagedjs-bleed-left-top) [sheet-middle] calc(var(--pagedjs-height) - var(--pagedjs-bleed-left-top) - var(--pagedjs-bleed-left-bottom)) [bleed-bottom] var(--pagedjs-bleed-left-bottom);
}

.pagedjs_bleed {
	display: flex;
	align-items: center;
	justify-content: center;
	flex-wrap: nowrap;
	overflow: hidden;
}

.pagedjs_bleed-top {
	grid-column: bleed-left / -1;
	grid-row: bleed-top;
	flex-direction: row;
}

.pagedjs_bleed-bottom {
	grid-column: bleed-left / -1;
	grid-row: bleed-bottom;
	flex-direction: row;
}

.pagedjs_bleed-left {
	grid-column: bleed-left;
	grid-row: bleed-top / -1;
	flex-direction: column;
}

.pagedjs_bleed-right {
	grid-column: bleed-right;
	grid-row: bleed-top / -1;
	flex-direction: column;
}

.pagedjs_marks-crop {
	display: var(--pagedjs-mark-crop-display);
	flex-grow: 0;
	flex-shrink: 0;
	z-index: 9999999999;
}

.pagedjs_bleed-top .pagedjs_marks-crop:nth-child(1),
.pagedjs_bleed-bottom .pagedjs_marks-crop:nth-child(1) {
	width: calc(var(--pagedjs-bleed-left) - var(--pagedjs-crop-stroke));
	border-right: var(--pagedjs-crop-stroke) solid var(--pagedjs-crop-color);
	box-shadow: 1px 0px 0px 0px var(--pagedjs-crop-shadow);
}

.pagedjs_right_page .pagedjs_bleed-top .pagedjs_marks-crop:nth-child(1),
.pagedjs_right_page .pagedjs_bleed-bottom .pagedjs_marks-crop:nth-child(1) {
	width: calc(var(--pagedjs-bleed-right-left) - var(--pagedjs-crop-stroke));
}

.pagedjs_left_page .pagedjs_bleed-top .pagedjs_marks-crop:nth-child(1),
.pagedjs_left_page .pagedjs_bleed-bottom .pagedjs_marks-crop:nth-child(1) {
	width: calc(var(--pagedjs-bleed-left-left) - var(--pagedjs-crop-stroke));
}

.pagedjs_bleed-top .pagedjs_marks-crop:nth-child(3),
.pagedjs_bleed-bottom .pagedjs_marks-crop:nth-child(3) {
	width: calc(var(--pagedjs-bleed-right) - var(--pagedjs-crop-stroke));
	border-left: var(--pagedjs-crop-stroke) solid var(--pagedjs-crop-color);
	box-shadow: -1px 0px 0px 0px var(--pagedjs-crop-shadow);
}

.pagedjs_right_page .pagedjs_bleed-top .pagedjs_marks-crop:nth-child(3),
.pagedjs_right_page .pagedjs_bleed-bottom .pagedjs_marks-crop:nth-child(3) {
	width: calc(var(--pagedjs-bleed-right-right) - var(--pagedjs-crop-stroke));
}

.pagedjs_left_page .pagedjs_bleed-top .pagedjs_marks-crop:nth-child(3),
.pagedjs_left_page .pagedjs_bleed-bottom .pagedjs_marks-crop:nth-child(3) {
	width: calc(var(--pagedjs-bleed-left-right) - var(--pagedjs-crop-stroke));
}

.pagedjs_bleed-top .pagedjs_marks-crop {
	align-self: flex-start;
	height: calc(var(--pagedjs-bleed-top) - var(--pagedjs-crop-offset));
}

.pagedjs_right_page .pagedjs_bleed-top .pagedjs_marks-crop {
	height: calc(var(--pagedjs-bleed-right-top) - var(--pagedjs-crop-offset));
}

.pagedjs_left_page .pagedjs_bleed-top .pagedjs_marks-crop {
	height: calc(var(--pagedjs-bleed-left-top) - var(--pagedjs-crop-offset));
}

.pagedjs_bleed-bottom .pagedjs_marks-crop {
	align-self: flex-end;
	height: calc(var(--pagedjs-bleed-bottom) - var(--pagedjs-crop-offset));
}

.pagedjs_right_page .pagedjs_bleed-bottom .pagedjs_marks-crop {
	height: calc(var(--pagedjs-bleed-right-bottom) - var(--pagedjs-crop-offset));
}

.pagedjs_left_page .pagedjs_bleed-bottom .pagedjs_marks-crop {
	height: calc(var(--pagedjs-bleed-left-bottom) - var(--pagedjs-crop-offset));
}

.pagedjs_bleed-left .pagedjs_marks-crop:nth-child(1),
.pagedjs_bleed-right .pagedjs_marks-crop:nth-child(1) {
	height: calc(var(--pagedjs-bleed-top) - var(--pagedjs-crop-stroke));
	border-bottom: var(--pagedjs-crop-stroke) solid var(--pagedjs-crop-color);
	box-shadow: 0px 1px 0px 0px var(--pagedjs-crop-shadow);
}

.pagedjs_right_page .pagedjs_bleed-left .pagedjs_marks-crop:nth-child(1),
.pagedjs_right_page .pagedjs_bleed-right .pagedjs_marks-crop:nth-child(1) {
	height: calc(var(--pagedjs-bleed-right-top) - var(--pagedjs-crop-stroke));
}

.pagedjs_left_page .pagedjs_bleed-left .pagedjs_marks-crop:nth-child(1),
.pagedjs_left_page .pagedjs_bleed-right .pagedjs_marks-crop:nth-child(1) {
	height: calc(var(--pagedjs-bleed-left-top) - var(--pagedjs-crop-stroke));
}

.pagedjs_bleed-left .pagedjs_marks-crop:nth-child(3),
.pagedjs_bleed-right .pagedjs_marks-crop:nth-child(3) {
	height: calc(var(--pagedjs-bleed-bottom) - var(--pagedjs-crop-stroke));
	border-top: var(--pagedjs-crop-stroke) solid var(--pagedjs-crop-color);
	box-shadow: 0px -1px 0px 0px var(--pagedjs-crop-shadow);
}

.pagedjs_right_page .pagedjs_bleed-left .pagedjs_marks-crop:nth-child(3),
.pagedjs_right_page .pagedjs_bleed-right .pagedjs_marks-crop:nth-child(3) {
	height: calc(var(--pagedjs-bleed-right-bottom) - var(--pagedjs-crop-stroke));
}

.pagedjs_left_page .pagedjs_bleed-left .pagedjs_marks-crop:nth-child(3),
.pagedjs_left_page .pagedjs_bleed-right .pagedjs_marks-crop:nth-child(3) {
	height: calc(var(--pagedjs-bleed-left-bottom) - var(--pagedjs-crop-stroke));
}

.pagedjs_bleed-left .pagedjs_marks-crop {
	width: calc(var(--pagedjs-bleed-left) - var(--pagedjs-crop-offset));
	align-self: flex-start;
}

.pagedjs_right_page .pagedjs_bleed-left .pagedjs_marks-crop {
	width: calc(var(--pagedjs-bleed-right-left) - var(--pagedjs-crop-offset));
}

.pagedjs_left_page .pagedjs_bleed-left .pagedjs_marks-crop {
	width: calc(var(--pagedjs-bleed-left-left) - var(--pagedjs-crop-offset));
}

.pagedjs_bleed-right .pagedjs_marks-crop {
	width: calc(var(--pagedjs-bleed-right) - var(--pagedjs-crop-offset));
	align-self: flex-end;
}

.pagedjs_right_page .pagedjs_bleed-right .pagedjs_marks-crop {
	width: calc(var(--pagedjs-bleed-right-right) - var(--pagedjs-crop-offset));
}

.pagedjs_left_page .pagedjs_bleed-right .pagedjs_marks-crop {
	width: calc(var(--pagedjs-bleed-left-right) - var(--pagedjs-crop-offset));
}

.pagedjs_marks-middle {
	display: flex;
	flex-grow: 1;
	flex-shrink: 0;
	align-items: center;
	justify-content: center;
}

.pagedjs_marks-cross {
	display: var(--pagedjs-mark-cross-display);
	background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIzMi41MzdweCIgaGVpZ2h0PSIzMi41MzdweCIgdmlld0JveD0iMC4xMDQgMC4xMDQgMzIuNTM3IDMyLjUzNyIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwLjEwNCAwLjEwNCAzMi41MzcgMzIuNTM3IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNGRkZGRkYiIHN0cm9rZS13aWR0aD0iMy4zODkzIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0yOS45MzEsMTYuMzczYzAsNy40ODktNi4wNjgsMTMuNTYtMTMuNTU4LDEzLjU2Yy03LjQ4MywwLTEzLjU1Ny02LjA3Mi0xMy41NTctMTMuNTZjMC03LjQ4Niw2LjA3NC0xMy41NTQsMTMuNTU3LTEzLjU1NEMyMy44NjIsMi44MTksMjkuOTMxLDguODg3LDI5LjkzMSwxNi4zNzN6Ii8+PGxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjRkZGRkZGIiBzdHJva2Utd2lkdGg9IjMuMzg5MyIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiB4MT0iMC4xMDQiIHkxPSIxNi4zNzMiIHgyPSIzMi42NDIiIHkyPSIxNi4zNzMiLz48bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiNGRkZGRkYiIHN0cm9rZS13aWR0aD0iMy4zODkzIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHgxPSIxNi4zNzMiIHkxPSIwLjEwNCIgeDI9IjE2LjM3MyIgeTI9IjMyLjY0MiIvPjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0ZGRkZGRiIgc3Ryb2tlLXdpZHRoPSIzLjM4OTMiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTI0LjUwOCwxNi4zNzNjMCw0LjQ5Ni0zLjYzOCw4LjEzNS04LjEzNSw4LjEzNWMtNC40OTEsMC04LjEzNS0zLjYzOC04LjEzNS04LjEzNWMwLTQuNDg5LDMuNjQ0LTguMTM1LDguMTM1LTguMTM1QzIwLjg2OSw4LjIzOSwyNC41MDgsMTEuODg0LDI0LjUwOCwxNi4zNzN6Ii8+PHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjAuNjc3OCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMjkuOTMxLDE2LjM3M2MwLDcuNDg5LTYuMDY4LDEzLjU2LTEzLjU1OCwxMy41NmMtNy40ODMsMC0xMy41NTctNi4wNzItMTMuNTU3LTEzLjU2YzAtNy40ODYsNi4wNzQtMTMuNTU0LDEzLjU1Ny0xMy41NTRDMjMuODYyLDIuODE5LDI5LjkzMSw4Ljg4NywyOS45MzEsMTYuMzczeiIvPjxsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIwLjY3NzgiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgeDE9IjAuMTA0IiB5MT0iMTYuMzczIiB4Mj0iMzIuNjQyIiB5Mj0iMTYuMzczIi8+PGxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjAuNjc3OCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiB4MT0iMTYuMzczIiB5MT0iMC4xMDQiIHgyPSIxNi4zNzMiIHkyPSIzMi42NDIiLz48cGF0aCBkPSJNMjQuNTA4LDE2LjM3M2MwLDQuNDk2LTMuNjM4LDguMTM1LTguMTM1LDguMTM1Yy00LjQ5MSwwLTguMTM1LTMuNjM4LTguMTM1LTguMTM1YzAtNC40ODksMy42NDQtOC4xMzUsOC4xMzUtOC4xMzVDMjAuODY5LDguMjM5LDI0LjUwOCwxMS44ODQsMjQuNTA4LDE2LjM3MyIvPjxsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0ZGRkZGRiIgc3Ryb2tlLXdpZHRoPSIwLjY3NzgiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgeDE9IjguMjM5IiB5MT0iMTYuMzczIiB4Mj0iMjQuNTA4IiB5Mj0iMTYuMzczIi8+PGxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjRkZGRkZGIiBzdHJva2Utd2lkdGg9IjAuNjc3OCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiB4MT0iMTYuMzczIiB5MT0iOC4yMzkiIHgyPSIxNi4zNzMiIHkyPSIyNC41MDgiLz48L3N2Zz4=);
  background-repeat: no-repeat;
  background-position: 50% 50%;
  background-size: var(--pagedjs-cross-size);

  z-index: 2147483647;
	width: var(--pagedjs-cross-size);
	height: var(--pagedjs-cross-size);
}

.pagedjs_pagebox {
	box-sizing: border-box;
	width: var(--pagedjs-pagebox-width);
	height: var(--pagedjs-pagebox-height);
	position: relative;
	display: grid;
	grid-template-columns: [left] var(--pagedjs-margin-left) [center] calc(var(--pagedjs-pagebox-width) - var(--pagedjs-margin-left) - var(--pagedjs-margin-right)) [right] var(--pagedjs-margin-right);
	grid-template-rows: [header] var(--pagedjs-margin-top) [page] calc(var(--pagedjs-pagebox-height) - var(--pagedjs-margin-top) - var(--pagedjs-margin-bottom)) [footer] var(--pagedjs-margin-bottom);
	grid-column: sheet-center;
	grid-row: sheet-middle;
}

.pagedjs_pagebox * {
	box-sizing: border-box;
}

.pagedjs_margin-top {
	width: calc(var(--pagedjs-pagebox-width) - var(--pagedjs-margin-left) - var(--pagedjs-margin-right));
	height: var(--pagedjs-margin-top);
	grid-column: center;
	grid-row: header;
	flex-wrap: nowrap;
	display: grid;
	grid-template-columns: repeat(3, 1fr);
	grid-template-rows: 100%;
}

.pagedjs_margin-top-left-corner-holder {
	width: var(--pagedjs-margin-left);
	height: var(--pagedjs-margin-top);
	display: flex;
	grid-column: left;
	grid-row: header;
}

.pagedjs_margin-top-right-corner-holder {
	width: var(--pagedjs-margin-right);
	height: var(--pagedjs-margin-top);
	display: flex;
	grid-column: right;
	grid-row: header;
}

.pagedjs_margin-top-left-corner {
	width: var(--pagedjs-margin-left);
}

.pagedjs_margin-top-right-corner {
	width: var(--pagedjs-margin-right);
}

.pagedjs_margin-right {
	height: calc(var(--pagedjs-pagebox-height) - var(--pagedjs-margin-top) - var(--pagedjs-margin-bottom));
	width: var(--pagedjs-margin-right);
	right: 0;
	grid-column: right;
	grid-row: page;
	display: grid;
	grid-template-rows: repeat(3, 33.3333%);
	grid-template-columns: 100%;
}

.pagedjs_margin-bottom {
	width: calc(var(--pagedjs-pagebox-width) - var(--pagedjs-margin-left) - var(--pagedjs-margin-right));
	height: var(--pagedjs-margin-bottom);
	grid-column: center;
	grid-row: footer;
	display: grid;
	grid-template-columns: repeat(3, 1fr);
	grid-template-rows: 100%;
}

.pagedjs_margin-bottom-left-corner-holder {
	width: var(--pagedjs-margin-left);
	height: var(--pagedjs-margin-bottom);
	display: flex;
	grid-column: left;
	grid-row: footer;
}

.pagedjs_margin-bottom-right-corner-holder {
	width: var(--pagedjs-margin-right);
	height: var(--pagedjs-margin-bottom);
	display: flex;
	grid-column: right;
	grid-row: footer;
}

.pagedjs_margin-bottom-left-corner {
	width: var(--pagedjs-margin-left);
}

.pagedjs_margin-bottom-right-corner {
	width: var(--pagedjs-margin-right);
}



.pagedjs_margin-left {
	height: calc(var(--pagedjs-pagebox-height) - var(--pagedjs-margin-top) - var(--pagedjs-margin-bottom));
	width: var(--pagedjs-margin-left);
	grid-column: left;
	grid-row: page;
	display: grid;
	grid-template-rows: repeat(3, 33.33333%);
	grid-template-columns: 100%;
}

.pagedjs_pages .pagedjs_pagebox .pagedjs_margin:not(.hasContent) {
	visibility: hidden;
}

.pagedjs_pagebox > .pagedjs_area {
	grid-column: center;
	grid-row: page;
	width: 100%;
	height: 100%;
	padding: var(--pagedjs-padding-top) var(--pagedjs-padding-right) var(--pagedjs-padding-bottom) var(--pagedjs-padding-left);
	border-top: var(--pagedjs-border-top);
	border-right: var(--pagedjs-border-right);
	border-bottom: var(--pagedjs-border-bottom);
	border-left: var(--pagedjs-border-left);
}

.pagedjs_pagebox > .pagedjs_area > .pagedjs_page_content {
	width: 100%;
	height: calc(100% - var(--pagedjs-footnotes-height));
	position: relative;
	column-fill: auto;
}

.pagedjs_pagebox > .pagedjs_area > .pagedjs_page_content > div {
	height: inherit;
}

.pagedjs_pagebox > .pagedjs_area > .pagedjs_footnote_area {
	position: relative;
	overflow: hidden;
	height: var(--pagedjs-footnotes-height);
	display: flex;
    justify-content: flex-end;
    flex-flow: column;
}

.pagedjs_pagebox > .pagedjs_area > .pagedjs_footnote_area > .pagedjs_footnote_content {
	overflow: hidden;
}

.pagedjs_pagebox > .pagedjs_area > .pagedjs_footnote_area > .pagedjs_footnote_inner_content {
	overflow: hidden;
}

.pagedjs_area [data-footnote-call] {
	all: unset;
	counter-increment: footnote;
}

.pagedjs_area [data-split-from] {
	counter-increment: unset;
	counter-reset: unset;
}

[data-footnote-call]::after {
	vertical-align: super;
	font-size: 65%;
	line-height: normal;
	content: counter(footnote);
}

@supports ( font-variant-position: super ) {
	[data-footnote-call]::after {
		vertical-align: baseline;
		font-size: 100%;
		line-height: inherit;
		font-variant-position: super;
	}
}

.pagedjs_footnote_empty {
	display: none;
}

.pagedjs_area [data-split-from] {
	counter-increment: unset;
	counter-reset: unset;
}

[data-footnote-marker] {
	text-indent: 0;
	display: list-item;
	list-style-position: inside;
}

[data-footnote-marker][data-split-from] {
	list-style: none;
}

[data-footnote-marker]:not([data-split-from]) {
	counter-increment: footnote-marker;
}

[data-footnote-marker]::marker {
	content: counter(footnote-marker) ". ";
}

[data-footnote-marker][data-split-from]::marker {
	content: unset;
}

.pagedjs_area .pagedjs_footnote_inner_content [data-note-display="inline"] {
 	display: inline;
}

.pagedjs_page {
	counter-increment: page var(--pagedjs-page-counter-increment);
	width: var(--pagedjs-width);
	height: var(--pagedjs-height);
}

.pagedjs_page.pagedjs_right_page {
	width: var(--pagedjs-width-right);
	height: var(--pagedjs-height-right);
}

.pagedjs_page.pagedjs_left_page {
	width: var(--pagedjs-width-left);
	height: var(--pagedjs-height-left);
}

.pagedjs_pages {
	counter-reset: pages var(--pagedjs-page-count) footnote var(--pagedjs-footnotes-count) footnote-marker var(--pagedjs-footnotes-count);
}

.pagedjs_pagebox .pagedjs_margin-top-left-corner,
.pagedjs_pagebox .pagedjs_margin-top-right-corner,
.pagedjs_pagebox .pagedjs_margin-bottom-left-corner,
.pagedjs_pagebox .pagedjs_margin-bottom-right-corner,
.pagedjs_pagebox .pagedjs_margin-top-left,
.pagedjs_pagebox .pagedjs_margin-top-right,
.pagedjs_pagebox .pagedjs_margin-bottom-left,
.pagedjs_pagebox .pagedjs_margin-bottom-right,
.pagedjs_pagebox .pagedjs_margin-top-center,
.pagedjs_pagebox .pagedjs_margin-bottom-center,
.pagedjs_pagebox .pagedjs_margin-top-center,
.pagedjs_pagebox .pagedjs_margin-bottom-center,
.pagedjs_margin-right-middle,
.pagedjs_margin-left-middle  {
	display: flex;
	align-items: center;
}

.pagedjs_margin-right-top,
.pagedjs_margin-left-top  {
	display: flex;
	align-items: flex-top;
}


.pagedjs_margin-right-bottom,
.pagedjs_margin-left-bottom  {
	display: flex;
	align-items: flex-end;
}



/*
.pagedjs_pagebox .pagedjs_margin-top-center,
.pagedjs_pagebox .pagedjs_margin-bottom-center {
	height: 100%;
	display: none;
	align-items: center;
	flex: 1 0 33%;
	margin: 0 auto;
}

.pagedjs_pagebox .pagedjs_margin-top-left-corner,
.pagedjs_pagebox .pagedjs_margin-top-right-corner,
.pagedjs_pagebox .pagedjs_margin-bottom-right-corner,
.pagedjs_pagebox .pagedjs_margin-bottom-left-corner {
	display: none;
	align-items: center;
}

.pagedjs_pagebox .pagedjs_margin-left-top,
.pagedjs_pagebox .pagedjs_margin-right-top {
	display: none;
	align-items: flex-start;
}

.pagedjs_pagebox .pagedjs_margin-right-middle,
.pagedjs_pagebox .pagedjs_margin-left-middle {
	display: none;
	align-items: center;
}

.pagedjs_pagebox .pagedjs_margin-left-bottom,
.pagedjs_pagebox .pagedjs_margin-right-bottom {
	display: none;
	align-items: flex-end;
}
*/

.pagedjs_pagebox .pagedjs_margin-top-left,
.pagedjs_pagebox .pagedjs_margin-top-right-corner,
.pagedjs_pagebox .pagedjs_margin-bottom-left,
.pagedjs_pagebox .pagedjs_margin-bottom-right-corner { text-align: left; }

.pagedjs_pagebox .pagedjs_margin-top-left-corner,
.pagedjs_pagebox .pagedjs_margin-top-right,
.pagedjs_pagebox .pagedjs_margin-bottom-left-corner,
.pagedjs_pagebox .pagedjs_margin-bottom-right { text-align: right; }

.pagedjs_pagebox .pagedjs_margin-top-center,
.pagedjs_pagebox .pagedjs_margin-bottom-center,
.pagedjs_pagebox .pagedjs_margin-left-top,
.pagedjs_pagebox .pagedjs_margin-left-middle,
.pagedjs_pagebox .pagedjs_margin-left-bottom,
.pagedjs_pagebox .pagedjs_margin-right-top,
.pagedjs_pagebox .pagedjs_margin-right-middle,
.pagedjs_pagebox .pagedjs_margin-right-bottom { text-align: center; }

.pagedjs_pages .pagedjs_margin .pagedjs_margin-content {
	width: 100%;
}

.pagedjs_pages .pagedjs_margin-left .pagedjs_margin-content::after,
.pagedjs_pages .pagedjs_margin-top .pagedjs_margin-content::after,
.pagedjs_pages .pagedjs_margin-right .pagedjs_margin-content::after,
.pagedjs_pages .pagedjs_margin-bottom .pagedjs_margin-content::after {
	display: block;
}

.pagedjs_pages > .pagedjs_page > .pagedjs_sheet > .pagedjs_pagebox > .pagedjs_area > div [data-split-to] {
	margin-bottom: unset;
	padding-bottom: unset;
}

.pagedjs_pages > .pagedjs_page > .pagedjs_sheet > .pagedjs_pagebox > .pagedjs_area > div [data-split-from] {
	text-indent: unset;
	margin-top: unset;
	padding-top: unset;
	initial-letter: unset;
}

.pagedjs_pages > .pagedjs_page > .pagedjs_sheet > .pagedjs_pagebox > .pagedjs_area > div [data-split-from] > *::first-letter,
.pagedjs_pages > .pagedjs_page > .pagedjs_sheet > .pagedjs_pagebox > .pagedjs_area > div [data-split-from]::first-letter {
	color: unset;
	font-size: unset;
	font-weight: unset;
	font-family: unset;
	color: unset;
	line-height: unset;
	float: unset;
	padding: unset;
	margin: unset;
}

.pagedjs_pages > .pagedjs_page > .pagedjs_sheet > .pagedjs_pagebox > .pagedjs_area > div [data-split-to]:not([data-footnote-call]):after,
.pagedjs_pages > .pagedjs_page > .pagedjs_sheet > .pagedjs_pagebox > .pagedjs_area > div [data-split-to]:not([data-footnote-call])::after {
	content: unset;
}

.pagedjs_pages > .pagedjs_page > .pagedjs_sheet > .pagedjs_pagebox > .pagedjs_area > div [data-split-from]:not([data-footnote-call]):before,
.pagedjs_pages > .pagedjs_page > .pagedjs_sheet > .pagedjs_pagebox > .pagedjs_area > div [data-split-from]:not([data-footnote-call])::before {
	content: unset;
}

.pagedjs_pages > .pagedjs_page > .pagedjs_sheet > .pagedjs_pagebox > .pagedjs_area > div li[data-split-from]:first-of-type {
	list-style: none;
}

/*
[data-page]:not([data-split-from]),
[data-break-before="page"]:not([data-split-from]),
[data-break-before="always"]:not([data-split-from]),
[data-break-before="left"]:not([data-split-from]),
[data-break-before="right"]:not([data-split-from]),
[data-break-before="recto"]:not([data-split-from]),
[data-break-before="verso"]:not([data-split-from])
{
	break-before: column;
}

[data-page]:not([data-split-to]),
[data-break-after="page"]:not([data-split-to]),
[data-break-after="always"]:not([data-split-to]),
[data-break-after="left"]:not([data-split-to]),
[data-break-after="right"]:not([data-split-to]),
[data-break-after="recto"]:not([data-split-to]),
[data-break-after="verso"]:not([data-split-to])
{
	break-after: column;
}
*/

.pagedjs_clear-after::after {
	content: none !important;
}

[data-align-last-split-element='justify'] {
	text-align-last: justify;
}


@media print {
	html {
		width: 100%;
		height: 100%;
		-webkit-print-color-adjust: exact;
		print-color-adjust: exact;
	}
	body {
		margin: 0;
		padding: 0;
		width: 100% !important;
		height: 100% !important;
		min-width: 100%;
		max-width: 100%;
		min-height: 100%;
		max-height: 100%;
	}
	.pagedjs_pages {
		width: auto;
		display: block !important;
		transform: none !important;
		height: 100% !important;
		min-height: 100%;
		max-height: 100%;
		overflow: visible;
	}
	.pagedjs_page {
		margin: 0;
		padding: 0;
		max-height: 100%;
		min-height: 100%;
		height: 100% !important;
		page-break-after: always;
		break-after: page;
	}
	.pagedjs_sheet {
		margin: 0;
		padding: 0;
		max-height: 100%;
		min-height: 100%;
		height: 100% !important;
	}
}
`;async function Tf(s,o={}){return new Promise(function(p,d){let f=new XMLHttpRequest;f.open(o.method||"get",s,!0);for(let a in o.headers)f.setRequestHeader(a,o.headers[a]);f.withCredentials=o.credentials==="include",f.onload=()=>{let a=f.status===0&&s.startsWith("file://")?200:f.status;p(new Response(f.responseText,{status:a}))},f.onerror=d,f.send(o.body||null)})}var zy=class{constructor(o){this.sheets=[],this.inserted=[],this.hooks={},this.hooks.onUrl=new Pt(this),this.hooks.onAtPage=new Pt(this),this.hooks.onAtMedia=new Pt(this),this.hooks.onRule=new Pt(this),this.hooks.onDeclaration=new Pt(this),this.hooks.onContent=new Pt(this),this.hooks.onSelector=new Pt(this),this.hooks.onPseudoSelector=new Pt(this),this.hooks.onImport=new Pt(this),this.hooks.beforeTreeParse=new Pt(this),this.hooks.beforeTreeWalk=new Pt(this),this.hooks.afterTreeWalk=new Pt(this),o!==!1&&this.setup()}setup(){return this.base=this.insert(AC),this.styleEl=document.createElement("style"),document.head.appendChild(this.styleEl),this.styleSheet=this.styleEl.sheet,this.styleSheet}async add(){let o=[],p=[];for(var d=0;d<arguments.length;d++){let f;if(typeof arguments[d]=="object")for(let a in arguments[d]){let T=arguments[d];f=new Promise(function(M,B){p.push(a),M(T[a])})}else p.push(arguments[d]),f=Tf(arguments[d]).then(a=>a.text());o.push(f)}return await Promise.all(o).then(async f=>{let a="";for(let T=0;T<f.length;T++)a=await this.convertViaSheet(f[T],p[T]),this.insert(a);return a})}async convertViaSheet(o,p){let d=new EC(p,this.hooks);await d.parse(o);for(let f of d.imported){let a=await Tf(f).then(M=>M.text()),T=await this.convertViaSheet(a,f);this.insert(T)}return this.sheets.push(d),typeof d.width<"u"&&(this.width=d.width),typeof d.height<"u"&&(this.height=d.height),typeof d.orientation<"u"&&(this.orientation=d.orientation),d.toString()}insert(o){let p=document.querySelector("head"),d=document.createElement("style");return d.setAttribute("data-pagedjs-inserted-styles","true"),d.appendChild(document.createTextNode(o)),p.appendChild(d),this.inserted.push(d),d}destroy(){this.styleEl.remove(),this.inserted.forEach(o=>{o.remove()}),this.sheets=[]}},Ly=zy;var MP=$i(xl(),1);var MC=$i(xl(),1),Cf=class{constructor(o,p,d){let f=Object.assign({},o&&o.hooks,p&&p.hooks,d&&d.hooks);this.chunker=o,this.polisher=p,this.caller=d;for(let a in f)a in this&&f[a].register(this[a].bind(this))}};(0,MC.default)(Cf.prototype);var ri=Cf;var Ct=$i(Cn(),1);var Oy={A0:{width:{value:841,unit:"mm"},height:{value:1189,unit:"mm"}},A1:{width:{value:594,unit:"mm"},height:{value:841,unit:"mm"}},A2:{width:{value:420,unit:"mm"},height:{value:594,unit:"mm"}},A3:{width:{value:297,unit:"mm"},height:{value:420,unit:"mm"}},A4:{width:{value:210,unit:"mm"},height:{value:297,unit:"mm"}},A5:{width:{value:148,unit:"mm"},height:{value:210,unit:"mm"}},A6:{width:{value:105,unit:"mm"},height:{value:148,unit:"mm"}},A7:{width:{value:74,unit:"mm"},height:{value:105,unit:"mm"}},A8:{width:{value:52,unit:"mm"},height:{value:74,unit:"mm"}},A9:{width:{value:37,unit:"mm"},height:{value:52,unit:"mm"}},A10:{width:{value:26,unit:"mm"},height:{value:37,unit:"mm"}},B4:{width:{value:250,unit:"mm"},height:{value:353,unit:"mm"}},B5:{width:{value:176,unit:"mm"},height:{value:250,unit:"mm"}},letter:{width:{value:8.5,unit:"in"},height:{value:11,unit:"in"}},legal:{width:{value:8.5,unit:"in"},height:{value:14,unit:"in"}},ledger:{width:{value:11,unit:"in"},height:{value:17,unit:"in"}}};var Dy=class extends ri{constructor(o,p,d){super(o,p,d),this.pages={},this.width=void 0,this.height=void 0,this.orientation=void 0,this.marginalia={}}pageModel(o){return{selector:o,name:void 0,psuedo:void 0,nth:void 0,marginalia:{},width:void 0,height:void 0,orientation:void 0,margin:{top:{},right:{},left:{},bottom:{}},padding:{top:{},right:{},left:{},bottom:{}},border:{top:{},right:{},left:{},bottom:{}},backgroundOrigin:void 0,block:{},marks:void 0,notes:void 0,added:!1}}onAtPage(o,p,d){let f,a,T="",M,B,G,J=!1;o.prelude?(M=this.getTypeSelector(o),B=this.getPsuedoSelector(o),G=this.getNthSelector(o),T=Ct.default.generate(o.prelude)):T="*",T in this.pages?(f=this.pages[T],a=this.replaceMarginalia(o),J=!0,f.added=!1):(f=this.pageModel(T),a=this.replaceMarginalia(o),this.pages[T]=f),f.name=M,f.psuedo=B,f.nth=G,J?f.marginalia=Object.assign(f.marginalia,a):f.marginalia=a;let ie=this.replaceNotes(o);f.notes=ie;let $=this.replaceDeclarations(o);if($.size&&(f.size=$.size,f.width=$.size.width,f.height=$.size.height,f.orientation=$.size.orientation,f.format=$.size.format),$.bleed&&$.bleed[0]!="auto")switch($.bleed.length){case 4:f.bleed={top:$.bleed[0],right:$.bleed[1],bottom:$.bleed[2],left:$.bleed[3]};break;case 3:f.bleed={top:$.bleed[0],right:$.bleed[1],bottom:$.bleed[2],left:$.bleed[1]};break;case 2:f.bleed={top:$.bleed[0],right:$.bleed[1],bottom:$.bleed[0],left:$.bleed[1]};break;default:f.bleed={top:$.bleed[0],right:$.bleed[0],bottom:$.bleed[0],left:$.bleed[0]}}$.marks&&((!$.bleed||$.bleed&&$.bleed[0]==="auto")&&(f.bleed={top:{value:6,unit:"mm"},right:{value:6,unit:"mm"},bottom:{value:6,unit:"mm"},left:{value:6,unit:"mm"}}),f.marks=$.marks),$.margin&&(f.margin=$.margin),$.padding&&(f.padding=$.padding),$.border&&(f.border=$.border),$.marks&&(f.marks=$.marks),J?f.block.children.appendList(o.block.children):f.block=o.block,d.remove(p)}afterTreeWalk(o,p){let d="*"in this.pages&&this.pages["*"].added===!1;if(this.addPageClasses(this.pages,o,p),d){let f=this.pages["*"].width,a=this.pages["*"].height,T=this.pages["*"].format,M=this.pages["*"].orientation,B=this.pages["*"].bleed,G=this.pages["*"].marks,J,ie;":left"in this.pages&&(J=this.pages[":left"].bleed),":right"in this.pages&&(ie=this.pages[":right"].bleed),f&&a&&(this.width!==f||this.height!==a)&&(this.width=f,this.height=a,this.format=T,this.orientation=M,this.addRootVars(o,f,a,M,B,ie,J,G),this.addRootPage(o,this.pages["*"].size,B,ie,J),this.emit("size",{width:f,height:a,orientation:M,format:T,bleed:B}),this.emit("atpages",this.pages))}}getTypeSelector(o){let p;return Ct.default.walk(o,{visit:"TypeSelector",enter:(d,f,a)=>{p=d.name}}),p}getPsuedoSelector(o){let p;return Ct.default.walk(o,{visit:"PseudoClassSelector",enter:(d,f,a)=>{d.name!=="nth"&&(p=d.name)}}),p}getNthSelector(o){let p;return Ct.default.walk(o,{visit:"PseudoClassSelector",enter:(d,f,a)=>{d.name==="nth"&&d.children&&(p=d.children.first().value)}}),p}replaceMarginalia(o){let p={},d=["top-left-corner","top-left","top","top-center","top-right","top-right-corner","bottom-left-corner","bottom-left","bottom","bottom-center","bottom-right","bottom-right-corner","left-top","left-middle","left","left-bottom","top-right-corner","right-top","right-middle","right","right-bottom","right-right-corner"];return Ct.default.walk(o.block,{visit:"Atrule",enter:(f,a,T)=>{let M=f.name;d.includes(M)&&(M==="top"&&(M="top-center"),M==="right"&&(M="right-middle"),M==="left"&&(M="left-middle"),M==="bottom"&&(M="bottom-center"),p[M]=f.block,T.remove(a))}}),p}replaceNotes(o){let p={};return Ct.default.walk(o.block,{visit:"Atrule",enter:(d,f,a)=>{let T=d.name;T==="footnote"&&(p[T]=d.block,a.remove(f))}}),p}replaceDeclarations(o){let p={};return Ct.default.walk(o.block,{visit:"Declaration",enter:(d,f,a)=>{let T=Ct.default.property(d.property).name;if(T==="marks")p.marks=[],Ct.default.walk(d,{visit:"Identifier",enter:M=>{p.marks.push(M.name)}}),a.remove(f);else if(T==="margin")p.margin=this.getMargins(d),a.remove(f);else if(T.indexOf("margin-")===0){let M=T.substring(7);p.margin||(p.margin={top:{},right:{},left:{},bottom:{}}),p.margin[M]=d.value.children.first(),a.remove(f)}else if(T==="padding")p.padding=this.getPaddings(d.value),a.remove(f);else if(T.indexOf("padding-")===0){let M=T.substring(8);p.padding||(p.padding={top:{},right:{},left:{},bottom:{}}),p.padding[M]=d.value.children.first(),a.remove(f)}else if(T==="border")p.border||(p.border={top:{},right:{},left:{},bottom:{}}),p.border.top=Ct.default.generate(d.value),p.border.right=Ct.default.generate(d.value),p.border.left=Ct.default.generate(d.value),p.border.bottom=Ct.default.generate(d.value),a.remove(f);else if(T.indexOf("border-")===0){p.border||(p.border={top:{},right:{},left:{},bottom:{}});let M=T.substring(7);p.border[M]=Ct.default.generate(d.value),a.remove(f)}else T==="size"?(p.size=this.getSize(d),a.remove(f)):T==="bleed"&&(p.bleed=[],Ct.default.walk(d,{enter:M=>{switch(M.type){case"String":M.value.indexOf("auto")>-1&&p.bleed.push("auto");break;case"Dimension":p.bleed.push({value:M.value,unit:M.unit});break;case"Number":p.bleed.push({value:M.value,unit:"px"});break;default:}}}),a.remove(f))}}),p}getSize(o){let p,d,f,a;return Ct.default.walk(o,{visit:"Dimension",enter:(T,M,B)=>{let{value:G,unit:J}=T;typeof p>"u"?p={value:G,unit:J}:typeof d>"u"&&(d={value:G,unit:J})}}),Ct.default.walk(o,{visit:"String",enter:(T,M,B)=>{let G=T.value.replace(/["|']/g,""),J=Oy[G];J&&(p=J.width,d=J.height)}}),Ct.default.walk(o,{visit:"Identifier",enter:(T,M,B)=>{let G=T.name;if(G==="landscape"||G==="portrait")f=T.name;else if(G!=="auto"){let J=Oy[G];J&&(p=J.width,d=J.height),a=G}}}),{width:p,height:d,orientation:f,format:a}}getMargins(o){let p=[],d={top:{},right:{},left:{},bottom:{}};if(Ct.default.walk(o,{enter:f=>{switch(f.type){case"Dimension":p.push(f);break;case"Number":p.push({value:f.value,unit:"px"});break;default:}}}),p.length===1)for(let f in d)d[f]=p[0];else p.length===2?(d.top=p[0],d.right=p[1],d.bottom=p[0],d.left=p[1]):p.length===3?(d.top=p[0],d.right=p[1],d.bottom=p[2],d.left=p[1]):p.length===4&&(d.top=p[0],d.right=p[1],d.bottom=p[2],d.left=p[3]);return d}getPaddings(o){let p=[],d={top:{},right:{},left:{},bottom:{}};if(Ct.default.walk(o,{enter:f=>{switch(f.type){case"Dimension":p.push(f);break;case"Number":p.push({value:f.value,unit:"px"});break;default:}}}),p.length===1)for(let f in d)d[f]=p[0];else p.length===2?(d.top=p[0],d.right=p[1],d.bottom=p[0],d.left=p[1]):p.length===3?(d.top=p[0],d.right=p[1],d.bottom=p[2],d.left=p[1]):p.length===4&&(d.top=p[0],d.right=p[1],d.bottom=p[2],d.left=p[3]);return d}getBorders(o){let p={top:{},right:{},left:{},bottom:{}};return o.prop=="border"?(p.top=Ct.default.generate(o.value),p.right=Ct.default.generate(o.value),p.bottom=Ct.default.generate(o.value),p.left=Ct.default.generate(o.value)):o.prop=="border-top"?p.top=Ct.default.generate(o.value):o.prop=="border-right"?p.right=Ct.default.generate(o.value):o.prop=="border-bottom"?p.bottom=Ct.default.generate(o.value):o.prop=="border-left"&&(p.left=Ct.default.generate(o.value)),p}addPageClasses(o,p,d){if("*"in o&&o["*"].added===!1){let f=this.createPage(o["*"],p.children,d);d.insertRule(f),o["*"].added=!0}if(":left"in o&&o[":left"].added===!1){let f=this.createPage(o[":left"],p.children,d);d.insertRule(f),o[":left"].added=!0}if(":right"in o&&o[":right"].added===!1){let f=this.createPage(o[":right"],p.children,d);d.insertRule(f),o[":right"].added=!0}if(":first"in o&&o[":first"].added===!1){let f=this.createPage(o[":first"],p.children,d);d.insertRule(f),o[":first"].added=!0}if(":blank"in o&&o[":blank"].added===!1){let f=this.createPage(o[":blank"],p.children,d);d.insertRule(f),o[":blank"].added=!0}for(let f in o)if(o[f].nth&&o[f].added===!1){let a=this.createPage(o[f],p.children,d);d.insertRule(a),o[f].added=!0}for(let f in o)if(o[f].name&&o[f].added===!1){let a=this.createPage(o[f],p.children,d);d.insertRule(a),o[f].added=!0}}createPage(o,p,d){let f=this.selectorsForPage(o),a=o.block.children.copy(),T={type:"Block",loc:0,children:a},M=this.createRule(f,T);return this.addMarginVars(o.margin,a,a.first()),this.addPaddingVars(o.padding,a,a.first()),this.addBorderVars(o.border,a,a.first()),o.width&&this.addDimensions(o.width,o.height,o.orientation,a,a.first()),o.marginalia&&(this.addMarginaliaStyles(o,p,M,d),this.addMarginaliaContent(o,p,M,d)),o.notes&&this.addNotesStyles(o.notes,o,p,M,d),M}addMarginVars(o,p,d){for(let f in o)if(typeof o[f].value<"u"){let a=o[f].value+(o[f].unit||""),T=p.createItem({type:"Declaration",property:"--pagedjs-margin-"+f,value:{type:"Raw",value:a}});p.append(T,d)}}addPaddingVars(o,p,d){for(let f in o)if(typeof o[f].value<"u"){let a=o[f].value+(o[f].unit||""),T=p.createItem({type:"Declaration",property:"--pagedjs-padding-"+f,value:{type:"Raw",value:a}});p.append(T,d)}}addBorderVars(o,p,d){for(let f of Object.keys(o)){let a=o[f];if(typeof a=="string"){let T=p.createItem({type:"Declaration",property:"--pagedjs-border-"+f,value:{type:"Raw",value:a}});p.append(T,d)}}}addDimensions(o,p,d,f,a){let T,M;T=xt(o),M=xt(p),d&&d!=="portrait"&&([T,M]=[M,T]);let B=this.createVariable("--pagedjs-pagebox-width",T);f.appendData(B);let G=this.createVariable("--pagedjs-pagebox-height",M);f.appendData(G)}addMarginaliaStyles(o,p,d,f){for(let a in o.marginalia){let T=Ct.default.clone(o.marginalia[a]),M=!1;if(T.children.isEmpty())continue;Ct.default.walk(T,{visit:"Declaration",enter:(ie,$,ae)=>{if(ie.property==="content"&&(ie.value.children&&ie.value.children.first().name==="none"?M=!1:M=!0,ae.remove($)),ie.property==="vertical-align"&&(Ct.default.walk(ie,{visit:"Identifier",enter:(te,Te,We)=>{let xe=te.name;xe==="top"?te.name="flex-start":xe==="middle"?te.name="center":xe==="bottom"&&(te.name="flex-end")}}),ie.property="align-items"),ie.property==="width"&&(a==="top-left"||a==="top-center"||a==="top-right"||a==="bottom-left"||a==="bottom-center"||a==="bottom-right")){let te=Ct.default.clone(ie);te.property="max-width",ae.appendData(te)}if(ie.property==="height"&&(a==="left-top"||a==="left-middle"||a==="left-bottom"||a==="right-top"||a==="right-middle"||a==="right-bottom")){let te=Ct.default.clone(ie);te.property="max-height",ae.appendData(te)}}});let B=this.selectorsForPageMargin(o,a),G=this.createRule(B,T);p.appendData(G);let J=Ct.default.generate({type:"Selector",children:B});this.marginalia[J]={page:o,selector:J,block:o.marginalia[a],hasContent:M}}}addMarginaliaContent(o,p,d,f){let a;for(let T in o.marginalia){let M=Ct.default.clone(o.marginalia[T]);if(Ct.default.walk(M,{visit:"Declaration",enter:(ae,te,Te)=>{ae.property!=="content"&&Te.remove(te),ae.value.children&&ae.value.children.first().name==="none"&&(a=!0)}}),M.children.isEmpty())continue;let B=this.selectorsForPageMargin(o,T),G;B.insertData({type:"Combinator",name:">"}),B.insertData({type:"ClassSelector",name:"pagedjs_margin-content"}),B.insertData({type:"Combinator",name:">"}),B.insertData({type:"TypeSelector",name:"*"}),a?G=this.createDeclaration("display","none"):G=this.createDeclaration("display","block");let J=this.createRule(B,[G]);f.insertRule(J);let ie=this.selectorsForPageMargin(o,T);ie.insertData({type:"Combinator",name:">"}),ie.insertData({type:"ClassSelector",name:"pagedjs_margin-content"}),ie.insertData({type:"PseudoElementSelector",name:"after",children:null});let $=this.createRule(ie,M);f.insertRule($)}}addRootVars(o,p,d,f,a,T,M,B){let G=[],J=new Ct.default.List;J.insertData({type:"PseudoClassSelector",name:"root",children:null});let ie,$,ae,te,Te,We;if(!a)ie=xt(p),$=xt(d),ae=xt(p),te=xt(d),Te=xt(p),We=xt(d);else{ie=`calc( ${xt(p)} + ${xt(a.left)} + ${xt(a.right)} )`,$=`calc( ${xt(d)} + ${xt(a.top)} + ${xt(a.bottom)} )`,ae=`calc( ${xt(p)} + ${xt(a.left)} + ${xt(a.right)} )`,te=`calc( ${xt(d)} + ${xt(a.top)} + ${xt(a.bottom)} )`,Te=`calc( ${xt(p)} + ${xt(a.left)} + ${xt(a.right)} )`,We=`calc( ${xt(d)} + ${xt(a.top)} + ${xt(a.bottom)} )`;let Je=this.createVariable("--pagedjs-bleed-top",xt(a.top)),ot=this.createVariable("--pagedjs-bleed-right",xt(a.right)),St=this.createVariable("--pagedjs-bleed-bottom",xt(a.bottom)),Ht=this.createVariable("--pagedjs-bleed-left",xt(a.left)),Tt=this.createVariable("--pagedjs-bleed-right-top",xt(a.top)),_i=this.createVariable("--pagedjs-bleed-right-right",xt(a.right)),ti=this.createVariable("--pagedjs-bleed-right-bottom",xt(a.bottom)),ii=this.createVariable("--pagedjs-bleed-right-left",xt(a.left)),_t=this.createVariable("--pagedjs-bleed-left-top",xt(a.top)),ei=this.createVariable("--pagedjs-bleed-left-right",xt(a.right)),kt=this.createVariable("--pagedjs-bleed-left-bottom",xt(a.bottom)),ni=this.createVariable("--pagedjs-bleed-left-left",xt(a.left));T&&(Tt=this.createVariable("--pagedjs-bleed-right-top",xt(T.top)),_i=this.createVariable("--pagedjs-bleed-right-right",xt(T.right)),ti=this.createVariable("--pagedjs-bleed-right-bottom",xt(T.bottom)),ii=this.createVariable("--pagedjs-bleed-right-left",xt(T.left)),ae=`calc( ${xt(p)} + ${xt(T.left)} + ${xt(T.right)} )`,te=`calc( ${xt(d)} + ${xt(T.top)} + ${xt(T.bottom)} )`),M&&(_t=this.createVariable("--pagedjs-bleed-left-top",xt(M.top)),ei=this.createVariable("--pagedjs-bleed-left-right",xt(M.right)),kt=this.createVariable("--pagedjs-bleed-left-bottom",xt(M.bottom)),ni=this.createVariable("--pagedjs-bleed-left-left",xt(M.left)),Te=`calc( ${xt(p)} + ${xt(M.left)} + ${xt(M.right)} )`,We=`calc( ${xt(d)} + ${xt(M.top)} + ${xt(M.bottom)} )`);let Yi=this.createVariable("--pagedjs-width",xt(p)),tr=this.createVariable("--pagedjs-height",xt(d));G.push(Je,ot,St,Ht,Tt,_i,ti,ii,_t,ei,kt,ni,Yi,tr)}if(B&&B.forEach(Je=>{let ot=this.createVariable("--pagedjs-mark-"+Je+"-display","block");G.push(ot)}),f){let Je=this.createVariable("--pagedjs-orientation",f);G.push(Je),f!=="portrait"&&([ie,$]=[$,ie],[ae,te]=[te,ae],[Te,We]=[We,Te])}let xe=this.createVariable("--pagedjs-width",ie),Ze=this.createVariable("--pagedjs-height",$),dt=this.createVariable("--pagedjs-width-right",ae),mt=this.createVariable("--pagedjs-height-right",te),Vt=this.createVariable("--pagedjs-width-left",Te),Bt=this.createVariable("--pagedjs-height-left",We);G.push(xe,Ze,dt,mt,Vt,Bt);let je=this.createRule(J,G);o.children.appendData(je)}addNotesStyles(o,p,d,f,a){for(let T in o){let M=this.selectorsForPage(p);M.insertData({type:"Combinator",name:" "}),M.insertData({type:"ClassSelector",name:"pagedjs_"+T+"_content"});let B=this.createRule(M,o[T]);d.appendData(B)}}addRootPage(o,p,d,f,a){let{width:T,height:M,orientation:B,format:G}=p,J=new Ct.default.List,ie=new Ct.default.List,$=new Ct.default.List,ae=new Ct.default.List,te=new Ct.default.List,Te=new Ct.default.List;if(d){let xe=new Ct.default.List,Ze=new Ct.default.List;xe.appendData({type:"Dimension",unit:T.unit,value:T.value}),xe.appendData({type:"WhiteSpace",value:" "}),xe.appendData({type:"Operator",value:"+"}),xe.appendData({type:"WhiteSpace",value:" "}),xe.appendData({type:"Dimension",unit:d.left.unit,value:d.left.value}),xe.appendData({type:"WhiteSpace",value:" "}),xe.appendData({type:"Operator",value:"+"}),xe.appendData({type:"WhiteSpace",value:" "}),xe.appendData({type:"Dimension",unit:d.right.unit,value:d.right.value}),Ze.appendData({type:"Dimension",unit:M.unit,value:M.value}),Ze.appendData({type:"WhiteSpace",value:" "}),Ze.appendData({type:"Operator",value:"+"}),Ze.appendData({type:"WhiteSpace",value:" "}),Ze.appendData({type:"Dimension",unit:d.top.unit,value:d.top.value}),Ze.appendData({type:"WhiteSpace",value:" "}),Ze.appendData({type:"Operator",value:"+"}),Ze.appendData({type:"WhiteSpace",value:" "}),Ze.appendData({type:"Dimension",unit:d.bottom.unit,value:d.bottom.value}),ae.appendData({type:"Function",name:"calc",children:xe}),ae.appendData({type:"WhiteSpace",value:" "}),ae.appendData({type:"Function",name:"calc",children:Ze})}else G?(ae.appendData({type:"Identifier",name:G}),B&&(ae.appendData({type:"WhiteSpace",value:" "}),ae.appendData({type:"Identifier",name:B}))):(ae.appendData({type:"Dimension",unit:T.unit,value:T.value}),ae.appendData({type:"WhiteSpace",value:" "}),ae.appendData({type:"Dimension",unit:M.unit,value:M.value}));J.appendData({type:"Declaration",property:"size",loc:null,value:{type:"Value",children:ae}}),J.appendData({type:"Declaration",property:"margin",loc:null,value:{type:"Value",children:[{type:"Dimension",unit:"px",value:0}]}}),J.appendData({type:"Declaration",property:"padding",loc:null,value:{type:"Value",children:[{type:"Dimension",unit:"px",value:0}]}}),J.appendData({type:"Declaration",property:"padding",loc:null,value:{type:"Value",children:[{type:"Dimension",unit:"px",value:0}]}});let We=o.children.createItem({type:"Atrule",prelude:null,name:"page",block:{type:"Block",loc:null,children:J}});if(o.children.append(We),a){let xe=new Ct.default.List,Ze=new Ct.default.List;xe.appendData({type:"Dimension",unit:T.unit,value:T.value}),xe.appendData({type:"WhiteSpace",value:" "}),xe.appendData({type:"Operator",value:"+"}),xe.appendData({type:"WhiteSpace",value:" "}),xe.appendData({type:"Dimension",unit:a.left.unit,value:a.left.value}),xe.appendData({type:"WhiteSpace",value:" "}),xe.appendData({type:"Operator",value:"+"}),xe.appendData({type:"WhiteSpace",value:" "}),xe.appendData({type:"Dimension",unit:a.right.unit,value:a.right.value}),Ze.appendData({type:"Dimension",unit:M.unit,value:M.value}),Ze.appendData({type:"WhiteSpace",value:" "}),Ze.appendData({type:"Operator",value:"+"}),Ze.appendData({type:"WhiteSpace",value:" "}),Ze.appendData({type:"Dimension",unit:a.top.unit,value:a.top.value}),Ze.appendData({type:"WhiteSpace",value:" "}),Ze.appendData({type:"Operator",value:"+"}),Ze.appendData({type:"WhiteSpace",value:" "}),Ze.appendData({type:"Dimension",unit:a.bottom.unit,value:a.bottom.value}),te.appendData({type:"Function",name:"calc",children:xe}),te.appendData({type:"WhiteSpace",value:" "}),te.appendData({type:"Function",name:"calc",children:Ze}),ie.appendData({type:"Declaration",property:"size",loc:null,value:{type:"Value",children:te}});let dt=o.children.createItem({type:"Atrule",prelude:null,name:"page :left",block:{type:"Block",loc:null,children:ie}});o.children.append(dt)}if(f){let xe=new Ct.default.List,Ze=new Ct.default.List;xe.appendData({type:"Dimension",unit:T.unit,value:T.value}),xe.appendData({type:"WhiteSpace",value:" "}),xe.appendData({type:"Operator",value:"+"}),xe.appendData({type:"WhiteSpace",value:" "}),xe.appendData({type:"Dimension",unit:f.left.unit,value:f.left.value}),xe.appendData({type:"WhiteSpace",value:" "}),xe.appendData({type:"Operator",value:"+"}),xe.appendData({type:"WhiteSpace",value:" "}),xe.appendData({type:"Dimension",unit:f.right.unit,value:f.right.value}),Ze.appendData({type:"Dimension",unit:M.unit,value:M.value}),Ze.appendData({type:"WhiteSpace",value:" "}),Ze.appendData({type:"Operator",value:"+"}),Ze.appendData({type:"WhiteSpace",value:" "}),Ze.appendData({type:"Dimension",unit:f.top.unit,value:f.top.value}),Ze.appendData({type:"WhiteSpace",value:" "}),Ze.appendData({type:"Operator",value:"+"}),Ze.appendData({type:"WhiteSpace",value:" "}),Ze.appendData({type:"Dimension",unit:f.bottom.unit,value:f.bottom.value}),Te.appendData({type:"Function",name:"calc",children:xe}),Te.appendData({type:"WhiteSpace",value:" "}),Te.appendData({type:"Function",name:"calc",children:Ze}),$.appendData({type:"Declaration",property:"size",loc:null,value:{type:"Value",children:Te}});let dt=o.children.createItem({type:"Atrule",prelude:null,name:"page :right",block:{type:"Block",loc:null,children:$}});o.children.append(dt)}}getNth(o){let p=o.indexOf("n"),d=o.indexOf("+"),f=o.split("n"),a=o.split("+"),T=null,M=null;return p>-1?(T=f[0],d>-1&&(M=a[1])):M=o,{type:"Nth",loc:null,selector:null,nth:{type:"AnPlusB",loc:null,a:T,b:M}}}addPageAttributes(o,p,d){let f=[p.dataset.page];if(f&&f.length)for(let a of f)a&&(o.name=a,o.element.classList.add("pagedjs_named_page"),o.element.classList.add("pagedjs_"+a+"_page"),p.dataset.splitFrom||o.element.classList.add("pagedjs_"+a+"_first_page"))}getStartElement(o,p){let d=p&&p.node;if(!o&&!p)return;if(!d)return o.children[0];if(d.nodeType===1&&d.parentNode.nodeType===11||d.nodeType===1&&d.dataset.page)return d;let f=_p(d),a=f.querySelectorAll("[data-page]");return a.length?a[a.length-1]:f.children[0]}beforePageLayout(o,p,d,f){let a=this.getStartElement(p,d);a&&this.addPageAttributes(o,a,f.pages)}finalizePage(o,p,d,f){for(let a in this.marginalia){let T=this.marginalia[a],M=a.split(" "),B;p.element.matches(M[0])&&T.hasContent&&(B=p.element.querySelector(M[1]),B.classList.add("hasContent"))}["top","bottom"].forEach(a=>{let T=p.element.querySelector(".pagedjs_margin-"+a),M=p.element.querySelector(".pagedjs_margin-"+a+"-center"),B=p.element.querySelector(".pagedjs_margin-"+a+"-left"),G=p.element.querySelector(".pagedjs_margin-"+a+"-right"),J=M.classList.contains("hasContent"),ie=B.classList.contains("hasContent"),$=G.classList.contains("hasContent"),ae,te,Te;if(ie&&(te=window.getComputedStyle(B)["max-width"]),$&&(Te=window.getComputedStyle(G)["max-width"]),J)if(ae=window.getComputedStyle(M)["max-width"],ae==="none"||ae==="auto")if(!ie&&!$)T.style["grid-template-columns"]="0 1fr 0";else if(ie)if($)if(te!=="none"&&te!=="auto")Te!=="none"&&Te!=="auto"?T.style["grid-template-columns"]=te+" 1fr "+Te:T.style["grid-template-columns"]=te+" 1fr "+te;else if(Te!=="none"&&Te!=="auto")T.style["grid-template-columns"]=Te+" 1fr "+Te;else{T.style["grid-template-columns"]="auto auto 1fr",B.style["white-space"]="nowrap",M.style["white-space"]="nowrap",G.style["white-space"]="nowrap";let We=B.offsetWidth,xe=M.offsetWidth,Ze=G.offsetWidth,dt=We+xe+Ze,mt=xe*100/dt;mt>40?T.style["grid-template-columns"]="minmax(16.66%, 1fr) minmax(33%, "+mt+"%) minmax(16.66%, 1fr)":T.style["grid-template-columns"]="repeat(3, 1fr)",B.style["white-space"]="normal",M.style["white-space"]="normal",G.style["white-space"]="normal"}else if(te!=="none"&&te!=="auto")T.style["grid-template-columns"]=te+" 1fr "+te;else{T.style["grid-template-columns"]="auto auto 1fr",B.style["white-space"]="nowrap",M.style["white-space"]="nowrap";let We=B.offsetWidth,xe=M.offsetWidth,Ze=We+xe,dt=xe*100/Ze;T.style["grid-template-columns"]="minmax(16.66%, 1fr) minmax(33%, "+dt+"%) minmax(16.66%, 1fr)",B.style["white-space"]="normal",M.style["white-space"]="normal"}else if(Te!=="none"&&Te!=="auto")T.style["grid-template-columns"]=Te+" 1fr "+Te;else{T.style["grid-template-columns"]="auto auto 1fr",G.style["white-space"]="nowrap",M.style["white-space"]="nowrap";let We=G.offsetWidth,xe=M.offsetWidth,Ze=We+xe,dt=xe*100/Ze;T.style["grid-template-columns"]="minmax(16.66%, 1fr) minmax(33%, "+dt+"%) minmax(16.66%, 1fr)",G.style["white-space"]="normal",M.style["white-space"]="normal"}else ae!=="none"&&ae!=="auto"&&(ie&&te!=="none"&&te!=="auto"?T.style["grid-template-columns"]=te+" "+ae+" 1fr":$&&Te!=="none"&&Te!=="auto"?T.style["grid-template-columns"]="1fr "+ae+" "+Te:T.style["grid-template-columns"]="1fr "+ae+" 1fr");else if(ie)if(!$)T.style["grid-template-columns"]="1fr 0 0";else if(te!=="none"&&te!=="auto")Te!=="none"&&Te!=="auto"?T.style["grid-template-columns"]=te+" 1fr "+Te:T.style["grid-template-columns"]=te+" 0 1fr";else if(Te!=="none"&&Te!=="auto")T.style["grid-template-columns"]="1fr 0 "+Te;else{T.style["grid-template-columns"]="auto 1fr auto",B.style["white-space"]="nowrap",G.style["white-space"]="nowrap";let We=B.offsetWidth,xe=G.offsetWidth,Ze=We+xe,dt=We*100/Ze;T.style["grid-template-columns"]="minmax(16.66%, "+dt+"%) 0 1fr",B.style["white-space"]="normal",G.style["white-space"]="normal"}else Te!=="none"&&Te!=="auto"?T.style["grid-template-columns"]="1fr 0 "+Te:T.style["grid-template-columns"]="0 0 1fr"}),["left","right"].forEach(a=>{let T=p.element.querySelector(".pagedjs_margin-"+a+"-middle.hasContent"),M=p.element.querySelector(".pagedjs_margin-"+a),B=p.element.querySelector(".pagedjs_margin-"+a+"-top"),G=p.element.querySelector(".pagedjs_margin-"+a+"-bottom"),J=B.classList.contains("hasContent"),ie=G.classList.contains("hasContent"),$,ae,te;J&&(ae=window.getComputedStyle(B)["max-height"]),ie&&(te=window.getComputedStyle(G)["max-height"]),T?($=window.getComputedStyle(T)["max-height"],$==="none"||$==="auto"?!J&&!ie?M.style["grid-template-rows"]="0 1fr 0":J?ie?ae!=="none"&&ae!=="auto"?te!=="none"&&te!=="auto"?M.style["grid-template-rows"]=ae+" calc(100% - "+ae+" - "+te+") "+te:M.style["grid-template-rows"]=ae+" calc(100% - "+ae+"*2) "+ae:te!=="none"&&te!=="auto"&&(M.style["grid-template-rows"]=te+" calc(100% - "+te+"*2) "+te):ae!=="none"&&ae!=="auto"&&(M.style["grid-template-rows"]=ae+" calc(100% - "+ae+"*2) "+ae):te!=="none"&&te!=="auto"&&(M.style["grid-template-rows"]=te+" calc(100% - "+te+"*2) "+te):J&&ae!=="none"&&ae!=="auto"?M.style["grid-template-rows"]=ae+" "+$+" calc(100% - ("+ae+" + "+$+"))":ie&&te!=="none"&&te!=="auto"?M.style["grid-template-rows"]="1fr "+$+" "+te:M.style["grid-template-rows"]="calc((100% - "+$+")/2) "+$+" calc((100% - "+$+")/2)"):J?ie?ae!=="none"&&ae!=="auto"?te!=="none"&&te!=="auto"?M.style["grid-template-rows"]=ae+" 1fr "+te:M.style["grid-template-rows"]=ae+" 0 1fr":te!=="none"&&te!=="auto"?M.style["grid-template-rows"]="1fr 0 "+te:M.style["grid-template-rows"]="1fr 0 1fr":M.style["grid-template-rows"]="1fr 0 0":te!=="none"&&te!=="auto"?M.style["grid-template-rows"]="1fr 0 "+te:M.style["grid-template-rows"]="0 0 1fr"})}selectorsForPage(o){let p,d,f=new Ct.default.List;return f.insertData({type:"ClassSelector",name:"pagedjs_page"}),o.name&&(f.insertData({type:"ClassSelector",name:"pagedjs_named_page"}),f.insertData({type:"ClassSelector",name:"pagedjs_"+o.name+"_page"})),o.psuedo&&!(o.name&&o.psuedo==="first")&&f.insertData({type:"ClassSelector",name:"pagedjs_"+o.psuedo+"_page"}),o.name&&o.psuedo==="first"&&f.insertData({type:"ClassSelector",name:"pagedjs_"+o.name+"_"+o.psuedo+"_page"}),o.nth&&(p=new Ct.default.List,d=this.getNth(o.nth),p.insertData(d),f.insertData({type:"PseudoClassSelector",name:"nth-of-type",children:p})),f}selectorsForPageMargin(o,p){let d=this.selectorsForPage(o);return d.insertData({type:"Combinator",name:" "}),d.insertData({type:"ClassSelector",name:"pagedjs_margin-"+p}),d}createDeclaration(o,p,d){let f=new Ct.default.List;return f.insertData({type:"Identifier",loc:null,name:p}),{type:"Declaration",loc:null,important:d,property:o,value:{type:"Value",loc:null,children:f}}}createVariable(o,p){return{type:"Declaration",loc:null,property:o,value:{type:"Raw",value:p}}}createCalculatedDimension(o,p,d,f="+"){let a=new Ct.default.List,T=new Ct.default.List;return p.forEach((M,B)=>{T.appendData({type:"Dimension",unit:M.unit,value:M.value}),T.appendData({type:"WhiteSpace",value:" "}),B+1<p.length&&(T.appendData({type:"Operator",value:f}),T.appendData({type:"WhiteSpace",value:" "}))}),a.insertData({type:"Function",loc:null,name:"calc",children:T}),{type:"Declaration",loc:null,important:d,property:o,value:{type:"Value",loc:null,children:a}}}createDimension(o,p,d){let f=new Ct.default.List;return f.insertData({type:"Dimension",loc:null,value:p.value,unit:p.unit}),{type:"Declaration",loc:null,important:d,property:o,value:{type:"Value",loc:null,children:f}}}createBlock(o){let p=new Ct.default.List;return o.forEach(d=>{p.insertData(d)}),{type:"Block",loc:null,children:p}}createRule(o,p){let d=new Ct.default.List;return d.insertData({type:"Selector",children:o}),Array.isArray(p)&&(p=this.createBlock(p)),{type:"Rule",prelude:{type:"SelectorList",children:d},block:p}}},IC=Dy;var Ry=$i(Cn(),1);var By=class extends ri{constructor(o,p,d){super(o,p,d),this.breaks={}}onDeclaration(o,p,d,f){let a=o.property;if(a==="page"){let M=o.value.children.first().name,B=Ry.default.generate(f.ruleNode.prelude),J={property:a,value:M,selector:B,name:M};B.split(",").forEach(ie=>{this.breaks[ie]?this.breaks[ie].push(J):this.breaks[ie]=[J]}),d.remove(p)}if(a==="break-before"||a==="break-after"||a==="page-break-before"||a==="page-break-after"){let M=o.value.children.first().name,B=Ry.default.generate(f.ruleNode.prelude);a==="page-break-before"?a="break-before":a==="page-break-after"&&(a="break-after");let G={property:a,value:M,selector:B};B.split(",").forEach(J=>{this.breaks[J]?this.breaks[J].push(G):this.breaks[J]=[G]}),d.remove(p)}}afterParsed(o){this.processBreaks(o,this.breaks)}processBreaks(o,p){for(let f in p){let a=o.querySelectorAll(f);for(var d=0;d<a.length;d++)for(let T of p[f])if(T.property==="break-after"){let M=Vm(a[d],o);a[d].setAttribute("data-break-after",T.value),M&&M.setAttribute("data-previous-break-after",T.value)}else if(T.property==="break-before"){let M=Bb(a[d],o);if(M){if(T.value==="page"&&bp(a[d],M))continue;a[d].setAttribute("data-break-before",T.value),M.setAttribute("data-next-break-before",T.value)}}else if(T.property==="page"){a[d].setAttribute("data-page",T.value);let M=Vm(a[d],o);M&&M.setAttribute("data-after-page",T.value)}else a[d].setAttribute("data-"+T.property,T.value)}}mergeBreaks(o,p){for(let d in p)d in o?o[d]=o[d].concat(p[d]):o[d]=p[d];return o}addBreakAttributes(o,p){let d=o.querySelector("[data-break-before]"),f=o.querySelector("[data-break-after]"),a=o.querySelector("[data-previous-break-after]");d&&(d.dataset.splitFrom?(p.splitFrom=d.dataset.splitFrom,o.setAttribute("data-split-from",d.dataset.splitFrom)):d.dataset.breakBefore&&d.dataset.breakBefore!=="avoid"&&(p.breakBefore=d.dataset.breakBefore,o.setAttribute("data-break-before",d.dataset.breakBefore))),f&&f.dataset&&(f.dataset.splitTo?(p.splitTo=f.dataset.splitTo,o.setAttribute("data-split-to",f.dataset.splitTo)):f.dataset.breakAfter&&f.dataset.breakAfter!=="avoid"&&(p.breakAfter=f.dataset.breakAfter,o.setAttribute("data-break-after",f.dataset.breakAfter))),a&&a.dataset&&a.dataset.previousBreakAfter&&a.dataset.previousBreakAfter!=="avoid"&&(p.previousBreakAfter=a.dataset.previousBreakAfter)}afterPageLayout(o,p){this.addBreakAttributes(o,p)}},zC=By;var LC=$i(Cn(),1),Fy=class extends ri{constructor(o,p,d){super(o,p,d)}onAtMedia(o,p,d){let f=this.getMediaName(o),a;f.includes("print")?(a=o.block.children,d.appendList(a),d.remove(p)):!f.includes("all")&&!f.includes("pagedjs-ignore")&&d.remove(p)}getMediaName(o){let p=[];if(!(typeof o.prelude>"u"||o.prelude.type!=="AtrulePrelude"))return LC.default.walk(o.prelude,{visit:"Identifier",enter:(d,f,a)=>{p.push(d.name)}}),p}},OC=Fy;var jy=class extends ri{constructor(o,p,d){super(o,p,d)}afterPageLayout(o,p,d,f){let a=Array.from(o.querySelectorAll("[data-split-from]")),T=o.parentNode,M=Array.prototype.indexOf.call(T.children,o),B;if(M===0)return;B=T.children[M-1];let G;a.forEach(J=>{let ie=J.dataset.ref;G=B.querySelector("[data-ref='"+ie+"']:not([data-split-to])"),G&&(G.dataset.splitTo=ie,G.dataset.splitFrom||(G.dataset.splitOriginal=!0))}),G&&this.handleAlignment(G)}handleAlignment(o){let p=window.getComputedStyle(o),d=p["text-align"],f=p["text-align-last"];o.dataset.lastSplitElement="true",d==="justify"&&f==="auto"?o.dataset.alignLastSplitElement="justify":o.dataset.alignLastSplitElement=f}},DC=jy;var kf=$i(Cn(),1),Ny=class extends ri{constructor(o,p,d){super(o,p,d),this.styleSheet=p.styleSheet,this.counters={},this.resetCountersMap=new Map}onDeclaration(o,p,d,f){let a=o.property;if(a==="counter-increment"){this.handleIncrement(o,f);let T=!1;o.value.children.forEach(M=>{M.type&&M.type!=="WhiteSpace"&&(T=!0)}),T||d.remove(p)}else if(a==="counter-reset"){this.handleReset(o,f);let T=!1;o.value.children.forEach(M=>{M.type&&M.type!=="WhiteSpace"&&(T=!0)}),T||d.remove(p)}}afterParsed(o){this.processCounters(o,this.counters),this.scopeCounters(this.counters)}addCounter(o){return o in this.counters?this.counters[o]:(this.counters[o]={name:o,increments:{},resets:{}},this.counters[o])}handleIncrement(o,p){let d=[],f=o.value.children;return f.forEach((a,T)=>{if(a.type&&a.type==="Identifier"){let M=a.name;if(M==="page"||M.indexOf("target-counter-")===0)return;let B,G,J;T.next&&T.next.data.type==="WhiteSpace"&&(B=T.next),B&&B.next&&B.next.data.type==="Number"&&(G=B.next,J=parseInt(G.data.value));let ie=kf.default.generate(p.ruleNode.prelude),$;M in this.counters?$=this.counters[M]:$=this.addCounter(M);let ae={selector:ie,number:J||1};$.increments[ie]=ae,d.push(ae),f.remove(T),B&&f.remove(B),G&&f.remove(G)}}),d}handleReset(o,p){let d=o.value.children;d.forEach((f,a)=>{if(f.type&&f.type==="Identifier"){let T=f.name,M,B,G;a.next&&a.next.data.type==="WhiteSpace"&&(M=a.next),M&&M.next&&(M.next.data.type==="Number"?(B=M.next,G=parseInt(B.data.value)):M.next.data.type==="Function"&&M.next.data.name==="var"&&(B=M.next,G=M.next.data.children.head.data.name));let J,ie,$=p.ruleNode.prelude;p.ruleNode.type==="Atrule"&&p.ruleNode.name==="page"?ie=".pagedjs_page":ie=kf.default.generate($||p.ruleNode),T==="footnote"&&this.addFootnoteMarkerCounter(o.value.children),T in this.counters?J=this.counters[T]:J=this.addCounter(T);let ae={selector:ie,number:G||0};J.resets[ie]=ae,ie!==".pagedjs_page"&&(d.remove(a),M&&d.remove(M),B&&d.remove(B))}})}processCounters(o,p){let d;for(let f in p)d=this.counters[f],this.processCounterIncrements(o,d),this.processCounterResets(o,d),f!=="page"&&this.addCounterValues(o,d)}scopeCounters(o){let p=[];for(let d in o)d!=="page"&&p.push(`${o[d].name} 0`);this.insertRule(`.pagedjs_pages { counter-reset: ${p.join(" ")} page 0 pages var(--pagedjs-page-count) footnote var(--pagedjs-footnotes-count) footnote-marker var(--pagedjs-footnotes-count)}`)}insertRule(o){this.styleSheet.insertRule(o,this.styleSheet.cssRules.length)}processCounterIncrements(o,p){let d;for(let f in p.increments){d=p.increments[f];let a=o.querySelectorAll(d.selector);for(let T=0;T<a.length;T++)a[T].setAttribute("data-counter-"+p.name+"-increment",d.number),a[T].getAttribute("data-counter-increment")?a[T].setAttribute("data-counter-increment",a[T].getAttribute("data-counter-increment")+" "+p.name):a[T].setAttribute("data-counter-increment",p.name)}}processCounterResets(o,p){let d;for(let a in p.resets){d=p.resets[a];let T=o.querySelectorAll(d.selector);for(var f=0;f<T.length;f++){let M=d.number;typeof M=="string"&&M.startsWith("--")&&(M=T[f].style.getPropertyValue(M)||0),T[f].setAttribute("data-counter-"+p.name+"-reset",M),T[f].getAttribute("data-counter-reset")?T[f].setAttribute("data-counter-reset",T[f].getAttribute("data-counter-reset")+" "+p.name):T[f].setAttribute("data-counter-reset",p.name)}}}addCounterValues(o,p){let d=p.name;if(d==="page"||d==="footnote")return;let f=o.querySelectorAll("[data-counter-"+d+"-reset], [data-counter-"+d+"-increment]"),a=0,T,M,B,G,J,ie,$;for(let ae=0;ae<f.length;ae++)T=f[ae],ie=0,$=[],T.hasAttribute("data-counter-"+d+"-reset")&&(B=T.getAttribute("data-counter-"+d+"-reset"),G=parseInt(B),ie=G-a,$.push(`${d} ${ie}`),a=G),T.hasAttribute("data-counter-"+d+"-increment")&&(M=T.getAttribute("data-counter-"+d+"-increment"),J=parseInt(M),a+=J,T.setAttribute("data-counter-"+d+"-value",a),$.push(`${d} ${J}`)),$.length>0&&this.incrementCounterForElement(T,$)}addFootnoteMarkerCounter(o){let p=[];kf.default.walk(o,{visit:"Identifier",enter:(d,f,a)=>{p.push(d.name)}}),!p.includes("footnote-maker")&&(o.insertData({type:"WhiteSpace",value:" "}),o.insertData({type:"Identifier",name:"footnote-marker"}),o.insertData({type:"WhiteSpace",value:" "}),o.insertData({type:"Number",value:0}))}incrementCounterForElement(o,p){if(!o||!p||p.length===0)return;let d=o.dataset.ref,f=Array.from(this.styleSheet.cssRules).filter(T=>T.selectorText===`[data-ref="${o.dataset.ref}"]:not([data-split-from])`&&T.style[0]==="counter-increment").map(T=>T.style.counterIncrement);f.push(this.mergeIncrements(p,(T,M)=>(parseInt(T)||0)+(parseInt(M)||0)));let a=this.mergeIncrements(f,(T,M)=>M);this.insertRule(`[data-ref="${d}"]:not([data-split-from]) { counter-increment: ${a} }`)}mergeIncrements(o,p){let d={};return o.forEach(f=>{let a=f.split(" ");for(let T=0;T<a.length;T+=2)d[a[T]]=p(d[a[T]],a[T+1])}),Object.entries(d).map(([f,a])=>`${f} ${a}`).join(" ")}afterPageLayout(o,p){let d=[];o.querySelectorAll("[data-counter-page-reset]:not([data-split-from])").forEach(T=>{let M=T.dataset&&T.dataset.ref;if(!(M&&this.resetCountersMap.has(M))){M&&this.resetCountersMap.set(M,"");let B=T.dataset.counterPageReset;d.push(`page ${B}`)}}),o.querySelectorAll("[data-counter-footnote-reset]:not([data-split-from])").forEach(T=>{let M=T.dataset.counterFootnoteReset;d.push(`footnote ${M}`),d.push(`footnote-marker ${M}`)}),d.length&&this.styleSheet.insertRule(`[data-page-number="${o.dataset.pageNumber}"] { counter-increment: none; counter-reset: ${d.join(" ")} }`,this.styleSheet.cssRules.length)}},RC=Ny;var qy=class extends ri{constructor(o,p,d){super(o,p,d)}afterParsed(o){let p=o.querySelectorAll("ol");for(var d of p)this.addDataNumbers(d)}afterPageLayout(o,p,d,f){var a=o.getElementsByTagName("ol");for(var T of a)T.firstElementChild&&(T.start=T.firstElementChild.dataset.itemNum)}addDataNumbers(o){let p=1;o.hasAttribute("start")&&(p=parseInt(o.getAttribute("start"),10),isNaN(p)&&(p=1));let d=o.children;for(var f=0;f<d.length;f++)d[f].setAttribute("data-item-num",f+p)}},BC=qy;var FC=$i(Cn(),1),Vy=class extends ri{constructor(o,p,d){super(o,p,d),this.styleSheet=p.styleSheet,this.fixedElementsSelector=[],this.fixedElements=[]}onDeclaration(o,p,d,f){if(o.property==="position"&&o.value.children.first().name==="fixed"){let a=FC.default.generate(f.ruleNode.prelude);this.fixedElementsSelector.push(a),d.remove(p)}}afterParsed(o){this.fixedElementsSelector.forEach(p=>{o.querySelectorAll(`${p}`).forEach(d=>{d.style.setProperty("position","absolute"),this.fixedElements.push(d),d.remove()})})}afterPageLayout(o,p,d){this.fixedElements.forEach(f=>{let a=f.cloneNode(!0);o.querySelector(".pagedjs_pagebox").insertAdjacentElement("afterbegin",a)})}},jC=Vy;var NC=$i(Cn(),1),Wy=class extends ri{constructor(o,p,d){super(o,p,d),this.styleSheet=p.styleSheet,this.pageCounter={name:"page",increments:{},resets:{}}}onDeclaration(o,p,d,f){o.property==="counter-increment"&&this.handleIncrement(o,f)&&d.remove(p)}afterParsed(o){for(let p in this.pageCounter.increments){let d=this.pageCounter.increments[p];this.insertRule(`${d.selector} { --pagedjs-page-counter-increment: ${d.number} }`)}}handleIncrement(o,p){let d=o.value.children.first(),f=o.value.children.getSize()>1?o.value.children.last().value:1,a=d&&d.name;if(a&&a.indexOf("target-counter-")===0||a!=="page"||p.ruleNode.name==="page"&&p.ruleNode.type==="Atrule")return;let T=NC.default.generate(p.ruleNode.prelude);return this.pageCounter.increments[T]={selector:T,number:f}}insertRule(o){this.styleSheet.insertRule(o,this.styleSheet.cssRules.length)}},qC=Wy;var Gy=$i(Cn(),1);var Uy=class extends ri{constructor(o,p,d){super(o,p,d),this.styleSheet=p.styleSheet,this.selectors={}}onRule(o,p,d){let f=Gy.default.generate(o.prelude);if(f.match(/:(first|last|nth)-of-type/)){let a=Gy.default.generate(o.block);a=a.replace(/[{}]/g,"");let T="nth-of-type-"+qn();f.split(",").forEach(M=>{this.selectors[M]?this.selectors[M][1]=`${this.selectors[M][1]};${a}`:this.selectors[M]=[T,a]}),d.remove(p)}}afterParsed(o){this.processSelectors(o,this.selectors)}processSelectors(o,p){for(let f in p){let a=o.querySelectorAll(f);for(var d=0;d<a.length;d++){let M=a[d].getAttribute("data-nth-of-type");M&&M!=""?(M=`${M},${p[f][0]}`,a[d].setAttribute("data-nth-of-type",M)):a[d].setAttribute("data-nth-of-type",p[f][0])}let T=`*[data-nth-of-type*='${p[f][0]}'] { ${p[f][1]}; }`;this.styleSheet.insertRule(T,this.styleSheet.cssRules.length)}}},VC=Uy;var Zy=$i(Cn(),1);var $y=class extends ri{constructor(o,p,d){super(o,p,d),this.styleSheet=p.styleSheet,this.selectors={}}onRule(o,p,d){let f=Zy.default.generate(o.prelude);if(f.match(/\+/)){let a=Zy.default.generate(o.block);a=a.replace(/[{}]/g,"");let T="following-"+qn();f.split(",").forEach(M=>{this.selectors[M]?this.selectors[M][1]=`${this.selectors[M][1]};${a}`:this.selectors[M]=[T,a]}),d.remove(p)}}afterParsed(o){this.processSelectors(o,this.selectors)}processSelectors(o,p){for(let f in p){let a=o.querySelectorAll(f);for(var d=0;d<a.length;d++){let M=a[d].getAttribute("data-following");M&&M!=""?(M=`${M},${p[f][0]}`,a[d].setAttribute("data-following",M)):a[d].setAttribute("data-following",p[f][0])}let T=`*[data-following*='${p[f][0]}'] { ${p[f][1]}; }`;this.styleSheet.insertRule(T,this.styleSheet.cssRules.length)}}},WC=$y;var Ou=$i(Cn(),1),Hy=class extends ri{constructor(o,p,d){super(o,p,d),this.footnotes={},this.needsLayout=[]}onDeclaration(o,p,d,f){let a=o.property;if(a==="float"){let T=o.value.children&&o.value.children.first();if((T&&T.name)==="footnote"){let B=Ou.default.generate(f.ruleNode.prelude);this.footnotes[B]={selector:B,policy:"auto",display:"block"},d.remove(p)}}if(a==="footnote-policy"){let T=o.value.children&&o.value.children.first(),M=T&&T.name;if(M){let B=Ou.default.generate(f.ruleNode.prelude),G=this.footnotes[B];G&&(G.policy=M)}}if(a==="footnote-display"){let T=o.value.children&&o.value.children.first(),M=T&&T.name,B=Ou.default.generate(f.ruleNode.prelude);if(M&&this.footnotes[B]){let G=this.footnotes[B];G&&(G.display=M)}}}onPseudoSelector(o,p,d,f,a){let T=o.name;if(T==="footnote-marker"){let M=a.ruleNode.prelude,B=new Ou.default.List;M.children.first().children.each(G=>{G.type!=="PseudoElementSelector"&&B.appendData(G)}),B.appendData({type:"AttributeSelector",name:{type:"Identifier",name:"data-footnote-marker"},flags:null,loc:null,matcher:null,value:null}),B.appendData({type:"PseudoElementSelector",name:"marker",loc:null,children:null}),M.children.first().children=B}if(T==="footnote-call"){let M=a.ruleNode.prelude,B=new Ou.default.List;M.children.first().children.each(G=>{G.type!=="PseudoElementSelector"&&B.appendData(G)}),B.appendData({type:"AttributeSelector",name:{type:"Identifier",name:"data-footnote-call"},flags:null,loc:null,matcher:null,value:null}),B.appendData({type:"PseudoElementSelector",name:"after",loc:null,children:null}),M.children.first().children=B}}afterParsed(o){this.processFootnotes(o,this.footnotes)}processFootnotes(o,p){for(let f in p){let a=o.querySelectorAll(f),T,M=p[f];for(var d=0;d<a.length;d++)T=a[d],T.setAttribute("data-note","footnote"),T.setAttribute("data-break-before","avoid"),T.setAttribute("data-note-policy",M.policy||"auto"),T.setAttribute("data-note-display",M.display||"block"),this.processFootnoteContainer(T)}}processFootnoteContainer(o){let p=o.parentElement,d=p;for(;p;){if(xp(p)){d.setAttribute("data-has-notes","true");break}d=p,p=p.parentElement,p||d.setAttribute("data-has-notes","true")}}renderNode(o){if(o.nodeType==1){let p;if(!o.dataset)return;o.dataset.note==="footnote"?p=[o]:(o.dataset.hasNotes||o.querySelectorAll("[data-note='footnote']"))&&(p=o.querySelectorAll("[data-note='footnote']")),p&&p.length&&this.findVisibleFootnotes(p,o)}}findVisibleFootnotes(o,p){let d,f,a;d=p.closest(".pagedjs_page_content"),f=d.getBoundingClientRect(),a=f.left+f.width;for(let T=0;T<o.length;++T){let M=o[T];M.getBoundingClientRect().left<a&&this.moveFootnote(M,p.closest(".pagedjs_area"),!0)}}moveFootnote(o,p,d){let f=p.querySelector(".pagedjs_footnote_area"),a=f.querySelector(".pagedjs_footnote_content"),T=a.querySelector(".pagedjs_footnote_inner_content");if(!rn(o))return;let M;if(d&&(M=this.createFootnoteCall(o)),o.removeAttribute("data-break-before"),T.querySelector(`[data-ref="${o.dataset.ref}"]`)){o.remove();return}T.appendChild(o),a.classList.contains("pagedjs_footnote_empty")&&a.classList.remove("pagedjs_footnote_empty"),o.dataset.footnoteMarker=o.dataset.ref,o.id=`note-${o.dataset.ref}`;let G=a.scrollHeight,ie=p.querySelector(".pagedjs_page_content").getBoundingClientRect(),$=ie.left+ie.width,ae=M&&M.getBoundingClientRect(),te=f.getBoundingClientRect(),Te=this.marginsHeight(a),We=this.paddingHeight(a),xe=this.borderHeight(a),Ze=Te+We+xe,dt=Math.floor(te.top);te.height===0&&(dt-=this.marginsHeight(a,!1),dt-=this.paddingHeight(a,!1),dt-=this.borderHeight(a,!1));let mt=o.dataset.notePolicy,Vt=0,Bt=0;if(M){let Ht=M.previousSibling,Tt=new Range;Ht?Tt.setStartBefore(Ht):Tt.setStartBefore(M),Tt.setEndAfter(M);let _i=Tt.getBoundingClientRect();if(Vt=_i.bottom,!mt||mt==="auto")Bt=Math.ceil(_i.bottom);else if(mt==="line")Bt=Math.ceil(_i.top);else if(mt==="block"){let ti=M.closest("p").previousElementSibling;ti?Bt=Math.ceil(ti.getBoundingClientRect().bottom):Bt=Math.ceil(_i.bottom)}}let je=G+Ze-te.height,Je=Vt?dt-Vt:0,ot=Vt?Math.floor(te.top)-Bt:0,St=f.querySelector("[data-note='footnote']");if(d&&ae.left>$)o.remove();else if(!St&&d&&Ze>Je){p.style.setProperty("--pagedjs-footnotes-height","0px");let Ht=document.createElement("div");Ht.appendChild(o),this.needsLayout.push(Ht)}else d?Vt<te.top-je?p.style.setProperty("--pagedjs-footnotes-height",`${G+Te+xe}px`):(p.style.setProperty("--pagedjs-footnotes-height",`${te.height+ot}px`),T.style.height=te.height+ot-Ze+"px"):p.style.setProperty("--pagedjs-footnotes-height",`${G+Ze}px`)}createFootnoteCall(o){let p=o.parentElement,d=document.createElement("a");for(let f of o.classList)d.classList.add(`${f}`);return d.dataset.footnoteCall=o.dataset.ref,d.dataset.ref=o.dataset.ref,d.dataset.dataCounterFootnoteIncrement=1,d.href=`#note-${o.dataset.ref}`,p.insertBefore(d,o),d}afterPageLayout(o,p,d,f){let a=o.querySelector(".pagedjs_area"),T=p.footnotesArea,M=T.querySelector(".pagedjs_footnote_content"),B=T.querySelector(".pagedjs_footnote_inner_content"),G=M.getBoundingClientRect(),{width:J}=G;B.style.columnWidth=Math.round(J)+"px",B.style.columnGap="calc(var(--pagedjs-margin-right) + var(--pagedjs-margin-left))";let $=new zp(T,void 0,f.settings).findOverflow(B,G);if($){let{startContainer:ae,startOffset:te}=$,Te;if(rn(ae)){let Bt=ae.childNodes[te];Te=rn(Bt)&&Bt.hasAttribute("data-footnote-marker")}let We=$.extractContents();if(!Te){let Bt=We.firstElementChild;Bt.dataset.splitFrom=Bt.dataset.ref,this.handleAlignment(B.lastElementChild)}this.needsLayout.push(We),M.style.removeProperty("height"),B.style.removeProperty("height");let xe=B.getBoundingClientRect(),{height:Ze}=xe,dt=this.marginsHeight(M),mt=this.paddingHeight(M),Vt=this.borderHeight(M);if(a.style.setProperty("--pagedjs-footnotes-height",`${Ze+dt+Vt+mt}px`),B.childNodes.length===0&&M.classList.add("pagedjs_footnote_empty"),!d)f.clonePage(p);else{let Bt,je;d.node&&typeof d.node.dataset<"u"&&typeof d.node.dataset.previousBreakAfter<"u"&&(je=d.node.dataset.previousBreakAfter),d.node&&typeof d.node.dataset<"u"&&typeof d.node.dataset.breakBefore<"u"&&(Bt=d.node.dataset.breakBefore),(Bt||je)&&f.clonePage(p)}}B.style.height="auto"}handleAlignment(o){let d=window.getComputedStyle(o)["text-align-last"];o.dataset.lastSplitElement="true",d==="auto"?o.dataset.alignLastSplitElement="justify":o.dataset.alignLastSplitElement=d}beforePageLayout(o){for(;this.needsLayout.length;){let p=this.needsLayout.shift();Array.from(p.childNodes).forEach(d=>{this.moveFootnote(d,o.element.querySelector(".pagedjs_area"),!1)})}}afterOverflowRemoved(o,p){let d=p.closest(".pagedjs_area"),f=d.querySelectorAll(".pagedjs_footnote_area [data-note='footnote']");for(let T=0;T<f.length;T++){let M=f[T];o.querySelector(`[data-footnote-call="${M.dataset.ref}"]`)&&M.remove()}let a=d.querySelector(".pagedjs_footnote_inner_content");a&&a.childNodes.length===0&&a.parentElement.classList.add("pagedjs_footnote_empty")}marginsHeight(o,p=!0){let d=window.getComputedStyle(o),f=parseInt(d.marginTop),a=parseInt(d.marginBottom),T=0;return f&&(T+=f),a&&p&&(T+=a),T}paddingHeight(o,p=!0){let d=window.getComputedStyle(o),f=parseInt(d.paddingTop),a=parseInt(d.paddingBottom),T=0;return f&&(T+=f),a&&p&&(T+=a),T}borderHeight(o,p=!0){let d=window.getComputedStyle(o),f=parseInt(d.borderTop),a=parseInt(d.borderBottom),T=0;return f&&(T+=f),a&&p&&(T+=a),T}},GC=Hy;var UC=[OC,IC,zC,DC,RC,BC,jC,qC,VC,WC,GC];var fd=$i(Cn(),1),Yy=class extends ri{constructor(o,p,d){super(o,p,d),this.runningSelectors={},this.elements={}}onDeclaration(o,p,d,f){if(o.property==="position"){let a=fd.default.generate(f.ruleNode.prelude),T=o.value.children.first().name;if(T==="running"){let M;fd.default.walk(o,{visit:"Function",enter:(B,G,J)=>{M=B.children.first().name}}),this.runningSelectors[M]={identifier:T,value:M,selector:a}}}o.property==="content"&&fd.default.walk(o,{visit:"Function",enter:(a,T,M)=>{if(a.name.indexOf("element")>-1){let B=fd.default.generate(f.ruleNode.prelude),G=a.name,J=a.children.first().name,ie=[J],$="first";B.split(",").forEach(ae=>{ae=ae.replace(/::after|::before/,""),this.elements[ae]={func:G,args:ie,value:J,style:$||"first",selector:ae,fullSelector:B}})}}})}afterParsed(o){for(let p of Object.keys(this.runningSelectors)){let d=this.runningSelectors[p],f=Array.from(o.querySelectorAll(d.selector));if(d.identifier==="running")for(let a of f)a.style.display="none"}}afterPageLayout(o){for(let p of Object.keys(this.runningSelectors)){let d=this.runningSelectors[p],f=o.querySelector(d.selector);f&&(d.identifier==="running"?d.first=f:console.warn(d.value+"needs css replacement"))}this.orderedSelectors||(this.orderedSelectors=this.orderSelectors(this.elements));for(let p of this.orderedSelectors)if(p){let d=this.elements[p],f=o.querySelector(p);if(f){let a=this.runningSelectors[d.args[0]];if(a&&a.first){f.innerHTML="";let T=a.first.cloneNode(!0);T.style.display=null,f.appendChild(T)}}}}pageWeight(o){let p=1,d=o.split(" "),f=d.length&&d[0].split(".");switch(f.shift(),f.length){case 4:/^pagedjs_[\w-]+_first_page$/.test(f[3])?p=7:(f[3]==="pagedjs_left_page"||f[3]==="pagedjs_right_page")&&(p=6);break;case 3:f[1]==="pagedjs_named_page"&&(f[2].indexOf(":nth-of-type")>-1?p=7:p=5);break;case 2:f[1]==="pagedjs_first_page"?p=4:f[1]==="pagedjs_blank_page"?p=3:(f[1]==="pagedjs_left_page"||f[1]==="pagedjs_right_page")&&(p=2);break;default:f[0].indexOf(":nth-of-type")>-1?p=4:p=1}return p}orderSelectors(o){let p=Object.keys(o),d={1:[],2:[],3:[],4:[],5:[],6:[],7:[]},f=[];for(let T of p){let M=this.pageWeight(T);d[M].unshift(T)}for(var a=1;a<=7;a++)f=f.concat(d[a]);return f}beforeTreeParse(o,p){p.text=o.replace(/element[\s]*\(([^|^#)]*)\)/g,"element-ident($1)")}},ZC=Yy;var Xy=$i(Cn(),1);function El(s,o=`"' `){if(s!=null)return s.replace(new RegExp(`^[${o}]+`),"").replace(new RegExp(`[${o}]+$`),"").replace(/["']/g,p=>"\\"+p).replace(/[\n]/g,p=>"\\00000A")}function $C(s){if(s!=null)return s.replace(new RegExp("::footnote-call","g"),"").replace(new RegExp("::footnote-marker","g"),"")}var Ky=class extends ri{constructor(o,p,d){super(o,p,d),this.stringSetSelectors={},this.type,this.pageLastString}onDeclaration(o,p,d,f){if(o.property==="string-set"){let a=Xy.default.generate(f.ruleNode.prelude),T=[],M=[],B=[];o.value.children.forEach(G=>{G.type==="Identifier"&&T.push(G.name),G.type==="Function"&&(M.push(G.name),G.children.forEach(J=>{J.type==="Identifier"&&B.push(J.name)}))}),T.forEach((G,J)=>{let ie=M[J],$=B[J];this.stringSetSelectors[G]={identifier:G,func:ie,value:$,selector:a}})}}onContent(o,p,d,f,a){if(o.name==="string"){let T=o.children&&o.children.first().name;this.type=o.children.last().name,o.name="var",o.children=new Xy.default.List,this.type==="first"||this.type==="last"||this.type==="start"||this.type==="first-except"?o.children.append(o.children.createItem({type:"Identifier",loc:null,name:"--pagedjs-string-"+this.type+"-"+T})):o.children.append(o.children.createItem({type:"Identifier",loc:null,name:"--pagedjs-string-first-"+T}))}}afterPageLayout(o){this.pageLastString===void 0&&(this.pageLastString={});for(let p of Object.keys(this.stringSetSelectors)){let d=this.stringSetSelectors[p],f=d.value,a=d.func,T=o.querySelectorAll(d.selector),M=p in this.pageLastString?this.pageLastString[p]:"",B,G,J,ie;if(T.length==0)B=M,G=M,J=M,ie=M;else{T.forEach(Te=>{a==="content"&&(this.pageLastString[p]=T[T.length-1].textContent),a==="attr"&&(this.pageLastString[p]=T[T.length-1].getAttribute(f)||"")}),a==="content"&&(B=T[0].textContent),a==="attr"&&(B=T[0].getAttribute(f)||""),a==="content"&&(G=T[T.length-1].textContent),a==="attr"&&(G=T[T.length-1].getAttribute(f)||"");let $=T[0].getBoundingClientRect().top,te=T[0].closest(".pagedjs_page_content").getBoundingClientRect().top;$==te?J=B:J=M,ie=""}o.style.setProperty(`--pagedjs-string-first-${p}`,`"${El(B)}`),o.style.setProperty(`--pagedjs-string-last-${p}`,`"${El(G)}`),o.style.setProperty(`--pagedjs-string-start-${p}`,`"${El(J)}`),o.style.setProperty(`--pagedjs-string-first-except-${p}`,`"${El(ie)}`)}}},HC=Ky;var md=$i(Cn(),1),Jy=class extends ri{constructor(o,p,d){super(o,p,d),this.styleSheet=p.styleSheet,this.counterTargets={}}onContent(o,p,d,f,a){if(o.name==="target-counter"){let T=md.default.generate(a.ruleNode.prelude),M=o.children.first(),B=M.name,G=md.default.generate(o),J=[];M.children.forEach(Te=>{Te.type==="Identifier"&&J.push(Te.name)});let ie,$,ae;o.children.forEach(Te=>{Te.type==="Identifier"&&(ie?$||(ae=md.default.clone(Te),$=Te.name):ie=Te.name)});let te="target-counter-"+qn();T.split(",").forEach(Te=>{this.counterTargets[Te]={func:B,args:J,value:G,counter:ie,style:$,selector:Te,fullSelector:T,variable:te}}),o.name="counter",o.children=new md.default.List,o.children.appendData({type:"Identifier",loc:0,name:te}),ae&&(o.children.appendData({type:"Operator",loc:null,value:","}),o.children.appendData(ae))}}afterPageLayout(o,p,d,f){Object.keys(this.counterTargets).forEach(a=>{let T=this.counterTargets[a],M=T.selector.split(/::?/g),B=M[0];f.pagesArea.querySelectorAll(B+":not([data-"+T.variable+"])").forEach((J,ie)=>{if(T.func!=="attr")return;let $=pp(J,T.args),ae=f.pagesArea.querySelector(fp($));if(ae){let te=qn();J.setAttribute("data-"+T.variable,te);let Te="";if(M.length>1&&(Te+="::"+M[1]),T.counter==="page"){let xe=f.pagesArea.querySelectorAll(".pagedjs_page"),Ze=0;for(let dt=0;dt<xe.length;dt++){let mt=xe[dt],Vt=window.getComputedStyle(mt),Bt=Vt["counter-reset"].replace("page","").trim(),je=Vt["counter-increment"].replace("page","").trim();if(Bt!=="none"&&(Ze=parseInt(Bt)),je!=="none"&&(Ze+=parseInt(je)),mt.contains(ae))break}this.styleSheet.insertRule(`[data-${T.variable}="${te}"]${Te} { counter-reset: ${T.variable} ${Ze}; }`,this.styleSheet.cssRules.length)}else{let xe=ae.getAttribute(`data-counter-${T.counter}-value`);xe&&this.styleSheet.insertRule(`[data-${T.variable}="${te}"]${Te} { counter-reset: ${T.variable} ${T.variable} ${parseInt(xe)}; }`,this.styleSheet.cssRules.length)}let We=document.querySelector(`[data-${T.variable}="${te}"]`);We&&(We.style.display="none",We.clientHeight,We.style.removeProperty("display"))}})})}},YC=Jy;var Pf=$i(Cn(),1),Qy=class extends ri{constructor(o,p,d){super(o,p,d),this.styleSheet=p.styleSheet,this.textTargets={},this.beforeContent="",this.afterContent="",this.selector={}}onContent(o,p,d,f,a){if(o.name==="target-text"){this.selector=Pf.default.generate(a.ruleNode.prelude);let T=o.children.first(),M=o.children.last(),B=T.name,G=Pf.default.generate(o),J=[];T.children.forEach(ae=>{ae.type==="Identifier"&&J.push(ae.name)});let ie;M!==T&&(ie=M.name);let $="--pagedjs-"+qn();this.selector.split(",").forEach(ae=>{this.textTargets[ae]={func:B,args:J,value:G,style:ie||"content",selector:ae,fullSelector:this.selector,variable:$}}),o.name="var",o.children=new Pf.default.List,o.children.appendData({type:"Identifier",loc:0,name:$})}}onPseudoSelector(o,p,d,f,a){a.ruleNode.block.children.forEach(T=>{o.name==="before"&&T.property==="content"?T.value.children.forEach(B=>{B.type==="String"&&(this.beforeContent=B.value)}):o.name==="after"&&T.property==="content"&&T.value.children.forEach(M=>{M.type==="String"&&(this.afterContent=M.value)})})}afterParsed(o){Object.keys(this.textTargets).forEach(p=>{let d=this.textTargets[p],f=d.selector.split("::"),a=f[0],T=o.querySelectorAll(a),M;T.forEach((B,G)=>{let J=pp(B,d.args),ie=o.querySelector(fp(J));if(ie)if(d.style){this.selector=qn(),B.setAttribute("data-target-text",this.selector);let $="";if(f.length>1&&($+="::"+f[1]),d.style==="before"||d.style==="after"){let ae=`${d.style}Content`;M=El(this[ae])}else M=El(ie.textContent," ");M=d.style==="first-letter"?M.charAt(0):M,this.styleSheet.insertRule(`[data-target-text="${this.selector}"]${$} { ${d.variable}: "${M}" }`)}else console.warn("missed target",J)})})}},XC=Qy;var KC=[ZC,HC,YC,XC];var e_=class extends ri{constructor(o,p,d){super(o,p,d)}filter(o){Cp(o,p=>this.filterEmpty(p),NodeFilter.SHOW_TEXT)}filterEmpty(o){if(o.textContent.length>1&&qh(o)){let p=o.parentNode;if(rn(p)&&p.closest("pre"))return NodeFilter.FILTER_REJECT;let f=gp(o),a=yp(o);return a===null&&f===null?(o.textContent=" ",NodeFilter.FILTER_REJECT):a===null||f===null?NodeFilter.FILTER_ACCEPT:(o.textContent=" ",NodeFilter.FILTER_REJECT)}else return NodeFilter.FILTER_REJECT}},JC=e_;var t_=class extends ri{constructor(o,p,d){super(o,p,d)}filter(o){Cp(o,null,NodeFilter.SHOW_COMMENT)}},QC=t_;var i_=class extends ri{constructor(o,p,d){super(o,p,d)}filter(o){o.querySelectorAll("script").forEach(p=>{p.remove()})}},ek=i_;var nk=$i(Cn(),1),ak=$i(rk(),1);var n_=class extends ri{constructor(o,p,d){super(o,p,d),this.displayRules={}}onDeclaration(o,p,d,f){if(o.property==="display"){let a=nk.default.generate(f.ruleNode.prelude),T=o.value.children.first().name;a.split(",").forEach(M=>{this.displayRules[M]={value:T,selector:M,specificity:(0,ak.calculateSpecificity)(M),important:o.important}})}}filter(o){let{matches:p,selectors:d}=this.sortDisplayedSelectors(o,this.displayRules);for(let a=0;a<p.length;a++){let T=p[a],M=d[a],B=M[M.length-1].value;this.removable(T)&&B==="none"&&(T.dataset.undisplayed="undisplayed")}let f=o.querySelectorAll("[style]");for(let a=0;a<f.length;a++){let T=f[a];this.removable(T)&&(T.dataset.undisplayed="undisplayed")}}sorter(o,p){return o.important&&!p.important?1:p.important&&!o.important?-1:o.specificity-p.specificity}sortDisplayedSelectors(o,p=[]){let d=[],f=[];for(let a in p){let T=p[a],M=T.selector,B=[];try{try{B=o.querySelectorAll(M)}catch{B=o.querySelectorAll($C(M))}}catch{B=[]}let G=Array.from(B);for(let J of G)if(d.includes(J)){let ie=d.indexOf(J);f[ie].push(T),f[ie]=f[ie].sort(this.sorter)}else d.push(J),f.push([T])}return{matches:d,selectors:f}}removable(o){return!(o.style&&o.style.display!==""&&o.style.display!=="none")}},sk=n_;var ok=[JC,QC,ek,sk];var EP=$i(xl(),1),AP=$i(PP(),1),d_=[...UC,...KC,...ok],Mf=class{constructor(o,p,d){let f=[];d_.forEach(a=>{let T=new a(o,p,d);f.push(T),(0,AP.default)(T,this)})}};(0,EP.default)(Mf.prototype);function If(){for(var s=0;s<arguments.length;s++)d_.push(arguments[s])}function p_(s,o,p){return new Mf(s,o,p)}var zf=class{constructor(o){this.settings=o||{},this.polisher=new Ly(!1),this.chunker=new lg(void 0,void 0,this.settings),this.hooks={},this.hooks.beforePreview=new Pt(this),this.hooks.afterPreview=new Pt(this),this.size={width:{value:8.5,unit:"in"},height:{value:11,unit:"in"},format:void 0,orientation:void 0},this.chunker.on("page",p=>{this.emit("page",p)}),this.chunker.on("rendering",()=>{this.emit("rendering",this.chunker)})}initializeHandlers(){let o=p_(this.chunker,this.polisher,this);return o.on("size",p=>{this.size=p,this.emit("size",p)}),o.on("atpages",p=>{this.atpages=p,this.emit("atpages",p)}),o}registerHandlers(){return If.apply(If,arguments)}getParams(o){let p,d=new URL(window.location),f=new URLSearchParams(d.search);for(var a of f.entries())a[0]===o&&(p=a[1]);return p}wrapContent(){let o=document.querySelector("body"),p;return p=o.querySelector(":scope > template[data-ref='pagedjs-content']"),p||(p=document.createElement("template"),p.dataset.ref="pagedjs-content",p.innerHTML=o.innerHTML,o.innerHTML="",o.appendChild(p)),p.content}removeStyles(o=document){let p=Array.from(o.querySelectorAll("link[rel='stylesheet']:not([data-pagedjs-ignore], [media~='screen'])")),d=Array.from(o.querySelectorAll("style:not([data-pagedjs-inserted-styles], [data-pagedjs-ignore], [media~='screen'])"));return[...p,...d].sort(function(a,T){let M=a.compareDocumentPosition(T);return M===Node.DOCUMENT_POSITION_PRECEDING?1:M===Node.DOCUMENT_POSITION_FOLLOWING?-1:0}).map(a=>{if(a.nodeName==="STYLE"){let T={};return T[window.location.href]=a.textContent,a.remove(),T}if(a.nodeName==="LINK")return a.remove(),a.href;console.warn(`Unable to process: ${a}, ignoring.`)})}async preview(o,p,d){await this.hooks.beforePreview.trigger(o,d),o||(o=this.wrapContent()),p||(p=this.removeStyles()),this.polisher.setup(),this.handlers=this.initializeHandlers(),await this.polisher.add(...p);let f=performance.now(),a=await this.chunker.flow(o,d),T=performance.now();return a.performance=T-f,a.size=this.size,this.emit("rendered",a),await this.hooks.afterPreview.trigger(a.pages),a}};(0,MP.default)(zf.prototype);var f_=zf;addEventListener("DOMContentLoaded",s=>{let o=new f_,p=window.location,d=new URLSearchParams(p.search);(d.has("print")||d.has("p"))&&o.preview().then(f=>{console.log("Rendered",f.total,"pages.")})});var Js=$i(m_()),jq=$i(LP());function F5(s,o,p){try{return window.URL.createObjectURL(new Blob([Uint8Array.from(s.split("").map(function(d){return d.charCodeAt(0)}))],{type:o}))}catch{return"data:"+o+(p?";base64,":",")+s}}function mr(s){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(s)?s:new Uint8Array(s||0),this.pos=0,this.type=0,this.length=this.buf.length}function j5(s,o,p){var d,f,a=p.buf;if(f=a[p.pos++],d=(112&f)>>4,f<128||(f=a[p.pos++],d|=(127&f)<<3,f<128)||(f=a[p.pos++],d|=(127&f)<<10,f<128)||(f=a[p.pos++],d|=(127&f)<<17,f<128)||(f=a[p.pos++],d|=(127&f)<<24,f<128)||(f=a[p.pos++],d|=(1&f)<<31,f<128))return Bu(s,d,o);throw new Error("Expected varint not more than 10 bytes")}function Vo(s){return s.type===mr.Bytes?s.readVarint()+s.pos:s.pos+1}function Bu(s,o,p){return p?4294967296*o+(s>>>0):4294967296*(o>>>0)+(s>>>0)}function N5(s,o){var p,d;if(s>=0?(p=s%4294967296|0,d=s/4294967296|0):(p=~(-s%4294967296),d=~(-s/4294967296),4294967295^p?p=p+1|0:(p=0,d=d+1|0)),s>=18446744073709552e3||s<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");o.realloc(10),q5(p,d,o),V5(d,o)}function q5(s,o,p){p.buf[p.pos++]=127&s|128,s>>>=7,p.buf[p.pos++]=127&s|128,s>>>=7,p.buf[p.pos++]=127&s|128,s>>>=7,p.buf[p.pos++]=127&s|128,s>>>=7,p.buf[p.pos]=127&s}function V5(s,o){var p=(7&s)<<4;o.buf[o.pos++]|=p|((s>>>=3)?128:0),s&&(o.buf[o.pos++]=127&s|((s>>>=7)?128:0),s&&(o.buf[o.pos++]=127&s|((s>>>=7)?128:0),s&&(o.buf[o.pos++]=127&s|((s>>>=7)?128:0),s&&(o.buf[o.pos++]=127&s|((s>>>=7)?128:0),s&&(o.buf[o.pos++]=127&s)))))}function OP(s,o,p){var d=o<=16383?1:o<=2097151?2:o<=268435455?3:Math.ceil(Math.log(o)/(7*Math.LN2));p.realloc(d);for(var f=p.pos-1;f>=s;f--)p.buf[f+d]=p.buf[f]}function W5(s,o){for(var p=0;p<s.length;p++)o.writeVarint(s[p])}function G5(s,o){for(var p=0;p<s.length;p++)o.writeSVarint(s[p])}function U5(s,o){for(var p=0;p<s.length;p++)o.writeFloat(s[p])}function Z5(s,o){for(var p=0;p<s.length;p++)o.writeDouble(s[p])}function $5(s,o){for(var p=0;p<s.length;p++)o.writeBoolean(s[p])}function H5(s,o){for(var p=0;p<s.length;p++)o.writeFixed32(s[p])}function Y5(s,o){for(var p=0;p<s.length;p++)o.writeSFixed32(s[p])}function X5(s,o){for(var p=0;p<s.length;p++)o.writeFixed64(s[p])}function K5(s,o){for(var p=0;p<s.length;p++)o.writeSFixed64(s[p])}function Df(s,o){return(s[o]|s[o+1]<<8|s[o+2]<<16)+16777216*s[o+3]}function Fu(s,o,p){s[p]=o,s[p+1]=o>>>8,s[p+2]=o>>>16,s[p+3]=o>>>24}function DP(s,o){return(s[o]|s[o+1]<<8|s[o+2]<<16)+(s[o+3]<<24)}function J5(s,o,p){for(var d="",f=o;f<p;){var a=s[f],T=null,M=a>239?4:a>223?3:a>191?2:1;if(f+M>p)break;var B,G,J;M===1?a<128&&(T=a):M===2?(192&(B=s[f+1]))==128&&(T=(31&a)<<6|63&B)<=127&&(T=null):M===3?(B=s[f+1],G=s[f+2],(192&B)==128&&(192&G)==128&&((T=(15&a)<<12|(63&B)<<6|63&G)<=2047||T>=55296&&T<=57343)&&(T=null)):M===4&&(B=s[f+1],G=s[f+2],J=s[f+3],(192&B)==128&&(192&G)==128&&(192&J)==128&&((T=(15&a)<<18|(63&B)<<12|(63&G)<<6|63&J)<=65535||T>=1114112)&&(T=null)),T===null?(T=65533,M=1):T>65535&&(T-=65536,d+=String.fromCharCode(T>>>10&1023|55296),T=56320|1023&T),d+=String.fromCharCode(T),f+=M}return d}function Q5(s,o,p){for(var d,f,a=0;a<o.length;a++){if((d=o.charCodeAt(a))>55295&&d<57344){if(!f){d>56319||a+1===o.length?(s[p++]=239,s[p++]=191,s[p++]=189):f=d;continue}if(d<56320){s[p++]=239,s[p++]=191,s[p++]=189,f=d;continue}d=f-55296<<10|d-56320|65536,f=null}else f&&(s[p++]=239,s[p++]=191,s[p++]=189,f=null);d<128?s[p++]=d:(d<2048?s[p++]=d>>6|192:(d<65536?s[p++]=d>>12|224:(s[p++]=d>>18|240,s[p++]=d>>12&63|128),s[p++]=d>>6&63|128),s[p++]=63&d|128)}return p}function ju(s,o){this.x=s,this.y=o}function Nu(s,o,p,d,f){this.properties={},this.extent=p,this.type=0,this._pbf=s,this._geometry=-1,this._keys=d,this._values=f,s.readFields(e3,this,o)}function e3(s,o,p){s==1?o.id=p.readVarint():s==2?t3(p,o):s==3?o.type=p.readVarint():s==4&&(o._geometry=p.pos)}function t3(s,o){for(var p=s.readVarint()+s.pos;s.pos<p;){var d=o._keys[s.readVarint()],f=o._values[s.readVarint()];o.properties[d]=f}}function i3(s){var o=s.length;if(o<=1)return[s];for(var p,d,f=[],a=0;a<o;a++){var T=r3(s[a]);T!==0&&(d===void 0&&(d=T<0),d===T<0?(p&&f.push(p),p=[s[a]]):p.push(s[a]))}return p&&f.push(p),f}function r3(s){for(var o,p,d=0,f=0,a=s.length,T=a-1;f<a;T=f++)o=s[f],p=s[T],d+=(p.x-o.x)*(o.y+p.y);return d}function BP(s,o){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields(n3,this,o),this.length=this._features.length}function n3(s,o,p){s===15?o.version=p.readVarint():s===1?o.name=p.readString():s===5?o.extent=p.readVarint():s===2?o._features.push(p.pos):s===3?o._keys.push(p.readString()):s===4&&o._values.push(a3(p))}function a3(s){for(var o=null,p=s.readVarint()+s.pos;s.pos<p;){var d=s.readVarint()>>3;o=d===1?s.readString():d===2?s.readFloat():d===3?s.readDouble():d===4?s.readVarint64():d===5?s.readVarint():d===6?s.readSVarint():d===7?s.readBoolean():null}return o}function s3(s,o){this.layers=s.readFields(o3,{},o)}function o3(s,o,p){if(s===3){var d=new y3(p,p.readVarint()+p.pos);d.length&&(o[d.name]=d)}}(function(s){function o(je){if(typeof je!="string"&&(je=String(je)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(je))throw new TypeError("Invalid character in header field name");return je.toLowerCase()}function p(je){return typeof je!="string"&&(je=String(je)),je}function d(je){var Je={next:function(){var ot=je.shift();return{done:ot===void 0,value:ot}}};return xe.iterable&&(Je[Symbol.iterator]=function(){return Je}),Je}function f(je){this.map={},je instanceof f?je.forEach(function(Je,ot){this.append(ot,Je)},this):Array.isArray(je)?je.forEach(function(Je){this.append(Je[0],Je[1])},this):je&&Object.getOwnPropertyNames(je).forEach(function(Je){this.append(Je,je[Je])},this)}function a(je){if(je.bodyUsed)return Promise.reject(new TypeError("Already read"));je.bodyUsed=!0}function T(je){return new Promise(function(Je,ot){je.onload=function(){Je(je.result)},je.onerror=function(){ot(je.error)}})}function M(je){var Je=new FileReader,ot=T(Je);return Je.readAsArrayBuffer(je),ot}function B(je){var Je=new FileReader,ot=T(Je);return Je.readAsText(je),ot}function G(je){for(var Je=new Uint8Array(je),ot=new Array(Je.length),St=0;St<Je.length;St++)ot[St]=String.fromCharCode(Je[St]);return ot.join("")}function J(je){if(je.slice)return je.slice(0);var Je=new Uint8Array(je.byteLength);return Je.set(new Uint8Array(je)),Je.buffer}function ie(){return this.bodyUsed=!1,this._initBody=function(je){if(this._bodyInit=je,je)if(typeof je=="string")this._bodyText=je;else if(xe.blob&&Blob.prototype.isPrototypeOf(je))this._bodyBlob=je;else if(xe.formData&&FormData.prototype.isPrototypeOf(je))this._bodyFormData=je;else if(xe.searchParams&&URLSearchParams.prototype.isPrototypeOf(je))this._bodyText=je.toString();else if(xe.arrayBuffer&&xe.blob&&dt(je))this._bodyArrayBuffer=J(je.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!xe.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(je)&&!mt(je))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=J(je)}else this._bodyText="";this.headers.get("content-type")||(typeof je=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):xe.searchParams&&URLSearchParams.prototype.isPrototypeOf(je)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},xe.blob&&(this.blob=function(){var je=a(this);if(je)return je;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?a(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(M)}),this.text=function(){var je=a(this);if(je)return je;if(this._bodyBlob)return B(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(G(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},xe.formData&&(this.formData=function(){return this.text().then(te)}),this.json=function(){return this.text().then(JSON.parse)},this}function $(je){var Je=je.toUpperCase();return Vt.indexOf(Je)>-1?Je:je}function ae(je,Je){Je=Je||{};var ot=Je.body;if(je instanceof ae){if(je.bodyUsed)throw new TypeError("Already read");this.url=je.url,this.credentials=je.credentials,Je.headers||(this.headers=new f(je.headers)),this.method=je.method,this.mode=je.mode,ot||je._bodyInit==null||(ot=je._bodyInit,je.bodyUsed=!0)}else this.url=String(je);if(this.credentials=Je.credentials||this.credentials||"omit",!Je.headers&&this.headers||(this.headers=new f(Je.headers)),this.method=$(Je.method||this.method||"GET"),this.mode=Je.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&ot)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(ot)}function te(je){var Je=new FormData;return je.trim().split("&").forEach(function(ot){if(ot){var St=ot.split("="),Ht=St.shift().replace(/\+/g," "),Tt=St.join("=").replace(/\+/g," ");Je.append(decodeURIComponent(Ht),decodeURIComponent(Tt))}}),Je}function Te(je){var Je=new f;return je.split(/\r?\n/).forEach(function(ot){var St=ot.split(":"),Ht=St.shift().trim();if(Ht){var Tt=St.join(":").trim();Je.append(Ht,Tt)}}),Je}function We(je,Je){Je||(Je={}),this.type="default",this.status="status"in Je?Je.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in Je?Je.statusText:"OK",this.headers=new f(Je.headers),this.url=Je.url||"",this._initBody(je)}if(!s.fetch){var xe={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};if(xe.arrayBuffer)var Ze=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],dt=function(je){return je&&DataView.prototype.isPrototypeOf(je)},mt=ArrayBuffer.isView||function(je){return je&&Ze.indexOf(Object.prototype.toString.call(je))>-1};f.prototype.append=function(je,Je){je=o(je),Je=p(Je);var ot=this.map[je];this.map[je]=ot?ot+","+Je:Je},f.prototype.delete=function(je){delete this.map[o(je)]},f.prototype.get=function(je){return je=o(je),this.has(je)?this.map[je]:null},f.prototype.has=function(je){return this.map.hasOwnProperty(o(je))},f.prototype.set=function(je,Je){this.map[o(je)]=p(Je)},f.prototype.forEach=function(je,Je){var ot=this;for(var St in this.map)ot.map.hasOwnProperty(St)&&je.call(Je,ot.map[St],St,ot)},f.prototype.keys=function(){var je=[];return this.forEach(function(Je,ot){je.push(ot)}),d(je)},f.prototype.values=function(){var je=[];return this.forEach(function(Je){je.push(Je)}),d(je)},f.prototype.entries=function(){var je=[];return this.forEach(function(Je,ot){je.push([ot,Je])}),d(je)},xe.iterable&&(f.prototype[Symbol.iterator]=f.prototype.entries);var Vt=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];ae.prototype.clone=function(){return new ae(this,{body:this._bodyInit})},ie.call(ae.prototype),ie.call(We.prototype),We.prototype.clone=function(){return new We(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},We.error=function(){var je=new We(null,{status:0,statusText:""});return je.type="error",je};var Bt=[301,302,303,307,308];We.redirect=function(je,Je){if(Bt.indexOf(Je)===-1)throw new RangeError("Invalid status code");return new We(null,{status:Je,headers:{location:je}})},s.Headers=f,s.Request=ae,s.Response=We,s.fetch=function(je,Je){return new Promise(function(ot,St){var Ht=new ae(je,Je),Tt=new XMLHttpRequest;Tt.onload=function(){var _i={status:Tt.status,statusText:Tt.statusText,headers:Te(Tt.getAllResponseHeaders()||"")};_i.url="responseURL"in Tt?Tt.responseURL:_i.headers.get("X-Request-URL");var ti="response"in Tt?Tt.response:Tt.responseText;ot(new We(ti,_i))},Tt.onerror=function(){St(new TypeError("Network request failed"))},Tt.ontimeout=function(){St(new TypeError("Network request failed"))},Tt.open(Ht.method,Ht.url,!0),Ht.credentials==="include"&&(Tt.withCredentials=!0),"responseType"in Tt&&xe.blob&&(Tt.responseType="blob"),Ht.headers.forEach(function(_i,ti){Tt.setRequestHeader(ti,_i)}),Tt.send(Ht._bodyInit===void 0?null:Ht._bodyInit)})},s.fetch.polyfill=!0}})(typeof self<"u"?self:void 0);var l3=function(s,o,p,d,f){var a,T,M=8*f-d-1,B=(1<<M)-1,G=B>>1,J=-7,ie=p?f-1:0,$=p?-1:1,ae=s[o+ie];for(ie+=$,a=ae&(1<<-J)-1,ae>>=-J,J+=M;J>0;a=256*a+s[o+ie],ie+=$,J-=8);for(T=a&(1<<-J)-1,a>>=-J,J+=d;J>0;T=256*T+s[o+ie],ie+=$,J-=8);if(a===0)a=1-G;else{if(a===B)return T?NaN:1/0*(ae?-1:1);T+=Math.pow(2,d),a-=G}return(ae?-1:1)*T*Math.pow(2,a-d)},c3=function(s,o,p,d,f,a){var T,M,B,G=8*a-f-1,J=(1<<G)-1,ie=J>>1,$=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,ae=d?0:a-1,te=d?1:-1,Te=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(M=isNaN(o)?1:0,T=J):(T=Math.floor(Math.log(o)/Math.LN2),o*(B=Math.pow(2,-T))<1&&(T--,B*=2),o+=T+ie>=1?$/B:$*Math.pow(2,1-ie),o*B>=2&&(T++,B/=2),T+ie>=J?(M=0,T=J):T+ie>=1?(M=(o*B-1)*Math.pow(2,f),T+=ie):(M=o*Math.pow(2,ie-1)*Math.pow(2,f),T=0));f>=8;s[p+ae]=255&M,ae+=te,M/=256,f-=8);for(T=T<<f|M,G+=f;G>0;s[p+ae]=255&T,ae+=te,T/=256,G-=8);s[p+ae-te]|=128*Te},u3={read:l3,write:c3},h3=mr,Rf=u3;mr.Varint=0,mr.Fixed64=1,mr.Bytes=2,mr.Fixed32=5;var g_=4294967296,RP=1/g_;mr.prototype={destroy:function(){this.buf=null},readFields:function(s,o,p){var d=this;for(p=p||this.length;this.pos<p;){var f=d.readVarint(),a=f>>3,T=d.pos;d.type=7&f,s(a,o,d),d.pos===T&&d.skip(f)}return o},readMessage:function(s,o){return this.readFields(s,o,this.readVarint()+this.pos)},readFixed32:function(){var s=Df(this.buf,this.pos);return this.pos+=4,s},readSFixed32:function(){var s=DP(this.buf,this.pos);return this.pos+=4,s},readFixed64:function(){var s=Df(this.buf,this.pos)+Df(this.buf,this.pos+4)*g_;return this.pos+=8,s},readSFixed64:function(){var s=Df(this.buf,this.pos)+DP(this.buf,this.pos+4)*g_;return this.pos+=8,s},readFloat:function(){var s=Rf.read(this.buf,this.pos,!0,23,4);return this.pos+=4,s},readDouble:function(){var s=Rf.read(this.buf,this.pos,!0,52,8);return this.pos+=8,s},readVarint:function(s){var o,p,d=this.buf;return p=d[this.pos++],o=127&p,p<128?o:(p=d[this.pos++],o|=(127&p)<<7,p<128?o:(p=d[this.pos++],o|=(127&p)<<14,p<128?o:(p=d[this.pos++],o|=(127&p)<<21,p<128?o:(p=d[this.pos],o|=(15&p)<<28,j5(o,s,this)))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var s=this.readVarint();return s%2==1?(s+1)/-2:s/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var s=this.readVarint()+this.pos,o=J5(this.buf,this.pos,s);return this.pos=s,o},readBytes:function(){var s=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,s);return this.pos=s,o},readPackedVarint:function(s,o){var p=this,d=Vo(this);for(s=s||[];this.pos<d;)s.push(p.readVarint(o));return s},readPackedSVarint:function(s){var o=this,p=Vo(this);for(s=s||[];this.pos<p;)s.push(o.readSVarint());return s},readPackedBoolean:function(s){var o=this,p=Vo(this);for(s=s||[];this.pos<p;)s.push(o.readBoolean());return s},readPackedFloat:function(s){var o=this,p=Vo(this);for(s=s||[];this.pos<p;)s.push(o.readFloat());return s},readPackedDouble:function(s){var o=this,p=Vo(this);for(s=s||[];this.pos<p;)s.push(o.readDouble());return s},readPackedFixed32:function(s){var o=this,p=Vo(this);for(s=s||[];this.pos<p;)s.push(o.readFixed32());return s},readPackedSFixed32:function(s){var o=this,p=Vo(this);for(s=s||[];this.pos<p;)s.push(o.readSFixed32());return s},readPackedFixed64:function(s){var o=this,p=Vo(this);for(s=s||[];this.pos<p;)s.push(o.readFixed64());return s},readPackedSFixed64:function(s){var o=this,p=Vo(this);for(s=s||[];this.pos<p;)s.push(o.readSFixed64());return s},skip:function(s){var o=7&s;if(o===mr.Varint)for(;this.buf[this.pos++]>127;);else if(o===mr.Bytes)this.pos=this.readVarint()+this.pos;else if(o===mr.Fixed32)this.pos+=4;else{if(o!==mr.Fixed64)throw new Error("Unimplemented type: "+o);this.pos+=8}},writeTag:function(s,o){this.writeVarint(s<<3|o)},realloc:function(s){for(var o=this.length||16;o<this.pos+s;)o*=2;if(o!==this.length){var p=new Uint8Array(o);p.set(this.buf),this.buf=p,this.length=o}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(s){this.realloc(4),Fu(this.buf,s,this.pos),this.pos+=4},writeSFixed32:function(s){this.realloc(4),Fu(this.buf,s,this.pos),this.pos+=4},writeFixed64:function(s){this.realloc(8),Fu(this.buf,-1&s,this.pos),Fu(this.buf,Math.floor(s*RP),this.pos+4),this.pos+=8},writeSFixed64:function(s){this.realloc(8),Fu(this.buf,-1&s,this.pos),Fu(this.buf,Math.floor(s*RP),this.pos+4),this.pos+=8},writeVarint:function(s){if((s=+s||0)>268435455||s<0)return void N5(s,this);this.realloc(4),this.buf[this.pos++]=127&s|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=s>>>7&127)))},writeSVarint:function(s){this.writeVarint(s<0?2*-s-1:2*s)},writeBoolean:function(s){this.writeVarint(!!s)},writeString:function(s){s=String(s),this.realloc(4*s.length),this.pos++;var o=this.pos;this.pos=Q5(this.buf,s,this.pos);var p=this.pos-o;p>=128&&OP(o,p,this),this.pos=o-1,this.writeVarint(p),this.pos+=p},writeFloat:function(s){this.realloc(4),Rf.write(this.buf,s,this.pos,!0,23,4),this.pos+=4},writeDouble:function(s){this.realloc(8),Rf.write(this.buf,s,this.pos,!0,52,8),this.pos+=8},writeBytes:function(s){var o=this,p=s.length;this.writeVarint(p),this.realloc(p);for(var d=0;d<p;d++)o.buf[o.pos++]=s[d]},writeRawMessage:function(s,o){this.pos++;var p=this.pos;s(o,this);var d=this.pos-p;d>=128&&OP(p,d,this),this.pos=p-1,this.writeVarint(d),this.pos+=d},writeMessage:function(s,o,p){this.writeTag(s,mr.Bytes),this.writeRawMessage(o,p)},writePackedVarint:function(s,o){this.writeMessage(s,W5,o)},writePackedSVarint:function(s,o){this.writeMessage(s,G5,o)},writePackedBoolean:function(s,o){this.writeMessage(s,$5,o)},writePackedFloat:function(s,o){this.writeMessage(s,U5,o)},writePackedDouble:function(s,o){this.writeMessage(s,Z5,o)},writePackedFixed32:function(s,o){this.writeMessage(s,H5,o)},writePackedSFixed32:function(s,o){this.writeMessage(s,Y5,o)},writePackedFixed64:function(s,o){this.writeMessage(s,X5,o)},writePackedSFixed64:function(s,o){this.writeMessage(s,K5,o)},writeBytesField:function(s,o){this.writeTag(s,mr.Bytes),this.writeBytes(o)},writeFixed32Field:function(s,o){this.writeTag(s,mr.Fixed32),this.writeFixed32(o)},writeSFixed32Field:function(s,o){this.writeTag(s,mr.Fixed32),this.writeSFixed32(o)},writeFixed64Field:function(s,o){this.writeTag(s,mr.Fixed64),this.writeFixed64(o)},writeSFixed64Field:function(s,o){this.writeTag(s,mr.Fixed64),this.writeSFixed64(o)},writeVarintField:function(s,o){this.writeTag(s,mr.Varint),this.writeVarint(o)},writeSVarintField:function(s,o){this.writeTag(s,mr.Varint),this.writeSVarint(o)},writeStringField:function(s,o){this.writeTag(s,mr.Bytes),this.writeString(o)},writeFloatField:function(s,o){this.writeTag(s,mr.Fixed32),this.writeFloat(o)},writeDoubleField:function(s,o){this.writeTag(s,mr.Fixed64),this.writeDouble(o)},writeBooleanField:function(s,o){this.writeVarintField(s,!!o)}};var d3=ju;ju.prototype={clone:function(){return new ju(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var o=s.x-this.x,p=s.y-this.y;return o*o+p*p},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,o){return Math.atan2(this.x*o-this.y*s,this.x*s+this.y*o)},_matMult:function(s){var o=s[0]*this.x+s[1]*this.y,p=s[2]*this.x+s[3]*this.y;return this.x=o,this.y=p,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var o=Math.cos(s),p=Math.sin(s),d=o*this.x-p*this.y,f=p*this.x+o*this.y;return this.x=d,this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},ju.convert=function(s){return s instanceof ju?s:Array.isArray(s)?new ju(s[0],s[1]):s};var p3=d3,f3=Nu;Nu.types=["Unknown","Point","LineString","Polygon"],Nu.prototype.loadGeometry=function(){var s=this._pbf;s.pos=this._geometry;for(var o,p=s.readVarint()+s.pos,d=1,f=0,a=0,T=0,M=[];s.pos<p;){if(!f){var B=s.readVarint();d=7&B,f=B>>3}if(f--,d===1||d===2)a+=s.readSVarint(),T+=s.readSVarint(),d===1&&(o&&M.push(o),o=[]),o.push(new p3(a,T));else{if(d!==7)throw new Error("unknown command "+d);o&&o.push(o[0].clone())}}return o&&M.push(o),M},Nu.prototype.bbox=function(){var s=this._pbf;s.pos=this._geometry;for(var o=s.readVarint()+s.pos,p=1,d=0,f=0,a=0,T=1/0,M=-1/0,B=1/0,G=-1/0;s.pos<o;){if(!d){var J=s.readVarint();p=7&J,d=J>>3}if(d--,p===1||p===2)f+=s.readSVarint(),a+=s.readSVarint(),f<T&&(T=f),f>M&&(M=f),a<B&&(B=a),a>G&&(G=a);else if(p!==7)throw new Error("unknown command "+p)}return[T,B,M,G]},Nu.prototype.toGeoJSON=function(s,o,p){function d(ae){for(var te=0;te<ae.length;te++){var Te=ae[te],We=180-360*(Te.y+B)/T;ae[te]=[360*(Te.x+M)/T-180,360/Math.PI*Math.atan(Math.exp(We*Math.PI/180))-90]}}var f,a,T=this.extent*Math.pow(2,p),M=this.extent*s,B=this.extent*o,G=this.loadGeometry(),J=Nu.types[this.type];switch(this.type){case 1:var ie=[];for(f=0;f<G.length;f++)ie[f]=G[f][0];G=ie,d(G);break;case 2:for(f=0;f<G.length;f++)d(G[f]);break;case 3:for(G=i3(G),f=0;f<G.length;f++)for(a=0;a<G[f].length;a++)d(G[f][a])}G.length===1?G=G[0]:J="Multi"+J;var $={type:"Feature",geometry:{type:J,coordinates:G},properties:this.properties};return"id"in this&&($.id=this.id),$};var m3=f3,g3=BP;BP.prototype.feature=function(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];var o=this._pbf.readVarint()+this._pbf.pos;return new m3(this._pbf,o,this.extent,this._keys,this._values)};var y3=g3,_3=s3,v3=_3;L.SVG.Tile=L.SVG.extend({initialize:function(s,o,p){L.SVG.prototype.initialize.call(this,p),this._tileCoord=s,this._size=o,this._initContainer(),this._container.setAttribute("width",this._size.x),this._container.setAttribute("height",this._size.y),this._container.setAttribute("viewBox",[0,0,this._size.x,this._size.y].join(" ")),this._layers={}},getCoord:function(){return this._tileCoord},getContainer:function(){return this._container},onAdd:L.Util.falseFn,addTo:function(s){if(this._map=s,this.options.interactive)for(var o in this._layers){var p=this._layers[o];p._path.style.pointerEvents="auto",this._map._targets[L.stamp(p._path)]=p}},removeFrom:function(s){if(this.options.interactive)for(var o in this._layers){var p=this._layers[o];delete this._map._targets[L.stamp(p._path)]}delete this._map},_initContainer:function(){L.SVG.prototype._initContainer.call(this),L.SVG.create("rect")},_addPath:function(s){this._rootGroup.appendChild(s._path),this._layers[L.stamp(s)]=s},_updateIcon:function(s){var o=s._path=L.SVG.create("image"),p=s.options.icon,d=p.options,f=L.point(d.iconSize),a=d.iconAnchor||f&&f.divideBy(2,!0),T=s._point.subtract(a);o.setAttribute("x",T.x),o.setAttribute("y",T.y),o.setAttribute("width",f.x+"px"),o.setAttribute("height",f.y+"px"),o.setAttribute("href",d.iconUrl)}}),L.svg.tile=function(s,o,p){return new L.SVG.Tile(s,o,p)};var Al=L.Class.extend({render:function(s,o){this._renderer=s,this.options=o,s._initPath(this),s._updateStyle(this)},updateStyle:function(s,o){this.options=o,s._updateStyle(this)},_getPixelBounds:function(){for(var s=this._parts,o=L.bounds([]),p=0;p<s.length;p++)for(var d=s[p],f=0;f<d.length;f++)o.extend(d[f]);var a=this._clickTolerance(),T=new L.Point(a,a);return o.min._subtract(T),o.max._add(T),o},_clickTolerance:L.Path.prototype._clickTolerance}),FP={_makeFeatureParts:function(s,o){var p,d=s.geometry;this._parts=[];for(var f=0;f<d.length;f++){for(var a=d[f],T=[],M=0;M<a.length;M++)p=a[M],T.push(L.point(p).scaleBy(o));this._parts.push(T)}},makeInteractive:function(){this._pxBounds=this._getPixelBounds()}},y_=L.CircleMarker.extend({includes:Al.prototype,statics:{iconCache:{}},initialize:function(s,o){this.properties=s.properties,this._makeFeatureParts(s,o)},render:function(s,o){Al.prototype.render.call(this,s,o),this._radius=o.radius||L.CircleMarker.prototype.options.radius,this._updatePath()},_makeFeatureParts:function(s,o){var p=s.geometry[0];typeof p[0]=="object"&&"x"in p[0]?(this._point=L.point(p[0]).scaleBy(o),this._empty=L.Util.falseFn):(this._point=L.point(p).scaleBy(o),this._empty=L.Util.falseFn)},makeInteractive:function(){this._updateBounds()},updateStyle:function(s,o){return this._radius=o.radius||this._radius,this._updateBounds(),Al.prototype.updateStyle.call(this,s,o)},_updateBounds:function(){var s=this.options.icon;if(s){var o=L.point(s.options.iconSize),p=s.options.iconAnchor||o&&o.divideBy(2,!0),d=this._point.subtract(p);this._pxBounds=new L.Bounds(d,d.add(s.options.iconSize))}else L.CircleMarker.prototype._updateBounds.call(this)},_updatePath:function(){this.options.icon?this._renderer._updateIcon(this):L.CircleMarker.prototype._updatePath.call(this)},_getImage:function(){if(this.options.icon){var s=this.options.icon.options.iconUrl,o=y_.iconCache[s];if(!o){var p=this.options.icon;o=y_.iconCache[s]=p.createIcon()}return o}return null},_containsPoint:function(s){return this.options.icon?this._pxBounds.contains(s):L.CircleMarker.prototype._containsPoint.call(this,s)}}),b3=L.Polyline.extend({includes:[Al.prototype,FP],initialize:function(s,o){this.properties=s.properties,this._makeFeatureParts(s,o)},render:function(s,o){o.fill=!1,Al.prototype.render.call(this,s,o),this._updatePath()},updateStyle:function(s,o){o.fill=!1,Al.prototype.updateStyle.call(this,s,o)}}),x3=L.Polygon.extend({includes:[Al.prototype,FP],initialize:function(s,o){this.properties=s.properties,this._makeFeatureParts(s,o)},render:function(s,o){Al.prototype.render.call(this,s,o),this._updatePath()}});L.VectorGrid=L.GridLayer.extend({options:{rendererFactory:L.svg.tile,vectorTileLayerStyles:{},interactive:!1},initialize:function(s){L.setOptions(this,s),L.GridLayer.prototype.initialize.apply(this,arguments),this.options.getFeatureId&&(this._vectorTiles={},this._overriddenStyles={},this.on("tileunload",function(o){var p=this._tileCoordsToKey(o.coords),d=this._vectorTiles[p];d&&this._map&&d.removeFrom(this._map),delete this._vectorTiles[p]},this)),this._dataLayerNames={}},createTile:function(s,o){var p=this.options.getFeatureId,d=this.getTileSize(),f=this.options.rendererFactory(s,d,this.options),a=this._getVectorTilePromise(s);return p&&(this._vectorTiles[this._tileCoordsToKey(s)]=f,f._features={}),a.then(function(T){for(var M in T.layers){this._dataLayerNames[M]=!0;for(var B=T.layers[M],G=this.getTileSize().divideBy(B.extent),J=this.options.vectorTileLayerStyles[M]||L.Path.prototype.options,ie=0;ie<B.features.length;ie++){var $,ae=B.features[ie],te=J;if(p){$=this.options.getFeatureId(ae);var Te=this._overriddenStyles[$];Te&&(te=Te[M]?Te[M]:Te)}if(te instanceof Function&&(te=te(ae.properties,s.z)),te instanceof Array||(te=[te]),te.length){for(var We=this._createLayer(ae,G),xe=0;xe<te.length;xe++){var Ze=L.extend({},L.Path.prototype.options,te[xe]);We.render(f,Ze),f._addPath(We)}this.options.interactive&&We.makeInteractive(),p&&(f._features[$]={layerName:M,feature:We})}}}this._map!=null&&f.addTo(this._map),L.Util.requestAnimFrame(o.bind(s,null,null))}.bind(this)),f.getContainer()},setFeatureStyle:function(s,o){this._overriddenStyles[s]=o;for(var p in this._vectorTiles){var d=this._vectorTiles[p],f=d._features,a=f[s];if(a){var T=a.feature,M=o;o[a.layerName]&&(M=o[a.layerName]),this._updateStyles(T,d,M)}}return this},resetFeatureStyle:function(s){delete this._overriddenStyles[s];for(var o in this._vectorTiles){var p=this._vectorTiles[o],d=p._features,f=d[s];if(f){var a=f.feature,T=this.options.vectorTileLayerStyles[f.layerName]||L.Path.prototype.options;this._updateStyles(a,p,T)}}return this},getDataLayerNames:function(){return Object.keys(this._dataLayerNames)},_updateStyles:function(s,o,p){(p=p instanceof Function?p(s.properties,o.getCoord().z):p)instanceof Array||(p=[p]);for(var d=0;d<p.length;d++){var f=L.extend({},L.Path.prototype.options,p[d]);s.updateStyle(o,f)}},_createLayer:function(s,o,p){var d;switch(s.type){case 1:d=new y_(s,o);break;case 2:d=new b3(s,o);break;case 3:d=new x3(s,o)}return this.options.interactive&&d.addEventParent(this),d}}),L.vectorGrid=function(s){return new L.VectorGrid(s)},L.VectorGrid.Protobuf=L.VectorGrid.extend({options:{subdomains:"abc",fetchOptions:{}},initialize:function(s,o){this._url=s,L.VectorGrid.prototype.initialize.call(this,o)},setUrl:function(s,o){return this._url=s,o||this.redraw(),this},_getSubdomain:L.TileLayer.prototype._getSubdomain,_getVectorTilePromise:function(s){var o={s:this._getSubdomain(s),x:s.x,y:s.y,z:s.z};if(this._map&&!this._map.options.crs.infinite){var p=this._globalTileRange.max.y-s.y;this.options.tms&&(o.y=p),o["-y"]=p}var d=L.Util.template(this._url,L.extend(o,this.options));return fetch(d,this.options.fetchOptions).then(function(f){return f.ok?f.blob().then(function(a){var T=new FileReader;return new Promise(function(M){T.addEventListener("loadend",function(){var B=new h3(T.result);return M(new v3(B))}),T.readAsArrayBuffer(a)})}):{layers:[]}}).then(function(f){for(var a in f.layers){for(var T=[],M=0;M<f.layers[a].length;M++){var B=f.layers[a].feature(M);B.geometry=B.loadGeometry(),T.push(B)}f.layers[a].features=T}return f})}}),L.vectorGrid.protobuf=function(s,o){return new L.VectorGrid.Protobuf(s,o)};var w3=F5(`"use strict";function simplify$1(e,t){var r,n,o,i,a=t*t,s=e.length,l=0,u=s-1,c=[];for(e[l][2]=1,e[u][2]=1;u;){for(n=0,r=l+1;r<u;r++)(o=getSqSegDist(e[r],e[l],e[u]))>n&&(i=r,n=o);n>a?(e[i][2]=n,c.push(l),c.push(i),l=i):(u=c.pop(),l=c.pop())}}function getSqSegDist(e,t,r){var n=t[0],o=t[1],i=r[0],a=r[1],s=e[0],l=e[1],u=i-n,c=a-o;if(0!==u||0!==c){var f=((s-n)*u+(l-o)*c)/(u*u+c*c);f>1?(n=i,o=a):f>0&&(n+=u*f,o+=c*f)}return u=s-n,c=l-o,u*u+c*c}function convert$1(e,t){var r=[];if("FeatureCollection"===e.type)for(var n=0;n<e.features.length;n++)convertFeature(r,e.features[n],t);else"Feature"===e.type?convertFeature(r,e,t):convertFeature(r,{geometry:e},t);return r}function convertFeature(e,t,r){if(null!==t.geometry){var n,o,i,a,s=t.geometry,l=s.type,u=s.coordinates,c=t.properties;if("Point"===l)e.push(create(c,1,[projectPoint(u)]));else if("MultiPoint"===l)e.push(create(c,1,project(u)));else if("LineString"===l)e.push(create(c,2,[project(u,r)]));else if("MultiLineString"===l||"Polygon"===l){for(i=[],n=0;n<u.length;n++)a=project(u[n],r),"Polygon"===l&&(a.outer=0===n),i.push(a);e.push(create(c,"Polygon"===l?3:2,i))}else if("MultiPolygon"===l){for(i=[],n=0;n<u.length;n++)for(o=0;o<u[n].length;o++)a=project(u[n][o],r),a.outer=0===o,i.push(a);e.push(create(c,3,i))}else{if("GeometryCollection"!==l)throw new Error("Input data is not a valid GeoJSON object.");for(n=0;n<s.geometries.length;n++)convertFeature(e,{geometry:s.geometries[n],properties:c},r)}}}function create(e,t,r){var n={geometry:r,type:t,tags:e||null,min:[2,1],max:[-1,0]};return calcBBox(n),n}function project(e,t){for(var r=[],n=0;n<e.length;n++)r.push(projectPoint(e[n]));return t&&(simplify(r,t),calcSize(r)),r}function projectPoint(e){var t=Math.sin(e[1]*Math.PI/180),r=e[0]/360+.5,n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n=n<0?0:n>1?1:n,[r,n,0]}function calcSize(e){for(var t,r,n=0,o=0,i=0;i<e.length-1;i++)t=r||e[i],r=e[i+1],n+=t[0]*r[1]-r[0]*t[1],o+=Math.abs(r[0]-t[0])+Math.abs(r[1]-t[1]);e.area=Math.abs(n/2),e.dist=o}function calcBBox(e){var t=e.geometry,r=e.min,n=e.max;if(1===e.type)calcRingBBox(r,n,t);else for(var o=0;o<t.length;o++)calcRingBBox(r,n,t[o]);return e}function calcRingBBox(e,t,r){for(var n,o=0;o<r.length;o++)n=r[o],e[0]=Math.min(n[0],e[0]),t[0]=Math.max(n[0],t[0]),e[1]=Math.min(n[1],e[1]),t[1]=Math.max(n[1],t[1])}function transformTile(e,t){if(e.transformed)return e;var r,n,o,i=e.z2,a=e.x,s=e.y;for(r=0;r<e.features.length;r++){var l=e.features[r],u=l.geometry;if(1===l.type)for(n=0;n<u.length;n++)u[n]=transformPoint(u[n],t,i,a,s);else for(n=0;n<u.length;n++){var c=u[n];for(o=0;o<c.length;o++)c[o]=transformPoint(c[o],t,i,a,s)}}return e.transformed=!0,e}function transformPoint(e,t,r,n,o){return[Math.round(t*(e[0]*r-n)),Math.round(t*(e[1]*r-o))]}function clip$1(e,t,r,n,o,i,a,s){if(r/=t,n/=t,a>=r&&s<=n)return e;if(a>n||s<r)return null;for(var l=[],u=0;u<e.length;u++){var c,f,p=e[u],h=p.geometry,m=p.type;if(c=p.min[o],f=p.max[o],c>=r&&f<=n)l.push(p);else if(!(c>n||f<r)){var g=1===m?clipPoints(h,r,n,o):clipGeometry(h,r,n,o,i,3===m);g.length&&l.push({geometry:g,type:m,tags:e[u].tags||null,min:p.min,max:p.max})}}return l.length?l:null}function clipPoints(e,t,r,n){for(var o=[],i=0;i<e.length;i++){var a=e[i],s=a[n];s>=t&&s<=r&&o.push(a)}return o}function clipGeometry(e,t,r,n,o,i){for(var a=[],s=0;s<e.length;s++){var l,u,c,f=0,p=0,h=null,m=e[s],g=m.area,d=m.dist,v=m.outer,y=m.length,x=[];for(u=0;u<y-1;u++)l=h||m[u],h=m[u+1],f=p||l[n],p=h[n],f<t?p>r?(x.push(o(l,h,t),o(l,h,r)),i||(x=newSlice(a,x,g,d,v))):p>=t&&x.push(o(l,h,t)):f>r?p<t?(x.push(o(l,h,r),o(l,h,t)),i||(x=newSlice(a,x,g,d,v))):p<=r&&x.push(o(l,h,r)):(x.push(l),p<t?(x.push(o(l,h,t)),i||(x=newSlice(a,x,g,d,v))):p>r&&(x.push(o(l,h,r)),i||(x=newSlice(a,x,g,d,v))));l=m[y-1],f=l[n],f>=t&&f<=r&&x.push(l),c=x[x.length-1],i&&c&&(x[0][0]!==c[0]||x[0][1]!==c[1])&&x.push(x[0]),newSlice(a,x,g,d,v)}return a}function newSlice(e,t,r,n,o){return t.length&&(t.area=r,t.dist=n,void 0!==o&&(t.outer=o),e.push(t)),[]}function wrap$1(e,t,r){var n=e,o=clip$2(e,1,-1-t,t,0,r,-1,2),i=clip$2(e,1,1-t,2+t,0,r,-1,2);return(o||i)&&(n=clip$2(e,1,-t,1+t,0,r,-1,2),o&&(n=shiftFeatureCoords(o,1).concat(n)),i&&(n=n.concat(shiftFeatureCoords(i,-1)))),n}function shiftFeatureCoords(e,t){for(var r=[],n=0;n<e.length;n++){var o,i=e[n],a=i.type;if(1===a)o=shiftCoords(i.geometry,t);else{o=[];for(var s=0;s<i.geometry.length;s++)o.push(shiftCoords(i.geometry[s],t))}r.push({geometry:o,type:a,tags:i.tags,min:[i.min[0]+t,i.min[1]],max:[i.max[0]+t,i.max[1]]})}return r}function shiftCoords(e,t){var r=[];r.area=e.area,r.dist=e.dist;for(var n=0;n<e.length;n++)r.push([e[n][0]+t,e[n][1],e[n][2]]);return r}function createTile$1(e,t,r,n,o,i){for(var a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r,y:n,z2:t,transformed:!1,min:[2,1],max:[-1,0]},s=0;s<e.length;s++){a.numFeatures++,addFeature(a,e[s],o,i);var l=e[s].min,u=e[s].max;l[0]<a.min[0]&&(a.min[0]=l[0]),l[1]<a.min[1]&&(a.min[1]=l[1]),u[0]>a.max[0]&&(a.max[0]=u[0]),u[1]>a.max[1]&&(a.max[1]=u[1])}return a}function addFeature(e,t,r,n){var o,i,a,s,l=t.geometry,u=t.type,c=[],f=r*r;if(1===u)for(o=0;o<l.length;o++)c.push(l[o]),e.numPoints++,e.numSimplified++;else for(o=0;o<l.length;o++)if(a=l[o],n||!(2===u&&a.dist<r||3===u&&a.area<f)){var p=[];for(i=0;i<a.length;i++)s=a[i],(n||s[2]>f)&&(p.push(s),e.numSimplified++),e.numPoints++;3===u&&rewind(p,a.outer),c.push(p)}else e.numPoints+=a.length;c.length&&e.features.push({geometry:c,type:u,tags:t.tags||null})}function rewind(e,t){signedArea(e)<0===t&&e.reverse()}function signedArea(e){for(var t,r,n=0,o=0,i=e.length,a=i-1;o<i;a=o++)t=e[o],r=e[a],n+=(r[0]-t[0])*(t[1]+r[1]);return n}function geojsonvt(e,t){return new GeoJSONVT(e,t)}function GeoJSONVT(e,t){t=this.options=extend(Object.create(this.options),t);var r=t.debug;r&&console.time("preprocess data");var n=1<<t.maxZoom,o=convert(e,t.tolerance/(n*t.extent));this.tiles={},this.tileCoords=[],r&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),o=wrap(o,t.buffer/t.extent,intersectX),o.length&&this.splitTile(o,0,0,0),r&&(o.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function toID(e,t,r){return 32*((1<<e)*r+t)+e}function intersectX(e,t,r){return[r,(r-e[0])*(t[1]-e[1])/(t[0]-e[0])+e[1],1]}function intersectY(e,t,r){return[(r-e[1])*(t[0]-e[0])/(t[1]-e[1])+e[0],r,1]}function extend(e,t){for(var r in t)e[r]=t[r];return e}function isClippedSquare(e,t,r){var n=e.source;if(1!==n.length)return!1;var o=n[0];if(3!==o.type||o.geometry.length>1)return!1;var i=o.geometry[0].length;if(5!==i)return!1;for(var a=0;a<i;a++){var s=transform.point(o.geometry[0][a],t,e.z2,e.x,e.y);if(s[0]!==-r&&s[0]!==t+r||s[1]!==-r&&s[1]!==t+r)return!1}return!0}function feature$1(e,t){var r=t.id,n=t.bbox,o=null==t.properties?{}:t.properties,i=object(e,t);return null==r&&null==n?{type:"Feature",properties:o,geometry:i}:null==n?{type:"Feature",id:r,properties:o,geometry:i}:{type:"Feature",id:r,bbox:n,properties:o,geometry:i}}function object(e,t){function r(e,t){t.length&&t.pop();for(var r=u[e<0?~e:e],n=0,o=r.length;n<o;++n)t.push(l(r[n].slice(),n));e<0&&reverse(t,o)}function n(e){return l(e.slice())}function o(e){for(var t=[],n=0,o=e.length;n<o;++n)r(e[n],t);return t.length<2&&t.push(t[0].slice()),t}function i(e){for(var t=o(e);t.length<4;)t.push(t[0].slice());return t}function a(e){return e.map(i)}function s(e){var t,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(s)};case"Point":t=n(e.coordinates);break;case"MultiPoint":t=e.coordinates.map(n);break;case"LineString":t=o(e.arcs);break;case"MultiLineString":t=e.arcs.map(o);break;case"Polygon":t=a(e.arcs);break;case"MultiPolygon":t=e.arcs.map(a);break;default:return null}return{type:r,coordinates:t}}var l=transform$3(e),u=e.arcs;return s(t)}function extractArcs(e,t,r){function n(e){var t=e<0?~e:e;(c[t]||(c[t]=[])).push({i:e,g:l})}function o(e){e.forEach(n)}function i(e){e.forEach(o)}function a(e){e.forEach(i)}function s(e){switch(l=e,e.type){case"GeometryCollection":e.geometries.forEach(s);break;case"LineString":o(e.arcs);break;case"MultiLineString":case"Polygon":i(e.arcs);break;case"MultiPolygon":a(e.arcs)}}var l,u=[],c=[];return s(t),c.forEach(null==r?function(e){u.push(e[0].i)}:function(e){r(e[0].g,e[e.length-1].g)&&u.push(e[0].i)}),u}function planarRingArea(e){for(var t,r=-1,n=e.length,o=e[n-1],i=0;++r<n;)t=o,o=e[r],i+=t[0]*o[1]-t[1]*o[0];return Math.abs(i)}var simplify_1=simplify$1,convert_1=convert$1,simplify=simplify_1,tile=transformTile,point=transformPoint,transform$1={tile:tile,point:point},clip_1=clip$1,clip$2=clip_1,wrap_1=wrap$1,tile$1=createTile$1,index=geojsonvt,convert=convert_1,transform=transform$1,clip=clip_1,wrap=wrap_1,createTile=tile$1;GeoJSONVT.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,solidChildren:!1,tolerance:3,extent:4096,buffer:64,debug:0},GeoJSONVT.prototype.splitTile=function(e,t,r,n,o,i,a){for(var s=this,l=[e,t,r,n],u=this.options,c=u.debug,f=null;l.length;){n=l.pop(),r=l.pop(),t=l.pop(),e=l.pop();var p=1<<t,h=toID(t,r,n),m=s.tiles[h],g=t===u.maxZoom?0:u.tolerance/(p*u.extent);if(!m&&(c>1&&console.time("creation"),m=s.tiles[h]=createTile(e,p,r,n,g,t===u.maxZoom),s.tileCoords.push({z:t,x:r,y:n}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,r,n,m.numFeatures,m.numPoints,m.numSimplified),console.timeEnd("creation"));var d="z"+t;s.stats[d]=(s.stats[d]||0)+1,s.total++}if(m.source=e,o){if(t===u.maxZoom||t===o)continue;var v=1<<o-t;if(r!==Math.floor(i/v)||n!==Math.floor(a/v))continue}else if(t===u.indexMaxZoom||m.numPoints<=u.indexMaxPoints)continue;if(u.solidChildren||!isClippedSquare(m,u.extent,u.buffer)){m.source=null,c>1&&console.time("clipping");var y,x,b,M,P,S,w=.5*u.buffer/u.extent,$=.5-w,C=.5+w,F=1+w;y=x=b=M=null,P=clip(e,p,r-w,r+C,0,intersectX,m.min[0],m.max[0]),S=clip(e,p,r+$,r+F,0,intersectX,m.min[0],m.max[0]),P&&(y=clip(P,p,n-w,n+C,1,intersectY,m.min[1],m.max[1]),x=clip(P,p,n+$,n+F,1,intersectY,m.min[1],m.max[1])),S&&(b=clip(S,p,n-w,n+C,1,intersectY,m.min[1],m.max[1]),M=clip(S,p,n+$,n+F,1,intersectY,m.min[1],m.max[1])),c>1&&console.timeEnd("clipping"),y&&l.push(y,t+1,2*r,2*n),x&&l.push(x,t+1,2*r,2*n+1),b&&l.push(b,t+1,2*r+1,2*n),M&&l.push(M,t+1,2*r+1,2*n+1)}else o&&(f=t)}return f},GeoJSONVT.prototype.getTile=function(e,t,r){var n=this,o=this.options,i=o.extent,a=o.debug,s=1<<e;t=(t%s+s)%s;var l=toID(e,t,r);if(this.tiles[l])return transform.tile(this.tiles[l],i);a>1&&console.log("drilling down to z%d-%d-%d",e,t,r);for(var u,c=e,f=t,p=r;!u&&c>0;)c--,f=Math.floor(f/2),p=Math.floor(p/2),u=n.tiles[toID(c,f,p)];if(!u||!u.source)return null;if(a>1&&console.log("found parent tile z%d-%d-%d",c,f,p),isClippedSquare(u,i,o.buffer))return transform.tile(u,i);a>1&&console.time("drilling down");var h=this.splitTile(u.source,c,f,p,e,t,r);if(a>1&&console.timeEnd("drilling down"),null!==h){var m=1<<e-h;l=toID(h,Math.floor(t/m),Math.floor(r/m))}return this.tiles[l]?transform.tile(this.tiles[l],i):null};var identity=function(e){return e},transform$3=function(e){if(null==(t=e.transform))return identity;var t,r,n,o=t.scale[0],i=t.scale[1],a=t.translate[0],s=t.translate[1];return function(e,t){return t||(r=n=0),e[0]=(r+=e[0])*o+a,e[1]=(n+=e[1])*i+s,e}},bbox=function(e){function t(e){s[0]=e[0],s[1]=e[1],a(s),s[0]<l&&(l=s[0]),s[0]>c&&(c=s[0]),s[1]<u&&(u=s[1]),s[1]>f&&(f=s[1])}function r(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(r);break;case"Point":t(e.coordinates);break;case"MultiPoint":e.coordinates.forEach(t)}}var n=e.bbox;if(!n){var o,i,a=transform$3(e),s=new Array(2),l=1/0,u=l,c=-l,f=-l;e.arcs.forEach(function(e){for(var t=-1,r=e.length;++t<r;)o=e[t],s[0]=o[0],s[1]=o[1],a(s,t),s[0]<l&&(l=s[0]),s[0]>c&&(c=s[0]),s[1]<u&&(u=s[1]),s[1]>f&&(f=s[1])});for(i in e.objects)r(e.objects[i]);n=e.bbox=[l,u,c,f]}return n},reverse=function(e,t){for(var r,n=e.length,o=n-t;o<--n;)r=e[o],e[o++]=e[n],e[n]=r},feature=function(e,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(t){return feature$1(e,t)})}:feature$1(e,t)},stitch=function(e,t){function r(t){var r,n=e.arcs[t<0?~t:t],o=n[0];return e.transform?(r=[0,0],n.forEach(function(e){r[0]+=e[0],r[1]+=e[1]})):r=n[n.length-1],t<0?[r,o]:[o,r]}function n(e,t){for(var r in e){var n=e[r];delete t[n.start],delete n.start,delete n.end,n.forEach(function(e){o[e<0?~e:e]=1}),s.push(n)}}var o={},i={},a={},s=[],l=-1;return t.forEach(function(r,n){var o,i=e.arcs[r<0?~r:r];i.length<3&&!i[1][0]&&!i[1][1]&&(o=t[++l],t[l]=r,t[n]=o)}),t.forEach(function(e){var t,n,o=r(e),s=o[0],l=o[1];if(t=a[s])if(delete a[t.end],t.push(e),t.end=l,n=i[l]){delete i[n.start];var u=n===t?t:t.concat(n);i[u.start=t.start]=a[u.end=n.end]=u}else i[t.start]=a[t.end]=t;else if(t=i[l])if(delete i[t.start],t.unshift(e),t.start=s,n=a[s]){delete a[n.end];var c=n===t?t:n.concat(t);i[c.start=n.start]=a[c.end=t.end]=c}else i[t.start]=a[t.end]=t;else t=[e],i[t.start=s]=a[t.end=l]=t}),n(a,i),n(i,a),t.forEach(function(e){o[e<0?~e:e]||s.push([e])}),s},bisect=function(e,t){for(var r=0,n=e.length;r<n;){var o=r+n>>>1;e[o]<t?r=o+1:n=o}return r},slicers={},options;onmessage=function(e){if("slice"===e.data[0]){var t=e.data[1];if(options=e.data[2],t.type&&"Topology"===t.type)for(var r in t.objects)slicers[r]=index(feature(t,t.objects[r]),options);else slicers[options.vectorTileLayerName]=index(t,options)}else if("get"===e.data[0]){var n=e.data[1],o={};for(var r in slicers){var i=slicers[r].getTile(n.z,n.x,n.y);if(i){var a={features:[],extent:options.extent,name:options.vectorTileLayerName,length:i.features.length};for(var s in i.features){var l={geometry:i.features[s].geometry,properties:i.features[s].tags,type:i.features[s].type};a.features.push(l)}o[r]=a}}postMessage({layers:o,coords:n})}};
`,"text/plain; charset=us-ascii",!1);L.VectorGrid.Slicer=L.VectorGrid.extend({options:{vectorTileLayerName:"sliced",extent:4096,maxZoom:14},initialize:function(s,p){L.VectorGrid.prototype.initialize.call(this,p);var p={};for(var d in this.options)d!=="rendererFactory"&&d!=="vectorTileLayerStyles"&&typeof this.options[d]!="function"&&(p[d]=this.options[d]);this._worker=new Worker(w3),this._worker.postMessage(["slice",s,p])},_getVectorTilePromise:function(s){var o=this,p=new Promise(function(d){o._worker.addEventListener("message",function f(a){a.data.coords&&a.data.coords.x===s.x&&a.data.coords.y===s.y&&a.data.coords.z===s.z&&(d(a.data),o._worker.removeEventListener("message",f))})});return this._worker.postMessage(["get",s]),p}}),L.vectorGrid.slicer=function(s,o){return new L.VectorGrid.Slicer(s,o)},L.Canvas.Tile=L.Canvas.extend({initialize:function(s,o,p){L.Canvas.prototype.initialize.call(this,p),this._tileCoord=s,this._size=o,this._initContainer(),this._container.setAttribute("width",this._size.x),this._container.setAttribute("height",this._size.y),this._layers={},this._drawnLayers={},this._drawing=!0,p.interactive&&(this._container.style.pointerEvents="auto")},getCoord:function(){return this._tileCoord},getContainer:function(){return this._container},getOffset:function(){return this._tileCoord.scaleBy(this._size).subtract(this._map.getPixelOrigin())},onAdd:L.Util.falseFn,addTo:function(s){this._map=s},removeFrom:function(s){delete this._map},_onClick:function(s){var o,p,d=this._map.mouseEventToLayerPoint(s).subtract(this.getOffset());for(var f in this._layers)o=this._layers[f],o.options.interactive&&o._containsPoint(d)&&!this._map._draggableMoved(o)&&(p=o);p&&(L.DomEvent.fakeStop(s),this._fireEvent([p],s))},_onMouseMove:function(s){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var o=this._map.mouseEventToLayerPoint(s).subtract(this.getOffset());this._handleMouseHover(s,o)}},_updateIcon:function(s){if(this._drawing){var o=s.options.icon,p=o.options,d=L.point(p.iconSize),f=p.iconAnchor||d&&d.divideBy(2,!0),a=s._point.subtract(f),T=this._ctx,M=s._getImage();M.complete?T.drawImage(M,a.x,a.y,d.x,d.y):L.DomEvent.on(M,"load",function(){T.drawImage(M,a.x,a.y,d.x,d.y)}),this._drawnLayers[s._leaflet_id]=s}}}),L.canvas.tile=function(s,o,p){return new L.Canvas.Tile(s,o,p)};var qq=$i(VP());var x_={};vM(x_,{default:()=>M3,glyphs:()=>k3,layers:()=>A3,metadata:()=>C3,name:()=>T3,sources:()=>E3,sprite:()=>P3,version:()=>S3});var S3=8,T3="versatiles-colorful",C3={license:"https://creativecommons.org/publicdomain/zero/1.0/"},k3="https://tiles.versatiles.org/assets/glyphs/{fontstack}/{range}.pbf",P3=[{id:"basics",url:"https://tiles.versatiles.org/assets/sprites/basics/sprites"}],E3={"versatiles-shortbread":{attribution:'\xA9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',tiles:["https://tiles.versatiles.org/tiles/osm/{z}/{x}/{y}"],type:"vector",scheme:"xyz",bounds:[-180,-85.0511287798066,180,85.0511287798066],minzoom:0,maxzoom:14}},A3=[{id:"background",type:"background",paint:{"background-color":"rgb(249,244,238)"}},{source:"versatiles-shortbread",id:"water-ocean",type:"fill","source-layer":"ocean",paint:{"fill-color":"rgb(190,221,243)"}},{source:"versatiles-shortbread",id:"land-glacier",type:"fill","source-layer":"water_polygons",filter:["all",["==","kind","glacier"]],paint:{"fill-color":"rgb(255,255,255)"}},{source:"versatiles-shortbread",id:"land-commercial",type:"fill","source-layer":"land",filter:["all",["in","kind","commercial","retail"]],paint:{"fill-color":"rgb(215,215,215)","fill-opacity":{stops:[[5,0],[6,1]]}}},{source:"versatiles-shortbread",id:"land-industrial",type:"fill","source-layer":"land",filter:["all",["in","kind","industrial","quarry","railway"]],paint:{"fill-color":"rgba(235,232,218,0.333)","fill-opacity":{stops:[[5,0],[6,1]]}}},{source:"versatiles-shortbread",id:"land-residential",type:"fill","source-layer":"land",filter:["all",["in","kind","garages","residential"]],paint:{"fill-color":"rgb(215,215,215)","fill-opacity":{stops:[[5,0],[6,1]]}}},{source:"versatiles-shortbread",id:"land-agriculture",type:"fill","source-layer":"land",filter:["all",["in","kind","brownfield","farmland","farmyard","greenfield","greenhouse_horticulture","orchard","plant_nursery","vineyard"]],paint:{"fill-color":"rgb(224,228,222)","fill-opacity":{stops:[[5,0],[6,1]]}}},{source:"versatiles-shortbread",id:"land-waste",type:"fill","source-layer":"land",filter:["all",["in","kind","landfill"]],paint:{"fill-color":"rgb(221,219,212)","fill-opacity":{stops:[[5,0],[6,1]]}}},{source:"versatiles-shortbread",id:"land-park",type:"fill","source-layer":"land",filter:["all",["in","kind","park","village_green","recreation_ground"]],paint:{"fill-color":"rgb(221,221,204)","fill-opacity":{stops:[[5,0],[6,1]]}}},{source:"versatiles-shortbread",id:"land-garden",type:"fill","source-layer":"land",filter:["all",["in","kind","allotments","garden"]],paint:{"fill-color":"rgb(221,221,204)","fill-opacity":{stops:[[5,0],[6,1]]}}},{source:"versatiles-shortbread",id:"land-burial",type:"fill","source-layer":"land",filter:["all",["in","kind","cemetery","grave_yard"]],paint:{"fill-color":"rgb(221,221,216)","fill-opacity":{stops:[[5,0],[6,1]]}}},{source:"versatiles-shortbread",id:"land-leisure",type:"fill","source-layer":"land",filter:["all",["in","kind","miniature_golf","playground","golf_course"]],paint:{"fill-color":"rgb(228,232,226)","fill-opacity":{stops:[[5,0],[6,1]]}}},{source:"versatiles-shortbread",id:"land-rock",type:"fill","source-layer":"land",filter:["all",["in","kind","bare_rock","scree","shingle"]],paint:{"fill-color":"rgb(224,228,229)"}},{source:"versatiles-shortbread",id:"land-forest",type:"fill","source-layer":"land",filter:["all",["in","kind","forest"]],paint:{"fill-color":"rgb(210,220,205)","fill-opacity":{stops:[[5,0],[6,.2]]}}},{source:"versatiles-shortbread",id:"land-grass",type:"fill","source-layer":"land",filter:["all",["in","kind","grass","grassland","meadow","wet_meadow"]],paint:{"fill-color":"rgb(224,232,221)","fill-opacity":{stops:[[5,0],[6,1]]}}},{source:"versatiles-shortbread",id:"land-vegetation",type:"fill","source-layer":"land",filter:["all",["in","kind","heath","scrub"]],paint:{"fill-color":"rgb(221,221,204)","fill-opacity":{stops:[[5,0],[6,1]]}}},{source:"versatiles-shortbread",id:"land-sand",type:"fill","source-layer":"land",filter:["all",["in","kind","beach","sand"]],paint:{"fill-color":"rgb(250,250,237)"}},{source:"versatiles-shortbread",id:"land-wetland",type:"fill","source-layer":"land",filter:["all",["in","kind","bog","marsh","string_bog","swamp"]],paint:{"fill-color":"rgb(211,230,219)"}},{source:"versatiles-shortbread",id:"water-river",type:"line","source-layer":"water_lines",filter:["all",["in","kind","river"],["!=","tunnel",!0],["!=","bridge",!0]],paint:{"line-color":"rgb(190,221,243)","line-width":{stops:[[9,0],[10,3],[15,5],[17,9],[18,20],[20,60]]}},layout:{"line-cap":"round","line-join":"round"}},{source:"versatiles-shortbread",id:"water-canal",type:"line","source-layer":"water_lines",filter:["all",["in","kind","canal"],["!=","tunnel",!0],["!=","bridge",!0]],paint:{"line-color":"rgb(190,221,243)","line-width":{stops:[[9,0],[10,2],[15,4],[17,8],[18,17],[20,50]]}},layout:{"line-cap":"round","line-join":"round"}},{source:"versatiles-shortbread",id:"water-stream",type:"line","source-layer":"water_lines",filter:["all",["in","kind","stream"],["!=","tunnel",!0],["!=","bridge",!0]],paint:{"line-color":"rgb(190,221,243)","line-width":{stops:[[13,0],[14,1],[15,2],[17,6],[18,12],[20,30]]}},layout:{"line-cap":"round","line-join":"round"}},{source:"versatiles-shortbread",id:"water-ditch",type:"line","source-layer":"water_lines",filter:["all",["in","kind","ditch"],["!=","tunnel",!0],["!=","bridge",!0]],paint:{"line-color":"rgb(190,221,243)","line-width":{stops:[[14,0],[15,1],[17,4],[18,8],[20,20]]}},layout:{"line-cap":"round","line-join":"round"}},{source:"versatiles-shortbread",id:"water-area",type:"fill","source-layer":"water_polygons",filter:["==","kind","water"],paint:{"fill-color":"rgb(190,221,243)","fill-opacity":{stops:[[4,0],[6,1]]}}},{source:"versatiles-shortbread",id:"water-area-river",type:"fill","source-layer":"water_polygons",filter:["==","kind","river"],paint:{"fill-color":"rgb(190,221,243)","fill-opacity":{stops:[[4,0],[6,1]]}}},{source:"versatiles-shortbread",id:"water-area-small",type:"fill","source-layer":"water_polygons",filter:["in","kind","reservoir","basin","dock"],paint:{"fill-color":"rgb(190,221,243)","fill-opacity":{stops:[[4,0],[6,1]]}}},{source:"versatiles-shortbread",id:"water-dam-area",type:"fill","source-layer":"dam_polygons",filter:["==","kind","dam"],paint:{"fill-color":"rgb(249,244,238)","fill-opacity":{stops:[[12,0],[13,1]]}}},{source:"versatiles-shortbread",id:"water-dam",type:"line","source-layer":"dam_lines",filter:["==","kind","dam"],paint:{"line-color":"rgb(190,221,243)"},layout:{"line-cap":"round","line-join":"round"}},{source:"versatiles-shortbread",id:"water-pier-area",type:"fill","source-layer":"pier_polygons",filter:["in","kind","pier","breakwater","groyne"],paint:{"fill-color":"rgb(249,244,238)","fill-opacity":{stops:[[12,0],[13,1]]}}},{source:"versatiles-shortbread",id:"water-pier",type:"line","source-layer":"pier_lines",filter:["in","kind","pier","breakwater","groyne"],paint:{"line-color":"rgb(249,244,238)"},layout:{"line-cap":"round","line-join":"round"}},{source:"versatiles-shortbread",id:"site-dangerarea",type:"fill","source-layer":"sites",filter:["in","kind","danger_area"],paint:{"fill-color":"rgb(255,0,0)","fill-outline-color":"rgb(255,0,0)","fill-opacity":.3,"fill-pattern":"basics:pattern-warning"}},{source:"versatiles-shortbread",id:"site-university",type:"fill","source-layer":"sites",filter:["in","kind","university"],paint:{"fill-color":"rgb(255,255,128)","fill-opacity":.1}},{source:"versatiles-shortbread",id:"site-college",type:"fill","source-layer":"sites",filter:["in","kind","college"],paint:{"fill-color":"rgb(255,255,128)","fill-opacity":.1}},{source:"versatiles-shortbread",id:"site-school",type:"fill","source-layer":"sites",filter:["in","kind","school"],paint:{"fill-color":"rgb(255,255,128)","fill-opacity":.1}},{source:"versatiles-shortbread",id:"site-hospital",type:"fill","source-layer":"sites",filter:["in","kind","hospital"],paint:{"fill-color":"rgb(255,102,102)","fill-opacity":.1}},{source:"versatiles-shortbread",id:"site-prison",type:"fill","source-layer":"sites",filter:["in","kind","prison"],paint:{"fill-color":"rgb(253,242,252)","fill-pattern":"basics:pattern-striped","fill-opacity":.1}},{source:"versatiles-shortbread",id:"site-parking",type:"fill","source-layer":"sites",filter:["in","kind","parking"],paint:{"fill-color":"rgb(235,232,230)"}},{source:"versatiles-shortbread",id:"site-bicycleparking",type:"fill","source-layer":"sites",filter:["in","kind","bicycle_parking"],paint:{"fill-color":"rgb(235,232,230)"}},{source:"versatiles-shortbread",id:"site-construction",type:"fill","source-layer":"sites",filter:["in","kind","construction"],paint:{"fill-color":"rgb(169,169,169)","fill-pattern":"basics:pattern-hatched_thin","fill-opacity":.1}},{source:"versatiles-shortbread",id:"airport-area",type:"fill","source-layer":"street_polygons",filter:["in","kind","runway","taxiway"],paint:{"fill-color":"rgb(255,255,255)","fill-opacity":.5}},{source:"versatiles-shortbread",id:"airport-taxiway:outline",type:"line","source-layer":"streets",filter:["==","kind","taxiway"],paint:{"line-color":"rgb(207,205,202)","line-width":{stops:[[13,0],[14,2],[15,10],[16,14],[18,20],[20,40]]}},layout:{"line-join":"round"}},{source:"versatiles-shortbread",id:"airport-runway:outline",type:"line","source-layer":"streets",filter:["==","kind","runway"],paint:{"line-color":"rgb(207,205,202)","line-width":{stops:[[11,0],[12,6],[13,9],[14,16],[15,24],[16,40],[17,100],[18,160],[20,300]]}},layout:{"line-join":"round"}},{source:"versatiles-shortbread",id:"airport-taxiway",type:"line","source-layer":"streets",filter:["==","kind","taxiway"],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[13,0],[14,1],[15,8],[16,12],[18,18],[20,36]]},"line-opacity":{stops:[[13,0],[14,1]]}},layout:{"line-join":"round"}},{source:"versatiles-shortbread",id:"airport-runway",type:"line","source-layer":"streets",filter:["==","kind","runway"],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[11,0],[12,5],[13,8],[14,14],[15,22],[16,38],[17,98],[18,158],[20,298]]},"line-opacity":{stops:[[11,0],[12,1]]}},layout:{"line-join":"round"}},{source:"versatiles-shortbread",id:"building:outline",type:"fill","source-layer":"buildings",paint:{"fill-color":"rgb(223,219,215)","fill-opacity":{stops:[[14,0],[15,1]]}}},{source:"versatiles-shortbread",id:"building",type:"fill","source-layer":"buildings",paint:{"fill-color":"rgb(242,234,226)","fill-opacity":{stops:[[14,0],[15,1]]},"fill-translate":[-2,-2]}},{source:"versatiles-shortbread",id:"tunnel-street-pedestrian-zone",type:"fill","source-layer":"street_polygons",filter:["all",["==","tunnel",!0],["==","kind","pedestrian"]],paint:{"fill-color":"rgb(247,247,247)","fill-opacity":{stops:[[12,0],[13,1]]}}},{source:"versatiles-shortbread",id:"tunnel-way-footway:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","footway"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,5],[18,7],[19,12],[20,22]]},"line-color":"hsl(288,13%,86%)"},minzoom:15},{source:"versatiles-shortbread",id:"tunnel-way-steps:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","steps"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,5],[18,7],[19,12],[20,22]]},"line-color":"hsl(288,13%,86%)"},minzoom:15},{source:"versatiles-shortbread",id:"tunnel-way-path:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","path"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,5],[18,7],[19,12],[20,22]]},"line-color":"hsl(288,13%,86%)"},minzoom:15},{source:"versatiles-shortbread",id:"tunnel-way-cycleway:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","cycleway"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,5],[18,7],[19,12],[20,22]]},"line-color":"hsl(203,11%,87%)"},minzoom:15},{source:"versatiles-shortbread",id:"tunnel-street-track:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","track"],["==","tunnel",!0]],paint:{"line-color":"rgb(222,222,222)","line-width":{stops:[[14,2],[16,4],[18,18],[19,48],[20,96]]},"line-opacity":{stops:[[14,0],[15,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-pedestrian:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","pedestrian"],["==","tunnel",!0]],paint:{"line-color":"rgb(222,222,222)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-service:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","service"],["==","tunnel",!0]],paint:{"line-color":"rgb(221,220,218)","line-width":{stops:[[14,1],[16,3],[18,12],[19,32],[20,48]]},"line-opacity":{stops:[[15,0],[16,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-livingstreet:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","living_street"],["==","tunnel",!0]],paint:{"line-color":"rgb(222,222,222)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-residential:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","residential"],["==","tunnel",!0]],paint:{"line-color":"rgb(222,222,222)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-unclassified:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","unclassified"],["==","tunnel",!0]],paint:{"line-color":"rgb(222,222,222)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-tertiary-link:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","tertiary"],["==","link",!0]],paint:{"line-color":"rgb(222,222,222)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-secondary-link:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","secondary"],["==","link",!0]],paint:{"line-color":"rgb(221,220,218)","line-dasharray":[1,.3],"line-width":{stops:[[12,2],[14,3],[16,7],[18,14],[20,40]]}},layout:{"line-join":"round","line-cap":"round"},minzoom:13},{source:"versatiles-shortbread",id:"tunnel-street-primary-link:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","primary"],["==","link",!0]],paint:{"line-color":"rgb(221,220,218)","line-dasharray":[1,.3],"line-width":{stops:[[12,2],[14,3],[16,7],[18,14],[20,40]]}},layout:{"line-join":"round","line-cap":"round"},minzoom:13},{source:"versatiles-shortbread",id:"tunnel-street-trunk-link:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","trunk"],["==","link",!0]],paint:{"line-color":"rgb(221,220,218)","line-dasharray":[1,.3],"line-width":{stops:[[12,2],[14,3],[16,7],[18,14],[20,40]]}},layout:{"line-join":"round","line-cap":"round"},minzoom:13},{source:"versatiles-shortbread",id:"tunnel-street-motorway-link:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","motorway"],["==","link",!0]],paint:{"line-color":"rgb(221,220,218)","line-dasharray":[1,.3],"line-width":{stops:[[12,2],[14,3],[16,7],[18,14],[20,40]]}},layout:{"line-join":"round","line-cap":"round"},minzoom:12},{source:"versatiles-shortbread",id:"tunnel-street-tertiary:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","tertiary"],["!=","link",!0]],paint:{"line-color":"rgb(222,222,222)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-secondary:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","secondary"],["!=","link",!0]],paint:{"line-color":"rgb(215,215,215)","line-dasharray":[1,.3],"line-width":{stops:[[11,2],[14,5],[16,8],[18,30],[19,68],[20,138]]},"line-opacity":{stops:[[11,0],[12,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-primary:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","primary"],["!=","link",!0]],paint:{"line-color":"rgb(220,220,220)","line-dasharray":[1,.3],"line-width":{stops:[[8,0],[9,1],[10,4],[14,6],[16,12],[18,36],[19,74],[20,144]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-trunk:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","trunk"],["!=","link",!0]],paint:{"line-color":"rgb(220,220,220)","line-dasharray":[1,.3],"line-width":{stops:[[7,0],[8,2],[10,4],[14,6],[16,12],[18,36],[19,74],[20,144]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-motorway:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","motorway"],["!=","link",!0]],paint:{"line-color":"rgb(220,220,220)","line-dasharray":[1,.3],"line-width":{stops:[[5,0],[6,2],[10,5],[14,5],[16,14],[18,38],[19,84],[20,168]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-way-footway",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","footway"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,4],[18,6],[19,10],[20,20]]},"line-color":"hsl(288,33%,94%)","line-dasharray":[1,.2]},minzoom:15},{source:"versatiles-shortbread",id:"tunnel-way-steps",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","steps"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,4],[18,6],[19,10],[20,20]]},"line-color":"hsl(288,33%,94%)","line-dasharray":[1,.2]},minzoom:15},{source:"versatiles-shortbread",id:"tunnel-way-path",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","path"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,4],[18,6],[19,10],[20,20]]},"line-color":"hsl(288,33%,94%)","line-dasharray":[1,.2]},minzoom:15},{source:"versatiles-shortbread",id:"tunnel-way-cycleway",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","cycleway"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,4],[18,6],[19,10],[20,20]]},"line-color":"hsl(203,30%,95%)","line-dasharray":[1,.2]},minzoom:15},{source:"versatiles-shortbread",id:"tunnel-street-track",type:"line","source-layer":"streets",filter:["all",["==","kind","track"],["==","tunnel",!0]],paint:{"line-color":"rgb(247,247,247)","line-width":{stops:[[14,1],[16,3],[18,16],[19,44],[20,88]]},"line-opacity":{stops:[[14,0],[15,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-pedestrian",type:"line","source-layer":"streets",filter:["all",["==","kind","pedestrian"],["==","tunnel",!0]],paint:{"line-color":"rgb(247,247,247)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-service",type:"line","source-layer":"streets",filter:["all",["==","kind","service"],["==","tunnel",!0]],paint:{"line-color":"rgb(247,247,247)","line-width":{stops:[[14,1],[16,2],[18,10],[19,28],[20,40]]},"line-opacity":{stops:[[15,0],[16,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-livingstreet",type:"line","source-layer":"streets",filter:["all",["==","kind","living_street"],["==","tunnel",!0]],paint:{"line-color":"rgb(247,247,247)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-residential",type:"line","source-layer":"streets",filter:["all",["==","kind","residential"],["==","tunnel",!0]],paint:{"line-color":"rgb(247,247,247)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-unclassified",type:"line","source-layer":"streets",filter:["all",["==","kind","unclassified"],["==","tunnel",!0]],paint:{"line-color":"rgb(247,247,247)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-track-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","track"],["==","bicycle","designated"],["==","tunnel",!0]],paint:{"line-color":"rgb(247,247,247)"},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-pedestrian-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","pedestrian"],["==","bicycle","designated"],["==","tunnel",!0]],paint:{"line-color":"rgb(239,249,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-service-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","service"],["==","bicycle","designated"],["==","tunnel",!0]],paint:{"line-color":"rgb(247,247,247)"},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-livingstreet-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","living_street"],["==","bicycle","designated"],["==","tunnel",!0]],paint:{"line-color":"rgb(239,249,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-residential-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","residential"],["==","bicycle","designated"],["==","tunnel",!0]],paint:{"line-color":"rgb(239,249,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-unclassified-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","unclassified"],["==","bicycle","designated"],["==","tunnel",!0]],paint:{"line-color":"rgb(239,249,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-tertiary-link",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","tertiary"],["==","link",!0]],paint:{"line-color":"rgb(247,247,247)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-secondary-link",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","secondary"],["==","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[12,1],[14,2],[16,5],[18,12],[20,38]]}},layout:{"line-join":"round","line-cap":"butt"},minzoom:13},{source:"versatiles-shortbread",id:"tunnel-street-primary-link",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","primary"],["==","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[12,1],[14,2],[16,5],[18,12],[20,38]]}},layout:{"line-join":"round","line-cap":"butt"},minzoom:13},{source:"versatiles-shortbread",id:"tunnel-street-trunk-link",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","trunk"],["==","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[12,1],[14,2],[16,5],[18,12],[20,38]]}},layout:{"line-join":"round","line-cap":"butt"},minzoom:13},{source:"versatiles-shortbread",id:"tunnel-street-motorway-link",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","motorway"],["==","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[12,1],[14,2],[16,5],[18,12],[20,38]]}},layout:{"line-join":"round","line-cap":"butt"},minzoom:12},{source:"versatiles-shortbread",id:"tunnel-street-tertiary",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","tertiary"],["!=","link",!0]],paint:{"line-color":"rgb(247,247,247)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-secondary",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","secondary"],["!=","link",!0]],paint:{"line-color":"rgb(240,240,240)","line-width":{stops:[[11,1],[14,4],[16,6],[18,28],[19,64],[20,130]]},"line-opacity":{stops:[[11,0],[12,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"tunnel-street-primary",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","primary"],["!=","link",!0]],paint:{"line-color":"rgb(240,240,240)","line-width":{stops:[[8,0],[9,2],[10,3],[14,5],[16,10],[18,34],[19,70],[20,140]]},"line-opacity":{stops:[[8,0],[9,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"tunnel-street-trunk",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","trunk"],["!=","link",!0]],paint:{"line-color":"rgb(240,240,240)","line-width":{stops:[[7,0],[8,1],[10,3],[14,5],[16,10],[18,34],[19,70],[20,140]]},"line-opacity":{stops:[[7,0],[8,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"tunnel-street-motorway",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","motorway"],["!=","link",!0]],paint:{"line-color":"rgb(240,240,240)","line-width":{stops:[[5,0],[6,1],[10,4],[14,4],[16,12],[18,36],[19,80],[20,160]]},"line-opacity":{stops:[[5,0],[6,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"tunnel-transport-tram:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","tram"],["!has","service"],["==","tunnel",!0]],minzoom:15,paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[15,0],[16,5],[18,7],[20,20]]},"line-dasharray":[.1,.5]}},{source:"versatiles-shortbread",id:"tunnel-transport-narrowgauge:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","narrow_gauge"],["!has","service"],["==","tunnel",!0]],minzoom:15,paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[15,0],[16,5],[18,7],[20,20]]},"line-dasharray":[.1,.5]}},{source:"versatiles-shortbread",id:"tunnel-transport-subway:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","subway"],["!has","service"],["==","tunnel",!0]],paint:{"line-color":"rgb(166,184,199)","line-width":{stops:[[11,0],[12,1],[15,3],[16,3],[18,6],[19,8],[20,10]]},"line-opacity":{stops:[[11,0],[12,.5]]}}},{source:"versatiles-shortbread",id:"tunnel-transport-lightrail:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","light_rail"],["!has","service"],["==","tunnel",!0]],paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[8,1],[13,1],[15,1],[20,14]]},"line-opacity":{stops:[[11,0],[12,.5]]}},minzoom:8},{source:"versatiles-shortbread",id:"tunnel-transport-lightrail-service:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","light_rail"],["has","service"],["==","tunnel",!0]],paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[14,0],[15,1],[16,1],[20,14]]}},minzoom:14},{source:"versatiles-shortbread",id:"tunnel-transport-rail:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","rail"],["!has","service"],["==","tunnel",!0]],paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[8,1],[13,1],[15,1],[20,14]]},"line-opacity":{stops:[[8,0],[9,.3]]}},minzoom:8},{source:"versatiles-shortbread",id:"tunnel-transport-rail-service:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","rail"],["has","service"],["==","tunnel",!0]],paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[14,0],[15,1],[16,1],[20,14]]}},minzoom:14},{source:"versatiles-shortbread",id:"tunnel-transport-monorail:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","monorail"],["==","tunnel",!0]],minzoom:15,paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[15,0],[16,5],[18,7],[20,20]]},"line-dasharray":[.1,.5]}},{source:"versatiles-shortbread",id:"tunnel-transport-funicular:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","funicular"],["==","tunnel",!0]],minzoom:15,paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[15,0],[16,5],[18,7],[20,20]]},"line-dasharray":[.1,.5]}},{source:"versatiles-shortbread",id:"tunnel-transport-tram",type:"line","source-layer":"streets",filter:["all",["in","kind","tram"],["!has","service"],["==","tunnel",!0]],minzoom:13,paint:{"line-width":{stops:[[13,0],[16,1],[17,2],[18,3],[20,5]]},"line-color":"rgb(177,187,196)"}},{source:"versatiles-shortbread",id:"tunnel-transport-narrowgauge",type:"line","source-layer":"streets",filter:["all",["in","kind","narrow_gauge"],["!has","service"],["==","tunnel",!0]],minzoom:13,paint:{"line-width":{stops:[[13,0],[16,1],[17,2],[18,3],[20,5]]},"line-color":"rgb(177,187,196)"}},{source:"versatiles-shortbread",id:"tunnel-transport-subway",type:"line","source-layer":"streets",filter:["all",["in","kind","subway"],["!has","service"],["==","tunnel",!0]],paint:{"line-color":"rgb(188,202,213)","line-width":{stops:[[11,0],[12,1],[15,2],[16,2],[18,5],[19,6],[20,8]]},"line-dasharray":[2,2],"line-opacity":{stops:[[14,0],[15,1]]}}},{source:"versatiles-shortbread",id:"tunnel-transport-lightrail",type:"line","source-layer":"streets",filter:["all",["in","kind","light_rail"],["!has","service"],["==","tunnel",!0]],paint:{"line-color":"rgb(197,204,211)","line-width":{stops:[[14,0],[15,1],[20,10]]},"line-dasharray":[2,2],"line-opacity":{stops:[[14,0],[15,1]]}},minzoom:14},{source:"versatiles-shortbread",id:"tunnel-transport-lightrail-service",type:"line","source-layer":"streets",filter:["all",["in","kind","light_rail"],["has","service"],["==","tunnel",!0]],paint:{"line-color":"rgb(197,204,211)","line-width":{stops:[[15,0],[16,1],[20,10]]},"line-dasharray":[2,2]},minzoom:15},{source:"versatiles-shortbread",id:"tunnel-transport-rail",type:"line","source-layer":"streets",filter:["all",["in","kind","rail"],["!has","service"],["==","tunnel",!0]],paint:{"line-color":"rgb(197,204,211)","line-width":{stops:[[14,0],[15,1],[20,10]]},"line-dasharray":[2,2],"line-opacity":{stops:[[14,0],[15,.3]]}},minzoom:14},{source:"versatiles-shortbread",id:"tunnel-transport-rail-service",type:"line","source-layer":"streets",filter:["all",["in","kind","rail"],["has","service"],["==","tunnel",!0]],paint:{"line-color":"rgb(197,204,211)","line-width":{stops:[[15,0],[16,1],[20,10]]},"line-dasharray":[2,2]},minzoom:15},{source:"versatiles-shortbread",id:"tunnel-transport-monorail",type:"line","source-layer":"streets",filter:["all",["in","kind","monorail"],["==","tunnel",!0]],minzoom:13,paint:{"line-width":{stops:[[13,0],[16,1],[17,2],[18,3],[20,5]]},"line-color":"rgb(177,187,196)"}},{source:"versatiles-shortbread",id:"tunnel-transport-funicular",type:"line","source-layer":"streets",filter:["all",["in","kind","funicular"],["==","tunnel",!0]],minzoom:13,paint:{"line-width":{stops:[[13,0],[16,1],[17,2],[18,3],[20,5]]},"line-color":"rgb(177,187,196)"}},{source:"versatiles-shortbread",id:"bridge",type:"fill","source-layer":"bridges",paint:{"fill-color":"rgb(244,239,233)","fill-antialias":!0,"fill-opacity":.8}},{source:"versatiles-shortbread",id:"street-pedestrian-zone",type:"fill","source-layer":"street_polygons",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["==","kind","pedestrian"]],paint:{"fill-color":"rgba(251,235,255,0.25)","fill-opacity":{stops:[[12,0],[13,1],[14,0],[15,1]]}}},{source:"versatiles-shortbread",id:"way-footway:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","footway"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,5],[18,7],[19,12],[20,22]]},"line-color":"rgb(226,212,230)"},minzoom:15},{source:"versatiles-shortbread",id:"way-steps:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","steps"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,5],[18,7],[19,12],[20,22]]},"line-color":"rgb(226,212,230)"},minzoom:15},{source:"versatiles-shortbread",id:"way-path:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","path"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,5],[18,7],[19,12],[20,22]]},"line-color":"rgb(226,212,230)"},minzoom:15},{source:"versatiles-shortbread",id:"way-cycleway:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","cycleway"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,5],[18,7],[19,12],[20,22]]},"line-color":"rgb(215,224,230)"},minzoom:15},{source:"versatiles-shortbread",id:"street-track:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","track"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(207,205,202)","line-width":{stops:[[14,2],[16,4],[18,18],[19,48],[20,96]]},"line-opacity":{stops:[[14,0],[15,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-pedestrian:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","pedestrian"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(207,205,202)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-service:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","service"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(221,220,218)","line-width":{stops:[[14,1],[16,3],[18,12],[19,32],[20,48]]},"line-opacity":{stops:[[15,0],[16,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-livingstreet:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","living_street"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(207,205,202)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-residential:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","residential"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(207,205,202)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-unclassified:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","unclassified"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(207,205,202)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-tertiary-link:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","tertiary"],["==","link",!0]],paint:{"line-color":"rgb(207,205,202)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-secondary-link:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","secondary"],["==","link",!0]],paint:{"line-color":"rgb(221,220,218)","line-width":{stops:[[12,2],[14,3],[16,7],[18,14],[20,40]]}},layout:{"line-join":"round","line-cap":"round"},minzoom:13},{source:"versatiles-shortbread",id:"street-primary-link:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","primary"],["==","link",!0]],paint:{"line-color":"rgb(221,220,218)","line-width":{stops:[[12,2],[14,3],[16,7],[18,14],[20,40]]}},layout:{"line-join":"round","line-cap":"round"},minzoom:13},{source:"versatiles-shortbread",id:"street-trunk-link:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","trunk"],["==","link",!0]],paint:{"line-color":"rgb(221,220,218)","line-width":{stops:[[12,2],[14,3],[16,7],[18,14],[20,40]]}},layout:{"line-join":"round","line-cap":"round"},minzoom:13},{source:"versatiles-shortbread",id:"street-motorway-link:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","motorway"],["==","link",!0]],paint:{"line-color":"rgb(221,220,218)","line-width":{stops:[[12,2],[14,3],[16,7],[18,14],[20,40]]}},layout:{"line-join":"round","line-cap":"round"},minzoom:12},{source:"versatiles-shortbread",id:"street-tertiary:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","tertiary"],["!=","link",!0]],paint:{"line-color":"rgb(207,205,202)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-secondary:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","secondary"],["!=","link",!0]],paint:{"line-color":"rgb(220,220,220)","line-width":{stops:[[7,0],[8,1],[10,4],[14,4],[16,12],[18,36],[19,80],[20,160]]},"line-opacity":{stops:[[5,0],[6,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-primary:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","primary"],["!=","link",!0]],paint:{"line-color":"rgb(220,220,220)","line-width":{stops:[[8,0],[9,1],[10,4],[14,6],[16,12],[18,36],[19,74],[20,144]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-trunk:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","trunk"],["!=","link",!0]],paint:{"line-color":"rgb(220,220,220)","line-width":{stops:[[7,0],[8,2],[10,4],[14,6],[16,12],[18,36],[19,74],[20,144]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"boundary-state:outline",type:"line","source-layer":"boundaries",filter:["all",["==","admin_level",4],["!=","maritime",!0],["!=","disputed",!0],["!=","coastline",!0]],paint:{"line-color":"rgb(250,245,240)","line-blur":2,"line-width":{stops:[[5,0],[6,2],[10,4]]},"line-opacity":.75},layout:{"line-cap":"round","line-join":"round"}},{source:"versatiles-shortbread",id:"boundary-state",type:"line","source-layer":"boundaries",filter:["all",["==","admin_level",4],["!=","maritime",!0],["!=","disputed",!0],["!=","coastline",!0]],paint:{"line-color":"rgb(150,150,150)","line-width":{stops:[[5,0],[6,1],[10,2]]},"line-dasharray":[2,2]},layout:{"line-cap":"round","line-join":"round"}},{source:"versatiles-shortbread",id:"street-motorway:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","motorway"],["!=","link",!0]],paint:{"line-color":"rgb(220,220,220)","line-width":{stops:[[7,0],[8,1],[10,4],[14,4],[16,12],[18,36],[19,80],[20,160]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"way-footway",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","footway"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,4],[18,6],[19,10],[20,20]]},"line-color":"rgb(251,235,255)"},minzoom:15},{source:"versatiles-shortbread",id:"way-steps",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","steps"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,4],[18,6],[19,10],[20,20]]},"line-color":"rgb(251,235,255)"},minzoom:15},{source:"versatiles-shortbread",id:"way-path",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","path"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,4],[18,6],[19,10],[20,20]]},"line-color":"rgb(251,235,255)"},minzoom:15},{source:"versatiles-shortbread",id:"way-cycleway",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","cycleway"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,4],[18,6],[19,10],[20,20]]},"line-color":"rgb(239,249,255)"},minzoom:15},{source:"versatiles-shortbread",id:"street-track",type:"line","source-layer":"streets",filter:["all",["==","kind","track"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[14,1],[16,3],[18,16],[19,44],[20,88]]},"line-opacity":{stops:[[14,0],[15,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-pedestrian",type:"line","source-layer":"streets",filter:["all",["==","kind","pedestrian"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(251,235,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,0],[14,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-service",type:"line","source-layer":"streets",filter:["all",["==","kind","service"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(247,247,247)","line-width":{stops:[[14,1],[16,2],[18,10],[19,28],[20,40]]},"line-opacity":{stops:[[15,0],[16,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-livingstreet",type:"line","source-layer":"streets",filter:["all",["==","kind","living_street"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-residential",type:"line","source-layer":"streets",filter:["all",["==","kind","residential"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-unclassified",type:"line","source-layer":"streets",filter:["all",["==","kind","unclassified"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-track-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","track"],["==","bicycle","designated"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(255,255,255)"},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-pedestrian-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","pedestrian"],["==","bicycle","designated"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(239,249,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-service-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","service"],["==","bicycle","designated"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(255,255,255)"},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-livingstreet-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","living_street"],["==","bicycle","designated"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(239,249,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-residential-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","residential"],["==","bicycle","designated"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(239,249,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-unclassified-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","unclassified"],["==","bicycle","designated"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(239,249,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-tertiary-link",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","tertiary"],["==","link",!0]],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-secondary-link",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","secondary"],["==","link",!0]],paint:{"line-color":"rgb(255,238,170)","line-width":{stops:[[12,1],[14,2],[16,5],[18,12],[20,38]]}},layout:{"line-join":"round","line-cap":"round"},minzoom:13},{source:"versatiles-shortbread",id:"street-primary-link",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","primary"],["==","link",!0]],paint:{"line-color":"rgb(255,238,170)","line-width":{stops:[[12,1],[14,2],[16,5],[18,12],[20,38]]}},layout:{"line-join":"round","line-cap":"round"},minzoom:13},{source:"versatiles-shortbread",id:"street-trunk-link",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","trunk"],["==","link",!0]],paint:{"line-color":"rgb(255,238,170)","line-width":{stops:[[12,1],[14,2],[16,5],[18,12],[20,38]]}},layout:{"line-join":"round","line-cap":"round"},minzoom:13},{source:"versatiles-shortbread",id:"street-motorway-link",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","motorway"],["==","link",!0]],paint:{"line-color":"rgb(255,204,136)","line-width":{stops:[[12,1],[14,2],[16,5],[18,12],[20,38]]}},layout:{"line-join":"round","line-cap":"round"},minzoom:12},{source:"versatiles-shortbread",id:"street-tertiary",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","tertiary"],["!=","link",!0]],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-secondary",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","secondary"],["!=","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[7,0],[8,0],[10,3],[14,3],[16,10],[18,34],[19,78],[20,158]]},"line-opacity":{stops:[[5,0],[6,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-primary",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","primary"],["!=","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[8,0],[9,2],[10,3],[14,5],[16,10],[18,34],[19,70],[20,140]]},"line-opacity":{stops:[[8,0],[9,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-trunk",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","trunk"],["!=","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[7,0],[8,1],[10,3],[14,5],[16,10],[18,34],[19,70],[20,140]]},"line-opacity":{stops:[[7,0],[8,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-motorway",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","motorway"],["!=","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[7,0],[8,0],[10,3],[14,3],[16,10],[18,34],[19,78],[20,158]]},"line-opacity":{stops:[[5,0],[6,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"transport-tram:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","tram"],["!has","service"],["!=","bridge",!0],["!=","tunnel",!0]],minzoom:15,paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[15,0],[16,5],[18,7],[20,20]]},"line-dasharray":[.1,.5]}},{source:"versatiles-shortbread",id:"transport-narrowgauge:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","narrow_gauge"],["!has","service"],["!=","bridge",!0],["!=","tunnel",!0]],minzoom:15,paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[15,0],[16,5],[18,7],[20,20]]},"line-dasharray":[.1,.5]}},{source:"versatiles-shortbread",id:"transport-subway:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","subway"],["!has","service"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(166,184,199)","line-width":{stops:[[11,0],[12,1],[15,3],[16,3],[18,6],[19,8],[20,10]]},"line-opacity":{stops:[[11,0],[12,1]]}}},{source:"versatiles-shortbread",id:"transport-lightrail:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","light_rail"],["!has","service"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[8,1],[13,1],[15,1],[20,14]]},"line-opacity":{stops:[[11,0],[12,1]]}},minzoom:8},{source:"versatiles-shortbread",id:"transport-lightrail-service:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","light_rail"],["has","service"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[14,0],[15,1],[16,1],[20,14]]}},minzoom:14},{source:"versatiles-shortbread",id:"transport-rail:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","rail"],["!has","service"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[8,1],[13,1],[15,1],[20,14]]},"line-opacity":{stops:[[8,0],[9,1]]}},minzoom:8},{source:"versatiles-shortbread",id:"transport-rail-service:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","rail"],["has","service"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[14,0],[15,1],[16,1],[20,14]]}},minzoom:14},{source:"versatiles-shortbread",id:"transport-monorail:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","monorail"],["!=","bridge",!0],["!=","tunnel",!0]],minzoom:15,paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[15,0],[16,5],[18,7],[20,20]]},"line-dasharray":[.1,.5]}},{source:"versatiles-shortbread",id:"transport-funicular:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","funicular"],["!=","bridge",!0],["!=","tunnel",!0]],minzoom:15,paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[15,0],[16,5],[18,7],[20,20]]},"line-dasharray":[.1,.5]}},{source:"versatiles-shortbread",id:"transport-tram",type:"line","source-layer":"streets",filter:["all",["in","kind","tram"],["!has","service"],["!=","bridge",!0],["!=","tunnel",!0]],minzoom:13,paint:{"line-width":{stops:[[13,0],[16,1],[17,2],[18,3],[20,5]]},"line-color":"rgb(177,187,196)"}},{source:"versatiles-shortbread",id:"transport-narrowgauge",type:"line","source-layer":"streets",filter:["all",["in","kind","narrow_gauge"],["!has","service"],["!=","bridge",!0],["!=","tunnel",!0]],minzoom:13,paint:{"line-width":{stops:[[13,0],[16,1],[17,2],[18,3],[20,5]]},"line-color":"rgb(177,187,196)"}},{source:"versatiles-shortbread",id:"transport-subway",type:"line","source-layer":"streets",filter:["all",["in","kind","subway"],["!has","service"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(188,202,213)","line-width":{stops:[[11,0],[12,1],[15,2],[16,2],[18,5],[19,6],[20,8]]},"line-dasharray":[2,2],"line-opacity":{stops:[[14,0],[15,1]]}}},{source:"versatiles-shortbread",id:"transport-lightrail",type:"line","source-layer":"streets",filter:["all",["in","kind","light_rail"],["!has","service"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(197,204,211)","line-width":{stops:[[14,0],[15,1],[20,10]]},"line-dasharray":[2,2],"line-opacity":{stops:[[14,0],[15,1]]}},minzoom:14},{source:"versatiles-shortbread",id:"transport-lightrail-service",type:"line","source-layer":"streets",filter:["all",["in","kind","light_rail"],["has","service"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(197,204,211)","line-width":{stops:[[15,0],[16,1],[20,10]]},"line-dasharray":[2,2]},minzoom:15},{source:"versatiles-shortbread",id:"transport-rail",type:"line","source-layer":"streets",filter:["all",["in","kind","rail"],["!has","service"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(197,204,211)","line-width":{stops:[[14,0],[15,1],[20,10]]},"line-dasharray":[2,2],"line-opacity":{stops:[[14,0],[15,1]]}},minzoom:14},{source:"versatiles-shortbread",id:"transport-rail-service",type:"line","source-layer":"streets",filter:["all",["in","kind","rail"],["has","service"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(197,204,211)","line-width":{stops:[[15,0],[16,1],[20,10]]},"line-dasharray":[2,2]},minzoom:15},{source:"versatiles-shortbread",id:"transport-monorail",type:"line","source-layer":"streets",filter:["all",["in","kind","monorail"],["!=","bridge",!0],["!=","tunnel",!0]],minzoom:13,paint:{"line-width":{stops:[[13,0],[16,1],[17,2],[18,3],[20,5]]},"line-color":"rgb(177,187,196)"}},{source:"versatiles-shortbread",id:"transport-funicular",type:"line","source-layer":"streets",filter:["all",["in","kind","funicular"],["!=","bridge",!0],["!=","tunnel",!0]],minzoom:13,paint:{"line-width":{stops:[[13,0],[16,1],[17,2],[18,3],[20,5]]},"line-color":"rgb(177,187,196)"}},{source:"versatiles-shortbread",id:"transport-ferry",type:"line","source-layer":"ferries",minzoom:10,paint:{"line-color":"rgb(171,199,219)","line-width":{stops:[[10,1],[13,2],[14,3],[16,4],[17,6]]},"line-opacity":{stops:[[10,0],[11,1]]},"line-dasharray":[1,1]}},{source:"versatiles-shortbread",id:"bridge-way-footway:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","footway"]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":.5,"line-width":{stops:[[15,0],[16,7],[18,10],[19,17],[20,31]]}},minzoom:15},{source:"versatiles-shortbread",id:"bridge-way-steps:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","steps"]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":.5,"line-width":{stops:[[15,0],[16,7],[18,10],[19,17],[20,31]]}},minzoom:15},{source:"versatiles-shortbread",id:"bridge-way-path:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","path"]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":.5,"line-width":{stops:[[15,0],[16,7],[18,10],[19,17],[20,31]]}},minzoom:15},{source:"versatiles-shortbread",id:"bridge-way-cycleway:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","cycleway"]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":.5,"line-width":{stops:[[15,0],[16,7],[18,10],[19,17],[20,31]]}},minzoom:15},{source:"versatiles-shortbread",id:"bridge-street-track:bridge",type:"line","source-layer":"streets",filter:["all",["==","kind","track"],["==","bridge",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":{stops:[[14,0],[15,1]]},"line-width":{stops:[[14,3],[16,6],[18,25],[19,67],[20,134]]}}},{source:"versatiles-shortbread",id:"bridge-street-pedestrian:bridge",type:"line","source-layer":"streets",filter:["all",["==","kind","pedestrian"],["==","bridge",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":{stops:[[12,0],[13,1]]},"line-width":{stops:[[12,3],[14,4],[16,8],[18,36],[19,90],[20,179]]}}},{source:"versatiles-shortbread",id:"bridge-street-service:bridge",type:"line","source-layer":"streets",filter:["all",["==","kind","service"],["==","bridge",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":{stops:[[14,0],[15,1]]},"line-width":{stops:[[14,3],[16,6],[18,25],[19,67],[20,134]]}}},{source:"versatiles-shortbread",id:"bridge-street-livingstreet:bridge",type:"line","source-layer":"streets",filter:["all",["==","kind","living_street"],["==","bridge",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":{stops:[[12,0],[13,1]]},"line-width":{stops:[[12,3],[14,4],[16,8],[18,36],[19,90],[20,179]]}}},{source:"versatiles-shortbread",id:"bridge-street-residential:bridge",type:"line","source-layer":"streets",filter:["all",["==","kind","residential"],["==","bridge",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":{stops:[[12,0],[13,1]]},"line-width":{stops:[[12,3],[14,4],[16,8],[18,36],[19,90],[20,179]]}}},{source:"versatiles-shortbread",id:"bridge-street-unclassified:bridge",type:"line","source-layer":"streets",filter:["all",["==","kind","unclassified"],["==","bridge",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":{stops:[[12,0],[13,1]]},"line-width":{stops:[[12,3],[14,4],[16,8],[18,36],[19,90],[20,179]]}}},{source:"versatiles-shortbread",id:"bridge-street-tertiary-link:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","tertiary"],["==","link",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":{stops:[[12,0],[13,1]]},"line-width":{stops:[[12,3],[14,4],[16,8],[18,36],[19,90],[20,179]]}}},{source:"versatiles-shortbread",id:"bridge-street-secondary-link:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","secondary"],["==","link",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":.5,"line-width":{stops:[[12,3],[14,4],[16,10],[18,20],[20,56]]}},minzoom:13},{source:"versatiles-shortbread",id:"bridge-street-primary-link:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","primary"],["==","link",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":.5,"line-width":{stops:[[12,3],[14,4],[16,10],[18,20],[20,56]]}},minzoom:13},{source:"versatiles-shortbread",id:"bridge-street-trunk-link:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","trunk"],["==","link",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":.5,"line-width":{stops:[[12,3],[14,4],[16,10],[18,20],[20,56]]}},minzoom:13},{source:"versatiles-shortbread",id:"bridge-street-motorway-link:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","motorway"],["==","link",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":.5,"line-width":{stops:[[12,3],[14,4],[16,10],[18,20],[20,56]]}},minzoom:12},{source:"versatiles-shortbread",id:"bridge-street-tertiary:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","tertiary"],["!=","link",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":{stops:[[12,0],[13,1]]},"line-width":{stops:[[12,3],[14,4],[16,8],[18,36],[19,90],[20,179]]}}},{source:"versatiles-shortbread",id:"bridge-street-secondary:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","secondary"],["!=","link",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":{stops:[[11,0],[12,1]]},"line-width":{stops:[[11,3],[14,7],[16,11],[18,42],[19,95],[20,193]]}}},{source:"versatiles-shortbread",id:"bridge-street-primary:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","primary"],["!=","link",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":.5,"line-width":{stops:[[8,0],[9,1],[10,6],[14,8],[16,17],[18,50],[19,104],[20,202]]}}},{source:"versatiles-shortbread",id:"bridge-street-trunk:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","trunk"],["!=","link",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":.5,"line-width":{stops:[[7,0],[8,3],[10,6],[14,8],[16,17],[18,50],[19,104],[20,202]]}}},{source:"versatiles-shortbread",id:"bridge-street-motorway:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","motorway"],["!=","link",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":.5,"line-width":{stops:[[5,0],[6,3],[10,7],[14,7],[16,20],[18,53],[19,118],[20,235]]}}},{source:"versatiles-shortbread",id:"bridge-street-pedestrian-zone",type:"fill","source-layer":"street_polygons",filter:["all",["==","bridge",!0],["==","kind","pedestrian"]],paint:{"fill-color":"rgb(255,255,255)","fill-opacity":{stops:[[12,0],[13,1]]}}},{source:"versatiles-shortbread",id:"bridge-way-footway:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","footway"]],layout:{"line-cap":"butt"},paint:{"line-width":{stops:[[15,0],[16,5],[18,7],[19,12],[20,22]]},"line-color":"rgb(226,212,230)"},minzoom:15},{source:"versatiles-shortbread",id:"bridge-way-steps:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","steps"]],layout:{"line-cap":"butt"},paint:{"line-width":{stops:[[15,0],[16,5],[18,7],[19,12],[20,22]]},"line-color":"rgb(226,212,230)"},minzoom:15},{source:"versatiles-shortbread",id:"bridge-way-path:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","path"]],layout:{"line-cap":"butt"},paint:{"line-width":{stops:[[15,0],[16,5],[18,7],[19,12],[20,22]]},"line-color":"rgb(226,212,230)"},minzoom:15},{source:"versatiles-shortbread",id:"bridge-way-cycleway:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","cycleway"]],layout:{"line-cap":"butt"},paint:{"line-width":{stops:[[15,0],[16,5],[18,7],[19,12],[20,22]]},"line-color":"rgb(215,224,230)"},minzoom:15},{source:"versatiles-shortbread",id:"bridge-street-track:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","track"],["==","bridge",!0]],paint:{"line-color":"rgb(217,217,217)","line-width":{stops:[[14,2],[16,4],[18,18],[19,48],[20,96]]},"line-opacity":{stops:[[14,0],[15,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-pedestrian:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","pedestrian"],["==","bridge",!0]],paint:{"line-color":"rgb(217,217,217)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-service:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","service"],["==","bridge",!0]],paint:{"line-color":"rgb(221,220,218)","line-width":{stops:[[14,1],[16,3],[18,12],[19,32],[20,48]]},"line-opacity":{stops:[[15,0],[16,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-livingstreet:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","living_street"],["==","bridge",!0]],paint:{"line-color":"rgb(217,217,217)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-residential:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","residential"],["==","bridge",!0]],paint:{"line-color":"rgb(217,217,217)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-unclassified:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","unclassified"],["==","bridge",!0]],paint:{"line-color":"rgb(217,217,217)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-tertiary-link:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","tertiary"],["==","link",!0]],paint:{"line-color":"rgb(217,217,217)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-secondary-link:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","secondary"],["==","link",!0]],paint:{"line-color":"rgb(233,172,119)","line-width":{stops:[[12,2],[14,3],[16,7],[18,14],[20,40]]}},layout:{"line-join":"round","line-cap":"butt"},minzoom:13},{source:"versatiles-shortbread",id:"bridge-street-primary-link:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","primary"],["==","link",!0]],paint:{"line-color":"rgb(233,172,119)","line-width":{stops:[[12,2],[14,3],[16,7],[18,14],[20,40]]}},layout:{"line-join":"round","line-cap":"butt"},minzoom:13},{source:"versatiles-shortbread",id:"bridge-street-trunk-link:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","trunk"],["==","link",!0]],paint:{"line-color":"rgb(233,172,119)","line-width":{stops:[[12,2],[14,3],[16,7],[18,14],[20,40]]}},layout:{"line-join":"round","line-cap":"butt"},minzoom:13},{source:"versatiles-shortbread",id:"bridge-street-motorway-link:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","motorway"],["==","link",!0]],paint:{"line-color":"rgb(233,172,119)","line-width":{stops:[[12,2],[14,3],[16,7],[18,14],[20,40]]}},layout:{"line-join":"round","line-cap":"butt"},minzoom:12},{source:"versatiles-shortbread",id:"bridge-street-tertiary:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","tertiary"],["!=","link",!0]],paint:{"line-color":"rgb(217,217,217)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-secondary:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","secondary"],["!=","link",!0]],paint:{"line-color":"rgb(233,172,119)","line-width":{stops:[[11,2],[14,5],[16,8],[18,30],[19,68],[20,138]]},"line-opacity":{stops:[[11,0],[12,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-primary:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","primary"],["!=","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[8,0],[9,1],[10,4],[14,6],[16,12],[18,36],[19,74],[20,144]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-trunk:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","trunk"],["!=","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[7,0],[8,2],[10,4],[14,6],[16,12],[18,36],[19,74],[20,144]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-motorway:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","motorway"],["!=","link",!0]],paint:{"line-color":"rgb(233,172,119)","line-width":{stops:[[5,0],[6,2],[10,5],[14,5],[16,14],[18,38],[19,84],[20,168]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-way-footway",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","footway"]],layout:{"line-cap":"butt"},paint:{"line-width":{stops:[[15,0],[16,4],[18,6],[19,10],[20,20]]},"line-color":"rgb(251,235,255)"},minzoom:15},{source:"versatiles-shortbread",id:"bridge-way-steps",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","steps"]],layout:{"line-cap":"butt"},paint:{"line-width":{stops:[[15,0],[16,4],[18,6],[19,10],[20,20]]},"line-color":"rgb(251,235,255)"},minzoom:15},{source:"versatiles-shortbread",id:"bridge-way-path",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","path"]],layout:{"line-cap":"butt"},paint:{"line-width":{stops:[[15,0],[16,4],[18,6],[19,10],[20,20]]},"line-color":"rgb(251,235,255)"},minzoom:15},{source:"versatiles-shortbread",id:"bridge-way-cycleway",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","cycleway"]],layout:{"line-cap":"butt"},paint:{"line-width":{stops:[[15,0],[16,4],[18,6],[19,10],[20,20]]},"line-color":"rgb(239,249,255)"},minzoom:15},{source:"versatiles-shortbread",id:"bridge-street-track",type:"line","source-layer":"streets",filter:["all",["==","kind","track"],["==","bridge",!0]],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[14,1],[16,3],[18,16],[19,44],[20,88]]},"line-opacity":{stops:[[14,0],[15,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-pedestrian",type:"line","source-layer":"streets",filter:["all",["==","kind","pedestrian"],["==","bridge",!0]],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-service",type:"line","source-layer":"streets",filter:["all",["==","kind","service"],["==","bridge",!0]],paint:{"line-color":"rgb(247,247,247)","line-width":{stops:[[14,1],[16,2],[18,10],[19,28],[20,40]]},"line-opacity":{stops:[[15,0],[16,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-livingstreet",type:"line","source-layer":"streets",filter:["all",["==","kind","living_street"],["==","bridge",!0]],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-residential",type:"line","source-layer":"streets",filter:["all",["==","kind","residential"],["==","bridge",!0]],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-unclassified",type:"line","source-layer":"streets",filter:["all",["==","kind","unclassified"],["==","bridge",!0]],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-track-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","track"],["==","bicycle","designated"],["==","bridge",!0]],paint:{"line-color":"rgb(255,255,255)"},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-pedestrian-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","pedestrian"],["==","bicycle","designated"],["==","bridge",!0]],paint:{"line-color":"rgb(239,249,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"bridge-street-service-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","service"],["==","bicycle","designated"],["==","bridge",!0]],paint:{"line-color":"rgb(255,255,255)"},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-livingstreet-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","living_street"],["==","bicycle","designated"],["==","bridge",!0]],paint:{"line-color":"rgb(239,249,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"bridge-street-residential-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","residential"],["==","bicycle","designated"],["==","bridge",!0]],paint:{"line-color":"rgb(239,249,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"bridge-street-unclassified-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","unclassified"],["==","bicycle","designated"],["==","bridge",!0]],paint:{"line-color":"rgb(239,249,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"bridge-street-tertiary-link",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","tertiary"],["==","link",!0]],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-secondary-link",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","secondary"],["==","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[12,1],[14,2],[16,5],[18,12],[20,38]]}},layout:{"line-join":"round","line-cap":"butt"},minzoom:13},{source:"versatiles-shortbread",id:"bridge-street-primary-link",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","primary"],["==","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[12,1],[14,2],[16,5],[18,12],[20,38]]}},layout:{"line-join":"round","line-cap":"butt"},minzoom:13},{source:"versatiles-shortbread",id:"bridge-street-trunk-link",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","trunk"],["==","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[12,1],[14,2],[16,5],[18,12],[20,38]]}},layout:{"line-join":"round","line-cap":"butt"},minzoom:13},{source:"versatiles-shortbread",id:"bridge-street-motorway-link",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","motorway"],["==","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[12,1],[14,2],[16,5],[18,12],[20,38]]}},layout:{"line-join":"round","line-cap":"butt"},minzoom:12},{source:"versatiles-shortbread",id:"bridge-street-tertiary",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","tertiary"],["!=","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-secondary",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","secondary"],["!=","link",!0]],paint:{"line-color":"rgb(215,215,215)","line-width":{stops:[[11,1],[14,4],[16,6],[18,28],[19,64],[20,130]]},"line-opacity":{stops:[[11,0],[12,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-primary",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","primary"],["!=","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[8,0],[9,2],[10,3],[14,5],[16,10],[18,34],[19,70],[20,140]]},"line-opacity":{stops:[[8,0],[9,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-trunk",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","trunk"],["!=","link",!0]],paint:{"line-color":"rgb(215,215,215)","line-width":{stops:[[7,0],[8,1],[10,3],[14,5],[16,10],[18,34],[19,70],[20,140]]},"line-opacity":{stops:[[7,0],[8,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-motorway",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","motorway"],["!=","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[7,0],[8,0],[10,3],[14,3],[16,10],[18,34],[19,78],[20,158]]},"line-opacity":{stops:[[5,0],[6,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-transport-tram:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","tram"],["!has","service"],["==","bridge",!0]],minzoom:15,paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[15,0],[16,5],[18,7],[20,20]]},"line-dasharray":[.1,.5]}},{source:"versatiles-shortbread",id:"bridge-transport-narrowgauge:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","narrow_gauge"],["!has","service"],["==","bridge",!0]],minzoom:15,paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[15,0],[16,5],[18,7],[20,20]]},"line-dasharray":[.1,.5]}},{source:"versatiles-shortbread",id:"bridge-transport-subway:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","subway"],["!has","service"],["==","bridge",!0]],paint:{"line-color":"rgb(166,184,199)","line-width":{stops:[[11,0],[12,1],[15,3],[16,3],[18,6],[19,8],[20,10]]},"line-opacity":{stops:[[11,0],[12,1]]}}},{source:"versatiles-shortbread",id:"bridge-transport-lightrail:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","light_rail"],["!has","service"],["==","bridge",!0]],paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[8,1],[13,1],[15,1],[20,14]]},"line-opacity":{stops:[[11,0],[12,1]]}},minzoom:8},{source:"versatiles-shortbread",id:"bridge-transport-lightrail-service:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","light_rail"],["has","service"],["==","bridge",!0]],paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[14,0],[15,1],[16,1],[20,14]]}},minzoom:14},{source:"versatiles-shortbread",id:"bridge-transport-rail:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","rail"],["!has","service"],["==","bridge",!0]],paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[8,1],[13,1],[15,1],[20,14]]},"line-opacity":{stops:[[8,0],[9,1]]}},minzoom:8},{source:"versatiles-shortbread",id:"bridge-transport-rail-service:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","rail"],["has","service"],["==","bridge",!0]],paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[14,0],[15,1],[16,1],[20,14]]}},minzoom:14},{source:"versatiles-shortbread",id:"bridge-transport-monorail:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","monorail"],["==","bridge",!0]],minzoom:15,paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[15,0],[16,5],[18,7],[20,20]]},"line-dasharray":[.1,.5]}},{source:"versatiles-shortbread",id:"bridge-transport-funicular:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","funicular"],["==","bridge",!0]],minzoom:15,paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[15,0],[16,5],[18,7],[20,20]]},"line-dasharray":[.1,.5]}},{source:"versatiles-shortbread",id:"bridge-transport-tram",type:"line","source-layer":"streets",filter:["all",["in","kind","tram"],["!has","service"],["==","bridge",!0]],minzoom:13,paint:{"line-width":{stops:[[13,0],[16,1],[17,2],[18,3],[20,5]]},"line-color":"rgb(177,187,196)"}},{source:"versatiles-shortbread",id:"bridge-transport-narrowgauge",type:"line","source-layer":"streets",filter:["all",["in","kind","narrow_gauge"],["!has","service"],["==","bridge",!0]],minzoom:13,paint:{"line-width":{stops:[[13,0],[16,1],[17,2],[18,3],[20,5]]},"line-color":"rgb(177,187,196)"}},{source:"versatiles-shortbread",id:"bridge-transport-subway",type:"line","source-layer":"streets",filter:["all",["in","kind","subway"],["!has","service"],["==","bridge",!0]],paint:{"line-color":"rgb(188,202,213)","line-width":{stops:[[11,0],[12,1],[15,2],[16,2],[18,5],[19,6],[20,8]]},"line-dasharray":[2,2],"line-opacity":{stops:[[14,0],[15,1]]}}},{source:"versatiles-shortbread",id:"bridge-transport-lightrail",type:"line","source-layer":"streets",filter:["all",["in","kind","light_rail"],["!has","service"],["==","bridge",!0]],paint:{"line-color":"rgb(197,204,211)","line-width":{stops:[[14,0],[15,1],[20,10]]},"line-dasharray":[2,2],"line-opacity":{stops:[[14,0],[15,1]]}},minzoom:14},{source:"versatiles-shortbread",id:"bridge-transport-lightrail-service",type:"line","source-layer":"streets",filter:["all",["in","kind","light_rail"],["has","service"],["==","bridge",!0]],paint:{"line-color":"rgb(197,204,211)","line-width":{stops:[[15,0],[16,1],[20,10]]},"line-dasharray":[2,2]},minzoom:15},{source:"versatiles-shortbread",id:"bridge-transport-rail",type:"line","source-layer":"streets",filter:["all",["in","kind","rail"],["!has","service"],["==","bridge",!0]],paint:{"line-color":"rgb(197,204,211)","line-width":{stops:[[14,0],[15,1],[20,10]]},"line-dasharray":[2,2],"line-opacity":{stops:[[14,0],[15,1]]}},minzoom:14},{source:"versatiles-shortbread",id:"bridge-transport-rail-service",type:"line","source-layer":"streets",filter:["all",["in","kind","rail"],["has","service"],["==","bridge",!0]],paint:{"line-color":"rgb(197,204,211)","line-width":{stops:[[15,0],[16,1],[20,10]]},"line-dasharray":[2,2]},minzoom:15},{source:"versatiles-shortbread",id:"bridge-transport-monorail",type:"line","source-layer":"streets",filter:["all",["in","kind","monorail"],["==","bridge",!0]],minzoom:13,paint:{"line-width":{stops:[[13,0],[16,1],[17,2],[18,3],[20,5]]},"line-color":"rgb(177,187,196)"}},{source:"versatiles-shortbread",id:"bridge-transport-funicular",type:"line","source-layer":"streets",filter:["all",["in","kind","funicular"],["==","bridge",!0]],minzoom:13,paint:{"line-width":{stops:[[13,0],[16,1],[17,2],[18,3],[20,5]]},"line-color":"rgb(177,187,196)"}},{source:"versatiles-shortbread",id:"poi-amenity",type:"symbol","source-layer":"pois",filter:["to-boolean",["get","amenity"]],minzoom:16,layout:{"icon-size":{stops:[[16,.5],[19,.5],[20,1]]},"symbol-placement":"point","icon-optional":!0,"text-font":["noto_sans_regular"],"icon-image":["match",["get","amenity"],"arts_centre","basics:icon-art_gallery","atm","basics:icon-atm","bank","basics:icon-bank","bar","basics:icon-bar","bench","basics:icon-bench","bicycle_rental","basics:icon-bicycle_share","biergarten","basics:icon-beergarden","cafe","basics:icon-cafe","car_rental","basics:icon-car_rental","car_sharing","basics:icon-car_rental","car_wash","basics:icon-car_wash","cinema","basics:icon-cinema","college","basics:icon-college","community_centre","basics:icon-community","dentist","basics:icon-dentist","doctors","basics:icon-doctor","dog_park","basics:icon-dog_park","drinking_water","basics:icon-drinking_water","embassy","basics:icon-embassy","fast_food","basics:icon-fast_food","fire_station","basics:icon-fire_station","fountain","basics:icon-fountain","grave_yard","basics:icon-cemetery","hospital","basics:icon-hospital","hunting_stand","basics:icon-huntingstand","library","basics:icon-library","marketplace","basics:icon-marketplace","nightclub","basics:icon-nightclub","nursing_home","basics:icon-nursinghome","pharmacy","basics:icon-pharmacy","place_of_worship","basics:icon-place_of_worship","playground","basics:icon-playground","police","basics:icon-police","post_box","basics:icon-postbox","post_office","basics:icon-post","prison","basics:icon-prison","pub","basics:icon-beer","recycling","basics:icon-recycling","restaurant","basics:icon-restaurant","school","basics:icon-school","shelter","basics:icon-shelter","telephone","basics:icon-telephone","theatre","basics:icon-theatre","toilets","basics:icon-toilet","townhall","basics:icon-town_hall","vending_machine","basics:icon-vendingmachine","veterinary","basics:icon-veterinary","waste_basket","basics:icon-waste_basket",""],visibility:"none"},paint:{"icon-opacity":{stops:[[16,0],[17,.4]]},"text-opacity":{stops:[[16,0],[17,.4]]},"icon-color":"rgb(85,85,85)","text-color":"rgb(85,85,85)"}},{source:"versatiles-shortbread",id:"poi-leisure",type:"symbol","source-layer":"pois",filter:["to-boolean",["get","leisure"]],minzoom:16,layout:{"icon-size":{stops:[[16,.5],[19,.5],[20,1]]},"symbol-placement":"point","icon-optional":!0,"text-font":["noto_sans_regular"],"icon-image":["match",["get","leisure"],"golf_course","basics:icon-golf","ice_rink","basics:icon-icerink","pitch","basics:icon-pitch","stadium","basics:icon-stadium","swimming_pool","basics:icon-swimming","water_park","basics:icon-waterpark","basics:icon-sports"],visibility:"none"},paint:{"icon-opacity":{stops:[[16,0],[17,.4]]},"text-opacity":{stops:[[16,0],[17,.4]]},"icon-color":"rgb(85,85,85)","text-color":"rgb(85,85,85)"}},{source:"versatiles-shortbread",id:"poi-tourism",type:"symbol","source-layer":"pois",filter:["to-boolean",["get","tourism"]],minzoom:16,layout:{"icon-size":{stops:[[16,.5],[19,.5],[20,1]]},"symbol-placement":"point","icon-optional":!0,"text-font":["noto_sans_regular"],"icon-image":["match",["get","tourism"],"chalet","basics:icon-chalet","information","basics:transport-information","picnic_site","basics:icon-picnic_site","viewpoint","basics:icon-viewpoint","zoo","basics:icon-zoo",""],visibility:"none"},paint:{"icon-opacity":{stops:[[16,0],[17,.4]]},"text-opacity":{stops:[[16,0],[17,.4]]},"icon-color":"rgb(85,85,85)","text-color":"rgb(85,85,85)"}},{source:"versatiles-shortbread",id:"poi-shop",type:"symbol","source-layer":"pois",filter:["to-boolean",["get","shop"]],minzoom:16,layout:{"icon-size":{stops:[[16,.5],[19,.5],[20,1]]},"symbol-placement":"point","icon-optional":!0,"text-font":["noto_sans_regular"],"icon-image":["match",["get","shop"],"alcohol","basics:icon-alcohol_shop","bakery","basics:icon-bakery","beauty","basics:icon-beauty","beverages","basics:icon-beverages","books","basics:icon-books","butcher","basics:icon-butcher","chemist","basics:icon-chemist","clothes","basics:icon-clothes","doityourself","basics:icon-doityourself","dry_cleaning","basics:icon-drycleaning","florist","basics:icon-florist","furniture","basics:icon-furniture","garden_centre","basics:icon-garden_centre","general","basics:icon-shop","gift","basics:icon-gift","greengrocer","basics:icon-greengrocer","hairdresser","basics:icon-hairdresser","hardware","basics:icon-hardware","jewelry","basics:icon-jewelry_store","kiosk","basics:icon-kiosk","laundry","basics:icon-laundry","newsagent","basics:icon-newsagent","optican","basics:icon-optician","outdoor","basics:icon-outdoor","shoes","basics:icon-shoes","sports","basics:icon-sports","stationery","basics:icon-stationery","toys","basics:icon-toys","travel_agency","basics:icon-travel_agent","video","basics:icon-video","basics:icon-shop"],visibility:"none"},paint:{"icon-opacity":{stops:[[16,0],[17,.4]]},"text-opacity":{stops:[[16,0],[17,.4]]},"icon-color":"rgb(85,85,85)","text-color":"rgb(85,85,85)"}},{source:"versatiles-shortbread",id:"poi-man_made",type:"symbol","source-layer":"pois",filter:["to-boolean",["get","man_made"]],minzoom:16,layout:{"icon-size":{stops:[[16,.5],[19,.5],[20,1]]},"symbol-placement":"point","icon-optional":!0,"text-font":["noto_sans_regular"],"icon-image":["match",["get","man_made"],"lighthouse","basics:icon-lighthouse","surveillance","basics:icon-surveillance","tower","basics:icon-observation_tower","watermill","basics:icon-watermill","windmill","basics:icon-windmill",""],visibility:"none"},paint:{"icon-opacity":{stops:[[16,0],[17,.4]]},"text-opacity":{stops:[[16,0],[17,.4]]},"icon-color":"rgb(85,85,85)","text-color":"rgb(85,85,85)"}},{source:"versatiles-shortbread",id:"poi-historic",type:"symbol","source-layer":"pois",filter:["to-boolean",["get","historic"]],minzoom:16,layout:{"icon-size":{stops:[[16,.5],[19,.5],[20,1]]},"symbol-placement":"point","icon-optional":!0,"text-font":["noto_sans_regular"],"icon-image":["match",["get","historic"],"artwork","basics:icon-artwork","castle","basics:icon-castle","monument","basics:icon-monument","wayside_shrine","basics:icon-shrine","basics:icon-historic"],visibility:"none"},paint:{"icon-opacity":{stops:[[16,0],[17,.4]]},"text-opacity":{stops:[[16,0],[17,.4]]},"icon-color":"rgb(85,85,85)","text-color":"rgb(85,85,85)"}},{source:"versatiles-shortbread",id:"poi-emergency",type:"symbol","source-layer":"pois",filter:["to-boolean",["get","emergency"]],minzoom:16,layout:{"icon-size":{stops:[[16,.5],[19,.5],[20,1]]},"symbol-placement":"point","icon-optional":!0,"text-font":["noto_sans_regular"],"icon-image":["match",["get","emergency"],"defibrillator","basics:icon-defibrillator","fire_hydrant","basics:icon-hydrant","phone","basics:icon-emergency_phone",""],visibility:"none"},paint:{"icon-opacity":{stops:[[16,0],[17,.4]]},"text-opacity":{stops:[[16,0],[17,.4]]},"icon-color":"rgb(85,85,85)","text-color":"rgb(85,85,85)"}},{source:"versatiles-shortbread",id:"poi-highway",type:"symbol","source-layer":"pois",filter:["to-boolean",["get","highway"]],minzoom:16,layout:{"icon-size":{stops:[[16,.5],[19,.5],[20,1]]},"symbol-placement":"point","icon-optional":!0,"text-font":["noto_sans_regular"],visibility:"none"},paint:{"icon-opacity":{stops:[[16,0],[17,.4]]},"text-opacity":{stops:[[16,0],[17,.4]]},"icon-color":"rgb(85,85,85)","text-color":"rgb(85,85,85)"}},{source:"versatiles-shortbread",id:"poi-office",type:"symbol","source-layer":"pois",filter:["to-boolean",["get","office"]],minzoom:16,layout:{"icon-size":{stops:[[16,.5],[19,.5],[20,1]]},"symbol-placement":"point","icon-optional":!0,"text-font":["noto_sans_regular"],visibility:"none"},paint:{"icon-opacity":{stops:[[16,0],[17,.4]]},"text-opacity":{stops:[[16,0],[17,.4]]},"icon-color":"rgb(85,85,85)","text-color":"rgb(85,85,85)"}},{source:"versatiles-shortbread",id:"boundary-country:outline",type:"line","source-layer":"boundaries",filter:["all",["==","admin_level",2],["!=","maritime",!0],["!=","disputed",!0],["!=","coastline",!0]],paint:{"line-color":"rgb(249,245,239)","line-blur":2,"line-width":{stops:[[2,0],[3,2],[10,8]]},"line-opacity":.75},layout:{"line-cap":"round","line-join":"round"}},{source:"versatiles-shortbread",id:"boundary-country-disputed:outline",type:"line","source-layer":"boundaries",filter:["all",["==","admin_level",2],["==","disputed",!0],["!=","maritime",!0],["!=","coastline",!0]],paint:{"line-width":{stops:[[2,0],[3,2],[10,8]]},"line-opacity":.75,"line-color":"rgb(249,245,239)"}},{source:"versatiles-shortbread",id:"boundary-country",type:"line","source-layer":"boundaries",filter:["all",["==","admin_level",2],["!=","maritime",!0],["!=","disputed",!0],["!=","coastline",!0]],paint:{"line-color":"rgb(100,100,100)","line-width":{stops:[[2,0],[3,1],[10,4]]}},layout:{"line-cap":"round","line-join":"round"}},{source:"versatiles-shortbread",id:"boundary-country-disputed",type:"line","source-layer":"boundaries",filter:["all",["==","admin_level",2],["==","disputed",!0],["!=","maritime",!0],["!=","coastline",!0]],paint:{"line-width":{stops:[[2,0],[3,1],[10,4]]},"line-color":"rgb(150,150,150)","line-dasharray":[2,1]},layout:{"line-cap":"square"}},{source:"versatiles-shortbread",id:"label-address-housenumber",type:"symbol","source-layer":"addresses",filter:["has","housenumber"],layout:{"text-field":"{housenumber}","text-font":["noto_sans_regular"],"symbol-placement":"point","text-anchor":"center","text-size":{stops:[[17,8],[19,10]]},visibility:"none"},paint:{"text-halo-color":"rgb(243,235,227)","text-halo-width":2,"text-halo-blur":1,"icon-color":"rgb(169,164,158)","text-color":"rgb(169,164,158)"},minzoom:17},{source:"versatiles-shortbread",id:"label-motorway-shield",type:"symbol","source-layer":"street_labels",filter:["==","kind","motorway"],layout:{"text-field":"{ref}","text-font":["noto_sans_bold"],"symbol-placement":"line","text-anchor":"center","text-size":{stops:[[14,10],[18,12],[20,16]]}},paint:{"icon-color":"rgb(255,255,255)","text-color":"rgb(255,255,255)","text-halo-color":"rgb(255,204,136)","text-halo-width":.1,"text-halo-blur":1},minzoom:14},{source:"versatiles-shortbread",id:"label-street-pedestrian",type:"symbol","source-layer":"street_labels",filter:["==","kind","pedestrian"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"symbol-placement":"line","text-anchor":"center","text-size":{stops:[[12,10],[15,13]]}},paint:{"icon-color":"rgb(51,51,68)","text-color":"rgb(51,51,68)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:12},{source:"versatiles-shortbread",id:"label-street-livingstreet",type:"symbol","source-layer":"street_labels",filter:["==","kind","living_street"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"symbol-placement":"line","text-anchor":"center","text-size":{stops:[[12,10],[15,13]]}},paint:{"icon-color":"rgb(51,51,68)","text-color":"rgb(51,51,68)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:12},{source:"versatiles-shortbread",id:"label-street-residential",type:"symbol","source-layer":"street_labels",filter:["==","kind","residential"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"symbol-placement":"line","text-anchor":"center","text-size":{stops:[[12,10],[15,13]]}},paint:{"icon-color":"rgb(51,51,68)","text-color":"rgb(51,51,68)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:12},{source:"versatiles-shortbread",id:"label-street-unclassified",type:"symbol","source-layer":"street_labels",filter:["==","kind","unclassified"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"symbol-placement":"line","text-anchor":"center","text-size":{stops:[[12,10],[15,13]]}},paint:{"icon-color":"rgb(51,51,68)","text-color":"rgb(51,51,68)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:12},{source:"versatiles-shortbread",id:"label-street-tertiary",type:"symbol","source-layer":"street_labels",filter:["==","kind","tertiary"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"symbol-placement":"line","text-anchor":"center","text-size":{stops:[[12,10],[15,13]]}},paint:{"icon-color":"rgb(51,51,68)","text-color":"rgb(51,51,68)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:12},{source:"versatiles-shortbread",id:"label-street-secondary",type:"symbol","source-layer":"street_labels",filter:["==","kind","secondary"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"symbol-placement":"line","text-anchor":"center","text-size":{stops:[[12,10],[15,13]]}},paint:{"icon-color":"rgb(51,51,68)","text-color":"rgb(51,51,68)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:12},{source:"versatiles-shortbread",id:"label-street-primary",type:"symbol","source-layer":"street_labels",filter:["==","kind","primary"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"symbol-placement":"line","text-anchor":"center","text-size":{stops:[[12,10],[15,13]]}},paint:{"icon-color":"rgb(51,51,68)","text-color":"rgb(51,51,68)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:12},{source:"versatiles-shortbread",id:"label-street-trunk",type:"symbol","source-layer":"street_labels",filter:["==","kind","trunk"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"symbol-placement":"line","text-anchor":"center","text-size":{stops:[[12,10],[15,13]]}},paint:{"icon-color":"rgb(51,51,68)","text-color":"rgb(51,51,68)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:12},{source:"versatiles-shortbread",id:"label-place-neighbourhood",type:"symbol","source-layer":"place_labels",filter:["==","kind","neighbourhood"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"text-size":{stops:[[14,12]]},"text-transform":"uppercase"},paint:{"icon-color":"rgb(40,67,73)","text-color":"rgb(40,67,73)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:14},{source:"versatiles-shortbread",id:"label-place-quarter",type:"symbol","source-layer":"place_labels",filter:["==","kind","quarter"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"text-size":{stops:[[13,13]]},"text-transform":"uppercase"},paint:{"icon-color":"rgb(40,62,73)","text-color":"rgb(40,62,73)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:13},{source:"versatiles-shortbread",id:"label-place-suburb",type:"symbol","source-layer":"place_labels",filter:["==","kind","suburb"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"text-size":{stops:[[11,11],[13,14]]},"text-transform":"uppercase"},paint:{"icon-color":"rgb(40,57,73)","text-color":"rgb(40,57,73)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:11},{source:"versatiles-shortbread",id:"label-place-hamlet",type:"symbol","source-layer":"place_labels",filter:["==","kind","hamlet"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"text-size":{stops:[[10,11],[12,14]]}},paint:{"icon-color":"rgb(40,48,73)","text-color":"rgb(40,48,73)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:13},{source:"versatiles-shortbread",id:"label-place-village",type:"symbol","source-layer":"place_labels",filter:["==","kind","village"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"text-size":{stops:[[9,11],[12,14]]}},paint:{"icon-color":"rgb(40,48,73)","text-color":"rgb(40,48,73)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:11},{source:"versatiles-shortbread",id:"label-place-town",type:"symbol","source-layer":"place_labels",filter:["==","kind","town"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"text-size":{stops:[[8,11],[12,14]]}},paint:{"icon-color":"rgb(40,48,73)","text-color":"rgb(40,48,73)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:9},{source:"versatiles-shortbread",id:"label-boundary-state",type:"symbol","source-layer":"boundary_labels",filter:["in","admin_level",4,"4"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"text-transform":"uppercase","text-anchor":"top","text-offset":[0,.2],"text-padding":0,"text-optional":!0,"text-size":{stops:[[5,8],[8,12]]}},paint:{"icon-color":"rgb(61,61,77)","text-color":"rgb(61,61,77)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:5},{source:"versatiles-shortbread",id:"label-place-city",type:"symbol","source-layer":"place_labels",filter:["==","kind","city"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"text-size":{stops:[[7,11],[10,14]]}},paint:{"icon-color":"rgb(40,48,73)","text-color":"rgb(40,48,73)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:7},{source:"versatiles-shortbread",id:"label-place-statecapital",type:"symbol","source-layer":"place_labels",filter:["==","kind","state_capital"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"text-size":{stops:[[6,11],[10,15]]}},paint:{"icon-color":"rgb(40,48,73)","text-color":"rgb(40,48,73)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:6},{source:"versatiles-shortbread",id:"label-place-capital",type:"symbol","source-layer":"place_labels",filter:["==","kind","capital"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"text-size":{stops:[[5,12],[10,16]]}},paint:{"icon-color":"rgb(40,48,73)","text-color":"rgb(40,48,73)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:5},{source:"versatiles-shortbread",id:"label-boundary-country-small",type:"symbol","source-layer":"boundary_labels",filter:["all",["in","admin_level",2,"2"],["<=","way_area",1e7]],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"text-transform":"uppercase","text-anchor":"top","text-offset":[0,.2],"text-padding":0,"text-optional":!0,"text-size":{stops:[[4,8],[5,11]]}},paint:{"icon-color":"rgb(51,51,68)","text-color":"rgb(51,51,68)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:4},{source:"versatiles-shortbread",id:"label-boundary-country-medium",type:"symbol","source-layer":"boundary_labels",filter:["all",["in","admin_level",2,"2"],["<","way_area",9e7],[">","way_area",1e7]],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"text-transform":"uppercase","text-anchor":"top","text-offset":[0,.2],"text-padding":0,"text-optional":!0,"text-size":{stops:[[3,8],[5,12]]}},paint:{"icon-color":"rgb(51,51,68)","text-color":"rgb(51,51,68)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:3},{source:"versatiles-shortbread",id:"label-boundary-country-large",type:"symbol","source-layer":"boundary_labels",filter:["all",["in","admin_level",2,"2"],[">=","way_area",9e7]],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"text-transform":"uppercase","text-anchor":"top","text-offset":[0,.2],"text-padding":0,"text-optional":!0,"text-size":{stops:[[2,8],[5,13]]}},paint:{"icon-color":"rgb(51,51,68)","text-color":"rgb(51,51,68)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:2},{source:"versatiles-shortbread",id:"marking-oneway",type:"symbol","source-layer":"streets",filter:["all",["==","oneway",!0],["in","kind","trunk","primary","secondary","tertiary","unclassified","residential","living_street"]],layout:{"symbol-placement":"line","symbol-spacing":175,"icon-rotate":90,"icon-rotation-alignment":"map","icon-padding":5,"symbol-avoid-edges":!0,"icon-image":"basics:marking-arrow",visibility:"none","text-font":["noto_sans_regular"]},minzoom:16,paint:{"icon-opacity":{stops:[[16,0],[17,.4],[20,.4]]},"text-opacity":{stops:[[16,0],[17,.4],[20,.4]]}}},{source:"versatiles-shortbread",id:"marking-oneway-reverse",type:"symbol","source-layer":"streets",filter:["all",["==","oneway_reverse",!0],["in","kind","trunk","primary","secondary","tertiary","unclassified","residential","living_street"]],layout:{"symbol-placement":"line","symbol-spacing":75,"icon-rotate":-90,"icon-rotation-alignment":"map","icon-padding":5,"symbol-avoid-edges":!0,"icon-image":"basics:marking-arrow",visibility:"none","text-font":["noto_sans_regular"]},minzoom:16,paint:{"icon-opacity":{stops:[[16,0],[17,.4],[20,.4]]},"text-opacity":{stops:[[16,0],[17,.4],[20,.4]]}}},{source:"versatiles-shortbread",id:"symbol-transit-bus",type:"symbol","source-layer":"public_transport",filter:["==","kind","bus_stop"],layout:{"text-field":"{name}","icon-size":{stops:[[16,.5],[18,1]]},"symbol-placement":"point","icon-keep-upright":!0,"text-font":["noto_sans_regular"],"text-size":10,"icon-anchor":"bottom","text-anchor":"top","icon-image":"basics:icon-bus",visibility:"none"},paint:{"icon-opacity":.7,"icon-color":"rgb(102,98,106)","text-color":"rgb(102,98,106)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:16},{source:"versatiles-shortbread",id:"symbol-transit-tram",type:"symbol","source-layer":"public_transport",filter:["==","kind","tram_stop"],layout:{"text-field":"{name}","icon-size":{stops:[[15,.5],[17,1]]},"symbol-placement":"point","icon-keep-upright":!0,"text-font":["noto_sans_regular"],"text-size":10,"icon-anchor":"bottom","text-anchor":"top","icon-image":"basics:transport-tram",visibility:"none"},paint:{"icon-opacity":.7,"icon-color":"rgb(102,98,106)","text-color":"rgb(102,98,106)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:15},{source:"versatiles-shortbread",id:"symbol-transit-subway",type:"symbol","source-layer":"public_transport",filter:["all",["in","kind","station","halt"],["==","station","subway"]],layout:{"text-field":"{name}","icon-size":{stops:[[14,.5],[16,1]]},"symbol-placement":"point","icon-keep-upright":!0,"text-font":["noto_sans_regular"],"text-size":10,"icon-anchor":"bottom","text-anchor":"top","icon-image":"basics:icon-rail_metro",visibility:"none"},paint:{"icon-opacity":.7,"icon-color":"rgb(102,98,106)","text-color":"rgb(102,98,106)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:14},{source:"versatiles-shortbread",id:"symbol-transit-lightrail",type:"symbol","source-layer":"public_transport",filter:["all",["in","kind","station","halt"],["==","station","light_rail"]],layout:{"text-field":"{name}","icon-size":{stops:[[14,.5],[16,1]]},"symbol-placement":"point","icon-keep-upright":!0,"text-font":["noto_sans_regular"],"text-size":10,"icon-anchor":"bottom","text-anchor":"top","icon-image":"basics:icon-rail_light",visibility:"none"},paint:{"icon-opacity":.7,"icon-color":"rgb(102,98,106)","text-color":"rgb(102,98,106)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:14},{source:"versatiles-shortbread",id:"symbol-transit-station",type:"symbol","source-layer":"public_transport",filter:["all",["in","kind","station","halt"],["!in","station","light_rail","subway"]],layout:{"text-field":"{name}","icon-size":{stops:[[13,.5],[15,1]]},"symbol-placement":"point","icon-keep-upright":!0,"text-font":["noto_sans_regular"],"text-size":10,"icon-anchor":"bottom","text-anchor":"top","icon-image":"basics:icon-rail",visibility:"none"},paint:{"icon-opacity":.7,"icon-color":"rgb(102,98,106)","text-color":"rgb(102,98,106)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:13},{source:"versatiles-shortbread",id:"symbol-transit-airfield",type:"symbol","source-layer":"public_transport",filter:["all",["==","kind","aerodrome"],["!has","iata"]],layout:{"text-field":"{name}","icon-size":{stops:[[13,.5],[15,1]]},"symbol-placement":"point","icon-keep-upright":!0,"text-font":["noto_sans_regular"],"text-size":10,"icon-anchor":"bottom","text-anchor":"top","icon-image":"basics:icon-airfield",visibility:"none"},paint:{"icon-opacity":.7,"icon-color":"rgb(102,98,106)","text-color":"rgb(102,98,106)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:13},{source:"versatiles-shortbread",id:"symbol-transit-airport",type:"symbol","source-layer":"public_transport",filter:["all",["==","kind","aerodrome"],["has","iata"]],layout:{"text-field":"{name}","icon-size":{stops:[[12,.5],[14,1]]},"symbol-placement":"point","icon-keep-upright":!0,"text-font":["noto_sans_regular"],"text-size":10,"icon-anchor":"bottom","text-anchor":"top","icon-image":"basics:icon-airport",visibility:"none"},paint:{"icon-opacity":.7,"icon-color":"rgb(102,98,106)","text-color":"rgb(102,98,106)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:12}],M3={version:S3,name:T3,metadata:C3,glyphs:k3,sprite:P3,sources:E3,layers:A3};var WP={shortbread:x_},Bf=[30,30];function I3(s){let o=s.src,p=s.scale||1,d=s.anchor||[.5,.5];return o?new Promise(f=>{let a=new Image;a.onload=()=>{let T=a.naturalWidth,M=a.naturalHeight,B=T*p,G=M*p,J=d[0],ie=d[1];(s.anchorXUnits==="fraction"||J<=1)&&(J=B*J),(s.anchorYUnits==="fraction"||ie<=1)&&(ie=G*ie);let $=Js.default.icon({iconUrl:o,iconSize:[B,G],iconAnchor:[J,ie],popupAnchor:[J,ie]});f($)},a.onerror=()=>{f(null)},a.src=o}):Promise.resolve(null)}async function GP(s,o,p,d,f,a,T){if(console.log(T),!a in WP)throw new Error(`'${a}' is not a valid style.`);let M={};if(f){let Te=await I3(f);M.icon=Te}let B,G;o!==void 0&&(o=JSON.parse(o),B=Js.default.geoJson(o,{pointToLayer:function(Te,We){return Js.default.marker(We,M)},onEachFeature:function(Te,We){if(Te.properties&&(Te.properties.name||Te.properties.popupContent)){let xe="";Te.properties.name&&(xe+="<h1>"+Te.properties.name+"</h1>"),Te.properties.popupContent&&(xe+=Te.properties.popupContent),We.bindPopup(xe)}}}),G=B.getBounds().getCenter());let J,ie;ie=document.querySelector(s),J=Js.default.map(ie,{maxBounds:[[180,-1/0],[-180,1/0]],maxBoundsViscosity:1,zoomControl:!1,renderer:Js.default.svg(),minZoom:1,maxZoom:15,center:G,zoom:3,zoomSnap:.1});let $;T&&T.length===4&&($=[[T[1],T[0]],[T[3],T[2]]],J.fitBounds($,{padding:Bf}));var ae=Js.default.maplibreGL({style:WP[a]}).addTo(J);if(d!==void 0&&d){let Te=Js.default.markerClusterGroup({maxClusterRadius:40,iconCreateFunction:function(We){let xe=We.getChildCount(),Ze=M.icon;if(!Ze)return Js.default.divIcon({html:"<b>"+xe+"</b>",className:"marker-cluster"});let dt=Ze.options.iconUrl,mt=Ze.options.iconSize;return Js.default.divIcon({html:`<img src="${dt}" style="width:${mt[0]}px;height:${mt[1]}px;"><span class="cluster-count">${xe}</span>`,className:"custom-marker-cluster",iconSize:mt})}});Te.addLayer(B),J.addLayer(Te)}else J.addLayer(B);$!==void 0?J.fitBounds($,{padding:Bf}):J.fitBounds(B.getBounds(),{padding:Bf});let te=new ResizeObserver(()=>{J.invalidateSize(),$!==void 0&&J.fitBounds($,{padding:Bf})});return ie!==null?te.observe(ie):console.error(`Couldn't set up resize observer for ${s}`),J}window.initMap=GP;})();
/*! Bundled license information:

leaflet/dist/leaflet-src.js:
  (* @preserve
   * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
   * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
   *)

maplibre-gl/dist/maplibre-gl.js:
  (**
   * MapLibre GL JS
   * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.14.0/LICENSE.txt
   *)
*/
