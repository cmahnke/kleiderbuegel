(()=>{var nI=Object.create;var Sp=Object.defineProperty;var aI=Object.getOwnPropertyDescriptor;var sI=Object.getOwnPropertyNames;var oI=Object.getPrototypeOf,lI=Object.prototype.hasOwnProperty;var cI=(s,o,p)=>o in s?Sp(s,o,{enumerable:!0,configurable:!0,writable:!0,value:p}):s[o]=p;var Ee=(s,o)=>()=>(o||s((o={exports:{}}).exports,o),o.exports),uI=(s,o)=>{for(var p in o)Sp(s,p,{get:o[p],enumerable:!0})},dI=(s,o,p,d)=>{if(o&&typeof o=="object"||typeof o=="function")for(let f of sI(o))!lI.call(s,f)&&f!==p&&Sp(s,f,{get:()=>o[f],enumerable:!(d=aI(o,f))||d.enumerable});return s};var Ai=(s,o,p)=>(p=s!=null?nI(oI(s)):{},dI(o||!s||!s.__esModule?Sp(p,"default",{value:s,enumerable:!0}):p,s));var Vt=(s,o,p)=>cI(s,typeof o!="symbol"?o+"":o,p);var og=Ee((RF,hx)=>{"use strict";var fI=void 0;hx.exports=function(s){return s!==fI&&s!==null}});var fx=Ee((BF,px)=>{"use strict";var mI=og(),gI={object:!0,function:!0,undefined:!0};px.exports=function(s){return mI(s)?hasOwnProperty.call(gI,typeof s):!1}});var gx=Ee((FF,mx)=>{"use strict";var yI=fx();mx.exports=function(s){if(!yI(s))return!1;try{return s.constructor?s.constructor.prototype===s:!1}catch(o){return!1}}});var _x=Ee((jF,yx)=>{"use strict";var _I=gx();yx.exports=function(s){if(typeof s!="function"||!hasOwnProperty.call(s,"length"))return!1;try{if(typeof s.length!="number"||typeof s.call!="function"||typeof s.apply!="function")return!1}catch(o){return!1}return!_I(s)}});var bx=Ee((NF,vx)=>{"use strict";var vI=_x(),bI=/^\s*class[\s{/}]/,xI=Function.prototype.toString;vx.exports=function(s){return!(!vI(s)||bI.test(xI.call(s)))}});var wx=Ee((qF,xx)=>{"use strict";xx.exports=function(){var s=Object.assign,o;return typeof s!="function"?!1:(o={foo:"raz"},s(o,{bar:"dwa"},{trzy:"trzy"}),o.foo+o.bar+o.trzy==="razdwatrzy")}});var Tx=Ee((VF,Sx)=>{"use strict";Sx.exports=function(){try{return Object.keys("primitive"),!0}catch(s){return!1}}});var kx=Ee((WF,Cx)=>{"use strict";Cx.exports=function(){}});var xu=Ee((GF,Px)=>{"use strict";var wI=kx()();Px.exports=function(s){return s!==wI&&s!==null}});var Ax=Ee((UF,Ex)=>{"use strict";var SI=xu(),TI=Object.keys;Ex.exports=function(s){return TI(SI(s)?Object(s):s)}});var Ix=Ee((ZF,Mx)=>{"use strict";Mx.exports=Tx()()?Object.keys:Ax()});var Fp=Ee(($F,zx)=>{"use strict";var CI=xu();zx.exports=function(s){if(!CI(s))throw new TypeError("Cannot use null or undefined");return s}});var Dx=Ee((HF,Lx)=>{"use strict";var kI=Ix(),PI=Fp(),EI=Math.max;Lx.exports=function(s,o){var p,d,f=EI(arguments.length,2),a;for(s=Object(PI(s)),a=function(T){try{s[T]=o[T]}catch(M){p||(p=M)}},d=1;d<f;++d)o=arguments[d],kI(o).forEach(a);if(p!==void 0)throw p;return s}});var Rx=Ee((YF,Ox)=>{"use strict";Ox.exports=wx()()?Object.assign:Dx()});var Fx=Ee((XF,Bx)=>{"use strict";var AI=xu(),MI=Array.prototype.forEach,II=Object.create,zI=function(s,o){var p;for(p in s)o[p]=s[p]};Bx.exports=function(s){var o=II(null);return MI.call(arguments,function(p){AI(p)&&zI(Object(p),o)}),o}});var Nx=Ee((KF,jx)=>{"use strict";var lg="razdwatrzy";jx.exports=function(){return typeof lg.contains!="function"?!1:lg.contains("dwa")===!0&&lg.contains("foo")===!1}});var Vx=Ee((QF,qx)=>{"use strict";var LI=String.prototype.indexOf;qx.exports=function(s){return LI.call(this,s,arguments[1])>-1}});var Gx=Ee((JF,Wx)=>{"use strict";Wx.exports=Nx()()?String.prototype.contains:Vx()});var fc=Ee((ej,Hx)=>{"use strict";var jp=og(),Ux=bx(),Zx=Rx(),$x=Fx(),Xd=Gx(),DI=Hx.exports=function(s,o){var p,d,f,a,T;return arguments.length<2||typeof s!="string"?(a=o,o=s,s=null):a=arguments[2],jp(s)?(p=Xd.call(s,"c"),d=Xd.call(s,"e"),f=Xd.call(s,"w")):(p=f=!0,d=!1),T={value:o,configurable:p,enumerable:d,writable:f},a?Zx($x(a),T):T};DI.gs=function(s,o,p){var d,f,a,T;return typeof s!="string"?(a=p,p=o,o=s,s=null):a=arguments[3],jp(o)?Ux(o)?jp(p)?Ux(p)||(a=p,p=void 0):p=void 0:(a=o,o=p=void 0):o=void 0,jp(s)?(d=Xd.call(s,"c"),f=Xd.call(s,"e")):(d=!0,f=!1),T={get:o,set:p,configurable:d,enumerable:f},a?Zx($x(a),T):T}});var cg=Ee((tj,Yx)=>{"use strict";Yx.exports=function(s){if(typeof s!="function")throw new TypeError(s+" is not a function");return s}});var Cl=Ee((_g,e0)=>{"use strict";var Np=fc(),pg=cg(),hg=Function.prototype.apply,ug=Function.prototype.call,Xx=Object.create,OI=Object.defineProperty,Kx=Object.defineProperties,fg=Object.prototype.hasOwnProperty,dg={configurable:!0,enumerable:!1,writable:!0},qp,mg,Vp,gg,Qx,yg,Jx;qp=function(s,o){var p;return pg(o),fg.call(this,"__ee__")?p=this.__ee__:(p=dg.value=Xx(null),OI(this,"__ee__",dg),dg.value=null),p[s]?typeof p[s]=="object"?p[s].push(o):p[s]=[p[s],o]:p[s]=o,this};mg=function(s,o){var p,d;return pg(o),d=this,qp.call(this,s,p=function(){Vp.call(d,s,p),hg.call(o,this,arguments)}),p.__eeOnceListener__=o,this};Vp=function(s,o){var p,d,f,a;if(pg(o),!fg.call(this,"__ee__"))return this;if(p=this.__ee__,!p[s])return this;if(d=p[s],typeof d=="object")for(a=0;f=d[a];++a)(f===o||f.__eeOnceListener__===o)&&(d.length===2?p[s]=d[a?0:1]:d.splice(a,1));else(d===o||d.__eeOnceListener__===o)&&delete p[s];return this};gg=function(s){var o,p,d,f,a;if(fg.call(this,"__ee__")&&(f=this.__ee__[s],!!f))if(typeof f=="object"){for(p=arguments.length,a=new Array(p-1),o=1;o<p;++o)a[o-1]=arguments[o];for(f=f.slice(),o=0;d=f[o];++o)hg.call(d,this,a)}else switch(arguments.length){case 1:ug.call(f,this);break;case 2:ug.call(f,this,arguments[1]);break;case 3:ug.call(f,this,arguments[1],arguments[2]);break;default:for(p=arguments.length,a=new Array(p-1),o=1;o<p;++o)a[o-1]=arguments[o];hg.call(f,this,a)}};Qx={on:qp,once:mg,off:Vp,emit:gg};yg={on:Np(qp),once:Np(mg),off:Np(Vp),emit:Np(gg)};Jx=Kx({},yg);e0.exports=_g=function(s){return s==null?Xx(Jx):Kx(Object(s),yg)};_g.methods=Qx});var mc=Ee((wj,l0)=>{function Fo(s){return{prev:null,next:null,data:s}}function Su(s,o,p){var d;return wu!==null?(d=wu,wu=wu.cursor,d.prev=o,d.next=p,d.cursor=s.cursor):d={prev:o,next:p,cursor:s.cursor},s.cursor=d,d}function Tu(s){var o=s.cursor;s.cursor=o.cursor,o.prev=null,o.next=null,o.cursor=wu,wu=o}var wu=null,Ht=function(){this.cursor=null,this.head=null,this.tail=null};Ht.createItem=Fo;Ht.prototype.createItem=Fo;Ht.prototype.updateCursors=function(s,o,p,d){for(var f=this.cursor;f!==null;)f.prev===s&&(f.prev=o),f.next===p&&(f.next=d),f=f.cursor};Ht.prototype.getSize=function(){for(var s=0,o=this.head;o;)s++,o=o.next;return s};Ht.prototype.fromArray=function(s){var o=null;this.head=null;for(var p=0;p<s.length;p++){var d=Fo(s[p]);o!==null?o.next=d:this.head=d,d.prev=o,o=d}return this.tail=o,this};Ht.prototype.toArray=function(){for(var s=this.head,o=[];s;)o.push(s.data),s=s.next;return o};Ht.prototype.toJSON=Ht.prototype.toArray;Ht.prototype.isEmpty=function(){return this.head===null};Ht.prototype.first=function(){return this.head&&this.head.data};Ht.prototype.last=function(){return this.tail&&this.tail.data};Ht.prototype.each=function(s,o){var p;o===void 0&&(o=this);for(var d=Su(this,null,this.head);d.next!==null;)p=d.next,d.next=p.next,s.call(o,p.data,p,this);Tu(this)};Ht.prototype.forEach=Ht.prototype.each;Ht.prototype.eachRight=function(s,o){var p;o===void 0&&(o=this);for(var d=Su(this,this.tail,null);d.prev!==null;)p=d.prev,d.prev=p.prev,s.call(o,p.data,p,this);Tu(this)};Ht.prototype.forEachRight=Ht.prototype.eachRight;Ht.prototype.reduce=function(s,o,p){var d;p===void 0&&(p=this);for(var f=Su(this,null,this.head),a=o;f.next!==null;)d=f.next,f.next=d.next,a=s.call(p,a,d.data,d,this);return Tu(this),a};Ht.prototype.reduceRight=function(s,o,p){var d;p===void 0&&(p=this);for(var f=Su(this,this.tail,null),a=o;f.prev!==null;)d=f.prev,f.prev=d.prev,a=s.call(p,a,d.data,d,this);return Tu(this),a};Ht.prototype.nextUntil=function(s,o,p){if(s!==null){var d;p===void 0&&(p=this);for(var f=Su(this,null,s);f.next!==null&&(d=f.next,f.next=d.next,!o.call(p,d.data,d,this)););Tu(this)}};Ht.prototype.prevUntil=function(s,o,p){if(s!==null){var d;p===void 0&&(p=this);for(var f=Su(this,s,null);f.prev!==null&&(d=f.prev,f.prev=d.prev,!o.call(p,d.data,d,this)););Tu(this)}};Ht.prototype.some=function(s,o){var p=this.head;for(o===void 0&&(o=this);p!==null;){if(s.call(o,p.data,p,this))return!0;p=p.next}return!1};Ht.prototype.map=function(s,o){var p=new Ht,d=this.head;for(o===void 0&&(o=this);d!==null;)p.appendData(s.call(o,d.data,d,this)),d=d.next;return p};Ht.prototype.filter=function(s,o){var p=new Ht,d=this.head;for(o===void 0&&(o=this);d!==null;)s.call(o,d.data,d,this)&&p.appendData(d.data),d=d.next;return p};Ht.prototype.clear=function(){this.head=null,this.tail=null};Ht.prototype.copy=function(){for(var s=new Ht,o=this.head;o!==null;)s.insert(Fo(o.data)),o=o.next;return s};Ht.prototype.prepend=function(s){return this.updateCursors(null,s,this.head,s),this.head!==null?(this.head.prev=s,s.next=this.head):this.tail=s,this.head=s,this};Ht.prototype.prependData=function(s){return this.prepend(Fo(s))};Ht.prototype.append=function(s){return this.insert(s)};Ht.prototype.appendData=function(s){return this.insert(Fo(s))};Ht.prototype.insert=function(s,o){if(o!=null)if(this.updateCursors(o.prev,s,o,s),o.prev===null){if(this.head!==o)throw new Error("before doesn't belong to list");this.head=s,o.prev=s,s.next=o,this.updateCursors(null,s)}else o.prev.next=s,s.prev=o.prev,o.prev=s,s.next=o;else this.updateCursors(this.tail,s,null,s),this.tail!==null?(this.tail.next=s,s.prev=this.tail):this.head=s,this.tail=s;return this};Ht.prototype.insertData=function(s,o){return this.insert(Fo(s),o)};Ht.prototype.remove=function(s){if(this.updateCursors(s,s.prev,s,s.next),s.prev!==null)s.prev.next=s.next;else{if(this.head!==s)throw new Error("item doesn't belong to list");this.head=s.next}if(s.next!==null)s.next.prev=s.prev;else{if(this.tail!==s)throw new Error("item doesn't belong to list");this.tail=s.prev}return s.prev=null,s.next=null,s};Ht.prototype.push=function(s){this.insert(Fo(s))};Ht.prototype.pop=function(){if(this.tail!==null)return this.remove(this.tail)};Ht.prototype.unshift=function(s){this.prepend(Fo(s))};Ht.prototype.shift=function(){if(this.head!==null)return this.remove(this.head)};Ht.prototype.prependList=function(s){return this.insertList(s,this.head)};Ht.prototype.appendList=function(s){return this.insertList(s)};Ht.prototype.insertList=function(s,o){return s.head===null?this:(o!=null?(this.updateCursors(o.prev,s.tail,o,s.head),o.prev!==null?(o.prev.next=s.head,s.head.prev=o.prev):this.head=s.head,o.prev=s.tail,s.tail.next=o):(this.updateCursors(this.tail,s.tail,null,s.head),this.tail!==null?(this.tail.next=s.head,s.head.prev=this.tail):this.head=s.head,this.tail=s.tail),s.head=null,s.tail=null,this)};Ht.prototype.replace=function(s,o){"head"in o?this.insertList(o,s):this.insert(o,s),this.remove(s)};l0.exports=Ht});var $p=Ee((Sj,c0)=>{c0.exports=function(o,p){var d=Object.create(SyntaxError.prototype),f=new Error;return d.name=o,d.message=p,Object.defineProperty(d,"stack",{get:function(){return(f.stack||"").replace(/^(.+\n){1,3}/,o+": "+p+`
`)}}),d}});var Cg=Ee((Tj,p0)=>{var FI=$p(),Tg=100,u0=60,d0="    ";function h0(s,o){function p(re,G){return d.slice(re,G).map(function(te,H){for(var Se=String(re+H+1);Se.length<R;)Se=" "+Se;return Se+" |"+te}).join(`
`)}var d=s.source.split(/\r\n?|\n|\f/),f=s.line,a=s.column,T=Math.max(1,f-o)-1,M=Math.min(f+o,d.length+1),R=Math.max(4,String(M).length)+1,V=0;a+=(d0.length-1)*(d[f-1].substr(0,a-1).match(/\t/g)||[]).length,a>Tg&&(V=a-u0+3,a=u0-2);for(var Y=T;Y<=M;Y++)Y>=0&&Y<d.length&&(d[Y]=d[Y].replace(/\t/g,d0),d[Y]=(V>0&&d[Y].length>V?"\u2026":"")+d[Y].substr(V,Tg-2)+(d[Y].length>V+Tg-1?"\u2026":""));return[p(T,f),new Array(a+R+2).join("-")+"^",p(f,M)].filter(Boolean).join(`
`)}var jI=function(s,o,p,d,f){var a=FI("SyntaxError",s);return a.source=o,a.offset=p,a.line=d,a.column=f,a.sourceFragment=function(T){return h0(a,isNaN(T)?0:T)},Object.defineProperty(a,"formattedMessage",{get:function(){return"Parse error: "+a.message+`
`+h0(a,2)}}),a.parseError={offset:p,line:d,column:f},a};p0.exports=jI});var Kd=Ee((Cj,f0)=>{var kg={EOF:0,Ident:1,Function:2,AtKeyword:3,Hash:4,String:5,BadString:6,Url:7,BadUrl:8,Delim:9,Number:10,Percentage:11,Dimension:12,WhiteSpace:13,CDO:14,CDC:15,Colon:16,Semicolon:17,Comma:18,LeftSquareBracket:19,RightSquareBracket:20,LeftParenthesis:21,RightParenthesis:22,LeftCurlyBracket:23,RightCurlyBracket:24,Comment:25},NI=Object.keys(kg).reduce(function(s,o){return s[kg[o]]=o,s},{});f0.exports={TYPE:kg,NAME:NI}});var Ag=Ee((kj,x0)=>{var qI=0;function kl(s){return s>=48&&s<=57}function VI(s){return kl(s)||s>=65&&s<=70||s>=97&&s<=102}function m0(s){return s>=65&&s<=90}function g0(s){return s>=97&&s<=122}function y0(s){return m0(s)||g0(s)}function _0(s){return s>=128}function Qd(s){return y0(s)||_0(s)||s===95}function WI(s){return Qd(s)||kl(s)||s===45}function v0(s){return s>=0&&s<=8||s===11||s>=14&&s<=31||s===127}function Eg(s){return s===10||s===13||s===12}function b0(s){return Eg(s)||s===32||s===9}function Pg(s,o){return!(s!==92||Eg(o)||o===qI)}function GI(s,o,p){return s===45?Qd(o)||o===45||Pg(o,p):Qd(s)?!0:s===92?Pg(s,o):!1}function UI(s,o,p){return s===43||s===45?kl(o)?2:o===46&&kl(p)?3:0:s===46?kl(o)?2:0:kl(s)?1:0}function ZI(s){return s===65279||s===65534?1:0}var gc=new Array(128);Ga.Eof=128;Ga.WhiteSpace=130;Ga.Digit=131;Ga.NameStart=132;Ga.NonPrintable=133;for(Pa=0;Pa<gc.length;Pa++)switch(!0){case b0(Pa):gc[Pa]=Ga.WhiteSpace;break;case kl(Pa):gc[Pa]=Ga.Digit;break;case Qd(Pa):gc[Pa]=Ga.NameStart;break;case v0(Pa):gc[Pa]=Ga.NonPrintable;break;default:gc[Pa]=Pa||Ga.Eof}var Pa;function Ga(s){return s<128?gc[s]:Ga.NameStart}x0.exports={isDigit:kl,isHexDigit:VI,isUppercaseLetter:m0,isLowercaseLetter:g0,isLetter:y0,isNonAscii:_0,isNameStart:Qd,isName:WI,isNonPrintable:v0,isNewline:Eg,isWhiteSpace:b0,isValidEscape:Pg,isIdentifierStart:GI,isNumberStart:UI,isBOM:ZI,charCodeCategory:Ga}});var Pu=Ee((Pj,P0)=>{var ku=Ag(),Hp=ku.isDigit,w0=ku.isHexDigit,S0=ku.isUppercaseLetter,$I=ku.isName,Ig=ku.isWhiteSpace,T0=ku.isValidEscape;function Cu(s,o){return o<s.length?s.charCodeAt(o):0}function C0(s,o,p){return p===13&&Cu(s,o+1)===10?2:1}function k0(s,o,p){var d=s.charCodeAt(o);return S0(d)&&(d=d|32),d===p}function HI(s,o,p,d){if(p-o!==d.length||o<0||p>s.length)return!1;for(var f=o;f<p;f++){var a=s.charCodeAt(f),T=d.charCodeAt(f-o);if(S0(a)&&(a=a|32),a!==T)return!1}return!0}function YI(s,o){for(;o>=0&&Ig(s.charCodeAt(o));o--);return o+1}function XI(s,o){for(;o<s.length&&Ig(s.charCodeAt(o));o++);return o}function Mg(s,o){for(;o<s.length&&Hp(s.charCodeAt(o));o++);return o}function zg(s,o){if(o+=2,w0(Cu(s,o-1))){for(var p=Math.min(s.length,o+5);o<p&&w0(Cu(s,o));o++);var d=Cu(s,o);Ig(d)&&(o+=C0(s,o,d))}return o}function KI(s,o){for(;o<s.length;o++){var p=s.charCodeAt(o);if(!$I(p)){if(T0(p,Cu(s,o+1))){o=zg(s,o)-1;continue}break}}return o}function QI(s,o){var p=s.charCodeAt(o);if((p===43||p===45)&&(p=s.charCodeAt(o+=1)),Hp(p)&&(o=Mg(s,o+1),p=s.charCodeAt(o)),p===46&&Hp(s.charCodeAt(o+1))&&(p=s.charCodeAt(o+=2),o=Mg(s,o)),k0(s,o,101)){var d=0;p=s.charCodeAt(o+1),(p===45||p===43)&&(d=1,p=s.charCodeAt(o+2)),Hp(p)&&(o=Mg(s,o+1+d+1))}return o}function JI(s,o){for(;o<s.length;o++){var p=s.charCodeAt(o);if(p===41){o++;break}T0(p,Cu(s,o+1))&&(o=zg(s,o))}return o}P0.exports={consumeEscaped:zg,consumeName:KI,consumeNumber:QI,consumeBadUrlRemnants:JI,cmpChar:k0,cmpStr:HI,getNewlineLength:C0,findWhiteSpaceStart:YI,findWhiteSpaceEnd:XI}});var eh=Ee((Ej,z0)=>{var M0=Kd(),Jd=M0.TYPE,ez=M0.NAME,tz=Pu(),iz=tz.cmpStr,E0=Jd.EOF,A0=Jd.WhiteSpace,rz=Jd.Comment,bs=16777215,Eu=24,I0=function(){this.offsetAndType=null,this.balance=null,this.reset()};I0.prototype={reset:function(){this.eof=!1,this.tokenIndex=-1,this.tokenType=0,this.tokenStart=this.firstCharOffset,this.tokenEnd=this.firstCharOffset},lookupType:function(s){return s+=this.tokenIndex,s<this.tokenCount?this.offsetAndType[s]>>Eu:E0},lookupOffset:function(s){return s+=this.tokenIndex,s<this.tokenCount?this.offsetAndType[s-1]&bs:this.source.length},lookupValue:function(s,o){return s+=this.tokenIndex,s<this.tokenCount?iz(this.source,this.offsetAndType[s-1]&bs,this.offsetAndType[s]&bs,o):!1},getTokenStart:function(s){return s===this.tokenIndex?this.tokenStart:s>0?s<this.tokenCount?this.offsetAndType[s-1]&bs:this.offsetAndType[this.tokenCount]&bs:this.firstCharOffset},getRawLength:function(s,o){var p=s,d,f=this.offsetAndType[Math.max(p-1,0)]&bs,a;e:for(;p<this.tokenCount;p++){if(d=this.balance[p],d<s)break e;switch(a=this.offsetAndType[p]>>Eu,o(a,this.source,f)){case 1:break e;case 2:p++;break e;default:this.balance[d]===p&&(p=d),f=this.offsetAndType[p]&bs}}return p-this.tokenIndex},isBalanceEdge:function(s){return this.balance[this.tokenIndex]<s},isDelim:function(s,o){return o?this.lookupType(o)===Jd.Delim&&this.source.charCodeAt(this.lookupOffset(o))===s:this.tokenType===Jd.Delim&&this.source.charCodeAt(this.tokenStart)===s},getTokenValue:function(){return this.source.substring(this.tokenStart,this.tokenEnd)},getTokenLength:function(){return this.tokenEnd-this.tokenStart},substrToCursor:function(s){return this.source.substring(s,this.tokenStart)},skipWS:function(){for(var s=this.tokenIndex,o=0;s<this.tokenCount&&this.offsetAndType[s]>>Eu===A0;s++,o++);o>0&&this.skip(o)},skipSC:function(){for(;this.tokenType===A0||this.tokenType===rz;)this.next()},skip:function(s){var o=this.tokenIndex+s;o<this.tokenCount?(this.tokenIndex=o,this.tokenStart=this.offsetAndType[o-1]&bs,o=this.offsetAndType[o],this.tokenType=o>>Eu,this.tokenEnd=o&bs):(this.tokenIndex=this.tokenCount,this.next())},next:function(){var s=this.tokenIndex+1;s<this.tokenCount?(this.tokenIndex=s,this.tokenStart=this.tokenEnd,s=this.offsetAndType[s],this.tokenType=s>>Eu,this.tokenEnd=s&bs):(this.tokenIndex=this.tokenCount,this.eof=!0,this.tokenType=E0,this.tokenStart=this.tokenEnd=this.source.length)},forEachToken(s){for(var o=0,p=this.firstCharOffset;o<this.tokenCount;o++){var d=p,f=this.offsetAndType[o],a=f&bs,T=f>>Eu;p=a,s(T,d,a,o)}},dump(){var s=new Array(this.tokenCount);return this.forEachToken((o,p,d,f)=>{s[f]={idx:f,type:ez[o],chunk:this.source.substring(p,d),balance:this.balance[f]}}),s}};z0.exports=I0});var Yp=Ee((Aj,L0)=>{function nz(s){return s}function az(s){return s.min===0&&s.max===0?"*":s.min===0&&s.max===1?"?":s.min===1&&s.max===0?s.comma?"#":"+":s.min===1&&s.max===1?"":(s.comma?"#":"")+(s.min===s.max?"{"+s.min+"}":"{"+s.min+","+(s.max!==0?s.max:"")+"}")}function sz(s){switch(s.type){case"Range":return" ["+(s.min===null?"-\u221E":s.min)+","+(s.max===null?"\u221E":s.max)+"]";default:throw new Error("Unknown node type `"+s.type+"`")}}function oz(s,o,p,d){var f=s.combinator===" "||d?s.combinator:" "+s.combinator+" ",a=s.terms.map(function(T){return Lg(T,o,p,d)}).join(f);return(s.explicit||p)&&(a=(d||a[0]===","?"[":"[ ")+a+(d?"]":" ]")),a}function Lg(s,o,p,d){var f;switch(s.type){case"Group":f=oz(s,o,p,d)+(s.disallowEmpty?"!":"");break;case"Multiplier":return Lg(s.term,o,p,d)+o(az(s),s);case"Type":f="<"+s.name+(s.opts?o(sz(s.opts),s.opts):"")+">";break;case"Property":f="<'"+s.name+"'>";break;case"Keyword":f=s.name;break;case"AtKeyword":f="@"+s.name;break;case"Function":f=s.name+"(";break;case"String":case"Token":f=s.value;break;case"Comma":f=",";break;default:throw new Error("Unknown node type `"+s.type+"`")}return o(f,s)}L0.exports=function(s,o){var p=nz,d=!1,f=!1;return typeof o=="function"?p=o:o&&(d=!!o.forceBraces,f=!!o.compact,typeof o.decorate=="function"&&(p=o.decorate)),Lg(s,p,d,f)}});var Dg=Ee((Mj,R0)=>{var O0=$p(),lz=Yp(),D0={offset:0,line:1,column:1};function cz(s,o){let p=s.tokens,d=s.longestMatch,f=d<p.length&&p[d].node||null,a=f!==o?f:null,T=0,M=0,R=0,V="",Y,re;for(let G=0;G<p.length;G++){let te=p[G].value;G===d&&(M=te.length,T=V.length),a!==null&&p[G].node===a&&(G<=d?R++:R=0),V+=te}return d===p.length||R>1?(Y=Xp(a||o,"end")||th(D0,V),re=th(Y)):(Y=Xp(a,"start")||th(Xp(o,"start")||D0,V.slice(0,T)),re=Xp(a,"end")||th(Y,V.substr(T,M))),{css:V,mismatchOffset:T,mismatchLength:M,start:Y,end:re}}function Xp(s,o){let p=s&&s.loc&&s.loc[o];return p?"line"in p?th(p):p:null}function th({offset:s,line:o,column:p},d){let f={offset:s,line:o,column:p};if(d){let a=d.split(/\n|\r\n?|\f/);f.offset+=d.length,f.line+=a.length-1,f.column=a.length===1?f.column+d.length:a.pop().length+1}return f}var uz=function(s,o){let p=O0("SyntaxReferenceError",s+(o?" `"+o+"`":""));return p.reference=o,p},dz=function(s,o,p,d){let f=O0("SyntaxMatchError",s),{css:a,mismatchOffset:T,mismatchLength:M,start:R,end:V}=cz(d,p);return f.rawMessage=s,f.syntax=o?lz(o):"<generic>",f.css=a,f.mismatchOffset=T,f.mismatchLength=M,f.message=s+`
  syntax: `+f.syntax+`
   value: `+(a||"<empty string>")+`
  --------`+new Array(f.mismatchOffset+1).join("-")+"^",Object.assign(f,R),f.loc={source:p&&p.loc&&p.loc.source||"<unknown>",start:R,end:V},f};R0.exports={SyntaxReferenceError:uz,SyntaxMatchError:dz}});var Jp=Ee((Ij,B0)=>{var Kp=Object.prototype.hasOwnProperty,Au=Object.create(null),Mu=Object.create(null),Qp=45;function Og(s,o){return o=o||0,s.length-o>=2&&s.charCodeAt(o)===Qp&&s.charCodeAt(o+1)===Qp}function Rg(s,o){if(o=o||0,s.length-o>=3&&s.charCodeAt(o)===Qp&&s.charCodeAt(o+1)!==Qp){var p=s.indexOf("-",o+2);if(p!==-1)return s.substring(o,p+1)}return""}function hz(s){if(Kp.call(Au,s))return Au[s];var o=s.toLowerCase();if(Kp.call(Au,o))return Au[s]=Au[o];var p=Og(o,0),d=p?"":Rg(o,0);return Au[s]=Object.freeze({basename:o.substr(d.length),name:o,vendor:d,prefix:d,custom:p})}function pz(s){if(Kp.call(Mu,s))return Mu[s];var o=s,p=s[0];p==="/"?p=s[1]==="/"?"//":"/":p!=="_"&&p!=="*"&&p!=="$"&&p!=="#"&&p!=="+"&&p!=="&"&&(p="");var d=Og(o,p.length);if(!d&&(o=o.toLowerCase(),Kp.call(Mu,o)))return Mu[s]=Mu[o];var f=d?"":Rg(o,p.length),a=o.substr(0,p.length+f.length);return Mu[s]=Object.freeze({basename:o.substr(a.length),name:o.substr(p.length),hack:p,vendor:f,prefix:a,custom:d})}B0.exports={keyword:hz,property:pz,isCustomProperty:Og,vendorPrefix:Rg}});var Bg=Ee((zj,F0)=>{var fz=16384,mz=typeof Uint32Array!="undefined"?Uint32Array:Array;F0.exports=function(o,p){return o===null||o.length<p?new mz(Math.max(p+1024,fz)):o}});var yt=Ee((Lj,G0)=>{var gz=eh(),j0=Bg(),qg=Kd(),Xt=qg.TYPE,jo=Ag(),N0=jo.isNewline,yz=jo.isName,ef=jo.isValidEscape,Fg=jo.isNumberStart,jg=jo.isIdentifierStart,Ua=jo.charCodeCategory,_z=jo.isBOM,No=Pu(),vz=No.cmpStr,q0=No.getNewlineLength,tf=No.findWhiteSpaceEnd,V0=No.consumeEscaped,rf=No.consumeName,bz=No.consumeNumber,Ng=No.consumeBadUrlRemnants,W0=16777215,Iu=24;function nf(s,o){function p(Ce){return Ce<M?s.charCodeAt(Ce):0}function d(){if(G=bz(s,G),jg(p(G),p(G+1),p(G+2))){ye=Xt.Dimension,G=rf(s,G);return}if(p(G)===37){ye=Xt.Percentage,G++;return}ye=Xt.Number}function f(){let Ce=G;if(G=rf(s,G),vz(s,Ce,G,"url")&&p(G)===40){if(G=tf(s,G+1),p(G)===34||p(G)===39){ye=Xt.Function,G=Ce+4;return}T();return}if(p(G)===40){ye=Xt.Function,G++;return}ye=Xt.Ident}function a(Ce){for(Ce||(Ce=p(G++)),ye=Xt.String;G<s.length;G++){var Ye=s.charCodeAt(G);switch(Ua(Ye)){case Ce:G++;return;case Ua.Eof:return;case Ua.WhiteSpace:if(N0(Ye)){G+=q0(s,G,Ye),ye=Xt.BadString;return}break;case 92:if(G===s.length-1)break;var rt=p(G+1);N0(rt)?G+=q0(s,G+1,rt):ef(Ye,rt)&&(G=V0(s,G)-1);break}}}function T(){for(ye=Xt.Url,G=tf(s,G);G<s.length;G++){var Ce=s.charCodeAt(G);switch(Ua(Ce)){case 41:G++;return;case Ua.Eof:return;case Ua.WhiteSpace:if(G=tf(s,G),p(G)===41||G>=s.length){G<s.length&&G++;return}G=Ng(s,G),ye=Xt.BadUrl;return;case 34:case 39:case 40:case Ua.NonPrintable:G=Ng(s,G),ye=Xt.BadUrl;return;case 92:if(ef(Ce,p(G+1))){G=V0(s,G)-1;break}G=Ng(s,G),ye=Xt.BadUrl;return}}}o||(o=new gz),s=String(s||"");for(var M=s.length,R=j0(o.offsetAndType,M+1),V=j0(o.balance,M+1),Y=0,re=_z(p(0)),G=re,te=0,H=0,Se=0;G<M;){var je=s.charCodeAt(G),ye=0;switch(V[Y]=M,Ua(je)){case Ua.WhiteSpace:ye=Xt.WhiteSpace,G=tf(s,G+1);break;case 34:a();break;case 35:yz(p(G+1))||ef(p(G+1),p(G+2))?(ye=Xt.Hash,G=rf(s,G+1)):(ye=Xt.Delim,G++);break;case 39:a();break;case 40:ye=Xt.LeftParenthesis,G++;break;case 41:ye=Xt.RightParenthesis,G++;break;case 43:Fg(je,p(G+1),p(G+2))?d():(ye=Xt.Delim,G++);break;case 44:ye=Xt.Comma,G++;break;case 45:Fg(je,p(G+1),p(G+2))?d():p(G+1)===45&&p(G+2)===62?(ye=Xt.CDC,G=G+3):jg(je,p(G+1),p(G+2))?f():(ye=Xt.Delim,G++);break;case 46:Fg(je,p(G+1),p(G+2))?d():(ye=Xt.Delim,G++);break;case 47:p(G+1)===42?(ye=Xt.Comment,G=s.indexOf("*/",G+2)+2,G===1&&(G=s.length)):(ye=Xt.Delim,G++);break;case 58:ye=Xt.Colon,G++;break;case 59:ye=Xt.Semicolon,G++;break;case 60:p(G+1)===33&&p(G+2)===45&&p(G+3)===45?(ye=Xt.CDO,G=G+4):(ye=Xt.Delim,G++);break;case 64:jg(p(G+1),p(G+2),p(G+3))?(ye=Xt.AtKeyword,G=rf(s,G+1)):(ye=Xt.Delim,G++);break;case 91:ye=Xt.LeftSquareBracket,G++;break;case 92:ef(je,p(G+1))?f():(ye=Xt.Delim,G++);break;case 93:ye=Xt.RightSquareBracket,G++;break;case 123:ye=Xt.LeftCurlyBracket,G++;break;case 125:ye=Xt.RightCurlyBracket,G++;break;case Ua.Digit:d();break;case Ua.NameStart:f();break;case Ua.Eof:break;default:ye=Xt.Delim,G++}switch(ye){case te:for(Se=H&W0,H=V[Se],te=H>>Iu,V[Y]=Se,V[Se++]=Y;Se<Y;Se++)V[Se]===M&&(V[Se]=Y);break;case Xt.LeftParenthesis:case Xt.Function:V[Y]=H,te=Xt.RightParenthesis,H=te<<Iu|Y;break;case Xt.LeftSquareBracket:V[Y]=H,te=Xt.RightSquareBracket,H=te<<Iu|Y;break;case Xt.LeftCurlyBracket:V[Y]=H,te=Xt.RightCurlyBracket,H=te<<Iu|Y;break}R[Y++]=ye<<Iu|G}for(R[Y]=Xt.EOF<<Iu|G,V[Y]=M,V[M]=M;H!==0;)Se=H&W0,H=V[Se],V[Se]=M;return o.source=s,o.firstCharOffset=re,o.offsetAndType=R,o.tokenCount=Y,o.balance=V,o.reset(),o.next(),o}Object.keys(qg).forEach(function(s){nf[s]=qg[s]});Object.keys(jo).forEach(function(s){nf[s]=jo[s]});Object.keys(No).forEach(function(s){nf[s]=No[s]});G0.exports=nf});var $0=Ee((Dj,Z0)=>{var U0=yt().isDigit,Vg=yt().cmpChar,Lu=yt().TYPE,xz=Lu.Delim,wz=Lu.WhiteSpace,Sz=Lu.Comment,af=Lu.Ident,Ug=Lu.Number,Tz=Lu.Dimension,rh=43,Ks=45,Wg=110,zu=!0,Cz=!1;function Zg(s,o){return s!==null&&s.type===xz&&s.value.charCodeAt(0)===o}function ih(s,o,p){for(;s!==null&&(s.type===wz||s.type===Sz);)s=p(++o);return o}function Pl(s,o,p,d){if(!s)return 0;var f=s.value.charCodeAt(o);if(f===rh||f===Ks){if(p)return 0;o++}for(;o<s.value.length;o++)if(!U0(s.value.charCodeAt(o)))return 0;return d+1}function Gg(s,o,p){var d=!1,f=ih(s,o,p);if(s=p(f),s===null)return o;if(s.type!==Ug)if(Zg(s,rh)||Zg(s,Ks)){if(d=!0,f=ih(p(++f),f,p),s=p(f),s===null&&s.type!==Ug)return 0}else return o;if(!d){var a=s.value.charCodeAt(0);if(a!==rh&&a!==Ks)return 0}return Pl(s,d?0:1,d,f)}Z0.exports=function(o,p){var d=0;if(!o)return 0;if(o.type===Ug)return Pl(o,0,Cz,d);if(o.type===af&&o.value.charCodeAt(0)===Ks){if(!Vg(o.value,1,Wg))return 0;switch(o.value.length){case 2:return Gg(p(++d),d,p);case 3:return o.value.charCodeAt(2)!==Ks?0:(d=ih(p(++d),d,p),o=p(d),Pl(o,0,zu,d));default:return o.value.charCodeAt(2)!==Ks?0:Pl(o,3,zu,d)}}else if(o.type===af||Zg(o,rh)&&p(d+1).type===af){if(o.type!==af&&(o=p(++d)),o===null||!Vg(o.value,0,Wg))return 0;switch(o.value.length){case 1:return Gg(p(++d),d,p);case 2:return o.value.charCodeAt(1)!==Ks?0:(d=ih(p(++d),d,p),o=p(d),Pl(o,0,zu,d));default:return o.value.charCodeAt(1)!==Ks?0:Pl(o,2,zu,d)}}else if(o.type===Tz){for(var f=o.value.charCodeAt(0),a=f===rh||f===Ks?1:0,T=a;T<o.value.length&&U0(o.value.charCodeAt(T));T++);return T===a||!Vg(o.value,T,Wg)?0:T+1===o.value.length?Gg(p(++d),d,p):o.value.charCodeAt(T+1)!==Ks?0:T+2===o.value.length?(d=ih(p(++d),d,p),o=p(d),Pl(o,0,zu,d)):Pl(o,T+2,zu,d)}return 0}});var e1=Ee((Oj,J0)=>{var kz=yt().isHexDigit,Pz=yt().cmpChar,of=yt().TYPE,H0=of.Ident,Ez=of.Delim,Y0=of.Number,X0=of.Dimension,$g=43,K0=45,Q0=63,Az=117;function Yg(s,o){return s!==null&&s.type===Ez&&s.value.charCodeAt(0)===o}function Hg(s,o){return s.value.charCodeAt(0)===o}function nh(s,o,p){for(var d=o,f=0;d<s.value.length;d++){var a=s.value.charCodeAt(d);if(a===K0&&p&&f!==0)return nh(s,o+f+1,!1)>0?6:0;if(!kz(a)||++f>6)return 0}return f}function sf(s,o,p){if(!s)return 0;for(;Yg(p(o),Q0);){if(++s>6)return 0;o++}return o}J0.exports=function(o,p){var d=0;if(o===null||o.type!==H0||!Pz(o.value,0,Az)||(o=p(++d),o===null))return 0;if(Yg(o,$g))return o=p(++d),o===null?0:o.type===H0?sf(nh(o,0,!0),++d,p):Yg(o,Q0)?sf(1,++d,p):0;if(o.type===Y0){if(!Hg(o,$g))return 0;var f=nh(o,1,!0);return f===0?0:(o=p(++d),o===null?d:o.type===X0||o.type===Y0?!Hg(o,K0)||!nh(o,1,!1)?0:d+1:sf(f,d,p))}return o.type===X0&&Hg(o,$g)?sf(nh(o,1,!0),++d,p):0}});var l1=Ee((Rj,o1)=>{var Du=yt(),Mz=Du.isIdentifierStart,Iz=Du.isHexDigit,i1=Du.isDigit,zz=Du.cmpStr,r1=Du.consumeNumber,Dt=Du.TYPE,Lz=$0(),Dz=e1(),Oz=["unset","initial","inherit"],Rz=["calc(","-moz-calc(","-webkit-calc("],Bz={px:!0,mm:!0,cm:!0,in:!0,pt:!0,pc:!0,q:!0,em:!0,ex:!0,ch:!0,rem:!0,vh:!0,vw:!0,vmin:!0,vmax:!0,vm:!0},Fz={deg:!0,grad:!0,rad:!0,turn:!0},jz={s:!0,ms:!0},Nz={hz:!0,khz:!0},qz={dpi:!0,dpcm:!0,dppx:!0,x:!0},Vz={fr:!0},Wz={db:!0},Gz={st:!0};function ah(s,o){return o<s.length?s.charCodeAt(o):0}function Xg(s,o){return zz(s,0,s.length,o)}function n1(s,o){for(var p=0;p<o.length;p++)if(Xg(s,o[p]))return!0;return!1}function a1(s,o){return o!==s.length-2?!1:s.charCodeAt(o)===92&&i1(s.charCodeAt(o+1))}function lf(s,o,p){if(s&&s.type==="Range"){var d=Number(p!==void 0&&p!==o.length?o.substr(0,p):o);if(isNaN(d)||s.min!==null&&d<s.min||s.max!==null&&d>s.max)return!0}return!1}function s1(s,o){var p=s.index,d=0;do if(d++,s.balance<=p)break;while(s=o(d));return d}function Za(s){return function(o,p,d){return o===null?0:o.type===Dt.Function&&n1(o.value,Rz)?s1(o,p):s(o,p,d)}}function er(s){return function(o){return o===null||o.type!==s?0:1}}function Uz(s){return s=s+"(",function(o,p){return o!==null&&Xg(o.value,s)?s1(o,p):0}}function Zz(s){if(s===null||s.type!==Dt.Ident)return 0;var o=s.value.toLowerCase();return n1(o,Oz)||Xg(o,"default")?0:1}function $z(s){return s===null||s.type!==Dt.Ident||ah(s.value,0)!==45||ah(s.value,1)!==45?0:1}function Hz(s){if(s===null||s.type!==Dt.Hash)return 0;var o=s.value.length;if(o!==4&&o!==5&&o!==7&&o!==9)return 0;for(var p=1;p<o;p++)if(!Iz(s.value.charCodeAt(p)))return 0;return 1}function Yz(s){return s===null||s.type!==Dt.Hash||!Mz(ah(s.value,1),ah(s.value,2),ah(s.value,3))?0:1}function Xz(s,o){if(!s)return 0;var p=0,d=0,f=s.index;e:do{switch(s.type){case Dt.BadString:case Dt.BadUrl:break e;case Dt.RightCurlyBracket:case Dt.RightParenthesis:case Dt.RightSquareBracket:if(s.balance>s.index||s.balance<f)break e;d--;break;case Dt.Semicolon:if(d===0)break e;break;case Dt.Delim:if(s.value==="!"&&d===0)break e;break;case Dt.Function:case Dt.LeftParenthesis:case Dt.LeftSquareBracket:case Dt.LeftCurlyBracket:d++;break}if(p++,s.balance<=f)break}while(s=o(p));return p}function Kz(s,o){if(!s)return 0;var p=s.index,d=0;e:do{switch(s.type){case Dt.BadString:case Dt.BadUrl:break e;case Dt.RightCurlyBracket:case Dt.RightParenthesis:case Dt.RightSquareBracket:if(s.balance>s.index||s.balance<p)break e;break}if(d++,s.balance<=p)break}while(s=o(d));return d}function qo(s){return function(o,p,d){if(o===null||o.type!==Dt.Dimension)return 0;var f=r1(o.value,0);if(s!==null){var a=o.value.indexOf("\\",f),T=a===-1||!a1(o.value,a)?o.value.substr(f):o.value.substring(f,a);if(s.hasOwnProperty(T.toLowerCase())===!1)return 0}return lf(d,o.value,f)?0:1}}function Qz(s,o,p){return s===null||s.type!==Dt.Percentage||lf(p,s.value,s.value.length-1)?0:1}function t1(s){return typeof s!="function"&&(s=function(){return 0}),function(o,p,d){return o!==null&&o.type===Dt.Number&&Number(o.value)===0?1:s(o,p,d)}}function Jz(s,o,p){if(s===null)return 0;var d=r1(s.value,0),f=d===s.value.length;return!f&&!a1(s.value,d)||lf(p,s.value,d)?0:1}function eL(s,o,p){if(s===null||s.type!==Dt.Number)return 0;for(var d=s.value.charCodeAt(0)===43||s.value.charCodeAt(0)===45?1:0;d<s.value.length;d++)if(!i1(s.value.charCodeAt(d)))return 0;return lf(p,s.value,d)?0:1}o1.exports={"ident-token":er(Dt.Ident),"function-token":er(Dt.Function),"at-keyword-token":er(Dt.AtKeyword),"hash-token":er(Dt.Hash),"string-token":er(Dt.String),"bad-string-token":er(Dt.BadString),"url-token":er(Dt.Url),"bad-url-token":er(Dt.BadUrl),"delim-token":er(Dt.Delim),"number-token":er(Dt.Number),"percentage-token":er(Dt.Percentage),"dimension-token":er(Dt.Dimension),"whitespace-token":er(Dt.WhiteSpace),"CDO-token":er(Dt.CDO),"CDC-token":er(Dt.CDC),"colon-token":er(Dt.Colon),"semicolon-token":er(Dt.Semicolon),"comma-token":er(Dt.Comma),"[-token":er(Dt.LeftSquareBracket),"]-token":er(Dt.RightSquareBracket),"(-token":er(Dt.LeftParenthesis),")-token":er(Dt.RightParenthesis),"{-token":er(Dt.LeftCurlyBracket),"}-token":er(Dt.RightCurlyBracket),string:er(Dt.String),ident:er(Dt.Ident),"custom-ident":Zz,"custom-property-name":$z,"hex-color":Hz,"id-selector":Yz,"an-plus-b":Lz,urange:Dz,"declaration-value":Xz,"any-value":Kz,dimension:Za(qo(null)),angle:Za(qo(Fz)),decibel:Za(qo(Wz)),frequency:Za(qo(Nz)),flex:Za(qo(Vz)),length:Za(t1(qo(Bz))),resolution:Za(qo(qz)),semitones:Za(qo(Gz)),time:Za(qo(jz)),percentage:Za(Qz),zero:t1(),number:Za(Jz),integer:Za(eL),"-ms-legacy-expression":Uz("expression")}});var Kg=Ee((Bj,c1)=>{var tL=$p();c1.exports=function(o,p,d){var f=tL("SyntaxError",o);return f.input=p,f.offset=d,f.rawMessage=o,f.message=f.rawMessage+`
  `+f.input+`
--`+new Array((f.offset||f.input.length)+1).join("-")+"^",f}});var h1=Ee((Fj,d1)=>{var iL=Kg(),rL=9,nL=10,aL=12,sL=13,oL=32,u1=function(s){this.str=s,this.pos=0};u1.prototype={charCodeAt:function(s){return s<this.str.length?this.str.charCodeAt(s):0},charCode:function(){return this.charCodeAt(this.pos)},nextCharCode:function(){return this.charCodeAt(this.pos+1)},nextNonWsCode:function(s){return this.charCodeAt(this.findWsEnd(s))},findWsEnd:function(s){for(;s<this.str.length;s++){var o=this.str.charCodeAt(s);if(o!==sL&&o!==nL&&o!==aL&&o!==oL&&o!==rL)break}return s},substringToPos:function(s){return this.str.substring(this.pos,this.pos=s)},eat:function(s){this.charCode()!==s&&this.error("Expect `"+String.fromCharCode(s)+"`"),this.pos++},peek:function(){return this.pos<this.str.length?this.str.charAt(this.pos++):""},error:function(s){throw new iL(s,this.str,this.pos)}};d1.exports=u1});var mf=Ee((jj,A1)=>{var lL=h1(),cL=9,uL=10,dL=12,hL=13,pL=32,b1=33,x1=35,p1=38,cf=39,w1=40,fL=41,S1=42,T1=43,ey=44,f1=45,ty=60,C1=62,k1=63,mL=64,pf=91,iy=93,uf=123,m1=124,g1=125,y1=8734,Jg=gL(function(s){return/[a-zA-Z0-9\-]/.test(s)}),_1={" ":1,"&&":2,"||":3,"|":4};function gL(s){for(var o=typeof Uint32Array=="function"?new Uint32Array(128):new Array(128),p=0;p<128;p++)o[p]=s(String.fromCharCode(p))?1:0;return o}function df(s){return s.substringToPos(s.findWsEnd(s.pos))}function ff(s){for(var o=s.pos;o<s.str.length;o++){var p=s.str.charCodeAt(o);if(p>=128||Jg[p]===0)break}return s.pos===o&&s.error("Expect a keyword"),s.substringToPos(o)}function hf(s){for(var o=s.pos;o<s.str.length;o++){var p=s.str.charCodeAt(o);if(p<48||p>57)break}return s.pos===o&&s.error("Expect a number"),s.substringToPos(o)}function yL(s){var o=s.str.indexOf("'",s.pos+1);return o===-1&&(s.pos=s.str.length,s.error("Expect an apostrophe")),s.substringToPos(o+1)}function v1(s){var o=null,p=null;return s.eat(uf),o=hf(s),s.charCode()===ey?(s.pos++,s.charCode()!==g1&&(p=hf(s))):p=o,s.eat(g1),{min:Number(o),max:p?Number(p):0}}function _L(s){var o=null,p=!1;switch(s.charCode()){case S1:s.pos++,o={min:0,max:0};break;case T1:s.pos++,o={min:1,max:0};break;case k1:s.pos++,o={min:0,max:1};break;case x1:s.pos++,p=!0,s.charCode()===uf?o=v1(s):o={min:1,max:0};break;case uf:o=v1(s);break;default:return null}return{type:"Multiplier",comma:p,min:o.min,max:o.max,term:null}}function sh(s,o){var p=_L(s);return p!==null?(p.term=o,p):o}function Qg(s){var o=s.peek();return o===""?null:{type:"Token",value:o}}function vL(s){var o;return s.eat(ty),s.eat(cf),o=ff(s),s.eat(cf),s.eat(C1),sh(s,{type:"Property",name:o})}function bL(s){var o=null,p=null,d=1;return s.eat(pf),s.charCode()===f1&&(s.peek(),d=-1),d==-1&&s.charCode()===y1?s.peek():o=d*Number(hf(s)),df(s),s.eat(ey),df(s),s.charCode()===y1?s.peek():(d=1,s.charCode()===f1&&(s.peek(),d=-1),p=d*Number(hf(s))),s.eat(iy),o===null&&p===null?null:{type:"Range",min:o,max:p}}function xL(s){var o,p=null;return s.eat(ty),o=ff(s),s.charCode()===w1&&s.nextCharCode()===fL&&(s.pos+=2,o+="()"),s.charCodeAt(s.findWsEnd(s.pos))===pf&&(df(s),p=bL(s)),s.eat(C1),sh(s,{type:"Type",name:o,opts:p})}function wL(s){var o;return o=ff(s),s.charCode()===w1?(s.pos++,{type:"Function",name:o}):sh(s,{type:"Keyword",name:o})}function SL(s,o){function p(M,R){return{type:"Group",terms:M,combinator:R,disallowEmpty:!1,explicit:!1}}for(o=Object.keys(o).sort(function(M,R){return _1[M]-_1[R]});o.length>0;){for(var d=o.shift(),f=0,a=0;f<s.length;f++){var T=s[f];T.type==="Combinator"&&(T.value===d?(a===-1&&(a=f-1),s.splice(f,1),f--):(a!==-1&&f-a>1&&(s.splice(a,f-a,p(s.slice(a,f),d)),f=a+1),a=-1))}a!==-1&&o.length&&s.splice(a,f-a,p(s.slice(a,f),d))}return d}function P1(s){for(var o=[],p={},d,f=null,a=s.pos;d=CL(s);)d.type!=="Spaces"&&(d.type==="Combinator"?((f===null||f.type==="Combinator")&&(s.pos=a,s.error("Unexpected combinator")),p[d.value]=!0):f!==null&&f.type!=="Combinator"&&(p[" "]=!0,o.push({type:"Combinator",value:" "})),o.push(d),f=d,a=s.pos);return f!==null&&f.type==="Combinator"&&(s.pos-=a,s.error("Unexpected combinator")),{type:"Group",terms:o,combinator:SL(o,p)||" ",disallowEmpty:!1,explicit:!1}}function TL(s){var o;return s.eat(pf),o=P1(s),s.eat(iy),o.explicit=!0,s.charCode()===b1&&(s.pos++,o.disallowEmpty=!0),o}function CL(s){var o=s.charCode();if(o<128&&Jg[o]===1)return wL(s);switch(o){case iy:break;case pf:return sh(s,TL(s));case ty:return s.nextCharCode()===cf?vL(s):xL(s);case m1:return{type:"Combinator",value:s.substringToPos(s.nextCharCode()===m1?s.pos+2:s.pos+1)};case p1:return s.pos++,s.eat(p1),{type:"Combinator",value:"&&"};case ey:return s.pos++,{type:"Comma"};case cf:return sh(s,{type:"String",value:yL(s)});case pL:case cL:case uL:case hL:case dL:return{type:"Spaces",value:df(s)};case mL:return o=s.nextCharCode(),o<128&&Jg[o]===1?(s.pos++,{type:"AtKeyword",name:ff(s)}):Qg(s);case S1:case T1:case k1:case x1:case b1:break;case uf:if(o=s.nextCharCode(),o<48||o>57)return Qg(s);break;default:return Qg(s)}}function E1(s){var o=new lL(s),p=P1(o);return o.pos!==s.length&&o.error("Unexpected input"),p.terms.length===1&&p.terms[0].type==="Group"&&(p=p.terms[0]),p}E1("[a&&<b>#|<'c'>*||e() f{2} /,(% g#{1,2} h{2,})]!");A1.exports=E1});var ry=Ee((Nj,I1)=>{var oh=function(){};function M1(s){return typeof s=="function"?s:oh}I1.exports=function(s,o,p){function d(T){switch(f.call(p,T),T.type){case"Group":T.terms.forEach(d);break;case"Multiplier":d(T.term);break;case"Type":case"Property":case"Keyword":case"AtKeyword":case"Function":case"String":case"Token":case"Comma":break;default:throw new Error("Unknown type: "+T.type)}a.call(p,T)}var f=oh,a=oh;if(typeof o=="function"?f=o:o&&(f=M1(o.enter),a=M1(o.leave)),f===oh&&a===oh)throw new Error("Neither `enter` nor `leave` walker handler is set or both aren't a function");d(s,p)}});var D1=Ee((qj,L1)=>{var kL=yt(),PL=eh(),Vo=new PL,EL={decorator:function(s){var o=null,p={len:0,node:null},d=[p],f="";return{children:s.children,node:function(a){var T=o;o=a,s.node.call(this,a),o=T},chunk:function(a){f+=a,p.node!==o?d.push({len:a.length,node:o}):p.len+=a.length},result:function(){return z1(f,d)}}}};function z1(s,o){var p=[],d=0,f=0,a=o?o[f].node:null;for(kL(s,Vo);!Vo.eof;){if(o)for(;f<o.length&&d+o[f].len<=Vo.tokenStart;)d+=o[f++].len,a=o[f].node;p.push({type:Vo.tokenType,value:Vo.getTokenValue(),index:Vo.tokenIndex,balance:Vo.balance[Vo.tokenIndex],node:a}),Vo.next()}return p}L1.exports=function(s,o){return typeof s=="string"?z1(s,null):o.generate(s,EL)}});var oy=Ee((Vj,B1)=>{var AL=mf(),Er={type:"Match"},Hn={type:"Mismatch"},ay={type:"DisallowEmpty"},ML=40,IL=41;function An(s,o,p){return o===Er&&p===Hn||s===Er&&o===Er&&p===Er?s:(s.type==="If"&&s.else===Hn&&o===Er&&(o=s.then,s=s.match),{type:"If",match:s,then:o,else:p})}function R1(s){return s.length>2&&s.charCodeAt(s.length-2)===ML&&s.charCodeAt(s.length-1)===IL}function O1(s){return s.type==="Keyword"||s.type==="AtKeyword"||s.type==="Function"||s.type==="Type"&&R1(s.name)}function ny(s,o,p){switch(s){case" ":for(var R=Er,d=o.length-1;d>=0;d--){var f=o[d];R=An(f,R,Hn)}return R;case"|":for(var R=Hn,a=null,d=o.length-1;d>=0;d--){var f=o[d];if(O1(f)&&(a===null&&d>0&&O1(o[d-1])&&(a=Object.create(null),R=An({type:"Enum",map:a},Er,R)),a!==null)){var T=(R1(f.name)?f.name.slice(0,-1):f.name).toLowerCase();if(!(T in a)){a[T]=f;continue}}a=null,R=An(f,Er,R)}return R;case"&&":if(o.length>5)return{type:"MatchOnce",terms:o,all:!0};for(var R=Hn,d=o.length-1;d>=0;d--){var f=o[d],M;o.length>1?M=ny(s,o.filter(function(re){return re!==f}),!1):M=Er,R=An(f,M,R)}return R;case"||":if(o.length>5)return{type:"MatchOnce",terms:o,all:!1};for(var R=p?Er:Hn,d=o.length-1;d>=0;d--){var f=o[d],M;o.length>1?M=ny(s,o.filter(function(G){return G!==f}),!0):M=Er,R=An(f,M,R)}return R}}function zL(s){var o=Er,p=sy(s.term);if(s.max===0)p=An(p,ay,Hn),o=An(p,null,Hn),o.then=An(Er,Er,o),s.comma&&(o.then.else=An({type:"Comma",syntax:s},o,Hn));else for(var d=s.min||1;d<=s.max;d++)s.comma&&o!==Er&&(o=An({type:"Comma",syntax:s},o,Hn)),o=An(p,An(Er,Er,o),Hn);if(s.min===0)o=An(Er,Er,o);else for(var d=0;d<s.min-1;d++)s.comma&&o!==Er&&(o=An({type:"Comma",syntax:s},o,Hn)),o=An(p,o,Hn);return o}function sy(s){if(typeof s=="function")return{type:"Generic",fn:s};switch(s.type){case"Group":var o=ny(s.combinator,s.terms.map(sy),!1);return s.disallowEmpty&&(o=An(o,ay,Hn)),o;case"Multiplier":return zL(s);case"Type":case"Property":return{type:s.type,name:s.name,syntax:s};case"Keyword":return{type:s.type,name:s.name.toLowerCase(),syntax:s};case"AtKeyword":return{type:s.type,name:"@"+s.name.toLowerCase(),syntax:s};case"Function":return{type:s.type,name:s.name.toLowerCase()+"(",syntax:s};case"String":return s.value.length===3?{type:"Token",value:s.value.charAt(1),syntax:s}:{type:s.type,value:s.value.substr(1,s.value.length-2).replace(/\\'/g,"'"),syntax:s};case"Token":return{type:s.type,value:s.value,syntax:s};case"Comma":return{type:s.type,syntax:s};default:throw new Error("Unknown node type:",s.type)}}B1.exports={MATCH:Er,MISMATCH:Hn,DISALLOW_EMPTY:ay,buildMatchGraph:function(s,o){return typeof s=="string"&&(s=AL(s)),{type:"MatchGraph",match:sy(s),syntax:o||null,source:s}}}});var H1=Ee((Wj,$1)=>{var F1=Object.prototype.hasOwnProperty,cy=oy(),xs=cy.MATCH,oa=cy.MISMATCH,LL=cy.DISALLOW_EMPTY,la=Kd().TYPE,W1=0,DL=1,gf=2,uy=3,j1="Match",OL="Mismatch",RL="Maximum iteration number exceeded (please fill an issue on https://github.com/csstree/csstree/issues)",N1=15e3,G1=0;function U1(s){for(var o=null,p=null,d=s;d!==null;)p=d.prev,d.prev=o,o=d,d=p;return o}function ly(s,o){if(s.length!==o.length)return!1;for(var p=0;p<s.length;p++){var d=s.charCodeAt(p),f=o.charCodeAt(p);if(d>=65&&d<=90&&(d=d|32),d!==f)return!1}return!0}function BL(s){return s.type!==la.Delim?!1:s.value!=="?"}function q1(s){return s===null?!0:s.type===la.Comma||s.type===la.Function||s.type===la.LeftParenthesis||s.type===la.LeftSquareBracket||s.type===la.LeftCurlyBracket||BL(s)}function V1(s){return s===null?!0:s.type===la.RightParenthesis||s.type===la.RightSquareBracket||s.type===la.RightCurlyBracket||s.type===la.Delim}function Z1(s,o,p){function d(){do Ce++,ye=Ce<s.length?s[Ce]:null;while(ye!==null&&(ye.type===la.WhiteSpace||ye.type===la.Comment))}function f(Ut){var ut=Ce+Ut;return ut<s.length?s[ut]:null}function a(Ut,ut){return{nextState:Ut,matchStack:rt,syntaxStack:re,thenStack:G,tokenIndex:Ce,prev:ut}}function T(Ut){G={nextState:Ut,matchStack:rt,syntaxStack:re,prev:G}}function M(Ut){te=a(Ut,te)}function R(){rt={type:DL,syntax:o.syntax,token:ye,prev:rt},d(),H=null,Ce>Ye&&(Ye=Ce)}function V(){re={syntax:o.syntax,opts:o.syntax.opts||re!==null&&re.opts||null,prev:re},rt={type:gf,syntax:o.syntax,token:rt.token,prev:rt}}function Y(){rt.type===gf?rt=rt.prev:rt={type:uy,syntax:re.syntax,token:rt.token,prev:rt},re=re.prev}var re=null,G=null,te=null,H=null,Se=0,je=null,ye=null,Ce=-1,Ye=0,rt={type:W1,syntax:null,token:null,prev:null};for(d();je===null&&++Se<N1;)switch(o.type){case"Match":if(G===null){if(ye!==null&&(Ce!==s.length-1||ye.value!=="\\0"&&ye.value!=="\\9")){o=oa;break}je=j1;break}if(o=G.nextState,o===LL)if(G.matchStack===rt){o=oa;break}else o=xs;for(;G.syntaxStack!==re;)Y();G=G.prev;break;case"Mismatch":if(H!==null&&H!==!1)(te===null||Ce>te.tokenIndex)&&(te=H,H=!1);else if(te===null){je=OL;break}o=te.nextState,G=te.thenStack,re=te.syntaxStack,rt=te.matchStack,Ce=te.tokenIndex,ye=Ce<s.length?s[Ce]:null,te=te.prev;break;case"MatchGraph":o=o.match;break;case"If":o.else!==oa&&M(o.else),o.then!==xs&&T(o.then),o=o.match;break;case"MatchOnce":o={type:"MatchOnceBuffer",syntax:o,index:0,mask:0};break;case"MatchOnceBuffer":var Ct=o.syntax.terms;if(o.index===Ct.length){if(o.mask===0||o.syntax.all){o=oa;break}o=xs;break}if(o.mask===(1<<Ct.length)-1){o=xs;break}for(;o.index<Ct.length;o.index++){var gt=1<<o.index;if((o.mask&gt)===0){M(o),T({type:"AddMatchOnce",syntax:o.syntax,mask:o.mask|gt}),o=Ct[o.index++];break}}break;case"AddMatchOnce":o={type:"MatchOnceBuffer",syntax:o.syntax,index:0,mask:o.mask};break;case"Enum":if(ye!==null){var ri=ye.value.toLowerCase();if(ri.indexOf("\\")!==-1&&(ri=ri.replace(/\\[09].*$/,"")),F1.call(o.map,ri)){o=o.map[ri];break}}o=oa;break;case"Generic":var Wt=re!==null?re.opts:null,Gt=Ce+Math.floor(o.fn(ye,f,Wt));if(!isNaN(Gt)&&Gt>Ce){for(;Ce<Gt;)R();o=xs}else o=oa;break;case"Type":case"Property":var wt=o.type==="Type"?"types":"properties",kt=F1.call(p,wt)?p[wt][o.name]:null;if(!kt||!kt.match)throw new Error("Bad syntax reference: "+(o.type==="Type"?"<"+o.name+">":"<'"+o.name+"'>"));if(H!==!1&&ye!==null&&o.type==="Type"){var si=o.name==="custom-ident"&&ye.type===la.Ident||o.name==="length"&&ye.value==="0";if(si){H===null&&(H=a(o,te)),o=oa;break}}V(),o=kt.match;break;case"Keyword":var ri=o.name;if(ye!==null){var di=ye.value;if(di.indexOf("\\")!==-1&&(di=di.replace(/\\[09].*$/,"")),ly(di,ri)){R(),o=xs;break}}o=oa;break;case"AtKeyword":case"Function":if(ye!==null&&ly(ye.value,o.name)){R(),o=xs;break}o=oa;break;case"Token":if(ye!==null&&ye.value===o.value){R(),o=xs;break}o=oa;break;case"Comma":ye!==null&&ye.type===la.Comma?q1(rt.token)?o=oa:(R(),o=V1(ye)?oa:xs):o=q1(rt.token)||V1(ye)?xs:oa;break;case"String":for(var ni="",Gt=Ce;Gt<s.length&&ni.length<o.value.length;Gt++)ni+=s[Gt].value;if(ly(ni,o.value)){for(;Ce<Gt;)R();o=xs}else o=oa;break;default:throw new Error("Unknown node type: "+o.type)}switch(G1+=Se,je){case null:console.warn("[csstree-match] BREAK after "+N1+" iterations"),je=RL,rt=null;break;case j1:for(;re!==null;)Y();break;default:rt=null}return{tokens:s,reason:je,iterations:Se,match:rt,longestMatch:Ye}}function FL(s,o,p){var d=Z1(s,o,p||{});if(d.match!==null){var f=U1(d.match).prev;for(d.match=[];f!==null;){switch(f.type){case W1:break;case gf:case uy:d.match.push({type:f.type,syntax:f.syntax});break;default:d.match.push({token:f.token.value,node:f.token.node});break}f=f.prev}}return d}function jL(s,o,p){var d=Z1(s,o,p||{});if(d.match===null)return d;var f=d.match,a=d.match={syntax:o.syntax||null,match:[]},T=[a];for(f=U1(f).prev;f!==null;){switch(f.type){case gf:a.match.push(a={syntax:f.syntax,match:[]}),T.push(a);break;case uy:T.pop(),a=T[T.length-1];break;default:a.match.push({syntax:f.syntax||null,token:f.token.value,node:f.token.node})}f=f.prev}return d}$1.exports={matchAsList:FL,matchAsTree:jL,getTotalIterationCount:function(){return G1}}});var K1=Ee((Gj,X1)=>{function Y1(s){function o(f){return f===null?!1:f.type==="Type"||f.type==="Property"||f.type==="Keyword"}function p(f){if(Array.isArray(f.match)){for(var a=0;a<f.match.length;a++)if(p(f.match[a]))return o(f.syntax)&&d.unshift(f.syntax),!0}else if(f.node===s)return d=o(f.syntax)?[f.syntax]:[],!0;return!1}var d=null;return this.matched!==null&&p(this.matched),d}function dy(s,o,p){var d=Y1.call(s,o);return d===null?!1:d.some(p)}function NL(s,o){return dy(this,s,function(p){return p.type==="Type"&&p.name===o})}function qL(s,o){return dy(this,s,function(p){return p.type==="Property"&&p.name===o})}function VL(s){return dy(this,s,function(o){return o.type==="Keyword"})}X1.exports={getTrace:Y1,isType:NL,isProperty:qL,isKeyword:VL}});var tw=Ee((Uj,ew)=>{var WL=mc();function Q1(s){return"node"in s?s.node:Q1(s.match[0])}function J1(s){return"node"in s?s.node:J1(s.match[s.match.length-1])}function GL(s,o,p,d,f){function a(M){if(M.syntax!==null&&M.syntax.type===d&&M.syntax.name===f){var R=Q1(M),V=J1(M);s.syntax.walk(o,function(Y,re,G){if(Y===R){var te=new WL;do{if(te.appendData(re.data),re.data===V)break;re=re.next}while(re!==null);T.push({parent:G,nodes:te})}})}Array.isArray(M.match)&&M.match.forEach(a)}var T=[];return p.matched!==null&&a(p.matched),T}ew.exports={matchFragments:GL}});var nw=Ee((Zj,rw)=>{var UL=mc(),lh=Object.prototype.hasOwnProperty;function hy(s){return typeof s=="number"&&isFinite(s)&&Math.floor(s)===s&&s>=0}function iw(s){return!!s&&hy(s.offset)&&hy(s.line)&&hy(s.column)}function ZL(s,o){return function(d,f){if(!d||d.constructor!==Object)return f(d,"Type of node should be an Object");for(var a in d){var T=!0;if(lh.call(d,a)!==!1){if(a==="type")d.type!==s&&f(d,"Wrong node type `"+d.type+"`, expected `"+s+"`");else if(a==="loc"){if(d.loc===null)continue;if(d.loc&&d.loc.constructor===Object)if(typeof d.loc.source!="string")a+=".source";else if(!iw(d.loc.start))a+=".start";else if(!iw(d.loc.end))a+=".end";else continue;T=!1}else if(o.hasOwnProperty(a))for(var M=0,T=!1;!T&&M<o[a].length;M++){var R=o[a][M];switch(R){case String:T=typeof d[a]=="string";break;case Boolean:T=typeof d[a]=="boolean";break;case null:T=d[a]===null;break;default:typeof R=="string"?T=d[a]&&d[a].type===R:Array.isArray(R)&&(T=d[a]instanceof UL)}}else f(d,"Unknown field `"+a+"` for "+s+" node type");T||f(d,"Bad value for `"+s+"."+a+"`")}}for(var a in o)lh.call(o,a)&&lh.call(d,a)===!1&&f(d,"Field `"+s+"."+a+"` is missed")}}function $L(s,o){var p=o.structure,d={type:String,loc:!0},f={type:'"'+s+'"'};for(var a in p)if(lh.call(p,a)!==!1){for(var T=[],M=d[a]=Array.isArray(p[a])?p[a].slice():[p[a]],R=0;R<M.length;R++){var V=M[R];if(V===String||V===Boolean)T.push(V.name);else if(V===null)T.push("null");else if(typeof V=="string")T.push("<"+V+">");else if(Array.isArray(V))T.push("List");else throw new Error("Wrong value `"+V+"` in `"+s+"."+a+"` structure definition")}f[a]=T.join(" | ")}return{docs:f,check:ZL(s,d)}}rw.exports={getStructureFromConfig:function(s){var o={};if(s.node){for(var p in s.node)if(lh.call(s.node,p)){var d=s.node[p];if(d.structure)o[p]=$L(p,d);else throw new Error("Missed `structure` field in `"+p+"` node type definition")}}return o}}});var uw=Ee(($j,cw)=>{var ch=Dg().SyntaxReferenceError,HL=Dg().SyntaxMatchError,uh=Jp(),py=l1(),YL=mf(),ow=Yp(),XL=ry(),KL=D1(),_f=oy().buildMatchGraph,aw=H1().matchAsTree,yf=K1(),sw=tw(),QL=nw().getStructureFromConfig,JL=_f("inherit | initial | unset"),eD=_f("inherit | initial | unset | <-ms-legacy-expression>");function fy(s,o,p){var d={};for(var f in s)s[f].syntax&&(d[f]=p?s[f].syntax:ow(s[f].syntax,{compact:o}));return d}function tD(s,o,p){let d={};for(let[f,a]of Object.entries(s))d[f]={prelude:a.prelude&&(p?a.prelude.syntax:ow(a.prelude.syntax,{compact:o})),descriptors:a.descriptors&&fy(a.descriptors,o,p)};return d}function iD(s){for(var o=0;o<s.length;o++)if(s[o].value.toLowerCase()==="var(")return!0;return!1}function Qs(s,o,p){return{matched:s,iterations:p,error:o,getTrace:yf.getTrace,isType:yf.isType,isProperty:yf.isProperty,isKeyword:yf.isKeyword}}function dh(s,o,p,d){var f=KL(p,s.syntax),a;return iD(f)?Qs(null,new Error("Matching for a tree with var() is not supported")):(d&&(a=aw(f,s.valueCommonSyntax,s)),(!d||!a.match)&&(a=aw(f,o.match,s),!a.match)?Qs(null,new HL(a.reason,o.syntax,p,a),a.iterations):Qs(a.match,null,a.iterations))}var lw=function(s,o,p){if(this.valueCommonSyntax=JL,this.syntax=o,this.generic=!1,this.atrules={},this.properties={},this.types={},this.structure=p||QL(s),s){if(s.types)for(var d in s.types)this.addType_(d,s.types[d]);if(s.generic){this.generic=!0;for(var d in py)this.addType_(d,py[d])}if(s.atrules)for(var d in s.atrules)this.addAtrule_(d,s.atrules[d]);if(s.properties)for(var d in s.properties)this.addProperty_(d,s.properties[d])}};lw.prototype={structure:{},checkStructure:function(s){function o(f,a){d.push({node:f,message:a})}var p=this.structure,d=[];return this.syntax.walk(s,function(f){p.hasOwnProperty(f.type)?p[f.type].check(f,o):o(f,"Unknown node type `"+f.type+"`")}),d.length?d:!1},createDescriptor:function(s,o,p,d=null){var f={type:o,name:p},a={type:o,name:p,parent:d,syntax:null,match:null};return typeof s=="function"?a.match=_f(s,f):(typeof s=="string"?Object.defineProperty(a,"syntax",{get:function(){return Object.defineProperty(a,"syntax",{value:YL(s)}),a.syntax}}):a.syntax=s,Object.defineProperty(a,"match",{get:function(){return Object.defineProperty(a,"match",{value:_f(a.syntax,f)}),a.match}})),a},addAtrule_:function(s,o){o&&(this.atrules[s]={type:"Atrule",name:s,prelude:o.prelude?this.createDescriptor(o.prelude,"AtrulePrelude",s):null,descriptors:o.descriptors?Object.keys(o.descriptors).reduce((p,d)=>(p[d]=this.createDescriptor(o.descriptors[d],"AtruleDescriptor",d,s),p),{}):null})},addProperty_:function(s,o){o&&(this.properties[s]=this.createDescriptor(o,"Property",s))},addType_:function(s,o){o&&(this.types[s]=this.createDescriptor(o,"Type",s),o===py["-ms-legacy-expression"]&&(this.valueCommonSyntax=eD))},checkAtruleName:function(s){if(!this.getAtrule(s))return new ch("Unknown at-rule","@"+s)},checkAtrulePrelude:function(s,o){let p=this.checkAtruleName(s);if(p)return p;var d=this.getAtrule(s);if(!d.prelude&&o)return new SyntaxError("At-rule `@"+s+"` should not contain a prelude");if(d.prelude&&!o)return new SyntaxError("At-rule `@"+s+"` should contain a prelude")},checkAtruleDescriptorName:function(s,o){let p=this.checkAtruleName(s);if(p)return p;var d=this.getAtrule(s),f=uh.keyword(o);if(!d.descriptors)return new SyntaxError("At-rule `@"+s+"` has no known descriptors");if(!d.descriptors[f.name]&&!d.descriptors[f.basename])return new ch("Unknown at-rule descriptor",o)},checkPropertyName:function(s){var o=uh.property(s);if(o.custom)return new Error("Lexer matching doesn't applicable for custom properties");if(!this.getProperty(s))return new ch("Unknown property",s)},matchAtrulePrelude:function(s,o){var p=this.checkAtrulePrelude(s,o);return p?Qs(null,p):o?dh(this,this.getAtrule(s).prelude,o,!1):Qs(null,null)},matchAtruleDescriptor:function(s,o,p){var d=this.checkAtruleDescriptorName(s,o);if(d)return Qs(null,d);var f=this.getAtrule(s),a=uh.keyword(o);return dh(this,f.descriptors[a.name]||f.descriptors[a.basename],p,!1)},matchDeclaration:function(s){return s.type!=="Declaration"?Qs(null,new Error("Not a Declaration node")):this.matchProperty(s.property,s.value)},matchProperty:function(s,o){var p=this.checkPropertyName(s);return p?Qs(null,p):dh(this,this.getProperty(s),o,!0)},matchType:function(s,o){var p=this.getType(s);return p?dh(this,p,o,!1):Qs(null,new ch("Unknown type",s))},match:function(s,o){return typeof s!="string"&&(!s||!s.type)?Qs(null,new ch("Bad syntax")):((typeof s=="string"||!s.match)&&(s=this.createDescriptor(s,"Type","anonymous")),dh(this,s,o,!1))},findValueFragments:function(s,o,p,d){return sw.matchFragments(this,o,this.matchProperty(s,o),p,d)},findDeclarationValueFragments:function(s,o,p){return sw.matchFragments(this,s.value,this.matchDeclaration(s),o,p)},findAllFragments:function(s,o,p){var d=[];return this.syntax.walk(s,{visit:"Declaration",enter:function(f){d.push.apply(d,this.findDeclarationValueFragments(f,o,p))}.bind(this)}),d},getAtrule:function(s,o=!0){var p=uh.keyword(s),d=p.vendor&&o?this.atrules[p.name]||this.atrules[p.basename]:this.atrules[p.name];return d||null},getAtrulePrelude:function(s,o=!0){let p=this.getAtrule(s,o);return p&&p.prelude||null},getAtruleDescriptor:function(s,o){return this.atrules.hasOwnProperty(s)&&this.atrules.declarators&&this.atrules[s].declarators[o]||null},getProperty:function(s,o=!0){var p=uh.property(s),d=p.vendor&&o?this.properties[p.name]||this.properties[p.basename]:this.properties[p.name];return d||null},getType:function(s){return this.types.hasOwnProperty(s)?this.types[s]:null},validate:function(){function s(f,a,T,M){if(T.hasOwnProperty(a))return T[a];T[a]=!1,M.syntax!==null&&XL(M.syntax,function(R){if(!(R.type!=="Type"&&R.type!=="Property")){var V=R.type==="Type"?f.types:f.properties,Y=R.type==="Type"?o:p;(!V.hasOwnProperty(R.name)||s(f,R.name,Y,V[R.name]))&&(T[a]=!0)}},this)}var o={},p={};for(var d in this.types)s(this,d,o,this.types[d]);for(var d in this.properties)s(this,d,p,this.properties[d]);return o=Object.keys(o).filter(function(f){return o[f]}),p=Object.keys(p).filter(function(f){return p[f]}),o.length||p.length?{types:o,properties:p}:null},dump:function(s,o){return{generic:this.generic,types:fy(this.types,!o,s),properties:fy(this.properties,!o,s),atrules:tD(this.atrules,!o,s)}},toString:function(){return JSON.stringify(this.dump())}};cw.exports=lw});var hw=Ee((Hj,dw)=>{dw.exports={SyntaxError:Kg(),parse:mf(),generate:Yp(),walk:ry()}});var _w=Ee((Yj,yw)=>{var pw=Bg(),rD=yt().isBOM,fw=10,nD=12,mw=13;function aD(s,o){for(var p=o.length,d=pw(s.lines,p),f=s.startLine,a=pw(s.columns,p),T=s.startColumn,M=o.length>0?rD(o.charCodeAt(0)):0,R=M;R<p;R++){var V=o.charCodeAt(R);d[R]=f,a[R]=T++,(V===fw||V===mw||V===nD)&&(V===mw&&R+1<p&&o.charCodeAt(R+1)===fw&&(R++,d[R]=f,a[R]=T),f++,T=1)}d[R]=f,a[R]=T,s.lines=d,s.columns=a}var gw=function(){this.lines=null,this.columns=null,this.linesAndColumnsComputed=!1};gw.prototype={setSource:function(s,o,p,d){this.source=s,this.startOffset=typeof o=="undefined"?0:o,this.startLine=typeof p=="undefined"?1:p,this.startColumn=typeof d=="undefined"?1:d,this.linesAndColumnsComputed=!1},ensureLinesAndColumnsComputed:function(){this.linesAndColumnsComputed||(aD(this,this.source),this.linesAndColumnsComputed=!0)},getLocation:function(s,o){return this.ensureLinesAndColumnsComputed(),{source:o,offset:this.startOffset+s,line:this.lines[s],column:this.columns[s]}},getLocationRange:function(s,o,p){return this.ensureLinesAndColumnsComputed(),{source:p,start:{offset:this.startOffset+s,line:this.lines[s],column:this.columns[s]},end:{offset:this.startOffset+o,line:this.lines[o],column:this.columns[o]}}}};yw.exports=gw});var xw=Ee((Xj,bw)=>{var vw=yt().TYPE,sD=vw.WhiteSpace,oD=vw.Comment;bw.exports=function(o){var p=this.createList(),d=null,f={recognizer:o,space:null,ignoreWS:!1,ignoreWSAfter:!1};for(this.scanner.skipSC();!this.scanner.eof;){switch(this.scanner.tokenType){case oD:this.scanner.next();continue;case sD:f.ignoreWS?this.scanner.next():f.space=this.WhiteSpace();continue}if(d=o.getNode.call(this,f),d===void 0)break;f.space!==null&&(p.push(f.space),f.space=null),p.push(d),f.ignoreWSAfter?(f.ignoreWSAfter=!1,f.ignoreWS=!0):f.ignoreWS=!1}return p}});var Ew=Ee((Kj,Pw)=>{var lD=_w(),cD=Cg(),uD=eh(),ww=mc(),dD=yt(),kw=Kd(),{findWhiteSpaceStart:hD,cmpStr:pD}=Pu(),fD=xw(),Sw=function(){},El=kw.TYPE,mD=kw.NAME,gD=El.WhiteSpace,yD=El.Comment,_D=El.Ident,Tw=El.Function,vD=El.Url,bD=El.Hash,xD=El.Percentage,wD=El.Number,SD=35,Cw=0;function TD(s){return function(){return this[s]()}}function CD(s){var o={context:{},scope:{},atrule:{},pseudo:{}};if(s.parseContext)for(var p in s.parseContext)switch(typeof s.parseContext[p]){case"function":o.context[p]=s.parseContext[p];break;case"string":o.context[p]=TD(s.parseContext[p]);break}if(s.scope)for(var p in s.scope)o.scope[p]=s.scope[p];if(s.atrule)for(var p in s.atrule){var d=s.atrule[p];d.parse&&(o.atrule[p]=d.parse)}if(s.pseudo)for(var p in s.pseudo){var f=s.pseudo[p];f.parse&&(o.pseudo[p]=f.parse)}if(s.node)for(var p in s.node)o[p]=s.node[p].parse;return o}Pw.exports=function(o){var p={scanner:new uD,locationMap:new lD,filename:"<unknown>",needPositions:!1,onParseError:Sw,onParseErrorThrow:!1,parseAtrulePrelude:!0,parseRulePrelude:!0,parseValue:!0,parseCustomProperty:!1,readSequence:fD,createList:function(){return new ww},createSingleNodeList:function(f){return new ww().appendData(f)},getFirstListNode:function(f){return f&&f.first()},getLastListNode:function(f){return f.last()},parseWithFallback:function(f,a){var T=this.scanner.tokenIndex;try{return f.call(this)}catch(R){if(this.onParseErrorThrow)throw R;var M=a.call(this,T);return this.onParseErrorThrow=!0,this.onParseError(R,M),this.onParseErrorThrow=!1,M}},lookupNonWSType:function(f){do{var a=this.scanner.lookupType(f++);if(a!==gD)return a}while(a!==Cw);return Cw},eat:function(f){if(this.scanner.tokenType!==f){var a=this.scanner.tokenStart,T=mD[f]+" is expected";switch(f){case _D:this.scanner.tokenType===Tw||this.scanner.tokenType===vD?(a=this.scanner.tokenEnd-1,T="Identifier is expected but function found"):T="Identifier is expected";break;case bD:this.scanner.isDelim(SD)&&(this.scanner.next(),a++,T="Name is expected");break;case xD:this.scanner.tokenType===wD&&(a=this.scanner.tokenEnd,T="Percent sign is expected");break;default:this.scanner.source.charCodeAt(this.scanner.tokenStart)===f&&(a=a+1)}this.error(T,a)}this.scanner.next()},consume:function(f){var a=this.scanner.getTokenValue();return this.eat(f),a},consumeFunctionName:function(){var f=this.scanner.source.substring(this.scanner.tokenStart,this.scanner.tokenEnd-1);return this.eat(Tw),f},getLocation:function(f,a){return this.needPositions?this.locationMap.getLocationRange(f,a,this.filename):null},getLocationFromList:function(f){if(this.needPositions){var a=this.getFirstListNode(f),T=this.getLastListNode(f);return this.locationMap.getLocationRange(a!==null?a.loc.start.offset-this.locationMap.startOffset:this.scanner.tokenStart,T!==null?T.loc.end.offset-this.locationMap.startOffset:this.scanner.tokenStart,this.filename)}return null},error:function(f,a){var T=typeof a!="undefined"&&a<this.scanner.source.length?this.locationMap.getLocation(a):this.scanner.eof?this.locationMap.getLocation(hD(this.scanner.source,this.scanner.source.length-1)):this.locationMap.getLocation(this.scanner.tokenStart);throw new cD(f||"Unexpected input",this.scanner.source,T.offset,T.line,T.column)}};o=CD(o||{});for(var d in o)p[d]=o[d];return function(f,a){a=a||{};var T=a.context||"default",M=a.onComment,R;if(dD(f,p.scanner),p.locationMap.setSource(f,a.offset,a.line,a.column),p.filename=a.filename||"<unknown>",p.needPositions=!!a.positions,p.onParseError=typeof a.onParseError=="function"?a.onParseError:Sw,p.onParseErrorThrow=!1,p.parseAtrulePrelude="parseAtrulePrelude"in a?!!a.parseAtrulePrelude:!0,p.parseRulePrelude="parseRulePrelude"in a?!!a.parseRulePrelude:!0,p.parseValue="parseValue"in a?!!a.parseValue:!0,p.parseCustomProperty="parseCustomProperty"in a?!!a.parseCustomProperty:!1,!p.context.hasOwnProperty(T))throw new Error("Unknown context `"+T+"`");return typeof M=="function"&&p.scanner.forEachToken((V,Y,re)=>{if(V===yD){let G=p.getLocation(Y,re),te=pD(f,re-2,re,"*/")?f.slice(Y+2,re-2):f.slice(Y+2,re);M(te,G)}}),R=p.context[T].call(p,a),p.scanner.eof||p.error(),R}}});var Mw=Ee(my=>{var Aw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");my.encode=function(s){if(0<=s&&s<Aw.length)return Aw[s];throw new TypeError("Must be between 0 and 63: "+s)};my.decode=function(s){var o=65,p=90,d=97,f=122,a=48,T=57,M=43,R=47,V=26,Y=52;return o<=s&&s<=p?s-o:d<=s&&s<=f?s-d+V:a<=s&&s<=T?s-a+Y:s==M?62:s==R?63:-1}});var Ow=Ee(yy=>{var Iw=Mw(),gy=5,zw=1<<gy,Lw=zw-1,Dw=zw;function kD(s){return s<0?(-s<<1)+1:(s<<1)+0}function PD(s){var o=(s&1)===1,p=s>>1;return o?-p:p}yy.encode=function(o){var p="",d,f=kD(o);do d=f&Lw,f>>>=gy,f>0&&(d|=Dw),p+=Iw.encode(d);while(f>0);return p};yy.decode=function(o,p,d){var f=o.length,a=0,T=0,M,R;do{if(p>=f)throw new Error("Expected more digits in base 64 VLQ value.");if(R=Iw.decode(o.charCodeAt(p++)),R===-1)throw new Error("Invalid base64 digit: "+o.charAt(p-1));M=!!(R&Dw),R&=Lw,a=a+(R<<T),T+=gy}while(M);d.value=PD(a),d.rest=p}});var vf=Ee(Mn=>{function ED(s,o,p){if(o in s)return s[o];if(arguments.length===3)return p;throw new Error('"'+o+'" is a required argument.')}Mn.getArg=ED;var Rw=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,AD=/^data:.+\,.+$/;function hh(s){var o=s.match(Rw);return o?{scheme:o[1],auth:o[2],host:o[3],port:o[4],path:o[5]}:null}Mn.urlParse=hh;function Ou(s){var o="";return s.scheme&&(o+=s.scheme+":"),o+="//",s.auth&&(o+=s.auth+"@"),s.host&&(o+=s.host),s.port&&(o+=":"+s.port),s.path&&(o+=s.path),o}Mn.urlGenerate=Ou;function _y(s){var o=s,p=hh(s);if(p){if(!p.path)return s;o=p.path}for(var d=Mn.isAbsolute(o),f=o.split(/\/+/),a,T=0,M=f.length-1;M>=0;M--)a=f[M],a==="."?f.splice(M,1):a===".."?T++:T>0&&(a===""?(f.splice(M+1,T),T=0):(f.splice(M,2),T--));return o=f.join("/"),o===""&&(o=d?"/":"."),p?(p.path=o,Ou(p)):o}Mn.normalize=_y;function Bw(s,o){s===""&&(s="."),o===""&&(o=".");var p=hh(o),d=hh(s);if(d&&(s=d.path||"/"),p&&!p.scheme)return d&&(p.scheme=d.scheme),Ou(p);if(p||o.match(AD))return o;if(d&&!d.host&&!d.path)return d.host=o,Ou(d);var f=o.charAt(0)==="/"?o:_y(s.replace(/\/+$/,"")+"/"+o);return d?(d.path=f,Ou(d)):f}Mn.join=Bw;Mn.isAbsolute=function(s){return s.charAt(0)==="/"||Rw.test(s)};function MD(s,o){s===""&&(s="."),s=s.replace(/\/$/,"");for(var p=0;o.indexOf(s+"/")!==0;){var d=s.lastIndexOf("/");if(d<0||(s=s.slice(0,d),s.match(/^([^\/]+:\/)?\/*$/)))return o;++p}return Array(p+1).join("../")+o.substr(s.length+1)}Mn.relative=MD;var Fw=(function(){var s=Object.create(null);return!("__proto__"in s)})();function jw(s){return s}function ID(s){return Nw(s)?"$"+s:s}Mn.toSetString=Fw?jw:ID;function zD(s){return Nw(s)?s.slice(1):s}Mn.fromSetString=Fw?jw:zD;function Nw(s){if(!s)return!1;var o=s.length;if(o<9||s.charCodeAt(o-1)!==95||s.charCodeAt(o-2)!==95||s.charCodeAt(o-3)!==111||s.charCodeAt(o-4)!==116||s.charCodeAt(o-5)!==111||s.charCodeAt(o-6)!==114||s.charCodeAt(o-7)!==112||s.charCodeAt(o-8)!==95||s.charCodeAt(o-9)!==95)return!1;for(var p=o-10;p>=0;p--)if(s.charCodeAt(p)!==36)return!1;return!0}function LD(s,o,p){var d=Ru(s.source,o.source);return d!==0||(d=s.originalLine-o.originalLine,d!==0)||(d=s.originalColumn-o.originalColumn,d!==0||p)||(d=s.generatedColumn-o.generatedColumn,d!==0)||(d=s.generatedLine-o.generatedLine,d!==0)?d:Ru(s.name,o.name)}Mn.compareByOriginalPositions=LD;function DD(s,o,p){var d=s.generatedLine-o.generatedLine;return d!==0||(d=s.generatedColumn-o.generatedColumn,d!==0||p)||(d=Ru(s.source,o.source),d!==0)||(d=s.originalLine-o.originalLine,d!==0)||(d=s.originalColumn-o.originalColumn,d!==0)?d:Ru(s.name,o.name)}Mn.compareByGeneratedPositionsDeflated=DD;function Ru(s,o){return s===o?0:s===null?1:o===null?-1:s>o?1:-1}function OD(s,o){var p=s.generatedLine-o.generatedLine;return p!==0||(p=s.generatedColumn-o.generatedColumn,p!==0)||(p=Ru(s.source,o.source),p!==0)||(p=s.originalLine-o.originalLine,p!==0)||(p=s.originalColumn-o.originalColumn,p!==0)?p:Ru(s.name,o.name)}Mn.compareByGeneratedPositionsInflated=OD;function RD(s){return JSON.parse(s.replace(/^\)]}'[^\n]*\n/,""))}Mn.parseSourceMapInput=RD;function BD(s,o,p){if(o=o||"",s&&(s[s.length-1]!=="/"&&o[0]!=="/"&&(s+="/"),o=s+o),p){var d=hh(p);if(!d)throw new Error("sourceMapURL could not be parsed");if(d.path){var f=d.path.lastIndexOf("/");f>=0&&(d.path=d.path.substring(0,f+1))}o=Bw(Ou(d),o)}return _y(o)}Mn.computeSourceURL=BD});var Vw=Ee(qw=>{var vy=vf(),by=Object.prototype.hasOwnProperty,yc=typeof Map!="undefined";function Wo(){this._array=[],this._set=yc?new Map:Object.create(null)}Wo.fromArray=function(o,p){for(var d=new Wo,f=0,a=o.length;f<a;f++)d.add(o[f],p);return d};Wo.prototype.size=function(){return yc?this._set.size:Object.getOwnPropertyNames(this._set).length};Wo.prototype.add=function(o,p){var d=yc?o:vy.toSetString(o),f=yc?this.has(o):by.call(this._set,d),a=this._array.length;(!f||p)&&this._array.push(o),f||(yc?this._set.set(o,a):this._set[d]=a)};Wo.prototype.has=function(o){if(yc)return this._set.has(o);var p=vy.toSetString(o);return by.call(this._set,p)};Wo.prototype.indexOf=function(o){if(yc){var p=this._set.get(o);if(p>=0)return p}else{var d=vy.toSetString(o);if(by.call(this._set,d))return this._set[d]}throw new Error('"'+o+'" is not in the set.')};Wo.prototype.at=function(o){if(o>=0&&o<this._array.length)return this._array[o];throw new Error("No element indexed by "+o)};Wo.prototype.toArray=function(){return this._array.slice()};qw.ArraySet=Wo});var Uw=Ee(Gw=>{var Ww=vf();function FD(s,o){var p=s.generatedLine,d=o.generatedLine,f=s.generatedColumn,a=o.generatedColumn;return d>p||d==p&&a>=f||Ww.compareByGeneratedPositionsInflated(s,o)<=0}function bf(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}bf.prototype.unsortedForEach=function(o,p){this._array.forEach(o,p)};bf.prototype.add=function(o){FD(this._last,o)?(this._last=o,this._array.push(o)):(this._sorted=!1,this._array.push(o))};bf.prototype.toArray=function(){return this._sorted||(this._array.sort(Ww.compareByGeneratedPositionsInflated),this._sorted=!0),this._array};Gw.MappingList=bf});var $w=Ee(Zw=>{var ph=Ow(),qr=vf(),xf=Vw().ArraySet,jD=Uw().MappingList;function $a(s){s||(s={}),this._file=qr.getArg(s,"file",null),this._sourceRoot=qr.getArg(s,"sourceRoot",null),this._skipValidation=qr.getArg(s,"skipValidation",!1),this._sources=new xf,this._names=new xf,this._mappings=new jD,this._sourcesContents=null}$a.prototype._version=3;$a.fromSourceMap=function(o){var p=o.sourceRoot,d=new $a({file:o.file,sourceRoot:p});return o.eachMapping(function(f){var a={generated:{line:f.generatedLine,column:f.generatedColumn}};f.source!=null&&(a.source=f.source,p!=null&&(a.source=qr.relative(p,a.source)),a.original={line:f.originalLine,column:f.originalColumn},f.name!=null&&(a.name=f.name)),d.addMapping(a)}),o.sources.forEach(function(f){var a=f;p!==null&&(a=qr.relative(p,f)),d._sources.has(a)||d._sources.add(a);var T=o.sourceContentFor(f);T!=null&&d.setSourceContent(f,T)}),d};$a.prototype.addMapping=function(o){var p=qr.getArg(o,"generated"),d=qr.getArg(o,"original",null),f=qr.getArg(o,"source",null),a=qr.getArg(o,"name",null);this._skipValidation||this._validateMapping(p,d,f,a),f!=null&&(f=String(f),this._sources.has(f)||this._sources.add(f)),a!=null&&(a=String(a),this._names.has(a)||this._names.add(a)),this._mappings.add({generatedLine:p.line,generatedColumn:p.column,originalLine:d!=null&&d.line,originalColumn:d!=null&&d.column,source:f,name:a})};$a.prototype.setSourceContent=function(o,p){var d=o;this._sourceRoot!=null&&(d=qr.relative(this._sourceRoot,d)),p!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[qr.toSetString(d)]=p):this._sourcesContents&&(delete this._sourcesContents[qr.toSetString(d)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))};$a.prototype.applySourceMap=function(o,p,d){var f=p;if(p==null){if(o.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);f=o.file}var a=this._sourceRoot;a!=null&&(f=qr.relative(a,f));var T=new xf,M=new xf;this._mappings.unsortedForEach(function(R){if(R.source===f&&R.originalLine!=null){var V=o.originalPositionFor({line:R.originalLine,column:R.originalColumn});V.source!=null&&(R.source=V.source,d!=null&&(R.source=qr.join(d,R.source)),a!=null&&(R.source=qr.relative(a,R.source)),R.originalLine=V.line,R.originalColumn=V.column,V.name!=null&&(R.name=V.name))}var Y=R.source;Y!=null&&!T.has(Y)&&T.add(Y);var re=R.name;re!=null&&!M.has(re)&&M.add(re)},this),this._sources=T,this._names=M,o.sources.forEach(function(R){var V=o.sourceContentFor(R);V!=null&&(d!=null&&(R=qr.join(d,R)),a!=null&&(R=qr.relative(a,R)),this.setSourceContent(R,V))},this)};$a.prototype._validateMapping=function(o,p,d,f){if(p&&typeof p.line!="number"&&typeof p.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(o&&"line"in o&&"column"in o&&o.line>0&&o.column>=0&&!p&&!d&&!f)){if(o&&"line"in o&&"column"in o&&p&&"line"in p&&"column"in p&&o.line>0&&o.column>=0&&p.line>0&&p.column>=0&&d)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:o,source:d,original:p,name:f}))}};$a.prototype._serializeMappings=function(){for(var o=0,p=1,d=0,f=0,a=0,T=0,M="",R,V,Y,re,G=this._mappings.toArray(),te=0,H=G.length;te<H;te++){if(V=G[te],R="",V.generatedLine!==p)for(o=0;V.generatedLine!==p;)R+=";",p++;else if(te>0){if(!qr.compareByGeneratedPositionsInflated(V,G[te-1]))continue;R+=","}R+=ph.encode(V.generatedColumn-o),o=V.generatedColumn,V.source!=null&&(re=this._sources.indexOf(V.source),R+=ph.encode(re-T),T=re,R+=ph.encode(V.originalLine-1-f),f=V.originalLine-1,R+=ph.encode(V.originalColumn-d),d=V.originalColumn,V.name!=null&&(Y=this._names.indexOf(V.name),R+=ph.encode(Y-a),a=Y)),M+=R}return M};$a.prototype._generateSourcesContent=function(o,p){return o.map(function(d){if(!this._sourcesContents)return null;p!=null&&(d=qr.relative(p,d));var f=qr.toSetString(d);return Object.prototype.hasOwnProperty.call(this._sourcesContents,f)?this._sourcesContents[f]:null},this)};$a.prototype.toJSON=function(){var o={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(o.file=this._file),this._sourceRoot!=null&&(o.sourceRoot=this._sourceRoot),this._sourcesContents&&(o.sourcesContent=this._generateSourcesContent(o.sources,o.sourceRoot)),o};$a.prototype.toString=function(){return JSON.stringify(this.toJSON())};Zw.SourceMapGenerator=$a});var Xw=Ee((n4,Yw)=>{var ND=$w().SourceMapGenerator,Hw={Atrule:!0,Selector:!0,Declaration:!0};Yw.exports=function(o){var p=new ND,d=1,f=0,a={line:1,column:0},T={line:0,column:0},M=!1,R={line:1,column:0},V={generated:R},Y=o.node;o.node=function(te){if(te.loc&&te.loc.start&&Hw.hasOwnProperty(te.type)){var H=te.loc.start.line,Se=te.loc.start.column-1;(T.line!==H||T.column!==Se)&&(T.line=H,T.column=Se,a.line=d,a.column=f,M&&(M=!1,(a.line!==R.line||a.column!==R.column)&&p.addMapping(V)),M=!0,p.addMapping({source:te.loc.source,original:T,generated:a}))}Y.call(this,te),M&&Hw.hasOwnProperty(te.type)&&(R.line=d,R.column=f)};var re=o.chunk;o.chunk=function(te){for(var H=0;H<te.length;H++)te.charCodeAt(H)===10?(d++,f=0):f++;re(te)};var G=o.result;return o.result=function(){return M&&p.addMapping(V),{css:G(),map:p}},o}});var Qw=Ee((a4,Kw)=>{var qD=Xw(),VD=Object.prototype.hasOwnProperty;function WD(s,o){var p=s.children,d=null;typeof o!="function"?p.forEach(this.node,this):p.forEach(function(f){d!==null&&o.call(this,d),this.node(f),d=f},this)}Kw.exports=function(o){function p(a){if(VD.call(d,a.type))d[a.type].call(this,a);else throw new Error("Unknown node type: "+a.type)}var d={};if(o.node)for(var f in o.node)d[f]=o.node[f].generate;return function(a,T){var M="",R={children:WD,node:p,chunk:function(V){M+=V},result:function(){return M}};return T&&(typeof T.decorator=="function"&&(R=T.decorator(R)),T.sourceMap&&(R=qD(R))),R.node(a),R.result()}}});var eS=Ee((s4,Jw)=>{var xy=mc();Jw.exports=function(o){return{fromPlainObject:function(p){return o(p,{enter:function(d){d.children&&!(d.children instanceof xy)&&(d.children=new xy().fromArray(d.children))}}),p},toPlainObject:function(p){return o(p,{leave:function(d){d.children&&d.children instanceof xy&&(d.children=d.children.toArray())}}),p}}}});var sS=Ee((o4,aS)=>{var wy=Object.prototype.hasOwnProperty,fh=function(){};function tS(s){return typeof s=="function"?s:fh}function iS(s,o){return function(p,d,f){p.type===o&&s.call(this,p,d,f)}}function GD(s,o){var p=o.structure,d=[];for(var f in p)if(wy.call(p,f)!==!1){var a=p[f],T={name:f,type:!1,nullable:!1};Array.isArray(p[f])||(a=[p[f]]);for(var M=0;M<a.length;M++){var R=a[M];R===null?T.nullable=!0:typeof R=="string"?T.type="node":Array.isArray(R)&&(T.type="list")}T.type&&d.push(T)}return d.length?{context:o.walkContext,fields:d}:null}function UD(s){var o={};for(var p in s.node)if(wy.call(s.node,p)){var d=s.node[p];if(!d.structure)throw new Error("Missed `structure` field in `"+p+"` node type definition");o[p]=GD(p,d)}return o}function rS(s,o){var p=s.fields.slice(),d=s.context,f=typeof d=="string";return o&&p.reverse(),function(a,T,M,R){var V;f&&(V=T[d],T[d]=a);for(var Y=0;Y<p.length;Y++){var re=p[Y],G=a[re.name];if(!re.nullable||G){if(re.type==="list"){var te=o?G.reduceRight(R,!1):G.reduce(R,!1);if(te)return!0}else if(M(G))return!0}}f&&(T[d]=V)}}function nS(s){return{Atrule:{StyleSheet:s.StyleSheet,Atrule:s.Atrule,Rule:s.Rule,Block:s.Block},Rule:{StyleSheet:s.StyleSheet,Atrule:s.Atrule,Rule:s.Rule,Block:s.Block},Declaration:{StyleSheet:s.StyleSheet,Atrule:s.Atrule,Rule:s.Rule,Block:s.Block,DeclarationList:s.DeclarationList}}}aS.exports=function(o){var p=UD(o),d={},f={},a=Symbol("break-walk"),T=Symbol("skip-node");for(var M in p)wy.call(p,M)&&p[M]!==null&&(d[M]=rS(p[M],!1),f[M]=rS(p[M],!0));var R=nS(d),V=nS(f),Y=function(re,G){function te(Ye,rt,Ct){var gt=Se.call(Ce,Ye,rt,Ct);if(gt===a){debugger;return!0}return gt===T?!1:!!(ye.hasOwnProperty(Ye.type)&&ye[Ye.type](Ye,Ce,te,H)||je.call(Ce,Ye,rt,Ct)===a)}var H=(Ye,rt,Ct,gt)=>Ye||te(rt,Ct,gt),Se=fh,je=fh,ye=d,Ce={break:a,skip:T,root:re,stylesheet:null,atrule:null,atrulePrelude:null,rule:null,selector:null,block:null,declaration:null,function:null};if(typeof G=="function")Se=G;else if(G&&(Se=tS(G.enter),je=tS(G.leave),G.reverse&&(ye=f),G.visit)){if(R.hasOwnProperty(G.visit))ye=G.reverse?V[G.visit]:R[G.visit];else if(!p.hasOwnProperty(G.visit))throw new Error("Bad value `"+G.visit+"` for `visit` option (should be: "+Object.keys(p).join(", ")+")");Se=iS(Se,G.visit),je=iS(je,G.visit)}if(Se===fh&&je===fh)throw new Error("Neither `enter` nor `leave` walker handler is set or both aren't a function");te(re)};return Y.break=a,Y.skip=T,Y.find=function(re,G){var te=null;return Y(re,function(H,Se,je){if(G.call(this,H,Se,je))return te=H,a}),te},Y.findLast=function(re,G){var te=null;return Y(re,{reverse:!0,enter:function(H,Se,je){if(G.call(this,H,Se,je))return te=H,a}}),te},Y.findAll=function(re,G){var te=[];return Y(re,function(H,Se,je){G.call(this,H,Se,je)&&te.push(H)}),te},Y}});var lS=Ee((l4,oS)=>{var ZD=mc();oS.exports=function s(o){var p={};for(var d in o){var f=o[d];f&&(Array.isArray(f)||f instanceof ZD?f=f.map(s):f.constructor===Object&&(f=s(f))),p[d]=f}return p}});var pS=Ee((c4,hS)=>{var Bu=Object.prototype.hasOwnProperty,$D={generic:!0,types:Ty,atrules:{prelude:uS,descriptors:uS},properties:Ty,parseContext:HD,scope:dS,atrule:["parse"],pseudo:["parse"],node:["name","structure","parse","generate","walkContext"]};function wf(s){return s&&s.constructor===Object}function Sy(s){return wf(s)?Object.assign({},s):s}function HD(s,o){return Object.assign(s,o)}function dS(s,o){for(let p in o)Bu.call(o,p)&&(wf(s[p])?dS(s[p],Sy(o[p])):s[p]=Sy(o[p]));return s}function cS(s,o){return typeof o=="string"&&/^\s*\|/.test(o)?typeof s=="string"?s+o:o.replace(/^\s*\|\s*/,""):o||null}function Ty(s,o){if(typeof o=="string")return cS(s,o);let p=Object.assign({},s);for(let d in o)Bu.call(o,d)&&(p[d]=cS(Bu.call(s,d)?s[d]:void 0,o[d]));return p}function uS(s,o){let p=Ty(s,o);return!wf(p)||Object.keys(p).length?p:null}function mh(s,o,p){for(let d in p)if(Bu.call(p,d)!==!1){if(p[d]===!0)d in o&&Bu.call(o,d)&&(s[d]=Sy(o[d]));else if(p[d]){if(typeof p[d]=="function"){let f=p[d];s[d]=f({},s[d]),s[d]=f(s[d]||{},o[d])}else if(wf(p[d])){let f={};for(let a in s[d])f[a]=mh({},s[d][a],p[d]);for(let a in o[d])f[a]=mh(f[a]||{},o[d][a],p[d]);s[d]=f}else if(Array.isArray(p[d])){let f={},a=p[d].reduce(function(T,M){return T[M]=!0,T},{});for(let[T,M]of Object.entries(s[d]||{}))f[T]={},M&&mh(f[T],M,a);for(let T in o[d])Bu.call(o[d],T)&&(f[T]||(f[T]={}),o[d]&&o[d][T]&&mh(f[T],o[d][T],a));s[d]=f}}}return s}hS.exports=(s,o)=>mh(s,o,$D)});var mS=Ee(fS=>{var YD=mc(),XD=Cg(),KD=eh(),Cy=uw(),QD=hw(),JD=yt(),eO=Ew(),tO=Qw(),iO=eS(),rO=sS(),nO=lS(),Sf=Jp(),Tf=pS();function ky(s){var o=eO(s),p=rO(s),d=tO(s),f=iO(p),a={List:YD,SyntaxError:XD,TokenStream:KD,Lexer:Cy,vendorPrefix:Sf.vendorPrefix,keyword:Sf.keyword,property:Sf.property,isCustomProperty:Sf.isCustomProperty,definitionSyntax:QD,lexer:null,createLexer:function(T){return new Cy(T,a,a.lexer.structure)},tokenize:JD,parse:o,walk:p,generate:d,find:p.find,findLast:p.findLast,findAll:p.findAll,clone:nO,fromPlainObject:f.fromPlainObject,toPlainObject:f.toPlainObject,createSyntax:function(T){return ky(Tf({},T))},fork:function(T){var M=Tf({},s);return ky(typeof T=="function"?T(M,Object.assign):Tf(M,T))}};return a.lexer=new Cy({generic:!0,types:s.types,atrules:s.atrules,properties:s.properties,node:s.node},a),a}fS.create=function(s){return ky(Tf({},s))}});var gS=Ee((d4,aO)=>{aO.exports={"@charset":{syntax:'@charset "<charset>";',groups:["CSS Charsets"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@charset"},"@counter-style":{syntax:`@counter-style <counter-style-name> {
  [ system: <counter-system>; ] ||
  [ symbols: <counter-symbols>; ] ||
  [ additive-symbols: <additive-symbols>; ] ||
  [ negative: <negative-symbol>; ] ||
  [ prefix: <prefix>; ] ||
  [ suffix: <suffix>; ] ||
  [ range: <range>; ] ||
  [ pad: <padding>; ] ||
  [ speak-as: <speak-as>; ] ||
  [ fallback: <counter-style-name>; ]
}`,interfaces:["CSSCounterStyleRule"],groups:["CSS Counter Styles"],descriptors:{"additive-symbols":{syntax:"[ <integer> && <symbol> ]#",media:"all",initial:"n/a (required)",percentages:"no",computed:"asSpecified",order:"orderOfAppearance",status:"standard"},fallback:{syntax:"<counter-style-name>",media:"all",initial:"decimal",percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},negative:{syntax:"<symbol> <symbol>?",media:"all",initial:'"-" hyphen-minus',percentages:"no",computed:"asSpecified",order:"orderOfAppearance",status:"standard"},pad:{syntax:"<integer> && <symbol>",media:"all",initial:'0 ""',percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},prefix:{syntax:"<symbol>",media:"all",initial:'""',percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},range:{syntax:"[ [ <integer> | infinite ]{2} ]# | auto",media:"all",initial:"auto",percentages:"no",computed:"asSpecified",order:"orderOfAppearance",status:"standard"},"speak-as":{syntax:"auto | bullets | numbers | words | spell-out | <counter-style-name>",media:"all",initial:"auto",percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},suffix:{syntax:"<symbol>",media:"all",initial:'". "',percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},symbols:{syntax:"<symbol>+",media:"all",initial:"n/a (required)",percentages:"no",computed:"asSpecified",order:"orderOfAppearance",status:"standard"},system:{syntax:"cyclic | numeric | alphabetic | symbolic | additive | [ fixed <integer>? ] | [ extends <counter-style-name> ]",media:"all",initial:"symbolic",percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"}},status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@counter-style"},"@document":{syntax:`@document [ <url> | url-prefix(<string>) | domain(<string>) | media-document(<string>) | regexp(<string>) ]# {
  <group-rule-body>
}`,interfaces:["CSSGroupingRule","CSSConditionRule"],groups:["CSS Conditional Rules"],status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@document"},"@font-face":{syntax:`@font-face {
  [ font-family: <family-name>; ] ||
  [ src: <src>; ] ||
  [ unicode-range: <unicode-range>; ] ||
  [ font-variant: <font-variant>; ] ||
  [ font-feature-settings: <font-feature-settings>; ] ||
  [ font-variation-settings: <font-variation-settings>; ] ||
  [ font-stretch: <font-stretch>; ] ||
  [ font-weight: <font-weight>; ] ||
  [ font-style: <font-style>; ]
}`,interfaces:["CSSFontFaceRule"],groups:["CSS Fonts"],descriptors:{"font-display":{syntax:"[ auto | block | swap | fallback | optional ]",media:"visual",percentages:"no",initial:"auto",computed:"asSpecified",order:"uniqueOrder",status:"experimental"},"font-family":{syntax:"<family-name>",media:"all",initial:"n/a (required)",percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},"font-feature-settings":{syntax:"normal | <feature-tag-value>#",media:"all",initial:"normal",percentages:"no",computed:"asSpecified",order:"orderOfAppearance",status:"standard"},"font-variation-settings":{syntax:"normal | [ <string> <number> ]#",media:"all",initial:"normal",percentages:"no",computed:"asSpecified",order:"orderOfAppearance",status:"standard"},"font-stretch":{syntax:"<font-stretch-absolute>{1,2}",media:"all",initial:"normal",percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},"font-style":{syntax:"normal | italic | oblique <angle>{0,2}",media:"all",initial:"normal",percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},"font-weight":{syntax:"<font-weight-absolute>{1,2}",media:"all",initial:"normal",percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},"font-variant":{syntax:"normal | none | [ <common-lig-values> || <discretionary-lig-values> || <historical-lig-values> || <contextual-alt-values> || stylistic(<feature-value-name>) || historical-forms || styleset(<feature-value-name>#) || character-variant(<feature-value-name>#) || swash(<feature-value-name>) || ornaments(<feature-value-name>) || annotation(<feature-value-name>) || [ small-caps | all-small-caps | petite-caps | all-petite-caps | unicase | titling-caps ] || <numeric-figure-values> || <numeric-spacing-values> || <numeric-fraction-values> || ordinal || slashed-zero || <east-asian-variant-values> || <east-asian-width-values> || ruby ]",media:"all",initial:"normal",percentages:"no",computed:"asSpecified",order:"orderOfAppearance",status:"standard"},src:{syntax:"[ <url> [ format( <string># ) ]? | local( <family-name> ) ]#",media:"all",initial:"n/a (required)",percentages:"no",computed:"asSpecified",order:"orderOfAppearance",status:"standard"},"unicode-range":{syntax:"<unicode-range>#",media:"all",initial:"U+0-10FFFF",percentages:"no",computed:"asSpecified",order:"orderOfAppearance",status:"standard"}},status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@font-face"},"@font-feature-values":{syntax:`@font-feature-values <family-name># {
  <feature-value-block-list>
}`,interfaces:["CSSFontFeatureValuesRule"],groups:["CSS Fonts"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@font-feature-values"},"@import":{syntax:"@import [ <string> | <url> ] [ <media-query-list> ]?;",groups:["Media Queries"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@import"},"@keyframes":{syntax:`@keyframes <keyframes-name> {
  <keyframe-block-list>
}`,interfaces:["CSSKeyframeRule","CSSKeyframesRule"],groups:["CSS Animations"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@keyframes"},"@media":{syntax:`@media <media-query-list> {
  <group-rule-body>
}`,interfaces:["CSSGroupingRule","CSSConditionRule","CSSMediaRule","CSSCustomMediaRule"],groups:["CSS Conditional Rules","Media Queries"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@media"},"@namespace":{syntax:"@namespace <namespace-prefix>? [ <string> | <url> ];",groups:["CSS Namespaces"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@namespace"},"@page":{syntax:`@page <page-selector-list> {
  <page-body>
}`,interfaces:["CSSPageRule"],groups:["CSS Pages"],descriptors:{bleed:{syntax:"auto | <length>",media:["visual","paged"],initial:"auto",percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},marks:{syntax:"none | [ crop || cross ]",media:["visual","paged"],initial:"none",percentages:"no",computed:"asSpecified",order:"orderOfAppearance",status:"standard"},size:{syntax:"<length>{1,2} | auto | [ <page-size> || [ portrait | landscape ] ]",media:["visual","paged"],initial:"auto",percentages:"no",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"orderOfAppearance",status:"standard"}},status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@page"},"@property":{syntax:`@property <custom-property-name> {
  <declaration-list>
}`,interfaces:["CSS","CSSPropertyRule"],groups:["CSS Houdini"],descriptors:{syntax:{syntax:"<string>",media:"all",percentages:"no",initial:"n/a (required)",computed:"asSpecified",order:"uniqueOrder",status:"experimental"},inherits:{syntax:"true | false",media:"all",percentages:"no",initial:"auto",computed:"asSpecified",order:"uniqueOrder",status:"experimental"},"initial-value":{syntax:"<string>",media:"all",initial:"n/a (required)",percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"experimental"}},status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@property"},"@supports":{syntax:`@supports <supports-condition> {
  <group-rule-body>
}`,interfaces:["CSSGroupingRule","CSSConditionRule","CSSSupportsRule"],groups:["CSS Conditional Rules"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@supports"},"@viewport":{syntax:`@viewport {
  <group-rule-body>
}`,interfaces:["CSSViewportRule"],groups:["CSS Device Adaptation"],descriptors:{height:{syntax:"<viewport-length>{1,2}",media:["visual","continuous"],initial:["min-height","max-height"],percentages:["min-height","max-height"],computed:["min-height","max-height"],order:"orderOfAppearance",status:"standard"},"max-height":{syntax:"<viewport-length>",media:["visual","continuous"],initial:"auto",percentages:"referToHeightOfInitialViewport",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard"},"max-width":{syntax:"<viewport-length>",media:["visual","continuous"],initial:"auto",percentages:"referToWidthOfInitialViewport",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard"},"max-zoom":{syntax:"auto | <number> | <percentage>",media:["visual","continuous"],initial:"auto",percentages:"the zoom factor itself",computed:"autoNonNegativeOrPercentage",order:"uniqueOrder",status:"standard"},"min-height":{syntax:"<viewport-length>",media:["visual","continuous"],initial:"auto",percentages:"referToHeightOfInitialViewport",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard"},"min-width":{syntax:"<viewport-length>",media:["visual","continuous"],initial:"auto",percentages:"referToWidthOfInitialViewport",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard"},"min-zoom":{syntax:"auto | <number> | <percentage>",media:["visual","continuous"],initial:"auto",percentages:"the zoom factor itself",computed:"autoNonNegativeOrPercentage",order:"uniqueOrder",status:"standard"},orientation:{syntax:"auto | portrait | landscape",media:["visual","continuous"],initial:"auto",percentages:"referToSizeOfBoundingBox",computed:"asSpecified",order:"uniqueOrder",status:"standard"},"user-zoom":{syntax:"zoom | fixed",media:["visual","continuous"],initial:"zoom",percentages:"referToSizeOfBoundingBox",computed:"asSpecified",order:"uniqueOrder",status:"standard"},"viewport-fit":{syntax:"auto | contain | cover",media:["visual","continuous"],initial:"auto",percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},width:{syntax:"<viewport-length>{1,2}",media:["visual","continuous"],initial:["min-width","max-width"],percentages:["min-width","max-width"],computed:["min-width","max-width"],order:"orderOfAppearance",status:"standard"},zoom:{syntax:"auto | <number> | <percentage>",media:["visual","continuous"],initial:"auto",percentages:"the zoom factor itself",computed:"autoNonNegativeOrPercentage",order:"uniqueOrder",status:"standard"}},status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@viewport"}}});var yS=Ee((h4,sO)=>{sO.exports={"--*":{syntax:"<declaration-value>",media:"all",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Variables"],initial:"seeProse",appliesto:"allElements",computed:"asSpecifiedWithVarsSubstituted",order:"perGrammar",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/--*"},"-ms-accelerator":{syntax:"false | true",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"false",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-accelerator"},"-ms-block-progression":{syntax:"tb | rl | bt | lr",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"tb",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-block-progression"},"-ms-content-zoom-chaining":{syntax:"none | chained",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"none",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-content-zoom-chaining"},"-ms-content-zooming":{syntax:"none | zoom",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"zoomForTheTopLevelNoneForTheRest",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-content-zooming"},"-ms-content-zoom-limit":{syntax:"<'-ms-content-zoom-limit-min'> <'-ms-content-zoom-limit-max'>",media:"interactive",inherited:!1,animationType:"discrete",percentages:["-ms-content-zoom-limit-max","-ms-content-zoom-limit-min"],groups:["Microsoft Extensions"],initial:["-ms-content-zoom-limit-max","-ms-content-zoom-limit-min"],appliesto:"nonReplacedBlockAndInlineBlockElements",computed:["-ms-content-zoom-limit-max","-ms-content-zoom-limit-min"],order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-content-zoom-limit"},"-ms-content-zoom-limit-max":{syntax:"<percentage>",media:"interactive",inherited:!1,animationType:"discrete",percentages:"maxZoomFactor",groups:["Microsoft Extensions"],initial:"400%",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-content-zoom-limit-max"},"-ms-content-zoom-limit-min":{syntax:"<percentage>",media:"interactive",inherited:!1,animationType:"discrete",percentages:"minZoomFactor",groups:["Microsoft Extensions"],initial:"100%",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-content-zoom-limit-min"},"-ms-content-zoom-snap":{syntax:"<'-ms-content-zoom-snap-type'> || <'-ms-content-zoom-snap-points'>",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:["-ms-content-zoom-snap-type","-ms-content-zoom-snap-points"],appliesto:"nonReplacedBlockAndInlineBlockElements",computed:["-ms-content-zoom-snap-type","-ms-content-zoom-snap-points"],order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-content-zoom-snap"},"-ms-content-zoom-snap-points":{syntax:"snapInterval( <percentage>, <percentage> ) | snapList( <percentage># )",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"snapInterval(0%, 100%)",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-content-zoom-snap-points"},"-ms-content-zoom-snap-type":{syntax:"none | proximity | mandatory",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"none",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-content-zoom-snap-type"},"-ms-filter":{syntax:"<string>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:'""',appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-filter"},"-ms-flow-from":{syntax:"[ none | <custom-ident> ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"none",appliesto:"nonReplacedElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-flow-from"},"-ms-flow-into":{syntax:"[ none | <custom-ident> ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"none",appliesto:"iframeElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-flow-into"},"-ms-grid-columns":{syntax:"none | <track-list> | <auto-track-list>",media:"visual",inherited:!1,animationType:"simpleListOfLpcDifferenceLpc",percentages:"referToDimensionOfContentArea",groups:["CSS Grid Layout"],initial:"none",appliesto:"gridContainers",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-grid-columns"},"-ms-grid-rows":{syntax:"none | <track-list> | <auto-track-list>",media:"visual",inherited:!1,animationType:"simpleListOfLpcDifferenceLpc",percentages:"referToDimensionOfContentArea",groups:["CSS Grid Layout"],initial:"none",appliesto:"gridContainers",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-grid-rows"},"-ms-high-contrast-adjust":{syntax:"auto | none",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-high-contrast-adjust"},"-ms-hyphenate-limit-chars":{syntax:"auto | <integer>{1,3}",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-hyphenate-limit-chars"},"-ms-hyphenate-limit-lines":{syntax:"no-limit | <integer>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"no-limit",appliesto:"blockContainerElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-hyphenate-limit-lines"},"-ms-hyphenate-limit-zone":{syntax:"<percentage> | <length>",media:"visual",inherited:!0,animationType:"discrete",percentages:"referToLineBoxWidth",groups:["Microsoft Extensions"],initial:"0",appliesto:"blockContainerElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-hyphenate-limit-zone"},"-ms-ime-align":{syntax:"auto | after",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-ime-align"},"-ms-overflow-style":{syntax:"auto | none | scrollbar | -ms-autohiding-scrollbar",media:"interactive",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"auto",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-overflow-style"},"-ms-scrollbar-3dlight-color":{syntax:"<color>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"dependsOnUserAgent",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scrollbar-3dlight-color"},"-ms-scrollbar-arrow-color":{syntax:"<color>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"ButtonText",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scrollbar-arrow-color"},"-ms-scrollbar-base-color":{syntax:"<color>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"dependsOnUserAgent",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scrollbar-base-color"},"-ms-scrollbar-darkshadow-color":{syntax:"<color>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"ThreeDDarkShadow",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scrollbar-darkshadow-color"},"-ms-scrollbar-face-color":{syntax:"<color>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"ThreeDFace",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scrollbar-face-color"},"-ms-scrollbar-highlight-color":{syntax:"<color>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"ThreeDHighlight",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scrollbar-highlight-color"},"-ms-scrollbar-shadow-color":{syntax:"<color>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"ThreeDDarkShadow",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scrollbar-shadow-color"},"-ms-scrollbar-track-color":{syntax:"<color>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"Scrollbar",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scrollbar-track-color"},"-ms-scroll-chaining":{syntax:"chained | none",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"chained",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-chaining"},"-ms-scroll-limit":{syntax:"<'-ms-scroll-limit-x-min'> <'-ms-scroll-limit-y-min'> <'-ms-scroll-limit-x-max'> <'-ms-scroll-limit-y-max'>",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:["-ms-scroll-limit-x-min","-ms-scroll-limit-y-min","-ms-scroll-limit-x-max","-ms-scroll-limit-y-max"],appliesto:"nonReplacedBlockAndInlineBlockElements",computed:["-ms-scroll-limit-x-min","-ms-scroll-limit-y-min","-ms-scroll-limit-x-max","-ms-scroll-limit-y-max"],order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-limit"},"-ms-scroll-limit-x-max":{syntax:"auto | <length>",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"auto",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-limit-x-max"},"-ms-scroll-limit-x-min":{syntax:"<length>",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"0",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-limit-x-min"},"-ms-scroll-limit-y-max":{syntax:"auto | <length>",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"auto",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-limit-y-max"},"-ms-scroll-limit-y-min":{syntax:"<length>",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"0",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-limit-y-min"},"-ms-scroll-rails":{syntax:"none | railed",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"railed",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-rails"},"-ms-scroll-snap-points-x":{syntax:"snapInterval( <length-percentage>, <length-percentage> ) | snapList( <length-percentage># )",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"snapInterval(0px, 100%)",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-snap-points-x"},"-ms-scroll-snap-points-y":{syntax:"snapInterval( <length-percentage>, <length-percentage> ) | snapList( <length-percentage># )",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"snapInterval(0px, 100%)",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-snap-points-y"},"-ms-scroll-snap-type":{syntax:"none | proximity | mandatory",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"none",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-snap-type"},"-ms-scroll-snap-x":{syntax:"<'-ms-scroll-snap-type'> <'-ms-scroll-snap-points-x'>",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:["-ms-scroll-snap-type","-ms-scroll-snap-points-x"],appliesto:"nonReplacedBlockAndInlineBlockElements",computed:["-ms-scroll-snap-type","-ms-scroll-snap-points-x"],order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-snap-x"},"-ms-scroll-snap-y":{syntax:"<'-ms-scroll-snap-type'> <'-ms-scroll-snap-points-y'>",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:["-ms-scroll-snap-type","-ms-scroll-snap-points-y"],appliesto:"nonReplacedBlockAndInlineBlockElements",computed:["-ms-scroll-snap-type","-ms-scroll-snap-points-y"],order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-snap-y"},"-ms-scroll-translation":{syntax:"none | vertical-to-horizontal",media:"interactive",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-translation"},"-ms-text-autospace":{syntax:"none | ideograph-alpha | ideograph-numeric | ideograph-parenthesis | ideograph-space",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-text-autospace"},"-ms-touch-select":{syntax:"grippers | none",media:"interactive",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"grippers",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-touch-select"},"-ms-user-select":{syntax:"none | element | text",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"text",appliesto:"nonReplacedElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-user-select"},"-ms-wrap-flow":{syntax:"auto | both | start | end | maximum | clear",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"auto",appliesto:"blockLevelElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-wrap-flow"},"-ms-wrap-margin":{syntax:"<length>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"0",appliesto:"exclusionElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-wrap-margin"},"-ms-wrap-through":{syntax:"wrap | none",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"wrap",appliesto:"blockLevelElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-wrap-through"},"-moz-appearance":{syntax:"none | button | button-arrow-down | button-arrow-next | button-arrow-previous | button-arrow-up | button-bevel | button-focus | caret | checkbox | checkbox-container | checkbox-label | checkmenuitem | dualbutton | groupbox | listbox | listitem | menuarrow | menubar | menucheckbox | menuimage | menuitem | menuitemtext | menulist | menulist-button | menulist-text | menulist-textfield | menupopup | menuradio | menuseparator | meterbar | meterchunk | progressbar | progressbar-vertical | progresschunk | progresschunk-vertical | radio | radio-container | radio-label | radiomenuitem | range | range-thumb | resizer | resizerpanel | scale-horizontal | scalethumbend | scalethumb-horizontal | scalethumbstart | scalethumbtick | scalethumb-vertical | scale-vertical | scrollbarbutton-down | scrollbarbutton-left | scrollbarbutton-right | scrollbarbutton-up | scrollbarthumb-horizontal | scrollbarthumb-vertical | scrollbartrack-horizontal | scrollbartrack-vertical | searchfield | separator | sheet | spinner | spinner-downbutton | spinner-textfield | spinner-upbutton | splitter | statusbar | statusbarpanel | tab | tabpanel | tabpanels | tab-scroll-arrow-back | tab-scroll-arrow-forward | textfield | textfield-multiline | toolbar | toolbarbutton | toolbarbutton-dropdown | toolbargripper | toolbox | tooltip | treeheader | treeheadercell | treeheadersortarrow | treeitem | treeline | treetwisty | treetwistyopen | treeview | -moz-mac-unified-toolbar | -moz-win-borderless-glass | -moz-win-browsertabbar-toolbox | -moz-win-communicationstext | -moz-win-communications-toolbox | -moz-win-exclude-glass | -moz-win-glass | -moz-win-mediatext | -moz-win-media-toolbox | -moz-window-button-box | -moz-window-button-box-maximized | -moz-window-button-close | -moz-window-button-maximize | -moz-window-button-minimize | -moz-window-button-restore | -moz-window-frame-bottom | -moz-window-frame-left | -moz-window-frame-right | -moz-window-titlebar | -moz-window-titlebar-maximized",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions","WebKit Extensions"],initial:"noneButOverriddenInUserAgentCSS",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/appearance"},"-moz-binding":{syntax:"<url> | none",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"none",appliesto:"allElementsExceptGeneratedContentOrPseudoElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-binding"},"-moz-border-bottom-colors":{syntax:"<color>+ | none",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-border-bottom-colors"},"-moz-border-left-colors":{syntax:"<color>+ | none",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-border-left-colors"},"-moz-border-right-colors":{syntax:"<color>+ | none",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-border-right-colors"},"-moz-border-top-colors":{syntax:"<color>+ | none",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-border-top-colors"},"-moz-context-properties":{syntax:"none | [ fill | fill-opacity | stroke | stroke-opacity ]#",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"none",appliesto:"allElementsThatCanReferenceImages",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-context-properties"},"-moz-float-edge":{syntax:"border-box | content-box | margin-box | padding-box",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"content-box",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-float-edge"},"-moz-force-broken-image-icon":{syntax:"<integer [0,1]>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"0",appliesto:"images",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-force-broken-image-icon"},"-moz-image-region":{syntax:"<shape> | auto",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"auto",appliesto:"xulImageElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-image-region"},"-moz-orient":{syntax:"inline | block | horizontal | vertical",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"inline",appliesto:"anyElementEffectOnProgressAndMeter",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-orient"},"-moz-outline-radius":{syntax:"<outline-radius>{1,4} [ / <outline-radius>{1,4} ]?",media:"visual",inherited:!1,animationType:["-moz-outline-radius-topleft","-moz-outline-radius-topright","-moz-outline-radius-bottomright","-moz-outline-radius-bottomleft"],percentages:["-moz-outline-radius-topleft","-moz-outline-radius-topright","-moz-outline-radius-bottomright","-moz-outline-radius-bottomleft"],groups:["Mozilla Extensions"],initial:["-moz-outline-radius-topleft","-moz-outline-radius-topright","-moz-outline-radius-bottomright","-moz-outline-radius-bottomleft"],appliesto:"allElements",computed:["-moz-outline-radius-topleft","-moz-outline-radius-topright","-moz-outline-radius-bottomright","-moz-outline-radius-bottomleft"],order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-outline-radius"},"-moz-outline-radius-bottomleft":{syntax:"<outline-radius>",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["Mozilla Extensions"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-outline-radius-bottomleft"},"-moz-outline-radius-bottomright":{syntax:"<outline-radius>",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["Mozilla Extensions"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-outline-radius-bottomright"},"-moz-outline-radius-topleft":{syntax:"<outline-radius>",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["Mozilla Extensions"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-outline-radius-topleft"},"-moz-outline-radius-topright":{syntax:"<outline-radius>",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["Mozilla Extensions"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-outline-radius-topright"},"-moz-stack-sizing":{syntax:"ignore | stretch-to-fit",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"stretch-to-fit",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-stack-sizing"},"-moz-text-blink":{syntax:"none | blink",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-text-blink"},"-moz-user-focus":{syntax:"ignore | normal | select-after | select-before | select-menu | select-same | select-all | none",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-user-focus"},"-moz-user-input":{syntax:"auto | none | enabled | disabled",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-user-input"},"-moz-user-modify":{syntax:"read-only | read-write | write-only",media:"interactive",inherited:!0,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"read-only",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-user-modify"},"-moz-window-dragging":{syntax:"drag | no-drag",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"drag",appliesto:"allElementsCreatingNativeWindows",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-window-dragging"},"-moz-window-shadow":{syntax:"default | menu | tooltip | sheet | none",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"default",appliesto:"allElementsCreatingNativeWindows",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-window-shadow"},"-webkit-appearance":{syntax:"none | button | button-bevel | caret | checkbox | default-button | inner-spin-button | listbox | listitem | media-controls-background | media-controls-fullscreen-background | media-current-time-display | media-enter-fullscreen-button | media-exit-fullscreen-button | media-fullscreen-button | media-mute-button | media-overlay-play-button | media-play-button | media-seek-back-button | media-seek-forward-button | media-slider | media-sliderthumb | media-time-remaining-display | media-toggle-closed-captions-button | media-volume-slider | media-volume-slider-container | media-volume-sliderthumb | menulist | menulist-button | menulist-text | menulist-textfield | meter | progress-bar | progress-bar-value | push-button | radio | searchfield | searchfield-cancel-button | searchfield-decoration | searchfield-results-button | searchfield-results-decoration | slider-horizontal | slider-vertical | sliderthumb-horizontal | sliderthumb-vertical | square-button | textarea | textfield | -apple-pay-button",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"noneButOverriddenInUserAgentCSS",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/appearance"},"-webkit-border-before":{syntax:"<'border-width'> || <'border-style'> || <'color'>",media:"visual",inherited:!0,animationType:"discrete",percentages:["-webkit-border-before-width"],groups:["WebKit Extensions"],initial:["border-width","border-style","color"],appliesto:"allElements",computed:["border-width","border-style","color"],order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-border-before"},"-webkit-border-before-color":{syntax:"<'color'>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",status:"nonstandard"},"-webkit-border-before-style":{syntax:"<'border-style'>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard"},"-webkit-border-before-width":{syntax:"<'border-width'>",media:"visual",inherited:!0,animationType:"discrete",percentages:"logicalWidthOfContainingBlock",groups:["WebKit Extensions"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthZeroIfBorderStyleNoneOrHidden",order:"uniqueOrder",status:"nonstandard"},"-webkit-box-reflect":{syntax:"[ above | below | right | left ]? <length>? <image>?",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-box-reflect"},"-webkit-line-clamp":{syntax:"none | <integer>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["WebKit Extensions","CSS Overflow"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-line-clamp"},"-webkit-mask":{syntax:"[ <mask-reference> || <position> [ / <bg-size> ]? || <repeat-style> || [ <box> | border | padding | content | text ] || [ <box> | border | padding | content ] ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:["-webkit-mask-image","-webkit-mask-repeat","-webkit-mask-attachment","-webkit-mask-position","-webkit-mask-origin","-webkit-mask-clip"],appliesto:"allElements",computed:["-webkit-mask-image","-webkit-mask-repeat","-webkit-mask-attachment","-webkit-mask-position","-webkit-mask-origin","-webkit-mask-clip"],order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask"},"-webkit-mask-attachment":{syntax:"<attachment>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"scroll",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-mask-attachment"},"-webkit-mask-clip":{syntax:"[ <box> | border | padding | content | text ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"border",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-clip"},"-webkit-mask-composite":{syntax:"<composite-style>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"source-over",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-mask-composite"},"-webkit-mask-image":{syntax:"<mask-reference>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"none",appliesto:"allElements",computed:"absoluteURIOrNone",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-image"},"-webkit-mask-origin":{syntax:"[ <box> | border | padding | content ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"padding",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-origin"},"-webkit-mask-position":{syntax:"<position>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"referToSizeOfElement",groups:["WebKit Extensions"],initial:"0% 0%",appliesto:"allElements",computed:"absoluteLengthOrPercentage",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-position"},"-webkit-mask-position-x":{syntax:"[ <length-percentage> | left | center | right ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"referToSizeOfElement",groups:["WebKit Extensions"],initial:"0%",appliesto:"allElements",computed:"absoluteLengthOrPercentage",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-mask-position-x"},"-webkit-mask-position-y":{syntax:"[ <length-percentage> | top | center | bottom ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"referToSizeOfElement",groups:["WebKit Extensions"],initial:"0%",appliesto:"allElements",computed:"absoluteLengthOrPercentage",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-mask-position-y"},"-webkit-mask-repeat":{syntax:"<repeat-style>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"repeat",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-repeat"},"-webkit-mask-repeat-x":{syntax:"repeat | no-repeat | space | round",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"repeat",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-mask-repeat-x"},"-webkit-mask-repeat-y":{syntax:"repeat | no-repeat | space | round",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"repeat",appliesto:"allElements",computed:"absoluteLengthOrPercentage",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-mask-repeat-y"},"-webkit-mask-size":{syntax:"<bg-size>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"relativeToBackgroundPositioningArea",groups:["WebKit Extensions"],initial:"auto auto",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-size"},"-webkit-overflow-scrolling":{syntax:"auto | touch",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"auto",appliesto:"scrollingBoxes",computed:"asSpecified",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-overflow-scrolling"},"-webkit-tap-highlight-color":{syntax:"<color>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"black",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-tap-highlight-color"},"-webkit-text-fill-color":{syntax:"<color>",media:"visual",inherited:!0,animationType:"color",percentages:"no",groups:["WebKit Extensions"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-text-fill-color"},"-webkit-text-stroke":{syntax:"<length> || <color>",media:"visual",inherited:!0,animationType:["-webkit-text-stroke-width","-webkit-text-stroke-color"],percentages:"no",groups:["WebKit Extensions"],initial:["-webkit-text-stroke-width","-webkit-text-stroke-color"],appliesto:"allElements",computed:["-webkit-text-stroke-width","-webkit-text-stroke-color"],order:"canonicalOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-text-stroke"},"-webkit-text-stroke-color":{syntax:"<color>",media:"visual",inherited:!0,animationType:"color",percentages:"no",groups:["WebKit Extensions"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-text-stroke-color"},"-webkit-text-stroke-width":{syntax:"<length>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"0",appliesto:"allElements",computed:"absoluteLength",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-text-stroke-width"},"-webkit-touch-callout":{syntax:"default | none",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"default",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-touch-callout"},"-webkit-user-modify":{syntax:"read-only | read-write | read-write-plaintext-only",media:"interactive",inherited:!0,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"read-only",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard"},"align-content":{syntax:"normal | <baseline-position> | <content-distribution> | <overflow-position>? <content-position>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Alignment"],initial:"normal",appliesto:"multilineFlexContainers",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/align-content"},"align-items":{syntax:"normal | stretch | <baseline-position> | [ <overflow-position>? <self-position> ]",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Alignment"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/align-items"},"align-self":{syntax:"auto | normal | stretch | <baseline-position> | <overflow-position>? <self-position>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Alignment"],initial:"auto",appliesto:"flexItemsGridItemsAndAbsolutelyPositionedBoxes",computed:"autoOnAbsolutelyPositionedElementsValueOfAlignItemsOnParent",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/align-self"},"align-tracks":{syntax:"[ normal | <baseline-position> | <content-distribution> | <overflow-position>? <content-position> ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:"normal",appliesto:"gridContainersWithMasonryLayoutInTheirBlockAxis",computed:"asSpecified",order:"uniqueOrder",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/align-tracks"},all:{syntax:"initial | inherit | unset | revert",media:"noPracticalMedia",inherited:!1,animationType:"eachOfShorthandPropertiesExceptUnicodeBiDiAndDirection",percentages:"no",groups:["CSS Miscellaneous"],initial:"noPracticalInitialValue",appliesto:"allElements",computed:"asSpecifiedAppliesToEachProperty",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/all"},animation:{syntax:"<single-animation>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Animations"],initial:["animation-name","animation-duration","animation-timing-function","animation-delay","animation-iteration-count","animation-direction","animation-fill-mode","animation-play-state"],appliesto:"allElementsAndPseudos",computed:["animation-name","animation-duration","animation-timing-function","animation-delay","animation-direction","animation-iteration-count","animation-fill-mode","animation-play-state"],order:"orderOfAppearance",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/animation"},"animation-delay":{syntax:"<time>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Animations"],initial:"0s",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/animation-delay"},"animation-direction":{syntax:"<single-animation-direction>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Animations"],initial:"normal",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/animation-direction"},"animation-duration":{syntax:"<time>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Animations"],initial:"0s",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/animation-duration"},"animation-fill-mode":{syntax:"<single-animation-fill-mode>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Animations"],initial:"none",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/animation-fill-mode"},"animation-iteration-count":{syntax:"<single-animation-iteration-count>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Animations"],initial:"1",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/animation-iteration-count"},"animation-name":{syntax:"[ none | <keyframes-name> ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Animations"],initial:"none",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/animation-name"},"animation-play-state":{syntax:"<single-animation-play-state>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Animations"],initial:"running",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/animation-play-state"},"animation-timing-function":{syntax:"<timing-function>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Animations"],initial:"ease",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/animation-timing-function"},appearance:{syntax:"none | auto | textfield | menulist-button | <compat-auto>",media:"all",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Basic User Interface"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/appearance"},"aspect-ratio":{syntax:"auto | <ratio>",media:"all",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Basic User Interface"],initial:"auto",appliesto:"allElementsExceptInlineBoxesAndInternalRubyOrTableBoxes",computed:"asSpecified",order:"perGrammar",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/aspect-ratio"},azimuth:{syntax:"<angle> | [ [ left-side | far-left | left | center-left | center | center-right | right | far-right | right-side ] || behind ] | leftwards | rightwards",media:"aural",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Speech"],initial:"center",appliesto:"allElements",computed:"normalizedAngle",order:"orderOfAppearance",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/azimuth"},"backdrop-filter":{syntax:"none | <filter-function-list>",media:"visual",inherited:!1,animationType:"filterList",percentages:"no",groups:["Filter Effects"],initial:"none",appliesto:"allElementsSVGContainerElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/backdrop-filter"},"backface-visibility":{syntax:"visible | hidden",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Transforms"],initial:"visible",appliesto:"transformableElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/backface-visibility"},background:{syntax:"[ <bg-layer> , ]* <final-bg-layer>",media:"visual",inherited:!1,animationType:["background-color","background-image","background-clip","background-position","background-size","background-repeat","background-attachment"],percentages:["background-position","background-size"],groups:["CSS Backgrounds and Borders"],initial:["background-image","background-position","background-size","background-repeat","background-origin","background-clip","background-attachment","background-color"],appliesto:"allElements",computed:["background-image","background-position","background-size","background-repeat","background-origin","background-clip","background-attachment","background-color"],order:"orderOfAppearance",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background"},"background-attachment":{syntax:"<attachment>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"scroll",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-attachment"},"background-blend-mode":{syntax:"<blend-mode>#",media:"none",inherited:!1,animationType:"discrete",percentages:"no",groups:["Compositing and Blending"],initial:"normal",appliesto:"allElementsSVGContainerGraphicsAndGraphicsReferencingElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-blend-mode"},"background-clip":{syntax:"<box>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"border-box",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-clip"},"background-color":{syntax:"<color>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"transparent",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-color"},"background-image":{syntax:"<bg-image>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"none",appliesto:"allElements",computed:"asSpecifiedURLsAbsolute",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-image"},"background-origin":{syntax:"<box>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"padding-box",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-origin"},"background-position":{syntax:"<bg-position>#",media:"visual",inherited:!1,animationType:"repeatableListOfSimpleListOfLpc",percentages:"referToSizeOfBackgroundPositioningAreaMinusBackgroundImageSize",groups:["CSS Backgrounds and Borders"],initial:"0% 0%",appliesto:"allElements",computed:"listEachItemTwoKeywordsOriginOffsets",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-position"},"background-position-x":{syntax:"[ center | [ [ left | right | x-start | x-end ]? <length-percentage>? ]! ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"referToWidthOfBackgroundPositioningAreaMinusBackgroundImageHeight",groups:["CSS Backgrounds and Borders"],initial:"left",appliesto:"allElements",computed:"listEachItemConsistingOfAbsoluteLengthPercentageAndOrigin",order:"uniqueOrder",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-position-x"},"background-position-y":{syntax:"[ center | [ [ top | bottom | y-start | y-end ]? <length-percentage>? ]! ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"referToHeightOfBackgroundPositioningAreaMinusBackgroundImageHeight",groups:["CSS Backgrounds and Borders"],initial:"top",appliesto:"allElements",computed:"listEachItemConsistingOfAbsoluteLengthPercentageAndOrigin",order:"uniqueOrder",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-position-y"},"background-repeat":{syntax:"<repeat-style>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"repeat",appliesto:"allElements",computed:"listEachItemHasTwoKeywordsOnePerDimension",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-repeat"},"background-size":{syntax:"<bg-size>#",media:"visual",inherited:!1,animationType:"repeatableListOfSimpleListOfLpc",percentages:"relativeToBackgroundPositioningArea",groups:["CSS Backgrounds and Borders"],initial:"auto auto",appliesto:"allElements",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-size"},"block-overflow":{syntax:"clip | ellipsis | <string>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Overflow"],initial:"clip",appliesto:"blockContainers",computed:"asSpecified",order:"perGrammar",status:"experimental"},"block-size":{syntax:"<'width'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"blockSizeOfContainingBlock",groups:["CSS Logical Properties"],initial:"auto",appliesto:"sameAsWidthAndHeight",computed:"sameAsWidthAndHeight",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/block-size"},border:{syntax:"<line-width> || <line-style> || <color>",media:"visual",inherited:!1,animationType:["border-color","border-style","border-width"],percentages:"no",groups:["CSS Backgrounds and Borders"],initial:["border-width","border-style","border-color"],appliesto:"allElements",computed:["border-width","border-style","border-color"],order:"orderOfAppearance",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border"},"border-block":{syntax:"<'border-top-width'> || <'border-top-style'> || <'color'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Logical Properties"],initial:["border-top-width","border-top-style","border-top-color"],appliesto:"allElements",computed:["border-top-width","border-top-style","border-top-color"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block"},"border-block-color":{syntax:"<'border-top-color'>{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Logical Properties"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-color"},"border-block-style":{syntax:"<'border-top-style'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Logical Properties"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-style"},"border-block-width":{syntax:"<'border-top-width'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthZeroIfBorderStyleNoneOrHidden",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-width"},"border-block-end":{syntax:"<'border-top-width'> || <'border-top-style'> || <'color'>",media:"visual",inherited:!1,animationType:["border-block-end-color","border-block-end-style","border-block-end-width"],percentages:"no",groups:["CSS Logical Properties"],initial:["border-top-width","border-top-style","border-top-color"],appliesto:"allElements",computed:["border-top-width","border-top-style","border-top-color"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-end"},"border-block-end-color":{syntax:"<'border-top-color'>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Logical Properties"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-end-color"},"border-block-end-style":{syntax:"<'border-top-style'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Logical Properties"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-end-style"},"border-block-end-width":{syntax:"<'border-top-width'>",media:"visual",inherited:!1,animationType:"length",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthZeroIfBorderStyleNoneOrHidden",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-end-width"},"border-block-start":{syntax:"<'border-top-width'> || <'border-top-style'> || <'color'>",media:"visual",inherited:!1,animationType:["border-block-start-color","border-block-start-style","border-block-start-width"],percentages:"no",groups:["CSS Logical Properties"],initial:["border-width","border-style","color"],appliesto:"allElements",computed:["border-width","border-style","border-block-start-color"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-start"},"border-block-start-color":{syntax:"<'border-top-color'>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Logical Properties"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-start-color"},"border-block-start-style":{syntax:"<'border-top-style'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Logical Properties"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-start-style"},"border-block-start-width":{syntax:"<'border-top-width'>",media:"visual",inherited:!1,animationType:"length",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthZeroIfBorderStyleNoneOrHidden",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-start-width"},"border-bottom":{syntax:"<line-width> || <line-style> || <color>",media:"visual",inherited:!1,animationType:["border-bottom-color","border-bottom-style","border-bottom-width"],percentages:"no",groups:["CSS Backgrounds and Borders"],initial:["border-bottom-width","border-bottom-style","border-bottom-color"],appliesto:"allElements",computed:["border-bottom-width","border-bottom-style","border-bottom-color"],order:"orderOfAppearance",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-bottom"},"border-bottom-color":{syntax:"<'border-top-color'>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-bottom-color"},"border-bottom-left-radius":{syntax:"<length-percentage>{1,2}",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["CSS Backgrounds and Borders"],initial:"0",appliesto:"allElementsUAsNotRequiredWhenCollapse",computed:"twoAbsoluteLengthOrPercentages",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-bottom-left-radius"},"border-bottom-right-radius":{syntax:"<length-percentage>{1,2}",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["CSS Backgrounds and Borders"],initial:"0",appliesto:"allElementsUAsNotRequiredWhenCollapse",computed:"twoAbsoluteLengthOrPercentages",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-bottom-right-radius"},"border-bottom-style":{syntax:"<line-style>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-bottom-style"},"border-bottom-width":{syntax:"<line-width>",media:"visual",inherited:!1,animationType:"length",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthOr0IfBorderBottomStyleNoneOrHidden",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-bottom-width"},"border-collapse":{syntax:"collapse | separate",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Table"],initial:"separate",appliesto:"tableElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-collapse"},"border-color":{syntax:"<color>{1,4}",media:"visual",inherited:!1,animationType:["border-bottom-color","border-left-color","border-right-color","border-top-color"],percentages:"no",groups:["CSS Backgrounds and Borders"],initial:["border-top-color","border-right-color","border-bottom-color","border-left-color"],appliesto:"allElements",computed:["border-bottom-color","border-left-color","border-right-color","border-top-color"],order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-color"},"border-end-end-radius":{syntax:"<length-percentage>{1,2}",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["CSS Logical Properties"],initial:"0",appliesto:"allElementsUAsNotRequiredWhenCollapse",computed:"twoAbsoluteLengthOrPercentages",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-end-end-radius"},"border-end-start-radius":{syntax:"<length-percentage>{1,2}",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["CSS Logical Properties"],initial:"0",appliesto:"allElementsUAsNotRequiredWhenCollapse",computed:"twoAbsoluteLengthOrPercentages",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-end-start-radius"},"border-image":{syntax:"<'border-image-source'> || <'border-image-slice'> [ / <'border-image-width'> | / <'border-image-width'>? / <'border-image-outset'> ]? || <'border-image-repeat'>",media:"visual",inherited:!1,animationType:"discrete",percentages:["border-image-slice","border-image-width"],groups:["CSS Backgrounds and Borders"],initial:["border-image-source","border-image-slice","border-image-width","border-image-outset","border-image-repeat"],appliesto:"allElementsExceptTableElementsWhenCollapse",computed:["border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width"],order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-image"},"border-image-outset":{syntax:"[ <length> | <number> ]{1,4}",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"0",appliesto:"allElementsExceptTableElementsWhenCollapse",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-image-outset"},"border-image-repeat":{syntax:"[ stretch | repeat | round | space ]{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"stretch",appliesto:"allElementsExceptTableElementsWhenCollapse",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-image-repeat"},"border-image-slice":{syntax:"<number-percentage>{1,4} && fill?",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"referToSizeOfBorderImage",groups:["CSS Backgrounds and Borders"],initial:"100%",appliesto:"allElementsExceptTableElementsWhenCollapse",computed:"oneToFourPercentagesOrAbsoluteLengthsPlusFill",order:"percentagesOrLengthsFollowedByFill",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-image-slice"},"border-image-source":{syntax:"none | <image>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"none",appliesto:"allElementsExceptTableElementsWhenCollapse",computed:"noneOrImageWithAbsoluteURI",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-image-source"},"border-image-width":{syntax:"[ <length-percentage> | <number> | auto ]{1,4}",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"referToWidthOrHeightOfBorderImageArea",groups:["CSS Backgrounds and Borders"],initial:"1",appliesto:"allElementsExceptTableElementsWhenCollapse",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-image-width"},"border-inline":{syntax:"<'border-top-width'> || <'border-top-style'> || <'color'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Logical Properties"],initial:["border-top-width","border-top-style","border-top-color"],appliesto:"allElements",computed:["border-top-width","border-top-style","border-top-color"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline"},"border-inline-end":{syntax:"<'border-top-width'> || <'border-top-style'> || <'color'>",media:"visual",inherited:!1,animationType:["border-inline-end-color","border-inline-end-style","border-inline-end-width"],percentages:"no",groups:["CSS Logical Properties"],initial:["border-width","border-style","color"],appliesto:"allElements",computed:["border-width","border-style","border-inline-end-color"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-end"},"border-inline-color":{syntax:"<'border-top-color'>{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Logical Properties"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-color"},"border-inline-style":{syntax:"<'border-top-style'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Logical Properties"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-style"},"border-inline-width":{syntax:"<'border-top-width'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthZeroIfBorderStyleNoneOrHidden",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-width"},"border-inline-end-color":{syntax:"<'border-top-color'>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Logical Properties"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-end-color"},"border-inline-end-style":{syntax:"<'border-top-style'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Logical Properties"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-end-style"},"border-inline-end-width":{syntax:"<'border-top-width'>",media:"visual",inherited:!1,animationType:"length",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthZeroIfBorderStyleNoneOrHidden",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-end-width"},"border-inline-start":{syntax:"<'border-top-width'> || <'border-top-style'> || <'color'>",media:"visual",inherited:!1,animationType:["border-inline-start-color","border-inline-start-style","border-inline-start-width"],percentages:"no",groups:["CSS Logical Properties"],initial:["border-width","border-style","color"],appliesto:"allElements",computed:["border-width","border-style","border-inline-start-color"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-start"},"border-inline-start-color":{syntax:"<'border-top-color'>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Logical Properties"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-start-color"},"border-inline-start-style":{syntax:"<'border-top-style'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Logical Properties"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-start-style"},"border-inline-start-width":{syntax:"<'border-top-width'>",media:"visual",inherited:!1,animationType:"length",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthZeroIfBorderStyleNoneOrHidden",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-start-width"},"border-left":{syntax:"<line-width> || <line-style> || <color>",media:"visual",inherited:!1,animationType:["border-left-color","border-left-style","border-left-width"],percentages:"no",groups:["CSS Backgrounds and Borders"],initial:["border-left-width","border-left-style","border-left-color"],appliesto:"allElements",computed:["border-left-width","border-left-style","border-left-color"],order:"orderOfAppearance",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-left"},"border-left-color":{syntax:"<color>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-left-color"},"border-left-style":{syntax:"<line-style>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-left-style"},"border-left-width":{syntax:"<line-width>",media:"visual",inherited:!1,animationType:"length",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthOr0IfBorderLeftStyleNoneOrHidden",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-left-width"},"border-radius":{syntax:"<length-percentage>{1,4} [ / <length-percentage>{1,4} ]?",media:"visual",inherited:!1,animationType:["border-top-left-radius","border-top-right-radius","border-bottom-right-radius","border-bottom-left-radius"],percentages:"referToDimensionOfBorderBox",groups:["CSS Backgrounds and Borders"],initial:["border-top-left-radius","border-top-right-radius","border-bottom-right-radius","border-bottom-left-radius"],appliesto:"allElementsUAsNotRequiredWhenCollapse",computed:["border-bottom-left-radius","border-bottom-right-radius","border-top-left-radius","border-top-right-radius"],order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-radius"},"border-right":{syntax:"<line-width> || <line-style> || <color>",media:"visual",inherited:!1,animationType:["border-right-color","border-right-style","border-right-width"],percentages:"no",groups:["CSS Backgrounds and Borders"],initial:["border-right-width","border-right-style","border-right-color"],appliesto:"allElements",computed:["border-right-width","border-right-style","border-right-color"],order:"orderOfAppearance",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-right"},"border-right-color":{syntax:"<color>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-right-color"},"border-right-style":{syntax:"<line-style>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-right-style"},"border-right-width":{syntax:"<line-width>",media:"visual",inherited:!1,animationType:"length",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthOr0IfBorderRightStyleNoneOrHidden",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-right-width"},"border-spacing":{syntax:"<length> <length>?",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Table"],initial:"0",appliesto:"tableElements",computed:"twoAbsoluteLengths",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-spacing"},"border-start-end-radius":{syntax:"<length-percentage>{1,2}",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["CSS Logical Properties"],initial:"0",appliesto:"allElementsUAsNotRequiredWhenCollapse",computed:"twoAbsoluteLengthOrPercentages",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-start-end-radius"},"border-start-start-radius":{syntax:"<length-percentage>{1,2}",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["CSS Logical Properties"],initial:"0",appliesto:"allElementsUAsNotRequiredWhenCollapse",computed:"twoAbsoluteLengthOrPercentages",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-start-start-radius"},"border-style":{syntax:"<line-style>{1,4}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:["border-top-style","border-right-style","border-bottom-style","border-left-style"],appliesto:"allElements",computed:["border-bottom-style","border-left-style","border-right-style","border-top-style"],order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-style"},"border-top":{syntax:"<line-width> || <line-style> || <color>",media:"visual",inherited:!1,animationType:["border-top-color","border-top-style","border-top-width"],percentages:"no",groups:["CSS Backgrounds and Borders"],initial:["border-top-width","border-top-style","border-top-color"],appliesto:"allElements",computed:["border-top-width","border-top-style","border-top-color"],order:"orderOfAppearance",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-top"},"border-top-color":{syntax:"<color>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-top-color"},"border-top-left-radius":{syntax:"<length-percentage>{1,2}",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["CSS Backgrounds and Borders"],initial:"0",appliesto:"allElementsUAsNotRequiredWhenCollapse",computed:"twoAbsoluteLengthOrPercentages",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-top-left-radius"},"border-top-right-radius":{syntax:"<length-percentage>{1,2}",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["CSS Backgrounds and Borders"],initial:"0",appliesto:"allElementsUAsNotRequiredWhenCollapse",computed:"twoAbsoluteLengthOrPercentages",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-top-right-radius"},"border-top-style":{syntax:"<line-style>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-top-style"},"border-top-width":{syntax:"<line-width>",media:"visual",inherited:!1,animationType:"length",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthOr0IfBorderTopStyleNoneOrHidden",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-top-width"},"border-width":{syntax:"<line-width>{1,4}",media:"visual",inherited:!1,animationType:["border-bottom-width","border-left-width","border-right-width","border-top-width"],percentages:"no",groups:["CSS Backgrounds and Borders"],initial:["border-top-width","border-right-width","border-bottom-width","border-left-width"],appliesto:"allElements",computed:["border-bottom-width","border-left-width","border-right-width","border-top-width"],order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-width"},bottom:{syntax:"<length> | <percentage> | auto",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToContainingBlockHeight",groups:["CSS Positioning"],initial:"auto",appliesto:"positionedElements",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/bottom"},"box-align":{syntax:"start | center | end | baseline | stretch",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions","WebKit Extensions"],initial:"stretch",appliesto:"elementsWithDisplayBoxOrInlineBox",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-align"},"box-decoration-break":{syntax:"slice | clone",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Fragmentation"],initial:"slice",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-decoration-break"},"box-direction":{syntax:"normal | reverse | inherit",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions","WebKit Extensions"],initial:"normal",appliesto:"elementsWithDisplayBoxOrInlineBox",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-direction"},"box-flex":{syntax:"<number>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions","WebKit Extensions"],initial:"0",appliesto:"directChildrenOfElementsWithDisplayMozBoxMozInlineBox",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-flex"},"box-flex-group":{syntax:"<integer>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions","WebKit Extensions"],initial:"1",appliesto:"inFlowChildrenOfBoxElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-flex-group"},"box-lines":{syntax:"single | multiple",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions","WebKit Extensions"],initial:"single",appliesto:"boxElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-lines"},"box-ordinal-group":{syntax:"<integer>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions","WebKit Extensions"],initial:"1",appliesto:"childrenOfBoxElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-ordinal-group"},"box-orient":{syntax:"horizontal | vertical | inline-axis | block-axis | inherit",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions","WebKit Extensions"],initial:"inlineAxisHorizontalInXUL",appliesto:"elementsWithDisplayBoxOrInlineBox",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-orient"},"box-pack":{syntax:"start | center | end | justify",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions","WebKit Extensions"],initial:"start",appliesto:"elementsWithDisplayMozBoxMozInlineBox",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-pack"},"box-shadow":{syntax:"none | <shadow>#",media:"visual",inherited:!1,animationType:"shadowList",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"none",appliesto:"allElements",computed:"absoluteLengthsSpecifiedColorAsSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-shadow"},"box-sizing":{syntax:"content-box | border-box",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Basic User Interface"],initial:"content-box",appliesto:"allElementsAcceptingWidthOrHeight",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-sizing"},"break-after":{syntax:"auto | avoid | always | all | avoid-page | page | left | right | recto | verso | avoid-column | column | avoid-region | region",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Fragmentation"],initial:"auto",appliesto:"blockLevelElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/break-after"},"break-before":{syntax:"auto | avoid | always | all | avoid-page | page | left | right | recto | verso | avoid-column | column | avoid-region | region",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Fragmentation"],initial:"auto",appliesto:"blockLevelElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/break-before"},"break-inside":{syntax:"auto | avoid | avoid-page | avoid-column | avoid-region",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Fragmentation"],initial:"auto",appliesto:"blockLevelElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/break-inside"},"caption-side":{syntax:"top | bottom | block-start | block-end | inline-start | inline-end",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Table"],initial:"top",appliesto:"tableCaptionElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/caption-side"},"caret-color":{syntax:"auto | <color>",media:"interactive",inherited:!0,animationType:"color",percentages:"no",groups:["CSS Basic User Interface"],initial:"auto",appliesto:"allElements",computed:"asAutoOrColor",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/caret-color"},clear:{syntax:"none | left | right | both | inline-start | inline-end",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Positioning"],initial:"none",appliesto:"blockLevelElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/clear"},clip:{syntax:"<shape> | auto",media:"visual",inherited:!1,animationType:"rectangle",percentages:"no",groups:["CSS Masking"],initial:"auto",appliesto:"absolutelyPositionedElements",computed:"autoOrRectangle",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/clip"},"clip-path":{syntax:"<clip-source> | [ <basic-shape> || <geometry-box> ] | none",media:"visual",inherited:!1,animationType:"basicShapeOtherwiseNo",percentages:"referToReferenceBoxWhenSpecifiedOtherwiseBorderBox",groups:["CSS Masking"],initial:"none",appliesto:"allElementsSVGContainerElements",computed:"asSpecifiedURLsAbsolute",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/clip-path"},color:{syntax:"<color>",media:"visual",inherited:!0,animationType:"color",percentages:"no",groups:["CSS Color"],initial:"variesFromBrowserToBrowser",appliesto:"allElements",computed:"translucentValuesRGBAOtherwiseRGB",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/color"},"color-adjust":{syntax:"economy | exact",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Color"],initial:"economy",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/color-adjust"},"column-count":{syntax:"<integer> | auto",media:"visual",inherited:!1,animationType:"integer",percentages:"no",groups:["CSS Columns"],initial:"auto",appliesto:"blockContainersExceptTableWrappers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/column-count"},"column-fill":{syntax:"auto | balance | balance-all",media:"visualInContinuousMediaNoEffectInOverflowColumns",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Columns"],initial:"balance",appliesto:"multicolElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/column-fill"},"column-gap":{syntax:"normal | <length-percentage>",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfContentArea",groups:["CSS Box Alignment"],initial:"normal",appliesto:"multiColumnElementsFlexContainersGridContainers",computed:"asSpecifiedWithLengthsAbsoluteAndNormalComputingToZeroExceptMultiColumn",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/column-gap"},"column-rule":{syntax:"<'column-rule-width'> || <'column-rule-style'> || <'column-rule-color'>",media:"visual",inherited:!1,animationType:["column-rule-color","column-rule-style","column-rule-width"],percentages:"no",groups:["CSS Columns"],initial:["column-rule-width","column-rule-style","column-rule-color"],appliesto:"multicolElements",computed:["column-rule-color","column-rule-style","column-rule-width"],order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/column-rule"},"column-rule-color":{syntax:"<color>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Columns"],initial:"currentcolor",appliesto:"multicolElements",computed:"computedColor",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/column-rule-color"},"column-rule-style":{syntax:"<'border-style'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Columns"],initial:"none",appliesto:"multicolElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/column-rule-style"},"column-rule-width":{syntax:"<'border-width'>",media:"visual",inherited:!1,animationType:"length",percentages:"no",groups:["CSS Columns"],initial:"medium",appliesto:"multicolElements",computed:"absoluteLength0IfColumnRuleStyleNoneOrHidden",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/column-rule-width"},"column-span":{syntax:"none | all",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Columns"],initial:"none",appliesto:"inFlowBlockLevelElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/column-span"},"column-width":{syntax:"<length> | auto",media:"visual",inherited:!1,animationType:"length",percentages:"no",groups:["CSS Columns"],initial:"auto",appliesto:"blockContainersExceptTableWrappers",computed:"absoluteLengthZeroOrLarger",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/column-width"},columns:{syntax:"<'column-width'> || <'column-count'>",media:"visual",inherited:!1,animationType:["column-width","column-count"],percentages:"no",groups:["CSS Columns"],initial:["column-width","column-count"],appliesto:"blockContainersExceptTableWrappers",computed:["column-width","column-count"],order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/columns"},contain:{syntax:"none | strict | content | [ size || layout || style || paint ]",media:"all",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Containment"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/contain"},content:{syntax:"normal | none | [ <content-replacement> | <content-list> ] [/ <string> ]?",media:"all",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Generated Content"],initial:"normal",appliesto:"beforeAndAfterPseudos",computed:"normalOnElementsForPseudosNoneAbsoluteURIStringOrAsSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/content"},"counter-increment":{syntax:"[ <custom-ident> <integer>? ]+ | none",media:"all",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Counter Styles"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/counter-increment"},"counter-reset":{syntax:"[ <custom-ident> <integer>? ]+ | none",media:"all",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Counter Styles"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/counter-reset"},"counter-set":{syntax:"[ <custom-ident> <integer>? ]+ | none",media:"all",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Counter Styles"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/counter-set"},cursor:{syntax:"[ [ <url> [ <x> <y> ]? , ]* [ auto | default | none | context-menu | help | pointer | progress | wait | cell | crosshair | text | vertical-text | alias | copy | move | no-drop | not-allowed | e-resize | n-resize | ne-resize | nw-resize | s-resize | se-resize | sw-resize | w-resize | ew-resize | ns-resize | nesw-resize | nwse-resize | col-resize | row-resize | all-scroll | zoom-in | zoom-out | grab | grabbing ] ]",media:["visual","interactive"],inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Basic User Interface"],initial:"auto",appliesto:"allElements",computed:"asSpecifiedURLsAbsolute",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/cursor"},direction:{syntax:"ltr | rtl",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Writing Modes"],initial:"ltr",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/direction"},display:{syntax:"[ <display-outside> || <display-inside> ] | <display-listitem> | <display-internal> | <display-box> | <display-legacy>",media:"all",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Display"],initial:"inline",appliesto:"allElements",computed:"asSpecifiedExceptPositionedFloatingAndRootElementsKeywordMaybeDifferent",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/display"},"empty-cells":{syntax:"show | hide",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Table"],initial:"show",appliesto:"tableCellElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/empty-cells"},filter:{syntax:"none | <filter-function-list>",media:"visual",inherited:!1,animationType:"filterList",percentages:"no",groups:["Filter Effects"],initial:"none",appliesto:"allElementsSVGContainerElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/filter"},flex:{syntax:"none | [ <'flex-grow'> <'flex-shrink'>? || <'flex-basis'> ]",media:"visual",inherited:!1,animationType:["flex-grow","flex-shrink","flex-basis"],percentages:"no",groups:["CSS Flexible Box Layout"],initial:["flex-grow","flex-shrink","flex-basis"],appliesto:"flexItemsAndInFlowPseudos",computed:["flex-grow","flex-shrink","flex-basis"],order:"orderOfAppearance",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/flex"},"flex-basis":{syntax:"content | <'width'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToFlexContainersInnerMainSize",groups:["CSS Flexible Box Layout"],initial:"auto",appliesto:"flexItemsAndInFlowPseudos",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"lengthOrPercentageBeforeKeywordIfBothPresent",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/flex-basis"},"flex-direction":{syntax:"row | row-reverse | column | column-reverse",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Flexible Box Layout"],initial:"row",appliesto:"flexContainers",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/flex-direction"},"flex-flow":{syntax:"<'flex-direction'> || <'flex-wrap'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Flexible Box Layout"],initial:["flex-direction","flex-wrap"],appliesto:"flexContainers",computed:["flex-direction","flex-wrap"],order:"orderOfAppearance",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/flex-flow"},"flex-grow":{syntax:"<number>",media:"visual",inherited:!1,animationType:"number",percentages:"no",groups:["CSS Flexible Box Layout"],initial:"0",appliesto:"flexItemsAndInFlowPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/flex-grow"},"flex-shrink":{syntax:"<number>",media:"visual",inherited:!1,animationType:"number",percentages:"no",groups:["CSS Flexible Box Layout"],initial:"1",appliesto:"flexItemsAndInFlowPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/flex-shrink"},"flex-wrap":{syntax:"nowrap | wrap | wrap-reverse",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Flexible Box Layout"],initial:"nowrap",appliesto:"flexContainers",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/flex-wrap"},float:{syntax:"left | right | none | inline-start | inline-end",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Positioning"],initial:"none",appliesto:"allElementsNoEffectIfDisplayNone",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/float"},font:{syntax:"[ [ <'font-style'> || <font-variant-css21> || <'font-weight'> || <'font-stretch'> ]? <'font-size'> [ / <'line-height'> ]? <'font-family'> ] | caption | icon | menu | message-box | small-caption | status-bar",media:"visual",inherited:!0,animationType:["font-style","font-variant","font-weight","font-stretch","font-size","line-height","font-family"],percentages:["font-size","line-height"],groups:["CSS Fonts"],initial:["font-style","font-variant","font-weight","font-stretch","font-size","line-height","font-family"],appliesto:"allElements",computed:["font-style","font-variant","font-weight","font-stretch","font-size","line-height","font-family"],order:"orderOfAppearance",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font"},"font-family":{syntax:"[ <family-name> | <generic-family> ]#",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"dependsOnUserAgent",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-family"},"font-feature-settings":{syntax:"normal | <feature-tag-value>#",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-feature-settings"},"font-kerning":{syntax:"auto | normal | none",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-kerning"},"font-language-override":{syntax:"normal | <string>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-language-override"},"font-optical-sizing":{syntax:"auto | none",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-optical-sizing"},"font-variation-settings":{syntax:"normal | [ <string> <number> ]#",media:"visual",inherited:!0,animationType:"transform",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-variation-settings"},"font-size":{syntax:"<absolute-size> | <relative-size> | <length-percentage>",media:"visual",inherited:!0,animationType:"length",percentages:"referToParentElementsFontSize",groups:["CSS Fonts"],initial:"medium",appliesto:"allElements",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-size"},"font-size-adjust":{syntax:"none | <number>",media:"visual",inherited:!0,animationType:"number",percentages:"no",groups:["CSS Fonts"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-size-adjust"},"font-smooth":{syntax:"auto | never | always | <absolute-size> | <length>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-smooth"},"font-stretch":{syntax:"<font-stretch-absolute>",media:"visual",inherited:!0,animationType:"fontStretch",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-stretch"},"font-style":{syntax:"normal | italic | oblique <angle>?",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-style"},"font-synthesis":{syntax:"none | [ weight || style ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"weight style",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-synthesis"},"font-variant":{syntax:"normal | none | [ <common-lig-values> || <discretionary-lig-values> || <historical-lig-values> || <contextual-alt-values> || stylistic( <feature-value-name> ) || historical-forms || styleset( <feature-value-name># ) || character-variant( <feature-value-name># ) || swash( <feature-value-name> ) || ornaments( <feature-value-name> ) || annotation( <feature-value-name> ) || [ small-caps | all-small-caps | petite-caps | all-petite-caps | unicase | titling-caps ] || <numeric-figure-values> || <numeric-spacing-values> || <numeric-fraction-values> || ordinal || slashed-zero || <east-asian-variant-values> || <east-asian-width-values> || ruby ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-variant"},"font-variant-alternates":{syntax:"normal | [ stylistic( <feature-value-name> ) || historical-forms || styleset( <feature-value-name># ) || character-variant( <feature-value-name># ) || swash( <feature-value-name> ) || ornaments( <feature-value-name> ) || annotation( <feature-value-name> ) ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-variant-alternates"},"font-variant-caps":{syntax:"normal | small-caps | all-small-caps | petite-caps | all-petite-caps | unicase | titling-caps",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-variant-caps"},"font-variant-east-asian":{syntax:"normal | [ <east-asian-variant-values> || <east-asian-width-values> || ruby ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-variant-east-asian"},"font-variant-ligatures":{syntax:"normal | none | [ <common-lig-values> || <discretionary-lig-values> || <historical-lig-values> || <contextual-alt-values> ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-variant-ligatures"},"font-variant-numeric":{syntax:"normal | [ <numeric-figure-values> || <numeric-spacing-values> || <numeric-fraction-values> || ordinal || slashed-zero ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-variant-numeric"},"font-variant-position":{syntax:"normal | sub | super",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-variant-position"},"font-weight":{syntax:"<font-weight-absolute> | bolder | lighter",media:"visual",inherited:!0,animationType:"fontWeight",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"keywordOrNumericalValueBolderLighterTransformedToRealValue",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-weight"},gap:{syntax:"<'row-gap'> <'column-gap'>?",media:"visual",inherited:!1,animationType:["row-gap","column-gap"],percentages:"no",groups:["CSS Box Alignment"],initial:["row-gap","column-gap"],appliesto:"multiColumnElementsFlexContainersGridContainers",computed:["row-gap","column-gap"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/gap"},grid:{syntax:"<'grid-template'> | <'grid-template-rows'> / [ auto-flow && dense? ] <'grid-auto-columns'>? | [ auto-flow && dense? ] <'grid-auto-rows'>? / <'grid-template-columns'>",media:"visual",inherited:!1,animationType:"discrete",percentages:["grid-template-rows","grid-template-columns","grid-auto-rows","grid-auto-columns"],groups:["CSS Grid Layout"],initial:["grid-template-rows","grid-template-columns","grid-template-areas","grid-auto-rows","grid-auto-columns","grid-auto-flow","grid-column-gap","grid-row-gap","column-gap","row-gap"],appliesto:"gridContainers",computed:["grid-template-rows","grid-template-columns","grid-template-areas","grid-auto-rows","grid-auto-columns","grid-auto-flow","grid-column-gap","grid-row-gap","column-gap","row-gap"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid"},"grid-area":{syntax:"<grid-line> [ / <grid-line> ]{0,3}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:["grid-row-start","grid-column-start","grid-row-end","grid-column-end"],appliesto:"gridItemsAndBoxesWithinGridContainer",computed:["grid-row-start","grid-column-start","grid-row-end","grid-column-end"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-area"},"grid-auto-columns":{syntax:"<track-size>+",media:"visual",inherited:!1,animationType:"discrete",percentages:"referToDimensionOfContentArea",groups:["CSS Grid Layout"],initial:"auto",appliesto:"gridContainers",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-auto-columns"},"grid-auto-flow":{syntax:"[ row | column ] || dense",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:"row",appliesto:"gridContainers",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-auto-flow"},"grid-auto-rows":{syntax:"<track-size>+",media:"visual",inherited:!1,animationType:"discrete",percentages:"referToDimensionOfContentArea",groups:["CSS Grid Layout"],initial:"auto",appliesto:"gridContainers",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-auto-rows"},"grid-column":{syntax:"<grid-line> [ / <grid-line> ]?",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:["grid-column-start","grid-column-end"],appliesto:"gridItemsAndBoxesWithinGridContainer",computed:["grid-column-start","grid-column-end"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-column"},"grid-column-end":{syntax:"<grid-line>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:"auto",appliesto:"gridItemsAndBoxesWithinGridContainer",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-column-end"},"grid-column-gap":{syntax:"<length-percentage>",media:"visual",inherited:!1,animationType:"length",percentages:"referToDimensionOfContentArea",groups:["CSS Grid Layout"],initial:"0",appliesto:"gridContainers",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/column-gap"},"grid-column-start":{syntax:"<grid-line>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:"auto",appliesto:"gridItemsAndBoxesWithinGridContainer",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-column-start"},"grid-gap":{syntax:"<'grid-row-gap'> <'grid-column-gap'>?",media:"visual",inherited:!1,animationType:["grid-row-gap","grid-column-gap"],percentages:"no",groups:["CSS Grid Layout"],initial:["grid-row-gap","grid-column-gap"],appliesto:"gridContainers",computed:["grid-row-gap","grid-column-gap"],order:"uniqueOrder",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/gap"},"grid-row":{syntax:"<grid-line> [ / <grid-line> ]?",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:["grid-row-start","grid-row-end"],appliesto:"gridItemsAndBoxesWithinGridContainer",computed:["grid-row-start","grid-row-end"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-row"},"grid-row-end":{syntax:"<grid-line>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:"auto",appliesto:"gridItemsAndBoxesWithinGridContainer",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-row-end"},"grid-row-gap":{syntax:"<length-percentage>",media:"visual",inherited:!1,animationType:"length",percentages:"referToDimensionOfContentArea",groups:["CSS Grid Layout"],initial:"0",appliesto:"gridContainers",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/row-gap"},"grid-row-start":{syntax:"<grid-line>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:"auto",appliesto:"gridItemsAndBoxesWithinGridContainer",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-row-start"},"grid-template":{syntax:"none | [ <'grid-template-rows'> / <'grid-template-columns'> ] | [ <line-names>? <string> <track-size>? <line-names>? ]+ [ / <explicit-track-list> ]?",media:"visual",inherited:!1,animationType:"discrete",percentages:["grid-template-columns","grid-template-rows"],groups:["CSS Grid Layout"],initial:["grid-template-columns","grid-template-rows","grid-template-areas"],appliesto:"gridContainers",computed:["grid-template-columns","grid-template-rows","grid-template-areas"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-template"},"grid-template-areas":{syntax:"none | <string>+",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:"none",appliesto:"gridContainers",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-template-areas"},"grid-template-columns":{syntax:"none | <track-list> | <auto-track-list> | subgrid <line-name-list>?",media:"visual",inherited:!1,animationType:"simpleListOfLpcDifferenceLpc",percentages:"referToDimensionOfContentArea",groups:["CSS Grid Layout"],initial:"none",appliesto:"gridContainers",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-template-columns"},"grid-template-rows":{syntax:"none | <track-list> | <auto-track-list> | subgrid <line-name-list>?",media:"visual",inherited:!1,animationType:"simpleListOfLpcDifferenceLpc",percentages:"referToDimensionOfContentArea",groups:["CSS Grid Layout"],initial:"none",appliesto:"gridContainers",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-template-rows"},"hanging-punctuation":{syntax:"none | [ first || [ force-end | allow-end ] || last ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/hanging-punctuation"},height:{syntax:"auto | <length> | <percentage> | min-content | max-content | fit-content(<length-percentage>)",media:"visual",inherited:!1,animationType:"lpc",percentages:"regardingHeightOfGeneratedBoxContainingBlockPercentagesRelativeToContainingBlock",groups:["CSS Box Model"],initial:"auto",appliesto:"allElementsButNonReplacedAndTableColumns",computed:"percentageAutoOrAbsoluteLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/height"},hyphens:{syntax:"none | manual | auto",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"manual",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/hyphens"},"image-orientation":{syntax:"from-image | <angle> | [ <angle>? flip ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Images"],initial:"from-image",appliesto:"allElements",computed:"angleRoundedToNextQuarter",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/image-orientation"},"image-rendering":{syntax:"auto | crisp-edges | pixelated",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Images"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/image-rendering"},"image-resolution":{syntax:"[ from-image || <resolution> ] && snap?",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Images"],initial:"1dppx",appliesto:"allElements",computed:"asSpecifiedWithExceptionOfResolution",order:"uniqueOrder",status:"experimental"},"ime-mode":{syntax:"auto | normal | active | inactive | disabled",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Basic User Interface"],initial:"auto",appliesto:"textFields",computed:"asSpecified",order:"uniqueOrder",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/ime-mode"},"initial-letter":{syntax:"normal | [ <number> <integer>? ]",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Inline"],initial:"normal",appliesto:"firstLetterPseudoElementsAndInlineLevelFirstChildren",computed:"asSpecified",order:"uniqueOrder",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/initial-letter"},"initial-letter-align":{syntax:"[ auto | alphabetic | hanging | ideographic ]",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Inline"],initial:"auto",appliesto:"firstLetterPseudoElementsAndInlineLevelFirstChildren",computed:"asSpecified",order:"uniqueOrder",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/initial-letter-align"},"inline-size":{syntax:"<'width'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"inlineSizeOfContainingBlock",groups:["CSS Logical Properties"],initial:"auto",appliesto:"sameAsWidthAndHeight",computed:"sameAsWidthAndHeight",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/inline-size"},inset:{syntax:"<'top'>{1,4}",media:"visual",inherited:!1,animationType:"lpc",percentages:"logicalHeightOfContainingBlock",groups:["CSS Logical Properties"],initial:"auto",appliesto:"positionedElements",computed:"sameAsBoxOffsets",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/inset"},"inset-block":{syntax:"<'top'>{1,2}",media:"visual",inherited:!1,animationType:"lpc",percentages:"logicalHeightOfContainingBlock",groups:["CSS Logical Properties"],initial:"auto",appliesto:"positionedElements",computed:"sameAsBoxOffsets",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/inset-block"},"inset-block-end":{syntax:"<'top'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"logicalHeightOfContainingBlock",groups:["CSS Logical Properties"],initial:"auto",appliesto:"positionedElements",computed:"sameAsBoxOffsets",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/inset-block-end"},"inset-block-start":{syntax:"<'top'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"logicalHeightOfContainingBlock",groups:["CSS Logical Properties"],initial:"auto",appliesto:"positionedElements",computed:"sameAsBoxOffsets",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/inset-block-start"},"inset-inline":{syntax:"<'top'>{1,2}",media:"visual",inherited:!1,animationType:"lpc",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"auto",appliesto:"positionedElements",computed:"sameAsBoxOffsets",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/inset-inline"},"inset-inline-end":{syntax:"<'top'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"auto",appliesto:"positionedElements",computed:"sameAsBoxOffsets",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/inset-inline-end"},"inset-inline-start":{syntax:"<'top'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"auto",appliesto:"positionedElements",computed:"sameAsBoxOffsets",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/inset-inline-start"},isolation:{syntax:"auto | isolate",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Compositing and Blending"],initial:"auto",appliesto:"allElementsSVGContainerGraphicsAndGraphicsReferencingElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/isolation"},"justify-content":{syntax:"normal | <content-distribution> | <overflow-position>? [ <content-position> | left | right ]",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Alignment"],initial:"normal",appliesto:"flexContainers",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/justify-content"},"justify-items":{syntax:"normal | stretch | <baseline-position> | <overflow-position>? [ <self-position> | left | right ] | legacy | legacy && [ left | right | center ]",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Alignment"],initial:"legacy",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/justify-items"},"justify-self":{syntax:"auto | normal | stretch | <baseline-position> | <overflow-position>? [ <self-position> | left | right ]",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Alignment"],initial:"auto",appliesto:"blockLevelBoxesAndAbsolutelyPositionedBoxesAndGridItems",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/justify-self"},"justify-tracks":{syntax:"[ normal | <content-distribution> | <overflow-position>? [ <content-position> | left | right ] ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:"normal",appliesto:"gridContainersWithMasonryLayoutInTheirInlineAxis",computed:"asSpecified",order:"uniqueOrder",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/justify-tracks"},left:{syntax:"<length> | <percentage> | auto",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToWidthOfContainingBlock",groups:["CSS Positioning"],initial:"auto",appliesto:"positionedElements",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/left"},"letter-spacing":{syntax:"normal | <length>",media:"visual",inherited:!0,animationType:"length",percentages:"no",groups:["CSS Text"],initial:"normal",appliesto:"allElements",computed:"optimumValueOfAbsoluteLengthOrNormal",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/letter-spacing"},"line-break":{syntax:"auto | loose | normal | strict | anywhere",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/line-break"},"line-clamp":{syntax:"none | <integer>",media:"visual",inherited:!1,animationType:"integer",percentages:"no",groups:["CSS Overflow"],initial:"none",appliesto:"blockContainersExceptMultiColumnContainers",computed:"asSpecified",order:"perGrammar",status:"experimental"},"line-height":{syntax:"normal | <number> | <length> | <percentage>",media:"visual",inherited:!0,animationType:"numberOrLength",percentages:"referToElementFontSize",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"absoluteLengthOrAsSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/line-height"},"line-height-step":{syntax:"<length>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"0",appliesto:"blockContainers",computed:"absoluteLength",order:"perGrammar",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/line-height-step"},"list-style":{syntax:"<'list-style-type'> || <'list-style-position'> || <'list-style-image'>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Lists and Counters"],initial:["list-style-type","list-style-position","list-style-image"],appliesto:"listItems",computed:["list-style-image","list-style-position","list-style-type"],order:"orderOfAppearance",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/list-style"},"list-style-image":{syntax:"<url> | none",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Lists and Counters"],initial:"none",appliesto:"listItems",computed:"noneOrImageWithAbsoluteURI",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/list-style-image"},"list-style-position":{syntax:"inside | outside",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Lists and Counters"],initial:"outside",appliesto:"listItems",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/list-style-position"},"list-style-type":{syntax:"<counter-style> | <string> | none",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Lists and Counters"],initial:"disc",appliesto:"listItems",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/list-style-type"},margin:{syntax:"[ <length> | <percentage> | auto ]{1,4}",media:"visual",inherited:!1,animationType:"length",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:["margin-bottom","margin-left","margin-right","margin-top"],appliesto:"allElementsExceptTableDisplayTypes",computed:["margin-bottom","margin-left","margin-right","margin-top"],order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin"},"margin-block":{syntax:"<'margin-left'>{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"dependsOnLayoutModel",groups:["CSS Logical Properties"],initial:"0",appliesto:"sameAsMargin",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-block"},"margin-block-end":{syntax:"<'margin-left'>",media:"visual",inherited:!1,animationType:"length",percentages:"dependsOnLayoutModel",groups:["CSS Logical Properties"],initial:"0",appliesto:"sameAsMargin",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-block-end"},"margin-block-start":{syntax:"<'margin-left'>",media:"visual",inherited:!1,animationType:"length",percentages:"dependsOnLayoutModel",groups:["CSS Logical Properties"],initial:"0",appliesto:"sameAsMargin",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-block-start"},"margin-bottom":{syntax:"<length> | <percentage> | auto",media:"visual",inherited:!1,animationType:"length",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"0",appliesto:"allElementsExceptTableDisplayTypes",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-bottom"},"margin-inline":{syntax:"<'margin-left'>{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"dependsOnLayoutModel",groups:["CSS Logical Properties"],initial:"0",appliesto:"sameAsMargin",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-inline"},"margin-inline-end":{syntax:"<'margin-left'>",media:"visual",inherited:!1,animationType:"length",percentages:"dependsOnLayoutModel",groups:["CSS Logical Properties"],initial:"0",appliesto:"sameAsMargin",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-inline-end"},"margin-inline-start":{syntax:"<'margin-left'>",media:"visual",inherited:!1,animationType:"length",percentages:"dependsOnLayoutModel",groups:["CSS Logical Properties"],initial:"0",appliesto:"sameAsMargin",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-inline-start"},"margin-left":{syntax:"<length> | <percentage> | auto",media:"visual",inherited:!1,animationType:"length",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"0",appliesto:"allElementsExceptTableDisplayTypes",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-left"},"margin-right":{syntax:"<length> | <percentage> | auto",media:"visual",inherited:!1,animationType:"length",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"0",appliesto:"allElementsExceptTableDisplayTypes",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-right"},"margin-top":{syntax:"<length> | <percentage> | auto",media:"visual",inherited:!1,animationType:"length",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"0",appliesto:"allElementsExceptTableDisplayTypes",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-top"},"margin-trim":{syntax:"none | in-flow | all",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Model"],initial:"none",appliesto:"blockContainersAndMultiColumnContainers",computed:"asSpecified",order:"perGrammar",alsoAppliesTo:["::first-letter","::first-line"],status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-trim"},mask:{syntax:"<mask-layer>#",media:"visual",inherited:!1,animationType:["mask-image","mask-mode","mask-repeat","mask-position","mask-clip","mask-origin","mask-size","mask-composite"],percentages:["mask-position"],groups:["CSS Masking"],initial:["mask-image","mask-mode","mask-repeat","mask-position","mask-clip","mask-origin","mask-size","mask-composite"],appliesto:"allElementsSVGContainerElements",computed:["mask-image","mask-mode","mask-repeat","mask-position","mask-clip","mask-origin","mask-size","mask-composite"],order:"perGrammar",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask"},"mask-border":{syntax:"<'mask-border-source'> || <'mask-border-slice'> [ / <'mask-border-width'>? [ / <'mask-border-outset'> ]? ]? || <'mask-border-repeat'> || <'mask-border-mode'>",media:"visual",inherited:!1,animationType:["mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width"],percentages:["mask-border-slice","mask-border-width"],groups:["CSS Masking"],initial:["mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width"],appliesto:"allElementsSVGContainerElements",computed:["mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width"],order:"perGrammar",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-border"},"mask-border-mode":{syntax:"luminance | alpha",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"alpha",appliesto:"allElementsSVGContainerElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-border-mode"},"mask-border-outset":{syntax:"[ <length> | <number> ]{1,4}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"0",appliesto:"allElementsSVGContainerElements",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-border-outset"},"mask-border-repeat":{syntax:"[ stretch | repeat | round | space ]{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"stretch",appliesto:"allElementsSVGContainerElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-border-repeat"},"mask-border-slice":{syntax:"<number-percentage>{1,4} fill?",media:"visual",inherited:!1,animationType:"discrete",percentages:"referToSizeOfMaskBorderImage",groups:["CSS Masking"],initial:"0",appliesto:"allElementsSVGContainerElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-border-slice"},"mask-border-source":{syntax:"none | <image>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"none",appliesto:"allElementsSVGContainerElements",computed:"asSpecifiedURLsAbsolute",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-border-source"},"mask-border-width":{syntax:"[ <length-percentage> | <number> | auto ]{1,4}",media:"visual",inherited:!1,animationType:"discrete",percentages:"relativeToMaskBorderImageArea",groups:["CSS Masking"],initial:"auto",appliesto:"allElementsSVGContainerElements",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-border-width"},"mask-clip":{syntax:"[ <geometry-box> | no-clip ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"border-box",appliesto:"allElementsSVGContainerElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-clip"},"mask-composite":{syntax:"<compositing-operator>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"add",appliesto:"allElementsSVGContainerElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-composite"},"mask-image":{syntax:"<mask-reference>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"none",appliesto:"allElementsSVGContainerElements",computed:"asSpecifiedURLsAbsolute",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-image"},"mask-mode":{syntax:"<masking-mode>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"match-source",appliesto:"allElementsSVGContainerElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-mode"},"mask-origin":{syntax:"<geometry-box>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"border-box",appliesto:"allElementsSVGContainerElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-origin"},"mask-position":{syntax:"<position>#",media:"visual",inherited:!1,animationType:"repeatableListOfSimpleListOfLpc",percentages:"referToSizeOfMaskPaintingArea",groups:["CSS Masking"],initial:"center",appliesto:"allElementsSVGContainerElements",computed:"consistsOfTwoKeywordsForOriginAndOffsets",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-position"},"mask-repeat":{syntax:"<repeat-style>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"no-repeat",appliesto:"allElementsSVGContainerElements",computed:"consistsOfTwoDimensionKeywords",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-repeat"},"mask-size":{syntax:"<bg-size>#",media:"visual",inherited:!1,animationType:"repeatableListOfSimpleListOfLpc",percentages:"no",groups:["CSS Masking"],initial:"auto",appliesto:"allElementsSVGContainerElements",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-size"},"mask-type":{syntax:"luminance | alpha",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"luminance",appliesto:"maskElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-type"},"masonry-auto-flow":{syntax:"[ pack | next ] || [ definite-first | ordered ]",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:"pack",appliesto:"gridContainersWithMasonryLayout",computed:"asSpecified",order:"uniqueOrder",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/masonry-auto-flow"},"math-style":{syntax:"normal | compact",media:"visual",inherited:!0,animationType:"notAnimatable",percentages:"no",groups:["MathML"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/math-style"},"max-block-size":{syntax:"<'max-width'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"blockSizeOfContainingBlock",groups:["CSS Logical Properties"],initial:"0",appliesto:"sameAsWidthAndHeight",computed:"sameAsMaxWidthAndMaxHeight",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/max-block-size"},"max-height":{syntax:"none | <length-percentage> | min-content | max-content | fit-content(<length-percentage>)",media:"visual",inherited:!1,animationType:"lpc",percentages:"regardingHeightOfGeneratedBoxContainingBlockPercentagesNone",groups:["CSS Box Model"],initial:"none",appliesto:"allElementsButNonReplacedAndTableColumns",computed:"percentageAsSpecifiedAbsoluteLengthOrNone",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/max-height"},"max-inline-size":{syntax:"<'max-width'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"inlineSizeOfContainingBlock",groups:["CSS Logical Properties"],initial:"0",appliesto:"sameAsWidthAndHeight",computed:"sameAsMaxWidthAndMaxHeight",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/max-inline-size"},"max-lines":{syntax:"none | <integer>",media:"visual",inherited:!1,animationType:"integer",percentages:"no",groups:["CSS Overflow"],initial:"none",appliesto:"blockContainersExceptMultiColumnContainers",computed:"asSpecified",order:"perGrammar",status:"experimental"},"max-width":{syntax:"none | <length-percentage> | min-content | max-content | fit-content(<length-percentage>)",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"none",appliesto:"allElementsButNonReplacedAndTableRows",computed:"percentageAsSpecifiedAbsoluteLengthOrNone",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/max-width"},"min-block-size":{syntax:"<'min-width'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"blockSizeOfContainingBlock",groups:["CSS Logical Properties"],initial:"0",appliesto:"sameAsWidthAndHeight",computed:"sameAsMinWidthAndMinHeight",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/min-block-size"},"min-height":{syntax:"auto | <length> | <percentage> | min-content | max-content | fit-content(<length-percentage>)",media:"visual",inherited:!1,animationType:"lpc",percentages:"regardingHeightOfGeneratedBoxContainingBlockPercentages0",groups:["CSS Box Model"],initial:"auto",appliesto:"allElementsButNonReplacedAndTableColumns",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/min-height"},"min-inline-size":{syntax:"<'min-width'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"inlineSizeOfContainingBlock",groups:["CSS Logical Properties"],initial:"0",appliesto:"sameAsWidthAndHeight",computed:"sameAsMinWidthAndMinHeight",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/min-inline-size"},"min-width":{syntax:"auto | <length> | <percentage> | min-content | max-content | fit-content(<length-percentage>)",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"auto",appliesto:"allElementsButNonReplacedAndTableRows",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/min-width"},"mix-blend-mode":{syntax:"<blend-mode>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Compositing and Blending"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mix-blend-mode"},"object-fit":{syntax:"fill | contain | cover | none | scale-down",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Images"],initial:"fill",appliesto:"replacedElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/object-fit"},"object-position":{syntax:"<position>",media:"visual",inherited:!0,animationType:"repeatableListOfSimpleListOfLpc",percentages:"referToWidthAndHeightOfElement",groups:["CSS Images"],initial:"50% 50%",appliesto:"replacedElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/object-position"},offset:{syntax:"[ <'offset-position'>? [ <'offset-path'> [ <'offset-distance'> || <'offset-rotate'> ]? ]? ]! [ / <'offset-anchor'> ]?",media:"visual",inherited:!1,animationType:["offset-position","offset-path","offset-distance","offset-anchor","offset-rotate"],percentages:["offset-position","offset-distance","offset-anchor"],groups:["CSS Motion Path"],initial:["offset-position","offset-path","offset-distance","offset-anchor","offset-rotate"],appliesto:"transformableElements",computed:["offset-position","offset-path","offset-distance","offset-anchor","offset-rotate"],order:"perGrammar",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/offset"},"offset-anchor":{syntax:"auto | <position>",media:"visual",inherited:!1,animationType:"position",percentages:"relativeToWidthAndHeight",groups:["CSS Motion Path"],initial:"auto",appliesto:"transformableElements",computed:"forLengthAbsoluteValueOtherwisePercentage",order:"perGrammar",status:"standard"},"offset-distance":{syntax:"<length-percentage>",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToTotalPathLength",groups:["CSS Motion Path"],initial:"0",appliesto:"transformableElements",computed:"forLengthAbsoluteValueOtherwisePercentage",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/offset-distance"},"offset-path":{syntax:"none | ray( [ <angle> && <size> && contain? ] ) | <path()> | <url> | [ <basic-shape> || <geometry-box> ]",media:"visual",inherited:!1,animationType:"angleOrBasicShapeOrPath",percentages:"no",groups:["CSS Motion Path"],initial:"none",appliesto:"transformableElements",computed:"asSpecified",order:"perGrammar",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/offset-path"},"offset-position":{syntax:"auto | <position>",media:"visual",inherited:!1,animationType:"position",percentages:"referToSizeOfContainingBlock",groups:["CSS Motion Path"],initial:"auto",appliesto:"transformableElements",computed:"forLengthAbsoluteValueOtherwisePercentage",order:"perGrammar",status:"experimental"},"offset-rotate":{syntax:"[ auto | reverse ] || <angle>",media:"visual",inherited:!1,animationType:"angleOrBasicShapeOrPath",percentages:"no",groups:["CSS Motion Path"],initial:"auto",appliesto:"transformableElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/offset-rotate"},opacity:{syntax:"<alpha-value>",media:"visual",inherited:!1,animationType:"number",percentages:"no",groups:["CSS Color"],initial:"1.0",appliesto:"allElements",computed:"specifiedValueClipped0To1",order:"uniqueOrder",alsoAppliesTo:["::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/opacity"},order:{syntax:"<integer>",media:"visual",inherited:!1,animationType:"integer",percentages:"no",groups:["CSS Flexible Box Layout"],initial:"0",appliesto:"flexItemsGridItemsAbsolutelyPositionedContainerChildren",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/order"},orphans:{syntax:"<integer>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fragmentation"],initial:"2",appliesto:"blockContainerElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/orphans"},outline:{syntax:"[ <'outline-color'> || <'outline-style'> || <'outline-width'> ]",media:["visual","interactive"],inherited:!1,animationType:["outline-color","outline-width","outline-style"],percentages:"no",groups:["CSS Basic User Interface"],initial:["outline-color","outline-style","outline-width"],appliesto:"allElements",computed:["outline-color","outline-width","outline-style"],order:"orderOfAppearance",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/outline"},"outline-color":{syntax:"<color> | invert",media:["visual","interactive"],inherited:!1,animationType:"color",percentages:"no",groups:["CSS Basic User Interface"],initial:"invertOrCurrentColor",appliesto:"allElements",computed:"invertForTranslucentColorRGBAOtherwiseRGB",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/outline-color"},"outline-offset":{syntax:"<length>",media:["visual","interactive"],inherited:!1,animationType:"length",percentages:"no",groups:["CSS Basic User Interface"],initial:"0",appliesto:"allElements",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/outline-offset"},"outline-style":{syntax:"auto | <'border-style'>",media:["visual","interactive"],inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Basic User Interface"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/outline-style"},"outline-width":{syntax:"<line-width>",media:["visual","interactive"],inherited:!1,animationType:"length",percentages:"no",groups:["CSS Basic User Interface"],initial:"medium",appliesto:"allElements",computed:"absoluteLength0ForNone",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/outline-width"},overflow:{syntax:"[ visible | hidden | clip | scroll | auto ]{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Overflow"],initial:"visible",appliesto:"blockContainersFlexContainersGridContainers",computed:["overflow-x","overflow-y"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/overflow"},"overflow-anchor":{syntax:"auto | none",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Scroll Anchoring"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard"},"overflow-block":{syntax:"visible | hidden | clip | scroll | auto",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Overflow"],initial:"auto",appliesto:"blockContainersFlexContainersGridContainers",computed:"asSpecifiedButVisibleOrClipReplacedToAutoOrHiddenIfOtherValueDifferent",order:"perGrammar",status:"standard"},"overflow-clip-box":{syntax:"padding-box | content-box",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"padding-box",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Mozilla/CSS/overflow-clip-box"},"overflow-inline":{syntax:"visible | hidden | clip | scroll | auto",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Overflow"],initial:"auto",appliesto:"blockContainersFlexContainersGridContainers",computed:"asSpecifiedButVisibleOrClipReplacedToAutoOrHiddenIfOtherValueDifferent",order:"perGrammar",status:"standard"},"overflow-wrap":{syntax:"normal | break-word | anywhere",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"normal",appliesto:"nonReplacedInlineElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/overflow-wrap"},"overflow-x":{syntax:"visible | hidden | clip | scroll | auto",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Overflow"],initial:"visible",appliesto:"blockContainersFlexContainersGridContainers",computed:"asSpecifiedButVisibleOrClipReplacedToAutoOrHiddenIfOtherValueDifferent",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/overflow-x"},"overflow-y":{syntax:"visible | hidden | clip | scroll | auto",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Overflow"],initial:"visible",appliesto:"blockContainersFlexContainersGridContainers",computed:"asSpecifiedButVisibleOrClipReplacedToAutoOrHiddenIfOtherValueDifferent",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/overflow-y"},"overscroll-behavior":{syntax:"[ contain | none | auto ]{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Model"],initial:"auto",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/overscroll-behavior"},"overscroll-behavior-block":{syntax:"contain | none | auto",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Model"],initial:"auto",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/overscroll-behavior-block"},"overscroll-behavior-inline":{syntax:"contain | none | auto",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Model"],initial:"auto",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/overscroll-behavior-inline"},"overscroll-behavior-x":{syntax:"contain | none | auto",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Model"],initial:"auto",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/overscroll-behavior-x"},"overscroll-behavior-y":{syntax:"contain | none | auto",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Model"],initial:"auto",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/overscroll-behavior-y"},padding:{syntax:"[ <length> | <percentage> ]{1,4}",media:"visual",inherited:!1,animationType:"length",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:["padding-bottom","padding-left","padding-right","padding-top"],appliesto:"allElementsExceptInternalTableDisplayTypes",computed:["padding-bottom","padding-left","padding-right","padding-top"],order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding"},"padding-block":{syntax:"<'padding-left'>{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"0",appliesto:"allElements",computed:"asLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding-block"},"padding-block-end":{syntax:"<'padding-left'>",media:"visual",inherited:!1,animationType:"length",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"0",appliesto:"allElements",computed:"asLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding-block-end"},"padding-block-start":{syntax:"<'padding-left'>",media:"visual",inherited:!1,animationType:"length",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"0",appliesto:"allElements",computed:"asLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding-block-start"},"padding-bottom":{syntax:"<length> | <percentage>",media:"visual",inherited:!1,animationType:"length",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"0",appliesto:"allElementsExceptInternalTableDisplayTypes",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding-bottom"},"padding-inline":{syntax:"<'padding-left'>{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"0",appliesto:"allElements",computed:"asLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding-inline"},"padding-inline-end":{syntax:"<'padding-left'>",media:"visual",inherited:!1,animationType:"length",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"0",appliesto:"allElements",computed:"asLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding-inline-end"},"padding-inline-start":{syntax:"<'padding-left'>",media:"visual",inherited:!1,animationType:"length",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"0",appliesto:"allElements",computed:"asLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding-inline-start"},"padding-left":{syntax:"<length> | <percentage>",media:"visual",inherited:!1,animationType:"length",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"0",appliesto:"allElementsExceptInternalTableDisplayTypes",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding-left"},"padding-right":{syntax:"<length> | <percentage>",media:"visual",inherited:!1,animationType:"length",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"0",appliesto:"allElementsExceptInternalTableDisplayTypes",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding-right"},"padding-top":{syntax:"<length> | <percentage>",media:"visual",inherited:!1,animationType:"length",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"0",appliesto:"allElementsExceptInternalTableDisplayTypes",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding-top"},"page-break-after":{syntax:"auto | always | avoid | left | right | recto | verso",media:["visual","paged"],inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Pages"],initial:"auto",appliesto:"blockElementsInNormalFlow",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/page-break-after"},"page-break-before":{syntax:"auto | always | avoid | left | right | recto | verso",media:["visual","paged"],inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Pages"],initial:"auto",appliesto:"blockElementsInNormalFlow",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/page-break-before"},"page-break-inside":{syntax:"auto | avoid",media:["visual","paged"],inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Pages"],initial:"auto",appliesto:"blockElementsInNormalFlow",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/page-break-inside"},"paint-order":{syntax:"normal | [ fill || stroke || markers ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"normal",appliesto:"textElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/paint-order"},perspective:{syntax:"none | <length>",media:"visual",inherited:!1,animationType:"length",percentages:"no",groups:["CSS Transforms"],initial:"none",appliesto:"transformableElements",computed:"absoluteLengthOrNone",order:"uniqueOrder",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/perspective"},"perspective-origin":{syntax:"<position>",media:"visual",inherited:!1,animationType:"simpleListOfLpc",percentages:"referToSizeOfBoundingBox",groups:["CSS Transforms"],initial:"50% 50%",appliesto:"transformableElements",computed:"forLengthAbsoluteValueOtherwisePercentage",order:"oneOrTwoValuesLengthAbsoluteKeywordsPercentages",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/perspective-origin"},"place-content":{syntax:"<'align-content'> <'justify-content'>?",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Alignment"],initial:"normal",appliesto:"multilineFlexContainers",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/place-content"},"place-items":{syntax:"<'align-items'> <'justify-items'>?",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Alignment"],initial:["align-items","justify-items"],appliesto:"allElements",computed:["align-items","justify-items"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/place-items"},"place-self":{syntax:"<'align-self'> <'justify-self'>?",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Alignment"],initial:["align-self","justify-self"],appliesto:"blockLevelBoxesAndAbsolutelyPositionedBoxesAndGridItems",computed:["align-self","justify-self"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/place-self"},"pointer-events":{syntax:"auto | none | visiblePainted | visibleFill | visibleStroke | visible | painted | fill | stroke | all | inherit",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Pointer Events"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/pointer-events"},position:{syntax:"static | relative | absolute | sticky | fixed",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Positioning"],initial:"static",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/position"},quotes:{syntax:"none | auto | [ <string> <string> ]+",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Generated Content"],initial:"dependsOnUserAgent",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/quotes"},resize:{syntax:"none | both | horizontal | vertical | block | inline",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Basic User Interface"],initial:"none",appliesto:"elementsWithOverflowNotVisibleAndReplacedElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/resize"},right:{syntax:"<length> | <percentage> | auto",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToWidthOfContainingBlock",groups:["CSS Positioning"],initial:"auto",appliesto:"positionedElements",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/right"},rotate:{syntax:"none | <angle> | [ x | y | z | <number>{3} ] && <angle>",media:"visual",inherited:!1,animationType:"transform",percentages:"no",groups:["CSS Transforms"],initial:"none",appliesto:"transformableElements",computed:"asSpecified",order:"perGrammar",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/rotate"},"row-gap":{syntax:"normal | <length-percentage>",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfContentArea",groups:["CSS Box Alignment"],initial:"normal",appliesto:"multiColumnElementsFlexContainersGridContainers",computed:"asSpecifiedWithLengthsAbsoluteAndNormalComputingToZeroExceptMultiColumn",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/row-gap"},"ruby-align":{syntax:"start | center | space-between | space-around",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Ruby"],initial:"space-around",appliesto:"rubyBasesAnnotationsBaseAnnotationContainers",computed:"asSpecified",order:"uniqueOrder",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/ruby-align"},"ruby-merge":{syntax:"separate | collapse | auto",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Ruby"],initial:"separate",appliesto:"rubyAnnotationsContainers",computed:"asSpecified",order:"uniqueOrder",status:"experimental"},"ruby-position":{syntax:"over | under | inter-character",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Ruby"],initial:"over",appliesto:"rubyAnnotationsContainers",computed:"asSpecified",order:"uniqueOrder",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/ruby-position"},scale:{syntax:"none | <number>{1,3}",media:"visual",inherited:!1,animationType:"transform",percentages:"no",groups:["CSS Transforms"],initial:"none",appliesto:"transformableElements",computed:"asSpecified",order:"perGrammar",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scale"},"scrollbar-color":{syntax:"auto | dark | light | <color>{2}",media:"visual",inherited:!0,animationType:"color",percentages:"no",groups:["CSS Scrollbars"],initial:"auto",appliesto:"scrollingBoxes",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scrollbar-color"},"scrollbar-gutter":{syntax:"auto | [ stable | always ] && both? && force?",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Overflow"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scrollbar-gutter"},"scrollbar-width":{syntax:"auto | thin | none",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Scrollbars"],initial:"auto",appliesto:"scrollingBoxes",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scrollbar-width"},"scroll-behavior":{syntax:"auto | smooth",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSSOM View"],initial:"auto",appliesto:"scrollingBoxes",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-behavior"},"scroll-margin":{syntax:"<length>{1,4}",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin"},"scroll-margin-block":{syntax:"<length>{1,2}",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin-block"},"scroll-margin-block-start":{syntax:"<length>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin-block-start"},"scroll-margin-block-end":{syntax:"<length>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin-block-end"},"scroll-margin-bottom":{syntax:"<length>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin-bottom"},"scroll-margin-inline":{syntax:"<length>{1,2}",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin-inline"},"scroll-margin-inline-start":{syntax:"<length>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin-inline-start"},"scroll-margin-inline-end":{syntax:"<length>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin-inline-end"},"scroll-margin-left":{syntax:"<length>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin-left"},"scroll-margin-right":{syntax:"<length>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin-right"},"scroll-margin-top":{syntax:"<length>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin-top"},"scroll-padding":{syntax:"[ auto | <length-percentage> ]{1,4}",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding"},"scroll-padding-block":{syntax:"[ auto | <length-percentage> ]{1,2}",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding-block"},"scroll-padding-block-start":{syntax:"auto | <length-percentage>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding-block-start"},"scroll-padding-block-end":{syntax:"auto | <length-percentage>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding-block-end"},"scroll-padding-bottom":{syntax:"auto | <length-percentage>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding-bottom"},"scroll-padding-inline":{syntax:"[ auto | <length-percentage> ]{1,2}",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding-inline"},"scroll-padding-inline-start":{syntax:"auto | <length-percentage>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding-inline-start"},"scroll-padding-inline-end":{syntax:"auto | <length-percentage>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding-inline-end"},"scroll-padding-left":{syntax:"auto | <length-percentage>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding-left"},"scroll-padding-right":{syntax:"auto | <length-percentage>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding-right"},"scroll-padding-top":{syntax:"auto | <length-percentage>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding-top"},"scroll-snap-align":{syntax:"[ none | start | end | center ]{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Scroll Snap"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-snap-align"},"scroll-snap-coordinate":{syntax:"none | <position>#",media:"interactive",inherited:!1,animationType:"position",percentages:"referToBorderBox",groups:["CSS Scroll Snap"],initial:"none",appliesto:"allElements",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-snap-coordinate"},"scroll-snap-destination":{syntax:"<position>",media:"interactive",inherited:!1,animationType:"position",percentages:"relativeToScrollContainerPaddingBoxAxis",groups:["CSS Scroll Snap"],initial:"0px 0px",appliesto:"scrollContainers",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-snap-destination"},"scroll-snap-points-x":{syntax:"none | repeat( <length-percentage> )",media:"interactive",inherited:!1,animationType:"discrete",percentages:"relativeToScrollContainerPaddingBoxAxis",groups:["CSS Scroll Snap"],initial:"none",appliesto:"scrollContainers",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-snap-points-x"},"scroll-snap-points-y":{syntax:"none | repeat( <length-percentage> )",media:"interactive",inherited:!1,animationType:"discrete",percentages:"relativeToScrollContainerPaddingBoxAxis",groups:["CSS Scroll Snap"],initial:"none",appliesto:"scrollContainers",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-snap-points-y"},"scroll-snap-stop":{syntax:"normal | always",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Scroll Snap"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-snap-stop"},"scroll-snap-type":{syntax:"none | [ x | y | block | inline | both ] [ mandatory | proximity ]?",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Scroll Snap"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-snap-type"},"scroll-snap-type-x":{syntax:"none | mandatory | proximity",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Scroll Snap"],initial:"none",appliesto:"scrollContainers",computed:"asSpecified",order:"uniqueOrder",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-snap-type-x"},"scroll-snap-type-y":{syntax:"none | mandatory | proximity",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Scroll Snap"],initial:"none",appliesto:"scrollContainers",computed:"asSpecified",order:"uniqueOrder",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-snap-type-y"},"shape-image-threshold":{syntax:"<alpha-value>",media:"visual",inherited:!1,animationType:"number",percentages:"no",groups:["CSS Shapes"],initial:"0.0",appliesto:"floats",computed:"specifiedValueNumberClipped0To1",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/shape-image-threshold"},"shape-margin":{syntax:"<length-percentage>",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToWidthOfContainingBlock",groups:["CSS Shapes"],initial:"0",appliesto:"floats",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/shape-margin"},"shape-outside":{syntax:"none | <shape-box> || <basic-shape> | <image>",media:"visual",inherited:!1,animationType:"basicShapeOtherwiseNo",percentages:"no",groups:["CSS Shapes"],initial:"none",appliesto:"floats",computed:"asDefinedForBasicShapeWithAbsoluteURIOtherwiseAsSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/shape-outside"},"tab-size":{syntax:"<integer> | <length>",media:"visual",inherited:!0,animationType:"length",percentages:"no",groups:["CSS Text"],initial:"8",appliesto:"blockContainers",computed:"specifiedIntegerOrAbsoluteLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/tab-size"},"table-layout":{syntax:"auto | fixed",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Table"],initial:"auto",appliesto:"tableElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/table-layout"},"text-align":{syntax:"start | end | left | right | center | justify | match-parent",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"startOrNamelessValueIfLTRRightIfRTL",appliesto:"blockContainers",computed:"asSpecifiedExceptMatchParent",order:"orderOfAppearance",alsoAppliesTo:["::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-align"},"text-align-last":{syntax:"auto | start | end | left | right | center | justify",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"auto",appliesto:"blockContainers",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-align-last"},"text-combine-upright":{syntax:"none | all | [ digits <integer>? ]",media:"visual",inherited:!0,animationType:"notAnimatable",percentages:"no",groups:["CSS Writing Modes"],initial:"none",appliesto:"nonReplacedInlineElements",computed:"keywordPlusIntegerIfDigits",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-combine-upright"},"text-decoration":{syntax:"<'text-decoration-line'> || <'text-decoration-style'> || <'text-decoration-color'> || <'text-decoration-thickness'>",media:"visual",inherited:!1,animationType:["text-decoration-color","text-decoration-style","text-decoration-line","text-decoration-thickness"],percentages:"no",groups:["CSS Text Decoration"],initial:["text-decoration-color","text-decoration-style","text-decoration-line"],appliesto:"allElements",computed:["text-decoration-line","text-decoration-style","text-decoration-color","text-decoration-thickness"],order:"orderOfAppearance",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-decoration"},"text-decoration-color":{syntax:"<color>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Text Decoration"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-decoration-color"},"text-decoration-line":{syntax:"none | [ underline || overline || line-through || blink ] | spelling-error | grammar-error",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Text Decoration"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-decoration-line"},"text-decoration-skip":{syntax:"none | [ objects || [ spaces | [ leading-spaces || trailing-spaces ] ] || edges || box-decoration ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text Decoration"],initial:"objects",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-decoration-skip"},"text-decoration-skip-ink":{syntax:"auto | all | none",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text Decoration"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-decoration-skip-ink"},"text-decoration-style":{syntax:"solid | double | dotted | dashed | wavy",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Text Decoration"],initial:"solid",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-decoration-style"},"text-decoration-thickness":{syntax:"auto | from-font | <length> | <percentage> ",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"referToElementFontSize",groups:["CSS Text Decoration"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-decoration-thickness"},"text-emphasis":{syntax:"<'text-emphasis-style'> || <'text-emphasis-color'>",media:"visual",inherited:!1,animationType:["text-emphasis-color","text-emphasis-style"],percentages:"no",groups:["CSS Text Decoration"],initial:["text-emphasis-style","text-emphasis-color"],appliesto:"allElements",computed:["text-emphasis-style","text-emphasis-color"],order:"orderOfAppearance",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-emphasis"},"text-emphasis-color":{syntax:"<color>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Text Decoration"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-emphasis-color"},"text-emphasis-position":{syntax:"[ over | under ] && [ right | left ]",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Text Decoration"],initial:"over right",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-emphasis-position"},"text-emphasis-style":{syntax:"none | [ [ filled | open ] || [ dot | circle | double-circle | triangle | sesame ] ] | <string>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Text Decoration"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-emphasis-style"},"text-indent":{syntax:"<length-percentage> && hanging? && each-line?",media:"visual",inherited:!0,animationType:"lpc",percentages:"referToWidthOfContainingBlock",groups:["CSS Text"],initial:"0",appliesto:"blockContainers",computed:"percentageOrAbsoluteLengthPlusKeywords",order:"lengthOrPercentageBeforeKeywords",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-indent"},"text-justify":{syntax:"auto | inter-character | inter-word | none",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"auto",appliesto:"inlineLevelAndTableCellElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-justify"},"text-orientation":{syntax:"mixed | upright | sideways",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Writing Modes"],initial:"mixed",appliesto:"allElementsExceptTableRowGroupsRowsColumnGroupsAndColumns",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-orientation"},"text-overflow":{syntax:"[ clip | ellipsis | <string> ]{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Basic User Interface"],initial:"clip",appliesto:"blockContainerElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-overflow"},"text-rendering":{syntax:"auto | optimizeSpeed | optimizeLegibility | geometricPrecision",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Miscellaneous"],initial:"auto",appliesto:"textElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-rendering"},"text-shadow":{syntax:"none | <shadow-t>#",media:"visual",inherited:!0,animationType:"shadowList",percentages:"no",groups:["CSS Text Decoration"],initial:"none",appliesto:"allElements",computed:"colorPlusThreeAbsoluteLengths",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-shadow"},"text-size-adjust":{syntax:"none | auto | <percentage>",media:"visual",inherited:!0,animationType:"discrete",percentages:"referToSizeOfFont",groups:["CSS Text"],initial:"autoForSmartphoneBrowsersSupportingInflation",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-size-adjust"},"text-transform":{syntax:"none | capitalize | uppercase | lowercase | full-width | full-size-kana",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-transform"},"text-underline-offset":{syntax:"auto | <length> | <percentage> ",media:"visual",inherited:!0,animationType:"byComputedValueType",percentages:"referToElementFontSize",groups:["CSS Text Decoration"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-underline-offset"},"text-underline-position":{syntax:"auto | from-font | [ under || [ left | right ] ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text Decoration"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-underline-position"},top:{syntax:"<length> | <percentage> | auto",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToContainingBlockHeight",groups:["CSS Positioning"],initial:"auto",appliesto:"positionedElements",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/top"},"touch-action":{syntax:"auto | none | [ [ pan-x | pan-left | pan-right ] || [ pan-y | pan-up | pan-down ] || pinch-zoom ] | manipulation",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Pointer Events"],initial:"auto",appliesto:"allElementsExceptNonReplacedInlineElementsTableRowsColumnsRowColumnGroups",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/touch-action"},transform:{syntax:"none | <transform-list>",media:"visual",inherited:!1,animationType:"transform",percentages:"referToSizeOfBoundingBox",groups:["CSS Transforms"],initial:"none",appliesto:"transformableElements",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/transform"},"transform-box":{syntax:"content-box | border-box | fill-box | stroke-box | view-box",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Transforms"],initial:"view-box",appliesto:"transformableElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/transform-box"},"transform-origin":{syntax:"[ <length-percentage> | left | center | right | top | bottom ] | [ [ <length-percentage> | left | center | right ] && [ <length-percentage> | top | center | bottom ] ] <length>?",media:"visual",inherited:!1,animationType:"simpleListOfLpc",percentages:"referToSizeOfBoundingBox",groups:["CSS Transforms"],initial:"50% 50% 0",appliesto:"transformableElements",computed:"forLengthAbsoluteValueOtherwisePercentage",order:"oneOrTwoValuesLengthAbsoluteKeywordsPercentages",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/transform-origin"},"transform-style":{syntax:"flat | preserve-3d",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Transforms"],initial:"flat",appliesto:"transformableElements",computed:"asSpecified",order:"uniqueOrder",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/transform-style"},transition:{syntax:"<single-transition>#",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Transitions"],initial:["transition-delay","transition-duration","transition-property","transition-timing-function"],appliesto:"allElementsAndPseudos",computed:["transition-delay","transition-duration","transition-property","transition-timing-function"],order:"orderOfAppearance",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/transition"},"transition-delay":{syntax:"<time>#",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Transitions"],initial:"0s",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/transition-delay"},"transition-duration":{syntax:"<time>#",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Transitions"],initial:"0s",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/transition-duration"},"transition-property":{syntax:"none | <single-transition-property>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Transitions"],initial:"all",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/transition-property"},"transition-timing-function":{syntax:"<timing-function>#",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Transitions"],initial:"ease",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/transition-timing-function"},translate:{syntax:"none | <length-percentage> [ <length-percentage> <length>? ]?",media:"visual",inherited:!1,animationType:"transform",percentages:"referToSizeOfBoundingBox",groups:["CSS Transforms"],initial:"none",appliesto:"transformableElements",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"perGrammar",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/translate"},"unicode-bidi":{syntax:"normal | embed | isolate | bidi-override | isolate-override | plaintext",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Writing Modes"],initial:"normal",appliesto:"allElementsSomeValuesNoEffectOnNonInlineElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/unicode-bidi"},"user-select":{syntax:"auto | text | none | contain | all",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Basic User Interface"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/user-select"},"vertical-align":{syntax:"baseline | sub | super | text-top | text-bottom | middle | top | bottom | <percentage> | <length>",media:"visual",inherited:!1,animationType:"length",percentages:"referToLineHeight",groups:["CSS Table"],initial:"baseline",appliesto:"inlineLevelAndTableCellElements",computed:"absoluteLengthOrKeyword",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/vertical-align"},visibility:{syntax:"visible | hidden | collapse",media:"visual",inherited:!0,animationType:"visibility",percentages:"no",groups:["CSS Box Model"],initial:"visible",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/visibility"},"white-space":{syntax:"normal | pre | nowrap | pre-wrap | pre-line | break-spaces",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/white-space"},widows:{syntax:"<integer>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fragmentation"],initial:"2",appliesto:"blockContainerElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/widows"},width:{syntax:"auto | <length> | <percentage> | min-content | max-content | fit-content(<length-percentage>)",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"auto",appliesto:"allElementsButNonReplacedAndTableRows",computed:"percentageAutoOrAbsoluteLength",order:"lengthOrPercentageBeforeKeywordIfBothPresent",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/width"},"will-change":{syntax:"auto | <animateable-feature>#",media:"all",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Will Change"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/will-change"},"word-break":{syntax:"normal | break-all | keep-all | break-word",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/word-break"},"word-spacing":{syntax:"normal | <length-percentage>",media:"visual",inherited:!0,animationType:"length",percentages:"referToWidthOfAffectedGlyph",groups:["CSS Text"],initial:"normal",appliesto:"allElements",computed:"optimumMinAndMaxValueOfAbsoluteLengthPercentageOrNormal",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/word-spacing"},"word-wrap":{syntax:"normal | break-word",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"normal",appliesto:"nonReplacedInlineElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/overflow-wrap"},"writing-mode":{syntax:"horizontal-tb | vertical-rl | vertical-lr | sideways-rl | sideways-lr",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Writing Modes"],initial:"horizontal-tb",appliesto:"allElementsExceptTableRowColumnGroupsTableRowsColumns",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/writing-mode"},"z-index":{syntax:"auto | <integer>",media:"visual",inherited:!1,animationType:"integer",percentages:"no",groups:["CSS Positioning"],initial:"auto",appliesto:"positionedElements",computed:"asSpecified",order:"uniqueOrder",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/z-index"},zoom:{syntax:"normal | reset | <number> | <percentage>",media:"visual",inherited:!1,animationType:"integer",percentages:"no",groups:["Microsoft Extensions"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/zoom"}}});var _S=Ee((p4,oO)=>{oO.exports={"absolute-size":{syntax:"xx-small | x-small | small | medium | large | x-large | xx-large | xxx-large"},"alpha-value":{syntax:"<number> | <percentage>"},"angle-percentage":{syntax:"<angle> | <percentage>"},"angular-color-hint":{syntax:"<angle-percentage>"},"angular-color-stop":{syntax:"<color> && <color-stop-angle>?"},"angular-color-stop-list":{syntax:"[ <angular-color-stop> [, <angular-color-hint>]? ]# , <angular-color-stop>"},"animateable-feature":{syntax:"scroll-position | contents | <custom-ident>"},attachment:{syntax:"scroll | fixed | local"},"attr()":{syntax:"attr( <attr-name> <type-or-unit>? [, <attr-fallback> ]? )"},"attr-matcher":{syntax:"[ '~' | '|' | '^' | '$' | '*' ]? '='"},"attr-modifier":{syntax:"i | s"},"attribute-selector":{syntax:"'[' <wq-name> ']' | '[' <wq-name> <attr-matcher> [ <string-token> | <ident-token> ] <attr-modifier>? ']'"},"auto-repeat":{syntax:"repeat( [ auto-fill | auto-fit ] , [ <line-names>? <fixed-size> ]+ <line-names>? )"},"auto-track-list":{syntax:`[ <line-names>? [ <fixed-size> | <fixed-repeat> ] ]* <line-names>? <auto-repeat>
[ <line-names>? [ <fixed-size> | <fixed-repeat> ] ]* <line-names>?`},"baseline-position":{syntax:"[ first | last ]? baseline"},"basic-shape":{syntax:"<inset()> | <circle()> | <ellipse()> | <polygon()> | <path()>"},"bg-image":{syntax:"none | <image>"},"bg-layer":{syntax:"<bg-image> || <bg-position> [ / <bg-size> ]? || <repeat-style> || <attachment> || <box> || <box>"},"bg-position":{syntax:"[ [ left | center | right | top | bottom | <length-percentage> ] | [ left | center | right | <length-percentage> ] [ top | center | bottom | <length-percentage> ] | [ center | [ left | right ] <length-percentage>? ] && [ center | [ top | bottom ] <length-percentage>? ] ]"},"bg-size":{syntax:"[ <length-percentage> | auto ]{1,2} | cover | contain"},"blur()":{syntax:"blur( <length> )"},"blend-mode":{syntax:"normal | multiply | screen | overlay | darken | lighten | color-dodge | color-burn | hard-light | soft-light | difference | exclusion | hue | saturation | color | luminosity"},box:{syntax:"border-box | padding-box | content-box"},"brightness()":{syntax:"brightness( <number-percentage> )"},"calc()":{syntax:"calc( <calc-sum> )"},"calc-sum":{syntax:"<calc-product> [ [ '+' | '-' ] <calc-product> ]*"},"calc-product":{syntax:"<calc-value> [ '*' <calc-value> | '/' <number> ]*"},"calc-value":{syntax:"<number> | <dimension> | <percentage> | ( <calc-sum> )"},"cf-final-image":{syntax:"<image> | <color>"},"cf-mixing-image":{syntax:"<percentage>? && <image>"},"circle()":{syntax:"circle( [ <shape-radius> ]? [ at <position> ]? )"},"clamp()":{syntax:"clamp( <calc-sum>#{3} )"},"class-selector":{syntax:"'.' <ident-token>"},"clip-source":{syntax:"<url>"},color:{syntax:"<rgb()> | <rgba()> | <hsl()> | <hsla()> | <hex-color> | <named-color> | currentcolor | <deprecated-system-color>"},"color-stop":{syntax:"<color-stop-length> | <color-stop-angle>"},"color-stop-angle":{syntax:"<angle-percentage>{1,2}"},"color-stop-length":{syntax:"<length-percentage>{1,2}"},"color-stop-list":{syntax:"[ <linear-color-stop> [, <linear-color-hint>]? ]# , <linear-color-stop>"},combinator:{syntax:"'>' | '+' | '~' | [ '||' ]"},"common-lig-values":{syntax:"[ common-ligatures | no-common-ligatures ]"},"compat-auto":{syntax:"searchfield | textarea | push-button | slider-horizontal | checkbox | radio | square-button | menulist | listbox | meter | progress-bar | button"},"composite-style":{syntax:"clear | copy | source-over | source-in | source-out | source-atop | destination-over | destination-in | destination-out | destination-atop | xor"},"compositing-operator":{syntax:"add | subtract | intersect | exclude"},"compound-selector":{syntax:"[ <type-selector>? <subclass-selector>* [ <pseudo-element-selector> <pseudo-class-selector>* ]* ]!"},"compound-selector-list":{syntax:"<compound-selector>#"},"complex-selector":{syntax:"<compound-selector> [ <combinator>? <compound-selector> ]*"},"complex-selector-list":{syntax:"<complex-selector>#"},"conic-gradient()":{syntax:"conic-gradient( [ from <angle> ]? [ at <position> ]?, <angular-color-stop-list> )"},"contextual-alt-values":{syntax:"[ contextual | no-contextual ]"},"content-distribution":{syntax:"space-between | space-around | space-evenly | stretch"},"content-list":{syntax:"[ <string> | contents | <image> | <quote> | <target> | <leader()> ]+"},"content-position":{syntax:"center | start | end | flex-start | flex-end"},"content-replacement":{syntax:"<image>"},"contrast()":{syntax:"contrast( [ <number-percentage> ] )"},"counter()":{syntax:"counter( <custom-ident>, <counter-style>? )"},"counter-style":{syntax:"<counter-style-name> | symbols()"},"counter-style-name":{syntax:"<custom-ident>"},"counters()":{syntax:"counters( <custom-ident>, <string>, <counter-style>? )"},"cross-fade()":{syntax:"cross-fade( <cf-mixing-image> , <cf-final-image>? )"},"cubic-bezier-timing-function":{syntax:"ease | ease-in | ease-out | ease-in-out | cubic-bezier(<number [0,1]>, <number>, <number [0,1]>, <number>)"},"deprecated-system-color":{syntax:"ActiveBorder | ActiveCaption | AppWorkspace | Background | ButtonFace | ButtonHighlight | ButtonShadow | ButtonText | CaptionText | GrayText | Highlight | HighlightText | InactiveBorder | InactiveCaption | InactiveCaptionText | InfoBackground | InfoText | Menu | MenuText | Scrollbar | ThreeDDarkShadow | ThreeDFace | ThreeDHighlight | ThreeDLightShadow | ThreeDShadow | Window | WindowFrame | WindowText"},"discretionary-lig-values":{syntax:"[ discretionary-ligatures | no-discretionary-ligatures ]"},"display-box":{syntax:"contents | none"},"display-inside":{syntax:"flow | flow-root | table | flex | grid | ruby"},"display-internal":{syntax:"table-row-group | table-header-group | table-footer-group | table-row | table-cell | table-column-group | table-column | table-caption | ruby-base | ruby-text | ruby-base-container | ruby-text-container"},"display-legacy":{syntax:"inline-block | inline-list-item | inline-table | inline-flex | inline-grid"},"display-listitem":{syntax:"<display-outside>? && [ flow | flow-root ]? && list-item"},"display-outside":{syntax:"block | inline | run-in"},"drop-shadow()":{syntax:"drop-shadow( <length>{2,3} <color>? )"},"east-asian-variant-values":{syntax:"[ jis78 | jis83 | jis90 | jis04 | simplified | traditional ]"},"east-asian-width-values":{syntax:"[ full-width | proportional-width ]"},"element()":{syntax:"element( <id-selector> )"},"ellipse()":{syntax:"ellipse( [ <shape-radius>{2} ]? [ at <position> ]? )"},"ending-shape":{syntax:"circle | ellipse"},"env()":{syntax:"env( <custom-ident> , <declaration-value>? )"},"explicit-track-list":{syntax:"[ <line-names>? <track-size> ]+ <line-names>?"},"family-name":{syntax:"<string> | <custom-ident>+"},"feature-tag-value":{syntax:"<string> [ <integer> | on | off ]?"},"feature-type":{syntax:"@stylistic | @historical-forms | @styleset | @character-variant | @swash | @ornaments | @annotation"},"feature-value-block":{syntax:"<feature-type> '{' <feature-value-declaration-list> '}'"},"feature-value-block-list":{syntax:"<feature-value-block>+"},"feature-value-declaration":{syntax:"<custom-ident>: <integer>+;"},"feature-value-declaration-list":{syntax:"<feature-value-declaration>"},"feature-value-name":{syntax:"<custom-ident>"},"fill-rule":{syntax:"nonzero | evenodd"},"filter-function":{syntax:"<blur()> | <brightness()> | <contrast()> | <drop-shadow()> | <grayscale()> | <hue-rotate()> | <invert()> | <opacity()> | <saturate()> | <sepia()>"},"filter-function-list":{syntax:"[ <filter-function> | <url> ]+"},"final-bg-layer":{syntax:"<'background-color'> || <bg-image> || <bg-position> [ / <bg-size> ]? || <repeat-style> || <attachment> || <box> || <box>"},"fit-content()":{syntax:"fit-content( [ <length> | <percentage> ] )"},"fixed-breadth":{syntax:"<length-percentage>"},"fixed-repeat":{syntax:"repeat( [ <positive-integer> ] , [ <line-names>? <fixed-size> ]+ <line-names>? )"},"fixed-size":{syntax:"<fixed-breadth> | minmax( <fixed-breadth> , <track-breadth> ) | minmax( <inflexible-breadth> , <fixed-breadth> )"},"font-stretch-absolute":{syntax:"normal | ultra-condensed | extra-condensed | condensed | semi-condensed | semi-expanded | expanded | extra-expanded | ultra-expanded | <percentage>"},"font-variant-css21":{syntax:"[ normal | small-caps ]"},"font-weight-absolute":{syntax:"normal | bold | <number [1,1000]>"},"frequency-percentage":{syntax:"<frequency> | <percentage>"},"general-enclosed":{syntax:"[ <function-token> <any-value> ) ] | ( <ident> <any-value> )"},"generic-family":{syntax:"serif | sans-serif | cursive | fantasy | monospace"},"generic-name":{syntax:"serif | sans-serif | cursive | fantasy | monospace"},"geometry-box":{syntax:"<shape-box> | fill-box | stroke-box | view-box"},gradient:{syntax:"<linear-gradient()> | <repeating-linear-gradient()> | <radial-gradient()> | <repeating-radial-gradient()> | <conic-gradient()>"},"grayscale()":{syntax:"grayscale( <number-percentage> )"},"grid-line":{syntax:"auto | <custom-ident> | [ <integer> && <custom-ident>? ] | [ span && [ <integer> || <custom-ident> ] ]"},"historical-lig-values":{syntax:"[ historical-ligatures | no-historical-ligatures ]"},"hsl()":{syntax:"hsl( <hue> <percentage> <percentage> [ / <alpha-value> ]? ) | hsl( <hue>, <percentage>, <percentage>, <alpha-value>? )"},"hsla()":{syntax:"hsla( <hue> <percentage> <percentage> [ / <alpha-value> ]? ) | hsla( <hue>, <percentage>, <percentage>, <alpha-value>? )"},hue:{syntax:"<number> | <angle>"},"hue-rotate()":{syntax:"hue-rotate( <angle> )"},"id-selector":{syntax:"<hash-token>"},image:{syntax:"<url> | <image()> | <image-set()> | <element()> | <paint()> | <cross-fade()> | <gradient>"},"image()":{syntax:"image( <image-tags>? [ <image-src>? , <color>? ]! )"},"image-set()":{syntax:"image-set( <image-set-option># )"},"image-set-option":{syntax:"[ <image> | <string> ] <resolution>"},"image-src":{syntax:"<url> | <string>"},"image-tags":{syntax:"ltr | rtl"},"inflexible-breadth":{syntax:"<length> | <percentage> | min-content | max-content | auto"},"inset()":{syntax:"inset( <length-percentage>{1,4} [ round <'border-radius'> ]? )"},"invert()":{syntax:"invert( <number-percentage> )"},"keyframes-name":{syntax:"<custom-ident> | <string>"},"keyframe-block":{syntax:`<keyframe-selector># {
  <declaration-list>
}`},"keyframe-block-list":{syntax:"<keyframe-block>+"},"keyframe-selector":{syntax:"from | to | <percentage>"},"leader()":{syntax:"leader( <leader-type> )"},"leader-type":{syntax:"dotted | solid | space | <string>"},"length-percentage":{syntax:"<length> | <percentage>"},"line-names":{syntax:"'[' <custom-ident>* ']'"},"line-name-list":{syntax:"[ <line-names> | <name-repeat> ]+"},"line-style":{syntax:"none | hidden | dotted | dashed | solid | double | groove | ridge | inset | outset"},"line-width":{syntax:"<length> | thin | medium | thick"},"linear-color-hint":{syntax:"<length-percentage>"},"linear-color-stop":{syntax:"<color> <color-stop-length>?"},"linear-gradient()":{syntax:"linear-gradient( [ <angle> | to <side-or-corner> ]? , <color-stop-list> )"},"mask-layer":{syntax:"<mask-reference> || <position> [ / <bg-size> ]? || <repeat-style> || <geometry-box> || [ <geometry-box> | no-clip ] || <compositing-operator> || <masking-mode>"},"mask-position":{syntax:"[ <length-percentage> | left | center | right ] [ <length-percentage> | top | center | bottom ]?"},"mask-reference":{syntax:"none | <image> | <mask-source>"},"mask-source":{syntax:"<url>"},"masking-mode":{syntax:"alpha | luminance | match-source"},"matrix()":{syntax:"matrix( <number>#{6} )"},"matrix3d()":{syntax:"matrix3d( <number>#{16} )"},"max()":{syntax:"max( <calc-sum># )"},"media-and":{syntax:"<media-in-parens> [ and <media-in-parens> ]+"},"media-condition":{syntax:"<media-not> | <media-and> | <media-or> | <media-in-parens>"},"media-condition-without-or":{syntax:"<media-not> | <media-and> | <media-in-parens>"},"media-feature":{syntax:"( [ <mf-plain> | <mf-boolean> | <mf-range> ] )"},"media-in-parens":{syntax:"( <media-condition> ) | <media-feature> | <general-enclosed>"},"media-not":{syntax:"not <media-in-parens>"},"media-or":{syntax:"<media-in-parens> [ or <media-in-parens> ]+"},"media-query":{syntax:"<media-condition> | [ not | only ]? <media-type> [ and <media-condition-without-or> ]?"},"media-query-list":{syntax:"<media-query>#"},"media-type":{syntax:"<ident>"},"mf-boolean":{syntax:"<mf-name>"},"mf-name":{syntax:"<ident>"},"mf-plain":{syntax:"<mf-name> : <mf-value>"},"mf-range":{syntax:`<mf-name> [ '<' | '>' ]? '='? <mf-value>
| <mf-value> [ '<' | '>' ]? '='? <mf-name>
| <mf-value> '<' '='? <mf-name> '<' '='? <mf-value>
| <mf-value> '>' '='? <mf-name> '>' '='? <mf-value>`},"mf-value":{syntax:"<number> | <dimension> | <ident> | <ratio>"},"min()":{syntax:"min( <calc-sum># )"},"minmax()":{syntax:"minmax( [ <length> | <percentage> | min-content | max-content | auto ] , [ <length> | <percentage> | <flex> | min-content | max-content | auto ] )"},"named-color":{syntax:"transparent | aliceblue | antiquewhite | aqua | aquamarine | azure | beige | bisque | black | blanchedalmond | blue | blueviolet | brown | burlywood | cadetblue | chartreuse | chocolate | coral | cornflowerblue | cornsilk | crimson | cyan | darkblue | darkcyan | darkgoldenrod | darkgray | darkgreen | darkgrey | darkkhaki | darkmagenta | darkolivegreen | darkorange | darkorchid | darkred | darksalmon | darkseagreen | darkslateblue | darkslategray | darkslategrey | darkturquoise | darkviolet | deeppink | deepskyblue | dimgray | dimgrey | dodgerblue | firebrick | floralwhite | forestgreen | fuchsia | gainsboro | ghostwhite | gold | goldenrod | gray | green | greenyellow | grey | honeydew | hotpink | indianred | indigo | ivory | khaki | lavender | lavenderblush | lawngreen | lemonchiffon | lightblue | lightcoral | lightcyan | lightgoldenrodyellow | lightgray | lightgreen | lightgrey | lightpink | lightsalmon | lightseagreen | lightskyblue | lightslategray | lightslategrey | lightsteelblue | lightyellow | lime | limegreen | linen | magenta | maroon | mediumaquamarine | mediumblue | mediumorchid | mediumpurple | mediumseagreen | mediumslateblue | mediumspringgreen | mediumturquoise | mediumvioletred | midnightblue | mintcream | mistyrose | moccasin | navajowhite | navy | oldlace | olive | olivedrab | orange | orangered | orchid | palegoldenrod | palegreen | paleturquoise | palevioletred | papayawhip | peachpuff | peru | pink | plum | powderblue | purple | rebeccapurple | red | rosybrown | royalblue | saddlebrown | salmon | sandybrown | seagreen | seashell | sienna | silver | skyblue | slateblue | slategray | slategrey | snow | springgreen | steelblue | tan | teal | thistle | tomato | turquoise | violet | wheat | white | whitesmoke | yellow | yellowgreen"},"namespace-prefix":{syntax:"<ident>"},"ns-prefix":{syntax:"[ <ident-token> | '*' ]? '|'"},"number-percentage":{syntax:"<number> | <percentage>"},"numeric-figure-values":{syntax:"[ lining-nums | oldstyle-nums ]"},"numeric-fraction-values":{syntax:"[ diagonal-fractions | stacked-fractions ]"},"numeric-spacing-values":{syntax:"[ proportional-nums | tabular-nums ]"},nth:{syntax:"<an-plus-b> | even | odd"},"opacity()":{syntax:"opacity( [ <number-percentage> ] )"},"overflow-position":{syntax:"unsafe | safe"},"outline-radius":{syntax:"<length> | <percentage>"},"page-body":{syntax:"<declaration>? [ ; <page-body> ]? | <page-margin-box> <page-body>"},"page-margin-box":{syntax:"<page-margin-box-type> '{' <declaration-list> '}'"},"page-margin-box-type":{syntax:"@top-left-corner | @top-left | @top-center | @top-right | @top-right-corner | @bottom-left-corner | @bottom-left | @bottom-center | @bottom-right | @bottom-right-corner | @left-top | @left-middle | @left-bottom | @right-top | @right-middle | @right-bottom"},"page-selector-list":{syntax:"[ <page-selector># ]?"},"page-selector":{syntax:"<pseudo-page>+ | <ident> <pseudo-page>*"},"path()":{syntax:"path( [ <fill-rule>, ]? <string> )"},"paint()":{syntax:"paint( <ident>, <declaration-value>? )"},"perspective()":{syntax:"perspective( <length> )"},"polygon()":{syntax:"polygon( <fill-rule>? , [ <length-percentage> <length-percentage> ]# )"},position:{syntax:"[ [ left | center | right ] || [ top | center | bottom ] | [ left | center | right | <length-percentage> ] [ top | center | bottom | <length-percentage> ]? | [ [ left | right ] <length-percentage> ] && [ [ top | bottom ] <length-percentage> ] ]"},"pseudo-class-selector":{syntax:"':' <ident-token> | ':' <function-token> <any-value> ')'"},"pseudo-element-selector":{syntax:"':' <pseudo-class-selector>"},"pseudo-page":{syntax:": [ left | right | first | blank ]"},quote:{syntax:"open-quote | close-quote | no-open-quote | no-close-quote"},"radial-gradient()":{syntax:"radial-gradient( [ <ending-shape> || <size> ]? [ at <position> ]? , <color-stop-list> )"},"relative-selector":{syntax:"<combinator>? <complex-selector>"},"relative-selector-list":{syntax:"<relative-selector>#"},"relative-size":{syntax:"larger | smaller"},"repeat-style":{syntax:"repeat-x | repeat-y | [ repeat | space | round | no-repeat ]{1,2}"},"repeating-linear-gradient()":{syntax:"repeating-linear-gradient( [ <angle> | to <side-or-corner> ]? , <color-stop-list> )"},"repeating-radial-gradient()":{syntax:"repeating-radial-gradient( [ <ending-shape> || <size> ]? [ at <position> ]? , <color-stop-list> )"},"rgb()":{syntax:"rgb( <percentage>{3} [ / <alpha-value> ]? ) | rgb( <number>{3} [ / <alpha-value> ]? ) | rgb( <percentage>#{3} , <alpha-value>? ) | rgb( <number>#{3} , <alpha-value>? )"},"rgba()":{syntax:"rgba( <percentage>{3} [ / <alpha-value> ]? ) | rgba( <number>{3} [ / <alpha-value> ]? ) | rgba( <percentage>#{3} , <alpha-value>? ) | rgba( <number>#{3} , <alpha-value>? )"},"rotate()":{syntax:"rotate( [ <angle> | <zero> ] )"},"rotate3d()":{syntax:"rotate3d( <number> , <number> , <number> , [ <angle> | <zero> ] )"},"rotateX()":{syntax:"rotateX( [ <angle> | <zero> ] )"},"rotateY()":{syntax:"rotateY( [ <angle> | <zero> ] )"},"rotateZ()":{syntax:"rotateZ( [ <angle> | <zero> ] )"},"saturate()":{syntax:"saturate( <number-percentage> )"},"scale()":{syntax:"scale( <number> , <number>? )"},"scale3d()":{syntax:"scale3d( <number> , <number> , <number> )"},"scaleX()":{syntax:"scaleX( <number> )"},"scaleY()":{syntax:"scaleY( <number> )"},"scaleZ()":{syntax:"scaleZ( <number> )"},"self-position":{syntax:"center | start | end | self-start | self-end | flex-start | flex-end"},"shape-radius":{syntax:"<length-percentage> | closest-side | farthest-side"},"skew()":{syntax:"skew( [ <angle> | <zero> ] , [ <angle> | <zero> ]? )"},"skewX()":{syntax:"skewX( [ <angle> | <zero> ] )"},"skewY()":{syntax:"skewY( [ <angle> | <zero> ] )"},"sepia()":{syntax:"sepia( <number-percentage> )"},shadow:{syntax:"inset? && <length>{2,4} && <color>?"},"shadow-t":{syntax:"[ <length>{2,3} && <color>? ]"},shape:{syntax:"rect(<top>, <right>, <bottom>, <left>)"},"shape-box":{syntax:"<box> | margin-box"},"side-or-corner":{syntax:"[ left | right ] || [ top | bottom ]"},"single-animation":{syntax:"<time> || <timing-function> || <time> || <single-animation-iteration-count> || <single-animation-direction> || <single-animation-fill-mode> || <single-animation-play-state> || [ none | <keyframes-name> ]"},"single-animation-direction":{syntax:"normal | reverse | alternate | alternate-reverse"},"single-animation-fill-mode":{syntax:"none | forwards | backwards | both"},"single-animation-iteration-count":{syntax:"infinite | <number>"},"single-animation-play-state":{syntax:"running | paused"},"single-transition":{syntax:"[ none | <single-transition-property> ] || <time> || <timing-function> || <time>"},"single-transition-property":{syntax:"all | <custom-ident>"},size:{syntax:"closest-side | farthest-side | closest-corner | farthest-corner | <length> | <length-percentage>{2}"},"step-position":{syntax:"jump-start | jump-end | jump-none | jump-both | start | end"},"step-timing-function":{syntax:"step-start | step-end | steps(<integer>[, <step-position>]?)"},"subclass-selector":{syntax:"<id-selector> | <class-selector> | <attribute-selector> | <pseudo-class-selector>"},"supports-condition":{syntax:"not <supports-in-parens> | <supports-in-parens> [ and <supports-in-parens> ]* | <supports-in-parens> [ or <supports-in-parens> ]*"},"supports-in-parens":{syntax:"( <supports-condition> ) | <supports-feature> | <general-enclosed>"},"supports-feature":{syntax:"<supports-decl> | <supports-selector-fn>"},"supports-decl":{syntax:"( <declaration> )"},"supports-selector-fn":{syntax:"selector( <complex-selector> )"},symbol:{syntax:"<string> | <image> | <custom-ident>"},target:{syntax:"<target-counter()> | <target-counters()> | <target-text()>"},"target-counter()":{syntax:"target-counter( [ <string> | <url> ] , <custom-ident> , <counter-style>? )"},"target-counters()":{syntax:"target-counters( [ <string> | <url> ] , <custom-ident> , <string> , <counter-style>? )"},"target-text()":{syntax:"target-text( [ <string> | <url> ] , [ content | before | after | first-letter ]? )"},"time-percentage":{syntax:"<time> | <percentage>"},"timing-function":{syntax:"linear | <cubic-bezier-timing-function> | <step-timing-function>"},"track-breadth":{syntax:"<length-percentage> | <flex> | min-content | max-content | auto"},"track-list":{syntax:"[ <line-names>? [ <track-size> | <track-repeat> ] ]+ <line-names>?"},"track-repeat":{syntax:"repeat( [ <positive-integer> ] , [ <line-names>? <track-size> ]+ <line-names>? )"},"track-size":{syntax:"<track-breadth> | minmax( <inflexible-breadth> , <track-breadth> ) | fit-content( [ <length> | <percentage> ] )"},"transform-function":{syntax:"<matrix()> | <translate()> | <translateX()> | <translateY()> | <scale()> | <scaleX()> | <scaleY()> | <rotate()> | <skew()> | <skewX()> | <skewY()> | <matrix3d()> | <translate3d()> | <translateZ()> | <scale3d()> | <scaleZ()> | <rotate3d()> | <rotateX()> | <rotateY()> | <rotateZ()> | <perspective()>"},"transform-list":{syntax:"<transform-function>+"},"translate()":{syntax:"translate( <length-percentage> , <length-percentage>? )"},"translate3d()":{syntax:"translate3d( <length-percentage> , <length-percentage> , <length> )"},"translateX()":{syntax:"translateX( <length-percentage> )"},"translateY()":{syntax:"translateY( <length-percentage> )"},"translateZ()":{syntax:"translateZ( <length> )"},"type-or-unit":{syntax:"string | color | url | integer | number | length | angle | time | frequency | cap | ch | em | ex | ic | lh | rlh | rem | vb | vi | vw | vh | vmin | vmax | mm | Q | cm | in | pt | pc | px | deg | grad | rad | turn | ms | s | Hz | kHz | %"},"type-selector":{syntax:"<wq-name> | <ns-prefix>? '*'"},"var()":{syntax:"var( <custom-property-name> , <declaration-value>? )"},"viewport-length":{syntax:"auto | <length-percentage>"},"wq-name":{syntax:"<ns-prefix>? <ident-token>"}}});var vS=Ee((f4,lO)=>{lO.exports={atrules:{charset:{prelude:"<string>"},"font-face":{descriptors:{"unicode-range":{comment:"replaces <unicode-range>, an old production name",syntax:"<urange>#"}}}},properties:{"-moz-background-clip":{comment:"deprecated syntax in old Firefox, https://developer.mozilla.org/en/docs/Web/CSS/background-clip",syntax:"padding | border"},"-moz-border-radius-bottomleft":{comment:"https://developer.mozilla.org/en-US/docs/Web/CSS/border-bottom-left-radius",syntax:"<'border-bottom-left-radius'>"},"-moz-border-radius-bottomright":{comment:"https://developer.mozilla.org/en-US/docs/Web/CSS/border-bottom-right-radius",syntax:"<'border-bottom-right-radius'>"},"-moz-border-radius-topleft":{comment:"https://developer.mozilla.org/en-US/docs/Web/CSS/border-top-left-radius",syntax:"<'border-top-left-radius'>"},"-moz-border-radius-topright":{comment:"https://developer.mozilla.org/en-US/docs/Web/CSS/border-bottom-right-radius",syntax:"<'border-bottom-right-radius'>"},"-moz-control-character-visibility":{comment:"firefox specific keywords, https://bugzilla.mozilla.org/show_bug.cgi?id=947588",syntax:"visible | hidden"},"-moz-osx-font-smoothing":{comment:"misssed old syntax https://developer.mozilla.org/en-US/docs/Web/CSS/font-smooth",syntax:"auto | grayscale"},"-moz-user-select":{comment:"https://developer.mozilla.org/en-US/docs/Web/CSS/user-select",syntax:"none | text | all | -moz-none"},"-ms-flex-align":{comment:"misssed old syntax implemented in IE, https://www.w3.org/TR/2012/WD-css3-flexbox-20120322/#flex-align",syntax:"start | end | center | baseline | stretch"},"-ms-flex-item-align":{comment:"misssed old syntax implemented in IE, https://www.w3.org/TR/2012/WD-css3-flexbox-20120322/#flex-align",syntax:"auto | start | end | center | baseline | stretch"},"-ms-flex-line-pack":{comment:"misssed old syntax implemented in IE, https://www.w3.org/TR/2012/WD-css3-flexbox-20120322/#flex-line-pack",syntax:"start | end | center | justify | distribute | stretch"},"-ms-flex-negative":{comment:"misssed old syntax implemented in IE; TODO: find references for comfirmation",syntax:"<'flex-shrink'>"},"-ms-flex-pack":{comment:"misssed old syntax implemented in IE, https://www.w3.org/TR/2012/WD-css3-flexbox-20120322/#flex-pack",syntax:"start | end | center | justify | distribute"},"-ms-flex-order":{comment:"misssed old syntax implemented in IE; https://msdn.microsoft.com/en-us/library/jj127303(v=vs.85).aspx",syntax:"<integer>"},"-ms-flex-positive":{comment:"misssed old syntax implemented in IE; TODO: find references for comfirmation",syntax:"<'flex-grow'>"},"-ms-flex-preferred-size":{comment:"misssed old syntax implemented in IE; TODO: find references for comfirmation",syntax:"<'flex-basis'>"},"-ms-interpolation-mode":{comment:"https://msdn.microsoft.com/en-us/library/ff521095(v=vs.85).aspx",syntax:"nearest-neighbor | bicubic"},"-ms-grid-column-align":{comment:"add this property first since it uses as fallback for flexbox, https://msdn.microsoft.com/en-us/library/windows/apps/hh466338.aspx",syntax:"start | end | center | stretch"},"-ms-grid-row-align":{comment:"add this property first since it uses as fallback for flexbox, https://msdn.microsoft.com/en-us/library/windows/apps/hh466348.aspx",syntax:"start | end | center | stretch"},"-ms-hyphenate-limit-last":{comment:"misssed old syntax implemented in IE; https://www.w3.org/TR/css-text-4/#hyphenate-line-limits",syntax:"none | always | column | page | spread"},"-webkit-appearance":{comment:"webkit specific keywords",references:["http://css-infos.net/property/-webkit-appearance"],syntax:"none | button | button-bevel | caps-lock-indicator | caret | checkbox | default-button | inner-spin-button | listbox | listitem | media-controls-background | media-controls-fullscreen-background | media-current-time-display | media-enter-fullscreen-button | media-exit-fullscreen-button | media-fullscreen-button | media-mute-button | media-overlay-play-button | media-play-button | media-seek-back-button | media-seek-forward-button | media-slider | media-sliderthumb | media-time-remaining-display | media-toggle-closed-captions-button | media-volume-slider | media-volume-slider-container | media-volume-sliderthumb | menulist | menulist-button | menulist-text | menulist-textfield | meter | progress-bar | progress-bar-value | push-button | radio | scrollbarbutton-down | scrollbarbutton-left | scrollbarbutton-right | scrollbarbutton-up | scrollbargripper-horizontal | scrollbargripper-vertical | scrollbarthumb-horizontal | scrollbarthumb-vertical | scrollbartrack-horizontal | scrollbartrack-vertical | searchfield | searchfield-cancel-button | searchfield-decoration | searchfield-results-button | searchfield-results-decoration | slider-horizontal | slider-vertical | sliderthumb-horizontal | sliderthumb-vertical | square-button | textarea | textfield | -apple-pay-button"},"-webkit-background-clip":{comment:"https://developer.mozilla.org/en/docs/Web/CSS/background-clip",syntax:"[ <box> | border | padding | content | text ]#"},"-webkit-column-break-after":{comment:"added, http://help.dottoro.com/lcrthhhv.php",syntax:"always | auto | avoid"},"-webkit-column-break-before":{comment:"added, http://help.dottoro.com/lcxquvkf.php",syntax:"always | auto | avoid"},"-webkit-column-break-inside":{comment:"added, http://help.dottoro.com/lclhnthl.php",syntax:"always | auto | avoid"},"-webkit-font-smoothing":{comment:"https://developer.mozilla.org/en-US/docs/Web/CSS/font-smooth",syntax:"auto | none | antialiased | subpixel-antialiased"},"-webkit-mask-box-image":{comment:"missed; https://developer.mozilla.org/en-US/docs/Web/CSS/-webkit-mask-box-image",syntax:"[ <url> | <gradient> | none ] [ <length-percentage>{4} <-webkit-mask-box-repeat>{2} ]?"},"-webkit-print-color-adjust":{comment:"missed",references:["https://developer.mozilla.org/en/docs/Web/CSS/-webkit-print-color-adjust"],syntax:"economy | exact"},"-webkit-text-security":{comment:"missed; http://help.dottoro.com/lcbkewgt.php",syntax:"none | circle | disc | square"},"-webkit-user-drag":{comment:"missed; http://help.dottoro.com/lcbixvwm.php",syntax:"none | element | auto"},"-webkit-user-select":{comment:"auto is supported by old webkit, https://developer.mozilla.org/en-US/docs/Web/CSS/user-select",syntax:"auto | none | text | all"},"alignment-baseline":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/text.html#AlignmentBaselineProperty"],syntax:"auto | baseline | before-edge | text-before-edge | middle | central | after-edge | text-after-edge | ideographic | alphabetic | hanging | mathematical"},"baseline-shift":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/text.html#BaselineShiftProperty"],syntax:"baseline | sub | super | <svg-length>"},behavior:{comment:"added old IE property https://msdn.microsoft.com/en-us/library/ms530723(v=vs.85).aspx",syntax:"<url>+"},"clip-rule":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/masking.html#ClipRuleProperty"],syntax:"nonzero | evenodd"},cue:{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<'cue-before'> <'cue-after'>?"},"cue-after":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<url> <decibel>? | none"},"cue-before":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<url> <decibel>? | none"},cursor:{comment:"added legacy keywords: hand, -webkit-grab. -webkit-grabbing, -webkit-zoom-in, -webkit-zoom-out, -moz-grab, -moz-grabbing, -moz-zoom-in, -moz-zoom-out",references:["https://www.sitepoint.com/css3-cursor-styles/"],syntax:"[ [ <url> [ <x> <y> ]? , ]* [ auto | default | none | context-menu | help | pointer | progress | wait | cell | crosshair | text | vertical-text | alias | copy | move | no-drop | not-allowed | e-resize | n-resize | ne-resize | nw-resize | s-resize | se-resize | sw-resize | w-resize | ew-resize | ns-resize | nesw-resize | nwse-resize | col-resize | row-resize | all-scroll | zoom-in | zoom-out | grab | grabbing | hand | -webkit-grab | -webkit-grabbing | -webkit-zoom-in | -webkit-zoom-out | -moz-grab | -moz-grabbing | -moz-zoom-in | -moz-zoom-out ] ]"},display:{comment:"extended with -ms-flexbox",syntax:"| <-non-standard-display>"},position:{comment:"extended with -webkit-sticky",syntax:"| -webkit-sticky"},"dominant-baseline":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/text.html#DominantBaselineProperty"],syntax:"auto | use-script | no-change | reset-size | ideographic | alphabetic | hanging | mathematical | central | middle | text-after-edge | text-before-edge"},"image-rendering":{comment:"extended with <-non-standard-image-rendering>, added SVG keywords optimizeSpeed and optimizeQuality",references:["https://developer.mozilla.org/en/docs/Web/CSS/image-rendering","https://www.w3.org/TR/SVG/painting.html#ImageRenderingProperty"],syntax:"| optimizeSpeed | optimizeQuality | <-non-standard-image-rendering>"},fill:{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#FillProperty"],syntax:"<paint>"},"fill-opacity":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#FillProperty"],syntax:"<number-zero-one>"},"fill-rule":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#FillProperty"],syntax:"nonzero | evenodd"},filter:{comment:"extend with IE legacy syntaxes",syntax:"| <-ms-filter-function-list>"},"glyph-orientation-horizontal":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/text.html#GlyphOrientationHorizontalProperty"],syntax:"<angle>"},"glyph-orientation-vertical":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/text.html#GlyphOrientationVerticalProperty"],syntax:"<angle>"},kerning:{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/text.html#KerningProperty"],syntax:"auto | <svg-length>"},"letter-spacing":{comment:"fix syntax <length> -> <length-percentage>",references:["https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/letter-spacing"],syntax:"normal | <length-percentage>"},marker:{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#MarkerProperties"],syntax:"none | <url>"},"marker-end":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#MarkerProperties"],syntax:"none | <url>"},"marker-mid":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#MarkerProperties"],syntax:"none | <url>"},"marker-start":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#MarkerProperties"],syntax:"none | <url>"},"max-width":{comment:"fix auto -> none (https://github.com/mdn/data/pull/431); extend by non-standard width keywords https://developer.mozilla.org/en-US/docs/Web/CSS/max-width",syntax:"none | <length-percentage> | min-content | max-content | fit-content(<length-percentage>) | <-non-standard-width>"},width:{comment:"per spec fit-content should be a function, however browsers are supporting it as a keyword (https://github.com/csstree/stylelint-validator/issues/29)",syntax:"| fit-content | -moz-fit-content | -webkit-fit-content"},"min-width":{comment:"extend by non-standard width keywords https://developer.mozilla.org/en-US/docs/Web/CSS/width",syntax:"auto | <length-percentage> | min-content | max-content | fit-content(<length-percentage>) | <-non-standard-width>"},overflow:{comment:"extend by vendor keywords https://developer.mozilla.org/en-US/docs/Web/CSS/overflow",syntax:"| <-non-standard-overflow>"},pause:{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<'pause-before'> <'pause-after'>?"},"pause-after":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<time> | none | x-weak | weak | medium | strong | x-strong"},"pause-before":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<time> | none | x-weak | weak | medium | strong | x-strong"},rest:{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<'rest-before'> <'rest-after'>?"},"rest-after":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<time> | none | x-weak | weak | medium | strong | x-strong"},"rest-before":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<time> | none | x-weak | weak | medium | strong | x-strong"},"shape-rendering":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#ShapeRenderingPropert"],syntax:"auto | optimizeSpeed | crispEdges | geometricPrecision"},src:{comment:"added @font-face's src property https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/src",syntax:"[ <url> [ format( <string># ) ]? | local( <family-name> ) ]#"},speak:{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"auto | none | normal"},"speak-as":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"normal | spell-out || digits || [ literal-punctuation | no-punctuation ]"},stroke:{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#StrokeProperties"],syntax:"<paint>"},"stroke-dasharray":{comment:"added SVG property; a list of comma and/or white space separated <length>s and <percentage>s",references:["https://www.w3.org/TR/SVG/painting.html#StrokeProperties"],syntax:"none | [ <svg-length>+ ]#"},"stroke-dashoffset":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#StrokeProperties"],syntax:"<svg-length>"},"stroke-linecap":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#StrokeProperties"],syntax:"butt | round | square"},"stroke-linejoin":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#StrokeProperties"],syntax:"miter | round | bevel"},"stroke-miterlimit":{comment:"added SVG property (<miterlimit> = <number-one-or-greater>) ",references:["https://www.w3.org/TR/SVG/painting.html#StrokeProperties"],syntax:"<number-one-or-greater>"},"stroke-opacity":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#StrokeProperties"],syntax:"<number-zero-one>"},"stroke-width":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#StrokeProperties"],syntax:"<svg-length>"},"text-anchor":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/text.html#TextAlignmentProperties"],syntax:"start | middle | end"},"unicode-bidi":{comment:"added prefixed keywords https://developer.mozilla.org/en-US/docs/Web/CSS/unicode-bidi",syntax:"| -moz-isolate | -moz-isolate-override | -moz-plaintext | -webkit-isolate | -webkit-isolate-override | -webkit-plaintext"},"unicode-range":{comment:"added missed property https://developer.mozilla.org/en-US/docs/Web/CSS/%40font-face/unicode-range",syntax:"<urange>#"},"voice-balance":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<number> | left | center | right | leftwards | rightwards"},"voice-duration":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"auto | <time>"},"voice-family":{comment:"<name> -> <family-name>, https://www.w3.org/TR/css3-speech/#property-index",syntax:"[ [ <family-name> | <generic-voice> ] , ]* [ <family-name> | <generic-voice> ] | preserve"},"voice-pitch":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<frequency> && absolute | [ [ x-low | low | medium | high | x-high ] || [ <frequency> | <semitones> | <percentage> ] ]"},"voice-range":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<frequency> && absolute | [ [ x-low | low | medium | high | x-high ] || [ <frequency> | <semitones> | <percentage> ] ]"},"voice-rate":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"[ normal | x-slow | slow | medium | fast | x-fast ] || <percentage>"},"voice-stress":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"normal | strong | moderate | none | reduced"},"voice-volume":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"silent | [ [ x-soft | soft | medium | loud | x-loud ] || <decibel> ]"},"writing-mode":{comment:"extend with SVG keywords",syntax:"| <svg-writing-mode>"}},syntaxes:{"-legacy-gradient":{comment:"added collection of legacy gradient syntaxes",syntax:"<-webkit-gradient()> | <-legacy-linear-gradient> | <-legacy-repeating-linear-gradient> | <-legacy-radial-gradient> | <-legacy-repeating-radial-gradient>"},"-legacy-linear-gradient":{comment:"like standard syntax but w/o `to` keyword https://developer.mozilla.org/en-US/docs/Web/CSS/linear-gradient",syntax:"-moz-linear-gradient( <-legacy-linear-gradient-arguments> ) | -webkit-linear-gradient( <-legacy-linear-gradient-arguments> ) | -o-linear-gradient( <-legacy-linear-gradient-arguments> )"},"-legacy-repeating-linear-gradient":{comment:"like standard syntax but w/o `to` keyword https://developer.mozilla.org/en-US/docs/Web/CSS/linear-gradient",syntax:"-moz-repeating-linear-gradient( <-legacy-linear-gradient-arguments> ) | -webkit-repeating-linear-gradient( <-legacy-linear-gradient-arguments> ) | -o-repeating-linear-gradient( <-legacy-linear-gradient-arguments> )"},"-legacy-linear-gradient-arguments":{comment:"like standard syntax but w/o `to` keyword https://developer.mozilla.org/en-US/docs/Web/CSS/linear-gradient",syntax:"[ <angle> | <side-or-corner> ]? , <color-stop-list>"},"-legacy-radial-gradient":{comment:"deprecated syntax that implemented by some browsers https://www.w3.org/TR/2011/WD-css3-images-20110908/#radial-gradients",syntax:"-moz-radial-gradient( <-legacy-radial-gradient-arguments> ) | -webkit-radial-gradient( <-legacy-radial-gradient-arguments> ) | -o-radial-gradient( <-legacy-radial-gradient-arguments> )"},"-legacy-repeating-radial-gradient":{comment:"deprecated syntax that implemented by some browsers https://www.w3.org/TR/2011/WD-css3-images-20110908/#radial-gradients",syntax:"-moz-repeating-radial-gradient( <-legacy-radial-gradient-arguments> ) | -webkit-repeating-radial-gradient( <-legacy-radial-gradient-arguments> ) | -o-repeating-radial-gradient( <-legacy-radial-gradient-arguments> )"},"-legacy-radial-gradient-arguments":{comment:"deprecated syntax that implemented by some browsers https://www.w3.org/TR/2011/WD-css3-images-20110908/#radial-gradients",syntax:"[ <position> , ]? [ [ [ <-legacy-radial-gradient-shape> || <-legacy-radial-gradient-size> ] | [ <length> | <percentage> ]{2} ] , ]? <color-stop-list>"},"-legacy-radial-gradient-size":{comment:"before a standard it contains 2 extra keywords (`contain` and `cover`) https://www.w3.org/TR/2011/WD-css3-images-20110908/#ltsize",syntax:"closest-side | closest-corner | farthest-side | farthest-corner | contain | cover"},"-legacy-radial-gradient-shape":{comment:"define to double sure it doesn't extends in future https://www.w3.org/TR/2011/WD-css3-images-20110908/#ltshape",syntax:"circle | ellipse"},"-non-standard-font":{comment:"non standard fonts",references:["https://webkit.org/blog/3709/using-the-system-font-in-web-content/"],syntax:"-apple-system-body | -apple-system-headline | -apple-system-subheadline | -apple-system-caption1 | -apple-system-caption2 | -apple-system-footnote | -apple-system-short-body | -apple-system-short-headline | -apple-system-short-subheadline | -apple-system-short-caption1 | -apple-system-short-footnote | -apple-system-tall-body"},"-non-standard-color":{comment:"non standard colors",references:["http://cssdot.ru/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B8%D0%BA_CSS/color-i305.html","https://developer.mozilla.org/en-US/docs/Web/CSS/color_value#Mozilla_Color_Preference_Extensions"],syntax:"-moz-ButtonDefault | -moz-ButtonHoverFace | -moz-ButtonHoverText | -moz-CellHighlight | -moz-CellHighlightText | -moz-Combobox | -moz-ComboboxText | -moz-Dialog | -moz-DialogText | -moz-dragtargetzone | -moz-EvenTreeRow | -moz-Field | -moz-FieldText | -moz-html-CellHighlight | -moz-html-CellHighlightText | -moz-mac-accentdarkestshadow | -moz-mac-accentdarkshadow | -moz-mac-accentface | -moz-mac-accentlightesthighlight | -moz-mac-accentlightshadow | -moz-mac-accentregularhighlight | -moz-mac-accentregularshadow | -moz-mac-chrome-active | -moz-mac-chrome-inactive | -moz-mac-focusring | -moz-mac-menuselect | -moz-mac-menushadow | -moz-mac-menutextselect | -moz-MenuHover | -moz-MenuHoverText | -moz-MenuBarText | -moz-MenuBarHoverText | -moz-nativehyperlinktext | -moz-OddTreeRow | -moz-win-communicationstext | -moz-win-mediatext | -moz-activehyperlinktext | -moz-default-background-color | -moz-default-color | -moz-hyperlinktext | -moz-visitedhyperlinktext | -webkit-activelink | -webkit-focus-ring-color | -webkit-link | -webkit-text"},"-non-standard-image-rendering":{comment:"non-standard keywords http://phrogz.net/tmp/canvas_image_zoom.html",syntax:"optimize-contrast | -moz-crisp-edges | -o-crisp-edges | -webkit-optimize-contrast"},"-non-standard-overflow":{comment:"non-standard keywords https://developer.mozilla.org/en-US/docs/Web/CSS/overflow",syntax:"-moz-scrollbars-none | -moz-scrollbars-horizontal | -moz-scrollbars-vertical | -moz-hidden-unscrollable"},"-non-standard-width":{comment:"non-standard keywords https://developer.mozilla.org/en-US/docs/Web/CSS/width",syntax:"fill-available | min-intrinsic | intrinsic | -moz-available | -moz-fit-content | -moz-min-content | -moz-max-content | -webkit-min-content | -webkit-max-content"},"-webkit-gradient()":{comment:"first Apple proposal gradient syntax https://webkit.org/blog/175/introducing-css-gradients/ - TODO: simplify when after match algorithm improvement ( [, point, radius | , point] -> [, radius]? , point )",syntax:"-webkit-gradient( <-webkit-gradient-type>, <-webkit-gradient-point> [, <-webkit-gradient-point> | , <-webkit-gradient-radius>, <-webkit-gradient-point> ] [, <-webkit-gradient-radius>]? [, <-webkit-gradient-color-stop>]* )"},"-webkit-gradient-color-stop":{comment:"first Apple proposal gradient syntax https://webkit.org/blog/175/introducing-css-gradients/",syntax:"from( <color> ) | color-stop( [ <number-zero-one> | <percentage> ] , <color> ) | to( <color> )"},"-webkit-gradient-point":{comment:"first Apple proposal gradient syntax https://webkit.org/blog/175/introducing-css-gradients/",syntax:"[ left | center | right | <length-percentage> ] [ top | center | bottom | <length-percentage> ]"},"-webkit-gradient-radius":{comment:"first Apple proposal gradient syntax https://webkit.org/blog/175/introducing-css-gradients/",syntax:"<length> | <percentage>"},"-webkit-gradient-type":{comment:"first Apple proposal gradient syntax https://webkit.org/blog/175/introducing-css-gradients/",syntax:"linear | radial"},"-webkit-mask-box-repeat":{comment:"missed; https://developer.mozilla.org/en-US/docs/Web/CSS/-webkit-mask-box-image",syntax:"repeat | stretch | round"},"-webkit-mask-clip-style":{comment:"missed; there is no enough information about `-webkit-mask-clip` property, but looks like all those keywords are working",syntax:"border | border-box | padding | padding-box | content | content-box | text"},"-ms-filter-function-list":{comment:"https://developer.mozilla.org/en-US/docs/Web/CSS/-ms-filter",syntax:"<-ms-filter-function>+"},"-ms-filter-function":{comment:"https://developer.mozilla.org/en-US/docs/Web/CSS/-ms-filter",syntax:"<-ms-filter-function-progid> | <-ms-filter-function-legacy>"},"-ms-filter-function-progid":{comment:"https://developer.mozilla.org/en-US/docs/Web/CSS/-ms-filter",syntax:"'progid:' [ <ident-token> '.' ]* [ <ident-token> | <function-token> <any-value>? ) ]"},"-ms-filter-function-legacy":{comment:"https://developer.mozilla.org/en-US/docs/Web/CSS/-ms-filter",syntax:"<ident-token> | <function-token> <any-value>? )"},"-ms-filter":{syntax:"<string>"},age:{comment:"https://www.w3.org/TR/css3-speech/#voice-family",syntax:"child | young | old"},"attr-name":{syntax:"<wq-name>"},"attr-fallback":{syntax:"<any-value>"},"border-radius":{comment:"missed, https://drafts.csswg.org/css-backgrounds-3/#the-border-radius",syntax:"<length-percentage>{1,2}"},bottom:{comment:"missed; not sure we should add it, but no others except `shape` is using it so it's ok for now; https://drafts.fxtf.org/css-masking-1/#funcdef-clip-rect",syntax:"<length> | auto"},"content-list":{comment:"missed -> https://drafts.csswg.org/css-content/#typedef-content-list (document-url, <target> and leader() is omitted util stabilization)",syntax:"[ <string> | contents | <image> | <quote> | <target> | <leader()> | <attr()> | counter( <ident>, <'list-style-type'>? ) ]+"},"element()":{comment:"https://drafts.csswg.org/css-gcpm/#element-syntax & https://drafts.csswg.org/css-images-4/#element-notation",syntax:"element( <custom-ident> , [ first | start | last | first-except ]? ) | element( <id-selector> )"},"generic-voice":{comment:"https://www.w3.org/TR/css3-speech/#voice-family",syntax:"[ <age>? <gender> <integer>? ]"},gender:{comment:"https://www.w3.org/TR/css3-speech/#voice-family",syntax:"male | female | neutral"},"generic-family":{comment:"added -apple-system",references:["https://webkit.org/blog/3709/using-the-system-font-in-web-content/"],syntax:"| -apple-system"},gradient:{comment:"added legacy syntaxes support",syntax:"| <-legacy-gradient>"},left:{comment:"missed; not sure we should add it, but no others except `shape` is using it so it's ok for now; https://drafts.fxtf.org/css-masking-1/#funcdef-clip-rect",syntax:"<length> | auto"},"mask-image":{comment:"missed; https://drafts.fxtf.org/css-masking-1/#the-mask-image",syntax:"<mask-reference>#"},"name-repeat":{comment:"missed, and looks like obsolete, keep it as is since other property syntaxes should be changed too; https://www.w3.org/TR/2015/WD-css-grid-1-20150917/#typedef-name-repeat",syntax:"repeat( [ <positive-integer> | auto-fill ], <line-names>+)"},"named-color":{comment:"added non standard color names",syntax:"| <-non-standard-color>"},paint:{comment:"used by SVG https://www.w3.org/TR/SVG/painting.html#SpecifyingPaint",syntax:"none | <color> | <url> [ none | <color> ]? | context-fill | context-stroke"},"page-size":{comment:"https://www.w3.org/TR/css-page-3/#typedef-page-size-page-size",syntax:"A5 | A4 | A3 | B5 | B4 | JIS-B5 | JIS-B4 | letter | legal | ledger"},ratio:{comment:"missed, https://drafts.csswg.org/mediaqueries-4/#typedef-ratio",syntax:"<integer> / <integer>"},right:{comment:"missed; not sure we should add it, but no others except `shape` is using it so it's ok for now; https://drafts.fxtf.org/css-masking-1/#funcdef-clip-rect",syntax:"<length> | auto"},shape:{comment:"missed spaces in function body and add backwards compatible syntax",syntax:"rect( <top>, <right>, <bottom>, <left> ) | rect( <top> <right> <bottom> <left> )"},"svg-length":{comment:"All coordinates and lengths in SVG can be specified with or without a unit identifier",references:["https://www.w3.org/TR/SVG11/coords.html#Units"],syntax:"<percentage> | <length> | <number>"},"svg-writing-mode":{comment:"SVG specific keywords (deprecated for CSS)",references:["https://developer.mozilla.org/en/docs/Web/CSS/writing-mode","https://www.w3.org/TR/SVG/text.html#WritingModeProperty"],syntax:"lr-tb | rl-tb | tb-rl | lr | rl | tb"},top:{comment:"missed; not sure we should add it, but no others except `shape` is using it so it's ok for now; https://drafts.fxtf.org/css-masking-1/#funcdef-clip-rect",syntax:"<length> | auto"},"track-group":{comment:"used by old grid-columns and grid-rows syntax v0",syntax:"'(' [ <string>* <track-minmax> <string>* ]+ ')' [ '[' <positive-integer> ']' ]? | <track-minmax>"},"track-list-v0":{comment:"used by old grid-columns and grid-rows syntax v0",syntax:"[ <string>* <track-group> <string>* ]+ | none"},"track-minmax":{comment:"used by old grid-columns and grid-rows syntax v0",syntax:"minmax( <track-breadth> , <track-breadth> ) | auto | <track-breadth> | fit-content"},x:{comment:"missed; not sure we should add it, but no others except `cursor` is using it so it's ok for now; https://drafts.csswg.org/css-ui-3/#cursor",syntax:"<number>"},y:{comment:"missed; not sure we should add it, but no others except `cursor` is using so it's ok for now; https://drafts.csswg.org/css-ui-3/#cursor",syntax:"<number>"},declaration:{comment:"missed, restored by https://drafts.csswg.org/css-syntax",syntax:"<ident-token> : <declaration-value>? [ '!' important ]?"},"declaration-list":{comment:"missed, restored by https://drafts.csswg.org/css-syntax",syntax:"[ <declaration>? ';' ]* <declaration>?"},url:{comment:"https://drafts.csswg.org/css-values-4/#urls",syntax:"url( <string> <url-modifier>* ) | <url-token>"},"url-modifier":{comment:"https://drafts.csswg.org/css-values-4/#typedef-url-modifier",syntax:"<ident> | <function-token> <any-value> )"},"number-zero-one":{syntax:"<number [0,1]>"},"number-one-or-greater":{syntax:"<number [1,\u221E]>"},"positive-integer":{syntax:"<integer [0,\u221E]>"},"-non-standard-display":{syntax:"-ms-inline-flexbox | -ms-grid | -ms-inline-grid | -webkit-flex | -webkit-inline-flex | -webkit-box | -webkit-inline-box | -moz-inline-stack | -moz-box | -moz-inline-box"}}}});var SS=Ee((m4,wS)=>{var cO=gS(),uO=yS(),dO=_S(),Py=vS(),bS=/^\s*\|\s*/;function hO(s){let o=Object.create(null);for(let p in s){let d=s[p],f=null;if(d.descriptors){f=Object.create(null);for(let a in d.descriptors)f[a]=d.descriptors[a].syntax}o[p.substr(1)]={prelude:d.syntax.trim().match(/^@\S+\s+([^;\{]*)/)[1].trim()||null,descriptors:f}}return o}function Ey(s,o){let p={};for(let d in s)p[d]=s[d].syntax||s[d];for(let d in o)d in s?o[d].syntax?p[d]=bS.test(o[d].syntax)?p[d]+" "+o[d].syntax.trim():o[d].syntax:delete p[d]:o[d].syntax&&(p[d]=o[d].syntax.replace(bS,""));return p}function xS(s){let o={};for(let p in s)o[p]=s[p].syntax;return o}function pO(s,o){let p={};for(let d in s){let f=o[d]&&o[d].descriptors||null;p[d]={prelude:d in o&&"prelude"in o[d]?o[d].prelude:s[d].prelude||null,descriptors:s[d].descriptors?Ey(s[d].descriptors,f||{}):f&&xS(f)}}for(let d in o)hasOwnProperty.call(s,d)||(p[d]={prelude:o[d].prelude||null,descriptors:o[d].descriptors&&xS(o[d].descriptors)});return p}wS.exports={types:Ey(dO,Py.syntaxes),atrules:pO(hO(cO),Py.atrules),properties:Ey(uO,Py.properties)}});var AS=Ee((g4,ES)=>{var kS=yt().cmpChar,PS=yt().isDigit,gh=yt().TYPE,TS=gh.WhiteSpace,CS=gh.Comment,Ay=gh.Ident,Go=gh.Number,fO=gh.Dimension,Js=43,Ea=45,Cf=110,_c=!0,mO=!1;function kf(s,o){var p=this.scanner.tokenStart+s,d=this.scanner.source.charCodeAt(p);for((d===Js||d===Ea)&&(o&&this.error("Number sign is not allowed"),p++);p<this.scanner.tokenEnd;p++)PS(this.scanner.source.charCodeAt(p))||this.error("Integer is expected",p)}function Fu(s){return kf.call(this,0,s)}function Al(s,o){if(!kS(this.scanner.source,this.scanner.tokenStart+s,o)){var p="";switch(o){case Cf:p="N is expected";break;case Ea:p="HyphenMinus is expected";break}this.error(p,this.scanner.tokenStart+s)}}function My(){for(var s=0,o=0,p=this.scanner.tokenType;p===TS||p===CS;)p=this.scanner.lookupType(++s);if(p!==Go)if(this.scanner.isDelim(Js,s)||this.scanner.isDelim(Ea,s)){o=this.scanner.isDelim(Js,s)?Js:Ea;do p=this.scanner.lookupType(++s);while(p===TS||p===CS);p!==Go&&(this.scanner.skip(s),Fu.call(this,_c))}else return null;return s>0&&this.scanner.skip(s),o===0&&(p=this.scanner.source.charCodeAt(this.scanner.tokenStart),p!==Js&&p!==Ea&&this.error("Number sign is expected")),Fu.call(this,o!==0),o===Ea?"-"+this.consume(Go):this.consume(Go)}ES.exports={name:"AnPlusB",structure:{a:[String,null],b:[String,null]},parse:function(){var s=this.scanner.tokenStart,o=null,p=null;if(this.scanner.tokenType===Go)Fu.call(this,mO),p=this.consume(Go);else if(this.scanner.tokenType===Ay&&kS(this.scanner.source,this.scanner.tokenStart,Ea))switch(o="-1",Al.call(this,1,Cf),this.scanner.getTokenLength()){case 2:this.scanner.next(),p=My.call(this);break;case 3:Al.call(this,2,Ea),this.scanner.next(),this.scanner.skipSC(),Fu.call(this,_c),p="-"+this.consume(Go);break;default:Al.call(this,2,Ea),kf.call(this,3,_c),this.scanner.next(),p=this.scanner.substrToCursor(s+2)}else if(this.scanner.tokenType===Ay||this.scanner.isDelim(Js)&&this.scanner.lookupType(1)===Ay){var d=0;switch(o="1",this.scanner.isDelim(Js)&&(d=1,this.scanner.next()),Al.call(this,0,Cf),this.scanner.getTokenLength()){case 1:this.scanner.next(),p=My.call(this);break;case 2:Al.call(this,1,Ea),this.scanner.next(),this.scanner.skipSC(),Fu.call(this,_c),p="-"+this.consume(Go);break;default:Al.call(this,1,Ea),kf.call(this,2,_c),this.scanner.next(),p=this.scanner.substrToCursor(s+d+1)}}else if(this.scanner.tokenType===fO){for(var f=this.scanner.source.charCodeAt(this.scanner.tokenStart),d=f===Js||f===Ea,a=this.scanner.tokenStart+d;a<this.scanner.tokenEnd&&PS(this.scanner.source.charCodeAt(a));a++);a===this.scanner.tokenStart+d&&this.error("Integer is expected",this.scanner.tokenStart+d),Al.call(this,a-this.scanner.tokenStart,Cf),o=this.scanner.source.substring(s,a),a+1===this.scanner.tokenEnd?(this.scanner.next(),p=My.call(this)):(Al.call(this,a-this.scanner.tokenStart+1,Ea),a+2===this.scanner.tokenEnd?(this.scanner.next(),this.scanner.skipSC(),Fu.call(this,_c),p="-"+this.consume(Go)):(kf.call(this,a-this.scanner.tokenStart+2,_c),this.scanner.next(),p=this.scanner.substrToCursor(a+1)))}else this.error();return o!==null&&o.charCodeAt(0)===Js&&(o=o.substr(1)),p!==null&&p.charCodeAt(0)===Js&&(p=p.substr(1)),{type:"AnPlusB",loc:this.getLocation(s,this.scanner.tokenStart),a:o,b:p}},generate:function(s){var o=s.a!==null&&s.a!==void 0,p=s.b!==null&&s.b!==void 0;o?(this.chunk(s.a==="+1"?"+n":s.a==="1"?"n":s.a==="-1"?"-n":s.a+"n"),p&&(p=String(s.b),p.charAt(0)==="-"||p.charAt(0)==="+"?(this.chunk(p.charAt(0)),this.chunk(p.substr(1))):(this.chunk("+"),this.chunk(p)))):this.chunk(String(s.b))}}});var Ml=Ee((y4,zS)=>{var gO=yt(),Pf=gO.TYPE,yO=Pf.WhiteSpace,Iy=Pf.Semicolon,IS=Pf.LeftCurlyBracket,_O=Pf.Delim,vO=33;function bO(){return this.scanner.tokenIndex>0&&this.scanner.lookupType(-1)===yO?this.scanner.tokenIndex>1?this.scanner.getTokenStart(this.scanner.tokenIndex-1):this.scanner.firstCharOffset:this.scanner.tokenStart}function MS(){return 0}function xO(s){return s===IS?1:0}function wO(s){return s===IS||s===Iy?1:0}function SO(s,o,p){return s===_O&&o.charCodeAt(p)===vO||s===Iy?1:0}function TO(s){return s===Iy?2:0}zS.exports={name:"Raw",structure:{value:String},parse:function(s,o,p){var d=this.scanner.getTokenStart(s),f;return this.scanner.skip(this.scanner.getRawLength(s,o||MS)),p&&this.scanner.tokenStart>d?f=bO.call(this):f=this.scanner.tokenStart,{type:"Raw",loc:this.getLocation(d,f),value:this.scanner.source.substring(d,f)}},generate:function(s){this.chunk(s.value)},mode:{default:MS,leftCurlyBracket:xO,leftCurlyBracketOrSemicolon:wO,exclamationMarkOrSemicolon:SO,semicolonIncluded:TO}}});var BS=Ee((_4,RS)=>{var Ef=yt().TYPE,CO=Ml().mode,OS=Ef.AtKeyword,LS=Ef.Semicolon,zy=Ef.LeftCurlyBracket,kO=Ef.RightCurlyBracket;function DS(s){return this.Raw(s,CO.leftCurlyBracketOrSemicolon,!0)}function PO(){for(var s=1,o;o=this.scanner.lookupType(s);s++){if(o===kO)return!0;if(o===zy||o===OS)return!1}return!1}RS.exports={name:"Atrule",structure:{name:String,prelude:["AtrulePrelude","Raw",null],block:["Block",null]},parse:function(){var s=this.scanner.tokenStart,o,p,d=null,f=null;switch(this.eat(OS),o=this.scanner.substrToCursor(s+1),p=o.toLowerCase(),this.scanner.skipSC(),this.scanner.eof===!1&&this.scanner.tokenType!==zy&&this.scanner.tokenType!==LS&&(this.parseAtrulePrelude?(d=this.parseWithFallback(this.AtrulePrelude.bind(this,o),DS),d.type==="AtrulePrelude"&&d.children.head===null&&(d=null)):d=DS.call(this,this.scanner.tokenIndex),this.scanner.skipSC()),this.scanner.tokenType){case LS:this.scanner.next();break;case zy:this.atrule.hasOwnProperty(p)&&typeof this.atrule[p].block=="function"?f=this.atrule[p].block.call(this):f=this.Block(PO.call(this));break}return{type:"Atrule",loc:this.getLocation(s,this.scanner.tokenStart),name:o,prelude:d,block:f}},generate:function(s){this.chunk("@"),this.chunk(s.name),s.prelude!==null&&(this.chunk(" "),this.node(s.prelude)),s.block?this.node(s.block):this.chunk(";")},walkContext:"atrule"}});var NS=Ee((v4,jS)=>{var FS=yt().TYPE,EO=FS.Semicolon,AO=FS.LeftCurlyBracket;jS.exports={name:"AtrulePrelude",structure:{children:[[]]},parse:function(s){var o=null;return s!==null&&(s=s.toLowerCase()),this.scanner.skipSC(),this.atrule.hasOwnProperty(s)&&typeof this.atrule[s].prelude=="function"?o=this.atrule[s].prelude.call(this):o=this.readSequence(this.scope.AtrulePrelude),this.scanner.skipSC(),this.scanner.eof!==!0&&this.scanner.tokenType!==AO&&this.scanner.tokenType!==EO&&this.error("Semicolon or block is expected"),o===null&&(o=this.createList()),{type:"AtrulePrelude",loc:this.getLocationFromList(o),children:o}},generate:function(s){this.children(s)},walkContext:"atrulePrelude"}});var GS=Ee((b4,WS)=>{var _h=yt().TYPE,yh=_h.Ident,MO=_h.String,IO=_h.Colon,zO=_h.LeftSquareBracket,qS=_h.RightSquareBracket,LO=36,VS=42,Af=61,DO=94,Ly=124,OO=126;function RO(){this.scanner.eof&&this.error("Unexpected end of input");var s=this.scanner.tokenStart,o=!1,p=!0;return this.scanner.isDelim(VS)?(o=!0,p=!1,this.scanner.next()):this.scanner.isDelim(Ly)||this.eat(yh),this.scanner.isDelim(Ly)?this.scanner.source.charCodeAt(this.scanner.tokenStart+1)!==Af?(this.scanner.next(),this.eat(yh)):o&&this.error("Identifier is expected",this.scanner.tokenEnd):o&&this.error("Vertical line is expected"),p&&this.scanner.tokenType===IO&&(this.scanner.next(),this.eat(yh)),{type:"Identifier",loc:this.getLocation(s,this.scanner.tokenStart),name:this.scanner.substrToCursor(s)}}function BO(){var s=this.scanner.tokenStart,o=this.scanner.source.charCodeAt(s);return o!==Af&&o!==OO&&o!==DO&&o!==LO&&o!==VS&&o!==Ly&&this.error("Attribute selector (=, ~=, ^=, $=, *=, |=) is expected"),this.scanner.next(),o!==Af&&(this.scanner.isDelim(Af)||this.error("Equal sign is expected"),this.scanner.next()),this.scanner.substrToCursor(s)}WS.exports={name:"AttributeSelector",structure:{name:"Identifier",matcher:[String,null],value:["String","Identifier",null],flags:[String,null]},parse:function(){var s=this.scanner.tokenStart,o,p=null,d=null,f=null;return this.eat(zO),this.scanner.skipSC(),o=RO.call(this),this.scanner.skipSC(),this.scanner.tokenType!==qS&&(this.scanner.tokenType!==yh&&(p=BO.call(this),this.scanner.skipSC(),d=this.scanner.tokenType===MO?this.String():this.Identifier(),this.scanner.skipSC()),this.scanner.tokenType===yh&&(f=this.scanner.getTokenValue(),this.scanner.next(),this.scanner.skipSC())),this.eat(qS),{type:"AttributeSelector",loc:this.getLocation(s,this.scanner.tokenStart),name:o,matcher:p,value:d,flags:f}},generate:function(s){var o=" ";this.chunk("["),this.node(s.name),s.matcher!==null&&(this.chunk(s.matcher),s.value!==null&&(this.node(s.value),s.value.type==="String"&&(o=""))),s.flags!==null&&(this.chunk(o),this.chunk(s.flags)),this.chunk("]")}}});var XS=Ee((x4,YS)=>{var ju=yt().TYPE,FO=Ml().mode,jO=ju.WhiteSpace,NO=ju.Comment,US=ju.Semicolon,qO=ju.AtKeyword,VO=ju.LeftCurlyBracket,ZS=ju.RightCurlyBracket;function HS(s){return this.Raw(s,null,!0)}function WO(){return this.parseWithFallback(this.Rule,HS)}function $S(s){return this.Raw(s,FO.semicolonIncluded,!0)}function GO(){if(this.scanner.tokenType===US)return $S.call(this,this.scanner.tokenIndex);var s=this.parseWithFallback(this.Declaration,$S);return this.scanner.tokenType===US&&this.scanner.next(),s}YS.exports={name:"Block",structure:{children:[["Atrule","Rule","Declaration"]]},parse:function(s){var o=s?GO:WO,p=this.scanner.tokenStart,d=this.createList();this.eat(VO);e:for(;!this.scanner.eof;)switch(this.scanner.tokenType){case ZS:break e;case jO:case NO:this.scanner.next();break;case qO:d.push(this.parseWithFallback(this.Atrule,HS));break;default:d.push(o.call(this))}return this.scanner.eof||this.eat(ZS),{type:"Block",loc:this.getLocation(p,this.scanner.tokenStart),children:d}},generate:function(s){this.chunk("{"),this.children(s,function(o){o.type==="Declaration"&&this.chunk(";")}),this.chunk("}")},walkContext:"block"}});var JS=Ee((w4,QS)=>{var KS=yt().TYPE,UO=KS.LeftSquareBracket,ZO=KS.RightSquareBracket;QS.exports={name:"Brackets",structure:{children:[[]]},parse:function(s,o){var p=this.scanner.tokenStart,d=null;return this.eat(UO),d=s.call(this,o),this.scanner.eof||this.eat(ZO),{type:"Brackets",loc:this.getLocation(p,this.scanner.tokenStart),children:d}},generate:function(s){this.chunk("["),this.children(s),this.chunk("]")}}});var t2=Ee((S4,e2)=>{var $O=yt().TYPE.CDC;e2.exports={name:"CDC",structure:[],parse:function(){var s=this.scanner.tokenStart;return this.eat($O),{type:"CDC",loc:this.getLocation(s,this.scanner.tokenStart)}},generate:function(){this.chunk("-->")}}});var r2=Ee((T4,i2)=>{var HO=yt().TYPE.CDO;i2.exports={name:"CDO",structure:[],parse:function(){var s=this.scanner.tokenStart;return this.eat(HO),{type:"CDO",loc:this.getLocation(s,this.scanner.tokenStart)}},generate:function(){this.chunk("<!--")}}});var a2=Ee((C4,n2)=>{var YO=yt().TYPE,XO=YO.Ident,KO=46;n2.exports={name:"ClassSelector",structure:{name:String},parse:function(){return this.scanner.isDelim(KO)||this.error("Full stop is expected"),this.scanner.next(),{type:"ClassSelector",loc:this.getLocation(this.scanner.tokenStart-1,this.scanner.tokenEnd),name:this.consume(XO)}},generate:function(s){this.chunk("."),this.chunk(s.name)}}});var l2=Ee((k4,o2)=>{var QO=yt().TYPE,JO=QO.Ident,eR=43,s2=47,tR=62,iR=126;o2.exports={name:"Combinator",structure:{name:String},parse:function(){var s=this.scanner.tokenStart,o=this.scanner.source.charCodeAt(this.scanner.tokenStart);switch(o){case tR:case eR:case iR:this.scanner.next();break;case s2:this.scanner.next(),(this.scanner.tokenType!==JO||this.scanner.lookupValue(0,"deep")===!1)&&this.error("Identifier `deep` is expected"),this.scanner.next(),this.scanner.isDelim(s2)||this.error("Solidus is expected"),this.scanner.next();break;default:this.error("Combinator is expected")}return{type:"Combinator",loc:this.getLocation(s,this.scanner.tokenStart),name:this.scanner.substrToCursor(s)}},generate:function(s){this.chunk(s.name)}}});var u2=Ee((P4,c2)=>{var rR=yt().TYPE,nR=rR.Comment,aR=42,sR=47;c2.exports={name:"Comment",structure:{value:String},parse:function(){var s=this.scanner.tokenStart,o=this.scanner.tokenEnd;return this.eat(nR),o-s+2>=2&&this.scanner.source.charCodeAt(o-2)===aR&&this.scanner.source.charCodeAt(o-1)===sR&&(o-=2),{type:"Comment",loc:this.getLocation(s,this.scanner.tokenStart),value:this.scanner.source.substring(s+2,o)}},generate:function(s){this.chunk("/*"),this.chunk(s.value),this.chunk("*/")}}});var v2=Ee((E4,_2)=>{var oR=Jp().isCustomProperty,Nu=yt().TYPE,p2=Ml().mode,f2=Nu.Ident,d2=Nu.Hash,lR=Nu.Colon,m2=Nu.Semicolon,g2=Nu.Delim,cR=Nu.WhiteSpace,y2=33,uR=35,dR=36,hR=38,pR=42,fR=43,h2=47;function mR(s){return this.Raw(s,p2.exclamationMarkOrSemicolon,!0)}function gR(s){return this.Raw(s,p2.exclamationMarkOrSemicolon,!1)}function yR(){var s=this.scanner.tokenIndex,o=this.Value();return o.type!=="Raw"&&this.scanner.eof===!1&&this.scanner.tokenType!==m2&&this.scanner.isDelim(y2)===!1&&this.scanner.isBalanceEdge(s)===!1&&this.error(),o}_2.exports={name:"Declaration",structure:{important:[Boolean,String],property:String,value:["Value","Raw"]},parse:function(){var s=this.scanner.tokenStart,o=this.scanner.tokenIndex,p=_R.call(this),d=oR(p),f=d?this.parseCustomProperty:this.parseValue,a=d?gR:mR,T=!1,M;this.scanner.skipSC(),this.eat(lR);let R=this.scanner.tokenIndex;if(d||this.scanner.skipSC(),f?M=this.parseWithFallback(yR,a):M=a.call(this,this.scanner.tokenIndex),d&&M.type==="Value"&&M.children.isEmpty()){for(let V=R-this.scanner.tokenIndex;V<=0;V++)if(this.scanner.lookupType(V)===cR){M.children.appendData({type:"WhiteSpace",loc:null,value:" "});break}}return this.scanner.isDelim(y2)&&(T=vR.call(this),this.scanner.skipSC()),this.scanner.eof===!1&&this.scanner.tokenType!==m2&&this.scanner.isBalanceEdge(o)===!1&&this.error(),{type:"Declaration",loc:this.getLocation(s,this.scanner.tokenStart),important:T,property:p,value:M}},generate:function(s){this.chunk(s.property),this.chunk(":"),this.node(s.value),s.important&&this.chunk(s.important===!0?"!important":"!"+s.important)},walkContext:"declaration"};function _R(){var s=this.scanner.tokenStart,o=0;if(this.scanner.tokenType===g2)switch(this.scanner.source.charCodeAt(this.scanner.tokenStart)){case pR:case dR:case fR:case uR:case hR:this.scanner.next();break;case h2:this.scanner.next(),this.scanner.isDelim(h2)&&this.scanner.next();break}return o&&this.scanner.skip(o),this.scanner.tokenType===d2?this.eat(d2):this.eat(f2),this.scanner.substrToCursor(s)}function vR(){this.eat(g2),this.scanner.skipSC();var s=this.consume(f2);return s==="important"?!0:s}});var x2=Ee((A4,b2)=>{var Dy=yt().TYPE,bR=Ml().mode,xR=Dy.WhiteSpace,wR=Dy.Comment,SR=Dy.Semicolon;function TR(s){return this.Raw(s,bR.semicolonIncluded,!0)}b2.exports={name:"DeclarationList",structure:{children:[["Declaration"]]},parse:function(){for(var s=this.createList();!this.scanner.eof;)switch(this.scanner.tokenType){case xR:case wR:case SR:this.scanner.next();break;default:s.push(this.parseWithFallback(this.Declaration,TR))}return{type:"DeclarationList",loc:this.getLocationFromList(s),children:s}},generate:function(s){this.children(s,function(o){o.type==="Declaration"&&this.chunk(";")})}}});var S2=Ee((M4,w2)=>{var CR=Pu().consumeNumber,kR=yt().TYPE,PR=kR.Dimension;w2.exports={name:"Dimension",structure:{value:String,unit:String},parse:function(){var s=this.scanner.tokenStart,o=CR(this.scanner.source,s);return this.eat(PR),{type:"Dimension",loc:this.getLocation(s,this.scanner.tokenStart),value:this.scanner.source.substring(s,o),unit:this.scanner.source.substring(o,this.scanner.tokenStart)}},generate:function(s){this.chunk(s.value),this.chunk(s.unit)}}});var C2=Ee((I4,T2)=>{var ER=yt().TYPE,AR=ER.RightParenthesis;T2.exports={name:"Function",structure:{name:String,children:[[]]},parse:function(s,o){var p=this.scanner.tokenStart,d=this.consumeFunctionName(),f=d.toLowerCase(),a;return a=o.hasOwnProperty(f)?o[f].call(this,o):s.call(this,o),this.scanner.eof||this.eat(AR),{type:"Function",loc:this.getLocation(p,this.scanner.tokenStart),name:d,children:a}},generate:function(s){this.chunk(s.name),this.chunk("("),this.children(s),this.chunk(")")},walkContext:"function"}});var P2=Ee((z4,k2)=>{var MR=yt().TYPE,IR=MR.Hash;k2.exports={name:"Hash",structure:{value:String},parse:function(){var s=this.scanner.tokenStart;return this.eat(IR),{type:"Hash",loc:this.getLocation(s,this.scanner.tokenStart),value:this.scanner.substrToCursor(s+1)}},generate:function(s){this.chunk("#"),this.chunk(s.value)}}});var A2=Ee((L4,E2)=>{var zR=yt().TYPE,LR=zR.Ident;E2.exports={name:"Identifier",structure:{name:String},parse:function(){return{type:"Identifier",loc:this.getLocation(this.scanner.tokenStart,this.scanner.tokenEnd),name:this.consume(LR)}},generate:function(s){this.chunk(s.name)}}});var I2=Ee((D4,M2)=>{var DR=yt().TYPE,OR=DR.Hash;M2.exports={name:"IdSelector",structure:{name:String},parse:function(){var s=this.scanner.tokenStart;return this.eat(OR),{type:"IdSelector",loc:this.getLocation(s,this.scanner.tokenStart),name:this.scanner.substrToCursor(s+1)}},generate:function(s){this.chunk("#"),this.chunk(s.name)}}});var O2=Ee((O4,D2)=>{var vc=yt().TYPE,z2=vc.Ident,RR=vc.Number,BR=vc.Dimension,FR=vc.LeftParenthesis,L2=vc.RightParenthesis,jR=vc.Colon,NR=vc.Delim;D2.exports={name:"MediaFeature",structure:{name:String,value:["Identifier","Number","Dimension","Ratio",null]},parse:function(){var s=this.scanner.tokenStart,o,p=null;if(this.eat(FR),this.scanner.skipSC(),o=this.consume(z2),this.scanner.skipSC(),this.scanner.tokenType!==L2){switch(this.eat(jR),this.scanner.skipSC(),this.scanner.tokenType){case RR:this.lookupNonWSType(1)===NR?p=this.Ratio():p=this.Number();break;case BR:p=this.Dimension();break;case z2:p=this.Identifier();break;default:this.error("Number, dimension, ratio or identifier is expected")}this.scanner.skipSC()}return this.eat(L2),{type:"MediaFeature",loc:this.getLocation(s,this.scanner.tokenStart),name:o,value:p}},generate:function(s){this.chunk("("),this.chunk(s.name),s.value!==null&&(this.chunk(":"),this.node(s.value)),this.chunk(")")}}});var B2=Ee((R4,R2)=>{var Mf=yt().TYPE,qR=Mf.WhiteSpace,VR=Mf.Comment,WR=Mf.Ident,GR=Mf.LeftParenthesis;R2.exports={name:"MediaQuery",structure:{children:[["Identifier","MediaFeature","WhiteSpace"]]},parse:function(){this.scanner.skipSC();var s=this.createList(),o=null,p=null;e:for(;!this.scanner.eof;){switch(this.scanner.tokenType){case VR:this.scanner.next();continue;case qR:p=this.WhiteSpace();continue;case WR:o=this.Identifier();break;case GR:o=this.MediaFeature();break;default:break e}p!==null&&(s.push(p),p=null),s.push(o)}return o===null&&this.error("Identifier or parenthesis is expected"),{type:"MediaQuery",loc:this.getLocationFromList(s),children:s}},generate:function(s){this.children(s)}}});var j2=Ee((B4,F2)=>{var UR=yt().TYPE.Comma;F2.exports={name:"MediaQueryList",structure:{children:[["MediaQuery"]]},parse:function(s){var o=this.createList();for(this.scanner.skipSC();!this.scanner.eof&&(o.push(this.MediaQuery(s)),this.scanner.tokenType===UR);)this.scanner.next();return{type:"MediaQueryList",loc:this.getLocationFromList(o),children:o}},generate:function(s){this.children(s,function(){this.chunk(",")})}}});var q2=Ee((F4,N2)=>{N2.exports={name:"Nth",structure:{nth:["AnPlusB","Identifier"],selector:["SelectorList",null]},parse:function(s){this.scanner.skipSC();var o=this.scanner.tokenStart,p=o,d=null,f;return this.scanner.lookupValue(0,"odd")||this.scanner.lookupValue(0,"even")?f=this.Identifier():f=this.AnPlusB(),this.scanner.skipSC(),s&&this.scanner.lookupValue(0,"of")?(this.scanner.next(),d=this.SelectorList(),this.needPositions&&(p=this.getLastListNode(d.children).loc.end.offset)):this.needPositions&&(p=f.loc.end.offset),{type:"Nth",loc:this.getLocation(o,p),nth:f,selector:d}},generate:function(s){this.node(s.nth),s.selector!==null&&(this.chunk(" of "),this.node(s.selector))}}});var W2=Ee((j4,V2)=>{var ZR=yt().TYPE.Number;V2.exports={name:"Number",structure:{value:String},parse:function(){return{type:"Number",loc:this.getLocation(this.scanner.tokenStart,this.scanner.tokenEnd),value:this.consume(ZR)}},generate:function(s){this.chunk(s.value)}}});var U2=Ee((N4,G2)=>{G2.exports={name:"Operator",structure:{value:String},parse:function(){var s=this.scanner.tokenStart;return this.scanner.next(),{type:"Operator",loc:this.getLocation(s,this.scanner.tokenStart),value:this.scanner.substrToCursor(s)}},generate:function(s){this.chunk(s.value)}}});var H2=Ee((q4,$2)=>{var Z2=yt().TYPE,$R=Z2.LeftParenthesis,HR=Z2.RightParenthesis;$2.exports={name:"Parentheses",structure:{children:[[]]},parse:function(s,o){var p=this.scanner.tokenStart,d=null;return this.eat($R),d=s.call(this,o),this.scanner.eof||this.eat(HR),{type:"Parentheses",loc:this.getLocation(p,this.scanner.tokenStart),children:d}},generate:function(s){this.chunk("("),this.children(s),this.chunk(")")}}});var X2=Ee((V4,Y2)=>{var YR=Pu().consumeNumber,XR=yt().TYPE,KR=XR.Percentage;Y2.exports={name:"Percentage",structure:{value:String},parse:function(){var s=this.scanner.tokenStart,o=YR(this.scanner.source,s);return this.eat(KR),{type:"Percentage",loc:this.getLocation(s,this.scanner.tokenStart),value:this.scanner.source.substring(s,o)}},generate:function(s){this.chunk(s.value),this.chunk("%")}}});var Q2=Ee((W4,K2)=>{var If=yt().TYPE,QR=If.Ident,JR=If.Function,eB=If.Colon,tB=If.RightParenthesis;K2.exports={name:"PseudoClassSelector",structure:{name:String,children:[["Raw"],null]},parse:function(){var s=this.scanner.tokenStart,o=null,p,d;return this.eat(eB),this.scanner.tokenType===JR?(p=this.consumeFunctionName(),d=p.toLowerCase(),this.pseudo.hasOwnProperty(d)?(this.scanner.skipSC(),o=this.pseudo[d].call(this),this.scanner.skipSC()):(o=this.createList(),o.push(this.Raw(this.scanner.tokenIndex,null,!1))),this.eat(tB)):p=this.consume(QR),{type:"PseudoClassSelector",loc:this.getLocation(s,this.scanner.tokenStart),name:p,children:o}},generate:function(s){this.chunk(":"),this.chunk(s.name),s.children!==null&&(this.chunk("("),this.children(s),this.chunk(")"))},walkContext:"function"}});var tT=Ee((G4,eT)=>{var zf=yt().TYPE,iB=zf.Ident,rB=zf.Function,J2=zf.Colon,nB=zf.RightParenthesis;eT.exports={name:"PseudoElementSelector",structure:{name:String,children:[["Raw"],null]},parse:function(){var s=this.scanner.tokenStart,o=null,p,d;return this.eat(J2),this.eat(J2),this.scanner.tokenType===rB?(p=this.consumeFunctionName(),d=p.toLowerCase(),this.pseudo.hasOwnProperty(d)?(this.scanner.skipSC(),o=this.pseudo[d].call(this),this.scanner.skipSC()):(o=this.createList(),o.push(this.Raw(this.scanner.tokenIndex,null,!1))),this.eat(nB)):p=this.consume(iB),{type:"PseudoElementSelector",loc:this.getLocation(s,this.scanner.tokenStart),name:p,children:o}},generate:function(s){this.chunk("::"),this.chunk(s.name),s.children!==null&&(this.chunk("("),this.children(s),this.chunk(")"))},walkContext:"function"}});var aT=Ee((U4,nT)=>{var aB=yt().isDigit,rT=yt().TYPE,sB=rT.Number,oB=rT.Delim,lB=47,cB=46;function iT(){this.scanner.skipWS();for(var s=this.consume(sB),o=0;o<s.length;o++){var p=s.charCodeAt(o);!aB(p)&&p!==cB&&this.error("Unsigned number is expected",this.scanner.tokenStart-s.length+o)}return Number(s)===0&&this.error("Zero number is not allowed",this.scanner.tokenStart-s.length),s}nT.exports={name:"Ratio",structure:{left:String,right:String},parse:function(){var s=this.scanner.tokenStart,o=iT.call(this),p;return this.scanner.skipWS(),this.scanner.isDelim(lB)||this.error("Solidus is expected"),this.eat(oB),p=iT.call(this),{type:"Ratio",loc:this.getLocation(s,this.scanner.tokenStart),left:o,right:p}},generate:function(s){this.chunk(s.left),this.chunk("/"),this.chunk(s.right)}}});var lT=Ee((Z4,oT)=>{var uB=yt().TYPE,dB=Ml().mode,hB=uB.LeftCurlyBracket;function sT(s){return this.Raw(s,dB.leftCurlyBracket,!0)}function pB(){var s=this.SelectorList();return s.type!=="Raw"&&this.scanner.eof===!1&&this.scanner.tokenType!==hB&&this.error(),s}oT.exports={name:"Rule",structure:{prelude:["SelectorList","Raw"],block:["Block"]},parse:function(){var s=this.scanner.tokenIndex,o=this.scanner.tokenStart,p,d;return this.parseRulePrelude?p=this.parseWithFallback(pB,sT):p=sT.call(this,s),d=this.Block(!0),{type:"Rule",loc:this.getLocation(o,this.scanner.tokenStart),prelude:p,block:d}},generate:function(s){this.node(s.prelude),this.node(s.block)},walkContext:"rule"}});var uT=Ee(($4,cT)=>{cT.exports={name:"Selector",structure:{children:[["TypeSelector","IdSelector","ClassSelector","AttributeSelector","PseudoClassSelector","PseudoElementSelector","Combinator","WhiteSpace"]]},parse:function(){var s=this.readSequence(this.scope.Selector);return this.getFirstListNode(s)===null&&this.error("Selector is expected"),{type:"Selector",loc:this.getLocationFromList(s),children:s}},generate:function(s){this.children(s)}}});var hT=Ee((H4,dT)=>{var fB=yt().TYPE,mB=fB.Comma;dT.exports={name:"SelectorList",structure:{children:[["Selector","Raw"]]},parse:function(){for(var s=this.createList();!this.scanner.eof;){if(s.push(this.Selector()),this.scanner.tokenType===mB){this.scanner.next();continue}break}return{type:"SelectorList",loc:this.getLocationFromList(s),children:s}},generate:function(s){this.children(s,function(){this.chunk(",")})},walkContext:"selector"}});var fT=Ee((Y4,pT)=>{var gB=yt().TYPE.String;pT.exports={name:"String",structure:{value:String},parse:function(){return{type:"String",loc:this.getLocation(this.scanner.tokenStart,this.scanner.tokenEnd),value:this.consume(gB)}},generate:function(s){this.chunk(s.value)}}});var yT=Ee((X4,gT)=>{var vh=yt().TYPE,yB=vh.WhiteSpace,_B=vh.Comment,vB=vh.AtKeyword,bB=vh.CDO,xB=vh.CDC,wB=33;function mT(s){return this.Raw(s,null,!1)}gT.exports={name:"StyleSheet",structure:{children:[["Comment","CDO","CDC","Atrule","Rule","Raw"]]},parse:function(){for(var s=this.scanner.tokenStart,o=this.createList(),p;!this.scanner.eof;){switch(this.scanner.tokenType){case yB:this.scanner.next();continue;case _B:if(this.scanner.source.charCodeAt(this.scanner.tokenStart+2)!==wB){this.scanner.next();continue}p=this.Comment();break;case bB:p=this.CDO();break;case xB:p=this.CDC();break;case vB:p=this.parseWithFallback(this.Atrule,mT);break;default:p=this.parseWithFallback(this.Rule,mT)}o.push(p)}return{type:"StyleSheet",loc:this.getLocation(s,this.scanner.tokenStart),children:o}},generate:function(s){this.children(s)},walkContext:"stylesheet"}});var bT=Ee((K4,vT)=>{var SB=yt().TYPE,TB=SB.Ident,CB=42,_T=124;function Oy(){this.scanner.tokenType!==TB&&this.scanner.isDelim(CB)===!1&&this.error("Identifier or asterisk is expected"),this.scanner.next()}vT.exports={name:"TypeSelector",structure:{name:String},parse:function(){var s=this.scanner.tokenStart;return this.scanner.isDelim(_T)?(this.scanner.next(),Oy.call(this)):(Oy.call(this),this.scanner.isDelim(_T)&&(this.scanner.next(),Oy.call(this))),{type:"TypeSelector",loc:this.getLocation(s,this.scanner.tokenStart),name:this.scanner.substrToCursor(s)}},generate:function(s){this.chunk(s.name)}}});var kT=Ee((Q4,CT)=>{var kB=yt().isHexDigit,xT=yt().cmpChar,Fy=yt().TYPE,PB=yt().NAME,EB=Fy.Ident,wT=Fy.Number,ST=Fy.Dimension,Df=43,TT=45,By=63,AB=117;function bh(s,o){for(var p=this.scanner.tokenStart+s,d=0;p<this.scanner.tokenEnd;p++){var f=this.scanner.source.charCodeAt(p);if(f===TT&&o&&d!==0)return bh.call(this,s+d+1,!1)===0&&this.error(),-1;kB(f)||this.error(o&&d!==0?"HyphenMinus"+(d<6?" or hex digit":"")+" is expected":d<6?"Hex digit is expected":"Unexpected input",p),++d>6&&this.error("Too many hex digits",p)}return this.scanner.next(),d}function Lf(s){for(var o=0;this.scanner.isDelim(By);)++o>s&&this.error("Too many question marks"),this.scanner.next()}function Ry(s){this.scanner.source.charCodeAt(this.scanner.tokenStart)!==s&&this.error(PB[s]+" is expected")}function MB(){var s=0;if(this.scanner.isDelim(Df)){if(this.scanner.next(),this.scanner.tokenType===EB){s=bh.call(this,0,!0),s>0&&Lf.call(this,6-s);return}if(this.scanner.isDelim(By)){this.scanner.next(),Lf.call(this,5);return}this.error("Hex digit or question mark is expected");return}if(this.scanner.tokenType===wT){if(Ry.call(this,Df),s=bh.call(this,1,!0),this.scanner.isDelim(By)){Lf.call(this,6-s);return}if(this.scanner.tokenType===ST||this.scanner.tokenType===wT){Ry.call(this,TT),bh.call(this,1,!1);return}return}if(this.scanner.tokenType===ST){Ry.call(this,Df),s=bh.call(this,1,!0),s>0&&Lf.call(this,6-s);return}this.error()}CT.exports={name:"UnicodeRange",structure:{value:String},parse:function(){var s=this.scanner.tokenStart;return xT(this.scanner.source,s,AB)||this.error("U is expected"),xT(this.scanner.source,s+1,Df)||this.error("Plus sign is expected"),this.scanner.next(),MB.call(this),{type:"UnicodeRange",loc:this.getLocation(s,this.scanner.tokenStart),value:this.scanner.substrToCursor(s)}},generate:function(s){this.chunk(s.value)}}});var IT=Ee((J4,MT)=>{var PT=yt().isWhiteSpace,IB=yt().cmpStr,jy=yt().TYPE,ET=jy.Function,AT=jy.Url,zB=jy.RightParenthesis;MT.exports={name:"Url",structure:{value:["String","Raw"]},parse:function(){var s=this.scanner.tokenStart,o;switch(this.scanner.tokenType){case AT:for(var p=s+4,d=this.scanner.tokenEnd-1;p<d&&PT(this.scanner.source.charCodeAt(p));)p++;for(;p<d&&PT(this.scanner.source.charCodeAt(d-1));)d--;o={type:"Raw",loc:this.getLocation(p,d),value:this.scanner.source.substring(p,d)},this.eat(AT);break;case ET:IB(this.scanner.source,this.scanner.tokenStart,this.scanner.tokenEnd,"url(")||this.error("Function name must be `url`"),this.eat(ET),this.scanner.skipSC(),o=this.String(),this.scanner.skipSC(),this.eat(zB);break;default:this.error("Url or Function is expected")}return{type:"Url",loc:this.getLocation(s,this.scanner.tokenStart),value:o}},generate:function(s){this.chunk("url"),this.chunk("("),this.node(s.value),this.chunk(")")}}});var LT=Ee((eN,zT)=>{zT.exports={name:"Value",structure:{children:[[]]},parse:function(){var s=this.scanner.tokenStart,o=this.readSequence(this.scope.Value);return{type:"Value",loc:this.getLocation(s,this.scanner.tokenStart),children:o}},generate:function(s){this.children(s)}}});var OT=Ee((tN,DT)=>{var LB=yt().TYPE.WhiteSpace,DB=Object.freeze({type:"WhiteSpace",loc:null,value:" "});DT.exports={name:"WhiteSpace",structure:{value:String},parse:function(){return this.eat(LB),DB},generate:function(s){this.chunk(s.value)}}});var Of=Ee((iN,RT)=>{RT.exports={AnPlusB:AS(),Atrule:BS(),AtrulePrelude:NS(),AttributeSelector:GS(),Block:XS(),Brackets:JS(),CDC:t2(),CDO:r2(),ClassSelector:a2(),Combinator:l2(),Comment:u2(),Declaration:v2(),DeclarationList:x2(),Dimension:S2(),Function:C2(),Hash:P2(),Identifier:A2(),IdSelector:I2(),MediaFeature:O2(),MediaQuery:B2(),MediaQueryList:j2(),Nth:q2(),Number:W2(),Operator:U2(),Parentheses:H2(),Percentage:X2(),PseudoClassSelector:Q2(),PseudoElementSelector:tT(),Ratio:aT(),Raw:Ml(),Rule:lT(),Selector:uT(),SelectorList:hT(),String:fT(),StyleSheet:yT(),TypeSelector:bT(),UnicodeRange:kT(),Url:IT(),Value:LT(),WhiteSpace:OT()}});var FT=Ee((rN,BT)=>{var Ny=SS();BT.exports={generic:!0,types:Ny.types,atrules:Ny.atrules,properties:Ny.properties,node:Of()}});var qy=Ee((nN,qT)=>{var jT=yt().cmpChar,OB=yt().cmpStr,Ha=yt().TYPE,RB=Ha.Ident,BB=Ha.String,FB=Ha.Number,jB=Ha.Function,NB=Ha.Url,qB=Ha.Hash,VB=Ha.Dimension,WB=Ha.Percentage,GB=Ha.LeftParenthesis,UB=Ha.LeftSquareBracket,ZB=Ha.Comma,$B=Ha.Delim,HB=35,YB=42,NT=43,XB=45,KB=47,QB=117;qT.exports=function(o){switch(this.scanner.tokenType){case qB:return this.Hash();case ZB:return o.space=null,o.ignoreWSAfter=!0,this.Operator();case GB:return this.Parentheses(this.readSequence,o.recognizer);case UB:return this.Brackets(this.readSequence,o.recognizer);case BB:return this.String();case VB:return this.Dimension();case WB:return this.Percentage();case FB:return this.Number();case jB:return OB(this.scanner.source,this.scanner.tokenStart,this.scanner.tokenEnd,"url(")?this.Url():this.Function(this.readSequence,o.recognizer);case NB:return this.Url();case RB:return jT(this.scanner.source,this.scanner.tokenStart,QB)&&jT(this.scanner.source,this.scanner.tokenStart+1,NT)?this.UnicodeRange():this.Identifier();case $B:var p=this.scanner.source.charCodeAt(this.scanner.tokenStart);if(p===KB||p===YB||p===NT||p===XB)return this.Operator();p===HB&&this.error("Hex or identifier is expected",this.scanner.tokenStart+1);break}}});var WT=Ee((aN,VT)=>{VT.exports={getNode:qy()}});var $T=Ee((sN,ZT)=>{var Il=yt().TYPE,JB=Il.Delim,e5=Il.Ident,t5=Il.Dimension,i5=Il.Percentage,r5=Il.Number,n5=Il.Hash,GT=Il.Colon,a5=Il.LeftSquareBracket,s5=35,o5=42,l5=43,c5=47,UT=46,u5=62,d5=124,h5=126;function p5(s){switch(this.scanner.tokenType){case a5:return this.AttributeSelector();case n5:return this.IdSelector();case GT:return this.scanner.lookupType(1)===GT?this.PseudoElementSelector():this.PseudoClassSelector();case e5:return this.TypeSelector();case r5:case i5:return this.Percentage();case t5:this.scanner.source.charCodeAt(this.scanner.tokenStart)===UT&&this.error("Identifier is expected",this.scanner.tokenStart+1);break;case JB:var o=this.scanner.source.charCodeAt(this.scanner.tokenStart);switch(o){case l5:case u5:case h5:return s.space=null,s.ignoreWSAfter=!0,this.Combinator();case c5:return this.Combinator();case UT:return this.ClassSelector();case o5:case d5:return this.TypeSelector();case s5:return this.IdSelector()}break}}ZT.exports={getNode:p5}});var YT=Ee((oN,HT)=>{HT.exports=function(){return this.createSingleNodeList(this.Raw(this.scanner.tokenIndex,null,!1))}});var QT=Ee((lN,KT)=>{var XT=yt().TYPE,f5=Ml().mode,m5=XT.Comma,g5=XT.WhiteSpace;KT.exports=function(){var s=this.createList();if(this.scanner.skipSC(),s.push(this.Identifier()),this.scanner.skipSC(),this.scanner.tokenType===m5){s.push(this.Operator());let o=this.scanner.tokenIndex,p=this.parseCustomProperty?this.Value(null):this.Raw(this.scanner.tokenIndex,f5.exclamationMarkOrSemicolon,!1);if(p.type==="Value"&&p.children.isEmpty()){for(let d=o-this.scanner.tokenIndex;d<=0;d++)if(this.scanner.lookupType(d)===g5){p.children.appendData({type:"WhiteSpace",loc:null,value:" "});break}}s.push(p)}return s}});var eC=Ee((cN,JT)=>{JT.exports={getNode:qy(),expression:YT(),var:QT()}});var iC=Ee((uN,tC)=>{tC.exports={AtrulePrelude:WT(),Selector:$T(),Value:eC()}});var nC=Ee((dN,rC)=>{rC.exports={parse:{prelude:null,block:function(){return this.Block(!0)}}}});var sC=Ee((hN,aC)=>{var xh=yt().TYPE,y5=xh.String,_5=xh.Ident,v5=xh.Url,b5=xh.Function,x5=xh.LeftParenthesis;aC.exports={parse:{prelude:function(){var s=this.createList();switch(this.scanner.skipSC(),this.scanner.tokenType){case y5:s.push(this.String());break;case v5:case b5:s.push(this.Url());break;default:this.error("String or url() is expected")}return(this.lookupNonWSType(0)===_5||this.lookupNonWSType(0)===x5)&&(s.push(this.WhiteSpace()),s.push(this.MediaQueryList())),s},block:null}}});var lC=Ee((pN,oC)=>{oC.exports={parse:{prelude:function(){return this.createSingleNodeList(this.MediaQueryList())},block:function(){return this.Block(!1)}}}});var uC=Ee((fN,cC)=>{cC.exports={parse:{prelude:function(){return this.createSingleNodeList(this.SelectorList())},block:function(){return this.Block(!0)}}}});var fC=Ee((mN,pC)=>{var qu=yt().TYPE,w5=qu.WhiteSpace,S5=qu.Comment,dC=qu.Ident,T5=qu.Function,C5=qu.Colon,k5=qu.LeftParenthesis;function P5(){return this.createSingleNodeList(this.Raw(this.scanner.tokenIndex,null,!1))}function E5(){return this.scanner.skipSC(),this.scanner.tokenType===dC&&this.lookupNonWSType(1)===C5?this.createSingleNodeList(this.Declaration()):hC.call(this)}function hC(){var s=this.createList(),o=null,p;this.scanner.skipSC();e:for(;!this.scanner.eof;){switch(this.scanner.tokenType){case w5:o=this.WhiteSpace();continue;case S5:this.scanner.next();continue;case T5:p=this.Function(P5,this.scope.AtrulePrelude);break;case dC:p=this.Identifier();break;case k5:p=this.Parentheses(E5,this.scope.AtrulePrelude);break;default:break e}o!==null&&(s.push(o),o=null),s.push(p)}return s}pC.exports={parse:{prelude:function(){var s=hC.call(this);return this.getFirstListNode(s)===null&&this.error("Condition is expected"),s},block:function(){return this.Block(!1)}}}});var gC=Ee((gN,mC)=>{mC.exports={"font-face":nC(),import:sC(),media:lC(),page:uC(),supports:fC()}});var _C=Ee((yN,yC)=>{yC.exports={parse:function(){return this.createSingleNodeList(this.Identifier())}}});var bC=Ee((_N,vC)=>{vC.exports={parse:function(){return this.createSingleNodeList(this.SelectorList())}}});var wC=Ee((vN,xC)=>{xC.exports={parse:function(){return this.createSingleNodeList(this.Identifier())}}});var Vy=Ee((bN,SC)=>{SC.exports={parse:function(){return this.createSingleNodeList(this.SelectorList())}}});var CC=Ee((xN,TC)=>{TC.exports=Vy()});var PC=Ee((wN,kC)=>{kC.exports=Vy()});var Wy=Ee((SN,EC)=>{var A5=!0;EC.exports={parse:function(){return this.createSingleNodeList(this.Nth(A5))}}});var MC=Ee((TN,AC)=>{AC.exports=Wy()});var zC=Ee((CN,IC)=>{IC.exports=Wy()});var Gy=Ee((kN,LC)=>{var M5=!1;LC.exports={parse:function(){return this.createSingleNodeList(this.Nth(M5))}}});var OC=Ee((PN,DC)=>{DC.exports=Gy()});var BC=Ee((EN,RC)=>{RC.exports=Gy()});var jC=Ee((AN,FC)=>{FC.exports={parse:function(){return this.createSingleNodeList(this.Selector())}}});var qC=Ee((MN,NC)=>{NC.exports={dir:_C(),has:bC(),lang:wC(),matches:CC(),not:PC(),"nth-child":MC(),"nth-last-child":zC(),"nth-last-of-type":OC(),"nth-of-type":BC(),slotted:jC()}});var WC=Ee((IN,VC)=>{VC.exports={parseContext:{default:"StyleSheet",stylesheet:"StyleSheet",atrule:"Atrule",atrulePrelude:function(s){return this.AtrulePrelude(s.atrule?String(s.atrule):null)},mediaQueryList:"MediaQueryList",mediaQuery:"MediaQuery",rule:"Rule",selectorList:"SelectorList",selector:"Selector",block:function(){return this.Block(!0)},declarationList:"DeclarationList",declaration:"Declaration",value:"Value"},scope:iC(),atrule:gC(),pseudo:qC(),node:Of()}});var UC=Ee((zN,GC)=>{GC.exports={node:Of()}});var ZC=Ee((LN,I5)=>{I5.exports={name:"css-tree",version:"1.1.3",description:"A tool set for CSS: fast detailed parser (CSS \u2192 AST), walker (AST traversal), generator (AST \u2192 CSS) and lexer (validation and matching) based on specs and browser implementations",author:"Roman Dvornov <rdvornov@gmail.com> (https://github.com/lahmatiy)",license:"MIT",repository:"csstree/csstree",keywords:["css","ast","tokenizer","parser","walker","lexer","generator","utils","syntax","validation"],main:"lib/index.js",unpkg:"dist/csstree.min.js",jsdelivr:"dist/csstree.min.js",scripts:{build:"rollup --config",lint:"eslint data lib scripts test && node scripts/review-syntax-patch --lint && node scripts/update-docs --lint","lint-and-test":"npm run lint && npm test","update:docs":"node scripts/update-docs","review:syntax-patch":"node scripts/review-syntax-patch",test:"mocha --reporter progress",coverage:"nyc npm test",travis:"nyc npm run lint-and-test && npm run coveralls",coveralls:"nyc report --reporter=text-lcov | coveralls",prepublishOnly:"npm run build",hydrogen:"node --trace-hydrogen --trace-phase=Z --trace-deopt --code-comments --hydrogen-track-positions --redirect-code-traces --redirect-code-traces-to=code.asm --trace_hydrogen_file=code.cfg --print-opt-code bin/parse --stat -o /dev/null"},dependencies:{"mdn-data":"2.0.14","source-map":"^0.6.1"},devDependencies:{"@rollup/plugin-commonjs":"^11.0.2","@rollup/plugin-json":"^4.0.2","@rollup/plugin-node-resolve":"^7.1.1",coveralls:"^3.0.9",eslint:"^6.8.0","json-to-ast":"^2.1.0",mocha:"^6.2.3",nyc:"^14.1.1",rollup:"^1.32.1","rollup-plugin-terser":"^5.3.0"},engines:{node:">=8.0.0"},files:["data","dist","lib"]}});var $C=Ee((DN,Uy)=>{function z5(){for(var s={},o=0;o<arguments.length;o++){var p=arguments[o];for(var d in p)s[d]=p[d]}return s}Uy.exports=mS().create(z5(FT(),WC(),UC()));Uy.exports.version=ZC().version});var In=Ee((ON,HC)=>{HC.exports=$C()});var Tk=Ee(Th=>{var L5=/(\[[^\]]+\])/g,D5=/(#[^\s\+>~\.\[:]+)/g,O5=/(\.[^\s\+>~\.\[:]+)/g,R5=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/g,B5=/(:[^\s\+>~\.\[:]+)/g,F5=/([^\s\+>~\.\[:]+)/g,j5=/:not\(([^\)]*)\)/g,N5=/\{[^]*/gm,q5=/[\*\s\+>~]/g,V5=/[#\.]/g,Wu=function(s,o,p,d){var f=d.match(s);if(f)for(var a=0;a<f.length;a++)p[o]++,d=d.replace(f[a]," ");return d},W5=function(s){var o=s.indexOf(",");o!==-1&&(s=s.substring(0,o));var p={a:0,b:0,c:0};return s=s.replace(j5," $1 "),s=s.replace(N5," "),s=Wu(L5,"b",p,s),s=Wu(D5,"a",p,s),s=Wu(O5,"b",p,s),s=Wu(R5,"c",p,s),s=Wu(B5,"b",p,s),s=s.replace(q5," "),s=s.replace(V5," "),Wu(F5,"c",p,s),p.a*100+p.b*10+p.c*1},wk={};Th.calculateSpecificity=function(s){var o=wk[s];return o===void 0&&(o=W5(s),wk[s]=o),o};var Sk={},__=null;Th.isSelectorValid=function(s){var o=Sk[s];if(o===void 0){__==null&&(__=document.createElement("div"));try{__.querySelector(s),o=!0}catch(p){o=!1}Sk[s]=o}return o};Th.validateSelector=function(s){if(!Th.isSelectorValid(s)){var o=new SyntaxError(s+" is not a valid selector");throw o.code="EBADSELECTOR",o}}});var Mk=Ee((yq,Ak)=>{"use strict";Ak.exports=function(){var s=Array.from,o,p;return typeof s!="function"?!1:(o=["raz","dwa"],p=s(o),!!(p&&p!==o&&p[1]==="dwa"))}});var zk=Ee((_q,Ik)=>{"use strict";Ik.exports=function(){return typeof globalThis!="object"||!globalThis?!1:globalThis.Array===Array}});var Ok=Ee((vq,Dk)=>{var Lk=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};Dk.exports=(function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(s){return Lk()}try{return __global__||Lk()}finally{delete Object.prototype.__global__}})()});var Ch=Ee((bq,Rk)=>{"use strict";Rk.exports=zk()()?globalThis:Ok()});var Fk=Ee((xq,Bk)=>{"use strict";var G5=Ch(),b_={object:!0,symbol:!0};Bk.exports=function(){var s=G5.Symbol,o;if(typeof s!="function")return!1;o=s("test symbol");try{String(o)}catch(p){return!1}return!(!b_[typeof s.iterator]||!b_[typeof s.toPrimitive]||!b_[typeof s.toStringTag])}});var Nk=Ee((wq,jk)=>{"use strict";jk.exports=function(s){return s?typeof s=="symbol"?!0:!s.constructor||s.constructor.name!=="Symbol"?!1:s[s.constructor.toStringTag]==="Symbol":!1}});var x_=Ee((Sq,qk)=>{"use strict";var U5=Nk();qk.exports=function(s){if(!U5(s))throw new TypeError(s+" is not a symbol");return s}});var Zk=Ee((Tq,Uk)=>{"use strict";var Vk=fc(),Z5=Object.create,Wk=Object.defineProperty,$5=Object.prototype,Gk=Z5(null);Uk.exports=function(s){for(var o=0,p,d;Gk[s+(o||"")];)++o;return s+=o||"",Gk[s]=!0,p="@@"+s,Wk($5,p,Vk.gs(null,function(f){d||(d=!0,Wk(this,p,Vk(f)),d=!1)})),p}});var Hk=Ee((Cq,$k)=>{"use strict";var ws=fc(),xr=Ch().Symbol;$k.exports=function(s){return Object.defineProperties(s,{hasInstance:ws("",xr&&xr.hasInstance||s("hasInstance")),isConcatSpreadable:ws("",xr&&xr.isConcatSpreadable||s("isConcatSpreadable")),iterator:ws("",xr&&xr.iterator||s("iterator")),match:ws("",xr&&xr.match||s("match")),replace:ws("",xr&&xr.replace||s("replace")),search:ws("",xr&&xr.search||s("search")),species:ws("",xr&&xr.species||s("species")),split:ws("",xr&&xr.split||s("split")),toPrimitive:ws("",xr&&xr.toPrimitive||s("toPrimitive")),toStringTag:ws("",xr&&xr.toStringTag||s("toStringTag")),unscopables:ws("",xr&&xr.unscopables||s("unscopables"))})}});var Kk=Ee((kq,Xk)=>{"use strict";var Yk=fc(),H5=x_(),kh=Object.create(null);Xk.exports=function(s){return Object.defineProperties(s,{for:Yk(function(o){return kh[o]?kh[o]:kh[o]=s(String(o))}),keyFor:Yk(function(o){var p;H5(o);for(p in kh)if(kh[p]===o)return p})})}});var eP=Ee((Pq,Jk)=>{"use strict";var eo=fc(),w_=x_(),Nf=Ch().Symbol,Y5=Zk(),X5=Hk(),K5=Kk(),Q5=Object.create,S_=Object.defineProperties,qf=Object.defineProperty,zn,Gu,Qk;if(typeof Nf=="function")try{String(Nf()),Qk=!0}catch(s){}else Nf=null;Gu=function(o){if(this instanceof Gu)throw new TypeError("Symbol is not a constructor");return zn(o)};Jk.exports=zn=function s(o){var p;if(this instanceof s)throw new TypeError("Symbol is not a constructor");return Qk?Nf(o):(p=Q5(Gu.prototype),o=o===void 0?"":String(o),S_(p,{__description__:eo("",o),__name__:eo("",Y5(o))}))};X5(zn);K5(zn);S_(Gu.prototype,{constructor:eo(zn),toString:eo("",function(){return this.__name__})});S_(zn.prototype,{toString:eo(function(){return"Symbol ("+w_(this).__description__+")"}),valueOf:eo(function(){return w_(this)})});qf(zn.prototype,zn.toPrimitive,eo("",function(){var s=w_(this);return typeof s=="symbol"?s:s.toString()}));qf(zn.prototype,zn.toStringTag,eo("c","Symbol"));qf(Gu.prototype,zn.toStringTag,eo("c",zn.prototype[zn.toStringTag]));qf(Gu.prototype,zn.toPrimitive,eo("c",zn.prototype[zn.toPrimitive]))});var iP=Ee((Eq,tP)=>{"use strict";tP.exports=Fk()()?Ch().Symbol:eP()});var aP=Ee((Aq,nP)=>{"use strict";var rP=Object.prototype.toString,J5=rP.call((function(){return arguments})());nP.exports=function(s){return rP.call(s)===J5}});var oP=Ee((Mq,sP)=>{"use strict";var e3=Object.prototype.toString,t3=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);sP.exports=function(s){return typeof s=="function"&&t3(e3.call(s))}});var cP=Ee((Iq,lP)=>{"use strict";lP.exports=function(){var s=Math.sign;return typeof s!="function"?!1:s(10)===1&&s(-20)===-1}});var dP=Ee((zq,uP)=>{"use strict";uP.exports=function(s){return s=Number(s),isNaN(s)||s===0?s:s>0?1:-1}});var pP=Ee((Lq,hP)=>{"use strict";hP.exports=cP()()?Math.sign:dP()});var mP=Ee((Dq,fP)=>{"use strict";var i3=pP(),r3=Math.abs,n3=Math.floor;fP.exports=function(s){return isNaN(s)?0:(s=Number(s),s===0||!isFinite(s)?s:i3(s)*n3(r3(s)))}});var T_=Ee((Oq,gP)=>{"use strict";var a3=mP(),s3=Math.max;gP.exports=function(s){return s3(0,a3(s))}});var vP=Ee((Rq,_P)=>{"use strict";var yP=Object.prototype.toString,o3=yP.call("");_P.exports=function(s){return typeof s=="string"||s&&typeof s=="object"&&(s instanceof String||yP.call(s)===o3)||!1}});var SP=Ee((Bq,wP)=>{"use strict";var l3=iP().iterator,c3=aP(),u3=oP(),d3=T_(),bP=cg(),h3=Fp(),p3=xu(),f3=vP(),xP=Array.isArray,C_=Function.prototype.call,bc={configurable:!0,enumerable:!0,writable:!0,value:null},k_=Object.defineProperty;wP.exports=function(s){var o=arguments[1],p=arguments[2],d,f,a,T,M,R,V,Y,re,G;if(s=Object(h3(s)),p3(o)&&bP(o),!this||this===Array||!u3(this)){if(!o){if(c3(s))return M=s.length,M!==1?Array.apply(null,s):(T=new Array(1),T[0]=s[0],T);if(xP(s)){for(T=new Array(M=s.length),f=0;f<M;++f)T[f]=s[f];return T}}T=[]}else d=this;if(!xP(s)){if((re=s[l3])!==void 0){for(V=bP(re).call(s),d&&(T=new d),Y=V.next(),f=0;!Y.done;)G=o?C_.call(o,p,Y.value,f):Y.value,d?(bc.value=G,k_(T,f,bc)):T[f]=G,Y=V.next(),++f;M=f}else if(f3(s)){for(M=s.length,d&&(T=new d),f=0,a=0;f<M;++f)G=s[f],f+1<M&&(R=G.charCodeAt(0),R>=55296&&R<=56319&&(G+=s[++f])),G=o?C_.call(o,p,G,a):G,d?(bc.value=G,k_(T,a,bc)):T[a]=G,++a;M=a}}if(M===void 0)for(M=d3(s.length),d&&(T=new d(M)),f=0;f<M;++f)G=o?C_.call(o,p,s[f],f):s[f],d?(bc.value=G,k_(T,f,bc)):T[f]=G;return d&&(bc.value=null,T.length=M),T}});var CP=Ee((Fq,TP)=>{"use strict";TP.exports=Mk()()?Array.from:SP()});var PP=Ee((jq,kP)=>{"use strict";kP.exports=function(){var s=Number.isNaN;return typeof s!="function"?!1:!s({})&&s(NaN)&&!s(34)}});var AP=Ee((Nq,EP)=>{"use strict";EP.exports=function(s){return s!==s}});var IP=Ee((qq,MP)=>{"use strict";MP.exports=PP()()?Number.isNaN:AP()});var RP=Ee((Vq,OP)=>{"use strict";var zP=IP(),LP=T_(),m3=Fp(),g3=Array.prototype.indexOf,y3=Object.prototype.hasOwnProperty,_3=Math.abs,DP=Math.floor;OP.exports=function(s){var o,p,d,f;if(!zP(s))return g3.apply(this,arguments);for(p=LP(m3(this).length),d=arguments[1],isNaN(d)?d=0:d>=0?d=DP(d):d=LP(this.length)-DP(_3(d)),o=d;o<p;++o)if(y3.call(this,o)&&(f=this[o],zP(f)))return o;return-1}});var FP=Ee((Wq,BP)=>{"use strict";var v3=RP(),b3=Array.prototype.forEach,x3=Array.prototype.splice;BP.exports=function(s){b3.call(arguments,function(o){var p=v3.call(this,o);p!==-1&&x3.call(this,p,1)},this)}});var NP=Ee((Gq,jP)=>{"use strict";var w3=xu(),S3={function:!0,object:!0};jP.exports=function(s){return w3(s)&&S3[typeof s]||!1}});var VP=Ee((Uq,qP)=>{"use strict";var T3=NP();qP.exports=function(s){if(!T3(s))throw new TypeError(s+" is not an Object");return s}});var HP=Ee((Zq,$P)=>{"use strict";var C3=CP(),k3=FP(),WP=VP(),GP=fc(),UP=Cl().methods.emit,ZP=Object.defineProperty,P3=Object.prototype.hasOwnProperty,E3=Object.getOwnPropertyDescriptor;$P.exports=function(s,o){var p,d,f,a;return WP(s)&&WP(o),a=arguments[2],a===void 0&&(a="emit"),d={close:function(){k3.call(p,o)}},P3.call(s,"__eePipes__")?((p=s.__eePipes__).push(o),d):(ZP(s,"__eePipes__",GP("c",p=[o])),f=E3(s,a),f?(delete f.get,delete f.set):f=GP("c",void 0),f.value=function(){var T,M,R=C3(p);for(UP.apply(this,arguments),T=0;M=R[T];++T)UP.apply(M,arguments)},ZP(s,a,f),d)}});var Ll=Ee((Uf,QP)=>{(function(s,o){typeof Uf=="object"&&typeof QP!="undefined"?o(Uf):typeof define=="function"&&define.amd?define(["exports"],o):(s=typeof globalThis!="undefined"?globalThis:s||self,o(s.leaflet={}))})(Uf,(function(s){"use strict";var o="1.9.4";function p(c){var v,C,I,q;for(C=1,I=arguments.length;C<I;C++){q=arguments[C];for(v in q)c[v]=q[v]}return c}var d=Object.create||(function(){function c(){}return function(v){return c.prototype=v,new c}})();function f(c,v){var C=Array.prototype.slice;if(c.bind)return c.bind.apply(c,C.call(arguments,1));var I=C.call(arguments,2);return function(){return c.apply(v,I.length?I.concat(C.call(arguments)):arguments)}}var a=0;function T(c){return"_leaflet_id"in c||(c._leaflet_id=++a),c._leaflet_id}function M(c,v,C){var I,q,ie,ve;return ve=function(){I=!1,q&&(ie.apply(C,q),q=!1)},ie=function(){I?q=arguments:(c.apply(C,arguments),setTimeout(ve,v),I=!0)},ie}function R(c,v,C){var I=v[1],q=v[0],ie=I-q;return c===I&&C?c:((c-q)%ie+ie)%ie+q}function V(){return!1}function Y(c,v){if(v===!1)return c;var C=Math.pow(10,v===void 0?6:v);return Math.round(c*C)/C}function re(c){return c.trim?c.trim():c.replace(/^\s+|\s+$/g,"")}function G(c){return re(c).split(/\s+/)}function te(c,v){Object.prototype.hasOwnProperty.call(c,"options")||(c.options=c.options?d(c.options):{});for(var C in v)c.options[C]=v[C];return c.options}function H(c,v,C){var I=[];for(var q in c)I.push(encodeURIComponent(C?q.toUpperCase():q)+"="+encodeURIComponent(c[q]));return(!v||v.indexOf("?")===-1?"?":"&")+I.join("&")}var Se=/\{ *([\w_ -]+) *\}/g;function je(c,v){return c.replace(Se,function(C,I){var q=v[I];if(q===void 0)throw new Error("No value provided for variable "+C);return typeof q=="function"&&(q=q(v)),q})}var ye=Array.isArray||function(c){return Object.prototype.toString.call(c)==="[object Array]"};function Ce(c,v){for(var C=0;C<c.length;C++)if(c[C]===v)return C;return-1}var Ye="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function rt(c){return window["webkit"+c]||window["moz"+c]||window["ms"+c]}var Ct=0;function gt(c){var v=+new Date,C=Math.max(0,16-(v-Ct));return Ct=v+C,window.setTimeout(c,C)}var Wt=window.requestAnimationFrame||rt("RequestAnimationFrame")||gt,Gt=window.cancelAnimationFrame||rt("CancelAnimationFrame")||rt("CancelRequestAnimationFrame")||function(c){window.clearTimeout(c)};function wt(c,v,C){if(C&&Wt===gt)c.call(v);else return Wt.call(window,f(c,v))}function kt(c){c&&Gt.call(window,c)}var si={__proto__:null,extend:p,create:d,bind:f,get lastId(){return a},stamp:T,throttle:M,wrapNum:R,falseFn:V,formatNum:Y,trim:re,splitWords:G,setOptions:te,getParamString:H,template:je,isArray:ye,indexOf:Ce,emptyImageUrl:Ye,requestFn:Wt,cancelFn:Gt,requestAnimFrame:wt,cancelAnimFrame:kt};function ri(){}ri.extend=function(c){var v=function(){te(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},C=v.__super__=this.prototype,I=d(C);I.constructor=v,v.prototype=I;for(var q in this)Object.prototype.hasOwnProperty.call(this,q)&&q!=="prototype"&&q!=="__super__"&&(v[q]=this[q]);return c.statics&&p(v,c.statics),c.includes&&(di(c.includes),p.apply(null,[I].concat(c.includes))),p(I,c),delete I.statics,delete I.includes,I.options&&(I.options=C.options?d(C.options):{},p(I.options,c.options)),I._initHooks=[],I.callInitHooks=function(){if(!this._initHooksCalled){C.callInitHooks&&C.callInitHooks.call(this),this._initHooksCalled=!0;for(var ie=0,ve=I._initHooks.length;ie<ve;ie++)I._initHooks[ie].call(this)}},v},ri.include=function(c){var v=this.prototype.options;return p(this.prototype,c),c.options&&(this.prototype.options=v,this.mergeOptions(c.options)),this},ri.mergeOptions=function(c){return p(this.prototype.options,c),this},ri.addInitHook=function(c){var v=Array.prototype.slice.call(arguments,1),C=typeof c=="function"?c:function(){this[c].apply(this,v)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(C),this};function di(c){if(!(typeof L=="undefined"||!L||!L.Mixin)){c=ye(c)?c:[c];for(var v=0;v<c.length;v++)c[v]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ni={on:function(c,v,C){if(typeof c=="object")for(var I in c)this._on(I,c[I],v);else{c=G(c);for(var q=0,ie=c.length;q<ie;q++)this._on(c[q],v,C)}return this},off:function(c,v,C){if(!arguments.length)delete this._events;else if(typeof c=="object")for(var I in c)this._off(I,c[I],v);else{c=G(c);for(var q=arguments.length===1,ie=0,ve=c.length;ie<ve;ie++)q?this._off(c[ie]):this._off(c[ie],v,C)}return this},_on:function(c,v,C,I){if(typeof v!="function"){console.warn("wrong listener type: "+typeof v);return}if(this._listens(c,v,C)===!1){C===this&&(C=void 0);var q={fn:v,ctx:C};I&&(q.once=!0),this._events=this._events||{},this._events[c]=this._events[c]||[],this._events[c].push(q)}},_off:function(c,v,C){var I,q,ie;if(this._events&&(I=this._events[c],!!I)){if(arguments.length===1){if(this._firingCount)for(q=0,ie=I.length;q<ie;q++)I[q].fn=V;delete this._events[c];return}if(typeof v!="function"){console.warn("wrong listener type: "+typeof v);return}var ve=this._listens(c,v,C);if(ve!==!1){var Me=I[ve];this._firingCount&&(Me.fn=V,this._events[c]=I=I.slice()),I.splice(ve,1)}}},fire:function(c,v,C){if(!this.listens(c,C))return this;var I=p({},v,{type:c,target:this,sourceTarget:v&&v.sourceTarget||this});if(this._events){var q=this._events[c];if(q){this._firingCount=this._firingCount+1||1;for(var ie=0,ve=q.length;ie<ve;ie++){var Me=q[ie],Ve=Me.fn;Me.once&&this.off(c,Ve,Me.ctx),Ve.call(Me.ctx||this,I)}this._firingCount--}}return C&&this._propagateEvent(I),this},listens:function(c,v,C,I){typeof c!="string"&&console.warn('"string" type argument expected');var q=v;typeof v!="function"&&(I=!!v,q=void 0,C=void 0);var ie=this._events&&this._events[c];if(ie&&ie.length&&this._listens(c,q,C)!==!1)return!0;if(I){for(var ve in this._eventParents)if(this._eventParents[ve].listens(c,v,C,I))return!0}return!1},_listens:function(c,v,C){if(!this._events)return!1;var I=this._events[c]||[];if(!v)return!!I.length;C===this&&(C=void 0);for(var q=0,ie=I.length;q<ie;q++)if(I[q].fn===v&&I[q].ctx===C)return q;return!1},once:function(c,v,C){if(typeof c=="object")for(var I in c)this._on(I,c[I],v,!0);else{c=G(c);for(var q=0,ie=c.length;q<ie;q++)this._on(c[q],v,C,!0)}return this},addEventParent:function(c){return this._eventParents=this._eventParents||{},this._eventParents[T(c)]=c,this},removeEventParent:function(c){return this._eventParents&&delete this._eventParents[T(c)],this},_propagateEvent:function(c){for(var v in this._eventParents)this._eventParents[v].fire(c.type,p({layer:c.target,propagatedFrom:c.target},c),!0)}};ni.addEventListener=ni.on,ni.removeEventListener=ni.clearAllEventListeners=ni.off,ni.addOneTimeEventListener=ni.once,ni.fireEvent=ni.fire,ni.hasEventListeners=ni.listens;var Ut=ri.extend(ni);function ut(c,v,C){this.x=C?Math.round(c):c,this.y=C?Math.round(v):v}var Ft=Math.trunc||function(c){return c>0?Math.floor(c):Math.ceil(c)};ut.prototype={clone:function(){return new ut(this.x,this.y)},add:function(c){return this.clone()._add(_t(c))},_add:function(c){return this.x+=c.x,this.y+=c.y,this},subtract:function(c){return this.clone()._subtract(_t(c))},_subtract:function(c){return this.x-=c.x,this.y-=c.y,this},divideBy:function(c){return this.clone()._divideBy(c)},_divideBy:function(c){return this.x/=c,this.y/=c,this},multiplyBy:function(c){return this.clone()._multiplyBy(c)},_multiplyBy:function(c){return this.x*=c,this.y*=c,this},scaleBy:function(c){return new ut(this.x*c.x,this.y*c.y)},unscaleBy:function(c){return new ut(this.x/c.x,this.y/c.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Ft(this.x),this.y=Ft(this.y),this},distanceTo:function(c){c=_t(c);var v=c.x-this.x,C=c.y-this.y;return Math.sqrt(v*v+C*C)},equals:function(c){return c=_t(c),c.x===this.x&&c.y===this.y},contains:function(c){return c=_t(c),Math.abs(c.x)<=Math.abs(this.x)&&Math.abs(c.y)<=Math.abs(this.y)},toString:function(){return"Point("+Y(this.x)+", "+Y(this.y)+")"}};function _t(c,v,C){return c instanceof ut?c:ye(c)?new ut(c[0],c[1]):c==null?c:typeof c=="object"&&"x"in c&&"y"in c?new ut(c.x,c.y):new ut(c,v,C)}function Kt(c,v){if(c)for(var C=v?[c,v]:c,I=0,q=C.length;I<q;I++)this.extend(C[I])}Kt.prototype={extend:function(c){var v,C;if(!c)return this;if(c instanceof ut||typeof c[0]=="number"||"x"in c)v=C=_t(c);else if(c=Mi(c),v=c.min,C=c.max,!v||!C)return this;return!this.min&&!this.max?(this.min=v.clone(),this.max=C.clone()):(this.min.x=Math.min(v.x,this.min.x),this.max.x=Math.max(C.x,this.max.x),this.min.y=Math.min(v.y,this.min.y),this.max.y=Math.max(C.y,this.max.y)),this},getCenter:function(c){return _t((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,c)},getBottomLeft:function(){return _t(this.min.x,this.max.y)},getTopRight:function(){return _t(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(c){var v,C;return typeof c[0]=="number"||c instanceof ut?c=_t(c):c=Mi(c),c instanceof Kt?(v=c.min,C=c.max):v=C=c,v.x>=this.min.x&&C.x<=this.max.x&&v.y>=this.min.y&&C.y<=this.max.y},intersects:function(c){c=Mi(c);var v=this.min,C=this.max,I=c.min,q=c.max,ie=q.x>=v.x&&I.x<=C.x,ve=q.y>=v.y&&I.y<=C.y;return ie&&ve},overlaps:function(c){c=Mi(c);var v=this.min,C=this.max,I=c.min,q=c.max,ie=q.x>v.x&&I.x<C.x,ve=q.y>v.y&&I.y<C.y;return ie&&ve},isValid:function(){return!!(this.min&&this.max)},pad:function(c){var v=this.min,C=this.max,I=Math.abs(v.x-C.x)*c,q=Math.abs(v.y-C.y)*c;return Mi(_t(v.x-I,v.y-q),_t(C.x+I,C.y+q))},equals:function(c){return c?(c=Mi(c),this.min.equals(c.getTopLeft())&&this.max.equals(c.getBottomRight())):!1}};function Mi(c,v){return!c||c instanceof Kt?c:new Kt(c,v)}function Ii(c,v){if(c)for(var C=v?[c,v]:c,I=0,q=C.length;I<q;I++)this.extend(C[I])}Ii.prototype={extend:function(c){var v=this._southWest,C=this._northEast,I,q;if(c instanceof At)I=c,q=c;else if(c instanceof Ii){if(I=c._southWest,q=c._northEast,!I||!q)return this}else return c?this.extend(St(c)||hi(c)):this;return!v&&!C?(this._southWest=new At(I.lat,I.lng),this._northEast=new At(q.lat,q.lng)):(v.lat=Math.min(I.lat,v.lat),v.lng=Math.min(I.lng,v.lng),C.lat=Math.max(q.lat,C.lat),C.lng=Math.max(q.lng,C.lng)),this},pad:function(c){var v=this._southWest,C=this._northEast,I=Math.abs(v.lat-C.lat)*c,q=Math.abs(v.lng-C.lng)*c;return new Ii(new At(v.lat-I,v.lng-q),new At(C.lat+I,C.lng+q))},getCenter:function(){return new At((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new At(this.getNorth(),this.getWest())},getSouthEast:function(){return new At(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(c){typeof c[0]=="number"||c instanceof At||"lat"in c?c=St(c):c=hi(c);var v=this._southWest,C=this._northEast,I,q;return c instanceof Ii?(I=c.getSouthWest(),q=c.getNorthEast()):I=q=c,I.lat>=v.lat&&q.lat<=C.lat&&I.lng>=v.lng&&q.lng<=C.lng},intersects:function(c){c=hi(c);var v=this._southWest,C=this._northEast,I=c.getSouthWest(),q=c.getNorthEast(),ie=q.lat>=v.lat&&I.lat<=C.lat,ve=q.lng>=v.lng&&I.lng<=C.lng;return ie&&ve},overlaps:function(c){c=hi(c);var v=this._southWest,C=this._northEast,I=c.getSouthWest(),q=c.getNorthEast(),ie=q.lat>v.lat&&I.lat<C.lat,ve=q.lng>v.lng&&I.lng<C.lng;return ie&&ve},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(c,v){return c?(c=hi(c),this._southWest.equals(c.getSouthWest(),v)&&this._northEast.equals(c.getNorthEast(),v)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function hi(c,v){return c instanceof Ii?c:new Ii(c,v)}function At(c,v,C){if(isNaN(c)||isNaN(v))throw new Error("Invalid LatLng object: ("+c+", "+v+")");this.lat=+c,this.lng=+v,C!==void 0&&(this.alt=+C)}At.prototype={equals:function(c,v){if(!c)return!1;c=St(c);var C=Math.max(Math.abs(this.lat-c.lat),Math.abs(this.lng-c.lng));return C<=(v===void 0?1e-9:v)},toString:function(c){return"LatLng("+Y(this.lat,c)+", "+Y(this.lng,c)+")"},distanceTo:function(c){return vi.distance(this,St(c))},wrap:function(){return vi.wrapLatLng(this)},toBounds:function(c){var v=180*c/40075017,C=v/Math.cos(Math.PI/180*this.lat);return hi([this.lat-v,this.lng-C],[this.lat+v,this.lng+C])},clone:function(){return new At(this.lat,this.lng,this.alt)}};function St(c,v,C){return c instanceof At?c:ye(c)&&typeof c[0]!="object"?c.length===3?new At(c[0],c[1],c[2]):c.length===2?new At(c[0],c[1]):null:c==null?c:typeof c=="object"&&"lat"in c?new At(c.lat,"lng"in c?c.lng:c.lon,c.alt):v===void 0?null:new At(c,v,C)}var sr={latLngToPoint:function(c,v){var C=this.projection.project(c),I=this.scale(v);return this.transformation._transform(C,I)},pointToLatLng:function(c,v){var C=this.scale(v),I=this.transformation.untransform(c,C);return this.projection.unproject(I)},project:function(c){return this.projection.project(c)},unproject:function(c){return this.projection.unproject(c)},scale:function(c){return 256*Math.pow(2,c)},zoom:function(c){return Math.log(c/256)/Math.LN2},getProjectedBounds:function(c){if(this.infinite)return null;var v=this.projection.bounds,C=this.scale(c),I=this.transformation.transform(v.min,C),q=this.transformation.transform(v.max,C);return new Kt(I,q)},infinite:!1,wrapLatLng:function(c){var v=this.wrapLng?R(c.lng,this.wrapLng,!0):c.lng,C=this.wrapLat?R(c.lat,this.wrapLat,!0):c.lat,I=c.alt;return new At(C,v,I)},wrapLatLngBounds:function(c){var v=c.getCenter(),C=this.wrapLatLng(v),I=v.lat-C.lat,q=v.lng-C.lng;if(I===0&&q===0)return c;var ie=c.getSouthWest(),ve=c.getNorthEast(),Me=new At(ie.lat-I,ie.lng-q),Ve=new At(ve.lat-I,ve.lng-q);return new Ii(Me,Ve)}},vi=p({},sr,{wrapLng:[-180,180],R:6371e3,distance:function(c,v){var C=Math.PI/180,I=c.lat*C,q=v.lat*C,ie=Math.sin((v.lat-c.lat)*C/2),ve=Math.sin((v.lng-c.lng)*C/2),Me=ie*ie+Math.cos(I)*Math.cos(q)*ve*ve,Ve=2*Math.atan2(Math.sqrt(Me),Math.sqrt(1-Me));return this.R*Ve}}),cn=6378137,Mr={R:cn,MAX_LATITUDE:85.0511287798,project:function(c){var v=Math.PI/180,C=this.MAX_LATITUDE,I=Math.max(Math.min(C,c.lat),-C),q=Math.sin(I*v);return new ut(this.R*c.lng*v,this.R*Math.log((1+q)/(1-q))/2)},unproject:function(c){var v=180/Math.PI;return new At((2*Math.atan(Math.exp(c.y/this.R))-Math.PI/2)*v,c.x*v/this.R)},bounds:(function(){var c=cn*Math.PI;return new Kt([-c,-c],[c,c])})()};function un(c,v,C,I){if(ye(c)){this._a=c[0],this._b=c[1],this._c=c[2],this._d=c[3];return}this._a=c,this._b=v,this._c=C,this._d=I}un.prototype={transform:function(c,v){return this._transform(c.clone(),v)},_transform:function(c,v){return v=v||1,c.x=v*(this._a*c.x+this._b),c.y=v*(this._c*c.y+this._d),c},untransform:function(c,v){return v=v||1,new ut((c.x/v-this._b)/this._a,(c.y/v-this._d)/this._c)}};function or(c,v,C,I){return new un(c,v,C,I)}var wn=p({},vi,{code:"EPSG:3857",projection:Mr,transformation:(function(){var c=.5/(Math.PI*Mr.R);return or(c,.5,-c,.5)})()}),pr=p({},wn,{code:"EPSG:900913"});function gr(c){return document.createElementNS("http://www.w3.org/2000/svg",c)}function Ln(c,v){var C="",I,q,ie,ve,Me,Ve;for(I=0,ie=c.length;I<ie;I++){for(Me=c[I],q=0,ve=Me.length;q<ve;q++)Ve=Me[q],C+=(q?"L":"M")+Ve.x+" "+Ve.y;C+=v?Be.svg?"z":"x":""}return C||"M0 0"}var Oi=document.documentElement.style,Dn="ActiveXObject"in window,Ya=Dn&&!document.addEventListener,Xa="msLaunchUri"in navigator&&!("documentMode"in document),Yn=Kr("webkit"),Sn=Kr("android"),Ka=Kr("android 2")||Kr("android 3"),Ss=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Xr=Sn&&Kr("Google")&&Ss<537&&!("AudioNode"in window),Pe=!!window.opera,K=!Xa&&Kr("chrome"),X=Kr("gecko")&&!Yn&&!Pe&&!Dn,ne=!K&&Kr("safari"),_e=Kr("phantom"),be="OTransition"in Oi,Ie=navigator.platform.indexOf("Win")===0,ke=Dn&&"transition"in Oi,we="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ka,Oe="MozPerspective"in Oi,Xe=!window.L_DISABLE_3D&&(ke||we||Oe)&&!be&&!_e,Ge=typeof orientation!="undefined"||Kr("mobile"),lt=Ge&&Yn,pt=Ge&&we,Et=!window.PointerEvent&&window.MSPointerEvent,fi=!!(window.PointerEvent||Et),oi="ontouchstart"in window||!!window.TouchEvent,Le=!window.L_NO_TOUCH&&(oi||fi),Si=Ge&&Pe,wr=Ge&&X,Mt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,mi=(function(){var c=!1;try{var v=Object.defineProperty({},"passive",{get:function(){c=!0}});window.addEventListener("testPassiveEventSupport",V,v),window.removeEventListener("testPassiveEventSupport",V,v)}catch(C){}return c})(),Sr=(function(){return!!document.createElement("canvas").getContext})(),Ti=!!(document.createElementNS&&gr("svg").createSVGRect),$i=!!Ti&&(function(){var c=document.createElement("div");return c.innerHTML="<svg/>",(c.firstChild&&c.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Ci=!Ti&&(function(){try{var c=document.createElement("div");c.innerHTML='<v:shape adj="1"/>';var v=c.firstChild;return v.style.behavior="url(#default#VML)",v&&typeof v.adj=="object"}catch(C){return!1}})(),lr=navigator.platform.indexOf("Mac")===0,io=navigator.platform.indexOf("Linux")===0;function Kr(c){return navigator.userAgent.toLowerCase().indexOf(c)>=0}var Be={ie:Dn,ielt9:Ya,edge:Xa,webkit:Yn,android:Sn,android23:Ka,androidStock:Xr,opera:Pe,chrome:K,gecko:X,safari:ne,phantom:_e,opera12:be,win:Ie,ie3d:ke,webkit3d:we,gecko3d:Oe,any3d:Xe,mobile:Ge,mobileWebkit:lt,mobileWebkit3d:pt,msPointer:Et,pointer:fi,touch:Le,touchNative:oi,mobileOpera:Si,mobileGecko:wr,retina:Mt,passiveEvents:mi,canvas:Sr,svg:Ti,vml:Ci,inlineSvg:$i,mac:lr,linux:io},Ir=Be.msPointer?"MSPointerDown":"pointerdown",zr=Be.msPointer?"MSPointerMove":"pointermove",ro=Be.msPointer?"MSPointerUp":"pointerup",dn=Be.msPointer?"MSPointerCancel":"pointercancel",at={touchstart:Ir,touchmove:zr,touchend:ro,touchcancel:dn},jt={touchstart:ao,touchmove:ua,touchend:ua,touchcancel:ua},zt={},Qr=!1;function $o(c,v,C){return v==="touchstart"&&Ho(),jt[v]?(C=jt[v].bind(this,C),c.addEventListener(at[v],C,!1),C):(console.warn("wrong event specified:",v),V)}function ca(c,v,C){if(!at[v]){console.warn("wrong event specified:",v);return}c.removeEventListener(at[v],C,!1)}function Rt(c){zt[c.pointerId]=c}function no(c){zt[c.pointerId]&&(zt[c.pointerId]=c)}function Ts(c){delete zt[c.pointerId]}function Ho(){Qr||(document.addEventListener(Ir,Rt,!0),document.addEventListener(zr,no,!0),document.addEventListener(ro,Ts,!0),document.addEventListener(dn,Ts,!0),Qr=!0)}function ua(c,v){if(v.pointerType!==(v.MSPOINTER_TYPE_MOUSE||"mouse")){v.touches=[];for(var C in zt)v.touches.push(zt[C]);v.changedTouches=[v],c(v)}}function ao(c,v){v.MSPOINTER_TYPE_TOUCH&&v.pointerType===v.MSPOINTER_TYPE_TOUCH&&Jt(v),ua(c,v)}function Cs(c){var v={},C,I;for(I in c)C=c[I],v[I]=C&&C.bind?C.bind(c):C;return c=v,v.type="dblclick",v.detail=2,v.isTrusted=!1,v._simulated=!0,v}var so=200;function Vr(c,v){c.addEventListener("dblclick",v);var C=0,I;function q(ie){if(ie.detail!==1){I=ie.detail;return}if(!(ie.pointerType==="mouse"||ie.sourceCapabilities&&!ie.sourceCapabilities.firesTouchEvents)){var ve=Rn(ie);if(!(ve.some(function(Ve){return Ve instanceof HTMLLabelElement&&Ve.attributes.for})&&!ve.some(function(Ve){return Ve instanceof HTMLInputElement||Ve instanceof HTMLSelectElement}))){var Me=Date.now();Me-C<=so?(I++,I===2&&v(Cs(ie))):I=1,C=Me}}}return c.addEventListener("click",q),{dblclick:v,simDblclick:q}}function gi(c,v){c.removeEventListener("dblclick",v.dblclick),c.removeEventListener("click",v.simDblclick)}var ks=Es(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Xn=Es(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ps=Xn==="webkitTransition"||Xn==="OTransition"?Xn+"End":"transitionend";function Aa(c){return typeof c=="string"?document.getElementById(c):c}function Wr(c,v){var C=c.style[v]||c.currentStyle&&c.currentStyle[v];if((!C||C==="auto")&&document.defaultView){var I=document.defaultView.getComputedStyle(c,null);C=I?I[v]:null}return C==="auto"?null:C}function li(c,v,C){var I=document.createElement(c);return I.className=v||"",C&&C.appendChild(I),I}function bi(c){var v=c.parentNode;v&&v.removeChild(c)}function Qa(c){for(;c.firstChild;)c.removeChild(c.firstChild)}function ki(c){var v=c.parentNode;v&&v.lastChild!==c&&v.appendChild(c)}function Ja(c){var v=c.parentNode;v&&v.firstChild!==c&&v.insertBefore(c,v.firstChild)}function Yo(c,v){if(c.classList!==void 0)return c.classList.contains(v);var C=oo(c);return C.length>0&&new RegExp("(^|\\s)"+v+"(\\s|$)").test(C)}function Nt(c,v){if(c.classList!==void 0)for(var C=G(v),I=0,q=C.length;I<q;I++)c.classList.add(C[I]);else if(!Yo(c,v)){var ie=oo(c);Xo(c,(ie?ie+" ":"")+v)}}function Hi(c,v){c.classList!==void 0?c.classList.remove(v):Xo(c,re((" "+oo(c)+" ").replace(" "+v+" "," ")))}function Xo(c,v){c.className.baseVal===void 0?c.className=v:c.className.baseVal=v}function oo(c){return c.correspondingElement&&(c=c.correspondingElement),c.className.baseVal===void 0?c.className:c.className.baseVal}function Gr(c,v){"opacity"in c.style?c.style.opacity=v:"filter"in c.style&&Fl(c,v)}function Fl(c,v){var C=!1,I="DXImageTransform.Microsoft.Alpha";try{C=c.filters.item(I)}catch(q){if(v===1)return}v=Math.round(v*100),C?(C.Enabled=v!==100,C.Opacity=v):c.style.filter+=" progid:"+I+"(opacity="+v+")"}function Es(c){for(var v=document.documentElement.style,C=0;C<c.length;C++)if(c[C]in v)return c[C];return!1}function da(c,v,C){var I=v||new ut(0,0);c.style[ks]=(Be.ie3d?"translate("+I.x+"px,"+I.y+"px)":"translate3d("+I.x+"px,"+I.y+"px,0)")+(C?" scale("+C+")":"")}function Yi(c,v){c._leaflet_pos=v,Be.any3d?da(c,v):(c.style.left=v.x+"px",c.style.top=v.y+"px")}function es(c){return c._leaflet_pos||new ut(0,0)}var ha,Ma,Ko;if("onselectstart"in document)ha=function(){vt(window,"selectstart",Jt)},Ma=function(){ct(window,"selectstart",Jt)};else{var Kn=Es(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ha=function(){if(Kn){var c=document.documentElement.style;Ko=c[Kn],c[Kn]="none"}},Ma=function(){Kn&&(document.documentElement.style[Kn]=Ko,Ko=void 0)}}function lo(){vt(window,"dragstart",Jt)}function ts(){ct(window,"dragstart",Jt)}var On,Ia;function Bt(c){for(;c.tabIndex===-1;)c=c.parentNode;c.style&&(As(),On=c,Ia=c.style.outlineStyle,c.style.outlineStyle="none",vt(window,"keydown",As))}function As(){On&&(On.style.outlineStyle=Ia,On=void 0,Ia=void 0,ct(window,"keydown",As))}function wc(c){do c=c.parentNode;while((!c.offsetWidth||!c.offsetHeight)&&c!==document.body);return c}function co(c){var v=c.getBoundingClientRect();return{x:v.width/c.offsetWidth||1,y:v.height/c.offsetHeight||1,boundingClientRect:v}}var Jr={__proto__:null,TRANSFORM:ks,TRANSITION:Xn,TRANSITION_END:Ps,get:Aa,getStyle:Wr,create:li,remove:bi,empty:Qa,toFront:ki,toBack:Ja,hasClass:Yo,addClass:Nt,removeClass:Hi,setClass:Xo,getClass:oo,setOpacity:Gr,testProp:Es,setTransform:da,setPosition:Yi,getPosition:es,get disableTextSelection(){return ha},get enableTextSelection(){return Ma},disableImageDrag:lo,enableImageDrag:ts,preventOutline:Bt,restoreOutline:As,getSizedParentNode:wc,getScale:co};function vt(c,v,C,I){if(v&&typeof v=="object")for(var q in v)Tr(c,q,v[q],C);else{v=G(v);for(var ie=0,ve=v.length;ie<ve;ie++)Tr(c,v[ie],C,I)}return this}var ci="_leaflet_events";function ct(c,v,C,I){if(arguments.length===1)xi(c),delete c[ci];else if(v&&typeof v=="object")for(var q in v)Ur(c,q,v[q],C);else if(v=G(v),arguments.length===2)xi(c,function(Me){return Ce(v,Me)!==-1});else for(var ie=0,ve=v.length;ie<ve;ie++)Ur(c,v[ie],C,I);return this}function xi(c,v){for(var C in c[ci]){var I=C.split(/\d/)[0];(!v||v(I))&&Ur(c,I,null,null,C)}}var Qn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Tr(c,v,C,I){var q=v+T(C)+(I?"_"+T(I):"");if(c[ci]&&c[ci][q])return this;var ie=function(Me){return C.call(I||c,Me||window.event)},ve=ie;!Be.touchNative&&Be.pointer&&v.indexOf("touch")===0?ie=$o(c,v,ie):Be.touch&&v==="dblclick"?ie=Vr(c,ie):"addEventListener"in c?v==="touchstart"||v==="touchmove"||v==="wheel"||v==="mousewheel"?c.addEventListener(Qn[v]||v,ie,Be.passiveEvents?{passive:!1}:!1):v==="mouseenter"||v==="mouseleave"?(ie=function(Me){Me=Me||window.event,Bn(c,Me)&&ve(Me)},c.addEventListener(Qn[v],ie,!1)):c.addEventListener(v,ve,!1):c.attachEvent("on"+v,ie),c[ci]=c[ci]||{},c[ci][q]=ie}function Ur(c,v,C,I,q){q=q||v+T(C)+(I?"_"+T(I):"");var ie=c[ci]&&c[ci][q];if(!ie)return this;!Be.touchNative&&Be.pointer&&v.indexOf("touch")===0?ca(c,v,ie):Be.touch&&v==="dblclick"?gi(c,ie):"removeEventListener"in c?c.removeEventListener(Qn[v]||v,ie,!1):c.detachEvent("on"+v,ie),c[ci][q]=null}function tr(c){return c.stopPropagation?c.stopPropagation():c.originalEvent?c.originalEvent._stopped=!0:c.cancelBubble=!0,this}function za(c){return Tr(c,"wheel",tr),this}function Tn(c){return vt(c,"mousedown touchstart dblclick contextmenu",tr),c._leaflet_disable_click=!0,this}function Jt(c){return c.preventDefault?c.preventDefault():c.returnValue=!1,this}function hn(c){return Jt(c),tr(c),this}function Rn(c){if(c.composedPath)return c.composedPath();for(var v=[],C=c.target;C;)v.push(C),C=C.parentNode;return v}function uo(c,v){if(!v)return new ut(c.clientX,c.clientY);var C=co(v),I=C.boundingClientRect;return new ut((c.clientX-I.left)/C.x-v.clientLeft,(c.clientY-I.top)/C.y-v.clientTop)}var en=Be.linux&&Be.chrome?window.devicePixelRatio:Be.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function La(c){return Be.edge?c.wheelDeltaY/2:c.deltaY&&c.deltaMode===0?-c.deltaY/en:c.deltaY&&c.deltaMode===1?-c.deltaY*20:c.deltaY&&c.deltaMode===2?-c.deltaY*60:c.deltaX||c.deltaZ?0:c.wheelDelta?(c.wheelDeltaY||c.wheelDelta)/2:c.detail&&Math.abs(c.detail)<32765?-c.detail*20:c.detail?c.detail/-32765*60:0}function Bn(c,v){var C=v.relatedTarget;if(!C)return!0;try{for(;C&&C!==c;)C=C.parentNode}catch(I){return!1}return C!==c}var Sc={__proto__:null,on:vt,off:ct,stopPropagation:tr,disableScrollPropagation:za,disableClickPropagation:Tn,preventDefault:Jt,stop:hn,getPropagationPath:Rn,getMousePosition:uo,getWheelDelta:La,isExternalTarget:Bn,addListener:vt,removeListener:ct},Qo=Ut.extend({run:function(c,v,C,I){this.stop(),this._el=c,this._inProgress=!0,this._duration=C||.25,this._easeOutPower=1/Math.max(I||.5,.2),this._startPos=es(c),this._offset=v.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=wt(this._animate,this),this._step()},_step:function(c){var v=+new Date-this._startTime,C=this._duration*1e3;v<C?this._runFrame(this._easeOut(v/C),c):(this._runFrame(1),this._complete())},_runFrame:function(c,v){var C=this._startPos.add(this._offset.multiplyBy(c));v&&C._round(),Yi(this._el,C),this.fire("step")},_complete:function(){kt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(c){return 1-Math.pow(1-c,this._easeOutPower)}}),Yt=Ut.extend({options:{crs:wn,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(c,v){v=te(this,v),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(c),this._initLayout(),this._onResize=f(this._onResize,this),this._initEvents(),v.maxBounds&&this.setMaxBounds(v.maxBounds),v.zoom!==void 0&&(this._zoom=this._limitZoom(v.zoom)),v.center&&v.zoom!==void 0&&this.setView(St(v.center),v.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Xn&&Be.any3d&&!Be.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),vt(this._proxy,Ps,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(c,v,C){if(v=v===void 0?this._zoom:this._limitZoom(v),c=this._limitCenter(St(c),v,this.options.maxBounds),C=C||{},this._stop(),this._loaded&&!C.reset&&C!==!0){C.animate!==void 0&&(C.zoom=p({animate:C.animate},C.zoom),C.pan=p({animate:C.animate,duration:C.duration},C.pan));var I=this._zoom!==v?this._tryAnimatedZoom&&this._tryAnimatedZoom(c,v,C.zoom):this._tryAnimatedPan(c,C.pan);if(I)return clearTimeout(this._sizeTimer),this}return this._resetView(c,v,C.pan&&C.pan.noMoveStart),this},setZoom:function(c,v){return this._loaded?this.setView(this.getCenter(),c,{zoom:v}):(this._zoom=c,this)},zoomIn:function(c,v){return c=c||(Be.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+c,v)},zoomOut:function(c,v){return c=c||(Be.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-c,v)},setZoomAround:function(c,v,C){var I=this.getZoomScale(v),q=this.getSize().divideBy(2),ie=c instanceof ut?c:this.latLngToContainerPoint(c),ve=ie.subtract(q).multiplyBy(1-1/I),Me=this.containerPointToLatLng(q.add(ve));return this.setView(Me,v,{zoom:C})},_getBoundsCenterZoom:function(c,v){v=v||{},c=c.getBounds?c.getBounds():hi(c);var C=_t(v.paddingTopLeft||v.padding||[0,0]),I=_t(v.paddingBottomRight||v.padding||[0,0]),q=this.getBoundsZoom(c,!1,C.add(I));if(q=typeof v.maxZoom=="number"?Math.min(v.maxZoom,q):q,q===1/0)return{center:c.getCenter(),zoom:q};var ie=I.subtract(C).divideBy(2),ve=this.project(c.getSouthWest(),q),Me=this.project(c.getNorthEast(),q),Ve=this.unproject(ve.add(Me).divideBy(2).add(ie),q);return{center:Ve,zoom:q}},fitBounds:function(c,v){if(c=hi(c),!c.isValid())throw new Error("Bounds are not valid.");var C=this._getBoundsCenterZoom(c,v);return this.setView(C.center,C.zoom,v)},fitWorld:function(c){return this.fitBounds([[-90,-180],[90,180]],c)},panTo:function(c,v){return this.setView(c,this._zoom,{pan:v})},panBy:function(c,v){if(c=_t(c).round(),v=v||{},!c.x&&!c.y)return this.fire("moveend");if(v.animate!==!0&&!this.getSize().contains(c))return this._resetView(this.unproject(this.project(this.getCenter()).add(c)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Qo,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),v.noMoveStart||this.fire("movestart"),v.animate!==!1){Nt(this._mapPane,"leaflet-pan-anim");var C=this._getMapPanePos().subtract(c).round();this._panAnim.run(this._mapPane,C,v.duration||.25,v.easeLinearity)}else this._rawPanBy(c),this.fire("move").fire("moveend");return this},flyTo:function(c,v,C){if(C=C||{},C.animate===!1||!Be.any3d)return this.setView(c,v,C);this._stop();var I=this.project(this.getCenter()),q=this.project(c),ie=this.getSize(),ve=this._zoom;c=St(c),v=v===void 0?ve:v;var Me=Math.max(ie.x,ie.y),Ve=Me*this.getZoomScale(ve,v),Qe=q.distanceTo(I)||1,dt=1.42,It=dt*dt;function Qt(Wi){var Fa=Wi?-1:1,ul=Wi?Ve:Me,ja=Ve*Ve-Me*Me+Fa*It*It*Qe*Qe,xo=2*ul*It*Qe,xa=ja/xo,ds=Math.sqrt(xa*xa+1)-xa,Wc=ds<1e-9?-18:Math.log(ds);return Wc}function fr(Wi){return(Math.exp(Wi)-Math.exp(-Wi))/2}function rr(Wi){return(Math.exp(Wi)+Math.exp(-Wi))/2}function gn(Wi){return fr(Wi)/rr(Wi)}var Zr=Qt(0);function ra(Wi){return Me*(rr(Zr)/rr(Zr+dt*Wi))}function cl(Wi){return Me*(rr(Zr)*gn(Zr+dt*Wi)-fr(Zr))/It}function qc(Wi){return 1-Math.pow(1-Wi,1.5)}var Vc=Date.now(),Vi=(Qt(1)-Zr)/dt,us=C.duration?1e3*C.duration:1e3*Vi*.8;function yn(){var Wi=(Date.now()-Vc)/us,Fa=qc(Wi)*Vi;Wi<=1?(this._flyToFrame=wt(yn,this),this._move(this.unproject(I.add(q.subtract(I).multiplyBy(cl(Fa)/Qe)),ve),this.getScaleZoom(Me/ra(Fa),ve),{flyTo:!0})):this._move(c,v)._moveEnd(!0)}return this._moveStart(!0,C.noMoveStart),yn.call(this),this},flyToBounds:function(c,v){var C=this._getBoundsCenterZoom(c,v);return this.flyTo(C.center,C.zoom,v)},setMaxBounds:function(c){return c=hi(c),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),c.isValid()?(this.options.maxBounds=c,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(c){var v=this.options.minZoom;return this.options.minZoom=c,this._loaded&&v!==c&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(c):this},setMaxZoom:function(c){var v=this.options.maxZoom;return this.options.maxZoom=c,this._loaded&&v!==c&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(c):this},panInsideBounds:function(c,v){this._enforcingBounds=!0;var C=this.getCenter(),I=this._limitCenter(C,this._zoom,hi(c));return C.equals(I)||this.panTo(I,v),this._enforcingBounds=!1,this},panInside:function(c,v){v=v||{};var C=_t(v.paddingTopLeft||v.padding||[0,0]),I=_t(v.paddingBottomRight||v.padding||[0,0]),q=this.project(this.getCenter()),ie=this.project(c),ve=this.getPixelBounds(),Me=Mi([ve.min.add(C),ve.max.subtract(I)]),Ve=Me.getSize();if(!Me.contains(ie)){this._enforcingBounds=!0;var Qe=ie.subtract(Me.getCenter()),dt=Me.extend(ie).getSize().subtract(Ve);q.x+=Qe.x<0?-dt.x:dt.x,q.y+=Qe.y<0?-dt.y:dt.y,this.panTo(this.unproject(q),v),this._enforcingBounds=!1}return this},invalidateSize:function(c){if(!this._loaded)return this;c=p({animate:!1,pan:!0},c===!0?{animate:!0}:c);var v=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var C=this.getSize(),I=v.divideBy(2).round(),q=C.divideBy(2).round(),ie=I.subtract(q);return!ie.x&&!ie.y?this:(c.animate&&c.pan?this.panBy(ie):(c.pan&&this._rawPanBy(ie),this.fire("move"),c.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:v,newSize:C}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(c){if(c=this._locateOptions=p({timeout:1e4,watch:!1},c),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var v=f(this._handleGeolocationResponse,this),C=f(this._handleGeolocationError,this);return c.watch?this._locationWatchId=navigator.geolocation.watchPosition(v,C,c):navigator.geolocation.getCurrentPosition(v,C,c),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(c){if(this._container._leaflet_id){var v=c.code,C=c.message||(v===1?"permission denied":v===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:v,message:"Geolocation error: "+C+"."})}},_handleGeolocationResponse:function(c){if(this._container._leaflet_id){var v=c.coords.latitude,C=c.coords.longitude,I=new At(v,C),q=I.toBounds(c.coords.accuracy*2),ie=this._locateOptions;if(ie.setView){var ve=this.getBoundsZoom(q);this.setView(I,ie.maxZoom?Math.min(ve,ie.maxZoom):ve)}var Me={latlng:I,bounds:q,timestamp:c.timestamp};for(var Ve in c.coords)typeof c.coords[Ve]=="number"&&(Me[Ve]=c.coords[Ve]);this.fire("locationfound",Me)}},addHandler:function(c,v){if(!v)return this;var C=this[c]=new v(this);return this._handlers.push(C),this.options[c]&&C.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(v){this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),bi(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(kt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var c;for(c in this._layers)this._layers[c].remove();for(c in this._panes)bi(this._panes[c]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(c,v){var C="leaflet-pane"+(c?" leaflet-"+c.replace("Pane","")+"-pane":""),I=li("div",C,v||this._mapPane);return c&&(this._panes[c]=I),I},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var c=this.getPixelBounds(),v=this.unproject(c.getBottomLeft()),C=this.unproject(c.getTopRight());return new Ii(v,C)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(c,v,C){c=hi(c),C=_t(C||[0,0]);var I=this.getZoom()||0,q=this.getMinZoom(),ie=this.getMaxZoom(),ve=c.getNorthWest(),Me=c.getSouthEast(),Ve=this.getSize().subtract(C),Qe=Mi(this.project(Me,I),this.project(ve,I)).getSize(),dt=Be.any3d?this.options.zoomSnap:1,It=Ve.x/Qe.x,Qt=Ve.y/Qe.y,fr=v?Math.max(It,Qt):Math.min(It,Qt);return I=this.getScaleZoom(fr,I),dt&&(I=Math.round(I/(dt/100))*(dt/100),I=v?Math.ceil(I/dt)*dt:Math.floor(I/dt)*dt),Math.max(q,Math.min(ie,I))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ut(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(c,v){var C=this._getTopLeftPoint(c,v);return new Kt(C,C.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(c){return this.options.crs.getProjectedBounds(c===void 0?this.getZoom():c)},getPane:function(c){return typeof c=="string"?this._panes[c]:c},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(c,v){var C=this.options.crs;return v=v===void 0?this._zoom:v,C.scale(c)/C.scale(v)},getScaleZoom:function(c,v){var C=this.options.crs;v=v===void 0?this._zoom:v;var I=C.zoom(c*C.scale(v));return isNaN(I)?1/0:I},project:function(c,v){return v=v===void 0?this._zoom:v,this.options.crs.latLngToPoint(St(c),v)},unproject:function(c,v){return v=v===void 0?this._zoom:v,this.options.crs.pointToLatLng(_t(c),v)},layerPointToLatLng:function(c){var v=_t(c).add(this.getPixelOrigin());return this.unproject(v)},latLngToLayerPoint:function(c){var v=this.project(St(c))._round();return v._subtract(this.getPixelOrigin())},wrapLatLng:function(c){return this.options.crs.wrapLatLng(St(c))},wrapLatLngBounds:function(c){return this.options.crs.wrapLatLngBounds(hi(c))},distance:function(c,v){return this.options.crs.distance(St(c),St(v))},containerPointToLayerPoint:function(c){return _t(c).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(c){return _t(c).add(this._getMapPanePos())},containerPointToLatLng:function(c){var v=this.containerPointToLayerPoint(_t(c));return this.layerPointToLatLng(v)},latLngToContainerPoint:function(c){return this.layerPointToContainerPoint(this.latLngToLayerPoint(St(c)))},mouseEventToContainerPoint:function(c){return uo(c,this._container)},mouseEventToLayerPoint:function(c){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(c))},mouseEventToLatLng:function(c){return this.layerPointToLatLng(this.mouseEventToLayerPoint(c))},_initContainer:function(c){var v=this._container=Aa(c);if(v){if(v._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");vt(v,"scroll",this._onScroll,this),this._containerId=T(v)},_initLayout:function(){var c=this._container;this._fadeAnimated=this.options.fadeAnimation&&Be.any3d,Nt(c,"leaflet-container"+(Be.touch?" leaflet-touch":"")+(Be.retina?" leaflet-retina":"")+(Be.ielt9?" leaflet-oldie":"")+(Be.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var v=Wr(c,"position");v!=="absolute"&&v!=="relative"&&v!=="fixed"&&v!=="sticky"&&(c.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var c=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Yi(this._mapPane,new ut(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Nt(c.markerPane,"leaflet-zoom-hide"),Nt(c.shadowPane,"leaflet-zoom-hide"))},_resetView:function(c,v,C){Yi(this._mapPane,new ut(0,0));var I=!this._loaded;this._loaded=!0,v=this._limitZoom(v),this.fire("viewprereset");var q=this._zoom!==v;this._moveStart(q,C)._move(c,v)._moveEnd(q),this.fire("viewreset"),I&&this.fire("load")},_moveStart:function(c,v){return c&&this.fire("zoomstart"),v||this.fire("movestart"),this},_move:function(c,v,C,I){v===void 0&&(v=this._zoom);var q=this._zoom!==v;return this._zoom=v,this._lastCenter=c,this._pixelOrigin=this._getNewPixelOrigin(c),I?C&&C.pinch&&this.fire("zoom",C):((q||C&&C.pinch)&&this.fire("zoom",C),this.fire("move",C)),this},_moveEnd:function(c){return c&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return kt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(c){Yi(this._mapPane,this._getMapPanePos().subtract(c))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(c){this._targets={},this._targets[T(this._container)]=this;var v=c?ct:vt;v(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&v(window,"resize",this._onResize,this),Be.any3d&&this.options.transform3DLimit&&(c?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){kt(this._resizeRequest),this._resizeRequest=wt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var c=this._getMapPanePos();Math.max(Math.abs(c.x),Math.abs(c.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(c,v){for(var C=[],I,q=v==="mouseout"||v==="mouseover",ie=c.target||c.srcElement,ve=!1;ie;){if(I=this._targets[T(ie)],I&&(v==="click"||v==="preclick")&&this._draggableMoved(I)){ve=!0;break}if(I&&I.listens(v,!0)&&(q&&!Bn(ie,c)||(C.push(I),q))||ie===this._container)break;ie=ie.parentNode}return!C.length&&!ve&&!q&&this.listens(v,!0)&&(C=[this]),C},_isClickDisabled:function(c){for(;c&&c!==this._container;){if(c._leaflet_disable_click)return!0;c=c.parentNode}},_handleDOMEvent:function(c){var v=c.target||c.srcElement;if(!(!this._loaded||v._leaflet_disable_events||c.type==="click"&&this._isClickDisabled(v))){var C=c.type;C==="mousedown"&&Bt(v),this._fireDOMEvent(c,C)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(c,v,C){if(c.type==="click"){var I=p({},c);I.type="preclick",this._fireDOMEvent(I,I.type,C)}var q=this._findEventTargets(c,v);if(C){for(var ie=[],ve=0;ve<C.length;ve++)C[ve].listens(v,!0)&&ie.push(C[ve]);q=ie.concat(q)}if(q.length){v==="contextmenu"&&Jt(c);var Me=q[0],Ve={originalEvent:c};if(c.type!=="keypress"&&c.type!=="keydown"&&c.type!=="keyup"){var Qe=Me.getLatLng&&(!Me._radius||Me._radius<=10);Ve.containerPoint=Qe?this.latLngToContainerPoint(Me.getLatLng()):this.mouseEventToContainerPoint(c),Ve.layerPoint=this.containerPointToLayerPoint(Ve.containerPoint),Ve.latlng=Qe?Me.getLatLng():this.layerPointToLatLng(Ve.layerPoint)}for(ve=0;ve<q.length;ve++)if(q[ve].fire(v,Ve,!0),Ve.originalEvent._stopped||q[ve].options.bubblingMouseEvents===!1&&Ce(this._mouseEvents,v)!==-1)return}},_draggableMoved:function(c){return c=c.dragging&&c.dragging.enabled()?c:this,c.dragging&&c.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var c=0,v=this._handlers.length;c<v;c++)this._handlers[c].disable()},whenReady:function(c,v){return this._loaded?c.call(v||this,{target:this}):this.on("load",c,v),this},_getMapPanePos:function(){return es(this._mapPane)||new ut(0,0)},_moved:function(){var c=this._getMapPanePos();return c&&!c.equals([0,0])},_getTopLeftPoint:function(c,v){var C=c&&v!==void 0?this._getNewPixelOrigin(c,v):this.getPixelOrigin();return C.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(c,v){var C=this.getSize()._divideBy(2);return this.project(c,v)._subtract(C)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(c,v,C){var I=this._getNewPixelOrigin(C,v);return this.project(c,v)._subtract(I)},_latLngBoundsToNewLayerBounds:function(c,v,C){var I=this._getNewPixelOrigin(C,v);return Mi([this.project(c.getSouthWest(),v)._subtract(I),this.project(c.getNorthWest(),v)._subtract(I),this.project(c.getSouthEast(),v)._subtract(I),this.project(c.getNorthEast(),v)._subtract(I)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(c){return this.latLngToLayerPoint(c).subtract(this._getCenterLayerPoint())},_limitCenter:function(c,v,C){if(!C)return c;var I=this.project(c,v),q=this.getSize().divideBy(2),ie=new Kt(I.subtract(q),I.add(q)),ve=this._getBoundsOffset(ie,C,v);return Math.abs(ve.x)<=1&&Math.abs(ve.y)<=1?c:this.unproject(I.add(ve),v)},_limitOffset:function(c,v){if(!v)return c;var C=this.getPixelBounds(),I=new Kt(C.min.add(c),C.max.add(c));return c.add(this._getBoundsOffset(I,v))},_getBoundsOffset:function(c,v,C){var I=Mi(this.project(v.getNorthEast(),C),this.project(v.getSouthWest(),C)),q=I.min.subtract(c.min),ie=I.max.subtract(c.max),ve=this._rebound(q.x,-ie.x),Me=this._rebound(q.y,-ie.y);return new ut(ve,Me)},_rebound:function(c,v){return c+v>0?Math.round(c-v)/2:Math.max(0,Math.ceil(c))-Math.max(0,Math.floor(v))},_limitZoom:function(c){var v=this.getMinZoom(),C=this.getMaxZoom(),I=Be.any3d?this.options.zoomSnap:1;return I&&(c=Math.round(c/I)*I),Math.max(v,Math.min(C,c))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Hi(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(c,v){var C=this._getCenterOffset(c)._trunc();return(v&&v.animate)!==!0&&!this.getSize().contains(C)?!1:(this.panBy(C,v),!0)},_createAnimProxy:function(){var c=this._proxy=li("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(c),this.on("zoomanim",function(v){var C=ks,I=this._proxy.style[C];da(this._proxy,this.project(v.center,v.zoom),this.getZoomScale(v.zoom,1)),I===this._proxy.style[C]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){bi(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var c=this.getCenter(),v=this.getZoom();da(this._proxy,this.project(c,v),this.getZoomScale(v,1))},_catchTransitionEnd:function(c){this._animatingZoom&&c.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(c,v,C){if(this._animatingZoom)return!0;if(C=C||{},!this._zoomAnimated||C.animate===!1||this._nothingToAnimate()||Math.abs(v-this._zoom)>this.options.zoomAnimationThreshold)return!1;var I=this.getZoomScale(v),q=this._getCenterOffset(c)._divideBy(1-1/I);return C.animate!==!0&&!this.getSize().contains(q)?!1:(wt(function(){this._moveStart(!0,C.noMoveStart||!1)._animateZoom(c,v,!0)},this),!0)},_animateZoom:function(c,v,C,I){this._mapPane&&(C&&(this._animatingZoom=!0,this._animateToCenter=c,this._animateToZoom=v,Nt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:c,zoom:v,noUpdate:I}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(f(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Hi(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Pi(c,v){return new Yt(c,v)}var Lr=ri.extend({options:{position:"topright"},initialize:function(c){te(this,c)},getPosition:function(){return this.options.position},setPosition:function(c){var v=this._map;return v&&v.removeControl(this),this.options.position=c,v&&v.addControl(this),this},getContainer:function(){return this._container},addTo:function(c){this.remove(),this._map=c;var v=this._container=this.onAdd(c),C=this.getPosition(),I=c._controlCorners[C];return Nt(v,"leaflet-control"),C.indexOf("bottom")!==-1?I.insertBefore(v,I.firstChild):I.appendChild(v),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(bi(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(c){this._map&&c&&c.screenX>0&&c.screenY>0&&this._map.getContainer().focus()}}),Zt=function(c){return new Lr(c)};Yt.include({addControl:function(c){return c.addTo(this),this},removeControl:function(c){return c.remove(),this},_initControlPos:function(){var c=this._controlCorners={},v="leaflet-",C=this._controlContainer=li("div",v+"control-container",this._container);function I(q,ie){var ve=v+q+" "+v+ie;c[q+ie]=li("div",ve,C)}I("top","left"),I("top","right"),I("bottom","left"),I("bottom","right")},_clearControlPos:function(){for(var c in this._controlCorners)bi(this._controlCorners[c]);bi(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ot=Lr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(c,v,C,I){return C<I?-1:I<C?1:0}},initialize:function(c,v,C){te(this,C),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var I in c)this._addLayer(c[I],I);for(I in v)this._addLayer(v[I],I,!0)},onAdd:function(c){this._initLayout(),this._update(),this._map=c,c.on("zoomend",this._checkDisabledLayers,this);for(var v=0;v<this._layers.length;v++)this._layers[v].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(c){return Lr.prototype.addTo.call(this,c),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(c,v){return this._addLayer(c,v),this._map?this._update():this},addOverlay:function(c,v){return this._addLayer(c,v,!0),this._map?this._update():this},removeLayer:function(c){c.off("add remove",this._onLayerChange,this);var v=this._getLayer(T(c));return v&&this._layers.splice(this._layers.indexOf(v),1),this._map?this._update():this},expand:function(){Nt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var c=this._map.getSize().y-(this._container.offsetTop+50);return c<this._section.clientHeight?(Nt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=c+"px"):Hi(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Hi(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var c="leaflet-control-layers",v=this._container=li("div",c),C=this.options.collapsed;v.setAttribute("aria-haspopup",!0),Tn(v),za(v);var I=this._section=li("section",c+"-list");C&&(this._map.on("click",this.collapse,this),vt(v,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var q=this._layersLink=li("a",c+"-toggle",v);q.href="#",q.title="Layers",q.setAttribute("role","button"),vt(q,{keydown:function(ie){ie.keyCode===13&&this._expandSafely()},click:function(ie){Jt(ie),this._expandSafely()}},this),C||this.expand(),this._baseLayersList=li("div",c+"-base",I),this._separator=li("div",c+"-separator",I),this._overlaysList=li("div",c+"-overlays",I),v.appendChild(I)},_getLayer:function(c){for(var v=0;v<this._layers.length;v++)if(this._layers[v]&&T(this._layers[v].layer)===c)return this._layers[v]},_addLayer:function(c,v,C){this._map&&c.on("add remove",this._onLayerChange,this),this._layers.push({layer:c,name:v,overlay:C}),this.options.sortLayers&&this._layers.sort(f(function(I,q){return this.options.sortFunction(I.layer,q.layer,I.name,q.name)},this)),this.options.autoZIndex&&c.setZIndex&&(this._lastZIndex++,c.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Qa(this._baseLayersList),Qa(this._overlaysList),this._layerControlInputs=[];var c,v,C,I,q=0;for(C=0;C<this._layers.length;C++)I=this._layers[C],this._addItem(I),v=v||I.overlay,c=c||!I.overlay,q+=I.overlay?0:1;return this.options.hideSingleBase&&(c=c&&q>1,this._baseLayersList.style.display=c?"":"none"),this._separator.style.display=v&&c?"":"none",this},_onLayerChange:function(c){this._handlingClick||this._update();var v=this._getLayer(T(c.target)),C=v.overlay?c.type==="add"?"overlayadd":"overlayremove":c.type==="add"?"baselayerchange":null;C&&this._map.fire(C,v)},_createRadioElement:function(c,v){var C='<input type="radio" class="leaflet-control-layers-selector" name="'+c+'"'+(v?' checked="checked"':"")+"/>",I=document.createElement("div");return I.innerHTML=C,I.firstChild},_addItem:function(c){var v=document.createElement("label"),C=this._map.hasLayer(c.layer),I;c.overlay?(I=document.createElement("input"),I.type="checkbox",I.className="leaflet-control-layers-selector",I.defaultChecked=C):I=this._createRadioElement("leaflet-base-layers_"+T(this),C),this._layerControlInputs.push(I),I.layerId=T(c.layer),vt(I,"click",this._onInputClick,this);var q=document.createElement("span");q.innerHTML=" "+c.name;var ie=document.createElement("span");v.appendChild(ie),ie.appendChild(I),ie.appendChild(q);var ve=c.overlay?this._overlaysList:this._baseLayersList;return ve.appendChild(v),this._checkDisabledLayers(),v},_onInputClick:function(){if(!this._preventClick){var c=this._layerControlInputs,v,C,I=[],q=[];this._handlingClick=!0;for(var ie=c.length-1;ie>=0;ie--)v=c[ie],C=this._getLayer(v.layerId).layer,v.checked?I.push(C):v.checked||q.push(C);for(ie=0;ie<q.length;ie++)this._map.hasLayer(q[ie])&&this._map.removeLayer(q[ie]);for(ie=0;ie<I.length;ie++)this._map.hasLayer(I[ie])||this._map.addLayer(I[ie]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var c=this._layerControlInputs,v,C,I=this._map.getZoom(),q=c.length-1;q>=0;q--)v=c[q],C=this._getLayer(v.layerId).layer,v.disabled=C.options.minZoom!==void 0&&I<C.options.minZoom||C.options.maxZoom!==void 0&&I>C.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var c=this._section;this._preventClick=!0,vt(c,"click",Jt),this.expand();var v=this;setTimeout(function(){ct(c,"click",Jt),v._preventClick=!1})}}),Ms=function(c,v,C){return new Ot(c,v,C)},ei=Lr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(c){var v="leaflet-control-zoom",C=li("div",v+" leaflet-bar"),I=this.options;return this._zoomInButton=this._createButton(I.zoomInText,I.zoomInTitle,v+"-in",C,this._zoomIn),this._zoomOutButton=this._createButton(I.zoomOutText,I.zoomOutTitle,v+"-out",C,this._zoomOut),this._updateDisabled(),c.on("zoomend zoomlevelschange",this._updateDisabled,this),C},onRemove:function(c){c.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(c){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(c.shiftKey?3:1))},_zoomOut:function(c){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(c.shiftKey?3:1))},_createButton:function(c,v,C,I,q){var ie=li("a",C,I);return ie.innerHTML=c,ie.href="#",ie.title=v,ie.setAttribute("role","button"),ie.setAttribute("aria-label",v),Tn(ie),vt(ie,"click",hn),vt(ie,"click",q,this),vt(ie,"click",this._refocusOnMap,this),ie},_updateDisabled:function(){var c=this._map,v="leaflet-disabled";Hi(this._zoomInButton,v),Hi(this._zoomOutButton,v),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||c._zoom===c.getMinZoom())&&(Nt(this._zoomOutButton,v),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||c._zoom===c.getMaxZoom())&&(Nt(this._zoomInButton,v),this._zoomInButton.setAttribute("aria-disabled","true"))}});Yt.mergeOptions({zoomControl:!0}),Yt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ei,this.addControl(this.zoomControl))});var ho=function(c){return new ei(c)},pn=Lr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(c){var v="leaflet-control-scale",C=li("div",v),I=this.options;return this._addScales(I,v+"-line",C),c.on(I.updateWhenIdle?"moveend":"move",this._update,this),c.whenReady(this._update,this),C},onRemove:function(c){c.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(c,v,C){c.metric&&(this._mScale=li("div",v,C)),c.imperial&&(this._iScale=li("div",v,C))},_update:function(){var c=this._map,v=c.getSize().y/2,C=c.distance(c.containerPointToLatLng([0,v]),c.containerPointToLatLng([this.options.maxWidth,v]));this._updateScales(C)},_updateScales:function(c){this.options.metric&&c&&this._updateMetric(c),this.options.imperial&&c&&this._updateImperial(c)},_updateMetric:function(c){var v=this._getRoundNum(c),C=v<1e3?v+" m":v/1e3+" km";this._updateScale(this._mScale,C,v/c)},_updateImperial:function(c){var v=c*3.2808399,C,I,q;v>5280?(C=v/5280,I=this._getRoundNum(C),this._updateScale(this._iScale,I+" mi",I/C)):(q=this._getRoundNum(v),this._updateScale(this._iScale,q+" ft",q/v))},_updateScale:function(c,v,C){c.style.width=Math.round(this.options.maxWidth*C)+"px",c.innerHTML=v},_getRoundNum:function(c){var v=Math.pow(10,(Math.floor(c)+"").length-1),C=c/v;return C=C>=10?10:C>=5?5:C>=3?3:C>=2?2:1,v*C}}),Is=function(c){return new pn(c)},Da='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Jo=Lr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Be.inlineSvg?Da+" ":"")+"Leaflet</a>"},initialize:function(c){te(this,c),this._attributions={}},onAdd:function(c){c.attributionControl=this,this._container=li("div","leaflet-control-attribution"),Tn(this._container);for(var v in c._layers)c._layers[v].getAttribution&&this.addAttribution(c._layers[v].getAttribution());return this._update(),c.on("layeradd",this._addAttribution,this),this._container},onRemove:function(c){c.off("layeradd",this._addAttribution,this)},_addAttribution:function(c){c.layer.getAttribution&&(this.addAttribution(c.layer.getAttribution()),c.layer.once("remove",function(){this.removeAttribution(c.layer.getAttribution())},this))},setPrefix:function(c){return this.options.prefix=c,this._update(),this},addAttribution:function(c){return c?(this._attributions[c]||(this._attributions[c]=0),this._attributions[c]++,this._update(),this):this},removeAttribution:function(c){return c?(this._attributions[c]&&(this._attributions[c]--,this._update()),this):this},_update:function(){if(this._map){var c=[];for(var v in this._attributions)this._attributions[v]&&c.push(v);var C=[];this.options.prefix&&C.push(this.options.prefix),c.length&&C.push(c.join(", ")),this._container.innerHTML=C.join(' <span aria-hidden="true">|</span> ')}}});Yt.mergeOptions({attributionControl:!0}),Yt.addInitHook(function(){this.options.attributionControl&&new Jo().addTo(this)});var po=function(c){return new Jo(c)};Lr.Layers=Ot,Lr.Zoom=ei,Lr.Scale=pn,Lr.Attribution=Jo,Zt.layers=Ms,Zt.zoom=ho,Zt.scale=Is,Zt.attribution=po;var Cn=ri.extend({initialize:function(c){this._map=c},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Cn.addTo=function(c,v){return c.addHandler(v,this),this};var Yu={Events:ni},jl=Be.touch?"touchstart mousedown":"mousedown",Xi=Ut.extend({options:{clickTolerance:3},initialize:function(c,v,C,I){te(this,I),this._element=c,this._dragStartTarget=v||c,this._preventOutline=C},enable:function(){this._enabled||(vt(this._dragStartTarget,jl,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Xi._dragging===this&&this.finishDrag(!0),ct(this._dragStartTarget,jl,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(c){if(this._enabled&&(this._moved=!1,!Yo(this._element,"leaflet-zoom-anim"))){if(c.touches&&c.touches.length!==1){Xi._dragging===this&&this.finishDrag();return}if(!(Xi._dragging||c.shiftKey||c.which!==1&&c.button!==1&&!c.touches)&&(Xi._dragging=this,this._preventOutline&&Bt(this._element),lo(),ha(),!this._moving)){this.fire("down");var v=c.touches?c.touches[0]:c,C=wc(this._element);this._startPoint=new ut(v.clientX,v.clientY),this._startPos=es(this._element),this._parentScale=co(C);var I=c.type==="mousedown";vt(document,I?"mousemove":"touchmove",this._onMove,this),vt(document,I?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(c){if(this._enabled){if(c.touches&&c.touches.length>1){this._moved=!0;return}var v=c.touches&&c.touches.length===1?c.touches[0]:c,C=new ut(v.clientX,v.clientY)._subtract(this._startPoint);!C.x&&!C.y||Math.abs(C.x)+Math.abs(C.y)<this.options.clickTolerance||(C.x/=this._parentScale.x,C.y/=this._parentScale.y,Jt(c),this._moved||(this.fire("dragstart"),this._moved=!0,Nt(document.body,"leaflet-dragging"),this._lastTarget=c.target||c.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Nt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(C),this._moving=!0,this._lastEvent=c,this._updatePosition())}},_updatePosition:function(){var c={originalEvent:this._lastEvent};this.fire("predrag",c),Yi(this._element,this._newPos),this.fire("drag",c)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(c){Hi(document.body,"leaflet-dragging"),this._lastTarget&&(Hi(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ct(document,"mousemove touchmove",this._onMove,this),ct(document,"mouseup touchend touchcancel",this._onUp,this),ts(),Ma();var v=this._moved&&this._moving;this._moving=!1,Xi._dragging=!1,v&&this.fire("dragend",{noInertia:c,distance:this._newPos.distanceTo(this._startPos)})}});function Fn(c,v,C){var I,q=[1,4,2,8],ie,ve,Me,Ve,Qe,dt,It,Qt;for(ie=0,dt=c.length;ie<dt;ie++)c[ie]._code=ma(c[ie],v);for(Me=0;Me<4;Me++){for(It=q[Me],I=[],ie=0,dt=c.length,ve=dt-1;ie<dt;ve=ie++)Ve=c[ie],Qe=c[ve],Ve._code&It?Qe._code&It||(Qt=fa(Qe,Ve,It,v,C),Qt._code=ma(Qt,v),I.push(Qt)):(Qe._code&It&&(Qt=fa(Qe,Ve,It,v,C),Qt._code=ma(Qt,v),I.push(Qt)),I.push(Ve));c=I}return c}function Li(c,v){var C,I,q,ie,ve,Me,Ve,Qe,dt;if(!c||c.length===0)throw new Error("latlngs not passed");Cr(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var It=St([0,0]),Qt=hi(c),fr=Qt.getNorthWest().distanceTo(Qt.getSouthWest())*Qt.getNorthEast().distanceTo(Qt.getNorthWest());fr<1700&&(It=pa(c));var rr=c.length,gn=[];for(C=0;C<rr;C++){var Zr=St(c[C]);gn.push(v.project(St([Zr.lat-It.lat,Zr.lng-It.lng])))}for(Me=Ve=Qe=0,C=0,I=rr-1;C<rr;I=C++)q=gn[C],ie=gn[I],ve=q.y*ie.x-ie.y*q.x,Ve+=(q.x+ie.x)*ve,Qe+=(q.y+ie.y)*ve,Me+=ve*3;Me===0?dt=gn[0]:dt=[Ve/Me,Qe/Me];var ra=v.unproject(_t(dt));return St([ra.lat+It.lat,ra.lng+It.lng])}function pa(c){for(var v=0,C=0,I=0,q=0;q<c.length;q++){var ie=St(c[q]);v+=ie.lat,C+=ie.lng,I++}return St([v/I,C/I])}var Nl={__proto__:null,clipPolygon:Fn,polygonCenter:Li,centroid:pa};function zs(c,v){if(!v||!c.length)return c.slice();var C=v*v;return c=Xu(c,C),c=ql(c,C),c}function Fi(c,v,C){return Math.sqrt(Jn(c,v,C,!0))}function Tc(c,v,C){return Jn(c,v,C)}function ql(c,v){var C=c.length,I=typeof Uint8Array!="undefined"?Uint8Array:Array,q=new I(C);q[0]=q[C-1]=1,el(c,q,v,0,C-1);var ie,ve=[];for(ie=0;ie<C;ie++)q[ie]&&ve.push(c[ie]);return ve}function el(c,v,C,I,q){var ie=0,ve,Me,Ve;for(Me=I+1;Me<=q-1;Me++)Ve=Jn(c[Me],c[I],c[q],!0),Ve>ie&&(ve=Me,ie=Ve);ie>C&&(v[ve]=1,el(c,v,C,I,ve),el(c,v,C,ve,q))}function Xu(c,v){for(var C=[c[0]],I=1,q=0,ie=c.length;I<ie;I++)mo(c[I],c[q])>v&&(C.push(c[I]),q=I);return q<ie-1&&C.push(c[ie-1]),C}var is;function fo(c,v,C,I,q){var ie=I?is:ma(c,C),ve=ma(v,C),Me,Ve,Qe;for(is=ve;;){if(!(ie|ve))return[c,v];if(ie&ve)return!1;Me=ie||ve,Ve=fa(c,v,Me,C,q),Qe=ma(Ve,C),Me===ie?(c=Ve,ie=Qe):(v=Ve,ve=Qe)}}function fa(c,v,C,I,q){var ie=v.x-c.x,ve=v.y-c.y,Me=I.min,Ve=I.max,Qe,dt;return C&8?(Qe=c.x+ie*(Ve.y-c.y)/ve,dt=Ve.y):C&4?(Qe=c.x+ie*(Me.y-c.y)/ve,dt=Me.y):C&2?(Qe=Ve.x,dt=c.y+ve*(Ve.x-c.x)/ie):C&1&&(Qe=Me.x,dt=c.y+ve*(Me.x-c.x)/ie),new ut(Qe,dt,q)}function ma(c,v){var C=0;return c.x<v.min.x?C|=1:c.x>v.max.x&&(C|=2),c.y<v.min.y?C|=4:c.y>v.max.y&&(C|=8),C}function mo(c,v){var C=v.x-c.x,I=v.y-c.y;return C*C+I*I}function Jn(c,v,C,I){var q=v.x,ie=v.y,ve=C.x-q,Me=C.y-ie,Ve=ve*ve+Me*Me,Qe;return Ve>0&&(Qe=((c.x-q)*ve+(c.y-ie)*Me)/Ve,Qe>1?(q=C.x,ie=C.y):Qe>0&&(q+=ve*Qe,ie+=Me*Qe)),ve=c.x-q,Me=c.y-ie,I?ve*ve+Me*Me:new ut(q,ie)}function Cr(c){return!ye(c[0])||typeof c[0][0]!="object"&&typeof c[0][0]!="undefined"}function ir(c){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Cr(c)}function Vl(c,v){var C,I,q,ie,ve,Me,Ve,Qe;if(!c||c.length===0)throw new Error("latlngs not passed");Cr(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var dt=St([0,0]),It=hi(c),Qt=It.getNorthWest().distanceTo(It.getSouthWest())*It.getNorthEast().distanceTo(It.getNorthWest());Qt<1700&&(dt=pa(c));var fr=c.length,rr=[];for(C=0;C<fr;C++){var gn=St(c[C]);rr.push(v.project(St([gn.lat-dt.lat,gn.lng-dt.lng])))}for(C=0,I=0;C<fr-1;C++)I+=rr[C].distanceTo(rr[C+1])/2;if(I===0)Qe=rr[0];else for(C=0,ie=0;C<fr-1;C++)if(ve=rr[C],Me=rr[C+1],q=ve.distanceTo(Me),ie+=q,ie>I){Ve=(ie-I)/q,Qe=[Me.x-Ve*(Me.x-ve.x),Me.y-Ve*(Me.y-ve.y)];break}var Zr=v.unproject(_t(Qe));return St([Zr.lat+dt.lat,Zr.lng+dt.lng])}var Ls={__proto__:null,simplify:zs,pointToSegmentDistance:Fi,closestPointOnSegment:Tc,clipSegment:fo,_getEdgeIntersection:fa,_getBitCode:ma,_sqClosestPointOnSegment:Jn,isFlat:Cr,_flat:ir,polylineCenter:Vl},rs={project:function(c){return new ut(c.lng,c.lat)},unproject:function(c){return new At(c.y,c.x)},bounds:new Kt([-180,-90],[180,90])},ga={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Kt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(c){var v=Math.PI/180,C=this.R,I=c.lat*v,q=this.R_MINOR/C,ie=Math.sqrt(1-q*q),ve=ie*Math.sin(I),Me=Math.tan(Math.PI/4-I/2)/Math.pow((1-ve)/(1+ve),ie/2);return I=-C*Math.log(Math.max(Me,1e-10)),new ut(c.lng*v*C,I)},unproject:function(c){for(var v=180/Math.PI,C=this.R,I=this.R_MINOR/C,q=Math.sqrt(1-I*I),ie=Math.exp(-c.y/C),ve=Math.PI/2-2*Math.atan(ie),Me=0,Ve=.1,Qe;Me<15&&Math.abs(Ve)>1e-7;Me++)Qe=q*Math.sin(ve),Qe=Math.pow((1-Qe)/(1+Qe),q/2),Ve=Math.PI/2-2*Math.atan(ie*Qe)-ve,ve+=Ve;return new At(ve*v,c.x*v/C)}},Ku={__proto__:null,LonLat:rs,Mercator:ga,SphericalMercator:Mr},tl=p({},vi,{code:"EPSG:3395",projection:ga,transformation:(function(){var c=.5/(Math.PI*ga.R);return or(c,.5,-c,.5)})()}),Cc=p({},vi,{code:"EPSG:4326",projection:rs,transformation:or(1/180,1,-1/180,.5)}),Ds=p({},sr,{projection:rs,transformation:or(1,0,-1,0),scale:function(c){return Math.pow(2,c)},zoom:function(c){return Math.log(c)/Math.LN2},distance:function(c,v){var C=v.lng-c.lng,I=v.lat-c.lat;return Math.sqrt(C*C+I*I)},infinite:!0});sr.Earth=vi,sr.EPSG3395=tl,sr.EPSG3857=wn,sr.EPSG900913=pr,sr.EPSG4326=Cc,sr.Simple=Ds;var tn=Ut.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(c){return c.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(c){return c&&c.removeLayer(this),this},getPane:function(c){return this._map.getPane(c?this.options[c]||c:this.options.pane)},addInteractiveTarget:function(c){return this._map._targets[T(c)]=this,this},removeInteractiveTarget:function(c){return delete this._map._targets[T(c)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(c){var v=c.target;if(v.hasLayer(this)){if(this._map=v,this._zoomAnimated=v._zoomAnimated,this.getEvents){var C=this.getEvents();v.on(C,this),this.once("remove",function(){v.off(C,this)},this)}this.onAdd(v),this.fire("add"),v.fire("layeradd",{layer:this})}}});Yt.include({addLayer:function(c){if(!c._layerAdd)throw new Error("The provided object is not a Layer.");var v=T(c);return this._layers[v]?this:(this._layers[v]=c,c._mapToAdd=this,c.beforeAdd&&c.beforeAdd(this),this.whenReady(c._layerAdd,c),this)},removeLayer:function(c){var v=T(c);return this._layers[v]?(this._loaded&&c.onRemove(this),delete this._layers[v],this._loaded&&(this.fire("layerremove",{layer:c}),c.fire("remove")),c._map=c._mapToAdd=null,this):this},hasLayer:function(c){return T(c)in this._layers},eachLayer:function(c,v){for(var C in this._layers)c.call(v,this._layers[C]);return this},_addLayers:function(c){c=c?ye(c)?c:[c]:[];for(var v=0,C=c.length;v<C;v++)this.addLayer(c[v])},_addZoomLimit:function(c){(!isNaN(c.options.maxZoom)||!isNaN(c.options.minZoom))&&(this._zoomBoundLayers[T(c)]=c,this._updateZoomLevels())},_removeZoomLimit:function(c){var v=T(c);this._zoomBoundLayers[v]&&(delete this._zoomBoundLayers[v],this._updateZoomLevels())},_updateZoomLevels:function(){var c=1/0,v=-1/0,C=this._getZoomSpan();for(var I in this._zoomBoundLayers){var q=this._zoomBoundLayers[I].options;c=q.minZoom===void 0?c:Math.min(c,q.minZoom),v=q.maxZoom===void 0?v:Math.max(v,q.maxZoom)}this._layersMaxZoom=v===-1/0?void 0:v,this._layersMinZoom=c===1/0?void 0:c,C!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ns=tn.extend({initialize:function(c,v){te(this,v),this._layers={};var C,I;if(c)for(C=0,I=c.length;C<I;C++)this.addLayer(c[C])},addLayer:function(c){var v=this.getLayerId(c);return this._layers[v]=c,this._map&&this._map.addLayer(c),this},removeLayer:function(c){var v=c in this._layers?c:this.getLayerId(c);return this._map&&this._layers[v]&&this._map.removeLayer(this._layers[v]),delete this._layers[v],this},hasLayer:function(c){var v=typeof c=="number"?c:this.getLayerId(c);return v in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(c){var v=Array.prototype.slice.call(arguments,1),C,I;for(C in this._layers)I=this._layers[C],I[c]&&I[c].apply(I,v);return this},onAdd:function(c){this.eachLayer(c.addLayer,c)},onRemove:function(c){this.eachLayer(c.removeLayer,c)},eachLayer:function(c,v){for(var C in this._layers)c.call(v,this._layers[C]);return this},getLayer:function(c){return this._layers[c]},getLayers:function(){var c=[];return this.eachLayer(c.push,c),c},setZIndex:function(c){return this.invoke("setZIndex",c)},getLayerId:function(c){return T(c)}}),kc=function(c,v){return new ns(c,v)},jn=ns.extend({addLayer:function(c){return this.hasLayer(c)?this:(c.addEventParent(this),ns.prototype.addLayer.call(this,c),this.fire("layeradd",{layer:c}))},removeLayer:function(c){return this.hasLayer(c)?(c in this._layers&&(c=this._layers[c]),c.removeEventParent(this),ns.prototype.removeLayer.call(this,c),this.fire("layerremove",{layer:c})):this},setStyle:function(c){return this.invoke("setStyle",c)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var c=new Ii;for(var v in this._layers){var C=this._layers[v];c.extend(C.getBounds?C.getBounds():C.getLatLng())}return c}}),Wl=function(c,v){return new jn(c,v)},Oa=ri.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(c){te(this,c)},createIcon:function(c){return this._createIcon("icon",c)},createShadow:function(c){return this._createIcon("shadow",c)},_createIcon:function(c,v){var C=this._getIconUrl(c);if(!C){if(c==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var I=this._createImg(C,v&&v.tagName==="IMG"?v:null);return this._setIconStyles(I,c),(this.options.crossOrigin||this.options.crossOrigin==="")&&(I.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),I},_setIconStyles:function(c,v){var C=this.options,I=C[v+"Size"];typeof I=="number"&&(I=[I,I]);var q=_t(I),ie=_t(v==="shadow"&&C.shadowAnchor||C.iconAnchor||q&&q.divideBy(2,!0));c.className="leaflet-marker-"+v+" "+(C.className||""),ie&&(c.style.marginLeft=-ie.x+"px",c.style.marginTop=-ie.y+"px"),q&&(c.style.width=q.x+"px",c.style.height=q.y+"px")},_createImg:function(c,v){return v=v||document.createElement("img"),v.src=c,v},_getIconUrl:function(c){return Be.retina&&this.options[c+"RetinaUrl"]||this.options[c+"Url"]}});function Pc(c){return new Oa(c)}var Os=Oa.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(c){return typeof Os.imagePath!="string"&&(Os.imagePath=this._detectIconPath()),(this.options.imagePath||Os.imagePath)+Oa.prototype._getIconUrl.call(this,c)},_stripUrl:function(c){var v=function(C,I,q){var ie=I.exec(C);return ie&&ie[q]};return c=v(c,/^url\((['"])?(.+)\1\)$/,2),c&&v(c,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var c=li("div","leaflet-default-icon-path",document.body),v=Wr(c,"background-image")||Wr(c,"backgroundImage");if(document.body.removeChild(c),v=this._stripUrl(v),v)return v;var C=document.querySelector('link[href$="leaflet.css"]');return C?C.href.substring(0,C.href.length-11-1):""}}),Gl=Cn.extend({initialize:function(c){this._marker=c},addHooks:function(){var c=this._marker._icon;this._draggable||(this._draggable=new Xi(c,c,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Nt(c,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Hi(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(c){var v=this._marker,C=v._map,I=this._marker.options.autoPanSpeed,q=this._marker.options.autoPanPadding,ie=es(v._icon),ve=C.getPixelBounds(),Me=C.getPixelOrigin(),Ve=Mi(ve.min._subtract(Me).add(q),ve.max._subtract(Me).subtract(q));if(!Ve.contains(ie)){var Qe=_t((Math.max(Ve.max.x,ie.x)-Ve.max.x)/(ve.max.x-Ve.max.x)-(Math.min(Ve.min.x,ie.x)-Ve.min.x)/(ve.min.x-Ve.min.x),(Math.max(Ve.max.y,ie.y)-Ve.max.y)/(ve.max.y-Ve.max.y)-(Math.min(Ve.min.y,ie.y)-Ve.min.y)/(ve.min.y-Ve.min.y)).multiplyBy(I);C.panBy(Qe,{animate:!1}),this._draggable._newPos._add(Qe),this._draggable._startPos._add(Qe),Yi(v._icon,this._draggable._newPos),this._onDrag(c),this._panRequest=wt(this._adjustPan.bind(this,c))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(c){this._marker.options.autoPan&&(kt(this._panRequest),this._panRequest=wt(this._adjustPan.bind(this,c)))},_onDrag:function(c){var v=this._marker,C=v._shadow,I=es(v._icon),q=v._map.layerPointToLatLng(I);C&&Yi(C,I),v._latlng=q,c.latlng=q,c.oldLatLng=this._oldLatLng,v.fire("move",c).fire("drag",c)},_onDragEnd:function(c){kt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",c)}}),ea=tn.extend({options:{icon:new Os,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(c,v){te(this,v),this._latlng=St(c)},onAdd:function(c){this._zoomAnimated=this._zoomAnimated&&c.options.markerZoomAnimation,this._zoomAnimated&&c.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(c){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&c.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(c){var v=this._latlng;return this._latlng=St(c),this.update(),this.fire("move",{oldLatLng:v,latlng:this._latlng})},setZIndexOffset:function(c){return this.options.zIndexOffset=c,this.update()},getIcon:function(){return this.options.icon},setIcon:function(c){return this.options.icon=c,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var c=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(c)}return this},_initIcon:function(){var c=this.options,v="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),C=c.icon.createIcon(this._icon),I=!1;C!==this._icon&&(this._icon&&this._removeIcon(),I=!0,c.title&&(C.title=c.title),C.tagName==="IMG"&&(C.alt=c.alt||"")),Nt(C,v),c.keyboard&&(C.tabIndex="0",C.setAttribute("role","button")),this._icon=C,c.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&vt(C,"focus",this._panOnFocus,this);var q=c.icon.createShadow(this._shadow),ie=!1;q!==this._shadow&&(this._removeShadow(),ie=!0),q&&(Nt(q,v),q.alt=""),this._shadow=q,c.opacity<1&&this._updateOpacity(),I&&this.getPane().appendChild(this._icon),this._initInteraction(),q&&ie&&this.getPane(c.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ct(this._icon,"focus",this._panOnFocus,this),bi(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&bi(this._shadow),this._shadow=null},_setPos:function(c){this._icon&&Yi(this._icon,c),this._shadow&&Yi(this._shadow,c),this._zIndex=c.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(c){this._icon&&(this._icon.style.zIndex=this._zIndex+c)},_animateZoom:function(c){var v=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center).round();this._setPos(v)},_initInteraction:function(){if(this.options.interactive&&(Nt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Gl)){var c=this.options.draggable;this.dragging&&(c=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Gl(this),c&&this.dragging.enable()}},setOpacity:function(c){return this.options.opacity=c,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var c=this.options.opacity;this._icon&&Gr(this._icon,c),this._shadow&&Gr(this._shadow,c)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var c=this._map;if(c){var v=this.options.icon.options,C=v.iconSize?_t(v.iconSize):_t(0,0),I=v.iconAnchor?_t(v.iconAnchor):_t(0,0);c.panInside(this._latlng,{paddingTopLeft:I,paddingBottomRight:C.subtract(I)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Ec(c,v){return new ea(c,v)}var ta=tn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(c){this._renderer=c.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(c){return te(this,c),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&c&&Object.prototype.hasOwnProperty.call(c,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ya=ta.extend({options:{fill:!0,radius:10},initialize:function(c,v){te(this,v),this._latlng=St(c),this._radius=this.options.radius},setLatLng:function(c){var v=this._latlng;return this._latlng=St(c),this.redraw(),this.fire("move",{oldLatLng:v,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(c){return this.options.radius=this._radius=c,this.redraw()},getRadius:function(){return this._radius},setStyle:function(c){var v=c&&c.radius||this._radius;return ta.prototype.setStyle.call(this,c),this.setRadius(v),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var c=this._radius,v=this._radiusY||c,C=this._clickTolerance(),I=[c+C,v+C];this._pxBounds=new Kt(this._point.subtract(I),this._point.add(I))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(c){return c.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Ac(c,v){return new ya(c,v)}var Rs=ya.extend({initialize:function(c,v,C){if(typeof v=="number"&&(v=p({},C,{radius:v})),te(this,v),this._latlng=St(c),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(c){return this._mRadius=c,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var c=[this._radius,this._radiusY||this._radius];return new Ii(this._map.layerPointToLatLng(this._point.subtract(c)),this._map.layerPointToLatLng(this._point.add(c)))},setStyle:ta.prototype.setStyle,_project:function(){var c=this._latlng.lng,v=this._latlng.lat,C=this._map,I=C.options.crs;if(I.distance===vi.distance){var q=Math.PI/180,ie=this._mRadius/vi.R/q,ve=C.project([v+ie,c]),Me=C.project([v-ie,c]),Ve=ve.add(Me).divideBy(2),Qe=C.unproject(Ve).lat,dt=Math.acos((Math.cos(ie*q)-Math.sin(v*q)*Math.sin(Qe*q))/(Math.cos(v*q)*Math.cos(Qe*q)))/q;(isNaN(dt)||dt===0)&&(dt=ie/Math.cos(Math.PI/180*v)),this._point=Ve.subtract(C.getPixelOrigin()),this._radius=isNaN(dt)?0:Ve.x-C.project([Qe,c-dt]).x,this._radiusY=Ve.y-ve.y}else{var It=I.unproject(I.project(this._latlng).subtract([this._mRadius,0]));this._point=C.latLngToLayerPoint(this._latlng),this._radius=this._point.x-C.latLngToLayerPoint(It).x}this._updateBounds()}});function Qu(c,v,C){return new Rs(c,v,C)}var _a=ta.extend({options:{smoothFactor:1,noClip:!1},initialize:function(c,v){te(this,v),this._setLatLngs(c)},getLatLngs:function(){return this._latlngs},setLatLngs:function(c){return this._setLatLngs(c),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(c){for(var v=1/0,C=null,I=Jn,q,ie,ve=0,Me=this._parts.length;ve<Me;ve++)for(var Ve=this._parts[ve],Qe=1,dt=Ve.length;Qe<dt;Qe++){q=Ve[Qe-1],ie=Ve[Qe];var It=I(c,q,ie,!0);It<v&&(v=It,C=I(c,q,ie))}return C&&(C.distance=Math.sqrt(v)),C},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Vl(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(c,v){return v=v||this._defaultShape(),c=St(c),v.push(c),this._bounds.extend(c),this.redraw()},_setLatLngs:function(c){this._bounds=new Ii,this._latlngs=this._convertLatLngs(c)},_defaultShape:function(){return Cr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(c){for(var v=[],C=Cr(c),I=0,q=c.length;I<q;I++)C?(v[I]=St(c[I]),this._bounds.extend(v[I])):v[I]=this._convertLatLngs(c[I]);return v},_project:function(){var c=new Kt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,c),this._bounds.isValid()&&c.isValid()&&(this._rawPxBounds=c,this._updateBounds())},_updateBounds:function(){var c=this._clickTolerance(),v=new ut(c,c);this._rawPxBounds&&(this._pxBounds=new Kt([this._rawPxBounds.min.subtract(v),this._rawPxBounds.max.add(v)]))},_projectLatlngs:function(c,v,C){var I=c[0]instanceof At,q=c.length,ie,ve;if(I){for(ve=[],ie=0;ie<q;ie++)ve[ie]=this._map.latLngToLayerPoint(c[ie]),C.extend(ve[ie]);v.push(ve)}else for(ie=0;ie<q;ie++)this._projectLatlngs(c[ie],v,C)},_clipPoints:function(){var c=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(c))){if(this.options.noClip){this._parts=this._rings;return}var v=this._parts,C,I,q,ie,ve,Me,Ve;for(C=0,q=0,ie=this._rings.length;C<ie;C++)for(Ve=this._rings[C],I=0,ve=Ve.length;I<ve-1;I++)Me=fo(Ve[I],Ve[I+1],c,I,!0),Me&&(v[q]=v[q]||[],v[q].push(Me[0]),(Me[1]!==Ve[I+1]||I===ve-2)&&(v[q].push(Me[1]),q++))}},_simplifyPoints:function(){for(var c=this._parts,v=this.options.smoothFactor,C=0,I=c.length;C<I;C++)c[C]=zs(c[C],v)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(c,v){var C,I,q,ie,ve,Me,Ve=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(C=0,ie=this._parts.length;C<ie;C++)for(Me=this._parts[C],I=0,ve=Me.length,q=ve-1;I<ve;q=I++)if(!(!v&&I===0)&&Fi(c,Me[q],Me[I])<=Ve)return!0;return!1}});function Mc(c,v){return new _a(c,v)}_a._flat=ir;var ia=_a.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Li(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(c){var v=_a.prototype._convertLatLngs.call(this,c),C=v.length;return C>=2&&v[0]instanceof At&&v[0].equals(v[C-1])&&v.pop(),v},_setLatLngs:function(c){_a.prototype._setLatLngs.call(this,c),Cr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Cr(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var c=this._renderer._bounds,v=this.options.weight,C=new ut(v,v);if(c=new Kt(c.min.subtract(C),c.max.add(C)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(c))){if(this.options.noClip){this._parts=this._rings;return}for(var I=0,q=this._rings.length,ie;I<q;I++)ie=Fn(this._rings[I],c,!0),ie.length&&this._parts.push(ie)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(c){var v=!1,C,I,q,ie,ve,Me,Ve,Qe;if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(ie=0,Ve=this._parts.length;ie<Ve;ie++)for(C=this._parts[ie],ve=0,Qe=C.length,Me=Qe-1;ve<Qe;Me=ve++)I=C[ve],q=C[Me],I.y>c.y!=q.y>c.y&&c.x<(q.x-I.x)*(c.y-I.y)/(q.y-I.y)+I.x&&(v=!v);return v||_a.prototype._containsPoint.call(this,c,!0)}});function Ic(c,v){return new ia(c,v)}var Nn=jn.extend({initialize:function(c,v){te(this,v),this._layers={},c&&this.addData(c)},addData:function(c){var v=ye(c)?c:c.features,C,I,q;if(v){for(C=0,I=v.length;C<I;C++)q=v[C],(q.geometries||q.geometry||q.features||q.coordinates)&&this.addData(q);return this}var ie=this.options;if(ie.filter&&!ie.filter(c))return this;var ve=go(c,ie);return ve?(ve.feature=ss(c),ve.defaultOptions=ve.options,this.resetStyle(ve),ie.onEachFeature&&ie.onEachFeature(c,ve),this.addLayer(ve)):this},resetStyle:function(c){return c===void 0?this.eachLayer(this.resetStyle,this):(c.options=p({},c.defaultOptions),this._setLayerStyle(c,this.options.style),this)},setStyle:function(c){return this.eachLayer(function(v){this._setLayerStyle(v,c)},this)},_setLayerStyle:function(c,v){c.setStyle&&(typeof v=="function"&&(v=v(c.feature)),c.setStyle(v))}});function go(c,v){var C=c.type==="Feature"?c.geometry:c,I=C?C.coordinates:null,q=[],ie=v&&v.pointToLayer,ve=v&&v.coordsToLatLng||fn,Me,Ve,Qe,dt;if(!I&&!C)return null;switch(C.type){case"Point":return Me=ve(I),yo(ie,c,Me,v);case"MultiPoint":for(Qe=0,dt=I.length;Qe<dt;Qe++)Me=ve(I[Qe]),q.push(yo(ie,c,Me,v));return new jn(q);case"LineString":case"MultiLineString":return Ve=as(I,C.type==="LineString"?0:1,ve),new _a(Ve,v);case"Polygon":case"MultiPolygon":return Ve=as(I,C.type==="Polygon"?1:2,ve),new ia(Ve,v);case"GeometryCollection":for(Qe=0,dt=C.geometries.length;Qe<dt;Qe++){var It=go({geometry:C.geometries[Qe],type:"Feature",properties:c.properties},v);It&&q.push(It)}return new jn(q);case"FeatureCollection":for(Qe=0,dt=C.features.length;Qe<dt;Qe++){var Qt=go(C.features[Qe],v);Qt&&q.push(Qt)}return new jn(q);default:throw new Error("Invalid GeoJSON object.")}}function yo(c,v,C,I){return c?c(v,C):new ea(C,I&&I.markersInheritOptions&&I)}function fn(c){return new At(c[1],c[0],c[2])}function as(c,v,C){for(var I=[],q=0,ie=c.length,ve;q<ie;q++)ve=v?as(c[q],v-1,C):(C||fn)(c[q]),I.push(ve);return I}function _o(c,v){return c=St(c),c.alt!==void 0?[Y(c.lng,v),Y(c.lat,v),Y(c.alt,v)]:[Y(c.lng,v),Y(c.lat,v)]}function Bs(c,v,C,I){for(var q=[],ie=0,ve=c.length;ie<ve;ie++)q.push(v?Bs(c[ie],Cr(c[ie])?0:v-1,C,I):_o(c[ie],I));return!v&&C&&q.length>0&&q.push(q[0].slice()),q}function Ra(c,v){return c.feature?p({},c.feature,{geometry:v}):ss(v)}function ss(c){return c.type==="Feature"||c.type==="FeatureCollection"?c:{type:"Feature",properties:{},geometry:c}}var va={toGeoJSON:function(c){return Ra(this,{type:"Point",coordinates:_o(this.getLatLng(),c)})}};ea.include(va),Rs.include(va),ya.include(va),_a.include({toGeoJSON:function(c){var v=!Cr(this._latlngs),C=Bs(this._latlngs,v?1:0,!1,c);return Ra(this,{type:(v?"Multi":"")+"LineString",coordinates:C})}}),ia.include({toGeoJSON:function(c){var v=!Cr(this._latlngs),C=v&&!Cr(this._latlngs[0]),I=Bs(this._latlngs,C?2:v?1:0,!0,c);return v||(I=[I]),Ra(this,{type:(C?"Multi":"")+"Polygon",coordinates:I})}}),ns.include({toMultiPoint:function(c){var v=[];return this.eachLayer(function(C){v.push(C.toGeoJSON(c).geometry.coordinates)}),Ra(this,{type:"MultiPoint",coordinates:v})},toGeoJSON:function(c){var v=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(v==="MultiPoint")return this.toMultiPoint(c);var C=v==="GeometryCollection",I=[];return this.eachLayer(function(q){if(q.toGeoJSON){var ie=q.toGeoJSON(c);if(C)I.push(ie.geometry);else{var ve=ss(ie);ve.type==="FeatureCollection"?I.push.apply(I,ve.features):I.push(ve)}}}),C?Ra(this,{geometries:I,type:"GeometryCollection"}):{type:"FeatureCollection",features:I}}});function il(c,v){return new Nn(c,v)}var Ju=il,vo=tn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(c,v,C){this._url=c,this._bounds=hi(v),te(this,C)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Nt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){bi(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(c){return this.options.opacity=c,this._image&&this._updateOpacity(),this},setStyle:function(c){return c.opacity&&this.setOpacity(c.opacity),this},bringToFront:function(){return this._map&&ki(this._image),this},bringToBack:function(){return this._map&&Ja(this._image),this},setUrl:function(c){return this._url=c,this._image&&(this._image.src=c),this},setBounds:function(c){return this._bounds=hi(c),this._map&&this._reset(),this},getEvents:function(){var c={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var c=this._url.tagName==="IMG",v=this._image=c?this._url:li("img");if(Nt(v,"leaflet-image-layer"),this._zoomAnimated&&Nt(v,"leaflet-zoom-animated"),this.options.className&&Nt(v,this.options.className),v.onselectstart=V,v.onmousemove=V,v.onload=f(this.fire,this,"load"),v.onerror=f(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),c){this._url=v.src;return}v.src=this._url,v.alt=this.options.alt},_animateZoom:function(c){var v=this._map.getZoomScale(c.zoom),C=this._map._latLngBoundsToNewLayerBounds(this._bounds,c.zoom,c.center).min;da(this._image,C,v)},_reset:function(){var c=this._image,v=new Kt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),C=v.getSize();Yi(c,v.min),c.style.width=C.x+"px",c.style.height=C.y+"px"},_updateOpacity:function(){Gr(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var c=this.options.errorOverlayUrl;c&&this._url!==c&&(this._url=c,this._image.src=c)},getCenter:function(){return this._bounds.getCenter()}}),ed=function(c,v,C){return new vo(c,v,C)},zc=vo.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var c=this._url.tagName==="VIDEO",v=this._image=c?this._url:li("video");if(Nt(v,"leaflet-image-layer"),this._zoomAnimated&&Nt(v,"leaflet-zoom-animated"),this.options.className&&Nt(v,this.options.className),v.onselectstart=V,v.onmousemove=V,v.onloadeddata=f(this.fire,this,"load"),c){for(var C=v.getElementsByTagName("source"),I=[],q=0;q<C.length;q++)I.push(C[q].src);this._url=C.length>0?I:[v.src];return}ye(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(v.style,"objectFit")&&(v.style.objectFit="fill"),v.autoplay=!!this.options.autoplay,v.loop=!!this.options.loop,v.muted=!!this.options.muted,v.playsInline=!!this.options.playsInline;for(var ie=0;ie<this._url.length;ie++){var ve=li("source");ve.src=this._url[ie],v.appendChild(ve)}}});function Lc(c,v,C){return new zc(c,v,C)}var Dc=vo.extend({_initImage:function(){var c=this._image=this._url;Nt(c,"leaflet-image-layer"),this._zoomAnimated&&Nt(c,"leaflet-zoom-animated"),this.options.className&&Nt(c,this.options.className),c.onselectstart=V,c.onmousemove=V}});function ui(c,v,C){return new Dc(c,v,C)}var mn=tn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(c,v){c&&(c instanceof At||ye(c))?(this._latlng=St(c),te(this,v)):(te(this,c),this._source=v),this.options.content&&(this._content=this.options.content)},openOn:function(c){return c=arguments.length?c:this._source._map,c.hasLayer(this)||c.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(c){return this._map?this.close():(arguments.length?this._source=c:c=this._source,this._prepareOpen(),this.openOn(c._map)),this},onAdd:function(c){this._zoomAnimated=c._zoomAnimated,this._container||this._initLayout(),c._fadeAnimated&&Gr(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),c._fadeAnimated&&Gr(this._container,1),this.bringToFront(),this.options.interactive&&(Nt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(c){c._fadeAnimated?(Gr(this._container,0),this._removeTimeout=setTimeout(f(bi,void 0,this._container),200)):bi(this._container),this.options.interactive&&(Hi(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(c){return this._latlng=St(c),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(c){return this._content=c,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var c={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ki(this._container),this},bringToBack:function(){return this._map&&Ja(this._container),this},_prepareOpen:function(c){var v=this._source;if(!v._map)return!1;if(v instanceof jn){v=null;var C=this._source._layers;for(var I in C)if(C[I]._map){v=C[I];break}if(!v)return!1;this._source=v}if(!c)if(v.getCenter)c=v.getCenter();else if(v.getLatLng)c=v.getLatLng();else if(v.getBounds)c=v.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(c),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var c=this._contentNode,v=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof v=="string")c.innerHTML=v;else{for(;c.hasChildNodes();)c.removeChild(c.firstChild);c.appendChild(v)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var c=this._map.latLngToLayerPoint(this._latlng),v=_t(this.options.offset),C=this._getAnchor();this._zoomAnimated?Yi(this._container,c.add(C)):v=v.add(c).add(C);var I=this._containerBottom=-v.y,q=this._containerLeft=-Math.round(this._containerWidth/2)+v.x;this._container.style.bottom=I+"px",this._container.style.left=q+"px"}},_getAnchor:function(){return[0,0]}});Yt.include({_initOverlay:function(c,v,C,I){var q=v;return q instanceof c||(q=new c(I).setContent(v)),C&&q.setLatLng(C),q}}),tn.include({_initOverlay:function(c,v,C,I){var q=C;return q instanceof c?(te(q,I),q._source=this):(q=v&&!I?v:new c(I,this),q.setContent(C)),q}});var os=mn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(c){return c=arguments.length?c:this._source._map,!c.hasLayer(this)&&c._popup&&c._popup.options.autoClose&&c.removeLayer(c._popup),c._popup=this,mn.prototype.openOn.call(this,c)},onAdd:function(c){mn.prototype.onAdd.call(this,c),c.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ta||this._source.on("preclick",tr))},onRemove:function(c){mn.prototype.onRemove.call(this,c),c.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ta||this._source.off("preclick",tr))},getEvents:function(){var c=mn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(c.preclick=this.close),this.options.keepInView&&(c.moveend=this._adjustPan),c},_initLayout:function(){var c="leaflet-popup",v=this._container=li("div",c+" "+(this.options.className||"")+" leaflet-zoom-animated"),C=this._wrapper=li("div",c+"-content-wrapper",v);if(this._contentNode=li("div",c+"-content",C),Tn(v),za(this._contentNode),vt(v,"contextmenu",tr),this._tipContainer=li("div",c+"-tip-container",v),this._tip=li("div",c+"-tip",this._tipContainer),this.options.closeButton){var I=this._closeButton=li("a",c+"-close-button",v);I.setAttribute("role","button"),I.setAttribute("aria-label","Close popup"),I.href="#close",I.innerHTML='<span aria-hidden="true">&#215;</span>',vt(I,"click",function(q){Jt(q),this.close()},this)}},_updateLayout:function(){var c=this._contentNode,v=c.style;v.width="",v.whiteSpace="nowrap";var C=c.offsetWidth;C=Math.min(C,this.options.maxWidth),C=Math.max(C,this.options.minWidth),v.width=C+1+"px",v.whiteSpace="",v.height="";var I=c.offsetHeight,q=this.options.maxHeight,ie="leaflet-popup-scrolled";q&&I>q?(v.height=q+"px",Nt(c,ie)):Hi(c,ie),this._containerWidth=this._container.offsetWidth},_animateZoom:function(c){var v=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center),C=this._getAnchor();Yi(this._container,v.add(C))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var c=this._map,v=parseInt(Wr(this._container,"marginBottom"),10)||0,C=this._container.offsetHeight+v,I=this._containerWidth,q=new ut(this._containerLeft,-C-this._containerBottom);q._add(es(this._container));var ie=c.layerPointToContainerPoint(q),ve=_t(this.options.autoPanPadding),Me=_t(this.options.autoPanPaddingTopLeft||ve),Ve=_t(this.options.autoPanPaddingBottomRight||ve),Qe=c.getSize(),dt=0,It=0;ie.x+I+Ve.x>Qe.x&&(dt=ie.x+I-Qe.x+Ve.x),ie.x-dt-Me.x<0&&(dt=ie.x-Me.x),ie.y+C+Ve.y>Qe.y&&(It=ie.y+C-Qe.y+Ve.y),ie.y-It-Me.y<0&&(It=ie.y-Me.y),(dt||It)&&(this.options.keepInView&&(this._autopanning=!0),c.fire("autopanstart").panBy([dt,It]))}},_getAnchor:function(){return _t(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),rl=function(c,v){return new os(c,v)};Yt.mergeOptions({closePopupOnClick:!0}),Yt.include({openPopup:function(c,v,C){return this._initOverlay(os,c,v,C).openOn(this),this},closePopup:function(c){return c=arguments.length?c:this._popup,c&&c.close(),this}}),tn.include({bindPopup:function(c,v){return this._popup=this._initOverlay(os,this._popup,c,v),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(c){return this._popup&&(this instanceof jn||(this._popup._source=this),this._popup._prepareOpen(c||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(c){return this._popup&&this._popup.setContent(c),this},getPopup:function(){return this._popup},_openPopup:function(c){if(!(!this._popup||!this._map)){hn(c);var v=c.layer||c.target;if(this._popup._source===v&&!(v instanceof ta)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(c.latlng);return}this._popup._source=v,this.openPopup(c.latlng)}},_movePopup:function(c){this._popup.setLatLng(c.latlng)},_onKeyPress:function(c){c.originalEvent.keyCode===13&&this._openPopup(c)}});var Fs=mn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(c){mn.prototype.onAdd.call(this,c),this.setOpacity(this.options.opacity),c.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(c){mn.prototype.onRemove.call(this,c),c.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var c=mn.prototype.getEvents.call(this);return this.options.permanent||(c.preclick=this.close),c},_initLayout:function(){var c="leaflet-tooltip",v=c+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=li("div",v),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+T(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(c){var v,C,I=this._map,q=this._container,ie=I.latLngToContainerPoint(I.getCenter()),ve=I.layerPointToContainerPoint(c),Me=this.options.direction,Ve=q.offsetWidth,Qe=q.offsetHeight,dt=_t(this.options.offset),It=this._getAnchor();Me==="top"?(v=Ve/2,C=Qe):Me==="bottom"?(v=Ve/2,C=0):Me==="center"?(v=Ve/2,C=Qe/2):Me==="right"?(v=0,C=Qe/2):Me==="left"?(v=Ve,C=Qe/2):ve.x<ie.x?(Me="right",v=0,C=Qe/2):(Me="left",v=Ve+(dt.x+It.x)*2,C=Qe/2),c=c.subtract(_t(v,C,!0)).add(dt).add(It),Hi(q,"leaflet-tooltip-right"),Hi(q,"leaflet-tooltip-left"),Hi(q,"leaflet-tooltip-top"),Hi(q,"leaflet-tooltip-bottom"),Nt(q,"leaflet-tooltip-"+Me),Yi(q,c)},_updatePosition:function(){var c=this._map.latLngToLayerPoint(this._latlng);this._setPosition(c)},setOpacity:function(c){this.options.opacity=c,this._container&&Gr(this._container,c)},_animateZoom:function(c){var v=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center);this._setPosition(v)},_getAnchor:function(){return _t(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ls=function(c,v){return new Fs(c,v)};Yt.include({openTooltip:function(c,v,C){return this._initOverlay(Fs,c,v,C).openOn(this),this},closeTooltip:function(c){return c.close(),this}}),tn.include({bindTooltip:function(c,v){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Fs,this._tooltip,c,v),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(c){if(!(!c&&this._tooltipHandlersAdded)){var v=c?"off":"on",C={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?C.add=this._openTooltip:(C.mouseover=this._openTooltip,C.mouseout=this.closeTooltip,C.click=this._openTooltip,this._map?this._addFocusListeners():C.add=this._addFocusListeners),this._tooltip.options.sticky&&(C.mousemove=this._moveTooltip),this[v](C),this._tooltipHandlersAdded=!c}},openTooltip:function(c){return this._tooltip&&(this instanceof jn||(this._tooltip._source=this),this._tooltip._prepareOpen(c)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(c){return this._tooltip&&this._tooltip.setContent(c),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(c){var v=typeof c.getElement=="function"&&c.getElement();v&&(vt(v,"focus",function(){this._tooltip._source=c,this.openTooltip()},this),vt(v,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(c){var v=typeof c.getElement=="function"&&c.getElement();v&&v.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(c){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var v=this;this._map.once("moveend",function(){v._openOnceFlag=!1,v._openTooltip(c)});return}this._tooltip._source=c.layer||c.target,this.openTooltip(this._tooltip.options.sticky?c.latlng:void 0)}},_moveTooltip:function(c){var v=c.latlng,C,I;this._tooltip.options.sticky&&c.originalEvent&&(C=this._map.mouseEventToContainerPoint(c.originalEvent),I=this._map.containerPointToLayerPoint(C),v=this._map.layerPointToLatLng(I)),this._tooltip.setLatLng(v)}});var js=Oa.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(c){var v=c&&c.tagName==="DIV"?c:document.createElement("div"),C=this.options;if(C.html instanceof Element?(Qa(v),v.appendChild(C.html)):v.innerHTML=C.html!==!1?C.html:"",C.bgPos){var I=_t(C.bgPos);v.style.backgroundPosition=-I.x+"px "+-I.y+"px"}return this._setIconStyles(v,"icon"),v},createShadow:function(){return null}});function Ns(c){return new js(c)}Oa.Default=Os;var Dr=tn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Be.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(c){te(this,c)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(c){c._addZoomLimit(this)},onRemove:function(c){this._removeAllTiles(),bi(this._container),c._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ki(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ja(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(c){return this.options.opacity=c,this._updateOpacity(),this},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var c=this._clampZoom(this._map.getZoom());c!==this._tileZoom&&(this._tileZoom=c,this._updateLevels()),this._update()}return this},getEvents:function(){var c={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=M(this._onMoveEnd,this.options.updateInterval,this)),c.move=this._onMove),this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},createTile:function(){return document.createElement("div")},getTileSize:function(){var c=this.options.tileSize;return c instanceof ut?c:new ut(c,c)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(c){for(var v=this.getPane().children,C=-c(-1/0,1/0),I=0,q=v.length,ie;I<q;I++)ie=v[I].style.zIndex,v[I]!==this._container&&ie&&(C=c(C,+ie));isFinite(C)&&(this.options.zIndex=C+c(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Be.ielt9){Gr(this._container,this.options.opacity);var c=+new Date,v=!1,C=!1;for(var I in this._tiles){var q=this._tiles[I];if(!(!q.current||!q.loaded)){var ie=Math.min(1,(c-q.loaded)/200);Gr(q.el,ie),ie<1?v=!0:(q.active?C=!0:this._onOpaqueTile(q),q.active=!0)}}C&&!this._noPrune&&this._pruneTiles(),v&&(kt(this._fadeFrame),this._fadeFrame=wt(this._updateOpacity,this))}},_onOpaqueTile:V,_initContainer:function(){this._container||(this._container=li("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var c=this._tileZoom,v=this.options.maxZoom;if(c!==void 0){for(var C in this._levels)C=Number(C),this._levels[C].el.children.length||C===c?(this._levels[C].el.style.zIndex=v-Math.abs(c-C),this._onUpdateLevel(C)):(bi(this._levels[C].el),this._removeTilesAtZoom(C),this._onRemoveLevel(C),delete this._levels[C]);var I=this._levels[c],q=this._map;return I||(I=this._levels[c]={},I.el=li("div","leaflet-tile-container leaflet-zoom-animated",this._container),I.el.style.zIndex=v,I.origin=q.project(q.unproject(q.getPixelOrigin()),c).round(),I.zoom=c,this._setZoomTransform(I,q.getCenter(),q.getZoom()),V(I.el.offsetWidth),this._onCreateLevel(I)),this._level=I,I}},_onUpdateLevel:V,_onRemoveLevel:V,_onCreateLevel:V,_pruneTiles:function(){if(this._map){var c,v,C=this._map.getZoom();if(C>this.options.maxZoom||C<this.options.minZoom){this._removeAllTiles();return}for(c in this._tiles)v=this._tiles[c],v.retain=v.current;for(c in this._tiles)if(v=this._tiles[c],v.current&&!v.active){var I=v.coords;this._retainParent(I.x,I.y,I.z,I.z-5)||this._retainChildren(I.x,I.y,I.z,I.z+2)}for(c in this._tiles)this._tiles[c].retain||this._removeTile(c)}},_removeTilesAtZoom:function(c){for(var v in this._tiles)this._tiles[v].coords.z===c&&this._removeTile(v)},_removeAllTiles:function(){for(var c in this._tiles)this._removeTile(c)},_invalidateAll:function(){for(var c in this._levels)bi(this._levels[c].el),this._onRemoveLevel(Number(c)),delete this._levels[c];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(c,v,C,I){var q=Math.floor(c/2),ie=Math.floor(v/2),ve=C-1,Me=new ut(+q,+ie);Me.z=+ve;var Ve=this._tileCoordsToKey(Me),Qe=this._tiles[Ve];return Qe&&Qe.active?(Qe.retain=!0,!0):(Qe&&Qe.loaded&&(Qe.retain=!0),ve>I?this._retainParent(q,ie,ve,I):!1)},_retainChildren:function(c,v,C,I){for(var q=2*c;q<2*c+2;q++)for(var ie=2*v;ie<2*v+2;ie++){var ve=new ut(q,ie);ve.z=C+1;var Me=this._tileCoordsToKey(ve),Ve=this._tiles[Me];if(Ve&&Ve.active){Ve.retain=!0;continue}else Ve&&Ve.loaded&&(Ve.retain=!0);C+1<I&&this._retainChildren(q,ie,C+1,I)}},_resetView:function(c){var v=c&&(c.pinch||c.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),v,v)},_animateZoom:function(c){this._setView(c.center,c.zoom,!0,c.noUpdate)},_clampZoom:function(c){var v=this.options;return v.minNativeZoom!==void 0&&c<v.minNativeZoom?v.minNativeZoom:v.maxNativeZoom!==void 0&&v.maxNativeZoom<c?v.maxNativeZoom:c},_setView:function(c,v,C,I){var q=Math.round(v);this.options.maxZoom!==void 0&&q>this.options.maxZoom||this.options.minZoom!==void 0&&q<this.options.minZoom?q=void 0:q=this._clampZoom(q);var ie=this.options.updateWhenZooming&&q!==this._tileZoom;(!I||ie)&&(this._tileZoom=q,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),q!==void 0&&this._update(c),C||this._pruneTiles(),this._noPrune=!!C),this._setZoomTransforms(c,v)},_setZoomTransforms:function(c,v){for(var C in this._levels)this._setZoomTransform(this._levels[C],c,v)},_setZoomTransform:function(c,v,C){var I=this._map.getZoomScale(C,c.zoom),q=c.origin.multiplyBy(I).subtract(this._map._getNewPixelOrigin(v,C)).round();Be.any3d?da(c.el,q,I):Yi(c.el,q)},_resetGrid:function(){var c=this._map,v=c.options.crs,C=this._tileSize=this.getTileSize(),I=this._tileZoom,q=this._map.getPixelWorldBounds(this._tileZoom);q&&(this._globalTileRange=this._pxBoundsToTileRange(q)),this._wrapX=v.wrapLng&&!this.options.noWrap&&[Math.floor(c.project([0,v.wrapLng[0]],I).x/C.x),Math.ceil(c.project([0,v.wrapLng[1]],I).x/C.y)],this._wrapY=v.wrapLat&&!this.options.noWrap&&[Math.floor(c.project([v.wrapLat[0],0],I).y/C.x),Math.ceil(c.project([v.wrapLat[1],0],I).y/C.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(c){var v=this._map,C=v._animatingZoom?Math.max(v._animateToZoom,v.getZoom()):v.getZoom(),I=v.getZoomScale(C,this._tileZoom),q=v.project(c,this._tileZoom).floor(),ie=v.getSize().divideBy(I*2);return new Kt(q.subtract(ie),q.add(ie))},_update:function(c){var v=this._map;if(v){var C=this._clampZoom(v.getZoom());if(c===void 0&&(c=v.getCenter()),this._tileZoom!==void 0){var I=this._getTiledPixelBounds(c),q=this._pxBoundsToTileRange(I),ie=q.getCenter(),ve=[],Me=this.options.keepBuffer,Ve=new Kt(q.getBottomLeft().subtract([Me,-Me]),q.getTopRight().add([Me,-Me]));if(!(isFinite(q.min.x)&&isFinite(q.min.y)&&isFinite(q.max.x)&&isFinite(q.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Qe in this._tiles){var dt=this._tiles[Qe].coords;(dt.z!==this._tileZoom||!Ve.contains(new ut(dt.x,dt.y)))&&(this._tiles[Qe].current=!1)}if(Math.abs(C-this._tileZoom)>1){this._setView(c,C);return}for(var It=q.min.y;It<=q.max.y;It++)for(var Qt=q.min.x;Qt<=q.max.x;Qt++){var fr=new ut(Qt,It);if(fr.z=this._tileZoom,!!this._isValidTile(fr)){var rr=this._tiles[this._tileCoordsToKey(fr)];rr?rr.current=!0:ve.push(fr)}}if(ve.sort(function(Zr,ra){return Zr.distanceTo(ie)-ra.distanceTo(ie)}),ve.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var gn=document.createDocumentFragment();for(Qt=0;Qt<ve.length;Qt++)this._addTile(ve[Qt],gn);this._level.el.appendChild(gn)}}}},_isValidTile:function(c){var v=this._map.options.crs;if(!v.infinite){var C=this._globalTileRange;if(!v.wrapLng&&(c.x<C.min.x||c.x>C.max.x)||!v.wrapLat&&(c.y<C.min.y||c.y>C.max.y))return!1}if(!this.options.bounds)return!0;var I=this._tileCoordsToBounds(c);return hi(this.options.bounds).overlaps(I)},_keyToBounds:function(c){return this._tileCoordsToBounds(this._keyToTileCoords(c))},_tileCoordsToNwSe:function(c){var v=this._map,C=this.getTileSize(),I=c.scaleBy(C),q=I.add(C),ie=v.unproject(I,c.z),ve=v.unproject(q,c.z);return[ie,ve]},_tileCoordsToBounds:function(c){var v=this._tileCoordsToNwSe(c),C=new Ii(v[0],v[1]);return this.options.noWrap||(C=this._map.wrapLatLngBounds(C)),C},_tileCoordsToKey:function(c){return c.x+":"+c.y+":"+c.z},_keyToTileCoords:function(c){var v=c.split(":"),C=new ut(+v[0],+v[1]);return C.z=+v[2],C},_removeTile:function(c){var v=this._tiles[c];v&&(bi(v.el),delete this._tiles[c],this.fire("tileunload",{tile:v.el,coords:this._keyToTileCoords(c)}))},_initTile:function(c){Nt(c,"leaflet-tile");var v=this.getTileSize();c.style.width=v.x+"px",c.style.height=v.y+"px",c.onselectstart=V,c.onmousemove=V,Be.ielt9&&this.options.opacity<1&&Gr(c,this.options.opacity)},_addTile:function(c,v){var C=this._getTilePos(c),I=this._tileCoordsToKey(c),q=this.createTile(this._wrapCoords(c),f(this._tileReady,this,c));this._initTile(q),this.createTile.length<2&&wt(f(this._tileReady,this,c,null,q)),Yi(q,C),this._tiles[I]={el:q,coords:c,current:!0},v.appendChild(q),this.fire("tileloadstart",{tile:q,coords:c})},_tileReady:function(c,v,C){v&&this.fire("tileerror",{error:v,tile:C,coords:c});var I=this._tileCoordsToKey(c);C=this._tiles[I],C&&(C.loaded=+new Date,this._map._fadeAnimated?(Gr(C.el,0),kt(this._fadeFrame),this._fadeFrame=wt(this._updateOpacity,this)):(C.active=!0,this._pruneTiles()),v||(Nt(C.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:C.el,coords:c})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Be.ielt9||!this._map._fadeAnimated?wt(this._pruneTiles,this):setTimeout(f(this._pruneTiles,this),250)))},_getTilePos:function(c){return c.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(c){var v=new ut(this._wrapX?R(c.x,this._wrapX):c.x,this._wrapY?R(c.y,this._wrapY):c.y);return v.z=c.z,v},_pxBoundsToTileRange:function(c){var v=this.getTileSize();return new Kt(c.min.unscaleBy(v).floor(),c.max.unscaleBy(v).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var c in this._tiles)if(!this._tiles[c].loaded)return!1;return!0}});function Oc(c){return new Dr(c)}var cs=Dr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(c,v){this._url=c,v=te(this,v),v.detectRetina&&Be.retina&&v.maxZoom>0?(v.tileSize=Math.floor(v.tileSize/2),v.zoomReverse?(v.zoomOffset--,v.minZoom=Math.min(v.maxZoom,v.minZoom+1)):(v.zoomOffset++,v.maxZoom=Math.max(v.minZoom,v.maxZoom-1)),v.minZoom=Math.max(0,v.minZoom)):v.zoomReverse?v.minZoom=Math.min(v.maxZoom,v.minZoom):v.maxZoom=Math.max(v.minZoom,v.maxZoom),typeof v.subdomains=="string"&&(v.subdomains=v.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(c,v){return this._url===c&&v===void 0&&(v=!0),this._url=c,v||this.redraw(),this},createTile:function(c,v){var C=document.createElement("img");return vt(C,"load",f(this._tileOnLoad,this,v,C)),vt(C,"error",f(this._tileOnError,this,v,C)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(C.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(C.referrerPolicy=this.options.referrerPolicy),C.alt="",C.src=this.getTileUrl(c),C},getTileUrl:function(c){var v={r:Be.retina?"@2x":"",s:this._getSubdomain(c),x:c.x,y:c.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var C=this._globalTileRange.max.y-c.y;this.options.tms&&(v.y=C),v["-y"]=C}return je(this._url,p(v,this.options))},_tileOnLoad:function(c,v){Be.ielt9?setTimeout(f(c,this,null,v),0):c(null,v)},_tileOnError:function(c,v,C){var I=this.options.errorTileUrl;I&&v.getAttribute("src")!==I&&(v.src=I),c(C,v)},_onTileRemove:function(c){c.tile.onload=null},_getZoomForUrl:function(){var c=this._tileZoom,v=this.options.maxZoom,C=this.options.zoomReverse,I=this.options.zoomOffset;return C&&(c=v-c),c+I},_getSubdomain:function(c){var v=Math.abs(c.x+c.y)%this.options.subdomains.length;return this.options.subdomains[v]},_abortLoading:function(){var c,v;for(c in this._tiles)if(this._tiles[c].coords.z!==this._tileZoom&&(v=this._tiles[c].el,v.onload=V,v.onerror=V,!v.complete)){v.src=Ye;var C=this._tiles[c].coords;bi(v),delete this._tiles[c],this.fire("tileabort",{tile:v,coords:C})}},_removeTile:function(c){var v=this._tiles[c];if(v)return v.el.setAttribute("src",Ye),Dr.prototype._removeTile.call(this,c)},_tileReady:function(c,v,C){if(!(!this._map||C&&C.getAttribute("src")===Ye))return Dr.prototype._tileReady.call(this,c,v,C)}});function nl(c,v){return new cs(c,v)}var Ba=cs.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(c,v){this._url=c;var C=p({},this.defaultWmsParams);for(var I in v)I in this.options||(C[I]=v[I]);v=te(this,v);var q=v.detectRetina&&Be.retina?2:1,ie=this.getTileSize();C.width=ie.x*q,C.height=ie.y*q,this.wmsParams=C},onAdd:function(c){this._crs=this.options.crs||c.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var v=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[v]=this._crs.code,cs.prototype.onAdd.call(this,c)},getTileUrl:function(c){var v=this._tileCoordsToNwSe(c),C=this._crs,I=Mi(C.project(v[0]),C.project(v[1])),q=I.min,ie=I.max,ve=(this._wmsVersion>=1.3&&this._crs===Cc?[q.y,q.x,ie.y,ie.x]:[q.x,q.y,ie.x,ie.y]).join(","),Me=cs.prototype.getTileUrl.call(this,c);return Me+H(this.wmsParams,Me,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ve},setParams:function(c,v){return p(this.wmsParams,c),v||this.redraw(),this}});function al(c,v){return new Ba(c,v)}cs.WMS=Ba,nl.wms=al;var kn=tn.extend({options:{padding:.1},initialize:function(c){te(this,c),T(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Nt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var c={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(c.zoomanim=this._onAnimZoom),c},_onAnimZoom:function(c){this._updateTransform(c.center,c.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(c,v){var C=this._map.getZoomScale(v,this._zoom),I=this._map.getSize().multiplyBy(.5+this.options.padding),q=this._map.project(this._center,v),ie=I.multiplyBy(-C).add(q).subtract(this._map._getNewPixelOrigin(c,v));Be.any3d?da(this._container,ie,C):Yi(this._container,ie)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var c in this._layers)this._layers[c]._reset()},_onZoomEnd:function(){for(var c in this._layers)this._layers[c]._project()},_updatePaths:function(){for(var c in this._layers)this._layers[c]._update()},_update:function(){var c=this.options.padding,v=this._map.getSize(),C=this._map.containerPointToLayerPoint(v.multiplyBy(-c)).round();this._bounds=new Kt(C,C.add(v.multiplyBy(1+c*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),qs=kn.extend({options:{tolerance:0},getEvents:function(){var c=kn.prototype.getEvents.call(this);return c.viewprereset=this._onViewPreReset,c},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){kn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var c=this._container=document.createElement("canvas");vt(c,"mousemove",this._onMouseMove,this),vt(c,"click dblclick mousedown mouseup contextmenu",this._onClick,this),vt(c,"mouseout",this._handleMouseOut,this),c._leaflet_disable_events=!0,this._ctx=c.getContext("2d")},_destroyContainer:function(){kt(this._redrawRequest),delete this._ctx,bi(this._container),ct(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var c;this._redrawBounds=null;for(var v in this._layers)c=this._layers[v],c._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){kn.prototype._update.call(this);var c=this._bounds,v=this._container,C=c.getSize(),I=Be.retina?2:1;Yi(v,c.min),v.width=I*C.x,v.height=I*C.y,v.style.width=C.x+"px",v.style.height=C.y+"px",Be.retina&&this._ctx.scale(2,2),this._ctx.translate(-c.min.x,-c.min.y),this.fire("update")}},_reset:function(){kn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(c){this._updateDashArray(c),this._layers[T(c)]=c;var v=c._order={layer:c,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=v),this._drawLast=v,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(c){this._requestRedraw(c)},_removePath:function(c){var v=c._order,C=v.next,I=v.prev;C?C.prev=I:this._drawLast=I,I?I.next=C:this._drawFirst=C,delete c._order,delete this._layers[T(c)],this._requestRedraw(c)},_updatePath:function(c){this._extendRedrawBounds(c),c._project(),c._update(),this._requestRedraw(c)},_updateStyle:function(c){this._updateDashArray(c),this._requestRedraw(c)},_updateDashArray:function(c){if(typeof c.options.dashArray=="string"){var v=c.options.dashArray.split(/[, ]+/),C=[],I,q;for(q=0;q<v.length;q++){if(I=Number(v[q]),isNaN(I))return;C.push(I)}c.options._dashArray=C}else c.options._dashArray=c.options.dashArray},_requestRedraw:function(c){this._map&&(this._extendRedrawBounds(c),this._redrawRequest=this._redrawRequest||wt(this._redraw,this))},_extendRedrawBounds:function(c){if(c._pxBounds){var v=(c.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Kt,this._redrawBounds.extend(c._pxBounds.min.subtract([v,v])),this._redrawBounds.extend(c._pxBounds.max.add([v,v]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var c=this._redrawBounds;if(c){var v=c.getSize();this._ctx.clearRect(c.min.x,c.min.y,v.x,v.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var c,v=this._redrawBounds;if(this._ctx.save(),v){var C=v.getSize();this._ctx.beginPath(),this._ctx.rect(v.min.x,v.min.y,C.x,C.y),this._ctx.clip()}this._drawing=!0;for(var I=this._drawFirst;I;I=I.next)c=I.layer,(!v||c._pxBounds&&c._pxBounds.intersects(v))&&c._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(c,v){if(this._drawing){var C,I,q,ie,ve=c._parts,Me=ve.length,Ve=this._ctx;if(Me){for(Ve.beginPath(),C=0;C<Me;C++){for(I=0,q=ve[C].length;I<q;I++)ie=ve[C][I],Ve[I?"lineTo":"moveTo"](ie.x,ie.y);v&&Ve.closePath()}this._fillStroke(Ve,c)}}},_updateCircle:function(c){if(!(!this._drawing||c._empty())){var v=c._point,C=this._ctx,I=Math.max(Math.round(c._radius),1),q=(Math.max(Math.round(c._radiusY),1)||I)/I;q!==1&&(C.save(),C.scale(1,q)),C.beginPath(),C.arc(v.x,v.y/q,I,0,Math.PI*2,!1),q!==1&&C.restore(),this._fillStroke(C,c)}},_fillStroke:function(c,v){var C=v.options;C.fill&&(c.globalAlpha=C.fillOpacity,c.fillStyle=C.fillColor||C.color,c.fill(C.fillRule||"evenodd")),C.stroke&&C.weight!==0&&(c.setLineDash&&c.setLineDash(v.options&&v.options._dashArray||[]),c.globalAlpha=C.opacity,c.lineWidth=C.weight,c.strokeStyle=C.color,c.lineCap=C.lineCap,c.lineJoin=C.lineJoin,c.stroke())},_onClick:function(c){for(var v=this._map.mouseEventToLayerPoint(c),C,I,q=this._drawFirst;q;q=q.next)C=q.layer,C.options.interactive&&C._containsPoint(v)&&(!(c.type==="click"||c.type==="preclick")||!this._map._draggableMoved(C))&&(I=C);this._fireEvent(I?[I]:!1,c)},_onMouseMove:function(c){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var v=this._map.mouseEventToLayerPoint(c);this._handleMouseHover(c,v)}},_handleMouseOut:function(c){var v=this._hoveredLayer;v&&(Hi(this._container,"leaflet-interactive"),this._fireEvent([v],c,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(c,v){if(!this._mouseHoverThrottled){for(var C,I,q=this._drawFirst;q;q=q.next)C=q.layer,C.options.interactive&&C._containsPoint(v)&&(I=C);I!==this._hoveredLayer&&(this._handleMouseOut(c),I&&(Nt(this._container,"leaflet-interactive"),this._fireEvent([I],c,"mouseover"),this._hoveredLayer=I)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,c),this._mouseHoverThrottled=!0,setTimeout(f(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(c,v,C){this._map._fireDOMEvent(v,C||v.type,c)},_bringToFront:function(c){var v=c._order;if(v){var C=v.next,I=v.prev;if(C)C.prev=I;else return;I?I.next=C:C&&(this._drawFirst=C),v.prev=this._drawLast,this._drawLast.next=v,v.next=null,this._drawLast=v,this._requestRedraw(c)}},_bringToBack:function(c){var v=c._order;if(v){var C=v.next,I=v.prev;if(I)I.next=C;else return;C?C.prev=I:I&&(this._drawLast=I),v.prev=null,v.next=this._drawFirst,this._drawFirst.prev=v,this._drawFirst=v,this._requestRedraw(c)}}});function bo(c){return Be.canvas?new qs(c):null}var Vs=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(c){return document.createElement("<lvml:"+c+' class="lvml">')}}catch(c){}return function(c){return document.createElement("<"+c+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Ws={_initContainer:function(){this._container=li("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(kn.prototype._update.call(this),this.fire("update"))},_initPath:function(c){var v=c._container=Vs("shape");Nt(v,"leaflet-vml-shape "+(this.options.className||"")),v.coordsize="1 1",c._path=Vs("path"),v.appendChild(c._path),this._updateStyle(c),this._layers[T(c)]=c},_addPath:function(c){var v=c._container;this._container.appendChild(v),c.options.interactive&&c.addInteractiveTarget(v)},_removePath:function(c){var v=c._container;bi(v),c.removeInteractiveTarget(v),delete this._layers[T(c)]},_updateStyle:function(c){var v=c._stroke,C=c._fill,I=c.options,q=c._container;q.stroked=!!I.stroke,q.filled=!!I.fill,I.stroke?(v||(v=c._stroke=Vs("stroke")),q.appendChild(v),v.weight=I.weight+"px",v.color=I.color,v.opacity=I.opacity,I.dashArray?v.dashStyle=ye(I.dashArray)?I.dashArray.join(" "):I.dashArray.replace(/( *, *)/g," "):v.dashStyle="",v.endcap=I.lineCap.replace("butt","flat"),v.joinstyle=I.lineJoin):v&&(q.removeChild(v),c._stroke=null),I.fill?(C||(C=c._fill=Vs("fill")),q.appendChild(C),C.color=I.fillColor||I.color,C.opacity=I.fillOpacity):C&&(q.removeChild(C),c._fill=null)},_updateCircle:function(c){var v=c._point.round(),C=Math.round(c._radius),I=Math.round(c._radiusY||C);this._setPath(c,c._empty()?"M0 0":"AL "+v.x+","+v.y+" "+C+","+I+" 0,"+65535*360)},_setPath:function(c,v){c._path.v=v},_bringToFront:function(c){ki(c._container)},_bringToBack:function(c){Ja(c._container)}},ba=Be.vml?Vs:gr,Gs=kn.extend({_initContainer:function(){this._container=ba("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ba("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){bi(this._container),ct(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){kn.prototype._update.call(this);var c=this._bounds,v=c.getSize(),C=this._container;(!this._svgSize||!this._svgSize.equals(v))&&(this._svgSize=v,C.setAttribute("width",v.x),C.setAttribute("height",v.y)),Yi(C,c.min),C.setAttribute("viewBox",[c.min.x,c.min.y,v.x,v.y].join(" ")),this.fire("update")}},_initPath:function(c){var v=c._path=ba("path");c.options.className&&Nt(v,c.options.className),c.options.interactive&&Nt(v,"leaflet-interactive"),this._updateStyle(c),this._layers[T(c)]=c},_addPath:function(c){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(c._path),c.addInteractiveTarget(c._path)},_removePath:function(c){bi(c._path),c.removeInteractiveTarget(c._path),delete this._layers[T(c)]},_updatePath:function(c){c._project(),c._update()},_updateStyle:function(c){var v=c._path,C=c.options;v&&(C.stroke?(v.setAttribute("stroke",C.color),v.setAttribute("stroke-opacity",C.opacity),v.setAttribute("stroke-width",C.weight),v.setAttribute("stroke-linecap",C.lineCap),v.setAttribute("stroke-linejoin",C.lineJoin),C.dashArray?v.setAttribute("stroke-dasharray",C.dashArray):v.removeAttribute("stroke-dasharray"),C.dashOffset?v.setAttribute("stroke-dashoffset",C.dashOffset):v.removeAttribute("stroke-dashoffset")):v.setAttribute("stroke","none"),C.fill?(v.setAttribute("fill",C.fillColor||C.color),v.setAttribute("fill-opacity",C.fillOpacity),v.setAttribute("fill-rule",C.fillRule||"evenodd")):v.setAttribute("fill","none"))},_updatePoly:function(c,v){this._setPath(c,Ln(c._parts,v))},_updateCircle:function(c){var v=c._point,C=Math.max(Math.round(c._radius),1),I=Math.max(Math.round(c._radiusY),1)||C,q="a"+C+","+I+" 0 1,0 ",ie=c._empty()?"M0 0":"M"+(v.x-C)+","+v.y+q+C*2+",0 "+q+-C*2+",0 ";this._setPath(c,ie)},_setPath:function(c,v){c._path.setAttribute("d",v)},_bringToFront:function(c){ki(c._path)},_bringToBack:function(c){Ja(c._path)}});Be.vml&&Gs.include(Ws);function sl(c){return Be.svg||Be.vml?new Gs(c):null}Yt.include({getRenderer:function(c){var v=c.options.renderer||this._getPaneRenderer(c.options.pane)||this.options.renderer||this._renderer;return v||(v=this._renderer=this._createRenderer()),this.hasLayer(v)||this.addLayer(v),v},_getPaneRenderer:function(c){if(c==="overlayPane"||c===void 0)return!1;var v=this._paneRenderers[c];return v===void 0&&(v=this._createRenderer({pane:c}),this._paneRenderers[c]=v),v},_createRenderer:function(c){return this.options.preferCanvas&&bo(c)||sl(c)}});var $t=ia.extend({initialize:function(c,v){ia.prototype.initialize.call(this,this._boundsToLatLngs(c),v)},setBounds:function(c){return this.setLatLngs(this._boundsToLatLngs(c))},_boundsToLatLngs:function(c){return c=hi(c),[c.getSouthWest(),c.getNorthWest(),c.getNorthEast(),c.getSouthEast()]}});function ol(c,v){return new $t(c,v)}Gs.create=ba,Gs.pointsToPath=Ln,Nn.geometryToLayer=go,Nn.coordsToLatLng=fn,Nn.coordsToLatLngs=as,Nn.latLngToCoords=_o,Nn.latLngsToCoords=Bs,Nn.getFeature=Ra,Nn.asFeature=ss,Yt.mergeOptions({boxZoom:!0});var Rc=Cn.extend({initialize:function(c){this._map=c,this._container=c._container,this._pane=c._panes.overlayPane,this._resetStateTimeout=0,c.on("unload",this._destroy,this)},addHooks:function(){vt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ct(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){bi(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(c){if(!c.shiftKey||c.which!==1&&c.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ha(),lo(),this._startPoint=this._map.mouseEventToContainerPoint(c),vt(document,{contextmenu:hn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(c){this._moved||(this._moved=!0,this._box=li("div","leaflet-zoom-box",this._container),Nt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(c);var v=new Kt(this._point,this._startPoint),C=v.getSize();Yi(this._box,v.min),this._box.style.width=C.x+"px",this._box.style.height=C.y+"px"},_finish:function(){this._moved&&(bi(this._box),Hi(this._container,"leaflet-crosshair")),Ma(),ts(),ct(document,{contextmenu:hn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(c){if(!(c.which!==1&&c.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(f(this._resetState,this),0);var v=new Ii(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(v).fire("boxzoomend",{boxZoomBounds:v})}},_onKeyDown:function(c){c.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Yt.addInitHook("addHandler","boxZoom",Rc),Yt.mergeOptions({doubleClickZoom:!0});var Ul=Cn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(c){var v=this._map,C=v.getZoom(),I=v.options.zoomDelta,q=c.originalEvent.shiftKey?C-I:C+I;v.options.doubleClickZoom==="center"?v.setZoom(q):v.setZoomAround(c.containerPoint,q)}});Yt.addInitHook("addHandler","doubleClickZoom",Ul),Yt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Us=Cn.extend({addHooks:function(){if(!this._draggable){var c=this._map;this._draggable=new Xi(c._mapPane,c._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),c.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),c.on("zoomend",this._onZoomEnd,this),c.whenReady(this._onZoomEnd,this))}Nt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Hi(this._map._container,"leaflet-grab"),Hi(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var c=this._map;if(c._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var v=hi(this._map.options.maxBounds);this._offsetLimit=Mi(this._map.latLngToContainerPoint(v.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(v.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;c.fire("movestart").fire("dragstart"),c.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(c){if(this._map.options.inertia){var v=this._lastTime=+new Date,C=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(C),this._times.push(v),this._prunePositions(v)}this._map.fire("move",c).fire("drag",c)},_prunePositions:function(c){for(;this._positions.length>1&&c-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var c=this._map.getSize().divideBy(2),v=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=v.subtract(c).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(c,v){return c-(c-v)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var c=this._draggable._newPos.subtract(this._draggable._startPos),v=this._offsetLimit;c.x<v.min.x&&(c.x=this._viscousLimit(c.x,v.min.x)),c.y<v.min.y&&(c.y=this._viscousLimit(c.y,v.min.y)),c.x>v.max.x&&(c.x=this._viscousLimit(c.x,v.max.x)),c.y>v.max.y&&(c.y=this._viscousLimit(c.y,v.max.y)),this._draggable._newPos=this._draggable._startPos.add(c)}},_onPreDragWrap:function(){var c=this._worldWidth,v=Math.round(c/2),C=this._initialWorldOffset,I=this._draggable._newPos.x,q=(I-v+C)%c+v-C,ie=(I+v+C)%c-v-C,ve=Math.abs(q+C)<Math.abs(ie+C)?q:ie;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ve},_onDragEnd:function(c){var v=this._map,C=v.options,I=!C.inertia||c.noInertia||this._times.length<2;if(v.fire("dragend",c),I)v.fire("moveend");else{this._prunePositions(+new Date);var q=this._lastPos.subtract(this._positions[0]),ie=(this._lastTime-this._times[0])/1e3,ve=C.easeLinearity,Me=q.multiplyBy(ve/ie),Ve=Me.distanceTo([0,0]),Qe=Math.min(C.inertiaMaxSpeed,Ve),dt=Me.multiplyBy(Qe/Ve),It=Qe/(C.inertiaDeceleration*ve),Qt=dt.multiplyBy(-It/2).round();!Qt.x&&!Qt.y?v.fire("moveend"):(Qt=v._limitOffset(Qt,v.options.maxBounds),wt(function(){v.panBy(Qt,{duration:It,easeLinearity:ve,noMoveStart:!0,animate:!0})}))}}});Yt.addInitHook("addHandler","dragging",Us),Yt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Bc=Cn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(c){this._map=c,this._setPanDelta(c.options.keyboardPanDelta),this._setZoomDelta(c.options.zoomDelta)},addHooks:function(){var c=this._map._container;c.tabIndex<=0&&(c.tabIndex="0"),vt(c,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ct(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var c=document.body,v=document.documentElement,C=c.scrollTop||v.scrollTop,I=c.scrollLeft||v.scrollLeft;this._map._container.focus(),window.scrollTo(I,C)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(c){var v=this._panKeys={},C=this.keyCodes,I,q;for(I=0,q=C.left.length;I<q;I++)v[C.left[I]]=[-1*c,0];for(I=0,q=C.right.length;I<q;I++)v[C.right[I]]=[c,0];for(I=0,q=C.down.length;I<q;I++)v[C.down[I]]=[0,c];for(I=0,q=C.up.length;I<q;I++)v[C.up[I]]=[0,-1*c]},_setZoomDelta:function(c){var v=this._zoomKeys={},C=this.keyCodes,I,q;for(I=0,q=C.zoomIn.length;I<q;I++)v[C.zoomIn[I]]=c;for(I=0,q=C.zoomOut.length;I<q;I++)v[C.zoomOut[I]]=-c},_addHooks:function(){vt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ct(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(c){if(!(c.altKey||c.ctrlKey||c.metaKey)){var v=c.keyCode,C=this._map,I;if(v in this._panKeys){if(!C._panAnim||!C._panAnim._inProgress)if(I=this._panKeys[v],c.shiftKey&&(I=_t(I).multiplyBy(3)),C.options.maxBounds&&(I=C._limitOffset(_t(I),C.options.maxBounds)),C.options.worldCopyJump){var q=C.wrapLatLng(C.unproject(C.project(C.getCenter()).add(I)));C.panTo(q)}else C.panBy(I)}else if(v in this._zoomKeys)C.setZoom(C.getZoom()+(c.shiftKey?3:1)*this._zoomKeys[v]);else if(v===27&&C._popup&&C._popup.options.closeOnEscapeKey)C.closePopup();else return;hn(c)}}});Yt.addInitHook("addHandler","keyboard",Bc),Yt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Fc=Cn.extend({addHooks:function(){vt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ct(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(c){var v=La(c),C=this._map.options.wheelDebounceTime;this._delta+=v,this._lastMousePos=this._map.mouseEventToContainerPoint(c),this._startTime||(this._startTime=+new Date);var I=Math.max(C-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f(this._performZoom,this),I),hn(c)},_performZoom:function(){var c=this._map,v=c.getZoom(),C=this._map.options.zoomSnap||0;c._stop();var I=this._delta/(this._map.options.wheelPxPerZoomLevel*4),q=4*Math.log(2/(1+Math.exp(-Math.abs(I))))/Math.LN2,ie=C?Math.ceil(q/C)*C:q,ve=c._limitZoom(v+(this._delta>0?ie:-ie))-v;this._delta=0,this._startTime=null,ve&&(c.options.scrollWheelZoom==="center"?c.setZoom(v+ve):c.setZoomAround(this._lastMousePos,v+ve))}});Yt.addInitHook("addHandler","scrollWheelZoom",Fc);var jc=600;Yt.mergeOptions({tapHold:Be.touchNative&&Be.safari&&Be.mobile,tapTolerance:15});var Nc=Cn.extend({addHooks:function(){vt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ct(this._map._container,"touchstart",this._onDown,this)},_onDown:function(c){if(clearTimeout(this._holdTimeout),c.touches.length===1){var v=c.touches[0];this._startPos=this._newPos=new ut(v.clientX,v.clientY),this._holdTimeout=setTimeout(f(function(){this._cancel(),this._isTapValid()&&(vt(document,"touchend",Jt),vt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",v))},this),jc),vt(document,"touchend touchcancel contextmenu",this._cancel,this),vt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function c(){ct(document,"touchend",Jt),ct(document,"touchend touchcancel",c)},_cancel:function(){clearTimeout(this._holdTimeout),ct(document,"touchend touchcancel contextmenu",this._cancel,this),ct(document,"touchmove",this._onMove,this)},_onMove:function(c){var v=c.touches[0];this._newPos=new ut(v.clientX,v.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(c,v){var C=new MouseEvent(c,{bubbles:!0,cancelable:!0,view:window,screenX:v.screenX,screenY:v.screenY,clientX:v.clientX,clientY:v.clientY});C._simulated=!0,v.target.dispatchEvent(C)}});Yt.addInitHook("addHandler","tapHold",Nc),Yt.mergeOptions({touchZoom:Be.touch,bounceAtZoomLimits:!0});var ll=Cn.extend({addHooks:function(){Nt(this._map._container,"leaflet-touch-zoom"),vt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Hi(this._map._container,"leaflet-touch-zoom"),ct(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(c){var v=this._map;if(!(!c.touches||c.touches.length!==2||v._animatingZoom||this._zooming)){var C=v.mouseEventToContainerPoint(c.touches[0]),I=v.mouseEventToContainerPoint(c.touches[1]);this._centerPoint=v.getSize()._divideBy(2),this._startLatLng=v.containerPointToLatLng(this._centerPoint),v.options.touchZoom!=="center"&&(this._pinchStartLatLng=v.containerPointToLatLng(C.add(I)._divideBy(2))),this._startDist=C.distanceTo(I),this._startZoom=v.getZoom(),this._moved=!1,this._zooming=!0,v._stop(),vt(document,"touchmove",this._onTouchMove,this),vt(document,"touchend touchcancel",this._onTouchEnd,this),Jt(c)}},_onTouchMove:function(c){if(!(!c.touches||c.touches.length!==2||!this._zooming)){var v=this._map,C=v.mouseEventToContainerPoint(c.touches[0]),I=v.mouseEventToContainerPoint(c.touches[1]),q=C.distanceTo(I)/this._startDist;if(this._zoom=v.getScaleZoom(q,this._startZoom),!v.options.bounceAtZoomLimits&&(this._zoom<v.getMinZoom()&&q<1||this._zoom>v.getMaxZoom()&&q>1)&&(this._zoom=v._limitZoom(this._zoom)),v.options.touchZoom==="center"){if(this._center=this._startLatLng,q===1)return}else{var ie=C._add(I)._divideBy(2)._subtract(this._centerPoint);if(q===1&&ie.x===0&&ie.y===0)return;this._center=v.unproject(v.project(this._pinchStartLatLng,this._zoom).subtract(ie),this._zoom)}this._moved||(v._moveStart(!0,!1),this._moved=!0),kt(this._animRequest);var ve=f(v._move,v,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=wt(ve,this,!0),Jt(c)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,kt(this._animRequest),ct(document,"touchmove",this._onTouchMove,this),ct(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Yt.addInitHook("addHandler","touchZoom",ll),Yt.BoxZoom=Rc,Yt.DoubleClickZoom=Ul,Yt.Drag=Us,Yt.Keyboard=Bc,Yt.ScrollWheelZoom=Fc,Yt.TapHold=Nc,Yt.TouchZoom=ll,s.Bounds=Kt,s.Browser=Be,s.CRS=sr,s.Canvas=qs,s.Circle=Rs,s.CircleMarker=ya,s.Class=ri,s.Control=Lr,s.DivIcon=js,s.DivOverlay=mn,s.DomEvent=Sc,s.DomUtil=Jr,s.Draggable=Xi,s.Evented=Ut,s.FeatureGroup=jn,s.GeoJSON=Nn,s.GridLayer=Dr,s.Handler=Cn,s.Icon=Oa,s.ImageOverlay=vo,s.LatLng=At,s.LatLngBounds=Ii,s.Layer=tn,s.LayerGroup=ns,s.LineUtil=Ls,s.Map=Yt,s.Marker=ea,s.Mixin=Yu,s.Path=ta,s.Point=ut,s.PolyUtil=Nl,s.Polygon=ia,s.Polyline=_a,s.Popup=os,s.PosAnimation=Qo,s.Projection=Ku,s.Rectangle=$t,s.Renderer=kn,s.SVG=Gs,s.SVGOverlay=Dc,s.TileLayer=cs,s.Tooltip=Fs,s.Transformation=un,s.Util=si,s.VideoOverlay=zc,s.bind=f,s.bounds=Mi,s.canvas=bo,s.circle=Qu,s.circleMarker=Ac,s.control=Zt,s.divIcon=Ns,s.extend=p,s.featureGroup=Wl,s.geoJSON=il,s.geoJson=Ju,s.gridLayer=Oc,s.icon=Pc,s.imageOverlay=ed,s.latLng=St,s.latLngBounds=hi,s.layerGroup=kc,s.map=Pi,s.marker=Ec,s.point=_t,s.polygon=Ic,s.polyline=Mc,s.popup=rl,s.rectangle=ol,s.setOptions=te,s.stamp=T,s.svg=sl,s.svgOverlay=ui,s.tileLayer=nl,s.tooltip=ls,s.transformation=or,s.version=o,s.videoOverlay=Lc;var Zs=window.L;s.noConflict=function(){return window.L=Zs,this},window.L=s}))});var eE=Ee((Zf,JP)=>{(function(s,o){typeof Zf=="object"&&typeof JP!="undefined"?o(Zf):typeof define=="function"&&define.amd?define(["exports"],o):(s=s||self,o((s.Leaflet=s.Leaflet||{},s.Leaflet.markercluster={})))})(Zf,function(s){"use strict";var o=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(d){L.Util.setOptions(this,d),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var f=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,f?this._withAnimation:this._noAnimation),this._markerCluster=f?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(d){if(d instanceof L.LayerGroup)return this.addLayers([d]);if(!d.getLatLng)return this._nonPointGroup.addLayer(d),this.fire("layeradd",{layer:d}),this;if(!this._map)return this._needsClustering.push(d),this.fire("layeradd",{layer:d}),this;if(this.hasLayer(d))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(d,this._maxZoom),this.fire("layeradd",{layer:d}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var f=d,a=this._zoom;if(d.__parent)for(;f.__parent._zoom>=a;)f=f.__parent;return this._currentShownBounds.contains(f.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(d,f):this._animationAddLayerNonAnimated(d,f)),this},removeLayer:function(d){return d instanceof L.LayerGroup?this.removeLayers([d]):d.getLatLng?this._map?d.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(d)),this._removeLayer(d,!0),this.fire("layerremove",{layer:d}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),d.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(d)&&(this._featureGroup.removeLayer(d),d.clusterShow&&d.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,d)&&this.hasLayer(d)&&this._needsRemoving.push({layer:d,latlng:d._latlng}),this.fire("layerremove",{layer:d}),this):(this._nonPointGroup.removeLayer(d),this.fire("layerremove",{layer:d}),this)},addLayers:function(d,f){if(!L.Util.isArray(d))return this.addLayer(d);var a=this._featureGroup,T=this._nonPointGroup,M=this.options.chunkedLoading,R=this.options.chunkInterval,V=this.options.chunkProgress,Y=d.length,re=0,G=!0,te;if(this._map){var H=new Date().getTime(),Se=L.bind(function(){var ye=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();re<Y;re++){if(M&&re%200===0){var Ce=new Date().getTime()-ye;if(Ce>R)break}if(te=d[re],te instanceof L.LayerGroup){G&&(d=d.slice(),G=!1),this._extractNonGroupLayers(te,d),Y=d.length;continue}if(!te.getLatLng){T.addLayer(te),f||this.fire("layeradd",{layer:te});continue}if(!this.hasLayer(te)&&(this._addLayer(te,this._maxZoom),f||this.fire("layeradd",{layer:te}),te.__parent&&te.__parent.getChildCount()===2)){var Ye=te.__parent.getAllChildMarkers(),rt=Ye[0]===te?Ye[1]:Ye[0];a.removeLayer(rt)}}V&&V(re,Y,new Date().getTime()-H),re===Y?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(Se,this.options.chunkDelay)},this);Se()}else for(var je=this._needsClustering;re<Y;re++){if(te=d[re],te instanceof L.LayerGroup){G&&(d=d.slice(),G=!1),this._extractNonGroupLayers(te,d),Y=d.length;continue}if(!te.getLatLng){T.addLayer(te);continue}this.hasLayer(te)||je.push(te)}return this},removeLayers:function(d){var f,a,T=d.length,M=this._featureGroup,R=this._nonPointGroup,V=!0;if(!this._map){for(f=0;f<T;f++){if(a=d[f],a instanceof L.LayerGroup){V&&(d=d.slice(),V=!1),this._extractNonGroupLayers(a,d),T=d.length;continue}this._arraySplice(this._needsClustering,a),R.removeLayer(a),this.hasLayer(a)&&this._needsRemoving.push({layer:a,latlng:a._latlng}),this.fire("layerremove",{layer:a})}return this}if(this._unspiderfy){this._unspiderfy();var Y=d.slice(),re=T;for(f=0;f<re;f++){if(a=Y[f],a instanceof L.LayerGroup){this._extractNonGroupLayers(a,Y),re=Y.length;continue}this._unspiderfyLayer(a)}}for(f=0;f<T;f++){if(a=d[f],a instanceof L.LayerGroup){V&&(d=d.slice(),V=!1),this._extractNonGroupLayers(a,d),T=d.length;continue}if(!a.__parent){R.removeLayer(a),this.fire("layerremove",{layer:a});continue}this._removeLayer(a,!0,!0),this.fire("layerremove",{layer:a}),M.hasLayer(a)&&(M.removeLayer(a),a.clusterShow&&a.clusterShow())}return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(d){d.off(this._childMarkerEventHandlers,this),delete d.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var d=new L.LatLngBounds;this._topClusterLevel&&d.extend(this._topClusterLevel._bounds);for(var f=this._needsClustering.length-1;f>=0;f--)d.extend(this._needsClustering[f].getLatLng());return d.extend(this._nonPointGroup.getBounds()),d},eachLayer:function(d,f){var a=this._needsClustering.slice(),T=this._needsRemoving,M,R,V;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(a),R=a.length-1;R>=0;R--){for(M=!0,V=T.length-1;V>=0;V--)if(T[V].layer===a[R]){M=!1;break}M&&d.call(f,a[R])}this._nonPointGroup.eachLayer(d,f)},getLayers:function(){var d=[];return this.eachLayer(function(f){d.push(f)}),d},getLayer:function(d){var f=null;return d=parseInt(d,10),this.eachLayer(function(a){L.stamp(a)===d&&(f=a)}),f},hasLayer:function(d){if(!d)return!1;var f,a=this._needsClustering;for(f=a.length-1;f>=0;f--)if(a[f]===d)return!0;for(a=this._needsRemoving,f=a.length-1;f>=0;f--)if(a[f].layer===d)return!1;return!!(d.__parent&&d.__parent._group===this)||this._nonPointGroup.hasLayer(d)},zoomToShowLayer:function(d,f){var a=this._map;typeof f!="function"&&(f=function(){});var T=function(){(a.hasLayer(d)||a.hasLayer(d.__parent))&&!this._inZoomAnimation&&(this._map.off("moveend",T,this),this.off("animationend",T,this),a.hasLayer(d)?f():d.__parent._icon&&(this.once("spiderfied",f,this),d.__parent.spiderfy()))};d._icon&&this._map.getBounds().contains(d.getLatLng())?f():d.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",T,this),this._map.panTo(d.getLatLng())):(this._map.on("moveend",T,this),this.on("animationend",T,this),d.__parent.zoomToBounds())},onAdd:function(d){this._map=d;var f,a,T;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(d),this._nonPointGroup.addTo(d),this._gridClusters||this._generateInitialClusters(),this._maxLat=d.options.crs.projection.MAX_LATITUDE,f=0,a=this._needsRemoving.length;f<a;f++)T=this._needsRemoving[f],T.newlatlng=T.layer._latlng,T.layer._latlng=T.latlng;for(f=0,a=this._needsRemoving.length;f<a;f++)T=this._needsRemoving[f],this._removeLayer(T.layer,!0),T.layer._latlng=T.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),a=this._needsClustering,this._needsClustering=[],this.addLayers(a,!0)},onRemove:function(d){d.off("zoomend",this._zoomEnd,this),d.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(d){for(var f=d;f&&!f._icon;)f=f.__parent;return f||null},_arraySplice:function(d,f){for(var a=d.length-1;a>=0;a--)if(d[a]===f)return d.splice(a,1),!0},_removeFromGridUnclustered:function(d,f){for(var a=this._map,T=this._gridUnclustered,M=Math.floor(this._map.getMinZoom());f>=M&&T[f].removeObject(d,a.project(d.getLatLng(),f));f--);},_childMarkerDragStart:function(d){d.target.__dragStart=d.target._latlng},_childMarkerMoved:function(d){if(!this._ignoreMove&&!d.target.__dragStart){var f=d.target._popup&&d.target._popup.isOpen();this._moveChild(d.target,d.oldLatLng,d.latlng),f&&d.target.openPopup()}},_moveChild:function(d,f,a){d._latlng=f,this.removeLayer(d),d._latlng=a,this.addLayer(d)},_childMarkerDragEnd:function(d){var f=d.target.__dragStart;delete d.target.__dragStart,f&&this._moveChild(d.target,f,d.target._latlng)},_removeLayer:function(d,f,a){var T=this._gridClusters,M=this._gridUnclustered,R=this._featureGroup,V=this._map,Y=Math.floor(this._map.getMinZoom());f&&this._removeFromGridUnclustered(d,this._maxZoom);var re=d.__parent,G=re._markers,te;for(this._arraySplice(G,d);re&&(re._childCount--,re._boundsNeedUpdate=!0,!(re._zoom<Y));)f&&re._childCount<=1?(te=re._markers[0]===d?re._markers[1]:re._markers[0],T[re._zoom].removeObject(re,V.project(re._cLatLng,re._zoom)),M[re._zoom].addObject(te,V.project(te.getLatLng(),re._zoom)),this._arraySplice(re.__parent._childClusters,re),re.__parent._markers.push(te),te.__parent=re.__parent,re._icon&&(R.removeLayer(re),a||R.addLayer(te))):re._iconNeedsUpdate=!0,re=re.__parent;delete d.__parent},_isOrIsParent:function(d,f){for(;f;){if(d===f)return!0;f=f.parentNode}return!1},fire:function(d,f,a){if(f&&f.layer instanceof L.MarkerCluster){if(f.originalEvent&&this._isOrIsParent(f.layer._icon,f.originalEvent.relatedTarget))return;d="cluster"+d}L.FeatureGroup.prototype.fire.call(this,d,f,a)},listens:function(d,f){return L.FeatureGroup.prototype.listens.call(this,d,f)||L.FeatureGroup.prototype.listens.call(this,"cluster"+d,f)},_defaultIconCreateFunction:function(d){var f=d.getChildCount(),a=" marker-cluster-";return f<10?a+="small":f<100?a+="medium":a+="large",new L.DivIcon({html:"<div><span>"+f+"</span></div>",className:"marker-cluster"+a,iconSize:new L.Point(40,40)})},_bindEvents:function(){var d=this._map,f=this.options.spiderfyOnMaxZoom,a=this.options.showCoverageOnHover,T=this.options.zoomToBoundsOnClick,M=this.options.spiderfyOnEveryZoom;(f||T||M)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),a&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),d.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(d){var f=d.layer,a=f;if(!(d.type==="clusterkeypress"&&d.originalEvent&&d.originalEvent.keyCode!==13)){for(;a._childClusters.length===1;)a=a._childClusters[0];a._zoom===this._maxZoom&&a._childCount===f._childCount&&this.options.spiderfyOnMaxZoom?f.spiderfy():this.options.zoomToBoundsOnClick&&f.zoomToBounds(),this.options.spiderfyOnEveryZoom&&f.spiderfy(),d.originalEvent&&d.originalEvent.keyCode===13&&this._map._container.focus()}},_showCoverage:function(d){var f=this._map;this._inZoomAnimation||(this._shownPolygon&&f.removeLayer(this._shownPolygon),d.layer.getChildCount()>2&&d.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(d.layer.getConvexHull(),this.options.polygonOptions),f.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var d=this.options.spiderfyOnMaxZoom,f=this.options.showCoverageOnHover,a=this.options.zoomToBoundsOnClick,T=this.options.spiderfyOnEveryZoom,M=this._map;(d||a||T)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),f&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),M.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var d=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,d),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),d),this._currentShownBounds=d}},_generateInitialClusters:function(){var d=Math.ceil(this._map.getMaxZoom()),f=Math.floor(this._map.getMinZoom()),a=this.options.maxClusterRadius,T=a;typeof a!="function"&&(T=function(){return a}),this.options.disableClusteringAtZoom!==null&&(d=this.options.disableClusteringAtZoom-1),this._maxZoom=d,this._gridClusters={},this._gridUnclustered={};for(var M=d;M>=f;M--)this._gridClusters[M]=new L.DistanceGrid(T(M)),this._gridUnclustered[M]=new L.DistanceGrid(T(M));this._topClusterLevel=new this._markerCluster(this,f-1)},_addLayer:function(d,f){var a=this._gridClusters,T=this._gridUnclustered,M=Math.floor(this._map.getMinZoom()),R,V;for(this.options.singleMarkerMode&&this._overrideMarkerIcon(d),d.on(this._childMarkerEventHandlers,this);f>=M;f--){R=this._map.project(d.getLatLng(),f);var Y=a[f].getNearObject(R);if(Y){Y._addChild(d),d.__parent=Y;return}if(Y=T[f].getNearObject(R),Y){var re=Y.__parent;re&&this._removeLayer(Y,!1);var G=new this._markerCluster(this,f,Y,d);a[f].addObject(G,this._map.project(G._cLatLng,f)),Y.__parent=G,d.__parent=G;var te=G;for(V=f-1;V>re._zoom;V--)te=new this._markerCluster(this,V,te),a[V].addObject(te,this._map.project(Y.getLatLng(),V));re._addChild(te),this._removeFromGridUnclustered(Y,f);return}T[f].addObject(d,R)}this._topClusterLevel._addChild(d),d.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(d){d instanceof L.MarkerCluster&&d._iconNeedsUpdate&&d._updateIcon()})},_enqueue:function(d){this._queue.push(d),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var d=0;d<this._queue.length;d++)this._queue[d].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var d=Math.round(this._map._zoom);this._processQueue(),this._zoom<d&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,d)):this._zoom>d?(this._animationStart(),this._animationZoomOut(this._zoom,d)):this._moveEnd()},_getExpandedVisibleBounds:function(){if(this.options.removeOutsideVisibleBounds){if(L.Browser.mobile)return this._checkBoundsMaxLat(this._map.getBounds())}else return this._mapBoundsInfinite;return this._checkBoundsMaxLat(this._map.getBounds().pad(1))},_checkBoundsMaxLat:function(d){var f=this._maxLat;return f!==void 0&&(d.getNorth()>=f&&(d._northEast.lat=1/0),d.getSouth()<=-f&&(d._southWest.lat=-1/0)),d},_animationAddLayerNonAnimated:function(d,f){if(f===d)this._featureGroup.addLayer(d);else if(f._childCount===2){f._addToMap();var a=f.getAllChildMarkers();this._featureGroup.removeLayer(a[0]),this._featureGroup.removeLayer(a[1])}else f._updateIcon()},_extractNonGroupLayers:function(d,f){var a=d.getLayers(),T=0,M;for(f=f||[];T<a.length;T++){if(M=a[T],M instanceof L.LayerGroup){this._extractNonGroupLayers(M,f);continue}f.push(M)}return f},_overrideMarkerIcon:function(d){var f=d.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[d]}});return f}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(d,f){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),d),this._topClusterLevel._recursivelyAddChildrenToMap(null,f,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(d,f){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),d),this._topClusterLevel._recursivelyAddChildrenToMap(null,f,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(d,f){this._animationAddLayerNonAnimated(d,f)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(d,f){var a=this._getExpandedVisibleBounds(),T=this._featureGroup,M=Math.floor(this._map.getMinZoom()),R;this._ignoreMove=!0,this._topClusterLevel._recursively(a,d,M,function(V){var Y=V._latlng,re=V._markers,G;for(a.contains(Y)||(Y=null),V._isSingleParent()&&d+1===f?(T.removeLayer(V),V._recursivelyAddChildrenToMap(null,f,a)):(V.clusterHide(),V._recursivelyAddChildrenToMap(Y,f,a)),R=re.length-1;R>=0;R--)G=re[R],a.contains(G._latlng)||T.removeLayer(G)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(a,f),T.eachLayer(function(V){!(V instanceof L.MarkerCluster)&&V._icon&&V.clusterShow()}),this._topClusterLevel._recursively(a,d,f,function(V){V._recursivelyRestoreChildPositions(f)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(a,d,M,function(V){T.removeLayer(V),V.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(d,f){this._animationZoomOutSingle(this._topClusterLevel,d-1,f),this._topClusterLevel._recursivelyAddChildrenToMap(null,f,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),d,this._getExpandedVisibleBounds())},_animationAddLayer:function(d,f){var a=this,T=this._featureGroup;T.addLayer(d),f!==d&&(f._childCount>2?(f._updateIcon(),this._forceLayout(),this._animationStart(),d._setPos(this._map.latLngToLayerPoint(f.getLatLng())),d.clusterHide(),this._enqueue(function(){T.removeLayer(d),d.clusterShow(),a._animationEnd()})):(this._forceLayout(),a._animationStart(),a._animationZoomOutSingle(f,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(d,f,a){var T=this._getExpandedVisibleBounds(),M=Math.floor(this._map.getMinZoom());d._recursivelyAnimateChildrenInAndAddSelfToMap(T,M,f+1,a);var R=this;this._forceLayout(),d._recursivelyBecomeVisible(T,a),this._enqueue(function(){if(d._childCount===1){var V=d._markers[0];this._ignoreMove=!0,V.setLatLng(V.getLatLng()),this._ignoreMove=!1,V.clusterShow&&V.clusterShow()}else d._recursively(T,a,M,function(Y){Y._recursivelyRemoveChildrenFromMap(T,M,f+1)});R._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(d){return new L.MarkerClusterGroup(d)};var p=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(d,f,a,T){L.Marker.prototype.initialize.call(this,a?a._cLatLng||a.getLatLng():new L.LatLng(0,0),{icon:this,pane:d.options.clusterPane}),this._group=d,this._zoom=f,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,a&&this._addChild(a),T&&this._addChild(T)},getAllChildMarkers:function(d,f){d=d||[];for(var a=this._childClusters.length-1;a>=0;a--)this._childClusters[a].getAllChildMarkers(d,f);for(var T=this._markers.length-1;T>=0;T--)f&&this._markers[T].__dragStart||d.push(this._markers[T]);return d},getChildCount:function(){return this._childCount},zoomToBounds:function(d){for(var f=this._childClusters.slice(),a=this._group._map,T=a.getBoundsZoom(this._bounds),M=this._zoom+1,R=a.getZoom(),V;f.length>0&&T>M;){M++;var Y=[];for(V=0;V<f.length;V++)Y=Y.concat(f[V]._childClusters);f=Y}T>M?this._group._map.setView(this._latlng,M):T<=R?this._group._map.setView(this._latlng,R+1):this._group._map.fitBounds(this._bounds,d)},getBounds:function(){var d=new L.LatLngBounds;return d.extend(this._bounds),d},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(d,f){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(d),d instanceof L.MarkerCluster?(f||(this._childClusters.push(d),d.__parent=this),this._childCount+=d._childCount):(f||this._markers.push(d),this._childCount++),this.__parent&&this.__parent._addChild(d,!0)},_setClusterCenter:function(d){this._cLatLng||(this._cLatLng=d._cLatLng||d._latlng)},_resetBounds:function(){var d=this._bounds;d._southWest&&(d._southWest.lat=1/0,d._southWest.lng=1/0),d._northEast&&(d._northEast.lat=-1/0,d._northEast.lng=-1/0)},_recalculateBounds:function(){var d=this._markers,f=this._childClusters,a=0,T=0,M=this._childCount,R,V,Y,re;if(M!==0){for(this._resetBounds(),R=0;R<d.length;R++)Y=d[R]._latlng,this._bounds.extend(Y),a+=Y.lat,T+=Y.lng;for(R=0;R<f.length;R++)V=f[R],V._boundsNeedUpdate&&V._recalculateBounds(),this._bounds.extend(V._bounds),Y=V._wLatLng,re=V._childCount,a+=Y.lat*re,T+=Y.lng*re;this._latlng=this._wLatLng=new L.LatLng(a/M,T/M),this._boundsNeedUpdate=!1}},_addToMap:function(d){d&&(this._backupLatlng=this._latlng,this.setLatLng(d)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(d,f,a){this._recursively(d,this._group._map.getMinZoom(),a-1,function(T){var M=T._markers,R,V;for(R=M.length-1;R>=0;R--)V=M[R],V._icon&&(V._setPos(f),V.clusterHide())},function(T){var M=T._childClusters,R,V;for(R=M.length-1;R>=0;R--)V=M[R],V._icon&&(V._setPos(f),V.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(d,f,a,T){this._recursively(d,T,f,function(M){M._recursivelyAnimateChildrenIn(d,M._group._map.latLngToLayerPoint(M.getLatLng()).round(),a),M._isSingleParent()&&a-1===T?(M.clusterShow(),M._recursivelyRemoveChildrenFromMap(d,f,a)):M.clusterHide(),M._addToMap()})},_recursivelyBecomeVisible:function(d,f){this._recursively(d,this._group._map.getMinZoom(),f,null,function(a){a.clusterShow()})},_recursivelyAddChildrenToMap:function(d,f,a){this._recursively(a,this._group._map.getMinZoom()-1,f,function(T){if(f!==T._zoom)for(var M=T._markers.length-1;M>=0;M--){var R=T._markers[M];a.contains(R._latlng)&&(d&&(R._backupLatlng=R.getLatLng(),R.setLatLng(d),R.clusterHide&&R.clusterHide()),T._group._featureGroup.addLayer(R))}},function(T){T._addToMap(d)})},_recursivelyRestoreChildPositions:function(d){for(var f=this._markers.length-1;f>=0;f--){var a=this._markers[f];a._backupLatlng&&(a.setLatLng(a._backupLatlng),delete a._backupLatlng)}if(d-1===this._zoom)for(var T=this._childClusters.length-1;T>=0;T--)this._childClusters[T]._restorePosition();else for(var M=this._childClusters.length-1;M>=0;M--)this._childClusters[M]._recursivelyRestoreChildPositions(d)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(d,f,a,T){var M,R;this._recursively(d,f-1,a-1,function(V){for(R=V._markers.length-1;R>=0;R--)M=V._markers[R],(!T||!T.contains(M._latlng))&&(V._group._featureGroup.removeLayer(M),M.clusterShow&&M.clusterShow())},function(V){for(R=V._childClusters.length-1;R>=0;R--)M=V._childClusters[R],(!T||!T.contains(M._latlng))&&(V._group._featureGroup.removeLayer(M),M.clusterShow&&M.clusterShow())})},_recursively:function(d,f,a,T,M){var R=this._childClusters,V=this._zoom,Y,re;if(f<=V&&(T&&T(this),M&&V===a&&M(this)),V<f||V<a)for(Y=R.length-1;Y>=0;Y--)re=R[Y],re._boundsNeedUpdate&&re._recalculateBounds(),d.intersects(re._bounds)&&re._recursively(d,f,a,T,M)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var d=this.options.opacity;return this.setOpacity(0),this.options.opacity=d,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(d){this._cellSize=d,this._sqCellSize=d*d,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(d,f){var a=this._getCoord(f.x),T=this._getCoord(f.y),M=this._grid,R=M[T]=M[T]||{},V=R[a]=R[a]||[],Y=L.Util.stamp(d);this._objectPoint[Y]=f,V.push(d)},updateObject:function(d,f){this.removeObject(d),this.addObject(d,f)},removeObject:function(d,f){var a=this._getCoord(f.x),T=this._getCoord(f.y),M=this._grid,R=M[T]=M[T]||{},V=R[a]=R[a]||[],Y,re;for(delete this._objectPoint[L.Util.stamp(d)],Y=0,re=V.length;Y<re;Y++)if(V[Y]===d)return V.splice(Y,1),re===1&&delete R[a],!0},eachObject:function(d,f){var a,T,M,R,V,Y,re,G=this._grid;for(a in G){V=G[a];for(T in V)for(Y=V[T],M=0,R=Y.length;M<R;M++)re=d.call(f,Y[M]),re&&(M--,R--)}},getNearObject:function(d){var f=this._getCoord(d.x),a=this._getCoord(d.y),T,M,R,V,Y,re,G,te,H=this._objectPoint,Se=this._sqCellSize,je=null;for(T=a-1;T<=a+1;T++)if(V=this._grid[T],V){for(M=f-1;M<=f+1;M++)if(Y=V[M],Y)for(R=0,re=Y.length;R<re;R++)G=Y[R],te=this._sqDist(H[L.Util.stamp(G)],d),(te<Se||te<=Se&&je===null)&&(Se=te,je=G)}return je},_getCoord:function(d){var f=Math.floor(d/this._cellSize);return isFinite(f)?f:d},_sqDist:function(d,f){var a=f.x-d.x,T=f.y-d.y;return a*a+T*T}},(function(){L.QuickHull={getDistant:function(d,f){var a=f[1].lat-f[0].lat,T=f[0].lng-f[1].lng;return T*(d.lat-f[0].lat)+a*(d.lng-f[0].lng)},findMostDistantPointFromBaseLine:function(d,f){var a=0,T=null,M=[],R,V,Y;for(R=f.length-1;R>=0;R--){if(V=f[R],Y=this.getDistant(V,d),Y>0)M.push(V);else continue;Y>a&&(a=Y,T=V)}return{maxPoint:T,newPoints:M}},buildConvexHull:function(d,f){var a=[],T=this.findMostDistantPointFromBaseLine(d,f);return T.maxPoint?(a=a.concat(this.buildConvexHull([d[0],T.maxPoint],T.newPoints)),a=a.concat(this.buildConvexHull([T.maxPoint,d[1]],T.newPoints)),a):[d[0]]},getConvexHull:function(d){var f=!1,a=!1,T=!1,M=!1,R=null,V=null,Y=null,re=null,G=null,te=null,H;for(H=d.length-1;H>=0;H--){var Se=d[H];(f===!1||Se.lat>f)&&(R=Se,f=Se.lat),(a===!1||Se.lat<a)&&(V=Se,a=Se.lat),(T===!1||Se.lng>T)&&(Y=Se,T=Se.lng),(M===!1||Se.lng<M)&&(re=Se,M=Se.lng)}a!==f?(te=V,G=R):(te=re,G=Y);var je=[].concat(this.buildConvexHull([te,G],d),this.buildConvexHull([G,te],d));return je}}})(),L.MarkerCluster.include({getConvexHull:function(){var d=this.getAllChildMarkers(),f=[],a,T;for(T=d.length-1;T>=0;T--)a=d[T].getLatLng(),f.push(a);return L.QuickHull.getConvexHull(f)}}),L.MarkerCluster.include({_2PI:Math.PI*2,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(!(this._group._spiderfied===this||this._group._inZoomAnimation)){var d=this.getAllChildMarkers(null,!0),f=this._group,a=f._map,T=a.latLngToLayerPoint(this._latlng),M;this._group._unspiderfy(),this._group._spiderfied=this,this._group.options.spiderfyShapePositions?M=this._group.options.spiderfyShapePositions(d.length,T):d.length>=this._circleSpiralSwitchover?M=this._generatePointsSpiral(d.length,T):(T.y+=10,M=this._generatePointsCircle(d.length,T)),this._animationSpiderfy(d,M)}},unspiderfy:function(d){this._group._inZoomAnimation||(this._animationUnspiderfy(d),this._group._spiderfied=null)},_generatePointsCircle:function(d,f){var a=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+d),T=a/this._2PI,M=this._2PI/d,R=[],V,Y;for(T=Math.max(T,35),R.length=d,V=0;V<d;V++)Y=this._circleStartAngle+V*M,R[V]=new L.Point(f.x+T*Math.cos(Y),f.y+T*Math.sin(Y))._round();return R},_generatePointsSpiral:function(d,f){var a=this._group.options.spiderfyDistanceMultiplier,T=a*this._spiralLengthStart,M=a*this._spiralFootSeparation,R=a*this._spiralLengthFactor*this._2PI,V=0,Y=[],re;for(Y.length=d,re=d;re>=0;re--)re<d&&(Y[re]=new L.Point(f.x+T*Math.cos(V),f.y+T*Math.sin(V))._round()),V+=M/T+re*5e-4,T+=R/V;return Y},_noanimationUnspiderfy:function(){var d=this._group,f=d._map,a=d._featureGroup,T=this.getAllChildMarkers(null,!0),M,R;for(d._ignoreMove=!0,this.setOpacity(1),R=T.length-1;R>=0;R--)M=T[R],a.removeLayer(M),M._preSpiderfyLatlng&&(M.setLatLng(M._preSpiderfyLatlng),delete M._preSpiderfyLatlng),M.setZIndexOffset&&M.setZIndexOffset(0),M._spiderLeg&&(f.removeLayer(M._spiderLeg),delete M._spiderLeg);d.fire("unspiderfied",{cluster:this,markers:T}),d._ignoreMove=!1,d._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(d,f){var a=this._group,T=a._map,M=a._featureGroup,R=this._group.options.spiderLegPolylineOptions,V,Y,re,G;for(a._ignoreMove=!0,V=0;V<d.length;V++)G=T.layerPointToLatLng(f[V]),Y=d[V],re=new L.Polyline([this._latlng,G],R),T.addLayer(re),Y._spiderLeg=re,Y._preSpiderfyLatlng=Y._latlng,Y.setLatLng(G),Y.setZIndexOffset&&Y.setZIndexOffset(1e6),M.addLayer(Y);this.setOpacity(.3),a._ignoreMove=!1,a.fire("spiderfied",{cluster:this,markers:d})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(d,f){var a=this,T=this._group,M=T._map,R=T._featureGroup,V=this._latlng,Y=M.latLngToLayerPoint(V),re=L.Path.SVG,G=L.extend({},this._group.options.spiderLegPolylineOptions),te=G.opacity,H,Se,je,ye,Ce,Ye;for(te===void 0&&(te=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),re?(G.opacity=0,G.className=(G.className||"")+" leaflet-cluster-spider-leg"):G.opacity=te,T._ignoreMove=!0,H=0;H<d.length;H++)Se=d[H],Ye=M.layerPointToLatLng(f[H]),je=new L.Polyline([V,Ye],G),M.addLayer(je),Se._spiderLeg=je,re&&(ye=je._path,Ce=ye.getTotalLength()+.1,ye.style.strokeDasharray=Ce,ye.style.strokeDashoffset=Ce),Se.setZIndexOffset&&Se.setZIndexOffset(1e6),Se.clusterHide&&Se.clusterHide(),R.addLayer(Se),Se._setPos&&Se._setPos(Y);for(T._forceLayout(),T._animationStart(),H=d.length-1;H>=0;H--)Ye=M.layerPointToLatLng(f[H]),Se=d[H],Se._preSpiderfyLatlng=Se._latlng,Se.setLatLng(Ye),Se.clusterShow&&Se.clusterShow(),re&&(je=Se._spiderLeg,ye=je._path,ye.style.strokeDashoffset=0,je.setStyle({opacity:te}));this.setOpacity(.3),T._ignoreMove=!1,setTimeout(function(){T._animationEnd(),T.fire("spiderfied",{cluster:a,markers:d})},200)},_animationUnspiderfy:function(d){var f=this,a=this._group,T=a._map,M=a._featureGroup,R=d?T._latLngToNewLayerPoint(this._latlng,d.zoom,d.center):T.latLngToLayerPoint(this._latlng),V=this.getAllChildMarkers(null,!0),Y=L.Path.SVG,re,G,te,H,Se,je;for(a._ignoreMove=!0,a._animationStart(),this.setOpacity(1),G=V.length-1;G>=0;G--)re=V[G],re._preSpiderfyLatlng&&(re.closePopup(),re.setLatLng(re._preSpiderfyLatlng),delete re._preSpiderfyLatlng,je=!0,re._setPos&&(re._setPos(R),je=!1),re.clusterHide&&(re.clusterHide(),je=!1),je&&M.removeLayer(re),Y&&(te=re._spiderLeg,H=te._path,Se=H.getTotalLength()+.1,H.style.strokeDashoffset=Se,te.setStyle({opacity:0})));a._ignoreMove=!1,setTimeout(function(){var ye=0;for(G=V.length-1;G>=0;G--)re=V[G],re._spiderLeg&&ye++;for(G=V.length-1;G>=0;G--)re=V[G],re._spiderLeg&&(re.clusterShow&&re.clusterShow(),re.setZIndexOffset&&re.setZIndexOffset(0),ye>1&&M.removeLayer(re),T.removeLayer(re._spiderLeg),delete re._spiderLeg);a._animationEnd(),a.fire("unspiderfied",{cluster:f,markers:V})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(d){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(d))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(d){this._spiderfied&&this._spiderfied.unspiderfy(d)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(d){d._spiderLeg&&(this._featureGroup.removeLayer(d),d.clusterShow&&d.clusterShow(),d.setZIndexOffset&&d.setZIndexOffset(0),this._map.removeLayer(d._spiderLeg),delete d._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(d){return d?d instanceof L.MarkerClusterGroup?d=d._topClusterLevel.getAllChildMarkers():d instanceof L.LayerGroup?d=d._layers:d instanceof L.MarkerCluster?d=d.getAllChildMarkers():d instanceof L.Marker&&(d=[d]):d=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(d),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(d),this},_flagParentsIconsNeedUpdate:function(d){var f,a;for(f in d)for(a=d[f].__parent;a;)a._iconNeedsUpdate=!0,a=a.__parent},_refreshSingleMarkerModeMarkers:function(d){var f,a;for(f in d)a=d[f],this.hasLayer(a)&&a.setIcon(this._overrideMarkerIcon(a))}}),L.Marker.include({refreshIconOptions:function(d,f){var a=this.options.icon;return L.setOptions(a,d),this.setIcon(a),f&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),s.MarkerClusterGroup=o,s.MarkerCluster=p,Object.defineProperty(s,"__esModule",{value:!0})})});var oE=Ee(L_=>{L_.read=function(s,o,p,d,f){var a,T,M=f*8-d-1,R=(1<<M)-1,V=R>>1,Y=-7,re=p?f-1:0,G=p?-1:1,te=s[o+re];for(re+=G,a=te&(1<<-Y)-1,te>>=-Y,Y+=M;Y>0;a=a*256+s[o+re],re+=G,Y-=8);for(T=a&(1<<-Y)-1,a>>=-Y,Y+=d;Y>0;T=T*256+s[o+re],re+=G,Y-=8);if(a===0)a=1-V;else{if(a===R)return T?NaN:(te?-1:1)*(1/0);T=T+Math.pow(2,d),a=a-V}return(te?-1:1)*T*Math.pow(2,a-d)};L_.write=function(s,o,p,d,f,a){var T,M,R,V=a*8-f-1,Y=(1<<V)-1,re=Y>>1,G=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,te=d?0:a-1,H=d?1:-1,Se=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(M=isNaN(o)?1:0,T=Y):(T=Math.floor(Math.log(o)/Math.LN2),o*(R=Math.pow(2,-T))<1&&(T--,R*=2),T+re>=1?o+=G/R:o+=G*Math.pow(2,1-re),o*R>=2&&(T++,R/=2),T+re>=Y?(M=0,T=Y):T+re>=1?(M=(o*R-1)*Math.pow(2,f),T=T+re):(M=o*Math.pow(2,re-1)*Math.pow(2,f),T=0));f>=8;s[p+te]=M&255,te+=H,M/=256,f-=8);for(T=T<<f|M,V+=f;V>0;s[p+te]=T&255,te+=H,T/=256,V-=8);s[p+te-H]|=Se*128}});var pE=Ee((g8,hE)=>{"use strict";hE.exports=zi;var Xf=oE();function zi(s){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(s)?s:new Uint8Array(s||0),this.pos=0,this.type=0,this.length=this.buf.length}zi.Varint=0;zi.Fixed64=1;zi.Bytes=2;zi.Fixed32=5;var D_=65536*65536,lE=1/D_,R3=12,dE=typeof TextDecoder=="undefined"?null:new TextDecoder("utf-8");zi.prototype={destroy:function(){this.buf=null},readFields:function(s,o,p){for(p=p||this.length;this.pos<p;){var d=this.readVarint(),f=d>>3,a=this.pos;this.type=d&7,s(f,o,this),this.pos===a&&this.skip(d)}return o},readMessage:function(s,o){return this.readFields(s,o,this.readVarint()+this.pos)},readFixed32:function(){var s=Kf(this.buf,this.pos);return this.pos+=4,s},readSFixed32:function(){var s=uE(this.buf,this.pos);return this.pos+=4,s},readFixed64:function(){var s=Kf(this.buf,this.pos)+Kf(this.buf,this.pos+4)*D_;return this.pos+=8,s},readSFixed64:function(){var s=Kf(this.buf,this.pos)+uE(this.buf,this.pos+4)*D_;return this.pos+=8,s},readFloat:function(){var s=Xf.read(this.buf,this.pos,!0,23,4);return this.pos+=4,s},readDouble:function(){var s=Xf.read(this.buf,this.pos,!0,52,8);return this.pos+=8,s},readVarint:function(s){var o=this.buf,p,d;return d=o[this.pos++],p=d&127,d<128||(d=o[this.pos++],p|=(d&127)<<7,d<128)||(d=o[this.pos++],p|=(d&127)<<14,d<128)||(d=o[this.pos++],p|=(d&127)<<21,d<128)?p:(d=o[this.pos],p|=(d&15)<<28,B3(p,s,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var s=this.readVarint();return s%2===1?(s+1)/-2:s/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var s=this.readVarint()+this.pos,o=this.pos;return this.pos=s,s-o>=R3&&dE?K3(this.buf,o,s):X3(this.buf,o,s)},readBytes:function(){var s=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,s);return this.pos=s,o},readPackedVarint:function(s,o){if(this.type!==zi.Bytes)return s.push(this.readVarint(o));var p=Uo(this);for(s=s||[];this.pos<p;)s.push(this.readVarint(o));return s},readPackedSVarint:function(s){if(this.type!==zi.Bytes)return s.push(this.readSVarint());var o=Uo(this);for(s=s||[];this.pos<o;)s.push(this.readSVarint());return s},readPackedBoolean:function(s){if(this.type!==zi.Bytes)return s.push(this.readBoolean());var o=Uo(this);for(s=s||[];this.pos<o;)s.push(this.readBoolean());return s},readPackedFloat:function(s){if(this.type!==zi.Bytes)return s.push(this.readFloat());var o=Uo(this);for(s=s||[];this.pos<o;)s.push(this.readFloat());return s},readPackedDouble:function(s){if(this.type!==zi.Bytes)return s.push(this.readDouble());var o=Uo(this);for(s=s||[];this.pos<o;)s.push(this.readDouble());return s},readPackedFixed32:function(s){if(this.type!==zi.Bytes)return s.push(this.readFixed32());var o=Uo(this);for(s=s||[];this.pos<o;)s.push(this.readFixed32());return s},readPackedSFixed32:function(s){if(this.type!==zi.Bytes)return s.push(this.readSFixed32());var o=Uo(this);for(s=s||[];this.pos<o;)s.push(this.readSFixed32());return s},readPackedFixed64:function(s){if(this.type!==zi.Bytes)return s.push(this.readFixed64());var o=Uo(this);for(s=s||[];this.pos<o;)s.push(this.readFixed64());return s},readPackedSFixed64:function(s){if(this.type!==zi.Bytes)return s.push(this.readSFixed64());var o=Uo(this);for(s=s||[];this.pos<o;)s.push(this.readSFixed64());return s},skip:function(s){var o=s&7;if(o===zi.Varint)for(;this.buf[this.pos++]>127;);else if(o===zi.Bytes)this.pos=this.readVarint()+this.pos;else if(o===zi.Fixed32)this.pos+=4;else if(o===zi.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+o)},writeTag:function(s,o){this.writeVarint(s<<3|o)},realloc:function(s){for(var o=this.length||16;o<this.pos+s;)o*=2;if(o!==this.length){var p=new Uint8Array(o);p.set(this.buf),this.buf=p,this.length=o}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(s){this.realloc(4),Zu(this.buf,s,this.pos),this.pos+=4},writeSFixed32:function(s){this.realloc(4),Zu(this.buf,s,this.pos),this.pos+=4},writeFixed64:function(s){this.realloc(8),Zu(this.buf,s&-1,this.pos),Zu(this.buf,Math.floor(s*lE),this.pos+4),this.pos+=8},writeSFixed64:function(s){this.realloc(8),Zu(this.buf,s&-1,this.pos),Zu(this.buf,Math.floor(s*lE),this.pos+4),this.pos+=8},writeVarint:function(s){if(s=+s||0,s>268435455||s<0){F3(s,this);return}this.realloc(4),this.buf[this.pos++]=s&127|(s>127?128:0),!(s<=127)&&(this.buf[this.pos++]=(s>>>=7)&127|(s>127?128:0),!(s<=127)&&(this.buf[this.pos++]=(s>>>=7)&127|(s>127?128:0),!(s<=127)&&(this.buf[this.pos++]=s>>>7&127)))},writeSVarint:function(s){this.writeVarint(s<0?-s*2-1:s*2)},writeBoolean:function(s){this.writeVarint(!!s)},writeString:function(s){s=String(s),this.realloc(s.length*4),this.pos++;var o=this.pos;this.pos=Q3(this.buf,s,this.pos);var p=this.pos-o;p>=128&&cE(o,p,this),this.pos=o-1,this.writeVarint(p),this.pos+=p},writeFloat:function(s){this.realloc(4),Xf.write(this.buf,s,this.pos,!0,23,4),this.pos+=4},writeDouble:function(s){this.realloc(8),Xf.write(this.buf,s,this.pos,!0,52,8),this.pos+=8},writeBytes:function(s){var o=s.length;this.writeVarint(o),this.realloc(o);for(var p=0;p<o;p++)this.buf[this.pos++]=s[p]},writeRawMessage:function(s,o){this.pos++;var p=this.pos;s(o,this);var d=this.pos-p;d>=128&&cE(p,d,this),this.pos=p-1,this.writeVarint(d),this.pos+=d},writeMessage:function(s,o,p){this.writeTag(s,zi.Bytes),this.writeRawMessage(o,p)},writePackedVarint:function(s,o){o.length&&this.writeMessage(s,q3,o)},writePackedSVarint:function(s,o){o.length&&this.writeMessage(s,V3,o)},writePackedBoolean:function(s,o){o.length&&this.writeMessage(s,U3,o)},writePackedFloat:function(s,o){o.length&&this.writeMessage(s,W3,o)},writePackedDouble:function(s,o){o.length&&this.writeMessage(s,G3,o)},writePackedFixed32:function(s,o){o.length&&this.writeMessage(s,Z3,o)},writePackedSFixed32:function(s,o){o.length&&this.writeMessage(s,$3,o)},writePackedFixed64:function(s,o){o.length&&this.writeMessage(s,H3,o)},writePackedSFixed64:function(s,o){o.length&&this.writeMessage(s,Y3,o)},writeBytesField:function(s,o){this.writeTag(s,zi.Bytes),this.writeBytes(o)},writeFixed32Field:function(s,o){this.writeTag(s,zi.Fixed32),this.writeFixed32(o)},writeSFixed32Field:function(s,o){this.writeTag(s,zi.Fixed32),this.writeSFixed32(o)},writeFixed64Field:function(s,o){this.writeTag(s,zi.Fixed64),this.writeFixed64(o)},writeSFixed64Field:function(s,o){this.writeTag(s,zi.Fixed64),this.writeSFixed64(o)},writeVarintField:function(s,o){this.writeTag(s,zi.Varint),this.writeVarint(o)},writeSVarintField:function(s,o){this.writeTag(s,zi.Varint),this.writeSVarint(o)},writeStringField:function(s,o){this.writeTag(s,zi.Bytes),this.writeString(o)},writeFloatField:function(s,o){this.writeTag(s,zi.Fixed32),this.writeFloat(o)},writeDoubleField:function(s,o){this.writeTag(s,zi.Fixed64),this.writeDouble(o)},writeBooleanField:function(s,o){this.writeVarintField(s,!!o)}};function B3(s,o,p){var d=p.buf,f,a;if(a=d[p.pos++],f=(a&112)>>4,a<128||(a=d[p.pos++],f|=(a&127)<<3,a<128)||(a=d[p.pos++],f|=(a&127)<<10,a<128)||(a=d[p.pos++],f|=(a&127)<<17,a<128)||(a=d[p.pos++],f|=(a&127)<<24,a<128)||(a=d[p.pos++],f|=(a&1)<<31,a<128))return Uu(s,f,o);throw new Error("Expected varint not more than 10 bytes")}function Uo(s){return s.type===zi.Bytes?s.readVarint()+s.pos:s.pos+1}function Uu(s,o,p){return p?o*4294967296+(s>>>0):(o>>>0)*4294967296+(s>>>0)}function F3(s,o){var p,d;if(s>=0?(p=s%4294967296|0,d=s/4294967296|0):(p=~(-s%4294967296),d=~(-s/4294967296),p^4294967295?p=p+1|0:(p=0,d=d+1|0)),s>=18446744073709552e3||s<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");o.realloc(10),j3(p,d,o),N3(d,o)}function j3(s,o,p){p.buf[p.pos++]=s&127|128,s>>>=7,p.buf[p.pos++]=s&127|128,s>>>=7,p.buf[p.pos++]=s&127|128,s>>>=7,p.buf[p.pos++]=s&127|128,s>>>=7,p.buf[p.pos]=s&127}function N3(s,o){var p=(s&7)<<4;o.buf[o.pos++]|=p|((s>>>=3)?128:0),s&&(o.buf[o.pos++]=s&127|((s>>>=7)?128:0),s&&(o.buf[o.pos++]=s&127|((s>>>=7)?128:0),s&&(o.buf[o.pos++]=s&127|((s>>>=7)?128:0),s&&(o.buf[o.pos++]=s&127|((s>>>=7)?128:0),s&&(o.buf[o.pos++]=s&127)))))}function cE(s,o,p){var d=o<=16383?1:o<=2097151?2:o<=268435455?3:Math.floor(Math.log(o)/(Math.LN2*7));p.realloc(d);for(var f=p.pos-1;f>=s;f--)p.buf[f+d]=p.buf[f]}function q3(s,o){for(var p=0;p<s.length;p++)o.writeVarint(s[p])}function V3(s,o){for(var p=0;p<s.length;p++)o.writeSVarint(s[p])}function W3(s,o){for(var p=0;p<s.length;p++)o.writeFloat(s[p])}function G3(s,o){for(var p=0;p<s.length;p++)o.writeDouble(s[p])}function U3(s,o){for(var p=0;p<s.length;p++)o.writeBoolean(s[p])}function Z3(s,o){for(var p=0;p<s.length;p++)o.writeFixed32(s[p])}function $3(s,o){for(var p=0;p<s.length;p++)o.writeSFixed32(s[p])}function H3(s,o){for(var p=0;p<s.length;p++)o.writeFixed64(s[p])}function Y3(s,o){for(var p=0;p<s.length;p++)o.writeSFixed64(s[p])}function Kf(s,o){return(s[o]|s[o+1]<<8|s[o+2]<<16)+s[o+3]*16777216}function Zu(s,o,p){s[p]=o,s[p+1]=o>>>8,s[p+2]=o>>>16,s[p+3]=o>>>24}function uE(s,o){return(s[o]|s[o+1]<<8|s[o+2]<<16)+(s[o+3]<<24)}function X3(s,o,p){for(var d="",f=o;f<p;){var a=s[f],T=null,M=a>239?4:a>223?3:a>191?2:1;if(f+M>p)break;var R,V,Y;M===1?a<128&&(T=a):M===2?(R=s[f+1],(R&192)===128&&(T=(a&31)<<6|R&63,T<=127&&(T=null))):M===3?(R=s[f+1],V=s[f+2],(R&192)===128&&(V&192)===128&&(T=(a&15)<<12|(R&63)<<6|V&63,(T<=2047||T>=55296&&T<=57343)&&(T=null))):M===4&&(R=s[f+1],V=s[f+2],Y=s[f+3],(R&192)===128&&(V&192)===128&&(Y&192)===128&&(T=(a&15)<<18|(R&63)<<12|(V&63)<<6|Y&63,(T<=65535||T>=1114112)&&(T=null))),T===null?(T=65533,M=1):T>65535&&(T-=65536,d+=String.fromCharCode(T>>>10&1023|55296),T=56320|T&1023),d+=String.fromCharCode(T),f+=M}return d}function K3(s,o,p){return dE.decode(s.subarray(o,p))}function Q3(s,o,p){for(var d=0,f,a;d<o.length;d++){if(f=o.charCodeAt(d),f>55295&&f<57344)if(a)if(f<56320){s[p++]=239,s[p++]=191,s[p++]=189,a=f;continue}else f=a-55296<<10|f-56320|65536,a=null;else{f>56319||d+1===o.length?(s[p++]=239,s[p++]=191,s[p++]=189):a=f;continue}else a&&(s[p++]=239,s[p++]=191,s[p++]=189,a=null);f<128?s[p++]=f:(f<2048?s[p++]=f>>6|192:(f<65536?s[p++]=f>>12|224:(s[p++]=f>>18|240,s[p++]=f>>12&63|128),s[p++]=f>>6&63|128),s[p++]=f&63|128)}return p}});var yE=Ee((R_,B_)=>{(function(s,o){typeof R_=="object"&&typeof B_!="undefined"?B_.exports=o():typeof define=="function"&&define.amd?define(o):(s=typeof globalThis!="undefined"?globalThis:s||self,s.maplibregl=o())})(R_,(function(){"use strict";var s={},o={};function p(f,a,T){if(o[f]=T,f==="index"){var M="var sharedModule = {}; ("+o.shared+")(sharedModule); ("+o.worker+")(sharedModule);",R={};return o.shared(R),o.index(s,R),typeof window!="undefined"&&s.setWorkerUrl(window.URL.createObjectURL(new Blob([M],{type:"text/javascript"}))),s}}p("shared",["exports"],(function(f){"use strict";function a(r,e,i,l){return new(i||(i=Promise))((function(h,g){function y(P){try{S(l.next(P))}catch(A){g(A)}}function x(P){try{S(l.throw(P))}catch(A){g(A)}}function S(P){var A;P.done?h(P.value):(A=P.value,A instanceof i?A:new i((function(D){D(A)}))).then(y,x)}S((l=l.apply(r,e||[])).next())}))}function T(r,e){this.x=r,this.y=e}function M(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var R,V;typeof SuppressedError=="function"&&SuppressedError,T.prototype={clone(){return new T(this.x,this.y)},add(r){return this.clone()._add(r)},sub(r){return this.clone()._sub(r)},multByPoint(r){return this.clone()._multByPoint(r)},divByPoint(r){return this.clone()._divByPoint(r)},mult(r){return this.clone()._mult(r)},div(r){return this.clone()._div(r)},rotate(r){return this.clone()._rotate(r)},rotateAround(r,e){return this.clone()._rotateAround(r,e)},matMult(r){return this.clone()._matMult(r)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(r){return this.x===r.x&&this.y===r.y},dist(r){return Math.sqrt(this.distSqr(r))},distSqr(r){let e=r.x-this.x,i=r.y-this.y;return e*e+i*i},angle(){return Math.atan2(this.y,this.x)},angleTo(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith(r){return this.angleWithSep(r.x,r.y)},angleWithSep(r,e){return Math.atan2(this.x*e-this.y*r,this.x*r+this.y*e)},_matMult(r){let e=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=e,this},_add(r){return this.x+=r.x,this.y+=r.y,this},_sub(r){return this.x-=r.x,this.y-=r.y,this},_mult(r){return this.x*=r,this.y*=r,this},_div(r){return this.x/=r,this.y/=r,this},_multByPoint(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint(r){return this.x/=r.x,this.y/=r.y,this},_unit(){return this._div(this.mag()),this},_perp(){let r=this.y;return this.y=this.x,this.x=-r,this},_rotate(r){let e=Math.cos(r),i=Math.sin(r),l=i*this.x+e*this.y;return this.x=e*this.x-i*this.y,this.y=l,this},_rotateAround(r,e){let i=Math.cos(r),l=Math.sin(r),h=e.y+l*(this.x-e.x)+i*(this.y-e.y);return this.x=e.x+i*(this.x-e.x)-l*(this.y-e.y),this.y=h,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:T},T.convert=function(r){if(r instanceof T)return r;if(Array.isArray(r))return new T(+r[0],+r[1]);if(r.x!==void 0&&r.y!==void 0)return new T(+r.x,+r.y);throw new Error("Expected [x, y] or {x, y} point format")};var Y=(function(){if(V)return R;function r(e,i,l,h){this.cx=3*e,this.bx=3*(l-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(h-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=i,this.p2x=l,this.p2y=h}return V=1,R=r,r.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,i){if(i===void 0&&(i=1e-6),e<0)return 0;if(e>1)return 1;for(var l=e,h=0;h<8;h++){var g=this.sampleCurveX(l)-e;if(Math.abs(g)<i)return l;var y=this.sampleCurveDerivativeX(l);if(Math.abs(y)<1e-6)break;l-=g/y}var x=0,S=1;for(l=e,h=0;h<20&&(g=this.sampleCurveX(l),!(Math.abs(g-e)<i));h++)e>g?x=l:S=l,l=.5*(S-x)+x;return l},solve:function(e,i){return this.sampleCurveY(this.solveCurveX(e,i))}},R})(),re=M(Y);let G,te;function H(){return G==null&&(G=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),G}function Se(){if(te==null&&(te=!1,H())){let e=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(e){for(let l=0;l<25;l++){let h=4*l;e.fillStyle=`rgb(${h},${h+1},${h+2})`,e.fillRect(l%5,Math.floor(l/5),1,1)}let i=e.getImageData(0,0,5,5).data;for(let l=0;l<100;l++)if(l%4!=3&&i[l]!==l){te=!0;break}}}return te||!1}var je=1e-6,ye=typeof Float32Array!="undefined"?Float32Array:Array;function Ce(){var r=new ye(9);return ye!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function Ye(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function rt(){var r=new ye(3);return ye!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function Ct(r){var e=r[0],i=r[1],l=r[2];return Math.sqrt(e*e+i*i+l*l)}function gt(r,e,i){var l=new ye(3);return l[0]=r,l[1]=e,l[2]=i,l}function Wt(r,e,i){return r[0]=e[0]+i[0],r[1]=e[1]+i[1],r[2]=e[2]+i[2],r}function Gt(r,e,i){return r[0]=e[0]*i,r[1]=e[1]*i,r[2]=e[2]*i,r}function wt(r,e,i){var l=e[0],h=e[1],g=e[2],y=i[0],x=i[1],S=i[2];return r[0]=h*S-g*x,r[1]=g*y-l*S,r[2]=l*x-h*y,r}var kt,si=Ct;function ri(r,e,i){var l=e[0],h=e[1],g=e[2],y=e[3];return r[0]=i[0]*l+i[4]*h+i[8]*g+i[12]*y,r[1]=i[1]*l+i[5]*h+i[9]*g+i[13]*y,r[2]=i[2]*l+i[6]*h+i[10]*g+i[14]*y,r[3]=i[3]*l+i[7]*h+i[11]*g+i[15]*y,r}function di(){var r=new ye(4);return ye!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r[3]=1,r}function ni(r,e,i,l){var h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",g=Math.PI/360;e*=g,l*=g,i*=g;var y=Math.sin(e),x=Math.cos(e),S=Math.sin(i),P=Math.cos(i),A=Math.sin(l),D=Math.cos(l);switch(h){case"xyz":r[0]=y*P*D+x*S*A,r[1]=x*S*D-y*P*A,r[2]=x*P*A+y*S*D,r[3]=x*P*D-y*S*A;break;case"xzy":r[0]=y*P*D-x*S*A,r[1]=x*S*D-y*P*A,r[2]=x*P*A+y*S*D,r[3]=x*P*D+y*S*A;break;case"yxz":r[0]=y*P*D+x*S*A,r[1]=x*S*D-y*P*A,r[2]=x*P*A-y*S*D,r[3]=x*P*D+y*S*A;break;case"yzx":r[0]=y*P*D+x*S*A,r[1]=x*S*D+y*P*A,r[2]=x*P*A-y*S*D,r[3]=x*P*D-y*S*A;break;case"zxy":r[0]=y*P*D-x*S*A,r[1]=x*S*D+y*P*A,r[2]=x*P*A+y*S*D,r[3]=x*P*D-y*S*A;break;case"zyx":r[0]=y*P*D-x*S*A,r[1]=x*S*D+y*P*A,r[2]=x*P*A-y*S*D,r[3]=x*P*D+y*S*A;break;default:throw new Error("Unknown angle order "+h)}return r}function Ut(){var r=new ye(2);return ye!=Float32Array&&(r[0]=0,r[1]=0),r}function ut(r,e){var i=new ye(2);return i[0]=r,i[1]=e,i}rt(),kt=new ye(4),ye!=Float32Array&&(kt[0]=0,kt[1]=0,kt[2]=0,kt[3]=0),rt(),gt(1,0,0),gt(0,1,0),di(),di(),Ce(),Ut();let Ft=8192;function _t(r,e,i){return e*(Ft/(r.tileSize*Math.pow(2,i-r.tileID.overscaledZ)))}function Kt(r,e){return(r%e+e)%e}function Mi(r,e,i){return r*(1-i)+e*i}function Ii(r){if(r<=0)return 0;if(r>=1)return 1;let e=r*r,i=e*r;return 4*(r<.5?i:3*(r-e)+i-.75)}function hi(r,e,i,l){let h=new re(r,e,i,l);return g=>h.solve(g)}let At=hi(.25,.1,.25,1);function St(r,e,i){return Math.min(i,Math.max(e,r))}function sr(r,e,i){let l=i-e,h=((r-e)%l+l)%l+e;return h===e?i:h}function vi(r,...e){for(let i of e)for(let l in i)r[l]=i[l];return r}let cn=1;function Mr(r,e,i){let l={};for(let h in r)l[h]=e.call(this,r[h],h,r);return l}function un(r,e,i){let l={};for(let h in r)e.call(this,r[h],h,r)&&(l[h]=r[h]);return l}function or(r){return Array.isArray(r)?r.map(or):typeof r=="object"&&r?Mr(r,or):r}let wn={};function pr(r){wn[r]||(typeof console!="undefined"&&console.warn(r),wn[r]=!0)}function gr(r,e,i){return(i.y-r.y)*(e.x-r.x)>(e.y-r.y)*(i.x-r.x)}function Ln(r){return typeof WorkerGlobalScope!="undefined"&&r!==void 0&&r instanceof WorkerGlobalScope}let Oi=null;function Dn(r){return typeof ImageBitmap!="undefined"&&r instanceof ImageBitmap}let Ya="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Xa(r,e,i,l,h){return a(this,void 0,void 0,(function*(){if(typeof VideoFrame=="undefined")throw new Error("VideoFrame not supported");let g=new VideoFrame(r,{timestamp:0});try{let y=g==null?void 0:g.format;if(!y||!y.startsWith("BGR")&&!y.startsWith("RGB"))throw new Error(`Unrecognized format ${y}`);let x=y.startsWith("BGR"),S=new Uint8ClampedArray(l*h*4);if(yield g.copyTo(S,(function(P,A,D,B,F){let W=4*Math.max(-A,0),U=(Math.max(0,D)-D)*B*4+W,$=4*B,J=Math.max(0,A),ue=Math.max(0,D);return{rect:{x:J,y:ue,width:Math.min(P.width,A+B)-J,height:Math.min(P.height,D+F)-ue},layout:[{offset:U,stride:$}]}})(r,e,i,l,h)),x)for(let P=0;P<S.length;P+=4){let A=S[P];S[P]=S[P+2],S[P+2]=A}return S}finally{g.close()}}))}let Yn,Sn;function Ka(r,e,i,l){return r.addEventListener(e,i,l),{unsubscribe:()=>{r.removeEventListener(e,i,l)}}}function Ss(r){return r*Math.PI/180}function Xr(r){return r/Math.PI*180}let Pe={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},K={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},X="AbortError";class ne extends Error{constructor(e=X){super(e instanceof Error?e.message:e),this.name=X,e instanceof Error&&e.stack&&(this.stack=e.stack)}}function _e(r){return r.name===X}let be={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Ie(r){return be.REGISTERED_PROTOCOLS[r.substring(0,r.indexOf("://"))]}let ke="global-dispatcher";class we extends Error{constructor(e,i,l,h){super(`AJAXError: ${i} (${e}): ${l}`),this.status=e,this.statusText=i,this.url=l,this.body=h}}let Oe=()=>Ln(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Xe=function(r,e){if(/:\/\//.test(r.url)&&!/^https?:|^file:/.test(r.url)){let l=Ie(r.url);if(l)return l(r,e);if(Ln(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:r,targetMapId:ke},e)}if(!(/^file:/.test(i=r.url)||/^file:/.test(Oe())&&!/^\w+:/.test(i))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(l,h){return a(this,void 0,void 0,(function*(){let g=new Request(l.url,{method:l.method||"GET",body:l.body,credentials:l.credentials,headers:l.headers,cache:l.cache,referrer:Oe(),signal:h.signal}),y,x;l.type!=="json"||g.headers.has("Accept")||g.headers.set("Accept","application/json");try{y=yield fetch(g)}catch(P){throw _e(P)?P:new we(0,P.message,l.url,new Blob)}if(!y.ok){let P=yield y.blob();throw new we(y.status,y.statusText,l.url,P)}x=l.type==="arrayBuffer"||l.type==="image"?y.arrayBuffer():l.type==="json"?y.json():y.text();let S=yield x;return h.signal.throwIfAborted(),{data:S,cacheControl:y.headers.get("Cache-Control"),expires:y.headers.get("Expires")}}))})(r,e);if(Ln(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:r,mustQueue:!0,targetMapId:ke},e)}var i;return(function(l,h){return new Promise(((g,y)=>{var x;let S=new XMLHttpRequest;S.open(l.method||"GET",l.url,!0),l.type!=="arrayBuffer"&&l.type!=="image"||(S.responseType="arraybuffer");for(let P in l.headers)S.setRequestHeader(P,l.headers[P]);l.type==="json"&&(S.responseType="text",!((x=l.headers)===null||x===void 0)&&x.Accept||S.setRequestHeader("Accept","application/json")),S.withCredentials=l.credentials==="include",S.onerror=()=>{y(new Error(S.statusText))},S.onload=()=>{if(!h.signal.aborted)if((S.status>=200&&S.status<300||S.status===0)&&S.response!==null){let P=S.response;if(l.type==="json")try{P=JSON.parse(S.response)}catch(A){return void y(A)}g({data:P,cacheControl:S.getResponseHeader("Cache-Control"),expires:S.getResponseHeader("Expires")})}else{let P=new Blob([S.response],{type:S.getResponseHeader("Content-Type")});y(new we(S.status,S.statusText,l.url,P))}},h.signal.addEventListener("abort",(()=>{S.abort(),y(new ne(h.signal.reason))})),S.send(l.body)}))})(r,e)};function Ge(r){if(!r||r.indexOf("://")<=0||r.indexOf("data:image/")===0||r.indexOf("blob:")===0)return!0;let e=new URL(r),i=window.location;return e.protocol===i.protocol&&e.host===i.host}function lt(r,e,i){i[r]&&i[r].indexOf(e)!==-1||(i[r]=i[r]||[],i[r].push(e))}function pt(r,e,i){if(i&&i[r]){let l=i[r].indexOf(e);l!==-1&&i[r].splice(l,1)}}class Et{constructor(e,i={}){vi(this,i),this.type=e}}class fi extends Et{constructor(e,i={}){super("error",vi({error:e},i))}}class oi{on(e,i){return this._listeners=this._listeners||{},lt(e,i,this._listeners),{unsubscribe:()=>{this.off(e,i)}}}off(e,i){return pt(e,i,this._listeners),pt(e,i,this._oneTimeListeners),this}once(e,i){return i?(this._oneTimeListeners=this._oneTimeListeners||{},lt(e,i,this._oneTimeListeners),this):new Promise((l=>this.once(e,l)))}fire(e,i){typeof e=="string"&&(e=new Et(e,i||{}));let l=e.type;if(this.listens(l)){e.target=this;let h=this._listeners&&this._listeners[l]?this._listeners[l].slice():[];for(let x of h)x.call(this,e);let g=this._oneTimeListeners&&this._oneTimeListeners[l]?this._oneTimeListeners[l].slice():[];for(let x of g)pt(l,x,this._oneTimeListeners),x.call(this,e);let y=this._eventedParent;y&&(vi(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),y.fire(e))}else e instanceof fi&&console.error(e.error);return this}listens(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)}setEventedParent(e,i){return this._eventedParent=e,this._eventedParentData=i,this}}var Le={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"array",value:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};let Si=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function wr(r,e){let i={};for(let l in r)l!=="ref"&&(i[l]=r[l]);return Si.forEach((l=>{l in e&&(i[l]=e[l])})),i}function Mt(r,e){if(Array.isArray(r)){if(!Array.isArray(e)||r.length!==e.length)return!1;for(let i=0;i<r.length;i++)if(!Mt(r[i],e[i]))return!1;return!0}if(typeof r=="object"&&r!==null&&e!==null){if(typeof e!="object"||Object.keys(r).length!==Object.keys(e).length)return!1;for(let i in r)if(!Mt(r[i],e[i]))return!1;return!0}return r===e}function mi(r,e){r.push(e)}function Sr(r,e,i){mi(i,{command:"addSource",args:[r,e[r]]})}function Ti(r,e,i){mi(e,{command:"removeSource",args:[r]}),i[r]=!0}function $i(r,e,i,l){Ti(r,i,l),Sr(r,e,i)}function Ci(r,e,i){let l;for(l in r[i])if(Object.prototype.hasOwnProperty.call(r[i],l)&&l!=="data"&&!Mt(r[i][l],e[i][l]))return!1;for(l in e[i])if(Object.prototype.hasOwnProperty.call(e[i],l)&&l!=="data"&&!Mt(r[i][l],e[i][l]))return!1;return!0}function lr(r,e,i,l,h,g){r=r||{},e=e||{};for(let y in r)Object.prototype.hasOwnProperty.call(r,y)&&(Mt(r[y],e[y])||i.push({command:g,args:[l,y,e[y],h]}));for(let y in e)Object.prototype.hasOwnProperty.call(e,y)&&!Object.prototype.hasOwnProperty.call(r,y)&&(Mt(r[y],e[y])||i.push({command:g,args:[l,y,e[y],h]}))}function io(r){return r.id}function Kr(r,e){return r[e.id]=e,r}class Be{constructor(e,i,l,h){this.message=(e?`${e}: `:"")+l,h&&(this.identifier=h),i!=null&&i.__line__&&(this.line=i.__line__)}}function Ir(r,...e){for(let i of e)for(let l in i)r[l]=i[l];return r}class zr extends Error{constructor(e,i){super(i),this.message=i,this.key=e}}class ro{constructor(e,i=[]){this.parent=e,this.bindings={};for(let[l,h]of i)this.bindings[l]=h}concat(e){return new ro(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}let dn={kind:"null"},at={kind:"number"},jt={kind:"string"},zt={kind:"boolean"},Qr={kind:"color"},$o={kind:"projectionDefinition"},ca={kind:"object"},Rt={kind:"value"},no={kind:"collator"},Ts={kind:"formatted"},Ho={kind:"padding"},ua={kind:"colorArray"},ao={kind:"numberArray"},Cs={kind:"resolvedImage"},so={kind:"variableAnchorOffsetCollection"};function Vr(r,e){return{kind:"array",itemType:r,N:e}}function gi(r){if(r.kind==="array"){let e=gi(r.itemType);return typeof r.N=="number"?`array<${e}, ${r.N}>`:r.itemType.kind==="value"?"array":`array<${e}>`}return r.kind}let ks=[dn,at,jt,zt,Qr,$o,Ts,ca,Vr(Rt),Ho,ao,ua,Cs,so];function Xn(r,e){if(e.kind==="error")return null;if(r.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!Xn(r.itemType,e.itemType))&&(typeof r.N!="number"||r.N===e.N))return null}else{if(r.kind===e.kind)return null;if(r.kind==="value"){for(let i of ks)if(!Xn(i,e))return null}}return`Expected ${gi(r)} but found ${gi(e)} instead.`}function Ps(r,e){return e.some((i=>i.kind===r.kind))}function Aa(r,e){return e.some((i=>i==="null"?r===null:i==="array"?Array.isArray(r):i==="object"?r&&!Array.isArray(r)&&typeof r=="object":i===typeof r))}function Wr(r,e){return r.kind==="array"&&e.kind==="array"?r.itemType.kind===e.itemType.kind&&typeof r.N=="number":r.kind===e.kind}let li=.96422,bi=.82521,Qa=4/29,ki=6/29,Ja=3*ki*ki,Yo=ki*ki*ki,Nt=Math.PI/180,Hi=180/Math.PI;function Xo(r){return(r%=360)<0&&(r+=360),r}function oo([r,e,i,l]){let h,g,y=Fl((.2225045*(r=Gr(r))+.7168786*(e=Gr(e))+.0606169*(i=Gr(i)))/1);r===e&&e===i?h=g=y:(h=Fl((.4360747*r+.3850649*e+.1430804*i)/li),g=Fl((.0139322*r+.0971045*e+.7141733*i)/bi));let x=116*y-16;return[x<0?0:x,500*(h-y),200*(y-g),l]}function Gr(r){return r<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function Fl(r){return r>Yo?Math.pow(r,1/3):r/Ja+Qa}function Es([r,e,i,l]){let h=(r+16)/116,g=isNaN(e)?h:h+e/500,y=isNaN(i)?h:h-i/200;return h=1*Yi(h),g=li*Yi(g),y=bi*Yi(y),[da(3.1338561*g-1.6168667*h-.4906146*y),da(-.9787684*g+1.9161415*h+.033454*y),da(.0719453*g-.2289914*h+1.4052427*y),l]}function da(r){return(r=r<=.00304?12.92*r:1.055*Math.pow(r,1/2.4)-.055)<0?0:r>1?1:r}function Yi(r){return r>ki?r*r*r:Ja*(r-Qa)}let es=Object.hasOwn||function(r,e){return Object.prototype.hasOwnProperty.call(r,e)};function ha(r,e){return es(r,e)?r[e]:void 0}function Ma(r){return parseInt(r.padEnd(2,r),16)/255}function Ko(r,e){return Kn(e?r/100:r,0,1)}function Kn(r,e,i){return Math.min(Math.max(e,r),i)}function lo(r){return!r.some(Number.isNaN)}let ts={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function On(r,e,i){return r+i*(e-r)}function Ia(r,e,i){return r.map(((l,h)=>On(l,e[h],i)))}class Bt{constructor(e,i,l,h=1,g=!0){this.r=e,this.g=i,this.b=l,this.a=h,g||(this.r*=h,this.g*=h,this.b*=h,h||this.overwriteGetter("rgb",[e,i,l,h]))}static parse(e){if(e instanceof Bt)return e;if(typeof e!="string")return;let i=(function(l){if((l=l.toLowerCase().trim())==="transparent")return[0,0,0,0];let h=ha(ts,l);if(h){let[y,x,S]=h;return[y/255,x/255,S/255,1]}if(l.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(l)){let y=l.length<6?1:2,x=1;return[Ma(l.slice(x,x+=y)),Ma(l.slice(x,x+=y)),Ma(l.slice(x,x+=y)),Ma(l.slice(x,x+y)||"ff")]}if(l.startsWith("rgb")){let y=l.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(y){let[x,S,P,A,D,B,F,W,U,$,J,ue]=y,ee=[A||" ",F||" ",$].join("");if(ee==="  "||ee==="  /"||ee===",,"||ee===",,,"){let ae=[P,B,U].join(""),he=ae==="%%%"?100:ae===""?255:0;if(he){let fe=[Kn(+S/he,0,1),Kn(+D/he,0,1),Kn(+W/he,0,1),J?Ko(+J,ue):1];if(lo(fe))return fe}}return}}let g=l.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(g){let[y,x,S,P,A,D,B,F,W]=g,U=[S||" ",A||" ",B].join("");if(U==="  "||U==="  /"||U===",,"||U===",,,"){let $=[+x,Kn(+P,0,100),Kn(+D,0,100),F?Ko(+F,W):1];if(lo($))return(function([J,ue,ee,ae]){function he(fe){let Ae=(fe+J/30)%12,We=ue*Math.min(ee,1-ee);return ee-We*Math.max(-1,Math.min(Ae-3,9-Ae,1))}return J=Xo(J),ue/=100,ee/=100,[he(0),he(8),he(4),ae]})($)}}})(e);return i?new Bt(...i,!1):void 0}get rgb(){let{r:e,g:i,b:l,a:h}=this,g=h||1/0;return this.overwriteGetter("rgb",[e/g,i/g,l/g,h])}get hcl(){return this.overwriteGetter("hcl",(function(e){let[i,l,h,g]=oo(e),y=Math.sqrt(l*l+h*h);return[Math.round(1e4*y)?Xo(Math.atan2(h,l)*Hi):NaN,y,i,g]})(this.rgb))}get lab(){return this.overwriteGetter("lab",oo(this.rgb))}overwriteGetter(e,i){return Object.defineProperty(this,e,{value:i}),i}toString(){let[e,i,l,h]=this.rgb;return`rgba(${[e,i,l].map((g=>Math.round(255*g))).join(",")},${h})`}static interpolate(e,i,l,h="rgb"){switch(h){case"rgb":{let[g,y,x,S]=Ia(e.rgb,i.rgb,l);return new Bt(g,y,x,S,!1)}case"hcl":{let[g,y,x,S]=e.hcl,[P,A,D,B]=i.hcl,F,W;if(isNaN(g)||isNaN(P))isNaN(g)?isNaN(P)?F=NaN:(F=P,x!==1&&x!==0||(W=A)):(F=g,D!==1&&D!==0||(W=y));else{let ee=P-g;P>g&&ee>180?ee-=360:P<g&&g-P>180&&(ee+=360),F=g+l*ee}let[U,$,J,ue]=(function([ee,ae,he,fe]){return ee=isNaN(ee)?0:ee*Nt,Es([he,Math.cos(ee)*ae,Math.sin(ee)*ae,fe])})([F,W!=null?W:On(y,A,l),On(x,D,l),On(S,B,l)]);return new Bt(U,$,J,ue,!1)}case"lab":{let[g,y,x,S]=Es(Ia(e.lab,i.lab,l));return new Bt(g,y,x,S,!1)}}}}Bt.black=new Bt(0,0,0,1),Bt.white=new Bt(1,1,1,1),Bt.transparent=new Bt(0,0,0,0),Bt.red=new Bt(1,0,0,1);class As{constructor(e,i,l){this.sensitivity=e?i?"variant":"case":i?"accent":"base",this.locale=l,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,i){return this.collator.compare(e,i)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}let wc=["bottom","center","top"];class co{constructor(e,i,l,h,g,y){this.text=e,this.image=i,this.scale=l,this.fontStack=h,this.textColor=g,this.verticalAlign=y}}class Jr{constructor(e){this.sections=e}static fromString(e){return new Jr([new co(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((e=>e.text.length!==0||e.image&&e.image.name.length!==0))}static factory(e){return e instanceof Jr?e:Jr.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map((e=>e.text)).join("")}}class vt{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof vt)return e;if(typeof e=="number")return new vt([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(let i of e)if(typeof i!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]]}return new vt(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,i,l){return new vt(Ia(e.values,i.values,l))}}class ci{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof ci)return e;if(typeof e=="number")return new ci([e]);if(Array.isArray(e)){for(let i of e)if(typeof i!="number")return;return new ci(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,i,l){return new ci(Ia(e.values,i.values,l))}}class ct{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof ct)return e;if(typeof e=="string"){let l=Bt.parse(e);return l?new ct([l]):void 0}if(!Array.isArray(e))return;let i=[];for(let l of e){if(typeof l!="string")return;let h=Bt.parse(l);if(!h)return;i.push(h)}return new ct(i)}toString(){return JSON.stringify(this.values)}static interpolate(e,i,l,h="rgb"){let g=[];if(e.values.length!=i.values.length)throw new Error(`colorArray: Arrays have mismatched length (${e.values.length} vs. ${i.values.length}), cannot interpolate.`);for(let y=0;y<e.values.length;y++)g.push(Bt.interpolate(e.values[y],i.values[y],l,h));return new ct(g)}}class xi extends Error{constructor(e){super(e),this.name="RuntimeError"}toJSON(){return this.message}}let Qn=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Tr{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Tr)return e;if(Array.isArray(e)&&!(e.length<1)&&e.length%2==0){for(let i=0;i<e.length;i+=2){let l=e[i],h=e[i+1];if(typeof l!="string"||!Qn.has(l)||!Array.isArray(h)||h.length!==2||typeof h[0]!="number"||typeof h[1]!="number")return}return new Tr(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,i,l){let h=e.values,g=i.values;if(h.length!==g.length)throw new xi(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${i.toString()}`);let y=[];for(let x=0;x<h.length;x+=2){if(h[x]!==g[x])throw new xi(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${h[x]}, to[${x}]: ${g[x]}`);y.push(h[x]);let[S,P]=h[x+1],[A,D]=g[x+1];y.push([On(S,A,l),On(P,D,l)])}return new Tr(y)}}class Ur{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Ur({name:e,available:!1}):null}}class tr{constructor(e,i,l){this.from=e,this.to=i,this.transition=l}static interpolate(e,i,l){return new tr(e,i,l)}static parse(e){return e instanceof tr?e:Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number"?new tr(e[0],e[1],e[2]):typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number"?new tr(e.from,e.to,e.transition):typeof e=="string"?new tr(e,e,1):void 0}}function za(r,e,i,l){return typeof r=="number"&&r>=0&&r<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof i=="number"&&i>=0&&i<=255?l===void 0||typeof l=="number"&&l>=0&&l<=1?null:`Invalid rgba value [${[r,e,i,l].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof l=="number"?[r,e,i,l]:[r,e,i]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Tn(r){if(r===null||typeof r=="string"||typeof r=="boolean"||typeof r=="number"||r instanceof tr||r instanceof Bt||r instanceof As||r instanceof Jr||r instanceof vt||r instanceof ci||r instanceof ct||r instanceof Tr||r instanceof Ur)return!0;if(Array.isArray(r)){for(let e of r)if(!Tn(e))return!1;return!0}if(typeof r=="object"){for(let e in r)if(!Tn(r[e]))return!1;return!0}return!1}function Jt(r){if(r===null)return dn;if(typeof r=="string")return jt;if(typeof r=="boolean")return zt;if(typeof r=="number")return at;if(r instanceof Bt)return Qr;if(r instanceof tr)return $o;if(r instanceof As)return no;if(r instanceof Jr)return Ts;if(r instanceof vt)return Ho;if(r instanceof ci)return ao;if(r instanceof ct)return ua;if(r instanceof Tr)return so;if(r instanceof Ur)return Cs;if(Array.isArray(r)){let e=r.length,i;for(let l of r){let h=Jt(l);if(i){if(i===h)continue;i=Rt;break}i=h}return Vr(i||Rt,e)}return ca}function hn(r){let e=typeof r;return r===null?"":e==="string"||e==="number"||e==="boolean"?String(r):r instanceof Bt||r instanceof tr||r instanceof Jr||r instanceof vt||r instanceof ci||r instanceof ct||r instanceof Tr||r instanceof Ur?r.toString():JSON.stringify(r)}class Rn{constructor(e,i){this.type=e,this.value=i}static parse(e,i){if(e.length!==2)return i.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!Tn(e[1]))return i.error("invalid value");let l=e[1],h=Jt(l),g=i.expectedType;return h.kind!=="array"||h.N!==0||!g||g.kind!=="array"||typeof g.N=="number"&&g.N!==0||(h=g),new Rn(h,l)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}let uo={string:jt,number:at,boolean:zt,object:ca};class en{constructor(e,i){this.type=e,this.args=i}static parse(e,i){if(e.length<2)return i.error("Expected at least one argument.");let l,h=1,g=e[0];if(g==="array"){let x,S;if(e.length>2){let P=e[1];if(typeof P!="string"||!(P in uo)||P==="object")return i.error('The item type argument of "array" must be one of string, number, boolean',1);x=uo[P],h++}else x=Rt;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return i.error('The length argument to "array" must be a positive integer literal',2);S=e[2],h++}l=Vr(x,S)}else{if(!uo[g])throw new Error(`Types doesn't contain name = ${g}`);l=uo[g]}let y=[];for(;h<e.length;h++){let x=i.parse(e[h],h,Rt);if(!x)return null;y.push(x)}return new en(l,y)}evaluate(e){for(let i=0;i<this.args.length;i++){let l=this.args[i].evaluate(e);if(!Xn(this.type,Jt(l)))return l;if(i===this.args.length-1)throw new xi(`Expected value to be of type ${gi(this.type)}, but found ${gi(Jt(l))} instead.`)}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}let La={"to-boolean":zt,"to-color":Qr,"to-number":at,"to-string":jt};class Bn{constructor(e,i){this.type=e,this.args=i}static parse(e,i){if(e.length<2)return i.error("Expected at least one argument.");let l=e[0];if(!La[l])throw new Error(`Can't parse ${l} as it is not part of the known types`);if((l==="to-boolean"||l==="to-string")&&e.length!==2)return i.error("Expected one argument.");let h=La[l],g=[];for(let y=1;y<e.length;y++){let x=i.parse(e[y],y,Rt);if(!x)return null;g.push(x)}return new Bn(h,g)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let i,l;for(let h of this.args){if(i=h.evaluate(e),l=null,i instanceof Bt)return i;if(typeof i=="string"){let g=e.parseColor(i);if(g)return g}else if(Array.isArray(i)&&(l=i.length<3||i.length>4?`Invalid rgba value ${JSON.stringify(i)}: expected an array containing either three or four numeric values.`:za(i[0],i[1],i[2],i[3]),!l))return new Bt(i[0]/255,i[1]/255,i[2]/255,i[3])}throw new xi(l||`Could not parse color from value '${typeof i=="string"?i:JSON.stringify(i)}'`)}case"padding":{let i;for(let l of this.args){i=l.evaluate(e);let h=vt.parse(i);if(h)return h}throw new xi(`Could not parse padding from value '${typeof i=="string"?i:JSON.stringify(i)}'`)}case"numberArray":{let i;for(let l of this.args){i=l.evaluate(e);let h=ci.parse(i);if(h)return h}throw new xi(`Could not parse numberArray from value '${typeof i=="string"?i:JSON.stringify(i)}'`)}case"colorArray":{let i;for(let l of this.args){i=l.evaluate(e);let h=ct.parse(i);if(h)return h}throw new xi(`Could not parse colorArray from value '${typeof i=="string"?i:JSON.stringify(i)}'`)}case"variableAnchorOffsetCollection":{let i;for(let l of this.args){i=l.evaluate(e);let h=Tr.parse(i);if(h)return h}throw new xi(`Could not parse variableAnchorOffsetCollection from value '${typeof i=="string"?i:JSON.stringify(i)}'`)}case"number":{let i=null;for(let l of this.args){if(i=l.evaluate(e),i===null)return 0;let h=Number(i);if(!isNaN(h))return h}throw new xi(`Could not convert ${JSON.stringify(i)} to number.`)}case"formatted":return Jr.fromString(hn(this.args[0].evaluate(e)));case"resolvedImage":return Ur.fromString(hn(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return hn(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}let Sc=["Unknown","Point","LineString","Polygon"];class Qo{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Sc[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let i=this._parseColorCache.get(e);return i||(i=Bt.parse(e),this._parseColorCache.set(e,i)),i}}class Yt{constructor(e,i,l=[],h,g=new ro,y=[]){this.registry=e,this.path=l,this.key=l.map((x=>`[${x}]`)).join(""),this.scope=g,this.errors=y,this.expectedType=h,this._isConstant=i}parse(e,i,l,h,g={}){return i?this.concat(i,l,h)._parse(e,g):this._parse(e,g)}_parse(e,i){function l(h,g,y){return y==="assert"?new en(g,[h]):y==="coerce"?new Bn(g,[h]):h}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');let h=e[0];if(typeof h!="string")return this.error(`Expression name must be a string, but found ${typeof h} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;let g=this.registry[h];if(g){let y=g.parse(e,this);if(!y)return null;if(this.expectedType){let x=this.expectedType,S=y.type;if(x.kind!=="string"&&x.kind!=="number"&&x.kind!=="boolean"&&x.kind!=="object"&&x.kind!=="array"||S.kind!=="value"){if(x.kind==="projectionDefinition"&&["string","array"].includes(S.kind)||["color","formatted","resolvedImage"].includes(x.kind)&&["value","string"].includes(S.kind)||["padding","numberArray"].includes(x.kind)&&["value","number","array"].includes(S.kind)||x.kind==="colorArray"&&["value","string","array"].includes(S.kind)||x.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(S.kind))y=l(y,x,i.typeAnnotation||"coerce");else if(this.checkSubtype(x,S))return null}else y=l(y,x,i.typeAnnotation||"assert")}if(!(y instanceof Rn)&&y.type.kind!=="resolvedImage"&&this._isConstant(y)){let x=new Qo;try{y=new Rn(y.type,y.evaluate(x))}catch(S){return this.error(S.message),null}}return y}return this.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,i,l){let h=typeof e=="number"?this.path.concat(e):this.path,g=l?this.scope.concat(l):this.scope;return new Yt(this.registry,this._isConstant,h,i||null,g,this.errors)}error(e,...i){let l=`${this.key}${i.map((h=>`[${h}]`)).join("")}`;this.errors.push(new zr(l,e))}checkSubtype(e,i){let l=Xn(e,i);return l&&this.error(l),l}}class Pi{constructor(e,i){this.type=i.type,this.bindings=[].concat(e),this.result=i}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(let i of this.bindings)e(i[1]);e(this.result)}static parse(e,i){if(e.length<4)return i.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);let l=[];for(let g=1;g<e.length-1;g+=2){let y=e[g];if(typeof y!="string")return i.error(`Expected string, but found ${typeof y} instead.`,g);if(/[^a-zA-Z0-9_]/.test(y))return i.error("Variable names must contain only alphanumeric characters or '_'.",g);let x=i.parse(e[g+1],g+1);if(!x)return null;l.push([y,x])}let h=i.parse(e[e.length-1],e.length-1,i.expectedType,l);return h?new Pi(l,h):null}outputDefined(){return this.result.outputDefined()}}class Lr{constructor(e,i){this.type=i.type,this.name=e,this.boundExpression=i}static parse(e,i){if(e.length!==2||typeof e[1]!="string")return i.error("'var' expression requires exactly one string literal argument.");let l=e[1];return i.scope.has(l)?new Lr(l,i.scope.get(l)):i.error(`Unknown variable "${l}". Make sure "${l}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class Zt{constructor(e,i,l){this.type=e,this.index=i,this.input=l}static parse(e,i){if(e.length!==3)return i.error(`Expected 2 arguments, but found ${e.length-1} instead.`);let l=i.parse(e[1],1,at),h=i.parse(e[2],2,Vr(i.expectedType||Rt));return l&&h?new Zt(h.type.itemType,l,h):null}evaluate(e){let i=this.index.evaluate(e),l=this.input.evaluate(e);if(i<0)throw new xi(`Array index out of bounds: ${i} < 0.`);if(i>=l.length)throw new xi(`Array index out of bounds: ${i} > ${l.length-1}.`);if(i!==Math.floor(i))throw new xi(`Array index must be an integer, but found ${i} instead.`);return l[i]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class Ot{constructor(e,i){this.type=zt,this.needle=e,this.haystack=i}static parse(e,i){if(e.length!==3)return i.error(`Expected 2 arguments, but found ${e.length-1} instead.`);let l=i.parse(e[1],1,Rt),h=i.parse(e[2],2,Rt);return l&&h?Ps(l.type,[zt,jt,at,dn,Rt])?new Ot(l,h):i.error(`Expected first argument to be of type boolean, string, number or null, but found ${gi(l.type)} instead`):null}evaluate(e){let i=this.needle.evaluate(e),l=this.haystack.evaluate(e);if(!l)return!1;if(!Aa(i,["boolean","string","number","null"]))throw new xi(`Expected first argument to be of type boolean, string, number or null, but found ${gi(Jt(i))} instead.`);if(!Aa(l,["string","array"]))throw new xi(`Expected second argument to be of type array or string, but found ${gi(Jt(l))} instead.`);return l.indexOf(i)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class Ms{constructor(e,i,l){this.type=at,this.needle=e,this.haystack=i,this.fromIndex=l}static parse(e,i){if(e.length<=2||e.length>=5)return i.error(`Expected 2 or 3 arguments, but found ${e.length-1} instead.`);let l=i.parse(e[1],1,Rt),h=i.parse(e[2],2,Rt);if(!l||!h)return null;if(!Ps(l.type,[zt,jt,at,dn,Rt]))return i.error(`Expected first argument to be of type boolean, string, number or null, but found ${gi(l.type)} instead`);if(e.length===4){let g=i.parse(e[3],3,at);return g?new Ms(l,h,g):null}return new Ms(l,h)}evaluate(e){let i=this.needle.evaluate(e),l=this.haystack.evaluate(e);if(!Aa(i,["boolean","string","number","null"]))throw new xi(`Expected first argument to be of type boolean, string, number or null, but found ${gi(Jt(i))} instead.`);let h;if(this.fromIndex&&(h=this.fromIndex.evaluate(e)),Aa(l,["string"])){let g=l.indexOf(i,h);return g===-1?-1:[...l.slice(0,g)].length}if(Aa(l,["array"]))return l.indexOf(i,h);throw new xi(`Expected second argument to be of type array or string, but found ${gi(Jt(l))} instead.`)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class ei{constructor(e,i,l,h,g,y){this.inputType=e,this.type=i,this.input=l,this.cases=h,this.outputs=g,this.otherwise=y}static parse(e,i){if(e.length<5)return i.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return i.error("Expected an even number of arguments.");let l,h;i.expectedType&&i.expectedType.kind!=="value"&&(h=i.expectedType);let g={},y=[];for(let P=2;P<e.length-1;P+=2){let A=e[P],D=e[P+1];Array.isArray(A)||(A=[A]);let B=i.concat(P);if(A.length===0)return B.error("Expected at least one branch label.");for(let W of A){if(typeof W!="number"&&typeof W!="string")return B.error("Branch labels must be numbers or strings.");if(typeof W=="number"&&Math.abs(W)>Number.MAX_SAFE_INTEGER)return B.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof W=="number"&&Math.floor(W)!==W)return B.error("Numeric branch labels must be integer values.");if(l){if(B.checkSubtype(l,Jt(W)))return null}else l=Jt(W);if(g[String(W)]!==void 0)return B.error("Branch labels must be unique.");g[String(W)]=y.length}let F=i.parse(D,P,h);if(!F)return null;h=h||F.type,y.push(F)}let x=i.parse(e[1],1,Rt);if(!x)return null;let S=i.parse(e[e.length-1],e.length-1,h);return S?x.type.kind!=="value"&&i.concat(1).checkSubtype(l,x.type)?null:new ei(l,h,x,g,y,S):null}evaluate(e){let i=this.input.evaluate(e);return(Jt(i)===this.inputType&&this.outputs[this.cases[i]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))&&this.otherwise.outputDefined()}}class ho{constructor(e,i,l){this.type=e,this.branches=i,this.otherwise=l}static parse(e,i){if(e.length<4)return i.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return i.error("Expected an odd number of arguments.");let l;i.expectedType&&i.expectedType.kind!=="value"&&(l=i.expectedType);let h=[];for(let y=1;y<e.length-1;y+=2){let x=i.parse(e[y],y,zt);if(!x)return null;let S=i.parse(e[y+1],y+1,l);if(!S)return null;h.push([x,S]),l=l||S.type}let g=i.parse(e[e.length-1],e.length-1,l);if(!g)return null;if(!l)throw new Error("Can't infer output type");return new ho(l,h,g)}evaluate(e){for(let[i,l]of this.branches)if(i.evaluate(e))return l.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(let[i,l]of this.branches)e(i),e(l);e(this.otherwise)}outputDefined(){return this.branches.every((([e,i])=>i.outputDefined()))&&this.otherwise.outputDefined()}}class pn{constructor(e,i,l,h){this.type=e,this.input=i,this.beginIndex=l,this.endIndex=h}static parse(e,i){if(e.length<=2||e.length>=5)return i.error(`Expected 2 or 3 arguments, but found ${e.length-1} instead.`);let l=i.parse(e[1],1,Rt),h=i.parse(e[2],2,at);if(!l||!h)return null;if(!Ps(l.type,[Vr(Rt),jt,Rt]))return i.error(`Expected first argument to be of type array or string, but found ${gi(l.type)} instead`);if(e.length===4){let g=i.parse(e[3],3,at);return g?new pn(l.type,l,h,g):null}return new pn(l.type,l,h)}evaluate(e){let i=this.input.evaluate(e),l=this.beginIndex.evaluate(e),h;if(this.endIndex&&(h=this.endIndex.evaluate(e)),Aa(i,["string"]))return[...i].slice(l,h).join("");if(Aa(i,["array"]))return i.slice(l,h);throw new xi(`Expected first argument to be of type array or string, but found ${gi(Jt(i))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function Is(r,e){let i=r.length-1,l,h,g=0,y=i,x=0;for(;g<=y;)if(x=Math.floor((g+y)/2),l=r[x],h=r[x+1],l<=e){if(x===i||e<h)return x;g=x+1}else{if(!(l>e))throw new xi("Input is not a number.");y=x-1}return 0}class Da{constructor(e,i,l){this.type=e,this.input=i,this.labels=[],this.outputs=[];for(let[h,g]of l)this.labels.push(h),this.outputs.push(g)}static parse(e,i){if(e.length-1<4)return i.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return i.error("Expected an even number of arguments.");let l=i.parse(e[1],1,at);if(!l)return null;let h=[],g=null;i.expectedType&&i.expectedType.kind!=="value"&&(g=i.expectedType);for(let y=1;y<e.length;y+=2){let x=y===1?-1/0:e[y],S=e[y+1],P=y,A=y+1;if(typeof x!="number")return i.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',P);if(h.length&&h[h.length-1][0]>=x)return i.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',P);let D=i.parse(S,A,g);if(!D)return null;g=g||D.type,h.push([x,D])}return new Da(g,l,h)}evaluate(e){let i=this.labels,l=this.outputs;if(i.length===1)return l[0].evaluate(e);let h=this.input.evaluate(e);if(h<=i[0])return l[0].evaluate(e);let g=i.length;return h>=i[g-1]?l[g-1].evaluate(e):l[Is(i,h)].evaluate(e)}eachChild(e){e(this.input);for(let i of this.outputs)e(i)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}}function Jo(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var po,Cn,Yu=(function(){if(Cn)return po;function r(e,i,l,h){this.cx=3*e,this.bx=3*(l-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(h-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=i,this.p2x=l,this.p2y=h}return Cn=1,po=r,r.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,i){if(i===void 0&&(i=1e-6),e<0)return 0;if(e>1)return 1;for(var l=e,h=0;h<8;h++){var g=this.sampleCurveX(l)-e;if(Math.abs(g)<i)return l;var y=this.sampleCurveDerivativeX(l);if(Math.abs(y)<1e-6)break;l-=g/y}var x=0,S=1;for(l=e,h=0;h<20&&(g=this.sampleCurveX(l),!(Math.abs(g-e)<i));h++)e>g?x=l:S=l,l=.5*(S-x)+x;return l},solve:function(e,i){return this.sampleCurveY(this.solveCurveX(e,i))}},po})(),jl=Jo(Yu);class Xi{constructor(e,i,l,h,g){this.type=e,this.operator=i,this.interpolation=l,this.input=h,this.labels=[],this.outputs=[];for(let[y,x]of g)this.labels.push(y),this.outputs.push(x)}static interpolationFactor(e,i,l,h){let g=0;if(e.name==="exponential")g=Fn(i,e.base,l,h);else if(e.name==="linear")g=Fn(i,1,l,h);else if(e.name==="cubic-bezier"){let y=e.controlPoints;g=new jl(y[0],y[1],y[2],y[3]).solve(Fn(i,1,l,h))}return g}static parse(e,i){let[l,h,g,...y]=e;if(!Array.isArray(h)||h.length===0)return i.error("Expected an interpolation type expression.",1);if(h[0]==="linear")h={name:"linear"};else if(h[0]==="exponential"){let P=h[1];if(typeof P!="number")return i.error("Exponential interpolation requires a numeric base.",1,1);h={name:"exponential",base:P}}else{if(h[0]!=="cubic-bezier")return i.error(`Unknown interpolation type ${String(h[0])}`,1,0);{let P=h.slice(1);if(P.length!==4||P.some((A=>typeof A!="number"||A<0||A>1)))return i.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);h={name:"cubic-bezier",controlPoints:P}}}if(e.length-1<4)return i.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return i.error("Expected an even number of arguments.");if(g=i.parse(g,2,at),!g)return null;let x=[],S=null;l!=="interpolate-hcl"&&l!=="interpolate-lab"||i.expectedType==ua?i.expectedType&&i.expectedType.kind!=="value"&&(S=i.expectedType):S=Qr;for(let P=0;P<y.length;P+=2){let A=y[P],D=y[P+1],B=P+3,F=P+4;if(typeof A!="number")return i.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',B);if(x.length&&x[x.length-1][0]>=A)return i.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',B);let W=i.parse(D,F,S);if(!W)return null;S=S||W.type,x.push([A,W])}return Wr(S,at)||Wr(S,$o)||Wr(S,Qr)||Wr(S,Ho)||Wr(S,ao)||Wr(S,ua)||Wr(S,so)||Wr(S,Vr(at))?new Xi(S,l,h,g,x):i.error(`Type ${gi(S)} is not interpolatable.`)}evaluate(e){let i=this.labels,l=this.outputs;if(i.length===1)return l[0].evaluate(e);let h=this.input.evaluate(e);if(h<=i[0])return l[0].evaluate(e);let g=i.length;if(h>=i[g-1])return l[g-1].evaluate(e);let y=Is(i,h),x=Xi.interpolationFactor(this.interpolation,h,i[y],i[y+1]),S=l[y].evaluate(e),P=l[y+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return On(S,P,x);case"color":return Bt.interpolate(S,P,x);case"padding":return vt.interpolate(S,P,x);case"colorArray":return ct.interpolate(S,P,x);case"numberArray":return ci.interpolate(S,P,x);case"variableAnchorOffsetCollection":return Tr.interpolate(S,P,x);case"array":return Ia(S,P,x);case"projectionDefinition":return tr.interpolate(S,P,x)}case"interpolate-hcl":switch(this.type.kind){case"color":return Bt.interpolate(S,P,x,"hcl");case"colorArray":return ct.interpolate(S,P,x,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Bt.interpolate(S,P,x,"lab");case"colorArray":return ct.interpolate(S,P,x,"lab")}}}eachChild(e){e(this.input);for(let i of this.outputs)e(i)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}}function Fn(r,e,i,l){let h=l-i,g=r-i;return h===0?0:e===1?g/h:(Math.pow(e,g)-1)/(Math.pow(e,h)-1)}let Li={color:Bt.interpolate,number:On,padding:vt.interpolate,numberArray:ci.interpolate,colorArray:ct.interpolate,variableAnchorOffsetCollection:Tr.interpolate,array:Ia};class pa{constructor(e,i){this.type=e,this.args=i}static parse(e,i){if(e.length<2)return i.error("Expected at least one argument.");let l=null,h=i.expectedType;h&&h.kind!=="value"&&(l=h);let g=[];for(let x of e.slice(1)){let S=i.parse(x,1+g.length,l,void 0,{typeAnnotation:"omit"});if(!S)return null;l=l||S.type,g.push(S)}if(!l)throw new Error("No output type");let y=h&&g.some((x=>Xn(h,x.type)));return new pa(y?Rt:l,g)}evaluate(e){let i,l=null,h=0;for(let g of this.args)if(h++,l=g.evaluate(e),l&&l instanceof Ur&&!l.available&&(i||(i=l.name),l=null,h===this.args.length&&(l=i)),l!==null)break;return l}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}function Nl(r,e){return r==="=="||r==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function zs(r,e,i,l){return l.compare(e,i)===0}function Fi(r,e,i){let l=r!=="=="&&r!=="!=";return class gE{constructor(g,y,x){this.type=zt,this.lhs=g,this.rhs=y,this.collator=x,this.hasUntypedArgument=g.type.kind==="value"||y.type.kind==="value"}static parse(g,y){if(g.length!==3&&g.length!==4)return y.error("Expected two or three arguments.");let x=g[0],S=y.parse(g[1],1,Rt);if(!S)return null;if(!Nl(x,S.type))return y.concat(1).error(`"${x}" comparisons are not supported for type '${gi(S.type)}'.`);let P=y.parse(g[2],2,Rt);if(!P)return null;if(!Nl(x,P.type))return y.concat(2).error(`"${x}" comparisons are not supported for type '${gi(P.type)}'.`);if(S.type.kind!==P.type.kind&&S.type.kind!=="value"&&P.type.kind!=="value")return y.error(`Cannot compare types '${gi(S.type)}' and '${gi(P.type)}'.`);l&&(S.type.kind==="value"&&P.type.kind!=="value"?S=new en(P.type,[S]):S.type.kind!=="value"&&P.type.kind==="value"&&(P=new en(S.type,[P])));let A=null;if(g.length===4){if(S.type.kind!=="string"&&P.type.kind!=="string"&&S.type.kind!=="value"&&P.type.kind!=="value")return y.error("Cannot use collator to compare non-string types.");if(A=y.parse(g[3],3,no),!A)return null}return new gE(S,P,A)}evaluate(g){let y=this.lhs.evaluate(g),x=this.rhs.evaluate(g);if(l&&this.hasUntypedArgument){let S=Jt(y),P=Jt(x);if(S.kind!==P.kind||S.kind!=="string"&&S.kind!=="number")throw new xi(`Expected arguments for "${r}" to be (string, string) or (number, number), but found (${S.kind}, ${P.kind}) instead.`)}if(this.collator&&!l&&this.hasUntypedArgument){let S=Jt(y),P=Jt(x);if(S.kind!=="string"||P.kind!=="string")return e(g,y,x)}return this.collator?i(g,y,x,this.collator.evaluate(g)):e(g,y,x)}eachChild(g){g(this.lhs),g(this.rhs),this.collator&&g(this.collator)}outputDefined(){return!0}}}let Tc=Fi("==",(function(r,e,i){return e===i}),zs),ql=Fi("!=",(function(r,e,i){return e!==i}),(function(r,e,i,l){return!zs(0,e,i,l)})),el=Fi("<",(function(r,e,i){return e<i}),(function(r,e,i,l){return l.compare(e,i)<0})),Xu=Fi(">",(function(r,e,i){return e>i}),(function(r,e,i,l){return l.compare(e,i)>0})),is=Fi("<=",(function(r,e,i){return e<=i}),(function(r,e,i,l){return l.compare(e,i)<=0})),fo=Fi(">=",(function(r,e,i){return e>=i}),(function(r,e,i,l){return l.compare(e,i)>=0}));class fa{constructor(e,i,l){this.type=no,this.locale=l,this.caseSensitive=e,this.diacriticSensitive=i}static parse(e,i){if(e.length!==2)return i.error("Expected one argument.");let l=e[1];if(typeof l!="object"||Array.isArray(l))return i.error("Collator options argument must be an object.");let h=i.parse(l["case-sensitive"]!==void 0&&l["case-sensitive"],1,zt);if(!h)return null;let g=i.parse(l["diacritic-sensitive"]!==void 0&&l["diacritic-sensitive"],1,zt);if(!g)return null;let y=null;return l.locale&&(y=i.parse(l.locale,1,jt),!y)?null:new fa(h,g,y)}evaluate(e){return new As(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class ma{constructor(e,i,l,h,g){this.type=jt,this.number=e,this.locale=i,this.currency=l,this.minFractionDigits=h,this.maxFractionDigits=g}static parse(e,i){if(e.length!==3)return i.error("Expected two arguments.");let l=i.parse(e[1],1,at);if(!l)return null;let h=e[2];if(typeof h!="object"||Array.isArray(h))return i.error("NumberFormat options argument must be an object.");let g=null;if(h.locale&&(g=i.parse(h.locale,1,jt),!g))return null;let y=null;if(h.currency&&(y=i.parse(h.currency,1,jt),!y))return null;let x=null;if(h["min-fraction-digits"]&&(x=i.parse(h["min-fraction-digits"],1,at),!x))return null;let S=null;return h["max-fraction-digits"]&&(S=i.parse(h["max-fraction-digits"],1,at),!S)?null:new ma(l,g,y,x,S)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class mo{constructor(e){this.type=Ts,this.sections=e}static parse(e,i){if(e.length<2)return i.error("Expected at least one argument.");let l=e[1];if(!Array.isArray(l)&&typeof l=="object")return i.error("First argument must be an image or text section.");let h=[],g=!1;for(let y=1;y<=e.length-1;++y){let x=e[y];if(g&&typeof x=="object"&&!Array.isArray(x)){g=!1;let S=null;if(x["font-scale"]&&(S=i.parse(x["font-scale"],1,at),!S))return null;let P=null;if(x["text-font"]&&(P=i.parse(x["text-font"],1,Vr(jt)),!P))return null;let A=null;if(x["text-color"]&&(A=i.parse(x["text-color"],1,Qr),!A))return null;let D=null;if(x["vertical-align"]){if(typeof x["vertical-align"]=="string"&&!wc.includes(x["vertical-align"]))return i.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${x["vertical-align"]}' instead.`);if(D=i.parse(x["vertical-align"],1,jt),!D)return null}let B=h[h.length-1];B.scale=S,B.font=P,B.textColor=A,B.verticalAlign=D}else{let S=i.parse(e[y],1,Rt);if(!S)return null;let P=S.type.kind;if(P!=="string"&&P!=="value"&&P!=="null"&&P!=="resolvedImage")return i.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");g=!0,h.push({content:S,scale:null,font:null,textColor:null,verticalAlign:null})}}return new mo(h)}evaluate(e){return new Jr(this.sections.map((i=>{let l=i.content.evaluate(e);return Jt(l)===Cs?new co("",l,null,null,null,i.verticalAlign?i.verticalAlign.evaluate(e):null):new co(hn(l),null,i.scale?i.scale.evaluate(e):null,i.font?i.font.evaluate(e).join(","):null,i.textColor?i.textColor.evaluate(e):null,i.verticalAlign?i.verticalAlign.evaluate(e):null)})))}eachChild(e){for(let i of this.sections)e(i.content),i.scale&&e(i.scale),i.font&&e(i.font),i.textColor&&e(i.textColor),i.verticalAlign&&e(i.verticalAlign)}outputDefined(){return!1}}class Jn{constructor(e){this.type=Cs,this.input=e}static parse(e,i){if(e.length!==2)return i.error("Expected two arguments.");let l=i.parse(e[1],1,jt);return l?new Jn(l):i.error("No image name provided.")}evaluate(e){let i=this.input.evaluate(e),l=Ur.fromString(i);return l&&e.availableImages&&(l.available=e.availableImages.indexOf(i)>-1),l}eachChild(e){e(this.input)}outputDefined(){return!1}}class Cr{constructor(e){this.type=at,this.input=e}static parse(e,i){if(e.length!==2)return i.error(`Expected 1 argument, but found ${e.length-1} instead.`);let l=i.parse(e[1],1);return l?l.type.kind!=="array"&&l.type.kind!=="string"&&l.type.kind!=="value"?i.error(`Expected argument of type string or array, but found ${gi(l.type)} instead.`):new Cr(l):null}evaluate(e){let i=this.input.evaluate(e);if(typeof i=="string")return[...i].length;if(Array.isArray(i))return i.length;throw new xi(`Expected value to be of type string or array, but found ${gi(Jt(i))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}let ir=8192;function Vl(r,e){let i=(180+r[0])/360,l=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r[1]*Math.PI/360)))/360,h=Math.pow(2,e.z);return[Math.round(i*h*ir),Math.round(l*h*ir)]}function Ls(r,e){let i=Math.pow(2,e.z);return[(h=(r[0]/ir+e.x)/i,360*h-180),(l=(r[1]/ir+e.y)/i,360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90)];var l,h}function rs(r,e){r[0]=Math.min(r[0],e[0]),r[1]=Math.min(r[1],e[1]),r[2]=Math.max(r[2],e[0]),r[3]=Math.max(r[3],e[1])}function ga(r,e){return!(r[0]<=e[0]||r[2]>=e[2]||r[1]<=e[1]||r[3]>=e[3])}function Ku(r,e,i){let l=r[0]-e[0],h=r[1]-e[1],g=r[0]-i[0],y=r[1]-i[1];return l*y-g*h==0&&l*g<=0&&h*y<=0}function tl(r,e,i,l){return(h=[l[0]-i[0],l[1]-i[1]])[0]*(g=[e[0]-r[0],e[1]-r[1]])[1]-h[1]*g[0]!=0&&!(!jn(r,e,i,l)||!jn(i,l,r,e));var h,g}function Cc(r,e,i){for(let l of i)for(let h=0;h<l.length-1;++h)if(tl(r,e,l[h],l[h+1]))return!0;return!1}function Ds(r,e,i=!1){let l=!1;for(let x of e)for(let S=0;S<x.length-1;S++){if(Ku(r,x[S],x[S+1]))return i;(g=x[S])[1]>(h=r)[1]!=(y=x[S+1])[1]>h[1]&&h[0]<(y[0]-g[0])*(h[1]-g[1])/(y[1]-g[1])+g[0]&&(l=!l)}var h,g,y;return l}function tn(r,e){for(let i of e)if(Ds(r,i))return!0;return!1}function ns(r,e){for(let i of r)if(!Ds(i,e))return!1;for(let i=0;i<r.length-1;++i)if(Cc(r[i],r[i+1],e))return!1;return!0}function kc(r,e){for(let i of e)if(ns(r,i))return!0;return!1}function jn(r,e,i,l){let h=l[0]-i[0],g=l[1]-i[1],y=(r[0]-i[0])*g-h*(r[1]-i[1]),x=(e[0]-i[0])*g-h*(e[1]-i[1]);return y>0&&x<0||y<0&&x>0}function Wl(r,e,i){let l=[];for(let h=0;h<r.length;h++){let g=[];for(let y=0;y<r[h].length;y++){let x=Vl(r[h][y],i);rs(e,x),g.push(x)}l.push(g)}return l}function Oa(r,e,i){let l=[];for(let h=0;h<r.length;h++){let g=Wl(r[h],e,i);l.push(g)}return l}function Pc(r,e,i,l){if(r[0]<i[0]||r[0]>i[2]){let h=.5*l,g=r[0]-i[0]>h?-l:i[0]-r[0]>h?l:0;g===0&&(g=r[0]-i[2]>h?-l:i[2]-r[0]>h?l:0),r[0]+=g}rs(e,r)}function Os(r,e,i,l){let h=Math.pow(2,l.z)*ir,g=[l.x*ir,l.y*ir],y=[];for(let x of r)for(let S of x){let P=[S.x+g[0],S.y+g[1]];Pc(P,e,i,h),y.push(P)}return y}function Gl(r,e,i,l){let h=Math.pow(2,l.z)*ir,g=[l.x*ir,l.y*ir],y=[];for(let S of r){let P=[];for(let A of S){let D=[A.x+g[0],A.y+g[1]];rs(e,D),P.push(D)}y.push(P)}if(e[2]-e[0]<=h/2){(x=e)[0]=x[1]=1/0,x[2]=x[3]=-1/0;for(let S of y)for(let P of S)Pc(P,e,i,h)}var x;return y}class ea{constructor(e,i){this.type=zt,this.geojson=e,this.geometries=i}static parse(e,i){if(e.length!==2)return i.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Tn(e[1])){let l=e[1];if(l.type==="FeatureCollection"){let h=[];for(let g of l.features){let{type:y,coordinates:x}=g.geometry;y==="Polygon"&&h.push(x),y==="MultiPolygon"&&h.push(...x)}if(h.length)return new ea(l,{type:"MultiPolygon",coordinates:h})}else if(l.type==="Feature"){let h=l.geometry.type;if(h==="Polygon"||h==="MultiPolygon")return new ea(l,l.geometry)}else if(l.type==="Polygon"||l.type==="MultiPolygon")return new ea(l,l)}return i.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return(function(i,l){let h=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],y=i.canonicalID();if(l.type==="Polygon"){let x=Wl(l.coordinates,g,y),S=Os(i.geometry(),h,g,y);if(!ga(h,g))return!1;for(let P of S)if(!Ds(P,x))return!1}if(l.type==="MultiPolygon"){let x=Oa(l.coordinates,g,y),S=Os(i.geometry(),h,g,y);if(!ga(h,g))return!1;for(let P of S)if(!tn(P,x))return!1}return!0})(e,this.geometries);if(e.geometryType()==="LineString")return(function(i,l){let h=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],y=i.canonicalID();if(l.type==="Polygon"){let x=Wl(l.coordinates,g,y),S=Gl(i.geometry(),h,g,y);if(!ga(h,g))return!1;for(let P of S)if(!ns(P,x))return!1}if(l.type==="MultiPolygon"){let x=Oa(l.coordinates,g,y),S=Gl(i.geometry(),h,g,y);if(!ga(h,g))return!1;for(let P of S)if(!kc(P,x))return!1}return!0})(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Ec=class{constructor(r=[],e=(i,l)=>i<l?-1:i>l?1:0){if(this.data=r,this.length=this.data.length,this.compare=e,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(r){this.data.push(r),this._up(this.length++)}pop(){if(this.length===0)return;let r=this.data[0],e=this.data.pop();return--this.length>0&&(this.data[0]=e,this._down(0)),r}peek(){return this.data[0]}_up(r){let{data:e,compare:i}=this,l=e[r];for(;r>0;){let h=r-1>>1,g=e[h];if(i(l,g)>=0)break;e[r]=g,r=h}e[r]=l}_down(r){let{data:e,compare:i}=this,l=this.length>>1,h=e[r];for(;r<l;){let g=1+(r<<1),y=g+1;if(y<this.length&&i(e[y],e[g])<0&&(g=y),i(e[g],h)>=0)break;e[r]=e[g],r=g}e[r]=h}};function ta(r,e,i=0,l=r.length-1,h=Ac){for(;l>i;){if(l-i>600){let S=l-i+1,P=e-i+1,A=Math.log(S),D=.5*Math.exp(2*A/3),B=.5*Math.sqrt(A*D*(S-D)/S)*(P-S/2<0?-1:1);ta(r,e,Math.max(i,Math.floor(e-P*D/S+B)),Math.min(l,Math.floor(e+(S-P)*D/S+B)),h)}let g=r[e],y=i,x=l;for(ya(r,i,e),h(r[l],g)>0&&ya(r,i,l);y<x;){for(ya(r,y,x),y++,x--;h(r[y],g)<0;)y++;for(;h(r[x],g)>0;)x--}h(r[i],g)===0?ya(r,i,x):(x++,ya(r,x,l)),x<=e&&(i=x+1),e<=x&&(l=x-1)}}function ya(r,e,i){let l=r[e];r[e]=r[i],r[i]=l}function Ac(r,e){return r<e?-1:r>e?1:0}function Rs(r,e){if(r.length<=1)return[r];let i=[],l,h;for(let g of r){let y=_a(g);y!==0&&(g.area=Math.abs(y),h===void 0&&(h=y<0),h===y<0?(l&&i.push(l),l=[g]):l.push(g))}if(l&&i.push(l),e>1)for(let g=0;g<i.length;g++)i[g].length<=e||(ta(i[g],e,1,i[g].length-1,Qu),i[g]=i[g].slice(0,e));return i}function Qu(r,e){return e.area-r.area}function _a(r){let e=0;for(let i,l,h=0,g=r.length,y=g-1;h<g;y=h++)i=r[h],l=r[y],e+=(l.x-i.x)*(i.y+l.y);return e}let Mc=1/298.257223563,ia=Mc*(2-Mc),Ic=Math.PI/180;class Nn{constructor(e){let i=6378.137*Ic*1e3,l=Math.cos(e*Ic),h=1/(1-ia*(1-l*l)),g=Math.sqrt(h);this.kx=i*g*l,this.ky=i*g*h*(1-ia)}distance(e,i){let l=this.wrap(e[0]-i[0])*this.kx,h=(e[1]-i[1])*this.ky;return Math.sqrt(l*l+h*h)}pointOnLine(e,i){let l,h,g,y,x=1/0;for(let S=0;S<e.length-1;S++){let P=e[S][0],A=e[S][1],D=this.wrap(e[S+1][0]-P)*this.kx,B=(e[S+1][1]-A)*this.ky,F=0;D===0&&B===0||(F=(this.wrap(i[0]-P)*this.kx*D+(i[1]-A)*this.ky*B)/(D*D+B*B),F>1?(P=e[S+1][0],A=e[S+1][1]):F>0&&(P+=D/this.kx*F,A+=B/this.ky*F)),D=this.wrap(i[0]-P)*this.kx,B=(i[1]-A)*this.ky;let W=D*D+B*B;W<x&&(x=W,l=P,h=A,g=S,y=F)}return{point:[l,h],index:g,t:Math.max(0,Math.min(1,y))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}function go(r,e){return e[0]-r[0]}function yo(r){return r[1]-r[0]+1}function fn(r,e){return r[1]>=r[0]&&r[1]<e}function as(r,e){if(r[0]>r[1])return[null,null];let i=yo(r);if(e){if(i===2)return[r,null];let h=Math.floor(i/2);return[[r[0],r[0]+h],[r[0]+h,r[1]]]}if(i===1)return[r,null];let l=Math.floor(i/2)-1;return[[r[0],r[0]+l],[r[0]+l+1,r[1]]]}function _o(r,e){if(!fn(e,r.length))return[1/0,1/0,-1/0,-1/0];let i=[1/0,1/0,-1/0,-1/0];for(let l=e[0];l<=e[1];++l)rs(i,r[l]);return i}function Bs(r){let e=[1/0,1/0,-1/0,-1/0];for(let i of r)for(let l of i)rs(e,l);return e}function Ra(r){return r[0]!==-1/0&&r[1]!==-1/0&&r[2]!==1/0&&r[3]!==1/0}function ss(r,e,i){if(!Ra(r)||!Ra(e))return NaN;let l=0,h=0;return r[2]<e[0]&&(l=e[0]-r[2]),r[0]>e[2]&&(l=r[0]-e[2]),r[1]>e[3]&&(h=r[1]-e[3]),r[3]<e[1]&&(h=e[1]-r[3]),i.distance([0,0],[l,h])}function va(r,e,i){let l=i.pointOnLine(e,r);return i.distance(r,l.point)}function il(r,e,i,l,h){let g=Math.min(va(r,[i,l],h),va(e,[i,l],h)),y=Math.min(va(i,[r,e],h),va(l,[r,e],h));return Math.min(g,y)}function Ju(r,e,i,l,h){if(!fn(e,r.length)||!fn(l,i.length))return 1/0;let g=1/0;for(let y=e[0];y<e[1];++y){let x=r[y],S=r[y+1];for(let P=l[0];P<l[1];++P){let A=i[P],D=i[P+1];if(tl(x,S,A,D))return 0;g=Math.min(g,il(x,S,A,D,h))}}return g}function vo(r,e,i,l,h){if(!fn(e,r.length)||!fn(l,i.length))return NaN;let g=1/0;for(let y=e[0];y<=e[1];++y)for(let x=l[0];x<=l[1];++x)if(g=Math.min(g,h.distance(r[y],i[x])),g===0)return g;return g}function ed(r,e,i){if(Ds(r,e,!0))return 0;let l=1/0;for(let h of e){let g=h[0],y=h[h.length-1];if(g!==y&&(l=Math.min(l,va(r,[y,g],i)),l===0))return l;let x=i.pointOnLine(h,r);if(l=Math.min(l,i.distance(r,x.point)),l===0)return l}return l}function zc(r,e,i,l){if(!fn(e,r.length))return NaN;for(let g=e[0];g<=e[1];++g)if(Ds(r[g],i,!0))return 0;let h=1/0;for(let g=e[0];g<e[1];++g){let y=r[g],x=r[g+1];for(let S of i)for(let P=0,A=S.length,D=A-1;P<A;D=P++){let B=S[D],F=S[P];if(tl(y,x,B,F))return 0;h=Math.min(h,il(y,x,B,F,l))}}return h}function Lc(r,e){for(let i of r)for(let l of i)if(Ds(l,e,!0))return!0;return!1}function Dc(r,e,i,l=1/0){let h=Bs(r),g=Bs(e);if(l!==1/0&&ss(h,g,i)>=l)return l;if(ga(h,g)){if(Lc(r,e))return 0}else if(Lc(e,r))return 0;let y=1/0;for(let x of r)for(let S=0,P=x.length,A=P-1;S<P;A=S++){let D=x[A],B=x[S];for(let F of e)for(let W=0,U=F.length,$=U-1;W<U;$=W++){let J=F[$],ue=F[W];if(tl(D,B,J,ue))return 0;y=Math.min(y,il(D,B,J,ue,i))}}return y}function ui(r,e,i,l,h,g){if(!g)return;let y=ss(_o(l,g),h,i);y<e&&r.push([y,g,[0,0]])}function mn(r,e,i,l,h,g,y){if(!g||!y)return;let x=ss(_o(l,g),_o(h,y),i);x<e&&r.push([x,g,y])}function os(r,e,i,l,h=1/0){let g=Math.min(l.distance(r[0],i[0][0]),h);if(g===0)return g;let y=new Ec([[0,[0,r.length-1],[0,0]]],go),x=Bs(i);for(;y.length>0;){let S=y.pop();if(S[0]>=g)continue;let P=S[1],A=e?50:100;if(yo(P)<=A){if(!fn(P,r.length))return NaN;if(e){let D=zc(r,P,i,l);if(isNaN(D)||D===0)return D;g=Math.min(g,D)}else for(let D=P[0];D<=P[1];++D){let B=ed(r[D],i,l);if(g=Math.min(g,B),g===0)return 0}}else{let D=as(P,e);ui(y,g,l,r,x,D[0]),ui(y,g,l,r,x,D[1])}}return g}function rl(r,e,i,l,h,g=1/0){let y=Math.min(g,h.distance(r[0],i[0]));if(y===0)return y;let x=new Ec([[0,[0,r.length-1],[0,i.length-1]]],go);for(;x.length>0;){let S=x.pop();if(S[0]>=y)continue;let P=S[1],A=S[2],D=e?50:100,B=l?50:100;if(yo(P)<=D&&yo(A)<=B){if(!fn(P,r.length)&&fn(A,i.length))return NaN;let F;if(e&&l)F=Ju(r,P,i,A,h),y=Math.min(y,F);else if(e&&!l){let W=r.slice(P[0],P[1]+1);for(let U=A[0];U<=A[1];++U)if(F=va(i[U],W,h),y=Math.min(y,F),y===0)return y}else if(!e&&l){let W=i.slice(A[0],A[1]+1);for(let U=P[0];U<=P[1];++U)if(F=va(r[U],W,h),y=Math.min(y,F),y===0)return y}else F=vo(r,P,i,A,h),y=Math.min(y,F)}else{let F=as(P,e),W=as(A,l);mn(x,y,h,r,i,F[0],W[0]),mn(x,y,h,r,i,F[0],W[1]),mn(x,y,h,r,i,F[1],W[0]),mn(x,y,h,r,i,F[1],W[1])}}return y}function Fs(r){return r.type==="MultiPolygon"?r.coordinates.map((e=>({type:"Polygon",coordinates:e}))):r.type==="MultiLineString"?r.coordinates.map((e=>({type:"LineString",coordinates:e}))):r.type==="MultiPoint"?r.coordinates.map((e=>({type:"Point",coordinates:e}))):[r]}class ls{constructor(e,i){this.type=at,this.geojson=e,this.geometries=i}static parse(e,i){if(e.length!==2)return i.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Tn(e[1])){let l=e[1];if(l.type==="FeatureCollection")return new ls(l,l.features.map((h=>Fs(h.geometry))).flat());if(l.type==="Feature")return new ls(l,Fs(l.geometry));if("type"in l&&"coordinates"in l)return new ls(l,Fs(l))}return i.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return(function(i,l){let h=i.geometry(),g=h.flat().map((S=>Ls([S.x,S.y],i.canonical)));if(h.length===0)return NaN;let y=new Nn(g[0][1]),x=1/0;for(let S of l){switch(S.type){case"Point":x=Math.min(x,rl(g,!1,[S.coordinates],!1,y,x));break;case"LineString":x=Math.min(x,rl(g,!1,S.coordinates,!0,y,x));break;case"Polygon":x=Math.min(x,os(g,!1,S.coordinates,y,x))}if(x===0)return x}return x})(e,this.geometries);if(e.geometryType()==="LineString")return(function(i,l){let h=i.geometry(),g=h.flat().map((S=>Ls([S.x,S.y],i.canonical)));if(h.length===0)return NaN;let y=new Nn(g[0][1]),x=1/0;for(let S of l){switch(S.type){case"Point":x=Math.min(x,rl(g,!0,[S.coordinates],!1,y,x));break;case"LineString":x=Math.min(x,rl(g,!0,S.coordinates,!0,y,x));break;case"Polygon":x=Math.min(x,os(g,!0,S.coordinates,y,x))}if(x===0)return x}return x})(e,this.geometries);if(e.geometryType()==="Polygon")return(function(i,l){let h=i.geometry();if(h.length===0||h[0].length===0)return NaN;let g=Rs(h,0).map((S=>S.map((P=>P.map((A=>Ls([A.x,A.y],i.canonical))))))),y=new Nn(g[0][0][0][1]),x=1/0;for(let S of l)for(let P of g){switch(S.type){case"Point":x=Math.min(x,os([S.coordinates],!1,P,y,x));break;case"LineString":x=Math.min(x,os(S.coordinates,!0,P,y,x));break;case"Polygon":x=Math.min(x,Dc(P,S.coordinates,y,x))}if(x===0)return x}return x})(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class js{constructor(e){this.type=Rt,this.key=e}static parse(e,i){if(e.length!==2)return i.error(`Expected 1 argument, but found ${e.length-1} instead.`);let l=e[1];return l==null?i.error("Global state property must be defined."):typeof l!="string"?i.error(`Global state property must be string, but found ${typeof e[1]} instead.`):new js(l)}evaluate(e){var i;let l=(i=e.globals)===null||i===void 0?void 0:i.globalState;return l&&Object.keys(l).length!==0?ha(l,this.key):null}eachChild(){}outputDefined(){return!1}}let Ns={"==":Tc,"!=":ql,">":Xu,"<":el,">=":fo,"<=":is,array:en,at:Zt,boolean:en,case:ho,coalesce:pa,collator:fa,format:mo,image:Jn,in:Ot,"index-of":Ms,interpolate:Xi,"interpolate-hcl":Xi,"interpolate-lab":Xi,length:Cr,let:Pi,literal:Rn,match:ei,number:en,"number-format":ma,object:en,slice:pn,step:Da,string:en,"to-boolean":Bn,"to-color":Bn,"to-number":Bn,"to-string":Bn,var:Lr,within:ea,distance:ls,"global-state":js};class Dr{constructor(e,i,l,h){this.name=e,this.type=i,this._evaluate=l,this.args=h}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,i){let l=e[0],h=Dr.definitions[l];if(!h)return i.error(`Unknown expression "${l}". If you wanted a literal array, use ["literal", [...]].`,0);let g=Array.isArray(h)?h[0]:h.type,y=Array.isArray(h)?[[h[1],h[2]]]:h.overloads,x=y.filter((([P])=>!Array.isArray(P)||P.length===e.length-1)),S=null;for(let[P,A]of x){S=new Yt(i.registry,al,i.path,null,i.scope);let D=[],B=!1;for(let F=1;F<e.length;F++){let W=e[F],U=Array.isArray(P)?P[F-1]:P.type,$=S.parse(W,1+D.length,U);if(!$){B=!0;break}D.push($)}if(!B)if(Array.isArray(P)&&P.length!==D.length)S.error(`Expected ${P.length} arguments, but found ${D.length} instead.`);else{for(let F=0;F<D.length;F++){let W=Array.isArray(P)?P[F]:P.type,U=D[F];S.concat(F+1).checkSubtype(W,U.type)}if(S.errors.length===0)return new Dr(l,g,A,D)}}if(x.length===1)i.errors.push(...S.errors);else{let P=(x.length?x:y).map((([D])=>{return B=D,Array.isArray(B)?`(${B.map(gi).join(", ")})`:`(${gi(B.type)}...)`;var B})).join(" | "),A=[];for(let D=1;D<e.length;D++){let B=i.parse(e[D],1+A.length);if(!B)return null;A.push(gi(B.type))}i.error(`Expected arguments of type ${P}, but found (${A.join(", ")}) instead.`)}return null}static register(e,i){Dr.definitions=i;for(let l in i)e[l]=Dr}}function Oc(r,[e,i,l,h]){e=e.evaluate(r),i=i.evaluate(r),l=l.evaluate(r);let g=h?h.evaluate(r):1,y=za(e,i,l,g);if(y)throw new xi(y);return new Bt(e/255,i/255,l/255,g,!1)}function cs(r,e){return r in e}function nl(r,e){let i=e[r];return i===void 0?null:i}function Ba(r){return{type:r}}function al(r){if(r instanceof Lr)return al(r.boundExpression);if(r instanceof Dr&&r.name==="error"||r instanceof fa||r instanceof ea||r instanceof ls||r instanceof js)return!1;let e=r instanceof Bn||r instanceof en,i=!0;return r.eachChild((l=>{i=e?i&&al(l):i&&l instanceof Rn})),!!i&&kn(r)&&bo(r,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function kn(r){if(r instanceof Dr&&(r.name==="get"&&r.args.length===1||r.name==="feature-state"||r.name==="has"&&r.args.length===1||r.name==="properties"||r.name==="geometry-type"||r.name==="id"||/^filter-/.test(r.name))||r instanceof ea||r instanceof ls)return!1;let e=!0;return r.eachChild((i=>{e&&!kn(i)&&(e=!1)})),e}function qs(r){if(r instanceof Dr&&r.name==="feature-state")return!1;let e=!0;return r.eachChild((i=>{e&&!qs(i)&&(e=!1)})),e}function bo(r,e){if(r instanceof Dr&&e.indexOf(r.name)>=0)return!1;let i=!0;return r.eachChild((l=>{i&&!bo(l,e)&&(i=!1)})),i}function Vs(r){return{result:"success",value:r}}function Ws(r){return{result:"error",value:r}}function ba(r){return r["property-type"]==="data-driven"||r["property-type"]==="cross-faded-data-driven"}function Gs(r){return!!r.expression&&r.expression.parameters.indexOf("zoom")>-1}function sl(r){return!!r.expression&&r.expression.interpolated}function $t(r){return r instanceof Number?"number":r instanceof String?"string":r instanceof Boolean?"boolean":Array.isArray(r)?"array":r===null?"null":typeof r}function ol(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)&&Jt(r)===ca}function Rc(r){return r}function Ul(r,e){let i=r.stops&&typeof r.stops[0][0]=="object",l=i||!(i||r.property!==void 0),h=r.type||(sl(e)?"exponential":"interval"),g=(function(A){switch(A.type){case"color":return Bt.parse;case"padding":return vt.parse;case"numberArray":return ci.parse;case"colorArray":return ct.parse;default:return null}})(e);if(g&&((r=Ir({},r)).stops&&(r.stops=r.stops.map((A=>[A[0],g(A[1])]))),r.default=g(r.default?r.default:e.default)),r.colorSpace&&(y=r.colorSpace)!=="rgb"&&y!=="hcl"&&y!=="lab")throw new Error(`Unknown color space: "${r.colorSpace}"`);var y;let x=(function(A){switch(A){case"exponential":return jc;case"interval":return Fc;case"categorical":return Bc;case"identity":return Nc;default:throw new Error(`Unknown function type "${A}"`)}})(h),S,P;if(h==="categorical"){S=Object.create(null);for(let A of r.stops)S[A[0]]=A[1];P=typeof r.stops[0][0]}if(i){let A={},D=[];for(let W=0;W<r.stops.length;W++){let U=r.stops[W],$=U[0].zoom;A[$]===void 0&&(A[$]={zoom:$,type:r.type,property:r.property,default:r.default,stops:[]},D.push($)),A[$].stops.push([U[0].value,U[1]])}let B=[];for(let W of D)B.push([A[W].zoom,Ul(A[W],e)]);let F={name:"linear"};return{kind:"composite",interpolationType:F,interpolationFactor:Xi.interpolationFactor.bind(void 0,F),zoomStops:B.map((W=>W[0])),evaluate:({zoom:W},U)=>jc({stops:B,base:r.base},e,W).evaluate(W,U)}}if(l){let A=h==="exponential"?{name:"exponential",base:r.base!==void 0?r.base:1}:null;return{kind:"camera",interpolationType:A,interpolationFactor:Xi.interpolationFactor.bind(void 0,A),zoomStops:r.stops.map((D=>D[0])),evaluate:({zoom:D})=>x(r,e,D,S,P)}}return{kind:"source",evaluate(A,D){let B=D&&D.properties?D.properties[r.property]:void 0;return B===void 0?Us(r.default,e.default):x(r,e,B,S,P)}}}function Us(r,e,i){return r!==void 0?r:e!==void 0?e:i!==void 0?i:void 0}function Bc(r,e,i,l,h){return Us(typeof i===h?l[i]:void 0,r.default,e.default)}function Fc(r,e,i){if($t(i)!=="number")return Us(r.default,e.default);let l=r.stops.length;if(l===1||i<=r.stops[0][0])return r.stops[0][1];if(i>=r.stops[l-1][0])return r.stops[l-1][1];let h=Is(r.stops.map((g=>g[0])),i);return r.stops[h][1]}function jc(r,e,i){let l=r.base!==void 0?r.base:1;if($t(i)!=="number")return Us(r.default,e.default);let h=r.stops.length;if(h===1||i<=r.stops[0][0])return r.stops[0][1];if(i>=r.stops[h-1][0])return r.stops[h-1][1];let g=Is(r.stops.map((A=>A[0])),i),y=(function(A,D,B,F){let W=F-B,U=A-B;return W===0?0:D===1?U/W:(Math.pow(D,U)-1)/(Math.pow(D,W)-1)})(i,l,r.stops[g][0],r.stops[g+1][0]),x=r.stops[g][1],S=r.stops[g+1][1],P=Li[e.type]||Rc;return typeof x.evaluate=="function"?{evaluate(...A){let D=x.evaluate.apply(void 0,A),B=S.evaluate.apply(void 0,A);if(D!==void 0&&B!==void 0)return P(D,B,y,r.colorSpace)}}:P(x,S,y,r.colorSpace)}function Nc(r,e,i){switch(e.type){case"color":i=Bt.parse(i);break;case"formatted":i=Jr.fromString(i.toString());break;case"resolvedImage":i=Ur.fromString(i.toString());break;case"padding":i=vt.parse(i);break;case"colorArray":i=ct.parse(i);break;case"numberArray":i=ci.parse(i);break;default:$t(i)===e.type||e.type==="enum"&&e.values[i]||(i=void 0)}return Us(i,r.default,e.default)}Dr.register(Ns,{error:[{kind:"error"},[jt],(r,[e])=>{throw new xi(e.evaluate(r))}],typeof:[jt,[Rt],(r,[e])=>gi(Jt(e.evaluate(r)))],"to-rgba":[Vr(at,4),[Qr],(r,[e])=>{let[i,l,h,g]=e.evaluate(r).rgb;return[255*i,255*l,255*h,g]}],rgb:[Qr,[at,at,at],Oc],rgba:[Qr,[at,at,at,at],Oc],has:{type:zt,overloads:[[[jt],(r,[e])=>cs(e.evaluate(r),r.properties())],[[jt,ca],(r,[e,i])=>cs(e.evaluate(r),i.evaluate(r))]]},get:{type:Rt,overloads:[[[jt],(r,[e])=>nl(e.evaluate(r),r.properties())],[[jt,ca],(r,[e,i])=>nl(e.evaluate(r),i.evaluate(r))]]},"feature-state":[Rt,[jt],(r,[e])=>nl(e.evaluate(r),r.featureState||{})],properties:[ca,[],r=>r.properties()],"geometry-type":[jt,[],r=>r.geometryType()],id:[Rt,[],r=>r.id()],zoom:[at,[],r=>r.globals.zoom],"heatmap-density":[at,[],r=>r.globals.heatmapDensity||0],elevation:[at,[],r=>r.globals.elevation||0],"line-progress":[at,[],r=>r.globals.lineProgress||0],accumulated:[Rt,[],r=>r.globals.accumulated===void 0?null:r.globals.accumulated],"+":[at,Ba(at),(r,e)=>{let i=0;for(let l of e)i+=l.evaluate(r);return i}],"*":[at,Ba(at),(r,e)=>{let i=1;for(let l of e)i*=l.evaluate(r);return i}],"-":{type:at,overloads:[[[at,at],(r,[e,i])=>e.evaluate(r)-i.evaluate(r)],[[at],(r,[e])=>-e.evaluate(r)]]},"/":[at,[at,at],(r,[e,i])=>e.evaluate(r)/i.evaluate(r)],"%":[at,[at,at],(r,[e,i])=>e.evaluate(r)%i.evaluate(r)],ln2:[at,[],()=>Math.LN2],pi:[at,[],()=>Math.PI],e:[at,[],()=>Math.E],"^":[at,[at,at],(r,[e,i])=>Math.pow(e.evaluate(r),i.evaluate(r))],sqrt:[at,[at],(r,[e])=>Math.sqrt(e.evaluate(r))],log10:[at,[at],(r,[e])=>Math.log(e.evaluate(r))/Math.LN10],ln:[at,[at],(r,[e])=>Math.log(e.evaluate(r))],log2:[at,[at],(r,[e])=>Math.log(e.evaluate(r))/Math.LN2],sin:[at,[at],(r,[e])=>Math.sin(e.evaluate(r))],cos:[at,[at],(r,[e])=>Math.cos(e.evaluate(r))],tan:[at,[at],(r,[e])=>Math.tan(e.evaluate(r))],asin:[at,[at],(r,[e])=>Math.asin(e.evaluate(r))],acos:[at,[at],(r,[e])=>Math.acos(e.evaluate(r))],atan:[at,[at],(r,[e])=>Math.atan(e.evaluate(r))],min:[at,Ba(at),(r,e)=>Math.min(...e.map((i=>i.evaluate(r))))],max:[at,Ba(at),(r,e)=>Math.max(...e.map((i=>i.evaluate(r))))],abs:[at,[at],(r,[e])=>Math.abs(e.evaluate(r))],round:[at,[at],(r,[e])=>{let i=e.evaluate(r);return i<0?-Math.round(-i):Math.round(i)}],floor:[at,[at],(r,[e])=>Math.floor(e.evaluate(r))],ceil:[at,[at],(r,[e])=>Math.ceil(e.evaluate(r))],"filter-==":[zt,[jt,Rt],(r,[e,i])=>r.properties()[e.value]===i.value],"filter-id-==":[zt,[Rt],(r,[e])=>r.id()===e.value],"filter-type-==":[zt,[jt],(r,[e])=>r.geometryType()===e.value],"filter-<":[zt,[jt,Rt],(r,[e,i])=>{let l=r.properties()[e.value],h=i.value;return typeof l==typeof h&&l<h}],"filter-id-<":[zt,[Rt],(r,[e])=>{let i=r.id(),l=e.value;return typeof i==typeof l&&i<l}],"filter->":[zt,[jt,Rt],(r,[e,i])=>{let l=r.properties()[e.value],h=i.value;return typeof l==typeof h&&l>h}],"filter-id->":[zt,[Rt],(r,[e])=>{let i=r.id(),l=e.value;return typeof i==typeof l&&i>l}],"filter-<=":[zt,[jt,Rt],(r,[e,i])=>{let l=r.properties()[e.value],h=i.value;return typeof l==typeof h&&l<=h}],"filter-id-<=":[zt,[Rt],(r,[e])=>{let i=r.id(),l=e.value;return typeof i==typeof l&&i<=l}],"filter->=":[zt,[jt,Rt],(r,[e,i])=>{let l=r.properties()[e.value],h=i.value;return typeof l==typeof h&&l>=h}],"filter-id->=":[zt,[Rt],(r,[e])=>{let i=r.id(),l=e.value;return typeof i==typeof l&&i>=l}],"filter-has":[zt,[Rt],(r,[e])=>e.value in r.properties()],"filter-has-id":[zt,[],r=>r.id()!==null&&r.id()!==void 0],"filter-type-in":[zt,[Vr(jt)],(r,[e])=>e.value.indexOf(r.geometryType())>=0],"filter-id-in":[zt,[Vr(Rt)],(r,[e])=>e.value.indexOf(r.id())>=0],"filter-in-small":[zt,[jt,Vr(Rt)],(r,[e,i])=>i.value.indexOf(r.properties()[e.value])>=0],"filter-in-large":[zt,[jt,Vr(Rt)],(r,[e,i])=>(function(l,h,g,y){for(;g<=y;){let x=g+y>>1;if(h[x]===l)return!0;h[x]>l?y=x-1:g=x+1}return!1})(r.properties()[e.value],i.value,0,i.value.length-1)],all:{type:zt,overloads:[[[zt,zt],(r,[e,i])=>e.evaluate(r)&&i.evaluate(r)],[Ba(zt),(r,e)=>{for(let i of e)if(!i.evaluate(r))return!1;return!0}]]},any:{type:zt,overloads:[[[zt,zt],(r,[e,i])=>e.evaluate(r)||i.evaluate(r)],[Ba(zt),(r,e)=>{for(let i of e)if(i.evaluate(r))return!0;return!1}]]},"!":[zt,[zt],(r,[e])=>!e.evaluate(r)],"is-supported-script":[zt,[jt],(r,[e])=>{let i=r.globals&&r.globals.isSupportedScript;return!i||i(e.evaluate(r))}],upcase:[jt,[jt],(r,[e])=>e.evaluate(r).toUpperCase()],downcase:[jt,[jt],(r,[e])=>e.evaluate(r).toLowerCase()],concat:[jt,Ba(Rt),(r,e)=>e.map((i=>hn(i.evaluate(r)))).join("")],"resolved-locale":[jt,[no],(r,[e])=>e.evaluate(r).resolvedLocale()]});class ll{constructor(e,i,l){this.expression=e,this._warningHistory={},this._evaluator=new Qo,this._defaultValue=i?(function(h){if(h.type==="color"&&ol(h.default))return new Bt(0,0,0,0);switch(h.type){case"color":return Bt.parse(h.default)||null;case"padding":return vt.parse(h.default)||null;case"numberArray":return ci.parse(h.default)||null;case"colorArray":return ct.parse(h.default)||null;case"variableAnchorOffsetCollection":return Tr.parse(h.default)||null;case"projectionDefinition":return tr.parse(h.default)||null;default:return h.default===void 0?null:h.default}})(i):null,this._enumValues=i&&i.type==="enum"?i.values:null,this._globalState=l}evaluateWithoutErrorHandling(e,i,l,h,g,y){return this._globalState&&(e=Me(e,this._globalState)),this._evaluator.globals=e,this._evaluator.feature=i,this._evaluator.featureState=l,this._evaluator.canonical=h,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=y,this.expression.evaluate(this._evaluator)}evaluate(e,i,l,h,g,y){this._globalState&&(e=Me(e,this._globalState)),this._evaluator.globals=e,this._evaluator.feature=i||null,this._evaluator.featureState=l||null,this._evaluator.canonical=h,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=y||null;try{let x=this.expression.evaluate(this._evaluator);if(x==null||typeof x=="number"&&x!=x)return this._defaultValue;if(this._enumValues&&!(x in this._enumValues))throw new xi(`Expected value to be one of ${Object.keys(this._enumValues).map((S=>JSON.stringify(S))).join(", ")}, but found ${JSON.stringify(x)} instead.`);return x}catch(x){return this._warningHistory[x.message]||(this._warningHistory[x.message]=!0,typeof console!="undefined"&&console.warn(x.message)),this._defaultValue}}}function Zs(r){return Array.isArray(r)&&r.length>0&&typeof r[0]=="string"&&r[0]in Ns}function c(r,e,i){let l=new Yt(Ns,al,[],e?(function(g){let y={color:Qr,string:jt,number:at,enum:jt,boolean:zt,formatted:Ts,padding:Ho,numberArray:ao,colorArray:ua,projectionDefinition:$o,resolvedImage:Cs,variableAnchorOffsetCollection:so};return g.type==="array"?Vr(y[g.value]||Rt,g.length):y[g.type]})(e):void 0),h=l.parse(r,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?Vs(new ll(h,e,i)):Ws(l.errors)}class v{constructor(e,i,l){this.kind=e,this._styleExpression=i,this.isStateDependent=e!=="constant"&&!qs(i.expression),this.globalStateRefs=ve(i.expression),this._globalState=l}evaluateWithoutErrorHandling(e,i,l,h,g,y){return this._globalState&&(e=Me(e,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(e,i,l,h,g,y)}evaluate(e,i,l,h,g,y){return this._globalState&&(e=Me(e,this._globalState)),this._styleExpression.evaluate(e,i,l,h,g,y)}}class C{constructor(e,i,l,h,g){this.kind=e,this.zoomStops=l,this._styleExpression=i,this.isStateDependent=e!=="camera"&&!qs(i.expression),this.globalStateRefs=ve(i.expression),this.interpolationType=h,this._globalState=g}evaluateWithoutErrorHandling(e,i,l,h,g,y){return this._globalState&&(e=Me(e,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(e,i,l,h,g,y)}evaluate(e,i,l,h,g,y){return this._globalState&&(e=Me(e,this._globalState)),this._styleExpression.evaluate(e,i,l,h,g,y)}interpolationFactor(e,i,l){return this.interpolationType?Xi.interpolationFactor(this.interpolationType,e,i,l):0}}function I(r,e,i){let l=c(r,e,i);if(l.result==="error")return l;let h=l.value.expression,g=kn(h);if(!g&&!ba(e))return Ws([new zr("","data expressions not supported")]);let y=bo(h,["zoom"]);if(!y&&!Gs(e))return Ws([new zr("","zoom expressions not supported")]);let x=ie(h);return x||y?x instanceof zr?Ws([x]):x instanceof Xi&&!sl(e)?Ws([new zr("",'"interpolate" expressions cannot be used with this property')]):Vs(x?new C(g?"camera":"composite",l.value,x.labels,x instanceof Xi?x.interpolation:void 0,i):new v(g?"constant":"source",l.value,i)):Ws([new zr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class q{constructor(e,i){this._parameters=e,this._specification=i,Ir(this,Ul(this._parameters,this._specification))}static deserialize(e){return new q(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function ie(r){let e=null;if(r instanceof Pi)e=ie(r.result);else if(r instanceof pa){for(let i of r.args)if(e=ie(i),e)break}else(r instanceof Da||r instanceof Xi)&&r.input instanceof Dr&&r.input.name==="zoom"&&(e=r);return e instanceof zr||r.eachChild((i=>{let l=ie(i);l instanceof zr?e=l:!e&&l?e=new zr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&l&&e!==l&&(e=new zr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),e}function ve(r,e=new Set){return r instanceof js&&e.add(r.key),r.eachChild((i=>{ve(i,e)})),e}function Me(r,e){let{zoom:i,heatmapDensity:l,elevation:h,lineProgress:g,isSupportedScript:y,accumulated:x}=r!=null?r:{};return{zoom:i,heatmapDensity:l,elevation:h,lineProgress:g,isSupportedScript:y,accumulated:x,globalState:e}}function Ve(r){if(r===!0||r===!1)return!0;if(!Array.isArray(r)||r.length===0)return!1;switch(r[0]){case"has":return r.length>=2&&r[1]!=="$id"&&r[1]!=="$type";case"in":return r.length>=3&&(typeof r[1]!="string"||Array.isArray(r[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return r.length!==3||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(let e of r.slice(1))if(!Ve(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}let Qe={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function dt(r,e){if(r==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};Ve(r)||(r=fr(r));let i=c(r,Qe,e);if(i.result==="error")throw new Error(i.value.map((l=>`${l.key}: ${l.message}`)).join(", "));return{filter:(l,h,g)=>i.value.evaluate(l,h,{},g),needGeometry:Qt(r),getGlobalStateRefs:()=>ve(i.value.expression)}}function It(r,e){return r<e?-1:r>e?1:0}function Qt(r){if(!Array.isArray(r))return!1;if(r[0]==="within"||r[0]==="distance")return!0;for(let e=1;e<r.length;e++)if(Qt(r[e]))return!0;return!1}function fr(r){if(!r)return!0;let e=r[0];return r.length<=1?e!=="any":e==="=="?rr(r[1],r[2],"=="):e==="!="?ra(rr(r[1],r[2],"==")):e==="<"||e===">"||e==="<="||e===">="?rr(r[1],r[2],e):e==="any"?(i=r.slice(1),["any"].concat(i.map(fr))):e==="all"?["all"].concat(r.slice(1).map(fr)):e==="none"?["all"].concat(r.slice(1).map(fr).map(ra)):e==="in"?gn(r[1],r.slice(2)):e==="!in"?ra(gn(r[1],r.slice(2))):e==="has"?Zr(r[1]):e!=="!has"||ra(Zr(r[1]));var i}function rr(r,e,i){switch(r){case"$type":return[`filter-type-${i}`,e];case"$id":return[`filter-id-${i}`,e];default:return[`filter-${i}`,r,e]}}function gn(r,e){if(e.length===0)return!1;switch(r){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((i=>typeof i!=typeof e[0]))?["filter-in-large",r,["literal",e.sort(It)]]:["filter-in-small",r,["literal",e]]}}function Zr(r){switch(r){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",r]}}function ra(r){return["!",r]}function cl(r){let e=typeof r;if(e==="number"||e==="boolean"||e==="string"||r==null)return JSON.stringify(r);if(Array.isArray(r)){let h="[";for(let g of r)h+=`${cl(g)},`;return`${h}]`}let i=Object.keys(r).sort(),l="{";for(let h=0;h<i.length;h++)l+=`${JSON.stringify(i[h])}:${cl(r[i[h]])},`;return`${l}}`}function qc(r){let e="";for(let i of Si)e+=`/${cl(r[i])}`;return e}function Vc(r){let e=r.value;return e?[new Be(r.key,e,"constants have been deprecated as of v8")]:[]}function Vi(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}function us(r){if(Array.isArray(r))return r.map(us);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){let e={};for(let i in r)e[i]=us(r[i]);return e}return Vi(r)}function yn(r){let e=r.key,i=r.value,l=r.valueSpec||{},h=r.objectElementValidators||{},g=r.style,y=r.styleSpec,x=r.validateSpec,S=[],P=$t(i);if(P!=="object")return[new Be(e,i,`object expected, ${P} found`)];for(let A in i){let D=A.split(".")[0],B=ha(l,D)||l["*"],F;if(ha(h,D))F=h[D];else if(ha(l,D))F=x;else if(h["*"])F=h["*"];else{if(!l["*"]){S.push(new Be(e,i[A],`unknown property "${A}"`));continue}F=x}S=S.concat(F({key:(e&&`${e}.`)+A,value:i[A],valueSpec:B,style:g,styleSpec:y,object:i,objectKey:A,validateSpec:x},i))}for(let A in l)h[A]||l[A].required&&l[A].default===void 0&&i[A]===void 0&&S.push(new Be(e,i,`missing required property "${A}"`));return S}function Wi(r){let e=r.value,i=r.valueSpec,l=r.style,h=r.styleSpec,g=r.key,y=r.arrayElementValidator||r.validateSpec;if($t(e)!=="array")return[new Be(g,e,`array expected, ${$t(e)} found`)];if(i.length&&e.length!==i.length)return[new Be(g,e,`array length ${i.length} expected, length ${e.length} found`)];if(i["min-length"]&&e.length<i["min-length"])return[new Be(g,e,`array length at least ${i["min-length"]} expected, length ${e.length} found`)];let x={type:i.value,values:i.values};h.$version<7&&(x.function=i.function),$t(i.value)==="object"&&(x=i.value);let S=[];for(let P=0;P<e.length;P++)S=S.concat(y({array:e,arrayIndex:P,value:e[P],valueSpec:x,validateSpec:r.validateSpec,style:l,styleSpec:h,key:`${g}[${P}]`}));return S}function Fa(r){let e=r.key,i=r.value,l=r.valueSpec,h=$t(i);return h==="number"&&i!=i&&(h="NaN"),h!=="number"?[new Be(e,i,`number expected, ${h} found`)]:"minimum"in l&&i<l.minimum?[new Be(e,i,`${i} is less than the minimum value ${l.minimum}`)]:"maximum"in l&&i>l.maximum?[new Be(e,i,`${i} is greater than the maximum value ${l.maximum}`)]:[]}function ul(r){let e=r.valueSpec,i=Vi(r.value.type),l,h,g,y={},x=i!=="categorical"&&r.value.property===void 0,S=!x,P=$t(r.value.stops)==="array"&&$t(r.value.stops[0])==="array"&&$t(r.value.stops[0][0])==="object",A=yn({key:r.key,value:r.value,valueSpec:r.styleSpec.function,validateSpec:r.validateSpec,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{stops:function(F){if(i==="identity")return[new Be(F.key,F.value,'identity function may not have a "stops" property')];let W=[],U=F.value;return W=W.concat(Wi({key:F.key,value:U,valueSpec:F.valueSpec,validateSpec:F.validateSpec,style:F.style,styleSpec:F.styleSpec,arrayElementValidator:D})),$t(U)==="array"&&U.length===0&&W.push(new Be(F.key,U,"array must have at least one stop")),W},default:function(F){return F.validateSpec({key:F.key,value:F.value,valueSpec:e,validateSpec:F.validateSpec,style:F.style,styleSpec:F.styleSpec})}}});return i==="identity"&&x&&A.push(new Be(r.key,r.value,'missing required property "property"')),i==="identity"||r.value.stops||A.push(new Be(r.key,r.value,'missing required property "stops"')),i==="exponential"&&r.valueSpec.expression&&!sl(r.valueSpec)&&A.push(new Be(r.key,r.value,"exponential functions not supported")),r.styleSpec.$version>=8&&(S&&!ba(r.valueSpec)?A.push(new Be(r.key,r.value,"property functions not supported")):x&&!Gs(r.valueSpec)&&A.push(new Be(r.key,r.value,"zoom functions not supported"))),i!=="categorical"&&!P||r.value.property!==void 0||A.push(new Be(r.key,r.value,'"property" property is required')),A;function D(F){let W=[],U=F.value,$=F.key;if($t(U)!=="array")return[new Be($,U,`array expected, ${$t(U)} found`)];if(U.length!==2)return[new Be($,U,`array length 2 expected, length ${U.length} found`)];if(P){if($t(U[0])!=="object")return[new Be($,U,`object expected, ${$t(U[0])} found`)];if(U[0].zoom===void 0)return[new Be($,U,"object stop key must have zoom")];if(U[0].value===void 0)return[new Be($,U,"object stop key must have value")];if(g&&g>Vi(U[0].zoom))return[new Be($,U[0].zoom,"stop zoom values must appear in ascending order")];Vi(U[0].zoom)!==g&&(g=Vi(U[0].zoom),h=void 0,y={}),W=W.concat(yn({key:`${$}[0]`,value:U[0],valueSpec:{zoom:{}},validateSpec:F.validateSpec,style:F.style,styleSpec:F.styleSpec,objectElementValidators:{zoom:Fa,value:B}}))}else W=W.concat(B({key:`${$}[0]`,value:U[0],validateSpec:F.validateSpec,style:F.style,styleSpec:F.styleSpec},U));return Zs(us(U[1]))?W.concat([new Be(`${$}[1]`,U[1],"expressions are not allowed in function stops.")]):W.concat(F.validateSpec({key:`${$}[1]`,value:U[1],valueSpec:e,validateSpec:F.validateSpec,style:F.style,styleSpec:F.styleSpec}))}function B(F,W){let U=$t(F.value),$=Vi(F.value),J=F.value!==null?F.value:W;if(l){if(U!==l)return[new Be(F.key,J,`${U} stop domain type must match previous stop domain type ${l}`)]}else l=U;if(U!=="number"&&U!=="string"&&U!=="boolean")return[new Be(F.key,J,"stop domain value must be a number, string, or boolean")];if(U!=="number"&&i!=="categorical"){let ue=`number expected, ${U} found`;return ba(e)&&i===void 0&&(ue+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Be(F.key,J,ue)]}return i!=="categorical"||U!=="number"||isFinite($)&&Math.floor($)===$?i!=="categorical"&&U==="number"&&h!==void 0&&$<h?[new Be(F.key,J,"stop domain values must appear in ascending order")]:(h=$,i==="categorical"&&$ in y?[new Be(F.key,J,"stop domain values must be unique")]:(y[$]=!0,[])):[new Be(F.key,J,`integer expected, found ${$}`)]}}function ja(r){let e=(r.expressionContext==="property"?I:c)(us(r.value),r.valueSpec);if(e.result==="error")return e.value.map((l=>new Be(`${r.key}${l.key}`,r.value,l.message)));let i=e.value.expression||e.value._styleExpression.expression;if(r.expressionContext==="property"&&r.propertyKey==="text-font"&&!i.outputDefined())return[new Be(r.key,r.value,`Invalid data expression for "${r.propertyKey}". Output values must be contained as literals within the expression.`)];if(r.expressionContext==="property"&&r.propertyType==="layout"&&!qs(i))return[new Be(r.key,r.value,'"feature-state" data expressions are not supported with layout properties.')];if(r.expressionContext==="filter"&&!qs(i))return[new Be(r.key,r.value,'"feature-state" data expressions are not supported with filters.')];if(r.expressionContext&&r.expressionContext.indexOf("cluster")===0){if(!bo(i,["zoom","feature-state"]))return[new Be(r.key,r.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(r.expressionContext==="cluster-initial"&&!kn(i))return[new Be(r.key,r.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function xo(r){let e=r.key,i=r.value,l=$t(i);return l!=="string"?[new Be(e,i,`color expected, ${l} found`)]:Bt.parse(String(i))?[]:[new Be(e,i,`color expected, "${i}" found`)]}function xa(r){let e=r.key,i=r.value,l=r.valueSpec,h=[];return Array.isArray(l.values)?l.values.indexOf(Vi(i))===-1&&h.push(new Be(e,i,`expected one of [${l.values.join(", ")}], ${JSON.stringify(i)} found`)):Object.keys(l.values).indexOf(Vi(i))===-1&&h.push(new Be(e,i,`expected one of [${Object.keys(l.values).join(", ")}], ${JSON.stringify(i)} found`)),h}function ds(r){return Ve(us(r.value))?ja(Ir({},r,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Wc(r)}function Wc(r){let e=r.value,i=r.key;if($t(e)!=="array")return[new Be(i,e,`array expected, ${$t(e)} found`)];let l=r.styleSpec,h,g=[];if(e.length<1)return[new Be(i,e,"filter array must have at least 1 element")];switch(g=g.concat(xa({key:`${i}[0]`,value:e[0],valueSpec:l.filter_operator,style:r.style,styleSpec:r.styleSpec})),Vi(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&Vi(e[1])==="$type"&&g.push(new Be(i,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&g.push(new Be(i,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(h=$t(e[1]),h!=="string"&&g.push(new Be(`${i}[1]`,e[1],`string expected, ${h} found`)));for(let y=2;y<e.length;y++)h=$t(e[y]),Vi(e[1])==="$type"?g=g.concat(xa({key:`${i}[${y}]`,value:e[y],valueSpec:l.geometry_type,style:r.style,styleSpec:r.styleSpec})):h!=="string"&&h!=="number"&&h!=="boolean"&&g.push(new Be(`${i}[${y}]`,e[y],`string, number, or boolean expected, ${h} found`));break;case"any":case"all":case"none":for(let y=1;y<e.length;y++)g=g.concat(Wc({key:`${i}[${y}]`,value:e[y],style:r.style,styleSpec:r.styleSpec}));break;case"has":case"!has":h=$t(e[1]),e.length!==2?g.push(new Be(i,e,`filter array for "${e[0]}" operator must have 2 elements`)):h!=="string"&&g.push(new Be(`${i}[1]`,e[1],`string expected, ${h} found`))}return g}function Mh(r,e){let i=r.key,l=r.validateSpec,h=r.style,g=r.styleSpec,y=r.value,x=r.objectKey,S=g[`${e}_${r.layerType}`];if(!S)return[];let P=x.match(/^(.*)-transition$/);if(e==="paint"&&P&&S[P[1]]&&S[P[1]].transition)return l({key:i,value:y,valueSpec:g.transition,style:h,styleSpec:g});let A=r.valueSpec||S[x];if(!A)return[new Be(i,y,`unknown property "${x}"`)];let D;if($t(y)==="string"&&ba(A)&&!A.tokens&&(D=/^{([^}]+)}$/.exec(y)))return[new Be(i,y,`"${x}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(D[1])} }\`.`)];let B=[];return r.layerType==="symbol"&&x==="text-font"&&ol(us(y))&&Vi(y.type)==="identity"&&B.push(new Be(i,y,'"text-font" does not support identity functions')),B.concat(l({key:r.key,value:y,valueSpec:A,style:h,styleSpec:g,expressionContext:"property",propertyType:e,propertyKey:x}))}function Ih(r){return Mh(r,"paint")}function zh(r){return Mh(r,"layout")}function Lh(r){let e=[],i=r.value,l=r.key,h=r.style,g=r.styleSpec;if($t(i)!=="object")return[new Be(l,i,`object expected, ${$t(i)} found`)];i.type||i.ref||e.push(new Be(l,i,'either "type" or "ref" is required'));let y=Vi(i.type),x=Vi(i.ref);if(i.id){let S=Vi(i.id);for(let P=0;P<r.arrayIndex;P++){let A=h.layers[P];Vi(A.id)===S&&e.push(new Be(l,i.id,`duplicate layer id "${i.id}", previously used at line ${A.id.__line__}`))}}if("ref"in i){let S;["type","source","source-layer","filter","layout"].forEach((P=>{P in i&&e.push(new Be(l,i[P],`"${P}" is prohibited for ref layers`))})),h.layers.forEach((P=>{Vi(P.id)===x&&(S=P)})),S?S.ref?e.push(new Be(l,i.ref,"ref cannot reference another ref layer")):y=Vi(S.type):e.push(new Be(l,i.ref,`ref layer "${x}" not found`))}else if(y!=="background")if(i.source){let S=h.sources&&h.sources[i.source],P=S&&Vi(S.type);S?P==="vector"&&y==="raster"?e.push(new Be(l,i.source,`layer "${i.id}" requires a raster source`)):P!=="raster-dem"&&y==="hillshade"||P!=="raster-dem"&&y==="color-relief"?e.push(new Be(l,i.source,`layer "${i.id}" requires a raster-dem source`)):P==="raster"&&y!=="raster"?e.push(new Be(l,i.source,`layer "${i.id}" requires a vector source`)):P!=="vector"||i["source-layer"]?P==="raster-dem"&&y!=="hillshade"&&y!=="color-relief"?e.push(new Be(l,i.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):y!=="line"||!i.paint||!i.paint["line-gradient"]||P==="geojson"&&S.lineMetrics||e.push(new Be(l,i,`layer "${i.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new Be(l,i,`layer "${i.id}" must specify a "source-layer"`)):e.push(new Be(l,i.source,`source "${i.source}" not found`))}else e.push(new Be(l,i,'missing required property "source"'));return e=e.concat(yn({key:l,value:i,valueSpec:g.layer,style:r.style,styleSpec:r.styleSpec,validateSpec:r.validateSpec,objectElementValidators:{"*":()=>[],type:()=>r.validateSpec({key:`${l}.type`,value:i.type,valueSpec:g.layer.type,style:r.style,styleSpec:r.styleSpec,validateSpec:r.validateSpec,object:i,objectKey:"type"}),filter:ds,layout:S=>yn({layer:i,key:S.key,value:S.value,style:S.style,styleSpec:S.styleSpec,validateSpec:S.validateSpec,objectElementValidators:{"*":P=>zh(Ir({layerType:y},P))}}),paint:S=>yn({layer:i,key:S.key,value:S.value,style:S.style,styleSpec:S.styleSpec,validateSpec:S.validateSpec,objectElementValidators:{"*":P=>Ih(Ir({layerType:y},P))}})}})),e}function wo(r){let e=r.value,i=r.key,l=$t(e);return l!=="string"?[new Be(i,e,`string expected, ${l} found`)]:[]}let td={promoteId:function({key:r,value:e}){if($t(e)==="string")return wo({key:r,value:e});{let i=[];for(let l in e)i.push(...wo({key:`${r}.${l}`,value:e[l]}));return i}}};function id(r){let e=r.value,i=r.key,l=r.styleSpec,h=r.style,g=r.validateSpec;if(!e.type)return[new Be(i,e,'"type" is required')];let y=Vi(e.type),x;switch(y){case"vector":case"raster":return x=yn({key:i,value:e,valueSpec:l[`source_${y.replace("-","_")}`],style:r.style,styleSpec:l,objectElementValidators:td,validateSpec:g}),x;case"raster-dem":return x=(function(S){var P;let A=(P=S.sourceName)!==null&&P!==void 0?P:"",D=S.value,B=S.styleSpec,F=B.source_raster_dem,W=S.style,U=[],$=$t(D);if(D===void 0)return U;if($!=="object")return U.push(new Be("source_raster_dem",D,`object expected, ${$} found`)),U;let J=Vi(D.encoding)==="custom",ue=["redFactor","greenFactor","blueFactor","baseShift"],ee=S.value.encoding?`"${S.value.encoding}"`:"Default";for(let ae in D)!J&&ue.includes(ae)?U.push(new Be(ae,D[ae],`In "${A}": "${ae}" is only valid when "encoding" is set to "custom". ${ee} encoding found`)):F[ae]?U=U.concat(S.validateSpec({key:ae,value:D[ae],valueSpec:F[ae],validateSpec:S.validateSpec,style:W,styleSpec:B})):U.push(new Be(ae,D[ae],`unknown property "${ae}"`));return U})({sourceName:i,value:e,style:r.style,styleSpec:l,validateSpec:g}),x;case"geojson":if(x=yn({key:i,value:e,valueSpec:l.source_geojson,style:h,styleSpec:l,validateSpec:g,objectElementValidators:td}),e.cluster)for(let S in e.clusterProperties){let[P,A]=e.clusterProperties[S],D=typeof P=="string"?[P,["accumulated"],["get",S]]:P;x.push(...ja({key:`${i}.${S}.map`,value:A,expressionContext:"cluster-map"})),x.push(...ja({key:`${i}.${S}.reduce`,value:D,expressionContext:"cluster-reduce"}))}return x;case"video":return yn({key:i,value:e,valueSpec:l.source_video,style:h,validateSpec:g,styleSpec:l});case"image":return yn({key:i,value:e,valueSpec:l.source_image,style:h,validateSpec:g,styleSpec:l});case"canvas":return[new Be(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return xa({key:`${i}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Zl(r){let e=r.value,i=r.styleSpec,l=i.light,h=r.style,g=[],y=$t(e);if(e===void 0)return g;if(y!=="object")return g=g.concat([new Be("light",e,`object expected, ${y} found`)]),g;for(let x in e){let S=x.match(/^(.*)-transition$/);g=g.concat(S&&l[S[1]]&&l[S[1]].transition?r.validateSpec({key:x,value:e[x],valueSpec:i.transition,validateSpec:r.validateSpec,style:h,styleSpec:i}):l[x]?r.validateSpec({key:x,value:e[x],valueSpec:l[x],validateSpec:r.validateSpec,style:h,styleSpec:i}):[new Be(x,e[x],`unknown property "${x}"`)])}return g}function Dh(r){let e=r.value,i=r.styleSpec,l=i.sky,h=r.style,g=$t(e);if(e===void 0)return[];if(g!=="object")return[new Be("sky",e,`object expected, ${g} found`)];let y=[];for(let x in e)y=y.concat(l[x]?r.validateSpec({key:x,value:e[x],valueSpec:l[x],style:h,styleSpec:i}):[new Be(x,e[x],`unknown property "${x}"`)]);return y}function rd(r){let e=r.value,i=r.styleSpec,l=i.terrain,h=r.style,g=[],y=$t(e);if(e===void 0)return g;if(y!=="object")return g=g.concat([new Be("terrain",e,`object expected, ${y} found`)]),g;for(let x in e)g=g.concat(l[x]?r.validateSpec({key:x,value:e[x],valueSpec:l[x],validateSpec:r.validateSpec,style:h,styleSpec:i}):[new Be(x,e[x],`unknown property "${x}"`)]);return g}function nd(r){let e=[],i=r.value,l=r.key;if(Array.isArray(i)){let h=[],g=[];for(let y in i)i[y].id&&h.includes(i[y].id)&&e.push(new Be(l,i,`all the sprites' ids must be unique, but ${i[y].id} is duplicated`)),h.push(i[y].id),i[y].url&&g.includes(i[y].url)&&e.push(new Be(l,i,`all the sprites' URLs must be unique, but ${i[y].url} is duplicated`)),g.push(i[y].url),e=e.concat(yn({key:`${l}[${y}]`,value:i[y],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:r.validateSpec}));return e}return wo({key:l,value:i})}function Oh(r){return e=r.value,e&&e.constructor===Object?[]:[new Be(r.key,r.value,`object expected, ${$t(r.value)} found`)];var e}let ad={"*":()=>[],array:Wi,boolean:function(r){let e=r.value,i=r.key,l=$t(e);return l!=="boolean"?[new Be(i,e,`boolean expected, ${l} found`)]:[]},number:Fa,color:xo,constants:Vc,enum:xa,filter:ds,function:ul,layer:Lh,object:yn,source:id,light:Zl,sky:Dh,terrain:rd,projection:function(r){let e=r.value,i=r.styleSpec,l=i.projection,h=r.style,g=$t(e);if(e===void 0)return[];if(g!=="object")return[new Be("projection",e,`object expected, ${g} found`)];let y=[];for(let x in e)y=y.concat(l[x]?r.validateSpec({key:x,value:e[x],valueSpec:l[x],style:h,styleSpec:i}):[new Be(x,e[x],`unknown property "${x}"`)]);return y},projectionDefinition:function(r){let e=r.key,i=r.value;i=i instanceof String?i.valueOf():i;let l=$t(i);return l!=="array"||(function(h){return Array.isArray(h)&&h.length===3&&typeof h[0]=="string"&&typeof h[1]=="string"&&typeof h[2]=="number"})(i)||(function(h){return!!["interpolate","step","literal"].includes(h[0])})(i)?["array","string"].includes(l)?[]:[new Be(e,i,`projection expected, invalid type "${l}" found`)]:[new Be(e,i,`projection expected, invalid array ${JSON.stringify(i)} found`)]},string:wo,formatted:function(r){return wo(r).length===0?[]:ja(r)},resolvedImage:function(r){return wo(r).length===0?[]:ja(r)},padding:function(r){let e=r.key,i=r.value;if($t(i)==="array"){if(i.length<1||i.length>4)return[new Be(e,i,`padding requires 1 to 4 values; ${i.length} values found`)];let l={type:"number"},h=[];for(let g=0;g<i.length;g++)h=h.concat(r.validateSpec({key:`${e}[${g}]`,value:i[g],validateSpec:r.validateSpec,valueSpec:l}));return h}return Fa({key:e,value:i,valueSpec:{}})},numberArray:function(r){let e=r.key,i=r.value;if($t(i)==="array"){let l={type:"number"};if(i.length<1)return[new Be(e,i,"array length at least 1 expected, length 0 found")];let h=[];for(let g=0;g<i.length;g++)h=h.concat(r.validateSpec({key:`${e}[${g}]`,value:i[g],validateSpec:r.validateSpec,valueSpec:l}));return h}return Fa({key:e,value:i,valueSpec:{}})},colorArray:function(r){let e=r.key,i=r.value;if($t(i)==="array"){if(i.length<1)return[new Be(e,i,"array length at least 1 expected, length 0 found")];let l=[];for(let h=0;h<i.length;h++)l=l.concat(xo({key:`${e}[${h}]`,value:i[h]}));return l}return xo({key:e,value:i})},variableAnchorOffsetCollection:function(r){let e=r.key,i=r.value,l=$t(i),h=r.styleSpec;if(l!=="array"||i.length<1||i.length%2!=0)return[new Be(e,i,"variableAnchorOffsetCollection requires a non-empty array of even length")];let g=[];for(let y=0;y<i.length;y+=2)g=g.concat(xa({key:`${e}[${y}]`,value:i[y],valueSpec:h.layout_symbol["text-anchor"]})),g=g.concat(Wi({key:`${e}[${y+1}]`,value:i[y+1],valueSpec:{length:2,value:"number"},validateSpec:r.validateSpec,style:r.style,styleSpec:h}));return g},sprite:nd,state:Oh};function $l(r){let e=r.value,i=r.valueSpec,l=r.styleSpec;return r.validateSpec=$l,i.expression&&ol(Vi(e))?ul(r):i.expression&&Zs(us(e))?ja(r):i.type&&ad[i.type]?ad[i.type](r):yn(Ir({},r,{valueSpec:i.type?l[i.type]:i}))}function dl(r){let e=r.value,i=r.key,l=wo(r);return l.length||(e.indexOf("{fontstack}")===-1&&l.push(new Be(i,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&l.push(new Be(i,e,'"glyphs" url must include a "{range}" token'))),l}function na(r,e=Le){let i=[];return i=i.concat($l({key:"",value:r,valueSpec:e.$root,styleSpec:e,style:r,validateSpec:$l,objectElementValidators:{glyphs:dl,"*":()=>[]}})),r.constants&&(i=i.concat(Vc({key:"constants",value:r.constants}))),Rh(i)}function wa(r){return function(e){return r(Object.assign({},e,{validateSpec:$l}))}}function Rh(r){return[].concat(r).sort(((e,i)=>e.line-i.line))}function Sa(r){return function(...e){return Rh(r.apply(this,e))}}na.source=Sa(wa(id)),na.sprite=Sa(wa(nd)),na.glyphs=Sa(wa(dl)),na.light=Sa(wa(Zl)),na.sky=Sa(wa(Dh)),na.terrain=Sa(wa(rd)),na.state=Sa(wa(Oh)),na.layer=Sa(wa(Lh)),na.filter=Sa(wa(ds)),na.paintProperty=Sa(wa(Ih)),na.layoutProperty=Sa(wa(zh));let em=Le,hl=na,Hl=hl.light,Yl=hl.sky,qn=hl.paintProperty,Xl=hl.layoutProperty;function sd(r,e){let i=!1;if(e&&e.length)for(let l of e)r.fire(new fi(new Error(l.message))),i=!0;return i}class Kl{constructor(e,i,l){let h=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;let y=new Int32Array(this.arrayBuffer);e=y[0],this.d=(i=y[1])+2*(l=y[2]);for(let S=0;S<this.d*this.d;S++){let P=y[3+S],A=y[3+S+1];h.push(P===A?null:y.subarray(P,A))}let x=y[3+h.length+1];this.keys=y.subarray(y[3+h.length],x),this.bboxes=y.subarray(x),this.insert=this._insertReadonly}else{this.d=i+2*l;for(let y=0;y<this.d*this.d;y++)h.push([]);this.keys=[],this.bboxes=[]}this.n=i,this.extent=e,this.padding=l,this.scale=i/e,this.uid=0;let g=l/i*e;this.min=-g,this.max=e+g}insert(e,i,l,h,g){this._forEachCell(i,l,h,g,this._insertCell,this.uid++,void 0,void 0),this.keys.push(e),this.bboxes.push(i),this.bboxes.push(l),this.bboxes.push(h),this.bboxes.push(g)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(e,i,l,h,g,y){this.cells[g].push(y)}query(e,i,l,h,g){let y=this.min,x=this.max;if(e<=y&&i<=y&&x<=l&&x<=h&&!g)return Array.prototype.slice.call(this.keys);{let S=[];return this._forEachCell(e,i,l,h,this._queryCell,S,{},g),S}}_queryCell(e,i,l,h,g,y,x,S){let P=this.cells[g];if(P!==null){let A=this.keys,D=this.bboxes;for(let B=0;B<P.length;B++){let F=P[B];if(x[F]===void 0){let W=4*F;(S?S(D[W+0],D[W+1],D[W+2],D[W+3]):e<=D[W+2]&&i<=D[W+3]&&l>=D[W+0]&&h>=D[W+1])?(x[F]=!0,y.push(A[F])):x[F]=!1}}}}_forEachCell(e,i,l,h,g,y,x,S){let P=this._convertToCellCoord(e),A=this._convertToCellCoord(i),D=this._convertToCellCoord(l),B=this._convertToCellCoord(h);for(let F=P;F<=D;F++)for(let W=A;W<=B;W++){let U=this.d*W+F;if((!S||S(this._convertFromCellCoord(F),this._convertFromCellCoord(W),this._convertFromCellCoord(F+1),this._convertFromCellCoord(W+1)))&&g.call(this,e,i,l,h,U,y,x,S))return}}_convertFromCellCoord(e){return(e-this.padding)/this.scale}_convertToCellCoord(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;let e=this.cells,i=3+this.cells.length+1+1,l=0;for(let y=0;y<this.cells.length;y++)l+=this.cells[y].length;let h=new Int32Array(i+l+this.keys.length+this.bboxes.length);h[0]=this.extent,h[1]=this.n,h[2]=this.padding;let g=i;for(let y=0;y<e.length;y++){let x=e[y];h[3+y]=g,h.set(x,g),g+=x.length}return h[3+e.length]=g,h.set(this.keys,g),g+=this.keys.length,h[3+e.length+1]=g,h.set(this.bboxes,g),g+=this.bboxes.length,h.buffer}static serialize(e,i){let l=e.toArrayBuffer();return i&&i.push(l),{buffer:l}}static deserialize(e){return new Kl(e.buffer)}}let hs={};function ot(r,e,i={}){if(hs[r])throw new Error(`${r} is already registered.`);Object.defineProperty(e,"_classRegistryKey",{value:r,writeable:!1}),hs[r]={klass:e,omit:i.omit||[],shallow:i.shallow||[]}}ot("Object",Object),ot("Set",Set),ot("TransferableGridIndex",Kl),ot("Color",Bt),ot("Error",Error),ot("AJAXError",we),ot("ResolvedImage",Ur),ot("StylePropertyFunction",q),ot("StyleExpression",ll,{omit:["_evaluator"]}),ot("ZoomDependentExpression",C),ot("ZoomConstantExpression",v),ot("CompoundExpression",Dr,{omit:["_evaluate"]});for(let r in Ns)Ns[r]._classRegistryKey||ot(`Expression_${r}`,Ns[r]);function od(r){return r&&typeof ArrayBuffer!="undefined"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}function Ql(r){return r.$name||r.constructor._classRegistryKey}function Bh(r){return!(function(e){if(e===null||typeof e!="object")return!1;let i=Ql(e);return!(!i||i==="Object")})(r)&&(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||r instanceof Blob||r instanceof Error||od(r)||Dn(r)||ArrayBuffer.isView(r)||r instanceof ImageData)}function So(r,e){if(Bh(r))return(od(r)||Dn(r))&&e&&e.push(r),ArrayBuffer.isView(r)&&e&&e.push(r.buffer),r instanceof ImageData&&e&&e.push(r.data.buffer),r;if(Array.isArray(r)){let g=[];for(let y of r)g.push(So(y,e));return g}if(typeof r!="object")throw new Error("can't serialize object of type "+typeof r);let i=Ql(r);if(!i)throw new Error(`can't serialize object of unregistered class ${r.constructor.name}`);if(!hs[i])throw new Error(`${i} is not registered.`);let{klass:l}=hs[i],h=l.serialize?l.serialize(r,e):{};if(l.serialize){if(e&&h===e[e.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(let g in r){if(!r.hasOwnProperty(g)||hs[i].omit.indexOf(g)>=0)continue;let y=r[g];h[g]=hs[i].shallow.indexOf(g)>=0?y:So(y,e)}r instanceof Error&&(h.message=r.message)}if(h.$name)throw new Error("$name property is reserved for worker serialization logic.");return i!=="Object"&&(h.$name=i),h}function Jl(r){if(Bh(r))return r;if(Array.isArray(r))return r.map(Jl);if(typeof r!="object")throw new Error("can't deserialize object of type "+typeof r);let e=Ql(r)||"Object";if(!hs[e])throw new Error(`can't deserialize unregistered class ${e}`);let{klass:i}=hs[e];if(!i)throw new Error(`can't deserialize unregistered class ${e}`);if(i.deserialize)return i.deserialize(r);let l=Object.create(i.prototype);for(let h of Object.keys(r)){if(h==="$name")continue;let g=r[h];l[h]=hs[e].shallow.indexOf(h)>=0?g:Jl(g)}return l}class To{constructor(){this.first=!0}update(e,i){let l=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=l,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=l,!0):(this.lastFloorZoom>l?(this.lastIntegerZoom=l+1,this.lastIntegerZoomTime=i):this.lastFloorZoom<l&&(this.lastIntegerZoom=l,this.lastIntegerZoomTime=i),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=l,!0))}}function tm(r){return/[\u02EA\u02EB\u2E80-\u2FDF\u2FF0-\u303F\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u3105-\u312F\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(r))}function ld(r){return/[\u02EA\u02EB\u1100-\u11FF\u1400-\u167F\u18B0-\u18F5\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303F\u3041-\u3096\u309D-\u30FB\u30FD-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE48\uFE50-\uFE57\uFE5F-\uFE62\uFE67-\uFE6F\uFF00-\uFF07\uFF0A-\uFF0C\uFF0E-\uFF19\uFF1F-\uFF3A\uFF3C\uFF3E\uFF40-\uFF5A\uFFE0-\uFFE2\uFFE4-\uFFE7]|\uD802[\uDD80-\uDD9F]|\uD805[\uDD80-\uDDFF]|\uD806[\uDE00-\uDEBF]|\uD811[\uDC00-\uDE7F]|\uD81B[\uDFE0-\uDFE4\uDFF0-\uDFF6]|[\uD81C-\uD822\uD83D\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD30-\uDEFB]|\uD833[\uDEC0-\uDFCF]|\uD834[\uDC00-\uDDFF\uDEE0-\uDF7F]|\uD836[\uDC00-\uDEAF]|\uD83C[\uDC00-\uDE00\uDF00-\uDFFF]|\uD83E[\uDD00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(r))}function Fh(r){return/\s/u.test(String.fromCodePoint(r))}function Co(r){for(let e of r)if(ld(e.codePointAt(0)))return!0;return!1}function im(r){for(let e of r)if(!rm(e.codePointAt(0)))return!1;return!0}function jh(r){let e=r.map((i=>{try{return new RegExp(`\\p{sc=${i}}`,"u").source}catch(l){return null}})).filter((i=>i));return new RegExp(e.join("|"),"u")}let Gc=jh(["Arab","Dupl","Mong","Ougr","Syrc"]);function rm(r){return!Gc.test(String.fromCodePoint(r))}function Uc(r){return!(ld(r)||(e=r,/[\xA7\xA9\xAE\xB1\xBC-\xBE\xD7\xF7\u2016\u2020\u2021\u2030\u2031\u203B\u203C\u2042\u2047-\u2049\u2051\u2100-\u218F\u221E\u2234\u2235\u2300-\u2307\u230C-\u231F\u2324-\u2328\u232B\u237D-\u239A\u23BE-\u23CD\u23CF\u23D1-\u23DB\u23E2-\u2422\u2424-\u24FF\u25A0-\u2619\u2620-\u2767\u2776-\u2793\u2B12-\u2B2F\u2B50-\u2B59\u2BB8-\u2BEB\u3000-\u303F\u30A0-\u30FF\uE000-\uF8FF\uFE30-\uFE6F\uFF00-\uFFEF\uFFFC\uFFFD]|[\uDB80-\uDBFF][\uDC00-\uDFFF]/gim.test(String.fromCodePoint(e))));var e}let Zc=jh(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function cd(r){return Zc.test(String.fromCodePoint(r))}function Nh(r,e){return!(!e&&cd(r)||/[\u0900-\u0DFF\u0F00-\u109F\u1780-\u17FF]/gim.test(String.fromCodePoint(r)))}function qh(r){for(let e of r)if(cd(e.codePointAt(0)))return!0;return!1}let ps=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(r){this.pluginStatus=r.pluginStatus,this.pluginURL=r.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(r){if(ps.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=r.applyArabicShaping,this.processBidirectionalText=r.processBidirectionalText,this.processStyledBidirectionalText=r.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(r,e){return a(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(r.pluginStatus!=="loading")return this.setState(r),r;let i=r.pluginURL,l=new Promise((g=>{this.loadScriptResolve=g}));e(i);let h=new Promise((g=>setTimeout((()=>g()),this.TIMEOUT)));if(yield Promise.race([l,h]),this.isParsed()){let g={pluginStatus:"loaded",pluginURL:i};return this.setState(g),g}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${i}`)}))}};class Ei{constructor(e,i){this.isSupportedScript=Vh,this.zoom=e,i?(this.now=i.now||0,this.fadeDuration=i.fadeDuration||0,this.zoomHistory=i.zoomHistory||new To,this.transition=i.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new To,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){let e=this.zoom,i=e-Math.floor(e),l=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:i+(1-i)*l}:{fromScale:.5,toScale:1,t:1-(1-l)*i}}}function Vh(r){return(function(e,i){for(let l of e)if(!Nh(l.codePointAt(0),i))return!1;return!0})(r,ps.getRTLTextPluginStatus()==="loaded")}let $c="-transition";class ec{constructor(e,i,l){this.property=e,this.value=i,this.expression=(function(h,g,y){if(ol(h))return new q(h,g);if(Zs(h)){let x=I(h,g,y);if(x.result==="error")throw new Error(x.value.map((S=>`${S.key}: ${S.message}`)).join(", "));return x.value}{let x=h;return g.type==="color"&&typeof h=="string"?x=Bt.parse(h):g.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?g.type!=="numberArray"||typeof h!="number"&&!Array.isArray(h)?g.type!=="colorArray"||typeof h!="string"&&!Array.isArray(h)?g.type==="variableAnchorOffsetCollection"&&Array.isArray(h)?x=Tr.parse(h):g.type==="projectionDefinition"&&typeof h=="string"&&(x=tr.parse(h)):x=ct.parse(h):x=ci.parse(h):x=vt.parse(h),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>x}}})(i===void 0?e.specification.default:i,e.specification,l)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(e,i,l){return this.property.possiblyEvaluate(this,e,i,l)}}class ud{constructor(e,i){this.property=e,this.value=new ec(e,void 0,i)}transitioned(e,i){return new Wh(this.property,this.value,i,vi({},e.transition,this.transition),e.now)}untransitioned(){return new Wh(this.property,this.value,null,{},0)}}class dd{constructor(e,i){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues),this._globalState=i}getValue(e){return or(this._values[e].value.value)}setValue(e,i){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new ud(this._values[e].property,this._globalState)),this._values[e].value=new ec(this._values[e].property,i===null?void 0:or(i),this._globalState)}getTransition(e){return or(this._values[e].transition)}setTransition(e,i){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new ud(this._values[e].property,this._globalState)),this._values[e].transition=or(i)||void 0}serialize(){let e={};for(let i of Object.keys(this._values)){let l=this.getValue(i);l!==void 0&&(e[i]=l);let h=this.getTransition(i);h!==void 0&&(e[`${i}${$c}`]=h)}return e}transitioned(e,i){let l=new hd(this._properties);for(let h of Object.keys(this._values))l._values[h]=this._values[h].transitioned(e,i._values[h]);return l}untransitioned(){let e=new hd(this._properties);for(let i of Object.keys(this._values))e._values[i]=this._values[i].untransitioned();return e}}class Wh{constructor(e,i,l,h,g){this.property=e,this.value=i,this.begin=g+h.delay||0,this.end=this.begin+h.duration||0,e.specification.transition&&(h.delay||h.duration)&&(this.prior=l)}possiblyEvaluate(e,i,l){let h=e.now||0,g=this.value.possiblyEvaluate(e,i,l),y=this.prior;if(y){if(h>this.end)return this.prior=null,g;if(this.value.isDataDriven())return this.prior=null,g;if(h<this.begin)return y.possiblyEvaluate(e,i,l);{let x=(h-this.begin)/(this.end-this.begin);return this.property.interpolate(y.possiblyEvaluate(e,i,l),g,Ii(x))}}return g}}class hd{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,i,l){let h=new Hc(this._properties);for(let g of Object.keys(this._values))h._values[g]=this._values[g].possiblyEvaluate(e,i,l);return h}hasTransition(){for(let e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class Gh{constructor(e,i){this._properties=e,this._values=Object.create(e.defaultPropertyValues),this._globalState=i}hasValue(e){return this._values[e].value!==void 0}getValue(e){return or(this._values[e].value)}setValue(e,i){this._values[e]=new ec(this._values[e].property,i===null?void 0:or(i),this._globalState)}serialize(){let e={};for(let i of Object.keys(this._values)){let l=this.getValue(i);l!==void 0&&(e[i]=l)}return e}possiblyEvaluate(e,i,l){let h=new Hc(this._properties);for(let g of Object.keys(this._values))h._values[g]=this._values[g].possiblyEvaluate(e,i,l);return h}}class Na{constructor(e,i,l){this.property=e,this.value=i,this.parameters=l}isConstant(){return this.value.kind==="constant"}constantOr(e){return this.value.kind==="constant"?this.value.value:e}evaluate(e,i,l,h){return this.property.evaluate(this.value,this.parameters,e,i,l,h)}}class Hc{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class ft{constructor(e){this.specification=e}possiblyEvaluate(e,i){if(e.isDataDriven())throw new Error("Value should not be data driven");return e.expression.evaluate(i)}interpolate(e,i,l){let h=Li[this.specification.type];return h?h(e,i,l):e}}class xt{constructor(e,i){this.specification=e,this.overrides=i}possiblyEvaluate(e,i,l,h){return new Na(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(i,null,{},l,h)}:e.expression,i)}interpolate(e,i,l){if(e.value.kind!=="constant"||i.value.kind!=="constant")return e;if(e.value.value===void 0||i.value.value===void 0)return new Na(this,{kind:"constant",value:void 0},e.parameters);let h=Li[this.specification.type];if(h){let g=h(e.value.value,i.value.value,l);return new Na(this,{kind:"constant",value:g},e.parameters)}return e}evaluate(e,i,l,h,g,y){return e.kind==="constant"?e.value:e.evaluate(i,l,h,g,y)}}class pl extends xt{possiblyEvaluate(e,i,l,h){if(e.value===void 0)return new Na(this,{kind:"constant",value:void 0},i);if(e.expression.kind==="constant"){let g=e.expression.evaluate(i,null,{},l,h),y=e.property.specification.type==="resolvedImage"&&typeof g!="string"?g.name:g,x=this._calculate(y,y,y,i);return new Na(this,{kind:"constant",value:x},i)}if(e.expression.kind==="camera"){let g=this._calculate(e.expression.evaluate({zoom:i.zoom-1}),e.expression.evaluate({zoom:i.zoom}),e.expression.evaluate({zoom:i.zoom+1}),i);return new Na(this,{kind:"constant",value:g},i)}return new Na(this,e.expression,i)}evaluate(e,i,l,h,g,y){if(e.kind==="source"){let x=e.evaluate(i,l,h,g,y);return this._calculate(x,x,x,i)}return e.kind==="composite"?this._calculate(e.evaluate({zoom:Math.floor(i.zoom)-1},l,h),e.evaluate({zoom:Math.floor(i.zoom)},l,h),e.evaluate({zoom:Math.floor(i.zoom)+1},l,h),i):e.value}_calculate(e,i,l,h){return h.zoom>h.zoomHistory.lastIntegerZoom?{from:e,to:i}:{from:l,to:i}}interpolate(e){return e}}class pd{constructor(e){this.specification=e}possiblyEvaluate(e,i,l,h){if(e.value!==void 0){if(e.expression.kind==="constant"){let g=e.expression.evaluate(i,null,{},l,h);return this._calculate(g,g,g,i)}return this._calculate(e.expression.evaluate(new Ei(Math.floor(i.zoom-1),i)),e.expression.evaluate(new Ei(Math.floor(i.zoom),i)),e.expression.evaluate(new Ei(Math.floor(i.zoom+1),i)),i)}}_calculate(e,i,l,h){return h.zoom>h.zoomHistory.lastIntegerZoom?{from:e,to:i}:{from:l,to:i}}interpolate(e){return e}}class ko{constructor(e){this.specification=e}possiblyEvaluate(e,i,l,h){return!!e.expression.evaluate(i,null,{},l,h)}interpolate(){return!1}}class _n{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(let i in e){let l=e[i];l.specification.overridable&&this.overridableProperties.push(i);let h=this.defaultPropertyValues[i]=new ec(l,void 0,void 0),g=this.defaultTransitionablePropertyValues[i]=new ud(l,void 0);this.defaultTransitioningPropertyValues[i]=g.untransitioned(),this.defaultPossiblyEvaluatedValues[i]=h.possiblyEvaluate({})}}}ot("DataDrivenProperty",xt),ot("DataConstantProperty",ft),ot("CrossFadedDataDrivenProperty",pl),ot("CrossFadedProperty",pd),ot("ColorRampProperty",ko);class Vn extends oi{constructor(e,i,l){if(super(),this.id=e.id,this.type=e.type,this._globalState=l,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},e.type!=="custom"&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,e.type!=="background"&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter,this._featureFilter=dt(e.filter,l)),i.layout&&(this._unevaluatedLayout=new Gh(i.layout,l)),i.paint)){this._transitionablePaint=new dd(i.paint,l);for(let h in e.paint)this.setPaintProperty(h,e.paint[h],{validate:!1});for(let h in e.layout)this.setLayoutProperty(h,e.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Hc(i.paint)}}setFilter(e){this.filter=e,this._featureFilter=dt(e,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return e==="visibility"?this.visibility:this._unevaluatedLayout.getValue(e)}getLayoutAffectingGlobalStateRefs(){let e=new Set;if(this._unevaluatedLayout)for(let i in this._unevaluatedLayout._values){let l=this._unevaluatedLayout._values[i];for(let h of l.getGlobalStateRefs())e.add(h)}for(let i of this._featureFilter.getGlobalStateRefs())e.add(i);return e}getPaintAffectingGlobalStateRefs(){var e;let i=new globalThis.Map;if(this._transitionablePaint)for(let l in this._transitionablePaint._values){let h=this._transitionablePaint._values[l].value;for(let g of h.getGlobalStateRefs()){let y=(e=i.get(g))!==null&&e!==void 0?e:[];y.push({name:l,value:h.value}),i.set(g,y)}}return i}setLayoutProperty(e,i,l={}){i!=null&&this._validate(Xl,`layers.${this.id}.layout.${e}`,e,i,l)||(e!=="visibility"?this._unevaluatedLayout.setValue(e,i):this.visibility=i)}getPaintProperty(e){return e.endsWith($c)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}setPaintProperty(e,i,l={}){if(i!=null&&this._validate(qn,`layers.${this.id}.paint.${e}`,e,i,l))return!1;if(e.endsWith($c))return this._transitionablePaint.setTransition(e.slice(0,-11),i||void 0),!1;{let h=this._transitionablePaint._values[e],g=h.property.specification["property-type"]==="cross-faded-data-driven",y=h.value.isDataDriven(),x=h.value;this._transitionablePaint.setValue(e,i),this._handleSpecialPaintPropertyUpdate(e);let S=this._transitionablePaint._values[e].value;return S.isDataDriven()||y||g||this._handleOverridablePaintPropertyUpdate(e,x,S)}}_handleSpecialPaintPropertyUpdate(e){}_handleOverridablePaintPropertyUpdate(e,i,l){return!1}isHidden(e,i=!1){return!!(this.minzoom&&e<(i?Math.floor(this.minzoom):this.minzoom))||!!(this.maxzoom&&e>=this.maxzoom)||this.visibility==="none"}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,i){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,i)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,i)}serialize(){let e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),un(e,((i,l)=>!(i===void 0||l==="layout"&&!Object.keys(i).length||l==="paint"&&!Object.keys(i).length)))}_validate(e,i,l,h,g={}){return(!g||g.validate!==!1)&&sd(this,e.call(hl,{key:i,layerType:this.type,objectKey:l,value:h,styleSpec:Le,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(let e in this.paint._values){let i=this.paint.get(e);if(i instanceof Na&&ba(i.property.specification)&&(i.value.kind==="source"||i.value.kind==="composite")&&i.value.isStateDependent)return!0}return!1}}let Uh;var nm={get paint(){return Uh=Uh||new _n({"raster-opacity":new ft(Le.paint_raster["raster-opacity"]),"raster-hue-rotate":new ft(Le.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ft(Le.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ft(Le.paint_raster["raster-brightness-max"]),"raster-saturation":new ft(Le.paint_raster["raster-saturation"]),"raster-contrast":new ft(Le.paint_raster["raster-contrast"]),"raster-resampling":new ft(Le.paint_raster["raster-resampling"]),"raster-fade-duration":new ft(Le.paint_raster["raster-fade-duration"])})}};class Zh extends Vn{constructor(e,i){super(e,nm,i)}}let $h={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class fl{constructor(e,i){this._structArray=e,this._pos1=i*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Ki{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,i){return e._trim(),i&&(e.isTransferred=!0,i.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){let i=Object.create(this.prototype);return i.arrayBuffer=e.arrayBuffer,i.length=e.length,i.capacity=e.arrayBuffer.byteLength/i.bytesPerElement,i._refreshViews(),i}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);let i=this.uint8;this._refreshViews(),i&&this.uint8.set(i)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function cr(r,e=1){let i=0,l=0;return{members:r.map((h=>{let g=$h[h.type].BYTES_PER_ELEMENT,y=i=Hh(i,Math.max(e,g)),x=h.components||1;return l=Math.max(l,g),i+=g*x,{name:h.name,type:h.type,components:x,offset:y}})),size:Hh(i,Math.max(l,e)),alignment:e}}function Hh(r,e){return Math.ceil(r/e)*e}class tc extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,i){let l=this.length;return this.resize(l+1),this.emplace(l,e,i)}emplace(e,i,l){let h=2*e;return this.int16[h+0]=i,this.int16[h+1]=l,e}}tc.prototype.bytesPerElement=4,ot("StructArrayLayout2i4",tc);class Yc extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,i,l){let h=this.length;return this.resize(h+1),this.emplace(h,e,i,l)}emplace(e,i,l,h){let g=3*e;return this.int16[g+0]=i,this.int16[g+1]=l,this.int16[g+2]=h,e}}Yc.prototype.bytesPerElement=6,ot("StructArrayLayout3i6",Yc);class $s extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,i,l,h){let g=this.length;return this.resize(g+1),this.emplace(g,e,i,l,h)}emplace(e,i,l,h,g){let y=4*e;return this.int16[y+0]=i,this.int16[y+1]=l,this.int16[y+2]=h,this.int16[y+3]=g,e}}$s.prototype.bytesPerElement=8,ot("StructArrayLayout4i8",$s);class fd extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,i,l,h,g,y){let x=this.length;return this.resize(x+1),this.emplace(x,e,i,l,h,g,y)}emplace(e,i,l,h,g,y,x){let S=6*e;return this.int16[S+0]=i,this.int16[S+1]=l,this.int16[S+2]=h,this.int16[S+3]=g,this.int16[S+4]=y,this.int16[S+5]=x,e}}fd.prototype.bytesPerElement=12,ot("StructArrayLayout2i4i12",fd);class md extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,i,l,h,g,y){let x=this.length;return this.resize(x+1),this.emplace(x,e,i,l,h,g,y)}emplace(e,i,l,h,g,y,x){let S=4*e,P=8*e;return this.int16[S+0]=i,this.int16[S+1]=l,this.uint8[P+4]=h,this.uint8[P+5]=g,this.uint8[P+6]=y,this.uint8[P+7]=x,e}}md.prototype.bytesPerElement=8,ot("StructArrayLayout2i4ub8",md);class ic extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i){let l=this.length;return this.resize(l+1),this.emplace(l,e,i)}emplace(e,i,l){let h=2*e;return this.float32[h+0]=i,this.float32[h+1]=l,e}}ic.prototype.bytesPerElement=8,ot("StructArrayLayout2f8",ic);class Xc extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,i,l,h,g,y,x,S,P,A){let D=this.length;return this.resize(D+1),this.emplace(D,e,i,l,h,g,y,x,S,P,A)}emplace(e,i,l,h,g,y,x,S,P,A,D){let B=10*e;return this.uint16[B+0]=i,this.uint16[B+1]=l,this.uint16[B+2]=h,this.uint16[B+3]=g,this.uint16[B+4]=y,this.uint16[B+5]=x,this.uint16[B+6]=S,this.uint16[B+7]=P,this.uint16[B+8]=A,this.uint16[B+9]=D,e}}Xc.prototype.bytesPerElement=20,ot("StructArrayLayout10ui20",Xc);class gd extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,i,l,h,g,y,x,S){let P=this.length;return this.resize(P+1),this.emplace(P,e,i,l,h,g,y,x,S)}emplace(e,i,l,h,g,y,x,S,P){let A=8*e;return this.uint16[A+0]=i,this.uint16[A+1]=l,this.uint16[A+2]=h,this.uint16[A+3]=g,this.uint16[A+4]=y,this.uint16[A+5]=x,this.uint16[A+6]=S,this.uint16[A+7]=P,e}}gd.prototype.bytesPerElement=16,ot("StructArrayLayout8ui16",gd);class yd extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,i,l,h,g,y,x,S,P,A,D,B){let F=this.length;return this.resize(F+1),this.emplace(F,e,i,l,h,g,y,x,S,P,A,D,B)}emplace(e,i,l,h,g,y,x,S,P,A,D,B,F){let W=12*e;return this.int16[W+0]=i,this.int16[W+1]=l,this.int16[W+2]=h,this.int16[W+3]=g,this.uint16[W+4]=y,this.uint16[W+5]=x,this.uint16[W+6]=S,this.uint16[W+7]=P,this.int16[W+8]=A,this.int16[W+9]=D,this.int16[W+10]=B,this.int16[W+11]=F,e}}yd.prototype.bytesPerElement=24,ot("StructArrayLayout4i4ui4i24",yd);class fs extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i,l){let h=this.length;return this.resize(h+1),this.emplace(h,e,i,l)}emplace(e,i,l,h){let g=3*e;return this.float32[g+0]=i,this.float32[g+1]=l,this.float32[g+2]=h,e}}fs.prototype.bytesPerElement=12,ot("StructArrayLayout3f12",fs);class Kc extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){let i=this.length;return this.resize(i+1),this.emplace(i,e)}emplace(e,i){return this.uint32[1*e+0]=i,e}}Kc.prototype.bytesPerElement=4,ot("StructArrayLayout1ul4",Kc);class rc extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,i,l,h,g,y,x,S,P){let A=this.length;return this.resize(A+1),this.emplace(A,e,i,l,h,g,y,x,S,P)}emplace(e,i,l,h,g,y,x,S,P,A){let D=10*e,B=5*e;return this.int16[D+0]=i,this.int16[D+1]=l,this.int16[D+2]=h,this.int16[D+3]=g,this.int16[D+4]=y,this.int16[D+5]=x,this.uint32[B+3]=S,this.uint16[D+8]=P,this.uint16[D+9]=A,e}}rc.prototype.bytesPerElement=20,ot("StructArrayLayout6i1ul2ui20",rc);class Qc extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,i,l,h,g,y){let x=this.length;return this.resize(x+1),this.emplace(x,e,i,l,h,g,y)}emplace(e,i,l,h,g,y,x){let S=6*e;return this.int16[S+0]=i,this.int16[S+1]=l,this.int16[S+2]=h,this.int16[S+3]=g,this.int16[S+4]=y,this.int16[S+5]=x,e}}Qc.prototype.bytesPerElement=12,ot("StructArrayLayout2i2i2i12",Qc);class nc extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,i,l,h,g){let y=this.length;return this.resize(y+1),this.emplace(y,e,i,l,h,g)}emplace(e,i,l,h,g,y){let x=4*e,S=8*e;return this.float32[x+0]=i,this.float32[x+1]=l,this.float32[x+2]=h,this.int16[S+6]=g,this.int16[S+7]=y,e}}nc.prototype.bytesPerElement=16,ot("StructArrayLayout2f1f2i16",nc);class _d extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,i,l,h,g,y){let x=this.length;return this.resize(x+1),this.emplace(x,e,i,l,h,g,y)}emplace(e,i,l,h,g,y,x){let S=16*e,P=4*e,A=8*e;return this.uint8[S+0]=i,this.uint8[S+1]=l,this.float32[P+1]=h,this.float32[P+2]=g,this.int16[A+6]=y,this.int16[A+7]=x,e}}_d.prototype.bytesPerElement=16,ot("StructArrayLayout2ub2f2i16",_d);class Po extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,i,l){let h=this.length;return this.resize(h+1),this.emplace(h,e,i,l)}emplace(e,i,l,h){let g=3*e;return this.uint16[g+0]=i,this.uint16[g+1]=l,this.uint16[g+2]=h,e}}Po.prototype.bytesPerElement=6,ot("StructArrayLayout3ui6",Po);class Eo extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i,l,h,g,y,x,S,P,A,D,B,F,W,U,$,J){let ue=this.length;return this.resize(ue+1),this.emplace(ue,e,i,l,h,g,y,x,S,P,A,D,B,F,W,U,$,J)}emplace(e,i,l,h,g,y,x,S,P,A,D,B,F,W,U,$,J,ue){let ee=24*e,ae=12*e,he=48*e;return this.int16[ee+0]=i,this.int16[ee+1]=l,this.uint16[ee+2]=h,this.uint16[ee+3]=g,this.uint32[ae+2]=y,this.uint32[ae+3]=x,this.uint32[ae+4]=S,this.uint16[ee+10]=P,this.uint16[ee+11]=A,this.uint16[ee+12]=D,this.float32[ae+7]=B,this.float32[ae+8]=F,this.uint8[he+36]=W,this.uint8[he+37]=U,this.uint8[he+38]=$,this.uint32[ae+10]=J,this.int16[ee+22]=ue,e}}Eo.prototype.bytesPerElement=48,ot("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Eo);class vd extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i,l,h,g,y,x,S,P,A,D,B,F,W,U,$,J,ue,ee,ae,he,fe,Ae,We,qe,Ue,tt,Ke){let He=this.length;return this.resize(He+1),this.emplace(He,e,i,l,h,g,y,x,S,P,A,D,B,F,W,U,$,J,ue,ee,ae,he,fe,Ae,We,qe,Ue,tt,Ke)}emplace(e,i,l,h,g,y,x,S,P,A,D,B,F,W,U,$,J,ue,ee,ae,he,fe,Ae,We,qe,Ue,tt,Ke,He){let Ne=32*e,it=16*e;return this.int16[Ne+0]=i,this.int16[Ne+1]=l,this.int16[Ne+2]=h,this.int16[Ne+3]=g,this.int16[Ne+4]=y,this.int16[Ne+5]=x,this.int16[Ne+6]=S,this.int16[Ne+7]=P,this.uint16[Ne+8]=A,this.uint16[Ne+9]=D,this.uint16[Ne+10]=B,this.uint16[Ne+11]=F,this.uint16[Ne+12]=W,this.uint16[Ne+13]=U,this.uint16[Ne+14]=$,this.uint16[Ne+15]=J,this.uint16[Ne+16]=ue,this.uint16[Ne+17]=ee,this.uint16[Ne+18]=ae,this.uint16[Ne+19]=he,this.uint16[Ne+20]=fe,this.uint16[Ne+21]=Ae,this.uint16[Ne+22]=We,this.uint32[it+12]=qe,this.float32[it+13]=Ue,this.float32[it+14]=tt,this.uint16[Ne+30]=Ke,this.uint16[Ne+31]=He,e}}vd.prototype.bytesPerElement=64,ot("StructArrayLayout8i15ui1ul2f2ui64",vd);class ac extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){let i=this.length;return this.resize(i+1),this.emplace(i,e)}emplace(e,i){return this.float32[1*e+0]=i,e}}ac.prototype.bytesPerElement=4,ot("StructArrayLayout1f4",ac);class Ao extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i,l){let h=this.length;return this.resize(h+1),this.emplace(h,e,i,l)}emplace(e,i,l,h){let g=3*e;return this.uint16[6*e+0]=i,this.float32[g+1]=l,this.float32[g+2]=h,e}}Ao.prototype.bytesPerElement=12,ot("StructArrayLayout1ui2f12",Ao);class bd extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,i,l){let h=this.length;return this.resize(h+1),this.emplace(h,e,i,l)}emplace(e,i,l,h){let g=4*e;return this.uint32[2*e+0]=i,this.uint16[g+2]=l,this.uint16[g+3]=h,e}}bd.prototype.bytesPerElement=8,ot("StructArrayLayout1ul2ui8",bd);class xd extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,i){let l=this.length;return this.resize(l+1),this.emplace(l,e,i)}emplace(e,i,l){let h=2*e;return this.uint16[h+0]=i,this.uint16[h+1]=l,e}}xd.prototype.bytesPerElement=4,ot("StructArrayLayout2ui4",xd);class Jc extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){let i=this.length;return this.resize(i+1),this.emplace(i,e)}emplace(e,i){return this.uint16[1*e+0]=i,e}}Jc.prototype.bytesPerElement=2,ot("StructArrayLayout1ui2",Jc);class wd extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i,l,h){let g=this.length;return this.resize(g+1),this.emplace(g,e,i,l,h)}emplace(e,i,l,h,g){let y=4*e;return this.float32[y+0]=i,this.float32[y+1]=l,this.float32[y+2]=h,this.float32[y+3]=g,e}}wd.prototype.bytesPerElement=16,ot("StructArrayLayout4f16",wd);class _ extends fl{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new T(this.anchorPointX,this.anchorPointY)}}_.prototype.size=20;class t extends rc{get(e){return new _(this,e)}}ot("CollisionBoxArray",t);class n extends fl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(e){this._structArray.uint8[this._pos1+37]=e}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(e){this._structArray.uint8[this._pos1+38]=e}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(e){this._structArray.uint32[this._pos4+10]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}n.prototype.size=48;class u extends Eo{get(e){return new n(this,e)}}ot("PlacedSymbolArray",u);class m extends fl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(e){this._structArray.uint32[this._pos4+12]=e}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}m.prototype.size=64;class b extends vd{get(e){return new m(this,e)}}ot("SymbolInstanceArray",b);class w extends ac{getoffsetX(e){return this.float32[1*e+0]}}ot("GlyphOffsetArray",w);class k extends Yc{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}ot("SymbolLineVertexArray",k);class E extends fl{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}E.prototype.size=12;class z extends Ao{get(e){return new E(this,e)}}ot("TextAnchorOffsetArray",z);class O extends fl{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}O.prototype.size=8;class N extends bd{get(e){return new O(this,e)}}ot("FeatureIndexArray",N);class j extends tc{}class Z extends tc{}class Q extends tc{}class se extends fd{}class le extends md{}class oe extends ic{}class ce extends Xc{}class me extends gd{}class de extends yd{}class ge extends fs{}class xe extends Kc{}class pe extends Qc{}class Te extends _d{}class Re extends Po{}class ze extends xd{}let De=cr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Fe}=De;class $e{constructor(e=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=e}prepareSegment(e,i,l,h){let g=this.segments[this.segments.length-1];return e>$e.MAX_VERTEX_ARRAY_LENGTH&&pr(`Max vertices per segment is ${$e.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${$e.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!g||g.vertexLength+e>$e.MAX_VERTEX_ARRAY_LENGTH||g.sortKey!==h?this.createNewSegment(i,l,h):g}createNewSegment(e,i,l){let h={vertexOffset:e.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0,vaos:{}};return l!==void 0&&(h.sortKey=l),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(h),h}getOrCreateLatestSegment(e,i,l){return this.prepareSegment(0,e,i,l)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(let e of this.segments)for(let i in e.vaos)e.vaos[i].destroy()}static simpleSegment(e,i,l,h){return new $e([{vertexOffset:e,primitiveOffset:i,vertexLength:l,primitiveLength:h,vaos:{},sortKey:0}])}}function Je(r,e){return 256*(r=St(Math.floor(r),0,255))+St(Math.floor(e),0,255)}$e.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ot("SegmentVector",$e);let Ze=cr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),ht=cr([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var Lt,yi,Ri,wi={exports:{}},Gi={exports:{}},Di={exports:{}},kr=(function(){if(Ri)return wi.exports;Ri=1;var r=(Lt||(Lt=1,Gi.exports=function(i,l){var h,g,y,x,S,P,A,D;for(g=i.length-(h=3&i.length),y=l,S=3432918353,P=461845907,D=0;D<g;)A=255&i.charCodeAt(D)|(255&i.charCodeAt(++D))<<8|(255&i.charCodeAt(++D))<<16|(255&i.charCodeAt(++D))<<24,++D,y=27492+(65535&(x=5*(65535&(y=(y^=A=(65535&(A=(A=(65535&A)*S+(((A>>>16)*S&65535)<<16)&4294967295)<<15|A>>>17))*P+(((A>>>16)*P&65535)<<16)&4294967295)<<13|y>>>19))+((5*(y>>>16)&65535)<<16)&4294967295))+((58964+(x>>>16)&65535)<<16);switch(A=0,h){case 3:A^=(255&i.charCodeAt(D+2))<<16;case 2:A^=(255&i.charCodeAt(D+1))<<8;case 1:y^=A=(65535&(A=(A=(65535&(A^=255&i.charCodeAt(D)))*S+(((A>>>16)*S&65535)<<16)&4294967295)<<15|A>>>17))*P+(((A>>>16)*P&65535)<<16)&4294967295}return y^=i.length,y=2246822507*(65535&(y^=y>>>16))+((2246822507*(y>>>16)&65535)<<16)&4294967295,y=3266489909*(65535&(y^=y>>>13))+((3266489909*(y>>>16)&65535)<<16)&4294967295,(y^=y>>>16)>>>0}),Gi.exports),e=(yi||(yi=1,Di.exports=function(i,l){for(var h,g=i.length,y=l^g,x=0;g>=4;)h=1540483477*(65535&(h=255&i.charCodeAt(x)|(255&i.charCodeAt(++x))<<8|(255&i.charCodeAt(++x))<<16|(255&i.charCodeAt(++x))<<24))+((1540483477*(h>>>16)&65535)<<16),y=1540483477*(65535&y)+((1540483477*(y>>>16)&65535)<<16)^(h=1540483477*(65535&(h^=h>>>24))+((1540483477*(h>>>16)&65535)<<16)),g-=4,++x;switch(g){case 3:y^=(255&i.charCodeAt(x+2))<<16;case 2:y^=(255&i.charCodeAt(x+1))<<8;case 1:y=1540483477*(65535&(y^=255&i.charCodeAt(x)))+((1540483477*(y>>>16)&65535)<<16)}return y=1540483477*(65535&(y^=y>>>13))+((1540483477*(y>>>16)&65535)<<16),(y^=y>>>15)>>>0}),Di.exports);return wi.exports=r,wi.exports.murmur3=r,wi.exports.murmur2=e,wi.exports})(),ji=M(kr);class yr{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,i,l,h){this.ids.push(ur(e)),this.positions.push(i,l,h)}getPositions(e){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");let i=ur(e),l=0,h=this.ids.length-1;for(;l<h;){let y=l+h>>1;this.ids[y]>=i?h=y:l=y+1}let g=[];for(;this.ids[l]===i;)g.push({index:this.positions[3*l],start:this.positions[3*l+1],end:this.positions[3*l+2]}),l++;return g}static serialize(e,i){let l=new Float64Array(e.ids),h=new Uint32Array(e.positions);return dr(l,h,0,l.length-1),i&&i.push(l.buffer,h.buffer),{ids:l,positions:h}}static deserialize(e){let i=new yr;return i.ids=e.ids,i.positions=e.positions,i.indexed=!0,i}}function ur(r){let e=+r;return!isNaN(e)&&e<=Number.MAX_SAFE_INTEGER?e:ji(String(r))}function dr(r,e,i,l){for(;i<l;){let h=r[i+l>>1],g=i-1,y=l+1;for(;;){do g++;while(r[g]<h);do y--;while(r[y]>h);if(g>=y)break;$r(r,g,y),$r(e,3*g,3*y),$r(e,3*g+1,3*y+1),$r(e,3*g+2,3*y+2)}y-i<l-y?(dr(r,e,i,y),i=y+1):(dr(r,e,y+1,l),l=y)}}function $r(r,e,i){let l=r[e];r[e]=r[i],r[i]=l}ot("FeaturePositionMap",yr);class vn{constructor(e,i){this.gl=e.gl,this.location=i}}class qa extends vn{constructor(e,i){super(e,i),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class Hs extends vn{constructor(e,i){super(e,i),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class Mo extends vn{constructor(e,i){super(e,i),this.current=Bt.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}let eu=new Float32Array(16);function ml(r){return[Je(255*r.r,255*r.g),Je(255*r.b,255*r.a)]}class Va{constructor(e,i,l){this.value=e,this.uniformNames=i.map((h=>`u_${h}`)),this.type=l}setUniform(e,i,l){e.set(l.constantOr(this.value))}getBinding(e,i,l){return this.type==="color"?new Mo(e,i):new qa(e,i)}}class Or{constructor(e,i){this.uniformNames=i.map((l=>`u_${l}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,i){this.pixelRatioFrom=i.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=i.tlbr,this.patternTo=e.tlbr}setConstantDashPositions(e,i){this.dashTo=[0,e.y,e.height,e.width],this.dashFrom=[0,i.y,i.height,i.width]}setUniform(e,i,l,h){let g=null;h==="u_pattern_to"?g=this.patternTo:h==="u_pattern_from"?g=this.patternFrom:h==="u_dasharray_to"?g=this.dashTo:h==="u_dasharray_from"?g=this.dashFrom:h==="u_pixel_ratio_to"?g=this.pixelRatioTo:h==="u_pixel_ratio_from"&&(g=this.pixelRatioFrom),g!==null&&e.set(g)}getBinding(e,i,l){return l.substr(0,9)==="u_pattern"||l.substr(0,12)==="u_dasharray_"?new Hs(e,i):new qa(e,i)}}class rn{constructor(e,i,l,h){this.expression=e,this.type=l,this.maxValue=0,this.paintVertexAttributes=i.map((g=>({name:`a_${g}`,type:"Float32",components:l==="color"?2:1,offset:0}))),this.paintVertexArray=new h}populatePaintArray(e,i,l){let h=this.paintVertexArray.length,g=this.expression.evaluate(new Ei(0,l),i,{},l.canonical,[],l.formattedSection);this.paintVertexArray.resize(e),this._setPaintValue(h,e,g)}updatePaintArray(e,i,l,h,g){let y=this.expression.evaluate(new Ei(0,g),l,h);this._setPaintValue(e,i,y)}_setPaintValue(e,i,l){if(this.type==="color"){let h=ml(l);for(let g=e;g<i;g++)this.paintVertexArray.emplace(g,h[0],h[1])}else{for(let h=e;h<i;h++)this.paintVertexArray.emplace(h,l);this.maxValue=Math.max(this.maxValue,Math.abs(l))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Hr{constructor(e,i,l,h,g,y){this.expression=e,this.uniformNames=i.map((x=>`u_${x}_t`)),this.type=l,this.useIntegerZoom=h,this.zoom=g,this.maxValue=0,this.paintVertexAttributes=i.map((x=>({name:`a_${x}`,type:"Float32",components:l==="color"?4:2,offset:0}))),this.paintVertexArray=new y}populatePaintArray(e,i,l){let h=this.expression.evaluate(new Ei(this.zoom,l),i,{},l.canonical,[],l.formattedSection),g=this.expression.evaluate(new Ei(this.zoom+1,l),i,{},l.canonical,[],l.formattedSection),y=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(y,e,h,g)}updatePaintArray(e,i,l,h,g){let y=this.expression.evaluate(new Ei(this.zoom,g),l,h),x=this.expression.evaluate(new Ei(this.zoom+1,g),l,h);this._setPaintValue(e,i,y,x)}_setPaintValue(e,i,l,h){if(this.type==="color"){let g=ml(l),y=ml(h);for(let x=e;x<i;x++)this.paintVertexArray.emplace(x,g[0],g[1],y[0],y[1])}else{for(let g=e;g<i;g++)this.paintVertexArray.emplace(g,l,h);this.maxValue=Math.max(this.maxValue,Math.abs(l),Math.abs(h))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,i){let l=this.useIntegerZoom?Math.floor(i.zoom):i.zoom,h=St(this.expression.interpolationFactor(l,this.zoom,this.zoom+1),0,1);e.set(h)}getBinding(e,i,l){return new qa(e,i)}}class aa{constructor(e,i,l,h,g,y){this.expression=e,this.type=i,this.useIntegerZoom=l,this.zoom=h,this.layerId=y,this.zoomInPaintVertexArray=new g,this.zoomOutPaintVertexArray=new g}populatePaintArray(e,i,l){let h=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(h,e,this.getPositionIds(i),l)}updatePaintArray(e,i,l,h,g){this._setPaintValues(e,i,this.getPositionIds(l),g)}_setPaintValues(e,i,l,h){let g=this.getPositions(h);if(!g||!l)return;let y=g[l.min],x=g[l.mid],S=g[l.max];if(y&&x&&S)for(let P=e;P<i;P++)this.emplace(this.zoomInPaintVertexArray,P,x,y),this.emplace(this.zoomOutPaintVertexArray,P,x,S)}upload(e){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){let i=this.getVertexAttributes();this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,i,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,i,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class _r extends aa{getPositions(e){return e.imagePositions}getPositionIds(e){return e.patterns&&e.patterns[this.layerId]}getVertexAttributes(){return Ze.members}emplace(e,i,l,h){e.emplace(i,l.tlbr[0],l.tlbr[1],l.tlbr[2],l.tlbr[3],h.tlbr[0],h.tlbr[1],h.tlbr[2],h.tlbr[3],l.pixelRatio,h.pixelRatio)}}class Pr extends aa{getPositions(e){return e.dashPositions}getPositionIds(e){return e.dashes&&e.dashes[this.layerId]}getVertexAttributes(){return ht.members}emplace(e,i,l,h){e.emplace(i,0,l.y,l.height,l.width,0,h.y,h.height,h.width)}}class Wn{constructor(e,i,l){this.binders={},this._buffers=[];let h=[];for(let g in e.paint._values){if(!l(g))continue;let y=e.paint.get(g);if(!(y instanceof Na&&ba(y.property.specification)))continue;let x=am(g,e.type),S=y.value,P=y.property.specification.type,A=y.property.useIntegerZoom,D=y.property.specification["property-type"],B=D==="cross-faded"||D==="cross-faded-data-driven";if(S.kind==="constant")this.binders[g]=B?new Or(S.value,x):new Va(S.value,x,P),h.push(`/u_${g}`);else if(S.kind==="source"||B){let F=Yh(g,P,"source");this.binders[g]=B?g==="line-dasharray"?new Pr(S,P,A,i,F,e.id):new _r(S,P,A,i,F,e.id):new rn(S,x,P,F),h.push(`/a_${g}`)}else{let F=Yh(g,P,"composite");this.binders[g]=new Hr(S,x,P,A,i,F),h.push(`/z_${g}`)}}this.cacheKey=h.sort().join("")}getMaxValue(e){let i=this.binders[e];return i instanceof rn||i instanceof Hr?i.maxValue:0}populatePaintArrays(e,i,l){for(let h in this.binders){let g=this.binders[h];(g instanceof rn||g instanceof Hr||g instanceof aa)&&g.populatePaintArray(e,i,l)}}setConstantPatternPositions(e,i){for(let l in this.binders){let h=this.binders[l];h instanceof Or&&h.setConstantPatternPositions(e,i)}}setConstantDashPositions(e,i){for(let l in this.binders){let h=this.binders[l];h instanceof Or&&h.setConstantDashPositions(e,i)}}updatePaintArrays(e,i,l,h,g){let y=!1;for(let x in e){let S=i.getPositions(x);for(let P of S){let A=l.feature(P.index);for(let D in this.binders){let B=this.binders[D];if((B instanceof rn||B instanceof Hr||B instanceof aa)&&B.expression.isStateDependent===!0){let F=h.paint.get(D);B.expression=F.value,B.updatePaintArray(P.start,P.end,A,e[x],g),y=!0}}}}return y}defines(){let e=[];for(let i in this.binders){let l=this.binders[i];(l instanceof Va||l instanceof Or)&&e.push(...l.uniformNames.map((h=>`#define HAS_UNIFORM_${h}`)))}return e}getBinderAttributes(){let e=[];for(let i in this.binders){let l=this.binders[i];if(l instanceof rn||l instanceof Hr)for(let h=0;h<l.paintVertexAttributes.length;h++)e.push(l.paintVertexAttributes[h].name);else if(l instanceof aa){let h=l.getVertexAttributes();for(let g of h)e.push(g.name)}}return e}getBinderUniforms(){let e=[];for(let i in this.binders){let l=this.binders[i];if(l instanceof Va||l instanceof Or||l instanceof Hr)for(let h of l.uniformNames)e.push(h)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,i){let l=[];for(let h in this.binders){let g=this.binders[h];if(g instanceof Va||g instanceof Or||g instanceof Hr){for(let y of g.uniformNames)if(i[y]){let x=g.getBinding(e,i[y],y);l.push({name:y,property:h,binding:x})}}}return l}setUniforms(e,i,l,h){for(let{name:g,property:y,binding:x}of i)this.binders[y].setUniform(x,h,l.get(y),g)}updatePaintBuffers(e){this._buffers=[];for(let i in this.binders){let l=this.binders[i];if(e&&l instanceof aa){let h=e.fromScale===2?l.zoomInPaintVertexBuffer:l.zoomOutPaintVertexBuffer;h&&this._buffers.push(h)}else(l instanceof rn||l instanceof Hr)&&l.paintVertexBuffer&&this._buffers.push(l.paintVertexBuffer)}}upload(e){for(let i in this.binders){let l=this.binders[i];(l instanceof rn||l instanceof Hr||l instanceof aa)&&l.upload(e)}this.updatePaintBuffers()}destroy(){for(let e in this.binders){let i=this.binders[e];(i instanceof rn||i instanceof Hr||i instanceof aa)&&i.destroy()}}}class Qi{constructor(e,i,l=()=>!0){this.programConfigurations={};for(let h of e)this.programConfigurations[h.id]=new Wn(h,i,l);this.needsUpload=!1,this._featureMap=new yr,this._bufferOffset=0}populatePaintArrays(e,i,l,h){for(let g in this.programConfigurations)this.programConfigurations[g].populatePaintArrays(e,i,h);i.id!==void 0&&this._featureMap.add(i.id,l,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,i,l,h){for(let g of l)this.needsUpload=this.programConfigurations[g.id].updatePaintArrays(e,this._featureMap,i,g,h)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(let i in this.programConfigurations)this.programConfigurations[i].upload(e);this.needsUpload=!1}}destroy(){for(let e in this.programConfigurations)this.programConfigurations[e].destroy()}}function am(r,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[r]||[r.replace(`${e}-`,"").replace(/-/g,"_")]}function Yh(r,e,i){let l={color:{source:ic,composite:wd},number:{source:ac,composite:ic}},h=(function(g){return{"line-pattern":{source:ce,composite:ce},"fill-pattern":{source:ce,composite:ce},"fill-extrusion-pattern":{source:ce,composite:ce},"line-dasharray":{source:me,composite:me}}[g]})(r);return h&&h[i]||l[e][i]}ot("ConstantBinder",Va),ot("CrossFadedConstantBinder",Or),ot("SourceExpressionBinder",rn),ot("CrossFadedPatternBinder",_r),ot("CrossFadedDasharrayBinder",Pr),ot("CompositeExpressionBinder",Hr),ot("ProgramConfiguration",Wn,{omit:["_buffers"]}),ot("ProgramConfigurationSet",Qi);let Sd=Math.pow(2,14)-1,Xh=-Sd-1;function Io(r){let e=Ft/r.extent,i=r.loadGeometry();for(let l=0;l<i.length;l++){let h=i[l];for(let g=0;g<h.length;g++){let y=h[g],x=Math.round(y.x*e),S=Math.round(y.y*e);y.x=St(x,Xh,Sd),y.y=St(S,Xh,Sd),(x<y.x||x>y.x+1||S<y.y||S>y.y+1)&&pr("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return i}function zo(r,e){return{type:r.type,id:r.id,properties:r.properties,geometry:e?Io(r):[]}}let Ys=-32768;function Kh(r,e,i,l,h){r.emplaceBack(Ys+8*e+l,Ys+8*i+h)}class tu{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((i=>i.id)),this.index=e.index,this.hasDependencies=!1,this.layoutVertexArray=new Z,this.indexArray=new Re,this.segments=new $e,this.programConfigurations=new Qi(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter((i=>i.isStateDependent())).map((i=>i.id))}populate(e,i,l){let h=this.layers[0],g=[],y=null,x=!1,S=h.type==="heatmap";if(h.type==="circle"){let A=h;y=A.layout.get("circle-sort-key"),x=!y.isConstant(),S=S||A.paint.get("circle-pitch-alignment")==="map"}let P=S?i.subdivisionGranularity.circle:1;for(let{feature:A,id:D,index:B,sourceLayerIndex:F}of e){let W=this.layers[0]._featureFilter.needGeometry,U=zo(A,W);if(!this.layers[0]._featureFilter.filter(new Ei(this.zoom),U,l))continue;let $=x?y.evaluate(U,{},l):void 0,J={id:D,properties:A.properties,type:A.type,sourceLayerIndex:F,index:B,geometry:W?U.geometry:Io(A),patterns:{},sortKey:$};g.push(J)}x&&g.sort(((A,D)=>A.sortKey-D.sortKey));for(let A of g){let{geometry:D,index:B,sourceLayerIndex:F}=A,W=e[B].feature;this.addFeature(A,D,B,l,P),i.featureIndex.insert(W,D,B,F,this.index)}}update(e,i,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,i,this.stateDependentLayers,{imagePositions:l})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Fe),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,i,l,h,g=1){let y;switch(g){case 1:y=[0,7];break;case 3:y=[0,2,5,7];break;case 5:y=[0,1,3,4,6,7];break;case 7:y=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${g}; valid values are 1, 3, 5, 7.`)}let x=y.length;for(let S of i)for(let P of S){let A=P.x,D=P.y;if(A<0||A>=Ft||D<0||D>=Ft)continue;let B=this.segments.prepareSegment(x*x,this.layoutVertexArray,this.indexArray,e.sortKey),F=B.vertexLength;for(let W=0;W<x;W++)for(let U=0;U<x;U++)Kh(this.layoutVertexArray,A,D,y[U],y[W]);for(let W=0;W<x-1;W++)for(let U=0;U<x-1;U++){let $=F+W*x+U,J=F+(W+1)*x+U;this.indexArray.emplaceBack($,J+1,$+1),this.indexArray.emplaceBack($,J,J+1)}B.vertexLength+=x*x,B.primitiveLength+=(x-1)*(x-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,l,{imagePositions:{},canonical:h})}}function Td(r,e){for(let i=0;i<r.length;i++)if(iu(e,r[i]))return!0;for(let i=0;i<e.length;i++)if(iu(r,e[i]))return!0;return!!sm(r,e)}function gl(r,e,i){return!!iu(r,e)||!!om(e,r,i)}function Cd(r,e){if(r.length===1)return G_(e,r[0]);for(let i=0;i<e.length;i++){let l=e[i];for(let h=0;h<l.length;h++)if(iu(r,l[h]))return!0}for(let i=0;i<r.length;i++)if(G_(e,r[i]))return!0;for(let i=0;i<e.length;i++)if(sm(r,e[i]))return!0;return!1}function kd(r,e,i){if(r.length>1){if(sm(r,e))return!0;for(let l=0;l<e.length;l++)if(om(e[l],r,i))return!0}for(let l=0;l<r.length;l++)if(om(r[l],e,i))return!0;return!1}function sm(r,e){if(r.length===0||e.length===0)return!1;for(let i=0;i<r.length-1;i++){let l=r[i],h=r[i+1];for(let g=0;g<e.length-1;g++)if(OE(l,h,e[g],e[g+1]))return!0}return!1}function OE(r,e,i,l){return gr(r,i,l)!==gr(e,i,l)&&gr(r,e,i)!==gr(r,e,l)}function om(r,e,i){let l=i*i;if(e.length===1)return r.distSqr(e[0])<l;for(let h=1;h<e.length;h++)if(W_(r,e[h-1],e[h])<l)return!0;return!1}function W_(r,e,i){let l=e.distSqr(i);if(l===0)return r.distSqr(e);let h=((r.x-e.x)*(i.x-e.x)+(r.y-e.y)*(i.y-e.y))/l;return r.distSqr(h<0?e:h>1?i:i.sub(e)._mult(h)._add(e))}function G_(r,e){let i,l,h,g=!1;for(let y=0;y<r.length;y++){i=r[y];for(let x=0,S=i.length-1;x<i.length;S=x++)l=i[x],h=i[S],l.y>e.y!=h.y>e.y&&e.x<(h.x-l.x)*(e.y-l.y)/(h.y-l.y)+l.x&&(g=!g)}return g}function iu(r,e){let i=!1;for(let l=0,h=r.length-1;l<r.length;h=l++){let g=r[l],y=r[h];g.y>e.y!=y.y>e.y&&e.x<(y.x-g.x)*(e.y-g.y)/(y.y-g.y)+g.x&&(i=!i)}return i}function RE(r,e,i){let l=i[0],h=i[2];if(r.x<l.x&&e.x<l.x||r.x>h.x&&e.x>h.x||r.y<l.y&&e.y<l.y||r.y>h.y&&e.y>h.y)return!1;let g=gr(r,e,i[0]);return g!==gr(r,e,i[1])||g!==gr(r,e,i[2])||g!==gr(r,e,i[3])}function ru(r,e,i){let l=e.paint.get(r).value;return l.kind==="constant"?l.value:i.programConfigurations.get(e.id).getMaxValue(r)}function Qh(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function Jh(r,e,i,l,h){if(!e[0]&&!e[1])return r;let g=T.convert(e)._mult(h);i==="viewport"&&g._rotate(-l);let y=[];for(let x=0;x<r.length;x++)y.push(r[x].sub(g));return y}function BE(r){let e=[];for(let i=0;i<r.length;i++){let l=r[i],h=e.at(-1);(i===0||h&&!l.equals(h))&&e.push(l)}return e}function FE({queryGeometry:r,size:e},i){return gl(r,i,e)}function jE({queryGeometry:r,size:e,transform:i,unwrappedTileID:l,getElevation:h},g){return gl(r,g,e*(i.projectTileCoordinates(g.x,g.y,l,h).signedDistanceFromCamera/i.cameraToCenterDistance))}function NE({queryGeometry:r,size:e,transform:i,unwrappedTileID:l,getElevation:h},g){let y=i.projectTileCoordinates(g.x,g.y,l,h).signedDistanceFromCamera,x=e*(i.cameraToCenterDistance/y);return gl(r,lm(g,i,l,h),x)}function qE({queryGeometry:r,size:e,transform:i,unwrappedTileID:l,getElevation:h},g){return gl(r,lm(g,i,l,h),e)}function U_({queryGeometry:r,size:e,transform:i,unwrappedTileID:l,getElevation:h,pitchAlignment:g="map",pitchScale:y="map"},x){let S=g==="map"?y==="map"?FE:jE:y==="map"?NE:qE,P={queryGeometry:r,size:e,transform:i,unwrappedTileID:l,getElevation:h};for(let A of x)for(let D of A)if(S(P,D))return!0;return!1}function lm(r,e,i,l){let h=e.projectTileCoordinates(r.x,r.y,i,l).point;return new T((.5*h.x+.5)*e.width,(.5*-h.y+.5)*e.height)}let Z_,$_;ot("CircleBucket",tu,{omit:["layers"]});var VE={get paint(){return $_=$_||new _n({"circle-radius":new xt(Le.paint_circle["circle-radius"]),"circle-color":new xt(Le.paint_circle["circle-color"]),"circle-blur":new xt(Le.paint_circle["circle-blur"]),"circle-opacity":new xt(Le.paint_circle["circle-opacity"]),"circle-translate":new ft(Le.paint_circle["circle-translate"]),"circle-translate-anchor":new ft(Le.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ft(Le.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ft(Le.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new xt(Le.paint_circle["circle-stroke-width"]),"circle-stroke-color":new xt(Le.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new xt(Le.paint_circle["circle-stroke-opacity"])})},get layout(){return Z_=Z_||new _n({"circle-sort-key":new xt(Le.layout_circle["circle-sort-key"])})}};class WE extends Vn{constructor(e,i){super(e,VE,i)}createBucket(e){return new tu(e)}queryRadius(e){let i=e;return ru("circle-radius",this,i)+ru("circle-stroke-width",this,i)+Qh(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:e,feature:i,featureState:l,geometry:h,transform:g,pixelsToTileUnits:y,unwrappedTileID:x,getElevation:S}){let P=Jh(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-g.bearingInRadians,y),A=this.paint.get("circle-radius").evaluate(i,l)+this.paint.get("circle-stroke-width").evaluate(i,l),D=this.paint.get("circle-pitch-scale"),B=this.paint.get("circle-pitch-alignment"),F,W;return B==="map"?(F=P,W=A*y):(F=(function(U,$,J,ue){return U.map((ee=>lm(ee,$,J,ue)))})(P,g,x,S),W=A),U_({queryGeometry:F,size:W,transform:g,unwrappedTileID:x,getElevation:S,pitchAlignment:B,pitchScale:D},h)}}class H_ extends tu{}let Y_;ot("HeatmapBucket",H_,{omit:["layers"]});var GE={get paint(){return Y_=Y_||new _n({"heatmap-radius":new xt(Le.paint_heatmap["heatmap-radius"]),"heatmap-weight":new xt(Le.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ft(Le.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ko(Le.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ft(Le.paint_heatmap["heatmap-opacity"])})}};function cm(r,{width:e,height:i},l,h){if(h){if(h instanceof Uint8ClampedArray)h=new Uint8Array(h.buffer);else if(h.length!==e*i*l)throw new RangeError(`mismatched image size. expected: ${h.length} but got: ${e*i*l}`)}else h=new Uint8Array(e*i*l);return r.width=e,r.height=i,r.data=h,r}function X_(r,{width:e,height:i},l){if(e===r.width&&i===r.height)return;let h=cm({},{width:e,height:i},l);um(r,h,{x:0,y:0},{x:0,y:0},{width:Math.min(r.width,e),height:Math.min(r.height,i)},l),r.width=e,r.height=i,r.data=h.data}function um(r,e,i,l,h,g){if(h.width===0||h.height===0)return e;if(h.width>r.width||h.height>r.height||i.x>r.width-h.width||i.y>r.height-h.height)throw new RangeError("out of range source coordinates for image copy");if(h.width>e.width||h.height>e.height||l.x>e.width-h.width||l.y>e.height-h.height)throw new RangeError("out of range destination coordinates for image copy");let y=r.data,x=e.data;if(y===x)throw new Error("srcData equals dstData, so image is already copied");for(let S=0;S<h.height;S++){let P=((i.y+S)*r.width+i.x)*g,A=((l.y+S)*e.width+l.x)*g;for(let D=0;D<h.width*g;D++)x[A+D]=y[P+D]}return e}class Pd{constructor(e,i){cm(this,e,1,i)}resize(e){X_(this,e,1)}clone(){return new Pd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,i,l,h,g){um(e,i,l,h,g,1)}}class Gn{constructor(e,i){cm(this,e,4,i)}resize(e){X_(this,e,4)}replace(e,i){i?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new Gn({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,i,l,h,g){um(e,i,l,h,g,4)}setPixel(e,i,l){let h=4*(e*this.width+i);this.data[h+0]=Math.round(255*l.r/l.a),this.data[h+1]=Math.round(255*l.g/l.a),this.data[h+2]=Math.round(255*l.b/l.a),this.data[h+3]=Math.round(255*l.a)}}function K_(r){let e={},i=r.resolution||256,l=r.clips?r.clips.length:1,h=r.image||new Gn({width:i,height:l});if(Math.log(i)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${i}`);let g=(y,x,S)=>{e[r.evaluationKey]=S;let P=r.expression.evaluate(e);h.setPixel(y/4/i,x/4,P)};if(r.clips)for(let y=0,x=0;y<l;++y,x+=4*i)for(let S=0,P=0;S<i;S++,P+=4){let A=S/(i-1),{start:D,end:B}=r.clips[y];g(x,P,D*(1-A)+B*A)}else for(let y=0,x=0;y<i;y++,x+=4)g(0,x,y/(i-1));return h}ot("AlphaImage",Pd),ot("RGBAImage",Gn);let dm="big-fb";class UE extends Vn{createBucket(e){return new H_(e)}constructor(e,i){super(e,GE,i),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){e==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=K_({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(dm)&&this.heatmapFbos.delete(dm)}queryRadius(e){return ru("heatmap-radius",this,e)}queryIntersectsFeature({queryGeometry:e,feature:i,featureState:l,geometry:h,transform:g,pixelsToTileUnits:y,unwrappedTileID:x,getElevation:S}){return U_({queryGeometry:e,size:this.paint.get("heatmap-radius").evaluate(i,l)*y,transform:g,unwrappedTileID:x,getElevation:S},h)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Q_;var ZE={get paint(){return Q_=Q_||new _n({"hillshade-illumination-direction":new ft(Le.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new ft(Le.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new ft(Le.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ft(Le.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ft(Le.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ft(Le.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ft(Le.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new ft(Le.paint_hillshade["hillshade-method"])})}};class $E extends Vn{constructor(e,i){super(e,ZE,i),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let e=this.paint.get("hillshade-illumination-direction").values,i=this.paint.get("hillshade-illumination-altitude").values,l=this.paint.get("hillshade-highlight-color").values,h=this.paint.get("hillshade-shadow-color").values,g=Math.max(e.length,i.length,l.length,h.length);e=e.concat(Array(g-e.length).fill(e.at(-1))),i=i.concat(Array(g-i.length).fill(i.at(-1))),l=l.concat(Array(g-l.length).fill(l.at(-1))),h=h.concat(Array(g-h.length).fill(h.at(-1)));let y=i.map(Ss);return{directionRadians:e.map(Ss),altitudeRadians:y,shadowColor:h,highlightColor:l}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let J_;var HE={get paint(){return J_=J_||new _n({"color-relief-opacity":new ft(Le["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new ko(Le["paint_color-relief"]["color-relief-color"])})}};class hm{constructor(e,i,l,h){this.context=e,this.format=l,this.texture=e.gl.createTexture(),this.update(i,h)}update(e,i,l){let{width:h,height:g}=e,y=!(this.size&&this.size[0]===h&&this.size[1]===g||l),{context:x}=this,{gl:S}=x;if(this.useMipmap=!!(i&&i.useMipmap),S.bindTexture(S.TEXTURE_2D,this.texture),x.pixelStoreUnpackFlipY.set(!1),x.pixelStoreUnpack.set(1),x.pixelStoreUnpackPremultiplyAlpha.set(this.format===S.RGBA&&(!i||i.premultiply!==!1)),y)this.size=[h,g],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||Dn(e)?S.texImage2D(S.TEXTURE_2D,0,this.format,this.format,S.UNSIGNED_BYTE,e):S.texImage2D(S.TEXTURE_2D,0,this.format,h,g,0,this.format,S.UNSIGNED_BYTE,e.data);else{let{x:P,y:A}=l||{x:0,y:0};e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||Dn(e)?S.texSubImage2D(S.TEXTURE_2D,0,P,A,S.RGBA,S.UNSIGNED_BYTE,e):S.texSubImage2D(S.TEXTURE_2D,0,P,A,h,g,S.RGBA,S.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&S.generateMipmap(S.TEXTURE_2D),x.pixelStoreUnpackFlipY.setDefault(),x.pixelStoreUnpack.setDefault(),x.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(e,i,l){let{context:h}=this,{gl:g}=h;g.bindTexture(g.TEXTURE_2D,this.texture),l!==g.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(l=g.LINEAR),e!==this.filter&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,e),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,l||e),this.filter=e),i!==this.wrap&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,i),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,i),this.wrap=i)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){let{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class ev{constructor(e,i,l,h=1,g=1,y=1,x=0){if(this.uid=e,i.height!==i.width)throw new RangeError("DEM tiles must be square");if(l&&!["mapbox","terrarium","custom"].includes(l))return void pr(`"${l}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=i.height;let S=this.dim=i.height-2;switch(this.data=new Uint32Array(i.data.buffer),l){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=h,this.greenFactor=g,this.blueFactor=y,this.baseShift=x;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let P=0;P<S;P++)this.data[this._idx(-1,P)]=this.data[this._idx(0,P)],this.data[this._idx(S,P)]=this.data[this._idx(S-1,P)],this.data[this._idx(P,-1)]=this.data[this._idx(P,0)],this.data[this._idx(P,S)]=this.data[this._idx(P,S-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(S,-1)]=this.data[this._idx(S-1,0)],this.data[this._idx(-1,S)]=this.data[this._idx(0,S-1)],this.data[this._idx(S,S)]=this.data[this._idx(S-1,S-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let P=0;P<S;P++)for(let A=0;A<S;A++){let D=this.get(P,A);D>this.max&&(this.max=D),D<this.min&&(this.min=D)}}get(e,i){let l=new Uint8Array(this.data.buffer),h=4*this._idx(e,i);return this.unpack(l[h],l[h+1],l[h+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(e,i){if(e<-1||e>=this.dim+1||i<-1||i>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(i+1)*this.stride+(e+1)}unpack(e,i,l){return e*this.redFactor+i*this.greenFactor+l*this.blueFactor-this.baseShift}pack(e){return tv(e,this.getUnpackVector())}getPixels(){return new Gn({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(e,i,l){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let h=i*this.dim,g=i*this.dim+this.dim,y=l*this.dim,x=l*this.dim+this.dim;switch(i){case-1:h=g-1;break;case 1:g=h+1}switch(l){case-1:y=x-1;break;case 1:x=y+1}let S=-i*this.dim,P=-l*this.dim;for(let A=y;A<x;A++)for(let D=h;D<g;D++)this.data[this._idx(D,A)]=e.data[this._idx(D+S,A+P)]}}function tv(r,e){let i=e[0],l=e[1],h=e[2],g=e[3],y=Math.min(i,l,h),x=Math.round((r+g)/y);return{r:Math.floor(x*y/i)%256,g:Math.floor(x*y/l)%256,b:Math.floor(x*y/h)%256}}ot("DEMData",ev);class YE extends Vn{constructor(e,i){super(e,HE,i)}_createColorRamp(e){let i={elevationStops:[],colorStops:[]},l=this._transitionablePaint._values["color-relief-color"].value.expression;if(l instanceof v&&l._styleExpression.expression instanceof Xi){this.colorRampExpression=l;let y=l._styleExpression.expression;i.elevationStops=y.labels,i.colorStops=[];for(let x of i.elevationStops)i.colorStops.push(y.evaluate({globals:{elevation:x}}))}if(i.elevationStops.length<1&&(i.elevationStops=[0],i.colorStops=[Bt.transparent]),i.elevationStops.length<2&&(i.elevationStops.push(i.elevationStops[0]+1),i.colorStops.push(i.colorStops[0])),i.elevationStops.length<=e)return i;let h={elevationStops:[],colorStops:[]},g=(i.elevationStops.length-1)/(e-1);for(let y=0;y<i.elevationStops.length-.5;y+=g)h.elevationStops.push(i.elevationStops[Math.round(y)]),h.colorStops.push(i.colorStops[Math.round(y)]);return pr(`Too many colors in specification of ${this.id} color-relief layer, may not render properly. Max possible colors: ${e}, provided: ${i.elevationStops.length}`),h}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(e,i,l){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;let h=this._createColorRamp(i),g=new Gn({width:h.colorStops.length,height:1}),y=new Gn({width:h.colorStops.length,height:1});for(let x=0;x<h.elevationStops.length;x++){let S=tv(h.elevationStops[x],l);y.setPixel(0,x,new Bt(S.r/255,S.g/255,S.b/255,1)),g.setPixel(0,x,h.colorStops[x])}return this.colorRampTextures={elevationTexture:new hm(e,y,e.gl.RGBA),colorTexture:new hm(e,g,e.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}let XE=cr([{name:"a_pos",components:2,type:"Int16"}],4),{members:KE}=XE;function ep(r,e,i){let l=i.patternDependencies,h=!1;for(let g of e){let y=g.paint.get(`${r}-pattern`);y.isConstant()||(h=!0);let x=y.constantOr(null);x&&(h=!0,l[x.to]=!0,l[x.from]=!0)}return h}function pm(r,e,i,l,h){let{zoom:g}=l,y=h.patternDependencies;for(let x of e){let S=x.paint.get(`${r}-pattern`).value;if(S.kind!=="constant"){let P=S.evaluate({zoom:g-1},i,{},h.availableImages),A=S.evaluate({zoom:g},i,{},h.availableImages),D=S.evaluate({zoom:g+1},i,{},h.availableImages);P=P&&P.name?P.name:P,A=A&&A.name?A.name:A,D=D&&D.name?D.name:D,y[P]=!0,y[A]=!0,y[D]=!0,i.patterns[x.id]={min:P,mid:A,max:D}}}return i}function iv(r,e,i,l,h){let g;if(h===(function(y,x,S,P){let A=0;for(let D=x,B=S-P;D<S;D+=P)A+=(y[B]-y[D])*(y[D+1]+y[B+1]),B=D;return A})(r,e,i,l)>0)for(let y=e;y<i;y+=l)g=sv(y/l|0,r[y],r[y+1],g);else for(let y=i-l;y>=e;y-=l)g=sv(y/l|0,r[y],r[y+1],g);return g&&nu(g,g.next)&&(Id(g),g=g.next),g}function sc(r,e){if(!r)return r;e||(e=r);let i,l=r;do if(i=!1,l.steiner||!nu(l,l.next)&&mr(l.prev,l,l.next)!==0)l=l.next;else{if(Id(l),l=e=l.prev,l===l.next)break;i=!0}while(i||l!==e);return e}function Ed(r,e,i,l,h,g,y){if(!r)return;!y&&g&&(function(S,P,A,D){let B=S;do B.z===0&&(B.z=fm(B.x,B.y,P,A,D)),B.prevZ=B.prev,B.nextZ=B.next,B=B.next;while(B!==S);B.prevZ.nextZ=null,B.prevZ=null,(function(F){let W,U=1;do{let $,J=F;F=null;let ue=null;for(W=0;J;){W++;let ee=J,ae=0;for(let fe=0;fe<U&&(ae++,ee=ee.nextZ,ee);fe++);let he=U;for(;ae>0||he>0&&ee;)ae!==0&&(he===0||!ee||J.z<=ee.z)?($=J,J=J.nextZ,ae--):($=ee,ee=ee.nextZ,he--),ue?ue.nextZ=$:F=$,$.prevZ=ue,ue=$;J=ee}ue.nextZ=null,U*=2}while(W>1)})(B)})(r,l,h,g);let x=r;for(;r.prev!==r.next;){let S=r.prev,P=r.next;if(g?JE(r,l,h,g):QE(r))e.push(S.i,r.i,P.i),Id(r),r=P.next,x=P.next;else if((r=P)===x){y?y===1?Ed(r=eA(sc(r),e),e,i,l,h,g,2):y===2&&tA(r,e,i,l,h,g):Ed(sc(r),e,i,l,h,g,1);break}}}function QE(r){let e=r.prev,i=r,l=r.next;if(mr(e,i,l)>=0)return!1;let h=e.x,g=i.x,y=l.x,x=e.y,S=i.y,P=l.y,A=Math.min(h,g,y),D=Math.min(x,S,P),B=Math.max(h,g,y),F=Math.max(x,S,P),W=l.next;for(;W!==e;){if(W.x>=A&&W.x<=B&&W.y>=D&&W.y<=F&&Ad(h,x,g,S,y,P,W.x,W.y)&&mr(W.prev,W,W.next)>=0)return!1;W=W.next}return!0}function JE(r,e,i,l){let h=r.prev,g=r,y=r.next;if(mr(h,g,y)>=0)return!1;let x=h.x,S=g.x,P=y.x,A=h.y,D=g.y,B=y.y,F=Math.min(x,S,P),W=Math.min(A,D,B),U=Math.max(x,S,P),$=Math.max(A,D,B),J=fm(F,W,e,i,l),ue=fm(U,$,e,i,l),ee=r.prevZ,ae=r.nextZ;for(;ee&&ee.z>=J&&ae&&ae.z<=ue;){if(ee.x>=F&&ee.x<=U&&ee.y>=W&&ee.y<=$&&ee!==h&&ee!==y&&Ad(x,A,S,D,P,B,ee.x,ee.y)&&mr(ee.prev,ee,ee.next)>=0||(ee=ee.prevZ,ae.x>=F&&ae.x<=U&&ae.y>=W&&ae.y<=$&&ae!==h&&ae!==y&&Ad(x,A,S,D,P,B,ae.x,ae.y)&&mr(ae.prev,ae,ae.next)>=0))return!1;ae=ae.nextZ}for(;ee&&ee.z>=J;){if(ee.x>=F&&ee.x<=U&&ee.y>=W&&ee.y<=$&&ee!==h&&ee!==y&&Ad(x,A,S,D,P,B,ee.x,ee.y)&&mr(ee.prev,ee,ee.next)>=0)return!1;ee=ee.prevZ}for(;ae&&ae.z<=ue;){if(ae.x>=F&&ae.x<=U&&ae.y>=W&&ae.y<=$&&ae!==h&&ae!==y&&Ad(x,A,S,D,P,B,ae.x,ae.y)&&mr(ae.prev,ae,ae.next)>=0)return!1;ae=ae.nextZ}return!0}function eA(r,e){let i=r;do{let l=i.prev,h=i.next.next;!nu(l,h)&&nv(l,i,i.next,h)&&Md(l,h)&&Md(h,l)&&(e.push(l.i,i.i,h.i),Id(i),Id(i.next),i=r=h),i=i.next}while(i!==r);return sc(i)}function tA(r,e,i,l,h,g){let y=r;do{let x=y.next.next;for(;x!==y.prev;){if(y.i!==x.i&&sA(y,x)){let S=av(y,x);return y=sc(y,y.next),S=sc(S,S.next),Ed(y,e,i,l,h,g,0),void Ed(S,e,i,l,h,g,0)}x=x.next}y=y.next}while(y!==r)}function iA(r,e){let i=r.x-e.x;return i===0&&(i=r.y-e.y,i===0)&&(i=(r.next.y-r.y)/(r.next.x-r.x)-(e.next.y-e.y)/(e.next.x-e.x)),i}function rA(r,e){let i=(function(h,g){let y=g,x=h.x,S=h.y,P,A=-1/0;if(nu(h,y))return y;do{if(nu(h,y.next))return y.next;if(S<=y.y&&S>=y.next.y&&y.next.y!==y.y){let U=y.x+(S-y.y)*(y.next.x-y.x)/(y.next.y-y.y);if(U<=x&&U>A&&(A=U,P=y.x<y.next.x?y:y.next,U===x))return P}y=y.next}while(y!==g);if(!P)return null;let D=P,B=P.x,F=P.y,W=1/0;y=P;do{if(x>=y.x&&y.x>=B&&x!==y.x&&rv(S<F?x:A,S,B,F,S<F?A:x,S,y.x,y.y)){let U=Math.abs(S-y.y)/(x-y.x);Md(y,h)&&(U<W||U===W&&(y.x>P.x||y.x===P.x&&nA(P,y)))&&(P=y,W=U)}y=y.next}while(y!==D);return P})(r,e);if(!i)return e;let l=av(i,r);return sc(l,l.next),sc(i,i.next)}function nA(r,e){return mr(r.prev,r,e.prev)<0&&mr(e.next,r,r.next)<0}function fm(r,e,i,l,h){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-i)*h|0)|r<<8))|r<<4))|r<<2))|r<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-l)*h|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function aA(r){let e=r,i=r;do(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next;while(e!==r);return i}function rv(r,e,i,l,h,g,y,x){return(h-y)*(e-x)>=(r-y)*(g-x)&&(r-y)*(l-x)>=(i-y)*(e-x)&&(i-y)*(g-x)>=(h-y)*(l-x)}function Ad(r,e,i,l,h,g,y,x){return!(r===y&&e===x)&&rv(r,e,i,l,h,g,y,x)}function sA(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!(function(i,l){let h=i;do{if(h.i!==i.i&&h.next.i!==i.i&&h.i!==l.i&&h.next.i!==l.i&&nv(h,h.next,i,l))return!0;h=h.next}while(h!==i);return!1})(r,e)&&(Md(r,e)&&Md(e,r)&&(function(i,l){let h=i,g=!1,y=(i.x+l.x)/2,x=(i.y+l.y)/2;do h.y>x!=h.next.y>x&&h.next.y!==h.y&&y<(h.next.x-h.x)*(x-h.y)/(h.next.y-h.y)+h.x&&(g=!g),h=h.next;while(h!==i);return g})(r,e)&&(mr(r.prev,r,e.prev)||mr(r,e.prev,e))||nu(r,e)&&mr(r.prev,r,r.next)>0&&mr(e.prev,e,e.next)>0)}function mr(r,e,i){return(e.y-r.y)*(i.x-e.x)-(e.x-r.x)*(i.y-e.y)}function nu(r,e){return r.x===e.x&&r.y===e.y}function nv(r,e,i,l){let h=ip(mr(r,e,i)),g=ip(mr(r,e,l)),y=ip(mr(i,l,r)),x=ip(mr(i,l,e));return h!==g&&y!==x||!(h!==0||!tp(r,i,e))||!(g!==0||!tp(r,l,e))||!(y!==0||!tp(i,r,l))||!(x!==0||!tp(i,e,l))}function tp(r,e,i){return e.x<=Math.max(r.x,i.x)&&e.x>=Math.min(r.x,i.x)&&e.y<=Math.max(r.y,i.y)&&e.y>=Math.min(r.y,i.y)}function ip(r){return r>0?1:r<0?-1:0}function Md(r,e){return mr(r.prev,r,r.next)<0?mr(r,e,r.next)>=0&&mr(r,r.prev,e)>=0:mr(r,e,r.prev)<0||mr(r,r.next,e)<0}function av(r,e){let i=mm(r.i,r.x,r.y),l=mm(e.i,e.x,e.y),h=r.next,g=e.prev;return r.next=e,e.prev=r,i.next=h,h.prev=i,l.next=i,i.prev=l,g.next=l,l.prev=g,l}function sv(r,e,i,l){let h=mm(r,e,i);return l?(h.next=l.next,h.prev=l,l.next.prev=h,l.next=h):(h.prev=h,h.next=h),h}function Id(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function mm(r,e,i){return{i:r,x:e,y:i,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class au{constructor(e,i){if(i>e)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=e,this._minGranularity=i}getGranularityForZoomLevel(e){return Math.max(Math.floor(this._baseZoomGranularity/(1<<e)),this._minGranularity,1)}}class rp{constructor(e){this.fill=e.fill,this.line=e.line,this.tile=e.tile,this.stencil=e.stencil,this.circle=e.circle}}rp.noSubdivision=new rp({fill:new au(0,0),line:new au(0,0),tile:new au(0,0),stencil:new au(0,0),circle:1}),ot("SubdivisionGranularityExpression",au),ot("SubdivisionGranularitySetting",rp);let su=-32768,zd=32767;class oA{constructor(e,i){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=e,this._granularityCellSize=Ft/e,this._canonical=i}_getKey(e,i){return(e+=32768)<<16|i+32768}_vertexToIndex(e,i){if(e<-32768||i<-32768||e>32767||i>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");let l=0|Math.round(e),h=0|Math.round(i),g=this._getKey(l,h);if(this._vertexDictionary.has(g))return this._vertexDictionary.get(g);let y=this._vertexBuffer.length/2;return this._vertexDictionary.set(g,y),this._vertexBuffer.push(l,h),y}_subdivideTrianglesScanline(e){if(this._granularity<2)return(function(h,g){let y=[];for(let x=0;x<g.length;x+=3){let S=g[x],P=g[x+1],A=g[x+2],D=h[2*S],B=h[2*S+1];(h[2*P]-D)*(h[2*A+1]-B)-(h[2*P+1]-B)*(h[2*A]-D)>0?(y.push(S),y.push(A),y.push(P)):(y.push(S),y.push(P),y.push(A))}return y})(this._vertexBuffer,e);let i=[],l=e.length;for(let h=0;h<l;h+=3){let g=[e[h+0],e[h+1],e[h+2]],y=[this._vertexBuffer[2*e[h+0]+0],this._vertexBuffer[2*e[h+0]+1],this._vertexBuffer[2*e[h+1]+0],this._vertexBuffer[2*e[h+1]+1],this._vertexBuffer[2*e[h+2]+0],this._vertexBuffer[2*e[h+2]+1]],x=1/0,S=1/0,P=-1/0,A=-1/0;for(let U=0;U<3;U++){let $=y[2*U],J=y[2*U+1];x=Math.min(x,$),P=Math.max(P,$),S=Math.min(S,J),A=Math.max(A,J)}if(x===P||S===A)continue;let D=Math.floor(x/this._granularityCellSize),B=Math.ceil(P/this._granularityCellSize),F=Math.floor(S/this._granularityCellSize),W=Math.ceil(A/this._granularityCellSize);if(D!==B||F!==W)for(let U=F;U<W;U++){let $=this._scanlineGenerateVertexRingForCellRow(U,y,g);lA(this._vertexBuffer,$,i)}else i.push(...g)}return i}_scanlineGenerateVertexRingForCellRow(e,i,l){let h=e*this._granularityCellSize,g=h+this._granularityCellSize,y=[];for(let x=0;x<3;x++){let S=i[2*x],P=i[2*x+1],A=i[2*(x+1)%6],D=i[(2*(x+1)+1)%6],B=i[2*(x+2)%6],F=i[(2*(x+2)+1)%6],W=A-S,U=D-P,$=W===0,J=U===0,ue=(h-P)/U,ee=(g-P)/U,ae=Math.min(ue,ee),he=Math.max(ue,ee);if(!J&&(ae>=1||he<=0)||J&&(P<h||P>g)){D>=h&&D<=g&&y.push(l[(x+1)%3]);continue}!J&&ae>0&&y.push(this._vertexToIndex(S+W*ae,P+U*ae));let fe=S+W*Math.max(ae,0),Ae=S+W*Math.min(he,1);$||this._generateIntraEdgeVertices(y,S,P,A,D,fe,Ae),!J&&he<1&&y.push(this._vertexToIndex(S+W*he,P+U*he)),(J||D>=h&&D<=g)&&y.push(l[(x+1)%3]),!J&&(D<=h||D>=g)&&this._generateInterEdgeVertices(y,S,P,A,D,B,F,Ae,h,g)}return y}_generateIntraEdgeVertices(e,i,l,h,g,y,x){let S=h-i,P=g-l,A=P===0,D=A?Math.min(i,h):Math.min(y,x),B=A?Math.max(i,h):Math.max(y,x),F=Math.floor(D/this._granularityCellSize)+1,W=Math.ceil(B/this._granularityCellSize)-1;if(A?i<h:y<x)for(let U=F;U<=W;U++){let $=U*this._granularityCellSize;e.push(this._vertexToIndex($,l+P*($-i)/S))}else for(let U=W;U>=F;U--){let $=U*this._granularityCellSize;e.push(this._vertexToIndex($,l+P*($-i)/S))}}_generateInterEdgeVertices(e,i,l,h,g,y,x,S,P,A){let D=g-l,B=y-h,F=x-g,W=(P-g)/F,U=(A-g)/F,$=Math.min(W,U),J=Math.max(W,U),ue=h+B*$,ee=Math.floor(Math.min(ue,S)/this._granularityCellSize)+1,ae=Math.ceil(Math.max(ue,S)/this._granularityCellSize)-1,he=S<ue,fe=F===0;if(fe&&(x===P||x===A))return;if(fe||$>=1||J<=0){let We=l-x,qe=y+(i-y)*Math.min((P-x)/We,(A-x)/We);ee=Math.floor(Math.min(qe,S)/this._granularityCellSize)+1,ae=Math.ceil(Math.max(qe,S)/this._granularityCellSize)-1,he=S<qe}let Ae=D>0?A:P;if(he)for(let We=ee;We<=ae;We++)e.push(this._vertexToIndex(We*this._granularityCellSize,Ae));else for(let We=ae;We>=ee;We--)e.push(this._vertexToIndex(We*this._granularityCellSize,Ae))}_generateOutline(e){let i=[];for(let l of e){let h=oc(l,this._granularity,!0),g=this._pointArrayToIndices(h),y=[];for(let x=1;x<g.length;x++)y.push(g[x-1]),y.push(g[x]);i.push(y)}return i}_handlePoles(e){let i=!1,l=!1;this._canonical&&(this._canonical.y===0&&(i=!0),this._canonical.y===(1<<this._canonical.z)-1&&(l=!0)),(i||l)&&this._fillPoles(e,i,l)}_ensureNoPoleVertices(){let e=this._vertexBuffer;for(let i=0;i<e.length;i+=2){let l=e[i+1];l===su&&(e[i+1]=-32767),l===zd&&(e[i+1]=32766)}}_generatePoleQuad(e,i,l,h,g,y){h>g!=(y===su)?(e.push(i),e.push(l),e.push(this._vertexToIndex(h,y)),e.push(l),e.push(this._vertexToIndex(g,y)),e.push(this._vertexToIndex(h,y))):(e.push(l),e.push(i),e.push(this._vertexToIndex(h,y)),e.push(this._vertexToIndex(g,y)),e.push(l),e.push(this._vertexToIndex(h,y)))}_fillPoles(e,i,l){let h=this._vertexBuffer,g=Ft,y=e.length;for(let x=2;x<y;x+=3){let S=e[x-2],P=e[x-1],A=e[x],D=h[2*S],B=h[2*S+1],F=h[2*P],W=h[2*P+1],U=h[2*A],$=h[2*A+1];i&&(B===0&&W===0&&this._generatePoleQuad(e,S,P,D,F,su),W===0&&$===0&&this._generatePoleQuad(e,P,A,F,U,su),$===0&&B===0&&this._generatePoleQuad(e,A,S,U,D,su)),l&&(B===g&&W===g&&this._generatePoleQuad(e,S,P,D,F,zd),W===g&&$===g&&this._generatePoleQuad(e,P,A,F,U,zd),$===g&&B===g&&this._generatePoleQuad(e,A,S,U,D,zd))}}_initializeVertices(e){for(let i=0;i<e.length;i+=2)this._vertexToIndex(e[i],e[i+1])}subdividePolygonInternal(e,i){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;let{flattened:l,holeIndices:h}=(function(x){let S=[],P=[];for(let A of x)if(A.length!==0){A!==x[0]&&S.push(P.length/2);for(let D=0;D<A.length;D++)P.push(A[D].x),P.push(A[D].y)}return{flattened:P,holeIndices:S}})(e),g;this._initializeVertices(l);try{let x=(function(P,A,D=2){let B=A&&A.length,F=B?A[0]*D:P.length,W=iv(P,0,F,D,!0),U=[];if(!W||W.next===W.prev)return U;let $,J,ue;if(B&&(W=(function(ee,ae,he,fe){let Ae=[];for(let We=0,qe=ae.length;We<qe;We++){let Ue=iv(ee,ae[We]*fe,We<qe-1?ae[We+1]*fe:ee.length,fe,!1);Ue===Ue.next&&(Ue.steiner=!0),Ae.push(aA(Ue))}Ae.sort(iA);for(let We=0;We<Ae.length;We++)he=rA(Ae[We],he);return he})(P,A,W,D)),P.length>80*D){$=P[0],J=P[1];let ee=$,ae=J;for(let he=D;he<F;he+=D){let fe=P[he],Ae=P[he+1];fe<$&&($=fe),Ae<J&&(J=Ae),fe>ee&&(ee=fe),Ae>ae&&(ae=Ae)}ue=Math.max(ee-$,ae-J),ue=ue!==0?32767/ue:0}return Ed(W,U,D,$,J,ue,0),U})(l,h),S=this._convertIndices(l,x);g=this._subdivideTrianglesScanline(S)}catch(x){console.error(x)}let y=[];return i&&(y=this._generateOutline(e)),this._ensureNoPoleVertices(),this._handlePoles(g),{verticesFlattened:this._vertexBuffer,indicesTriangles:g,indicesLineList:y}}_convertIndices(e,i){let l=[];for(let h=0;h<i.length;h++)l.push(this._vertexToIndex(e[2*i[h]],e[2*i[h]+1]));return l}_pointArrayToIndices(e){let i=[];for(let l=0;l<e.length;l++){let h=e[l];i.push(this._vertexToIndex(h.x,h.y))}return i}}function ov(r,e,i,l=!0){return new oA(i,e).subdividePolygonInternal(r,l)}function oc(r,e,i=!1){if(!r||r.length<1)return[];if(r.length<2)return[];let l=r[0],h=r[r.length-1],g=i&&(l.x!==h.x||l.y!==h.y);if(e<2)return g?[...r,r[0]]:[...r];let y=Math.floor(Ft/e),x=[];x.push(new T(r[0].x,r[0].y));let S=r.length,P=g?S:S-1;for(let A=0;A<P;A++){let D=r[A],B=A<S-1?r[A+1]:r[0],F=D.x,W=D.y,U=B.x,$=B.y,J=F!==U,ue=W!==$;if(!J&&!ue)continue;let ee=U-F,ae=$-W,he=Math.abs(ee),fe=Math.abs(ae),Ae=F,We=W;for(;;){let Ue=ee>0?(Math.floor(Ae/y)+1)*y:(Math.ceil(Ae/y)-1)*y,tt=ae>0?(Math.floor(We/y)+1)*y:(Math.ceil(We/y)-1)*y,Ke=Math.abs(Ae-Ue),He=Math.abs(We-tt),Ne=Math.abs(Ae-U),it=Math.abs(We-$),nt=J?Ke/he:Number.POSITIVE_INFINITY,st=ue?He/fe:Number.POSITIVE_INFINITY;if((Ne<=Ke||!J)&&(it<=He||!ue))break;if(nt<st&&J||!ue){Ae=Ue,We+=ae*nt;let et=new T(Ae,Math.round(We));x[x.length-1].x===et.x&&x[x.length-1].y===et.y||x.push(et)}else{Ae+=ee*st,We=tt;let et=new T(Math.round(Ae),We);x[x.length-1].x===et.x&&x[x.length-1].y===et.y||x.push(et)}}let qe=new T(U,$);x[x.length-1].x===qe.x&&x[x.length-1].y===qe.y||x.push(qe)}return x}function lA(r,e,i){if(e.length===0)throw new Error("Subdivision vertex ring is empty.");let l=0,h=r[2*e[0]];for(let S=1;S<e.length;S++){let P=r[2*e[S]];P<h&&(h=P,l=S)}let g=e.length,y=l,x=(y+1)%g;for(;;){let S=y-1>=0?y-1:g-1,P=(x+1)%g,A=r[2*e[S]],D=r[2*e[P]],B=r[2*e[y]],F=r[2*e[y]+1],W=r[2*e[x]+1],U=!1;if(A<D)U=!0;else if(A>D)U=!1;else{let $=W-F,J=-(r[2*e[x]]-B),ue=F<W?1:-1;((A-B)*$+(r[2*e[S]+1]-F)*J)*ue>((D-B)*$+(r[2*e[P]+1]-F)*J)*ue&&(U=!0)}if(U){let $=e[S],J=e[y],ue=e[x];$!==J&&$!==ue&&J!==ue&&i.push(ue,J,$),y--,y<0&&(y=g-1)}else{let $=e[P],J=e[y],ue=e[x];$!==J&&$!==ue&&J!==ue&&i.push(ue,J,$),x++,x>=g&&(x=0)}if(S===P)break}}function lv(r,e,i,l,h,g,y,x,S){let P=h.length/2,A=y&&x&&S;if(P<$e.MAX_VERTEX_ARRAY_LENGTH){let D=e.prepareSegment(P,i,l),B=D.vertexLength;for(let U=0;U<g.length;U+=3)l.emplaceBack(B+g[U],B+g[U+1],B+g[U+2]);let F,W;D.vertexLength+=P,D.primitiveLength+=g.length/3,A&&(W=y.prepareSegment(P,i,x),F=W.vertexLength,W.vertexLength+=P);for(let U=0;U<h.length;U+=2)r(h[U],h[U+1]);if(A)for(let U=0;U<S.length;U++){let $=S[U];for(let J=1;J<$.length;J+=2)x.emplaceBack(F+$[J-1],F+$[J]);W.primitiveLength+=$.length/2}}else(function(D,B,F,W,U,$){let J=[];for(let fe=0;fe<W.length/2;fe++)J.push(-1);let ue={count:0},ee=0,ae=D.getOrCreateLatestSegment(B,F),he=ae.vertexLength;for(let fe=2;fe<U.length;fe+=3){let Ae=U[fe-2],We=U[fe-1],qe=U[fe],Ue=J[Ae]<ee,tt=J[We]<ee,Ke=J[qe]<ee;ae.vertexLength+((Ue?1:0)+(tt?1:0)+(Ke?1:0))>$e.MAX_VERTEX_ARRAY_LENGTH&&(ae=D.createNewSegment(B,F),ee=ue.count,Ue=!0,tt=!0,Ke=!0,he=0);let He=Ld(J,W,$,ue,Ae,Ue,ae),Ne=Ld(J,W,$,ue,We,tt,ae),it=Ld(J,W,$,ue,qe,Ke,ae);F.emplaceBack(he+He-ee,he+Ne-ee,he+it-ee),ae.primitiveLength++}})(e,i,l,h,g,r),A&&(function(D,B,F,W,U,$){let J=[];for(let fe=0;fe<W.length/2;fe++)J.push(-1);let ue={count:0},ee=0,ae=D.getOrCreateLatestSegment(B,F),he=ae.vertexLength;for(let fe=0;fe<U.length;fe++){let Ae=U[fe];for(let We=1;We<U[fe].length;We+=2){let qe=Ae[We-1],Ue=Ae[We],tt=J[qe]<ee,Ke=J[Ue]<ee;ae.vertexLength+((tt?1:0)+(Ke?1:0))>$e.MAX_VERTEX_ARRAY_LENGTH&&(ae=D.createNewSegment(B,F),ee=ue.count,tt=!0,Ke=!0,he=0);let He=Ld(J,W,$,ue,qe,tt,ae),Ne=Ld(J,W,$,ue,Ue,Ke,ae);F.emplaceBack(he+He-ee,he+Ne-ee),ae.primitiveLength++}}})(y,i,x,h,S,r),e.forceNewSegmentOnNextPrepare(),y==null||y.forceNewSegmentOnNextPrepare()}function Ld(r,e,i,l,h,g,y){if(g){let x=l.count;return i(e[2*h],e[2*h+1]),r[h]=l.count,l.count++,y.vertexLength++,x}return r[h]}class gm{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((i=>i.id)),this.index=e.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new Q,this.indexArray=new Re,this.indexArray2=new ze,this.programConfigurations=new Qi(e.layers,e.zoom),this.segments=new $e,this.segments2=new $e,this.stateDependentLayerIds=this.layers.filter((i=>i.isStateDependent())).map((i=>i.id))}populate(e,i,l){this.hasDependencies=ep("fill",this.layers,i);let h=this.layers[0].layout.get("fill-sort-key"),g=!h.isConstant(),y=[];for(let{feature:x,id:S,index:P,sourceLayerIndex:A}of e){let D=this.layers[0]._featureFilter.needGeometry,B=zo(x,D);if(!this.layers[0]._featureFilter.filter(new Ei(this.zoom),B,l))continue;let F=g?h.evaluate(B,{},l,i.availableImages):void 0,W={id:S,properties:x.properties,type:x.type,sourceLayerIndex:A,index:P,geometry:D?B.geometry:Io(x),patterns:{},sortKey:F};y.push(W)}g&&y.sort(((x,S)=>x.sortKey-S.sortKey));for(let x of y){let{geometry:S,index:P,sourceLayerIndex:A}=x;if(this.hasDependencies){let D=pm("fill",this.layers,x,{zoom:this.zoom},i);this.patternFeatures.push(D)}else this.addFeature(x,S,P,l,{},i.subdivisionGranularity);i.featureIndex.insert(e[P].feature,S,P,A,this.index)}}update(e,i,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,i,this.stateDependentLayers,{imagePositions:l})}addFeatures(e,i,l){for(let h of this.patternFeatures)this.addFeature(h,h.geometry,h.index,i,l,e.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,KE),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,i,l,h,g,y){for(let x of Rs(i,500)){let S=ov(x,h,y.fill.getGranularityForZoomLevel(h.z)),P=this.layoutVertexArray;lv(((A,D)=>{P.emplaceBack(A,D)}),this.segments,this.layoutVertexArray,this.indexArray,S.verticesFlattened,S.indicesTriangles,this.segments2,this.indexArray2,S.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,l,{imagePositions:g,canonical:h})}}let cv,uv;ot("FillBucket",gm,{omit:["layers","patternFeatures"]});var cA={get paint(){return uv=uv||new _n({"fill-antialias":new ft(Le.paint_fill["fill-antialias"]),"fill-opacity":new xt(Le.paint_fill["fill-opacity"]),"fill-color":new xt(Le.paint_fill["fill-color"]),"fill-outline-color":new xt(Le.paint_fill["fill-outline-color"]),"fill-translate":new ft(Le.paint_fill["fill-translate"]),"fill-translate-anchor":new ft(Le.paint_fill["fill-translate-anchor"]),"fill-pattern":new pl(Le.paint_fill["fill-pattern"])})},get layout(){return cv=cv||new _n({"fill-sort-key":new xt(Le.layout_fill["fill-sort-key"])})}};class uA extends Vn{constructor(e,i){super(e,cA,i)}recalculate(e,i){super.recalculate(e,i);let l=this.paint._values["fill-outline-color"];l.value.kind==="constant"&&l.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new gm(e)}queryRadius(){return Qh(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:e,geometry:i,transform:l,pixelsToTileUnits:h}){return Cd(Jh(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-l.bearingInRadians,h),i)}isTileClipped(){return!0}}let dA=cr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),hA=cr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:pA}=dA;class Dd{constructor(e,i,l,h,g){this.properties={},this.extent=l,this.type=0,this.id=void 0,this._pbf=e,this._geometry=-1,this._keys=h,this._values=g,e.readFields(fA,this,i)}loadGeometry(){let e=this._pbf;e.pos=this._geometry;let i=e.readVarint()+e.pos,l=[],h,g=1,y=0,x=0,S=0;for(;e.pos<i;){if(y<=0){let P=e.readVarint();g=7&P,y=P>>3}if(y--,g===1||g===2)x+=e.readSVarint(),S+=e.readSVarint(),g===1&&(h&&l.push(h),h=[]),h&&h.push(new T(x,S));else{if(g!==7)throw new Error(`unknown command ${g}`);h&&h.push(h[0].clone())}}return h&&l.push(h),l}bbox(){let e=this._pbf;e.pos=this._geometry;let i=e.readVarint()+e.pos,l=1,h=0,g=0,y=0,x=1/0,S=-1/0,P=1/0,A=-1/0;for(;e.pos<i;){if(h<=0){let D=e.readVarint();l=7&D,h=D>>3}if(h--,l===1||l===2)g+=e.readSVarint(),y+=e.readSVarint(),g<x&&(x=g),g>S&&(S=g),y<P&&(P=y),y>A&&(A=y);else if(l!==7)throw new Error(`unknown command ${l}`)}return[x,P,S,A]}toGeoJSON(e,i,l){let h=this.extent*Math.pow(2,l),g=this.extent*e,y=this.extent*i,x=this.loadGeometry();function S(B){return[360*(B.x+g)/h-180,360/Math.PI*Math.atan(Math.exp((1-2*(B.y+y)/h)*Math.PI))-90]}function P(B){return B.map(S)}let A;if(this.type===1){let B=[];for(let W of x)B.push(W[0]);let F=P(B);A=B.length===1?{type:"Point",coordinates:F[0]}:{type:"MultiPoint",coordinates:F}}else if(this.type===2){let B=x.map(P);A=B.length===1?{type:"LineString",coordinates:B[0]}:{type:"MultiLineString",coordinates:B}}else{if(this.type!==3)throw new Error("unknown feature type");{let B=dv(x),F=[];for(let W of B)F.push(W.map(P));A=F.length===1?{type:"Polygon",coordinates:F[0]}:{type:"MultiPolygon",coordinates:F}}}let D={type:"Feature",geometry:A,properties:this.properties};return this.id!=null&&(D.id=this.id),D}}function fA(r,e,i){r===1?e.id=i.readVarint():r===2?(function(l,h){let g=l.readVarint()+l.pos;for(;l.pos<g;){let y=h._keys[l.readVarint()],x=h._values[l.readVarint()];h.properties[y]=x}})(i,e):r===3?e.type=i.readVarint():r===4&&(e._geometry=i.pos)}function dv(r){let e=r.length;if(e<=1)return[r];let i=[],l,h;for(let g=0;g<e;g++){let y=mA(r[g]);y!==0&&(h===void 0&&(h=y<0),h===y<0?(l&&i.push(l),l=[r[g]]):l&&l.push(r[g]))}return l&&i.push(l),i}function mA(r){let e=0;for(let i,l,h=0,g=r.length,y=g-1;h<g;y=h++)i=r[h],l=r[y],e+=(l.x-i.x)*(i.y+l.y);return e}Dd.types=["Unknown","Point","LineString","Polygon"];class gA{constructor(e,i){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(yA,this,i),this.length=this._features.length}feature(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];let i=this._pbf.readVarint()+this._pbf.pos;return new Dd(this._pbf,i,this.extent,this._keys,this._values)}}function yA(r,e,i){r===15?e.version=i.readVarint():r===1?e.name=i.readString():r===5?e.extent=i.readVarint():r===2?e._features.push(i.pos):r===3?e._keys.push(i.readString()):r===4&&e._values.push((function(l){let h=null,g=l.readVarint()+l.pos;for(;l.pos<g;){let y=l.readVarint()>>3;h=y===1?l.readString():y===2?l.readFloat():y===3?l.readDouble():y===4?l.readVarint64():y===5?l.readVarint():y===6?l.readSVarint():y===7?l.readBoolean():null}if(h==null)throw new Error("unknown feature value");return h})(i))}class hv{constructor(e,i){this.layers=e.readFields(_A,{},i)}}function _A(r,e,i){if(r===3){let l=new gA(i,i.readVarint()+i.pos);l.length&&(e[l.name]=l)}}let ym=Math.pow(2,13);function Od(r,e,i,l,h,g,y,x){r.emplaceBack(e,i,2*Math.floor(l*ym)+y,h*ym*2,g*ym*2,Math.round(x))}class _m{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((i=>i.id)),this.index=e.index,this.hasDependencies=!1,this.layoutVertexArray=new se,this.centroidVertexArray=new j,this.indexArray=new Re,this.programConfigurations=new Qi(e.layers,e.zoom),this.segments=new $e,this.stateDependentLayerIds=this.layers.filter((i=>i.isStateDependent())).map((i=>i.id))}populate(e,i,l){this.features=[],this.hasDependencies=ep("fill-extrusion",this.layers,i);for(let{feature:h,id:g,index:y,sourceLayerIndex:x}of e){let S=this.layers[0]._featureFilter.needGeometry,P=zo(h,S);if(!this.layers[0]._featureFilter.filter(new Ei(this.zoom),P,l))continue;let A={id:g,sourceLayerIndex:x,index:y,geometry:S?P.geometry:Io(h),properties:h.properties,type:h.type,patterns:{}};this.hasDependencies?this.features.push(pm("fill-extrusion",this.layers,A,{zoom:this.zoom},i)):this.addFeature(A,A.geometry,y,l,{},i.subdivisionGranularity),i.featureIndex.insert(h,A.geometry,y,x,this.index,!0)}}addFeatures(e,i,l){for(let h of this.features){let{geometry:g}=h;this.addFeature(h,g,h.index,i,l,e.subdivisionGranularity)}}update(e,i,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,i,this.stateDependentLayers,{imagePositions:l})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,pA),this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,hA.members,!0),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(e,i,l,h,g,y){for(let x of Rs(i,500)){let S={x:0,y:0,sampleCount:0},P=this.layoutVertexArray.length;this.processPolygon(S,h,e,x,y);let A=this.layoutVertexArray.length-P,D=Math.floor(S.x/S.sampleCount),B=Math.floor(S.y/S.sampleCount);for(let F=0;F<A;F++)this.centroidVertexArray.emplaceBack(D,B)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,l,{imagePositions:g,canonical:h})}processPolygon(e,i,l,h,g){if(h.length<1||pv(h[0]))return;for(let D of h)D.length!==0&&vA(e,D);let y={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},x=g.fill.getGranularityForZoomLevel(i.z),S=Dd.types[l.type]==="Polygon";for(let D of h){if(D.length===0||pv(D))continue;let B=oc(D,x,S);this._generateSideFaces(B,y)}if(!S)return;let P=ov(h,i,x,!1),A=this.layoutVertexArray;lv(((D,B)=>{Od(A,D,B,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,P.verticesFlattened,P.indicesTriangles)}_generateSideFaces(e,i){let l=0;for(let h=1;h<e.length;h++){let g=e[h],y=e[h-1];if(bA(g,y))continue;i.segment.vertexLength+4>$e.MAX_VERTEX_ARRAY_LENGTH&&(i.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));let x=g.sub(y)._perp()._unit(),S=y.dist(g);l+S>32768&&(l=0),Od(this.layoutVertexArray,g.x,g.y,x.x,x.y,0,0,l),Od(this.layoutVertexArray,g.x,g.y,x.x,x.y,0,1,l),l+=S,Od(this.layoutVertexArray,y.x,y.y,x.x,x.y,0,0,l),Od(this.layoutVertexArray,y.x,y.y,x.x,x.y,0,1,l);let P=i.segment.vertexLength;this.indexArray.emplaceBack(P,P+2,P+1),this.indexArray.emplaceBack(P+1,P+2,P+3),i.segment.vertexLength+=4,i.segment.primitiveLength+=2}}}function vA(r,e){for(let i=0;i<e.length;i++){let l=e[i];i===e.length-1&&e[0].x===l.x&&e[0].y===l.y||(r.x+=l.x,r.y+=l.y,r.sampleCount++)}}function bA(r,e){return r.x===e.x&&(r.x<0||r.x>Ft)||r.y===e.y&&(r.y<0||r.y>Ft)}function pv(r){return r.every((e=>e.x<0))||r.every((e=>e.x>Ft))||r.every((e=>e.y<0))||r.every((e=>e.y>Ft))}let fv;ot("FillExtrusionBucket",_m,{omit:["layers","features"]});var xA={get paint(){return fv=fv||new _n({"fill-extrusion-opacity":new ft(Le["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new xt(Le["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ft(Le["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ft(Le["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new pl(Le["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new xt(Le["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new xt(Le["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ft(Le["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class wA extends Vn{constructor(e,i){super(e,xA,i)}createBucket(e){return new _m(e)}queryRadius(){return Qh(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:e,feature:i,featureState:l,geometry:h,transform:g,pixelsToTileUnits:y,pixelPosMatrix:x}){let S=Jh(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-g.bearingInRadians,y),P=this.paint.get("fill-extrusion-height").evaluate(i,l),A=this.paint.get("fill-extrusion-base").evaluate(i,l),D=(function(F,W){let U=[];for(let $ of F){let J=[$.x,$.y,0,1];ri(J,J,W),U.push(new T(J[0]/J[3],J[1]/J[3]))}return U})(S,x),B=(function(F,W,U,$){let J=[],ue=[],ee=$[8]*W,ae=$[9]*W,he=$[10]*W,fe=$[11]*W,Ae=$[8]*U,We=$[9]*U,qe=$[10]*U,Ue=$[11]*U;for(let tt of F){let Ke=[],He=[];for(let Ne of tt){let it=Ne.x,nt=Ne.y,st=$[0]*it+$[4]*nt+$[12],et=$[1]*it+$[5]*nt+$[13],mt=$[2]*it+$[6]*nt+$[14],ii=$[3]*it+$[7]*nt+$[15],qt=mt+he,Ui=ii+fe,sn=st+Ae,vr=et+We,Zi=mt+qe,Ni=ii+Ue,_i=new T((st+ee)/Ui,(et+ae)/Ui);_i.z=qt/Ui,Ke.push(_i);let nr=new T(sn/Ni,vr/Ni);nr.z=Zi/Ni,He.push(nr)}J.push(Ke),ue.push(He)}return[J,ue]})(h,A,P,x);return(function(F,W,U){let $=1/0;Cd(U,W)&&($=mv(U,W[0]));for(let J=0;J<W.length;J++){let ue=W[J],ee=F[J];for(let ae=0;ae<ue.length-1;ae++){let he=ue[ae],fe=[he,ue[ae+1],ee[ae+1],ee[ae],he];Td(U,fe)&&($=Math.min($,mv(U,fe)))}}return $!==1/0&&$})(B[0],B[1],D)}}function Rd(r,e){return r.x*e.x+r.y*e.y}function mv(r,e){if(r.length===1){let i=0,l=e[i++],h;for(;!h||l.equals(h);)if(h=e[i++],!h)return 1/0;for(;i<e.length;i++){let g=e[i],y=r[0],x=h.sub(l),S=g.sub(l),P=y.sub(l),A=Rd(x,x),D=Rd(x,S),B=Rd(S,S),F=Rd(P,x),W=Rd(P,S),U=A*B-D*D,$=(B*F-D*W)/U,J=(A*W-D*F)/U,ue=l.z*(1-$-J)+h.z*$+g.z*J;if(isFinite(ue))return ue}return 1/0}{let i=1/0;for(let l of e)i=Math.min(i,l.z);return i}}let SA=cr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:TA}=SA,CA=cr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:kA}=CA,PA=Math.cos(Math.PI/180*37.5),gv=Math.pow(2,14)/.5;class vm{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((i=>i.id)),this.index=e.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((i=>{this.gradients[i.id]={}})),this.layoutVertexArray=new le,this.layoutVertexArray2=new oe,this.indexArray=new Re,this.programConfigurations=new Qi(e.layers,e.zoom),this.segments=new $e,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((i=>i.isStateDependent())).map((i=>i.id))}populate(e,i,l){this.hasDependencies=ep("line",this.layers,i)||this.hasLineDasharray(this.layers);let h=this.layers[0].layout.get("line-sort-key"),g=!h.isConstant(),y=[];for(let{feature:x,id:S,index:P,sourceLayerIndex:A}of e){let D=this.layers[0]._featureFilter.needGeometry,B=zo(x,D);if(!this.layers[0]._featureFilter.filter(new Ei(this.zoom),B,l))continue;let F=g?h.evaluate(B,{},l):void 0,W={id:S,properties:x.properties,type:x.type,sourceLayerIndex:A,index:P,geometry:D?B.geometry:Io(x),patterns:{},dashes:{},sortKey:F};y.push(W)}g&&y.sort(((x,S)=>x.sortKey-S.sortKey));for(let x of y){let{geometry:S,index:P,sourceLayerIndex:A}=x;this.hasDependencies?(ep("line",this.layers,i)?pm("line",this.layers,x,{zoom:this.zoom},i):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,x,this.zoom,i),this.patternFeatures.push(x)):this.addFeature(x,S,P,l,{},{},i.subdivisionGranularity),i.featureIndex.insert(e[P].feature,S,P,A,this.index)}}update(e,i,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,i,this.stateDependentLayers,{imagePositions:l,dashPositions:h})}addFeatures(e,i,l,h){for(let g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,i,l,h,e.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,kA)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,TA),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,i,l,h,g,y,x){let S=this.layers[0].layout,P=S.get("line-join").evaluate(e,{}),A=S.get("line-cap"),D=S.get("line-miter-limit"),B=S.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(let F of i)this.addLine(F,e,P,A,D,B,h,x);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,l,{imagePositions:g,dashPositions:y,canonical:h})}addLine(e,i,l,h,g,y,x,S){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,e=oc(e,x?S.line.getGranularityForZoomLevel(x.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ee=0;ee<e.length-1;ee++)this.totalDistance+=e[ee].dist(e[ee+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}let P=Dd.types[i.type]==="Polygon",A=e.length;for(;A>=2&&e[A-1].equals(e[A-2]);)A--;let D=0;for(;D<A-1&&e[D].equals(e[D+1]);)D++;if(A<(P?3:2))return;l==="bevel"&&(g=1.05);let B=this.overscaling<=16?122880/(512*this.overscaling):0,F=this.segments.prepareSegment(10*A,this.layoutVertexArray,this.indexArray),W,U,$,J,ue;this.e1=this.e2=-1,P&&(W=e[A-2],ue=e[D].sub(W)._unit()._perp());for(let ee=D;ee<A;ee++){if($=ee===A-1?P?e[D+1]:void 0:e[ee+1],$&&e[ee].equals($))continue;ue&&(J=ue),W&&(U=W),W=e[ee],ue=$?$.sub(W)._unit()._perp():J,J=J||ue;let ae=J.add(ue);ae.x===0&&ae.y===0||ae._unit();let he=J.x*ue.x+J.y*ue.y,fe=ae.x*ue.x+ae.y*ue.y,Ae=fe!==0?1/fe:1/0,We=2*Math.sqrt(2-2*fe),qe=fe<PA&&U&&$,Ue=J.x*ue.y-J.y*ue.x>0;if(qe&&ee>D){let He=W.dist(U);if(He>2*B){let Ne=W.sub(W.sub(U)._mult(B/He)._round());this.updateDistance(U,Ne),this.addCurrentVertex(Ne,J,0,0,F),U=Ne}}let tt=U&&$,Ke=tt?l:P?"butt":h;if(tt&&Ke==="round"&&(Ae<y?Ke="miter":Ae<=2&&(Ke="fakeround")),Ke==="miter"&&Ae>g&&(Ke="bevel"),Ke==="bevel"&&(Ae>2&&(Ke="flipbevel"),Ae<g&&(Ke="miter")),U&&this.updateDistance(U,W),Ke==="miter")ae._mult(Ae),this.addCurrentVertex(W,ae,0,0,F);else if(Ke==="flipbevel"){if(Ae>100)ae=ue.mult(-1);else{let He=Ae*J.add(ue).mag()/J.sub(ue).mag();ae._perp()._mult(He*(Ue?-1:1))}this.addCurrentVertex(W,ae,0,0,F),this.addCurrentVertex(W,ae.mult(-1),0,0,F)}else if(Ke==="bevel"||Ke==="fakeround"){let He=-Math.sqrt(Ae*Ae-1),Ne=Ue?He:0,it=Ue?0:He;if(U&&this.addCurrentVertex(W,J,Ne,it,F),Ke==="fakeround"){let nt=Math.round(180*We/Math.PI/20);for(let st=1;st<nt;st++){let et=st/nt;if(et!==.5){let ii=et-.5;et+=et*ii*(et-1)*((1.0904+he*(he*(3.55645-1.43519*he)-3.2452))*ii*ii+(.848013+he*(.215638*he-1.06021)))}let mt=ue.sub(J)._mult(et)._add(J)._unit()._mult(Ue?-1:1);this.addHalfVertex(W,mt.x,mt.y,!1,Ue,0,F)}}$&&this.addCurrentVertex(W,ue,-Ne,-it,F)}else if(Ke==="butt")this.addCurrentVertex(W,ae,0,0,F);else if(Ke==="square"){let He=U?1:-1;this.addCurrentVertex(W,ae,He,He,F)}else Ke==="round"&&(U&&(this.addCurrentVertex(W,J,0,0,F),this.addCurrentVertex(W,J,1,1,F,!0)),$&&(this.addCurrentVertex(W,ue,-1,-1,F,!0),this.addCurrentVertex(W,ue,0,0,F)));if(qe&&ee<A-1){let He=W.dist($);if(He>2*B){let Ne=W.add($.sub(W)._mult(B/He)._round());this.updateDistance(W,Ne),this.addCurrentVertex(Ne,ue,0,0,F),W=Ne}}}}addCurrentVertex(e,i,l,h,g,y=!1){let x=i.y*h-i.x,S=-i.y-i.x*h;this.addHalfVertex(e,i.x+i.y*l,i.y-i.x*l,y,!1,l,g),this.addHalfVertex(e,x,S,y,!0,-h,g),this.distance>gv/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(e,i,l,h,g,y))}addHalfVertex({x:e,y:i},l,h,g,y,x,S){let P=.5*(this.lineClips?this.scaledDistance*(gv-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e<<1)+(g?1:0),(i<<1)+(y?1:0),Math.round(63*l)+128,Math.round(63*h)+128,1+(x===0?0:x<0?-1:1)|(63&P)<<2,P>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);let A=S.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,A,this.e2),S.primitiveLength++),y?this.e2=A:this.e1=A}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(e,i){this.distance+=e.dist(i),this.updateScaledDistance()}hasLineDasharray(e){for(let i of e){let l=i.paint.get("line-dasharray");if(l&&!l.isConstant())return!0}return!1}addLineDashDependencies(e,i,l,h){for(let g of e){let y=g.paint.get("line-dasharray");if(!y||y.value.kind==="constant")continue;let x=g.layout.get("line-cap")==="round",S={dasharray:y.value.evaluate({zoom:l-1},i,{}),round:x},P={dasharray:y.value.evaluate({zoom:l},i,{}),round:x},A={dasharray:y.value.evaluate({zoom:l+1},i,{}),round:x},D=`${S.dasharray.join(",")},${S.round}`,B=`${P.dasharray.join(",")},${P.round}`,F=`${A.dasharray.join(",")},${A.round}`;h.dashDependencies[D]=S,h.dashDependencies[B]=P,h.dashDependencies[F]=A,i.dashes[g.id]={min:D,mid:B,max:F}}}}let yv,_v;ot("LineBucket",vm,{omit:["layers","patternFeatures"]});var vv={get paint(){return _v=_v||new _n({"line-opacity":new xt(Le.paint_line["line-opacity"]),"line-color":new xt(Le.paint_line["line-color"]),"line-translate":new ft(Le.paint_line["line-translate"]),"line-translate-anchor":new ft(Le.paint_line["line-translate-anchor"]),"line-width":new xt(Le.paint_line["line-width"]),"line-gap-width":new xt(Le.paint_line["line-gap-width"]),"line-offset":new xt(Le.paint_line["line-offset"]),"line-blur":new xt(Le.paint_line["line-blur"]),"line-dasharray":new pl(Le.paint_line["line-dasharray"]),"line-pattern":new pl(Le.paint_line["line-pattern"]),"line-gradient":new ko(Le.paint_line["line-gradient"])})},get layout(){return yv=yv||new _n({"line-cap":new ft(Le.layout_line["line-cap"]),"line-join":new xt(Le.layout_line["line-join"]),"line-miter-limit":new ft(Le.layout_line["line-miter-limit"]),"line-round-limit":new ft(Le.layout_line["line-round-limit"]),"line-sort-key":new xt(Le.layout_line["line-sort-key"])})}};class EA extends xt{possiblyEvaluate(e,i){return i=new Ei(Math.floor(i.zoom),{now:i.now,fadeDuration:i.fadeDuration,zoomHistory:i.zoomHistory,transition:i.transition}),super.possiblyEvaluate(e,i)}evaluate(e,i,l,h){return i=vi({},i,{zoom:Math.floor(i.zoom)}),super.evaluate(e,i,l,h)}}let np;class AA extends Vn{constructor(e,i){super(e,vv,i),this.gradientVersion=0,np||(np=new EA(vv.paint.properties["line-width"].specification),np.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(e){if(e==="line-gradient"){let i=this.gradientExpression();this.stepInterpolant=!!(function(l){return l._styleExpression!==void 0})(i)&&i._styleExpression.expression instanceof Da,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(e,i){super.recalculate(e,i),this.paint._values["line-floorwidth"]=np.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new vm(e)}queryRadius(e){let i=e,l=bv(ru("line-width",this,i),ru("line-gap-width",this,i)),h=ru("line-offset",this,i);return l/2+Math.abs(h)+Qh(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:e,feature:i,featureState:l,geometry:h,transform:g,pixelsToTileUnits:y}){let x=Jh(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-g.bearingInRadians,y),S=y/2*bv(this.paint.get("line-width").evaluate(i,l),this.paint.get("line-gap-width").evaluate(i,l)),P=this.paint.get("line-offset").evaluate(i,l);return P&&(h=(function(A,D){let B=[];for(let F=0;F<A.length;F++){let W=BE(A[F]),U=[];for(let $=0;$<W.length;$++){let J=W[$],ue=W[$-1],ee=W[$+1],ae=$===0?new T(0,0):J.sub(ue)._unit()._perp(),he=$===W.length-1?new T(0,0):ee.sub(J)._unit()._perp(),fe=ae._add(he)._unit(),Ae=fe.x*he.x+fe.y*he.y;Ae!==0&&fe._mult(1/Ae),U.push(fe._mult(D)._add(J))}B.push(U)}return B})(h,P*y)),(function(A,D,B){for(let F=0;F<D.length;F++){let W=D[F];if(A.length>=3){for(let U=0;U<W.length;U++)if(iu(A,W[U]))return!0}if(kd(A,W,B))return!0}return!1})(x,h,S)}isTileClipped(){return!0}}function bv(r,e){return e>0?e+2*r:r}let MA=cr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),IA=cr([{name:"a_projected_pos",components:3,type:"Float32"}],4);cr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);let zA=cr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);cr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);let xv=cr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),LA=cr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function DA(r,e,i){return r.sections.forEach((l=>{l.text=(function(h,g,y){let x=g.layout.get("text-transform").evaluate(y,{});return x==="uppercase"?h=h.toLocaleUpperCase():x==="lowercase"&&(h=h.toLocaleLowerCase()),ps.applyArabicShaping&&(h=ps.applyArabicShaping(h)),h})(l.text,e,i)})),r}cr([{name:"triangle",components:3,type:"Uint16"}]),cr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),cr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),cr([{type:"Float32",name:"offsetX"}]),cr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),cr([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);var Rr=24;let Bd={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u22EF":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},OA={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},RA={40:!0};function wv(r,e,i,l,h,g){if("fontStack"in e){let y=i[e.fontStack],x=y&&y[r];return x?x.metrics.advance*e.scale+h:0}{let y=l[e.imageName];return y?y.displaySize[0]*e.scale*Rr/g+h:0}}function Sv(r,e,i,l){let h=Math.pow(r-e,2);return l?r<e?h/2:2*h:h+Math.abs(i)*i}function BA(r,e,i){let l=0;return r===10&&(l-=1e4),i&&(l+=150),r!==40&&r!==65288||(l+=50),e!==41&&e!==65289||(l+=50),l}function Tv(r,e,i,l,h,g){let y=null,x=Sv(e,i,h,g);for(let S of l){let P=Sv(e-S.x,i,h,g)+S.badness;P<=x&&(y=S,x=P)}return{index:r,x:e,priorBreak:y,badness:x}}function Cv(r){return r?Cv(r.priorBreak).concat(r.index):[]}class ou{constructor(e="",i=[],l=[]){this.text=e,this.sections=i,this.sectionIndex=l,this.imageSectionID=null}static fromFeature(e,i){let l=new ou;for(let h=0;h<e.sections.length;h++){let g=e.sections[h];g.image?l.addImageSection(g):l.addTextSection(g,i)}return l}length(){return[...this.text].length}getSection(e){return this.sections[this.sectionIndex[e]]}getSectionIndex(e){return this.sectionIndex[e]}verticalizePunctuation(){this.text=(function(e){let i="",l={premature:!0,value:void 0},h=e[Symbol.iterator](),g=h.next(),y=e[Symbol.iterator]();y.next();let x=y.next();for(;!g.done;)i+=!x.done&&Uc(x.value.codePointAt(0))&&!Bd[x.value]||!l.premature&&Uc(l.value.codePointAt(0))&&!Bd[l.value]||!Bd[g.value]?g.value:Bd[g.value],l={value:g.value,premature:!1},g=h.next(),x=y.next();return i})(this.text)}hasZeroWidthSpaces(){return this.text.includes("\u200B")}trim(){let e=this.text.match(/^\s*/),i=e?e[0].length:0,l=this.text.match(/\S\s*$/),h=l?l[0].length-1:0;this.text=this.text.substring(i,this.text.length-h),this.sectionIndex=this.sectionIndex.slice(i,this.sectionIndex.length-h)}substring(e,i){let l=[...this.text].slice(e,i).join(""),h=this.sectionIndex.slice(e,i);return new ou(l,this.sections,h)}toCodeUnitIndex(e){return[...this.text].slice(0,e).join("").length}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((e,i)=>Math.max(e,this.sections[i].scale)),0)}getMaxImageSize(e){let i=0,l=0;for(let h=0;h<this.length();h++){let g=this.getSection(h);if("imageName"in g){let y=e[g.imageName];if(!y)continue;let x=y.displaySize;i=Math.max(i,x[0]),l=Math.max(l,x[1])}}return{maxImageWidth:i,maxImageHeight:l}}addTextSection(e,i){this.text+=e.text,this.sections.push({scale:e.scale||1,verticalAlign:e.verticalAlign||"bottom",fontStack:e.fontStack||i});let l=this.sections.length-1;this.sectionIndex.push(...[...e.text].map((()=>l)))}addImageSection(e){let i=e.image?e.image.name:"";if(i.length===0)return void pr("Can't add FormattedSection with an empty image.");let l=this.getNextImageSectionCharCode();l?(this.text+=String.fromCharCode(l),this.sections.push({scale:1,verticalAlign:e.verticalAlign||"bottom",imageName:i}),this.sectionIndex.push(this.sections.length-1)):pr("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}determineLineBreaks(e,i,l,h,g){let y=[],x=this.determineAverageLineWidth(e,i,l,h,g),S=this.hasZeroWidthSpaces(),P=0,A=0,D=this.text[Symbol.iterator](),B=D.next(),F=this.text[Symbol.iterator]();F.next();let W=F.next(),U=this.text[Symbol.iterator]();U.next(),U.next();let $=U.next();for(;!B.done;){let J=this.getSection(A),ue=B.value.codePointAt(0);if(Fh(ue)||(P+=wv(ue,J,l,h,e,g)),!W.done){let ee=tm(ue),ae=W.value.codePointAt(0);(OA[ue]||ee||"imageName"in J||!$.done&&RA[ae])&&y.push(Tv(A+1,P,x,y,BA(ue,ae,ee&&S),!1))}A++,B=D.next(),W=F.next(),$=U.next()}return Cv(Tv(this.length(),P,x,y,0,!0))}determineAverageLineWidth(e,i,l,h,g){let y=0,x=0;for(let S of this.text){let P=this.getSection(x);y+=wv(S.codePointAt(0),P,l,h,e,g),x++}return y/Math.max(1,Math.ceil(y/i))}}let bm=4294967296,kv=1/bm,Pv=typeof TextDecoder=="undefined"?null:new TextDecoder("utf-8");class ap{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,i,l=this.length){for(;this.pos<l;){let h=this.readVarint(),g=h>>3,y=this.pos;this.type=7&h,e(g,i,this),this.pos===y&&this.skip(h)}return i}readMessage(e,i){return this.readFields(e,i,this.readVarint()+this.pos)}readFixed32(){let e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){let e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){let e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*bm;return this.pos+=8,e}readSFixed64(){let e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*bm;return this.pos+=8,e}readFloat(){let e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){let e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){let i=this.buf,l,h;return h=i[this.pos++],l=127&h,h<128?l:(h=i[this.pos++],l|=(127&h)<<7,h<128?l:(h=i[this.pos++],l|=(127&h)<<14,h<128?l:(h=i[this.pos++],l|=(127&h)<<21,h<128?l:(h=i[this.pos],l|=(15&h)<<28,(function(g,y,x){let S=x.buf,P,A;if(A=S[x.pos++],P=(112&A)>>4,A<128||(A=S[x.pos++],P|=(127&A)<<3,A<128)||(A=S[x.pos++],P|=(127&A)<<10,A<128)||(A=S[x.pos++],P|=(127&A)<<17,A<128)||(A=S[x.pos++],P|=(127&A)<<24,A<128)||(A=S[x.pos++],P|=(1&A)<<31,A<128))return lu(g,P,y);throw new Error("Expected varint not more than 10 bytes")})(l,e,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){let e=this.readVarint();return e%2==1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){let e=this.readVarint()+this.pos,i=this.pos;return this.pos=e,e-i>=12&&Pv?Pv.decode(this.buf.subarray(i,e)):(function(l,h,g){let y="",x=h;for(;x<g;){let S=l[x],P,A,D,B=null,F=S>239?4:S>223?3:S>191?2:1;if(x+F>g)break;F===1?S<128&&(B=S):F===2?(P=l[x+1],(192&P)==128&&(B=(31&S)<<6|63&P,B<=127&&(B=null))):F===3?(P=l[x+1],A=l[x+2],(192&P)==128&&(192&A)==128&&(B=(15&S)<<12|(63&P)<<6|63&A,(B<=2047||B>=55296&&B<=57343)&&(B=null))):F===4&&(P=l[x+1],A=l[x+2],D=l[x+3],(192&P)==128&&(192&A)==128&&(192&D)==128&&(B=(15&S)<<18|(63&P)<<12|(63&A)<<6|63&D,(B<=65535||B>=1114112)&&(B=null))),B===null?(B=65533,F=1):B>65535&&(B-=65536,y+=String.fromCharCode(B>>>10&1023|55296),B=56320|1023&B),y+=String.fromCharCode(B),x+=F}return y})(this.buf,i,e)}readBytes(){let e=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,e);return this.pos=e,i}readPackedVarint(e=[],i){let l=this.readPackedEnd();for(;this.pos<l;)e.push(this.readVarint(i));return e}readPackedSVarint(e=[]){let i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){let i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){let i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readFloat());return e}readPackedDouble(e=[]){let i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){let i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){let i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){let i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){let i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(e){let i=7&e;if(i===0)for(;this.buf[this.pos++]>127;);else if(i===2)this.pos=this.readVarint()+this.pos;else if(i===5)this.pos+=4;else{if(i!==1)throw new Error(`Unimplemented type: ${i}`);this.pos+=8}}writeTag(e,i){this.writeVarint(e<<3|i)}realloc(e){let i=this.length||16;for(;i<this.pos+e;)i*=2;if(i!==this.length){let l=new Uint8Array(i);l.set(this.buf),this.buf=l,this.dataView=new DataView(l.buffer),this.length=i}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,-1&e,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*kv),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,-1&e,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*kv),!0),this.pos+=8}writeVarint(e){(e=+e||0)>268435455||e<0?(function(i,l){let h,g;if(i>=0?(h=i%4294967296|0,g=i/4294967296|0):(h=~(-i%4294967296),g=~(-i/4294967296),4294967295^h?h=h+1|0:(h=0,g=g+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");l.realloc(10),(function(y,x,S){S.buf[S.pos++]=127&y|128,y>>>=7,S.buf[S.pos++]=127&y|128,y>>>=7,S.buf[S.pos++]=127&y|128,y>>>=7,S.buf[S.pos++]=127&y|128,S.buf[S.pos]=127&(y>>>=7)})(h,0,l),(function(y,x){let S=(7&y)<<4;x.buf[x.pos++]|=S|((y>>>=3)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y)))))})(g,l)})(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))}writeSVarint(e){this.writeVarint(e<0?2*-e-1:2*e)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(4*e.length),this.pos++;let i=this.pos;this.pos=(function(h,g,y){for(let x,S,P=0;P<g.length;P++){if(x=g.charCodeAt(P),x>55295&&x<57344){if(!S){x>56319||P+1===g.length?(h[y++]=239,h[y++]=191,h[y++]=189):S=x;continue}if(x<56320){h[y++]=239,h[y++]=191,h[y++]=189,S=x;continue}x=S-55296<<10|x-56320|65536,S=null}else S&&(h[y++]=239,h[y++]=191,h[y++]=189,S=null);x<128?h[y++]=x:(x<2048?h[y++]=x>>6|192:(x<65536?h[y++]=x>>12|224:(h[y++]=x>>18|240,h[y++]=x>>12&63|128),h[y++]=x>>6&63|128),h[y++]=63&x|128)}return y})(this.buf,e,this.pos);let l=this.pos-i;l>=128&&Ev(i,l,this),this.pos=i-1,this.writeVarint(l),this.pos+=l}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){let i=e.length;this.writeVarint(i),this.realloc(i);for(let l=0;l<i;l++)this.buf[this.pos++]=e[l]}writeRawMessage(e,i){this.pos++;let l=this.pos;e(i,this);let h=this.pos-l;h>=128&&Ev(l,h,this),this.pos=l-1,this.writeVarint(h),this.pos+=h}writeMessage(e,i,l){this.writeTag(e,2),this.writeRawMessage(i,l)}writePackedVarint(e,i){i.length&&this.writeMessage(e,FA,i)}writePackedSVarint(e,i){i.length&&this.writeMessage(e,jA,i)}writePackedBoolean(e,i){i.length&&this.writeMessage(e,VA,i)}writePackedFloat(e,i){i.length&&this.writeMessage(e,NA,i)}writePackedDouble(e,i){i.length&&this.writeMessage(e,qA,i)}writePackedFixed32(e,i){i.length&&this.writeMessage(e,WA,i)}writePackedSFixed32(e,i){i.length&&this.writeMessage(e,GA,i)}writePackedFixed64(e,i){i.length&&this.writeMessage(e,UA,i)}writePackedSFixed64(e,i){i.length&&this.writeMessage(e,ZA,i)}writeBytesField(e,i){this.writeTag(e,2),this.writeBytes(i)}writeFixed32Field(e,i){this.writeTag(e,5),this.writeFixed32(i)}writeSFixed32Field(e,i){this.writeTag(e,5),this.writeSFixed32(i)}writeFixed64Field(e,i){this.writeTag(e,1),this.writeFixed64(i)}writeSFixed64Field(e,i){this.writeTag(e,1),this.writeSFixed64(i)}writeVarintField(e,i){this.writeTag(e,0),this.writeVarint(i)}writeSVarintField(e,i){this.writeTag(e,0),this.writeSVarint(i)}writeStringField(e,i){this.writeTag(e,2),this.writeString(i)}writeFloatField(e,i){this.writeTag(e,5),this.writeFloat(i)}writeDoubleField(e,i){this.writeTag(e,1),this.writeDouble(i)}writeBooleanField(e,i){this.writeVarintField(e,+i)}}function lu(r,e,i){return i?4294967296*e+(r>>>0):4294967296*(e>>>0)+(r>>>0)}function Ev(r,e,i){let l=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));i.realloc(l);for(let h=i.pos-1;h>=r;h--)i.buf[h+l]=i.buf[h]}function FA(r,e){for(let i=0;i<r.length;i++)e.writeVarint(r[i])}function jA(r,e){for(let i=0;i<r.length;i++)e.writeSVarint(r[i])}function NA(r,e){for(let i=0;i<r.length;i++)e.writeFloat(r[i])}function qA(r,e){for(let i=0;i<r.length;i++)e.writeDouble(r[i])}function VA(r,e){for(let i=0;i<r.length;i++)e.writeBoolean(r[i])}function WA(r,e){for(let i=0;i<r.length;i++)e.writeFixed32(r[i])}function GA(r,e){for(let i=0;i<r.length;i++)e.writeSFixed32(r[i])}function UA(r,e){for(let i=0;i<r.length;i++)e.writeFixed64(r[i])}function ZA(r,e){for(let i=0;i<r.length;i++)e.writeSFixed64(r[i])}function $A(r,e,i){r===1&&i.readMessage(HA,e)}function HA(r,e,i){if(r===3){let{id:l,bitmap:h,width:g,height:y,left:x,top:S,advance:P}=i.readMessage(YA,{});e.push({id:l,bitmap:new Pd({width:g+6,height:y+6},h),metrics:{width:g,height:y,left:x,top:S,advance:P}})}}function YA(r,e,i){r===1?e.id=i.readVarint():r===2?e.bitmap=i.readBytes():r===3?e.width=i.readVarint():r===4?e.height=i.readVarint():r===5?e.left=i.readSVarint():r===6?e.top=i.readSVarint():r===7&&(e.advance=i.readVarint())}function Av(r){let e=0,i=0;for(let y of r)e+=y.w*y.h,i=Math.max(i,y.w);r.sort(((y,x)=>x.h-y.h));let l=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),i),h:1/0}],h=0,g=0;for(let y of r)for(let x=l.length-1;x>=0;x--){let S=l[x];if(!(y.w>S.w||y.h>S.h)){if(y.x=S.x,y.y=S.y,g=Math.max(g,y.y+y.h),h=Math.max(h,y.x+y.w),y.w===S.w&&y.h===S.h){let P=l.pop();P&&x<l.length&&(l[x]=P)}else y.h===S.h?(S.x+=y.w,S.w-=y.w):y.w===S.w?(S.y+=y.h,S.h-=y.h):(l.push({x:S.x+y.w,y:S.y,w:S.w-y.w,h:y.h}),S.y+=y.h,S.h-=y.h);break}}return{w:h,h:g,fill:e/(h*g)||0}}class xm{constructor(e,{pixelRatio:i,version:l,stretchX:h,stretchY:g,content:y,textFitWidth:x,textFitHeight:S}){this.paddedRect=e,this.pixelRatio=i,this.stretchX=h,this.stretchY=g,this.content=y,this.version=l,this.textFitWidth=x,this.textFitHeight=S}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Mv{constructor(e,i){let l={},h={};this.haveRenderCallbacks=[];let g=[];this.addImages(e,l,g),this.addImages(i,h,g);let{w:y,h:x}=Av(g),S=new Gn({width:y||1,height:x||1});for(let P in e){let A=e[P],D=l[P].paddedRect;Gn.copy(A.data,S,{x:0,y:0},{x:D.x+1,y:D.y+1},A.data)}for(let P in i){let A=i[P],D=h[P].paddedRect,B=D.x+1,F=D.y+1,W=A.data.width,U=A.data.height;Gn.copy(A.data,S,{x:0,y:0},{x:B,y:F},A.data),Gn.copy(A.data,S,{x:0,y:U-1},{x:B,y:F-1},{width:W,height:1}),Gn.copy(A.data,S,{x:0,y:0},{x:B,y:F+U},{width:W,height:1}),Gn.copy(A.data,S,{x:W-1,y:0},{x:B-1,y:F},{width:1,height:U}),Gn.copy(A.data,S,{x:0,y:0},{x:B+W,y:F},{width:1,height:U})}this.image=S,this.iconPositions=l,this.patternPositions=h}addImages(e,i,l){for(let h in e){let g=e[h],y={x:0,y:0,w:g.data.width+2,h:g.data.height+2};l.push(y),i[h]=new xm(y,g),g.hasRenderCallback&&this.haveRenderCallbacks.push(h)}}patchUpdatedImages(e,i){e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(let l in e.updatedImages)this.patchUpdatedImage(this.iconPositions[l],e.getImage(l),i),this.patchUpdatedImage(this.patternPositions[l],e.getImage(l),i)}patchUpdatedImage(e,i,l){if(!e||!i||e.version===i.version)return;e.version=i.version;let[h,g]=e.tl;l.update(i.data,void 0,{x:h,y:g})}}var yl;function sp(r,e,i,l,h,g,y,x,S,P,A,D,B,F,W){let U=ou.fromFeature(r,h),$;D===f.aA.vertical&&U.verticalizePunctuation();let J=U.determineLineBreaks(P,g,e,l,F),{processBidirectionalText:ue,processStyledBidirectionalText:ee}=ps;if(ue&&U.sections.length===1){$=[],J=J.map((Ae=>U.toCodeUnitIndex(Ae)));let fe=ue(U.toString(),J);for(let Ae of fe){let We=[...Ae].map((()=>0));$.push(new ou(Ae,U.sections,We))}}else if(ee){$=[],J=J.map((qe=>U.toCodeUnitIndex(qe)));let fe=0,Ae=[];for(let qe of U.text)Ae.push(...Array(qe.length).fill(U.sectionIndex[fe])),fe++;let We=ee(U.text,Ae,J);for(let qe of We){let Ue=[],tt="";for(let Ke of qe[0])Ue.push(qe[1][tt.length]),tt+=Ke;$.push(new ou(qe[0],U.sections,Ue))}}else $=(function(fe,Ae){let We=[],qe=0;for(let Ue of Ae)We.push(fe.substring(qe,Ue)),qe=Ue;return qe<fe.length()&&We.push(fe.substring(qe,fe.length())),We})(U,J);let ae=[],he={positionedLines:ae,text:U.toString(),top:A[1],bottom:A[1],left:A[0],right:A[0],writingMode:D,iconsInText:!1,verticalizable:!1};return(function(fe,Ae,We,qe,Ue,tt,Ke,He,Ne,it,nt,st){let et=0,mt=0,ii=0,qt=0,Ui=He==="right"?1:He==="left"?0:.5,sn=Rr/st,vr=0;for(let _i of Ue){_i.trim();let nr=_i.getMaxScale(),hr={positionedGlyphs:[],lineOffset:0};fe.positionedLines[vr]=hr;let Bi=hr.positionedGlyphs,Un=0;if(!_i.length()){mt+=tt,++vr;continue}let on=XA(qe,_i,sn),Zn=0;for(let jr of _i.text){let Ji=_i.getSection(Zn),br=jr.codePointAt(0),ar=KA(Ne,nt,br),Nr={glyph:br,imageName:null,x:et,y:mt+-17,vertical:ar,scale:1,fontStack:"",sectionIndex:_i.getSectionIndex(Zn),metrics:null,rect:null},Oo;if("fontStack"in Ji){if(Oo=QA(Ji,br,ar,on,Ae,We),!Oo)continue;Nr.fontStack=Ji.fontStack}else{if(fe.iconsInText=!0,Ji.scale*=sn,Oo=JA(Ji,ar,nr,on,qe),!Oo)continue;Un=Math.max(Un,Oo.imageOffset),Nr.imageName=Ji.imageName}let{rect:ys,metrics:Ud,baselineOffset:wl}=Oo;Nr.y+=wl,Nr.scale=Ji.scale,Nr.metrics=Ud,Nr.rect=ys,Bi.push(Nr),ar?(fe.verticalizable=!0,et+=("imageName"in Ji?Ud.advance:Rr)*Ji.scale+it):et+=Ud.advance*Ji.scale+it,Zn++}Bi.length!==0&&(ii=Math.max(et-it,ii),eM(Bi,0,Bi.length-1,Ui)),et=0,hr.lineOffset=Math.max(Un,(nr-1)*Rr);let Wa=tt*nr+Un;mt+=Wa,qt=Math.max(Wa,qt),++vr}let{horizontalAlign:Zi,verticalAlign:Ni}=wm(Ke);(function(_i,nr,hr,Bi,Un,on,Zn,Wa,jr){let Ji=(nr-hr)*Un,br=0;br=on!==Zn?-Wa*Bi- -17:-Bi*jr*Zn+.5*Zn;for(let ar of _i)for(let Nr of ar.positionedGlyphs)Nr.x+=Ji,Nr.y+=br})(fe.positionedLines,Ui,Zi,Ni,ii,qt,tt,mt,Ue.length),fe.top+=-Ni*mt,fe.bottom=fe.top+mt,fe.left+=-Zi*ii,fe.right=fe.left+ii})(he,e,i,l,$,y,x,S,D,P,B,W),!(function(fe){for(let Ae of fe)if(Ae.positionedGlyphs.length!==0)return!1;return!0})(ae)&&he}function wm(r){let e=.5,i=.5;switch(r){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(r){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:e,verticalAlign:i}}function XA(r,e,i){let l=e.getMaxScale()*Rr,{maxImageWidth:h,maxImageHeight:g}=e.getMaxImageSize(r),y=Math.max(l,g*i);return{verticalLineContentWidth:Math.max(l,h*i),horizontalLineContentHeight:y}}function Iv(r){switch(r){case"top":return 0;case"center":return .5;default:return 1}}function KA(r,e,i){return!(r===f.aA.horizontal||!e&&!ld(i)||e&&(Fh(i)||(l=i,/\p{sc=Arab}/u.test(String.fromCodePoint(l)))));var l}function QA(r,e,i,l,h,g){let y=g[r.fontStack],x=(function(P,A,D,B){if(P&&P.rect)return P;let F=A[D.fontStack],W=F&&F[B];return W?{rect:null,metrics:W.metrics}:null})(y&&y[e],h,r,e);if(x===null)return null;let S;if(i)S=l.verticalLineContentWidth-r.scale*Rr;else{let P=Iv(r.verticalAlign);S=(l.horizontalLineContentHeight-r.scale*Rr)*P}return{rect:x.rect,metrics:x.metrics,baselineOffset:S}}function JA(r,e,i,l,h){let g=h[r.imageName];if(!g)return null;let y=g.paddedRect,x=g.displaySize,S={width:x[0],height:x[1],left:1,top:-3,advance:e?x[1]:x[0]},P;if(e)P=l.verticalLineContentWidth-x[1]*r.scale;else{let A=Iv(r.verticalAlign);P=(l.horizontalLineContentHeight-x[1]*r.scale)*A}return{rect:y,metrics:S,baselineOffset:P,imageOffset:(e?x[0]:x[1])*r.scale-Rr*i}}function eM(r,e,i,l){if(l===0)return;let h=r[i],g=(r[i].x+h.metrics.advance*h.scale)*l;for(let y=e;y<=i;y++)r[y].x-=g}function tM(r,e,i){let{horizontalAlign:l,verticalAlign:h}=wm(i),g=e[0]-r.displaySize[0]*l,y=e[1]-r.displaySize[1]*h;return{image:r,top:y,bottom:y+r.displaySize[1],left:g,right:g+r.displaySize[0]}}function zv(r){var e,i;let l=r.left,h=r.top,g=r.right-l,y=r.bottom-h,x=(e=r.image.textFitWidth)!==null&&e!==void 0?e:"stretchOrShrink",S=(i=r.image.textFitHeight)!==null&&i!==void 0?i:"stretchOrShrink",P=(r.image.content[2]-r.image.content[0])/(r.image.content[3]-r.image.content[1]);if(S==="proportional"){if(x==="stretchOnly"&&g/y<P||x==="proportional"){let A=Math.ceil(y*P);l*=A/g,g=A}}else if(x==="proportional"&&S==="stretchOnly"&&P!==0&&g/y>P){let A=Math.ceil(g/P);h*=A/y,y=A}return{x1:l,y1:h,x2:l+g,y2:h+y}}function Lv(r,e,i,l,h,g){let y=r.image,x;if(y.content){let $=y.content,J=y.pixelRatio||1;x=[$[0]/J,$[1]/J,y.displaySize[0]-$[2]/J,y.displaySize[1]-$[3]/J]}let S=e.left*g,P=e.right*g,A,D,B,F;i==="width"||i==="both"?(F=h[0]+S-l[3],D=h[0]+P+l[1]):(F=h[0]+(S+P-y.displaySize[0])/2,D=F+y.displaySize[0]);let W=e.top*g,U=e.bottom*g;return i==="height"||i==="both"?(A=h[1]+W-l[0],B=h[1]+U+l[2]):(A=h[1]+(W+U-y.displaySize[1])/2,B=A+y.displaySize[1]),{image:y,top:A,right:D,bottom:B,left:F,collisionPadding:x}}ot("ImagePosition",xm),ot("ImageAtlas",Mv),f.aA=void 0,(yl=f.aA||(f.aA={}))[yl.none=0]="none",yl[yl.horizontal=1]="horizontal",yl[yl.vertical=2]="vertical",yl[yl.horizontalOnly=3]="horizontalOnly";let Lo=128,_l=32640;function Dv(r,e){let{expression:i}=e;if(i.kind==="constant")return{kind:"constant",layoutSize:i.evaluate(new Ei(r+1))};if(i.kind==="source")return{kind:"source"};{let{zoomStops:l,interpolationType:h}=i,g=0;for(;g<l.length&&l[g]<=r;)g++;g=Math.max(0,g-1);let y=g;for(;y<l.length&&l[y]<r+1;)y++;y=Math.min(l.length-1,y);let x=l[g],S=l[y];return i.kind==="composite"?{kind:"composite",minZoom:x,maxZoom:S,interpolationType:h}:{kind:"camera",minZoom:x,maxZoom:S,minSize:i.evaluate(new Ei(x)),maxSize:i.evaluate(new Ei(S)),interpolationType:h}}}function Sm(r,e,i){let l="never",h=r.get(e);return h?l=h:r.get(i)&&(l="always"),l}let iM=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function op(r,e,i,l,h,g,y,x,S,P,A,D,B){let F=x?Math.min(_l,Math.round(x[0])):0,W=x?Math.min(_l,Math.round(x[1])):0;r.emplaceBack(e,i,Math.round(32*l),Math.round(32*h),g,y,(F<<1)+(S?1:0),W,16*P,16*A,256*D,256*B)}function Tm(r,e,i){r.emplaceBack(e.x,e.y,i),r.emplaceBack(e.x,e.y,i),r.emplaceBack(e.x,e.y,i),r.emplaceBack(e.x,e.y,i)}function rM(r){for(let e of r.sections)if(qh(e.text))return!0;return!1}class Cm{constructor(e){this.layoutVertexArray=new de,this.indexArray=new Re,this.programConfigurations=e,this.segments=new $e,this.dynamicLayoutVertexArray=new ge,this.opacityVertexArray=new xe,this.hasVisibleVertices=!1,this.placedSymbolArray=new u}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(e,i,l,h){this.isEmpty()||(l&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,MA.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,i),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,IA.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,iM,!0),this.opacityVertexBuffer.itemSize=1),(l||h)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}ot("SymbolBuffers",Cm);class km{constructor(e,i,l){this.layoutVertexArray=new e,this.layoutAttributes=i,this.indexArray=new l,this.segments=new $e,this.collisionVertexArray=new Te}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,zA.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}ot("CollisionBuffers",km);class cu{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((y=>y.id)),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];let i=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Dv(this.zoom,i["text-size"]),this.iconSizeData=Dv(this.zoom,i["icon-size"]);let l=this.layers[0].layout,h=l.get("symbol-sort-key"),g=l.get("symbol-z-order");this.canOverlap=Sm(l,"text-overlap","text-allow-overlap")!=="never"||Sm(l,"icon-overlap","icon-allow-overlap")!=="never"||l.get("text-ignore-placement")||l.get("icon-ignore-placement"),this.sortFeaturesByKey=g!=="viewport-y"&&!h.isConstant(),this.sortFeaturesByY=(g==="viewport-y"||g==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,l.get("symbol-placement")==="point"&&(this.writingModes=l.get("text-writing-mode").map((y=>f.aA[y]))),this.stateDependentLayerIds=this.layers.filter((y=>y.isStateDependent())).map((y=>y.id)),this.sourceID=e.sourceID}createArrays(){this.text=new Cm(new Qi(this.layers,this.zoom,(e=>/^text/.test(e)))),this.icon=new Cm(new Qi(this.layers,this.zoom,(e=>/^icon/.test(e)))),this.glyphOffsetArray=new w,this.lineVertexArray=new k,this.symbolInstances=new b,this.textAnchorOffsets=new z}calculateGlyphDependencies(e,i,l,h,g){for(let y of e)if(i[y.codePointAt(0)]=!0,(l||h)&&g){let x=Bd[y];x&&(i[x.codePointAt(0)]=!0)}}populate(e,i,l){let h=this.layers[0],g=h.layout,y=g.get("text-font"),x=g.get("text-field"),S=g.get("icon-image"),P=(x.value.kind!=="constant"||x.value.value instanceof Jr&&!x.value.value.isEmpty()||x.value.value.toString().length>0)&&(y.value.kind!=="constant"||y.value.value.length>0),A=S.value.kind!=="constant"||!!S.value.value||Object.keys(S.parameters).length>0,D=g.get("symbol-sort-key");if(this.features=[],!P&&!A)return;let B=i.iconDependencies,F=i.glyphDependencies,W=i.availableImages,U=new Ei(this.zoom);for(let{feature:$,id:J,index:ue,sourceLayerIndex:ee}of e){let ae=h._featureFilter.needGeometry,he=zo($,ae);if(!h._featureFilter.filter(U,he,l))continue;let fe,Ae;if(ae||(he.geometry=Io($)),P){let qe=h.getValueAndResolveTokens("text-field",he,l,W),Ue=Jr.factory(qe),tt=this.hasRTLText=this.hasRTLText||rM(Ue);(!tt||ps.getRTLTextPluginStatus()==="unavailable"||tt&&ps.isParsed())&&(fe=DA(Ue,h,he))}if(A){let qe=h.getValueAndResolveTokens("icon-image",he,l,W);Ae=qe instanceof Ur?qe:Ur.fromString(qe)}if(!fe&&!Ae)continue;let We=this.sortFeaturesByKey?D.evaluate(he,{},l):void 0;if(this.features.push({id:J,text:fe,icon:Ae,index:ue,sourceLayerIndex:ee,geometry:he.geometry,properties:$.properties,type:Dd.types[$.type],sortKey:We}),Ae&&(B[Ae.name]=!0),fe){let qe=y.evaluate(he,{},l).join(","),Ue=g.get("text-rotation-alignment")!=="viewport"&&g.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(f.aA.vertical)>=0;for(let tt of fe.sections)if(tt.image)B[tt.image.name]=!0;else{let Ke=Co(fe.toString()),He=tt.fontStack||qe,Ne=F[He]=F[He]||{};this.calculateGlyphDependencies(tt.text,Ne,Ue,this.allowVerticalPlacement,Ke)}}}g.get("symbol-placement")==="line"&&(this.features=(function($){let J={},ue={},ee=[],ae=0;function he(qe){ee.push($[qe]),ae++}function fe(qe,Ue,tt){let Ke=ue[qe];return delete ue[qe],ue[Ue]=Ke,ee[Ke].geometry[0].pop(),ee[Ke].geometry[0]=ee[Ke].geometry[0].concat(tt[0]),Ke}function Ae(qe,Ue,tt){let Ke=J[Ue];return delete J[Ue],J[qe]=Ke,ee[Ke].geometry[0].shift(),ee[Ke].geometry[0]=tt[0].concat(ee[Ke].geometry[0]),Ke}function We(qe,Ue,tt){let Ke=tt?Ue[0][Ue[0].length-1]:Ue[0][0];return`${qe}:${Ke.x}:${Ke.y}`}for(let qe=0;qe<$.length;qe++){let Ue=$[qe],tt=Ue.geometry,Ke=Ue.text?Ue.text.toString():null;if(!Ke){he(qe);continue}let He=We(Ke,tt),Ne=We(Ke,tt,!0);if(He in ue&&Ne in J&&ue[He]!==J[Ne]){let it=Ae(He,Ne,tt),nt=fe(He,Ne,ee[it].geometry);delete J[He],delete ue[Ne],ue[We(Ke,ee[nt].geometry,!0)]=nt,ee[it].geometry=null}else He in ue?fe(He,Ne,tt):Ne in J?Ae(He,Ne,tt):(he(qe),J[He]=ae-1,ue[Ne]=ae-1)}return ee.filter((qe=>qe.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort((($,J)=>$.sortKey-J.sortKey))}update(e,i,l){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,i,this.layers,{imagePositions:l}),this.icon.programConfigurations.updatePaintArrays(e,i,this.layers,{imagePositions:l}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,i){let l=this.lineVertexArray.length;if(e.segment!==void 0){let h=e.dist(i[e.segment+1]),g=e.dist(i[e.segment]),y={};for(let x=e.segment+1;x<i.length;x++)y[x]={x:i[x].x,y:i[x].y,tileUnitDistanceFromAnchor:h},x<i.length-1&&(h+=i[x+1].dist(i[x]));for(let x=e.segment||0;x>=0;x--)y[x]={x:i[x].x,y:i[x].y,tileUnitDistanceFromAnchor:g},x>0&&(g+=i[x-1].dist(i[x]));for(let x=0;x<i.length;x++){let S=y[x];this.lineVertexArray.emplaceBack(S.x,S.y,S.tileUnitDistanceFromAnchor)}}return{lineStartIndex:l,lineLength:this.lineVertexArray.length-l}}addSymbols(e,i,l,h,g,y,x,S,P,A,D,B){let F=e.indexArray,W=e.layoutVertexArray,U=e.segments.prepareSegment(4*i.length,W,F,this.canOverlap?y.sortKey:void 0),$=this.glyphOffsetArray.length,J=U.vertexLength,ue=this.allowVerticalPlacement&&x===f.aA.vertical?Math.PI/2:0,ee=y.text&&y.text.sections;for(let ae=0;ae<i.length;ae++){let{tl:he,tr:fe,bl:Ae,br:We,tex:qe,pixelOffsetTL:Ue,pixelOffsetBR:tt,minFontScaleX:Ke,minFontScaleY:He,glyphOffset:Ne,isSDF:it,sectionIndex:nt}=i[ae],st=U.vertexLength,et=Ne[1];op(W,S.x,S.y,he.x,et+he.y,qe.x,qe.y,l,it,Ue.x,Ue.y,Ke,He),op(W,S.x,S.y,fe.x,et+fe.y,qe.x+qe.w,qe.y,l,it,tt.x,Ue.y,Ke,He),op(W,S.x,S.y,Ae.x,et+Ae.y,qe.x,qe.y+qe.h,l,it,Ue.x,tt.y,Ke,He),op(W,S.x,S.y,We.x,et+We.y,qe.x+qe.w,qe.y+qe.h,l,it,tt.x,tt.y,Ke,He),Tm(e.dynamicLayoutVertexArray,S,ue),F.emplaceBack(st,st+2,st+1),F.emplaceBack(st+1,st+2,st+3),U.vertexLength+=4,U.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ne[0]),ae!==i.length-1&&nt===i[ae+1].sectionIndex||e.programConfigurations.populatePaintArrays(W.length,y,y.index,{imagePositions:{},canonical:B,formattedSection:ee&&ee[nt]})}e.placedSymbolArray.emplaceBack(S.x,S.y,$,this.glyphOffsetArray.length-$,J,P,A,S.segment,l?l[0]:0,l?l[1]:0,h[0],h[1],x,0,!1,0,D)}_addCollisionDebugVertex(e,i,l,h,g,y){return i.emplaceBack(0,0),e.emplaceBack(l.x,l.y,h,g,Math.round(y.x),Math.round(y.y))}addCollisionDebugVertices(e,i,l,h,g,y,x){let S=g.segments.prepareSegment(4,g.layoutVertexArray,g.indexArray),P=S.vertexLength,A=g.layoutVertexArray,D=g.collisionVertexArray,B=x.anchorX,F=x.anchorY;this._addCollisionDebugVertex(A,D,y,B,F,new T(e,i)),this._addCollisionDebugVertex(A,D,y,B,F,new T(l,i)),this._addCollisionDebugVertex(A,D,y,B,F,new T(l,h)),this._addCollisionDebugVertex(A,D,y,B,F,new T(e,h)),S.vertexLength+=4;let W=g.indexArray;W.emplaceBack(P,P+1),W.emplaceBack(P+1,P+2),W.emplaceBack(P+2,P+3),W.emplaceBack(P+3,P),S.primitiveLength+=4}addDebugCollisionBoxes(e,i,l,h){for(let g=e;g<i;g++){let y=this.collisionBoxArray.get(g);this.addCollisionDebugVertices(y.x1,y.y1,y.x2,y.y2,h?this.textCollisionBox:this.iconCollisionBox,y.anchorPoint,l)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new km(pe,xv.members,ze),this.iconCollisionBox=new km(pe,xv.members,ze);for(let e=0;e<this.symbolInstances.length;e++){let i=this.symbolInstances.get(e);this.addDebugCollisionBoxes(i.textBoxStartIndex,i.textBoxEndIndex,i,!0),this.addDebugCollisionBoxes(i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i,!0),this.addDebugCollisionBoxes(i.iconBoxStartIndex,i.iconBoxEndIndex,i,!1),this.addDebugCollisionBoxes(i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex,i,!1)}}_deserializeCollisionBoxesForSymbol(e,i,l,h,g,y,x,S,P){let A={};for(let D=i;D<l;D++){let B=e.get(D);A.textBox={x1:B.x1,y1:B.y1,x2:B.x2,y2:B.y2,anchorPointX:B.anchorPointX,anchorPointY:B.anchorPointY},A.textFeatureIndex=B.featureIndex;break}for(let D=h;D<g;D++){let B=e.get(D);A.verticalTextBox={x1:B.x1,y1:B.y1,x2:B.x2,y2:B.y2,anchorPointX:B.anchorPointX,anchorPointY:B.anchorPointY},A.verticalTextFeatureIndex=B.featureIndex;break}for(let D=y;D<x;D++){let B=e.get(D);A.iconBox={x1:B.x1,y1:B.y1,x2:B.x2,y2:B.y2,anchorPointX:B.anchorPointX,anchorPointY:B.anchorPointY},A.iconFeatureIndex=B.featureIndex;break}for(let D=S;D<P;D++){let B=e.get(D);A.verticalIconBox={x1:B.x1,y1:B.y1,x2:B.x2,y2:B.y2,anchorPointX:B.anchorPointX,anchorPointY:B.anchorPointY},A.verticalIconFeatureIndex=B.featureIndex;break}return A}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let i=0;i<this.symbolInstances.length;i++){let l=this.symbolInstances.get(i);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,l.textBoxStartIndex,l.textBoxEndIndex,l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l.iconBoxStartIndex,l.iconBoxEndIndex,l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,i){let l=e.placedSymbolArray.get(i),h=l.vertexStartIndex+4*l.numGlyphs;for(let g=l.vertexStartIndex;g<h;g+=4)e.indexArray.emplaceBack(g,g+2,g+1),e.indexArray.emplaceBack(g+1,g+2,g+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;let i=Math.sin(e),l=Math.cos(e),h=[],g=[],y=[];for(let x=0;x<this.symbolInstances.length;++x){y.push(x);let S=this.symbolInstances.get(x);h.push(0|Math.round(i*S.anchorX+l*S.anchorY)),g.push(S.featureIndex)}return y.sort(((x,S)=>h[x]-h[S]||g[S]-g[x])),y}addToSortKeyRanges(e,i){let l=this.sortKeyRanges[this.sortKeyRanges.length-1];l&&l.sortKey===i?l.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:i,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(let i of this.symbolInstanceIndexes){let l=this.symbolInstances.get(i);this.featureSortOrder.push(l.featureIndex),[l.rightJustifiedTextSymbolIndex,l.centerJustifiedTextSymbolIndex,l.leftJustifiedTextSymbolIndex].forEach(((h,g,y)=>{h>=0&&y.indexOf(h)===g&&this.addIndicesForPlacedSymbol(this.text,h)})),l.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,l.verticalPlacedTextSymbolIndex),l.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,l.placedIconSymbolIndex),l.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,l.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Ov,Rv;ot("SymbolBucket",cu,{omit:["layers","collisionBoxArray","features","compareText"]}),cu.MAX_GLYPHS=65535,cu.addDynamicAttributes=Tm;var Pm={get paint(){return Rv=Rv||new _n({"icon-opacity":new xt(Le.paint_symbol["icon-opacity"]),"icon-color":new xt(Le.paint_symbol["icon-color"]),"icon-halo-color":new xt(Le.paint_symbol["icon-halo-color"]),"icon-halo-width":new xt(Le.paint_symbol["icon-halo-width"]),"icon-halo-blur":new xt(Le.paint_symbol["icon-halo-blur"]),"icon-translate":new ft(Le.paint_symbol["icon-translate"]),"icon-translate-anchor":new ft(Le.paint_symbol["icon-translate-anchor"]),"text-opacity":new xt(Le.paint_symbol["text-opacity"]),"text-color":new xt(Le.paint_symbol["text-color"],{runtimeType:Qr,getOverride:r=>r.textColor,hasOverride:r=>!!r.textColor}),"text-halo-color":new xt(Le.paint_symbol["text-halo-color"]),"text-halo-width":new xt(Le.paint_symbol["text-halo-width"]),"text-halo-blur":new xt(Le.paint_symbol["text-halo-blur"]),"text-translate":new ft(Le.paint_symbol["text-translate"]),"text-translate-anchor":new ft(Le.paint_symbol["text-translate-anchor"])})},get layout(){return Ov=Ov||new _n({"symbol-placement":new ft(Le.layout_symbol["symbol-placement"]),"symbol-spacing":new ft(Le.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ft(Le.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new xt(Le.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ft(Le.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ft(Le.layout_symbol["icon-allow-overlap"]),"icon-overlap":new ft(Le.layout_symbol["icon-overlap"]),"icon-ignore-placement":new ft(Le.layout_symbol["icon-ignore-placement"]),"icon-optional":new ft(Le.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ft(Le.layout_symbol["icon-rotation-alignment"]),"icon-size":new xt(Le.layout_symbol["icon-size"]),"icon-text-fit":new ft(Le.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ft(Le.layout_symbol["icon-text-fit-padding"]),"icon-image":new xt(Le.layout_symbol["icon-image"]),"icon-rotate":new xt(Le.layout_symbol["icon-rotate"]),"icon-padding":new xt(Le.layout_symbol["icon-padding"]),"icon-keep-upright":new ft(Le.layout_symbol["icon-keep-upright"]),"icon-offset":new xt(Le.layout_symbol["icon-offset"]),"icon-anchor":new xt(Le.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ft(Le.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ft(Le.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ft(Le.layout_symbol["text-rotation-alignment"]),"text-field":new xt(Le.layout_symbol["text-field"]),"text-font":new xt(Le.layout_symbol["text-font"]),"text-size":new xt(Le.layout_symbol["text-size"]),"text-max-width":new xt(Le.layout_symbol["text-max-width"]),"text-line-height":new ft(Le.layout_symbol["text-line-height"]),"text-letter-spacing":new xt(Le.layout_symbol["text-letter-spacing"]),"text-justify":new xt(Le.layout_symbol["text-justify"]),"text-radial-offset":new xt(Le.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ft(Le.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new xt(Le.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new xt(Le.layout_symbol["text-anchor"]),"text-max-angle":new ft(Le.layout_symbol["text-max-angle"]),"text-writing-mode":new ft(Le.layout_symbol["text-writing-mode"]),"text-rotate":new xt(Le.layout_symbol["text-rotate"]),"text-padding":new ft(Le.layout_symbol["text-padding"]),"text-keep-upright":new ft(Le.layout_symbol["text-keep-upright"]),"text-transform":new xt(Le.layout_symbol["text-transform"]),"text-offset":new xt(Le.layout_symbol["text-offset"]),"text-allow-overlap":new ft(Le.layout_symbol["text-allow-overlap"]),"text-overlap":new ft(Le.layout_symbol["text-overlap"]),"text-ignore-placement":new ft(Le.layout_symbol["text-ignore-placement"]),"text-optional":new ft(Le.layout_symbol["text-optional"])})}};class Bv{constructor(e){if(e.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=e.property.overrides?e.property.overrides.runtimeType:dn,this.defaultValue=e}evaluate(e){if(e.formattedSection){let i=this.defaultValue.property.overrides;if(i&&i.hasOverride(e.formattedSection))return i.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}ot("FormatSectionOverride",Bv,{omit:["defaultValue"]});class lp extends Vn{constructor(e,i){super(e,Pm,i)}recalculate(e,i){if(super.recalculate(e,i),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){let l=this.layout.get("text-writing-mode");if(l){let h=[];for(let g of l)h.indexOf(g)<0&&h.push(g);this.layout._values["text-writing-mode"]=h}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(e,i,l,h){let g=this.layout.get(e).evaluate(i,{},l,h),y=this._unevaluatedLayout._values[e];return y.isDataDriven()||Zs(y.value)||!g?g:(function(x,S){return S.replace(/{([^{}]+)}/g,((P,A)=>x&&A in x?String(x[A]):""))})(i.properties,g)}createBucket(e){return new cu(e)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(let e of Pm.paint.overridableProperties){if(!lp.hasPaintOverride(this.layout,e))continue;let i=this.paint.get(e),l=new Bv(i),h=new ll(l,i.property.specification),g=null;g=i.value.kind==="constant"||i.value.kind==="source"?new v("source",h):new C("composite",h,i.value.zoomStops),this.paint._values[e]=new Na(i.property,g,i.parameters)}}_handleOverridablePaintPropertyUpdate(e,i,l){return!(!this.layout||i.isDataDriven()||l.isDataDriven())&&lp.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,i){let l=e.get("text-field"),h=Pm.paint.properties[i],g=!1,y=x=>{for(let S of x)if(h.overrides&&h.overrides.hasOverride(S))return void(g=!0)};if(l.value.kind==="constant"&&l.value.value instanceof Jr)y(l.value.value.sections);else if(l.value.kind==="source"||l.value.kind==="composite"){let x=P=>{g||(P instanceof Rn&&Jt(P.value)===Ts?y(P.value.sections):P instanceof mo?y(P.sections):P.eachChild(x))},S=l.value;S._styleExpression&&x(S._styleExpression.expression)}return g}}let Fv;var nM={get paint(){return Fv=Fv||new _n({"background-color":new ft(Le.paint_background["background-color"]),"background-pattern":new pd(Le.paint_background["background-pattern"]),"background-opacity":new ft(Le.paint_background["background-opacity"])})}};class aM extends Vn{constructor(e,i){super(e,nM,i)}}class sM extends Vn{constructor(e,i){super(e,{},i),this.onAdd=l=>{this.implementation.onAdd&&this.implementation.onAdd(l,l.painter.context.gl)},this.onRemove=l=>{this.implementation.onRemove&&this.implementation.onRemove(l,l.painter.context.gl)},this.implementation=e}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class oM{constructor(e){this._methodToThrottle=e,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}let lM={once:!0},Em=63710088e-1;class vl{constructor(e,i){if(isNaN(e)||isNaN(i))throw new Error(`Invalid LngLat object: (${e}, ${i})`);if(this.lng=+e,this.lat=+i,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new vl(sr(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){let i=Math.PI/180,l=this.lat*i,h=e.lat*i,g=Math.sin(l)*Math.sin(h)+Math.cos(l)*Math.cos(h)*Math.cos((e.lng-this.lng)*i);return Em*Math.acos(Math.min(g,1))}static convert(e){if(e instanceof vl)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new vl(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new vl(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}let jv=2*Math.PI*Em;function Nv(r){return jv*Math.cos(r*Math.PI/180)}function qv(r){return(180+r)/360}function Vv(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function Wv(r,e){return r/Nv(e)}function Gv(r){return 360*r-180}function cp(r){return 360/Math.PI*Math.atan(Math.exp((180-360*r)*Math.PI/180))-90}function Uv(r,e){return r*Nv(cp(e))}class Fd{constructor(e,i,l=0){this.x=+e,this.y=+i,this.z=+l}static fromLngLat(e,i=0){let l=vl.convert(e);return new Fd(qv(l.lng),Vv(l.lat),Wv(i,l.lat))}toLngLat(){return new vl(Gv(this.x),cp(this.y))}toAltitude(){return Uv(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/jv*(e=cp(this.y),1/Math.cos(e*Math.PI/180));var e}}function Zv(r,e,i){var l=2*Math.PI*6378137/256/Math.pow(2,i);return[r*l-2*Math.PI*6378137/2,e*l-2*Math.PI*6378137/2]}class Am{constructor(e,i,l){if(!(function(h,g,y){return!(h<0||h>25||y<0||y>=Math.pow(2,h)||g<0||g>=Math.pow(2,h))})(e,i,l))throw new Error(`x=${i}, y=${l}, z=${e} outside of bounds. 0<=x<${Math.pow(2,e)}, 0<=y<${Math.pow(2,e)} 0<=z<=25 `);this.z=e,this.x=i,this.y=l,this.key=uu(0,e,e,i,l)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,i,l){let h=(function(y,x,S){var P=Zv(256*y,256*(x=Math.pow(2,S)-x-1),S),A=Zv(256*(y+1),256*(x+1),S);return P[0]+","+P[1]+","+A[0]+","+A[1]})(this.x,this.y,this.z),g=(function(y,x,S){let P,A="";for(let D=y;D>0;D--)P=1<<D-1,A+=(x&P?1:0)+(S&P?2:0);return A})(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(l==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,i>1?"@2x":"").replace(/{quadkey}/g,g).replace(/{bbox-epsg-3857}/g,h)}isChildOf(e){let i=this.z-e.z;return i>0&&e.x===this.x>>i&&e.y===this.y>>i}getTilePoint(e){let i=Math.pow(2,this.z);return new T((e.x*i-this.x)*Ft,(e.y*i-this.y)*Ft)}toString(){return`${this.z}/${this.x}/${this.y}`}}class $v{constructor(e,i){this.wrap=e,this.canonical=i,this.key=uu(e,i.z,i.z,i.x,i.y)}}class Ta{constructor(e,i,l,h,g){if(this.terrainRttPosMatrix32f=null,e<l)throw new Error(`overscaledZ should be >= z; overscaledZ = ${e}; z = ${l}`);this.overscaledZ=e,this.wrap=i,this.canonical=new Am(l,+h,+g),this.key=uu(i,e,l,h,g)}clone(){return new Ta(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);let i=this.canonical.z-e;return e>this.canonical.z?new Ta(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ta(e,this.wrap,e,this.canonical.x>>i,this.canonical.y>>i)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(e,i){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);let l=this.canonical.z-e;return e>this.canonical.z?uu(this.wrap*+i,e,this.canonical.z,this.canonical.x,this.canonical.y):uu(this.wrap*+i,e,e,this.canonical.x>>l,this.canonical.y>>l)}isChildOf(e){if(e.wrap!==this.wrap||this.overscaledZ-e.overscaledZ<=0)return!1;if(e.overscaledZ===0)return this.overscaledZ>0;let i=this.canonical.z-e.canonical.z;return!(i<0)&&e.canonical.x===this.canonical.x>>i&&e.canonical.y===this.canonical.y>>i}children(e){if(this.overscaledZ>=e)return[new Ta(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];let i=this.canonical.z+1,l=2*this.canonical.x,h=2*this.canonical.y;return[new Ta(i,this.wrap,i,l,h),new Ta(i,this.wrap,i,l+1,h),new Ta(i,this.wrap,i,l,h+1),new Ta(i,this.wrap,i,l+1,h+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new Ta(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new Ta(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new $v(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(e){return this.canonical.getTilePoint(new Fd(e.x-this.wrap,e.y))}}function uu(r,e,i,l,h){(r*=2)<0&&(r=-1*r-1);let g=1<<i;return(g*g*r+g*h+l).toString(36)+i.toString(36)+e.toString(36)}function jd(r,e){return e?r.properties[e]:r.id}function cM(r,e){let i={id:r.id};if(e.removeAllProperties&&(delete r.removeProperties,delete r.addOrUpdateProperties,delete e.removeProperties),e.removeProperties)for(let l of e.removeProperties){let h=r.addOrUpdateProperties.findIndex((g=>g.key===l));h>-1&&r.addOrUpdateProperties.splice(h,1)}return(r.removeAllProperties||e.removeAllProperties)&&(i.removeAllProperties=!0),(r.removeProperties||e.removeProperties)&&(i.removeProperties=[...r.removeProperties||[],...e.removeProperties||[]]),(r.addOrUpdateProperties||e.addOrUpdateProperties)&&(i.addOrUpdateProperties=[...r.addOrUpdateProperties||[],...e.addOrUpdateProperties||[]]),(r.newGeometry||e.newGeometry)&&(i.newGeometry=e.newGeometry||r.newGeometry),i}function Hv(r){var e,i;if(!r)return{};let l={};return l.removeAll=r.removeAll,l.remove=new Set(r.remove||[]),l.add=new Map((e=r.add)===null||e===void 0?void 0:e.map((h=>[h.id,h]))),l.update=new Map((i=r.update)===null||i===void 0?void 0:i.map((h=>[h.id,h]))),l}ot("CanonicalTileID",Am),ot("OverscaledTileID",Ta,{omit:["terrainRttPosMatrix32f"]});class Yv{constructor(e){this._stringToNumber={},this._numberToString=[];for(let i=0;i<e.length;i++){let l=e[i];this._stringToNumber[l]=i,this._numberToString[i]=l}}encode(e){return this._stringToNumber[e]}decode(e){if(e>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${e} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[e]}}class Xv{constructor(e,i,l,h,g){this.type="Feature",this._vectorTileFeature=e,this._x=l,this._y=h,this._z=i,this.properties=e.properties,this.id=g}projectPoint(e,i,l,h){return[360*(e.x+i)/h-180,360/Math.PI*Math.atan(Math.exp((1-2*(e.y+l)/h)*Math.PI))-90]}projectLine(e,i,l,h){return e.map((g=>this.projectPoint(g,i,l,h)))}get geometry(){if(this._geometry)return this._geometry;let e=this._vectorTileFeature,i=e.extent*Math.pow(2,this._z),l=e.extent*this._x,h=e.extent*this._y,g=e.loadGeometry();switch(e.type){case 1:{let y=[];for(let S of g)y.push(S[0]);let x=this.projectLine(y,l,h,i);this._geometry=y.length===1?{type:"Point",coordinates:x[0]}:{type:"MultiPoint",coordinates:x};break}case 2:{let y=g.map((x=>this.projectLine(x,l,h,i)));this._geometry=y.length===1?{type:"LineString",coordinates:y[0]}:{type:"MultiLineString",coordinates:y};break}case 3:{let y=dv(g),x=[];for(let S of y)x.push(S.map((P=>this.projectLine(P,l,h,i))));this._geometry=x.length===1?{type:"Polygon",coordinates:x[0]}:{type:"MultiPolygon",coordinates:x};break}default:throw new Error(`unknown feature type: ${e.type}`)}return this._geometry}set geometry(e){this._geometry=e}toJSON(){let e={geometry:this.geometry};for(let i in this)i!=="_geometry"&&i!=="_vectorTileFeature"&&i!=="_x"&&i!=="_y"&&i!=="_z"&&(e[i]=this[i]);return e}}class du{constructor(e,i,l){Vt(this,"_name");Vt(this,"dataBuffer");Vt(this,"nullabilityBuffer");Vt(this,"_size");this._name=e,this.dataBuffer=i,typeof l=="number"?this._size=l:(this.nullabilityBuffer=l,this._size=l.size())}getValue(e){return this.nullabilityBuffer&&!this.nullabilityBuffer.get(e)?null:this.getValueFromBuffer(e)}has(e){return this.nullabilityBuffer&&this.nullabilityBuffer.get(e)||!this.nullabilityBuffer}get name(){return this._name}get size(){return this._size}}class up extends du{}class Mm extends up{getValueFromBuffer(e){return this.dataBuffer[e]}}class Im extends up{getValueFromBuffer(e){return this.dataBuffer[e]}}class Kv extends du{constructor(i,l,h,g){super(i,l,g);Vt(this,"delta");this.delta=h}}class zm extends Kv{constructor(e,i,l,h){super(e,Int32Array.of(i),l,h)}getValueFromBuffer(e){return this.dataBuffer[0]+e*this.delta}}class Lm extends du{constructor(e,i,l){super(e,Int32Array.of(i),l)}getValueFromBuffer(e){return this.dataBuffer[0]}}class uM{constructor(e,i,l,h,g=4096){Vt(this,"_name");Vt(this,"_geometryVector");Vt(this,"_idVector");Vt(this,"_propertyVectors");Vt(this,"_extent");Vt(this,"propertyVectorsMap");this._name=e,this._geometryVector=i,this._idVector=l,this._propertyVectors=h,this._extent=g}get name(){return this._name}get idVector(){return this._idVector}get geometryVector(){return this._geometryVector}get propertyVectors(){return this._propertyVectors}getPropertyVector(e){return this.propertyVectorsMap||(this.propertyVectorsMap=new Map(this._propertyVectors.map((i=>[i.name,i])))),this.propertyVectorsMap.get(e)}*[Symbol.iterator](){let e=this.geometryVector[Symbol.iterator](),i=0;for(;i<this.numFeatures;){let l;this.idVector&&(l=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(i)):this.idVector.getValue(i));let h=e==null?void 0:e.next().value,g={};for(let y of this.propertyVectors){if(!y)continue;let x=y.name,S=y.getValue(i);S!==null&&(g[x]=S)}i++,yield{id:l,geometry:h,properties:g}}}get numFeatures(){return this.geometryVector.numGeometries}get extent(){return this._extent}getFeatures(){let e=[],i=this.geometryVector.getGeometries();for(let l=0;l<this.numFeatures;l++){let h;this.idVector&&(h=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(l)):this.idVector.getValue(l));let g={coordinates:i[l],type:this.geometryVector.geometryType(l)},y={};for(let x of this.propertyVectors){if(!x)continue;let S=x.name,P=x.getValue(l);P!==null&&(y[S]=P)}e.push({id:h,geometry:g,properties:y})}return e}containsMaxSaveIntegerValues(e){return e instanceof Mm||e instanceof Lm&&e instanceof zm||e instanceof Im}}class dM{constructor(e){Vt(this,"value");this.value=e}get(){return this.value}set(e){this.value=e}increment(){return this.value++}add(e){this.value+=e}}var ti,Do,nn,ms,lc,sa,Br,Fr,Qv,Ca;function Yr(r,e,i){let l=new Int32Array(i),h=0,g=e.get();for(let y=0;y<l.length;y++){let x=r[g++],S=127&x;x<128||(x=r[g++],S|=(127&x)<<7,x<128||(x=r[g++],S|=(127&x)<<14,x<128||(x=r[g++],S|=(127&x)<<21,x<128||(x=r[g++],S|=(15&x)<<28)))),l[h++]=S}return e.set(g),l}function dp(r,e,i){let l=new BigInt64Array(i);for(let h=0;h<l.length;h++)l[h]=pM(r,e);return l}function hM(r,e){let i,l;return l=r[e.get()],e.increment(),i=127&l,l<128?i:(l=r[e.get()],e.increment(),i|=(127&l)<<7,l<128?i:(l=r[e.get()],e.increment(),i|=(127&l)<<14,l<128?i:(l=r[e.get()],e.increment(),i|=(127&l)<<21,l<128?i:(l=r[e.get()],i|=(15&l)<<28,(function(h,g,y){let x,S;if(S=g[y.get()],y.increment(),x=(112&S)>>4,S<128||(S=g[y.get()],y.increment(),x|=(127&S)<<3,S<128)||(S=g[y.get()],y.increment(),x|=(127&S)<<10,S<128)||(S=g[y.get()],y.increment(),x|=(127&S)<<17,S<128)||(S=g[y.get()],y.increment(),x|=(127&S)<<24,S<128)||(S=g[y.get()],y.increment(),x|=(1&S)<<31,S<128))return 4294967296*x+(h>>>0);throw new Error("Expected varint not more than 10 bytes")})(i,r,e)))))}function Jv(r,e,i,l){throw new Error("FastPFor is not implemented yet.")}function cc(r){return r>>>1^-(1&r)}function hu(r){return r>>BigInt(1)^-(BigInt(1)&r)}function pM(r,e){let i=BigInt(0),l=0,h=e.get();for(;h<r.length;){let g=r[h++];if(i|=BigInt(127&g)<<BigInt(l),!(128&g))break;if(l+=7,l>=64)throw new Error("Varint too long")}return e.set(h),i}function eb(r,e,i){let l=new Int32Array(i),h=0;for(let g=0;g<e;g++){let y=r[g];l.fill(r[g+e],h,h+y),h+=y}return l}function tb(r,e,i){let l=new BigInt64Array(i),h=0;for(let g=0;g<e;g++){let y=Number(r[g]);l.fill(r[g+e],h,h+y),h+=y}return l}function ib(r,e,i){let l=new Float64Array(i),h=0;for(let g=0;g<e;g++){let y=r[g];l.fill(r[g+e],h,h+y),h+=y}return l}function Dm(r){let e=r.length/4*4,i=1;if(e>=4)for(let l=r[0];i<e-4;i+=4)l=r[i]+=l,l=r[i+1]+=l,l=r[i+2]+=l,l=r[i+3]+=l;for(;i!=r.length;)r[i]+=r[i-1],++i}function rb(r){r[0]=r[0]>>>1^-(1&r[0]),r[1]=r[1]>>>1^-(1&r[1]);let e=r.length/4*4,i=2;if(e>=4)for(;i<e-4;i+=4){let l=r[i],h=r[i+1],g=r[i+2],y=r[i+3];r[i]=(l>>>1^-(1&l))+r[i-2],r[i+1]=(h>>>1^-(1&h))+r[i-1],r[i+2]=(g>>>1^-(1&g))+r[i],r[i+3]=(y>>>1^-(1&y))+r[i+1]}for(;i!=r.length;i+=2)r[i]=(r[i]>>>1^-(1&r[i]))+r[i-2],r[i+1]=(r[i+1]>>>1^-(1&r[i+1]))+r[i-1]}(function(r){r.NONE="NONE",r.DELTA="DELTA",r.COMPONENTWISE_DELTA="COMPONENTWISE_DELTA",r.RLE="RLE",r.MORTON="MORTON",r.PDE="PDE"})(ti||(ti={})),(function(r){r.NONE="NONE",r.FAST_PFOR="FAST_PFOR",r.VARINT="VARINT",r.ALP="ALP"})(Do||(Do={})),(function(r){r.PRESENT="PRESENT",r.DATA="DATA",r.OFFSET="OFFSET",r.LENGTH="LENGTH"})(nn||(nn={}));class Om{constructor(e,i,l){Vt(this,"_dictionaryType");Vt(this,"_offsetType");Vt(this,"_lengthType");this._dictionaryType=e,this._offsetType=i,this._lengthType=l}get dictionaryType(){return this._dictionaryType}get offsetType(){return this._offsetType}get lengthType(){return this._lengthType}}function Pn(r,e){let i=(function(l,h){let g=l[h.get()],y=Object.values(nn)[g>>4],x=null;switch(y){case nn.DATA:x=new Om(Object.values(ms)[15&g]);break;case nn.OFFSET:x=new Om(null,Object.values(lc)[15&g]);break;case nn.LENGTH:x=new Om(null,null,Object.values(sa)[15&g])}h.increment();let S=l[h.get()],P=Object.values(ti)[S>>5],A=Object.values(ti)[S>>2&7],D=Object.values(Do)[3&S];h.increment();let B=Yr(l,h,2),F=B[0];return{physicalStreamType:y,logicalStreamType:x,logicalLevelTechnique1:P,logicalLevelTechnique2:A,physicalLevelTechnique:D,numValues:F,byteLength:B[1],decompressedCount:F}})(r,e);return i.logicalLevelTechnique1===ti.MORTON?(function(l,h,g){let y=Yr(h,g,2);return{physicalStreamType:l.physicalStreamType,logicalStreamType:l.logicalStreamType,logicalLevelTechnique1:l.logicalLevelTechnique1,logicalLevelTechnique2:l.logicalLevelTechnique2,physicalLevelTechnique:l.physicalLevelTechnique,numValues:l.numValues,byteLength:l.byteLength,decompressedCount:l.decompressedCount,numBits:y[0],coordinateShift:y[1]}})(i,r,e):ti.RLE!==i.logicalLevelTechnique1&&ti.RLE!==i.logicalLevelTechnique2||Do.NONE===i.physicalLevelTechnique?i:(function(l,h,g){let y=Yr(h,g,2);return{physicalStreamType:l.physicalStreamType,logicalStreamType:l.logicalStreamType,logicalLevelTechnique1:l.logicalLevelTechnique1,logicalLevelTechnique2:l.logicalLevelTechnique2,physicalLevelTechnique:l.physicalLevelTechnique,numValues:l.numValues,byteLength:l.byteLength,decompressedCount:y[1],runs:y[0],numRleValues:y[1]}})(i,r,e)}(function(r){r.NONE="NONE",r.SINGLE="SINGLE",r.SHARED="SHARED",r.VERTEX="VERTEX",r.MORTON="MORTON",r.FSST="FSST"})(ms||(ms={})),(function(r){r.VERTEX="VERTEX",r.INDEX="INDEX",r.STRING="STRING",r.KEY="KEY"})(lc||(lc={})),(function(r){r.VAR_BINARY="VAR_BINARY",r.GEOMETRIES="GEOMETRIES",r.PARTS="PARTS",r.RINGS="RINGS",r.TRIANGLES="TRIANGLES",r.SYMBOL="SYMBOL",r.DICTIONARY="DICTIONARY"})(sa||(sa={})),(function(r){r[r.FLAT=0]="FLAT",r[r.CONST=1]="CONST",r[r.SEQUENCE=2]="SEQUENCE",r[r.DICTIONARY=3]="DICTIONARY",r[r.FSST_DICTIONARY=4]="FSST_DICTIONARY"})(Br||(Br={}));class gs{constructor(e,i){Vt(this,"values");Vt(this,"_size");this.values=e,this._size=i}get(e){let i=Math.floor(e/8);return(this.values[i]>>e%8&1)==1}set(e,i){let l=Math.floor(e/8);this.values[l]=this.values[l]|(i?1:0)<<e%8}getInt(e){let i=Math.floor(e/8);return this.values[i]>>e%8&1}size(){return this._size}getBuffer(){return this.values}}function En(r,e,i,l,h){return(function(g,y,x){switch(y.logicalLevelTechnique1){case ti.DELTA:return y.logicalLevelTechnique2===ti.RLE?(function(S,P,A){let D=new Int32Array(A),B=0,F=0;for(let W=0;W<P;W++){let U=S[W],$=cc(S[W+P]);for(let J=0;J<U;J++)F+=$,D[B++]=F}return D})(g,y.runs,y.numRleValues):((function(S){S[0]=S[0]>>>1^-(1&S[0]);let P=S.length/4*4,A=1;if(P>=4)for(;A<P-4;A+=4){let D=S[A],B=S[A+1],F=S[A+2],W=S[A+3];S[A]=(D>>>1^-(1&D))+S[A-1],S[A+1]=(B>>>1^-(1&B))+S[A],S[A+2]=(F>>>1^-(1&F))+S[A+1],S[A+3]=(W>>>1^-(1&W))+S[A+2]}for(;A!=S.length;++A)S[A]=(S[A]>>>1^-(1&S[A]))+S[A-1]})(g),g);case ti.RLE:return(function(S,P,A){return A?(function(D,B,F){let W=new Int32Array(F),U=0;for(let $=0;$<B;$++){let J=D[$],ue=D[$+B];ue=ue>>>1^-(1&ue),W.fill(ue,U,U+J),U+=J}return W})(S,P.runs,P.numRleValues):eb(S,P.runs,P.numRleValues)})(g,y,x);case ti.MORTON:return Dm(g),g;case ti.COMPONENTWISE_DELTA:return rb(g),g;case ti.NONE:return x&&(function(S){for(let P=0;P<S.length;P++){let A=S[P];S[P]=A>>>1^-(1&A)}})(g),g;default:throw new Error(`The specified Logical level technique is not supported: ${y.logicalLevelTechnique1}`)}})(hp(r,e,i),i,l)}function bl(r,e,i){return(function(l,h){if(h.logicalLevelTechnique1===ti.DELTA&&h.logicalLevelTechnique2===ti.NONE)return(function(y){let x=new Int32Array(y.length+1);x[0]=0,x[1]=cc(y[0]);let S=x[1],P=2;for(;P!=x.length;++P){let A=y[P-1];S+=A>>>1^-(1&A),x[P]=x[P-1]+S}return x})(l);if(h.logicalLevelTechnique1===ti.RLE&&h.logicalLevelTechnique2===ti.NONE)return(function(y,x,S){let P=new Int32Array(S+1);P[0]=0;let A=1,D=P[0];for(let B=0;B<x;B++){let F=y[B],W=y[B+x];for(let U=A;U<A+F;U++)P[U]=W+D,D=P[U];A+=F}return P})(l,h.runs,h.numRleValues);if(h.logicalLevelTechnique1===ti.NONE&&h.logicalLevelTechnique2===ti.NONE){(function(y){let x=0;for(let S=0;S<y.length;S++)y[S]+=x,x=y[S]})(l);let g=new Int32Array(h.numValues+1);return g[0]=0,g.set(l,1),g}if(h.logicalLevelTechnique1===ti.DELTA&&h.logicalLevelTechnique2===ti.RLE){let g=(function(y,x,S){let P=new Int32Array(S+1);P[0]=0;let A=1,D=P[0];for(let B=0;B<x;B++){let F=y[B],W=y[B+x];W=W>>>1^-(1&W);for(let U=A;U<A+F;U++)P[U]=W+D,D=P[U];A+=F}return P})(l,h.runs,h.numRleValues);return Dm(g),g}throw new Error("Only delta encoding is supported for transforming length to offset streams yet.")})(hp(r,e,i),i)}function hp(r,e,i){let l=i.physicalLevelTechnique;if(l===Do.FAST_PFOR)return Jv();if(l===Do.VARINT)return Yr(r,e,i.numValues);if(l===Do.NONE){let h=e.get();e.add(i.byteLength);let g=r.subarray(h,e.get());return new Int32Array(g)}throw new Error("Specified physicalLevelTechnique is not supported (yet).")}function Rm(r,e,i,l){let h=hp(r,e,i);if(h.length===1){let g=h[0];return l?cc(g):g}return l?(function(g){return cc(g[1])})(h):(function(g){return g[1]})(h)}function nb(r,e,i){return(function(l){if(l.length==2){let h=cc(l[1]);return[h,h]}return[cc(l[2]),cc(l[3])]})(hp(r,e,i))}function ab(r,e,i){return(function(l){if(l.length==2){let h=hu(l[1]);return[h,h]}return[hu(l[2]),hu(l[3])]})(dp(r,e,i.numValues))}function sb(r,e,i,l){return(function(h,g,y){switch(g.logicalLevelTechnique1){case ti.DELTA:return g.logicalLevelTechnique2===ti.RLE?(function(x,S,P){let A=new BigInt64Array(P),D=0,B=BigInt(0);for(let F=0;F<S;F++){let W=Number(x[F]),U=hu(x[F+S]);for(let $=0;$<W;$++)B+=U,A[D++]=B}return A})(h,g.runs,g.numRleValues):((function(x){x[0]=x[0]>>BigInt(1)^-(BigInt(1)&x[0]);let S=x.length/4*4,P=1;if(S>=4)for(;P<S-4;P+=4){let A=x[P],D=x[P+1],B=x[P+2],F=x[P+3];x[P]=(A>>BigInt(1)^-(BigInt(1)&A))+x[P-1],x[P+1]=(D>>BigInt(1)^-(BigInt(1)&D))+x[P],x[P+2]=(B>>BigInt(1)^-(BigInt(1)&B))+x[P+1],x[P+3]=(F>>BigInt(1)^-(BigInt(1)&F))+x[P+2]}for(;P!=x.length;++P)x[P]=(x[P]>>BigInt(1)^-(BigInt(1)&x[P]))+x[P-1]})(h),h);case ti.RLE:return(function(x,S,P){return P?(function(A,D,B){let F=new BigInt64Array(B),W=0;for(let U=0;U<D;U++){let $=Number(A[U]),J=A[U+D];J=J>>BigInt(1)^-(BigInt(1)&J),F.fill(J,W,W+$),W+=$}return F})(x,S.runs,S.numRleValues):tb(x,S.runs,S.numRleValues)})(h,g,y);case ti.NONE:return y&&(function(x){for(let S=0;S<x.length;S++){let P=x[S];x[S]=P>>BigInt(1)^-(BigInt(1)&P)}})(h),h;default:throw new Error(`The specified Logical level technique is not supported: ${g.logicalLevelTechnique1}`)}})(dp(r,e,i.numValues),i,l)}function ob(r,e,i,l){let h=dp(r,e,i.numValues);if(h.length===1){let g=h[0];return l?hu(g):g}return l?(function(g){return hu(g[1])})(h):(function(g){return g[1]})(h)}function Bm(r,e,i,l,h){return(function(g,y,x,S){switch(y.logicalLevelTechnique1){case ti.DELTA:return y.logicalLevelTechnique2===ti.RLE&&(g=eb(g,y.runs,y.numRleValues)),(function(P,A){let D=new Int32Array(P.size()),B=0;P.get(0)?(D[0]=P.get(0)?A[0]>>>1^-(1&A[0]):0,B=1):D[0]=0;let F=1;for(;F!=D.length;++F)D[F]=P.get(F)?D[F-1]+(A[B]>>>1^-(1&A[B++])):D[F-1];return D})(S,g);case ti.RLE:return(function(P,A,D,B){let F=A;return D?(function(W,U,$){let J=new Int32Array(W.size()),ue=0;for(let ee=0;ee<$;ee++){let ae=U[ee],he=U[ee+$];he=he>>>1^-(1&he);for(let fe=ue;fe<ue+ae;fe++)W.get(fe)?J[fe]=he:(J[fe]=0,ue++);ue+=ae}return J})(B,P,F.runs):(function(W,U,$){let J=new Int32Array(W.size()),ue=0;for(let ee=0;ee<$;ee++){let ae=U[ee],he=U[ee+$];for(let fe=ue;fe<ue+ae;fe++)W.get(fe)?J[fe]=he:(J[fe]=0,ue++);ue+=ae}return J})(B,P,F.runs)})(g,y,x,S);case ti.MORTON:return Dm(g),g;case ti.COMPONENTWISE_DELTA:return rb(g),g;case ti.NONE:return g=x?(function(P,A){let D=new Int32Array(P.size()),B=0,F=0;for(;F!=D.length;++F)if(P.get(F)){let W=A[B++];D[F]=W>>>1^-(1&W)}else D[F]=0;return D})(S,g):(function(P,A){let D=new Int32Array(P.size()),B=0,F=0;for(;F!=D.length;++F)D[F]=P.get(F)?A[B++]:0;return D})(S,g),g;default:throw new Error("The specified Logical level technique is not supported")}})(i.physicalLevelTechnique===Do.FAST_PFOR?Jv():Yr(r,e,i.numValues),i,l,h)}function pp(r,e,i,l){let h=r.logicalLevelTechnique1;if(h===ti.RLE)return r.runs===1?Br.CONST:Br.FLAT;let g=e instanceof gs?e.size():e;if(h===ti.DELTA&&r.logicalLevelTechnique2===ti.RLE){let y=r.runs,x=2;if(r.numRleValues!==g)return Br.FLAT;if(y===1)return Br.SEQUENCE;if(y===2){let S=l.get(),P;if(r.physicalLevelTechnique===Do.VARINT)P=Yr(i,l,4);else{let A=l.get();P=new Int32Array(i.buffer,i.byteOffset+A,4)}if(l.set(S),P[2]===x&&P[3]===x)return Br.SEQUENCE}}return r.numValues===1?Br.CONST:Br.FLAT}class lb extends up{getValueFromBuffer(e){return this.dataBuffer[e]}}class cb extends Kv{constructor(e,i,l,h){super(e,BigInt64Array.of(i),l,h)}getValueFromBuffer(e){return this.dataBuffer[0]+BigInt(e)*this.delta}}class pu{constructor(e,i,l){Vt(this,"_geometryOffsets");Vt(this,"_partOffsets");Vt(this,"_ringOffsets");this._geometryOffsets=e,this._partOffsets=i,this._ringOffsets=l}get geometryOffsets(){return this._geometryOffsets}get partOffsets(){return this._partOffsets}get ringOffsets(){return this._ringOffsets}}function Fm(r,e,i){return{x:ub(r,e)-i,y:ub(r>>1,e)-i}}function ub(r,e){let i=0;for(let l=0;l<e;l++)i|=(r&1<<2*l)>>l;return i}(function(r){r[r.POINT=0]="POINT",r[r.LINESTRING=1]="LINESTRING",r[r.POLYGON=2]="POLYGON",r[r.MULTIPOINT=3]="MULTIPOINT",r[r.MULTILINESTRING=4]="MULTILINESTRING",r[r.MULTIPOLYGON=5]="MULTIPOLYGON"})(Fr||(Fr={})),(function(r){r[r.POINT=0]="POINT",r[r.LINESTRING=1]="LINESTRING",r[r.POLYGON=2]="POLYGON"})(Qv||(Qv={})),(function(r){r[r.MORTON=0]="MORTON",r[r.VEC_2=1]="VEC_2",r[r.VEC_3=2]="VEC_3"})(Ca||(Ca={}));class fM{createPoint(e){return[[e]]}createMultiPoint(e){return e.map((i=>[i]))}createLineString(e){return[e]}createMultiLineString(e){return e}createPolygon(e,i){return[e].concat(i)}createMultiPolygon(e){return e.flat()}}function db(r){let e=new Array(r.numGeometries),i=1,l=1,h=1,g=0,y=new fM,x=0,S=0,P=r.mortonSettings,A=r.topologyVector,D=A.geometryOffsets,B=A.partOffsets,F=A.ringOffsets,W=r.vertexOffsets,U=r.containsPolygonGeometry(),$=r.vertexBuffer;for(let J=0;J<r.numGeometries;J++){let ue=r.geometryType(J);if(ue===Fr.POINT){if(W&&W.length!==0)if(r.vertexBufferType===Ca.VEC_2){let ee=2*W[S++],ae=new T($[ee],$[ee+1]);e[g++]=y.createPoint(ae)}else{let ee=Fm($[W[S++]],P.numBits,P.coordinateShift),ae=new T(ee.x,ee.y);e[g++]=y.createPoint(ae)}else{let ee=new T($[x++],$[x++]);e[g++]=y.createPoint(ee)}D&&h++,B&&i++,F&&l++}else if(ue===Fr.MULTIPOINT){let ee=D[h]-D[h-1];h++;let ae=new Array(ee);if(W&&W.length!==0){for(let he=0;he<ee;he++){let fe=2*W[S++];ae[he]=new T($[fe],$[fe+1])}e[g++]=y.createMultiPoint(ae)}else{for(let he=0;he<ee;he++){let fe=$[x++],Ae=$[x++];ae[he]=new T(fe,Ae)}e[g++]=y.createMultiPoint(ae)}}else if(ue===Fr.LINESTRING){let ee,ae=0;U?(ae=F[l]-F[l-1],l++):ae=B[i]-B[i-1],i++,W&&W.length!==0?(ee=r.vertexBufferType===Ca.VEC_2?Nm($,W,S,ae,!1):qm($,W,S,ae,!1,P),S+=ae):(ee=jm($,x,ae,!1),x+=2*ae),e[g++]=y.createLineString(ee),D&&h++}else if(ue===Fr.POLYGON){let ee=B[i]-B[i-1];i++;let ae=new Array(ee-1),he=F[l]-F[l-1];if(l++,W&&W.length!==0){let fe=r.vertexBufferType===Ca.VEC_2?mp($,W,S,he):gp($,W,S,he,0,P);S+=he;for(let Ae=0;Ae<ae.length;Ae++)he=F[l]-F[l-1],l++,ae[Ae]=r.vertexBufferType===Ca.VEC_2?mp($,W,S,he):gp($,W,S,he,0,P),S+=he;e[g++]=y.createPolygon(fe,ae)}else{let fe=fp($,x,he);x+=2*he;for(let Ae=0;Ae<ae.length;Ae++)he=F[l]-F[l-1],l++,ae[Ae]=fp($,x,he),x+=2*he;e[g++]=y.createPolygon(fe,ae)}D&&h++}else if(ue===Fr.MULTILINESTRING){let ee=D[h]-D[h-1];h++;let ae=new Array(ee);if(W&&W.length!==0){for(let he=0;he<ee;he++){let fe=0;U?(fe=F[l]-F[l-1],l++):fe=B[i]-B[i-1],i++;let Ae=r.vertexBufferType===Ca.VEC_2?Nm($,W,S,fe,!1):qm($,W,S,fe,!1,P);ae[he]=Ae,S+=fe}e[g++]=y.createMultiLineString(ae)}else{for(let he=0;he<ee;he++){let fe=0;U?(fe=F[l]-F[l-1],l++):fe=B[i]-B[i-1],i++,ae[he]=jm($,x,fe,!1),x+=2*fe}e[g++]=y.createMultiLineString(ae)}}else{if(ue!==Fr.MULTIPOLYGON)throw new Error("The specified geometry type is currently not supported.");{let ee=D[h]-D[h-1];h++;let ae=new Array(ee),he=0;if(W&&W.length!==0){for(let fe=0;fe<ee;fe++){let Ae=B[i]-B[i-1];i++;let We=new Array(Ae-1);he=F[l]-F[l-1],l++;let qe=r.vertexBufferType===Ca.VEC_2?mp($,W,S,he):gp($,W,S,he,0,P);S+=he;for(let Ue=0;Ue<We.length;Ue++)he=F[l]-F[l-1],l++,We[Ue]=r.vertexBufferType===Ca.VEC_2?mp($,W,S,he):gp($,W,S,he,0,P),S+=he;ae[fe]=y.createPolygon(qe,We)}e[g++]=y.createMultiPolygon(ae)}else{for(let fe=0;fe<ee;fe++){let Ae=B[i]-B[i-1];i++;let We=new Array(Ae-1);he=F[l]-F[l-1],l++;let qe=fp($,x,he);x+=2*he;for(let Ue=0;Ue<We.length;Ue++){let tt=F[l]-F[l-1];l++,We[Ue]=fp($,x,tt),x+=2*tt}ae[fe]=y.createPolygon(qe,We)}e[g++]=y.createMultiPolygon(ae)}}}}return e}function fp(r,e,i){return jm(r,e,i,!0)}function mp(r,e,i,l){return Nm(r,e,i,l,!0)}function gp(r,e,i,l,h,g){return qm(r,e,i,l,!0,g)}function jm(r,e,i,l){let h=new Array(l?i+1:i);for(let g=0;g<2*i;g+=2)h[g/2]=new T(r[e+g],r[e+g+1]);return l&&(h[h.length-1]=h[0]),h}function Nm(r,e,i,l,h){let g=new Array(h?l+1:l);for(let y=0;y<2*l;y+=2){let x=2*e[i+y/2];g[y/2]=new T(r[x],r[x+1])}return h&&(g[g.length-1]=g[0]),g}function qm(r,e,i,l,h,g){let y=new Array(h?l+1:l);for(let x=0;x<l;x++){let S=Fm(r[e[i+x]],g.numBits,g.coordinateShift);y[x]=new T(S.x,S.y)}return h&&(y[y.length-1]=y[0]),y}class hb{constructor(e,i,l,h,g){Vt(this,"_vertexBufferType");Vt(this,"_topologyVector");Vt(this,"_vertexOffsets");Vt(this,"_vertexBuffer");Vt(this,"_mortonSettings");this._vertexBufferType=e,this._topologyVector=i,this._vertexOffsets=l,this._vertexBuffer=h,this._mortonSettings=g}get vertexBufferType(){return this._vertexBufferType}get topologyVector(){return this._topologyVector}get vertexOffsets(){return this._vertexOffsets}get vertexBuffer(){return this._vertexBuffer}*[Symbol.iterator](){let e=db(this),i=0;for(;i<this.numGeometries;)yield{coordinates:e[i],type:this.geometryType(i)},i++}getSimpleEncodedVertex(e){let i=this.vertexOffsets?2*this.vertexOffsets[e]:2*e;return[this.vertexBuffer[i],this.vertexBuffer[i+1]]}getVertex(e){if(this.vertexOffsets&&this.mortonSettings){let l=Fm(this.vertexBuffer[this.vertexOffsets[e]],this.mortonSettings.numBits,this.mortonSettings.coordinateShift);return[l.x,l.y]}let i=this.vertexOffsets?2*this.vertexOffsets[e]:2*e;return[this.vertexBuffer[i],this.vertexBuffer[i+1]]}getGeometries(){return db(this)}get mortonSettings(){return this._mortonSettings}}class pb extends hb{constructor(i,l,h,g,y,x,S){super(h,g,y,x,S);Vt(this,"_numGeometries");Vt(this,"_geometryType");this._numGeometries=i,this._geometryType=l}geometryType(i){return this._geometryType}get numGeometries(){return this._numGeometries}containsPolygonGeometry(){return this._geometryType===Fr.POLYGON||this._geometryType===Fr.MULTIPOLYGON}containsSingleGeometryType(){return!0}}class fb extends hb{constructor(i,l,h,g,y,x){super(i,h,g,y,x);Vt(this,"_geometryTypes");this._geometryTypes=l}geometryType(i){return this._geometryTypes[i]}get numGeometries(){return this._geometryTypes.length}containsPolygonGeometry(){for(let i=0;i<this.numGeometries;i++)if(this.geometryType(i)===Fr.POLYGON||this.geometryType(i)===Fr.MULTIPOLYGON)return!0;return!1}containsSingleGeometryType(){return!1}}class mb{constructor(e,i,l,h){Vt(this,"_triangleOffsets");Vt(this,"_indexBuffer");Vt(this,"_vertexBuffer");Vt(this,"_topologyVector");this._triangleOffsets=e,this._indexBuffer=i,this._vertexBuffer=l,this._topologyVector=h}get triangleOffsets(){return this._triangleOffsets}get indexBuffer(){return this._indexBuffer}get vertexBuffer(){return this._vertexBuffer}get topologyVector(){return this._topologyVector}getGeometries(){if(!this._topologyVector)throw new Error("Cannot convert GpuVector to coordinates without topology information");let e=new Array(this.numGeometries),i=this._topologyVector,l=i.partOffsets,h=i.ringOffsets,g=i.geometryOffsets,y=0,x=1,S=1,P=1;for(let A=0;A<this.numGeometries;A++)switch(this.geometryType(A)){case Fr.POLYGON:{let D=l[x]-l[x-1];x++;let B=[];for(let F=0;F<D;F++){let W=h[S]-h[S-1];S++;let U=[];for(let $=0;$<W;$++){let J=this._vertexBuffer[y++],ue=this._vertexBuffer[y++];U.push(new T(J,ue))}U.length>0&&U.push(U[0]),B.push(U)}e[A]=B,g&&P++}break;case Fr.MULTIPOLYGON:{let D=g[P]-g[P-1];P++;let B=[];for(let F=0;F<D;F++){let W=l[x]-l[x-1];x++;for(let U=0;U<W;U++){let $=h[S]-h[S-1];S++;let J=[];for(let ue=0;ue<$;ue++){let ee=this._vertexBuffer[y++],ae=this._vertexBuffer[y++];J.push(new T(ee,ae))}J.length>0&&J.push(J[0]),B.push(J)}}e[A]=B}}return e}[Symbol.iterator](){return null}}function gb(r,e,i,l,h,g){return new mM(r,e,i,l,h,g)}class mM extends mb{constructor(i,l,h,g,y,x){super(h,g,y,x);Vt(this,"_numGeometries");Vt(this,"_geometryType");this._numGeometries=i,this._geometryType=l}geometryType(i){return this._geometryType}get numGeometries(){return this._numGeometries}containsSingleGeometryType(){return!0}}function yb(r,e,i,l,h){return new gM(r,e,i,l,h)}class gM extends mb{constructor(i,l,h,g,y){super(l,h,g,y);Vt(this,"_geometryTypes");this._geometryTypes=i}geometryType(i){return this._geometryTypes[i]}get numGeometries(){return this._geometryTypes.length}containsSingleGeometryType(){return!1}}function yM(r,e,i,l,h){let g=Pn(r,i),y=null,x=null,S=null,P=null,A=null,D=null,B=null,F=null;if(pp(g,l,r,i)===Br.CONST){let U=Rm(r,i,g,!1);for(let $=0;$<e-1;$++){let J=Pn(r,i);switch(J.physicalStreamType){case nn.LENGTH:switch(J.logicalStreamType.lengthType){case sa.GEOMETRIES:y=bl(r,i,J);break;case sa.PARTS:x=bl(r,i,J);break;case sa.RINGS:S=bl(r,i,J);break;case sa.TRIANGLES:B=bl(r,i,J)}break;case nn.OFFSET:switch(J.logicalStreamType.offsetType){case lc.VERTEX:P=En(r,i,J,!1);break;case lc.INDEX:F=En(r,i,J,!1)}break;case nn.DATA:ms.VERTEX===J.logicalStreamType.dictionaryType?A=En(r,i,J,!0):(D={numBits:J.numBits,coordinateShift:J.coordinateShift},A=En(r,i,J,!1))}}return F!==null?y!=null||x!=null?gb(l,U,B,F,A,new pu(y,x,S)):gb(l,U,B,F,A):D===null?(function($,J,ue,ee,ae){return new pb($,J,Ca.VEC_2,ue,ee,ae)})(l,U,new pu(y,x,S),P,A):(function($,J,ue,ee,ae,he){return new pb($,J,Ca.MORTON,ue,ee,ae,he)})(l,U,new pu(y,x,S),P,A,D)}let W=En(r,i,g,!1);for(let U=0;U<e-1;U++){let $=Pn(r,i);switch($.physicalStreamType){case nn.LENGTH:switch($.logicalStreamType.lengthType){case sa.GEOMETRIES:y=En(r,i,$,!1);break;case sa.PARTS:x=En(r,i,$,!1);break;case sa.RINGS:S=En(r,i,$,!1);break;case sa.TRIANGLES:B=bl(r,i,$)}break;case nn.OFFSET:switch($.logicalStreamType.offsetType){case lc.VERTEX:P=En(r,i,$,!1);break;case lc.INDEX:F=En(r,i,$,!1)}break;case nn.DATA:ms.VERTEX===$.logicalStreamType.dictionaryType?A=En(r,i,$,!0):(D={numBits:$.numBits,coordinateShift:$.coordinateShift},A=En(r,i,$,!1))}}return F!==null&&x===null?yb(W,B,F,A):(y!==null?(y=Vm(W,y,2),x!==null&&S!==null?(x=_b(W,y,x,!1),S=(function(U,$,J,ue){let ee=new Int32Array(J[J.length-1]+1),ae=0;ee[0]=ae;let he=1,fe=1,Ae=0;for(let We=0;We<U.length;We++){let qe=U[We],Ue=$[We+1]-$[We];if(qe!==0&&qe!==3)for(let tt=0;tt<Ue;tt++){let Ke=J[he]-J[he-1];he++;for(let He=0;He<Ke;He++)ae=ee[fe++]=ae+ue[Ae++]}else for(let tt=0;tt<Ue;tt++)ee[fe++]=++ae,he++}return ee})(W,y,x,S)):x!==null&&(x=(function(U,$,J){let ue=new Int32Array($[$.length-1]+1),ee=0;ue[0]=ee;let ae=1,he=0;for(let fe=0;fe<U.length;fe++){let Ae=U[fe],We=$[fe+1]-$[fe];if(Ae===4||Ae===1)for(let qe=0;qe<We;qe++)ee=ue[ae++]=ee+J[he++];else for(let qe=0;qe<We;qe++)ue[ae++]=++ee}return ue})(W,y,x))):x!==null&&S!==null?(x=Vm(W,x,1),S=_b(W,x,S,!0)):x!==null&&(x=Vm(W,x,0)),F!==null?yb(W,B,F,A,new pu(y,x,S)):D===null?(function(U,$,J,ue){return new fb(Ca.VEC_2,U,$,J,ue)})(W,new pu(y,x,S),P,A):(function(U,$,J,ue,ee){return new fb(Ca.MORTON,U,$,J,ue,ee)})(W,new pu(y,x,S),P,A,D))}function Vm(r,e,i){let l=new Int32Array(r.length+1),h=0;l[0]=h;let g=0;for(let y=0;y<r.length;y++)h=l[y+1]=h+(r[y]>i?e[g++]:1);return l}function _b(r,e,i,l){let h=new Int32Array(e[e.length-1]+1),g=0;h[0]=g;let y=1,x=0;for(let S=0;S<r.length;S++){let P=r[S],A=e[S+1]-e[S];if(P===5||P===2||l&&(P===4||P===1))for(let D=0;D<A;D++)g=h[y++]=g+i[x++];else for(let D=0;D<A;D++)h[y++]=++g}return h}class _M extends du{constructor(i,l,h){super(i,l.getBuffer(),h);Vt(this,"dataVector");this.dataVector=l}getValueFromBuffer(i){return this.dataVector.get(i)}}class vM extends up{getValueFromBuffer(e){return this.dataBuffer[e]}}class vb extends du{constructor(e,i,l){super(e,BigInt64Array.of(i),l)}getValueFromBuffer(e){return this.dataBuffer[0]}}function Nd(r,e,i){return bb(r,Math.ceil(e/8),i)}function bb(r,e,i){let l=new Uint8Array(e),h=0;for(;h<e;){let g=r[i.increment()];if(g<=127){let y=g+3,x=r[i.increment()],S=h+y;l.fill(x,h,S),h=S}else{let y=256-g;for(let x=0;x<y;x++)l[h++]=r[i.increment()]}}return l}let bM=new TextDecoder;function Wm(r,e,i){return i-e>=12?bM.decode(r.subarray(e,i)):(function(l,h,g){let y="",x=h;for(;x<g;){let S=l[x],P,A,D,B=null,F=S>239?4:S>223?3:S>191?2:1;if(x+F>g)break;F===1?S<128&&(B=S):F===2?(P=l[x+1],(192&P)==128&&(B=(31&S)<<6|63&P,B<=127&&(B=null))):F===3?(P=l[x+1],A=l[x+2],(192&P)==128&&(192&A)==128&&(B=(15&S)<<12|(63&P)<<6|63&A,(B<=2047||B>=55296&&B<=57343)&&(B=null))):F===4&&(P=l[x+1],A=l[x+2],D=l[x+3],(192&P)==128&&(192&A)==128&&(192&D)==128&&(B=(15&S)<<18|(63&P)<<12|(63&A)<<6|63&D,(B<=65535||B>=1114112)&&(B=null))),B===null?(B=65533,F=1):B>65535&&(B-=65536,y+=String.fromCharCode(B>>>10&1023|55296),B=56320|1023&B),y+=String.fromCharCode(B),x+=F}return y})(r,e,i)}class Gm extends du{constructor(i,l,h,g){super(i,h,g);Vt(this,"offsetBuffer");this.offsetBuffer=l}}class xb extends Gm{constructor(i,l,h,g){super(i,l,h,g!=null?g:l.length-1);Vt(this,"textEncoder");this.textEncoder=new TextEncoder}getValueFromBuffer(i){return Wm(this.dataBuffer,this.offsetBuffer[i],this.offsetBuffer[i+1])}}class fu extends Gm{constructor(i,l,h,g,y){super(i,h,g,y!=null?y:l.length);Vt(this,"indexBuffer");Vt(this,"textEncoder");this.indexBuffer=l,this.indexBuffer=l,this.textEncoder=new TextEncoder}getValueFromBuffer(i){let l=this.indexBuffer[i];return Wm(this.dataBuffer,this.offsetBuffer[l],this.offsetBuffer[l+1])}}class wb extends Gm{constructor(i,l,h,g,y,x,S){super(i,h,g,S);Vt(this,"indexBuffer");Vt(this,"symbolOffsetBuffer");Vt(this,"symbolTableBuffer");Vt(this,"textEncoder");Vt(this,"symbolLengthBuffer");Vt(this,"lengthBuffer");Vt(this,"decodedDictionary");this.indexBuffer=l,this.symbolOffsetBuffer=y,this.symbolTableBuffer=x,this.textEncoder=new TextEncoder}getValueFromBuffer(i){this.decodedDictionary==null&&(this.symbolLengthBuffer==null&&(this.symbolLengthBuffer=this.offsetToLengthBuffer(this.symbolOffsetBuffer),this.lengthBuffer=this.offsetToLengthBuffer(this.offsetBuffer)),this.decodedDictionary=(function(h,g,y){let x=[],S=new Array(g.length).fill(0);for(let P=1;P<g.length;P++)S[P]=S[P-1]+g[P-1];for(let P=0;P<y.length;P++)if(y[P]===255)x.push(y[++P]);else{let A=g[y[P]],D=S[y[P]];for(let B=0;B<A;B++)x.push(h[D+B])}return new Uint8Array(x)})(this.symbolTableBuffer,this.symbolLengthBuffer,this.dataBuffer));let l=this.indexBuffer[i];return Wm(this.decodedDictionary,this.offsetBuffer[l],this.offsetBuffer[l+1])}offsetToLengthBuffer(i){let l=new Uint32Array(i.length-1),h=i[0];for(let g=1;g<i.length;g++){let y=i[g];l[g-1]=y-h,h=y}return l}}function xM(r,e,i,l,h,g){return i.type==="scalarType"?(function(y,x,S,P,A,D){let B=null,F=0;if(y===0)return null;if(D.nullable){let U=Pn(x,S);F=U.numValues;let $=S.get(),J=Nd(x,F,S);S.set($+U.byteLength),B=new gs(J,U.numValues)}let W=B!=null?B:P;switch(A.physicalType){case 4:case 3:return(function(U,$,J,ue,ee){let ae=Pn(U,$),he=pp(ae,ee,U,$),fe=ue.physicalType===3;if(he===Br.FLAT){let Ae=qd(ee)?Bm(U,$,ae,fe,ee):En(U,$,ae,fe);return new Mm(J.name,Ae,ee)}if(he===Br.SEQUENCE){let Ae=nb(U,$,ae);return new zm(J.name,Ae[0],Ae[1],ae.numRleValues)}{let Ae=Rm(U,$,ae,fe);return new Lm(J.name,Ae,ee)}})(x,S,D,A,W);case 9:return(function(U,$,J,ue,ee){var Ke,He;let ae=null,he=null,fe=null,Ae=null,We=null,qe=null,Ue=null,tt=null;for(let Ne=0;Ne<ue;Ne++){let it=Pn($,J);if(it.byteLength!==0)switch(it.physicalStreamType){case nn.PRESENT:{let nt=Nd($,it.numValues,J);qe=new gs(nt,it.numValues);break}case nn.OFFSET:he=ee!=null||qe!=null?Bm($,J,it,!1,ee!=null?ee:qe):En($,J,it,!1);break;case nn.LENGTH:{let nt=bl($,J,it);sa.DICTIONARY===it.logicalStreamType.lengthType?ae=nt:sa.SYMBOL===it.logicalStreamType.lengthType?Ae=nt:Ue=nt;break}case nn.DATA:{let nt=$.subarray(J.get(),J.get()+it.byteLength);J.add(it.byteLength);let st=it.logicalStreamType.dictionaryType;ms.FSST===st?We=nt:ms.SINGLE===st||ms.SHARED===st?fe=nt:ms.NONE===st&&(tt=nt);break}}}return(He=(Ke=(function(Ne,it,nt,st,et,mt,ii){return it?new wb(Ne,nt,st,et,mt,it,ii):null})(U,We,he,ae,fe,Ae,ee!=null?ee:qe))!=null?Ke:(function(Ne,it,nt,st,et){return it?et?new fu(Ne,nt,st,it,et):new fu(Ne,nt,st,it):null})(U,fe,he,ae,ee!=null?ee:qe))!=null?He:(function(Ne,it,nt,st,et){if(!it||!nt)return null;if(st)return et?new fu(Ne,st,it,nt,et):new fu(Ne,st,it,nt);if(et&&et.size()!==it.length-1){let mt=new Int32Array(et.size()),ii=0;for(let qt=0;qt<et.size();qt++)mt[qt]=et.get(qt)?ii++:0;return new fu(Ne,mt,it,nt,et)}return et?new xb(Ne,it,nt,et):new xb(Ne,it,nt)})(U,Ue,tt,he,ee!=null?ee:qe)})(D.name,x,S,D.nullable?y-1:y,B);case 0:return(function(U,$,J,ue,ee){let ae=Pn(U,$),he=ae.numValues,fe=$.get(),Ae=qd(ee)?(function(qe,Ue,tt,Ke){let He=bb(qe,Math.ceil(Ue/8),tt),Ne=new gs(He,Ue),it=Ke.size(),nt=new gs(new Uint8Array(it),it),st=0;for(let et=0;et<Ke.size();et++){let mt=!!Ke.get(et)&&Ne.get(st++);nt.set(et,mt)}return nt.getBuffer()})(U,he,$,ee):Nd(U,he,$);$.set(fe+ae.byteLength);let We=new gs(Ae,he);return new _M(J.name,We,ee)})(x,S,D,0,W);case 6:case 5:return(function(U,$,J,ue,ee){let ae=Pn(U,$),he=pp(ae,ue,U,$),fe=ee.physicalType===5;if(he===Br.FLAT){let Ae=qd(ue)?(function(We,qe,Ue,tt,Ke){return(function(He,Ne,it,nt){switch(Ne.logicalLevelTechnique1){case ti.DELTA:return Ne.logicalLevelTechnique2===ti.RLE&&(He=tb(He,Ne.runs,Ne.numRleValues)),(function(st,et){let mt=new BigInt64Array(st.size()),ii=0;st.get(0)?(mt[0]=st.get(0)?et[0]>>BigInt(1)^-(BigInt(1)&et[0]):BigInt(0),ii=1):mt[0]=BigInt(0);let qt=1;for(;qt!=mt.length;++qt)mt[qt]=st.get(qt)?mt[qt-1]+(et[ii]>>BigInt(1)^-(BigInt(1)&et[ii++])):mt[qt-1];return mt})(nt,He);case ti.RLE:return(function(st,et,mt,ii){let qt=et;return mt?(function(Ui,sn,vr){let Zi=new BigInt64Array(Ui.size()),Ni=0;for(let _i=0;_i<vr;_i++){let nr=Number(sn[_i]),hr=sn[_i+vr];hr=hr>>BigInt(1)^-(BigInt(1)&hr);for(let Bi=Ni;Bi<Ni+nr;Bi++)Ui.get(Bi)?Zi[Bi]=hr:(Zi[Bi]=BigInt(0),Ni++);Ni+=nr}return Zi})(ii,st,qt.runs):(function(Ui,sn,vr){let Zi=new BigInt64Array(Ui.size()),Ni=0;for(let _i=0;_i<vr;_i++){let nr=Number(sn[_i]),hr=sn[_i+vr];for(let Bi=Ni;Bi<Ni+nr;Bi++)Ui.get(Bi)?Zi[Bi]=hr:(Zi[Bi]=BigInt(0),Ni++);Ni+=nr}return Zi})(ii,st,qt.runs)})(He,Ne,it,nt);case ti.NONE:return He=it?(function(st,et){let mt=new BigInt64Array(st.size()),ii=0,qt=0;for(;qt!=mt.length;++qt)if(st.get(qt)){let Ui=et[ii++];mt[qt]=Ui>>BigInt(1)^-(BigInt(1)&Ui)}else mt[qt]=BigInt(0);return mt})(nt,He):(function(st,et){let mt=new BigInt64Array(st.size()),ii=0,qt=0;for(;qt!=mt.length;++qt)mt[qt]=st.get(qt)?et[ii++]:BigInt(0);return mt})(nt,He),He;default:throw new Error("The specified Logical level technique is not supported")}})(dp(We,qe,Ue.numValues),Ue,tt,Ke)})(U,$,ae,fe,ue):sb(U,$,ae,fe);return new lb(J.name,Ae,ue)}if(he===Br.SEQUENCE){let Ae=ab(U,$,ae);return new cb(J.name,Ae[0],Ae[1],ae.numRleValues)}{let Ae=ob(U,$,ae,fe);return new vb(J.name,Ae,ue)}})(x,S,D,W,A);case 7:return(function(U,$,J,ue){let ee=Pn(U,$),ae=qd(ue)?(function(he,fe,Ae,We){let qe=fe.get(),Ue=qe+We*Float32Array.BYTES_PER_ELEMENT,tt=new Uint8Array(he.subarray(qe,Ue)).buffer,Ke=new Float32Array(tt);fe.set(Ue);let He=Ae.size(),Ne=new Float32Array(He),it=0;for(let nt=0;nt<He;nt++)Ne[nt]=Ae.get(nt)?Ke[it++]:0;return Ne})(U,$,ue,ee.numValues):(function(he,fe,Ae){let We=fe.get(),qe=We+Ae*Float32Array.BYTES_PER_ELEMENT,Ue=new Uint8Array(he.subarray(We,qe)).buffer,tt=new Float32Array(Ue);return fe.set(qe),tt})(U,$,ee.numValues);return new vM(J.name,ae,ue)})(x,S,D,W);case 8:return(function(U,$,J,ue){let ee=Pn(U,$),ae=qd(ue)?(function(he,fe,Ae,We){let qe=fe.get(),Ue=qe+We*Float64Array.BYTES_PER_ELEMENT,tt=new Uint8Array(he.subarray(qe,Ue)).buffer,Ke=new Float64Array(tt);fe.set(Ue);let He=Ae.size(),Ne=new Float64Array(He),it=0;for(let nt=0;nt<He;nt++)Ne[nt]=Ae.get(nt)?Ke[it++]:0;return Ne})(U,$,ue,ee.numValues):(function(he,fe,Ae){let We=fe.get(),qe=We+Ae*Float64Array.BYTES_PER_ELEMENT,Ue=new Uint8Array(he.subarray(We,qe)).buffer,tt=new Float64Array(Ue);return fe.set(qe),tt})(U,$,ee.numValues);return new Im(J.name,ae,ue)})(x,S,D,W);default:throw new Error(`The specified data type for the field is currently not supported: ${A}`)}})(l,r,e,h,i.scalarType,i):l!=1?null:(function(y,x,S,P){let A=null,D=null,B=null,F=null,W=!1;for(;!W;){let ue=Pn(y,x);switch(ue.physicalStreamType){case nn.LENGTH:sa.DICTIONARY===ue.logicalStreamType.lengthType?A=bl(y,x,ue):B=bl(y,x,ue);break;case nn.DATA:ms.SINGLE===ue.logicalStreamType.dictionaryType||ms.SHARED===ue.logicalStreamType.dictionaryType?(D=y.subarray(x.get(),x.get()+ue.byteLength),W=!0):F=y.subarray(x.get(),x.get()+ue.byteLength),x.add(ue.byteLength)}}let U=S.complexType.children,$=[],J=0;for(let ue of U){let ee=Yr(y,x,1)[0];if(ee==0)continue;let ae=`${S.name}${ue.name==="default"?"":":"+ue.name}`;if(ee!==2||ue.type!=="scalarField"||ue.scalarField.physicalType!==9)throw new Error("Currently only optional string fields are implemented for a struct.");let he=Pn(y,x),fe=Nd(y,he.numValues,x),Ae=Pn(y,x),We=Ae.decompressedCount!==P?Bm(y,x,Ae,!1,new gs(fe,he.numValues)):En(y,x,Ae,!1);$[J++]=F?new wb(ae,We,A,D,B,F,new gs(fe,he.numValues)):new fu(ae,We,A,D,new gs(fe,he.numValues))}return $})(r,e,i,h)}function qd(r){return r instanceof gs}function wM(r){if(r.name==="id")return!1;if(r.type==="scalarType"){let e=r.scalarType;if(e.type==="physicalType")switch(e.physicalType){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:default:return!1;case 9:return!0}else if(e.type==="logicalType")return!1}else if(r.type==="complexType"){let e=r.complexType;if(e.type==="physicalType")switch(e.physicalType){case 0:case 1:return!0;default:return!1}}return console.warn("Unexpected column type in hasStreamCount",r),!1}let SM=new TextDecoder;function Sb(r,e){let i=Yr(r,e,1)[0];if(i===0)return"";let l=e.get(),h=r.subarray(l,l+i);return e.add(i),SM.decode(h)}function Tb(r,e){let i=Yr(r,e,1)[0]>>>0,l=!!(4&i),h=!!(2&i),g=Yr(r,e,1)[0]>>>0,y={};if(1&i&&(y.nullable=!0),h){let x={};if(l?(x.type="logicalType",x.logicalType=g):(x.type="physicalType",x.physicalType=g),8&i){let S=Yr(r,e,1)[0]>>>0;x.children=new Array(S);for(let P=0;P<S;P++)x.children[P]=Tb(r,e)}y.type="complexField",y.complexField=x}else{let x={};l?(x.type="logicalType",x.logicalType=g):(x.type="physicalType",x.physicalType=g),y.type="scalarField",y.scalarField=x}return y}function TM(r,e){let i=Yr(r,e,1)[0]>>>0,l=(function(h){switch(h){case 0:case 1:case 2:case 3:{let g={};g.nullable=!!(1&h),g.columnScope=0;let y={};return y.physicalType=h>1?6:4,y.type="physicalType",g.scalarType=y,g.type="scalarType",g}case 4:{let g={nullable:!1,columnScope:0},y={type:"physicalType",physicalType:0};return g.type="complexType",g.complexType=y,g}case 30:{let g={nullable:!1,columnScope:0},y={type:"physicalType",physicalType:1};return g.type="complexType",g.complexType=y,g}default:return(function(g){let y=null;switch(g){case 10:case 11:y=0;break;case 12:case 13:y=1;break;case 14:case 15:y=2;break;case 16:case 17:y=3;break;case 18:case 19:y=4;break;case 20:case 21:y=5;break;case 22:case 23:y=6;break;case 24:case 25:y=7;break;case 26:case 27:y=8;break;case 28:case 29:y=9;break;default:return null}let x={};x.nullable=!!(1&g),x.columnScope=0;let S={type:"physicalType"};return S.physicalType=y,x.type="scalarType",x.scalarType=S,x})(h)}})(i);if(!l)throw new Error(`Unsupported column type code: ${i}`);if((function(h){return h>=10})(i)?l.name=Sb(r,e):i>=0&&i<=3?l.name="id":i===4&&(l.name="geometry"),(function(h){return h===30})(i)){let h=Yr(r,e,1)[0]>>>0,g=l.complexType;g.children=new Array(h);for(let y=0;y<h;y++)g.children[y]=Tb(r,e)}return l}function CM(r,e){let i={featureTables:[]},l={};l.name=Sb(r,e);let h=Yr(r,e,1)[0]>>>0,g=Yr(r,e,1)[0]>>>0;l.columns=new Array(g);for(let y=0;y<g;y++)l.columns[y]=TM(r,e);return i.featureTables.push(l),[i,h]}function kM(r,e,i,l,h,g,y=!1){let x=e.scalarType.physicalType,S=pp(h,g,r,i);if(x===4)switch(S){case Br.FLAT:{let P=En(r,i,h,!1);return new Mm(l,P,g)}case Br.SEQUENCE:{let P=nb(r,i,h);return new zm(l,P[0],P[1],h.numRleValues)}case Br.CONST:{let P=Rm(r,i,h,!1);return new Lm(l,P,g)}}else switch(S){case Br.FLAT:{if(y){let A=(function(D,B,F,W){let U=(function($,J,ue){let ee=new Float64Array(J);for(let ae=0;ae<J;ae++)ee[ae]=hM($,ue);return ee})(D,F.numValues,B);return(function($,J,ue){switch(J.logicalLevelTechnique1){case ti.DELTA:return J.logicalLevelTechnique2===ti.RLE&&($=ib($,J.runs,J.numRleValues)),(function(ee){ee[0]=ee[0]%2==1?(ee[0]+1)/-2:ee[0]/2;let ae=ee.length/4*4,he=1;if(ae>=4)for(;he<ae-4;he+=4){let fe=ee[he],Ae=ee[he+1],We=ee[he+2],qe=ee[he+3];ee[he]=(fe%2==1?(fe+1)/-2:fe/2)+ee[he-1],ee[he+1]=(Ae%2==1?(Ae+1)/-2:Ae/2)+ee[he],ee[he+2]=(We%2==1?(We+1)/-2:We/2)+ee[he+1],ee[he+3]=(qe%2==1?(qe+1)/-2:qe/2)+ee[he+2]}for(;he!=ee.length;++he)ee[he]=(ee[he]%2==1?(ee[he]+1)/-2:ee[he]/2)+ee[he-1]})($),$;case ti.RLE:return(function(ee,ae,he){return he?(function(fe,Ae,We){let qe=new Float64Array(We),Ue=0;for(let tt=0;tt<Ae;tt++){let Ke=fe[tt],He=fe[tt+Ae];He=He%2==1?(He+1)/-2:He/2,qe.fill(He,Ue,Ue+Ke),Ue+=Ke}return qe})(ee,ae.runs,ae.numRleValues):ib(ee,ae.runs,ae.numRleValues)})($,J,ue);case ti.NONE:return $;default:throw new Error(`The specified Logical level technique is not supported: ${J.logicalLevelTechnique1}`)}})(U,F,W)})(r,i,h,!1);return new Im(l,A,g)}let P=sb(r,i,h,!1);return new lb(l,P,g)}case Br.SEQUENCE:{let P=ab(r,i,h);return new cb(l,P[0],P[1],h.numRleValues)}case Br.CONST:{let P=ob(r,i,h,!1);return new vb(l,P,g)}}throw new Error("Vector type not supported for id column.")}class PM{constructor(e,i){var l;switch(this._featureData=e,this.properties=this._featureData.properties||{},(l=this._featureData.geometry)===null||l===void 0?void 0:l.type){case Fr.POINT:case Fr.MULTIPOINT:this.type=1;break;case Fr.LINESTRING:case Fr.MULTILINESTRING:this.type=2;break;case Fr.POLYGON:case Fr.MULTIPOLYGON:this.type=3;break;default:this.type=0}this.extent=i,this.id=Number(this._featureData.id)}loadGeometry(){let e=[];for(let i of this._featureData.geometry.coordinates){let l=[];for(let h of i)l.push(new T(h.x,h.y));e.push(l)}return e}}class EM{constructor(e){this.features=[],this.featureTable=e,this.name=e.name,this.extent=e.extent,this.version=2,this.features=e.getFeatures(),this.length=this.features.length}feature(e){return new PM(this.features[e],this.extent)}}class Cb{constructor(e){this.layers={};let i=(function(l,h,g=!0){let y=new dM(0),x=[];for(;y.get()<l.length;){let S=Yr(l,y,1)[0]>>>0,P=y.get()+S;if(P>l.length)throw new Error(`Block overruns tile: ${P} > ${l.length}`);if(Yr(l,y,1)[0]>>>0!=1){y.set(P);continue}let A=CM(l,y),D=A[1],B=A[0].featureTables[0],F=null,W=null,U=[],$=0;for(let ue of B.columns){let ee=ue.name;if(ee==="id"){let ae=null;if(ue.nullable){let fe=Pn(l,y),Ae=y.get(),We=Nd(l,fe.numValues,y);y.set(Ae+fe.byteLength),ae=new gs(We,fe.numValues)}let he=Pn(l,y);$=he.decompressedCount,F=kM(l,ue,y,ee,he,ae!=null?ae:$,g)}else if(ee==="geometry"){let ae=Yr(l,y,1)[0];if($===0){let he=y.get();$=Pn(l,y).decompressedCount,y.set(he)}W=yM(l,ae,y,$)}else{let ae=wM(ue)?Yr(l,y,1)[0]:1;if(ae===0&&ue.type==="scalarType")continue;let he=xM(l,y,ue,ae,$);if(he)if(Array.isArray(he))for(let fe of he)U.push(fe);else U.push(he)}}let J=new uM(B.name,W,F,U,D);x.push(J),y.set(P)}return x})(new Uint8Array(e));this.layers=i.reduce(((l,h)=>Object.assign(Object.assign({},l),{[h.name]:new EM(h)})),{})}}class uc{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(e){return this.minX=Math.min(this.minX,e.x),this.minY=Math.min(this.minY,e.y),this.maxX=Math.max(this.maxX,e.x),this.maxY=Math.max(this.maxY,e.y),this}expandBy(e){return this.minX-=e,this.minY-=e,this.maxX+=e,this.maxY+=e,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(e){return this.expandBy(-e)}map(e){let i=new uc;return i.extend(e(new T(this.minX,this.minY))),i.extend(e(new T(this.maxX,this.minY))),i.extend(e(new T(this.minX,this.maxY))),i.extend(e(new T(this.maxX,this.maxY))),i}static fromPoints(e){let i=new uc;for(let l of e)i.extend(l);return i}contains(e){return e.x>=this.minX&&e.x<=this.maxX&&e.y>=this.minY&&e.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(e){return!this.empty()&&!e.empty()&&e.minX>=this.minX&&e.maxX<=this.maxX&&e.minY>=this.minY&&e.maxY<=this.maxY}intersects(e){return!this.empty()&&!e.empty()&&e.minX<=this.maxX&&e.maxX>=this.minX&&e.minY<=this.maxY&&e.maxY>=this.minY}}class AM{constructor(e,i){this.feature=e,this.type=e.type,this.properties=e.tags?e.tags:{},this.extent=i,"id"in e&&(typeof e.id=="string"?this.id=parseInt(e.id,10):typeof e.id!="number"||isNaN(e.id)||(this.id=e.id))}loadGeometry(){let e=[],i=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(let l of i){let h=[];for(let g of l)h.push(new T(g[0],g[1]));e.push(h)}return e}}let Vd="_geojsonTileLayer";function MM(r,e){e.writeVarintField(15,r.version||1),e.writeStringField(1,r.name||""),e.writeVarintField(5,r.extent||4096);let i={keys:[],values:[],keycache:{},valuecache:{}};for(let g=0;g<r.length;g++)i.feature=r.feature(g),e.writeMessage(2,IM,i);let l=i.keys;for(let g of l)e.writeStringField(3,g);let h=i.values;for(let g of h)e.writeMessage(4,DM,g)}function IM(r,e){if(!r.feature)return;let i=r.feature;i.id!==void 0&&e.writeVarintField(1,i.id),e.writeMessage(2,zM,r),e.writeVarintField(3,i.type),e.writeMessage(4,LM,i)}function zM(r,e){var i;for(let l in(i=r.feature)==null?void 0:i.properties){let h=r.feature.properties[l],g=r.keycache[l];if(h===null)continue;g===void 0&&(r.keys.push(l),g=r.keys.length-1,r.keycache[l]=g),e.writeVarint(g),typeof h!="string"&&typeof h!="boolean"&&typeof h!="number"&&(h=JSON.stringify(h));let y=typeof h+":"+h,x=r.valuecache[y];x===void 0&&(r.values.push(h),x=r.values.length-1,r.valuecache[y]=x),e.writeVarint(x)}}function Um(r,e){return(e<<3)+(7&r)}function kb(r){return r<<1^r>>31}function LM(r,e){let i=r.loadGeometry(),l=r.type,h=0,g=0;for(let y of i){let x=1;l===1&&(x=y.length),e.writeVarint(Um(1,x));let S=l===3?y.length-1:y.length;for(let P=0;P<S;P++){P===1&&l!==1&&e.writeVarint(Um(2,S-1));let A=y[P].x-h,D=y[P].y-g;e.writeVarint(kb(A)),e.writeVarint(kb(D)),h+=A,g+=D}r.type===3&&e.writeVarint(Um(7,1))}}function DM(r,e){let i=typeof r;i==="string"?e.writeStringField(1,r):i==="boolean"?e.writeBooleanField(7,r):i==="number"&&(r%1!=0?e.writeDoubleField(3,r):r<0?e.writeSVarintField(6,r):e.writeVarintField(5,r))}class Pb{constructor(e,i){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Kl(Ft,16,0),this.grid3D=new Kl(Ft,16,0),this.featureIndexArray=new N,this.promoteId=i}insert(e,i,l,h,g,y){let x=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(l,h,g);let S=y?this.grid3D:this.grid;for(let P=0;P<i.length;P++){let A=i[P],D=[1/0,1/0,-1/0,-1/0];for(let B=0;B<A.length;B++){let F=A[B];D[0]=Math.min(D[0],F.x),D[1]=Math.min(D[1],F.y),D[2]=Math.max(D[2],F.x),D[3]=Math.max(D[3],F.y)}D[0]<Ft&&D[1]<Ft&&D[2]>=0&&D[3]>=0&&S.insert(x,D[0],D[1],D[2],D[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=this.encoding!=="mlt"?new hv(new ap(this.rawTileData)).layers:new Cb(this.rawTileData).layers,this.sourceLayerCoder=new Yv(this.vtLayers?Object.keys(this.vtLayers).sort():[Vd])),this.vtLayers}query(e,i,l,h){this.loadVTLayers();let g=e.params,y=Ft/e.tileSize/e.scale,x=dt(g.filter,g.globalState),S=e.queryGeometry,P=e.queryPadding*y,A=uc.fromPoints(S),D=this.grid.query(A.minX-P,A.minY-P,A.maxX+P,A.maxY+P),B=uc.fromPoints(e.cameraQueryGeometry).expandBy(P),F=this.grid3D.query(B.minX,B.minY,B.maxX,B.maxY,(($,J,ue,ee)=>(function(ae,he,fe,Ae,We){for(let Ue of ae)if(he<=Ue.x&&fe<=Ue.y&&Ae>=Ue.x&&We>=Ue.y)return!0;let qe=[new T(he,fe),new T(he,We),new T(Ae,We),new T(Ae,fe)];if(ae.length>2){for(let Ue of qe)if(iu(ae,Ue))return!0}for(let Ue=0;Ue<ae.length-1;Ue++)if(RE(ae[Ue],ae[Ue+1],qe))return!0;return!1})(e.cameraQueryGeometry,$-P,J-P,ue+P,ee+P)));for(let $ of F)D.push($);D.sort(OM);let W={},U;for(let $=0;$<D.length;$++){let J=D[$];if(J===U)continue;U=J;let ue=this.featureIndexArray.get(J),ee=null;this.loadMatchingFeature(W,ue.bucketIndex,ue.sourceLayerIndex,ue.featureIndex,x,g.layers,g.availableImages,i,l,h,((ae,he,fe)=>(ee||(ee=Io(ae)),he.queryIntersectsFeature({queryGeometry:S,feature:ae,featureState:fe,geometry:ee,zoom:this.z,transform:e.transform,pixelsToTileUnits:y,pixelPosMatrix:e.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:e.getElevation}))))}return W}loadMatchingFeature(e,i,l,h,g,y,x,S,P,A,D){let B=this.bucketLayerIDs[i];if(y&&!B.some(($=>y.has($))))return;let F=this.sourceLayerCoder.decode(l),W=this.vtLayers[F].feature(h);if(g.needGeometry){let $=zo(W,!0);if(!g.filter(new Ei(this.tileID.overscaledZ),$,this.tileID.canonical))return}else if(!g.filter(new Ei(this.tileID.overscaledZ),W))return;let U=this.getId(W,F);for(let $=0;$<B.length;$++){let J=B[$];if(y&&!y.has(J))continue;let ue=S[J];if(!ue)continue;let ee={};U&&A&&(ee=A.getState(ue.sourceLayer||Vd,U));let ae=vi({},P[J]);ae.paint=Eb(ae.paint,ue.paint,W,ee,x),ae.layout=Eb(ae.layout,ue.layout,W,ee,x);let he=!D||D(W,ue,ee);if(!he)continue;let fe=new Xv(W,this.z,this.x,this.y,U);fe.layer=ae;let Ae=e[J];Ae===void 0&&(Ae=e[J]=[]),Ae.push({featureIndex:h,feature:fe,intersectionZ:he})}}lookupSymbolFeatures(e,i,l,h,g,y,x,S){let P={};this.loadVTLayers();let A=dt(g.filterSpec,g.globalState);for(let D of e)this.loadMatchingFeature(P,l,h,D,A,y,x,S,i);return P}hasLayer(e){for(let i of this.bucketLayerIDs)for(let l of i)if(e===l)return!0;return!1}getId(e,i){var l;let h=e.id;return this.promoteId&&(h=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[i]],typeof h=="boolean"&&(h=Number(h)),h===void 0&&(!((l=e.properties)===null||l===void 0)&&l.cluster)&&this.promoteId&&(h=Number(e.properties.cluster_id))),h}}function Eb(r,e,i,l,h){return Mr(r,((g,y)=>{let x=e instanceof Hc?e.get(y):null;return x&&x.evaluate?x.evaluate(i,l,h):x}))}function OM(r,e){return e-r}function Ab(r,e,i,l,h){let g=[];for(let y=0;y<r.length;y++){let x=r[y],S;for(let P=0;P<x.length-1;P++){let A=x[P],D=x[P+1];A.x<e&&D.x<e||(A.x<e?A=new T(e,A.y+(e-A.x)/(D.x-A.x)*(D.y-A.y))._round():D.x<e&&(D=new T(e,A.y+(e-A.x)/(D.x-A.x)*(D.y-A.y))._round()),A.y<i&&D.y<i||(A.y<i?A=new T(A.x+(i-A.y)/(D.y-A.y)*(D.x-A.x),i)._round():D.y<i&&(D=new T(A.x+(i-A.y)/(D.y-A.y)*(D.x-A.x),i)._round()),A.x>=l&&D.x>=l||(A.x>=l?A=new T(l,A.y+(l-A.x)/(D.x-A.x)*(D.y-A.y))._round():D.x>=l&&(D=new T(l,A.y+(l-A.x)/(D.x-A.x)*(D.y-A.y))._round()),A.y>=h&&D.y>=h||(A.y>=h?A=new T(A.x+(h-A.y)/(D.y-A.y)*(D.x-A.x),h)._round():D.y>=h&&(D=new T(A.x+(h-A.y)/(D.y-A.y)*(D.x-A.x),h)._round()),S&&A.equals(S[S.length-1])||(S=[A],g.push(S)),S.push(D)))))}}return g}function Mb(r,e,i,l,h){switch(e){case 1:return(function(g,y,x,S){let P=[];for(let A of g)for(let D of A){let B=S===0?D.x:D.y;B>=y&&B<=x&&P.push([D])}return P})(r,i,l,h);case 2:return Ib(r,i,l,h,!1);case 3:return Ib(r,i,l,h,!0)}return[]}function RM(r,e,i,l,h){let g=l===0?BM:FM,y=[],x=[];for(let A=0;A<r.length-1;A++){let D=r[A],B=r[A+1],F=l===0?D.x:D.y,W=l===0?B.x:B.y,U=!1;F<e?W>e&&y.push(g(D,B,e)):F>i?W<i&&y.push(g(D,B,i)):y.push(D),W<e&&F>=e&&(y.push(g(D,B,e)),U=!0),W>i&&F<=i&&(y.push(g(D,B,i)),U=!0),!h&&U&&(x.push(y),y=[])}let S=r.length-1,P=l===0?r[S].x:r[S].y;return P>=e&&P<=i&&y.push(r[S]),h&&y.length>0&&!y[0].equals(y[y.length-1])&&y.push(new T(y[0].x,y[0].y)),y.length>0&&x.push(y),x}function Ib(r,e,i,l,h){let g=[];for(let y of r){let x=RM(y,e,i,l,h);x.length>0&&g.push(...x)}return g}function BM(r,e,i){return new T(i,r.y+(i-r.x)/(e.x-r.x)*(e.y-r.y))}function FM(r,e,i){return new T(r.x+(i-r.y)/(e.y-r.y)*(e.x-r.x),i)}ot("FeatureIndex",Pb,{omit:["rawTileData","sourceLayerCoder"]});class xl extends T{constructor(e,i,l,h){super(e,i),this.angle=l,h!==void 0&&(this.segment=h)}clone(){return new xl(this.x,this.y,this.angle,this.segment)}}function zb(r,e,i,l,h){if(e.segment===void 0||i===0)return!0;let g=e,y=e.segment+1,x=0;for(;x>-i/2;){if(y--,y<0)return!1;x-=r[y].dist(g),g=r[y]}x+=r[y].dist(r[y+1]),y++;let S=[],P=0;for(;x<i/2;){let A=r[y],D=r[y+1];if(!D)return!1;let B=r[y-1].angleTo(A)-A.angleTo(D);for(B=Math.abs((B+3*Math.PI)%(2*Math.PI)-Math.PI),S.push({distance:x,angleDelta:B}),P+=B;x-S[0].distance>l;)P-=S.shift().angleDelta;if(P>h)return!1;y++,x+=A.dist(D)}return!0}function Lb(r){let e=0;for(let i=0;i<r.length-1;i++)e+=r[i].dist(r[i+1]);return e}function Db(r,e,i){return r?.6*e*i:0}function Ob(r,e){return Math.max(r?r.right-r.left:0,e?e.right-e.left:0)}function jM(r,e,i,l,h,g){let y=Db(i,h,g),x=Ob(i,l)*g,S=0,P=Lb(r)/2;for(let A=0;A<r.length-1;A++){let D=r[A],B=r[A+1],F=D.dist(B);if(S+F>P){let W=(P-S)/F,U=Li.number(D.x,B.x,W),$=Li.number(D.y,B.y,W),J=new xl(U,$,B.angleTo(D),A);return J._round(),!y||zb(r,J,x,y,e)?J:void 0}S+=F}}function NM(r,e,i,l,h,g,y,x,S){let P=Db(l,g,y),A=Ob(l,h),D=A*y,B=r[0].x===0||r[0].x===S||r[0].y===0||r[0].y===S;return e-D<e/4&&(e=D+e/4),Rb(r,B?e/2*x%e:(A/2+2*g)*y*x%e,e,P,i,D,B,!1,S)}function Rb(r,e,i,l,h,g,y,x,S){let P=g/2,A=Lb(r),D=0,B=e-i,F=[];for(let W=0;W<r.length-1;W++){let U=r[W],$=r[W+1],J=U.dist($),ue=$.angleTo(U);for(;B+i<D+J;){B+=i;let ee=(B-D)/J,ae=Li.number(U.x,$.x,ee),he=Li.number(U.y,$.y,ee);if(ae>=0&&ae<S&&he>=0&&he<S&&B-P>=0&&B+P<=A){let fe=new xl(ae,he,ue,W);fe._round(),l&&!zb(r,fe,g,l,h)||F.push(fe)}}D+=J}return x||F.length||y||(F=Rb(r,D/2,i,l,h,g,y,!0,S)),F}function Bb(r,e,i,l){let h=[],g=r.image,y=g.pixelRatio,x=g.paddedRect.w-2,S=g.paddedRect.h-2,P={x1:r.left,y1:r.top,x2:r.right,y2:r.bottom},A=g.stretchX||[[0,x]],D=g.stretchY||[[0,S]],B=(Ne,it)=>Ne+it[1]-it[0],F=A.reduce(B,0),W=D.reduce(B,0),U=x-F,$=S-W,J=0,ue=F,ee=0,ae=W,he=0,fe=U,Ae=0,We=$;if(g.content&&l){let Ne=g.content,it=Ne[2]-Ne[0],nt=Ne[3]-Ne[1];(g.textFitWidth||g.textFitHeight)&&(P=zv(r)),J=yp(A,0,Ne[0]),ee=yp(D,0,Ne[1]),ue=yp(A,Ne[0],Ne[2]),ae=yp(D,Ne[1],Ne[3]),he=Ne[0]-J,Ae=Ne[1]-ee,fe=it-ue,We=nt-ae}let qe=P.x1,Ue=P.y1,tt=P.x2-qe,Ke=P.y2-Ue,He=(Ne,it,nt,st)=>{let et=_p(Ne.stretch-J,ue,tt,qe),mt=vp(Ne.fixed-he,fe,Ne.stretch,F),ii=_p(it.stretch-ee,ae,Ke,Ue),qt=vp(it.fixed-Ae,We,it.stretch,W),Ui=_p(nt.stretch-J,ue,tt,qe),sn=vp(nt.fixed-he,fe,nt.stretch,F),vr=_p(st.stretch-ee,ae,Ke,Ue),Zi=vp(st.fixed-Ae,We,st.stretch,W),Ni=new T(et,ii),_i=new T(Ui,ii),nr=new T(Ui,vr),hr=new T(et,vr),Bi=new T(mt/y,qt/y),Un=new T(sn/y,Zi/y),on=e*Math.PI/180;if(on){let jr=Math.sin(on),Ji=Math.cos(on),br=[Ji,-jr,jr,Ji];Ni._matMult(br),_i._matMult(br),hr._matMult(br),nr._matMult(br)}let Zn=Ne.stretch+Ne.fixed,Wa=it.stretch+it.fixed;return{tl:Ni,tr:_i,bl:hr,br:nr,tex:{x:g.paddedRect.x+1+Zn,y:g.paddedRect.y+1+Wa,w:nt.stretch+nt.fixed-Zn,h:st.stretch+st.fixed-Wa},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Bi,pixelOffsetBR:Un,minFontScaleX:fe/y/tt,minFontScaleY:We/y/Ke,isSDF:i}};if(l&&(g.stretchX||g.stretchY)){let Ne=Fb(A,U,F),it=Fb(D,$,W);for(let nt=0;nt<Ne.length-1;nt++){let st=Ne[nt],et=Ne[nt+1];for(let mt=0;mt<it.length-1;mt++)h.push(He(st,it[mt],et,it[mt+1]))}}else h.push(He({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:x+1},{fixed:0,stretch:S+1}));return h}function yp(r,e,i){let l=0;for(let h of r)l+=Math.max(e,Math.min(i,h[1]))-Math.max(e,Math.min(i,h[0]));return l}function Fb(r,e,i){let l=[{fixed:-1,stretch:0}];for(let[h,g]of r){let y=l[l.length-1];l.push({fixed:h-y.stretch,stretch:y.stretch}),l.push({fixed:h-y.stretch,stretch:y.stretch+(g-h)})}return l.push({fixed:e+1,stretch:i}),l}function _p(r,e,i,l){return r/e*i+l}function vp(r,e,i,l){return r-e*i/l}ot("Anchor",xl);class bp{constructor(e,i,l,h,g,y,x,S,P,A){var D;if(this.boxStartIndex=e.length,P){let B=y.top,F=y.bottom,W=y.collisionPadding;W&&(B-=W[1],F+=W[3]);let U=F-B;U>0&&(U=Math.max(10,U),this.circleDiameter=U)}else{let B=!((D=y.image)===null||D===void 0)&&D.content&&(y.image.textFitWidth||y.image.textFitHeight)?zv(y):{x1:y.left,y1:y.top,x2:y.right,y2:y.bottom};B.y1=B.y1*x-S[0],B.y2=B.y2*x+S[2],B.x1=B.x1*x-S[3],B.x2=B.x2*x+S[1];let F=y.collisionPadding;if(F&&(B.x1-=F[0]*x,B.y1-=F[1]*x,B.x2+=F[2]*x,B.y2+=F[3]*x),A){let W=new T(B.x1,B.y1),U=new T(B.x2,B.y1),$=new T(B.x1,B.y2),J=new T(B.x2,B.y2),ue=A*Math.PI/180;W._rotate(ue),U._rotate(ue),$._rotate(ue),J._rotate(ue),B.x1=Math.min(W.x,U.x,$.x,J.x),B.x2=Math.max(W.x,U.x,$.x,J.x),B.y1=Math.min(W.y,U.y,$.y,J.y),B.y2=Math.max(W.y,U.y,$.y,J.y)}e.emplaceBack(i.x,i.y,B.x1,B.y1,B.x2,B.y2,l,h,g)}this.boxEndIndex=e.length}}class qM{constructor(e=[],i=(l,h)=>l<h?-1:l>h?1:0){if(this.data=e,this.length=this.data.length,this.compare=i,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;let e=this.data[0],i=this.data.pop();return--this.length>0&&(this.data[0]=i,this._down(0)),e}peek(){return this.data[0]}_up(e){let{data:i,compare:l}=this,h=i[e];for(;e>0;){let g=e-1>>1,y=i[g];if(l(h,y)>=0)break;i[e]=y,e=g}i[e]=h}_down(e){let{data:i,compare:l}=this,h=this.length>>1,g=i[e];for(;e<h;){let y=1+(e<<1),x=y+1;if(x<this.length&&l(i[x],i[y])<0&&(y=x),l(i[y],g)>=0)break;i[e]=i[y],e=y}i[e]=g}}function VM(r,e=1,i=!1){let l=uc.fromPoints(r[0]),h=Math.min(l.width(),l.height()),g=h/2,y=new qM([],WM),{minX:x,minY:S,maxX:P,maxY:A}=l;if(h===0)return new T(x,S);for(let F=x;F<P;F+=h)for(let W=S;W<A;W+=h)y.push(new mu(F+g,W+g,g,r));let D=(function(F){let W=0,U=0,$=0,J=F[0];for(let ue=0,ee=J.length,ae=ee-1;ue<ee;ae=ue++){let he=J[ue],fe=J[ae],Ae=he.x*fe.y-fe.x*he.y;U+=(he.x+fe.x)*Ae,$+=(he.y+fe.y)*Ae,W+=3*Ae}return new mu(U/W,$/W,0,F)})(r),B=y.length;for(;y.length;){let F=y.pop();(F.d>D.d||!D.d)&&(D=F,i&&console.log("found best %d after %d probes",Math.round(1e4*F.d)/1e4,B)),F.max-D.d<=e||(g=F.h/2,y.push(new mu(F.p.x-g,F.p.y-g,g,r)),y.push(new mu(F.p.x+g,F.p.y-g,g,r)),y.push(new mu(F.p.x-g,F.p.y+g,g,r)),y.push(new mu(F.p.x+g,F.p.y+g,g,r)),B+=4)}return i&&(console.log(`num probes: ${B}`),console.log(`best distance: ${D.d}`)),D.p}function WM(r,e){return e.max-r.max}function mu(r,e,i,l){this.p=new T(r,e),this.h=i,this.d=(function(h,g){let y=!1,x=1/0;for(let S=0;S<g.length;S++){let P=g[S];for(let A=0,D=P.length,B=D-1;A<D;B=A++){let F=P[A],W=P[B];F.y>h.y!=W.y>h.y&&h.x<(W.x-F.x)*(h.y-F.y)/(W.y-F.y)+F.x&&(y=!y),x=Math.min(x,W_(h,F,W))}}return(y?1:-1)*Math.sqrt(x)})(this.p,l),this.max=this.d+this.h*Math.SQRT2}var an;f.aQ=void 0,(an=f.aQ||(f.aQ={}))[an.center=1]="center",an[an.left=2]="left",an[an.right=3]="right",an[an.top=4]="top",an[an.bottom=5]="bottom",an[an["top-left"]=6]="top-left",an[an["top-right"]=7]="top-right",an[an["bottom-left"]=8]="bottom-left",an[an["bottom-right"]=9]="bottom-right";let Zm=Number.POSITIVE_INFINITY;function jb(r,e){return e[1]!==Zm?(function(i,l,h){let g=0,y=0;switch(l=Math.abs(l),h=Math.abs(h),i){case"top-right":case"top-left":case"top":y=h-7;break;case"bottom-right":case"bottom-left":case"bottom":y=7-h}switch(i){case"top-right":case"bottom-right":case"right":g=-l;break;case"top-left":case"bottom-left":case"left":g=l}return[g,y]})(r,e[0],e[1]):(function(i,l){let h=0,g=0;l<0&&(l=0);let y=l/Math.SQRT2;switch(i){case"top-right":case"top-left":g=y-7;break;case"bottom-right":case"bottom-left":g=7-y;break;case"bottom":g=7-l;break;case"top":g=l-7}switch(i){case"top-right":case"bottom-right":h=-y;break;case"top-left":case"bottom-left":h=y;break;case"left":h=l;break;case"right":h=-l}return[h,g]})(r,e[0])}function Nb(r,e,i){var l;let h=r.layout,g=(l=h.get("text-variable-anchor-offset"))===null||l===void 0?void 0:l.evaluate(e,{},i);if(g){let x=g.values,S=[];for(let P=0;P<x.length;P+=2){let A=S[P]=x[P],D=x[P+1].map((B=>B*Rr));A.startsWith("top")?D[1]-=7:A.startsWith("bottom")&&(D[1]+=7),S[P+1]=D}return new Tr(S)}let y=h.get("text-variable-anchor");if(y){let x;x=r._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[h.get("text-radial-offset").evaluate(e,{},i)*Rr,Zm]:h.get("text-offset").evaluate(e,{},i).map((P=>P*Rr));let S=[];for(let P of y)S.push(P,jb(P,x));return new Tr(S)}return null}function $m(r){switch(r){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function GM(r,e,i,l,h,g,y,x,S,P,A,D){let B=g.textMaxSize.evaluate(e,{});B===void 0&&(B=y);let F=r.layers[0].layout,W=F.get("icon-offset").evaluate(e,{},A),U=Vb(i.horizontal),$=y/24,J=r.tilePixelRatio*$,ue=r.tilePixelRatio*B/24,ee=r.tilePixelRatio*x,ae=r.tilePixelRatio*F.get("symbol-spacing"),he=F.get("text-padding")*r.tilePixelRatio,fe=(function(nt,st,et,mt=1){let ii=nt.get("icon-padding").evaluate(st,{},et),qt=ii&&ii.values;return[qt[0]*mt,qt[1]*mt,qt[2]*mt,qt[3]*mt]})(F,e,A,r.tilePixelRatio),Ae=F.get("text-max-angle")/180*Math.PI,We=F.get("text-rotation-alignment")!=="viewport"&&F.get("symbol-placement")!=="point",qe=F.get("icon-rotation-alignment")==="map"&&F.get("symbol-placement")!=="point",Ue=F.get("symbol-placement"),tt=ae/2,Ke=F.get("icon-text-fit"),He;l&&Ke!=="none"&&(r.allowVerticalPlacement&&i.vertical&&(He=Lv(l,i.vertical,Ke,F.get("icon-text-fit-padding"),W,$)),U&&(l=Lv(l,U,Ke,F.get("icon-text-fit-padding"),W,$)));let Ne=A?D.line.getGranularityForZoomLevel(A.z):1,it=(nt,st)=>{st.x<0||st.x>=Ft||st.y<0||st.y>=Ft||(function(et,mt,ii,qt,Ui,sn,vr,Zi,Ni,_i,nr,hr,Bi,Un,on,Zn,Wa,jr,Ji,br,ar,Nr,Oo,ys,Ud){let wl=et.addToLineVertexArray(mt,ii),dc,gu,yu,_u,Zb=0,$b=0,Hb=0,Yb=0,tg=-1,ig=-1,Ro={},Xb=ji("");if(et.allowVerticalPlacement&&qt.vertical){let bn=Zi.layout.get("text-rotate").evaluate(ar,{},ys)+90;yu=new bp(Ni,mt,_i,nr,hr,qt.vertical,Bi,Un,on,bn),vr&&(_u=new bp(Ni,mt,_i,nr,hr,vr,Wa,jr,on,bn))}if(Ui){let bn=Zi.layout.get("icon-rotate").evaluate(ar,{}),ka=Zi.layout.get("icon-text-fit")!=="none",hc=Bb(Ui,bn,Oo,ka),vs=vr?Bb(vr,bn,Oo,ka):void 0;gu=new bp(Ni,mt,_i,nr,hr,Ui,Wa,jr,!1,bn),Zb=4*hc.length;let pc=et.iconSizeData,Xs=null;pc.kind==="source"?(Xs=[Lo*Zi.layout.get("icon-size").evaluate(ar,{})],Xs[0]>_l&&pr(`${et.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):pc.kind==="composite"&&(Xs=[Lo*Nr.compositeIconSizes[0].evaluate(ar,{},ys),Lo*Nr.compositeIconSizes[1].evaluate(ar,{},ys)],(Xs[0]>_l||Xs[1]>_l)&&pr(`${et.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),et.addSymbols(et.icon,hc,Xs,br,Ji,ar,f.aA.none,mt,wl.lineStartIndex,wl.lineLength,-1,ys),tg=et.icon.placedSymbolArray.length-1,vs&&($b=4*vs.length,et.addSymbols(et.icon,vs,Xs,br,Ji,ar,f.aA.vertical,mt,wl.lineStartIndex,wl.lineLength,-1,ys),ig=et.icon.placedSymbolArray.length-1)}let Kb=Object.keys(qt.horizontal);for(let bn of Kb){let ka=qt.horizontal[bn];if(!dc){Xb=ji(ka.text);let vs=Zi.layout.get("text-rotate").evaluate(ar,{},ys);dc=new bp(Ni,mt,_i,nr,hr,ka,Bi,Un,on,vs)}let hc=ka.positionedLines.length===1;if(Hb+=qb(et,mt,ka,sn,Zi,on,ar,Zn,wl,qt.vertical?f.aA.horizontal:f.aA.horizontalOnly,hc?Kb:[bn],Ro,tg,Nr,ys),hc)break}qt.vertical&&(Yb+=qb(et,mt,qt.vertical,sn,Zi,on,ar,Zn,wl,f.aA.vertical,["vertical"],Ro,ig,Nr,ys));let $M=dc?dc.boxStartIndex:et.collisionBoxArray.length,HM=dc?dc.boxEndIndex:et.collisionBoxArray.length,YM=yu?yu.boxStartIndex:et.collisionBoxArray.length,XM=yu?yu.boxEndIndex:et.collisionBoxArray.length,KM=gu?gu.boxStartIndex:et.collisionBoxArray.length,QM=gu?gu.boxEndIndex:et.collisionBoxArray.length,JM=_u?_u.boxStartIndex:et.collisionBoxArray.length,eI=_u?_u.boxEndIndex:et.collisionBoxArray.length,_s=-1,wp=(bn,ka)=>bn&&bn.circleDiameter?Math.max(bn.circleDiameter,ka):ka;_s=wp(dc,_s),_s=wp(yu,_s),_s=wp(gu,_s),_s=wp(_u,_s);let Qb=_s>-1?1:0;Qb&&(_s*=Ud/Rr),et.glyphOffsetArray.length>=cu.MAX_GLYPHS&&pr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ar.sortKey!==void 0&&et.addToSortKeyRanges(et.symbolInstances.length,ar.sortKey);let tI=Nb(Zi,ar,ys),[iI,rI]=(function(bn,ka){let hc=bn.length,vs=ka==null?void 0:ka.values;if((vs==null?void 0:vs.length)>0)for(let pc=0;pc<vs.length;pc+=2){let Xs=vs[pc+1];bn.emplaceBack(f.aQ[vs[pc]],Xs[0],Xs[1])}return[hc,bn.length]})(et.textAnchorOffsets,tI);et.symbolInstances.emplaceBack(mt.x,mt.y,Ro.right>=0?Ro.right:-1,Ro.center>=0?Ro.center:-1,Ro.left>=0?Ro.left:-1,Ro.vertical||-1,tg,ig,Xb,$M,HM,YM,XM,KM,QM,JM,eI,_i,Hb,Yb,Zb,$b,Qb,0,Bi,_s,iI,rI)})(r,st,nt,i,l,h,He,r.layers[0],r.collisionBoxArray,e.index,e.sourceLayerIndex,r.index,J,[he,he,he,he],We,S,ee,fe,qe,W,e,g,P,A,y)};if(Ue==="line")for(let nt of Ab(e.geometry,0,0,Ft,Ft)){let st=oc(nt,Ne),et=NM(st,ae,Ae,i.vertical||U,l,24,ue,r.overscaling,Ft);for(let mt of et)U&&UM(r,U.text,tt,mt)||it(st,mt)}else if(Ue==="line-center"){for(let nt of e.geometry)if(nt.length>1){let st=oc(nt,Ne),et=jM(st,Ae,i.vertical||U,l,24,ue);et&&it(st,et)}}else if(e.type==="Polygon")for(let nt of Rs(e.geometry,0)){let st=VM(nt,16);it(oc(nt[0],Ne,!0),new xl(st.x,st.y,0))}else if(e.type==="LineString")for(let nt of e.geometry){let st=oc(nt,Ne);it(st,new xl(st[0].x,st[0].y,0))}else if(e.type==="Point")for(let nt of e.geometry)for(let st of nt)it([st],new xl(st.x,st.y,0))}function qb(r,e,i,l,h,g,y,x,S,P,A,D,B,F,W){let U=(function(ue,ee,ae,he,fe,Ae,We,qe){let Ue=he.layout.get("text-rotate").evaluate(Ae,{})*Math.PI/180,tt=[];for(let Ke of ee.positionedLines)for(let He of Ke.positionedGlyphs){if(!He.rect)continue;let Ne=He.rect||{},it=4,nt=!0,st=1,et=0,mt=(fe||qe)&&He.vertical,ii=He.metrics.advance*He.scale/2;if(qe&&ee.verticalizable&&(et=Ke.lineOffset/2-(He.imageName?-(Rr-He.metrics.width*He.scale)/2:(He.scale-1)*Rr)),He.imageName){let jr=We[He.imageName];nt=jr.sdf,st=jr.pixelRatio,it=1/st}let qt=fe?[He.x+ii,He.y]:[0,0],Ui=fe?[0,0]:[He.x+ii+ae[0],He.y+ae[1]-et],sn=[0,0];mt&&(sn=Ui,Ui=[0,0]);let vr=He.metrics.isDoubleResolution?2:1,Zi=(He.metrics.left-it)*He.scale-ii+Ui[0],Ni=(-He.metrics.top-it)*He.scale+Ui[1],_i=Zi+Ne.w/vr*He.scale/st,nr=Ni+Ne.h/vr*He.scale/st,hr=new T(Zi,Ni),Bi=new T(_i,Ni),Un=new T(Zi,nr),on=new T(_i,nr);if(mt){let jr=new T(-ii,ii- -17),Ji=-Math.PI/2,br=12-ii,ar=new T(22-br,-(He.imageName?br:0)),Nr=new T(...sn);hr._rotateAround(Ji,jr)._add(ar)._add(Nr),Bi._rotateAround(Ji,jr)._add(ar)._add(Nr),Un._rotateAround(Ji,jr)._add(ar)._add(Nr),on._rotateAround(Ji,jr)._add(ar)._add(Nr)}if(Ue){let jr=Math.sin(Ue),Ji=Math.cos(Ue),br=[Ji,-jr,jr,Ji];hr._matMult(br),Bi._matMult(br),Un._matMult(br),on._matMult(br)}let Zn=new T(0,0),Wa=new T(0,0);tt.push({tl:hr,tr:Bi,bl:Un,br:on,tex:Ne,writingMode:ee.writingMode,glyphOffset:qt,sectionIndex:He.sectionIndex,isSDF:nt,pixelOffsetTL:Zn,pixelOffsetBR:Wa,minFontScaleX:0,minFontScaleY:0})}return tt})(0,i,x,h,g,y,l,r.allowVerticalPlacement),$=r.textSizeData,J=null;$.kind==="source"?(J=[Lo*h.layout.get("text-size").evaluate(y,{})],J[0]>_l&&pr(`${r.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):$.kind==="composite"&&(J=[Lo*F.compositeTextSizes[0].evaluate(y,{},W),Lo*F.compositeTextSizes[1].evaluate(y,{},W)],(J[0]>_l||J[1]>_l)&&pr(`${r.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),r.addSymbols(r.text,U,J,x,g,y,P,e,S.lineStartIndex,S.lineLength,B,W);for(let ue of A)D[ue]=r.text.placedSymbolArray.length-1;return 4*U.length}function Vb(r){for(let e in r)return r[e];return null}function UM(r,e,i,l){let h=r.compareText;if(e in h){let g=h[e];for(let y=g.length-1;y>=0;y--)if(l.dist(g[y])<i)return!0}else h[e]=[];return h[e].push(l),!1}let Wb=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Hm{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");let[i,l]=new Uint8Array(e,0,2);if(i!==219)throw new Error("Data does not appear to be in a KDBush format.");let h=l>>4;if(h!==1)throw new Error(`Got v${h} data when expected v1.`);let g=Wb[15&l];if(!g)throw new Error("Unrecognized array type.");let[y]=new Uint16Array(e,2,1),[x]=new Uint32Array(e,4,1);return new Hm(x,y,g,e)}constructor(e,i=64,l=Float64Array,h){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+i,2),65535),this.ArrayType=l,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;let g=Wb.indexOf(this.ArrayType),y=2*e*this.ArrayType.BYTES_PER_ELEMENT,x=e*this.IndexArrayType.BYTES_PER_ELEMENT,S=(8-x%8)%8;if(g<0)throw new Error(`Unexpected typed array class: ${l}.`);h&&h instanceof ArrayBuffer?(this.data=h,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+x+S,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+y+x+S),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+x+S,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+g]),new Uint16Array(this.data,2,1)[0]=i,new Uint32Array(this.data,4,1)[0]=e)}add(e,i){let l=this._pos>>1;return this.ids[l]=l,this.coords[this._pos++]=e,this.coords[this._pos++]=i,l}finish(){let e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return Ym(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,i,l,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:g,coords:y,nodeSize:x}=this,S=[0,g.length-1,0],P=[];for(;S.length;){let A=S.pop()||0,D=S.pop()||0,B=S.pop()||0;if(D-B<=x){for(let $=B;$<=D;$++){let J=y[2*$],ue=y[2*$+1];J>=e&&J<=l&&ue>=i&&ue<=h&&P.push(g[$])}continue}let F=B+D>>1,W=y[2*F],U=y[2*F+1];W>=e&&W<=l&&U>=i&&U<=h&&P.push(g[F]),(A===0?e<=W:i<=U)&&(S.push(B),S.push(F-1),S.push(1-A)),(A===0?l>=W:h>=U)&&(S.push(F+1),S.push(D),S.push(1-A))}return P}within(e,i,l){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:h,coords:g,nodeSize:y}=this,x=[0,h.length-1,0],S=[],P=l*l;for(;x.length;){let A=x.pop()||0,D=x.pop()||0,B=x.pop()||0;if(D-B<=y){for(let $=B;$<=D;$++)Ub(g[2*$],g[2*$+1],e,i)<=P&&S.push(h[$]);continue}let F=B+D>>1,W=g[2*F],U=g[2*F+1];Ub(W,U,e,i)<=P&&S.push(h[F]),(A===0?e-l<=W:i-l<=U)&&(x.push(B),x.push(F-1),x.push(1-A)),(A===0?e+l>=W:i+l>=U)&&(x.push(F+1),x.push(D),x.push(1-A))}return S}}function Ym(r,e,i,l,h,g){if(h-l<=i)return;let y=l+h>>1;Gb(r,e,y,l,h,g),Ym(r,e,i,l,y-1,1-g),Ym(r,e,i,y+1,h,1-g)}function Gb(r,e,i,l,h,g){for(;h>l;){if(h-l>600){let P=h-l+1,A=i-l+1,D=Math.log(P),B=.5*Math.exp(2*D/3),F=.5*Math.sqrt(D*B*(P-B)/P)*(A-P/2<0?-1:1);Gb(r,e,i,Math.max(l,Math.floor(i-A*B/P+F)),Math.min(h,Math.floor(i+(P-A)*B/P+F)),g)}let y=e[2*i+g],x=l,S=h;for(Wd(r,e,l,i),e[2*h+g]>y&&Wd(r,e,l,h);x<S;){for(Wd(r,e,x,S),x++,S--;e[2*x+g]<y;)x++;for(;e[2*S+g]>y;)S--}e[2*l+g]===y?Wd(r,e,l,S):(S++,Wd(r,e,S,h)),S<=i&&(l=S+1),i<=S&&(h=S-1)}}function Wd(r,e,i,l){Xm(r,i,l),Xm(e,2*i,2*l),Xm(e,2*i+1,2*l+1)}function Xm(r,e,i){let l=r[e];r[e]=r[i],r[i]=l}function Ub(r,e,i,l){let h=r-i,g=e-l;return h*h+g*g}var Km;f.cI=void 0,(Km=f.cI||(f.cI={})).create="create",Km.load="load",Km.fullLoad="fullLoad";let xp=null,Gd=[],Qm=1e3/60,Jm="loadTime",eg="fullLoadTime",ZM={mark(r){performance.mark(r)},frame(r){let e=r;xp!=null&&Gd.push(e-xp),xp=e},clearMetrics(){xp=null,Gd=[],performance.clearMeasures(Jm),performance.clearMeasures(eg);for(let r in f.cI)performance.clearMarks(f.cI[r])},getPerformanceMetrics(){performance.measure(Jm,f.cI.create,f.cI.load),performance.measure(eg,f.cI.create,f.cI.fullLoad);let r=performance.getEntriesByName(Jm)[0].duration,e=performance.getEntriesByName(eg)[0].duration,i=Gd.length,l=1/(Gd.reduce(((g,y)=>g+y),0)/i/1e3),h=Gd.filter((g=>g>Qm)).reduce(((g,y)=>g+(y-Qm)/Qm),0);return{loadTime:r,fullLoadTime:e,fps:l,percentDroppedFrames:h/(i+h)*100,totalFrames:i}}};f.$=H,f.A=ye,f.B=sd,f.C=hl,f.D=ft,f.E=oi,f.F=function([r,e,i]){return e+=90,e*=Math.PI/180,i*=Math.PI/180,{x:r*Math.cos(e)*Math.sin(i),y:r*Math.sin(e)*Math.sin(i),z:r*Math.cos(i)}},f.G=Li,f.H=Ei,f.I=xm,f.J=Yl,f.K=function(r){if(Oi==null){let e=r.navigator?r.navigator.userAgent:null;Oi=!!r.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return Oi},f.L=class{constructor(r,e){this.target=r,this.mapId=e,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new oM((()=>this.process())),this.subscription=Ka(this.target,"message",(i=>this.receive(i)),!1),this.globalScope=Ln(self)?r:window}registerMessageHandler(r,e){this.messageHandlers[r]=e}unregisterMessageHandler(r){delete this.messageHandlers[r]}sendAsync(r,e){return new Promise(((i,l)=>{let h=Math.round(1e18*Math.random()).toString(36).substring(0,10),g=e?Ka(e.signal,"abort",(()=>{g==null||g.unsubscribe(),delete this.resolveRejects[h];let S={id:h,type:"<cancel>",origin:location.origin,targetMapId:r.targetMapId,sourceMapId:this.mapId};this.target.postMessage(S)}),lM):null;this.resolveRejects[h]={resolve:S=>{g==null||g.unsubscribe(),i(S)},reject:S=>{g==null||g.unsubscribe(),l(S)}};let y=[],x=Object.assign(Object.assign({},r),{id:h,sourceMapId:this.mapId,origin:location.origin,data:So(r.data,y)});this.target.postMessage(x,{transfer:y})}))}receive(r){let e=r.data,i=e.id;if(!(e.origin!=="file://"&&location.origin!=="file://"&&e.origin!=="resource://android"&&location.origin!=="resource://android"&&e.origin!==location.origin||e.targetMapId&&this.mapId!==e.targetMapId)){if(e.type==="<cancel>"){delete this.tasks[i];let l=this.abortControllers[i];return delete this.abortControllers[i],void(l&&l.abort())}if(Ln(self)||e.mustQueue)return this.tasks[i]=e,this.taskQueue.push(i),void this.invoker.trigger();this.processTask(i,e)}}process(){if(this.taskQueue.length===0)return;let r=this.taskQueue.shift(),e=this.tasks[r];delete this.tasks[r],this.taskQueue.length>0&&this.invoker.trigger(),e&&this.processTask(r,e)}processTask(r,e){return a(this,void 0,void 0,(function*(){if(e.type==="<response>"){let h=this.resolveRejects[r];return delete this.resolveRejects[r],h?void(e.error?h.reject(Jl(e.error)):h.resolve(Jl(e.data))):void 0}if(!this.messageHandlers[e.type])return void this.completeTask(r,new Error(`Could not find a registered handler for ${e.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));let i=Jl(e.data),l=new AbortController;this.abortControllers[r]=l;try{let h=yield this.messageHandlers[e.type](e.sourceMapId,i,l);this.completeTask(r,null,h)}catch(h){this.completeTask(r,h)}}))}completeTask(r,e,i){let l=[];delete this.abortControllers[r];let h={id:r,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:e?So(e):null,data:So(i,l)};this.target.postMessage(h,{transfer:l})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},f.M=ke,f.N=function(){var r=new ye(16);return ye!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r},f.O=function(r,e,i){var l,h,g,y,x,S,P,A,D,B,F,W,U=i[0],$=i[1],J=i[2];return e===r?(r[12]=e[0]*U+e[4]*$+e[8]*J+e[12],r[13]=e[1]*U+e[5]*$+e[9]*J+e[13],r[14]=e[2]*U+e[6]*$+e[10]*J+e[14],r[15]=e[3]*U+e[7]*$+e[11]*J+e[15]):(h=e[1],g=e[2],y=e[3],x=e[4],S=e[5],P=e[6],A=e[7],D=e[8],B=e[9],F=e[10],W=e[11],r[0]=l=e[0],r[1]=h,r[2]=g,r[3]=y,r[4]=x,r[5]=S,r[6]=P,r[7]=A,r[8]=D,r[9]=B,r[10]=F,r[11]=W,r[12]=l*U+x*$+D*J+e[12],r[13]=h*U+S*$+B*J+e[13],r[14]=g*U+P*$+F*J+e[14],r[15]=y*U+A*$+W*J+e[15]),r},f.P=T,f.Q=function(r,e,i){var l=i[0],h=i[1],g=i[2];return r[0]=e[0]*l,r[1]=e[1]*l,r[2]=e[2]*l,r[3]=e[3]*l,r[4]=e[4]*h,r[5]=e[5]*h,r[6]=e[6]*h,r[7]=e[7]*h,r[8]=e[8]*g,r[9]=e[9]*g,r[10]=e[10]*g,r[11]=e[11]*g,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r},f.R=Gn,f.S=function(r,e,i){var l=e[0],h=e[1],g=e[2],y=e[3],x=e[4],S=e[5],P=e[6],A=e[7],D=e[8],B=e[9],F=e[10],W=e[11],U=e[12],$=e[13],J=e[14],ue=e[15],ee=i[0],ae=i[1],he=i[2],fe=i[3];return r[0]=ee*l+ae*x+he*D+fe*U,r[1]=ee*h+ae*S+he*B+fe*$,r[2]=ee*g+ae*P+he*F+fe*J,r[3]=ee*y+ae*A+he*W+fe*ue,r[4]=(ee=i[4])*l+(ae=i[5])*x+(he=i[6])*D+(fe=i[7])*U,r[5]=ee*h+ae*S+he*B+fe*$,r[6]=ee*g+ae*P+he*F+fe*J,r[7]=ee*y+ae*A+he*W+fe*ue,r[8]=(ee=i[8])*l+(ae=i[9])*x+(he=i[10])*D+(fe=i[11])*U,r[9]=ee*h+ae*S+he*B+fe*$,r[10]=ee*g+ae*P+he*F+fe*J,r[11]=ee*y+ae*A+he*W+fe*ue,r[12]=(ee=i[12])*l+(ae=i[13])*x+(he=i[14])*D+(fe=i[15])*U,r[13]=ee*h+ae*S+he*B+fe*$,r[14]=ee*g+ae*P+he*F+fe*J,r[15]=ee*y+ae*A+he*W+fe*ue,r},f.T=hm,f.U=function(r,e){let i={};for(let l=0;l<e.length;l++){let h=e[l];h in r&&(i[h]=r[h])}return i},f.V=vl,f.W=sr,f.X=Vv,f.Y=qv,f.Z=_e,f._=a,f.a=ne,f.a$=Uv,f.a0=Se,f.a1=Xa,f.a2=Ta,f.a3=Gv,f.a4=cp,f.a5=Ft,f.a6=function(r,e,i){if(!r)return e||{};if(!e)return r||{};let l=Hv(r),h=Hv(e);(function(y,x){x.removeAll&&(y.add.clear(),y.update.clear(),y.remove.clear(),x.remove.clear());for(let S of x.remove)y.add.delete(S),y.update.delete(S);for(let[S,P]of x.update){let A=y.update.get(S);A&&(x.update.set(S,cM(A,P)),y.update.delete(S))}})(l,h);let g={};if((l.removeAll||h.removeAll)&&(g.removeAll=!0),g.remove=new Set([...l.remove,...h.remove]),g.add=new Map([...l.add,...h.add]),g.update=new Map([...l.update,...h.update]),g.remove.size&&g.add.size)for(let y of g.add.keys())g.remove.delete(y);return(function(y){let x={};return y.removeAll&&(x.removeAll=y.removeAll),y.remove&&(x.remove=Array.from(y.remove)),y.add&&(x.add=Array.from(y.add.values())),y.update&&(x.update=Array.from(y.update.values())),x})(g)},f.a7=function(r,e){if(r==null||r.type==null)return!0;if(r.type==="Feature")return jd(r,e)!=null;if(r.type==="FeatureCollection"){let i=new Set;for(let l of r.features){let h=jd(l,e);if(h==null||i.has(h))return!1;i.add(h)}return!0}return!1},f.a8=function(r,e){let i=new Map;if(!(r==null||r.type==null))if(r.type==="Feature")i.set(jd(r,e),r);else for(let l of r.features)i.set(jd(l,e),l);return i},f.a9=function(r,e,i){var l,h;if(e.removeAll)r.clear();else if(e.remove)for(let g of e.remove)r.delete(g);if(e.add)for(let g of e.add){let y=jd(g,i);y!=null&&r.set(y,g)}if(e.update)for(let g of e.update){let y=r.get(g.id);if(!y)continue;let x=!!g.newGeometry,S=g.removeAllProperties||((l=g.removeProperties)===null||l===void 0?void 0:l.length)>0||((h=g.addOrUpdateProperties)===null||h===void 0?void 0:h.length)>0;if((x||S)&&(y=Object.assign({},y),r.set(g.id,y),x&&(y.geometry=g.newGeometry),S)){if(y.properties=g.removeAllProperties?{}:Object.assign({},y.properties||{}),g.removeProperties)for(let P of g.removeProperties)delete y.properties[P];if(g.addOrUpdateProperties)for(let{key:P,value:A}of g.addOrUpdateProperties)y.properties[P]=A}}},f.aB=function(r,{uSize:e,uSizeT:i},{lowerSize:l,upperSize:h}){return r.kind==="source"?l/Lo:r.kind==="composite"?Li.number(l/Lo,h/Lo,i):e},f.aC=function(r,e){var i=e[0],l=e[1],h=e[2],g=e[3],y=e[4],x=e[5],S=e[6],P=e[7],A=e[8],D=e[9],B=e[10],F=e[11],W=e[12],U=e[13],$=e[14],J=e[15],ue=i*x-l*y,ee=i*S-h*y,ae=i*P-g*y,he=l*S-h*x,fe=l*P-g*x,Ae=h*P-g*S,We=A*U-D*W,qe=A*$-B*W,Ue=A*J-F*W,tt=D*$-B*U,Ke=D*J-F*U,He=B*J-F*$,Ne=ue*He-ee*Ke+ae*tt+he*Ue-fe*qe+Ae*We;return Ne?(r[0]=(x*He-S*Ke+P*tt)*(Ne=1/Ne),r[1]=(h*Ke-l*He-g*tt)*Ne,r[2]=(U*Ae-$*fe+J*he)*Ne,r[3]=(B*fe-D*Ae-F*he)*Ne,r[4]=(S*Ue-y*He-P*qe)*Ne,r[5]=(i*He-h*Ue+g*qe)*Ne,r[6]=($*ae-W*Ae-J*ee)*Ne,r[7]=(A*Ae-B*ae+F*ee)*Ne,r[8]=(y*Ke-x*Ue+P*We)*Ne,r[9]=(l*Ue-i*Ke-g*We)*Ne,r[10]=(W*fe-U*ae+J*ue)*Ne,r[11]=(D*ae-A*fe-F*ue)*Ne,r[12]=(x*qe-y*tt-S*We)*Ne,r[13]=(i*tt-l*qe+h*We)*Ne,r[14]=(U*ee-W*he-$*ue)*Ne,r[15]=(A*he-D*ee+B*ue)*Ne,r):null},f.aD=Ut,f.aE=function(r){var e=r[0],i=r[1];return Math.sqrt(e*e+i*i)},f.aF=function(r){return r[0]=0,r[1]=0,r},f.aG=function(r,e,i){return r[0]=e[0]*i,r[1]=e[1]*i,r},f.aH=Tm,f.aI=ri,f.aJ=function(r,e,i,l){let h=e.y-r.y,g=e.x-r.x,y=l.y-i.y,x=l.x-i.x,S=y*g-x*h;if(S===0)return null;let P=(x*(r.y-i.y)-y*(r.x-i.x))/S;return new T(r.x+P*g,r.y+P*h)},f.aK=Ab,f.aL=Td,f.aM=function(r){let e=1/0,i=1/0,l=-1/0,h=-1/0;for(let g of r)e=Math.min(e,g.x),i=Math.min(i,g.y),l=Math.max(l,g.x),h=Math.max(h,g.y);return[e,i,l,h]},f.aN=Rr,f.aO=_t,f.aP=function(r,e,i,l,h=!1){if(!i[0]&&!i[1])return[0,0];let g=h?l==="map"?-r.bearingInRadians:0:l==="viewport"?r.bearingInRadians:0;if(g){let y=Math.sin(g),x=Math.cos(g);i=[i[0]*x-i[1]*y,i[0]*y+i[1]*x]}return[h?i[0]:_t(e,i[0],r.zoom),h?i[1]:_t(e,i[1],r.zoom)]},f.aR=Sm,f.aS=$m,f.aT=wm,f.aU=Hm,f.aV=cr,f.aW=rp,f.aX=j,f.aY=$e,f.aZ=Re,f.a_=Xr,f.aa=Vd,f.ab=Fd,f.ac=uc,f.ad=25,f.ae=Am,f.af=r=>{let e=window.document.createElement("video");return e.muted=!0,new Promise((i=>{e.onloadstart=()=>{i(e)};for(let l of r){let h=window.document.createElement("source");Ge(l)||(e.crossOrigin="Anonymous"),h.src=l,e.appendChild(h)}}))},f.ag=Be,f.ah=function(){return cn++},f.ai=t,f.aj=cu,f.ak=dt,f.al=zo,f.am=Xv,f.an=function(r){let e={};if(r.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((i,l,h,g)=>{let y=h||g;return e[l]=!y||y.toLowerCase(),""})),e["max-age"]){let i=parseInt(e["max-age"],10);isNaN(i)?delete e["max-age"]:e["max-age"]=i}return e},f.ao=St,f.ap=85.051129,f.aq=Ss,f.ar=function(r){return Math.pow(2,r)},f.as=Ye,f.at=Wv,f.au=function(r){return Math.log(r)/Math.LN2},f.av=function(r){var e=r[0],i=r[1];return e*e+i*i},f.aw=function(r){if(!r.length)return new Set;let e=Math.max(...r.map((S=>S.canonical.z))),i=1/0,l=-1/0,h=1/0,g=-1/0,y=[];for(let S of r){let{x:P,y:A,z:D}=S.canonical,B=Math.pow(2,e-D),F=P*B,W=A*B;y.push({id:S,x:F,y:W}),F<i&&(i=F),F>l&&(l=F),W<h&&(h=W),W>g&&(g=W)}let x=new Set;for(let S of y)S.x!==i&&S.x!==l&&S.y!==h&&S.y!==g||x.add(S.id);return x},f.ax=function(r,e){let i=Math.abs(2*r.wrap)-+(r.wrap<0),l=Math.abs(2*e.wrap)-+(e.wrap<0);return r.overscaledZ-e.overscaledZ||l-i||e.canonical.y-r.canonical.y||e.canonical.x-r.canonical.x},f.ay=class{constructor(r,e){this.max=r,this.onRemove=e,this.reset()}reset(){for(let r in this.data)for(let e of this.data[r])e.timeout&&clearTimeout(e.timeout),this.onRemove(e.value);return this.data={},this.order=[],this}add(r,e,i){let l=r.wrapped().key;this.data[l]===void 0&&(this.data[l]=[]);let h={value:e,timeout:void 0};if(i!==void 0&&(h.timeout=setTimeout((()=>{this.remove(r,h)}),i)),this.data[l].push(h),this.order.push(l),this.order.length>this.max){let g=this._getAndRemoveByKey(this.order[0]);g&&this.onRemove(g)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){let e=this.data[r].shift();return e.timeout&&clearTimeout(e.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),e.value}getByKey(r){let e=this.data[r];return e?e[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,e){if(!this.has(r))return this;let i=r.wrapped().key,l=e===void 0?0:this.data[i].indexOf(e),h=this.data[i][l];return this.data[i].splice(l,1),h.timeout&&clearTimeout(h.timeout),this.data[i].length===0&&delete this.data[i],this.onRemove(h.value),this.order.splice(this.order.indexOf(i),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){let e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}filter(r){let e=[];for(let i in this.data)for(let l of this.data[i])r(l.value)||e.push(l);for(let i of e)this.remove(i.value.tileID,i)}},f.az=function(r,e){let i=0,l=0;if(r.kind==="constant")l=r.layoutSize;else if(r.kind!=="source"){let{interpolationType:h,minZoom:g,maxZoom:y}=r,x=h?St(Xi.interpolationFactor(h,e,g,y),0,1):0;r.kind==="camera"?l=Li.number(r.minSize,r.maxSize,x):i=x}return{uSizeT:i,uSize:l}},f.b=Dn,f.b$=class extends vn{constructor(r,e){super(r,e),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1i(this.location,r))}},f.b0=Gt,f.b1=Wt,f.b2=function(r){var e=new ye(3);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e},f.b3=function(r,e,i){return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],r},f.b4=function(r,e){var i=e[0],l=e[1],h=e[2],g=i*i+l*l+h*h;return g>0&&(g=1/Math.sqrt(g)),r[0]=e[0]*g,r[1]=e[1]*g,r[2]=e[2]*g,r},f.b5=wt,f.b6=function(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]},f.b7=function(r,e,i){return r[0]=e[0]*i[0],r[1]=e[1]*i[1],r[2]=e[2]*i[2],r[3]=e[3]*i[3],r},f.b8=Ct,f.b9=function(r,e,i){let l=e[0]*i[0]+e[1]*i[1]+e[2]*i[2];return l===0?null:(-(r[0]*i[0]+r[1]*i[1]+r[2]*i[2])-i[3])/l},f.bA=function(){return new Float64Array(3)},f.bB=function(r,e,i,l){return r[0]=e[0]+i[0]*l,r[1]=e[1]+i[1]*l,r[2]=e[2]+i[2]*l,r},f.bC=ni,f.bD=function(r,e,i){var l=i[0],h=i[1],g=i[2],y=i[3],x=e[0],S=e[1],P=e[2],A=h*P-g*S,D=g*x-l*P,B=l*S-h*x;return r[0]=x+y*(A+=A)+h*(B+=B)-g*(D+=D),r[1]=S+y*D+g*A-l*B,r[2]=P+y*B+l*D-h*A,r},f.bE=function(r,e,i){let l=(function(S){var P=S[3],A=S[4],D=S[5],B=S[6],F=S[7],W=S[8];return S[0]*(W*A-D*F)+S[1]*(-W*P+D*B)+S[2]*(F*P-A*B)})([r[0],r[1],r[2],e[0],e[1],e[2],i[0],i[1],i[2]]);if(l===0)return null;let h=wt([],[e[0],e[1],e[2]],[i[0],i[1],i[2]]),g=wt([],[i[0],i[1],i[2]],[r[0],r[1],r[2]]),y=wt([],[r[0],r[1],r[2]],[e[0],e[1],e[2]]),x=Gt([],h,-r[3]);return Wt(x,x,Gt([],g,-e[3])),Wt(x,x,Gt([],y,-i[3])),Gt(x,x,1/l),x},f.bF=Em,f.bG=function(){return new Float64Array(4)},f.bH=function(r,e,i,l){var h=[],g=[];return h[0]=e[0]-i[0],h[1]=e[1]-i[1],h[2]=e[2]-i[2],g[0]=h[0]*Math.cos(l)-h[1]*Math.sin(l),g[1]=h[0]*Math.sin(l)+h[1]*Math.cos(l),g[2]=h[2],r[0]=g[0]+i[0],r[1]=g[1]+i[1],r[2]=g[2]+i[2],r},f.bI=function(r,e,i,l){var h=[],g=[];return h[0]=e[0]-i[0],h[1]=e[1]-i[1],h[2]=e[2]-i[2],g[0]=h[0],g[1]=h[1]*Math.cos(l)-h[2]*Math.sin(l),g[2]=h[1]*Math.sin(l)+h[2]*Math.cos(l),r[0]=g[0]+i[0],r[1]=g[1]+i[1],r[2]=g[2]+i[2],r},f.bJ=function(r,e,i,l){var h=[],g=[];return h[0]=e[0]-i[0],h[1]=e[1]-i[1],h[2]=e[2]-i[2],g[0]=h[2]*Math.sin(l)+h[0]*Math.cos(l),g[1]=h[1],g[2]=h[2]*Math.cos(l)-h[0]*Math.sin(l),r[0]=g[0]+i[0],r[1]=g[1]+i[1],r[2]=g[2]+i[2],r},f.bK=function(r,e,i){var l=Math.sin(i),h=Math.cos(i),g=e[0],y=e[1],x=e[2],S=e[3],P=e[8],A=e[9],D=e[10],B=e[11];return e!==r&&(r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=g*h-P*l,r[1]=y*h-A*l,r[2]=x*h-D*l,r[3]=S*h-B*l,r[8]=g*l+P*h,r[9]=y*l+A*h,r[10]=x*l+D*h,r[11]=S*l+B*h,r},f.bL=function(r,e){let i=Kt(r,360),l=Kt(e,360),h=l-i,g=l>i?h-360:h+360;return Math.abs(h)<Math.abs(g)?h:g},f.bM=function(r){return r[0]=0,r[1]=0,r[2]=0,r},f.bN=function(r,e,i,l){let h=Math.sqrt(r*r+e*e),g=Math.sqrt(i*i+l*l);r/=h,e/=h,i/=g,l/=g;let y=Math.acos(r*i+e*l);return-e*i+r*l>0?y:-y},f.bO=function(r,e){let i=Kt(r,2*Math.PI),l=Kt(e,2*Math.PI);return Math.min(Math.abs(i-l),Math.abs(i-l+2*Math.PI),Math.abs(i-l-2*Math.PI))},f.bP=function(){let r={},e=Le.$version;for(let i in Le.$root){let l=Le.$root[i];if(l.required){let h=null;h=i==="version"?e:l.type==="array"?[]:{},h!=null&&(r[i]=h)}}return r},f.bQ=Oe,f.bR=To,f.bS=function r(e,i){if(Array.isArray(e)){if(!Array.isArray(i)||e.length!==i.length)return!1;for(let l=0;l<e.length;l++)if(!r(e[l],i[l]))return!1;return!0}if(typeof e=="object"&&e!==null&&i!==null){if(typeof i!="object"||Object.keys(e).length!==Object.keys(i).length)return!1;for(let l in e)if(!r(e[l],i[l]))return!1;return!0}return e===i},f.bT=function(r){r=r.slice();let e=Object.create(null);for(let i=0;i<r.length;i++)e[r[i].id]=r[i];for(let i=0;i<r.length;i++)"ref"in r[i]&&(r[i]=wr(r[i],e[r[i].ref]));return r},f.bU=function(r,e){if(r.type==="custom")return new sM(r,e);switch(r.type){case"background":return new aM(r,e);case"circle":return new WE(r,e);case"color-relief":return new YE(r,e);case"fill":return new uA(r,e);case"fill-extrusion":return new wA(r,e);case"heatmap":return new UE(r,e);case"hillshade":return new $E(r,e);case"line":return new AA(r,e);case"raster":return new Zh(r,e);case"symbol":return new lp(r,e)}},f.bV=r=>r.type==="raster",f.bW=or,f.bX=function(r,e){if(!r)return[{command:"setStyle",args:[e]}];let i=[];try{if(!Mt(r.version,e.version))return[{command:"setStyle",args:[e]}];Mt(r.center,e.center)||i.push({command:"setCenter",args:[e.center]}),Mt(r.state,e.state)||i.push({command:"setGlobalState",args:[e.state]}),Mt(r.centerAltitude,e.centerAltitude)||i.push({command:"setCenterAltitude",args:[e.centerAltitude]}),Mt(r.zoom,e.zoom)||i.push({command:"setZoom",args:[e.zoom]}),Mt(r.bearing,e.bearing)||i.push({command:"setBearing",args:[e.bearing]}),Mt(r.pitch,e.pitch)||i.push({command:"setPitch",args:[e.pitch]}),Mt(r.roll,e.roll)||i.push({command:"setRoll",args:[e.roll]}),Mt(r.sprite,e.sprite)||i.push({command:"setSprite",args:[e.sprite]}),Mt(r.glyphs,e.glyphs)||i.push({command:"setGlyphs",args:[e.glyphs]}),Mt(r.transition,e.transition)||i.push({command:"setTransition",args:[e.transition]}),Mt(r.light,e.light)||i.push({command:"setLight",args:[e.light]}),Mt(r.terrain,e.terrain)||i.push({command:"setTerrain",args:[e.terrain]}),Mt(r.sky,e.sky)||i.push({command:"setSky",args:[e.sky]}),Mt(r.projection,e.projection)||i.push({command:"setProjection",args:[e.projection]});let l={},h=[];(function(y,x,S,P){let A;for(A in x=x||{},y=y||{})Object.prototype.hasOwnProperty.call(y,A)&&(Object.prototype.hasOwnProperty.call(x,A)||Ti(A,S,P));for(A in x)Object.prototype.hasOwnProperty.call(x,A)&&(Object.prototype.hasOwnProperty.call(y,A)?Mt(y[A],x[A])||(y[A].type==="geojson"&&x[A].type==="geojson"&&Ci(y,x,A)?mi(S,{command:"setGeoJSONSourceData",args:[A,x[A].data]}):$i(A,x,S,P)):Sr(A,x,S))})(r.sources,e.sources,h,l);let g=[];r.layers&&r.layers.forEach((y=>{"source"in y&&l[y.source]?i.push({command:"removeLayer",args:[y.id]}):g.push(y)})),i=i.concat(h),(function(y,x,S){x=x||[];let P=(y=y||[]).map(io),A=x.map(io),D=y.reduce(Kr,{}),B=x.reduce(Kr,{}),F=P.slice(),W=Object.create(null),U,$,J,ue,ee;for(let ae=0,he=0;ae<P.length;ae++)U=P[ae],Object.prototype.hasOwnProperty.call(B,U)?he++:(mi(S,{command:"removeLayer",args:[U]}),F.splice(F.indexOf(U,he),1));for(let ae=0,he=0;ae<A.length;ae++)U=A[A.length-1-ae],F[F.length-1-ae]!==U&&(Object.prototype.hasOwnProperty.call(D,U)?(mi(S,{command:"removeLayer",args:[U]}),F.splice(F.lastIndexOf(U,F.length-he),1)):he++,ue=F[F.length-ae],mi(S,{command:"addLayer",args:[B[U],ue]}),F.splice(F.length-ae,0,U),W[U]=!0);for(let ae=0;ae<A.length;ae++)if(U=A[ae],$=D[U],J=B[U],!W[U]&&!Mt($,J))if(Mt($.source,J.source)&&Mt($["source-layer"],J["source-layer"])&&Mt($.type,J.type)){for(ee in lr($.layout,J.layout,S,U,null,"setLayoutProperty"),lr($.paint,J.paint,S,U,null,"setPaintProperty"),Mt($.filter,J.filter)||mi(S,{command:"setFilter",args:[U,J.filter]}),Mt($.minzoom,J.minzoom)&&Mt($.maxzoom,J.maxzoom)||mi(S,{command:"setLayerZoomRange",args:[U,J.minzoom,J.maxzoom]}),$)Object.prototype.hasOwnProperty.call($,ee)&&ee!=="layout"&&ee!=="paint"&&ee!=="filter"&&ee!=="metadata"&&ee!=="minzoom"&&ee!=="maxzoom"&&(ee.indexOf("paint.")===0?lr($[ee],J[ee],S,U,ee.slice(6),"setPaintProperty"):Mt($[ee],J[ee])||mi(S,{command:"setLayerProperty",args:[U,ee,J[ee]]}));for(ee in J)Object.prototype.hasOwnProperty.call(J,ee)&&!Object.prototype.hasOwnProperty.call($,ee)&&ee!=="layout"&&ee!=="paint"&&ee!=="filter"&&ee!=="metadata"&&ee!=="minzoom"&&ee!=="maxzoom"&&(ee.indexOf("paint.")===0?lr($[ee],J[ee],S,U,ee.slice(6),"setPaintProperty"):Mt($[ee],J[ee])||mi(S,{command:"setLayerProperty",args:[U,ee,J[ee]]}))}else mi(S,{command:"removeLayer",args:[U]}),ue=F[F.lastIndexOf(U)+1],mi(S,{command:"addLayer",args:[J,ue]})})(g,e.layers,i)}catch(l){console.warn("Unable to compute style diff:",l),i=[{command:"setStyle",args:[e]}]}return i},f.bY=function(r){let e=[],i=r.id;return i===void 0&&e.push({message:`layers.${i}: missing required property "id"`}),r.render===void 0&&e.push({message:`layers.${i}: missing required method "render"`}),r.renderingMode&&r.renderingMode!=="2d"&&r.renderingMode!=="3d"&&e.push({message:`layers.${i}: property "renderingMode" must be either "2d" or "3d"`}),e},f.bZ=Mr,f.b_=un,f.ba=si,f.bb=function(r,e,i){return r[0]=e[0]*i,r[1]=e[1]*i,r[2]=e[2]*i,r[3]=e[3]*i,r},f.bc=function(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]+r[3]},f.bd=$v,f.be=uu,f.bf=function(r,e,i,l,h){var g=1/Math.tan(e/2);if(r[0]=g/i,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=g,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,h!=null&&h!==1/0){var y=1/(l-h);r[10]=(h+l)*y,r[14]=2*h*l*y}else r[10]=-1,r[14]=-2*l;return r},f.bg=function(r){var e=new ye(16);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e},f.bh=function(r,e,i){var l=Math.sin(i),h=Math.cos(i),g=e[0],y=e[1],x=e[2],S=e[3],P=e[4],A=e[5],D=e[6],B=e[7];return e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=g*h+P*l,r[1]=y*h+A*l,r[2]=x*h+D*l,r[3]=S*h+B*l,r[4]=P*h-g*l,r[5]=A*h-y*l,r[6]=D*h-x*l,r[7]=B*h-S*l,r},f.bi=function(r,e,i){var l=Math.sin(i),h=Math.cos(i),g=e[4],y=e[5],x=e[6],S=e[7],P=e[8],A=e[9],D=e[10],B=e[11];return e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[4]=g*h+P*l,r[5]=y*h+A*l,r[6]=x*h+D*l,r[7]=S*h+B*l,r[8]=P*h-g*l,r[9]=A*h-y*l,r[10]=D*h-x*l,r[11]=B*h-S*l,r},f.bj=function(){let r=new Float32Array(16);return Ye(r),r},f.bk=function(){let r=new Float64Array(16);return Ye(r),r},f.bl=function(){return new Float64Array(16)},f.bm=function(r,e,i){let l=new Float64Array(4);return ni(l,r,e-90,i),l},f.bn=function(r,e,i,l){var h,g,y,x,S,P=e[0],A=e[1],D=e[2],B=e[3],F=i[0],W=i[1],U=i[2],$=i[3];return(g=P*F+A*W+D*U+B*$)<0&&(g=-g,F=-F,W=-W,U=-U,$=-$),1-g>je?(h=Math.acos(g),y=Math.sin(h),x=Math.sin((1-l)*h)/y,S=Math.sin(l*h)/y):(x=1-l,S=l),r[0]=x*P+S*F,r[1]=x*A+S*W,r[2]=x*D+S*U,r[3]=x*B+S*$,r},f.bo=function(r){let e=new Float64Array(9);(function(g,y){var x=y[0],S=y[1],P=y[2],A=y[3],D=x+x,B=S+S,F=P+P,W=x*D,U=S*D,$=S*B,J=P*D,ue=P*B,ee=P*F,ae=A*D,he=A*B,fe=A*F;g[0]=1-$-ee,g[3]=U-fe,g[6]=J+he,g[1]=U+fe,g[4]=1-W-ee,g[7]=ue-ae,g[2]=J-he,g[5]=ue+ae,g[8]=1-W-$})(e,r);let i=Xr(-Math.asin(St(e[2],-1,1))),l,h;return Math.hypot(e[5],e[8])<.001?(l=0,h=-Xr(Math.atan2(e[3],e[4]))):(l=Xr(e[5]===0&&e[8]===0?0:Math.atan2(e[5],e[8])),h=Xr(e[1]===0&&e[0]===0?0:Math.atan2(e[1],e[0]))),{roll:l,pitch:i+90,bearing:h}},f.bp=function(r,e){return r.roll==e.roll&&r.pitch==e.pitch&&r.bearing==e.bearing},f.bq=Bt,f.br=qa,f.bs=su,f.bt=zd,f.bu=au,f.bv=Mi,f.bw=Ii,f.bx=tr,f.by=function(r,e,i,l,h){return Mi(l,h,St((r-e)/(i-e),0,1))},f.bz=Kt,f.c=be,f.c$=class{constructor(r){this._marks={start:[r.url,"start"].join("#"),end:[r.url,"end"].join("#"),measure:r.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let r=performance.getEntriesByName(this._marks.measure);return r.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),r=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),r}},f.c0=Mo,f.c1=class extends vn{constructor(r,e){super(r,e),this.current=eu}set(r){if(r[12]!==this.current[12]||r[0]!==this.current[0])return this.current=r,void this.gl.uniformMatrix4fv(this.location,!1,r);for(let e=1;e<16;e++)if(r[e]!==this.current[e]){this.current=r,this.gl.uniformMatrix4fv(this.location,!1,r);break}}},f.c2=Hs,f.c3=class extends vn{constructor(r,e){super(r,e),this.current=[0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]||(this.current=r,this.gl.uniform3f(this.location,r[0],r[1],r[2]))}},f.c4=class extends vn{constructor(r,e){super(r,e),this.current=[0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]||(this.current=r,this.gl.uniform2f(this.location,r[0],r[1]))}},f.c5=Ce,f.c6=function(r,e){var i=Math.sin(e),l=Math.cos(e);return r[0]=l,r[1]=i,r[2]=0,r[3]=-i,r[4]=l,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r},f.c7=function(r,e,i){var l=e[0],h=e[1],g=e[2];return r[0]=l*i[0]+h*i[3]+g*i[6],r[1]=l*i[1]+h*i[4]+g*i[7],r[2]=l*i[2]+h*i[5]+g*i[8],r},f.c8=function(r,e,i,l,h,g,y){var x=1/(e-i),S=1/(l-h),P=1/(g-y);return r[0]=-2*x,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*S,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*P,r[11]=0,r[12]=(e+i)*x,r[13]=(h+l)*S,r[14]=(y+g)*P,r[15]=1,r},f.c9=class extends vn{constructor(r,e){super(r,e),this.current=new Array}set(r){if(r!=this.current){this.current=r;let e=new Float32Array(4*r.length);for(let i=0;i<r.length;i++)e[4*i]=r[i].r,e[4*i+1]=r[i].g,e[4*i+2]=r[i].b,e[4*i+3]=r[i].a;this.gl.uniform4fv(this.location,e)}}},f.cA=function(r,e){return K[e]&&(r instanceof MouseEvent||r instanceof WheelEvent)},f.cB=function(r,e){return Pe[e]&&"touches"in r},f.cC=function(r){return Pe[r]||K[r]},f.cD=function(r,e,i){var l=e[0],h=e[1];return r[0]=i[0]*l+i[4]*h+i[12],r[1]=i[1]*l+i[5]*h+i[13],r},f.cE=function(r,e){let{x:i,y:l}=Fd.fromLngLat(e);return!(r<0||r>25||l<0||l>=1||i<0||i>=1)},f.cF=function(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=e[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=e[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},f.cG=class extends Yc{},f.cH=ZM,f.cJ=we,f.cK=function(r,e){be.REGISTERED_PROTOCOLS[r]=e},f.cL=function(r){delete be.REGISTERED_PROTOCOLS[r]},f.cM=function(r,e){let i={};for(let h=0;h<r.length;h++){let g=e&&e[r[h].id]||qc(r[h]);e&&(e[r[h].id]=g);let y=i[g];y||(y=i[g]=[]),y.push(r[h])}let l=[];for(let h in i)l.push(i[h]);return l},f.cN=ot,f.cO=Yv,f.cP=Pb,f.cQ=Mv,f.cR=function(r){r.bucket.createArrays(),r.bucket.tilePixelRatio=Ft/(512*r.bucket.overscaling),r.bucket.compareText={},r.bucket.iconsNeedLinear=!1;let e=r.bucket.layers[0],i=e.layout,l=e._unevaluatedLayout._values,h={layoutIconSize:l["icon-size"].possiblyEvaluate(new Ei(r.bucket.zoom+1),r.canonical),layoutTextSize:l["text-size"].possiblyEvaluate(new Ei(r.bucket.zoom+1),r.canonical),textMaxSize:l["text-size"].possiblyEvaluate(new Ei(18))};if(r.bucket.textSizeData.kind==="composite"){let{minZoom:P,maxZoom:A}=r.bucket.textSizeData;h.compositeTextSizes=[l["text-size"].possiblyEvaluate(new Ei(P),r.canonical),l["text-size"].possiblyEvaluate(new Ei(A),r.canonical)]}if(r.bucket.iconSizeData.kind==="composite"){let{minZoom:P,maxZoom:A}=r.bucket.iconSizeData;h.compositeIconSizes=[l["icon-size"].possiblyEvaluate(new Ei(P),r.canonical),l["icon-size"].possiblyEvaluate(new Ei(A),r.canonical)]}let g=i.get("text-line-height")*Rr,y=i.get("text-rotation-alignment")!=="viewport"&&i.get("symbol-placement")!=="point",x=i.get("text-keep-upright"),S=i.get("text-size");for(let P of r.bucket.features){let A=i.get("text-font").evaluate(P,{},r.canonical).join(","),D=S.evaluate(P,{},r.canonical),B=h.layoutTextSize.evaluate(P,{},r.canonical),F=h.layoutIconSize.evaluate(P,{},r.canonical),W={horizontal:{},vertical:void 0},U=P.text,$,J=[0,0];if(U){let ae=U.toString(),he=i.get("text-letter-spacing").evaluate(P,{},r.canonical)*Rr,fe=im(ae)?he:0,Ae=i.get("text-anchor").evaluate(P,{},r.canonical),We=Nb(e,P,r.canonical);if(!We){let Ke=i.get("text-radial-offset").evaluate(P,{},r.canonical);J=Ke?jb(Ae,[Ke*Rr,Zm]):i.get("text-offset").evaluate(P,{},r.canonical).map((He=>He*Rr))}let qe=y?"center":i.get("text-justify").evaluate(P,{},r.canonical),Ue=i.get("symbol-placement")==="point"?i.get("text-max-width").evaluate(P,{},r.canonical)*Rr:1/0,tt=()=>{r.bucket.allowVerticalPlacement&&Co(ae)&&(W.vertical=sp(U,r.glyphMap,r.glyphPositions,r.imagePositions,A,Ue,g,Ae,"left",fe,J,f.aA.vertical,!0,B,D))};if(!y&&We){let Ke=new Set;if(qe==="auto")for(let Ne=0;Ne<We.values.length;Ne+=2)Ke.add($m(We.values[Ne]));else Ke.add(qe);let He=!1;for(let Ne of Ke)if(!W.horizontal[Ne])if(He)W.horizontal[Ne]=W.horizontal[0];else{let it=sp(U,r.glyphMap,r.glyphPositions,r.imagePositions,A,Ue,g,"center",Ne,fe,J,f.aA.horizontal,!1,B,D);it&&(W.horizontal[Ne]=it,He=it.positionedLines.length===1)}tt()}else{qe==="auto"&&(qe=$m(Ae));let Ke=sp(U,r.glyphMap,r.glyphPositions,r.imagePositions,A,Ue,g,Ae,qe,fe,J,f.aA.horizontal,!1,B,D);Ke&&(W.horizontal[qe]=Ke),tt(),Co(ae)&&y&&x&&(W.vertical=sp(U,r.glyphMap,r.glyphPositions,r.imagePositions,A,Ue,g,Ae,qe,fe,J,f.aA.vertical,!1,B,D))}}let ue=!1;if(P.icon&&P.icon.name){let ae=r.imageMap[P.icon.name];ae&&($=tM(r.imagePositions[P.icon.name],i.get("icon-offset").evaluate(P,{},r.canonical),i.get("icon-anchor").evaluate(P,{},r.canonical)),ue=!!ae.sdf,r.bucket.sdfIcons===void 0?r.bucket.sdfIcons=ue:r.bucket.sdfIcons!==ue&&pr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ae.pixelRatio!==r.bucket.pixelRatio||i.get("icon-rotate").constantOr(1)!==0)&&(r.bucket.iconsNeedLinear=!0))}let ee=Vb(W.horizontal)||W.vertical;r.bucket.iconsInText=!!ee&&ee.iconsInText,(ee||$)&&GM(r.bucket,P,W,$,r.imageMap,h,B,F,J,ue,r.canonical,r.subdivisionGranularity)}r.showCollisionBoxes&&r.bucket.generateCollisionDebugBuffers()},f.cS=gm,f.cT=_m,f.cU=vm,f.cV=function(r){let e=new ap;return(function(i,l){for(let h in i.layers)l.writeMessage(3,MM,i.layers[h])})(r,e),e.finish()},f.cW=function(r,e,i,l,h,g){let y=Mb(r,e,i,h,0);return y=Mb(y,e,l,g,1),y},f.cX=class{constructor(r){this.maxEntries=r,this.map=new Map}get(r){let e=this.map.get(r);return e!==void 0&&(this.map.delete(r),this.map.set(r,e)),e}set(r,e){if(this.map.has(r))this.map.delete(r);else if(this.map.size>=this.maxEntries){let i=this.map.keys().next().value;this.map.delete(i)}this.map.set(r,e)}clear(){this.map.clear()}},f.cY=hv,f.cZ=ap,f.c_=Cb,f.ca=class extends vn{constructor(r,e){super(r,e),this.current=new Array}set(r){if(r!=this.current){this.current=r;let e=new Float32Array(r);this.gl.uniform1fv(this.location,e)}}},f.cb=class extends nc{},f.cc=LA,f.cd=class extends Po{},f.ce=dm,f.cf=function(r){return r<=1?1:Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))},f.cg=K_,f.ch=function(r,e,i){var l=e[0],h=e[1],g=e[2],y=i[3]*l+i[7]*h+i[11]*g+i[15];return r[0]=(i[0]*l+i[4]*h+i[8]*g+i[12])/(y=y||1),r[1]=(i[1]*l+i[5]*h+i[9]*g+i[13])/y,r[2]=(i[2]*l+i[6]*h+i[10]*g+i[14])/y,r},f.ci=class extends $s{},f.cj=class extends Jc{},f.ck=function(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]&&r[6]===e[6]&&r[7]===e[7]&&r[8]===e[8]&&r[9]===e[9]&&r[10]===e[10]&&r[11]===e[11]&&r[12]===e[12]&&r[13]===e[13]&&r[14]===e[14]&&r[15]===e[15]},f.cl=function(r,e){var i=r[0],l=r[1],h=r[2],g=r[3],y=r[4],x=r[5],S=r[6],P=r[7],A=r[8],D=r[9],B=r[10],F=r[11],W=r[12],U=r[13],$=r[14],J=r[15],ue=e[0],ee=e[1],ae=e[2],he=e[3],fe=e[4],Ae=e[5],We=e[6],qe=e[7],Ue=e[8],tt=e[9],Ke=e[10],He=e[11],Ne=e[12],it=e[13],nt=e[14],st=e[15];return Math.abs(i-ue)<=je*Math.max(1,Math.abs(i),Math.abs(ue))&&Math.abs(l-ee)<=je*Math.max(1,Math.abs(l),Math.abs(ee))&&Math.abs(h-ae)<=je*Math.max(1,Math.abs(h),Math.abs(ae))&&Math.abs(g-he)<=je*Math.max(1,Math.abs(g),Math.abs(he))&&Math.abs(y-fe)<=je*Math.max(1,Math.abs(y),Math.abs(fe))&&Math.abs(x-Ae)<=je*Math.max(1,Math.abs(x),Math.abs(Ae))&&Math.abs(S-We)<=je*Math.max(1,Math.abs(S),Math.abs(We))&&Math.abs(P-qe)<=je*Math.max(1,Math.abs(P),Math.abs(qe))&&Math.abs(A-Ue)<=je*Math.max(1,Math.abs(A),Math.abs(Ue))&&Math.abs(D-tt)<=je*Math.max(1,Math.abs(D),Math.abs(tt))&&Math.abs(B-Ke)<=je*Math.max(1,Math.abs(B),Math.abs(Ke))&&Math.abs(F-He)<=je*Math.max(1,Math.abs(F),Math.abs(He))&&Math.abs(W-Ne)<=je*Math.max(1,Math.abs(W),Math.abs(Ne))&&Math.abs(U-it)<=je*Math.max(1,Math.abs(U),Math.abs(it))&&Math.abs($-nt)<=je*Math.max(1,Math.abs($),Math.abs(nt))&&Math.abs(J-st)<=je*Math.max(1,Math.abs(J),Math.abs(st))},f.cm=function(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r},f.cn=r=>r.type==="symbol",f.co=r=>r.type==="circle",f.cp=r=>r.type==="heatmap",f.cq=r=>r.type==="line",f.cr=r=>r.type==="fill",f.cs=r=>r.type==="fill-extrusion",f.ct=r=>r.type==="hillshade",f.cu=r=>r.type==="color-relief",f.cv=r=>r.type==="background",f.cw=r=>r.type==="custom",f.cx=hi,f.cy=function(r,e,i){let l=ut(e.x-i.x,e.y-i.y),h=ut(r.x-i.x,r.y-i.y),g=Math.atan2(l[0]*h[1]-l[1]*h[0],(function(y,x){return y[0]*x[0]+y[1]*x[1]})(l,h));return Xr(g)},f.cz=At,f.d=Ge,f.d0=function(r,e,i,l,h){return a(this,void 0,void 0,(function*(){if(Se())try{return yield Xa(r,e,i,l,h)}catch(g){}return(function(g,y,x,S,P){let A=g.width,D=g.height;Yn&&Sn||(Yn=new OffscreenCanvas(A,D),Sn=Yn.getContext("2d",{willReadFrequently:!0})),Yn.width=A,Yn.height=D,Sn.drawImage(g,0,0,A,D);let B=Sn.getImageData(y,x,S,P);return Sn.clearRect(0,0,A,D),B.data})(r,e,i,l,h)}))},f.d1=ev,f.d2=M,f.d3=class{constructor(r,e){this.layers={[Vd]:this},this.name=Vd,this.version=e?e.version:1,this.extent=e?e.extent:4096,this.length=r.length,this.features=r}feature(r){return new AM(this.features[r],this.extent)}},f.d4=c,f.d5=ps,f.e=vi,f.f=r=>a(void 0,void 0,void 0,(function*(){if(r.byteLength===0)return createImageBitmap(new ImageData(1,1));let e=new Blob([new Uint8Array(r)],{type:"image/png"});try{return createImageBitmap(e)}catch(i){throw new Error(`Could not load image because of ${i.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),f.g=Ie,f.h=r=>new Promise(((e,i)=>{let l=new Image;l.onload=()=>{e(l),URL.revokeObjectURL(l.src),l.onload=null,window.requestAnimationFrame((()=>{l.src=Ya}))},l.onerror=()=>i(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));let h=new Blob([new Uint8Array(r)],{type:"image/png"});l.src=r.byteLength?URL.createObjectURL(h):Ya})),f.i=Ln,f.j=(r,e)=>Xe(vi(r,{type:"json"}),e),f.k=fi,f.l=Et,f.m=Xe,f.n=(r,e)=>Xe(vi(r,{type:"arrayBuffer"}),e),f.o=function(r){return new ap(r).readFields($A,[])},f.p=Av,f.q=function(r){return/[\u02EA\u02EB\u1100-\u11FF\u2E80-\u2FDF\u3000-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(r))},f.r=Pd,f.s=Ka,f.t=_n,f.u=Le,f.v=em,f.w=pr,f.x=dd,f.y=Hl,f.z=$c})),p("worker",["./shared"],(function(f){"use strict";class a{constructor(K,X){this.keyCache={},K&&this.replace(K,X)}replace(K,X){this._layerConfigs={},this._layers={},this.update(K,[],X)}update(K,X,ne){for(let be of K){this._layerConfigs[be.id]=be;let Ie=this._layers[be.id]=f.bU(be,ne);Ie._featureFilter=f.ak(Ie.filter,ne),this.keyCache[be.id]&&delete this.keyCache[be.id]}for(let be of X)delete this.keyCache[be],delete this._layerConfigs[be],delete this._layers[be];this.familiesBySource={};let _e=f.cM(Object.values(this._layerConfigs),this.keyCache);for(let be of _e){let Ie=be.map((lt=>this._layers[lt.id])),ke=Ie[0];if(ke.visibility==="none")continue;let we=ke.source||"",Oe=this.familiesBySource[we];Oe||(Oe=this.familiesBySource[we]={});let Xe=ke.sourceLayer||f.aa,Ge=Oe[Xe];Ge||(Ge=Oe[Xe]=[]),Ge.push(Ie)}}}class T{constructor(K){let X={},ne=[];for(let ke in K){let we=K[ke],Oe=X[ke]={};for(let Xe in we){let Ge=we[+Xe];if(!Ge||Ge.bitmap.width===0||Ge.bitmap.height===0)continue;let lt={x:0,y:0,w:Ge.bitmap.width+2,h:Ge.bitmap.height+2};ne.push(lt),Oe[Xe]={rect:lt,metrics:Ge.metrics}}}let{w:_e,h:be}=f.p(ne),Ie=new f.r({width:_e||1,height:be||1});for(let ke in K){let we=K[ke];for(let Oe in we){let Xe=we[+Oe];if(!Xe||Xe.bitmap.width===0||Xe.bitmap.height===0)continue;let Ge=X[ke][Oe].rect;f.r.copy(Xe.bitmap,Ie,{x:0,y:0},{x:Ge.x+1,y:Ge.y+1},Xe.bitmap)}}this.image=Ie,this.positions=X}}f.cN("GlyphAtlas",T);class M{constructor(K){this.tileID=new f.a2(K.tileID.overscaledZ,K.tileID.wrap,K.tileID.canonical.z,K.tileID.canonical.x,K.tileID.canonical.y),this.uid=K.uid,this.zoom=K.zoom,this.pixelRatio=K.pixelRatio,this.tileSize=K.tileSize,this.source=K.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=K.showCollisionBoxes,this.collectResourceTiming=!!K.collectResourceTiming,this.returnDependencies=!!K.returnDependencies,this.promoteId=K.promoteId,this.inFlightDependencies=[]}parse(K,X,ne,_e,be){return f._(this,void 0,void 0,(function*(){this.status="parsing",this.data=K,this.collisionBoxArray=new f.ai;let Ie=new f.cO(Object.keys(K.layers).sort()),ke=new f.cP(this.tileID,this.promoteId);ke.bucketLayerIDs=[];let we={},Oe={featureIndex:ke,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:ne,subdivisionGranularity:be},Xe=X.familiesBySource[this.source];for(let Ci in Xe){let lr=K.layers[Ci];if(!lr)continue;lr.version===1&&f.w(`Vector tile source "${this.source}" layer "${Ci}" does not use vector tile spec v2 and therefore may have some rendering errors.`);let io=Ie.encode(Ci),Kr=[];for(let Be=0;Be<lr.length;Be++){let Ir=lr.feature(Be),zr=ke.getId(Ir,Ci);Kr.push({feature:Ir,id:zr,index:Be,sourceLayerIndex:io})}for(let Be of Xe[Ci]){let Ir=Be[0];Ir.source!==this.source&&f.w(`layer.source = ${Ir.source} does not equal this.source = ${this.source}`),Ir.isHidden(this.zoom,!0)||(R(Be,this.zoom,ne),(we[Ir.id]=Ir.createBucket({index:ke.bucketLayerIDs.length,layers:Be,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:io,sourceID:this.source})).populate(Kr,Oe,this.tileID.canonical),ke.bucketLayerIDs.push(Be.map((zr=>zr.id))))}}let Ge=f.bZ(Oe.glyphDependencies,(Ci=>Object.keys(Ci).map(Number)));this.inFlightDependencies.forEach((Ci=>Ci==null?void 0:Ci.abort())),this.inFlightDependencies=[];let lt=Promise.resolve({});if(Object.keys(Ge).length){let Ci=new AbortController;this.inFlightDependencies.push(Ci),lt=_e.sendAsync({type:"GG",data:{stacks:Ge,source:this.source,tileID:this.tileID,type:"glyphs"}},Ci)}let pt=Object.keys(Oe.iconDependencies),Et=Promise.resolve({});if(pt.length){let Ci=new AbortController;this.inFlightDependencies.push(Ci),Et=_e.sendAsync({type:"GI",data:{icons:pt,source:this.source,tileID:this.tileID,type:"icons"}},Ci)}let fi=Object.keys(Oe.patternDependencies),oi=Promise.resolve({});if(fi.length){let Ci=new AbortController;this.inFlightDependencies.push(Ci),oi=_e.sendAsync({type:"GI",data:{icons:fi,source:this.source,tileID:this.tileID,type:"patterns"}},Ci)}let Le=Oe.dashDependencies,Si=Promise.resolve({});if(Object.keys(Le).length){let Ci=new AbortController;this.inFlightDependencies.push(Ci),Si=_e.sendAsync({type:"GDA",data:{dashes:Le}},Ci)}let[wr,Mt,mi,Sr]=yield Promise.all([lt,Et,oi,Si]),Ti=new T(wr),$i=new f.cQ(Mt,mi);for(let Ci in we){let lr=we[Ci];lr instanceof f.aj?(R(lr.layers,this.zoom,ne),f.cR({bucket:lr,glyphMap:wr,glyphPositions:Ti.positions,imageMap:Mt,imagePositions:$i.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Oe.subdivisionGranularity})):lr.hasDependencies&&(lr instanceof f.cS||lr instanceof f.cT||lr instanceof f.cU)&&(R(lr.layers,this.zoom,ne),lr.addFeatures(Oe,this.tileID.canonical,$i.patternPositions,Sr))}return this.status="done",{buckets:Object.values(we).filter((Ci=>!Ci.isEmpty())),featureIndex:ke,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ti.image,imageAtlas:$i,dashPositions:Sr,glyphMap:this.returnDependencies?wr:null,iconMap:this.returnDependencies?Mt:null,glyphPositions:this.returnDependencies?Ti.positions:null}}))}}function R(Pe,K,X){let ne=new f.H(K);for(let _e of Pe)_e.recalculate(ne,X)}class V{constructor(K,X,ne,_e,be){this.type=K,this.properties=ne||{},this.extent=be,this.pointsArray=X,this.id=_e}loadGeometry(){return this.pointsArray.map((K=>K.map((X=>new f.P(X.x,X.y)))))}}class Y{constructor(K,X,ne){this.version=2,this._myFeatures=K,this.name=X,this.length=K.length,this.extent=ne}feature(K){return this._myFeatures[K]}}class re{constructor(){this.layers={}}addLayer(K){this.layers[K.name]=K}}function G(Pe){let K=f.cV(Pe);return K.byteOffset===0&&K.byteLength===K.buffer.byteLength||(K=new Uint8Array(K)),{vectorTile:Pe,rawData:K.buffer}}function te(Pe,K,X){let{extent:ne}=Pe,_e=Math.pow(2,X.z-K.z),be=(X.x-K.x*_e)*ne,Ie=(X.y-K.y*_e)*ne,ke=[];for(let we=0;we<Pe.length;we++){let Oe=Pe.feature(we),Xe=Oe.loadGeometry();for(let lt of Xe)for(let pt of lt)pt.x=pt.x*_e-be,pt.y=pt.y*_e-Ie;let Ge=128;Xe=f.cW(Xe,Oe.type,-Ge,-Ge,ne+Ge,ne+Ge),Xe.length!==0&&ke.push(new V(Oe.type,Xe,Oe.properties,Oe.id,ne))}return new Y(ke,Pe.name,ne)}class H{constructor(K,X,ne){this.actor=K,this.layerIndex=X,this.availableImages=ne,this.fetching={},this.loading={},this.loaded={},this.overzoomedTileResultCache=new f.cX(1e3)}loadVectorTile(K,X){return f._(this,void 0,void 0,(function*(){let ne=yield f.n(K.request,X);try{return{vectorTile:K.encoding!=="mlt"?new f.cY(new f.cZ(ne.data)):new f.c_(ne.data),rawData:ne.data,cacheControl:ne.cacheControl,expires:ne.expires}}catch(_e){let be=new Uint8Array(ne.data),Ie=`Unable to parse the tile at ${K.request.url}, `;throw Ie+=be[0]===31&&be[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${_e.message}`,new Error(Ie)}}))}loadTile(K){return f._(this,void 0,void 0,(function*(){let{uid:X,overzoomParameters:ne}=K;ne&&(K.request=ne.overzoomRequest);let _e=!!(K&&K.request&&K.request.collectResourceTiming)&&new f.c$(K.request),be=new M(K);this.loading[X]=be;let Ie=new AbortController;be.abort=Ie;try{let ke=yield this.loadVectorTile(K,Ie);if(delete this.loading[X],!ke)return null;if(ne){let lt=this._getOverzoomTile(K,ke.vectorTile);ke.rawData=lt.rawData,ke.vectorTile=lt.vectorTile}let we=ke.rawData,Oe={};ke.expires&&(Oe.expires=ke.expires),ke.cacheControl&&(Oe.cacheControl=ke.cacheControl);let Xe={};if(_e){let lt=_e.finish();lt&&(Xe.resourceTiming=JSON.parse(JSON.stringify(lt)))}be.vectorTile=ke.vectorTile;let Ge=be.parse(ke.vectorTile,this.layerIndex,this.availableImages,this.actor,K.subdivisionGranularity);this.loaded[X]=be,this.fetching[X]={rawTileData:we,cacheControl:Oe,resourceTiming:Xe};try{let lt=yield Ge;return f.e({rawTileData:we.slice(0),encoding:K.encoding},lt,Oe,Xe)}finally{delete this.fetching[X]}}catch(ke){throw delete this.loading[X],be.status="done",this.loaded[X]=be,ke}}))}_getOverzoomTile(K,X){let{tileID:ne,source:_e,overzoomParameters:be}=K,{maxZoomTileID:Ie}=be,ke=`${Ie.key}_${ne.key}`,we=this.overzoomedTileResultCache.get(ke);if(we)return we;let Oe=new re,Xe=this.layerIndex.familiesBySource[_e];for(let lt in Xe){let pt=X.layers[lt];if(!pt)continue;let Et=te(pt,Ie,ne.canonical);Et.length>0&&Oe.addLayer(Et)}let Ge=G(Oe);return this.overzoomedTileResultCache.set(ke,Ge),Ge}reloadTile(K){return f._(this,void 0,void 0,(function*(){let X=K.uid;if(!this.loaded||!this.loaded[X])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");let ne=this.loaded[X];if(ne.showCollisionBoxes=K.showCollisionBoxes,ne.status==="parsing"){let _e=yield ne.parse(ne.vectorTile,this.layerIndex,this.availableImages,this.actor,K.subdivisionGranularity),be;if(this.fetching[X]){let{rawTileData:Ie,cacheControl:ke,resourceTiming:we}=this.fetching[X];delete this.fetching[X],be=f.e({rawTileData:Ie.slice(0),encoding:K.encoding},_e,ke,we)}else be=_e;return be}if(ne.status==="done"&&ne.vectorTile)return ne.parse(ne.vectorTile,this.layerIndex,this.availableImages,this.actor,K.subdivisionGranularity)}))}abortTile(K){return f._(this,void 0,void 0,(function*(){let X=this.loading,ne=K.uid;X&&X[ne]&&X[ne].abort&&(X[ne].abort.abort(),delete X[ne])}))}removeTile(K){return f._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[K.uid]&&delete this.loaded[K.uid]}))}}class Se{constructor(){this.loaded={}}loadTile(K){return f._(this,void 0,void 0,(function*(){let{uid:X,encoding:ne,rawImageData:_e,redFactor:be,greenFactor:Ie,blueFactor:ke,baseShift:we}=K,Oe=_e.width+2,Xe=_e.height+2,Ge=f.b(_e)?new f.R({width:Oe,height:Xe},yield f.d0(_e,-1,-1,Oe,Xe)):_e,lt=new f.d1(X,Ge,ne,be,Ie,ke,we);return this.loaded=this.loaded||{},this.loaded[X]=lt,lt}))}removeTile(K){let X=this.loaded,ne=K.uid;X&&X[ne]&&delete X[ne]}}var je,ye,Ce=(function(){if(ye)return je;function Pe(X,ne){if(X.length!==0){K(X[0],ne);for(var _e=1;_e<X.length;_e++)K(X[_e],!ne)}}function K(X,ne){for(var _e=0,be=0,Ie=0,ke=X.length,we=ke-1;Ie<ke;we=Ie++){var Oe=(X[Ie][0]-X[we][0])*(X[we][1]+X[Ie][1]),Xe=_e+Oe;be+=Math.abs(_e)>=Math.abs(Oe)?_e-Xe+Oe:Oe-Xe+_e,_e=Xe}_e+be>=0!=!!ne&&X.reverse()}return ye=1,je=function X(ne,_e){var be,Ie=ne&&ne.type;if(Ie==="FeatureCollection")for(be=0;be<ne.features.length;be++)X(ne.features[be],_e);else if(Ie==="GeometryCollection")for(be=0;be<ne.geometries.length;be++)X(ne.geometries[be],_e);else if(Ie==="Feature")X(ne.geometry,_e);else if(Ie==="Polygon")Pe(ne.coordinates,_e);else if(Ie==="MultiPolygon")for(be=0;be<ne.coordinates.length;be++)Pe(ne.coordinates[be],_e);return ne}})(),Ye=f.d2(Ce);let rt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Pe=>Pe},Ct=Math.fround||(gt=new Float32Array(1),Pe=>(gt[0]=+Pe,gt[0]));var gt;class Wt{constructor(K){this.options=Object.assign(Object.create(rt),K),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(K){let{log:X,minZoom:ne,maxZoom:_e}=this.options;X&&console.time("total time");let be=`prepare ${K.length} points`;X&&console.time(be),this.points=K;let Ie=[];for(let we=0;we<K.length;we++){let Oe=K[we];if(!Oe.geometry)continue;let[Xe,Ge]=Oe.geometry.coordinates,lt=Ct(kt(Xe)),pt=Ct(si(Ge));Ie.push(lt,pt,1/0,we,-1,1),this.options.reduce&&Ie.push(0)}let ke=this.trees[_e+1]=this._createTree(Ie);X&&console.timeEnd(be);for(let we=_e;we>=ne;we--){let Oe=+Date.now();ke=this.trees[we]=this._createTree(this._cluster(ke,we)),X&&console.log("z%d: %d clusters in %dms",we,ke.numItems,+Date.now()-Oe)}return X&&console.timeEnd("total time"),this}getClusters(K,X){let ne=((K[0]+180)%360+360)%360-180,_e=Math.max(-90,Math.min(90,K[1])),be=K[2]===180?180:((K[2]+180)%360+360)%360-180,Ie=Math.max(-90,Math.min(90,K[3]));if(K[2]-K[0]>=360)ne=-180,be=180;else if(ne>be){let Ge=this.getClusters([ne,_e,180,Ie],X),lt=this.getClusters([-180,_e,be,Ie],X);return Ge.concat(lt)}let ke=this.trees[this._limitZoom(X)],we=ke.range(kt(ne),si(Ie),kt(be),si(_e)),Oe=ke.data,Xe=[];for(let Ge of we){let lt=this.stride*Ge;Xe.push(Oe[lt+5]>1?Gt(Oe,lt,this.clusterProps):this.points[Oe[lt+3]])}return Xe}getChildren(K){let X=this._getOriginId(K),ne=this._getOriginZoom(K),_e="No cluster with the specified id.",be=this.trees[ne];if(!be)throw new Error(_e);let Ie=be.data;if(X*this.stride>=Ie.length)throw new Error(_e);let ke=this.options.radius/(this.options.extent*Math.pow(2,ne-1)),we=be.within(Ie[X*this.stride],Ie[X*this.stride+1],ke),Oe=[];for(let Xe of we){let Ge=Xe*this.stride;Ie[Ge+4]===K&&Oe.push(Ie[Ge+5]>1?Gt(Ie,Ge,this.clusterProps):this.points[Ie[Ge+3]])}if(Oe.length===0)throw new Error(_e);return Oe}getLeaves(K,X,ne){let _e=[];return this._appendLeaves(_e,K,X=X||10,ne=ne||0,0),_e}getTile(K,X,ne){let _e=this.trees[this._limitZoom(K)],be=Math.pow(2,K),{extent:Ie,radius:ke}=this.options,we=ke/Ie,Oe=(ne-we)/be,Xe=(ne+1+we)/be,Ge={features:[]};return this._addTileFeatures(_e.range((X-we)/be,Oe,(X+1+we)/be,Xe),_e.data,X,ne,be,Ge),X===0&&this._addTileFeatures(_e.range(1-we/be,Oe,1,Xe),_e.data,be,ne,be,Ge),X===be-1&&this._addTileFeatures(_e.range(0,Oe,we/be,Xe),_e.data,-1,ne,be,Ge),Ge.features.length?Ge:null}getClusterExpansionZoom(K){let X=this._getOriginZoom(K)-1;for(;X<=this.options.maxZoom;){let ne=this.getChildren(K);if(X++,ne.length!==1)break;K=ne[0].properties.cluster_id}return X}_appendLeaves(K,X,ne,_e,be){let Ie=this.getChildren(X);for(let ke of Ie){let we=ke.properties;if(we&&we.cluster?be+we.point_count<=_e?be+=we.point_count:be=this._appendLeaves(K,we.cluster_id,ne,_e,be):be<_e?be++:K.push(ke),K.length===ne)break}return be}_createTree(K){let X=new f.aU(K.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ne=0;ne<K.length;ne+=this.stride)X.add(K[ne],K[ne+1]);return X.finish(),X.data=K,X}_addTileFeatures(K,X,ne,_e,be,Ie){for(let ke of K){let we=ke*this.stride,Oe=X[we+5]>1,Xe,Ge,lt;if(Oe)Xe=wt(X,we,this.clusterProps),Ge=X[we],lt=X[we+1];else{let fi=this.points[X[we+3]];Xe=fi.properties;let[oi,Le]=fi.geometry.coordinates;Ge=kt(oi),lt=si(Le)}let pt={type:1,geometry:[[Math.round(this.options.extent*(Ge*be-ne)),Math.round(this.options.extent*(lt*be-_e))]],tags:Xe},Et;Et=Oe||this.options.generateId?X[we+3]:this.points[X[we+3]].id,Et!==void 0&&(pt.id=Et),Ie.features.push(pt)}}_limitZoom(K){return Math.max(this.options.minZoom,Math.min(Math.floor(+K),this.options.maxZoom+1))}_cluster(K,X){let{radius:ne,extent:_e,reduce:be,minPoints:Ie}=this.options,ke=ne/(_e*Math.pow(2,X)),we=K.data,Oe=[],Xe=this.stride;for(let Ge=0;Ge<we.length;Ge+=Xe){if(we[Ge+2]<=X)continue;we[Ge+2]=X;let lt=we[Ge],pt=we[Ge+1],Et=K.within(we[Ge],we[Ge+1],ke),fi=we[Ge+5],oi=fi;for(let Le of Et){let Si=Le*Xe;we[Si+2]>X&&(oi+=we[Si+5])}if(oi>fi&&oi>=Ie){let Le,Si=lt*fi,wr=pt*fi,Mt=-1,mi=(Ge/Xe<<5)+(X+1)+this.points.length;for(let Sr of Et){let Ti=Sr*Xe;if(we[Ti+2]<=X)continue;we[Ti+2]=X;let $i=we[Ti+5];Si+=we[Ti]*$i,wr+=we[Ti+1]*$i,we[Ti+4]=mi,be&&(Le||(Le=this._map(we,Ge,!0),Mt=this.clusterProps.length,this.clusterProps.push(Le)),be(Le,this._map(we,Ti)))}we[Ge+4]=mi,Oe.push(Si/oi,wr/oi,1/0,mi,-1,oi),be&&Oe.push(Mt)}else{for(let Le=0;Le<Xe;Le++)Oe.push(we[Ge+Le]);if(oi>1)for(let Le of Et){let Si=Le*Xe;if(!(we[Si+2]<=X)){we[Si+2]=X;for(let wr=0;wr<Xe;wr++)Oe.push(we[Si+wr])}}}}return Oe}_getOriginId(K){return K-this.points.length>>5}_getOriginZoom(K){return(K-this.points.length)%32}_map(K,X,ne){if(K[X+5]>1){let Ie=this.clusterProps[K[X+6]];return ne?Object.assign({},Ie):Ie}let _e=this.points[K[X+3]].properties,be=this.options.map(_e);return ne&&be===_e?Object.assign({},be):be}}function Gt(Pe,K,X){return{type:"Feature",id:Pe[K+3],properties:wt(Pe,K,X),geometry:{type:"Point",coordinates:[(ne=Pe[K],360*(ne-.5)),ri(Pe[K+1])]}};var ne}function wt(Pe,K,X){let ne=Pe[K+5],_e=ne>=1e4?`${Math.round(ne/1e3)}k`:ne>=1e3?Math.round(ne/100)/10+"k":ne,be=Pe[K+6],Ie=be===-1?{}:Object.assign({},X[be]);return Object.assign(Ie,{cluster:!0,cluster_id:Pe[K+3],point_count:ne,point_count_abbreviated:_e})}function kt(Pe){return Pe/360+.5}function si(Pe){let K=Math.sin(Pe*Math.PI/180),X=.5-.25*Math.log((1+K)/(1-K))/Math.PI;return X<0?0:X>1?1:X}function ri(Pe){let K=(180-360*Pe)*Math.PI/180;return 360*Math.atan(Math.exp(K))/Math.PI-90}function di(Pe,K,X,ne){let _e=ne,be=K+(X-K>>1),Ie,ke=X-K,we=Pe[K],Oe=Pe[K+1],Xe=Pe[X],Ge=Pe[X+1];for(let lt=K+3;lt<X;lt+=3){let pt=ni(Pe[lt],Pe[lt+1],we,Oe,Xe,Ge);if(pt>_e)Ie=lt,_e=pt;else if(pt===_e){let Et=Math.abs(lt-be);Et<ke&&(Ie=lt,ke=Et)}}_e>ne&&(Ie-K>3&&di(Pe,K,Ie,ne),Pe[Ie+2]=_e,X-Ie>3&&di(Pe,Ie,X,ne))}function ni(Pe,K,X,ne,_e,be){let Ie=_e-X,ke=be-ne;if(Ie!==0||ke!==0){let we=((Pe-X)*Ie+(K-ne)*ke)/(Ie*Ie+ke*ke);we>1?(X=_e,ne=be):we>0&&(X+=Ie*we,ne+=ke*we)}return Ie=Pe-X,ke=K-ne,Ie*Ie+ke*ke}function Ut(Pe,K,X,ne){let _e={id:Pe==null?null:Pe,type:K,geometry:X,tags:ne,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(K==="Point"||K==="MultiPoint"||K==="LineString")ut(_e,X);else if(K==="Polygon")ut(_e,X[0]);else if(K==="MultiLineString")for(let be of X)ut(_e,be);else if(K==="MultiPolygon")for(let be of X)ut(_e,be[0]);return _e}function ut(Pe,K){for(let X=0;X<K.length;X+=3)Pe.minX=Math.min(Pe.minX,K[X]),Pe.minY=Math.min(Pe.minY,K[X+1]),Pe.maxX=Math.max(Pe.maxX,K[X]),Pe.maxY=Math.max(Pe.maxY,K[X+1])}function Ft(Pe,K,X,ne){if(!K.geometry)return;let _e=K.geometry.coordinates;if(_e&&_e.length===0)return;let be=K.geometry.type,Ie=Math.pow(X.tolerance/((1<<X.maxZoom)*X.extent),2),ke=[],we=K.id;if(X.promoteId?we=K.properties[X.promoteId]:X.generateId&&(we=ne||0),be==="Point")_t(_e,ke);else if(be==="MultiPoint")for(let Oe of _e)_t(Oe,ke);else if(be==="LineString")Kt(_e,ke,Ie,!1);else if(be==="MultiLineString"){if(X.lineMetrics){for(let Oe of _e)ke=[],Kt(Oe,ke,Ie,!1),Pe.push(Ut(we,"LineString",ke,K.properties));return}Mi(_e,ke,Ie,!1)}else if(be==="Polygon")Mi(_e,ke,Ie,!0);else{if(be!=="MultiPolygon"){if(be==="GeometryCollection"){for(let Oe of K.geometry.geometries)Ft(Pe,{id:we,geometry:Oe,properties:K.properties},X,ne);return}throw new Error("Input data is not a valid GeoJSON object.")}for(let Oe of _e){let Xe=[];Mi(Oe,Xe,Ie,!0),ke.push(Xe)}}Pe.push(Ut(we,be,ke,K.properties))}function _t(Pe,K){K.push(Ii(Pe[0]),hi(Pe[1]),0)}function Kt(Pe,K,X,ne){let _e,be,Ie=0;for(let we=0;we<Pe.length;we++){let Oe=Ii(Pe[we][0]),Xe=hi(Pe[we][1]);K.push(Oe,Xe,0),we>0&&(Ie+=ne?(_e*Xe-Oe*be)/2:Math.sqrt(Math.pow(Oe-_e,2)+Math.pow(Xe-be,2))),_e=Oe,be=Xe}let ke=K.length-3;K[2]=1,di(K,0,ke,X),K[ke+2]=1,K.size=Math.abs(Ie),K.start=0,K.end=K.size}function Mi(Pe,K,X,ne){for(let _e=0;_e<Pe.length;_e++){let be=[];Kt(Pe[_e],be,X,ne),K.push(be)}}function Ii(Pe){return Pe/360+.5}function hi(Pe){let K=Math.sin(Pe*Math.PI/180),X=.5-.25*Math.log((1+K)/(1-K))/Math.PI;return X<0?0:X>1?1:X}function At(Pe,K,X,ne,_e,be,Ie,ke){if(ne/=K,be>=(X/=K)&&Ie<ne)return Pe;if(Ie<X||be>=ne)return null;let we=[];for(let Oe of Pe){let Xe=Oe.geometry,Ge=Oe.type,lt=_e===0?Oe.minX:Oe.minY,pt=_e===0?Oe.maxX:Oe.maxY;if(lt>=X&&pt<ne){we.push(Oe);continue}if(pt<X||lt>=ne)continue;let Et=[];if(Ge==="Point"||Ge==="MultiPoint")St(Xe,Et,X,ne,_e);else if(Ge==="LineString")sr(Xe,Et,X,ne,_e,!1,ke.lineMetrics);else if(Ge==="MultiLineString")cn(Xe,Et,X,ne,_e,!1);else if(Ge==="Polygon")cn(Xe,Et,X,ne,_e,!0);else if(Ge==="MultiPolygon")for(let fi of Xe){let oi=[];cn(fi,oi,X,ne,_e,!0),oi.length&&Et.push(oi)}if(Et.length){if(ke.lineMetrics&&Ge==="LineString"){for(let fi of Et)we.push(Ut(Oe.id,Ge,fi,Oe.tags));continue}Ge!=="LineString"&&Ge!=="MultiLineString"||(Et.length===1?(Ge="LineString",Et=Et[0]):Ge="MultiLineString"),Ge!=="Point"&&Ge!=="MultiPoint"||(Ge=Et.length===3?"Point":"MultiPoint"),we.push(Ut(Oe.id,Ge,Et,Oe.tags))}}return we.length?we:null}function St(Pe,K,X,ne,_e){for(let be=0;be<Pe.length;be+=3){let Ie=Pe[be+_e];Ie>=X&&Ie<=ne&&Mr(K,Pe[be],Pe[be+1],Pe[be+2])}}function sr(Pe,K,X,ne,_e,be,Ie){let ke=vi(Pe),we=_e===0?un:or,Oe,Xe,Ge=Pe.start;for(let oi=0;oi<Pe.length-3;oi+=3){let Le=Pe[oi],Si=Pe[oi+1],wr=Pe[oi+2],Mt=Pe[oi+3],mi=Pe[oi+4],Sr=_e===0?Le:Si,Ti=_e===0?Mt:mi,$i=!1;Ie&&(Oe=Math.sqrt(Math.pow(Le-Mt,2)+Math.pow(Si-mi,2))),Sr<X?Ti>X&&(Xe=we(ke,Le,Si,Mt,mi,X),Ie&&(ke.start=Ge+Oe*Xe)):Sr>ne?Ti<ne&&(Xe=we(ke,Le,Si,Mt,mi,ne),Ie&&(ke.start=Ge+Oe*Xe)):Mr(ke,Le,Si,wr),Ti<X&&Sr>=X&&(Xe=we(ke,Le,Si,Mt,mi,X),$i=!0),Ti>ne&&Sr<=ne&&(Xe=we(ke,Le,Si,Mt,mi,ne),$i=!0),!be&&$i&&(Ie&&(ke.end=Ge+Oe*Xe),K.push(ke),ke=vi(Pe)),Ie&&(Ge+=Oe)}let lt=Pe.length-3,pt=Pe[lt],Et=Pe[lt+1],fi=_e===0?pt:Et;fi>=X&&fi<=ne&&Mr(ke,pt,Et,Pe[lt+2]),lt=ke.length-3,be&&lt>=3&&(ke[lt]!==ke[0]||ke[lt+1]!==ke[1])&&Mr(ke,ke[0],ke[1],ke[2]),ke.length&&K.push(ke)}function vi(Pe){let K=[];return K.size=Pe.size,K.start=Pe.start,K.end=Pe.end,K}function cn(Pe,K,X,ne,_e,be){for(let Ie of Pe)sr(Ie,K,X,ne,_e,be,!1)}function Mr(Pe,K,X,ne){Pe.push(K,X,ne)}function un(Pe,K,X,ne,_e,be){let Ie=(be-K)/(ne-K);return Mr(Pe,be,X+(_e-X)*Ie,1),Ie}function or(Pe,K,X,ne,_e,be){let Ie=(be-X)/(_e-X);return Mr(Pe,K+(ne-K)*Ie,be,1),Ie}function wn(Pe,K){let X=[];for(let ne=0;ne<Pe.length;ne++){let _e=Pe[ne],be=_e.type,Ie;if(be==="Point"||be==="MultiPoint"||be==="LineString")Ie=pr(_e.geometry,K);else if(be==="MultiLineString"||be==="Polygon"){Ie=[];for(let ke of _e.geometry)Ie.push(pr(ke,K))}else if(be==="MultiPolygon"){Ie=[];for(let ke of _e.geometry){let we=[];for(let Oe of ke)we.push(pr(Oe,K));Ie.push(we)}}X.push(Ut(_e.id,be,Ie,_e.tags))}return X}function pr(Pe,K){let X=[];X.size=Pe.size,Pe.start!==void 0&&(X.start=Pe.start,X.end=Pe.end);for(let ne=0;ne<Pe.length;ne+=3)X.push(Pe[ne]+K,Pe[ne+1],Pe[ne+2]);return X}function gr(Pe,K){if(Pe.transformed)return Pe;let X=1<<Pe.z,ne=Pe.x,_e=Pe.y;for(let be of Pe.features){let Ie=be.geometry,ke=be.type;if(be.geometry=[],ke===1)for(let we=0;we<Ie.length;we+=2)be.geometry.push(Ln(Ie[we],Ie[we+1],K,X,ne,_e));else for(let we=0;we<Ie.length;we++){let Oe=[];for(let Xe=0;Xe<Ie[we].length;Xe+=2)Oe.push(Ln(Ie[we][Xe],Ie[we][Xe+1],K,X,ne,_e));be.geometry.push(Oe)}}return Pe.transformed=!0,Pe}function Ln(Pe,K,X,ne,_e,be){return[Math.round(X*(Pe*ne-_e)),Math.round(X*(K*ne-be))]}function Oi(Pe,K,X,ne,_e){let be=K===_e.maxZoom?0:_e.tolerance/((1<<K)*_e.extent),Ie={features:[],numPoints:0,numSimplified:0,numFeatures:Pe.length,source:null,x:X,y:ne,z:K,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(let ke of Pe)Dn(Ie,ke,be,_e);return Ie}function Dn(Pe,K,X,ne){let _e=K.geometry,be=K.type,Ie=[];if(Pe.minX=Math.min(Pe.minX,K.minX),Pe.minY=Math.min(Pe.minY,K.minY),Pe.maxX=Math.max(Pe.maxX,K.maxX),Pe.maxY=Math.max(Pe.maxY,K.maxY),be==="Point"||be==="MultiPoint")for(let ke=0;ke<_e.length;ke+=3)Ie.push(_e[ke],_e[ke+1]),Pe.numPoints++,Pe.numSimplified++;else if(be==="LineString")Ya(Ie,_e,Pe,X,!1,!1);else if(be==="MultiLineString"||be==="Polygon")for(let ke=0;ke<_e.length;ke++)Ya(Ie,_e[ke],Pe,X,be==="Polygon",ke===0);else if(be==="MultiPolygon")for(let ke=0;ke<_e.length;ke++){let we=_e[ke];for(let Oe=0;Oe<we.length;Oe++)Ya(Ie,we[Oe],Pe,X,!0,Oe===0)}if(Ie.length){let ke=K.tags||null;if(be==="LineString"&&ne.lineMetrics){ke={};for(let Oe in K.tags)ke[Oe]=K.tags[Oe];ke.mapbox_clip_start=_e.start/_e.size,ke.mapbox_clip_end=_e.end/_e.size}let we={geometry:Ie,type:be==="Polygon"||be==="MultiPolygon"?3:be==="LineString"||be==="MultiLineString"?2:1,tags:ke};K.id!==null&&(we.id=K.id),Pe.features.push(we)}}function Ya(Pe,K,X,ne,_e,be){let Ie=ne*ne;if(ne>0&&K.size<(_e?Ie:ne))return void(X.numPoints+=K.length/3);let ke=[];for(let we=0;we<K.length;we+=3)(ne===0||K[we+2]>Ie)&&(X.numSimplified++,ke.push(K[we],K[we+1])),X.numPoints++;_e&&(function(we,Oe){let Xe=0;for(let Ge=0,lt=we.length,pt=lt-2;Ge<lt;pt=Ge,Ge+=2)Xe+=(we[Ge]-we[pt])*(we[Ge+1]+we[pt+1]);if(Xe>0===Oe)for(let Ge=0,lt=we.length;Ge<lt/2;Ge+=2){let pt=we[Ge],Et=we[Ge+1];we[Ge]=we[lt-2-Ge],we[Ge+1]=we[lt-1-Ge],we[lt-2-Ge]=pt,we[lt-1-Ge]=Et}})(ke,be),Pe.push(ke)}let Xa={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Yn{constructor(K,X){let ne=(X=this.options=(function(be,Ie){for(let ke in Ie)be[ke]=Ie[ke];return be})(Object.create(Xa),X)).debug;if(ne&&console.time("preprocess data"),X.maxZoom<0||X.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(X.promoteId&&X.generateId)throw new Error("promoteId and generateId cannot be used together.");let _e=(function(be,Ie){let ke=[];if(be.type==="FeatureCollection")for(let we=0;we<be.features.length;we++)Ft(ke,be.features[we],Ie,we);else Ft(ke,be.type==="Feature"?be:{geometry:be},Ie);return ke})(K,X);this.tiles={},this.tileCoords=[],ne&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",X.indexMaxZoom,X.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),_e=(function(be,Ie){let ke=Ie.buffer/Ie.extent,we=be,Oe=At(be,1,-1-ke,ke,0,-1,2,Ie),Xe=At(be,1,1-ke,2+ke,0,-1,2,Ie);return(Oe||Xe)&&(we=At(be,1,-ke,1+ke,0,-1,2,Ie)||[],Oe&&(we=wn(Oe,1).concat(we)),Xe&&(we=we.concat(wn(Xe,-1)))),we})(_e,X),_e.length&&this.splitTile(_e,0,0,0),ne&&(_e.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(K,X,ne,_e,be,Ie,ke){let we=[K,X,ne,_e],Oe=this.options,Xe=Oe.debug;for(;we.length;){_e=we.pop(),ne=we.pop(),X=we.pop(),K=we.pop();let Ge=1<<X,lt=Sn(X,ne,_e),pt=this.tiles[lt];if(!pt&&(Xe>1&&console.time("creation"),pt=this.tiles[lt]=Oi(K,X,ne,_e,Oe),this.tileCoords.push({z:X,x:ne,y:_e}),Xe)){Xe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",X,ne,_e,pt.numFeatures,pt.numPoints,pt.numSimplified),console.timeEnd("creation"));let $i=`z${X}`;this.stats[$i]=(this.stats[$i]||0)+1,this.total++}if(pt.source=K,be==null){if(X===Oe.indexMaxZoom||pt.numPoints<=Oe.indexMaxPoints)continue}else{if(X===Oe.maxZoom||X===be)continue;if(be!=null){let $i=be-X;if(ne!==Ie>>$i||_e!==ke>>$i)continue}}if(pt.source=null,K.length===0)continue;Xe>1&&console.time("clipping");let Et=.5*Oe.buffer/Oe.extent,fi=.5-Et,oi=.5+Et,Le=1+Et,Si=null,wr=null,Mt=null,mi=null,Sr=At(K,Ge,ne-Et,ne+oi,0,pt.minX,pt.maxX,Oe),Ti=At(K,Ge,ne+fi,ne+Le,0,pt.minX,pt.maxX,Oe);K=null,Sr&&(Si=At(Sr,Ge,_e-Et,_e+oi,1,pt.minY,pt.maxY,Oe),wr=At(Sr,Ge,_e+fi,_e+Le,1,pt.minY,pt.maxY,Oe),Sr=null),Ti&&(Mt=At(Ti,Ge,_e-Et,_e+oi,1,pt.minY,pt.maxY,Oe),mi=At(Ti,Ge,_e+fi,_e+Le,1,pt.minY,pt.maxY,Oe),Ti=null),Xe>1&&console.timeEnd("clipping"),we.push(Si||[],X+1,2*ne,2*_e),we.push(wr||[],X+1,2*ne,2*_e+1),we.push(Mt||[],X+1,2*ne+1,2*_e),we.push(mi||[],X+1,2*ne+1,2*_e+1)}}getTile(K,X,ne){K=+K,X=+X,ne=+ne;let _e=this.options,{extent:be,debug:Ie}=_e;if(K<0||K>24)return null;let ke=1<<K,we=Sn(K,X=X+ke&ke-1,ne);if(this.tiles[we])return gr(this.tiles[we],be);Ie>1&&console.log("drilling down to z%d-%d-%d",K,X,ne);let Oe,Xe=K,Ge=X,lt=ne;for(;!Oe&&Xe>0;)Xe--,Ge>>=1,lt>>=1,Oe=this.tiles[Sn(Xe,Ge,lt)];return Oe&&Oe.source?(Ie>1&&(console.log("found parent tile z%d-%d-%d",Xe,Ge,lt),console.time("drilling down")),this.splitTile(Oe.source,Xe,Ge,lt,K,X,ne),Ie>1&&console.timeEnd("drilling down"),this.tiles[we]?gr(this.tiles[we],be):null):null}}function Sn(Pe,K,X){return 32*((1<<Pe)*X+K)+Pe}class Ka extends H{constructor(K,X,ne,_e=Ss){super(K,X,ne),this._dataUpdateable=new Map,this._createGeoJSONIndex=_e}loadVectorTile(K,X){return f._(this,void 0,void 0,(function*(){let ne=K.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");let _e=this._geoJSONIndex.getTile(ne.z,ne.x,ne.y);return _e?G(new f.d3(_e.features,{version:2,extent:f.a5})):null}))}loadData(K){return f._(this,void 0,void 0,(function*(){var X;(X=this._pendingRequest)===null||X===void 0||X.abort();let ne=this._startPerformance(K);this._pendingRequest=new AbortController;try{(!this._pendingData||K.request||K.data||K.dataDiff)&&(this._pendingData=this.loadAndProcessGeoJSON(K,this._pendingRequest));let _e=yield this._pendingData;this._geoJSONIndex=this._createGeoJSONIndex(_e,K),this.loaded={};let be={};return this._finishPerformance(ne,K,be),be}catch(_e){if(delete this._pendingRequest,f.Z(_e))return{abandoned:!0};throw _e}}))}_startPerformance(K){var X;if(!((X=K==null?void 0:K.request)===null||X===void 0)&&X.collectResourceTiming)return new f.c$(K.request)}_finishPerformance(K,X,ne){if(!K)return;let _e=K.finish();_e&&(ne.resourceTiming={},ne.resourceTiming[X.source]=JSON.parse(JSON.stringify(_e)))}getData(){return f._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(K){let X=this.loaded;return X&&X[K.uid]?super.reloadTile(K):this.loadTile(K)}loadAndProcessGeoJSON(K,X){return f._(this,void 0,void 0,(function*(){let ne;if(K.request?ne=yield this.loadGeoJSONFromUrl(K.request,K.promoteId,X):K.data?ne=this._loadGeoJSONFromObject(K.data,K.promoteId):K.dataDiff&&(ne=this._loadGeoJSONFromDiff(K.dataDiff,K.promoteId,K.source)),delete this._pendingRequest,typeof ne!="object")throw new Error(`Input data given to '${K.source}' is not a valid GeoJSON object.`);return Ye(ne,!0),K.filter&&(ne=this._filterGeoJSON(ne,K.filter)),ne}))}loadGeoJSONFromUrl(K,X,ne){return f._(this,void 0,void 0,(function*(){let _e=yield f.j(K,ne);return this._dataUpdateable=f.a7(_e.data,X)?f.a8(_e.data,X):void 0,_e.data}))}_loadGeoJSONFromObject(K,X){return this._dataUpdateable=f.a7(K,X)?f.a8(K,X):void 0,K}_loadGeoJSONFromDiff(K,X,ne){if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ne}`);f.a9(this._dataUpdateable,K,X);let _e=Array.from(this._dataUpdateable.values());return this._toFeatureCollection(_e)}_filterGeoJSON(K,X){let ne=f.d4(X,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ne.result==="error")throw new Error(ne.value.map((be=>`${be.key}: ${be.message}`)).join(", "));let _e=K.features.filter((be=>ne.value.evaluate({zoom:0},be)));return this._toFeatureCollection(_e)}_toFeatureCollection(K){return{type:"FeatureCollection",features:K}}removeSource(K){return f._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(K){return this._geoJSONIndex.getClusterExpansionZoom(K.clusterId)}getClusterChildren(K){return this._geoJSONIndex.getChildren(K.clusterId)}getClusterLeaves(K){return this._geoJSONIndex.getLeaves(K.clusterId,K.limit,K.offset)}}function Ss(Pe,K){return K.cluster?new Wt((function({superclusterOptions:X,clusterProperties:ne}){if(!ne||!X)return X;let _e={},be={},Ie={accumulated:null,zoom:0},ke={properties:null},we=Object.keys(ne);for(let Oe of we){let[Xe,Ge]=ne[Oe],lt=f.d4(Ge),pt=f.d4(typeof Xe=="string"?[Xe,["accumulated"],["get",Oe]]:Xe);_e[Oe]=lt.value,be[Oe]=pt.value}return X.map=Oe=>{ke.properties=Oe;let Xe={};for(let Ge of we)Xe[Ge]=_e[Ge].evaluate(Ie,ke);return Xe},X.reduce=(Oe,Xe)=>{ke.properties=Xe;for(let Ge of we)Ie.accumulated=Oe[Ge],Oe[Ge]=be[Ge].evaluate(Ie,ke)},X})(K)).load(Pe.features):(function(X,ne){return new Yn(X,ne)})(Pe,K.geojsonVtOptions)}class Xr{constructor(K){this.self=K,this.actor=new f.L(K),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(X,ne)=>{if(this.externalWorkerSourceTypes[X])throw new Error(`Worker source with name "${X}" already registered.`);this.externalWorkerSourceTypes[X]=ne},this.self.addProtocol=f.cK,this.self.removeProtocol=f.cL,this.self.registerRTLTextPlugin=X=>{f.d5.setMethods(X)},this.actor.registerMessageHandler("LDT",((X,ne)=>this._getDEMWorkerSource(X,ne.source).loadTile(ne))),this.actor.registerMessageHandler("RDT",((X,ne)=>f._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(X,ne.source).removeTile(ne)})))),this.actor.registerMessageHandler("GCEZ",((X,ne)=>f._(this,void 0,void 0,(function*(){return this._getWorkerSource(X,ne.type,ne.source).getClusterExpansionZoom(ne)})))),this.actor.registerMessageHandler("GCC",((X,ne)=>f._(this,void 0,void 0,(function*(){return this._getWorkerSource(X,ne.type,ne.source).getClusterChildren(ne)})))),this.actor.registerMessageHandler("GCL",((X,ne)=>f._(this,void 0,void 0,(function*(){return this._getWorkerSource(X,ne.type,ne.source).getClusterLeaves(ne)})))),this.actor.registerMessageHandler("LD",((X,ne)=>this._getWorkerSource(X,ne.type,ne.source).loadData(ne))),this.actor.registerMessageHandler("GD",((X,ne)=>this._getWorkerSource(X,ne.type,ne.source).getData())),this.actor.registerMessageHandler("LT",((X,ne)=>this._getWorkerSource(X,ne.type,ne.source).loadTile(ne))),this.actor.registerMessageHandler("RT",((X,ne)=>this._getWorkerSource(X,ne.type,ne.source).reloadTile(ne))),this.actor.registerMessageHandler("AT",((X,ne)=>this._getWorkerSource(X,ne.type,ne.source).abortTile(ne))),this.actor.registerMessageHandler("RMT",((X,ne)=>this._getWorkerSource(X,ne.type,ne.source).removeTile(ne))),this.actor.registerMessageHandler("RS",((X,ne)=>f._(this,void 0,void 0,(function*(){if(!this.workerSources[X]||!this.workerSources[X][ne.type]||!this.workerSources[X][ne.type][ne.source])return;let _e=this.workerSources[X][ne.type][ne.source];delete this.workerSources[X][ne.type][ne.source],_e.removeSource!==void 0&&_e.removeSource(ne)})))),this.actor.registerMessageHandler("RM",(X=>f._(this,void 0,void 0,(function*(){delete this.layerIndexes[X],delete this.availableImages[X],delete this.workerSources[X],delete this.demWorkerSources[X],this.globalStates.delete(X)})))),this.actor.registerMessageHandler("SR",((X,ne)=>f._(this,void 0,void 0,(function*(){this.referrer=ne})))),this.actor.registerMessageHandler("SRPS",((X,ne)=>this._syncRTLPluginState(X,ne))),this.actor.registerMessageHandler("IS",((X,ne)=>f._(this,void 0,void 0,(function*(){this.self.importScripts(ne)})))),this.actor.registerMessageHandler("SI",((X,ne)=>this._setImages(X,ne))),this.actor.registerMessageHandler("UL",((X,ne)=>f._(this,void 0,void 0,(function*(){this._getLayerIndex(X).update(ne.layers,ne.removedIds,this._getGlobalState(X))})))),this.actor.registerMessageHandler("UGS",((X,ne)=>f._(this,void 0,void 0,(function*(){let _e=this._getGlobalState(X);for(let be in ne)_e[be]=ne[be]})))),this.actor.registerMessageHandler("SL",((X,ne)=>f._(this,void 0,void 0,(function*(){this._getLayerIndex(X).replace(ne,this._getGlobalState(X))}))))}_getGlobalState(K){let X=this.globalStates.get(K);return X||(X={},this.globalStates.set(K,X)),X}_setImages(K,X){return f._(this,void 0,void 0,(function*(){this.availableImages[K]=X;for(let ne in this.workerSources[K]){let _e=this.workerSources[K][ne];for(let be in _e)_e[be].availableImages=X}}))}_syncRTLPluginState(K,X){return f._(this,void 0,void 0,(function*(){return yield f.d5.syncState(X,this.self.importScripts)}))}_getAvailableImages(K){let X=this.availableImages[K];return X||(X=[]),X}_getLayerIndex(K){let X=this.layerIndexes[K];return X||(X=this.layerIndexes[K]=new a),X}_getWorkerSource(K,X,ne){if(this.workerSources[K]||(this.workerSources[K]={}),this.workerSources[K][X]||(this.workerSources[K][X]={}),!this.workerSources[K][X][ne]){let _e={sendAsync:(be,Ie)=>(be.targetMapId=K,this.actor.sendAsync(be,Ie))};switch(X){case"vector":this.workerSources[K][X][ne]=new H(_e,this._getLayerIndex(K),this._getAvailableImages(K));break;case"geojson":this.workerSources[K][X][ne]=new Ka(_e,this._getLayerIndex(K),this._getAvailableImages(K));break;default:this.workerSources[K][X][ne]=new this.externalWorkerSourceTypes[X](_e,this._getLayerIndex(K),this._getAvailableImages(K))}}return this.workerSources[K][X][ne]}_getDEMWorkerSource(K,X){return this.demWorkerSources[K]||(this.demWorkerSources[K]={}),this.demWorkerSources[K][X]||(this.demWorkerSources[K][X]=new Se),this.demWorkerSources[K][X]}}return f.i(self)&&(self.worker=new Xr(self)),Xr})),p("index",["exports","./shared"],(function(f,a){"use strict";var T="5.14.0";function M(){var _=new a.A(4);return a.A!=Float32Array&&(_[1]=0,_[2]=0),_[0]=1,_[3]=1,_}let R,V,Y,re={frame(_,t,n){let u=requestAnimationFrame((b=>{m(),t(b)})),{unsubscribe:m}=a.s(_.signal,"abort",(()=>{m(),cancelAnimationFrame(u),n(new a.a(_.signal.reason))}),!1)},frameAsync(_){return new Promise(((t,n)=>{this.frame(_,t,n)}))},getImageData(_,t=0){return this.getImageCanvasContext(_).getImageData(-t,-t,_.width+2*t,_.height+2*t)},getImageCanvasContext(_){let t=window.document.createElement("canvas"),n=t.getContext("2d",{willReadFrequently:!0});if(!n)throw new Error("failed to create canvas 2d context");return t.width=_.width,t.height=_.height,n.drawImage(_,0,0,_.width,_.height),n},resolveURL:_=>(R||(R=document.createElement("a")),R.href=_,R.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return Y!==void 0?Y:!!matchMedia&&(V==null&&(V=matchMedia("(prefers-reduced-motion: reduce)")),V.matches)},set prefersReducedMotion(_){Y=_}},G=new class{constructor(){this._realTime=typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),this._frozenAt=null}getCurrentTime(){return this._frozenAt!==null?this._frozenAt:this._realTime()}setNow(_){this._frozenAt=_}restoreNow(){this._frozenAt=null}isFrozen(){return this._frozenAt!==null}};function te(){return G.getCurrentTime()}class H{static testProp(t){if(!H.docStyle)return t[0];for(let n=0;n<t.length;n++)if(t[n]in H.docStyle)return t[n];return t[0]}static create(t,n,u){let m=window.document.createElement(t);return n!==void 0&&(m.className=n),u&&u.appendChild(m),m}static createNS(t,n){return window.document.createElementNS(t,n)}static disableDrag(){H.docStyle&&H.selectProp&&(H.userSelect=H.docStyle[H.selectProp],H.docStyle[H.selectProp]="none")}static enableDrag(){H.docStyle&&H.selectProp&&(H.docStyle[H.selectProp]=H.userSelect)}static setTransform(t,n){t.style[H.transformProp]=n}static addEventListener(t,n,u,m={}){t.addEventListener(n,u,"passive"in m?m:m.capture)}static removeEventListener(t,n,u,m={}){t.removeEventListener(n,u,"passive"in m?m:m.capture)}static suppressClickInternal(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("click",H.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",H.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",H.suppressClickInternal,!0)}),0)}static getScale(t){let n=t.getBoundingClientRect();return{x:n.width/t.offsetWidth||1,y:n.height/t.offsetHeight||1,boundingClientRect:n}}static getPoint(t,n,u){let m=n.boundingClientRect;return new a.P((u.clientX-m.left)/n.x-t.clientLeft,(u.clientY-m.top)/n.y-t.clientTop)}static mousePos(t,n){let u=H.getScale(t);return H.getPoint(t,u,n)}static touchPos(t,n){let u=[],m=H.getScale(t);for(let b=0;b<n.length;b++)u.push(H.getPoint(t,m,n[b]));return u}static mouseButton(t){return t.button}static remove(t){t.parentNode&&t.parentNode.removeChild(t)}static sanitize(t){let n=new DOMParser().parseFromString(t,"text/html").body||document.createElement("body"),u=n.querySelectorAll("script");for(let m of u)m.remove();return H.clean(n),n.innerHTML}static isPossiblyDangerous(t,n){let u=n.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(t)||!u.includes("javascript:")&&!u.includes("data:"))||!!t.startsWith("on")||void 0}static clean(t){let n=t.children;for(let u of n)H.removeAttributes(u),H.clean(u)}static removeAttributes(t){for(let{name:n,value:u}of t.attributes)H.isPossiblyDangerous(n,u)&&t.removeAttribute(n)}}H.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,H.selectProp=H.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),H.transformProp=H.testProp(["transform","WebkitTransform"]);let Se={supported:!1,testSupport:function(_){!Ce&&ye&&(Ye?rt(_):je=_)}},je,ye,Ce=!1,Ye=!1;function rt(_){let t=_.createTexture();_.bindTexture(_.TEXTURE_2D,t);try{if(_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,ye),_.isContextLost())return;Se.supported=!0}catch(n){}_.deleteTexture(t),Ce=!0}var Ct;typeof document!="undefined"&&(ye=document.createElement("img"),ye.onload=()=>{je&&rt(je),je=null,Ye=!0},ye.onerror=()=>{Ce=!0,je=null},ye.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(_){let t,n,u,m;_.resetRequestQueue=()=>{t=[],n=0,u=0,m={}},_.addThrottleControl=E=>{let z=u++;return m[z]=E,z},_.removeThrottleControl=E=>{delete m[E],w()},_.getImage=(E,z,O=!0)=>new Promise(((N,j)=>{Se.supported&&(E.headers||(E.headers={}),E.headers.accept="image/webp,*/*"),a.e(E,{type:"image"}),t.push({abortController:z,requestParameters:E,supportImageRefresh:O,state:"queued",onError:Z=>{j(Z)},onSuccess:Z=>{N(Z)}}),w()}));let b=E=>a._(this,void 0,void 0,(function*(){E.state="running";let{requestParameters:z,supportImageRefresh:O,onError:N,onSuccess:j,abortController:Z}=E,Q=O===!1&&!a.i(self)&&!a.g(z.url)&&(!z.headers||Object.keys(z.headers).reduce(((oe,ce)=>oe&&ce==="accept"),!0));n++;let se=Q?k(z,Z):a.m(z,Z);try{let oe=yield se;delete E.abortController,E.state="completed",oe.data instanceof HTMLImageElement||a.b(oe.data)?j(oe):oe.data&&j({data:yield(le=oe.data,typeof createImageBitmap=="function"?a.f(le):a.h(le)),cacheControl:oe.cacheControl,expires:oe.expires})}catch(oe){delete E.abortController,N(oe)}finally{n--,w()}var le})),w=()=>{let E=(()=>{for(let z of Object.keys(m))if(m[z]())return!0;return!1})()?a.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let z=n;z<E&&t.length>0;z++){let O=t.shift();O.abortController.signal.aborted?z--:b(O)}},k=(E,z)=>new Promise(((O,N)=>{let j=new Image,Z=E.url,Q=E.credentials;Q&&Q==="include"?j.crossOrigin="use-credentials":(Q&&Q==="same-origin"||!a.d(Z))&&(j.crossOrigin="anonymous"),z.signal.addEventListener("abort",(()=>{j.src="",N(new a.a(z.signal.reason))})),j.fetchPriority="high",j.onload=()=>{j.onerror=j.onload=null,O({data:j})},j.onerror=()=>{j.onerror=j.onload=null,z.signal.aborted||N(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},j.src=Z}))})(Ct||(Ct={})),Ct.resetRequestQueue();class gt{constructor(t){this._transformRequestFn=t!=null?t:null}transformRequest(t,n){return this._transformRequestFn&&this._transformRequestFn(t,n)||{url:t}}setTransformRequest(t){this._transformRequestFn=t}}function Wt(_){let t=[];if(typeof _=="string")t.push({id:"default",url:_});else if(_&&_.length>0){let n=[];for(let{id:u,url:m}of _){let b=`${u}${m}`;n.indexOf(b)===-1&&(n.push(b),t.push({id:u,url:m}))}}return t}function Gt(_,t,n){try{let u=new URL(_);return u.pathname+=`${t}${n}`,u.toString()}catch(u){throw new Error(`Invalid sprite URL "${_}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function wt(_){let{userImage:t}=_;return!!(t&&t.render&&t.render())&&(_.data.replace(new Uint8Array(t.data.buffer)),!0)}class kt extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}destroy(){this.atlasTexture&&(this.atlasTexture.destroy(),this.atlasTexture=null);for(let t of Object.keys(this.images))this.removeImage(t);this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(let{ids:n,promiseResolve:u}of this.requestors)u(this._getImagesForIds(n));this.requestors=[]}}getImage(t){let n=this.images[t];if(n&&!n.data&&n.spriteData){let u=n.spriteData;n.data=new a.R({width:u.width,height:u.height},u.context.getImageData(u.x,u.y,u.width,u.height).data),n.spriteData=null}return n}addImage(t,n){if(this.images[t])throw new Error(`Image id ${t} already exist, use updateImage instead`);this._validate(t,n)&&(this.images[t]=n)}_validate(t,n){let u=!0,m=n.data||n.spriteData;return this._validateStretch(n.stretchX,m&&m.width)||(this.fire(new a.k(new Error(`Image "${t}" has invalid "stretchX" value`))),u=!1),this._validateStretch(n.stretchY,m&&m.height)||(this.fire(new a.k(new Error(`Image "${t}" has invalid "stretchY" value`))),u=!1),this._validateContent(n.content,n)||(this.fire(new a.k(new Error(`Image "${t}" has invalid "content" value`))),u=!1),u}_validateStretch(t,n){if(!t)return!0;let u=0;for(let m of t){if(m[0]<u||m[1]<m[0]||n<m[1])return!1;u=m[1]}return!0}_validateContent(t,n){if(!t)return!0;if(t.length!==4)return!1;let u=n.spriteData,m=u&&u.width||n.data.width,b=u&&u.height||n.data.height;return!(t[0]<0||m<t[0]||t[1]<0||b<t[1]||t[2]<0||m<t[2]||t[3]<0||b<t[3]||t[2]<t[0]||t[3]<t[1])}updateImage(t,n,u=!0){let m=this.getImage(t);if(u&&(m.data.width!==n.data.width||m.data.height!==n.data.height))throw new Error(`size mismatch between old image (${m.data.width}x${m.data.height}) and new image (${n.data.width}x${n.data.height}).`);n.version=m.version+1,this.images[t]=n,this.updatedImages[t]=!0}removeImage(t){let n=this.images[t];delete this.images[t],delete this.patterns[t],n.userImage&&n.userImage.onRemove&&n.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t){return new Promise(((n,u)=>{let m=!0;if(!this.isLoaded())for(let b of t)this.images[b]||(m=!1);this.isLoaded()||m?n(this._getImagesForIds(t)):this.requestors.push({ids:t,promiseResolve:n})}))}_getImagesForIds(t){let n={};for(let u of t){let m=this.getImage(u);m||(this.fire(new a.l("styleimagemissing",{id:u})),m=this.getImage(u)),m?n[u]={data:m.data.clone(),pixelRatio:m.pixelRatio,sdf:m.sdf,version:m.version,stretchX:m.stretchX,stretchY:m.stretchY,content:m.content,textFitWidth:m.textFitWidth,textFitHeight:m.textFitHeight,hasRenderCallback:!!(m.userImage&&m.userImage.render)}:a.w(`Image "${u}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return n}getPixelSize(){let{width:t,height:n}=this.atlasImage;return{width:t,height:n}}getPattern(t){let n=this.patterns[t],u=this.getImage(t);if(!u)return null;if(n&&n.position.version===u.version)return n.position;if(n)n.position.version=u.version;else{let m={w:u.data.width+2,h:u.data.height+2,x:0,y:0},b=new a.I(m,u);this.patterns[t]={bin:m,position:b}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){let n=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.T(t,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}_updatePatternAtlas(){let t=[];for(let b in this.patterns)t.push(this.patterns[b].bin);let{w:n,h:u}=a.p(t),m=this.atlasImage;m.resize({width:n||1,height:u||1});for(let b in this.patterns){let{bin:w}=this.patterns[b],k=w.x+1,E=w.y+1,z=this.getImage(b).data,O=z.width,N=z.height;a.R.copy(z,m,{x:0,y:0},{x:k,y:E},{width:O,height:N}),a.R.copy(z,m,{x:0,y:N-1},{x:k,y:E-1},{width:O,height:1}),a.R.copy(z,m,{x:0,y:0},{x:k,y:E+N},{width:O,height:1}),a.R.copy(z,m,{x:O-1,y:0},{x:k-1,y:E},{width:1,height:N}),a.R.copy(z,m,{x:0,y:0},{x:k+O,y:E},{width:1,height:N})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(let n of t){if(this.callbackDispatchedThisFrame[n])continue;this.callbackDispatchedThisFrame[n]=!0;let u=this.getImage(n);u||a.w(`Image with ID: "${n}" was not found`),wt(u)&&this.updateImage(n,u)}}cloneImages(){let t={};for(let n in this.images){let u=this.images[n];t[n]=Object.assign(Object.assign({},u),{data:u.data?u.data.clone():null})}return t}}let si=1e20;function ri(_,t,n,u,m,b,w,k,E){for(let z=t;z<t+u;z++)di(_,n*b+z,b,m,w,k,E);for(let z=n;z<n+m;z++)di(_,z*b+t,1,u,w,k,E)}function di(_,t,n,u,m,b,w){b[0]=0,w[0]=-si,w[1]=si,m[0]=_[t];for(let k=1,E=0,z=0;k<u;k++){m[k]=_[t+k*n];let O=k*k;do{let N=b[E];z=(m[k]-m[N]+O-N*N)/(k-N)/2}while(z<=w[E]&&--E>-1);E++,b[E]=k,w[E]=z,w[E+1]=si}for(let k=0,E=0;k<u;k++){for(;w[E+1]<k;)E++;let z=b[E],O=k-z;_[t+k*n]=m[z]+O*O}}let ni=a.v.layout_symbol["text-font"].default.join(",");class Ut{constructor(t,n,u){this.requestManager=t,this.localIdeographFontFamily=n,this.entries={},this.lang=u}setURL(t){this.url=t}getGlyphs(t){return a._(this,void 0,void 0,(function*(){let n=[];for(let b in t)for(let w of t[b])n.push(this._getAndCacheGlyphsPromise(b,w));let u=yield Promise.all(n),m={};for(let{stack:b,id:w,glyph:k}of u)m[b]||(m[b]={}),m[b][w]=k&&{id:k.id,bitmap:k.bitmap.clone(),metrics:k.metrics};return m}))}_getAndCacheGlyphsPromise(t,n){return a._(this,void 0,void 0,(function*(){let u=this.entries[t];u||(u=this.entries[t]={glyphs:{},requests:{},ranges:{}});let m=u.glyphs[n];return m!==void 0?{stack:t,id:n,glyph:m}:!this.url||this._charUsesLocalIdeographFontFamily(n)?(m=u.glyphs[n]=this._drawGlyph(u,t,n),{stack:t,id:n,glyph:m}):yield this._downloadAndCacheRangePromise(t,n)}))}_downloadAndCacheRangePromise(t,n){return a._(this,void 0,void 0,(function*(){let u=this.entries[t],m=Math.floor(n/256);if(u.ranges[m])return{stack:t,id:n,glyph:null};if(!u.requests[m]){let b=Ut.loadGlyphRange(t,m,this.url,this.requestManager);u.requests[m]=b}try{let b=yield u.requests[m];for(let w in b)u.glyphs[+w]=b[+w];return u.ranges[m]=!0,{stack:t,id:n,glyph:b[n]||null}}catch(b){let w=u.glyphs[n]=this._drawGlyph(u,t,n);return this._warnOnMissingGlyphRange(w,m,n,b),{stack:t,id:n,glyph:w}}}))}_warnOnMissingGlyphRange(t,n,u,m){let b=256*n,w=b+255,k=u.toString(16).padStart(4,"0").toUpperCase();a.w(`Unable to load glyph range ${n}, ${b}-${w}. Rendering codepoint U+${k} locally instead. ${m}`)}_charUsesLocalIdeographFontFamily(t){return!!this.localIdeographFontFamily&&a.q(t)}_drawGlyph(t,n,u){let m=n===ni&&this.localIdeographFontFamily!==""&&this._charUsesLocalIdeographFontFamily(u),b=m?"ideographTinySDF":"tinySDF";t[b]||(t[b]=this._createTinySDF(m?this.localIdeographFontFamily:n));let w=t[b].draw(String.fromCodePoint(u));return{id:u,bitmap:new a.r({width:w.width||60,height:w.height||60},w.data),metrics:{width:w.glyphWidth/2||24,height:w.glyphHeight/2||24,left:w.glyphLeft/2+.5||0,top:w.glyphTop/2-27.5||-8,advance:w.glyphAdvance/2||24,isDoubleResolution:!0}}}_createTinySDF(t){let n=t?t.split(","):[];n.push("sans-serif");let u=n.map((m=>/[-\w]+/.test(m)?m:`'${CSS.escape(m)}'`)).join(",");return new Ut.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:u,fontWeight:this._fontWeight(n[0]),fontStyle:this._fontStyle(n[0]),lang:this.lang})}_fontStyle(t){return/italic/i.test(t)?"italic":/oblique/i.test(t)?"oblique":"normal"}_fontWeight(t){let n={thin:100,hairline:100,"extra light":200,"ultra light":200,light:300,normal:400,regular:400,medium:500,semibold:600,demibold:600,bold:700,"extra bold":800,"ultra bold":800,black:900,heavy:900,"extra black":950,"ultra black":950},u;for(let[m,b]of Object.entries(n))new RegExp(`\\b${m}\\b`,"i").test(t)&&(u=`${b}`);return u}destroy(){for(let t in this.entries){let n=this.entries[t];n.tinySDF&&(n.tinySDF=null),n.ideographTinySDF&&(n.ideographTinySDF=null),n.glyphs={},n.requests={},n.ranges={}}this.entries={}}}Ut.loadGlyphRange=function(_,t,n,u){return a._(this,void 0,void 0,(function*(){let m=256*t,b=m+255,w=u.transformRequest(n.replace("{fontstack}",_).replace("{range}",`${m}-${b}`),"Glyphs"),k=yield a.n(w,new AbortController);if(!k||!k.data)throw new Error(`Could not load glyph range. range: ${t}, ${m}-${b}`);let E={};for(let z of a.o(k.data))E[z.id]=z;return E}))},Ut.TinySDF=class{constructor({fontSize:_=24,buffer:t=3,radius:n=8,cutoff:u=.25,fontFamily:m="sans-serif",fontWeight:b="normal",fontStyle:w="normal",lang:k=null}={}){this.buffer=t,this.cutoff=u,this.radius=n,this.lang=k;let E=this.size=_+4*t,z=this._createCanvas(E),O=this.ctx=z.getContext("2d",{willReadFrequently:!0});O.font=`${w} ${b} ${_}px ${m}`,O.textBaseline="alphabetic",O.textAlign="left",O.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Uint16Array(E)}_createCanvas(_){let t=document.createElement("canvas");return t.width=t.height=_,t}draw(_){let{width:t,actualBoundingBoxAscent:n,actualBoundingBoxDescent:u,actualBoundingBoxLeft:m,actualBoundingBoxRight:b}=this.ctx.measureText(_),w=Math.ceil(n),k=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(b-m))),E=Math.min(this.size-this.buffer,w+Math.ceil(u)),z=k+2*this.buffer,O=E+2*this.buffer,N=Math.max(z*O,0),j=new Uint8ClampedArray(N),Z={data:j,width:z,height:O,glyphWidth:k,glyphHeight:E,glyphTop:w,glyphLeft:0,glyphAdvance:t};if(k===0||E===0)return Z;let{ctx:Q,buffer:se,gridInner:le,gridOuter:oe}=this;this.lang&&(Q.lang=this.lang),Q.clearRect(se,se,k,E),Q.fillText(_,se,se+w);let ce=Q.getImageData(se,se,k,E);oe.fill(si,0,N),le.fill(0,0,N);for(let me=0;me<E;me++)for(let de=0;de<k;de++){let ge=ce.data[4*(me*k+de)+3]/255;if(ge===0)continue;let xe=(me+se)*z+de+se;if(ge===1)oe[xe]=0,le[xe]=si;else{let pe=.5-ge;oe[xe]=pe>0?pe*pe:0,le[xe]=pe<0?pe*pe:0}}ri(oe,0,0,z,O,z,this.f,this.v,this.z),ri(le,se,se,k,E,z,this.f,this.v,this.z);for(let me=0;me<N;me++){let de=Math.sqrt(oe[me])-Math.sqrt(le[me]);j[me]=Math.round(255-255*(de/this.radius+this.cutoff))}return Z}};class ut{constructor(){this.specification=a.u.light.position}possiblyEvaluate(t,n){return a.F(t.expression.evaluate(n))}interpolate(t,n,u){return{x:a.G.number(t.x,n.x,u),y:a.G.number(t.y,n.y,u),z:a.G.number(t.z,n.z,u)}}}let Ft;class _t extends a.E{constructor(t){super(),Ft=Ft||new a.t({anchor:new a.D(a.u.light.anchor),position:new ut,color:new a.D(a.u.light.color),intensity:new a.D(a.u.light.intensity)}),this._transitionable=new a.x(Ft,void 0),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,n={}){if(!this._validate(a.y,t,n))for(let u in t){let m=t[u];u.endsWith(a.z)?this._transitionable.setTransition(u.slice(0,-a.z.length),m):this._transitionable.setValue(u,m)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,n,u){return(!u||u.validate!==!1)&&a.B(this,t.call(a.C,{value:n,style:{glyphs:!0,sprite:!0},styleSpec:a.u}))}}let Kt=new a.t({"sky-color":new a.D(a.u.sky["sky-color"]),"horizon-color":new a.D(a.u.sky["horizon-color"]),"fog-color":new a.D(a.u.sky["fog-color"]),"fog-ground-blend":new a.D(a.u.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.u.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.u.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.u.sky["atmosphere-blend"])});class Mi extends a.E{constructor(t){super(),this._transitionable=new a.x(Kt,void 0),this.setSky(t),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.H(0))}setSky(t,n={}){if(!this._validate(a.J,t,n)){t||(t={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(let u in t){let m=t[u];u.endsWith(a.z)?this._transitionable.setTransition(u.slice(0,-a.z.length),m):this._transitionable.setValue(u,m)}}}getSky(){return this._transitionable.serialize()}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,n,u={}){return(u==null?void 0:u.validate)!==!1&&a.B(this,t.call(a.C,a.e({value:n,style:{glyphs:!0,sprite:!0},styleSpec:a.u})))}calculateFogBlendOpacity(t){return t<60?0:t<70?(t-60)/10:1}}class Ii{constructor(t,n){this.width=t,this.height=n,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(t,n){let u=t.join(",")+String(n);return this.dashEntry[u]||(this.dashEntry[u]=this.addDash(t,n)),this.dashEntry[u]}getDashRanges(t,n,u){let m=[],b=t.length%2==1?-t[t.length-1]*u:0,w=t[0]*u,k=!0;m.push({left:b,right:w,isDash:k,zeroLength:t[0]===0});let E=t[0];for(let z=1;z<t.length;z++){k=!k;let O=t[z];b=E*u,E+=O,w=E*u,m.push({left:b,right:w,isDash:k,zeroLength:O===0})}return m}addRoundDash(t,n,u){let m=n/2;for(let b=-u;b<=u;b++){let w=this.width*(this.nextRow+u+b),k=0,E=t[k];for(let z=0;z<this.width;z++){z/E.right>1&&(E=t[++k]);let O=Math.abs(z-E.left),N=Math.abs(z-E.right),j=Math.min(O,N),Z,Q=b/u*(m+1);if(E.isDash){let se=m-Math.abs(Q);Z=Math.sqrt(j*j+se*se)}else Z=m-Math.sqrt(j*j+Q*Q);this.data[w+z]=Math.max(0,Math.min(255,Z+128))}}}addRegularDash(t){for(let k=t.length-1;k>=0;--k){let E=t[k],z=t[k+1];E.zeroLength?t.splice(k,1):z&&z.isDash===E.isDash&&(z.left=E.left,t.splice(k,1))}let n=t[0],u=t[t.length-1];n.isDash===u.isDash&&(n.left=u.left-this.width,u.right=n.right+this.width);let m=this.width*this.nextRow,b=0,w=t[b];for(let k=0;k<this.width;k++){k/w.right>1&&(w=t[++b]);let E=Math.abs(k-w.left),z=Math.abs(k-w.right),O=Math.min(E,z);this.data[m+k]=Math.max(0,Math.min(255,(w.isDash?O:-O)+128))}}addDash(t,n){let u=n?7:0,m=2*u+1;if(this.nextRow+m>this.height)return a.w("LineAtlas out of space"),null;let b=0;for(let k=0;k<t.length;k++)b+=t[k];if(b!==0){let k=this.width/b,E=this.getDashRanges(t,this.width,k);n?this.addRoundDash(E,k,u):this.addRegularDash(E)}let w={y:this.nextRow+u,height:2*u,width:b};return this.nextRow+=m,this.dirty=!0,w}bind(t){let n=t.gl;this.texture?(n.bindTexture(n.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,n.texSubImage2D(n.TEXTURE_2D,0,0,0,this.width,this.height,n.ALPHA,n.UNSIGNED_BYTE,this.data))):(this.texture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.REPEAT),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.REPEAT),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texImage2D(n.TEXTURE_2D,0,n.ALPHA,this.width,this.height,0,n.ALPHA,n.UNSIGNED_BYTE,this.data))}}let hi="maplibre_preloaded_worker_pool";class At{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<At.workerCount;)this.workers.push(new Worker(a.c.WORKER_URL));return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],this.numActive()===0&&(this.workers.forEach((n=>{n.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[hi]}numActive(){return Object.keys(this.active).length}}let St=Math.floor(re.hardwareConcurrency/2),sr,vi;function cn(){return sr||(sr=new At),sr}At.workerCount=a.K(globalThis)?Math.max(Math.min(St,3),1):1;class Mr{constructor(t,n){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=n;let u=this.workerPool.acquire(n);for(let m=0;m<u.length;m++){let b=new a.L(u[m],n);b.name=`Worker ${m}`,this.actors.push(b)}if(!this.actors.length)throw new Error("No actors found")}broadcast(t,n){let u=[];for(let m of this.actors)u.push(m.sendAsync({type:t,data:n}));return Promise.all(u)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(t=!0){this.actors.forEach((n=>{n.remove()})),this.actors=[],t&&this.workerPool.release(this.id)}registerMessageHandler(t,n){for(let u of this.actors)u.registerMessageHandler(t,n)}unregisterMessageHandler(t){for(let n of this.actors)n.unregisterMessageHandler(t)}}function un(){return vi||(vi=new Mr(cn(),a.M),vi.registerMessageHandler("GR",((_,t,n)=>a.m(t,n)))),vi}function or(_,t){let n=a.N();return a.O(n,n,[1,1,0]),a.Q(n,n,[.5*_.width,.5*_.height,1]),_.calculatePosMatrix?a.S(n,n,_.calculatePosMatrix(t.toUnwrapped())):n}function wn(_,t,n,u,m,b,w){var k;let E=(function(j,Z,Q){if(j)for(let se of j){let le=Z[se];if(le&&le.source===Q&&le.type==="fill-extrusion")return!0}else for(let se in Z){let le=Z[se];if(le.source===Q&&le.type==="fill-extrusion")return!0}return!1})((k=m==null?void 0:m.layers)!==null&&k!==void 0?k:null,t,_.id),z=b.maxPitchScaleFactor(),O=_.tilesIn(u,z,E);O.sort(pr);let N=[];for(let j of O)N.push({wrappedTileID:j.tileID.wrapped().key,queryResults:j.tile.queryRenderedFeatures(t,n,_.getState(),j.queryGeometry,j.cameraQueryGeometry,j.scale,m,b,z,or(b,j.tileID),w?(Z,Q)=>w(j.tileID,Z,Q):void 0)});return(function(j,Z){for(let Q in j)for(let se of j[Q])gr(se,Z);return j})((function(j){let Z={},Q={};for(let se of j){let le=se.queryResults,oe=se.wrappedTileID,ce=Q[oe]=Q[oe]||{};for(let me in le){let de=le[me],ge=ce[me]=ce[me]||{},xe=Z[me]=Z[me]||[];for(let pe of de)ge[pe.featureIndex]||(ge[pe.featureIndex]=!0,xe.push(pe))}}return Z})(N),_)}function pr(_,t){let n=_.tileID,u=t.tileID;return n.overscaledZ-u.overscaledZ||n.canonical.y-u.canonical.y||n.wrap-u.wrap||n.canonical.x-u.canonical.x}function gr(_,t){let n=_.feature,u=t.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=u}function Ln(_,t,n){return a._(this,void 0,void 0,(function*(){let u=_;if(_.url?u=(yield a.j(t.transformRequest(_.url,"Source"),n)).data:yield re.frameAsync(n),!u)return null;let m=a.U(a.e(u,_),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in u&&u.vector_layers&&(m.vectorLayerIds=u.vector_layers.map((b=>b.id))),m}))}class Oi{constructor(t,n){t&&(n?this.setSouthWest(t).setNorthEast(n):Array.isArray(t)&&(t.length===4?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1])))}setNorthEast(t){return this._ne=t instanceof a.V?new a.V(t.lng,t.lat):a.V.convert(t),this}setSouthWest(t){return this._sw=t instanceof a.V?new a.V(t.lng,t.lat):a.V.convert(t),this}extend(t){let n=this._sw,u=this._ne,m,b;if(t instanceof a.V)m=t,b=t;else{if(!(t instanceof Oi))return Array.isArray(t)?t.length===4||t.every(Array.isArray)?this.extend(Oi.convert(t)):this.extend(a.V.convert(t)):t&&("lng"in t||"lon"in t)&&"lat"in t?this.extend(a.V.convert(t)):this;if(m=t._sw,b=t._ne,!m||!b)return this}return n||u?(n.lng=Math.min(m.lng,n.lng),n.lat=Math.min(m.lat,n.lat),u.lng=Math.max(b.lng,u.lng),u.lat=Math.max(b.lat,u.lat)):(this._sw=new a.V(m.lng,m.lat),this._ne=new a.V(b.lng,b.lat)),this}getCenter(){return new a.V((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.V(this.getWest(),this.getNorth())}getSouthEast(){return new a.V(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){let{lng:n,lat:u}=a.V.convert(t),m=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=u&&u<=this._ne.lat&&m}intersects(t){if(!((t=Oi.convert(t)).getNorth()>=this.getSouth()&&t.getSouth()<=this.getNorth()))return!1;let n=a.W(this.getWest(),-180,180),u=a.W(this.getEast(),-180,180),m=a.W(t.getWest(),-180,180),b=a.W(t.getEast(),-180,180),w=n>=u,k=m>=b;return!(!w||!k)||(w?b>=n||m<=u:k?u>=m||n<=b:m<=u&&b>=n)}static convert(t){return t instanceof Oi?t:t&&new Oi(t)}static fromLngLat(t,n=0){let u=360*n/40075017,m=u/Math.cos(Math.PI/180*t.lat);return new Oi(new a.V(t.lng-m,t.lat-u),new a.V(t.lng+m,t.lat+u))}adjustAntiMeridian(){let t=new a.V(this._sw.lng,this._sw.lat),n=new a.V(this._ne.lng,this._ne.lat);return new Oi(t,t.lng>n.lng?new a.V(n.lng+360,n.lat):n)}}class Dn{constructor(t,n,u){this.bounds=Oi.convert(this.validateBounds(t)),this.minzoom=n||0,this.maxzoom=u||24}validateBounds(t){return Array.isArray(t)&&t.length===4?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(t){let n=Math.pow(2,t.z),u=Math.floor(a.Y(this.bounds.getWest())*n),m=Math.floor(a.X(this.bounds.getNorth())*n),b=Math.ceil(a.Y(this.bounds.getEast())*n),w=Math.ceil(a.X(this.bounds.getSouth())*n);return t.x>=u&&t.x<b&&t.y>=m&&t.y<w}}class Ya extends a.E{constructor(t,n,u,m){if(super(),this.id=t,this.dispatcher=u,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.U(n,["url","scheme","tileSize","promoteId","encoding"])),this._options=a.e({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m)}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let t=yield Ln(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.tileManagers[this.id].clearTiles(),t&&(a.e(this,t),t.bounds&&(this.tileBounds=new Dn(t.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})))}catch(t){this._tileJSONRequest=null,this._loaded=!0,a.Z(t)||this.fire(new a.k(t))}}))}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}setSourceProperty(t){this._tileJSONRequest&&this._tileJSONRequest.abort(),t(),this.load()}setTiles(t){return this.setSourceProperty((()=>{this._options.tiles=t})),this}setUrl(t){return this.setSourceProperty((()=>{this.url=t,this._options.url=t})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(t){return a._(this,void 0,void 0,(function*(){let n=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),u={request:this.map._requestManager.transformRequest(n,"Tile"),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,encoding:this.encoding,overzoomParameters:this._getOverzoomParameters(t)};u.request.collectResourceTiming=this._collectResourceTiming;let m="RT";if(t.actor&&t.state!=="expired"){if(t.state==="loading")return new Promise(((b,w)=>{t.reloadPromise={resolve:b,reject:w}}))}else t.actor=this.dispatcher.getActor(),m="LT";t.abortController=new AbortController;try{let b=yield t.actor.sendAsync({type:m,data:u},t.abortController);if(delete t.abortController,t.aborted)return;this._afterTileLoadWorkerResponse(t,b)}catch(b){if(delete t.abortController,t.aborted)return;if(b&&b.status!==404)throw b;this._afterTileLoadWorkerResponse(t,null)}}))}_getOverzoomParameters(t){if(t.tileID.canonical.z<=this.maxzoom||this.map._zoomLevelsToOverscale===void 0)return;let n=t.tileID.scaledTo(this.maxzoom).canonical,u=n.url(this.tiles,this.map.getPixelRatio(),this.scheme);return{maxZoomTileID:n,overzoomRequest:this.map._requestManager.transformRequest(u,"Tile")}}_afterTileLoadWorkerResponse(t,n){if(n&&n.resourceTiming&&(t.resourceTiming=n.resourceTiming),n&&this.map._refreshExpiredTiles&&t.setExpiryData(n),t.loadVectorData(n,this.map.painter),t.reloadPromise){let u=t.reloadPromise;t.reloadPromise=null,this.loadTile(t).then(u.resolve).catch(u.reject)}}abortTile(t){return a._(this,void 0,void 0,(function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.actor&&(yield t.actor.sendAsync({type:"AT",data:{uid:t.uid,type:this.type,source:this.id}}))}))}unloadTile(t){return a._(this,void 0,void 0,(function*(){t.unloadVectorData(),t.actor&&(yield t.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class Xa extends a.E{constructor(t,n,u,m){super(),this.id=t,this.dispatcher=u,this.setEventedParent(m),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},n),a.e(this,a.U(n,["url","scheme","tileSize"]))}load(){return a._(this,arguments,void 0,(function*(t=!1){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let n=yield Ln(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,n&&(a.e(this,n),n.bounds&&(this.tileBounds=new Dn(n.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:t})))}catch(n){this._tileJSONRequest=null,this._loaded=!0,a.Z(n)||this.fire(new a.k(n))}}))}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(t){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),t(),this.load(!0)}setTiles(t){return this.setSourceProperty((()=>{this._options.tiles=t})),this}setUrl(t){return this.setSourceProperty((()=>{this.url=t,this._options.url=t})),this}serialize(){return a.e({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(t){return a._(this,void 0,void 0,(function*(){let n=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);t.abortController=new AbortController;try{let u=yield Ct.getImage(this.map._requestManager.transformRequest(n,"Tile"),t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(u&&u.data){this.map._refreshExpiredTiles&&(u.cacheControl||u.expires)&&t.setExpiryData({cacheControl:u.cacheControl,expires:u.expires});let m=this.map.painter.context,b=m.gl,w=u.data;t.texture=this.map.painter.getTileTexture(w.width),t.texture?t.texture.update(w,{useMipmap:!0}):(t.texture=new a.T(m,w,b.RGBA,{useMipmap:!0}),t.texture.bind(b.LINEAR,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST)),t.state="loaded"}}catch(u){if(delete t.abortController,t.aborted)t.state="unloaded";else if(u)throw t.state="errored",u}}))}abortTile(t){return a._(this,void 0,void 0,(function*(){t.abortController&&(t.abortController.abort(),delete t.abortController)}))}unloadTile(t){return a._(this,void 0,void 0,(function*(){t.texture&&this.map.painter.saveTileTexture(t.texture)}))}hasTransition(){return!1}}class Yn extends Xa{constructor(t,n,u,m){super(t,n,u,m),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},n),this.encoding=n.encoding||"mapbox",this.redFactor=n.redFactor,this.greenFactor=n.greenFactor,this.blueFactor=n.blueFactor,this.baseShift=n.baseShift}loadTile(t){return a._(this,void 0,void 0,(function*(){let n=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),u=this.map._requestManager.transformRequest(n,"Tile");t.neighboringTiles=this._getNeighboringTiles(t.tileID),t.abortController=new AbortController;try{let m=yield Ct.getImage(u,t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(m&&m.data){let b=m.data;this.map._refreshExpiredTiles&&(m.cacheControl||m.expires)&&t.setExpiryData({cacheControl:m.cacheControl,expires:m.expires});let w=a.b(b)&&a.$()?b:yield this.readImageNow(b),k={type:this.type,uid:t.uid,source:this.id,rawImageData:w,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!t.actor||t.state==="expired"){t.actor=this.dispatcher.getActor();let E=yield t.actor.sendAsync({type:"LDT",data:k});t.dem=E,t.needsHillshadePrepare=!0,t.needsTerrainPrepare=!0,t.state="loaded"}}}catch(m){if(delete t.abortController,t.aborted)t.state="unloaded";else if(m)throw t.state="errored",m}}))}readImageNow(t){return a._(this,void 0,void 0,(function*(){if(typeof VideoFrame!="undefined"&&a.a0()){let n=t.width+2,u=t.height+2;try{return new a.R({width:n,height:u},yield a.a1(t,-1,-1,n,u))}catch(m){}}return re.getImageData(t,1)}))}_getNeighboringTiles(t){let n=t.canonical,u=Math.pow(2,n.z),m=(n.x-1+u)%u,b=n.x===0?t.wrap-1:t.wrap,w=(n.x+1+u)%u,k=n.x+1===u?t.wrap+1:t.wrap,E={};return E[new a.a2(t.overscaledZ,b,n.z,m,n.y).key]={backfilled:!1},E[new a.a2(t.overscaledZ,k,n.z,w,n.y).key]={backfilled:!1},n.y>0&&(E[new a.a2(t.overscaledZ,b,n.z,m,n.y-1).key]={backfilled:!1},E[new a.a2(t.overscaledZ,t.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},E[new a.a2(t.overscaledZ,k,n.z,w,n.y-1).key]={backfilled:!1}),n.y+1<u&&(E[new a.a2(t.overscaledZ,b,n.z,m,n.y+1).key]={backfilled:!1},E[new a.a2(t.overscaledZ,t.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},E[new a.a2(t.overscaledZ,k,n.z,w,n.y+1).key]={backfilled:!1}),E}unloadTile(t){return a._(this,void 0,void 0,(function*(){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&(yield t.actor.sendAsync({type:"RDT",data:{type:this.type,uid:t.uid,source:this.id}}))}))}}function Sn(_){return _.type==="GeometryCollection"?_.geometries.map((t=>t.coordinates)).flat(1/0):_.coordinates.flat(1/0)}function Ka(_){let t=new Oi,n;switch(_.type){case"FeatureCollection":n=_.features.map((u=>Sn(u.geometry))).flat(1/0);break;case"Feature":n=Sn(_.geometry);break;default:n=Sn(_)}if(n.length==0)return t;for(let u=0;u<n.length-1;u+=2)t.extend([n[u],n[u+1]]);return t}class Ss extends a.E{constructor(t,n,u,m){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:n.data},this.actor=u.getActor(),this.setEventedParent(m),this._data=typeof n.data=="string"?{url:n.data}:{geojson:n.data},this._options=a.e({},n),this._collectResourceTiming=n.collectResourceTiming,n.maxzoom!==void 0&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution),this.promoteId=n.promoteId,n.clusterMaxZoom!==void 0&&this.maxzoom<=n.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${n.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(n.buffer!==void 0?n.buffer:128),tolerance:this._pixelsToTileUnits(n.tolerance!==void 0?n.tolerance:.375),extent:a.a5,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(n.clusterMaxZoom),minPoints:Math.max(2,n.clusterMinPoints||2),extent:a.a5,radius:this._pixelsToTileUnits(n.clusterRadius||50),log:!1,generateId:n.generateId||!1},clusterProperties:n.clusterProperties,filter:n.filter},n.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_hasPendingWorkerUpdate(){return this._pendingWorkerUpdate.data!==void 0||this._pendingWorkerUpdate.diff!==void 0||this._pendingWorkerUpdate.optionsChanged}_pixelsToTileUnits(t){return t*(a.a5/this.tileSize)}_getClusterMaxZoom(t){let n=t?Math.round(t):this.maxzoom-1;return Number.isInteger(t)||t===void 0||a.w(`Integer expected for option 'clusterMaxZoom': provided value "${t}" rounded to "${n}"`),n}load(){return a._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(t){this.map=t,this.load()}setData(t,n){this._data=typeof t=="string"?{url:t}:{geojson:t},this._pendingWorkerUpdate={data:t};let u=this._updateWorkerData();return n?u:this}updateData(t,n){this._pendingWorkerUpdate.diff=a.a6(this._pendingWorkerUpdate.diff,t);let u=this._updateWorkerData();return n?u:this}getData(){return a._(this,void 0,void 0,(function*(){let t=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:t})}))}getBounds(){return a._(this,void 0,void 0,(function*(){return Ka(yield this.getData())}))}setClusterOptions(t){return this.workerOptions.cluster=t.cluster,t.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(t.clusterRadius)),t.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(t.clusterMaxZoom)),this._pendingWorkerUpdate.optionsChanged=!0,this._updateWorkerData(),this}getClusterExpansionZoom(t){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:t,source:this.id}})}getClusterChildren(t){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:t,source:this.id}})}getClusterLeaves(t,n,u){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:t,limit:n,offset:u}})}_updateWorkerData(){return a._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;if(!this._hasPendingWorkerUpdate())return void a.w(`No pending worker updates for GeoJSONSource ${this.id}.`);let{data:t,diff:n}=this._pendingWorkerUpdate,u=a.e({type:this.type},this.workerOptions);t!==void 0?(typeof t=="string"?(u.request=this.map._requestManager.transformRequest(re.resolveURL(t),"Source"),u.request.collectResourceTiming=this._collectResourceTiming):u.data=t,this._pendingWorkerUpdate.data=void 0):n&&(u.dataDiff=n,this._pendingWorkerUpdate.diff=void 0),this._pendingWorkerUpdate.optionsChanged=void 0,this._isUpdatingWorker=!0,this.fire(new a.l("dataloading",{dataType:"source"}));try{let m=yield this.actor.sendAsync({type:"LD",data:u});if(this._isUpdatingWorker=!1,this._removed||m.abandoned)return void this.fire(new a.l("dataabort",{dataType:"source"}));n&&this._applyDiff(n);let b=null;m.resourceTiming&&m.resourceTiming[this.id]&&(b=m.resourceTiming[this.id].slice(0));let w={dataType:"source"};this._collectResourceTiming&&b&&b.length>0&&a.e(w,{resourceTiming:b}),this.fire(new a.l("data",Object.assign(Object.assign({},w),{sourceDataType:"metadata"}))),this.fire(new a.l("data",Object.assign(Object.assign({},w),{sourceDataType:"content",shouldReloadTileOptions:this._getShouldReloadTileOptions(n)})))}catch(m){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new a.l("dataabort",{dataType:"source"}));this.fire(new a.k(m))}finally{this._hasPendingWorkerUpdate()&&this._updateWorkerData()}}))}_applyDiff(t){let n=typeof this.promoteId=="string"?this.promoteId:void 0;if(!this._data.url&&!this._data.updateable){if(!a.a7(this._data.geojson,n))throw new Error(`GeoJSONSource "${this.id}": GeoJSON data is not compatible with updateData`);this._data={updateable:a.a8(this._data.geojson,n)}}this._data.updateable&&a.a9(this._data.updateable,t,n)}_getShouldReloadTileOptions(t){if(this._options.cluster||!t||t.removeAll)return;let{add:n=[],update:u=[],remove:m=[]}=t||{},b=new Set([...u.map((w=>w.id)),...m]);for(let w of b.values())if(typeof w!="number"&&this.promoteId==null)return void a.w(`GeoJSONSource "${this.id}": updateData is slower when using string GeoJSON feature IDs. Consider using promoteId or numeric IDs for better performance.`);return{nextBounds:[...u.map((w=>w.newGeometry)),...n.map((w=>w.geometry))].filter(Boolean).map((w=>Ka(w))),prevIds:b}}shouldReloadTile(t,{nextBounds:n,prevIds:u}){if(!t.latestFeatureIndex)return t.state!=="unloaded";let m=t.latestFeatureIndex.loadVTLayers();for(let E=0;E<t.latestFeatureIndex.featureIndexArray.length;E++){let z=t.latestFeatureIndex.featureIndexArray.get(E),O=m[a.aa].feature(z.featureIndex),N=t.latestFeatureIndex.getId(O,a.aa);if(u.has(N))return!0}let{buffer:b,extent:w}=this.workerOptions.geojsonVtOptions,k=(function({x:E,y:z,z:O},N=0){let j=a.a3((E-N)/Math.pow(2,O)),Z=a.a4((z+1+N)/Math.pow(2,O)),Q=a.a3((E+1+N)/Math.pow(2,O)),se=a.a4((z-N)/Math.pow(2,O));return new Oi([j,Z],[Q,se])})(t.tileID.canonical,b/w);for(let E of n)if(k.intersects(E))return!0;return!1}loaded(){return!this._isUpdatingWorker&&!this._hasPendingWorkerUpdate()}loadTile(t){return a._(this,void 0,void 0,(function*(){let n=t.actor?"RT":"LT";t.actor=this.actor;let u={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};t.abortController=new AbortController;let m=yield this.actor.sendAsync({type:n,data:u},t.abortController);delete t.abortController,t.unloadVectorData(),t.aborted||t.loadVectorData(m,this.map.painter,n==="RT")}))}abortTile(t){return a._(this,void 0,void 0,(function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.aborted=!0}))}unloadTile(t){return a._(this,void 0,void 0,(function*(){t.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data.updateable?{type:"FeatureCollection",features:Array.from(this._data.updateable.values())}:this._data.url||this._data.geojson})}hasTransition(){return!1}}class Xr extends a.E{constructor(t,n,u,m){super(),this.flippedWindingOrder=!1,this.id=t,this.dispatcher=u,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(m),this.options=n}load(t){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{let n=yield Ct.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,n&&n.data&&(this.image=n.data,t&&(this.coordinates=t),this._finishLoading())}catch(n){this._request=null,this._loaded=!0,a.Z(n)||this.fire(new a.k(n))}}))}loaded(){return this._loaded}updateImage(t){return t.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=t.url,this.load(t.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(t){this.coordinates=t;let n=t.map(a.ab.fromLngLat);var u;return this.tileID=(function(m){let b=a.ac.fromPoints(m),w=b.width(),k=b.height(),E=Math.max(w,k),z=Math.max(0,Math.floor(-Math.log(E)/Math.LN2)),O=Math.pow(2,z);return new a.ae(z,Math.floor((b.minX+b.maxX)/2*O),Math.floor((b.minY+b.maxY)/2*O))})(n),this.terrainTileRanges=this._getOverlappingTileRanges(n),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=n.map((m=>this.tileID.getTilePoint(m)._round())),this.flippedWindingOrder=((u=this.tileCoords)[1].x-u[0].x)*(u[2].y-u[0].y)-(u[1].y-u[0].y)*(u[2].x-u[0].x)<0,this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;let t=this.map.painter.context,n=t.gl;this.texture||(this.texture=new a.T(t,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));let u=!1;for(let m in this.tiles){let b=this.tiles[m];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,u=!0)}u&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(t){return a._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={}):t.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(t){let{minX:n,minY:u,maxX:m,maxY:b}=a.ac.fromPoints(t),w={};for(let k=0;k<=a.ad;k++){let E=Math.pow(2,k),z=Math.floor(n*E),O=Math.floor(u*E),N=Math.floor(m*E),j=Math.floor(b*E);w[k]={minTileX:z,minTileY:O,maxTileX:N,maxTileY:j}}return w}}class Pe extends Xr{constructor(t,n,u,m){super(t,n,u,m),this.roundZoom=!0,this.type="video",this.options=n}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1;let t=this.options;this.urls=[];for(let n of t.urls)this.urls.push(this.map._requestManager.transformRequest(n,"Source").url);try{let n=yield a.af(this.urls);if(this._loaded=!0,!n)return;this.video=n,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(n){this.fire(new a.k(n))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){let n=this.video.seekable;t<n.start(0)||t>n.end(0)?this.fire(new a.k(new a.ag(`sources.${this.id}`,null,`Playback for this video can be set only between the ${n.start(0)} and ${n.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;let t=this.map.painter.context,n=t.gl;this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new a.T(t,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));let u=!1;for(let m in this.tiles){let b=this.tiles[m];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,u=!0)}u&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class K extends Xr{constructor(t,n,u,m){super(t,n,u,m),n.coordinates?Array.isArray(n.coordinates)&&n.coordinates.length===4&&!n.coordinates.some((b=>!Array.isArray(b)||b.length!==2||b.some((w=>typeof w!="number"))))||this.fire(new a.k(new a.ag(`sources.${t}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.k(new a.ag(`sources.${t}`,null,'missing required property "coordinates"'))),n.animate&&typeof n.animate!="boolean"&&this.fire(new a.k(new a.ag(`sources.${t}`,null,'optional "animate" property must be a boolean value'))),n.canvas?typeof n.canvas=="string"||n.canvas instanceof HTMLCanvasElement||this.fire(new a.k(new a.ag(`sources.${t}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.k(new a.ag(`sources.${t}`,null,'missing required property "canvas"'))),this.options=n,this.animate=n.animate===void 0||n.animate}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;let n=this.map.painter.context,u=n.gl;this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):(this.texture=new a.T(n,this.canvas,u.RGBA,{premultiply:!0}),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let m=!1;for(let b in this.tiles){let w=this.tiles[b];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,m=!0)}m&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",animate:this.animate,canvas:this.options.canvas,coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(let t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}}let X={},ne=_=>{switch(_){case"geojson":return Ss;case"image":return Xr;case"raster":return Xa;case"raster-dem":return Yn;case"vector":return Ya;case"video":return Pe;case"canvas":return K}return X[_]},_e="RTLPluginLoaded";class be extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=un()}_syncState(t){return this.status=t,this.dispatcher.broadcast("SRPS",{pluginStatus:t,pluginURL:this.url}).catch((n=>{throw this.status="error",n}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(t){return a._(this,arguments,void 0,(function*(n,u=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=re.resolveURL(n),!this.url)throw new Error(`requested url ${n} is invalid`);if(this.status==="unavailable"){if(!u)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return a._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.l(_e))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Ie=null;function ke(){return Ie||(Ie=new be),Ie}var we,Oe;(function(_){_[_.Base=0]="Base",_[_.Parent=1]="Parent"})(we||(we={})),(function(_){_[_.Departing=0]="Departing",_[_.Incoming=1]="Incoming"})(Oe||(Oe={}));class Xe{constructor(t,n){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=t,this.uid=a.ah(),this.uses=0,this.tileSize=n,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(t){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(t||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:t,fadingDirection:n,fadingParentID:u,fadeEndTime:m}){this.resetFadeLogic(),this.fadingRole=t,this.fadingDirection=n,this.fadingParentID=u,this.fadeEndTime=m}setSelfFadeLogic(t){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=t}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=te(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(t){this.demTexture&&t.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(t,n,u){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData,this.latestFeatureIndex.encoding=t.encoding):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData,this.latestFeatureIndex.encoding=this.latestEncoding)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=(function(m,b){let w={};if(!b)return w;for(let k of m){let E=k.layerIds.map((z=>b.getLayer(z))).filter(Boolean);if(E.length!==0){k.layers=E,k.stateDependentLayerIds&&(k.stateDependentLayers=k.stateDependentLayerIds.map((z=>E.filter((O=>O.id===z))[0])));for(let z of E)w[z.id]=k}}return w})(t.buckets,n==null?void 0:n.style),this.hasSymbolBuckets=!1;for(let m in this.buckets){let b=this.buckets[m];if(b instanceof a.aj){if(this.hasSymbolBuckets=!0,!u)break;b.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(let m in this.buckets){let b=this.buckets[m];if(b instanceof a.aj&&b.hasRTLText){this.hasRTLText=!0,ke().lazyLoad();break}}this.queryPadding=0;for(let m in this.buckets){let b=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,n.style.getLayer(m).queryRadius(b))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage),this.dashPositions=t.dashPositions}else this.collisionBoxArray=new a.ai}unloadVectorData(){for(let t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(t){return this.buckets[t.id]}upload(t){for(let u in this.buckets){let m=this.buckets[u];m.uploadPending()&&m.upload(t)}let n=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new a.T(t,this.imageAtlas.image,n.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new a.T(t,this.glyphAtlasImage,n.ALPHA),this.glyphAtlasImage=null)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,n,u,m,b,w,k,E,z,O,N){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:m,cameraQueryGeometry:b,scale:w,tileSize:this.tileSize,pixelPosMatrix:O,transform:E,params:k,queryPadding:this.queryPadding*z,getElevation:N},t,n,u):{}}querySourceFeatures(t,n){let u=this.latestFeatureIndex;if(!u||!u.rawTileData)return;let m=u.loadVTLayers(),b=n&&n.sourceLayer?n.sourceLayer:"",w=m[a.aa]||m[b];if(!w)return;let k=a.ak(n==null?void 0:n.filter,n==null?void 0:n.globalState),{z:E,x:z,y:O}=this.tileID.canonical,N={z:E,x:z,y:O};for(let j=0;j<w.length;j++){let Z=w.feature(j);if(k.needGeometry){let le=a.al(Z,!0);if(!k.filter(new a.H(this.tileID.overscaledZ),le,this.tileID.canonical))continue}else if(!k.filter(new a.H(this.tileID.overscaledZ),Z))continue;let Q=u.getId(Z,b),se=new a.am(Z,E,z,O,Q);se.tile=N,t.push(se)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){let n=this.expirationTime;if(t.cacheControl){let u=a.an(t.cacheControl);u["max-age"]&&(this.expirationTime=Date.now()+1e3*u["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){let u=Date.now(),m=!1;if(this.expirationTime>u)m=!1;else if(n)if(this.expirationTime<n)m=!0;else{let b=this.expirationTime-n;b?this.expirationTime=u+Math.max(b,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(t,n){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(t).length===0)return;let u=this.latestFeatureIndex.loadVTLayers();for(let m in this.buckets){if(!n.style.hasLayer(m))continue;let b=this.buckets[m],w=b.layers[0].sourceLayer||a.aa,k=u[w],E=t[w];if(!k||!E||Object.keys(E).length===0)continue;b.update(E,k,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});let z=n&&n.style&&n.style.getLayer(m);z&&(this.queryPadding=Math.max(this.queryPadding,z.queryRadius(b)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<te()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(t){this.symbolFadeHoldUntil=te()+t}setDependencies(t,n){let u={};for(let m of n)u[m]=!0;this.dependencies[t]=u}hasDependency(t,n){for(let u of t){let m=this.dependencies[u];if(m){for(let b of n)if(m[b])return!0}}return!1}}class Ge{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,n,u){let m=String(n);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][m]=this.stateChanges[t][m]||{},a.e(this.stateChanges[t][m],u),this.deletedStates[t]===null){this.deletedStates[t]={};for(let b in this.state[t])b!==m&&(this.deletedStates[t][b]=null)}else if(this.deletedStates[t]&&this.deletedStates[t][m]===null){this.deletedStates[t][m]={};for(let b in this.state[t][m])u[b]||(this.deletedStates[t][m][b]=null)}else for(let b in u)this.deletedStates[t]&&this.deletedStates[t][m]&&this.deletedStates[t][m][b]===null&&delete this.deletedStates[t][m][b]}removeFeatureState(t,n,u){if(this.deletedStates[t]===null)return;let m=String(n);if(this.deletedStates[t]=this.deletedStates[t]||{},u&&n!==void 0)this.deletedStates[t][m]!==null&&(this.deletedStates[t][m]=this.deletedStates[t][m]||{},this.deletedStates[t][m][u]=null);else if(n!==void 0)if(this.stateChanges[t]&&this.stateChanges[t][m])for(u in this.deletedStates[t][m]={},this.stateChanges[t][m])this.deletedStates[t][m][u]=null;else this.deletedStates[t][m]=null;else this.deletedStates[t]=null}getState(t,n){let u=String(n),m=a.e({},(this.state[t]||{})[u],(this.stateChanges[t]||{})[u]);if(this.deletedStates[t]===null)return{};if(this.deletedStates[t]){let b=this.deletedStates[t][n];if(b===null)return{};for(let w in b)delete m[w]}return m}initializeTileState(t,n){t.setFeatureState(this.state,n)}coalesceChanges(t,n){let u={};for(let m in this.stateChanges){this.state[m]=this.state[m]||{};let b={};for(let w in this.stateChanges[m])this.state[m][w]||(this.state[m][w]={}),a.e(this.state[m][w],this.stateChanges[m][w]),b[w]=this.state[m][w];u[m]=b}for(let m in this.deletedStates){this.state[m]=this.state[m]||{};let b={};if(this.deletedStates[m]===null)for(let w in this.state[m])b[w]={},this.state[m][w]={};else for(let w in this.deletedStates[m]){if(this.deletedStates[m][w]===null)this.state[m][w]={};else for(let k of Object.keys(this.deletedStates[m][w]))delete this.state[m][w][k];b[w]=this.state[m][w]}u[m]=u[m]||{},a.e(u[m],b)}this.stateChanges={},this.deletedStates={},Object.keys(u).length!==0&&t.setFeatureState(u,n)}}let lt=89.25;function pt(_,t){let n=a.ao(t.lat,-a.ap,a.ap);return new a.P(a.Y(t.lng)*_,a.X(n)*_)}function Et(_,t){return new a.ab(t.x/_,t.y/_).toLngLat()}function fi(_){return _.cameraToCenterDistance*Math.min(.85*Math.tan(a.aq(90-_.pitch)),Math.tan(a.aq(lt-_.pitch)))}function oi(_,t){let n=_.canonical,u=t/a.ar(n.z),m=n.x+Math.pow(2,n.z)*_.wrap,b=a.as(new Float64Array(16));return a.O(b,b,[m*u,n.y*u,0]),a.Q(b,b,[u/a.a5,u/a.a5,1]),b}function Le(_,t,n,u,m){let b=a.ab.fromLngLat(_,t),w=m*a.at(1,_.lat),{x:k,y:E,z}=Si(n,u);return new a.ab(b.x+w*-k,b.y+w*-E,b.z+w*-z)}function Si(_,t){let n=a.aq(_),u=a.aq(t),m=Math.cos(-n),b=Math.sin(n);return{x:b*Math.sin(u),y:-b*Math.cos(u),z:m}}function wr(_,t,n){let u=t.intersectsFrustum(_);if(!n||u===0)return u;let m=t.intersectsPlane(n);return m===0?0:u===2&&m===2?2:1}function Mt(_,t,n){let u=0,m=(n-t)/10;for(let b=0;b<10;b++)u+=m*Math.pow(Math.cos(t+(b+.5)/10*(n-t)),_);return u}function mi(_,t){return function(n,u,m,b,w){let k=2*((_-1)/a.au(Math.cos(a.aq(lt-w))/Math.cos(a.aq(lt)))-1),E=Math.acos(m/b),z=2*Mt(k-1,0,a.aq(w/2)),O=Math.min(a.aq(lt),E+a.aq(w/2)),N=Mt(k-1,Math.min(O,E-a.aq(w/2)),O),j=Math.atan(u/m),Z=Math.hypot(u,m),Q=n;return Q+=a.au(b/Z/Math.max(.5,Math.cos(a.aq(w/2)))),Q+=k*a.au(Math.cos(j))/2,Q-=a.au(Math.max(1,N/z/t))/2,Q}}let Sr=mi(9.314,3);function Ti(_,t){let n=(t.roundZoom?Math.round:Math.floor)(_.zoom+a.au(_.tileSize/t.tileSize));return Math.max(0,n)}function $i(_,t){let n=_.getCameraFrustum(),u=_.getClippingPlane(),m=_.screenPointToMercatorCoordinate(_.getCameraPoint()),b=a.ab.fromLngLat(_.center,_.elevation);m.z=b.z+Math.cos(_.pitchInRadians)*_.cameraToCenterDistance/_.worldSize;let w=_.getCoveringTilesDetailsProvider(),k=w.allowVariableZoom(_,t),E=Ti(_,t),z=t.minzoom||0,O=t.maxzoom!==void 0?t.maxzoom:_.maxZoom,N=Math.min(Math.max(0,E),O),j=Math.pow(2,N),Z=[j*m.x,j*m.y,0],Q=[j*b.x,j*b.y,0],se=Math.hypot(b.x-m.x,b.y-m.y),le=Math.abs(b.z-m.z),oe=Math.hypot(se,le),ce=ge=>({zoom:0,x:0,y:0,wrap:ge,fullyVisible:!1}),me=[],de=[];if(_.renderWorldCopies&&w.allowWorldCopies())for(let ge=1;ge<=3;ge++)me.push(ce(-ge)),me.push(ce(ge));for(me.push(ce(0));me.length>0;){let ge=me.pop(),xe=ge.x,pe=ge.y,Te=ge.fullyVisible,Re={x:xe,y:pe,z:ge.zoom},ze=w.getTileBoundingVolume(Re,ge.wrap,_.elevation,t);if(!Te){let Je=wr(n,ze,u);if(Je===0)continue;Te=Je===2}let De=w.distanceToTile2d(m.x,m.y,Re,ze),Fe=E;k&&(Fe=(t.calculateTileZoom||Sr)(_.zoom+a.au(_.tileSize/t.tileSize),De,le,oe,_.fov)),Fe=(t.roundZoom?Math.round:Math.floor)(Fe),Fe=Math.max(0,Fe);let $e=Math.min(Fe,O);if(ge.wrap=w.getWrap(b,Re,ge.wrap),ge.zoom>=$e){if(ge.zoom<z)continue;let Je=N-ge.zoom,Ze=Z[0]-.5-(xe<<Je),ht=Z[1]-.5-(pe<<Je),Lt=t.reparseOverscaled?Math.max(ge.zoom,Fe):ge.zoom;de.push({tileID:new a.a2(ge.zoom===O?Lt:ge.zoom,ge.wrap,ge.zoom,xe,pe),distanceSq:a.av([Q[0]-.5-xe,Q[1]-.5-pe]),tileDistanceToCamera:Math.sqrt(Ze*Ze+ht*ht)})}else for(let Je=0;Je<4;Je++)me.push({zoom:ge.zoom+1,x:(xe<<1)+Je%2,y:(pe<<1)+(Je>>1),wrap:ge.wrap,fullyVisible:Te})}return de.sort(((ge,xe)=>ge.distanceSq-xe.distanceSq)).map((ge=>ge.tileID))}let Ci=a.ac.fromPoints([new a.P(0,0),new a.P(a.a5,a.a5)]);function lr(_){return _==="raster"||_==="image"||_==="video"}function io(_,t,n,u,m,b,w){if(!t.hasData())return!1;let{tileID:k,fadingRole:E,fadingDirection:z,fadingParentID:O}=t;if(E===we.Base&&z===Oe.Incoming&&O)return n[O.key]=O,!0;let N=Math.max(k.overscaledZ-m,b);for(let j=k.overscaledZ-1;j>=N;j--){let Z=k.scaledTo(j),Q=_.getLoadedTile(Z);if(Q)return t.setCrossFadeLogic({fadingRole:we.Base,fadingDirection:Oe.Incoming,fadingParentID:Q.tileID,fadeEndTime:u+w}),Q.setCrossFadeLogic({fadingRole:we.Parent,fadingDirection:Oe.Departing,fadeEndTime:u+w}),n[Z.key]=Z,!0}return!1}function Kr(_,t,n,u,m,b){if(!t.hasData())return!1;let w=t.tileID.children(m),k=Be(_,t,w,n,u,m,b);if(k)return!0;for(let E of w)Be(_,t,E.children(m),n,u,m,b)&&(k=!0);return k}function Be(_,t,n,u,m,b,w){if(n[0].overscaledZ>=b)return!1;let k=!1;for(let E of n){let z=_.getLoadedTile(E);if(!z)continue;let{fadingRole:O,fadingDirection:N,fadingParentID:j}=z;O===we.Base&&N===Oe.Departing&&j||(z.setCrossFadeLogic({fadingRole:we.Base,fadingDirection:Oe.Departing,fadingParentID:t.tileID,fadeEndTime:m+w}),t.setCrossFadeLogic({fadingRole:we.Parent,fadingDirection:Oe.Incoming,fadeEndTime:m+w})),u[E.key]=E,k=!0}return k}function Ir(_,t,n,u){let m=_.tileID;return!!_.selfFading||!_.hasData()&&!!t.has(m)&&(_.setSelfFadeLogic(n+u),!0)}function zr(_,t){var n;_.needsHillshadePrepare=!0,_.needsTerrainPrepare=!0;let u=t.tileID.canonical.x-_.tileID.canonical.x,m=t.tileID.canonical.y-_.tileID.canonical.y,b=Math.pow(2,_.tileID.canonical.z),w=t.tileID.key;u===0&&m===0||Math.abs(m)>1||(Math.abs(u)>1&&(Math.abs(u+b)===1?u+=b:Math.abs(u-b)===1&&(u-=b)),t.dem&&_.dem&&(_.dem.backfillBorder(t.dem,u,m),!((n=_.neighboringTiles)===null||n===void 0)&&n[w]&&(_.neighboringTiles[w].backfilled=!0)))}class ro{constructor(){this._tiles={}}handleWrapJump(t){let n={};for(let u in this._tiles){let m=this._tiles[u];m.tileID=m.tileID.unwrapTo(m.tileID.wrap+t),n[m.tileID.key]=m}this._tiles=n}setFeatureState(t,n){for(let u in this._tiles)this._tiles[u].setFeatureState(t,n)}getAllTiles(){return Object.values(this._tiles)}getAllIds(t=!1){return t?Object.values(this._tiles).map((n=>n.tileID)).sort(a.ax).map((n=>n.key)):Object.keys(this._tiles)}getTileById(t){return this._tiles[t]}setTile(t,n){this._tiles[t]=n}deleteTileById(t){delete this._tiles[t]}getLoadedTile(t){let n=this.getTileById(t.key);return n!=null&&n.hasData()?n:null}isIdRenderable(t,n=!1){var u;return(u=this.getTileById(t))===null||u===void 0?void 0:u.isRenderable(n)}getRenderableIds(t=0,n){let u=[];for(let m of this.getAllIds())this.isIdRenderable(m,n)&&u.push(this.getTileById(m));return n?u.sort(((m,b)=>{let w=m.tileID,k=b.tileID,E=new a.P(w.canonical.x,w.canonical.y)._rotate(-t),z=new a.P(k.canonical.x,k.canonical.y)._rotate(-t);return w.overscaledZ-k.overscaledZ||z.y-E.y||z.x-E.x})).map((m=>m.tileID.key)):u.map((m=>m.tileID)).sort(a.ax).map((m=>m.key))}}class dn extends a.E{constructor(t,n,u){super(),this.id=t,this.dispatcher=u,this.on("data",(m=>this._dataHandler(m))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((m,b,w,k)=>{let E=new(ne(b.type))(m,b,w,k);if(E.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${E.id}`);return E})(t,n,u,this),this._inViewTiles=new ro,this._outOfViewCache=new a.ay(0,(m=>this._unloadTile(m))),this._timers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new Ge,this._didEmitContent=!1,this._updated=!1}onAdd(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._maxTileCacheZoomLevels=t?t._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(t)}onRemove(t){for(let n of this._inViewTiles.getAllTiles())n.unloadVectorData();this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(t),this._inViewTiles=new ro}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(let t of this._inViewTiles.getAllTiles())if(t.state!=="loaded"&&t.state!=="errored")return!1;return!0}getSource(){return this._source}getState(){return this._state}pause(){this._paused=!0}resume(){if(!this._paused)return;let t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(t,n,u){return a._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(t),this._tileLoaded(t,n,u)}catch(m){t.state="errored",m.status!==404?this._source.fire(new a.k(m,{tile:t})):this.update(this.transform,this.terrain)}}))}_unloadTile(t){this._source.unloadTile&&this._source.unloadTile(t)}_abortTile(t){this._source.abortTile&&this._source.abortTile(t),this._source.fire(new a.l("dataabort",{tile:t,coord:t.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._inViewTiles,this.map?this.map.painter:null);for(let n of this._inViewTiles.getAllTiles())n.upload(t),n.prepare(this.map.style.imageManager)}getIds(){return this._inViewTiles.getAllIds(!0)}getRenderableIds(t){var n;return this._inViewTiles.getRenderableIds((n=this.transform)===null||n===void 0?void 0:n.bearingInRadians,t)}hasRenderableParent(t){let n=t.overscaledZ-1;if(n>=this._source.minzoom){let u=this.getLoadedTile(t.scaledTo(n));if(u)return this._inViewTiles.isIdRenderable(u.tileID.key)}return!1}reload(t,n=void 0){if(this._paused)this._shouldReloadOnResume=!0;else{this._outOfViewCache.reset();for(let u of this._inViewTiles.getAllIds()){let m=this._inViewTiles.getTileById(u);n&&!this._source.shouldReloadTile(m,n)||(t?this._reloadTile(u,"expired"):m.state!=="errored"&&this._reloadTile(u,"reloading"))}}}_reloadTile(t,n){return a._(this,void 0,void 0,(function*(){let u=this._inViewTiles.getTileById(t);u&&(u.state!=="loading"&&(u.state=n),yield this._loadTile(u,t,n))}))}_tileLoaded(t,n,u){t.timeAdded=te(),t.selfFading&&(t.fadeEndTime=t.timeAdded+this._rasterFadeDuration),u==="expired"&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(n,t),this.getSource().type==="raster-dem"&&t.dem&&(function(m,b){var w,k;let E=b.getRenderableIds();for(let z of E){if(!m.neighboringTiles||!m.neighboringTiles[z])continue;let O=b.getTileById(z);m.neighboringTiles[z].backfilled||zr(m,O),!((k=(w=O.neighboringTiles)===null||w===void 0?void 0:w[m.tileID.key])===null||k===void 0)&&k.backfilled||zr(O,m)}})(t,this._inViewTiles),this._state.initializeTileState(t,this.map?this.map.painter:null),t.aborted||this._source.fire(new a.l("data",{dataType:"source",tile:t,coord:t.tileID}))}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._inViewTiles.getTileById(t)}_retainLoadedChildren(t,n){let u=this._getLoadedDescendents(n),m=new Set;for(let b of n){let w=u[b.key];if(!(w!=null&&w.length)){m.add(b);continue}let k=b.overscaledZ+dn.maxOverzooming,E=w.filter((N=>N.tileID.overscaledZ<=k));if(!E.length){m.add(b);continue}let z=Math.min(...E.map((N=>N.tileID.overscaledZ))),O=E.filter((N=>N.tileID.overscaledZ===z)).map((N=>N.tileID));for(let N of O)t[N.key]=N;this._areDescendentsComplete(O,z,b.overscaledZ)||m.add(b)}return m}_getLoadedDescendents(t){var n;let u={};for(let m of this._inViewTiles.getAllTiles().filter((b=>b.hasData())))for(let b of t)m.tileID.isChildOf(b)&&(u[n=b.key]||(u[n]=[])).push(m);return u}_areDescendentsComplete(t,n,u){return t.length===1&&t[0].isOverscaled()?t[0].overscaledZ===n:Math.pow(4,n-u)===t.length}getLoadedTile(t){return this._inViewTiles.getLoadedTile(t)}updateCacheSize(t){let n=Math.ceil(t.width/this._source.tileSize)+1,u=Math.ceil(t.height/this._source.tileSize)+1,m=Math.floor(n*u*(this._maxTileCacheZoomLevels===null?a.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,m):m;this._outOfViewCache.setMaxSize(b)}handleWrapJump(t){let n=Math.round((t-(this._prevLng===void 0?t:this._prevLng))/360);this._prevLng=t,n&&(this._inViewTiles.handleWrapJump(n),this._resetTileReloadTimers())}update(t,n){if(!this._sourceLoaded||this._paused)return;let u;this.transform=t,this.terrain=n,this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?u=t.getVisibleUnwrappedCoordinates(this._source.tileID).map((E=>new a.a2(E.canonical.z,E.wrap,E.canonical.z,E.canonical.x,E.canonical.y))):(u=$i(t,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.type==="vector"&&this.map._zoomLevelsToOverscale!==void 0?t.maxZoom-this.map._zoomLevelsToOverscale:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:n,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(u=u.filter((E=>this._source.hasTile(E))))):u=[],this.usedForTerrain&&(u=this._addTerrainIdealTiles(u));let m=u.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,m&&this.fire(new a.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));let b=Ti(t,this._source),w=this._updateRetainedTiles(u,b),k=lr(this._source.type);k&&this._rasterFadeDuration>0&&!n&&(function(E,z,O,N,j,Z,Q){let se=te(),le=a.aw(z);for(let oe of z){let ce=E.getTileById(oe.key);ce.fadingDirection!==Oe.Departing&&ce.fadeOpacity!==0||ce.resetFadeLogic(),io(E,ce,O,se,N,j,Q)||Kr(E,ce,O,se,Z,Q)||Ir(ce,le,se,Q)||ce.resetFadeLogic()}})(this._inViewTiles,u,w,this._maxFadingAncestorLevels,this._source.minzoom,this._source.maxzoom,this._rasterFadeDuration),k?this._cleanUpRasterTiles(w):this._cleanUpVectorTiles(w)}_cleanUpRasterTiles(t){for(let n of this._inViewTiles.getAllIds())t[n]||this._removeTile(n)}_cleanUpVectorTiles(t){for(let n of this._inViewTiles.getAllIds()){let u=this._inViewTiles.getTileById(n);t[n]?u.clearSymbolFadeHold():u.hasSymbolBuckets?u.holdingForSymbolFade()?u.symbolFadeFinished()&&this._removeTile(n):u.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(n)}}_addTerrainIdealTiles(t){let n=[];for(let u of t)if(u.canonical.z>this._source.minzoom){let m=u.scaledTo(u.canonical.z-1);n.push(m);let b=u.scaledTo(Math.max(this._source.minzoom,Math.min(u.canonical.z,5)));n.push(b)}return t.concat(n)}releaseSymbolFadeTiles(){for(let t of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(t).holdingForSymbolFade()&&this._removeTile(t)}_updateRetainedTiles(t,n){var u;let m=new Set;for(let z of t)this._addTile(z).hasData()||m.add(z);let b=t.reduce(((z,O)=>(z[O.key]=O,z)),{}),w=this._retainLoadedChildren(b,m),k={},E=Math.max(n-dn.maxUnderzooming,this._source.minzoom);for(let z of w){let O=this._inViewTiles.getTileById(z.key),N=O==null?void 0:O.wasRequested();for(let j=z.overscaledZ-1;j>=E;--j){let Z=z.scaledTo(j);if(k[Z.key])break;if(k[Z.key]=!0,O=this.getTile(Z),!O&&N&&(O=this._addTile(Z)),O){let Q=O.hasData();if((Q||!(!((u=this.map)===null||u===void 0)&&u.cancelPendingTileRequestsWhileZooming)||N)&&(b[Z.key]=Z),N=O.wasRequested(),Q)break}}}return b}_addTile(t){let n=this._inViewTiles.getTileById(t.key);if(n)return n;n=this._outOfViewCache.getAndRemove(t),n&&(n.resetFadeLogic(),this._setTileReloadTimer(t.key,n),n.tileID=t,this._state.initializeTileState(n,this.map?this.map.painter:null));let u=n;return n||(n=new Xe(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(n,t.key,n.state)),n.uses++,this._inViewTiles.setTile(t.key,n),u||this._source.fire(new a.l("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n}_setTileReloadTimer(t,n){this._clearTileReloadTimer(t);let u=n.getExpiryTimeout();u&&(this._timers[t]=setTimeout((()=>{this._reloadTile(t,"expired"),delete this._timers[t]}),u))}_clearTileReloadTimer(t){let n=this._timers[t];n&&(clearTimeout(n),delete this._timers[t])}_resetTileReloadTimers(){for(let t in this._timers)clearTimeout(this._timers[t]),delete this._timers[t];for(let t of this._inViewTiles.getAllIds()){let n=this._inViewTiles.getTileById(t);this._setTileReloadTimer(t,n)}}refreshTiles(t){for(let n of this._inViewTiles.getAllIds()){let u=this._inViewTiles.getTileById(n);(this._inViewTiles.isIdRenderable(n)||u.state=="errored")&&t.some((m=>m.equals(u.tileID.canonical)))&&this._reloadTile(n,"expired")}}_removeTile(t){let n=this._inViewTiles.getTileById(t);n&&(n.uses--,this._inViewTiles.deleteTileById(t),this._clearTileReloadTimer(t),n.uses>0||(n.hasData()&&n.state!=="reloading"?this._outOfViewCache.add(n.tileID,n,n.getExpiryTimeout()):(n.aborted=!0,this._abortTile(n),this._unloadTile(n))))}_dataHandler(t){t.dataType==="source"&&(t.sourceDataType!=="metadata"?t.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(t.sourceDataChanged,t.shouldReloadTileOptions),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(let t of this._inViewTiles.getAllIds())this._removeTile(t);this._outOfViewCache.reset()}tilesIn(t,n,u){let m=[],b=this.transform;if(!b)return m;let w=b.getCoveringTilesDetailsProvider().allowWorldCopies(),k=u?b.getCameraQueryGeometry(t):t,E=Z=>b.screenPointToMercatorCoordinate(Z,this.terrain),z=this.transformBbox(t,E,!w),O=this.transformBbox(k,E,!w),N=this.getIds(),j=a.ac.fromPoints(O);for(let Z=0;Z<N.length;Z++){let Q=this._inViewTiles.getTileById(N[Z]);if(Q.holdingForSymbolFade())continue;let se=w?[Q.tileID]:[Q.tileID.unwrapTo(-1),Q.tileID.unwrapTo(0)],le=Math.pow(2,b.zoom-Q.tileID.overscaledZ),oe=n*Q.queryPadding*a.a5/Q.tileSize/le;for(let ce of se){let me=j.map((de=>ce.getTilePoint(new a.ab(de.x,de.y))));if(me.expandBy(oe),me.intersects(Ci)){let de=z.map((xe=>ce.getTilePoint(xe))),ge=O.map((xe=>ce.getTilePoint(xe)));m.push({tile:Q,tileID:w?ce:ce.unwrapTo(0),queryGeometry:de,cameraQueryGeometry:ge,scale:le})}}}return m}transformBbox(t,n,u){let m=t.map(n);if(u){let b=a.ac.fromPoints(t);b.shrinkBy(.001*Math.min(b.width(),b.height()));let w=b.map(n);a.ac.fromPoints(m).covers(w)||(m=m.map((k=>k.x>.5?new a.ab(k.x-1,k.y,k.z):k)))}return m}getVisibleCoordinates(t){let n=this.getRenderableIds(t).map((u=>this._inViewTiles.getTileById(u).tileID));return this.transform&&this.transform.populateCache(n),n}hasTransition(){return!!this._source.hasTransition()||!(!lr(this._source.type)||!(function(t,n){if(n<=0)return!1;let u=te();for(let m of t.getAllTiles())if(m.fadeEndTime>=u)return!0;return!1})(this._inViewTiles,this._rasterFadeDuration))}setRasterFadeDuration(t){this._rasterFadeDuration=t}setFeatureState(t,n,u){this._state.updateState(t=t||a.aa,n,u)}removeFeatureState(t,n,u){this._state.removeFeatureState(t=t||a.aa,n,u)}getFeatureState(t,n){return this._state.getState(t=t||a.aa,n)}setDependencies(t,n,u){let m=this._inViewTiles.getTileById(t);m&&m.setDependencies(n,u)}reloadTilesForDependencies(t,n){for(let u of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(u).hasDependency(t,n)&&this._reloadTile(u,"reloading");this._outOfViewCache.filter((u=>!u.hasDependency(t,n)))}areTilesLoaded(){for(let t of this._inViewTiles.getAllTiles())if(t.state!=="loaded"&&t.state!=="errored")return!1;return!0}}dn.maxUnderzooming=10,dn.maxOverzooming=3;class at{constructor(t,n){this.reset(t,n)}reset(t,n){this.points=t||[],this._distances=[0];for(let u=1;u<this.points.length;u++)this._distances[u]=this._distances[u-1]+this.points[u].dist(this.points[u-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(n||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(this.points.length===1)return this.points[0];t=a.ao(t,0,1);let n=1,u=this._distances[n],m=t*this.paddedLength+this.padding;for(;u<m&&n<this._distances.length;)u=this._distances[++n];let b=n-1,w=this._distances[b],k=u-w,E=k>0?(m-w)/k:0;return this.points[b].mult(1-E).add(this.points[n].mult(E))}}function jt(_,t){let n=!0;return _==="always"||_!=="never"&&t!=="never"||(n=!1),n}class zt{constructor(t,n,u){let m=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(t/u),this.yCellCount=Math.ceil(n/u);for(let w=0;w<this.xCellCount*this.yCellCount;w++)m.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=n,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/n,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,n,u,m,b){this._forEachCell(n,u,m,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(n),this.bboxes.push(u),this.bboxes.push(m),this.bboxes.push(b)}insertCircle(t,n,u,m){this._forEachCell(n-m,u-m,n+m,u+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(n),this.circles.push(u),this.circles.push(m)}_insertBoxCell(t,n,u,m,b,w){this.boxCells[b].push(w)}_insertCircleCell(t,n,u,m,b,w){this.circleCells[b].push(w)}_query(t,n,u,m,b,w,k){if(u<0||t>this.width||m<0||n>this.height)return[];let E=[];if(t<=0&&n<=0&&this.width<=u&&this.height<=m){if(b)return[{key:null,x1:t,y1:n,x2:u,y2:m}];for(let z=0;z<this.boxKeys.length;z++)E.push({key:this.boxKeys[z],x1:this.bboxes[4*z],y1:this.bboxes[4*z+1],x2:this.bboxes[4*z+2],y2:this.bboxes[4*z+3]});for(let z=0;z<this.circleKeys.length;z++){let O=this.circles[3*z],N=this.circles[3*z+1],j=this.circles[3*z+2];E.push({key:this.circleKeys[z],x1:O-j,y1:N-j,x2:O+j,y2:N+j})}}else this._forEachCell(t,n,u,m,this._queryCell,E,{hitTest:b,overlapMode:w,seenUids:{box:{},circle:{}}},k);return E}query(t,n,u,m){return this._query(t,n,u,m,!1,null)}hitTest(t,n,u,m,b,w){return this._query(t,n,u,m,!0,b,w).length>0}hitTestCircle(t,n,u,m,b){let w=t-u,k=t+u,E=n-u,z=n+u;if(k<0||w>this.width||z<0||E>this.height)return!1;let O=[];return this._forEachCell(w,E,k,z,this._queryCellCircle,O,{hitTest:!0,overlapMode:m,circle:{x:t,y:n,radius:u},seenUids:{box:{},circle:{}}},b),O.length>0}_queryCell(t,n,u,m,b,w,k,E){let{seenUids:z,hitTest:O,overlapMode:N}=k,j=this.boxCells[b];if(j!==null){let Q=this.bboxes;for(let se of j)if(!z.box[se]){z.box[se]=!0;let le=4*se,oe=this.boxKeys[se];if(t<=Q[le+2]&&n<=Q[le+3]&&u>=Q[le+0]&&m>=Q[le+1]&&(!E||E(oe))&&(!O||!jt(N,oe.overlapMode))&&(w.push({key:oe,x1:Q[le],y1:Q[le+1],x2:Q[le+2],y2:Q[le+3]}),O))return!0}}let Z=this.circleCells[b];if(Z!==null){let Q=this.circles;for(let se of Z)if(!z.circle[se]){z.circle[se]=!0;let le=3*se,oe=this.circleKeys[se];if(this._circleAndRectCollide(Q[le],Q[le+1],Q[le+2],t,n,u,m)&&(!E||E(oe))&&(!O||!jt(N,oe.overlapMode))){let ce=Q[le],me=Q[le+1],de=Q[le+2];if(w.push({key:oe,x1:ce-de,y1:me-de,x2:ce+de,y2:me+de}),O)return!0}}}return!1}_queryCellCircle(t,n,u,m,b,w,k,E){let{circle:z,seenUids:O,overlapMode:N}=k,j=this.boxCells[b];if(j!==null){let Q=this.bboxes;for(let se of j)if(!O.box[se]){O.box[se]=!0;let le=4*se,oe=this.boxKeys[se];if(this._circleAndRectCollide(z.x,z.y,z.radius,Q[le+0],Q[le+1],Q[le+2],Q[le+3])&&(!E||E(oe))&&!jt(N,oe.overlapMode))return w.push(!0),!0}}let Z=this.circleCells[b];if(Z!==null){let Q=this.circles;for(let se of Z)if(!O.circle[se]){O.circle[se]=!0;let le=3*se,oe=this.circleKeys[se];if(this._circlesCollide(Q[le],Q[le+1],Q[le+2],z.x,z.y,z.radius)&&(!E||E(oe))&&!jt(N,oe.overlapMode))return w.push(!0),!0}}}_forEachCell(t,n,u,m,b,w,k,E){let z=this._convertToXCellCoord(t),O=this._convertToYCellCoord(n),N=this._convertToXCellCoord(u),j=this._convertToYCellCoord(m);for(let Z=z;Z<=N;Z++)for(let Q=O;Q<=j;Q++)if(b.call(this,t,n,u,m,this.xCellCount*Q+Z,w,k,E))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,n,u,m,b,w){let k=m-t,E=b-n,z=u+w;return z*z>k*k+E*E}_circleAndRectCollide(t,n,u,m,b,w,k){let E=(w-m)/2,z=Math.abs(t-(m+E));if(z>E+u)return!1;let O=(k-b)/2,N=Math.abs(n-(b+O));if(N>O+u)return!1;if(z<=E||N<=O)return!0;let j=z-E,Z=N-O;return j*j+Z*Z<=u*u}}function Qr(_,t,n){let u=a.N();if(!_){let{vecSouth:N,vecEast:j}=ca(t),Z=M();Z[0]=j[0],Z[1]=j[1],Z[2]=N[0],Z[3]=N[1],m=Z,(O=(w=(b=Z)[0])*(z=b[3])-(E=b[2])*(k=b[1]))&&(m[0]=z*(O=1/O),m[1]=-k*O,m[2]=-E*O,m[3]=w*O),u[0]=Z[0],u[1]=Z[1],u[4]=Z[2],u[5]=Z[3]}var m,b,w,k,E,z,O;return a.Q(u,u,[1/n,1/n,1]),u}function $o(_,t,n,u){if(_){let m=a.N();if(!t){let{vecSouth:b,vecEast:w}=ca(n);m[0]=w[0],m[1]=w[1],m[4]=b[0],m[5]=b[1]}return a.Q(m,m,[u,u,1]),m}return n.pixelsToClipSpaceMatrix}function ca(_){let t=Math.cos(_.rollInRadians),n=Math.sin(_.rollInRadians),u=Math.cos(_.pitchInRadians),m=Math.cos(_.bearingInRadians),b=Math.sin(_.bearingInRadians),w=a.aD();w[0]=-m*u*n-b*t,w[1]=-b*u*n+m*t;let k=a.aE(w);k<1e-9?a.aF(w):a.aG(w,w,1/k);let E=a.aD();E[0]=m*u*t-b*n,E[1]=b*u*t+m*n;let z=a.aE(E);return z<1e-9?a.aF(E):a.aG(E,E,1/z),{vecEast:E,vecSouth:w}}function Rt(_,t,n,u){let m;u?(m=[_,t,u(_,t),1],a.aI(m,m,n)):(m=[_,t,0,1],Qa(m,m,n));let b=m[3];return{point:new a.P(m[0]/b,m[1]/b),signedDistanceFromCamera:b,isOccluded:!1}}function no(_,t){return .5+_/t*.5}function Ts(_,t){return _.x>=-t[0]&&_.x<=t[0]&&_.y>=-t[1]&&_.y<=t[1]}function Ho(_,t,n,u,m,b,w,k,E,z,O,N,j){let Z=n?_.textSizeData:_.iconSizeData,Q=a.az(Z,t.transform.zoom),se=[256/t.width*2+1,256/t.height*2+1],le=n?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;le.clear();let oe=_.lineVertexArray,ce=n?_.text.placedSymbolArray:_.icon.placedSymbolArray,me=t.transform.width/t.transform.height,de=!1;for(let ge=0;ge<ce.length;ge++){let xe=ce.get(ge);if(xe.hidden||xe.writingMode===a.aA.vertical&&!de){bi(xe.numGlyphs,le);continue}de=!1;let pe=new a.P(xe.anchorX,xe.anchorY),Te={getElevation:j,pitchedLabelPlaneMatrix:u,lineVertexArray:oe,pitchWithMap:b,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:t.transform,tileAnchorPoint:pe,unwrappedTileID:E,width:z,height:O,translation:N},Re=Xn(xe.anchorX,xe.anchorY,Te);if(!Ts(Re.point,se)){bi(xe.numGlyphs,le);continue}let ze=no(t.transform.cameraToCenterDistance,Re.signedDistanceFromCamera),De=a.aB(Z,Q,xe),Fe=b?De*t.transform.getPitchedTextCorrection(xe.anchorX,xe.anchorY,E)/ze:De*ze,$e=Cs({projectionContext:Te,pitchedLabelPlaneMatrixInverse:m,symbol:xe,fontSize:Fe,flip:!1,keepUpright:w,glyphOffsetArray:_.glyphOffsetArray,dynamicLayoutVertexArray:le,aspectRatio:me,rotateToLine:k});de=$e.useVertical,($e.notEnoughRoom||de||$e.needsFlipping&&Cs({projectionContext:Te,pitchedLabelPlaneMatrixInverse:m,symbol:xe,fontSize:Fe,flip:!0,keepUpright:w,glyphOffsetArray:_.glyphOffsetArray,dynamicLayoutVertexArray:le,aspectRatio:me,rotateToLine:k}).notEnoughRoom)&&bi(xe.numGlyphs,le)}n?_.text.dynamicLayoutVertexBuffer.updateData(le):_.icon.dynamicLayoutVertexBuffer.updateData(le)}function ua(_,t,n,u,m,b,w,k){let E=b.glyphStartIndex+b.numGlyphs,z=b.lineStartIndex,O=b.lineStartIndex+b.lineLength,N=t.getoffsetX(b.glyphStartIndex),j=t.getoffsetX(E-1),Z=Wr(_*N,n,u,m,b.segment,z,O,k,w);if(!Z)return null;let Q=Wr(_*j,n,u,m,b.segment,z,O,k,w);return Q?k.projectionCache.anyProjectionOccluded?null:{first:Z,last:Q}:null}function ao(_,t,n,u){return _===a.aA.horizontal&&Math.abs(n.y-t.y)>Math.abs(n.x-t.x)*u?{useVertical:!0}:(_===a.aA.vertical?t.y<n.y:t.x>n.x)?{needsFlipping:!0}:null}function Cs(_){let{projectionContext:t,pitchedLabelPlaneMatrixInverse:n,symbol:u,fontSize:m,flip:b,keepUpright:w,glyphOffsetArray:k,dynamicLayoutVertexArray:E,aspectRatio:z,rotateToLine:O}=_,N=m/24,j=u.lineOffsetX*N,Z=u.lineOffsetY*N,Q;if(u.numGlyphs>1){let se=u.glyphStartIndex+u.numGlyphs,le=u.lineStartIndex,oe=u.lineStartIndex+u.lineLength,ce=ua(N,k,j,Z,b,u,O,t);if(!ce)return{notEnoughRoom:!0};let me=ks(ce.first.point.x,ce.first.point.y,t,n),de=ks(ce.last.point.x,ce.last.point.y,t,n);if(w&&!b){let ge=ao(u.writingMode,me,de,z);if(ge)return ge}Q=[ce.first];for(let ge=u.glyphStartIndex+1;ge<se-1;ge++){let xe=Wr(N*k.getoffsetX(ge),j,Z,b,u.segment,le,oe,t,O);if(!xe)return{notEnoughRoom:!0};Q.push(xe)}Q.push(ce.last)}else{if(w&&!b){let le=gi(t.tileAnchorPoint.x,t.tileAnchorPoint.y,t).point,oe=u.lineStartIndex+u.segment+1,ce=new a.P(t.lineVertexArray.getx(oe),t.lineVertexArray.gety(oe)),me=gi(ce.x,ce.y,t),de=me.signedDistanceFromCamera>0?me.point:so(t.tileAnchorPoint,ce,le,1,t),ge=ks(le.x,le.y,t,n),xe=ks(de.x,de.y,t,n),pe=ao(u.writingMode,ge,xe,z);if(pe)return pe}let se=Wr(N*k.getoffsetX(u.glyphStartIndex),j,Z,b,u.segment,u.lineStartIndex,u.lineStartIndex+u.lineLength,t,O);if(!se||t.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Q=[se]}for(let se of Q)a.aH(E,se.point,se.angle);return{}}function so(_,t,n,u,m){let b=_.add(_.sub(t)._unit()),w=gi(b.x,b.y,m).point,k=n.sub(w);return n.add(k._mult(u/k.mag()))}function Vr(_,t,n){let u=t.projectionCache;if(u.projections[_])return u.projections[_];let m=new a.P(t.lineVertexArray.getx(_),t.lineVertexArray.gety(_)),b=gi(m.x,m.y,t);if(b.signedDistanceFromCamera>0)return u.projections[_]=b.point,u.anyProjectionOccluded=u.anyProjectionOccluded||b.isOccluded,b.point;let w=_-n.direction;return so(n.distanceFromAnchor===0?t.tileAnchorPoint:new a.P(t.lineVertexArray.getx(w),t.lineVertexArray.gety(w)),m,n.previousVertex,n.absOffsetX-n.distanceFromAnchor+1,t)}function gi(_,t,n){let u=_+n.translation[0],m=t+n.translation[1],b;return n.pitchWithMap?(b=Rt(u,m,n.pitchedLabelPlaneMatrix,n.getElevation),b.isOccluded=!1):(b=n.transform.projectTileCoordinates(u,m,n.unwrappedTileID,n.getElevation),b.point.x=(.5*b.point.x+.5)*n.width,b.point.y=(.5*-b.point.y+.5)*n.height),b}function ks(_,t,n,u){if(n.pitchWithMap){let m=[_,t,0,1];return a.aI(m,m,u),n.transform.projectTileCoordinates(m[0]/m[3],m[1]/m[3],n.unwrappedTileID,n.getElevation).point}return{x:_/n.width*2-1,y:1-t/n.height*2}}function Xn(_,t,n){return n.transform.projectTileCoordinates(_,t,n.unwrappedTileID,n.getElevation)}function Ps(_,t,n){return _._unit()._perp()._mult(t*n)}function Aa(_,t,n,u,m,b,w,k,E){if(k.projectionCache.offsets[_])return k.projectionCache.offsets[_];let z=n.add(t);if(_+E.direction<u||_+E.direction>=m)return k.projectionCache.offsets[_]=z,z;let O=Vr(_+E.direction,k,E),N=Ps(O.sub(n),w,E.direction),j=n.add(N),Z=O.add(N);return k.projectionCache.offsets[_]=a.aJ(b,z,j,Z)||z,k.projectionCache.offsets[_]}function Wr(_,t,n,u,m,b,w,k,E){let z=u?_-t:_+t,O=z>0?1:-1,N=0;u&&(O*=-1,N=Math.PI),O<0&&(N+=Math.PI);let j,Z=O>0?b+m:b+m+1;k.projectionCache.cachedAnchorPoint?j=k.projectionCache.cachedAnchorPoint:(j=gi(k.tileAnchorPoint.x,k.tileAnchorPoint.y,k).point,k.projectionCache.cachedAnchorPoint=j);let Q,se,le=j,oe=j,ce=0,me=0,de=Math.abs(z),ge=[],xe;for(;ce+me<=de;){if(Z+=O,Z<b||Z>=w)return null;ce+=me,oe=le,se=Q;let Re={absOffsetX:de,direction:O,distanceFromAnchor:ce,previousVertex:oe};if(le=Vr(Z,k,Re),n===0)ge.push(oe),xe=le.sub(oe);else{let ze,De=le.sub(oe);ze=De.mag()===0?Ps(Vr(Z+O,k,Re).sub(le),n,O):Ps(De,n,O),se||(se=oe.add(ze)),Q=Aa(Z,ze,le,b,w,se,n,k,Re),ge.push(se),xe=Q.sub(se)}me=xe.mag()}let pe=xe._mult((de-ce)/me)._add(se||oe),Te=N+Math.atan2(le.y-oe.y,le.x-oe.x);return ge.push(pe),{point:pe,angle:E?Te:0,path:ge}}let li=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function bi(_,t){for(let n=0;n<_;n++){let u=t.length;t.resize(u+4),t.float32.set(li,3*u)}}function Qa(_,t,n){let u=t[0],m=t[1];return _[0]=n[0]*u+n[4]*m+n[12],_[1]=n[1]*u+n[5]*m+n[13],_[3]=n[3]*u+n[7]*m+n[15],_}let ki=100;class Ja{constructor(t,n=new zt(t.width+200,t.height+200,25),u=new zt(t.width+200,t.height+200,25)){this.transform=t,this.grid=n,this.ignoredGrid=u,this.pitchFactor=Math.cos(t.pitch*Math.PI/180)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+ki,this.screenBottomBoundary=t.height+ki,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(t,n,u,m,b,w,k,E,z,O,N,j){let Z=this.projectAndGetPerspectiveRatio(t.anchorPointX+E[0],t.anchorPointY+E[1],b,O,j),Q=u*Z.perspectiveRatio,se;if(w||k)se=this._projectCollisionBox(t,Q,m,b,w,k,E,Z,O,N,j);else{let xe=Z.x+(N?N.x*Q:0),pe=Z.y+(N?N.y*Q:0);se={allPointsOccluded:!1,box:[xe+t.x1*Q,pe+t.y1*Q,xe+t.x2*Q,pe+t.y2*Q]}}let[le,oe,ce,me]=se.box,de=w?se.allPointsOccluded:Z.isOccluded,ge=de;return ge||(ge=Z.perspectiveRatio<this.perspectiveRatioCutoff),ge||(ge=!this.isInsideGrid(le,oe,ce,me)),ge||n!=="always"&&this.grid.hitTest(le,oe,ce,me,n,z)?{box:[le,oe,ce,me],placeable:!1,offscreen:!1,occluded:de}:{box:[le,oe,ce,me],placeable:!0,offscreen:this.isOffscreen(le,oe,ce,me),occluded:de}}placeCollisionCircles(t,n,u,m,b,w,k,E,z,O,N,j,Z,Q){let se=[],le=new a.P(n.anchorX,n.anchorY),oe=this.getPerspectiveRatio(le.x,le.y,w,Q),ce=(z?b*this.transform.getPitchedTextCorrection(n.anchorX,n.anchorY,w)/oe:b*oe)/a.aN,me={getElevation:Q,pitchedLabelPlaneMatrix:k,lineVertexArray:u,pitchWithMap:z,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:le,unwrappedTileID:w,width:this.transform.width,height:this.transform.height,translation:Z},de=ua(ce,m,n.lineOffsetX*ce,n.lineOffsetY*ce,!1,n,!1,me),ge=!1,xe=!1,pe=!0;if(de){let Te=.5*N*oe+j,Re=new a.P(-100,-100),ze=new a.P(this.screenRightBoundary,this.screenBottomBoundary),De=new at,Fe=de.first,$e=de.last,Je=[];for(let Lt=Fe.path.length-1;Lt>=1;Lt--)Je.push(Fe.path[Lt]);for(let Lt=1;Lt<$e.path.length;Lt++)Je.push($e.path[Lt]);let Ze=2.5*Te;if(z){let Lt=this.projectPathToScreenSpace(Je,me);Je=Lt.some((yi=>yi.signedDistanceFromCamera<=0))?[]:Lt.map((yi=>yi.point))}let ht=[];if(Je.length>0){let Lt=Je[0].clone(),yi=Je[0].clone();for(let Ri=1;Ri<Je.length;Ri++)Lt.x=Math.min(Lt.x,Je[Ri].x),Lt.y=Math.min(Lt.y,Je[Ri].y),yi.x=Math.max(yi.x,Je[Ri].x),yi.y=Math.max(yi.y,Je[Ri].y);ht=Lt.x>=Re.x&&yi.x<=ze.x&&Lt.y>=Re.y&&yi.y<=ze.y?[Je]:yi.x<Re.x||Lt.x>ze.x||yi.y<Re.y||Lt.y>ze.y?[]:a.aK([Je],Re.x,Re.y,ze.x,ze.y)}for(let Lt of ht){De.reset(Lt,.25*Te);let yi=0;yi=De.length<=.5*Te?1:Math.ceil(De.paddedLength/Ze)+1;for(let Ri=0;Ri<yi;Ri++){let wi=Ri/Math.max(yi-1,1),Gi=De.lerp(wi),Di=Gi.x+ki,kr=Gi.y+ki;se.push(Di,kr,Te,0);let ji=Di-Te,yr=kr-Te,ur=Di+Te,dr=kr+Te;if(pe=pe&&this.isOffscreen(ji,yr,ur,dr),xe=xe||this.isInsideGrid(ji,yr,ur,dr),t!=="always"&&this.grid.hitTestCircle(Di,kr,Te,t,O)&&(ge=!0,!E))return{circles:[],offscreen:!1,collisionDetected:ge}}}}return{circles:!E&&ge||!xe||oe<this.perspectiveRatioCutoff?[]:se,offscreen:pe,collisionDetected:ge}}projectPathToScreenSpace(t,n){let u=(function(m,b){let w=a.N();return a.aC(w,b.pitchedLabelPlaneMatrix),m.map((k=>{let E=Rt(k.x,k.y,w,b.getElevation),z=b.transform.projectTileCoordinates(E.point.x,E.point.y,b.unwrappedTileID,b.getElevation);return z.point.x=(.5*z.point.x+.5)*b.width,z.point.y=(.5*-z.point.y+.5)*b.height,z}))})(t,n);return(function(m){let b=0,w=0,k=0,E=0;for(let z=0;z<m.length;z++)m[z].isOccluded?(k=z+1,E=0):(E++,E>w&&(w=E,b=k));return m.slice(b,b+w)})(u)}queryRenderedSymbols(t){if(t.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};let n=[],u=new a.ac;for(let N of t){let j=new a.P(N.x+ki,N.y+ki);u.extend(j),n.push(j)}let{minX:m,minY:b,maxX:w,maxY:k}=u,E=this.grid.query(m,b,w,k).concat(this.ignoredGrid.query(m,b,w,k)),z={},O={};for(let N of E){let j=N.key;if(z[j.bucketInstanceId]===void 0&&(z[j.bucketInstanceId]={}),z[j.bucketInstanceId][j.featureIndex])continue;let Z=[new a.P(N.x1,N.y1),new a.P(N.x2,N.y1),new a.P(N.x2,N.y2),new a.P(N.x1,N.y2)];a.aL(n,Z)&&(z[j.bucketInstanceId][j.featureIndex]=!0,O[j.bucketInstanceId]===void 0&&(O[j.bucketInstanceId]=[]),O[j.bucketInstanceId].push(j.featureIndex))}return O}insertCollisionBox(t,n,u,m,b,w){(u?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:b,collisionGroupID:w,overlapMode:n},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,n,u,m,b,w){let k=u?this.ignoredGrid:this.grid,E={bucketInstanceId:m,featureIndex:b,collisionGroupID:w,overlapMode:n};for(let z=0;z<t.length;z+=4)k.insertCircle(E,t[z],t[z+1],t[z+2])}projectAndGetPerspectiveRatio(t,n,u,m,b){if(b){let w;m?(w=[t,n,m(t,n),1],a.aI(w,w,b)):(w=[t,n,0,1],Qa(w,w,b));let k=w[3];return{x:(w[0]/k+1)/2*this.transform.width+ki,y:(-w[1]/k+1)/2*this.transform.height+ki,perspectiveRatio:.5+this.transform.cameraToCenterDistance/k*.5,isOccluded:!1,signedDistanceFromCamera:k}}{let w=this.transform.projectTileCoordinates(t,n,u,m);return{x:(w.point.x+1)/2*this.transform.width+ki,y:(1-w.point.y)/2*this.transform.height+ki,perspectiveRatio:.5+this.transform.cameraToCenterDistance/w.signedDistanceFromCamera*.5,isOccluded:w.isOccluded,signedDistanceFromCamera:w.signedDistanceFromCamera}}}getPerspectiveRatio(t,n,u,m){let b=this.transform.projectTileCoordinates(t,n,u,m);return .5+this.transform.cameraToCenterDistance/b.signedDistanceFromCamera*.5}isOffscreen(t,n,u,m){return u<ki||t>=this.screenRightBoundary||m<ki||n>this.screenBottomBoundary}isInsideGrid(t,n,u,m){return u>=0&&t<this.gridRightBoundary&&m>=0&&n<this.gridBottomBoundary}getViewportMatrix(){let t=a.as([]);return a.O(t,t,[-100,-100,0]),t}_projectCollisionBox(t,n,u,m,b,w,k,E,z,O,N){let j=1,Z=0,Q=0,se=1,le=t.anchorPointX+k[0],oe=t.anchorPointY+k[1];if(w&&!b){let Je=this.projectAndGetPerspectiveRatio(le+1,oe,m,z,N),Ze=Je.x-E.x,ht=Math.atan((Je.y-E.y)/Ze)+(Ze<0?Math.PI:0),Lt=Math.sin(ht),yi=Math.cos(ht);j=yi,Z=Lt,Q=-Lt,se=yi}else if(!w&&b){let Je=ca(this.transform);j=Je.vecEast[0],Z=Je.vecEast[1],Q=Je.vecSouth[0],se=Je.vecSouth[1]}let ce=E.x,me=E.y,de=n;b&&(ce=le,me=oe,de=Math.pow(2,-(this.transform.zoom-u.overscaledZ)),de*=this.transform.getPitchedTextCorrection(le,oe,m),O||(de*=a.ao(.5+E.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),O&&(ce+=j*O.x*de+Q*O.y*de,me+=Z*O.x*de+se*O.y*de);let ge=t.x1*de,xe=t.x2*de,pe=(ge+xe)/2,Te=t.y1*de,Re=t.y2*de,ze=(Te+Re)/2,De=[{offsetX:ge,offsetY:Te},{offsetX:pe,offsetY:Te},{offsetX:xe,offsetY:Te},{offsetX:xe,offsetY:ze},{offsetX:xe,offsetY:Re},{offsetX:pe,offsetY:Re},{offsetX:ge,offsetY:Re},{offsetX:ge,offsetY:ze}],Fe=[];for(let{offsetX:Je,offsetY:Ze}of De)Fe.push(new a.P(ce+j*Je+Q*Ze,me+Z*Je+se*Ze));let $e=!1;if(b){let Je=Fe.map((Ze=>this.projectAndGetPerspectiveRatio(Ze.x,Ze.y,m,z,N)));$e=Je.some((Ze=>!Ze.isOccluded)),Fe=Je.map((Ze=>new a.P(Ze.x,Ze.y)))}else $e=!0;return{box:a.aM(Fe),allPointsOccluded:!$e}}}class Yo{constructor(t,n,u,m){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?n:-n))):m&&u?1:0,this.placed=u}isHidden(){return this.opacity===0&&!this.placed}}class Nt{constructor(t,n,u,m,b){this.text=new Yo(t?t.text:null,n,u,b),this.icon=new Yo(t?t.icon:null,n,m,b)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Hi{constructor(t,n,u){this.text=t,this.icon=n,this.skipFade=u}}class Xo{constructor(t,n,u,m,b){this.bucketInstanceId=t,this.featureIndex=n,this.sourceLayerIndex=u,this.bucketIndex=m,this.tileID=b}}class oo{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){let n=++this.maxGroupID;this.collisionGroups[t]={ID:n,predicate:u=>u.collisionGroupID===n}}return this.collisionGroups[t]}}function Gr(_,t,n,u,m){let{horizontalAlign:b,verticalAlign:w}=a.aT(_);return new a.P(-(b-.5)*t+u[0]*m,-(w-.5)*n+u[1]*m)}class Fl{constructor(t,n,u,m,b){this.transform=t.clone(),this.terrain=n,this.collisionIndex=new Ja(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=u,this.retainedQueryData={},this.collisionGroups=new oo(m),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=b,b&&(b.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(t){let n=this.terrain;return n?(u,m)=>n.getElevation(t,u,m):null}getBucketParts(t,n,u,m){let b=u.getBucket(n),w=u.latestFeatureIndex;if(!b||!w||n.id!==b.layerIds[0])return;let k=u.collisionBoxArray,E=b.layers[0].layout,z=b.layers[0].paint,O=Math.pow(2,this.transform.zoom-u.tileID.overscaledZ),N=u.tileSize/a.a5,j=u.tileID.toUnwrapped(),Z=E.get("text-rotation-alignment")==="map",Q=a.aO(u,1,this.transform.zoom),se=a.aP(this.collisionIndex.transform,u,z.get("text-translate"),z.get("text-translate-anchor")),le=a.aP(this.collisionIndex.transform,u,z.get("icon-translate"),z.get("icon-translate-anchor")),oe=Qr(Z,this.transform,Q);this.retainedQueryData[b.bucketInstanceId]=new Xo(b.bucketInstanceId,w,b.sourceLayerIndex,b.index,u.tileID);let ce={bucket:b,layout:E,translationText:se,translationIcon:le,unwrappedTileID:j,pitchedLabelPlaneMatrix:oe,scale:O,textPixelRatio:N,holdingForFade:u.holdingForSymbolFade(),collisionBoxArray:k,partiallyEvaluatedTextSize:a.az(b.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(m)for(let me of b.sortKeyRanges){let{sortKey:de,symbolInstanceStart:ge,symbolInstanceEnd:xe}=me;t.push({sortKey:de,symbolInstanceStart:ge,symbolInstanceEnd:xe,parameters:ce})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:ce})}attemptAnchorPlacement(t,n,u,m,b,w,k,E,z,O,N,j,Z,Q,se,le,oe,ce,me,de){let ge=a.aQ[t.textAnchor],xe=[t.textOffset0,t.textOffset1],pe=Gr(ge,u,m,xe,b),Te=this.collisionIndex.placeCollisionBox(n,j,E,z,O,k,w,le,N.predicate,me,pe,de);if((!ce||this.collisionIndex.placeCollisionBox(ce,j,E,z,O,k,w,oe,N.predicate,me,pe,de).placeable)&&Te.placeable){let Re;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Z.crossTileID]&&this.prevPlacement.placements[Z.crossTileID]&&this.prevPlacement.placements[Z.crossTileID].text&&(Re=this.prevPlacement.variableOffsets[Z.crossTileID].anchor),Z.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Z.crossTileID]={textOffset:xe,width:u,height:m,anchor:ge,textBoxScale:b,prevAnchor:Re},this.markUsedJustification(Q,ge,Z,se),Q.allowVerticalPlacement&&(this.markUsedOrientation(Q,se,Z),this.placedOrientations[Z.crossTileID]=se),{shift:pe,placedGlyphBoxes:Te}}}placeLayerBucketPart(t,n,u){let{bucket:m,layout:b,translationText:w,translationIcon:k,unwrappedTileID:E,pitchedLabelPlaneMatrix:z,textPixelRatio:O,holdingForFade:N,collisionBoxArray:j,partiallyEvaluatedTextSize:Z,collisionGroup:Q}=t.parameters,se=b.get("text-optional"),le=b.get("icon-optional"),oe=a.aR(b,"text-overlap","text-allow-overlap"),ce=oe==="always",me=a.aR(b,"icon-overlap","icon-allow-overlap"),de=me==="always",ge=b.get("text-rotation-alignment")==="map",xe=b.get("text-pitch-alignment")==="map",pe=b.get("icon-text-fit")!=="none",Te=b.get("symbol-z-order")==="viewport-y",Re=ce&&(de||!m.hasIconData()||le),ze=de&&(ce||!m.hasTextData()||se);!m.collisionArrays&&j&&m.deserializeCollisionBoxes(j);let De=this.retainedQueryData[m.bucketInstanceId].tileID,Fe=this._getTerrainElevationFunc(De),$e=this.transform.getFastPathSimpleProjectionMatrix(De),Je=(Ze,ht,Lt)=>{var yi,Ri;if(n[Ze.crossTileID])return;if(N)return void(this.placements[Ze.crossTileID]=new Hi(!1,!1,!1));let wi=!1,Gi=!1,Di=!0,kr=null,ji={box:null,placeable:!1,offscreen:null,occluded:!1},yr={placeable:!1},ur=null,dr=null,$r=null,vn=0,qa=0,Hs=0;ht.textFeatureIndex?vn=ht.textFeatureIndex:Ze.useRuntimeCollisionCircles&&(vn=Ze.featureIndex),ht.verticalTextFeatureIndex&&(qa=ht.verticalTextFeatureIndex);let Mo=ht.textBox;if(Mo){let Or=_r=>{let Pr=a.aA.horizontal;if(m.allowVerticalPlacement&&!_r&&this.prevPlacement){let Wn=this.prevPlacement.placedOrientations[Ze.crossTileID];Wn&&(this.placedOrientations[Ze.crossTileID]=Wn,Pr=Wn,this.markUsedOrientation(m,Pr,Ze))}return Pr},rn=(_r,Pr)=>{if(m.allowVerticalPlacement&&Ze.numVerticalGlyphVertices>0&&ht.verticalTextBox){for(let Wn of m.writingModes)if(Wn===a.aA.vertical?(ji=Pr(),yr=ji):ji=_r(),ji&&ji.placeable)break}else ji=_r()},Hr=Ze.textAnchorOffsetStartIndex,aa=Ze.textAnchorOffsetEndIndex;if(aa===Hr){let _r=(Pr,Wn)=>{let Qi=this.collisionIndex.placeCollisionBox(Pr,oe,O,De,E,xe,ge,w,Q.predicate,Fe,void 0,$e);return Qi&&Qi.placeable&&(this.markUsedOrientation(m,Wn,Ze),this.placedOrientations[Ze.crossTileID]=Wn),Qi};rn((()=>_r(Mo,a.aA.horizontal)),(()=>{let Pr=ht.verticalTextBox;return m.allowVerticalPlacement&&Ze.numVerticalGlyphVertices>0&&Pr?_r(Pr,a.aA.vertical):{box:null,offscreen:null}})),Or(ji&&ji.placeable)}else{let _r=a.aQ[(Ri=(yi=this.prevPlacement)===null||yi===void 0?void 0:yi.variableOffsets[Ze.crossTileID])===null||Ri===void 0?void 0:Ri.anchor],Pr=(Qi,am,Yh)=>{let Sd=Qi.x2-Qi.x1,Xh=Qi.y2-Qi.y1,Io=Ze.textBoxScale,zo=pe&&me==="never"?am:null,Ys=null,Kh=oe==="never"?1:2,tu="never";_r&&Kh++;for(let Td=0;Td<Kh;Td++){for(let gl=Hr;gl<aa;gl++){let Cd=m.textAnchorOffsets.get(gl);if(_r&&Cd.textAnchor!==_r)continue;let kd=this.attemptAnchorPlacement(Cd,Qi,Sd,Xh,Io,ge,xe,O,De,E,Q,tu,Ze,m,Yh,w,k,zo,Fe);if(kd&&(Ys=kd.placedGlyphBoxes,Ys&&Ys.placeable))return wi=!0,kr=kd.shift,Ys}_r?_r=null:tu=oe}return u&&!Ys&&(Ys={box:this.collisionIndex.placeCollisionBox(Mo,"always",O,De,E,xe,ge,w,Q.predicate,Fe,void 0,$e).box,offscreen:!1,placeable:!1,occluded:!1}),Ys};rn((()=>Pr(Mo,ht.iconBox,a.aA.horizontal)),(()=>{let Qi=ht.verticalTextBox;return m.allowVerticalPlacement&&(!ji||!ji.placeable)&&Ze.numVerticalGlyphVertices>0&&Qi?Pr(Qi,ht.verticalIconBox,a.aA.vertical):{box:null,occluded:!0,offscreen:null}})),ji&&(wi=ji.placeable,Di=ji.offscreen);let Wn=Or(ji&&ji.placeable);if(!wi&&this.prevPlacement){let Qi=this.prevPlacement.variableOffsets[Ze.crossTileID];Qi&&(this.variableOffsets[Ze.crossTileID]=Qi,this.markUsedJustification(m,Qi.anchor,Ze,Wn))}}}if(ur=ji,wi=ur&&ur.placeable,Di=ur&&ur.offscreen,Ze.useRuntimeCollisionCircles&&Ze.centerJustifiedTextSymbolIndex>=0){let Or=m.text.placedSymbolArray.get(Ze.centerJustifiedTextSymbolIndex),rn=a.aB(m.textSizeData,Z,Or),Hr=b.get("text-padding");dr=this.collisionIndex.placeCollisionCircles(oe,Or,m.lineVertexArray,m.glyphOffsetArray,rn,E,z,u,xe,Q.predicate,Ze.collisionCircleDiameter,Hr,w,Fe),dr.circles.length&&dr.collisionDetected&&!u&&a.w("Collisions detected, but collision boxes are not shown"),wi=ce||dr.circles.length>0&&!dr.collisionDetected,Di=Di&&dr.offscreen}if(ht.iconFeatureIndex&&(Hs=ht.iconFeatureIndex),ht.iconBox){let Or=rn=>this.collisionIndex.placeCollisionBox(rn,me,O,De,E,xe,ge,k,Q.predicate,Fe,pe&&kr?kr:void 0,$e);yr&&yr.placeable&&ht.verticalIconBox?($r=Or(ht.verticalIconBox),Gi=$r.placeable):($r=Or(ht.iconBox),Gi=$r.placeable),Di=Di&&$r.offscreen}let eu=se||Ze.numHorizontalGlyphVertices===0&&Ze.numVerticalGlyphVertices===0,ml=le||Ze.numIconVertices===0;eu||ml?ml?eu||(Gi=Gi&&wi):wi=Gi&&wi:Gi=wi=Gi&&wi;let Va=Gi&&$r.placeable;if(wi&&ur.placeable&&this.collisionIndex.insertCollisionBox(ur.box,oe,b.get("text-ignore-placement"),m.bucketInstanceId,yr&&yr.placeable&&qa?qa:vn,Q.ID),Va&&this.collisionIndex.insertCollisionBox($r.box,me,b.get("icon-ignore-placement"),m.bucketInstanceId,Hs,Q.ID),dr&&wi&&this.collisionIndex.insertCollisionCircles(dr.circles,oe,b.get("text-ignore-placement"),m.bucketInstanceId,vn,Q.ID),u&&this.storeCollisionData(m.bucketInstanceId,Lt,ht,ur,$r,dr),Ze.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(m.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Ze.crossTileID]=new Hi((wi||Re)&&!(ur!=null&&ur.occluded),(Gi||ze)&&!($r!=null&&$r.occluded),Di||m.justReloaded),n[Ze.crossTileID]=!0};if(Te){if(t.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");let Ze=m.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let ht=Ze.length-1;ht>=0;--ht){let Lt=Ze[ht];Je(m.symbolInstances.get(Lt),m.collisionArrays[Lt],Lt)}}else for(let Ze=t.symbolInstanceStart;Ze<t.symbolInstanceEnd;Ze++)Je(m.symbolInstances.get(Ze),m.collisionArrays[Ze],Ze);m.justReloaded=!1}storeCollisionData(t,n,u,m,b,w){if(u.textBox||u.iconBox){let k,E;this.collisionBoxArrays.has(t)?k=this.collisionBoxArrays.get(t):(k=new Map,this.collisionBoxArrays.set(t,k)),k.has(n)?E=k.get(n):(E={text:null,icon:null},k.set(n,E)),u.textBox&&(E.text=m.box),u.iconBox&&(E.icon=b.box)}if(w){let k=this.collisionCircleArrays[t];k===void 0&&(k=this.collisionCircleArrays[t]=[]);for(let E=0;E<w.circles.length;E+=4)k.push(w.circles[E+0]-ki),k.push(w.circles[E+1]-ki),k.push(w.circles[E+2]),k.push(w.collisionDetected?1:0)}}markUsedJustification(t,n,u,m){let b;b=m===a.aA.vertical?u.verticalPlacedTextSymbolIndex:{left:u.leftJustifiedTextSymbolIndex,center:u.centerJustifiedTextSymbolIndex,right:u.rightJustifiedTextSymbolIndex}[a.aS(n)];let w=[u.leftJustifiedTextSymbolIndex,u.centerJustifiedTextSymbolIndex,u.rightJustifiedTextSymbolIndex,u.verticalPlacedTextSymbolIndex];for(let k of w)k>=0&&(t.text.placedSymbolArray.get(k).crossTileID=b>=0&&k!==b?0:u.crossTileID)}markUsedOrientation(t,n,u){let m=n===a.aA.horizontal||n===a.aA.horizontalOnly?n:0,b=n===a.aA.vertical?n:0,w=[u.leftJustifiedTextSymbolIndex,u.centerJustifiedTextSymbolIndex,u.rightJustifiedTextSymbolIndex];for(let k of w)t.text.placedSymbolArray.get(k).placedOrientation=m;u.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(u.verticalPlacedTextSymbolIndex).placedOrientation=b)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;let n=this.prevPlacement,u=!1;this.prevZoomAdjustment=n?n.zoomAdjustment(this.transform.zoom):0;let m=n?n.symbolFadeChange(t):1,b=n?n.opacities:{},w=n?n.variableOffsets:{},k=n?n.placedOrientations:{};for(let E in this.placements){let z=this.placements[E],O=b[E];O?(this.opacities[E]=new Nt(O,m,z.text,z.icon),u=u||z.text!==O.text.placed||z.icon!==O.icon.placed):(this.opacities[E]=new Nt(null,m,z.text,z.icon,z.skipFade),u=u||z.text||z.icon)}for(let E in b){let z=b[E];if(!this.opacities[E]){let O=new Nt(z,m,!1,!1);O.isHidden()||(this.opacities[E]=O,u=u||z.text.placed||z.icon.placed)}}for(let E in w)this.variableOffsets[E]||!this.opacities[E]||this.opacities[E].isHidden()||(this.variableOffsets[E]=w[E]);for(let E in k)this.placedOrientations[E]||!this.opacities[E]||this.opacities[E].isHidden()||(this.placedOrientations[E]=k[E]);if(n&&n.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");u?this.lastPlacementChangeTime=t:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=n?n.lastPlacementChangeTime:t)}updateLayerOpacities(t,n){let u={};for(let m of n){let b=m.getBucket(t);b&&m.latestFeatureIndex&&t.id===b.layerIds[0]&&this.updateBucketOpacities(b,m.tileID,u,m.collisionBoxArray)}}updateBucketOpacities(t,n,u,m){t.hasTextData()&&(t.text.opacityVertexArray.clear(),t.text.hasVisibleVertices=!1),t.hasIconData()&&(t.icon.opacityVertexArray.clear(),t.icon.hasVisibleVertices=!1),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();let b=t.layers[0],w=b.layout,k=new Nt(null,0,!1,!1,!0),E=w.get("text-allow-overlap"),z=w.get("icon-allow-overlap"),O=b._unevaluatedLayout.hasValue("text-variable-anchor")||b._unevaluatedLayout.hasValue("text-variable-anchor-offset"),N=w.get("text-rotation-alignment")==="map",j=w.get("text-pitch-alignment")==="map",Z=w.get("icon-text-fit")!=="none",Q=new Nt(null,0,E&&(z||!t.hasIconData()||w.get("icon-optional")),z&&(E||!t.hasTextData()||w.get("text-optional")),!0);!t.collisionArrays&&m&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(m);let se=(oe,ce,me)=>{for(let de=0;de<ce/4;de++)oe.opacityVertexArray.emplaceBack(me);oe.hasVisibleVertices=oe.hasVisibleVertices||me!==ts},le=this.collisionBoxArrays.get(t.bucketInstanceId);for(let oe=0;oe<t.symbolInstances.length;oe++){let ce=t.symbolInstances.get(oe),{numHorizontalGlyphVertices:me,numVerticalGlyphVertices:de,crossTileID:ge}=ce,xe=this.opacities[ge];u[ge]?xe=k:xe||(xe=Q,this.opacities[ge]=xe),u[ge]=!0;let pe=ce.numIconVertices>0,Te=this.placedOrientations[ce.crossTileID],Re=Te===a.aA.vertical,ze=Te===a.aA.horizontal||Te===a.aA.horizontalOnly;if(me>0||de>0){let Fe=lo(xe.text);se(t.text,me,Re?ts:Fe),se(t.text,de,ze?ts:Fe);let $e=xe.text.isHidden();[ce.rightJustifiedTextSymbolIndex,ce.centerJustifiedTextSymbolIndex,ce.leftJustifiedTextSymbolIndex].forEach((ht=>{ht>=0&&(t.text.placedSymbolArray.get(ht).hidden=$e||Re?1:0)})),ce.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(ce.verticalPlacedTextSymbolIndex).hidden=$e||ze?1:0);let Je=this.variableOffsets[ce.crossTileID];Je&&this.markUsedJustification(t,Je.anchor,ce,Te);let Ze=this.placedOrientations[ce.crossTileID];Ze&&(this.markUsedJustification(t,"left",ce,Ze),this.markUsedOrientation(t,Ze,ce))}if(pe){let Fe=lo(xe.icon),$e=!(Z&&ce.verticalPlacedIconSymbolIndex&&Re);ce.placedIconSymbolIndex>=0&&(se(t.icon,ce.numIconVertices,$e?Fe:ts),t.icon.placedSymbolArray.get(ce.placedIconSymbolIndex).hidden=xe.icon.isHidden()),ce.verticalPlacedIconSymbolIndex>=0&&(se(t.icon,ce.numVerticalIconVertices,$e?ts:Fe),t.icon.placedSymbolArray.get(ce.verticalPlacedIconSymbolIndex).hidden=xe.icon.isHidden())}let De=le&&le.has(oe)?le.get(oe):{text:null,icon:null};if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){let Fe=t.collisionArrays[oe];if(Fe){let $e=new a.P(0,0);if(Fe.textBox||Fe.verticalTextBox){let Je=!0;if(O){let Ze=this.variableOffsets[ge];Ze?($e=Gr(Ze.anchor,Ze.width,Ze.height,Ze.textOffset,Ze.textBoxScale),N&&$e._rotate(j?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Je=!1}if(Fe.textBox||Fe.verticalTextBox){let Ze;Fe.textBox&&(Ze=Re),Fe.verticalTextBox&&(Ze=ze),Es(t.textCollisionBox.collisionVertexArray,xe.text.placed,!Je||Ze,De.text,$e.x,$e.y)}}if(Fe.iconBox||Fe.verticalIconBox){let Je=!!(!ze&&Fe.verticalIconBox),Ze;Fe.iconBox&&(Ze=Je),Fe.verticalIconBox&&(Ze=!Je),Es(t.iconCollisionBox.collisionVertexArray,xe.icon.placed,Ze,De.icon,Z?$e.x:0,Z?$e.y:0)}}}}if(t.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.text.opacityVertexArray.length!==t.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${t.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${t.text.layoutVertexArray.length}) / 4`);if(t.icon.opacityVertexArray.length!==t.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${t.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${t.icon.layoutVertexArray.length}) / 4`);t.bucketInstanceId in this.collisionCircleArrays&&(t.collisionCircleArray=this.collisionCircleArrays[t.bucketInstanceId],delete this.collisionCircleArrays[t.bucketInstanceId])}symbolFadeChange(t){return this.fadeDuration===0?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,n){let u=this.zoomAtLastRecencyCheck===n?1-this.zoomAdjustment(n):1;return this.zoomAtLastRecencyCheck=n,this.commitTime+this.fadeDuration*u>t}setStale(){this.stale=!0}}function Es(_,t,n,u,m,b){u&&u.length!==0||(u=[0,0,0,0]);let w=u[0]-ki,k=u[1]-ki,E=u[2]-ki,z=u[3]-ki;_.emplaceBack(t?1:0,n?1:0,m||0,b||0,w,k),_.emplaceBack(t?1:0,n?1:0,m||0,b||0,E,k),_.emplaceBack(t?1:0,n?1:0,m||0,b||0,E,z),_.emplaceBack(t?1:0,n?1:0,m||0,b||0,w,z)}let da=Math.pow(2,25),Yi=Math.pow(2,24),es=Math.pow(2,17),ha=Math.pow(2,16),Ma=Math.pow(2,9),Ko=Math.pow(2,8),Kn=Math.pow(2,1);function lo(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;let t=_.placed?1:0,n=Math.floor(127*_.opacity);return n*da+t*Yi+n*es+t*ha+n*Ma+t*Ko+n*Kn+t}let ts=0;class On{constructor(t){this._sortAcrossTiles=t.layout.get("symbol-z-order")!=="viewport-y"&&!t.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,n,u,m,b){let w=this._bucketParts;for(;this._currentTileIndex<t.length;)if(n.getBucketParts(w,m,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,w.sort(((k,E)=>k.sortKey-E.sortKey)));this._currentPartIndex<w.length;)if(n.placeLayerBucketPart(w[this._currentPartIndex],this._seenCrossTileIDs,u),this._currentPartIndex++,b())return!0;return!1}}class Ia{constructor(t,n,u,m,b,w,k,E){this.placement=new Fl(t,n,w,k,E),this._currentPlacementIndex=u.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=b,this._done=!1}isDone(){return this._done}continuePlacement(t,n,u){let m=te(),b=()=>!this._forceFullPlacement&&te()-m>2;for(;this._currentPlacementIndex>=0;){let w=n[t[this._currentPlacementIndex]],k=this.placement.collisionIndex.transform.zoom;if(w.type==="symbol"&&(!w.minzoom||w.minzoom<=k)&&(!w.maxzoom||w.maxzoom>k)){if(this._inProgressLayer||(this._inProgressLayer=new On(w)),this._inProgressLayer.continuePlacement(u[w.source],this.placement,this._showCollisionBoxes,w,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}let Bt=512/a.a5/2;class As{constructor(t,n,u){this.tileID=t,this.bucketInstanceId=u,this._symbolsByKey={};let m=new Map;for(let b=0;b<n.length;b++){let w=n.get(b),k=w.key,E=m.get(k);E?E.push(w):m.set(k,[w])}for(let[b,w]of m){let k={positions:w.map((E=>({x:Math.floor(E.anchorX*Bt),y:Math.floor(E.anchorY*Bt)}))),crossTileIDs:w.map((E=>E.crossTileID))};if(k.positions.length>128){let E=new a.aU(k.positions.length,16,Uint16Array);for(let{x:z,y:O}of k.positions)E.add(z,O);E.finish(),delete k.positions,k.index=E}this._symbolsByKey[b]=k}}getScaledCoordinates(t,n){let{x:u,y:m,z:b}=this.tileID.canonical,{x:w,y:k,z:E}=n.canonical,z=Bt/Math.pow(2,E-b),O=(k*a.a5+t.anchorY)*z,N=m*a.a5*Bt;return{x:Math.floor((w*a.a5+t.anchorX)*z-u*a.a5*Bt),y:Math.floor(O-N)}}findMatches(t,n,u){let m=this.tileID.canonical.z<n.canonical.z?1:Math.pow(2,this.tileID.canonical.z-n.canonical.z);for(let b=0;b<t.length;b++){let w=t.get(b);if(w.crossTileID)continue;let k=this._symbolsByKey[w.key];if(!k)continue;let E=this.getScaledCoordinates(w,n);if(k.index){let z=k.index.range(E.x-m,E.y-m,E.x+m,E.y+m).sort();for(let O of z){let N=k.crossTileIDs[O];if(!u[N]){u[N]=!0,w.crossTileID=N;break}}}else if(k.positions)for(let z=0;z<k.positions.length;z++){let O=k.positions[z],N=k.crossTileIDs[z];if(Math.abs(O.x-E.x)<=m&&Math.abs(O.y-E.y)<=m&&!u[N]){u[N]=!0,w.crossTileID=N;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:t})=>t))}}class wc{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class co{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){let n=Math.round((t-this.lng)/360);if(n!==0)for(let u in this.indexes){let m=this.indexes[u],b={};for(let w in m){let k=m[w];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+n),b[k.tileID.key]=k}this.indexes[u]=b}this.lng=t}addBucket(t,n,u){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===n.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let b=0;b<n.symbolInstances.length;b++)n.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});let m=this.usedCrossTileIDs[t.overscaledZ];for(let b in this.indexes){let w=this.indexes[b];if(Number(b)>t.overscaledZ)for(let k in w){let E=w[k];E.tileID.isChildOf(t)&&E.findMatches(n.symbolInstances,t,m)}else{let k=w[t.scaledTo(Number(b)).key];k&&k.findMatches(n.symbolInstances,t,m)}}for(let b=0;b<n.symbolInstances.length;b++){let w=n.symbolInstances.get(b);w.crossTileID||(w.crossTileID=u.generate(),m[w.crossTileID]=!0)}return this.indexes[t.overscaledZ]===void 0&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new As(t,n.symbolInstances,n.bucketInstanceId),!0}removeBucketCrossTileIDs(t,n){for(let u of n.getCrossTileIDsLists())for(let m of u)delete this.usedCrossTileIDs[t][m]}removeStaleBuckets(t){let n=!1;for(let u in this.indexes){let m=this.indexes[u];for(let b in m)t[m[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(u,m[b]),delete m[b],n=!0)}return n}}class Jr{constructor(){this.layerIndexes={},this.crossTileIDs=new wc,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,n,u){let m=this.layerIndexes[t.id];m===void 0&&(m=this.layerIndexes[t.id]=new co);let b=!1,w={};m.handleWrapJump(u);for(let k of n){let E=k.getBucket(t);E&&t.id===E.layerIds[0]&&(E.bucketInstanceId||(E.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(k.tileID,E,this.crossTileIDs)&&(b=!0),w[E.bucketInstanceId]=!0)}return m.removeStaleBuckets(w)&&(b=!0),b}pruneUnusedLayers(t){let n={};t.forEach((u=>{n[u]=!0}));for(let u in this.layerIndexes)n[u]||delete this.layerIndexes[u]}}var vt="void main() {fragColor=vec4(1.0);}";let ci={prelude:ct(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:ct("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:ct("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:ct(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:ct(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:ct(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:ct(vt,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:ct(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:ct(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:ct("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:ct("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:ct(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:ct("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:ct(vt,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:ct(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:ct(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:ct(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:ct(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:ct(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:ct(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:ct(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ct(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:ct(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:ct(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:ct(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:ct(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0/u_device_pixel_ratio)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:ct(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:ct(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:ct(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:ct(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:ct(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:ct("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:ct("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:ct("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:ct("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:ct(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:ct("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function ct(_,t){let n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,u=t.match(/in ([\w]+) ([\w]+)/g),m=_.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=b?b.concat(m):m,k={};return{fragmentSource:_=_.replace(n,((E,z,O,N,j)=>(k[j]=!0,z==="define"?`
#ifndef HAS_UNIFORM_u_${j}
in ${O} ${N} ${j};
#else
uniform ${O} ${N} u_${j};
#endif
`:`
#ifdef HAS_UNIFORM_u_${j}
    ${O} ${N} ${j} = u_${j};
#endif
`))),vertexSource:t=t.replace(n,((E,z,O,N,j)=>{let Z=N==="float"?"vec2":"vec4",Q=j.match(/color/)?"color":Z;return k[j]?z==="define"?`
#ifndef HAS_UNIFORM_u_${j}
uniform lowp float u_${j}_t;
in ${O} ${Z} a_${j};
out ${O} ${N} ${j};
#else
uniform ${O} ${N} u_${j};
#endif
`:Q==="vec4"?`
#ifndef HAS_UNIFORM_u_${j}
    ${j} = a_${j};
#else
    ${O} ${N} ${j} = u_${j};
#endif
`:`
#ifndef HAS_UNIFORM_u_${j}
    ${j} = unpack_mix_${Q}(a_${j}, u_${j}_t);
#else
    ${O} ${N} ${j} = u_${j};
#endif
`:z==="define"?`
#ifndef HAS_UNIFORM_u_${j}
uniform lowp float u_${j}_t;
in ${O} ${Z} a_${j};
#else
uniform ${O} ${N} u_${j};
#endif
`:Q==="vec4"?`
#ifndef HAS_UNIFORM_u_${j}
    ${O} ${N} ${j} = a_${j};
#else
    ${O} ${N} ${j} = u_${j};
#endif
`:`
#ifndef HAS_UNIFORM_u_${j}
    ${O} ${N} ${j} = unpack_mix_${Q}(a_${j}, u_${j}_t);
#else
    ${O} ${N} ${j} = u_${j};
#endif
`})),staticAttributes:u,staticUniforms:w}}class xi{constructor(t,n,u){this.vertexBuffer=t,this.indexBuffer=n,this.segments=u}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Qn=a.aV([{name:"a_pos",type:"Int16",components:2}]);let Tr="#define PROJECTION_MERCATOR",Ur="mercator";class tr{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Ur}get shaderDefine(){return Tr}get shaderPreludeCode(){return ci.projectionMercator}get vertexShaderPreludeCode(){return ci.projectionMercator.vertexSource}get subdivisionGranularity(){return a.aW.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(t){}getMeshFromTileID(t,n,u,m,b){if(this._cachedMesh)return this._cachedMesh;let w=new a.aX;w.emplaceBack(0,0),w.emplaceBack(a.a5,0),w.emplaceBack(0,a.a5),w.emplaceBack(a.a5,a.a5);let k=t.createVertexBuffer(w,Qn.members),E=a.aY.simpleSegment(0,0,4,2),z=new a.aZ;z.emplaceBack(1,0,2),z.emplaceBack(1,2,3);let O=t.createIndexBuffer(z);return this._cachedMesh=new xi(k,O,E),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(t){}}class za{constructor(t=0,n=0,u=0,m=0){if(isNaN(t)||t<0||isNaN(n)||n<0||isNaN(u)||u<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=n,this.left=u,this.right=m}interpolate(t,n,u){return n.top!=null&&t.top!=null&&(this.top=a.G.number(t.top,n.top,u)),n.bottom!=null&&t.bottom!=null&&(this.bottom=a.G.number(t.bottom,n.bottom,u)),n.left!=null&&t.left!=null&&(this.left=a.G.number(t.left,n.left,u)),n.right!=null&&t.right!=null&&(this.right=a.G.number(t.right,n.right,u)),this}getCenter(t,n){let u=a.ao((this.left+t-this.right)/2,0,t),m=a.ao((this.top+n-this.bottom)/2,0,n);return new a.P(u,m)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new za(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Tn(_,t){if(!_.renderWorldCopies||_.lngRange)return;let n=t.lng-_.center.lng;t.lng+=n>180?-360:n<-180?360:0}function Jt(_){return Math.max(0,Math.floor(_))}class hn{constructor(t,n){var u;this.applyConstrain=(m,b)=>this._constrainOverride!==null?this._constrainOverride(m,b):this._callbacks.defaultConstrain(m,b),this._callbacks=t,this._tileSize=512,this._renderWorldCopies=(n==null?void 0:n.renderWorldCopies)===void 0||!!(n!=null&&n.renderWorldCopies),this._minZoom=(n==null?void 0:n.minZoom)||0,this._maxZoom=(n==null?void 0:n.maxZoom)||22,this._minPitch=(n==null?void 0:n.minPitch)==null?0:n==null?void 0:n.minPitch,this._maxPitch=(n==null?void 0:n.maxPitch)==null?60:n==null?void 0:n.maxPitch,this._constrainOverride=(u=n==null?void 0:n.constrainOverride)!==null&&u!==void 0?u:null,this.setMaxBounds(),this._width=0,this._height=0,this._center=new a.V(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Jt(this._zoom),this._scale=a.ar(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new za,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(t,n,u){this._constrainOverride=t.constrainOverride,this._latRange=t.latRange,this._lngRange=t.lngRange,this._width=t.width,this._height=t.height,this._center=t.center,this._elevation=t.elevation,this._minElevationForCurrentTile=t.minElevationForCurrentTile,this._zoom=t.zoom,this._tileZoom=Jt(this._zoom),this._scale=a.ar(this._zoom),this._bearingInRadians=t.bearingInRadians,this._fovInRadians=t.fovInRadians,this._pitchInRadians=t.pitchInRadians,this._rollInRadians=t.rollInRadians,this._unmodified=t.unmodified,this._edgeInsets=new za(t.padding.top,t.padding.bottom,t.padding.left,t.padding.right),this._minZoom=t.minZoom,this._maxZoom=t.maxZoom,this._minPitch=t.minPitch,this._maxPitch=t.maxPitch,this._renderWorldCopies=t.renderWorldCopies,this._cameraToCenterDistance=t.cameraToCenterDistance,this._nearZ=t.nearZ,this._farZ=t.farZ,this._autoCalculateNearFarZ=!u&&t.autoCalculateNearFarZ,n&&this.constrainInternal(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(t){this._minElevationForCurrentTile=t}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(t){this._minZoom!==t&&(this._minZoom=t,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(t){this._minPitch!==t&&(this._minPitch=t,this.setPitch(Math.max(this.pitch,t)))}get maxPitch(){return this._maxPitch}setMaxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.setPitch(Math.min(this.pitch,t)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(t){t===void 0?t=!0:t===null&&(t=!1),this._renderWorldCopies=t}get constrainOverride(){return this._constrainOverride}setConstrainOverride(t){t===void 0&&(t=null),this._constrainOverride!==t&&(this._constrainOverride=t,this.constrainInternal(),this._calcMatrices())}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(t){let n=a.W(t,-180,180)*Math.PI/180;var u,m,b,w,k,E,z,O,N;this._bearingInRadians!==n&&(this._unmodified=!1,this._bearingInRadians=n,this._calcMatrices(),this._rotationMatrix=M(),u=this._rotationMatrix,b=-this._bearingInRadians,w=(m=this._rotationMatrix)[0],k=m[1],E=m[2],z=m[3],O=Math.sin(b),N=Math.cos(b),u[0]=w*N+E*O,u[1]=k*N+z*O,u[2]=w*-O+E*N,u[3]=k*-O+z*N)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(t){let n=a.ao(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==n&&(this._unmodified=!1,this._pitchInRadians=n,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(t){let n=t/180*Math.PI;this._rollInRadians!==n&&(this._unmodified=!1,this._rollInRadians=n,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return a.a_(this._fovInRadians)}setFov(t){t=a.ao(t,.1,150),this.fov!==t&&(this._unmodified=!1,this._fovInRadians=a.aq(t),this._calcMatrices())}get zoom(){return this._zoom}setZoom(t){let n=this.applyConstrain(this._center,t).zoom;this._zoom!==n&&(this._unmodified=!1,this._zoom=n,this._tileZoom=Math.max(0,Math.floor(n)),this._scale=a.ar(n),this.constrainInternal(),this._calcMatrices())}get center(){return this._center}setCenter(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this.constrainInternal(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(t){t!==this._elevation&&(this._elevation=t,this.constrainInternal(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(t,n){this._autoCalculateNearFarZ=!1,this._nearZ=t,this._farZ=n,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,n,u){this._unmodified=!1,this._edgeInsets.interpolate(t,n,u),this.constrainInternal(),this._calcMatrices()}resize(t,n,u=!0){this._width=t,this._height=n,u&&this.constrainInternal(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Oi([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(t){t?(this._lngRange=[t.getWest(),t.getEast()],this._latRange=[t.getSouth(),t.getNorth()],this.constrainInternal()):(this._lngRange=null,this._latRange=[-a.ap,a.ap])}getCameraQueryGeometry(t,n){if(n.length===1)return[n[0],t];{let{minX:u,minY:m,maxX:b,maxY:w}=a.ac.fromPoints(n).extend(t);return[new a.P(u,m),new a.P(b,m),new a.P(b,w),new a.P(u,w),new a.P(u,m)]}}constrainInternal(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;let t=this._unmodified,{center:n,zoom:u}=this.applyConstrain(this.center,this.zoom);this.setCenter(n),this.setZoom(u),this._unmodified=t,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let t=a.as(new Float64Array(16));a.Q(t,t,[this._width/2,-this._height/2,1]),a.O(t,t,[1,-1,0]),this._clipSpaceToPixelsMatrix=t,t=a.as(new Float64Array(16)),a.Q(t,t,[1,-1,1]),a.O(t,t,[-1,-1,0]),a.Q(t,t,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=t,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(t,n,u,m){let b=u!==void 0?u:this.bearing,w=m=m!==void 0?m:this.pitch,{distanceToCenter:k,clampedElevation:E}=this._distanceToCenterFromAltElevationPitch(n,this.elevation,w),{x:z,y:O}=Si(w,b),N=a.ab.fromLngLat(t,n),j,Z,Q=a.a$(1,N.y),se=0;do{if(se+=1,se>10)break;Z=k/Q,j=new a.ab(N.x+z*Z,N.y+O*Z),Q=1/j.meterInMercatorCoordinateUnits()}while(Math.abs(k-Z*Q)>1e-12);return{center:j.toLngLat(),elevation:E,zoom:a.au(this.height/2/Math.tan(this.fovInRadians/2)/Z/this.tileSize)}}recalculateZoomAndCenter(t){if(this.elevation-t==0)return;let n=1/this.worldSize,u=a.at(1,this.center.lat)*this.worldSize,m=a.ab.fromLngLat(this.center,this.elevation),b=m.x/n,w=m.y/n,k=m.z/n,E=this.pitch,z=this.bearing,{x:O,y:N,z:j}=Si(E,z),Z=this.cameraToCenterDistance,Q=b+Z*-O,se=w+Z*-N,le=k+Z*j,{distanceToCenter:oe,clampedElevation:ce}=this._distanceToCenterFromAltElevationPitch(le/u,t,E),me=oe*u,de=new a.ab((Q+O*me)*n,(se+N*me)*n,0).toLngLat(),ge=a.at(1,de.lat),xe=a.au(this.height/2/Math.tan(this.fovInRadians/2)/oe/ge/this.tileSize);this._elevation=ce,this._center=de,this.setZoom(xe)}_distanceToCenterFromAltElevationPitch(t,n,u){let m=-Math.cos(a.aq(u)),b=t-n,w,k=n;return m*b>=0||Math.abs(m)<.1?(w=1e4,k=t+w*m):w=-b/m,{distanceToCenter:w,clampedElevation:k}}getCameraPoint(){let t=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(t*Math.sin(this.rollInRadians),t*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){let t=a.at(1,this.center.lat)*this.worldSize;return Le(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/t).toLngLat()}getMercatorTileCoordinates(t){if(!t)return[0,0,1,1];let n=t.canonical.z>=0?1<<t.canonical.z:Math.pow(2,t.canonical.z);return[t.canonical.x/n,t.canonical.y/n,1/n/a.a5,1/n/a.a5]}}class Rn{constructor(t,n){this.min=t,this.max=n,this.center=a.b0([],a.b1([],this.min,this.max),.5)}quadrant(t){let n=[t%2==0,t<2],u=a.b2(this.min),m=a.b2(this.max);for(let b=0;b<n.length;b++)u[b]=n[b]?this.min[b]:this.center[b],m[b]=n[b]?this.center[b]:this.max[b];return m[2]=this.max[2],new Rn(u,m)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}intersectsFrustum(t){let n=!0;for(let u=0;u<t.planes.length;u++){let m=this.intersectsPlane(t.planes[u]);if(m===0)return 0;m===1&&(n=!1)}return n?2:t.aabb.min[0]>this.max[0]||t.aabb.min[1]>this.max[1]||t.aabb.min[2]>this.max[2]||t.aabb.max[0]<this.min[0]||t.aabb.max[1]<this.min[1]||t.aabb.max[2]<this.min[2]?0:1}intersectsPlane(t){let n=t[3],u=t[3];for(let m=0;m<3;m++)t[m]>0?(n+=t[m]*this.min[m],u+=t[m]*this.max[m]):(u+=t[m]*this.min[m],n+=t[m]*this.max[m]);return n>=0?2:u<0?0:1}}class uo{distanceToTile2d(t,n,u,m){let b=m.distanceX([t,n]),w=m.distanceY([t,n]);return Math.hypot(b,w)}getWrap(t,n,u){return u}getTileBoundingVolume(t,n,u,m){var b,w;let k=0,E=0;if(m!=null&&m.terrain){let O=new a.a2(t.z,n,t.z,t.x,t.y),N=m.terrain.getMinMaxElevation(O);k=(b=N.minElevation)!==null&&b!==void 0?b:Math.min(0,u),E=(w=N.maxElevation)!==null&&w!==void 0?w:Math.max(0,u)}let z=1<<t.z;return new Rn([n+t.x/z,t.y/z,k],[n+(t.x+1)/z,(t.y+1)/z,E])}allowVariableZoom(t,n){let u=t.fov*(Math.abs(Math.cos(t.rollInRadians))*t.height+Math.abs(Math.sin(t.rollInRadians))*t.width)/t.height,m=a.ao(78.5-u/2,0,60);return!!n.terrain||t.pitch>m}allowWorldCopies(){return!0}prepareNextFrame(){}}class en{constructor(t,n,u){this.points=t,this.planes=n,this.aabb=u}static fromInvProjectionMatrix(t,n=1,u=0,m,b){let w=b?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],k=Math.pow(2,u),E=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((j=>(function(Z,Q,se,le){let oe=a.aI([],Z,Q),ce=1/oe[3]/se*le;return a.b7(oe,oe,[ce,ce,1/oe[3],ce])})(j,t,n,k)));m&&(function(j,Z,Q,se){let le=se?4:0,oe=se?0:4,ce=0,me=[],de=[];for(let pe=0;pe<4;pe++){let Te=a.b3([],j[pe+oe],j[pe+le]),Re=a.b8(Te);a.b0(Te,Te,1/Re),me.push(Re),de.push(Te)}for(let pe=0;pe<4;pe++){let Te=a.b9(j[pe+le],de[pe],Q);ce=Te!==null&&Te>=0?Math.max(ce,Te):Math.max(ce,me[pe])}let ge=(function(pe,Te){let Re=a.b3([],pe[Te[0]],pe[Te[1]]),ze=a.b3([],pe[Te[2]],pe[Te[1]]),De=[0,0,0,0];return a.b4(De,a.b5([],Re,ze)),De[3]=-a.b6(De,pe[Te[0]]),De})(j,Z),xe=(function(pe,Te){let Re=a.ba(pe),ze=a.bb([],pe,1/Re),De=a.b3([],Te,a.b0([],ze,a.b6(Te,ze))),Fe=a.ba(De);if(Fe>0){let $e=Math.sqrt(1-ze[3]*ze[3]),Je=a.b0([],ze,-ze[3]),Ze=a.b1([],Je,a.b0([],De,$e/Fe));return a.bc(Te,Ze)}return null})(Q,ge);if(xe!==null){let pe=xe/a.b6(de[0],ge);ce=Math.min(ce,pe)}for(let pe=0;pe<4;pe++){let Te=Math.min(ce,me[pe]);j[pe+oe]=[j[pe+le][0]+de[pe][0]*Te,j[pe+le][1]+de[pe][1]*Te,j[pe+le][2]+de[pe][2]*Te,1]}})(E,w[0],m,b);let z=w.map((j=>{let Z=a.b3([],E[j[0]],E[j[1]]),Q=a.b3([],E[j[2]],E[j[1]]),se=a.b4([],a.b5([],Z,Q)),le=-a.b6(se,E[j[1]]);return se.concat(le)})),O=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],N=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(let j of E)for(let Z=0;Z<3;Z++)O[Z]=Math.min(O[Z],j[Z]),N[Z]=Math.max(N[Z],j[Z]);return new en(E,z,new Rn(O,N))}}class La{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(t){this._helper.setMinZoom(t)}setMaxZoom(t){this._helper.setMaxZoom(t)}setMinPitch(t){this._helper.setMinPitch(t)}setMaxPitch(t){this._helper.setMaxPitch(t)}setRenderWorldCopies(t){this._helper.setRenderWorldCopies(t)}setBearing(t){this._helper.setBearing(t)}setPitch(t){this._helper.setPitch(t)}setRoll(t){this._helper.setRoll(t)}setFov(t){this._helper.setFov(t)}setZoom(t){this._helper.setZoom(t)}setCenter(t){this._helper.setCenter(t)}setElevation(t){this._helper.setElevation(t)}setMinElevationForCurrentTile(t){this._helper.setMinElevationForCurrentTile(t)}setPadding(t){this._helper.setPadding(t)}interpolatePadding(t,n,u){return this._helper.interpolatePadding(t,n,u)}isPaddingEqual(t){return this._helper.isPaddingEqual(t)}resize(t,n,u=!0){this._helper.resize(t,n,u)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(t){this._helper.setMaxBounds(t)}setConstrainOverride(t){this._helper.setConstrainOverride(t)}overrideNearFarZ(t,n){this._helper.overrideNearFarZ(t,n)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(t){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),t)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(t,n){}constructor(t){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this.defaultConstrain=(n,u)=>{u=a.ao(+u,this.minZoom,this.maxZoom);let m={center:new a.V(n.lng,n.lat),zoom:u},b=this._helper._lngRange;if(!this._helper._renderWorldCopies&&b===null){let de=179.9999999999;b=[-de,de]}let w=this.tileSize*a.ar(m.zoom),k=0,E=w,z=0,O=w,N=0,j=0,{x:Z,y:Q}=this.size;if(this._helper._latRange){let de=this._helper._latRange;k=a.X(de[1])*w,E=a.X(de[0])*w,E-k<Q&&(N=Q/(E-k))}b&&(z=a.W(a.Y(b[0])*w,0,w),O=a.W(a.Y(b[1])*w,0,w),O<z&&(O+=w),O-z<Z&&(j=Z/(O-z)));let{x:se,y:le}=pt(w,n),oe,ce,me=Math.max(j||0,N||0);if(me){let de=new a.P(j?(O+z)/2:se,N?(E+k)/2:le);return m.center=Et(w,de).wrap(),m.zoom+=a.au(me),m}if(this._helper._latRange){let de=Q/2;le-de<k&&(ce=k+de),le+de>E&&(ce=E-de)}if(b){let de=(z+O)/2,ge=se;this._helper._renderWorldCopies&&(ge=a.W(se,de-w/2,de+w/2));let xe=Z/2;ge-xe<z&&(oe=z+xe),ge+xe>O&&(oe=O-xe)}if(oe!==void 0||ce!==void 0){let de=new a.P(oe!=null?oe:se,ce!=null?ce:le);m.center=Et(w,de).wrap()}return m},this.applyConstrain=(n,u)=>this._helper.applyConstrain(n,u),this._helper=new hn({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(n,u)=>this.defaultConstrain(n,u)},t),this._coveringTilesDetailsProvider=new uo}clone(){let t=new La;return t.apply(this),t}apply(t,n,u){this._helper.apply(t,n,u)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(t){let n=[new a.bd(0,t)];if(this._helper._renderWorldCopies){let u=this.screenPointToMercatorCoordinate(new a.P(0,0)),m=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,0)),b=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,this._helper._height)),w=this.screenPointToMercatorCoordinate(new a.P(0,this._helper._height)),k=Math.floor(Math.min(u.x,m.x,b.x,w.x)),E=Math.floor(Math.max(u.x,m.x,b.x,w.x)),z=1;for(let O=k-z;O<=E+z;O++)O!==0&&n.push(new a.bd(O,t))}return n}getCameraFrustum(){return en.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(t){let n=this.screenPointToLocation(this.centerPoint,t),u=t?t.getElevationForLngLatZoom(n,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(u)}setLocationAtPoint(t,n){let u=a.at(this.elevation,this.center.lat),m=this.screenPointToMercatorCoordinateAtZ(n,u),b=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,u),w=a.ab.fromLngLat(t),k=new a.ab(w.x-(m.x-b.x),w.y-(m.y-b.y));this.setCenter(k==null?void 0:k.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(t,n){return n?this.coordinatePoint(a.ab.fromLngLat(t),n.getElevationForLngLat(t),this._pixelMatrix3D):this.coordinatePoint(a.ab.fromLngLat(t))}screenPointToLocation(t,n){var u;return(u=this.screenPointToMercatorCoordinate(t,n))===null||u===void 0?void 0:u.toLngLat()}screenPointToMercatorCoordinate(t,n){if(n){let u=n.pointCoordinate(t);if(u!=null)return u}return this.screenPointToMercatorCoordinateAtZ(t)}screenPointToMercatorCoordinateAtZ(t,n){let u=n||0,m=[t.x,t.y,0,1],b=[t.x,t.y,1,1];a.aI(m,m,this._pixelMatrixInverse),a.aI(b,b,this._pixelMatrixInverse);let w=m[3],k=b[3],E=m[1]/w,z=b[1]/k,O=m[2]/w,N=b[2]/k,j=O===N?0:(u-O)/(N-O);return new a.ab(a.G.number(m[0]/w,b[0]/k,j)/this.worldSize,a.G.number(E,z,j)/this.worldSize,u)}coordinatePoint(t,n=0,u=this._pixelMatrix){let m=[t.x*this.worldSize,t.y*this.worldSize,n,1];return a.aI(m,m,u),new a.P(m[0]/m[3],m[1]/m[3])}getBounds(){let t=Math.max(0,this._helper._height/2-fi(this));return new Oi().extend(this.screenPointToLocation(new a.P(0,t))).extend(this.screenPointToLocation(new a.P(this._helper._width,t))).extend(this.screenPointToLocation(new a.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new a.P(0,this._helper._height)))}isPointOnMapSurface(t,n){return n?n.pointCoordinate(t)!=null:t.y>this.height/2-fi(this)}calculatePosMatrix(t,n=!1,u){var m;let b=(m=t.key)!==null&&m!==void 0?m:a.be(t.wrap,t.canonical.z,t.canonical.z,t.canonical.x,t.canonical.y),w=n?this._alignedPosMatrixCache:this._posMatrixCache;if(w.has(b)){let z=w.get(b);return u?z.f32:z.f64}let k=oi(t,this.worldSize);a.S(k,n?this._alignedProjMatrix:this._viewProjMatrix,k);let E={f64:k,f32:new Float32Array(k)};return w.set(b,E),u?E.f32:E.f64}calculateFogMatrix(t){let n=t.key,u=this._fogMatrixCacheF32;if(u.has(n))return u.get(n);let m=oi(t,this.worldSize);return a.S(m,this._fogMatrix,m),u.set(n,new Float32Array(m)),u.get(n)}calculateCenterFromCameraLngLatAlt(t,n,u,m){return this._helper.calculateCenterFromCameraLngLatAlt(t,n,u,m)}_calculateNearFarZIfNeeded(t,n,u){if(!this._helper.autoCalculateNearFarZ)return;let m=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),b=t-m*this._helper._pixelPerMeter/Math.cos(n),w=m<0?b:t,k=Math.PI/2+this.pitchInRadians,E=a.aq(this.fov)*(Math.abs(Math.cos(a.aq(this.roll)))*this.height+Math.abs(Math.sin(a.aq(this.roll)))*this.width)/this.height*(.5+u.y/this.height),z=Math.sin(E)*w/Math.sin(a.ao(Math.PI-k-E,.01,Math.PI-.01)),O=fi(this),N=Math.atan(O/this._helper.cameraToCenterDistance),j=a.aq(.75),Z=N>j?2*N*(.5+u.y/(2*O)):j,Q=Math.sin(Z)*w/Math.sin(a.ao(Math.PI-k-Z,.01,Math.PI-.01)),se=Math.min(z,Q);this._helper._farZ=1.01*(Math.cos(Math.PI/2-n)*se+w),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;let t=this.centerOffset,n=pt(this.worldSize,this.center),u=n.x,m=n.y;this._helper._pixelPerMeter=a.at(1,this.center.lat)*this.worldSize;let b=a.aq(Math.min(this.pitch,lt)),w=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(b)),k;this._calculateNearFarZIfNeeded(w,b,t),k=new Float64Array(16),a.bf(k,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),a.aC(this._invProjMatrix,k),k[8]=2*-t.x/this._helper._width,k[9]=2*t.y/this._helper._height,this._projectionMatrix=a.bg(k),a.Q(k,k,[1,-1,1]),a.O(k,k,[0,0,-this._helper.cameraToCenterDistance]),a.bh(k,k,-this.rollInRadians),a.bi(k,k,this.pitchInRadians),a.bh(k,k,-this.bearingInRadians),a.O(k,k,[-u,-m,0]),this._mercatorMatrix=a.Q([],k,[this.worldSize,this.worldSize,this.worldSize]),a.Q(k,k,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=a.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,k),a.O(k,k,[0,0,-this.elevation]),this._viewProjMatrix=k,this._invViewProjMatrix=a.aC([],k);let E=[0,0,-1,1];a.aI(E,E,this._invViewProjMatrix),this._cameraPosition=[E[0]/E[3],E[1]/E[3],E[2]/E[3]],this._fogMatrix=new Float64Array(16),a.bf(this._fogMatrix,this.fovInRadians,this.width/this.height,w,this._helper._farZ),this._fogMatrix[8]=2*-t.x/this.width,this._fogMatrix[9]=2*t.y/this.height,a.Q(this._fogMatrix,this._fogMatrix,[1,-1,1]),a.O(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),a.bh(this._fogMatrix,this._fogMatrix,-this.rollInRadians),a.bi(this._fogMatrix,this._fogMatrix,this.pitchInRadians),a.bh(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),a.O(this._fogMatrix,this._fogMatrix,[-u,-m,0]),a.Q(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),a.O(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=a.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,k);let z=this._helper._width%2/2,O=this._helper._height%2/2,N=Math.cos(this.bearingInRadians),j=Math.sin(-this.bearingInRadians),Z=u-Math.round(u)+N*z+j*O,Q=m-Math.round(m)+N*O+j*z,se=new Float64Array(k);if(a.O(se,se,[Z>.5?Z-1:Z,Q>.5?Q-1:Q,0]),this._alignedProjMatrix=se,k=a.aC(new Float64Array(16),this._pixelMatrix),!k)throw new Error("failed to invert matrix");this._pixelMatrixInverse=k,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;let t=this.screenPointToMercatorCoordinate(new a.P(0,0)),n=[t.x*this.worldSize,t.y*this.worldSize,0,1];return a.aI(n,n,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){let t=a.at(1,this.center.lat)*this.worldSize;return Le(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/t).toLngLat()}lngLatToCameraDepth(t,n){let u=a.ab.fromLngLat(t),m=[u.x*this.worldSize,u.y*this.worldSize,n,1];return a.aI(m,m,this._viewProjMatrix),m[2]/m[3]}getProjectionData(t){let{overscaledTileID:n,aligned:u,applyTerrainMatrix:m}=t,b=this._helper.getMercatorTileCoordinates(n),w=n?this.calculatePosMatrix(n,u,!0):null,k;return k=n&&n.terrainRttPosMatrix32f&&m?n.terrainRttPosMatrix32f:w||a.bj(),{mainMatrix:k,tileMercatorCoords:b,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:k}}isLocationOccluded(t){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(t,n,u){return 1}transformLightDirection(t){return a.b2(t)}getRayDirectionFromPixel(t){throw new Error("Not implemented.")}projectTileCoordinates(t,n,u,m){let b=this.calculatePosMatrix(u),w;m?(w=[t,n,m(t,n),1],a.aI(w,w,b)):(w=[t,n,0,1],Qa(w,w,b));let k=w[3];return{point:new a.P(w[0]/k,w[1]/k),signedDistanceFromCamera:k,isOccluded:!1}}populateCache(t){for(let n of t)this.calculatePosMatrix(n)}getMatrixForModel(t,n){let u=a.ab.fromLngLat(t,n),m=u.meterInMercatorCoordinateUnits(),b=a.bk();return a.O(b,b,[u.x,u.y,u.z]),a.bh(b,b,Math.PI),a.bi(b,b,Math.PI/2),a.Q(b,b,[-m,m,m]),b}getProjectionDataForCustomLayer(t=!0){let n=new a.a2(0,0,0,0,0),u=this.getProjectionData({overscaledTileID:n,applyGlobeMatrix:t}),m=oi(n,this.worldSize);a.S(m,this._viewProjMatrix,m),u.tileMercatorCoords=[0,0,1,1];let b=[a.a5,a.a5,this.worldSize/this._helper.pixelsPerMeter],w=a.bl();return a.Q(w,m,b),u.fallbackMatrix=w,u.mainMatrix=w,u}getFastPathSimpleProjectionMatrix(t){return this.calculatePosMatrix(t)}}function Bn(){a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Sc(_){if(_.useSlerp)if(_.k<1){let t=a.bm(_.startEulerAngles.roll,_.startEulerAngles.pitch,_.startEulerAngles.bearing),n=a.bm(_.endEulerAngles.roll,_.endEulerAngles.pitch,_.endEulerAngles.bearing),u=new Float64Array(4);a.bn(u,t,n,_.k);let m=a.bo(u);_.tr.setRoll(m.roll),_.tr.setPitch(m.pitch),_.tr.setBearing(m.bearing)}else _.tr.setRoll(_.endEulerAngles.roll),_.tr.setPitch(_.endEulerAngles.pitch),_.tr.setBearing(_.endEulerAngles.bearing);else _.tr.setRoll(a.G.number(_.startEulerAngles.roll,_.endEulerAngles.roll,_.k)),_.tr.setPitch(a.G.number(_.startEulerAngles.pitch,_.endEulerAngles.pitch,_.k)),_.tr.setBearing(a.G.number(_.startEulerAngles.bearing,_.endEulerAngles.bearing,_.k))}function Qo(_,t,n,u,m){let b=m.padding,w=pt(m.worldSize,n.getNorthWest()),k=pt(m.worldSize,n.getNorthEast()),E=pt(m.worldSize,n.getSouthEast()),z=pt(m.worldSize,n.getSouthWest()),O=a.aq(-u),N=w.rotate(O),j=k.rotate(O),Z=E.rotate(O),Q=z.rotate(O),se=new a.P(Math.max(N.x,j.x,Q.x,Z.x),Math.max(N.y,j.y,Q.y,Z.y)),le=new a.P(Math.min(N.x,j.x,Q.x,Z.x),Math.min(N.y,j.y,Q.y,Z.y)),oe=se.sub(le),ce=(m.width-(b.left+b.right+t.left+t.right))/oe.x,me=(m.height-(b.top+b.bottom+t.top+t.bottom))/oe.y;if(me<0||ce<0)return void Bn();let de=Math.min(a.au(m.scale*Math.min(ce,me)),_.maxZoom),ge=a.P.convert(_.offset),xe=new a.P((t.left-t.right)/2,(t.top-t.bottom)/2).rotate(a.aq(u)),pe=ge.add(xe).mult(m.scale/a.ar(de));return{center:Et(m.worldSize,w.add(E).div(2).sub(pe)),zoom:de,bearing:u}}class Yt{get useGlobeControls(){return!1}handlePanInertia(t,n){let u=t.mag(),m=Math.abs(fi(n));return{easingOffset:t.mult(Math.min(.75*m/u,1)),easingCenter:n.center}}handleMapControlsRollPitchBearingZoom(t,n){t.bearingDelta&&n.setBearing(n.bearing+t.bearingDelta),t.pitchDelta&&n.setPitch(n.pitch+t.pitchDelta),t.rollDelta&&n.setRoll(n.roll+t.rollDelta),t.zoomDelta&&n.setZoom(n.zoom+t.zoomDelta)}handleMapControlsPan(t,n,u){t.around.distSqr(n.centerPoint)<.01||n.setLocationAtPoint(u,t.around)}cameraForBoxAndBearing(t,n,u,m,b){return Qo(t,n,u,m,b)}handleJumpToCenterZoom(t,n){t.zoom!==(n.zoom!==void 0?+n.zoom:t.zoom)&&t.setZoom(+n.zoom),n.center!==void 0&&t.setCenter(a.V.convert(n.center))}handleEaseTo(t,n){let u=t.zoom,m=t.padding,b={roll:t.roll,pitch:t.pitch,bearing:t.bearing},w={roll:n.roll===void 0?t.roll:n.roll,pitch:n.pitch===void 0?t.pitch:n.pitch,bearing:n.bearing===void 0?t.bearing:n.bearing},k=n.zoom!==void 0,E=!t.isPaddingEqual(n.padding),z=!1,O=k?+n.zoom:t.zoom,N=t.centerPoint.add(n.offsetAsPoint),j=t.screenPointToLocation(N),{center:Z,zoom:Q}=t.applyConstrain(a.V.convert(n.center||j),O!=null?O:u);Tn(t,Z);let se=pt(t.worldSize,j),le=pt(t.worldSize,Z).sub(se),oe=a.ar(Q-u);return z=Q!==u,{easeFunc:ce=>{if(z&&t.setZoom(a.G.number(u,Q,ce)),a.bp(b,w)||Sc({startEulerAngles:b,endEulerAngles:w,tr:t,k:ce,useSlerp:b.roll!=w.roll}),E&&(t.interpolatePadding(m,n.padding,ce),N=t.centerPoint.add(n.offsetAsPoint)),n.around)t.setLocationAtPoint(n.around,n.aroundPoint);else{let me=a.ar(t.zoom-u),de=Q>u?Math.min(2,oe):Math.max(.5,oe),ge=Math.pow(de,1-ce),xe=Et(t.worldSize,se.add(le.mult(ce*ge)).mult(me));t.setLocationAtPoint(t.renderWorldCopies?xe.wrap():xe,N)}},isZooming:z,elevationCenter:Z}}handleFlyTo(t,n){let u=n.zoom!==void 0,m=t.zoom,b=t.applyConstrain(a.V.convert(n.center||n.locationAtOffset),u?+n.zoom:m),w=b.center,k=b.zoom;Tn(t,w);let E=pt(t.worldSize,n.locationAtOffset),z=pt(t.worldSize,w).sub(E),O=z.mag(),N=a.ar(k-m),j;if(n.minZoom!==void 0){let Z=Math.min(+n.minZoom,m,k),Q=t.applyConstrain(w,Z).zoom;j=a.ar(Q-m)}return{easeFunc:(Z,Q,se,le)=>{t.setZoom(Z===1?k:m+a.au(Q));let oe=Z===1?w:Et(t.worldSize,E.add(z.mult(se)).mult(Q));t.setLocationAtPoint(t.renderWorldCopies?oe.wrap():oe,le)},scaleOfZoom:N,targetCenter:w,scaleOfMinZoom:j,pixelPathLength:O}}}class Pi{constructor(t,n,u){this.blendFunction=t,this.blendColor=n,this.mask=u}}Pi.Replace=[1,0],Pi.disabled=new Pi(Pi.Replace,a.bq.transparent,[!1,!1,!1,!1]),Pi.unblended=new Pi(Pi.Replace,a.bq.transparent,[!0,!0,!0,!0]),Pi.alphaBlended=new Pi([1,771],a.bq.transparent,[!0,!0,!0,!0]);let Lr=2305;class Zt{constructor(t,n,u){this.enable=t,this.mode=n,this.frontFace=u}}Zt.disabled=new Zt(!1,1029,Lr),Zt.backCCW=new Zt(!0,1029,Lr),Zt.frontCCW=new Zt(!0,1028,Lr);class Ot{constructor(t,n,u){this.func=t,this.mask=n,this.range=u}}Ot.ReadOnly=!1,Ot.ReadWrite=!0,Ot.disabled=new Ot(519,Ot.ReadOnly,[0,1]);let Ms=7680;class ei{constructor(t,n,u,m,b,w){this.test=t,this.ref=n,this.mask=u,this.fail=m,this.depthFail=b,this.pass=w}}ei.disabled=new ei({func:519,mask:0},0,0,Ms,Ms,Ms);let ho=new WeakMap;function pn(_){var t;if(ho.has(_))return ho.get(_);{let n=(t=_.getParameter(_.VERSION))===null||t===void 0?void 0:t.startsWith("WebGL 2.0");return ho.set(_,n),n}}class Is{get awaitingQuery(){return!!this._readbackQueue}constructor(t){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=t;let n=t.context,u=n.gl;this._texFormat=u.RGBA,this._texType=u.UNSIGNED_BYTE;let m=new a.aX;m.emplaceBack(-1,-1),m.emplaceBack(2,-1),m.emplaceBack(-1,2);let b=new a.aZ;b.emplaceBack(0,1,2),this._fullscreenTriangle=new xi(n.createVertexBuffer(m,Qn.members),n.createIndexBuffer(b),a.aY.simpleSegment(0,0,m.length,b.length)),this._resultBuffer=new Uint8Array(4),n.activeTexture.set(u.TEXTURE1);let w=u.createTexture();u.bindTexture(u.TEXTURE_2D,w),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.NEAREST),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.NEAREST),u.texImage2D(u.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=n.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(w),pn(u)&&(this._pbo=u.createBuffer(),u.bindBuffer(u.PIXEL_PACK_BUFFER,this._pbo),u.bufferData(u.PIXEL_PACK_BUFFER,4,u.STREAM_READ),u.bindBuffer(u.PIXEL_PACK_BUFFER,null))}destroy(){let t=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),t.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(t,n){let u=this._updateCount;return this._readbackQueue?u>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():u>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(t,n),this._updateCount++,this._measuredError}_bindFramebuffer(){let t=this._cachedRenderContext.context,n=t.gl;t.activeTexture.set(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,this._fbo.colorAttachment.get()),t.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(t,n){let u=this._cachedRenderContext.context,m=u.gl;if(this._bindFramebuffer(),u.viewport.set([0,0,this._texWidth,this._texHeight]),u.clear({color:a.bq.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(u,m.TRIANGLES,Ot.disabled,ei.disabled,Pi.unblended,Zt.disabled,((b,w)=>({u_input:b,u_output_expected:w}))(t,n),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&pn(m)){m.bindBuffer(m.PIXEL_PACK_BUFFER,this._pbo),m.readBuffer(m.COLOR_ATTACHMENT0),m.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),m.bindBuffer(m.PIXEL_PACK_BUFFER,null);let b=m.fenceSync(m.SYNC_GPU_COMMANDS_COMPLETE,0);m.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:b}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){let t=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&pn(t)){let n=t.clientWaitSync(this._readbackQueue.sync,0,0);if(n===t.WAIT_FAILED)return a.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(n===t.TIMEOUT_EXPIRED)return;t.bindBuffer(t.PIXEL_PACK_BUFFER,this._pbo),t.getBufferSubData(t.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),t.bindBuffer(t.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),t.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Is._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(t){let n=0;return n+=t[0]/256,n+=t[1]/65536,n+=t[2]/16777216,t[3]<127&&(n=-n),n/128}}let Da=a.a5/128;function Jo(_,t){let n=_.granularity!==void 0?Math.max(_.granularity,1):1,u=n+(_.generateBorders?2:0),m=n+(_.extendToNorthPole||_.generateBorders?1:0)+(_.extendToSouthPole||_.generateBorders?1:0),b=u+1,w=m+1,k=_.generateBorders?-1:0,E=_.generateBorders||_.extendToNorthPole?-1:0,z=n+(_.generateBorders?1:0),O=n+(_.generateBorders||_.extendToSouthPole?1:0),N=b*w,j=u*m*6,Z=b*w>65536;if(Z&&t==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");let Q=Z||t==="32bit",se=new Int16Array(2*N),le=0;for(let me=E;me<=O;me++)for(let de=k;de<=z;de++){let ge=de/n*a.a5;de===-1&&(ge=-Da),de===n+1&&(ge=a.a5+Da);let xe=me/n*a.a5;me===-1&&(xe=_.extendToNorthPole?a.bs:-Da),me===n+1&&(xe=_.extendToSouthPole?a.bt:a.a5+Da),se[le++]=ge,se[le++]=xe}let oe=Q?new Uint32Array(j):new Uint16Array(j),ce=0;for(let me=0;me<m;me++)for(let de=0;de<u;de++){let ge=de+1+me*b,xe=de+(me+1)*b,pe=de+1+(me+1)*b;oe[ce++]=de+me*b,oe[ce++]=xe,oe[ce++]=ge,oe[ce++]=ge,oe[ce++]=xe,oe[ce++]=pe}return{vertices:se.buffer.slice(0),indices:oe.buffer.slice(0),uses32bitIndices:Q}}let po=new a.aW({fill:new a.bu(128,2),line:new a.bu(512,0),tile:new a.bu(128,32),stencil:new a.bu(128,1),circle:3});class Cn{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return ci.projectionGlobe}get vertexShaderPreludeCode(){return ci.projectionMercator.vertexSource}get subdivisionGranularity(){return po}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(t){this._errorMeasurement||(this._errorMeasurement=new Is(t));let n=a.X(this._errorQueryLatitudeDegrees),u=2*Math.atan(Math.exp(Math.PI-n*Math.PI*2))-.5*Math.PI,m=this._errorMeasurement.updateErrorLoop(n,u),b=te();m!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=m,this._errorMeasurementLastChangeTime=b);let w=Math.min(Math.max((b-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=a.bv(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,a.bw(w))}_getMeshKey(t){return`${t.granularity.toString(36)}_${t.generateBorders?"b":""}${t.extendToNorthPole?"n":""}${t.extendToSouthPole?"s":""}`}getMeshFromTileID(t,n,u,m,b){let w=(b==="stencil"?po.stencil:po.tile).getGranularityForZoomLevel(n.z);return this._getMesh(t,{granularity:w,generateBorders:u,extendToNorthPole:n.y===0&&m,extendToSouthPole:n.y===(1<<n.z)-1&&m})}_getMesh(t,n){let u=this._getMeshKey(n);if(u in this._tileMeshCache)return this._tileMeshCache[u];let m=(function(b,w){let k=Jo(w,"16bit"),E=a.aX.deserialize({arrayBuffer:k.vertices,length:k.vertices.byteLength/2/2}),z=a.aZ.deserialize({arrayBuffer:k.indices,length:k.indices.byteLength/2/3});return new xi(b.createVertexBuffer(E,Qn.members),b.createIndexBuffer(z),a.aY.simpleSegment(0,0,E.length,z.length))})(t,n);return this._tileMeshCache[u]=m,m}recalculate(t){}hasTransition(){let t=te(),n=!1;return n=n||(t-this._errorMeasurementLastChangeTime)/1e3<.7,n=n||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,n}setErrorQueryLatitudeDegrees(t){this._errorQueryLatitudeDegrees=t}}let Yu=new a.t({type:new a.D(a.u.projection.type)});class jl extends a.E{constructor(t){super(),this._transitionable=new a.x(Yu,void 0),this.setProjection(t),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.H(0)),this._mercatorProjection=new tr,this._verticalPerspectiveProjection=new Cn}get transitionState(){let t=this.properties.get("type");if(typeof t=="string"&&t==="mercator")return 0;if(typeof t=="string"&&t==="vertical-perspective")return 1;if(t instanceof a.bx){if(t.from==="vertical-perspective"&&t.to==="mercator")return 1-t.transition;if(t.from==="mercator"&&t.to==="vertical-perspective")return t.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(t){this._mercatorProjection.updateGPUdependent(t),this._verticalPerspectiveProjection.updateGPUdependent(t)}getMeshFromTileID(t,n,u,m,b){return this.currentProjection.getMeshFromTileID(t,n,u,m,b)}setProjection(t){this._transitionable.setValue("type",(t==null?void 0:t.type)||"mercator")}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}setErrorQueryLatitudeDegrees(t){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(t),this._mercatorProjection.setErrorQueryLatitudeDegrees(t)}}function Xi(_){let t=pa(_.worldSize,_.center.lat);return 2*Math.PI*t}function Fn(_,t,n,u,m){let b=1/(1<<m),w=t/a.a5*b+u*b,k=a.bz((_/a.a5*b+n*b)*Math.PI*2+Math.PI,2*Math.PI),E=2*Math.atan(Math.exp(Math.PI-w*Math.PI*2))-.5*Math.PI,z=Math.cos(E),O=new Float64Array(3);return O[0]=Math.sin(k)*z,O[1]=Math.sin(E),O[2]=Math.cos(k)*z,O}function Li(_){return(function(t,n){let u=Math.cos(n),m=new Float64Array(3);return m[0]=Math.sin(t)*u,m[1]=Math.sin(n),m[2]=Math.cos(t)*u,m})(_.lng*Math.PI/180,_.lat*Math.PI/180)}function pa(_,t){return _/(2*Math.PI)/Math.cos(t*Math.PI/180)}function Nl(_){let t=Math.asin(_[1])/Math.PI*180,n=Math.sqrt(_[0]*_[0]+_[2]*_[2]);if(n>1e-6){let u=_[0]/n,m=Math.acos(_[2]/n),b=(u>0?m:-m)/Math.PI*180;return new a.V(a.W(b,-180,180),t)}return new a.V(0,t)}function zs(_){return Math.cos(_*Math.PI/180)}function Fi(_,t){let n=zs(_),u=zs(t);return a.au(u/n)}function Tc(_,t){let n=_.rotate(t.bearingInRadians),u=t.zoom+Fi(t.center.lat,0),m=a.bv(1/zs(t.center.lat),1/zs(Math.min(Math.abs(t.center.lat),60)),a.by(u,7,3,0,1)),b=360/Xi({worldSize:t.worldSize,center:{lat:t.center.lat}});return new a.V(t.center.lng-n.x*b*m,a.ao(t.center.lat+n.y*b,-a.ap,a.ap))}function ql(_){let t=.5*_,n=Math.sin(t),u=Math.cos(t);return Math.log(n+u)-Math.log(u-n)}function el(_,t,n,u){let m=_.lat+n*u;if(Math.abs(n)>1){let b=(Math.sign(_.lat+n)!==Math.sign(_.lat)?-Math.abs(_.lat):Math.abs(_.lat))*Math.PI/180,w=Math.abs(_.lat+n)*Math.PI/180,k=ql(b+u*(w-b)),E=ql(b),z=ql(w);return new a.V(_.lng+t*((k-E)/(z-E)),m)}return new a.V(_.lng+t*u,m)}class Xu{constructor(t){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=t}swapBuffers(){if(!this._hadAnyChanges)return;let t=this._cachePrevious;this._cachePrevious=this._cache,this._cache=t,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(t,n,u,m){let b=`${t.z}_${t.x}_${t.y}_${m!=null&&m.terrain?"t":""}`,w=this._cache.get(b);if(w)return w;let k=this._cachePrevious.get(b);if(k)return this._cache.set(b,k),k;let E=this._boundingVolumeFactory(t,n,u,m);return this._cache.set(b,E),this._hadAnyChanges=!0,E}}class is{constructor(t,n,u,m){this.min=u,this.max=m,this.points=t,this.planes=n}static fromAabb(t,n){let u=[];for(let m=0;m<8;m++)u.push([1&~m?t[0]:n[0],(m>>1&1)==1?n[1]:t[1],(m>>2&1)==1?n[2]:t[2]]);return new is(u,[[-1,0,0,n[0]],[1,0,0,-t[0]],[0,-1,0,n[1]],[0,1,0,-t[1]],[0,0,-1,n[2]],[0,0,1,-t[2]]],t,n)}static fromCenterSizeAngles(t,n,u){let m=a.bC([],u[0],u[1],u[2]),b=a.bD([],[n[0],0,0],m),w=a.bD([],[0,n[1],0],m),k=a.bD([],[0,0,n[2]],m),E=[...t],z=[...t];for(let N=0;N<8;N++)for(let j=0;j<3;j++){let Z=t[j]+b[j]*(1&~N?-1:1)+w[j]*((N>>1&1)==1?1:-1)+k[j]*((N>>2&1)==1?1:-1);E[j]=Math.min(E[j],Z),z[j]=Math.max(z[j],Z)}let O=[];for(let N=0;N<8;N++){let j=[...t];a.b1(j,j,a.b0([],b,1&~N?-1:1)),a.b1(j,j,a.b0([],w,(N>>1&1)==1?1:-1)),a.b1(j,j,a.b0([],k,(N>>2&1)==1?1:-1)),O.push(j)}return new is(O,[[...b,-a.b6(b,O[0])],[...w,-a.b6(w,O[0])],[...k,-a.b6(k,O[0])],[-b[0],-b[1],-b[2],-a.b6(b,O[7])],[-w[0],-w[1],-w[2],-a.b6(w,O[7])],[-k[0],-k[1],-k[2],-a.b6(k,O[7])]],E,z)}intersectsFrustum(t){let n=!0,u=this.points.length,m=this.planes.length,b=t.planes.length,w=t.points.length;for(let k=0;k<b;k++){let E=t.planes[k],z=0;for(let O=0;O<u;O++){let N=this.points[O];E[0]*N[0]+E[1]*N[1]+E[2]*N[2]+E[3]>=0&&z++}if(z===0)return 0;z<u&&(n=!1)}if(n)return 2;for(let k=0;k<m;k++){let E=this.planes[k],z=0;for(let O=0;O<w;O++){let N=t.points[O];E[0]*N[0]+E[1]*N[1]+E[2]*N[2]+E[3]>=0&&z++}if(z===0)return 0}return 1}intersectsPlane(t){let n=this.points.length,u=0;for(let m=0;m<n;m++){let b=this.points[m];t[0]*b[0]+t[1]*b[1]+t[2]*b[2]+t[3]>=0&&u++}return u===n?2:u===0?0:1}}function fo(_,t,n){let u=_-t;return u<0?-u:Math.max(0,u-n)}function fa(_,t,n,u,m){let b=_-n,w;return w=b<0?Math.min(-b,1+b-m):b>1?Math.min(Math.max(b-m,0),1-b):0,Math.max(w,fo(t,u,m))}class ma{constructor(){this._boundingVolumeCache=new Xu(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(t,n,u,m){let b=1<<u.z,w=1/b,k=u.x/b,E=u.y/b,z=2;return z=Math.min(z,fa(t,n,k,E,w)),z=Math.min(z,fa(t,n,k+.5,-E-w,w)),z=Math.min(z,fa(t,n,k+.5,2-E-w,w)),z}getWrap(t,n,u){let m=1<<n.z,b=1/m,w=n.x/m,k=fo(t.x,w,b),E=fo(t.x,w-1,b),z=fo(t.x,w+1,b),O=Math.min(k,E,z);return O===z?1:O===E?-1:0}allowVariableZoom(t,n){return Ti(t,n)>4}allowWorldCopies(){return!1}getTileBoundingVolume(t,n,u,m){return this._boundingVolumeCache.getTileBoundingVolume(t,n,u,m)}_computeTileBoundingVolume(t,n,u,m){var b,w;let k=0,E=0;if(m!=null&&m.terrain){let z=new a.a2(t.z,n,t.z,t.x,t.y),O=m.terrain.getMinMaxElevation(z);k=(b=O.minElevation)!==null&&b!==void 0?b:Math.min(0,u),E=(w=O.maxElevation)!==null&&w!==void 0?w:Math.max(0,u)}if(k/=a.bF,E/=a.bF,k+=1,E+=1,t.z<=0)return is.fromAabb([-E,-E,-E],[E,E,E]);if(t.z===1)return is.fromAabb([t.x===0?-E:0,t.y===0?0:-E,-E],[t.x===0?0:E,t.y===0?E:0,E]);{let z=[Fn(0,0,t.x,t.y,t.z),Fn(a.a5,0,t.x,t.y,t.z),Fn(a.a5,a.a5,t.x,t.y,t.z),Fn(0,a.a5,t.x,t.y,t.z)],O=[];for(let De of z)O.push(a.b0([],De,E));if(E!==k)for(let De of z)O.push(a.b0([],De,k));t.y===0&&O.push([0,1,0]),t.y===(1<<t.z)-1&&O.push([0,-1,0]);let N=[1,1,1],j=[-1,-1,-1];for(let De of O)for(let Fe=0;Fe<3;Fe++)N[Fe]=Math.min(N[Fe],De[Fe]),j[Fe]=Math.max(j[Fe],De[Fe]);let Z=Fn(a.a5/2,a.a5/2,t.x,t.y,t.z),Q=a.b5([],[0,1,0],Z);a.b4(Q,Q);let se=a.b5([],Z,Q);a.b4(se,se);let le=a.b5([],z[2],z[1]);a.b4(le,le);let oe=a.b5([],z[0],z[3]);a.b4(oe,oe),O.push(a.b0([],Z,E)),t.y>=(1<<t.z)/2&&O.push(a.b0([],Fn(a.a5/2,0,t.x,t.y,t.z),E)),t.y<(1<<t.z)/2&&O.push(a.b0([],Fn(a.a5/2,a.a5,t.x,t.y,t.z),E));let ce=mo(Z,O),me=mo(se,O),de=[-Z[0],-Z[1],-Z[2],ce.max],ge=[Z[0],Z[1],Z[2],-ce.min],xe=[-se[0],-se[1],-se[2],me.max],pe=[se[0],se[1],se[2],-me.min],Te=[...le,0],Re=[...oe,0],ze=[];return t.y===0?ze.push(a.bE(Re,Te,de),a.bE(Re,Te,ge)):ze.push(a.bE(xe,Te,de),a.bE(xe,Te,ge),a.bE(xe,Re,de),a.bE(xe,Re,ge)),t.y===(1<<t.z)-1?ze.push(a.bE(Re,Te,de),a.bE(Re,Te,ge)):ze.push(a.bE(pe,Te,de),a.bE(pe,Te,ge),a.bE(pe,Re,de),a.bE(pe,Re,ge)),new is(ze,[de,ge,xe,pe,Te,Re],N,j)}}}function mo(_,t){let n=1/0,u=-1/0;for(let m of t){let b=a.b6(_,m);n=Math.min(n,b),u=Math.max(u,b)}return{min:n,max:u}}class Jn{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(t){this._helper.setMinZoom(t)}setMaxZoom(t){this._helper.setMaxZoom(t)}setMinPitch(t){this._helper.setMinPitch(t)}setMaxPitch(t){this._helper.setMaxPitch(t)}setRenderWorldCopies(t){this._helper.setRenderWorldCopies(t)}setBearing(t){this._helper.setBearing(t)}setPitch(t){this._helper.setPitch(t)}setRoll(t){this._helper.setRoll(t)}setFov(t){this._helper.setFov(t)}setZoom(t){this._helper.setZoom(t)}setCenter(t){this._helper.setCenter(t)}setElevation(t){this._helper.setElevation(t)}setMinElevationForCurrentTile(t){this._helper.setMinElevationForCurrentTile(t)}setPadding(t){this._helper.setPadding(t)}interpolatePadding(t,n,u){return this._helper.interpolatePadding(t,n,u)}isPaddingEqual(t){return this._helper.isPaddingEqual(t)}resize(t,n){this._helper.resize(t,n)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(t){this._helper.setMaxBounds(t)}setConstrainOverride(t){this._helper.setConstrainOverride(t)}overrideNearFarZ(t,n){this._helper.overrideNearFarZ(t,n)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(t){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),t)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(t){}constructor(t){this._cachedClippingPlane=a.bG(),this._projectionMatrix=a.bk(),this._globeViewProjMatrix32f=a.bj(),this._globeViewProjMatrixNoCorrection=a.bk(),this._globeViewProjMatrixNoCorrectionInverted=a.bk(),this._globeProjMatrixInverted=a.bk(),this._cameraPosition=a.bA(),this._globeLatitudeErrorCorrectionRadians=0,this.defaultConstrain=(n,u)=>{let m=a.ao(n.lat,-a.ap,a.ap),b=a.ao(+u,this.minZoom+Fi(0,m),this.maxZoom);return{center:new a.V(n.lng,m),zoom:b}},this.applyConstrain=(n,u)=>this._helper.applyConstrain(n,u),this._helper=new hn({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(n,u)=>this.defaultConstrain(n,u)},t),this._coveringTilesDetailsProvider=new ma}clone(){let t=new Jn;return t.apply(this),t}apply(t,n){this._globeLatitudeErrorCorrectionRadians=n||0,this._helper.apply(t)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){let t=a.bA();return t[0]=this._cameraPosition[0],t[1]=this._cameraPosition[1],t[2]=this._cameraPosition[2],t}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(t){let{overscaledTileID:n,applyGlobeMatrix:u}=t,m=this._helper.getMercatorTileCoordinates(n);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:m,clippingPlane:this._cachedClippingPlane,projectionTransition:u?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(t){let n=this.pitchInRadians,u=this.cameraToCenterDistance/t,m=Math.sin(n)*u,b=Math.cos(n)*u+1,w=1/Math.sqrt(m*m+b*b)*1,k=-m,E=b,z=Math.sqrt(k*k+E*E);k/=z,E/=z;let O=[0,k,E];a.bH(O,O,[0,0,0],-this.bearingInRadians),a.bI(O,O,[0,0,0],-1*this.center.lat*Math.PI/180),a.bJ(O,O,[0,0,0],this.center.lng*Math.PI/180);let N=1/a.b8(O);return a.b0(O,O,N),[...O,-w*N]}isLocationOccluded(t){return!this.isSurfacePointVisible(Li(t))}transformLightDirection(t){let n=this._helper._center.lng*Math.PI/180,u=this._helper._center.lat*Math.PI/180,m=Math.cos(u),b=[Math.sin(n)*m,Math.sin(u),Math.cos(n)*m],w=[b[2],0,-b[0]],k=[0,0,0];a.b5(k,w,b),a.b4(w,w),a.b4(k,k);let E=[0,0,0];return a.b4(E,[w[0]*t[0]+k[0]*t[1]+b[0]*t[2],w[1]*t[0]+k[1]*t[1]+b[1]*t[2],w[2]*t[0]+k[2]*t[1]+b[2]*t[2]]),E}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(t,n,u){let m=(function(k,E,z){let O=1/(1<<z.z);return new a.ab(k/a.a5*O+z.x*O,E/a.a5*O+z.y*O)})(t,n,u.canonical),b=(w=m.y,[a.bz(m.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-w*Math.PI*2))-.5*Math.PI]);var w;return this.getCircleRadiusCorrection()/Math.cos(b[1])}projectTileCoordinates(t,n,u,m){let b=u.canonical,w=Fn(t,n,b.x,b.y,b.z),k=1+(m?m(t,n):0)/a.bF,E=[w[0]*k,w[1]*k,w[2]*k,1];a.aI(E,E,this._globeViewProjMatrixNoCorrection);let z=this._cachedClippingPlane,O=z[0]*w[0]+z[1]*w[1]+z[2]*w[2]+z[3]<0;return{point:new a.P(E[0]/E[3],E[1]/E[3]),signedDistanceFromCamera:E[3],isOccluded:O}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;let t=pa(this.worldSize,this.center.lat),n=a.bl(),u=a.bl();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*t),a.bf(n,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);let m=this.centerOffset;n[8]=2*-m.x/this._helper._width,n[9]=2*m.y/this._helper._height,this._projectionMatrix=a.bg(n),this._globeProjMatrixInverted=a.bl(),a.aC(this._globeProjMatrixInverted,n),a.O(n,n,[0,0,-this.cameraToCenterDistance]),a.bh(n,n,this.rollInRadians),a.bi(n,n,-this.pitchInRadians),a.bh(n,n,this.bearingInRadians),a.O(n,n,[0,0,-t]);let b=a.bA();b[0]=t,b[1]=t,b[2]=t,a.bi(u,n,this.center.lat*Math.PI/180),a.bK(u,u,-this.center.lng*Math.PI/180),a.Q(u,u,b),this._globeViewProjMatrixNoCorrection=u,a.bi(n,n,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),a.bK(n,n,-this.center.lng*Math.PI/180),a.Q(n,n,b),this._globeViewProjMatrix32f=new Float32Array(n),this._globeViewProjMatrixNoCorrectionInverted=a.bl(),a.aC(this._globeViewProjMatrixNoCorrectionInverted,u);let w=a.bA();this._cameraPosition=a.bA(),this._cameraPosition[2]=this.cameraToCenterDistance/t,a.bH(this._cameraPosition,this._cameraPosition,w,-this.rollInRadians),a.bI(this._cameraPosition,this._cameraPosition,w,this.pitchInRadians),a.bH(this._cameraPosition,this._cameraPosition,w,-this.bearingInRadians),a.b1(this._cameraPosition,this._cameraPosition,[0,0,1]),a.bI(this._cameraPosition,this._cameraPosition,w,-this.center.lat*Math.PI/180),a.bJ(this._cameraPosition,this._cameraPosition,w,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(t);let k=a.bg(this._globeViewProjMatrixNoCorrectionInverted);a.Q(k,k,[1,1,-1]),this._cachedFrustum=en.fromInvProjectionMatrix(k,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(t){a.w("calculateFogMatrix is not supported on globe projection.");let n=a.bl();return a.as(n),n}getVisibleUnwrappedCoordinates(t){return[new a.bd(0,t)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(t){t&&a.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(t,n){if(!this._globeViewProjMatrixNoCorrection)return 1;let u=Li(t);a.b0(u,u,1+n/a.bF);let m=a.bG();return a.aI(m,[u[0],u[1],u[2],1],this._globeViewProjMatrixNoCorrection),m[2]/m[3]}populateCache(t){}getBounds(){let t=.5*this.width,n=.5*this.height,u=[new a.P(0,0),new a.P(t,0),new a.P(this.width,0),new a.P(this.width,n),new a.P(this.width,this.height),new a.P(t,this.height),new a.P(0,this.height),new a.P(0,n)],m=[];for(let N of u)m.push(this.unprojectScreenPoint(N));let b=0,w=0,k=0,E=0,z=this.center;for(let N of m){let j=a.bL(z.lng,N.lng),Z=a.bL(z.lat,N.lat);j<w&&(w=j),j>b&&(b=j),Z<E&&(E=Z),Z>k&&(k=Z)}let O=[z.lng+w,z.lat+E,z.lng+b,z.lat+k];return this.isSurfacePointOnScreen([0,1,0])&&(O[3]=90,O[0]=-180,O[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(O[1]=-90,O[0]=-180,O[2]=180),new Oi(O)}calculateCenterFromCameraLngLatAlt(t,n,u,m){return this._helper.calculateCenterFromCameraLngLatAlt(t,n,u,m)}setLocationAtPoint(t,n){let u=Li(this.unprojectScreenPoint(n)),m=Li(t),b=a.bA();a.bM(b);let w=a.bA();a.bJ(w,u,b,-this.center.lng*Math.PI/180),a.bI(w,w,b,this.center.lat*Math.PI/180);let k=m[0]*m[0]+m[2]*m[2],E=w[0]*w[0];if(k<E)return;let z=Math.sqrt(k-E),O=-z,N=a.bN(m[0],m[2],w[0],z),j=a.bN(m[0],m[2],w[0],O),Z=a.bA();a.bJ(Z,m,b,-N);let Q=a.bN(Z[1],Z[2],w[1],w[2]),se=a.bA();a.bJ(se,m,b,-j);let le=a.bN(se[1],se[2],w[1],w[2]),oe=.5*Math.PI,ce=Q>=-oe&&Q<=oe,me=le>=-oe&&le<=oe,de,ge;if(ce&&me){let Re=this.center.lng*Math.PI/180,ze=this.center.lat*Math.PI/180;a.bO(N,Re)+a.bO(Q,ze)<a.bO(j,Re)+a.bO(le,ze)?(de=N,ge=Q):(de=j,ge=le)}else if(ce)de=N,ge=Q;else{if(!me)return;de=j,ge=le}let xe=de/Math.PI*180,pe=ge/Math.PI*180,Te=this.center.lat;this.setCenter(new a.V(xe,a.ao(pe,-90,90))),this.setZoom(this.zoom+Fi(Te,this.center.lat))}locationToScreenPoint(t,n){let u=Li(t);if(n){let m=n.getElevationForLngLatZoom(t,this._helper._tileZoom);a.b0(u,u,1+m/a.bF)}return this._projectSurfacePointToScreen(u)}_projectSurfacePointToScreen(t){let n=a.bG();return a.aI(n,[...t,1],this._globeViewProjMatrixNoCorrection),n[0]/=n[3],n[1]/=n[3],new a.P((.5*n[0]+.5)*this.width,(.5*-n[1]+.5)*this.height)}screenPointToMercatorCoordinate(t,n){if(n){let u=n.pointCoordinate(t);if(u)return u}return a.ab.fromLngLat(this.unprojectScreenPoint(t))}screenPointToLocation(t,n){var u;return(u=this.screenPointToMercatorCoordinate(t,n))===null||u===void 0?void 0:u.toLngLat()}isPointOnMapSurface(t,n){let u=this._cameraPosition,m=this.getRayDirectionFromPixel(t);return!!this.rayPlanetIntersection(u,m)}getRayDirectionFromPixel(t){let n=a.bG();n[0]=t.x/this.width*2-1,n[1]=-1*(t.y/this.height*2-1),n[2]=1,n[3]=1,a.aI(n,n,this._globeViewProjMatrixNoCorrectionInverted),n[0]/=n[3],n[1]/=n[3],n[2]/=n[3];let u=a.bA();u[0]=n[0]-this._cameraPosition[0],u[1]=n[1]-this._cameraPosition[1],u[2]=n[2]-this._cameraPosition[2];let m=a.bA();return a.b4(m,u),m}isSurfacePointVisible(t){let n=this._cachedClippingPlane;return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]>=0}isSurfacePointOnScreen(t){if(!this.isSurfacePointVisible(t))return!1;let n=a.bG();return a.aI(n,[...t,1],this._globeViewProjMatrixNoCorrection),n[0]/=n[3],n[1]/=n[3],n[2]/=n[3],n[0]>-1&&n[0]<1&&n[1]>-1&&n[1]<1&&n[2]>-1&&n[2]<1}rayPlanetIntersection(t,n){let u=a.b6(t,n),m=a.bA(),b=a.bA();a.b0(b,n,u),a.b3(m,t,b);let w=1-a.b6(m,m);if(w<0)return null;let k=a.b6(t,t)-1,E=-u+(u<0?1:-1)*Math.sqrt(w),z=k/E,O=E;return{tMin:Math.min(z,O),tMax:Math.max(z,O)}}unprojectScreenPoint(t){let n=this._cameraPosition,u=this.getRayDirectionFromPixel(t),m=this.rayPlanetIntersection(n,u);if(m){let O=a.bA();a.b1(O,n,[u[0]*m.tMin,u[1]*m.tMin,u[2]*m.tMin]);let N=a.bA();return a.b4(N,O),Nl(N)}let b=this._cachedClippingPlane,w=b[0]*u[0]+b[1]*u[1]+b[2]*u[2],k=-a.bc(b,n)/w,E=a.bA();if(k>0)a.b1(E,n,[u[0]*k,u[1]*k,u[2]*k]);else{let O=a.bA();a.b1(O,n,[2*u[0],2*u[1],2*u[2]]);let N=a.bc(this._cachedClippingPlane,O);a.b3(E,O,[this._cachedClippingPlane[0]*N,this._cachedClippingPlane[1]*N,this._cachedClippingPlane[2]*N])}let z=(function(O){let N=a.bA();return N[0]=O[0]*-O[3],N[1]=O[1]*-O[3],N[2]=O[2]*-O[3],{center:N,radius:Math.sqrt(1-O[3]*O[3])}})(b);return Nl((function(O,N,j){let Z=a.bA();a.b3(Z,j,O);let Q=a.bA();return a.bB(Q,O,Z,N/a.ba(Z)),Q})(z.center,z.radius,E))}getMatrixForModel(t,n){let u=a.V.convert(t),m=1/a.bF,b=a.bk();return a.bK(b,b,u.lng/180*Math.PI),a.bi(b,b,-u.lat/180*Math.PI),a.O(b,b,[0,0,1+n/a.bF]),a.bi(b,b,.5*Math.PI),a.Q(b,b,[m,m,m]),b}getProjectionDataForCustomLayer(t=!0){let n=this.getProjectionData({overscaledTileID:new a.a2(0,0,0,0,0),applyGlobeMatrix:t});return n.tileMercatorCoords=[0,0,1,1],n}getFastPathSimpleProjectionMatrix(t){}}class Cr{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(t){this._helper.setMinZoom(t)}setMaxZoom(t){this._helper.setMaxZoom(t)}setMinPitch(t){this._helper.setMinPitch(t)}setMaxPitch(t){this._helper.setMaxPitch(t)}setRenderWorldCopies(t){this._helper.setRenderWorldCopies(t)}setBearing(t){this._helper.setBearing(t)}setPitch(t){this._helper.setPitch(t)}setRoll(t){this._helper.setRoll(t)}setFov(t){this._helper.setFov(t)}setZoom(t){this._helper.setZoom(t)}setCenter(t){this._helper.setCenter(t)}setElevation(t){this._helper.setElevation(t)}setMinElevationForCurrentTile(t){this._helper.setMinElevationForCurrentTile(t)}setPadding(t){this._helper.setPadding(t)}interpolatePadding(t,n,u){return this._helper.interpolatePadding(t,n,u)}isPaddingEqual(t){return this._helper.isPaddingEqual(t)}resize(t,n,u=!0){this._helper.resize(t,n,u)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(t){this._helper.setMaxBounds(t)}setConstrainOverride(t){this._helper.setConstrainOverride(t)}overrideNearFarZ(t,n){this._helper.overrideNearFarZ(t,n)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(t){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),t)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(t,n){this._globeness=t,this._globeLatitudeErrorCorrectionRadians=n,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(t){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this.defaultConstrain=(n,u)=>this.currentTransform.defaultConstrain(n,u),this.applyConstrain=(n,u)=>this._helper.applyConstrain(n,u),this._helper=new hn({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(n,u)=>this.defaultConstrain(n,u)},t),this._globeness=1,this._mercatorTransform=new La,this._verticalPerspectiveTransform=new Jn}clone(){let t=new Cr;return t._globeness=this._globeness,t._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,t.apply(this),t}apply(t){this._helper.apply(t),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(t){let n=this._mercatorTransform.getProjectionData(t),u=this._verticalPerspectiveTransform.getProjectionData(t);return{mainMatrix:this.isGlobeRendering?u.mainMatrix:n.mainMatrix,clippingPlane:u.clippingPlane,tileMercatorCoords:u.tileMercatorCoords,projectionTransition:t.applyGlobeMatrix?this._globeness:0,fallbackMatrix:n.fallbackMatrix}}isLocationOccluded(t){return this.currentTransform.isLocationOccluded(t)}transformLightDirection(t){return this.currentTransform.transformLightDirection(t)}getPixelScale(){return a.bv(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return a.bv(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(t,n,u){let m=this._mercatorTransform.getPitchedTextCorrection(t,n,u),b=this._verticalPerspectiveTransform.getPitchedTextCorrection(t,n,u);return a.bv(m,b,this._globeness)}projectTileCoordinates(t,n,u,m){return this.currentTransform.projectTileCoordinates(t,n,u,m)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(t){return this.currentTransform.calculateFogMatrix(t)}getVisibleUnwrappedCoordinates(t){return this.currentTransform.getVisibleUnwrappedCoordinates(t)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(t){this._mercatorTransform.recalculateZoomAndCenter(t),this._verticalPerspectiveTransform.recalculateZoomAndCenter(t)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(t,n){return this.currentTransform.lngLatToCameraDepth(t,n)}populateCache(t){this._mercatorTransform.populateCache(t),this._verticalPerspectiveTransform.populateCache(t)}getBounds(){return this.currentTransform.getBounds()}calculateCenterFromCameraLngLatAlt(t,n,u,m){return this._helper.calculateCenterFromCameraLngLatAlt(t,n,u,m)}setLocationAtPoint(t,n){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(t,n),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(t,n),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(t,n){return this.currentTransform.locationToScreenPoint(t,n)}screenPointToMercatorCoordinate(t,n){return this.currentTransform.screenPointToMercatorCoordinate(t,n)}screenPointToLocation(t,n){return this.currentTransform.screenPointToLocation(t,n)}isPointOnMapSurface(t,n){return this.currentTransform.isPointOnMapSurface(t,n)}getRayDirectionFromPixel(t){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(t)}getMatrixForModel(t,n){return this.currentTransform.getMatrixForModel(t,n)}getProjectionDataForCustomLayer(t=!0){let n=this._mercatorTransform.getProjectionDataForCustomLayer(t);if(!this.isGlobeRendering)return n;let u=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(t);return u.fallbackMatrix=n.mainMatrix,u}getFastPathSimpleProjectionMatrix(t){return this.currentTransform.getFastPathSimpleProjectionMatrix(t)}}class ir{get useGlobeControls(){return!0}handlePanInertia(t,n){let u=Tc(t,n);return Math.abs(u.lng-n.center.lng)>180&&(u.lng=n.center.lng+179.5*Math.sign(u.lng-n.center.lng)),{easingCenter:u,easingOffset:new a.P(0,0)}}handleMapControlsRollPitchBearingZoom(t,n){let u=t.around,m=n.screenPointToLocation(u);t.bearingDelta&&n.setBearing(n.bearing+t.bearingDelta),t.pitchDelta&&n.setPitch(n.pitch+t.pitchDelta),t.rollDelta&&n.setRoll(n.roll+t.rollDelta);let b=n.zoom;t.zoomDelta&&n.setZoom(n.zoom+t.zoomDelta);let w=n.zoom-b;if(w===0)return;let k=a.bL(n.center.lng,m.lng),E=k/(Math.abs(k/180)+1),z=a.bL(n.center.lat,m.lat),O=n.getRayDirectionFromPixel(u),N=n.cameraPosition,j=-1*a.b6(N,O),Z=a.bA();a.b1(Z,N,[O[0]*j,O[1]*j,O[2]*j]);let Q=a.b8(Z)-1,se=Math.exp(.5*-Math.max(Q-.3,0)),le=pa(n.worldSize,n.center.lat)/Math.min(n.width,n.height),oe=a.by(le,.9,.5,1,.25),ce=(1-a.ar(-w))*Math.min(se,oe),me=n.center.lat,de=n.zoom,ge=new a.V(n.center.lng+E*ce,a.ao(n.center.lat+z*ce,-a.ap,a.ap));n.setLocationAtPoint(m,u);let xe=n.center,pe=a.by(Math.abs(k),45,85,0,1),Te=a.by(le,.75,.35,0,1),Re=Math.pow(Math.max(pe,Te),.25),ze=a.bL(xe.lng,ge.lng),De=a.bL(xe.lat,ge.lat);n.setCenter(new a.V(xe.lng+ze*Re,xe.lat+De*Re).wrap()),n.setZoom(de+Fi(me,n.center.lat))}handleMapControlsPan(t,n,u){if(!t.panDelta)return;let m=n.center.lat,b=n.zoom;n.setCenter(Tc(t.panDelta,n).wrap()),n.setZoom(b+Fi(m,n.center.lat))}cameraForBoxAndBearing(t,n,u,m,b){let w=Qo(t,n,u,m,b),k=n.left/b.width*2-1,E=(b.width-n.right)/b.width*2-1,z=n.top/b.height*-2+1,O=(b.height-n.bottom)/b.height*-2+1,N=a.bL(u.getWest(),u.getEast())<0,j=N?u.getEast():u.getWest(),Z=N?u.getWest():u.getEast(),Q=Math.max(u.getNorth(),u.getSouth()),se=Math.min(u.getNorth(),u.getSouth()),le=j+.5*a.bL(j,Z),oe=Q+.5*a.bL(Q,se),ce=b.clone();ce.setCenter(w.center),ce.setBearing(w.bearing),ce.setPitch(0),ce.setRoll(0),ce.setZoom(w.zoom);let me=ce.modelViewProjectionMatrix,de=[Li(u.getNorthWest()),Li(u.getNorthEast()),Li(u.getSouthWest()),Li(u.getSouthEast()),Li(new a.V(Z,oe)),Li(new a.V(j,oe)),Li(new a.V(le,Q)),Li(new a.V(le,se))],ge=Li(w.center),xe=Number.POSITIVE_INFINITY;for(let pe of de)k<0&&(xe=ir.getLesserNonNegativeNonNull(xe,ir.solveVectorScale(pe,ge,me,"x",k))),E>0&&(xe=ir.getLesserNonNegativeNonNull(xe,ir.solveVectorScale(pe,ge,me,"x",E))),z>0&&(xe=ir.getLesserNonNegativeNonNull(xe,ir.solveVectorScale(pe,ge,me,"y",z))),O<0&&(xe=ir.getLesserNonNegativeNonNull(xe,ir.solveVectorScale(pe,ge,me,"y",O)));if(Number.isFinite(xe)&&xe!==0)return w.zoom=ce.zoom+a.au(xe),w;Bn()}handleJumpToCenterZoom(t,n){let u=t.center.lat,m=t.applyConstrain(n.center?a.V.convert(n.center):t.center,t.zoom).center;t.setCenter(m.wrap());let b=n.zoom!==void 0?+n.zoom:t.zoom+Fi(u,m.lat);t.zoom!==b&&t.setZoom(b)}handleEaseTo(t,n){let u=t.zoom,m=t.center,b=t.padding,w={roll:t.roll,pitch:t.pitch,bearing:t.bearing},k={roll:n.roll===void 0?t.roll:n.roll,pitch:n.pitch===void 0?t.pitch:n.pitch,bearing:n.bearing===void 0?t.bearing:n.bearing},E=n.zoom!==void 0,z=!t.isPaddingEqual(n.padding),O=!1,N=n.center?a.V.convert(n.center):m,j=t.applyConstrain(N,u).center;Tn(t,j);let Z=t.clone();Z.setCenter(j),Z.setZoom(E?+n.zoom:u+Fi(m.lat,N.lat)),Z.setBearing(n.bearing);let Q=new a.P(a.ao(t.centerPoint.x+n.offsetAsPoint.x,0,t.width),a.ao(t.centerPoint.y+n.offsetAsPoint.y,0,t.height));Z.setLocationAtPoint(j,Q);let se=(n.offset&&n.offsetAsPoint.mag())>0?Z.center:j,le=E?+n.zoom:u+Fi(m.lat,se.lat),oe=u+Fi(m.lat,0),ce=le+Fi(se.lat,0),me=a.bL(m.lng,se.lng),de=a.bL(m.lat,se.lat),ge=a.ar(ce-oe);return O=le!==u,{easeFunc:xe=>{if(a.bp(w,k)||Sc({startEulerAngles:w,endEulerAngles:k,tr:t,k:xe,useSlerp:w.roll!=k.roll}),z&&t.interpolatePadding(b,n.padding,xe),n.around)a.w("Easing around a point is not supported under globe projection."),t.setLocationAtPoint(n.around,n.aroundPoint);else{let pe=ce>oe?Math.min(2,ge):Math.max(.5,ge),Te=Math.pow(pe,1-xe),Re=el(m,me,de,xe*Te);t.setCenter(Re.wrap())}if(O){let pe=a.G.number(oe,ce,xe)+Fi(0,t.center.lat);t.setZoom(pe)}},isZooming:O,elevationCenter:se}}handleFlyTo(t,n){let u=n.zoom!==void 0,m=t.center,b=t.zoom,w=t.padding,k=!t.isPaddingEqual(n.padding),E=t.applyConstrain(a.V.convert(n.center||n.locationAtOffset),b).center,z=u?+n.zoom:t.zoom+Fi(t.center.lat,E.lat),O=t.clone();O.setCenter(E),O.setZoom(z),O.setBearing(n.bearing);let N=new a.P(a.ao(t.centerPoint.x+n.offsetAsPoint.x,0,t.width),a.ao(t.centerPoint.y+n.offsetAsPoint.y,0,t.height));O.setLocationAtPoint(E,N);let j=O.center;Tn(t,j);let Z=(function(de,ge,xe){let pe=Li(ge),Te=Li(xe),Re=a.b6(pe,Te),ze=Math.acos(Re),De=Xi(de);return ze/(2*Math.PI)*De})(t,m,j),Q=b+Fi(m.lat,0),se=z+Fi(j.lat,0),le=a.ar(se-Q),oe;if(typeof n.minZoom=="number"){let de=+n.minZoom+Fi(j.lat,0),ge=Math.min(de,Q,se)+Fi(0,j.lat),xe=t.applyConstrain(j,ge).zoom+Fi(j.lat,0);oe=a.ar(xe-Q)}let ce=a.bL(m.lng,j.lng),me=a.bL(m.lat,j.lat);return{easeFunc:(de,ge,xe,pe)=>{let Te=el(m,ce,me,xe);k&&t.interpolatePadding(w,n.padding,de);let Re=de===1?j:Te;t.setCenter(Re.wrap());let ze=Q+a.au(ge);t.setZoom(de===1?z:ze+Fi(0,Re.lat))},scaleOfZoom:le,targetCenter:j,scaleOfMinZoom:oe,pixelPathLength:Z}}static solveVectorScale(t,n,u,m,b){let w=m==="x"?[u[0],u[4],u[8],u[12]]:[u[1],u[5],u[9],u[13]],k=[u[3],u[7],u[11],u[15]],E=t[0]*w[0]+t[1]*w[1]+t[2]*w[2],z=t[0]*k[0]+t[1]*k[1]+t[2]*k[2],O=n[0]*w[0]+n[1]*w[1]+n[2]*w[2],N=n[0]*k[0]+n[1]*k[1]+n[2]*k[2];return O+b*z===E+b*N||k[3]*(E-O)+w[3]*(N-z)+E*N==O*z?null:(O+w[3]-b*N-b*k[3])/(O-E-b*N+b*z)}static getLesserNonNegativeNonNull(t,n){return n!==null&&n>=0&&n<t?n:t}}class Vl{constructor(t){this._globe=t,this._mercatorCameraHelper=new Yt,this._verticalPerspectiveCameraHelper=new ir}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(t,n){return this.currentHelper.handlePanInertia(t,n)}handleMapControlsRollPitchBearingZoom(t,n){return this.currentHelper.handleMapControlsRollPitchBearingZoom(t,n)}handleMapControlsPan(t,n,u){this.currentHelper.handleMapControlsPan(t,n,u)}cameraForBoxAndBearing(t,n,u,m,b){return this.currentHelper.cameraForBoxAndBearing(t,n,u,m,b)}handleJumpToCenterZoom(t,n){this.currentHelper.handleJumpToCenterZoom(t,n)}handleEaseTo(t,n){return this.currentHelper.handleEaseTo(t,n)}handleFlyTo(t,n){return this.currentHelper.handleFlyTo(t,n)}}let Ls=(_,t)=>a.B(_,t&&t.filter((n=>n.identifier!=="source.canvas"))),rs=a.bP();class ga extends a.E{constructor(t,n={}){var u,m;super(),this._rtlPluginLoaded=()=>{for(let w in this.tileManagers){let k=this.tileManagers[w].getSource().type;k!=="vector"&&k!=="geojson"||this.tileManagers[w].reload()}},this.map=t,this.dispatcher=new Mr(cn(),t._getMapId()),this.dispatcher.registerMessageHandler("GG",((w,k)=>this.getGlyphs(w,k))),this.dispatcher.registerMessageHandler("GI",((w,k)=>this.getImages(w,k))),this.dispatcher.registerMessageHandler("GDA",((w,k)=>this.getDashes(w,k))),this.imageManager=new kt,this.imageManager.setEventedParent(this);let b=((u=t._container)===null||u===void 0?void 0:u.lang)||typeof document!="undefined"&&((m=document.documentElement)===null||m===void 0?void 0:m.lang)||void 0;this.glyphManager=new Ut(t._requestManager,n.localIdeographFontFamily,b),this.lineAtlas=new Ii(256,512),this.crossTileSymbolIndex=new Jr,this._setInitialValues(),this._resetUpdates(),this.dispatcher.broadcast("SR",a.bQ()),ke().on(_e,this._rtlPluginLoaded),this.on("data",(w=>{if(w.dataType!=="source"||w.sourceDataType!=="metadata")return;let k=this.tileManagers[w.sourceId];if(!k)return;let E=k.getSource();if(E&&E.vectorLayerIds)for(let z in this._layers){let O=this._layers[z];O.source===E.id&&this._validateLayer(O)}}))}_setInitialValues(){var t;this._spritesImagesIds={},this._layers={},this._order=[],this.tileManagers={},this.zoomHistory=new a.bR,this._availableImages=[],this._globalState={},this._serializedLayers={},this.stylesheet=null,this.light=null,this.sky=null,this.projection&&(this.projection.destroy(),delete this.projection),this._loaded=!1,this._changed=!1,this._updatedLayers={},this._updatedSources={},this._changedImages={},this._glyphsDidChange=!1,this._updatedPaintProps={},this._layerOrderChanged=!1,this.crossTileSymbolIndex=new(((t=this.crossTileSymbolIndex)===null||t===void 0?void 0:t.constructor)||Object),this.pauseablePlacement=void 0,this.placement=void 0,this.z=0}setGlobalStateProperty(t,n){var u,m,b;this._checkLoaded();let w=n===null?(b=(m=(u=this.stylesheet.state)===null||u===void 0?void 0:u[t])===null||m===void 0?void 0:m.default)!==null&&b!==void 0?b:null:n;if(a.bS(w,this._globalState[t]))return this;this._globalState[t]=w,this._applyGlobalStateChanges([t])}getGlobalState(){return this._globalState}setGlobalState(t){this._checkLoaded();let n=[];for(let u in t)!a.bS(this._globalState[u],t[u].default)&&(n.push(u),this._globalState[u]=t[u].default);this._applyGlobalStateChanges(n)}_applyGlobalStateChanges(t){if(t.length===0)return;let n=new Set,u={};for(let m of t){u[m]=this._globalState[m];for(let b in this._layers){let w=this._layers[b],k=w.getLayoutAffectingGlobalStateRefs(),E=w.getPaintAffectingGlobalStateRefs();if(k.has(m)&&n.add(w.source),E.has(m))for(let{name:z,value:O}of E.get(m))this._updatePaintProperty(w,z,O)}}this.dispatcher.broadcast("UGS",u);for(let m in this.tileManagers)n.has(m)&&(this._reloadSource(m),this._changed=!0)}loadURL(t,n={},u){this.fire(new a.l("dataloading",{dataType:"style"})),n.validate=typeof n.validate!="boolean"||n.validate;let m=this.map._requestManager.transformRequest(t,"Style");this._loadStyleRequest=new AbortController;let b=this._loadStyleRequest;a.j(m,this._loadStyleRequest).then((w=>{this._loadStyleRequest=null,this._load(w.data,n,u)})).catch((w=>{this._loadStyleRequest=null,w&&!b.signal.aborted&&this.fire(new a.k(w))}))}loadJSON(t,n={},u){this.fire(new a.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,re.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,n.validate=n.validate!==!1,this._load(t,n,u)})).catch((()=>{}))}loadEmpty(){this.fire(new a.l("dataloading",{dataType:"style"})),this._load(rs,{validate:!1})}_load(t,n,u){var m,b;let w=n.transformStyle?n.transformStyle(u,t):t;if(!n.validate||!Ls(this,a.C(w))){w=Object.assign({},w),this._loaded=!0,this.stylesheet=w;for(let k in w.sources)this.addSource(k,w.sources[k],{validate:!1});w.sprite?this._loadSprite(w.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(w.glyphs),this._createLayers(),this.light=new _t(this.stylesheet.light),this._setProjectionInternal(((m=this.stylesheet.projection)===null||m===void 0?void 0:m.type)||"mercator"),this.sky=new Mi(this.stylesheet.sky),this.map.setTerrain((b=this.stylesheet.terrain)!==null&&b!==void 0?b:null),this.fire(new a.l("data",{dataType:"style"})),this.fire(new a.l("style.load"))}}_createLayers(){var t,n,u;let m=a.bT(this.stylesheet.layers);this.setGlobalState((t=this.stylesheet.state)!==null&&t!==void 0?t:null),this.dispatcher.broadcast("SL",m),this._order=m.map((b=>b.id)),this._layers={},this._serializedLayers=null;for(let b of m){let w=a.bU(b,this._globalState);if(w.setEventedParent(this,{layer:{id:b.id}}),this._layers[b.id]=w,a.bV(w)&&this.tileManagers[w.source]){let k=(u=(n=b.paint)===null||n===void 0?void 0:n["raster-fade-duration"])!==null&&u!==void 0?u:w.paint.get("raster-fade-duration");this.tileManagers[w.source].setRasterFadeDuration(k)}}}_loadSprite(t,n=!1,u=void 0){this.imageManager.setLoaded(!1);let m=new AbortController,b;this._spriteRequest=m,(function(w,k,E,z){return a._(this,void 0,void 0,(function*(){let O=Wt(w),N=E>1?"@2x":"",j={},Z={};for(let{id:Q,url:se}of O){let le=k.transformRequest(Gt(se,N,".json"),"SpriteJSON");j[Q]=a.j(le,z);let oe=k.transformRequest(Gt(se,N,".png"),"SpriteImage");Z[Q]=Ct.getImage(oe,z)}return yield Promise.all([...Object.values(j),...Object.values(Z)]),(function(Q,se){return a._(this,void 0,void 0,(function*(){let le={};for(let oe in Q){le[oe]={};let ce=re.getImageCanvasContext((yield se[oe]).data),me=(yield Q[oe]).data;for(let de in me){let{width:ge,height:xe,x:pe,y:Te,sdf:Re,pixelRatio:ze,stretchX:De,stretchY:Fe,content:$e,textFitWidth:Je,textFitHeight:Ze}=me[de];le[oe][de]={data:null,pixelRatio:ze,sdf:Re,stretchX:De,stretchY:Fe,content:$e,textFitWidth:Je,textFitHeight:Ze,spriteData:{width:ge,height:xe,x:pe,y:Te,context:ce}}}}return le}))})(j,Z)}))})(t,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((w=>{if(this._spriteRequest=null,w)for(let k in w){this._spritesImagesIds[k]=[];let E=this._spritesImagesIds[k]?this._spritesImagesIds[k].filter((z=>!(z in w))):[];for(let z of E)this.imageManager.removeImage(z),this._changedImages[z]=!0;for(let z in w[k]){let O=k==="default"?z:`${k}:${z}`;this._spritesImagesIds[k].push(O),O in this.imageManager.images?this.imageManager.updateImage(O,w[k][z],!1):this.imageManager.addImage(O,w[k][z]),n&&(this._changedImages[O]=!0)}}})).catch((w=>{this._spriteRequest=null,b=w,m.signal.aborted||this.fire(new a.k(b))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),n&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"})),u&&u(b)}))}_unloadSprite(){for(let t of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(t),this._changedImages[t]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}_validateLayer(t){let n=this.tileManagers[t.source];if(!n)return;let u=t.sourceLayer;if(!u)return;let m=n.getSource();(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(u)===-1)&&this.fire(new a.k(new Error(`Source layer "${u}" does not exist on source "${m.id}" as specified by style layer "${t.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(let t in this.tileManagers)if(!this.tileManagers[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(t,n=!1){let u=this._serializedAllLayers();if(!t||t.length===0)return Object.values(n?a.bW(u):u);let m=[];for(let b of t)if(u[b]){let w=n?a.bW(u[b]):u[b];m.push(w)}return m}_serializedAllLayers(){let t=this._serializedLayers;if(t)return t;t=this._serializedLayers={};let n=Object.keys(this._layers);for(let u of n){let m=this._layers[u];m.type!=="custom"&&(t[u]=m.serialize())}return t}hasTransitions(){var t,n,u;if(!((t=this.light)===null||t===void 0)&&t.hasTransition()||!((n=this.sky)===null||n===void 0)&&n.hasTransition()||!((u=this.projection)===null||u===void 0)&&u.hasTransition())return!0;for(let m in this.tileManagers)if(this.tileManagers[m].hasTransition())return!0;for(let m in this._layers)if(this._layers[m].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(t){if(!this._loaded)return;let n=this._changed;if(n){let m=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);(m.length||b.length)&&this._updateWorkerLayers(m,b);for(let w in this._updatedSources){let k=this._updatedSources[w];if(k==="reload")this._reloadSource(w);else{if(k!=="clear")throw new Error(`Invalid action ${k}`);this._clearSource(w)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(let w in this._updatedPaintProps)this._layers[w].updateTransitions(t);this.light.updateTransitions(t),this.sky.updateTransitions(t),this._resetUpdates()}let u={};for(let m in this.tileManagers){let b=this.tileManagers[m];u[m]=b.used,b.used=!1}for(let m of this._order){let b=this._layers[m];b.recalculate(t,this._availableImages),!b.isHidden(t.zoom)&&b.source&&(this.tileManagers[b.source].used=!0)}for(let m in u){let b=this.tileManagers[m];!!u[m]!=!!b.used&&b.fire(new a.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:m}))}this.light.recalculate(t),this.sky.recalculate(t),this.projection.recalculate(t),this.z=t.zoom,n&&this.fire(new a.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){let t=Object.keys(this._changedImages);if(t.length){for(let n in this.tileManagers)this.tileManagers[n].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(let t in this.tileManagers)this.tileManagers[t].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(t,n){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(t,!1),removedIds:n})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(t,n={}){var u;this._checkLoaded();let m=this.serialize();if(t=n.transformStyle?n.transformStyle(m,t):t,((u=n.validate)===null||u===void 0||u)&&Ls(this,a.C(t)))return!1;(t=a.bW(t)).layers=a.bT(t.layers);let b=a.bX(m,t),w=this._getOperationsToPerform(b);if(w.unimplemented.length>0)throw new Error(`Unimplemented: ${w.unimplemented.join(", ")}.`);if(w.operations.length===0)return!1;for(let k of w.operations)k();return this.stylesheet=t,this._serializedLayers=null,!0}_getOperationsToPerform(t){let n=[],u=[];for(let m of t)switch(m.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":n.push((()=>this.addLayer.apply(this,m.args)));break;case"removeLayer":n.push((()=>this.removeLayer.apply(this,m.args)));break;case"setPaintProperty":n.push((()=>this.setPaintProperty.apply(this,m.args)));break;case"setLayoutProperty":n.push((()=>this.setLayoutProperty.apply(this,m.args)));break;case"setFilter":n.push((()=>this.setFilter.apply(this,m.args)));break;case"addSource":n.push((()=>this.addSource.apply(this,m.args)));break;case"removeSource":n.push((()=>this.removeSource.apply(this,m.args)));break;case"setLayerZoomRange":n.push((()=>this.setLayerZoomRange.apply(this,m.args)));break;case"setLight":n.push((()=>this.setLight.apply(this,m.args)));break;case"setGeoJSONSourceData":n.push((()=>this.setGeoJSONSourceData.apply(this,m.args)));break;case"setGlyphs":n.push((()=>this.setGlyphs.apply(this,m.args)));break;case"setSprite":n.push((()=>this.setSprite.apply(this,m.args)));break;case"setTerrain":n.push((()=>this.map.setTerrain.apply(this,m.args)));break;case"setSky":n.push((()=>this.setSky.apply(this,m.args)));break;case"setProjection":this.setProjection.apply(this,m.args);break;case"setGlobalState":n.push((()=>this.setGlobalState.apply(this,m.args)));break;case"setTransition":n.push((()=>{}));break;default:u.push(m.command)}return{operations:n,unimplemented:u}}addImage(t,n){if(this.getImage(t))return this.fire(new a.k(new Error(`An image named "${t}" already exists.`)));this.imageManager.addImage(t,n),this._afterImageUpdated(t)}updateImage(t,n){this.imageManager.updateImage(t,n)}getImage(t){return this.imageManager.getImage(t)}removeImage(t){if(!this.getImage(t))return this.fire(new a.k(new Error(`An image named "${t}" does not exist.`)));this.imageManager.removeImage(t),this._afterImageUpdated(t)}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(t,n,u={}){if(this._checkLoaded(),this.tileManagers[t]!==void 0)throw new Error(`Source "${t}" already exists.`);if(!n.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(n).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(a.C.source,`sources.${t}`,n,null,u))return;this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);let m=this.tileManagers[t]=new dn(t,n,this.dispatcher);m.style=this,m.setEventedParent(this,(()=>({isSourceLoaded:m.loaded(),source:m.serialize(),sourceId:t}))),m.onAdd(this.map),this._changed=!0}removeSource(t){if(this._checkLoaded(),this.tileManagers[t]===void 0)throw new Error("There is no source with this ID");for(let u in this._layers)if(this._layers[u].source===t)return this.fire(new a.k(new Error(`Source "${t}" cannot be removed while layer "${u}" is using it.`)));let n=this.tileManagers[t];delete this.tileManagers[t],delete this._updatedSources[t],n.fire(new a.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),n.setEventedParent(null),n.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(t,n){if(this._checkLoaded(),this.tileManagers[t]===void 0)throw new Error(`There is no source with this ID=${t}`);let u=this.tileManagers[t].getSource();if(u.type!=="geojson")throw new Error(`geojsonSource.type is ${u.type}, which is !== 'geojson`);u.setData(n),this._changed=!0}getSource(t){return this.tileManagers[t]&&this.tileManagers[t].getSource()}addLayer(t,n,u={}){this._checkLoaded();let m=t.id;if(this.getLayer(m))return void this.fire(new a.k(new Error(`Layer "${m}" already exists on this map.`)));let b;if(t.type==="custom"){if(Ls(this,a.bY(t)))return;b=a.bU(t,this._globalState)}else{if("source"in t&&typeof t.source=="object"&&(this.addSource(m,t.source),t=a.bW(t),t=a.e(t,{source:m})),this._validate(a.C.layer,`layers.${m}`,t,{arrayIndex:-1},u))return;b=a.bU(t,this._globalState),this._validateLayer(b),b.setEventedParent(this,{layer:{id:m}})}let w=n?this._order.indexOf(n):this._order.length;if(n&&w===-1)this.fire(new a.k(new Error(`Cannot add layer "${m}" before non-existing layer "${n}".`)));else{if(this._order.splice(w,0,m),this._layerOrderChanged=!0,this._layers[m]=b,this._removedLayers[m]&&b.source&&b.type!=="custom"){let k=this._removedLayers[m];delete this._removedLayers[m],k.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",this.tileManagers[b.source].pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map)}}moveLayer(t,n){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new a.k(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===n)return;let u=this._order.indexOf(t);this._order.splice(u,1);let m=n?this._order.indexOf(n):this._order.length;n&&m===-1?this.fire(new a.k(new Error(`Cannot move layer "${t}" before non-existing layer "${n}".`))):(this._order.splice(m,0,t),this._layerOrderChanged=!0)}removeLayer(t){this._checkLoaded();let n=this._layers[t];if(!n)return void this.fire(new a.k(new Error(`Cannot remove non-existing layer "${t}".`)));n.setEventedParent(null);let u=this._order.indexOf(t);this._order.splice(u,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=n,delete this._layers[t],this._serializedLayers&&delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],n.onRemove&&n.onRemove(this.map)}getLayer(t){return this._layers[t]}getLayersOrder(){return[...this._order]}hasLayer(t){return t in this._layers}setLayerZoomRange(t,n,u){this._checkLoaded();let m=this.getLayer(t);m?m.minzoom===n&&m.maxzoom===u||(n!=null&&(m.minzoom=n),u!=null&&(m.maxzoom=u),this._updateLayer(m)):this.fire(new a.k(new Error(`Cannot set the zoom range of non-existing layer "${t}".`)))}setFilter(t,n,u={}){this._checkLoaded();let m=this.getLayer(t);if(m){if(!a.bS(m.filter,n))return n==null?(m.setFilter(void 0),void this._updateLayer(m)):void(this._validate(a.C.filter,`layers.${m.id}.filter`,n,null,u)||(m.setFilter(a.bW(n)),this._updateLayer(m)))}else this.fire(new a.k(new Error(`Cannot filter non-existing layer "${t}".`)))}getFilter(t){return a.bW(this.getLayer(t).filter)}setLayoutProperty(t,n,u,m={}){this._checkLoaded();let b=this.getLayer(t);b?a.bS(b.getLayoutProperty(n),u)||(b.setLayoutProperty(n,u,m),this._updateLayer(b)):this.fire(new a.k(new Error(`Cannot style non-existing layer "${t}".`)))}getLayoutProperty(t,n){let u=this.getLayer(t);if(u)return u.getLayoutProperty(n);this.fire(new a.k(new Error(`Cannot get style of non-existing layer "${t}".`)))}setPaintProperty(t,n,u,m={}){this._checkLoaded();let b=this.getLayer(t);b?a.bS(b.getPaintProperty(n),u)||this._updatePaintProperty(b,n,u,m):this.fire(new a.k(new Error(`Cannot style non-existing layer "${t}".`)))}_updatePaintProperty(t,n,u,m={}){t.setPaintProperty(n,u,m)&&this._updateLayer(t),a.bV(t)&&n==="raster-fade-duration"&&this.tileManagers[t.source].setRasterFadeDuration(u),this._changed=!0,this._updatedPaintProps[t.id]=!0,this._serializedLayers=null}getPaintProperty(t,n){return this.getLayer(t).getPaintProperty(n)}setFeatureState(t,n){this._checkLoaded();let u=t.source,m=t.sourceLayer,b=this.tileManagers[u];if(b===void 0)return void this.fire(new a.k(new Error(`The source '${u}' does not exist in the map's style.`)));let w=b.getSource().type;w==="geojson"&&m?this.fire(new a.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):w!=="vector"||m?(t.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),b.setFeatureState(m,t.id,n)):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(t,n){this._checkLoaded();let u=t.source,m=this.tileManagers[u];if(m===void 0)return void this.fire(new a.k(new Error(`The source '${u}' does not exist in the map's style.`)));let b=m.getSource().type,w=b==="vector"?t.sourceLayer:void 0;b!=="vector"||w?n&&typeof t.id!="string"&&typeof t.id!="number"?this.fire(new a.k(new Error("A feature id is required to remove its specific state property."))):m.removeFeatureState(w,t.id,n):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(t){this._checkLoaded();let n=t.source,u=t.sourceLayer,m=this.tileManagers[n];if(m!==void 0)return m.getSource().type!=="vector"||u?(t.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),m.getFeatureState(u,t.id)):void this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.k(new Error(`The source '${n}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;let t=a.bZ(this.tileManagers,(b=>b.serialize())),n=this._serializeByIds(this._order,!0),u=this.map.getTerrain()||void 0,m=this.stylesheet;return a.b_({version:m.version,name:m.name,metadata:m.metadata,light:m.light,sky:m.sky,center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,sprite:m.sprite,glyphs:m.glyphs,transition:m.transition,projection:m.projection,sources:t,layers:n,terrain:u},(b=>b!==void 0))}_updateLayer(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&this.tileManagers[t.source].getSource().type!=="raster"&&(this._updatedSources[t.source]="reload",this.tileManagers[t.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(t){let n=w=>this._layers[w].type==="fill-extrusion",u={},m=[];for(let w=this._order.length-1;w>=0;w--){let k=this._order[w];if(n(k)){u[k]=w;for(let E of t){let z=E[k];if(z)for(let O of z)m.push(O)}}}m.sort(((w,k)=>k.intersectionZ-w.intersectionZ));let b=[];for(let w=this._order.length-1;w>=0;w--){let k=this._order[w];if(n(k))for(let E=m.length-1;E>=0;E--){let z=m[E].feature;if(u[z.layer.id]<w)break;b.push(z),m.pop()}else for(let E of t){let z=E[k];if(z)for(let O of z)b.push(O.feature)}}return b}queryRenderedFeatures(t,n,u){n&&n.filter&&this._validate(a.C.filter,"queryRenderedFeatures.filter",n.filter,null,n);let m={};if(n&&n.layers){if(!(Array.isArray(n.layers)||n.layers instanceof Set))return this.fire(new a.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(let z of n.layers){let O=this._layers[z];if(!O)return this.fire(new a.k(new Error(`The layer '${z}' does not exist in the map's style and cannot be queried for features.`))),[];m[O.source]=!0}}let b=[];n.availableImages=this._availableImages;let w=this._serializedAllLayers(),k=n.layers instanceof Set?n.layers:Array.isArray(n.layers)?new Set(n.layers):null,E=Object.assign(Object.assign({},n),{layers:k,globalState:this._globalState});for(let z in this.tileManagers)n.layers&&!m[z]||b.push(wn(this.tileManagers[z],this._layers,w,t,E,u,this.map.terrain?(O,N,j)=>this.map.terrain.getElevation(O,N,j):void 0));return this.placement&&b.push((function(z,O,N,j,Z,Q,se){let le={},oe=Q.queryRenderedSymbols(j),ce=[];for(let me of Object.keys(oe).map(Number))ce.push(se[me]);ce.sort(pr);for(let me of ce){let de=me.featureIndex.lookupSymbolFeatures(oe[me.bucketInstanceId],O,me.bucketIndex,me.sourceLayerIndex,{filterSpec:Z.filter,globalState:Z.globalState},Z.layers,Z.availableImages,z);for(let ge in de){let xe=le[ge]=le[ge]||[],pe=de[ge];pe.sort(((Te,Re)=>{let ze=me.featureSortOrder;if(ze){let De=ze.indexOf(Te.featureIndex);return ze.indexOf(Re.featureIndex)-De}return Re.featureIndex-Te.featureIndex}));for(let Te of pe)xe.push(Te)}}return(function(me,de,ge){for(let xe in me)for(let pe of me[xe])gr(pe,ge[de[xe].source]);return me})(le,z,N)})(this._layers,w,this.tileManagers,t,E,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(b)}querySourceFeatures(t,n){n!=null&&n.filter&&this._validate(a.C.filter,"querySourceFeatures.filter",n.filter,null,n);let u=this.tileManagers[t];return u?(function(m,b){let w=m.getRenderableIds().map((z=>m.getTileByID(z))),k=[],E={};for(let z=0;z<w.length;z++){let O=w[z],N=O.tileID.canonical.key;E[N]||(E[N]=!0,O.querySourceFeatures(k,b))}return k})(u,n?Object.assign(Object.assign({},n),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(t,n={}){this._checkLoaded();let u=this.light.getLight(),m=!1;for(let w in t)if(!a.bS(t[w],u[w])){m=!0;break}if(!m)return;let b={now:te(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,n),this.light.updateTransitions(b)}getProjection(){var t;return(t=this.stylesheet)===null||t===void 0?void 0:t.projection}setProjection(t){if(this._checkLoaded(),this.projection){if(this.projection.name===t.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=t,this._setProjectionInternal(t.type)}getSky(){var t;return(t=this.stylesheet)===null||t===void 0?void 0:t.sky}setSky(t,n={}){this._checkLoaded();let u=this.getSky(),m=!1;if(!t&&!u)return;if(t&&!u)m=!0;else if(!t&&u)m=!0;else for(let w in t)if(!a.bS(t[w],u[w])){m=!0;break}if(!m)return;let b={now:te(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=t,this.sky.setSky(t,n),this.sky.updateTransitions(b)}_setProjectionInternal(t){let n=(function(u,m){let b={constrainOverride:m};if(Array.isArray(u)){let w=new jl({type:u});return{projection:w,transform:new Cr(b),cameraHelper:new Vl(w)}}switch(u){case"mercator":return{projection:new tr,transform:new La(b),cameraHelper:new Yt};case"globe":{let w=new jl({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:w,transform:new Cr(b),cameraHelper:new Vl(w)}}case"vertical-perspective":return{projection:new Cn,transform:new Jn(b),cameraHelper:new ir};default:return a.w(`Unknown projection name: ${u}. Falling back to mercator projection.`),{projection:new tr,transform:new La(b),cameraHelper:new Yt}}})(t,this.map.transformConstrain);this.projection=n.projection,this.map.migrateProjection(n.transform,n.cameraHelper);for(let u in this.tileManagers)this.tileManagers[u].reload()}_validate(t,n,u,m,b={}){return(!b||b.validate!==!1)&&Ls(this,t.call(a.C,a.e({key:n,style:this.serialize(),value:u,styleSpec:a.u},m)))}_remove(t=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),ke().off(_e,this._rtlPluginLoaded);for(let n in this._layers)this._layers[n].setEventedParent(null);for(let n in this.tileManagers){let u=this.tileManagers[n];u.setEventedParent(null),u.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),t&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(t)}_clearSource(t){this.tileManagers[t].clearTiles()}_reloadSource(t){this.tileManagers[t].resume(),this.tileManagers[t].reload()}_updateSources(t){for(let n in this.tileManagers)this.tileManagers[n].update(t,this.map.terrain)}_generateCollisionBoxes(){for(let t in this.tileManagers)this._reloadSource(t)}_updatePlacement(t,n,u,m,b=!1){let w=!1,k=!1,E={};for(let z of this._order){let O=this._layers[z];if(O.type!=="symbol")continue;if(!E[O.source]){let j=this.tileManagers[O.source];E[O.source]=j.getRenderableIds(!0).map((Z=>j.getTileByID(Z))).sort(((Z,Q)=>Q.tileID.overscaledZ-Z.tileID.overscaledZ||(Z.tileID.isLessThan(Q.tileID)?-1:1)))}let N=this.crossTileSymbolIndex.addLayer(O,E[O.source],t.center.lng);w=w||N}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((b=b||this._layerOrderChanged||u===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(te(),t.zoom))&&(this.pauseablePlacement=new Ia(t,this.map.terrain,this._order,b,n,u,m,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,E),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(te()),k=!0),w&&this.pauseablePlacement.placement.setStale()),k||w)for(let z of this._order){let O=this._layers[z];O.type==="symbol"&&this.placement.updateLayerOpacities(O,E[O.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(te())}_releaseSymbolFadeTiles(){for(let t in this.tileManagers)this.tileManagers[t].releaseSymbolFadeTiles()}getImages(t,n){return a._(this,void 0,void 0,(function*(){let u=yield this.imageManager.getImages(n.icons);this._updateTilesForChangedImages();let m=this.tileManagers[n.source];return m&&m.setDependencies(n.tileID.key,n.type,n.icons),u}))}getGlyphs(t,n){return a._(this,void 0,void 0,(function*(){let u=yield this.glyphManager.getGlyphs(n.stacks),m=this.tileManagers[n.source];return m&&m.setDependencies(n.tileID.key,n.type,[""]),u}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(t,n={}){this._checkLoaded(),t&&this._validate(a.C.glyphs,"glyphs",t,null,n)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=t,this.glyphManager.entries={},this.glyphManager.setURL(t))}getDashes(t,n){return a._(this,void 0,void 0,(function*(){let u={};for(let[m,b]of Object.entries(n.dashes))u[m]=this.lineAtlas.getDash(b.dasharray,b.round);return u}))}addSprite(t,n,u={},m){this._checkLoaded();let b=[{id:t,url:n}],w=[...Wt(this.stylesheet.sprite),...b];this._validate(a.C.sprite,"sprite",w,null,u)||(this.stylesheet.sprite=w,this._loadSprite(b,!0,m))}removeSprite(t){this._checkLoaded();let n=Wt(this.stylesheet.sprite);if(n.find((u=>u.id===t))){if(this._spritesImagesIds[t])for(let u of this._spritesImagesIds[t])this.imageManager.removeImage(u),this._changedImages[u]=!0;n.splice(n.findIndex((u=>u.id===t)),1),this.stylesheet.sprite=n.length>0?n:void 0,delete this._spritesImagesIds[t],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}else this.fire(new a.k(new Error(`Sprite "${t}" doesn't exists on this map.`)))}getSprite(){return Wt(this.stylesheet.sprite)}setSprite(t,n={},u){this._checkLoaded(),t&&this._validate(a.C.sprite,"sprite",t,null,n)||(this.stylesheet.sprite=t,t?this._loadSprite(t,!0,u):(this._unloadSprite(),u&&u(null)))}destroy(){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null);for(let t in this.tileManagers){let n=this.tileManagers[t];n.setEventedParent(null),n.onRemove(this.map)}this.tileManagers={},this.imageManager&&(this.imageManager.setEventedParent(null),this.imageManager.destroy(),this._availableImages=[],this._spritesImagesIds={}),this.glyphManager&&this.glyphManager.destroy();for(let t in this._layers){let n=this._layers[t];n.setEventedParent(null),n.onRemove&&n.onRemove(this.map)}this._setInitialValues(),this.setEventedParent(null),this.dispatcher.unregisterMessageHandler("GG"),this.dispatcher.unregisterMessageHandler("GI"),this.dispatcher.unregisterMessageHandler("GDA"),this.dispatcher.remove(!0),this._listeners={},this._oneTimeListeners={}}}var Ku=a.aV([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class tl{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(t,n,u,m,b,w,k,E,z){this.context=t;let O=this.boundPaintVertexBuffers.length!==m.length;for(let N=0;!O&&N<m.length;N++)this.boundPaintVertexBuffers[N]!==m[N]&&(O=!0);!this.vao||this.boundProgram!==n||this.boundLayoutVertexBuffer!==u||O||this.boundIndexBuffer!==b||this.boundVertexOffset!==w||this.boundDynamicVertexBuffer!==k||this.boundDynamicVertexBuffer2!==E||this.boundDynamicVertexBuffer3!==z?this.freshBind(n,u,m,b,w,k,E,z):(t.bindVertexArray.set(this.vao),k&&k.bind(),b&&b.dynamicDraw&&b.bind(),E&&E.bind(),z&&z.bind())}freshBind(t,n,u,m,b,w,k,E){let z=t.numAttributes,O=this.context,N=O.gl;this.vao&&this.destroy(),this.vao=O.createVertexArray(),O.bindVertexArray.set(this.vao),this.boundProgram=t,this.boundLayoutVertexBuffer=n,this.boundPaintVertexBuffers=u,this.boundIndexBuffer=m,this.boundVertexOffset=b,this.boundDynamicVertexBuffer=w,this.boundDynamicVertexBuffer2=k,this.boundDynamicVertexBuffer3=E,n.enableAttributes(N,t);for(let j of u)j.enableAttributes(N,t);w&&w.enableAttributes(N,t),k&&k.enableAttributes(N,t),E&&E.enableAttributes(N,t),n.bind(),n.setVertexAttribPointers(N,t,b);for(let j of u)j.bind(),j.setVertexAttribPointers(N,t,b);w&&(w.bind(),w.setVertexAttribPointers(N,t,b)),m&&m.bind(),k&&(k.bind(),k.setVertexAttribPointers(N,t,b)),E&&(E.bind(),E.setVertexAttribPointers(N,t,b)),O.currentNumAttributes=z}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}let Cc=(_,t,n,u,m)=>({u_texture:0,u_ele_delta:_,u_fog_matrix:t,u_fog_color:n?n.properties.get("fog-color"):a.bq.white,u_fog_ground_blend:n?n.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:m?0:n?n.calculateFogBlendOpacity(u):0,u_horizon_color:n?n.properties.get("horizon-color"):a.bq.white,u_horizon_fog_blend:n?n.properties.get("horizon-fog-blend"):1,u_is_globe_mode:m?1:0}),Ds={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function tn(_){let t=[];for(let n=0;n<_.length;n++){if(_[n]===null)continue;let u=_[n].split(" ");t.push(u.pop())}return t}class ns{constructor(t,n,u,m,b,w,k,E,z=[]){let O=t.gl;this.program=O.createProgram();let N=tn(n.staticAttributes),j=u?u.getBinderAttributes():[],Z=N.concat(j),Q=ci.prelude.staticUniforms?tn(ci.prelude.staticUniforms):[],se=k.staticUniforms?tn(k.staticUniforms):[],le=n.staticUniforms?tn(n.staticUniforms):[],oe=u?u.getBinderUniforms():[],ce=Q.concat(se).concat(le).concat(oe),me=[];for(let ze of ce)me.indexOf(ze)<0&&me.push(ze);let de=u?u.defines():[];pn(O)&&de.unshift("#version 300 es"),b&&de.push("#define OVERDRAW_INSPECTOR;"),w&&de.push("#define TERRAIN3D;"),E&&de.push(E),z&&de.push(...z);let ge=de.concat(ci.prelude.fragmentSource,k.fragmentSource,n.fragmentSource).join(`
`),xe=de.concat(ci.prelude.vertexSource,k.vertexSource,n.vertexSource).join(`
`);pn(O)||(ge=(function(ze){return ze.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(ge),xe=(function(ze){return ze.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(xe));let pe=O.createShader(O.FRAGMENT_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);if(O.shaderSource(pe,ge),O.compileShader(pe),!O.getShaderParameter(pe,O.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${O.getShaderInfoLog(pe)}`);O.attachShader(this.program,pe);let Te=O.createShader(O.VERTEX_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);if(O.shaderSource(Te,xe),O.compileShader(Te),!O.getShaderParameter(Te,O.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${O.getShaderInfoLog(Te)}`);O.attachShader(this.program,Te),this.attributes={};let Re={};this.numAttributes=Z.length;for(let ze=0;ze<this.numAttributes;ze++)Z[ze]&&(O.bindAttribLocation(this.program,ze,Z[ze]),this.attributes[Z[ze]]=ze);if(O.linkProgram(this.program),!O.getProgramParameter(this.program,O.LINK_STATUS))throw new Error(`Program failed to link: ${O.getProgramInfoLog(this.program)}`);O.deleteShader(Te),O.deleteShader(pe);for(let ze=0;ze<me.length;ze++){let De=me[ze];if(De&&!Re[De]){let Fe=O.getUniformLocation(this.program,De);Fe&&(Re[De]=Fe)}}this.fixedUniforms=m(t,Re),this.terrainUniforms=((ze,De)=>({u_depth:new a.b$(ze,De.u_depth),u_terrain:new a.b$(ze,De.u_terrain),u_terrain_dim:new a.br(ze,De.u_terrain_dim),u_terrain_matrix:new a.c1(ze,De.u_terrain_matrix),u_terrain_unpack:new a.c2(ze,De.u_terrain_unpack),u_terrain_exaggeration:new a.br(ze,De.u_terrain_exaggeration)}))(t,Re),this.projectionUniforms=((ze,De)=>({u_projection_matrix:new a.c1(ze,De.u_projection_matrix),u_projection_tile_mercator_coords:new a.c2(ze,De.u_projection_tile_mercator_coords),u_projection_clipping_plane:new a.c2(ze,De.u_projection_clipping_plane),u_projection_transition:new a.br(ze,De.u_projection_transition),u_projection_fallback_matrix:new a.c1(ze,De.u_projection_fallback_matrix)}))(t,Re),this.binderUniforms=u?u.getUniforms(t,Re):[]}draw(t,n,u,m,b,w,k,E,z,O,N,j,Z,Q,se,le,oe,ce,me){let de=t.gl;if(this.failedToCreate)return;if(t.program.set(this.program),t.setDepthMode(u),t.setStencilMode(m),t.setColorMode(b),t.setCullFace(w),E){t.activeTexture.set(de.TEXTURE2),de.bindTexture(de.TEXTURE_2D,E.depthTexture),t.activeTexture.set(de.TEXTURE3),de.bindTexture(de.TEXTURE_2D,E.texture);for(let xe in this.terrainUniforms)this.terrainUniforms[xe].set(E[xe])}if(z)for(let xe in z)this.projectionUniforms[Ds[xe]].set(z[xe]);if(k)for(let xe in this.fixedUniforms)this.fixedUniforms[xe].set(k[xe]);le&&le.setUniforms(t,this.binderUniforms,Q,{zoom:se});let ge=0;switch(n){case de.LINES:ge=2;break;case de.TRIANGLES:ge=3;break;case de.LINE_STRIP:ge=1}for(let xe of Z.get()){let pe=xe.vaos||(xe.vaos={});(pe[O]||(pe[O]=new tl)).bind(t,this,N,le?le.getPaintVertexBuffers():[],j,xe.vertexOffset,oe,ce,me),de.drawElements(n,xe.primitiveLength*ge,de.UNSIGNED_SHORT,xe.primitiveOffset*ge*2)}}}function kc(_,t,n){let u=1/a.aO(n,1,t.transform.tileZoom),m=Math.pow(2,n.tileID.overscaledZ),b=n.tileSize*Math.pow(2,t.transform.tileZoom)/m,w=b*(n.tileID.canonical.x+n.tileID.wrap*m),k=b*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[u,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[w>>16,k>>16],u_pixel_coord_lower:[65535&w,65535&k]}}let jn=(_,t,n,u)=>{let m=_.style.light,b=m.properties.get("position"),w=[b.x,b.y,b.z],k=a.c5();m.properties.get("anchor")==="viewport"&&a.c6(k,_.transform.bearingInRadians),a.c7(w,w,k);let E=_.transform.transformLightDirection(w),z=m.properties.get("color");return{u_lightpos:w,u_lightpos_globe:E,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[z.r,z.g,z.b],u_vertical_gradient:+t,u_opacity:n,u_fill_translate:u}},Wl=(_,t,n,u,m,b,w)=>a.e(jn(_,t,n,u),kc(b,_,w),{u_height_factor:-Math.pow(2,m.overscaledZ)/w.tileSize/8}),Oa=(_,t,n,u)=>a.e(kc(t,_,n),{u_fill_translate:u}),Pc=(_,t)=>({u_world:_,u_fill_translate:t}),Os=(_,t,n,u,m)=>a.e(Oa(_,t,n,m),{u_world:u}),Gl=(_,t,n,u,m)=>{let b=_.transform,w,k,E=0;if(n.paint.get("circle-pitch-alignment")==="map"){let z=a.aO(t,1,b.zoom);w=!0,k=[z,z],E=z/(a.a5*Math.pow(2,t.tileID.overscaledZ))*2*Math.PI*m}else w=!1,k=b.pixelsToGLUnits;return{u_camera_to_center_distance:b.cameraToCenterDistance,u_scale_with_map:+(n.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+w,u_device_pixel_ratio:_.pixelRatio,u_extrude_scale:k,u_globe_extrude_scale:E,u_translate:u}},ea=_=>({u_pixel_extrude_scale:[1/_.width,1/_.height]}),Ec=_=>({u_viewport_size:[_.width,_.height]}),ta=(_,t=1)=>({u_color:_,u_overlay:0,u_overlay_scale:t}),ya=(_,t,n,u)=>{let m=a.aO(_,1,t)/(a.a5*Math.pow(2,_.tileID.overscaledZ))*2*Math.PI*u;return{u_extrude_scale:a.aO(_,1,t),u_intensity:n,u_globe_extrude_scale:m}},Ac=(_,t,n,u)=>{let m=a.N();a.c8(m,0,_.width,_.height,0,0,1);let b=_.context.gl;return{u_matrix:m,u_world:[b.drawingBufferWidth,b.drawingBufferHeight],u_image:n,u_color_ramp:u,u_opacity:t.paint.get("heatmap-opacity")}},Rs=(_,t,n)=>{let u=n.paint.get("hillshade-accent-color"),m;switch(n.paint.get("hillshade-method")){case"basic":m=4;break;case"combined":m=1;break;case"igor":m=2;break;case"multidirectional":m=3;break;default:m=0}let b=n.getIlluminationProperties();for(let w=0;w<b.directionRadians.length;w++)n.paint.get("hillshade-illumination-anchor")==="viewport"&&(b.directionRadians[w]+=_.transform.bearingInRadians);return{u_image:0,u_latrange:_a(0,t.tileID),u_exaggeration:n.paint.get("hillshade-exaggeration"),u_altitudes:b.altitudeRadians,u_azimuths:b.directionRadians,u_accent:u,u_method:m,u_highlights:b.highlightColor,u_shadows:b.shadowColor}},Qu=(_,t)=>{let n=t.stride,u=a.N();return a.c8(u,0,a.a5,-a.a5,0,0,1),a.O(u,u,[0,-a.a5,0]),{u_matrix:u,u_image:1,u_dimension:[n,n],u_zoom:_.overscaledZ,u_unpack:t.getUnpackVector()}};function _a(_,t){let n=Math.pow(2,t.canonical.z),u=t.canonical.y;return[new a.ab(0,u/n).toLngLat().lat,new a.ab(0,(u+1)/n).toLngLat().lat]}let Mc=(_,t,n=0)=>({u_image:0,u_unpack:t.getUnpackVector(),u_dimension:[t.stride,t.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:n,u_opacity:_.paint.get("color-relief-opacity")}),ia=(_,t,n,u)=>{let m=_.transform;return{u_translation:as(_,t,n),u_ratio:u/a.aO(t,1,m.zoom),u_device_pixel_ratio:_.pixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},Ic=(_,t,n,u,m)=>a.e(ia(_,t,n,u),{u_image:0,u_image_height:m}),Nn=(_,t,n,u,m)=>{let b=_.transform,w=fn(t,b);return{u_translation:as(_,t,n),u_texsize:t.imageAtlasTexture.size,u_ratio:u/a.aO(t,1,b.zoom),u_device_pixel_ratio:_.pixelRatio,u_image:0,u_scale:[w,m.fromScale,m.toScale],u_fade:m.t,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},go=(_,t,n,u,m)=>{let b=fn(t,_.transform);return a.e(ia(_,t,n,u),{u_tileratio:b,u_crossfade_from:m.fromScale,u_crossfade_to:m.toScale,u_image:0,u_mix:m.t,u_lineatlas_width:_.lineAtlas.width,u_lineatlas_height:_.lineAtlas.height})},yo=(_,t,n,u,m,b)=>{let w=fn(t,_.transform);return a.e(ia(_,t,n,u),{u_image:0,u_image_height:b,u_tileratio:w,u_crossfade_from:m.fromScale,u_crossfade_to:m.toScale,u_image_dash:1,u_mix:m.t,u_lineatlas_width:_.lineAtlas.width,u_lineatlas_height:_.lineAtlas.height})};function fn(_,t){return 1/a.aO(_,1,t.tileZoom)}function as(_,t,n){return a.aP(_.transform,t,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}let _o=(_,t,n,u,m)=>{return{u_tl_parent:_,u_scale_parent:t,u_buffer_scale:1,u_fade_t:n.mix,u_opacity:n.opacity*u.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:u.paint.get("raster-brightness-min"),u_brightness_high:u.paint.get("raster-brightness-max"),u_saturation_factor:(w=u.paint.get("raster-saturation"),w>0?1-1/(1.001-w):-w),u_contrast_factor:(b=u.paint.get("raster-contrast"),b>0?1/(1-b):1+b),u_spin_weights:Bs(u.paint.get("raster-hue-rotate")),u_coords_top:[m[0].x,m[0].y,m[1].x,m[1].y],u_coords_bottom:[m[3].x,m[3].y,m[2].x,m[2].y]};var b,w};function Bs(_){_*=Math.PI/180;let t=Math.sin(_),n=Math.cos(_);return[(2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3]}let Ra=(_,t,n,u,m,b,w,k,E,z,O,N,j)=>{let Z=w.transform;return{u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:Z.cameraToCenterDistance,u_pitch:Z.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:Z.width/Z.height,u_fade_change:w.options.fadeDuration?w.symbolFadeChange:1,u_label_plane_matrix:k,u_coord_matrix:E,u_is_text:+O,u_pitch_with_map:+u,u_is_along_line:m,u_is_variable_anchor:b,u_texsize:N,u_texture:0,u_translation:z,u_pitched_scale:j}},ss=(_,t,n,u,m,b,w,k,E,z,O,N,j,Z)=>{let Q=w.transform;return a.e(Ra(_,t,n,u,m,b,w,k,E,z,O,N,Z),{u_gamma_scale:u?Math.cos(Q.pitch*Math.PI/180)*Q.cameraToCenterDistance:1,u_device_pixel_ratio:w.pixelRatio,u_is_halo:1})},va=(_,t,n,u,m,b,w,k,E,z,O,N,j)=>a.e(ss(_,t,n,u,m,b,w,k,E,z,!0,O,0,j),{u_texsize_icon:N,u_texture_icon:1}),il=(_,t)=>({u_opacity:_,u_color:t}),Ju=(_,t,n,u,m)=>a.e((function(b,w,k,E){let z=k.imageManager.getPattern(b.from.toString()),O=k.imageManager.getPattern(b.to.toString()),{width:N,height:j}=k.imageManager.getPixelSize(),Z=Math.pow(2,E.tileID.overscaledZ),Q=E.tileSize*Math.pow(2,k.transform.tileZoom)/Z,se=Q*(E.tileID.canonical.x+E.tileID.wrap*Z),le=Q*E.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:z.tl,u_pattern_br_a:z.br,u_pattern_tl_b:O.tl,u_pattern_br_b:O.br,u_texsize:[N,j],u_mix:w.t,u_pattern_size_a:z.displaySize,u_pattern_size_b:O.displaySize,u_scale_a:w.fromScale,u_scale_b:w.toScale,u_tile_units_to_pixels:1/a.aO(E,1,k.transform.tileZoom),u_pixel_coord_upper:[se>>16,le>>16],u_pixel_coord_lower:[65535&se,65535&le]}})(n,m,t,u),{u_opacity:_}),vo=(_,t)=>{},ed={fillExtrusion:(_,t)=>({u_lightpos:new a.c3(_,t.u_lightpos),u_lightpos_globe:new a.c3(_,t.u_lightpos_globe),u_lightintensity:new a.br(_,t.u_lightintensity),u_lightcolor:new a.c3(_,t.u_lightcolor),u_vertical_gradient:new a.br(_,t.u_vertical_gradient),u_opacity:new a.br(_,t.u_opacity),u_fill_translate:new a.c4(_,t.u_fill_translate)}),fillExtrusionPattern:(_,t)=>({u_lightpos:new a.c3(_,t.u_lightpos),u_lightpos_globe:new a.c3(_,t.u_lightpos_globe),u_lightintensity:new a.br(_,t.u_lightintensity),u_lightcolor:new a.c3(_,t.u_lightcolor),u_vertical_gradient:new a.br(_,t.u_vertical_gradient),u_height_factor:new a.br(_,t.u_height_factor),u_opacity:new a.br(_,t.u_opacity),u_fill_translate:new a.c4(_,t.u_fill_translate),u_image:new a.b$(_,t.u_image),u_texsize:new a.c4(_,t.u_texsize),u_pixel_coord_upper:new a.c4(_,t.u_pixel_coord_upper),u_pixel_coord_lower:new a.c4(_,t.u_pixel_coord_lower),u_scale:new a.c3(_,t.u_scale),u_fade:new a.br(_,t.u_fade)}),fill:(_,t)=>({u_fill_translate:new a.c4(_,t.u_fill_translate)}),fillPattern:(_,t)=>({u_image:new a.b$(_,t.u_image),u_texsize:new a.c4(_,t.u_texsize),u_pixel_coord_upper:new a.c4(_,t.u_pixel_coord_upper),u_pixel_coord_lower:new a.c4(_,t.u_pixel_coord_lower),u_scale:new a.c3(_,t.u_scale),u_fade:new a.br(_,t.u_fade),u_fill_translate:new a.c4(_,t.u_fill_translate)}),fillOutline:(_,t)=>({u_world:new a.c4(_,t.u_world),u_fill_translate:new a.c4(_,t.u_fill_translate)}),fillOutlinePattern:(_,t)=>({u_world:new a.c4(_,t.u_world),u_image:new a.b$(_,t.u_image),u_texsize:new a.c4(_,t.u_texsize),u_pixel_coord_upper:new a.c4(_,t.u_pixel_coord_upper),u_pixel_coord_lower:new a.c4(_,t.u_pixel_coord_lower),u_scale:new a.c3(_,t.u_scale),u_fade:new a.br(_,t.u_fade),u_fill_translate:new a.c4(_,t.u_fill_translate)}),circle:(_,t)=>({u_camera_to_center_distance:new a.br(_,t.u_camera_to_center_distance),u_scale_with_map:new a.b$(_,t.u_scale_with_map),u_pitch_with_map:new a.b$(_,t.u_pitch_with_map),u_extrude_scale:new a.c4(_,t.u_extrude_scale),u_device_pixel_ratio:new a.br(_,t.u_device_pixel_ratio),u_globe_extrude_scale:new a.br(_,t.u_globe_extrude_scale),u_translate:new a.c4(_,t.u_translate)}),collisionBox:(_,t)=>({u_pixel_extrude_scale:new a.c4(_,t.u_pixel_extrude_scale)}),collisionCircle:(_,t)=>({u_viewport_size:new a.c4(_,t.u_viewport_size)}),debug:(_,t)=>({u_color:new a.c0(_,t.u_color),u_overlay:new a.b$(_,t.u_overlay),u_overlay_scale:new a.br(_,t.u_overlay_scale)}),depth:vo,clippingMask:vo,heatmap:(_,t)=>({u_extrude_scale:new a.br(_,t.u_extrude_scale),u_intensity:new a.br(_,t.u_intensity),u_globe_extrude_scale:new a.br(_,t.u_globe_extrude_scale)}),heatmapTexture:(_,t)=>({u_matrix:new a.c1(_,t.u_matrix),u_world:new a.c4(_,t.u_world),u_image:new a.b$(_,t.u_image),u_color_ramp:new a.b$(_,t.u_color_ramp),u_opacity:new a.br(_,t.u_opacity)}),hillshade:(_,t)=>({u_image:new a.b$(_,t.u_image),u_latrange:new a.c4(_,t.u_latrange),u_exaggeration:new a.br(_,t.u_exaggeration),u_altitudes:new a.ca(_,t.u_altitudes),u_azimuths:new a.ca(_,t.u_azimuths),u_accent:new a.c0(_,t.u_accent),u_method:new a.b$(_,t.u_method),u_shadows:new a.c9(_,t.u_shadows),u_highlights:new a.c9(_,t.u_highlights)}),hillshadePrepare:(_,t)=>({u_matrix:new a.c1(_,t.u_matrix),u_image:new a.b$(_,t.u_image),u_dimension:new a.c4(_,t.u_dimension),u_zoom:new a.br(_,t.u_zoom),u_unpack:new a.c2(_,t.u_unpack)}),colorRelief:(_,t)=>({u_image:new a.b$(_,t.u_image),u_unpack:new a.c2(_,t.u_unpack),u_dimension:new a.c4(_,t.u_dimension),u_elevation_stops:new a.b$(_,t.u_elevation_stops),u_color_stops:new a.b$(_,t.u_color_stops),u_color_ramp_size:new a.b$(_,t.u_color_ramp_size),u_opacity:new a.br(_,t.u_opacity)}),line:(_,t)=>({u_translation:new a.c4(_,t.u_translation),u_ratio:new a.br(_,t.u_ratio),u_device_pixel_ratio:new a.br(_,t.u_device_pixel_ratio),u_units_to_pixels:new a.c4(_,t.u_units_to_pixels)}),lineGradient:(_,t)=>({u_translation:new a.c4(_,t.u_translation),u_ratio:new a.br(_,t.u_ratio),u_device_pixel_ratio:new a.br(_,t.u_device_pixel_ratio),u_units_to_pixels:new a.c4(_,t.u_units_to_pixels),u_image:new a.b$(_,t.u_image),u_image_height:new a.br(_,t.u_image_height)}),linePattern:(_,t)=>({u_translation:new a.c4(_,t.u_translation),u_texsize:new a.c4(_,t.u_texsize),u_ratio:new a.br(_,t.u_ratio),u_device_pixel_ratio:new a.br(_,t.u_device_pixel_ratio),u_image:new a.b$(_,t.u_image),u_units_to_pixels:new a.c4(_,t.u_units_to_pixels),u_scale:new a.c3(_,t.u_scale),u_fade:new a.br(_,t.u_fade)}),lineSDF:(_,t)=>({u_translation:new a.c4(_,t.u_translation),u_ratio:new a.br(_,t.u_ratio),u_device_pixel_ratio:new a.br(_,t.u_device_pixel_ratio),u_units_to_pixels:new a.c4(_,t.u_units_to_pixels),u_image:new a.b$(_,t.u_image),u_mix:new a.br(_,t.u_mix),u_tileratio:new a.br(_,t.u_tileratio),u_crossfade_from:new a.br(_,t.u_crossfade_from),u_crossfade_to:new a.br(_,t.u_crossfade_to),u_lineatlas_width:new a.br(_,t.u_lineatlas_width),u_lineatlas_height:new a.br(_,t.u_lineatlas_height)}),lineGradientSDF:(_,t)=>({u_translation:new a.c4(_,t.u_translation),u_ratio:new a.br(_,t.u_ratio),u_device_pixel_ratio:new a.br(_,t.u_device_pixel_ratio),u_units_to_pixels:new a.c4(_,t.u_units_to_pixels),u_image:new a.b$(_,t.u_image),u_image_height:new a.br(_,t.u_image_height),u_tileratio:new a.br(_,t.u_tileratio),u_crossfade_from:new a.br(_,t.u_crossfade_from),u_crossfade_to:new a.br(_,t.u_crossfade_to),u_image_dash:new a.b$(_,t.u_image_dash),u_mix:new a.br(_,t.u_mix),u_lineatlas_width:new a.br(_,t.u_lineatlas_width),u_lineatlas_height:new a.br(_,t.u_lineatlas_height)}),raster:(_,t)=>({u_tl_parent:new a.c4(_,t.u_tl_parent),u_scale_parent:new a.br(_,t.u_scale_parent),u_buffer_scale:new a.br(_,t.u_buffer_scale),u_fade_t:new a.br(_,t.u_fade_t),u_opacity:new a.br(_,t.u_opacity),u_image0:new a.b$(_,t.u_image0),u_image1:new a.b$(_,t.u_image1),u_brightness_low:new a.br(_,t.u_brightness_low),u_brightness_high:new a.br(_,t.u_brightness_high),u_saturation_factor:new a.br(_,t.u_saturation_factor),u_contrast_factor:new a.br(_,t.u_contrast_factor),u_spin_weights:new a.c3(_,t.u_spin_weights),u_coords_top:new a.c2(_,t.u_coords_top),u_coords_bottom:new a.c2(_,t.u_coords_bottom)}),symbolIcon:(_,t)=>({u_is_size_zoom_constant:new a.b$(_,t.u_is_size_zoom_constant),u_is_size_feature_constant:new a.b$(_,t.u_is_size_feature_constant),u_size_t:new a.br(_,t.u_size_t),u_size:new a.br(_,t.u_size),u_camera_to_center_distance:new a.br(_,t.u_camera_to_center_distance),u_pitch:new a.br(_,t.u_pitch),u_rotate_symbol:new a.b$(_,t.u_rotate_symbol),u_aspect_ratio:new a.br(_,t.u_aspect_ratio),u_fade_change:new a.br(_,t.u_fade_change),u_label_plane_matrix:new a.c1(_,t.u_label_plane_matrix),u_coord_matrix:new a.c1(_,t.u_coord_matrix),u_is_text:new a.b$(_,t.u_is_text),u_pitch_with_map:new a.b$(_,t.u_pitch_with_map),u_is_along_line:new a.b$(_,t.u_is_along_line),u_is_variable_anchor:new a.b$(_,t.u_is_variable_anchor),u_texsize:new a.c4(_,t.u_texsize),u_texture:new a.b$(_,t.u_texture),u_translation:new a.c4(_,t.u_translation),u_pitched_scale:new a.br(_,t.u_pitched_scale)}),symbolSDF:(_,t)=>({u_is_size_zoom_constant:new a.b$(_,t.u_is_size_zoom_constant),u_is_size_feature_constant:new a.b$(_,t.u_is_size_feature_constant),u_size_t:new a.br(_,t.u_size_t),u_size:new a.br(_,t.u_size),u_camera_to_center_distance:new a.br(_,t.u_camera_to_center_distance),u_pitch:new a.br(_,t.u_pitch),u_rotate_symbol:new a.b$(_,t.u_rotate_symbol),u_aspect_ratio:new a.br(_,t.u_aspect_ratio),u_fade_change:new a.br(_,t.u_fade_change),u_label_plane_matrix:new a.c1(_,t.u_label_plane_matrix),u_coord_matrix:new a.c1(_,t.u_coord_matrix),u_is_text:new a.b$(_,t.u_is_text),u_pitch_with_map:new a.b$(_,t.u_pitch_with_map),u_is_along_line:new a.b$(_,t.u_is_along_line),u_is_variable_anchor:new a.b$(_,t.u_is_variable_anchor),u_texsize:new a.c4(_,t.u_texsize),u_texture:new a.b$(_,t.u_texture),u_gamma_scale:new a.br(_,t.u_gamma_scale),u_device_pixel_ratio:new a.br(_,t.u_device_pixel_ratio),u_is_halo:new a.b$(_,t.u_is_halo),u_translation:new a.c4(_,t.u_translation),u_pitched_scale:new a.br(_,t.u_pitched_scale)}),symbolTextAndIcon:(_,t)=>({u_is_size_zoom_constant:new a.b$(_,t.u_is_size_zoom_constant),u_is_size_feature_constant:new a.b$(_,t.u_is_size_feature_constant),u_size_t:new a.br(_,t.u_size_t),u_size:new a.br(_,t.u_size),u_camera_to_center_distance:new a.br(_,t.u_camera_to_center_distance),u_pitch:new a.br(_,t.u_pitch),u_rotate_symbol:new a.b$(_,t.u_rotate_symbol),u_aspect_ratio:new a.br(_,t.u_aspect_ratio),u_fade_change:new a.br(_,t.u_fade_change),u_label_plane_matrix:new a.c1(_,t.u_label_plane_matrix),u_coord_matrix:new a.c1(_,t.u_coord_matrix),u_is_text:new a.b$(_,t.u_is_text),u_pitch_with_map:new a.b$(_,t.u_pitch_with_map),u_is_along_line:new a.b$(_,t.u_is_along_line),u_is_variable_anchor:new a.b$(_,t.u_is_variable_anchor),u_texsize:new a.c4(_,t.u_texsize),u_texsize_icon:new a.c4(_,t.u_texsize_icon),u_texture:new a.b$(_,t.u_texture),u_texture_icon:new a.b$(_,t.u_texture_icon),u_gamma_scale:new a.br(_,t.u_gamma_scale),u_device_pixel_ratio:new a.br(_,t.u_device_pixel_ratio),u_is_halo:new a.b$(_,t.u_is_halo),u_translation:new a.c4(_,t.u_translation),u_pitched_scale:new a.br(_,t.u_pitched_scale)}),background:(_,t)=>({u_opacity:new a.br(_,t.u_opacity),u_color:new a.c0(_,t.u_color)}),backgroundPattern:(_,t)=>({u_opacity:new a.br(_,t.u_opacity),u_image:new a.b$(_,t.u_image),u_pattern_tl_a:new a.c4(_,t.u_pattern_tl_a),u_pattern_br_a:new a.c4(_,t.u_pattern_br_a),u_pattern_tl_b:new a.c4(_,t.u_pattern_tl_b),u_pattern_br_b:new a.c4(_,t.u_pattern_br_b),u_texsize:new a.c4(_,t.u_texsize),u_mix:new a.br(_,t.u_mix),u_pattern_size_a:new a.c4(_,t.u_pattern_size_a),u_pattern_size_b:new a.c4(_,t.u_pattern_size_b),u_scale_a:new a.br(_,t.u_scale_a),u_scale_b:new a.br(_,t.u_scale_b),u_pixel_coord_upper:new a.c4(_,t.u_pixel_coord_upper),u_pixel_coord_lower:new a.c4(_,t.u_pixel_coord_lower),u_tile_units_to_pixels:new a.br(_,t.u_tile_units_to_pixels)}),terrain:(_,t)=>({u_texture:new a.b$(_,t.u_texture),u_ele_delta:new a.br(_,t.u_ele_delta),u_fog_matrix:new a.c1(_,t.u_fog_matrix),u_fog_color:new a.c0(_,t.u_fog_color),u_fog_ground_blend:new a.br(_,t.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.br(_,t.u_fog_ground_blend_opacity),u_horizon_color:new a.c0(_,t.u_horizon_color),u_horizon_fog_blend:new a.br(_,t.u_horizon_fog_blend),u_is_globe_mode:new a.br(_,t.u_is_globe_mode)}),terrainDepth:(_,t)=>({u_ele_delta:new a.br(_,t.u_ele_delta)}),terrainCoords:(_,t)=>({u_texture:new a.b$(_,t.u_texture),u_terrain_coords_id:new a.br(_,t.u_terrain_coords_id),u_ele_delta:new a.br(_,t.u_ele_delta)}),projectionErrorMeasurement:(_,t)=>({u_input:new a.br(_,t.u_input),u_output_expected:new a.br(_,t.u_output_expected)}),atmosphere:(_,t)=>({u_sun_pos:new a.c3(_,t.u_sun_pos),u_atmosphere_blend:new a.br(_,t.u_atmosphere_blend),u_globe_position:new a.c3(_,t.u_globe_position),u_globe_radius:new a.br(_,t.u_globe_radius),u_inv_proj_matrix:new a.c1(_,t.u_inv_proj_matrix)}),sky:(_,t)=>({u_sky_color:new a.c0(_,t.u_sky_color),u_horizon_color:new a.c0(_,t.u_horizon_color),u_horizon:new a.c4(_,t.u_horizon),u_horizon_normal:new a.c4(_,t.u_horizon_normal),u_sky_horizon_blend:new a.br(_,t.u_sky_horizon_blend),u_sky_blend:new a.br(_,t.u_sky_blend)})};class zc{constructor(t,n,u){this.context=t;let m=t.gl;this.buffer=m.createBuffer(),this.dynamicDraw=!!u,this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,n.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete n.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){let n=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),n.bufferSubData(n.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let Lc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Dc{constructor(t,n,u,m){this.length=n.length,this.attributes=u,this.itemSize=n.bytesPerElement,this.dynamicDraw=m,this.context=t;let b=t.gl;this.buffer=b.createBuffer(),t.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,n.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete n.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){if(t.length!==this.length)throw new Error(`Length of new data is ${t.length}, which doesn't match current length of ${this.length}`);let n=this.context.gl;this.bind(),n.bufferSubData(n.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,n){for(let u=0;u<this.attributes.length;u++){let m=n.attributes[this.attributes[u].name];m!==void 0&&t.enableVertexAttribArray(m)}}setVertexAttribPointers(t,n,u){for(let m=0;m<this.attributes.length;m++){let b=this.attributes[m],w=n.attributes[b.name];w!==void 0&&t.vertexAttribPointer(w,b.components,t[Lc[b.type]],!1,this.itemSize,b.offset+this.itemSize*(u||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class ui{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class mn extends ui{getDefault(){return a.bq.transparent}set(t){let n=this.current;(t.r!==n.r||t.g!==n.g||t.b!==n.b||t.a!==n.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class os extends ui{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class rl extends ui{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class Fs extends ui{getDefault(){return[!0,!0,!0,!0]}set(t){let n=this.current;(t[0]!==n[0]||t[1]!==n[1]||t[2]!==n[2]||t[3]!==n[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class ls extends ui{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class js extends ui{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class Ns extends ui{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){let n=this.current;(t.func!==n.func||t.ref!==n.ref||t.mask!==n.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class Dr extends ui{getDefault(){let t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){let n=this.current;(t[0]!==n[0]||t[1]!==n[1]||t[2]!==n[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class Oc extends ui{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;let n=this.gl;t?n.enable(n.STENCIL_TEST):n.disable(n.STENCIL_TEST),this.current=t,this.dirty=!1}}class cs extends ui{getDefault(){return[0,1]}set(t){let n=this.current;(t[0]!==n[0]||t[1]!==n[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class nl extends ui{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;let n=this.gl;t?n.enable(n.DEPTH_TEST):n.disable(n.DEPTH_TEST),this.current=t,this.dirty=!1}}class Ba extends ui{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class al extends ui{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;let n=this.gl;t?n.enable(n.BLEND):n.disable(n.BLEND),this.current=t,this.dirty=!1}}class kn extends ui{getDefault(){let t=this.gl;return[t.ONE,t.ZERO]}set(t){let n=this.current;(t[0]!==n[0]||t[1]!==n[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class qs extends ui{getDefault(){return a.bq.transparent}set(t){let n=this.current;(t.r!==n.r||t.g!==n.g||t.b!==n.b||t.a!==n.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class bo extends ui{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class Vs extends ui{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;let n=this.gl;t?n.enable(n.CULL_FACE):n.disable(n.CULL_FACE),this.current=t,this.dirty=!1}}class Ws extends ui{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class ba extends ui{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class Gs extends ui{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class sl extends ui{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class $t extends ui{getDefault(){let t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){let n=this.current;(t[0]!==n[0]||t[1]!==n[1]||t[2]!==n[2]||t[3]!==n[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class ol extends ui{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;let n=this.gl;n.bindFramebuffer(n.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class Rc extends ui{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;let n=this.gl;n.bindRenderbuffer(n.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class Ul extends ui{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;let n=this.gl;n.bindTexture(n.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class Us extends ui{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;let n=this.gl;n.bindBuffer(n.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class Bc extends ui{getDefault(){return null}set(t){let n=this.gl;n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class Fc extends ui{getDefault(){return null}set(t){var n;if(t===this.current&&!this.dirty)return;let u=this.gl;pn(u)?u.bindVertexArray(t):(n=u.getExtension("OES_vertex_array_object"))===null||n===void 0||n.bindVertexArrayOES(t),this.current=t,this.dirty=!1}}class jc extends ui{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;let n=this.gl;n.pixelStorei(n.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class Nc extends ui{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;let n=this.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class ll extends ui{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;let n=this.gl;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class Zs extends ui{constructor(t,n){super(t),this.context=t,this.parent=n}getDefault(){return null}}class c extends Zs{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let n=this.gl;n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class v extends Zs{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let n=this.gl;n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class C extends Zs{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let n=this.gl;n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,t),this.current=t,this.dirty=!1}}let I="Framebuffer is not complete";class q{constructor(t,n,u,m,b){this.context=t,this.width=n,this.height=u;let w=t.gl,k=this.framebuffer=w.createFramebuffer();if(this.colorAttachment=new c(t,k),m)this.depthAttachment=b?new C(t,k):new v(t,k);else if(b)throw new Error("Stencil cannot be set without depth");if(w.checkFramebufferStatus(w.FRAMEBUFFER)!==w.FRAMEBUFFER_COMPLETE)throw new Error(I)}destroy(){let t=this.context.gl,n=this.colorAttachment.get();if(n&&t.deleteTexture(n),this.depthAttachment){let u=this.depthAttachment.get();u&&t.deleteRenderbuffer(u)}t.deleteFramebuffer(this.framebuffer)}}class ie{constructor(t){var n,u;if(this.gl=t,this.clearColor=new mn(this),this.clearDepth=new os(this),this.clearStencil=new rl(this),this.colorMask=new Fs(this),this.depthMask=new ls(this),this.stencilMask=new js(this),this.stencilFunc=new Ns(this),this.stencilOp=new Dr(this),this.stencilTest=new Oc(this),this.depthRange=new cs(this),this.depthTest=new nl(this),this.depthFunc=new Ba(this),this.blend=new al(this),this.blendFunc=new kn(this),this.blendColor=new qs(this),this.blendEquation=new bo(this),this.cullFace=new Vs(this),this.cullFaceSide=new Ws(this),this.frontFace=new ba(this),this.program=new Gs(this),this.activeTexture=new sl(this),this.viewport=new $t(this),this.bindFramebuffer=new ol(this),this.bindRenderbuffer=new Rc(this),this.bindTexture=new Ul(this),this.bindVertexBuffer=new Us(this),this.bindElementBuffer=new Bc(this),this.bindVertexArray=new Fc(this),this.pixelStoreUnpack=new jc(this),this.pixelStoreUnpackPremultiplyAlpha=new Nc(this),this.pixelStoreUnpackFlipY=new ll(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),pn(t)){this.HALF_FLOAT=t.HALF_FLOAT;let m=t.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(n=t.RGBA16F)!==null&&n!==void 0?n:m==null?void 0:m.RGBA16F_EXT,this.RGB16F=(u=t.RGB16F)!==null&&u!==void 0?u:m==null?void 0:m.RGB16F_EXT,t.getExtension("EXT_color_buffer_float")}else{t.getExtension("EXT_color_buffer_half_float"),t.getExtension("OES_texture_half_float_linear");let m=t.getExtension("OES_texture_half_float");this.HALF_FLOAT=m==null?void 0:m.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,n){return new zc(this,t,n)}createVertexBuffer(t,n,u){return new Dc(this,t,n,u)}createRenderbuffer(t,n,u){let m=this.gl,b=m.createRenderbuffer();return this.bindRenderbuffer.set(b),m.renderbufferStorage(m.RENDERBUFFER,t,n,u),this.bindRenderbuffer.set(null),b}createFramebuffer(t,n,u,m){return new q(this,t,n,u,m)}clear({color:t,depth:n,stencil:u}){let m=this.gl,b=0;t&&(b|=m.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),n!==void 0&&(b|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),u!==void 0&&(b|=m.STENCIL_BUFFER_BIT,this.clearStencil.set(u),this.stencilMask.set(255)),m.clear(b)}setCullFace(t){t.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(t){a.bS(t.blendFunction,Pi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}createVertexArray(){var t;return pn(this.gl)?this.gl.createVertexArray():(t=this.gl.getExtension("OES_vertex_array_object"))===null||t===void 0?void 0:t.createVertexArrayOES()}deleteVertexArray(t){var n;return pn(this.gl)?this.gl.deleteVertexArray(t):(n=this.gl.getExtension("OES_vertex_array_object"))===null||n===void 0?void 0:n.deleteVertexArrayOES(t)}unbindVAO(){this.bindVertexArray.set(null)}}let ve;function Me(_,t,n,u,m){let b=_.context,w=_.transform,k=b.gl,E=_.useProgram("collisionBox"),z=[],O=0,N=0;for(let oe=0;oe<u.length;oe++){let ce=u[oe],me=t.getTile(ce).getBucket(n);if(!me)continue;let de=m?me.textCollisionBox:me.iconCollisionBox,ge=me.collisionCircleArray;ge.length>0&&(z.push({circleArray:ge,circleOffset:N,coord:ce}),O+=ge.length/4,N=O),de&&E.draw(b,k.LINES,Ot.disabled,ei.disabled,_.colorModeForRenderPass(),Zt.disabled,ea(_.transform),_.style.map.terrain&&_.style.map.terrain.getTerrainData(ce),w.getProjectionData({overscaledTileID:ce,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),n.id,de.layoutVertexBuffer,de.indexBuffer,de.segments,null,_.transform.zoom,null,null,de.collisionVertexBuffer)}if(!m||!z.length)return;let j=_.useProgram("collisionCircle"),Z=new a.cb;Z.resize(4*O),Z._trim();let Q=0;for(let oe of z)for(let ce=0;ce<oe.circleArray.length/4;ce++){let me=4*ce,de=oe.circleArray[me+0],ge=oe.circleArray[me+1],xe=oe.circleArray[me+2],pe=oe.circleArray[me+3];Z.emplace(Q++,de,ge,xe,pe,0),Z.emplace(Q++,de,ge,xe,pe,1),Z.emplace(Q++,de,ge,xe,pe,2),Z.emplace(Q++,de,ge,xe,pe,3)}(!ve||ve.length<2*O)&&(ve=(function(oe){let ce=2*oe,me=new a.cd;me.resize(ce),me._trim();for(let de=0;de<ce;de++){let ge=6*de;me.uint16[ge+0]=4*de+0,me.uint16[ge+1]=4*de+1,me.uint16[ge+2]=4*de+2,me.uint16[ge+3]=4*de+2,me.uint16[ge+4]=4*de+3,me.uint16[ge+5]=4*de+0}return me})(O));let se=b.createIndexBuffer(ve,!0),le=b.createVertexBuffer(Z,a.cc.members,!0);for(let oe of z){let ce=Ec(_.transform);j.draw(b,k.TRIANGLES,Ot.disabled,ei.disabled,_.colorModeForRenderPass(),Zt.disabled,ce,_.style.map.terrain&&_.style.map.terrain.getTerrainData(oe.coord),null,n.id,le,se,a.aY.simpleSegment(0,2*oe.circleOffset,oe.circleArray.length,oe.circleArray.length/2),null,_.transform.zoom,null,null,null)}le.destroy(),se.destroy()}let Ve=a.as(new Float32Array(16));function Qe(_,t,n,u,m,b){let{horizontalAlign:w,verticalAlign:k}=a.aT(_);return new a.P((-(w-.5)*t/m+u[0])*b,(-(k-.5)*n/m+u[1])*b)}function dt(_,t,n,u,m,b){let w=t.tileAnchorPoint.add(new a.P(t.translation[0],t.translation[1]));if(t.pitchWithMap){let k=u.mult(b);n||(k=k.rotate(-m));let E=w.add(k);return Rt(E.x,E.y,t.pitchedLabelPlaneMatrix,t.getElevation).point}if(n){let k=gi(t.tileAnchorPoint.x+1,t.tileAnchorPoint.y,t).point.sub(_),E=Math.atan(k.y/k.x)+(k.x<0?Math.PI:0);return _.add(u.rotate(E))}return _.add(u)}function It(_,t,n,u,m,b,w,k,E,z,O,N){let j=_.text.placedSymbolArray,Z=_.text.dynamicLayoutVertexArray,Q=_.icon.dynamicLayoutVertexArray,se={};Z.clear();for(let le=0;le<j.length;le++){let oe=j.get(le),ce=oe.hidden||!oe.crossTileID||_.allowVerticalPlacement&&!oe.placedOrientation?null:u[oe.crossTileID];if(ce){let me=new a.P(oe.anchorX,oe.anchorY),de={getElevation:N,width:m.width,height:m.height,pitchedLabelPlaneMatrix:b,pitchWithMap:n,transform:m,tileAnchorPoint:me,translation:z,unwrappedTileID:O},ge=n?Xn(me.x,me.y,de):gi(me.x,me.y,de),xe=no(m.cameraToCenterDistance,ge.signedDistanceFromCamera),pe=a.aB(_.textSizeData,k,oe)*xe/a.aN;n&&(pe*=_.tilePixelRatio/w);let{width:Te,height:Re,anchor:ze,textOffset:De,textBoxScale:Fe}=ce,$e=Qe(ze,Te,Re,De,Fe,pe),Je=m.getPitchedTextCorrection(me.x+z[0],me.y+z[1],O),Ze=dt(ge.point,de,t,$e,-m.bearingInRadians,Je),ht=_.allowVerticalPlacement&&oe.placedOrientation===a.aA.vertical?Math.PI/2:0;for(let Lt=0;Lt<oe.numGlyphs;Lt++)a.aH(Z,Ze,ht);E&&oe.associatedIconIndex>=0&&(se[oe.associatedIconIndex]={shiftedAnchor:Ze,angle:ht})}else bi(oe.numGlyphs,Z)}if(E){Q.clear();let le=_.icon.placedSymbolArray;for(let oe=0;oe<le.length;oe++){let ce=le.get(oe);if(ce.hidden)bi(ce.numGlyphs,Q);else{let me=se[oe];if(me)for(let de=0;de<ce.numGlyphs;de++)a.aH(Q,me.shiftedAnchor,me.angle);else bi(ce.numGlyphs,Q)}}_.icon.dynamicLayoutVertexBuffer.updateData(Q)}_.text.dynamicLayoutVertexBuffer.updateData(Z)}function Qt(_,t,n){return n.iconsInText&&t?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function fr(_,t,n,u,m,b,w,k,E,z,O,N,j){let Z=_.context,Q=Z.gl,se=_.transform,le=k==="map",oe=E==="map",ce=k!=="viewport"&&n.layout.get("symbol-placement")!=="point",me=le&&!oe&&!ce,de=!n.layout.get("symbol-sort-key").isConstant(),ge=!1,xe=_.getDepthModeForSublayer(0,Ot.ReadOnly),pe=n._unevaluatedLayout.hasValue("text-variable-anchor")||n._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Te=[],Re=se.getCircleRadiusCorrection();for(let ze of u){let De=t.getTile(ze),Fe=De.getBucket(n);if(!Fe)continue;let $e=m?Fe.text:Fe.icon;if(!$e||!$e.segments.get().length||!$e.hasVisibleVertices)continue;let Je=$e.programConfigurations.get(n.id),Ze=m||Fe.sdfIcons,ht=m?Fe.textSizeData:Fe.iconSizeData,Lt=oe||se.pitch!==0,yi=_.useProgram(Qt(Ze,m,Fe),Je),Ri=a.az(ht,se.zoom),wi=_.style.map.terrain&&_.style.map.terrain.getTerrainData(ze),Gi,Di,kr,ji,yr=[0,0],ur=null;if(m)Di=De.glyphAtlasTexture,kr=Q.LINEAR,Gi=De.glyphAtlasTexture.size,Fe.iconsInText&&(yr=De.imageAtlasTexture.size,ur=De.imageAtlasTexture,ji=Lt||_.options.rotating||_.options.zooming||ht.kind==="composite"||ht.kind==="camera"?Q.LINEAR:Q.NEAREST);else{let _r=n.layout.get("icon-size").constantOr(0)!==1||Fe.iconsNeedLinear;Di=De.imageAtlasTexture,kr=Ze||_.options.rotating||_.options.zooming||_r||Lt?Q.LINEAR:Q.NEAREST,Gi=De.imageAtlasTexture.size}let dr=a.aO(De,1,_.transform.zoom),$r=Qr(le,_.transform,dr),vn=a.N();a.aC(vn,$r);let qa=$o(oe,le,_.transform,dr),Hs=a.aP(se,De,b,w),Mo=se.getProjectionData({overscaledTileID:ze,applyGlobeMatrix:!j,applyTerrainMatrix:!0}),eu=pe&&Fe.hasTextData(),ml=n.layout.get("icon-text-fit")!=="none"&&eu&&Fe.hasIconData();if(ce){let _r=_.style.map.terrain?(Wn,Qi)=>_.style.map.terrain.getElevation(ze,Wn,Qi):null,Pr=n.layout.get("text-rotation-alignment")==="map";Ho(Fe,_,m,$r,vn,oe,z,Pr,ze.toUnwrapped(),se.width,se.height,Hs,_r)}let Va=m&&pe||ml,Or=ce||Va?Ve:oe?$r:_.transform.clipSpaceToPixelsMatrix,rn=Ze&&n.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Hr;Hr=Ze?Fe.iconsInText?va(ht.kind,Ri,me,oe,ce,Va,_,Or,qa,Hs,Gi,yr,Re):ss(ht.kind,Ri,me,oe,ce,Va,_,Or,qa,Hs,m,Gi,0,Re):Ra(ht.kind,Ri,me,oe,ce,Va,_,Or,qa,Hs,m,Gi,Re);let aa={program:yi,buffers:$e,uniformValues:Hr,projectionData:Mo,atlasTexture:Di,atlasTextureIcon:ur,atlasInterpolation:kr,atlasInterpolationIcon:ji,isSDF:Ze,hasHalo:rn};if(de&&Fe.canOverlap){ge=!0;let _r=$e.segments.get();for(let Pr of _r)Te.push({segments:new a.aY([Pr]),sortKey:Pr.sortKey,state:aa,terrainData:wi})}else Te.push({segments:$e.segments,sortKey:0,state:aa,terrainData:wi})}ge&&Te.sort(((ze,De)=>ze.sortKey-De.sortKey));for(let ze of Te){let De=ze.state;if(Z.activeTexture.set(Q.TEXTURE0),De.atlasTexture.bind(De.atlasInterpolation,Q.CLAMP_TO_EDGE),De.atlasTextureIcon&&(Z.activeTexture.set(Q.TEXTURE1),De.atlasTextureIcon&&De.atlasTextureIcon.bind(De.atlasInterpolationIcon,Q.CLAMP_TO_EDGE)),De.isSDF){let Fe=De.uniformValues;De.hasHalo&&(Fe.u_is_halo=1,rr(De.buffers,ze.segments,n,_,De.program,xe,O,N,Fe,De.projectionData,ze.terrainData)),Fe.u_is_halo=0}rr(De.buffers,ze.segments,n,_,De.program,xe,O,N,De.uniformValues,De.projectionData,ze.terrainData)}}function rr(_,t,n,u,m,b,w,k,E,z,O){let N=u.context;m.draw(N,N.gl.TRIANGLES,b,w,k,Zt.backCCW,E,O,z,n.id,_.layoutVertexBuffer,_.indexBuffer,t,n.paint,u.transform.zoom,_.programConfigurations.get(n.id),_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer)}function gn(_,t,n,u,m){let b=_.context,w=b.gl,k=ei.disabled,E=new Pi([w.ONE,w.ONE],a.bq.transparent,[!0,!0,!0,!0]),z=t.getBucket(n);if(!z)return;let O=u.key,N=n.heatmapFbos.get(O);N||(N=ra(b,t.tileSize,t.tileSize),n.heatmapFbos.set(O,N)),b.bindFramebuffer.set(N.framebuffer),b.viewport.set([0,0,t.tileSize,t.tileSize]),b.clear({color:a.bq.transparent});let j=z.programConfigurations.get(n.id),Z=_.useProgram("heatmap",j,!m),Q=_.transform.getProjectionData({overscaledTileID:t.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),se=_.style.map.terrain.getTerrainData(u);Z.draw(b,w.TRIANGLES,Ot.disabled,k,E,Zt.disabled,ya(t,_.transform.zoom,n.paint.get("heatmap-intensity"),1),se,Q,n.id,z.layoutVertexBuffer,z.indexBuffer,z.segments,n.paint,_.transform.zoom,j)}function Zr(_,t,n,u,m){let b=_.context,w=b.gl,k=_.transform;b.setColorMode(_.colorModeForRenderPass());let E=cl(b,t),z=n.key,O=t.heatmapFbos.get(z);if(!O)return;b.activeTexture.set(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,O.colorAttachment.get()),b.activeTexture.set(w.TEXTURE1),E.bind(w.LINEAR,w.CLAMP_TO_EDGE);let N=k.getProjectionData({overscaledTileID:n,applyTerrainMatrix:m,applyGlobeMatrix:!u});_.useProgram("heatmapTexture").draw(b,w.TRIANGLES,Ot.disabled,ei.disabled,_.colorModeForRenderPass(),Zt.disabled,Ac(_,t,0,1),null,N,t.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments,t.paint,k.zoom),O.destroy(),t.heatmapFbos.delete(z)}function ra(_,t,n){var u,m;let b=_.gl,w=b.createTexture();b.bindTexture(b.TEXTURE_2D,w),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);let k=(u=_.HALF_FLOAT)!==null&&u!==void 0?u:b.UNSIGNED_BYTE,E=(m=_.RGBA16F)!==null&&m!==void 0?m:b.RGBA;b.texImage2D(b.TEXTURE_2D,0,E,t,n,0,b.RGBA,k,null);let z=_.createFramebuffer(t,n,!1,!1);return z.colorAttachment.set(w),z}function cl(_,t){return t.colorRampTexture||(t.colorRampTexture=new a.T(_,t.colorRamp,_.gl.RGBA)),t.colorRampTexture}function qc(_,t,n,u,m,b,w,k){let E=256;if(m.stepInterpolant){let z=t.getSource().maxzoom,O=w.canonical.z===z?Math.ceil(1<<_.transform.maxZoom-w.canonical.z):1;E=a.ao(a.cf(b.maxLineLength/a.a5*1024*O),256,n.maxTextureSize)}return k.gradient=a.cg({expression:m.gradientExpression(),evaluationKey:"lineProgress",resolution:E,image:k.gradient||void 0,clips:b.lineClipsArray}),k.texture?k.texture.update(k.gradient):k.texture=new a.T(n,k.gradient,u.RGBA),k.version=m.gradientVersion,k.texture}function Vc(_,t,n,u,m){_.activeTexture.set(t.TEXTURE0),n.imageAtlasTexture.bind(t.LINEAR,t.CLAMP_TO_EDGE),u.updatePaintBuffers(m)}function Vi(_,t,n,u,m,b){(m||_.lineAtlas.dirty)&&(t.activeTexture.set(n.TEXTURE0),_.lineAtlas.bind(t)),u.updatePaintBuffers(b)}function us(_,t,n,u,m,b,w){let k=b.gradients[m.id],E=k.texture;m.gradientVersion!==k.version&&(E=qc(_,t,n,u,m,b,w,k)),n.activeTexture.set(u.TEXTURE0),E.bind(m.stepInterpolant?u.NEAREST:u.LINEAR,u.CLAMP_TO_EDGE)}function yn(_,t,n,u,m,b,w,k,E){let z=b.gradients[m.id],O=z.texture;m.gradientVersion!==z.version&&(O=qc(_,t,n,u,m,b,w,z)),n.activeTexture.set(u.TEXTURE0),O.bind(m.stepInterpolant?u.NEAREST:u.LINEAR,u.CLAMP_TO_EDGE),n.activeTexture.set(u.TEXTURE1),_.lineAtlas.bind(n),k.updatePaintBuffers(E)}function Wi(_,t,n,u,m){if(!n||!u||!u.imageAtlas)return;let b=u.imageAtlas.patternPositions,w=b[n.to.toString()],k=b[n.from.toString()];if(!w&&k&&(w=k),!k&&w&&(k=w),!w||!k){let E=m.getPaintProperty(t);w=b[E],k=b[E]}w&&k&&_.setConstantPatternPositions(w,k)}function Fa(_,t,n,u,m,b,w,k){let E=_.context.gl,z="fill-pattern",O=n.paint.get(z),N=O&&O.constantOr(1),j=n.getCrossfadeParameters(),Z,Q,se,le,oe,ce=_.transform,me=n.paint.get("fill-translate"),de=n.paint.get("fill-translate-anchor");w?(Q=N&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Z=E.LINES):(Q=N?"fillPattern":"fill",Z=E.TRIANGLES);let ge=O.constantOr(null);for(let xe of u){let pe=t.getTile(xe);if(N&&!pe.patternsLoaded())continue;let Te=pe.getBucket(n);if(!Te)continue;let Re=Te.programConfigurations.get(n.id),ze=_.useProgram(Q,Re),De=_.style.map.terrain&&_.style.map.terrain.getTerrainData(xe);N&&(_.context.activeTexture.set(E.TEXTURE0),pe.imageAtlasTexture.bind(E.LINEAR,E.CLAMP_TO_EDGE),Re.updatePaintBuffers(j)),Wi(Re,z,ge,pe,n);let Fe=ce.getProjectionData({overscaledTileID:xe,applyGlobeMatrix:!k,applyTerrainMatrix:!0}),$e=a.aP(ce,pe,me,de);if(w){le=Te.indexBuffer2,oe=Te.segments2;let Ze=[E.drawingBufferWidth,E.drawingBufferHeight];se=Q==="fillOutlinePattern"&&N?Os(_,j,pe,Ze,$e):Pc(Ze,$e)}else le=Te.indexBuffer,oe=Te.segments,se=N?Oa(_,j,pe,$e):{u_fill_translate:$e};let Je=_.stencilModeForClipping(xe);ze.draw(_.context,Z,m,Je,b,Zt.backCCW,se,De,Fe,n.id,Te.layoutVertexBuffer,le,oe,n.paint,_.transform.zoom,Re)}}function ul(_,t,n,u,m,b,w,k){let E=_.context,z=E.gl,O="fill-extrusion-pattern",N=n.paint.get(O),j=N.constantOr(1),Z=n.getCrossfadeParameters(),Q=n.paint.get("fill-extrusion-opacity"),se=N.constantOr(null),le=_.transform;for(let oe of u){let ce=t.getTile(oe),me=ce.getBucket(n);if(!me)continue;let de=_.style.map.terrain&&_.style.map.terrain.getTerrainData(oe),ge=me.programConfigurations.get(n.id),xe=_.useProgram(j?"fillExtrusionPattern":"fillExtrusion",ge);j&&(_.context.activeTexture.set(z.TEXTURE0),ce.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),ge.updatePaintBuffers(Z));let pe=le.getProjectionData({overscaledTileID:oe,applyGlobeMatrix:!k,applyTerrainMatrix:!0});Wi(ge,O,se,ce,n);let Te=a.aP(le,ce,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),Re=n.paint.get("fill-extrusion-vertical-gradient"),ze=j?Wl(_,Re,Q,Te,oe,Z,ce):jn(_,Re,Q,Te);xe.draw(E,E.gl.TRIANGLES,m,b,w,Zt.backCCW,ze,de,pe,n.id,me.layoutVertexBuffer,me.indexBuffer,me.segments,n.paint,_.transform.zoom,ge,_.style.map.terrain&&me.centroidVertexBuffer)}}function ja(_,t,n,u,m,b,w,k,E){var z;let O=_.style.projection,N=_.context,j=_.transform,Z=N.gl,Q=[`#define NUM_ILLUMINATION_SOURCES ${n.paint.get("hillshade-highlight-color").values.length}`],se=_.useProgram("hillshade",null,!1,Q),le=!_.options.moving;for(let oe of u){let ce=t.getTile(oe),me=ce.fbo;if(!me)continue;let de=O.getMeshFromTileID(N,oe.canonical,k,!0,"raster"),ge=(z=_.style.map.terrain)===null||z===void 0?void 0:z.getTerrainData(oe);N.activeTexture.set(Z.TEXTURE0),Z.bindTexture(Z.TEXTURE_2D,me.colorAttachment.get());let xe=j.getProjectionData({overscaledTileID:oe,aligned:le,applyGlobeMatrix:!E,applyTerrainMatrix:!0});se.draw(N,Z.TRIANGLES,b,m[oe.overscaledZ],w,Zt.backCCW,Rs(_,ce,n),ge,xe,n.id,de.vertexBuffer,de.indexBuffer,de.segments)}}function xo(_,t,n,u,m,b,w,k,E){var z;let O=_.style.projection,N=_.context,j=_.transform,Z=N.gl,Q=_.useProgram("colorRelief"),se=!_.options.moving,le=!0,oe=0;for(let ce of u){let me=t.getTile(ce),de=me.dem;if(le){let ze=Z.getParameter(Z.MAX_TEXTURE_SIZE),{elevationTexture:De,colorTexture:Fe}=n.getColorRampTextures(N,ze,de.getUnpackVector());N.activeTexture.set(Z.TEXTURE1),De.bind(Z.NEAREST,Z.CLAMP_TO_EDGE),N.activeTexture.set(Z.TEXTURE4),Fe.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),le=!1,oe=De.size[0]}if(!de||!de.data)continue;let ge=de.stride,xe=de.getPixels();if(N.activeTexture.set(Z.TEXTURE0),N.pixelStoreUnpackPremultiplyAlpha.set(!1),me.demTexture=me.demTexture||_.getTileTexture(ge),me.demTexture){let ze=me.demTexture;ze.update(xe,{premultiply:!1}),ze.bind(Z.LINEAR,Z.CLAMP_TO_EDGE)}else me.demTexture=new a.T(N,xe,Z.RGBA,{premultiply:!1}),me.demTexture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE);let pe=O.getMeshFromTileID(N,ce.canonical,k,!0,"raster"),Te=(z=_.style.map.terrain)===null||z===void 0?void 0:z.getTerrainData(ce),Re=j.getProjectionData({overscaledTileID:ce,aligned:se,applyGlobeMatrix:!E,applyTerrainMatrix:!0});Q.draw(N,Z.TRIANGLES,b,m[ce.overscaledZ],w,Zt.backCCW,Mc(n,me.dem,oe),Te,Re,n.id,pe.vertexBuffer,pe.indexBuffer,pe.segments)}}let xa=[new a.P(0,0),new a.P(a.a5,0),new a.P(a.a5,a.a5),new a.P(0,a.a5)];function ds(_,t,n,u,m,b,w,k,E=!1,z=!1){let O=u[u.length-1].overscaledZ,N=_.context,j=N.gl,Z=_.useProgram("raster"),Q=_.transform,se=_.style.projection,le=_.colorModeForRenderPass(),oe=!_.options.moving,ce=n.paint.get("raster-opacity"),me=n.paint.get("raster-resampling"),de=n.paint.get("raster-fade-duration"),ge=!!_.style.map.terrain;for(let xe of u){let pe=_.getDepthModeForSublayer(xe.overscaledZ-O,ce===1?Ot.ReadWrite:Ot.ReadOnly,j.LESS),Te=t.getTile(xe),Re=me==="nearest"?j.NEAREST:j.LINEAR;N.activeTexture.set(j.TEXTURE0),Te.texture.bind(Re,j.CLAMP_TO_EDGE,j.LINEAR_MIPMAP_NEAREST),N.activeTexture.set(j.TEXTURE1);let{parentTile:ze,parentScaleBy:De,parentTopLeft:Fe,fadeValues:$e}=Wc(Te,t,de,ge);Te.fadeOpacity=$e.tileOpacity,ze?(ze.fadeOpacity=$e.parentTileOpacity,ze.texture.bind(Re,j.CLAMP_TO_EDGE,j.LINEAR_MIPMAP_NEAREST)):Te.texture.bind(Re,j.CLAMP_TO_EDGE,j.LINEAR_MIPMAP_NEAREST),Te.texture.useMipmap&&N.extTextureFilterAnisotropic&&_.transform.pitch>20&&j.texParameterf(j.TEXTURE_2D,N.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,N.extTextureFilterAnisotropicMax);let Je=_.style.map.terrain&&_.style.map.terrain.getTerrainData(xe),Ze=Q.getProjectionData({overscaledTileID:xe,aligned:oe,applyGlobeMatrix:!z,applyTerrainMatrix:!0}),ht=_o(Fe,De,$e.fadeMix,n,k),Lt=se.getMeshFromTileID(N,xe.canonical,b,w,"raster");Z.draw(N,j.TRIANGLES,pe,m?m[xe.overscaledZ]:ei.disabled,le,E?Zt.frontCCW:Zt.backCCW,ht,Je,Ze,n.id,Lt.vertexBuffer,Lt.indexBuffer,Lt.segments)}}function Wc(_,t,n,u){let m={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(n===0||u)return m;if(_.fadingParentID){let b=t.getLoadedTile(_.fadingParentID);if(!b)return m;let w=Math.pow(2,b.tileID.overscaledZ-_.tileID.overscaledZ),k=[_.tileID.canonical.x*w%1,_.tileID.canonical.y*w%1],E=(function(z,O,N){let j=te(),Z=(j-O.timeAdded)/N,Q=z.fadingDirection===Oe.Incoming,se=a.ao((j-z.timeAdded)/N,0,1),le=a.ao(1-Z,0,1),oe=Q?se:le;return{tileOpacity:oe,parentTileOpacity:Q?le:se,fadeMix:{opacity:1,mix:1-oe}}})(_,b,n);return{parentTile:b,parentScaleBy:w,parentTopLeft:k,fadeValues:E}}if(_.selfFading){let b=(function(w,k){let E=(te()-w.timeAdded)/k,z=a.ao(E,0,1);return{tileOpacity:z,fadeMix:{opacity:z,mix:0}}})(_,n);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:b}}return m}let Mh=new a.bq(1,0,0,1),Ih=new a.bq(0,1,0,1),zh=new a.bq(0,0,1,1),Lh=new a.bq(1,0,1,1),wo=new a.bq(0,1,1,1);function td(_,t,n,u){Zl(_,0,t+n/2,_.transform.width,n,u)}function id(_,t,n,u){Zl(_,t-n/2,0,n,_.transform.height,u)}function Zl(_,t,n,u,m,b){let w=_.context,k=w.gl;k.enable(k.SCISSOR_TEST),k.scissor(t*_.pixelRatio,n*_.pixelRatio,u*_.pixelRatio,m*_.pixelRatio),w.clear({color:b}),k.disable(k.SCISSOR_TEST)}function Dh(_,t,n){let u=_.context,m=u.gl,b=_.useProgram("debug"),w=Ot.disabled,k=ei.disabled,E=_.colorModeForRenderPass(),z="$debug",O=_.style.map.terrain&&_.style.map.terrain.getTerrainData(n);u.activeTexture.set(m.TEXTURE0);let N=t.getTileByID(n.key).latestRawTileData,j=Math.floor((N&&N.byteLength||0)/1024),Z=t.getTile(n).tileSize,Q=512/Math.min(Z,512)*(n.overscaledZ/_.transform.zoom)*.5,se=n.canonical.toString();n.overscaledZ!==n.canonical.z&&(se+=` => ${n.overscaledZ}`),(function(oe,ce){oe.initDebugOverlayCanvas();let me=oe.debugOverlayCanvas,de=oe.context.gl,ge=oe.debugOverlayCanvas.getContext("2d");ge.clearRect(0,0,me.width,me.height),ge.shadowColor="white",ge.shadowBlur=2,ge.lineWidth=1.5,ge.strokeStyle="white",ge.textBaseline="top",ge.font="bold 36px Open Sans, sans-serif",ge.fillText(ce,5,5),ge.strokeText(ce,5,5),oe.debugOverlayTexture.update(me),oe.debugOverlayTexture.bind(de.LINEAR,de.CLAMP_TO_EDGE)})(_,`${se} ${j}kB`);let le=_.transform.getProjectionData({overscaledTileID:n,applyGlobeMatrix:!0,applyTerrainMatrix:!0});b.draw(u,m.TRIANGLES,w,k,Pi.alphaBlended,Zt.disabled,ta(a.bq.transparent,Q),null,le,z,_.debugBuffer,_.quadTriangleIndexBuffer,_.debugSegments),b.draw(u,m.LINE_STRIP,w,k,E,Zt.disabled,ta(a.bq.red),O,le,z,_.debugBuffer,_.tileBorderIndexBuffer,_.debugSegments)}function rd(_,t,n,u){let{isRenderingGlobe:m}=u,b=_.context,w=b.gl,k=_.transform,E=_.colorModeForRenderPass(),z=_.getDepthModeFor3D(),O=_.useProgram("terrain");b.bindFramebuffer.set(null),b.viewport.set([0,0,_.width,_.height]);for(let N of n){let j=t.getTerrainMesh(N.tileID),Z=_.renderToTexture.getTexture(N),Q=t.getTerrainData(N.tileID);b.activeTexture.set(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,Z.texture);let se=t.getMeshFrameDelta(k.zoom),le=k.calculateFogMatrix(N.tileID.toUnwrapped()),oe=Cc(se,le,_.style.sky,k.pitch,m),ce=k.getProjectionData({overscaledTileID:N.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});O.draw(b,w.TRIANGLES,z,ei.disabled,E,Zt.backCCW,oe,Q,ce,"terrain",j.vertexBuffer,j.indexBuffer,j.segments)}}function nd(_,t){if(!t.mesh){let n=new a.aX;n.emplaceBack(-1,-1),n.emplaceBack(1,-1),n.emplaceBack(1,1),n.emplaceBack(-1,1);let u=new a.aZ;u.emplaceBack(0,1,2),u.emplaceBack(0,2,3),t.mesh=new xi(_.createVertexBuffer(n,Qn.members),_.createIndexBuffer(u),a.aY.simpleSegment(0,0,n.length,u.length))}return t.mesh}class Oh{constructor(t,n){this.context=new ie(t),this.transform=n,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.as(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=dn.maxOverzooming+dn.maxUnderzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Jr}resize(t,n,u){if(this.width=Math.floor(t*u),this.height=Math.floor(n*u),this.pixelRatio=u,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(let m of this.style._order)this.style._layers[m].resize()}setup(){let t=this.context,n=new a.aX;n.emplaceBack(0,0),n.emplaceBack(a.a5,0),n.emplaceBack(0,a.a5),n.emplaceBack(a.a5,a.a5),this.tileExtentBuffer=t.createVertexBuffer(n,Qn.members),this.tileExtentSegments=a.aY.simpleSegment(0,0,4,2);let u=new a.aX;u.emplaceBack(0,0),u.emplaceBack(a.a5,0),u.emplaceBack(0,a.a5),u.emplaceBack(a.a5,a.a5),this.debugBuffer=t.createVertexBuffer(u,Qn.members),this.debugSegments=a.aY.simpleSegment(0,0,4,5);let m=new a.ci;m.emplaceBack(0,0,0,0),m.emplaceBack(a.a5,0,a.a5,0),m.emplaceBack(0,a.a5,0,a.a5),m.emplaceBack(a.a5,a.a5,a.a5,a.a5),this.rasterBoundsBuffer=t.createVertexBuffer(m,Ku.members),this.rasterBoundsSegments=a.aY.simpleSegment(0,0,4,2);let b=new a.aX;b.emplaceBack(0,0),b.emplaceBack(a.a5,0),b.emplaceBack(0,a.a5),b.emplaceBack(a.a5,a.a5),this.rasterBoundsBufferPosOnly=t.createVertexBuffer(b,Qn.members),this.rasterBoundsSegmentsPosOnly=a.aY.simpleSegment(0,0,4,5);let w=new a.aX;w.emplaceBack(0,0),w.emplaceBack(1,0),w.emplaceBack(0,1),w.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(w,Qn.members),this.viewportSegments=a.aY.simpleSegment(0,0,4,2);let k=new a.cj;k.emplaceBack(0),k.emplaceBack(1),k.emplaceBack(3),k.emplaceBack(2),k.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(k);let E=new a.aZ;E.emplaceBack(1,0,2),E.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(E);let z=this.context.gl;this.stencilClearMode=new ei({func:z.ALWAYS,mask:0},0,255,z.ZERO,z.ZERO,z.ZERO),this.tileExtentMesh=new xi(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){let t=this.context,n=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;let u=a.N();a.c8(u,0,this.width,this.height,0,0,1),a.Q(u,u,[n.drawingBufferWidth,n.drawingBufferHeight,0]);let m={mainMatrix:u,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:u};this.useProgram("clippingMask",null,!0).draw(t,n.TRIANGLES,Ot.disabled,this.stencilClearMode,Pi.disabled,Zt.disabled,null,null,m,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(t,n,u){if(this.currentStencilSource===t.source||!t.isTileClipped()||!n||!n.length)return;this.currentStencilSource=t.source,this.nextStencilID+n.length>256&&this.clearStencil();let m=this.context;m.setColorMode(Pi.disabled),m.setDepthMode(Ot.disabled);let b={};for(let w of n)b[w.key]=this.nextStencilID++;this._renderTileMasks(b,n,u,!0),this._renderTileMasks(b,n,u,!1),this._tileClippingMaskIDs=b}_renderTileMasks(t,n,u,m){let b=this.context,w=b.gl,k=this.style.projection,E=this.transform,z=this.useProgram("clippingMask");for(let O of n){let N=t[O.key],j=this.style.map.terrain&&this.style.map.terrain.getTerrainData(O),Z=k.getMeshFromTileID(this.context,O.canonical,m,!0,"stencil"),Q=E.getProjectionData({overscaledTileID:O,applyGlobeMatrix:!u,applyTerrainMatrix:!0});z.draw(b,w.TRIANGLES,Ot.disabled,new ei({func:w.ALWAYS,mask:0},N,255,w.KEEP,w.KEEP,w.REPLACE),Pi.disabled,u?Zt.disabled:Zt.backCCW,null,j,Q,"$clipping",Z.vertexBuffer,Z.indexBuffer,Z.segments)}}_renderTilesDepthBuffer(){let t=this.context,n=t.gl,u=this.style.projection,m=this.transform,b=this.useProgram("depth"),w=this.getDepthModeFor3D(),k=$i(m,{tileSize:m.tileSize});for(let E of k){let z=this.style.map.terrain&&this.style.map.terrain.getTerrainData(E),O=u.getMeshFromTileID(this.context,E.canonical,!0,!0,"raster"),N=m.getProjectionData({overscaledTileID:E,applyGlobeMatrix:!0,applyTerrainMatrix:!0});b.draw(t,n.TRIANGLES,w,ei.disabled,Pi.disabled,Zt.backCCW,null,z,N,"$clipping",O.vertexBuffer,O.indexBuffer,O.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();let t=this.nextStencilID++,n=this.context.gl;return new ei({func:n.NOTEQUAL,mask:255},t,255,n.KEEP,n.KEEP,n.REPLACE)}stencilModeForClipping(t){let n=this.context.gl;return new ei({func:n.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,n.KEEP,n.KEEP,n.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(t){let n=this.context.gl,u=t.sort(((w,k)=>k.overscaledZ-w.overscaledZ)),m=u[u.length-1].overscaledZ,b=u[0].overscaledZ-m+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();let w={};for(let k=0;k<b;k++)w[k+m]=new ei({func:n.GEQUAL,mask:255},k+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=b,[w,u]}return[{[m]:ei.disabled},u]}stencilConfigForOverlapTwoPass(t){let n=this.context.gl,u=t.sort(((w,k)=>k.overscaledZ-w.overscaledZ)),m=u[u.length-1].overscaledZ,b=u[0].overscaledZ-m+1;if(this.clearStencil(),b>1){let w={},k={};for(let E=0;E<b;E++)w[E+m]=new ei({func:n.GREATER,mask:255},b+1+E,255,n.KEEP,n.KEEP,n.REPLACE),k[E+m]=new ei({func:n.GREATER,mask:255},1+E,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID=2*b+1,[w,k,u]}return this.nextStencilID=3,[{[m]:new ei({func:n.GREATER,mask:255},2,255,n.KEEP,n.KEEP,n.REPLACE)},{[m]:new ei({func:n.GREATER,mask:255},1,255,n.KEEP,n.KEEP,n.REPLACE)},u]}colorModeForRenderPass(){let t=this.context.gl;return this._showOverdrawInspector?new Pi([t.CONSTANT_COLOR,t.ONE],new a.bq(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Pi.unblended:Pi.alphaBlended}getDepthModeForSublayer(t,n,u){if(!this.opaquePassEnabledForLayer())return Ot.disabled;let m=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new Ot(u||this.context.gl.LEQUAL,n,[m,m])}getDepthModeFor3D(){return new Ot(this.context.gl.LEQUAL,Ot.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,n){var u,m;this.style=t,this.options=n,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(te()),this.imageManager.beginFrame();let b=this.style._order,w=this.style.tileManagers,k={},E={},z={},O={isRenderingToTexture:!1,isRenderingGlobe:((u=t.projection)===null||u===void 0?void 0:u.transitionState)>0};for(let j in w){let Z=w[j];Z.used&&Z.prepare(this.context),k[j]=Z.getVisibleCoordinates(!1),E[j]=k[j].slice().reverse(),z[j]=Z.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let j=0;j<b.length;j++)if(this.style._layers[b[j]].is3D()){this.opaquePassCutoff=j;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(let j of b){let Z=this.style._layers[j];if(!Z.hasOffscreenPass()||Z.isHidden(this.transform.zoom))continue;let Q=E[Z.source];(Z.type==="custom"||Q.length)&&this.renderLayer(this,w[Z.source],Z,Q,O)}if((m=this.style.projection)===null||m===void 0||m.updateGPUdependent({context:this.context,useProgram:j=>this.useProgram(j)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?a.bq.black:a.bq.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(j,Z){let Q=j.context,se=Q.gl,le=((xe,pe,Te)=>{let Re=Math.cos(pe.rollInRadians),ze=Math.sin(pe.rollInRadians),De=fi(pe),Fe=pe.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:xe.properties.get("sky-color"),u_horizon_color:xe.properties.get("horizon-color"),u_horizon:[(pe.width/2-De*ze)*Te,(pe.height/2+De*Re)*Te],u_horizon_normal:[-ze,Re],u_sky_horizon_blend:xe.properties.get("sky-horizon-blend")*pe.height/2*Te,u_sky_blend:Fe}})(Z,j.style.map.transform,j.pixelRatio),oe=new Ot(se.LEQUAL,Ot.ReadWrite,[0,1]),ce=ei.disabled,me=j.colorModeForRenderPass(),de=j.useProgram("sky"),ge=nd(Q,Z);de.draw(Q,se.TRIANGLES,oe,ce,me,Zt.disabled,le,null,void 0,"sky",ge.vertexBuffer,ge.indexBuffer,ge.segments)})(this,this.style.sky),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=b.length-1;this.currentLayer>=0;this.currentLayer--){let j=this.style._layers[b[this.currentLayer]],Z=w[j.source],Q=k[j.source];this._renderTileClippingMasks(j,Q,!1),this.renderLayer(this,Z,j,Q,O)}this.renderPass="translucent";let N=!1;for(this.currentLayer=0;this.currentLayer<b.length;this.currentLayer++){let j=this.style._layers[b[this.currentLayer]],Z=w[j.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(j,O))continue;this.opaquePassEnabledForLayer()||N||(N=!0,O.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());let Q=(j.type==="symbol"?z:E)[j.source];this._renderTileClippingMasks(j,k[j.source],!!this.renderToTexture),this.renderLayer(this,Z,j,Q,O)}if(O.isRenderingGlobe&&(function(j,Z,Q){let se=j.context,le=se.gl,oe=j.useProgram("atmosphere"),ce=new Ot(le.LEQUAL,Ot.ReadOnly,[0,1]),me=j.transform,de=(function(Fe,$e){let Je=Fe.properties.get("position"),Ze=[-Je.x,-Je.y,-Je.z],ht=a.as(new Float64Array(16));return Fe.properties.get("anchor")==="map"&&(a.bh(ht,ht,$e.rollInRadians),a.bi(ht,ht,-$e.pitchInRadians),a.bh(ht,ht,$e.bearingInRadians),a.bi(ht,ht,$e.center.lat*Math.PI/180),a.bK(ht,ht,-$e.center.lng*Math.PI/180)),a.ch(Ze,Ze,ht),Ze})(Q,j.transform),ge=me.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),xe=Z.properties.get("atmosphere-blend")*ge.projectionTransition;if(xe===0)return;let pe=pa(me.worldSize,me.center.lat),Te=me.inverseProjectionMatrix,Re=new Float64Array(4);Re[3]=1,a.aI(Re,Re,me.modelViewProjectionMatrix),Re[0]/=Re[3],Re[1]/=Re[3],Re[2]/=Re[3],Re[3]=1,a.aI(Re,Re,Te),Re[0]/=Re[3],Re[1]/=Re[3],Re[2]/=Re[3],Re[3]=1;let ze=((Fe,$e,Je,Ze,ht)=>({u_sun_pos:Fe,u_atmosphere_blend:$e,u_globe_position:Je,u_globe_radius:Ze,u_inv_proj_matrix:ht}))(de,xe,[Re[0],Re[1],Re[2]],pe,Te),De=nd(se,Z);oe.draw(se,le.TRIANGLES,ce,ei.disabled,Pi.alphaBlended,Zt.disabled,ze,null,null,"atmosphere",De.vertexBuffer,De.indexBuffer,De.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){let j=(function(Z,Q){let se=null,le=Object.values(Z._layers).flatMap((de=>de.source&&!de.isHidden(Q)?[Z.tileManagers[de.source]]:[])),oe=le.filter((de=>de.getSource().type==="vector")),ce=le.filter((de=>de.getSource().type!=="vector")),me=de=>{(!se||se.getSource().maxzoom<de.getSource().maxzoom)&&(se=de)};return oe.forEach((de=>me(de))),se||ce.forEach((de=>me(de))),se})(this.style,this.transform.zoom);j&&(function(Z,Q,se){for(let le=0;le<se.length;le++)Dh(Z,Q,se[le])})(this,j,j.getVisibleCoordinates())}this.options.showPadding&&(function(j){let Z=j.transform.padding;td(j,j.transform.height-(Z.top||0),3,Mh),td(j,Z.bottom||0,3,Ih),id(j,Z.left||0,3,zh),id(j,j.transform.width-(Z.right||0),3,Lh);let Q=j.transform.centerPoint;(function(se,le,oe,ce){Zl(se,le-1,oe-10,2,20,ce),Zl(se,le-10,oe-1,20,2,ce)})(j,Q.x,j.transform.height-Q.y,wo)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(t){if(!this.style||!this.style.map||!this.style.map.terrain)return;let n=this.terrainFacilitator.matrix,u=this.transform.modelViewProjectionMatrix,m=this.terrainFacilitator.dirty;m||(m=t?!a.ck(n,u):!a.cl(n,u)),m||(m=this.style.map.terrain.tileManager.anyTilesAfterTime(this.terrainFacilitator.renderTime)),m&&(a.cm(n,u),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(b,w){let k=b.context,E=k.gl,z=b.transform,O=Pi.unblended,N=new Ot(E.LEQUAL,Ot.ReadWrite,[0,1]),j=w.tileManager.getRenderableTiles(),Z=b.useProgram("terrainDepth");k.bindFramebuffer.set(w.getFramebuffer("depth").framebuffer),k.viewport.set([0,0,b.width/devicePixelRatio,b.height/devicePixelRatio]),k.clear({color:a.bq.transparent,depth:1});for(let Q of j){let se=w.getTerrainMesh(Q.tileID),le=w.getTerrainData(Q.tileID),oe=z.getProjectionData({overscaledTileID:Q.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),ce={u_ele_delta:w.getMeshFrameDelta(z.zoom)};Z.draw(k,E.TRIANGLES,N,ei.disabled,O,Zt.backCCW,ce,le,oe,"terrain",se.vertexBuffer,se.indexBuffer,se.segments)}k.bindFramebuffer.set(null),k.viewport.set([0,0,b.width,b.height])})(this,this.style.map.terrain),(function(b,w){let k=b.context,E=k.gl,z=b.transform,O=Pi.unblended,N=new Ot(E.LEQUAL,Ot.ReadWrite,[0,1]),j=w.getCoordsTexture(),Z=w.tileManager.getRenderableTiles(),Q=b.useProgram("terrainCoords");k.bindFramebuffer.set(w.getFramebuffer("coords").framebuffer),k.viewport.set([0,0,b.width/devicePixelRatio,b.height/devicePixelRatio]),k.clear({color:a.bq.transparent,depth:1}),w.coordsIndex=[];for(let se of Z){let le=w.getTerrainMesh(se.tileID),oe=w.getTerrainData(se.tileID);k.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,j.texture);let ce={u_terrain_coords_id:(255-w.coordsIndex.length)/255,u_texture:0,u_ele_delta:w.getMeshFrameDelta(z.zoom)},me=z.getProjectionData({overscaledTileID:se.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});Q.draw(k,E.TRIANGLES,N,ei.disabled,O,Zt.backCCW,ce,oe,me,"terrain",le.vertexBuffer,le.indexBuffer,le.segments),w.coordsIndex.push(se.tileID.key)}k.bindFramebuffer.set(null),k.viewport.set([0,0,b.width,b.height])})(this,this.style.map.terrain))}renderLayer(t,n,u,m,b){u.isHidden(this.transform.zoom)||(u.type==="background"||u.type==="custom"||(m||[]).length)&&(this.id=u.id,a.cn(u)?(function(w,k,E,z,O,N){if(w.renderPass!=="translucent")return;let{isRenderingToTexture:j}=N,Z=ei.disabled,Q=w.colorModeForRenderPass();(E._unevaluatedLayout.hasValue("text-variable-anchor")||E._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(se,le,oe,ce,me,de,ge,xe,pe){let Te=le.transform,Re=le.style.map.terrain,ze=me==="map",De=de==="map";for(let Fe of se){let $e=ce.getTile(Fe),Je=$e.getBucket(oe);if(!Je||!Je.text||!Je.text.segments.get().length)continue;let Ze=a.az(Je.textSizeData,Te.zoom),ht=a.aO($e,1,le.transform.zoom),Lt=Qr(ze,le.transform,ht),yi=oe.layout.get("icon-text-fit")!=="none"&&Je.hasIconData();if(Ze){let Ri=Math.pow(2,Te.zoom-$e.tileID.overscaledZ),wi=Re?(Gi,Di)=>Re.getElevation(Fe,Gi,Di):null;It(Je,ze,De,pe,Te,Lt,Ri,Ze,yi,a.aP(Te,$e,ge,xe),Fe.toUnwrapped(),wi)}}})(z,w,E,k,E.layout.get("text-rotation-alignment"),E.layout.get("text-pitch-alignment"),E.paint.get("text-translate"),E.paint.get("text-translate-anchor"),O),E.paint.get("icon-opacity").constantOr(1)!==0&&fr(w,k,E,z,!1,E.paint.get("icon-translate"),E.paint.get("icon-translate-anchor"),E.layout.get("icon-rotation-alignment"),E.layout.get("icon-pitch-alignment"),E.layout.get("icon-keep-upright"),Z,Q,j),E.paint.get("text-opacity").constantOr(1)!==0&&fr(w,k,E,z,!0,E.paint.get("text-translate"),E.paint.get("text-translate-anchor"),E.layout.get("text-rotation-alignment"),E.layout.get("text-pitch-alignment"),E.layout.get("text-keep-upright"),Z,Q,j),k.map.showCollisionBoxes&&(Me(w,k,E,z,!0),Me(w,k,E,z,!1))})(t,n,u,m,this.style.placement.variableOffsets,b):a.co(u)?(function(w,k,E,z,O){if(w.renderPass!=="translucent")return;let{isRenderingToTexture:N}=O,j=E.paint.get("circle-opacity"),Z=E.paint.get("circle-stroke-width"),Q=E.paint.get("circle-stroke-opacity"),se=!E.layout.get("circle-sort-key").isConstant();if(j.constantOr(1)===0&&(Z.constantOr(1)===0||Q.constantOr(1)===0))return;let le=w.context,oe=le.gl,ce=w.transform,me=w.getDepthModeForSublayer(0,Ot.ReadOnly),de=ei.disabled,ge=w.colorModeForRenderPass(),xe=[],pe=ce.getCircleRadiusCorrection();for(let Te=0;Te<z.length;Te++){let Re=z[Te],ze=k.getTile(Re),De=ze.getBucket(E);if(!De)continue;let Fe=E.paint.get("circle-translate"),$e=E.paint.get("circle-translate-anchor"),Je=a.aP(ce,ze,Fe,$e),Ze=De.programConfigurations.get(E.id),ht=w.useProgram("circle",Ze),Lt=De.layoutVertexBuffer,yi=De.indexBuffer,Ri=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Re),wi={programConfiguration:Ze,program:ht,layoutVertexBuffer:Lt,indexBuffer:yi,uniformValues:Gl(w,ze,E,Je,pe),terrainData:Ri,projectionData:ce.getProjectionData({overscaledTileID:Re,applyGlobeMatrix:!N,applyTerrainMatrix:!0})};if(se){let Gi=De.segments.get();for(let Di of Gi)xe.push({segments:new a.aY([Di]),sortKey:Di.sortKey,state:wi})}else xe.push({segments:De.segments,sortKey:0,state:wi})}se&&xe.sort(((Te,Re)=>Te.sortKey-Re.sortKey));for(let Te of xe){let{programConfiguration:Re,program:ze,layoutVertexBuffer:De,indexBuffer:Fe,uniformValues:$e,terrainData:Je,projectionData:Ze}=Te.state;ze.draw(le,oe.TRIANGLES,me,de,ge,Zt.backCCW,$e,Je,Ze,E.id,De,Fe,Te.segments,E.paint,w.transform.zoom,Re)}})(t,n,u,m,b):a.cp(u)?(function(w,k,E,z,O){if(E.paint.get("heatmap-opacity")===0)return;let N=w.context,{isRenderingToTexture:j,isRenderingGlobe:Z}=O;if(w.style.map.terrain){for(let Q of z){let se=k.getTile(Q);k.hasRenderableParent(Q)||(w.renderPass==="offscreen"?gn(w,se,E,Q,Z):w.renderPass==="translucent"&&Zr(w,E,Q,j,Z))}N.viewport.set([0,0,w.width,w.height])}else w.renderPass==="offscreen"?(function(Q,se,le,oe){let ce=Q.context,me=ce.gl,de=Q.transform,ge=ei.disabled,xe=new Pi([me.ONE,me.ONE],a.bq.transparent,[!0,!0,!0,!0]);(function(pe,Te,Re){let ze=pe.gl;pe.activeTexture.set(ze.TEXTURE1),pe.viewport.set([0,0,Te.width/4,Te.height/4]);let De=Re.heatmapFbos.get(a.ce);De?(ze.bindTexture(ze.TEXTURE_2D,De.colorAttachment.get()),pe.bindFramebuffer.set(De.framebuffer)):(De=ra(pe,Te.width/4,Te.height/4),Re.heatmapFbos.set(a.ce,De))})(ce,Q,le),ce.clear({color:a.bq.transparent});for(let pe=0;pe<oe.length;pe++){let Te=oe[pe];if(se.hasRenderableParent(Te))continue;let Re=se.getTile(Te),ze=Re.getBucket(le);if(!ze)continue;let De=ze.programConfigurations.get(le.id),Fe=Q.useProgram("heatmap",De),$e=de.getProjectionData({overscaledTileID:Te,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Je=de.getCircleRadiusCorrection();Fe.draw(ce,me.TRIANGLES,Ot.disabled,ge,xe,Zt.backCCW,ya(Re,de.zoom,le.paint.get("heatmap-intensity"),Je),null,$e,le.id,ze.layoutVertexBuffer,ze.indexBuffer,ze.segments,le.paint,de.zoom,De)}ce.viewport.set([0,0,Q.width,Q.height])})(w,k,E,z):w.renderPass==="translucent"&&(function(Q,se){let le=Q.context,oe=le.gl;le.setColorMode(Q.colorModeForRenderPass());let ce=se.heatmapFbos.get(a.ce);ce&&(le.activeTexture.set(oe.TEXTURE0),oe.bindTexture(oe.TEXTURE_2D,ce.colorAttachment.get()),le.activeTexture.set(oe.TEXTURE1),cl(le,se).bind(oe.LINEAR,oe.CLAMP_TO_EDGE),Q.useProgram("heatmapTexture").draw(le,oe.TRIANGLES,Ot.disabled,ei.disabled,Q.colorModeForRenderPass(),Zt.disabled,Ac(Q,se,0,1),null,null,se.id,Q.viewportBuffer,Q.quadTriangleIndexBuffer,Q.viewportSegments,se.paint,Q.transform.zoom))})(w,E)})(t,n,u,m,b):a.cq(u)?(function(w,k,E,z,O){if(w.renderPass!=="translucent")return;let{isRenderingToTexture:N}=O,j=E.paint.get("line-opacity"),Z=E.paint.get("line-width");if(j.constantOr(1)===0||Z.constantOr(1)===0)return;let Q=w.getDepthModeForSublayer(0,Ot.ReadOnly),se=w.colorModeForRenderPass(),le=E.paint.get("line-dasharray"),oe=le.constantOr(1),ce=E.paint.get("line-pattern"),me=ce.constantOr(1),de=E.paint.get("line-gradient"),ge=E.getCrossfadeParameters(),xe;xe=me?"linePattern":oe&&de?"lineGradientSDF":oe?"lineSDF":de?"lineGradient":"line";let pe=w.context,Te=pe.gl,Re=w.transform,ze=!0;for(let De of z){let Fe=k.getTile(De);if(me&&!Fe.patternsLoaded())continue;let $e=Fe.getBucket(E);if(!$e)continue;let Je=$e.programConfigurations.get(E.id),Ze=w.context.program.get(),ht=w.useProgram(xe,Je),Lt=ze||ht.program!==Ze,yi=w.style.map.terrain&&w.style.map.terrain.getTerrainData(De),Ri=ce.constantOr(null),wi=le&&le.constantOr(null);if(Ri&&Fe.imageAtlas){let yr=Fe.imageAtlas,ur=yr.patternPositions[Ri.to.toString()],dr=yr.patternPositions[Ri.from.toString()];ur&&dr&&Je.setConstantPatternPositions(ur,dr)}else if(wi){let yr=E.layout.get("line-cap")==="round",ur=w.lineAtlas.getDash(wi.to,yr),dr=w.lineAtlas.getDash(wi.from,yr);Je.setConstantDashPositions(ur,dr)}let Gi=Re.getProjectionData({overscaledTileID:De,applyGlobeMatrix:!N,applyTerrainMatrix:!0}),Di=Re.getPixelScale(),kr;me?(kr=Nn(w,Fe,E,Di,ge),Vc(pe,Te,Fe,Je,ge)):oe&&de?(kr=yo(w,Fe,E,Di,ge,$e.lineClipsArray.length),yn(w,k,pe,Te,E,$e,De,Je,ge)):oe?(kr=go(w,Fe,E,Di,ge),Vi(w,pe,Te,Je,Lt,ge)):de?(kr=Ic(w,Fe,E,Di,$e.lineClipsArray.length),us(w,k,pe,Te,E,$e,De)):kr=ia(w,Fe,E,Di);let ji=w.stencilModeForClipping(De);ht.draw(pe,Te.TRIANGLES,Q,ji,se,Zt.disabled,kr,yi,Gi,E.id,$e.layoutVertexBuffer,$e.indexBuffer,$e.segments,E.paint,w.transform.zoom,Je,$e.layoutVertexBuffer2),ze=!1}})(t,n,u,m,b):a.cr(u)?(function(w,k,E,z,O){let N=E.paint.get("fill-color"),j=E.paint.get("fill-opacity");if(j.constantOr(1)===0)return;let{isRenderingToTexture:Z}=O,Q=w.colorModeForRenderPass(),se=E.paint.get("fill-pattern"),le=w.opaquePassEnabledForLayer()&&!se.constantOr(1)&&N.constantOr(a.bq.transparent).a===1&&j.constantOr(0)===1?"opaque":"translucent";if(w.renderPass===le){let oe=w.getDepthModeForSublayer(1,w.renderPass==="opaque"?Ot.ReadWrite:Ot.ReadOnly);Fa(w,k,E,z,oe,Q,!1,Z)}if(w.renderPass==="translucent"&&E.paint.get("fill-antialias")){let oe=w.getDepthModeForSublayer(E.getPaintProperty("fill-outline-color")?2:0,Ot.ReadOnly);Fa(w,k,E,z,oe,Q,!0,Z)}})(t,n,u,m,b):a.cs(u)?(function(w,k,E,z,O){let N=E.paint.get("fill-extrusion-opacity");if(N===0)return;let{isRenderingToTexture:j}=O;if(w.renderPass==="translucent"){let Z=new Ot(w.context.gl.LEQUAL,Ot.ReadWrite,w.depthRangeFor3D);if(N!==1||E.paint.get("fill-extrusion-pattern").constantOr(1))ul(w,k,E,z,Z,ei.disabled,Pi.disabled,j),ul(w,k,E,z,Z,w.stencilModeFor3D(),w.colorModeForRenderPass(),j);else{let Q=w.colorModeForRenderPass();ul(w,k,E,z,Z,ei.disabled,Q,j)}}})(t,n,u,m,b):a.ct(u)?(function(w,k,E,z,O){if(w.renderPass!=="offscreen"&&w.renderPass!=="translucent")return;let{isRenderingToTexture:N}=O,j=w.context,Z=w.style.projection.useSubdivision,Q=w.getDepthModeForSublayer(0,Ot.ReadOnly),se=w.colorModeForRenderPass();if(w.renderPass==="offscreen")(function(le,oe,ce,me,de,ge,xe){let pe=le.context,Te=pe.gl;for(let Re of ce){let ze=oe.getTile(Re),De=ze.dem;if(!De||!De.data||!ze.needsHillshadePrepare)continue;let Fe=De.dim,$e=De.stride,Je=De.getPixels();if(pe.activeTexture.set(Te.TEXTURE1),pe.pixelStoreUnpackPremultiplyAlpha.set(!1),ze.demTexture=ze.demTexture||le.getTileTexture($e),ze.demTexture){let ht=ze.demTexture;ht.update(Je,{premultiply:!1}),ht.bind(Te.NEAREST,Te.CLAMP_TO_EDGE)}else ze.demTexture=new a.T(pe,Je,Te.RGBA,{premultiply:!1}),ze.demTexture.bind(Te.NEAREST,Te.CLAMP_TO_EDGE);pe.activeTexture.set(Te.TEXTURE0);let Ze=ze.fbo;if(!Ze){let ht=new a.T(pe,{width:Fe,height:Fe,data:null},Te.RGBA);ht.bind(Te.LINEAR,Te.CLAMP_TO_EDGE),Ze=ze.fbo=pe.createFramebuffer(Fe,Fe,!0,!1),Ze.colorAttachment.set(ht.texture)}pe.bindFramebuffer.set(Ze.framebuffer),pe.viewport.set([0,0,Fe,Fe]),le.useProgram("hillshadePrepare").draw(pe,Te.TRIANGLES,de,ge,xe,Zt.disabled,Qu(ze.tileID,De),null,null,me.id,le.rasterBoundsBuffer,le.quadTriangleIndexBuffer,le.rasterBoundsSegments),ze.needsHillshadePrepare=!1}})(w,k,z,E,Q,ei.disabled,se),j.viewport.set([0,0,w.width,w.height]);else if(w.renderPass==="translucent")if(Z){let[le,oe,ce]=w.stencilConfigForOverlapTwoPass(z);ja(w,k,E,ce,le,Q,se,!1,N),ja(w,k,E,ce,oe,Q,se,!0,N)}else{let[le,oe]=w.getStencilConfigForOverlapAndUpdateStencilID(z);ja(w,k,E,oe,le,Q,se,!1,N)}})(t,n,u,m,b):a.cu(u)?(function(w,k,E,z,O){if(w.renderPass!=="translucent"||!z.length)return;let{isRenderingToTexture:N}=O,j=w.style.projection.useSubdivision,Z=w.getDepthModeForSublayer(0,Ot.ReadOnly),Q=w.colorModeForRenderPass();if(j){let[se,le,oe]=w.stencilConfigForOverlapTwoPass(z);xo(w,k,E,oe,se,Z,Q,!1,N),xo(w,k,E,oe,le,Z,Q,!0,N)}else{let[se,le]=w.getStencilConfigForOverlapAndUpdateStencilID(z);xo(w,k,E,le,se,Z,Q,!1,N)}})(t,n,u,m,b):a.bV(u)?(function(w,k,E,z,O){if(w.renderPass!=="translucent"||E.paint.get("raster-opacity")===0||!z.length)return;let{isRenderingToTexture:N}=O,j=k.getSource(),Z=w.style.projection.useSubdivision;if(j instanceof Xr)ds(w,k,E,z,null,!1,!1,j.tileCoords,j.flippedWindingOrder,N);else if(Z){let[Q,se,le]=w.stencilConfigForOverlapTwoPass(z);ds(w,k,E,le,Q,!1,!0,xa,!1,N),ds(w,k,E,le,se,!0,!0,xa,!1,N)}else{let[Q,se]=w.getStencilConfigForOverlapAndUpdateStencilID(z);ds(w,k,E,se,Q,!1,!0,xa,!1,N)}})(t,n,u,m,b):a.cv(u)?(function(w,k,E,z,O){let N=E.paint.get("background-color"),j=E.paint.get("background-opacity");if(j===0)return;let{isRenderingToTexture:Z}=O,Q=w.context,se=Q.gl,le=w.style.projection,oe=w.transform,ce=oe.tileSize,me=E.paint.get("background-pattern");if(w.isPatternMissing(me))return;let de=!me&&N.a===1&&j===1&&w.opaquePassEnabledForLayer()?"opaque":"translucent";if(w.renderPass!==de)return;let ge=ei.disabled,xe=w.getDepthModeForSublayer(0,de==="opaque"?Ot.ReadWrite:Ot.ReadOnly),pe=w.colorModeForRenderPass(),Te=w.useProgram(me?"backgroundPattern":"background"),Re=z||$i(oe,{tileSize:ce,terrain:w.style.map.terrain});me&&(Q.activeTexture.set(se.TEXTURE0),w.imageManager.bind(w.context));let ze=E.getCrossfadeParameters();for(let De of Re){let Fe=oe.getProjectionData({overscaledTileID:De,applyGlobeMatrix:!Z,applyTerrainMatrix:!0}),$e=me?Ju(j,w,me,{tileID:De,tileSize:ce},ze):il(j,N),Je=w.style.map.terrain&&w.style.map.terrain.getTerrainData(De),Ze=le.getMeshFromTileID(Q,De.canonical,!1,!0,"raster");Te.draw(Q,se.TRIANGLES,xe,ge,pe,Zt.backCCW,$e,Je,Fe,E.id,Ze.vertexBuffer,Ze.indexBuffer,Ze.segments)}})(t,0,u,m,b):a.cw(u)&&(function(w,k,E,z){let{isRenderingGlobe:O}=z,N=w.context,j=E.implementation,Z=w.style.projection,Q=w.transform,se=Q.getProjectionDataForCustomLayer(O),le={farZ:Q.farZ,nearZ:Q.nearZ,fov:Q.fov*Math.PI/180,modelViewProjectionMatrix:Q.modelViewProjectionMatrix,projectionMatrix:Q.projectionMatrix,shaderData:{variantName:Z.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${Z.shaderPreludeCode.vertexSource}`,define:Z.shaderDefine},defaultProjectionData:se},oe=j.renderingMode?j.renderingMode:"2d";if(w.renderPass==="offscreen"){let ce=j.prerender;ce&&(w.setCustomLayerDefaults(),N.setColorMode(w.colorModeForRenderPass()),ce.call(j,N.gl,le),N.setDirty(),w.setBaseState())}else if(w.renderPass==="translucent"){w.setCustomLayerDefaults(),N.setColorMode(w.colorModeForRenderPass()),N.setStencilMode(ei.disabled);let ce=oe==="3d"?w.getDepthModeFor3D():w.getDepthModeForSublayer(0,Ot.ReadOnly);N.setDepthMode(ce),j.render(N.gl,le),N.setDirty(),w.setBaseState(),N.bindFramebuffer.set(null)}})(t,0,u,b))}saveTileTexture(t){let n=this._tileTextures[t.size[0]];n?n.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){let n=this._tileTextures[t];return n&&n.length>0?n.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;let n=this.imageManager.getPattern(t.from.toString()),u=this.imageManager.getPattern(t.to.toString());return!n||!u}useProgram(t,n,u=!1,m=[]){this.cache=this.cache||{};let b=!!this.style.map.terrain,w=this.style.projection,k=u?ci.projectionMercator:w.shaderPreludeCode,E=u?Tr:w.shaderDefine,z=t+(n?n.cacheKey:"")+`/${u?Ur:w.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(b?"/terrain":"")+(m?`/${m.join("/")}`:"");return this.cache[z]||(this.cache[z]=new ns(this.context,ci[t],n,ed[t],this._showOverdrawInspector,b,k,E,m)),this.cache[z]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){let t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){var t,n;if(this._tileTextures){for(let u in this._tileTextures){let m=this._tileTextures[u];if(m)for(let b of m)b.destroy()}this._tileTextures={}}if(this.tileExtentBuffer&&this.tileExtentBuffer.destroy(),this.debugBuffer&&this.debugBuffer.destroy(),this.rasterBoundsBuffer&&this.rasterBoundsBuffer.destroy(),this.rasterBoundsBufferPosOnly&&this.rasterBoundsBufferPosOnly.destroy(),this.viewportBuffer&&this.viewportBuffer.destroy(),this.tileBorderIndexBuffer&&this.tileBorderIndexBuffer.destroy(),this.quadTriangleIndexBuffer&&this.quadTriangleIndexBuffer.destroy(),this.tileExtentMesh&&((t=this.tileExtentMesh.vertexBuffer)===null||t===void 0||t.destroy()),this.tileExtentMesh&&((n=this.tileExtentMesh.indexBuffer)===null||n===void 0||n.destroy()),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.cache){for(let u in this.cache){let m=this.cache[u];m&&m.program&&this.context.gl.deleteProgram(m.program)}this.cache={}}this.context&&this.context.setDefault()}overLimit(){let{drawingBufferWidth:t,drawingBufferHeight:n}=this.context.gl;return this.width!==t||this.height!==n}}function ad(_,t){let n,u=!1,m=null,b=null,w=()=>{m=null,u&&(_.apply(b,n),m=setTimeout(w,t),u=!1)};return(...k)=>(u=!0,b=this,n=k,m||w(),m)}class $l{constructor(t){this._getCurrentHash=()=>{let n=window.location.hash.replace("#","");if(this._hashName){let u;return n.split("&").map((m=>m.split("="))).forEach((m=>{m[0]===this._hashName&&(u=m)})),(u&&u[1]||"").split("/")}return n.split("/")},this._onHashChange=()=>{let n=this._getCurrentHash();if(!this._isValidHash(n))return!1;let u=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(n[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+n[2],+n[1]],zoom:+n[0],bearing:u,pitch:+(n[4]||0)}),!0},this._updateHashUnthrottled=()=>{let n=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,n)},this._removeHash=()=>{let n=this._getCurrentHash();if(n.length===0)return;let u=n.join("/"),m=u;m.split("&").length>0&&(m=m.split("&")[0]),this._hashName&&(m=`${this._hashName}=${u}`);let b=window.location.hash.replace(m,"");b.startsWith("#&")?b=b.slice(0,1)+b.slice(2):b==="#"&&(b="");let w=window.location.href.replace(/(#.+)?$/,b);w=w.replace("&&","&"),window.history.replaceState(window.history.state,null,w)},this._updateHash=ad(this._updateHashUnthrottled,300),this._hashName=t&&encodeURIComponent(t)}addTo(t){return this._map=t,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(t){let n=this._map.getCenter(),u=Math.round(100*this._map.getZoom())/100,m=Math.ceil((u*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,m),w=Math.round(n.lng*b)/b,k=Math.round(n.lat*b)/b,E=this._map.getBearing(),z=this._map.getPitch(),O="";if(O+=t?`/${w}/${k}/${u}`:`${u}/${k}/${w}`,(E||z)&&(O+="/"+Math.round(10*E)/10),z&&(O+=`/${Math.round(z)}`),this._hashName){let N=this._hashName,j=!1,Z=window.location.hash.slice(1).split("&").map((Q=>{let se=Q.split("=")[0];return se===N?(j=!0,`${se}=${O}`):Q})).filter((Q=>Q));return j||Z.push(`${N}=${O}`),`#${Z.join("&")}`}return`#${O}`}_isValidHash(t){if(t.length<3||t.some(isNaN))return!1;try{new a.V(+t[2],+t[1])}catch(b){return!1}let n=+t[0],u=+(t[3]||0),m=+(t[4]||0);return n>=this._map.getMinZoom()&&n<=this._map.getMaxZoom()&&u>=-180&&u<=180&&m>=this._map.getMinPitch()&&m<=this._map.getMaxPitch()}}let dl={linearity:.3,easing:a.cx(0,0,.3,1)},na=a.e({deceleration:2500,maxSpeed:1400},dl),wa=a.e({deceleration:20,maxSpeed:1400},dl),Rh=a.e({deceleration:1e3,maxSpeed:360},dl),Sa=a.e({deceleration:1e3,maxSpeed:90},dl),em=a.e({deceleration:1e3,maxSpeed:360},dl);class hl{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:te(),settings:t})}_drainInertiaBuffer(){let t=this._inertiaBuffer,n=te();for(;t.length>0&&n-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;let n={zoom:0,bearing:0,pitch:0,roll:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(let{settings:b}of this._inertiaBuffer)n.zoom+=b.zoomDelta||0,n.bearing+=b.bearingDelta||0,n.pitch+=b.pitchDelta||0,n.roll+=b.rollDelta||0,b.panDelta&&n.pan._add(b.panDelta),b.around&&(n.around=b.around),b.pinchAround&&(n.pinchAround=b.pinchAround);let u=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,m={};if(n.pan.mag()){let b=Yl(n.pan.mag(),u,a.e({},na,t||{})),w=n.pan.mult(b.amount/n.pan.mag()),k=this._map.cameraHelper.handlePanInertia(w,this._map.transform);m.center=k.easingCenter,m.offset=k.easingOffset,Hl(m,b)}if(n.zoom){let b=Yl(n.zoom,u,wa);m.zoom=this._map.transform.zoom+b.amount,Hl(m,b)}if(n.bearing){let b=Yl(n.bearing,u,Rh);m.bearing=this._map.transform.bearing+a.ao(b.amount,-179,179),Hl(m,b)}if(n.pitch){let b=Yl(n.pitch,u,Sa);m.pitch=this._map.transform.pitch+b.amount,Hl(m,b)}if(n.roll){let b=Yl(n.roll,u,em);m.roll=this._map.transform.roll+a.ao(b.amount,-179,179),Hl(m,b)}if(m.zoom||m.bearing){let b=n.pinchAround===void 0?n.around:n.pinchAround;m.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),a.e(m,{noMoveStart:!0})}}function Hl(_,t){(!_.duration||_.duration<t.duration)&&(_.duration=t.duration,_.easing=t.easing)}function Yl(_,t,n){let{maxSpeed:u,linearity:m,deceleration:b}=n,w=a.ao(_*m/(t/1e3),-u,u),k=Math.abs(w)/(b*m);return{easing:n.easing,duration:1e3*k,amount:w*(k/2)}}class qn extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,n,u,m={}){u=u instanceof MouseEvent?u:new MouseEvent(t,u);let b=H.mousePos(n.getCanvas(),u),w=n.unproject(b);super(t,a.e({point:b,lngLat:w,originalEvent:u},m)),this._defaultPrevented=!1,this.target=n}}class Xl extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,n,u){let m=t==="touchend"?u.changedTouches:u.touches,b=H.touchPos(n.getCanvasContainer(),m),w=b.map((E=>n.unproject(E))),k=b.reduce(((E,z,O,N)=>E.add(z.div(N.length))),new a.P(0,0));super(t,{points:b,point:k,lngLats:w,lngLat:n.unproject(k),originalEvent:u}),this._defaultPrevented=!1}}class sd extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,n,u){super(t,{originalEvent:u}),this._defaultPrevented=!1}}class Kl{constructor(t,n){this._map=t,this._clickTolerance=n.clickTolerance}reset(){delete this._mousedownPos}wheel(t){return this._firePreventable(new sd(t.type,this._map,t))}mousedown(t,n){return this._mousedownPos=n,this._firePreventable(new qn(t.type,this._map,t))}mouseup(t){this._map.fire(new qn(t.type,this._map,t))}click(t,n){this._mousedownPos&&this._mousedownPos.dist(n)>=this._clickTolerance||this._map.fire(new qn(t.type,this._map,t))}dblclick(t){return this._firePreventable(new qn(t.type,this._map,t))}mouseover(t){this._map.fire(new qn(t.type,this._map,t))}mouseout(t){this._map.fire(new qn(t.type,this._map,t))}touchstart(t){return this._firePreventable(new Xl(t.type,this._map,t))}touchmove(t){this._map.fire(new Xl(t.type,this._map,t))}touchend(t){this._map.fire(new Xl(t.type,this._map,t))}touchcancel(t){this._map.fire(new Xl(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class hs{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(t){this._map.fire(new qn(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new qn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._ignoreContextMenu||this._map.fire(new qn(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ot{constructor(t){this._map=t}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(t){return this.transform.screenPointToLocation(a.P.convert(t),this._map.terrain)}}class od{constructor(t,n){this._map=t,this._tr=new ot(t),this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=n.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,n){this.isEnabled()&&t.shiftKey&&t.button===0&&(H.disableDrag(),this._startPos=this._lastPos=n,this._active=!0)}mousemoveWindow(t,n){if(!this._active)return;let u=n;if(this._lastPos.equals(u)||!this._box&&u.dist(this._startPos)<this._clickTolerance)return;let m=this._startPos;this._lastPos=u,this._box||(this._box=H.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",t));let b=Math.min(m.x,u.x),w=Math.max(m.x,u.x),k=Math.min(m.y,u.y),E=Math.max(m.y,u.y);H.setTransform(this._box,`translate(${b}px,${k}px)`),this._box.style.width=w-b+"px",this._box.style.height=E-k+"px"}mouseupWindow(t,n){if(!this._active||t.button!==0)return;let u=this._startPos,m=n;if(this.reset(),H.suppressClick(),u.x!==m.x||u.y!==m.y)return this._map.fire(new a.l("boxzoomend",{originalEvent:t})),{cameraAnimation:b=>b.fitScreenCoordinates(u,m,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",t)}keydown(t){this._active&&t.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",t))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(H.remove(this._box),this._box=null),H.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(t,n){return this._map.fire(new a.l(t,{originalEvent:n}))}}function Ql(_,t){if(_.length!==t.length)throw new Error(`The number of touches and points are not equal - touches ${_.length}, points ${t.length}`);let n={};for(let u=0;u<_.length;u++)n[_[u].identifier]=t[u];return n}class Bh{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(t,n,u){(this.centroid||u.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=t.timeStamp),u.length===this.numTouches&&(this.centroid=(function(m){let b=new a.P(0,0);for(let w of m)b._add(w);return b.div(m.length)})(n),this.touches=Ql(u,n)))}touchmove(t,n,u){if(this.aborted||!this.centroid)return;let m=Ql(u,n);for(let b in this.touches){let w=m[b];(!w||w.dist(this.touches[b])>30)&&(this.aborted=!0)}}touchend(t,n,u){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),u.length===0){let m=!this.aborted&&this.centroid;if(this.reset(),m)return m}}}class So{constructor(t){this.singleTap=new Bh(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(t,n,u){this.singleTap.touchstart(t,n,u)}touchmove(t,n,u){this.singleTap.touchmove(t,n,u)}touchend(t,n,u){let m=this.singleTap.touchend(t,n,u);if(m){let b=t.timeStamp-this.lastTime<500,w=!this.lastTap||this.lastTap.dist(m)<30;if(b&&w||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}}}class Jl{constructor(t){this._tr=new ot(t),this._zoomIn=new So({numTouches:1,numTaps:2}),this._zoomOut=new So({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,n,u){this._zoomIn.touchstart(t,n,u),this._zoomOut.touchstart(t,n,u)}touchmove(t,n,u){this._zoomIn.touchmove(t,n,u),this._zoomOut.touchmove(t,n,u)}touchend(t,n,u){let m=this._zoomIn.touchend(t,n,u),b=this._zoomOut.touchend(t,n,u),w=this._tr;return m?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:w.zoom+1,around:w.unproject(m)},{originalEvent:t})}):b?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:w.zoom-1,around:w.unproject(b)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class To{constructor(t){this._enabled=!!t.enable,this._moveStateManager=t.moveStateManager,this._clickTolerance=t.clickTolerance||1,this._moveFunction=t.move,this._activateOnStart=!!t.activateOnStart,t.assignEvents(this),this.reset()}reset(t){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(t)}_move(...t){let n=this._moveFunction(...t);if(n.bearingDelta||n.pitchDelta||n.rollDelta||n.around||n.panDelta)return this._active=!0,n}dragStart(t,n){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(t)&&(this._moveStateManager.startMove(t),this._lastPoint=Array.isArray(n)?n[0]:n,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(t,n){if(!this.isEnabled())return;let u=this._lastPoint;if(!u)return;if(t.preventDefault(),!this._moveStateManager.isValidMoveEvent(t))return void this.reset(t);let m=Array.isArray(n)?n[0]:n;return!this._moved&&m.dist(u)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=m,this._move(u,m))}dragEnd(t){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(t)&&(this._moved&&H.suppressClick(),this.reset(t))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}let tm=0,ld=2,Fh={[tm]:1,[ld]:2};class Co{constructor(t){this._correctEvent=t.checkCorrectEvent}startMove(t){let n=H.mouseButton(t);this._eventButton=n}endMove(t){delete this._eventButton}isValidStartEvent(t){return this._correctEvent(t)}isValidMoveEvent(t){return!(function(n,u){let m=Fh[u];return n.buttons===void 0||(n.buttons&m)!==m})(t,this._eventButton)}isValidEndEvent(t){return H.mouseButton(t)===this._eventButton}}class im{constructor(){this._firstTouch=void 0}_isOneFingerTouch(t){return t.targetTouches.length===1}_isSameTouchEvent(t){return t.targetTouches[0].identifier===this._firstTouch}startMove(t){this._firstTouch=t.targetTouches[0].identifier}endMove(t){delete this._firstTouch}isValidStartEvent(t){return this._isOneFingerTouch(t)}isValidMoveEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}isValidEndEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}}class jh{constructor(t=new Co({checkCorrectEvent:()=>!0}),n=new im){this.mouseMoveStateManager=t,this.oneFingerTouchMoveStateManager=n}_executeRelevantHandler(t,n,u){return t instanceof MouseEvent?n(t):typeof TouchEvent!="undefined"&&t instanceof TouchEvent?u(t):void 0}startMove(t){this._executeRelevantHandler(t,(n=>this.mouseMoveStateManager.startMove(n)),(n=>this.oneFingerTouchMoveStateManager.startMove(n)))}endMove(t){this._executeRelevantHandler(t,(n=>this.mouseMoveStateManager.endMove(n)),(n=>this.oneFingerTouchMoveStateManager.endMove(n)))}isValidStartEvent(t){return this._executeRelevantHandler(t,(n=>this.mouseMoveStateManager.isValidStartEvent(n)),(n=>this.oneFingerTouchMoveStateManager.isValidStartEvent(n)))}isValidMoveEvent(t){return this._executeRelevantHandler(t,(n=>this.mouseMoveStateManager.isValidMoveEvent(n)),(n=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(n)))}isValidEndEvent(t){return this._executeRelevantHandler(t,(n=>this.mouseMoveStateManager.isValidEndEvent(n)),(n=>this.oneFingerTouchMoveStateManager.isValidEndEvent(n)))}}let Gc=_=>{_.mousedown=_.dragStart,_.mousemoveWindow=_.dragMove,_.mouseup=_.dragEnd,_.contextmenu=t=>{t.preventDefault()}};class rm{constructor(t,n){this._clickTolerance=t.clickTolerance||1,this._map=n,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(t){return t<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(t,n,u){return this._calculateTransform(t,n,u)}touchmove(t,n,u){if(this._active){if(!this._shouldBePrevented(u.length))return t.preventDefault(),this._calculateTransform(t,n,u);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",t)}}touchend(t,n,u){this._calculateTransform(t,n,u),this._active&&this._shouldBePrevented(u.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,n,u){u.length>0&&(this._active=!0);let m=Ql(u,n),b=new a.P(0,0),w=new a.P(0,0),k=0;for(let z in m){let O=m[z],N=this._touches[z];N&&(b._add(O),w._add(O.sub(N)),k++,m[z]=O)}if(this._touches=m,this._shouldBePrevented(k)||!w.mag())return;let E=w.div(k);return this._sum._add(E),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(k),panDelta:E}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Uc{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(t,n,u){this._firstTwoTouches||u.length<2||(this._firstTwoTouches=[u[0].identifier,u[1].identifier],this._start([n[0],n[1]]))}touchmove(t,n,u){if(!this._firstTwoTouches)return;t.preventDefault();let[m,b]=this._firstTwoTouches,w=Zc(u,n,m),k=Zc(u,n,b);if(!w||!k)return;let E=this._aroundCenter?null:w.add(k).div(2);return this._move([w,k],E,t)}touchend(t,n,u){if(!this._firstTwoTouches)return;let[m,b]=this._firstTwoTouches,w=Zc(u,n,m),k=Zc(u,n,b);w&&k||(this._active&&H.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&t.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Zc(_,t,n){for(let u=0;u<_.length;u++)if(_[u].identifier===n)return t[u]}function cd(_,t){return Math.log(_/t)/Math.LN2}class Nh extends Uc{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,n){let u=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(cd(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:cd(this._distance,u),pinchAround:n}}}function qh(_,t){return 180*_.angleWith(t)/Math.PI}class ps extends Uc{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,n,u){let m=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:qh(this._vector,m),pinchAround:n}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());let n=25/(Math.PI*this._minDiameter)*360,u=qh(t,this._startVector);return Math.abs(u)<n}}function Ei(_){return Math.abs(_.y)>Math.abs(_.x)}class Vh extends Uc{constructor(t){super(),this._currentTouchCount=0,this._map=t}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(t,n,u){super.touchstart(t,n,u),this._currentTouchCount=u.length}_start(t){this._lastPoints=t,Ei(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,n,u){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;let m=t[0].sub(this._lastPoints[0]),b=t[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(m,b,u.timeStamp),this._valid?(this._lastPoints=t,this._active=!0,{pitchDelta:(m.y+b.y)/2*-.5}):void 0}gestureBeginsVertically(t,n,u){if(this._valid!==void 0)return this._valid;let m=t.mag()>=2,b=n.mag()>=2;if(!m&&!b)return;if(!m||!b)return this._firstMove===void 0&&(this._firstMove=u),u-this._firstMove<100&&void 0;let w=t.y>0==n.y>0;return Ei(t)&&Ei(n)&&w}}let $c={panStep:100,bearingStep:15,pitchStep:10};class ec{constructor(t){this._tr=new ot(t);let n=$c;this._panStep=n.panStep,this._bearingStep=n.bearingStep,this._pitchStep=n.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let n=0,u=0,m=0,b=0,w=0;switch(t.keyCode){case 61:case 107:case 171:case 187:n=1;break;case 189:case 109:case 173:n=-1;break;case 37:t.shiftKey?u=-1:(t.preventDefault(),b=-1);break;case 39:t.shiftKey?u=1:(t.preventDefault(),b=1);break;case 38:t.shiftKey?m=1:(t.preventDefault(),w=-1);break;case 40:t.shiftKey?m=-1:(t.preventDefault(),w=1);break;default:return}return this._rotationDisabled&&(u=0,m=0),{cameraAnimation:k=>{let E=this._tr;k.easeTo({duration:300,easeId:"keyboardHandler",easing:ud,zoom:n?Math.round(E.zoom)+n*(t.shiftKey?2:1):E.zoom,bearing:E.bearing+u*this._bearingStep,pitch:E.pitch+m*this._pitchStep,offset:[-b*this._panStep,-w*this._panStep],center:E.center},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function ud(_){return _*(2-_)}let dd=4.000244140625,Wh=1/450;class hd{constructor(t,n){this._onTimeout=u=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(u)},this._map=t,this._tr=new ot(t),this._triggerRenderFrame=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Wh}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!t&&t.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(t){return!!this._map.cooperativeGestures.isEnabled()&&!(t.ctrlKey||this._map.cooperativeGestures.isBypassed(t))}wheel(t){if(!this.isEnabled())return;if(this._shouldBePrevented(t))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",t);let n=t.deltaMode===WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY,u=te(),m=u-(this._lastWheelEventTime||0);this._lastWheelEventTime=u,n!==0&&n%dd==0?this._type="wheel":n!==0&&Math.abs(n)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(m*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),t.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=t,this._delta-=n,this._active||this._start(t)),t.preventDefault()}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);let n=H.mousePos(this._map.getCanvas(),t),u=this._tr;this._aroundPoint=this._aroundCenter?u.transform.locationToScreenPoint(a.V.convert(u.center)):n,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;let t=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){let k=t.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=k),typeof this._targetZoom=="number"&&(this._targetZoom+=k)}if(this._delta!==0){let k=this._type==="wheel"&&Math.abs(this._delta)>dd?this._wheelZoomRate:this._defaultZoomRate,E=2/(1+Math.exp(-Math.abs(this._delta*k)));this._delta<0&&E!==0&&(E=1/E);let z=typeof this._targetZoom!="number"?t.scale:a.ar(this._targetZoom);this._targetZoom=t.applyConstrain(t.getCameraLngLat(),a.au(z*E)).zoom,this._type==="wheel"&&(this._startZoom=t.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}let n=typeof this._targetZoom!="number"?t.zoom:this._targetZoom,u=this._startZoom,m=this._easing,b,w=!1;if(this._type==="wheel"&&u&&m){let k=te()-this._lastWheelEventTime,E=Math.min((k+5)/200,1),z=m(E);b=a.G.number(u,n,z),E<1?this._frameId||(this._frameId=!0):w=!0}else b=n,w=!0;return this._active=!0,w&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=b,{noInertia:!0,needsRenderFrame:!w,zoomDelta:b-t.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let n=a.cz;if(this._prevEase){let u=this._prevEase,m=(te()-u.start)/u.duration,b=u.easing(m+.01)-u.easing(m),w=.27/Math.sqrt(b*b+1e-4)*.01,k=Math.sqrt(.0729-w*w);n=a.cx(w,k,.25,1)}return this._prevEase={start:te(),duration:t,easing:n},n}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Gh{constructor(t,n){this._clickZoom=t,this._tapZoom=n}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Na{constructor(t){this._tr=new ot(t),this.reset()}reset(){this._active=!1}dblclick(t,n){return t.preventDefault(),{cameraAnimation:u=>{u.easeTo({duration:300,zoom:this._tr.zoom+(t.shiftKey?-1:1),around:this._tr.unproject(n)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Hc{constructor(){this._tap=new So({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(t,n,u){if(!this._swipePoint)if(this._tapTime){let m=n[0],b=t.timeStamp-this._tapTime<500,w=this._tapPoint.dist(m)<30;b&&w?u.length>0&&(this._swipePoint=m,this._swipeTouch=u[0].identifier):this.reset()}else this._tap.touchstart(t,n,u)}touchmove(t,n,u){if(this._tapTime){if(this._swipePoint){if(u[0].identifier!==this._swipeTouch)return;let m=n[0],b=m.y-this._swipePoint.y;return this._swipePoint=m,t.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(t,n,u)}touchend(t,n,u){if(this._tapTime)this._swipePoint&&u.length===0&&this.reset();else{let m=this._tap.touchend(t,n,u);m&&(this._tapTime=t.timeStamp,this._tapPoint=m)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ft{constructor(t,n,u){this._el=t,this._mousePan=n,this._touchPan=u}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class xt{constructor(t,n,u,m){this._pitchWithRotate=t.pitchWithRotate,this._rollEnabled=t.rollEnabled,this._mouseRotate=n,this._mousePitch=u,this._mouseRoll=m}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class pl{constructor(t,n,u,m){this._el=t,this._touchZoom=n,this._touchRotate=u,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class pd{constructor(t,n){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=t,this._options=n,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;let t=this._map.getCanvasContainer();t.classList.add("maplibregl-cooperative-gestures"),this._container=H.create("div","maplibregl-cooperative-gesture-screen",t);let n=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(n=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));let u=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),m=document.createElement("div");m.className="maplibregl-desktop-message",m.textContent=n,this._container.appendChild(m);let b=document.createElement("div");b.className="maplibregl-mobile-message",b.textContent=u,this._container.appendChild(b),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(H.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(t){return t[this._bypassKey]}notifyGestureBlocked(t,n){this._enabled&&(this._map.fire(new a.l("cooperativegestureprevented",{gestureType:t,originalEvent:n})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}let ko=_=>_.zoom||_.drag||_.roll||_.pitch||_.rotate;class _n extends a.l{}function Vn(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta||_.rollDelta}class Uh{constructor(t,n){this.handleWindowEvent=m=>{this.handleEvent(m,`${m.type}Window`)},this.handleEvent=(m,b)=>{if(m.type==="blur")return void this.stop(!0);this._updatingCamera=!0;let w=m.type==="renderFrame"?void 0:m,k={needsRenderFrame:!1},E={},z={};for(let{handlerName:j,handler:Z,allowed:Q}of this._handlers){if(!Z.isEnabled())continue;let se;if(this._blockedByActive(z,Q,j))Z.reset();else if(Z[b||m.type]){if(a.cA(m,b||m.type)){let le=H.mousePos(this._map.getCanvas(),m);se=Z[b||m.type](m,le)}else if(a.cB(m,b||m.type)){let le=this._getMapTouches(m.touches),oe=H.touchPos(this._map.getCanvas(),le);se=Z[b||m.type](m,oe,le)}else a.cC(b||m.type)||(se=Z[b||m.type](m));this.mergeHandlerResult(k,E,se,j,w),se&&se.needsRenderFrame&&this._triggerRenderFrame()}(se||Z.isActive())&&(z[j]=Z)}let O={};for(let j in this._previousActiveHandlers)z[j]||(O[j]=w);this._previousActiveHandlers=z,(Object.keys(O).length||Vn(k))&&(this._changes.push([k,E,O]),this._triggerRenderFrame()),(Object.keys(z).length||Vn(k))&&this._map._stop(!0),this._updatingCamera=!1;let{cameraAnimation:N}=k;N&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],N(this._map))},this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new hl(t),this._bearingSnap=n.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(n);let u=this._el;this._listeners=[[u,"touchstart",{passive:!0}],[u,"touchmove",{passive:!1}],[u,"touchend",void 0],[u,"touchcancel",void 0],[u,"mousedown",void 0],[u,"mousemove",void 0],[u,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[u,"mouseover",void 0],[u,"mouseout",void 0],[u,"dblclick",void 0],[u,"click",void 0],[u,"keydown",{capture:!1}],[u,"keyup",void 0],[u,"wheel",{passive:!1}],[u,"contextmenu",void 0],[window,"blur",void 0]];for(let[m,b,w]of this._listeners)H.addEventListener(m,b,m===document?this.handleWindowEvent:this.handleEvent,w)}destroy(){for(let[t,n,u]of this._listeners)H.removeEventListener(t,n,t===document?this.handleWindowEvent:this.handleEvent,u)}_addDefaultHandlers(t){let n=this._map,u=n.getCanvasContainer();this._add("mapEvent",new Kl(n,t));let m=n.boxZoom=new od(n,t);this._add("boxZoom",m),t.interactive&&t.boxZoom&&m.enable();let b=n.cooperativeGestures=new pd(n,t.cooperativeGestures);this._add("cooperativeGestures",b),t.cooperativeGestures&&b.enable();let w=new Jl(n),k=new Na(n);n.doubleClickZoom=new Gh(k,w),this._add("tapZoom",w),this._add("clickZoom",k),t.interactive&&t.doubleClickZoom&&n.doubleClickZoom.enable();let E=new Hc;this._add("tapDragZoom",E);let z=n.touchPitch=new Vh(n);this._add("touchPitch",z),t.interactive&&t.touchPitch&&n.touchPitch.enable(t.touchPitch);let O=()=>n.project(n.getCenter()),N=(function({enable:de,clickTolerance:ge,aroundCenter:xe=!0,minPixelCenterThreshold:pe=100,rotateDegreesPerPixelMoved:Te=.8},Re){let ze=new Co({checkCorrectEvent:De=>H.mouseButton(De)===0&&De.ctrlKey||H.mouseButton(De)===2&&!De.ctrlKey});return new To({clickTolerance:ge,move:(De,Fe)=>{let $e=Re();if(xe&&Math.abs($e.y-De.y)>pe)return{bearingDelta:a.cy(new a.P(De.x,Fe.y),Fe,$e)};let Je=(Fe.x-De.x)*Te;return xe&&Fe.y<$e.y&&(Je=-Je),{bearingDelta:Je}},moveStateManager:ze,enable:de,assignEvents:Gc})})(t,O),j=(function({enable:de,clickTolerance:ge,pitchDegreesPerPixelMoved:xe=-.5}){let pe=new Co({checkCorrectEvent:Te=>H.mouseButton(Te)===0&&Te.ctrlKey||H.mouseButton(Te)===2});return new To({clickTolerance:ge,move:(Te,Re)=>({pitchDelta:(Re.y-Te.y)*xe}),moveStateManager:pe,enable:de,assignEvents:Gc})})(t),Z=(function({enable:de,clickTolerance:ge,rollDegreesPerPixelMoved:xe=.3},pe){let Te=new Co({checkCorrectEvent:Re=>H.mouseButton(Re)===2&&Re.ctrlKey});return new To({clickTolerance:ge,move:(Re,ze)=>{let De=pe(),Fe=(ze.x-Re.x)*xe;return ze.y<De.y&&(Fe=-Fe),{rollDelta:Fe}},moveStateManager:Te,enable:de,assignEvents:Gc})})(t,O);n.dragRotate=new xt(t,N,j,Z),this._add("mouseRotate",N,["mousePitch"]),this._add("mousePitch",j,["mouseRotate","mouseRoll"]),this._add("mouseRoll",Z,["mousePitch"]),t.interactive&&t.dragRotate&&n.dragRotate.enable();let Q=(function({enable:de,clickTolerance:ge}){let xe=new Co({checkCorrectEvent:pe=>H.mouseButton(pe)===0&&!pe.ctrlKey});return new To({clickTolerance:ge,move:(pe,Te)=>({around:Te,panDelta:Te.sub(pe)}),activateOnStart:!0,moveStateManager:xe,enable:de,assignEvents:Gc})})(t),se=new rm(t,n);n.dragPan=new ft(u,Q,se),this._add("mousePan",Q),this._add("touchPan",se,["touchZoom","touchRotate"]),t.interactive&&t.dragPan&&n.dragPan.enable(t.dragPan);let le=new ps,oe=new Nh;n.touchZoomRotate=new pl(u,oe,le,E),this._add("touchRotate",le,["touchPan","touchZoom"]),this._add("touchZoom",oe,["touchPan","touchRotate"]),t.interactive&&t.touchZoomRotate&&n.touchZoomRotate.enable(t.touchZoomRotate),this._add("blockableMapEvent",new hs(n));let ce=n.scrollZoom=new hd(n,(()=>this._triggerRenderFrame()));this._add("scrollZoom",ce,["mousePan"]),t.interactive&&t.scrollZoom&&n.scrollZoom.enable(t.scrollZoom);let me=n.keyboard=new ec(n);this._add("keyboard",me),t.interactive&&t.keyboard&&n.keyboard.enable()}_add(t,n,u){this._handlers.push({handlerName:t,handler:n,allowed:u}),this._handlersById[t]=n}stop(t){if(!this._updatingCamera){for(let{handler:n}of this._handlers)n.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(let{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ko(this._eventsInProgress)||this.isZooming()}_blockedByActive(t,n,u){for(let m in t)if(m!==u&&(!n||n.indexOf(m)<0))return!0;return!1}_getMapTouches(t){let n=[];for(let u of t)this._el.contains(u.target)&&n.push(u);return n}mergeHandlerResult(t,n,u,m,b){if(!u)return;a.e(t,u);let w={handlerName:m,originalEvent:u.originalEvent||b};u.zoomDelta!==void 0&&(n.zoom=w),u.panDelta!==void 0&&(n.drag=w),u.rollDelta!==void 0&&(n.roll=w),u.pitchDelta!==void 0&&(n.pitch=w),u.bearingDelta!==void 0&&(n.rotate=w)}_applyChanges(){let t={},n={},u={};for(let[m,b,w]of this._changes)m.panDelta&&(t.panDelta=(t.panDelta||new a.P(0,0))._add(m.panDelta)),m.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+m.zoomDelta),m.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+m.bearingDelta),m.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+m.pitchDelta),m.rollDelta&&(t.rollDelta=(t.rollDelta||0)+m.rollDelta),m.around!==void 0&&(t.around=m.around),m.pinchAround!==void 0&&(t.pinchAround=m.pinchAround),m.noInertia&&(t.noInertia=m.noInertia),a.e(n,b),a.e(u,w);this._updateMapTransform(t,n,u),this._changes=[]}_updateMapTransform(t,n,u){let m=this._map,b=m._getTransformForUpdate(),w=m.terrain;if(!(Vn(t)||w&&this._terrainMovement))return this._fireEvents(n,u,!0);m._stop(!0);let{panDelta:k,zoomDelta:E,bearingDelta:z,pitchDelta:O,rollDelta:N,around:j,pinchAround:Z}=t;Z!==void 0&&(j=Z),j=j||m.transform.centerPoint,w&&!b.isPointOnMapSurface(j)&&(j=b.centerPoint);let Q={panDelta:k,zoomDelta:E,rollDelta:N,pitchDelta:O,bearingDelta:z,around:j};this._map.cameraHelper.useGlobeControls&&!b.isPointOnMapSurface(j)&&(j=b.centerPoint);let se=j.distSqr(b.centerPoint)<.01?b.center:b.screenPointToLocation(k?j.sub(k):j);this._handleMapControls({terrain:w,tr:b,deltasForHelper:Q,preZoomAroundLoc:se,combinedEventsInProgress:n,panDelta:k}),m._applyUpdatedTransform(b),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(n,u,!0)}_handleMapControls({terrain:t,tr:n,deltasForHelper:u,preZoomAroundLoc:m,combinedEventsInProgress:b,panDelta:w}){let k=this._map.cameraHelper;if(k.handleMapControlsRollPitchBearingZoom(u,n),t)return k.useGlobeControls?(this._terrainMovement||!b.drag&&!b.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void k.handleMapControlsPan(u,n,m)):this._terrainMovement||!b.drag&&!b.zoom?void(b.drag&&this._terrainMovement&&w?n.setCenter(n.screenPointToLocation(n.centerPoint.sub(w))):k.handleMapControlsPan(u,n,m)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void k.handleMapControlsPan(u,n,m));k.handleMapControlsPan(u,n,m)}_fireEvents(t,n,u){let m=ko(this._eventsInProgress),b=ko(t),w={};for(let N in t){let{originalEvent:j}=t[N];this._eventsInProgress[N]||(w[`${N}start`]=j),this._eventsInProgress[N]=t[N]}!m&&b&&this._fireEvent("movestart",b.originalEvent);for(let N in w)this._fireEvent(N,w[N]);b&&this._fireEvent("move",b.originalEvent);for(let N in t){let{originalEvent:j}=t[N];this._fireEvent(N,j)}let k={},E;for(let N in this._eventsInProgress){let{handlerName:j,originalEvent:Z}=this._eventsInProgress[N];this._handlersById[j].isActive()||(delete this._eventsInProgress[N],E=n[j]||Z,k[`${N}end`]=E)}for(let N in k)this._fireEvent(N,k[N]);let z=ko(this._eventsInProgress),O=(m||b)&&!z;if(O&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;let N=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&N.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(N)}if(u&&O){this._updatingCamera=!0;let N=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),j=Z=>Z!==0&&-this._bearingSnap<Z&&Z<this._bearingSnap;!N||!N.essential&&re.prefersReducedMotion?(this._map.fire(new a.l("moveend",{originalEvent:E})),j(this._map.getBearing())&&this._map.resetNorth()):(j(N.bearing||this._map.getBearing())&&(N.bearing=0),N.freezeElevation=!0,this._map.easeTo(N,{originalEvent:E})),this._updatingCamera=!1}}_fireEvent(t,n){this._map.fire(new a.l(t,n?{originalEvent:n}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((t=>{delete this._frameId,this.handleEvent(new _n("renderFrame",{timeStamp:t})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class nm extends a.E{constructor(t,n,u){super(),this._renderFrameCallback=()=>{let m=Math.min((te()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(m)),m<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=u.bearingSnap,this.cameraHelper=n,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(t,n){t.apply(this.transform),this.transform=t,this.cameraHelper=n}getCenter(){return new a.V(this.transform.center.lng,this.transform.center.lat)}setCenter(t,n){return this.jumpTo({center:t},n)}getCenterElevation(){return this.transform.elevation}setCenterElevation(t,n){return this.jumpTo({elevation:t},n),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(t){this._centerClampedToGround=t}panBy(t,n,u){return t=a.P.convert(t).mult(-1),this.panTo(this.transform.center,a.e({offset:t},n),u)}panTo(t,n,u){return this.easeTo(a.e({center:t},n),u)}getZoom(){return this.transform.zoom}setZoom(t,n){return this.jumpTo({zoom:t},n),this}zoomTo(t,n,u){return this.easeTo(a.e({zoom:t},n),u)}zoomIn(t,n){return this.zoomTo(this.getZoom()+1,t,n),this}zoomOut(t,n){return this.zoomTo(this.getZoom()-1,t,n),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(t,n){return t!=this.transform.fov&&(this.transform.setFov(t),this.fire(new a.l("movestart",n)).fire(new a.l("move",n)).fire(new a.l("moveend",n))),this}getBearing(){return this.transform.bearing}setBearing(t,n){return this.jumpTo({bearing:t},n),this}getPadding(){return this.transform.padding}setPadding(t,n){return this.jumpTo({padding:t},n),this}rotateTo(t,n,u){return this.easeTo(a.e({bearing:t},n),u)}resetNorth(t,n){return this.rotateTo(0,a.e({duration:1e3},t),n),this}resetNorthPitch(t,n){return this.easeTo(a.e({bearing:0,pitch:0,roll:0,duration:1e3},t),n),this}snapToNorth(t,n){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,n):this}getPitch(){return this.transform.pitch}setPitch(t,n){return this.jumpTo({pitch:t},n),this}getRoll(){return this.transform.roll}setRoll(t,n){return this.jumpTo({roll:t},n),this}cameraForBounds(t,n){t=Oi.convert(t).adjustAntiMeridian();let u=n&&n.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),u,n)}_cameraForBoxAndBearing(t,n,u,m){let b={top:0,bottom:0,right:0,left:0};if(typeof(m=a.e({padding:b,offset:[0,0],maxZoom:this.transform.maxZoom},m)).padding=="number"){let z=m.padding;m.padding={top:z,bottom:z,right:z,left:z}}let w=a.e(b,m.padding);m.padding=w;let k=this.transform,E=new Oi(t,n);return this.cameraHelper.cameraForBoxAndBearing(m,w,E,u,k)}fitBounds(t,n,u){return this._fitInternal(this.cameraForBounds(t,n),n,u)}fitScreenCoordinates(t,n,u,m,b){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(a.P.convert(t)),this.transform.screenPointToLocation(a.P.convert(n)),u,m),m,b)}_fitInternal(t,n,u){return t?(delete(n=a.e(t,n)).padding,n.linear?this.easeTo(n,u):this.flyTo(n,u)):this}jumpTo(t,n){this.stop();let u=this._getTransformForUpdate(),m=!1,b=!1,w=!1,k=u.zoom;this.cameraHelper.handleJumpToCenterZoom(u,t);let E=u.zoom!==k;return"elevation"in t&&u.elevation!==+t.elevation&&u.setElevation(+t.elevation),"bearing"in t&&u.bearing!==+t.bearing&&(m=!0,u.setBearing(+t.bearing)),"pitch"in t&&u.pitch!==+t.pitch&&(b=!0,u.setPitch(+t.pitch)),"roll"in t&&u.roll!==+t.roll&&(w=!0,u.setRoll(+t.roll)),t.padding==null||u.isPaddingEqual(t.padding)||u.setPadding(t.padding),this._applyUpdatedTransform(u),this.fire(new a.l("movestart",n)).fire(new a.l("move",n)),E&&this.fire(new a.l("zoomstart",n)).fire(new a.l("zoom",n)).fire(new a.l("zoomend",n)),m&&this.fire(new a.l("rotatestart",n)).fire(new a.l("rotate",n)).fire(new a.l("rotateend",n)),b&&this.fire(new a.l("pitchstart",n)).fire(new a.l("pitch",n)).fire(new a.l("pitchend",n)),w&&this.fire(new a.l("rollstart",n)).fire(new a.l("roll",n)).fire(new a.l("rollend",n)),this.fire(new a.l("moveend",n))}calculateCameraOptionsFromTo(t,n,u,m=0){let b=a.ab.fromLngLat(t,n),w=a.ab.fromLngLat(u,m),k=w.x-b.x,E=w.y-b.y,z=w.z-b.z,O=Math.hypot(k,E,z);if(O===0)throw new Error("Can't calculate camera options with same From and To");let N=Math.hypot(k,E),j=a.au(this.transform.cameraToCenterDistance/O/this.transform.tileSize),Z=180*Math.atan2(k,-E)/Math.PI,Q=180*Math.acos(N/O)/Math.PI;return Q=z<0?90-Q:90+Q,{center:w.toLngLat(),elevation:m,zoom:j,pitch:Q,bearing:Z}}calculateCameraOptionsFromCameraLngLatAltRotation(t,n,u,m,b){let w=this.transform.calculateCenterFromCameraLngLatAlt(t,n,u,m);return{center:w.center,elevation:w.elevation,zoom:w.zoom,bearing:u,pitch:m,roll:b}}easeTo(t,n){this._stop(!1,t.easeId),((t=a.e({offset:[0,0],duration:500,easing:a.cz},t)).animate===!1||!t.essential&&re.prefersReducedMotion)&&(t.duration=0);let u=this._getTransformForUpdate(),m=this.getBearing(),b=u.pitch,w=u.roll,k="bearing"in t?this._normalizeBearing(t.bearing,m):m,E="pitch"in t?+t.pitch:b,z="roll"in t?this._normalizeBearing(t.roll,w):w,O="padding"in t?t.padding:u.padding,N=a.P.convert(t.offset),j,Z;t.around&&(j=a.V.convert(t.around),Z=u.locationToScreenPoint(j));let Q={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},se=this.cameraHelper.handleEaseTo(u,{bearing:k,pitch:E,roll:z,padding:O,around:j,aroundPoint:Z,offsetAsPoint:N,offset:t.offset,zoom:t.zoom,center:t.center});return this._rotating=this._rotating||m!==k,this._pitching=this._pitching||E!==b,this._rolling=this._rolling||z!==w,this._padding=!u.isPaddingEqual(O),this._zooming=this._zooming||se.isZooming,this._easeId=t.easeId,this._prepareEase(n,t.noMoveStart,Q),this.terrain&&this._prepareElevation(se.elevationCenter),this._ease((le=>{se.easeFunc(le),this.terrain&&!t.freezeElevation&&this._updateElevation(le),this._applyUpdatedTransform(u),this._fireMoveEvents(n)}),(le=>{this.terrain&&t.freezeElevation&&this._finalizeElevation(),this._afterEase(n,le)}),t),this}_prepareEase(t,n,u={}){this._moving=!0,n||u.moving||this.fire(new a.l("movestart",t)),this._zooming&&!u.zooming&&this.fire(new a.l("zoomstart",t)),this._rotating&&!u.rotating&&this.fire(new a.l("rotatestart",t)),this._pitching&&!u.pitching&&this.fire(new a.l("pitchstart",t)),this._rolling&&!u.rolling&&this.fire(new a.l("rollstart",t))}_prepareElevation(t){this._elevationCenter=t,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(t,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(t){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));let n=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(t<1&&n!==this._elevationTarget){let u=this._elevationTarget-this._elevationStart;this._elevationStart+=t*(u-(n-(u*t+this._elevationStart))/(1-t)),this._elevationTarget=n}this.transform.setElevation(a.G.number(this._elevationStart,this._elevationTarget,t))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(t){if(!this.terrain&&t.elevation>=0&&t.pitch<=90)return{};let n=t.getCameraLngLat(),u=t.getCameraAltitude(),m=this.terrain?this.terrain.getElevationForLngLatZoom(n,t.zoom):0;if(u<m){let b=this.calculateCameraOptionsFromTo(n,m,t.center,t.elevation);return{pitch:b.pitch,zoom:b.zoom}}return{}}_applyUpdatedTransform(t){let n=[];if(n.push((m=>this._elevateCameraIfInsideTerrain(m))),this.transformCameraUpdate&&n.push((m=>this.transformCameraUpdate(m))),!n.length)return;let u=t.clone();for(let m of n){let b=u.clone(),{center:w,zoom:k,roll:E,pitch:z,bearing:O,elevation:N}=m(b);w&&b.setCenter(w),N!==void 0&&b.setElevation(N),k!==void 0&&b.setZoom(k),E!==void 0&&b.setRoll(E),z!==void 0&&b.setPitch(z),O!==void 0&&b.setBearing(O),u.apply(b)}this.transform.apply(u)}_fireMoveEvents(t){this.fire(new a.l("move",t)),this._zooming&&this.fire(new a.l("zoom",t)),this._rotating&&this.fire(new a.l("rotate",t)),this._pitching&&this.fire(new a.l("pitch",t)),this._rolling&&this.fire(new a.l("roll",t))}_afterEase(t,n){if(this._easeId&&n&&this._easeId===n)return;delete this._easeId;let u=this._zooming,m=this._rotating,b=this._pitching,w=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,u&&this.fire(new a.l("zoomend",t)),m&&this.fire(new a.l("rotateend",t)),b&&this.fire(new a.l("pitchend",t)),w&&this.fire(new a.l("rollend",t)),this.fire(new a.l("moveend",t))}flyTo(t,n){if(!t.essential&&re.prefersReducedMotion){let Fe=a.U(t,["center","zoom","bearing","pitch","roll","elevation","padding"]);return this.jumpTo(Fe,n)}this.stop(),t=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.cz},t);let u=this._getTransformForUpdate(),m=u.bearing,b=u.pitch,w=u.roll,k=u.padding,E="bearing"in t?this._normalizeBearing(t.bearing,m):m,z="pitch"in t?+t.pitch:b,O="roll"in t?this._normalizeBearing(t.roll,w):w,N="padding"in t?t.padding:u.padding,j=a.P.convert(t.offset),Z=u.centerPoint.add(j),Q=u.screenPointToLocation(Z),se=this.cameraHelper.handleFlyTo(u,{bearing:E,pitch:z,roll:O,padding:N,locationAtOffset:Q,offsetAsPoint:j,center:t.center,minZoom:t.minZoom,zoom:t.zoom}),le=t.curve,oe=Math.max(u.width,u.height),ce=oe/se.scaleOfZoom,me=se.pixelPathLength;typeof se.scaleOfMinZoom=="number"&&(le=Math.sqrt(oe/se.scaleOfMinZoom/me*2));let de=le*le;function ge(Fe){let $e=(ce*ce-oe*oe+(Fe?-1:1)*de*de*me*me)/(2*(Fe?ce:oe)*de*me);return Math.log(Math.sqrt($e*$e+1)-$e)}function xe(Fe){return(Math.exp(Fe)-Math.exp(-Fe))/2}function pe(Fe){return(Math.exp(Fe)+Math.exp(-Fe))/2}let Te=ge(!1),Re=function(Fe){return pe(Te)/pe(Te+le*Fe)},ze=function(Fe){return oe*((pe(Te)*(xe($e=Te+le*Fe)/pe($e))-xe(Te))/de)/me;var $e},De=(ge(!0)-Te)/le;if(Math.abs(me)<2e-6||!isFinite(De)){if(Math.abs(oe-ce)<1e-6)return this.easeTo(t,n);let Fe=ce<oe?-1:1;De=Math.abs(Math.log(ce/oe))/le,ze=()=>0,Re=$e=>Math.exp(Fe*le*$e)}return t.duration="duration"in t?+t.duration:1e3*De/("screenSpeed"in t?+t.screenSpeed/le:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=m!==E,this._pitching=z!==b,this._rolling=O!==w,this._padding=!u.isPaddingEqual(N),this._prepareEase(n,!1),this.terrain&&this._prepareElevation(se.targetCenter),this._ease((Fe=>{let $e=Fe*De,Je=1/Re($e),Ze=ze($e);this._rotating&&u.setBearing(a.G.number(m,E,Fe)),this._pitching&&u.setPitch(a.G.number(b,z,Fe)),this._rolling&&u.setRoll(a.G.number(w,O,Fe)),this._padding&&(u.interpolatePadding(k,N,Fe),Z=u.centerPoint.add(j)),se.easeFunc(Fe,Je,Ze,Z),this.terrain&&!t.freezeElevation&&this._updateElevation(Fe),this._applyUpdatedTransform(u),this._fireMoveEvents(n)}),(()=>{this.terrain&&t.freezeElevation&&this._finalizeElevation(),this._afterEase(n)}),t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,n){var u;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){let m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,n)}return t||(u=this.handlers)===null||u===void 0||u.stop(!1),this}_ease(t,n,u){u.animate===!1||u.duration===0?(t(1),n()):(this._easeStart=te(),this._easeOptions=u,this._onEaseFrame=t,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(t,n){t=a.W(t,-180,180);let u=Math.abs(t-n);return Math.abs(t-360-n)<u&&(t-=360),Math.abs(t+360-n)<u&&(t+=360),t}queryTerrainElevation(t){return this.terrain?this.terrain.getElevationForLngLat(a.V.convert(t)):null}}let Zh={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class $h{constructor(t=Zh){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=n=>{!n||n.sourceDataType!=="metadata"&&n.sourceDataType!=="visibility"&&n.dataType!=="style"&&n.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=t}getDefaultPosition(){return"bottom-right"}onAdd(t){return this._map=t,this._compact=this.options.compact,this._container=H.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=H.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=H.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){H.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(t,n){let u=this._map._getUIString(`AttributionControl.${n}`);t.title=u,t.setAttribute("aria-label",u)}_updateAttributions(){if(!this._map.style)return;let t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((m=>typeof m!="string"?"":m))):typeof this.options.customAttribution=="string"&&t.push(this.options.customAttribution)),this._map.style.stylesheet){let m=this._map.style.stylesheet;this.styleOwner=m.owner,this.styleId=m.id}let n=this._map.style.tileManagers;for(let m in n){let b=n[m];if(b.used||b.usedForTerrain){let w=b.getSource();w.attribution&&t.indexOf(w.attribution)<0&&t.push(w.attribution)}}t=t.filter((m=>String(m).trim())),t.sort(((m,b)=>m.length-b.length)),t=t.filter(((m,b)=>{for(let w=b+1;w<t.length;w++)if(t[w].indexOf(m)>=0)return!1;return!0}));let u=t.join(" | ");u!==this._attribHTML&&(this._attribHTML=u,t.length?(this._innerContainer.innerHTML=H.sanitize(u),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class fl{constructor(t={}){this._updateCompact=()=>{let n=this._container.children;if(n.length){let u=n[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&u.classList.add("maplibregl-compact"):u.classList.remove("maplibregl-compact")}},this.options=t}getDefaultPosition(){return"bottom-left"}onAdd(t){this._map=t,this._compact=this.options&&this.options.compact,this._container=H.create("div","maplibregl-ctrl");let n=H.create("a","maplibregl-ctrl-logo");return n.target="_blank",n.rel="noopener nofollow",n.href="https://maplibre.org/",n.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),n.setAttribute("rel","noopener nofollow"),this._container.appendChild(n),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){H.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Ki{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){let n=++this._id;return this._queue.push({callback:t,id:n,cancelled:!1}),n}remove(t){let n=this._currentlyRunning,u=n?this._queue.concat(n):this._queue;for(let m of u)if(m.id===t)return void(m.cancelled=!0)}run(t=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");let n=this._currentlyRunning=this._queue;this._queue=[];for(let u of n)if(!u.cancelled&&(u.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var cr=a.aV([{name:"a_pos3d",type:"Int16",components:3}]);class Hh extends a.E{constructor(t){super(),this._lastTilesetChange=te(),this.tileManager=t,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=t._source.tileSize*2**this.deltaZoom,t.usedForTerrain=!0,t.tileSize=this.tileSize}destruct(){this.tileManager.usedForTerrain=!1,this.tileManager.tileSize=null}getSource(){return this.tileManager._source}update(t,n){this.tileManager.update(t,n),this._renderableTilesKeys=[];let u={};for(let m of $i(t,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:n,calculateTileZoom:this.tileManager._source.calculateTileZoom}))u[m.key]=!0,this._renderableTilesKeys.push(m.key),this._tiles[m.key]||(m.terrainRttPosMatrix32f=new Float64Array(16),a.c8(m.terrainRttPosMatrix32f,0,a.a5,a.a5,0,0,1),this._tiles[m.key]=new Xe(m,this.tileSize),this._lastTilesetChange=te());for(let m in this._tiles)u[m]||delete this._tiles[m]}freeRtt(t){for(let n in this._tiles){let u=this._tiles[n];(!t||u.tileID.equals(t)||u.tileID.isChildOf(t)||t.isChildOf(u.tileID))&&(u.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((t=>this.getTileByID(t)))}getTileByID(t){return this._tiles[t]}getTerrainCoords(t,n){return n?this._getTerrainCoordsForTileRanges(t,n):this._getTerrainCoordsForRegularTile(t)}_getTerrainCoordsForRegularTile(t){let n={};for(let u of this._renderableTilesKeys){let m=this._tiles[u].tileID,b=t.clone(),w=a.bl();if(m.canonical.equals(t.canonical))a.c8(w,0,a.a5,a.a5,0,0,1);else if(m.canonical.isChildOf(t.canonical)){let k=m.canonical.z-t.canonical.z,E=m.canonical.x-(m.canonical.x>>k<<k),z=m.canonical.y-(m.canonical.y>>k<<k),O=a.a5>>k;a.c8(w,0,O,O,0,0,1),a.O(w,w,[-E*O,-z*O,0])}else{if(!t.canonical.isChildOf(m.canonical))continue;{let k=t.canonical.z-m.canonical.z,E=t.canonical.x-(t.canonical.x>>k<<k),z=t.canonical.y-(t.canonical.y>>k<<k),O=a.a5>>k;a.c8(w,0,a.a5,a.a5,0,0,1),a.O(w,w,[E*O,z*O,0]),a.Q(w,w,[1/2**k,1/2**k,0])}}b.terrainRttPosMatrix32f=new Float32Array(w),n[u]=b}return n}_getTerrainCoordsForTileRanges(t,n){let u={};for(let m of this._renderableTilesKeys){let b=this._tiles[m].tileID;if(!this._isWithinTileRanges(b,n))continue;let w=t.clone(),k=a.bl();if(b.canonical.z===t.canonical.z){let E=t.canonical.x-b.canonical.x,z=t.canonical.y-b.canonical.y;a.c8(k,0,a.a5,a.a5,0,0,1),a.O(k,k,[E*a.a5,z*a.a5,0])}else if(b.canonical.z>t.canonical.z){let E=b.canonical.z-t.canonical.z,z=b.canonical.x-(b.canonical.x>>E<<E),O=b.canonical.y-(b.canonical.y>>E<<E),N=t.canonical.x-(b.canonical.x>>E),j=t.canonical.y-(b.canonical.y>>E),Z=a.a5>>E;a.c8(k,0,Z,Z,0,0,1),a.O(k,k,[-z*Z+N*a.a5,-O*Z+j*a.a5,0])}else{let E=t.canonical.z-b.canonical.z,z=t.canonical.x-(t.canonical.x>>E<<E),O=t.canonical.y-(t.canonical.y>>E<<E),N=(t.canonical.x>>E)-b.canonical.x,j=(t.canonical.y>>E)-b.canonical.y,Z=a.a5<<E;a.c8(k,0,Z,Z,0,0,1),a.O(k,k,[z*a.a5+N*Z,O*a.a5+j*Z,0])}w.terrainRttPosMatrix32f=new Float32Array(k),u[m]=w}return u}getSourceTile(t,n){let u=this.tileManager._source,m=t.overscaledZ-this.deltaZoom;if(m>u.maxzoom&&(m=u.maxzoom),m<u.minzoom)return;this._sourceTileCache[t.key]||(this._sourceTileCache[t.key]=t.scaledTo(m).key);let b=this.findTileInCaches(this._sourceTileCache[t.key]);if(!(b!=null&&b.dem)&&n)for(;m>=u.minzoom&&!(b!=null&&b.dem);)b=this.findTileInCaches(t.scaledTo(m--).key);return b}findTileInCaches(t){let n=this.tileManager.getTileByID(t);return n||(n=this.tileManager._outOfViewCache.getByKey(t),n)}anyTilesAfterTime(t=Date.now()){return this._lastTilesetChange>=t}_isWithinTileRanges(t,n){return n[t.canonical.z]&&t.canonical.x>=n[t.canonical.z].minTileX&&t.canonical.x<=n[t.canonical.z].maxTileX&&t.canonical.y>=n[t.canonical.z].minTileY&&t.canonical.y<=n[t.canonical.z].maxTileY}}class tc{constructor(t,n,u){this._meshCache={},this.painter=t,this.tileManager=new Hh(n),this.options=u,this.exaggeration=typeof u.exaggeration=="number"?u.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(t,n,u,m=a.a5){var b;if(!(n>=0&&n<m&&u>=0&&u<m))return 0;let w=this.getTerrainData(t),k=(b=w.tile)===null||b===void 0?void 0:b.dem;if(!k)return 0;let E=a.cD([],[n/m*a.a5,u/m*a.a5],w.u_terrain_matrix),z=[E[0]*k.dim,E[1]*k.dim],O=Math.floor(z[0]),N=Math.floor(z[1]),j=z[0]-O,Z=z[1]-N;return k.get(O,N)*(1-j)*(1-Z)+k.get(O+1,N)*j*(1-Z)+k.get(O,N+1)*(1-j)*Z+k.get(O+1,N+1)*j*Z}getElevationForLngLatZoom(t,n){if(!a.cE(n,t.wrap()))return 0;let{tileID:u,mercatorX:m,mercatorY:b}=this._getOverscaledTileIDFromLngLatZoom(t,n);return this.getElevation(u,m%a.a5,b%a.a5,a.a5)}getElevationForLngLat(t){return this.getElevationForLngLatZoom(t,this.tileManager.maxzoom)}getElevation(t,n,u,m=a.a5){return this.getDEMElevation(t,n,u,m)*this.exaggeration}getTerrainData(t){if(!this._emptyDemTexture){let m=this.painter.context,b=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new a.T(m,b,m.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new a.T(m,new a.R({width:1,height:1}),m.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.as([])}let n=this.tileManager.getSourceTile(t,!0);if(n&&n.dem&&(!n.demTexture||n.needsTerrainPrepare)){let m=this.painter.context;n.demTexture=this.painter.getTileTexture(n.dem.stride),n.demTexture?n.demTexture.update(n.dem.getPixels(),{premultiply:!1}):n.demTexture=new a.T(m,n.dem.getPixels(),m.gl.RGBA,{premultiply:!1}),n.demTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),n.needsTerrainPrepare=!1}let u=n&&n+n.tileID.key+t.key;if(u&&!this._demMatrixCache[u]){let m=this.tileManager.getSource().maxzoom,b=t.canonical.z-n.tileID.canonical.z;t.overscaledZ>t.canonical.z&&(t.canonical.z>=m?b=t.canonical.z-m:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));let w=t.canonical.x-(t.canonical.x>>b<<b),k=t.canonical.y-(t.canonical.y>>b<<b),E=a.cF(new Float64Array(16),[1/(a.a5<<b),1/(a.a5<<b),0]);a.O(E,E,[w*a.a5,k*a.a5,0]),this._demMatrixCache[t.key]={matrix:E,coord:t}}return{u_depth:2,u_terrain:3,u_terrain_dim:n&&n.dem&&n.dem.dim||1,u_terrain_matrix:u?this._demMatrixCache[t.key].matrix:this._emptyDemMatrix,u_terrain_unpack:n&&n.dem&&n.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(n&&n.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:n}}getFramebuffer(t){let n=this.painter,u=n.width/devicePixelRatio,m=n.height/devicePixelRatio;return!this._fbo||this._fbo.width===u&&this._fbo.height===m||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new a.T(n.context,{width:u,height:m,data:null},n.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(n.context.gl.NEAREST,n.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new a.T(n.context,{width:u,height:m,data:null},n.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(n.context.gl.NEAREST,n.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=n.context.createFramebuffer(u,m,!0,!1),this._fbo.depthAttachment.set(n.context.createRenderbuffer(n.context.gl.DEPTH_COMPONENT16,u,m))),this._fbo.colorAttachment.set(t==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){let t=this.painter.context;if(this._coordsTexture)return this._coordsTexture;let n=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let b=0,w=0;b<this._coordsTextureSize;b++)for(let k=0;k<this._coordsTextureSize;k++,w+=4)n[w+0]=255&k,n[w+1]=255&b,n[w+2]=k>>8<<4|b>>8,n[w+3]=0;let u=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(n.buffer)),m=new a.T(t,u,t.gl.RGBA,{premultiply:!1});return m.bind(t.gl.NEAREST,t.gl.CLAMP_TO_EDGE),this._coordsTexture=m,m}pointCoordinate(t){this.painter.maybeDrawDepthAndCoords(!0);let n=new Uint8Array(4),u=this.painter.context,m=u.gl,b=Math.round(t.x*this.painter.pixelRatio/devicePixelRatio),w=Math.round(t.y*this.painter.pixelRatio/devicePixelRatio),k=Math.round(this.painter.height/devicePixelRatio);u.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),m.readPixels(b,k-w-1,1,1,m.RGBA,m.UNSIGNED_BYTE,n),u.bindFramebuffer.set(null);let E=n[0]+(n[2]>>4<<8),z=n[1]+((15&n[2])<<8),O=this.coordsIndex[255-n[3]],N=O&&this.tileManager.getTileByID(O);if(!N)return null;let j=this._coordsTextureSize,Z=(1<<N.tileID.canonical.z)*j;return new a.ab((N.tileID.canonical.x*j+E)/Z+N.tileID.wrap,(N.tileID.canonical.y*j+z)/Z,this.getElevation(N.tileID,E,z,j))}depthAtPoint(t){let n=new Uint8Array(4),u=this.painter.context,m=u.gl;return u.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),m.readPixels(t.x,this.painter.height/devicePixelRatio-t.y-1,1,1,m.RGBA,m.UNSIGNED_BYTE,n),u.bindFramebuffer.set(null),(n[0]/16777216+n[1]/65536+n[2]/256+n[3])/256}getTerrainMesh(t){var n;let u=((n=this.painter.style.projection)===null||n===void 0?void 0:n.transitionState)>0,m=u&&t.canonical.y===0,b=u&&t.canonical.y===(1<<t.canonical.z)-1,w=`m_${m?"n":""}_${b?"s":""}`;if(this._meshCache[w])return this._meshCache[w];let k=this.painter.context,E=new a.cG,z=new a.aZ,O=this.meshSize,N=a.a5/O,j=O*O;for(let pe=0;pe<=O;pe++)for(let Te=0;Te<=O;Te++)E.emplaceBack(Te*N,pe*N,0);for(let pe=0;pe<j;pe+=O+1)for(let Te=0;Te<O;Te++)z.emplaceBack(Te+pe,O+Te+pe+1,O+Te+pe+2),z.emplaceBack(Te+pe,O+Te+pe+2,Te+pe+1);let Z=E.length,Q=Z+(O+1),se=(O+1)*O,le=m?a.bs:0,oe=m?0:1,ce=b?a.bt:a.a5,me=b?0:1;for(let pe=0;pe<=O;pe++)E.emplaceBack(pe*N,le,oe);for(let pe=0;pe<=O;pe++)E.emplaceBack(pe*N,ce,me);for(let pe=0;pe<O;pe++)z.emplaceBack(se+pe,Q+pe,Q+pe+1),z.emplaceBack(se+pe,Q+pe+1,se+pe+1),z.emplaceBack(0+pe,Z+pe+1,Z+pe),z.emplaceBack(0+pe,0+pe+1,Z+pe+1);let de=E.length,ge=de+2*(O+1);for(let pe of[0,1])for(let Te=0;Te<=O;Te++)for(let Re of[0,1])E.emplaceBack(pe*a.a5,Te*N,Re);for(let pe=0;pe<2*O;pe+=2)z.emplaceBack(de+pe,de+pe+1,de+pe+3),z.emplaceBack(de+pe,de+pe+3,de+pe+2),z.emplaceBack(ge+pe,ge+pe+3,ge+pe+1),z.emplaceBack(ge+pe,ge+pe+2,ge+pe+3);let xe=new xi(k.createVertexBuffer(E,cr.members),k.createIndexBuffer(z),a.aY.simpleSegment(0,0,E.length,z.length));return this._meshCache[w]=xe,xe}getMeshFrameDelta(t){return 2*Math.PI*a.bF/Math.pow(2,Math.max(t,0))/5}getMinTileElevationForLngLatZoom(t,n){var u;if(!a.cE(n,t.wrap()))return 0;let{tileID:m}=this._getOverscaledTileIDFromLngLatZoom(t,n);return(u=this.getMinMaxElevation(m).minElevation)!==null&&u!==void 0?u:0}getMinMaxElevation(t){let n=this.getTerrainData(t).tile,u={minElevation:null,maxElevation:null};return n&&n.dem&&(u.minElevation=n.dem.min*this.exaggeration,u.maxElevation=n.dem.max*this.exaggeration),u}_getOverscaledTileIDFromLngLatZoom(t,n){let u=a.ab.fromLngLat(t.wrap()),m=(1<<n)*a.a5,b=u.x*m,w=u.y*m,k=Math.floor(b/a.a5),E=Math.floor(w/a.a5);return{tileID:new a.a2(n,0,n,k,E),mercatorX:b,mercatorY:w}}}class Yc{constructor(t,n,u){this._context=t,this._size=n,this._tileSize=u,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(let t of this._objects)t.texture.destroy(),t.fbo.destroy()}_createObject(t){let n=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),u=new a.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return u.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),n.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),n.colorAttachment.set(u.texture),{id:t,fbo:n,texture:u,stamp:-1,inUse:!1}}getObjectForId(t){return this._objects[t]}useObject(t){t.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((n=>t.id!==n)),this._recentlyUsed.push(t.id)}stampObject(t){t.stamp=++this._stamp}getOrCreateFreeObject(){for(let n of this._recentlyUsed)if(!this._objects[n].inUse)return this._objects[n];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");let t=this._createObject(this._objects.length);return this._objects.push(t),t}freeObject(t){t.inUse=!1}freeAllObjects(){for(let t of this._objects)this.freeObject(t)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((t=>!t.inUse))===!1}}let $s={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class fd{constructor(t,n){this.painter=t,this.terrain=n,this.pool=new Yc(t.context,30,n.tileManager.tileSize*n.qualityFactor)}destruct(){this.pool.destruct()}getTexture(t){return this.pool.getObjectForId(t.rtt[this._stacks.length-1].id).texture}prepareForRender(t,n){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.tileManager.getRenderableTiles(),this._renderableLayerIds=t._order.filter((u=>!t._layers[u].isHidden(n))),this._coordsAscending={};for(let u in t.tileManagers){this._coordsAscending[u]={};let m=t.tileManagers[u].getVisibleCoordinates(),b=t.tileManagers[u].getSource(),w=b instanceof Xr?b.terrainTileRanges:null;for(let k of m){let E=this.terrain.tileManager.getTerrainCoords(k,w);for(let z in E)this._coordsAscending[u][z]||(this._coordsAscending[u][z]=[]),this._coordsAscending[u][z].push(E[z])}}this._coordsAscendingStr={};for(let u of t._order){let m=t._layers[u],b=m.source;if($s[m.type]&&!this._coordsAscendingStr[b]){this._coordsAscendingStr[b]={};for(let w in this._coordsAscending[b])this._coordsAscendingStr[b][w]=this._coordsAscending[b][w].map((k=>k.key)).sort().join()}}for(let u of this._renderableTiles)for(let m in this._coordsAscendingStr){let b=this._coordsAscendingStr[m][u.tileID.key];b&&b!==u.rttCoords[m]&&(u.rtt=[])}}renderLayer(t,n){if(t.isHidden(this.painter.transform.zoom))return!1;let u=Object.assign(Object.assign({},n),{isRenderingToTexture:!0}),m=t.type,b=this.painter,w=this._renderableLayerIds[this._renderableLayerIds.length-1]===t.id;if($s[m]&&(this._prevType&&$s[this._prevType]||this._stacks.push([]),this._prevType=m,this._stacks[this._stacks.length-1].push(t.id),!w))return!0;if($s[this._prevType]||$s[m]&&w){this._prevType=m;let k=this._stacks.length-1,E=this._stacks[k]||[];for(let z of this._renderableTiles){if(this.pool.isFull()&&(rd(this.painter,this.terrain,this._rttTiles,u),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(z),z.rtt[k]){let N=this.pool.getObjectForId(z.rtt[k].id);if(N.stamp===z.rtt[k].stamp){this.pool.useObject(N);continue}}let O=this.pool.getOrCreateFreeObject();this.pool.useObject(O),this.pool.stampObject(O),z.rtt[k]={id:O.id,stamp:O.stamp},b.context.bindFramebuffer.set(O.fbo.framebuffer),b.context.clear({color:a.bq.transparent,stencil:0}),b.currentStencilSource=void 0;for(let N=0;N<E.length;N++){let j=b.style._layers[E[N]],Z=j.source?this._coordsAscending[j.source][z.tileID.key]:[z.tileID];b.context.viewport.set([0,0,O.fbo.width,O.fbo.height]),b._renderTileClippingMasks(j,Z,!0),b.renderLayer(b,b.style.tileManagers[j.source],j,Z,u),j.source&&(z.rttCoords[j.source]=this._coordsAscendingStr[j.source][z.tileID.key])}}return rd(this.painter,this.terrain,this._rttTiles,u),this._rttTiles=[],this.pool.freeAllObjects(),$s[m]}return!1}}let md={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},ic=T,Xc={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Zh,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.c.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,transformConstrain:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,reduceMotion:void 0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0,experimentalZoomLevelsToOverscale:void 0},gd={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class yd{constructor(t,n,u=!1){this.mousedown=b=>{this.startMove(b,H.mousePos(this.element,b)),H.addEventListener(window,"mousemove",this.mousemove),H.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=b=>{this.move(b,H.mousePos(this.element,b))},this.mouseup=b=>{this._rotatePitchHandler.dragEnd(b),this.offTemp()},this.touchstart=b=>{b.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=H.touchPos(this.element,b.targetTouches)[0],this.startMove(b,this._startPos),H.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),H.addEventListener(window,"touchend",this.touchend))},this.touchmove=b=>{b.targetTouches.length!==1?this.reset():(this._lastPos=H.touchPos(this.element,b.targetTouches)[0],this.move(b,this._lastPos))},this.touchend=b=>{b.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=n;let m=new jh;this._rotatePitchHandler=new To({clickTolerance:3,move:(b,w)=>{let k=n.getBoundingClientRect(),E=new a.P((k.bottom-k.top)/2,(k.right-k.left)/2);return{bearingDelta:a.cy(new a.P(b.x,w.y),w,E),pitchDelta:u?-.5*(w.y-b.y):void 0}},moveStateManager:m,enable:!0,assignEvents:()=>{}}),this.map=t,H.addEventListener(n,"mousedown",this.mousedown),H.addEventListener(n,"touchstart",this.touchstart,{passive:!1}),H.addEventListener(n,"touchcancel",this.reset)}startMove(t,n){this._rotatePitchHandler.dragStart(t,n),H.disableDrag()}move(t,n){let u=this.map,{bearingDelta:m,pitchDelta:b}=this._rotatePitchHandler.dragMove(t,n)||{};m&&u.setBearing(u.getBearing()+m),b&&u.setPitch(u.getPitch()+b)}off(){let t=this.element;H.removeEventListener(t,"mousedown",this.mousedown),H.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),H.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),H.removeEventListener(window,"touchend",this.touchend),H.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}offTemp(){H.enableDrag(),H.removeEventListener(window,"mousemove",this.mousemove),H.removeEventListener(window,"mouseup",this.mouseup),H.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),H.removeEventListener(window,"touchend",this.touchend)}}let fs;function Kc(_,t,n,u=!1){if(u||!n.getCoveringTilesDetailsProvider().allowWorldCopies())return _==null?void 0:_.wrap();let m=new a.V(_.lng,_.lat);if(_=new a.V(_.lng,_.lat),t){let b=new a.V(_.lng-360,_.lat),w=new a.V(_.lng+360,_.lat),k=n.locationToScreenPoint(_).distSqr(t);n.locationToScreenPoint(b).distSqr(t)<k?_=b:n.locationToScreenPoint(w).distSqr(t)<k&&(_=w)}for(;Math.abs(_.lng-n.center.lng)>180;){let b=n.locationToScreenPoint(_);if(b.x>=0&&b.y>=0&&b.x<=n.width&&b.y<=n.height)break;_.lng>n.center.lng?_.lng-=360:_.lng+=360}return _.lng!==m.lng&&n.isPointOnMapSurface(n.locationToScreenPoint(_))?_:m}let rc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Qc(_,t,n){let u=_.classList;for(let m in rc)u.remove(`maplibregl-${n}-anchor-${m}`);u.add(`maplibregl-${n}-anchor-${t}`)}class nc extends a.E{constructor(t){if(super(),this._onKeyPress=n=>{let u=n.code,m=n.charCode||n.keyCode;u!=="Space"&&u!=="Enter"&&m!==32&&m!==13||this.togglePopup()},this._onMapClick=n=>{let u=n.originalEvent.target,m=this._element;this._popup&&(u===m||m.contains(u))&&this.togglePopup()},this._update=n=>{if(!this._map)return;let u=this._map.loaded()&&!this._map.isMoving();((n==null?void 0:n.type)==="terrain"||(n==null?void 0:n.type)==="render"&&!u)&&this._map.once("render",this._update),this._lngLat=Kc(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let m="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?m=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(m=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let b="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?b="rotateX(0deg)":this._pitchAlignment==="map"&&(b=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||n&&n.type!=="moveend"||(this._pos=this._pos.round()),H.setTransform(this._element,`${rc[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${b} ${m}`),re.frameAsync(new AbortController).then((()=>{this._updateOpacity(n&&n.type==="moveend")})).catch((()=>{}))},this._onMove=n=>{if(!this._isDragging){let u=this._clickTolerance||this._map._clickTolerance;this._isDragging=n.point.dist(this._pointerdownPos)>=u}this._isDragging&&(this._pos=n.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.l("dragstart"))),this.fire(new a.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.l("dragend")),this._state="inactive"},this._addDragHandler=n=>{this._element.contains(n.originalEvent.target)&&(n.preventDefault(),this._positionDelta=n.point.sub(this._pos).add(this._offset),this._pointerdownPos=n.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._subpixelPositioning=t&&t.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&t.pitchAlignment!=="auto"?t.pitchAlignment:this._rotationAlignment,this.setOpacity(t==null?void 0:t.opacity,t==null?void 0:t.opacityWhenCovered),t&&t.element)this._element=t.element,this._offset=a.P.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=H.create("div");let n=H.createNS("http://www.w3.org/2000/svg","svg"),u=41,m=27;n.setAttributeNS(null,"display","block"),n.setAttributeNS(null,"height",`${u}px`),n.setAttributeNS(null,"width",`${m}px`),n.setAttributeNS(null,"viewBox",`0 0 ${m} ${u}`);let b=H.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"stroke","none"),b.setAttributeNS(null,"stroke-width","1"),b.setAttributeNS(null,"fill","none"),b.setAttributeNS(null,"fill-rule","evenodd");let w=H.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"fill-rule","nonzero");let k=H.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"transform","translate(3.0, 29.0)"),k.setAttributeNS(null,"fill","#000000");let E=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(let oe of E){let ce=H.createNS("http://www.w3.org/2000/svg","ellipse");ce.setAttributeNS(null,"opacity","0.04"),ce.setAttributeNS(null,"cx","10.5"),ce.setAttributeNS(null,"cy","5.80029008"),ce.setAttributeNS(null,"rx",oe.rx),ce.setAttributeNS(null,"ry",oe.ry),k.appendChild(ce)}let z=H.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill",this._color);let O=H.createNS("http://www.w3.org/2000/svg","path");O.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),z.appendChild(O);let N=H.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"opacity","0.25"),N.setAttributeNS(null,"fill","#000000");let j=H.createNS("http://www.w3.org/2000/svg","path");j.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),N.appendChild(j);let Z=H.createNS("http://www.w3.org/2000/svg","g");Z.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Z.setAttributeNS(null,"fill","#FFFFFF");let Q=H.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"transform","translate(8.0, 8.0)");let se=H.createNS("http://www.w3.org/2000/svg","circle");se.setAttributeNS(null,"fill","#000000"),se.setAttributeNS(null,"opacity","0.25"),se.setAttributeNS(null,"cx","5.5"),se.setAttributeNS(null,"cy","5.5"),se.setAttributeNS(null,"r","5.4999962");let le=H.createNS("http://www.w3.org/2000/svg","circle");le.setAttributeNS(null,"fill","#FFFFFF"),le.setAttributeNS(null,"cx","5.5"),le.setAttributeNS(null,"cy","5.5"),le.setAttributeNS(null,"r","5.4999962"),Q.appendChild(se),Q.appendChild(le),w.appendChild(k),w.appendChild(z),w.appendChild(N),w.appendChild(Z),w.appendChild(Q),n.appendChild(w),n.setAttributeNS(null,"height",u*this._scale+"px"),n.setAttributeNS(null,"width",m*this._scale+"px"),this._element.appendChild(n),this._offset=a.P.convert(t&&t.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(n=>{n.preventDefault()})),this._element.addEventListener("mousedown",(n=>{n.preventDefault()})),Qc(this._element,this._anchor,"marker"),t&&t.className)for(let n of t.className.split(" "))this._element.classList.add(n);this._popup=null}addTo(t){return this.remove(),this._map=t,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",t._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),t.on("terrain",this._update),t.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),H.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=a.V.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){let m=Math.abs(13.5)/Math.SQRT2;t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(38.1-13.5+m)],"bottom-right":[-m,-1*(38.1-13.5+m)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=t,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(t){return this._subpixelPositioning=t,this}getPopup(){return this._popup}togglePopup(){let t=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:t?(t.isOpen()?t.remove():(t.setLngLat(this._lngLat),t.addTo(this._map)),this):this}_updateOpacity(t=!1){var n,u;let m=(n=this._map)===null||n===void 0?void 0:n.terrain,b=this._map.transform.isLocationOccluded(this._lngLat);if(!m||b){let Z=b?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==Z&&(this._element.style.opacity=Z))}if(t)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}let w=this._map,k=w.terrain.depthAtPoint(this._pos),E=w.terrain.getElevationForLngLat(this._lngLat);if(w.transform.lngLatToCameraDepth(this._lngLat,E)-k<.006)return void(this._element.style.opacity=this._opacity);let z=-this._offset.y/w.transform.pixelsPerMeter,O=Math.sin(w.getPitch()*Math.PI/180)*z,N=w.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),j=w.transform.lngLatToCameraDepth(this._lngLat,E+O)-N>.006;!((u=this._popup)===null||u===void 0)&&u.isOpen()&&j&&this._popup.remove(),this._element.style.opacity=j?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(t){return this._offset=a.P.convert(t),this._update(),this}addClassName(t){this._element.classList.add(t)}removeClassName(t){this._element.classList.remove(t)}toggleClassName(t){return this._element.classList.toggle(t)}setDraggable(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t&&t!=="auto"?t:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(t,n){return(this._opacity===void 0||t===void 0&&n===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),t!==void 0&&(this._opacity=t),n!==void 0&&(this._opacityWhenCovered=n),this._map&&this._updateOpacity(!0),this}}let _d={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Po=0,Eo=!1,vd={maxWidth:100,unit:"metric"};function ac(_,t,n){let u=n&&n.maxWidth||100,m=_._container.clientHeight/2,b=_._container.clientWidth/2,w=_.unproject([b-u/2,m]),k=_.unproject([b+u/2,m]),E=Math.round(_.project(k).x-_.project(w).x),z=Math.min(u,E,_._container.clientWidth),O=w.distanceTo(k);if(n&&n.unit==="imperial"){let N=3.2808*O;N>5280?Ao(t,z,N/5280,_._getUIString("ScaleControl.Miles")):Ao(t,z,N,_._getUIString("ScaleControl.Feet"))}else n&&n.unit==="nautical"?Ao(t,z,O/1852,_._getUIString("ScaleControl.NauticalMiles")):O>=1e3?Ao(t,z,O/1e3,_._getUIString("ScaleControl.Kilometers")):Ao(t,z,O,_._getUIString("ScaleControl.Meters"))}function Ao(_,t,n,u){let m=(function(b){let w=Math.pow(10,`${Math.floor(b)}`.length-1),k=b/w;return k=k>=10?10:k>=5?5:k>=3?3:k>=2?2:k>=1?1:(function(E){let z=Math.pow(10,Math.ceil(-Math.log(E)/Math.LN10));return Math.round(E*z)/z})(k),w*k})(n);_.style.width=t*(m/n)+"px",_.innerHTML=`${m}&nbsp;${u}`}let bd={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},xd=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Jc(_){if(_){if(typeof _=="number"){let t=Math.round(Math.abs(_)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,_),"top-left":new a.P(t,t),"top-right":new a.P(-t,t),bottom:new a.P(0,-_),"bottom-left":new a.P(t,-t),"bottom-right":new a.P(-t,-t),left:new a.P(_,0),right:new a.P(-_,0)}}if(_ instanceof a.P||Array.isArray(_)){let t=a.P.convert(_);return{center:t,top:t,"top-left":t,"top-right":t,bottom:t,"bottom-left":t,"bottom-right":t,left:t,right:t}}return{center:a.P.convert(_.center||[0,0]),top:a.P.convert(_.top||[0,0]),"top-left":a.P.convert(_["top-left"]||[0,0]),"top-right":a.P.convert(_["top-right"]||[0,0]),bottom:a.P.convert(_.bottom||[0,0]),"bottom-left":a.P.convert(_["bottom-left"]||[0,0]),"bottom-right":a.P.convert(_["bottom-right"]||[0,0]),left:a.P.convert(_.left||[0,0]),right:a.P.convert(_.right||[0,0])}}return Jc(new a.P(0,0))}let wd=T;f.AJAXError=a.cJ,f.Event=a.l,f.Evented=a.E,f.LngLat=a.V,f.MercatorCoordinate=a.ab,f.Point=a.P,f.addProtocol=a.cK,f.config=a.c,f.removeProtocol=a.cL,f.AttributionControl=$h,f.BoxZoomHandler=od,f.CanvasSource=K,f.CooperativeGesturesHandler=pd,f.DoubleClickZoomHandler=Gh,f.DragPanHandler=ft,f.DragRotateHandler=xt,f.EdgeInsets=za,f.FullscreenControl=class extends a.E{constructor(_={}){super(),this._onFullscreenChange=()=>{var t;let n=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((t=n==null?void 0:n.shadowRoot)===null||t===void 0)&&t.fullscreenElement;)n=n.shadowRoot.fullscreenElement;n===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,_&&_.container&&(_.container instanceof HTMLElement?this._container=_.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=H.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){H.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){let _=this._fullscreenButton=H.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);H.create("span","maplibregl-ctrl-icon",_).setAttribute("aria-hidden","true"),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){let _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.title=_}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},f.GeoJSONSource=Ss,f.GeolocateControl=class extends a.E{constructor(_){super(),this._onSuccess=t=>{if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new a.l("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(t),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.l("geolocate",t)),this._finish()}},this._updateCamera=t=>{let n=new a.V(t.coords.longitude,t.coords.latitude),u=t.coords.accuracy,m=this._map.getBearing(),b=a.e({bearing:m},this.options.fitBoundsOptions),w=Oi.fromLngLat(n,u);this._map.fitBounds(w,b,{geolocateSource:!0})},this._updateMarker=t=>{if(t){let n=new a.V(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=t.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=t=>{if(this._map){if(t.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;let n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(t.code===3&&Eo)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.l("error",t)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this._geolocateButton=H.create("button","maplibregl-ctrl-geolocate",this._container),H.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=t=>{if(this._map){if(t===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");let n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}else{let n=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=H.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new nc({element:this._dotElement}),this._circleElement=H.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new nc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(n=>{let u=(n==null?void 0:n[0])instanceof ResizeObserverEntry;n.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.l("trackuserlocationend")),this.fire(new a.l("userlocationlostfocus")))}))}},this.options=a.e({},_d,_)}onAdd(_){return this._map=_,this._container=H.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return a._(this,arguments,void 0,(function*(t=!1){if(fs!==void 0&&!t)return fs;if(window.navigator.permissions===void 0)return fs=!!window.navigator.geolocation,fs;try{fs=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch(n){fs=!!window.navigator.geolocation}return fs}))})().then((t=>this._finishSetupUI(t))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),H.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,Po=0,Eo=!1}_isOutOfMapMaxBounds(_){let t=this._map.getMaxBounds(),n=_.coords;return t&&(n.longitude<t.getWest()||n.longitude>t.getEast()||n.latitude<t.getSouth()||n.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){let _=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&_))return;let t=this._map.project(_),n=this._map.unproject([t.x+100,t.y]),u=_.distanceTo(n)/100,m=2*this._accuracy/u;this._circleElement.style.width=`${m.toFixed(2)}px`,this._circleElement.style.height=`${m.toFixed(2)}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Po--,Eo=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.l("trackuserlocationstart")),this.fire(new a.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let _;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Po++,Po>1?(_={maximumAge:6e5,timeout:0},Eo=!0):(_=this.options.positionOptions,Eo=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,_)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},f.GlobeControl=class{constructor(){this._toggleProjection=()=>{var _;let t=(_=this._map.getProjection())===null||_===void 0?void 0:_.type;this._map.setProjection(t!=="mercator"&&t?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var _;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((_=this._map.getProjection())===null||_===void 0?void 0:_.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(_){return this._map=_,this._container=H.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=H.create("button","maplibregl-ctrl-globe",this._container),H.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){H.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},f.Hash=$l,f.ImageSource=Xr,f.KeyboardHandler=ec,f.LngLatBounds=Oi,f.LogoControl=fl,f.Map=class extends nm{constructor(_){var t,n;a.cH.mark(a.cI.create);let u=Object.assign(Object.assign(Object.assign({},Xc),_),{canvasContextAttributes:Object.assign(Object.assign({},Xc.canvasContextAttributes),_.canvasContextAttributes)});if(u.minZoom!=null&&u.maxZoom!=null&&u.minZoom>u.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(u.minPitch!=null&&u.maxPitch!=null&&u.minPitch>u.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(u.minPitch!=null&&u.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(u.maxPitch!=null&&u.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");let m=new La,b=new Yt;if(u.minZoom!==void 0&&m.setMinZoom(u.minZoom),u.maxZoom!==void 0&&m.setMaxZoom(u.maxZoom),u.minPitch!==void 0&&m.setMinPitch(u.minPitch),u.maxPitch!==void 0&&m.setMaxPitch(u.maxPitch),u.renderWorldCopies!==void 0&&m.setRenderWorldCopies(u.renderWorldCopies),u.transformConstrain!==null&&m.setConstrainOverride(u.transformConstrain),super(m,b,{bearingSnap:u.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Ki,this._controls=[],this._mapId=a.ah(),this._lostContextStyle={style:null,images:null},this._contextLost=k=>{k.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.painter.destroy();for(let E of Object.values(this.style._layers))if(E.type==="custom"&&console.warn(`Custom layer with id '${E.id}' cannot be restored after WebGL context loss. You will need to re-add it manually after context restoration.`),E._listeners)for(let[z]of Object.entries(E._listeners))console.warn(`Custom layer with id '${E.id}' had event listeners for event '${z}' which cannot be restored after WebGL context loss. You will need to re-add them manually after context restoration.`);this._lostContextStyle=this._getStyleAndImages(),this.style.destroy(),this.style=null,this.fire(new a.l("webglcontextlost",{originalEvent:k}))},this._contextRestored=k=>{this._lostContextStyle.style&&this.setStyle(this._lostContextStyle.style,{diff:!1}),this._lostContextStyle.images&&(this.style.imageManager.images=this._lostContextStyle.images),this._setupPainter(),this.resize(),this._update(),this.fire(new a.l("webglcontextrestored",{originalEvent:k}))},this._onMapScroll=k=>{if(k.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=u.interactive,this._maxTileCacheSize=u.maxTileCacheSize,this._maxTileCacheZoomLevels=u.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},u.canvasContextAttributes),this._trackResize=u.trackResize===!0,this._bearingSnap=u.bearingSnap,this._centerClampedToGround=u.centerClampedToGround,this._refreshExpiredTiles=u.refreshExpiredTiles===!0,this._fadeDuration=u.fadeDuration,this._crossSourceCollisions=u.crossSourceCollisions===!0,this._collectResourceTiming=u.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},md),u.locale),this._clickTolerance=u.clickTolerance,this._overridePixelRatio=u.pixelRatio,this._maxCanvasSize=u.maxCanvasSize,this._zoomLevelsToOverscale=u.experimentalZoomLevelsToOverscale,this.transformCameraUpdate=u.transformCameraUpdate,this.transformConstrain=u.transformConstrain,this.cancelPendingTileRequestsWhileZooming=u.cancelPendingTileRequestsWhileZooming===!0,u.reduceMotion!==void 0&&(re.prefersReducedMotion=u.reduceMotion),this._imageQueueHandle=Ct.addThrottleControl((()=>this.isMoving())),this._requestManager=new gt(u.transformRequest),typeof u.container=="string"){if(this._container=document.getElementById(u.container),!this._container)throw new Error(`Container '${u.container}' not found.`)}else{if(!(u.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=u.container}if(u.maxBounds&&this.setMaxBounds(u.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window!="undefined"){addEventListener("online",this._onWindowOnline,!1);let k=!1,E=ad((z=>{this._trackResize&&!this._removed&&(this.resize(z),this.redraw())}),50);this._resizeObserver=new ResizeObserver((z=>{k?E(z):k=!0})),this._resizeObserver.observe(this._container)}this.handlers=new Uh(this,u),this._hash=u.hash&&new $l(typeof u.hash=="string"&&u.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:u.center,elevation:u.elevation,zoom:u.zoom,bearing:u.bearing,pitch:u.pitch,roll:u.roll}),u.bounds&&(this.resize(),this.fitBounds(u.bounds,a.e({},u.fitBoundsOptions,{duration:0}))));let w=typeof u.style=="string"||((n=(t=u.style)===null||t===void 0?void 0:t.projection)===null||n===void 0?void 0:n.type)!=="globe";this.resize(null,w),this._localIdeographFontFamily=u.localIdeographFontFamily,this._validateStyle=u.validateStyle,u.style&&this.setStyle(u.style,{localIdeographFontFamily:u.localIdeographFontFamily}),u.attributionControl&&this.addControl(new $h(typeof u.attributionControl=="boolean"?void 0:u.attributionControl)),u.maplibreLogo&&this.addControl(new fl,u.logoPosition),this.on("style.load",(()=>{if(w||this._resizeTransform(),this.transform.unmodified){let k=a.U(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(k)}})),this.on("data",(k=>{this._update(k.dataType==="style"),this.fire(new a.l(`${k.dataType}data`,k))})),this.on("dataloading",(k=>{this.fire(new a.l(`${k.dataType}dataloading`,k))})),this.on("dataabort",(k=>{this.fire(new a.l("sourcedataabort",k))}))}_getMapId(){return this._mapId}setGlobalStateProperty(_,t){return this.style.setGlobalStateProperty(_,t),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(_,t){if(t===void 0&&(t=_.getDefaultPosition?_.getDefaultPosition():"top-right"),!_||!_.onAdd)return this.fire(new a.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));let n=_.onAdd(this);this._controls.push(_);let u=this._controlPositions[t];return t.indexOf("bottom")!==-1?u.insertBefore(n,u.firstChild):u.appendChild(n),this}removeControl(_){if(!_||!_.onRemove)return this.fire(new a.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));let t=this._controls.indexOf(_);return t>-1&&this._controls.splice(t,1),_.onRemove(this),this}hasControl(_){return this._controls.indexOf(_)>-1}coveringTiles(_){return $i(this.transform,_)}calculateCameraOptionsFromTo(_,t,n,u){return u==null&&this.terrain&&(u=this.terrain.getElevationForLngLat(n)),super.calculateCameraOptionsFromTo(_,t,n,u)}resize(_,t=!0){let[n,u]=this._containerDimensions(),m=this._getClampedPixelRatio(n,u);if(this._resizeCanvas(n,u,m),this.painter.resize(n,u,m),this.painter.overLimit()){let w=this.painter.context.gl;this._maxCanvasSize=[w.drawingBufferWidth,w.drawingBufferHeight];let k=this._getClampedPixelRatio(n,u);this._resizeCanvas(n,u,k),this.painter.resize(n,u,k)}this._resizeTransform(t);let b=!this._moving;return b&&(this.stop(),this.fire(new a.l("movestart",_)).fire(new a.l("move",_))),this.fire(new a.l("resize",_)),b&&this.fire(new a.l("moveend",_)),this}_resizeTransform(_=!0){var t;let[n,u]=this._containerDimensions();this.transform.resize(n,u,_),(t=this._requestedCameraState)===null||t===void 0||t.resize(n,u,_)}_getClampedPixelRatio(_,t){let{0:n,1:u}=this._maxCanvasSize,m=this.getPixelRatio(),b=_*m,w=t*m;return Math.min(b>n?n/b:1,w>u?u/w:1)*m}getPixelRatio(){var _;return(_=this._overridePixelRatio)!==null&&_!==void 0?_:devicePixelRatio}setPixelRatio(_){this._overridePixelRatio=_,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(_){return this.transform.setMaxBounds(Oi.convert(_)),this._update()}setMinZoom(_){if((_=_==null?-2:_)>=-2&&_<=this.transform.maxZoom)return this.transform.setMinZoom(_),this._update(),this.getZoom()<_&&this.setZoom(_),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_){if((_=_==null?22:_)>=this.transform.minZoom)return this.transform.setMaxZoom(_),this._update(),this.getZoom()>_&&this.setZoom(_),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_){if((_=_==null?0:_)<0)throw new Error("minPitch must be greater than or equal to 0");if(_>=0&&_<=this.transform.maxPitch)return this.transform.setMinPitch(_),this._update(),this.getPitch()<_&&this.setPitch(_),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_){if((_=_==null?60:_)>180)throw new Error("maxPitch must be less than or equal to 180");if(_>=this.transform.minPitch)return this.transform.setMaxPitch(_),this._update(),this.getPitch()>_&&this.setPitch(_),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_){return this.transform.setRenderWorldCopies(_),this._update()}setTransformConstrain(_){return this.transform.setConstrainOverride(_),this._update()}project(_){return this.transform.locationToScreenPoint(a.V.convert(_),this.style&&this.terrain)}unproject(_){return this.transform.screenPointToLocation(a.P.convert(_),this.terrain)}isMoving(){var _;return this._moving||((_=this.handlers)===null||_===void 0?void 0:_.isMoving())}isZooming(){var _;return this._zooming||((_=this.handlers)===null||_===void 0?void 0:_.isZooming())}isRotating(){var _;return this._rotating||((_=this.handlers)===null||_===void 0?void 0:_.isRotating())}_createDelegatedListener(_,t,n){if(_==="mouseenter"||_==="mouseover"){let u=!1;return{layers:t,listener:n,delegates:{mousemove:b=>{let w=t.filter((E=>this.getLayer(E))),k=w.length!==0?this.queryRenderedFeatures(b.point,{layers:w}):[];k.length?u||(u=!0,n.call(this,new qn(_,this,b.originalEvent,{features:k}))):u=!1},mouseout:()=>{u=!1}}}}if(_==="mouseleave"||_==="mouseout"){let u=!1;return{layers:t,listener:n,delegates:{mousemove:w=>{let k=t.filter((E=>this.getLayer(E)));(k.length!==0?this.queryRenderedFeatures(w.point,{layers:k}):[]).length?u=!0:u&&(u=!1,n.call(this,new qn(_,this,w.originalEvent)))},mouseout:w=>{u&&(u=!1,n.call(this,new qn(_,this,w.originalEvent)))}}}}{let u=m=>{let b=t.filter((k=>this.getLayer(k))),w=b.length!==0?this.queryRenderedFeatures(m.point,{layers:b}):[];w.length&&(m.features=w,n.call(this,m),delete m.features)};return{layers:t,listener:n,delegates:{[_]:u}}}}_saveDelegatedListener(_,t){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_]=this._delegatedListeners[_]||[],this._delegatedListeners[_].push(t)}_removeDelegatedListener(_,t,n){if(!this._delegatedListeners||!this._delegatedListeners[_])return;let u=this._delegatedListeners[_];for(let m=0;m<u.length;m++){let b=u[m];if(b.listener===n&&b.layers.length===t.length&&b.layers.every((w=>t.includes(w)))){for(let w in b.delegates)this.off(w,b.delegates[w]);return void u.splice(m,1)}}}on(_,t,n){if(n===void 0)return super.on(_,t);let u=typeof t=="string"?[t]:t,m=this._createDelegatedListener(_,u,n);this._saveDelegatedListener(_,m);for(let b in m.delegates)this.on(b,m.delegates[b]);return{unsubscribe:()=>{this._removeDelegatedListener(_,u,n)}}}once(_,t,n){if(n===void 0)return super.once(_,t);let u=typeof t=="string"?[t]:t,m=this._createDelegatedListener(_,u,n);for(let b in m.delegates){let w=m.delegates[b];m.delegates[b]=(...k)=>{this._removeDelegatedListener(_,u,n),w(...k)}}this._saveDelegatedListener(_,m);for(let b in m.delegates)this.once(b,m.delegates[b]);return this}off(_,t,n){return n===void 0?super.off(_,t):(this._removeDelegatedListener(_,typeof t=="string"?[t]:t,n),this)}queryRenderedFeatures(_,t){if(!this.style)return[];let n,u=_ instanceof a.P||Array.isArray(_),m=u?_:[[0,0],[this.transform.width,this.transform.height]];if(t=t||(u?{}:_)||{},m instanceof a.P||typeof m[0]=="number")n=[a.P.convert(m)];else{let b=a.P.convert(m[0]),w=a.P.convert(m[1]);n=[b,new a.P(w.x,b.y),w,new a.P(b.x,w.y),b]}return this.style.queryRenderedFeatures(n,t,this.transform)}querySourceFeatures(_,t){return this.style.querySourceFeatures(_,t)}setStyle(_,t){return(t=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},t)).diff!==!1&&t.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&_?(this._diffStyle(_,t),this):(this._localIdeographFontFamily=t.localIdeographFontFamily,this._updateStyle(_,t))}setTransformRequest(_){return this._requestManager.setTransformRequest(_),this}_getUIString(_){let t=this._locale[_];if(t==null)throw new Error(`Missing UI string '${_}'`);return t}_updateStyle(_,t){var n,u;if(t.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(_,t)));let m=this.style&&t.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!_)),_?(this.style=new ga(this,t||{}),this.style.setEventedParent(this,{style:this.style}),typeof _=="string"?this.style.loadURL(_,t,m):this.style.loadJSON(_,t,m),this):((u=(n=this.style)===null||n===void 0?void 0:n.projection)===null||u===void 0||u.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new ga(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(_,t){if(typeof _=="string"){let n=this._requestManager.transformRequest(_,"Style");a.j(n,new AbortController).then((u=>{this._updateDiff(u.data,t)})).catch((u=>{u&&this.fire(new a.k(u))}))}else typeof _=="object"&&this._updateDiff(_,t)}_updateDiff(_,t){try{this.style.setState(_,t)&&this._update(!0)}catch(n){a.w(`Unable to perform style diff: ${n.message||n.error||n}.  Rebuilding the style from scratch.`),this._updateStyle(_,t)}}getStyle(){if(this.style)return this.style.serialize()}_getStyleAndImages(){return this.style?{style:this.style.serialize(),images:this.style.imageManager.cloneImages()}:{style:null,images:{}}}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(_,t){return this._lazyInitEmptyStyle(),this.style.addSource(_,t),this._update(!0)}isSourceLoaded(_){let t=this.style&&this.style.tileManagers[_];if(t!==void 0)return t.loaded();this.fire(new a.k(new Error(`There is no tile manager with ID '${_}'`)))}setTerrain(_){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),_){let t=this.style.tileManagers[_.source];if(!t)throw new Error(`cannot load terrain, because there exists no source with ID: ${_.source}`);this.terrain===null&&t.reload();for(let n in this.style._layers){let u=this.style._layers[n];u.type==="hillshade"&&u.source===_.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),u.type==="color-relief"&&u.source===_.source&&a.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new tc(this.painter,t,_),this.painter.renderToTexture=new fd(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=n=>{var u;n.dataType==="style"?this.terrain.tileManager.freeRtt():n.dataType==="source"&&n.tile&&(n.sourceId!==_.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((u=n.source)===null||u===void 0?void 0:u.type)==="image"?this.terrain.tileManager.freeRtt():this.terrain.tileManager.freeRtt(n.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.tileManager.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new a.l("terrain",{terrain:_})),this}getTerrain(){var _,t;return(t=(_=this.terrain)===null||_===void 0?void 0:_.options)!==null&&t!==void 0?t:null}areTilesLoaded(){let _=this.style&&this.style.tileManagers;for(let t of Object.values(_))if(!t.areTilesLoaded())return!1;return!0}removeSource(_){return this.style.removeSource(_),this._update(!0)}getSource(_){return this.style.getSource(_)}setSourceTileLodParams(_,t,n){if(n){let u=this.getSource(n);if(!u)throw new Error(`There is no source with ID "${n}", cannot set LOD parameters`);u.calculateTileZoom=mi(Math.max(1,_),Math.max(1,t))}else for(let u in this.style.tileManagers)this.style.tileManagers[u].getSource().calculateTileZoom=mi(Math.max(1,_),Math.max(1,t));return this._update(!0),this}refreshTiles(_,t){let n=this.style.tileManagers[_];if(!n)throw new Error(`There is no tile manager with ID "${_}", cannot refresh tile`);t===void 0?n.reload(!0):n.refreshTiles(t.map((u=>new a.ae(u.z,u.x,u.y))))}addImage(_,t,n={}){let{pixelRatio:u=1,sdf:m=!1,stretchX:b,stretchY:w,content:k,textFitWidth:E,textFitHeight:z}=n;if(this._lazyInitEmptyStyle(),!(t instanceof HTMLImageElement||a.b(t))){if(t.width===void 0||t.height===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{let{width:O,height:N,data:j}=t,Z=t;return this.style.addImage(_,{data:new a.R({width:O,height:N},new Uint8Array(j)),pixelRatio:u,stretchX:b,stretchY:w,content:k,textFitWidth:E,textFitHeight:z,sdf:m,version:0,userImage:Z}),Z.onAdd&&Z.onAdd(this,_),this}}{let{width:O,height:N,data:j}=re.getImageData(t);this.style.addImage(_,{data:new a.R({width:O,height:N},j),pixelRatio:u,stretchX:b,stretchY:w,content:k,textFitWidth:E,textFitHeight:z,sdf:m,version:0})}}updateImage(_,t){let n=this.style.getImage(_);if(!n)return this.fire(new a.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));let u=t instanceof HTMLImageElement||a.b(t)?re.getImageData(t):t,{width:m,height:b,data:w}=u;if(m===void 0||b===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(m!==n.data.width||b!==n.data.height)return this.fire(new a.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));let k=!(t instanceof HTMLImageElement||a.b(t));return n.data.replace(w,k),this.style.updateImage(_,n),this}getImage(_){return this.style.getImage(_)}hasImage(_){return _?!!this.style.getImage(_):(this.fire(new a.k(new Error("Missing required image id"))),!1)}removeImage(_){this.style.removeImage(_)}loadImage(_){return Ct.getImage(this._requestManager.transformRequest(_,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(_,t){return this._lazyInitEmptyStyle(),this.style.addLayer(_,t),this._update(!0)}moveLayer(_,t){return this.style.moveLayer(_,t),this._update(!0)}removeLayer(_){return this.style.removeLayer(_),this._update(!0)}getLayer(_){return this.style.getLayer(_)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(_,t,n){return this.style.setLayerZoomRange(_,t,n),this._update(!0)}setFilter(_,t,n={}){return this.style.setFilter(_,t,n),this._update(!0)}getFilter(_){return this.style.getFilter(_)}setPaintProperty(_,t,n,u={}){return this.style.setPaintProperty(_,t,n,u),this._update(!0)}getPaintProperty(_,t){return this.style.getPaintProperty(_,t)}setLayoutProperty(_,t,n,u={}){return this.style.setLayoutProperty(_,t,n,u),this._update(!0)}getLayoutProperty(_,t){return this.style.getLayoutProperty(_,t)}setGlyphs(_,t={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(_,t),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(_,t,n={}){return this._lazyInitEmptyStyle(),this.style.addSprite(_,t,n,(u=>{u||this._update(!0)})),this}removeSprite(_){return this._lazyInitEmptyStyle(),this.style.removeSprite(_),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(_,t={}){return this._lazyInitEmptyStyle(),this.style.setSprite(_,t,(n=>{n||this._update(!0)})),this}setLight(_,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(_,t),this._update(!0)}getLight(){return this.style.getLight()}setSky(_,t={}){return this._lazyInitEmptyStyle(),this.style.setSky(_,t),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(_,t){return this.style.setFeatureState(_,t),this._update()}removeFeatureState(_,t){return this.style.removeFeatureState(_,t),this._update()}getFeatureState(_){return this.style.getFeatureState(_)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let _=0,t=0;return this._container&&(_=this._container.clientWidth||400,t=this._container.clientHeight||300),[_,t]}_setupContainer(){let _=this._container;_.classList.add("maplibregl-map");let t=this._canvasContainer=H.create("div","maplibregl-canvas-container",_);this._interactive&&t.classList.add("maplibregl-interactive"),this._canvas=H.create("canvas","maplibregl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");let n=this._containerDimensions(),u=this._getClampedPixelRatio(n[0],n[1]);this._resizeCanvas(n[0],n[1],u);let m=this._controlContainer=H.create("div","maplibregl-control-container",_),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((w=>{b[w]=H.create("div",`maplibregl-ctrl-${w} `,m)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(_,t,n){this._canvas.width=Math.floor(n*_),this._canvas.height=Math.floor(n*t),this._canvas.style.width=`${_}px`,this._canvas.style.height=`${t}px`}_setupPainter(){let _=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0}),t=null;this._canvas.addEventListener("webglcontextcreationerror",(u=>{t={requestedAttributes:_},u&&(t.statusMessage=u.statusMessage,t.type=u.type)}),{once:!0});let n=null;if(n=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,_):this._canvas.getContext("webgl2",_)||this._canvas.getContext("webgl",_),!n){let u="Failed to initialize WebGL";throw t?(t.message=u,new Error(JSON.stringify(t))):new Error(u)}this.painter=new Oh(n,this.transform),Se.testSupport(n)}migrateProjection(_,t){super.migrateProjection(_,t),this.painter.transform=_,this.fire(new a.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(_){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||_,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_){return this._update(),this._renderTaskQueue.add(_)}_cancelRenderFrame(_){this._renderTaskQueue.remove(_)}_render(_){var t,n,u,m,b;let w=this._idleTriggered?this._fadeDuration:0,k=((t=this.style.projection)===null||t===void 0?void 0:t.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(_),this._removed)return;let E=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;let N=this.transform.zoom,j=te();this.style.zoomHistory.update(N,j);let Z=new a.H(N,{now:j,fadeDuration:w,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Q=Z.crossFadingFactor();Q===1&&Q===this._crossFadingFactor||(E=!0,this._crossFadingFactor=Q),this.style.update(Z)}let z=((n=this.style.projection)===null||n===void 0?void 0:n.transitionState)>0!==k;(u=this.style.projection)===null||u===void 0||u.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((m=this.style.projection)===null||m===void 0?void 0:m.transitionState,(b=this.style.projection)===null||b===void 0?void 0:b.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||z)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.tileManager.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,w,this._crossSourceCollisions,z),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:w,showPadding:this.showPadding}),this.fire(new a.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.cH.mark(a.cI.load),this.fire(new a.l("load"))),this.style&&(this.style.hasTransitions()||E)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();let O=this._sourcesDirty||this._styleDirty||this._placementDirty;return O||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.l("idle")),!this._loaded||this._fullyLoaded||O||(this._fullyLoaded=!0,a.cH.mark(a.cI.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var _;this._hash&&this._hash.remove();for(let n of this._controls)n.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&removeEventListener("online",this._onWindowOnline,!1),Ct.removeThrottleControl(this._imageQueueHandle),(_=this._resizeObserver)===null||_===void 0||_.disconnect();let t=this.painter.context.gl.getExtension("WEBGL_lose_context");t!=null&&t.loseContext&&t.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),H.remove(this._canvasContainer),H.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),a.cH.clearMetrics(),this._removed=!0,this.fire(new a.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,re.frame(this._frameRequest,(_=>{a.cH.frame(_),this._frameRequest=null;try{this._render(_)}catch(t){if(!a.Z(t)&&!(function(n){return n.message===I})(t))throw t}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_){this._showPadding!==_&&(this._showPadding=_,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,_?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())}get repaint(){return!!this._repaint}set repaint(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_){this._vertices=_,this._update()}get version(){return ic}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(_){return this._lazyInitEmptyStyle(),this.style.setProjection(_),this._update(!0)}},f.MapMouseEvent=qn,f.MapTouchEvent=Xl,f.MapWheelEvent=sd,f.Marker=nc,f.NavigationControl=class{constructor(_){this._updateZoomButtons=()=>{let t=this._map.getZoom(),n=t===this._map.getMaxZoom(),u=t===this._map.getMinZoom();this._zoomInButton.disabled=n,this._zoomOutButton.disabled=u,this._zoomInButton.setAttribute("aria-disabled",n.toString()),this._zoomOutButton.setAttribute("aria-disabled",u.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(t,n)=>{let u=this._map._getUIString(`NavigationControl.${n}`);t.title=u,t.setAttribute("aria-label",u)},this.options=a.e({},gd,_),this._container=H.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(t=>this._map.zoomIn({},{originalEvent:t}))),H.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(t=>this._map.zoomOut({},{originalEvent:t}))),H.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(t=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})})),this._compassIcon=H.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new yd(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){H.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(_,t){let n=H.create("button",_,this._container);return n.type="button",n.addEventListener("click",t),n}},f.Popup=class extends a.E{constructor(_){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&H.remove(this._content),this._container&&(H.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.l("close"))),this),this._onMouseUp=t=>{this._update(t.point)},this._onMouseMove=t=>{this._update(t.point)},this._onDrag=t=>{this._update(t.point)},this._update=t=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=H.create("div","maplibregl-popup",this._map.getContainer()),this._tip=H.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(let w of this.options.className.split(" "))this._container.classList.add(w);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Kc(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!t)return;let n=this._flatPos=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&t?t:this._map.transform.locationToScreenPoint(this._lngLat));let u=this.options.anchor,m=Jc(this.options.offset);if(!u){let w=this._container.offsetWidth,k=this._container.offsetHeight,E;E=n.y+m.bottom.y<k?["top"]:n.y>this._map.transform.height-k?["bottom"]:[],n.x<w/2?E.push("left"):n.x>this._map.transform.width-w/2&&E.push("right"),u=E.length===0?"bottom":E.join("-")}let b=n.add(m[u]);this.options.subpixelPositioning||(b=b.round()),H.setTransform(this._container,`${rc[u]} translate(${b.x}px,${b.y}px)`),Qc(this._container,u,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(bd),_)}addTo(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(_){return this._lngLat=a.V.convert(_),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(_){return this.setDOMContent(document.createTextNode(_))}setHTML(_){let t=document.createDocumentFragment(),n=document.createElement("body"),u;for(n.innerHTML=_;u=n.firstChild,u;)t.appendChild(u);return this.setDOMContent(t)}getMaxWidth(){var _;return(_=this._container)===null||_===void 0?void 0:_.style.maxWidth}setMaxWidth(_){return this.options.maxWidth=_,this._update(),this}setDOMContent(_){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=H.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(_),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(_){return this._container&&this._container.classList.add(_),this}removeClassName(_){return this._container&&this._container.classList.remove(_),this}setOffset(_){return this.options.offset=_,this._update(),this}toggleClassName(_){if(this._container)return this._container.classList.toggle(_)}setSubpixelPositioning(_){this.options.subpixelPositioning=_}_createCloseButton(){this.options.closeButton&&(this._closeButton=H.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;let _=this._container.querySelector(xd);_&&_.focus()}},f.RasterDEMTileSource=Yn,f.RasterTileSource=Xa,f.ScaleControl=class{constructor(_){this._onMove=()=>{ac(this._map,this._container,this.options)},this.setUnit=t=>{this.options.unit=t,ac(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},vd),_)}getDefaultPosition(){return"bottom-left"}onAdd(_){return this._map=_,this._container=H.create("div","maplibregl-ctrl maplibregl-ctrl-scale",_.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){H.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},f.ScrollZoomHandler=hd,f.Style=ga,f.TerrainControl=class{constructor(_){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=_}onAdd(_){return this._map=_,this._container=H.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=H.create("button","maplibregl-ctrl-terrain",this._container),H.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){H.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},f.TwoFingersTouchPitchHandler=Vh,f.TwoFingersTouchRotateHandler=ps,f.TwoFingersTouchZoomHandler=Nh,f.TwoFingersTouchZoomRotateHandler=pl,f.VectorTileSource=Ya,f.VideoSource=Pe,f.addSourceType=(_,t)=>a._(void 0,void 0,void 0,(function*(){if(ne(_))throw new Error(`A source type called "${_}" already exists.`);((n,u)=>{X[n]=u})(_,t)})),f.clearPrewarmedResources=function(){let _=sr;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(hi),sr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},f.createTileMesh=Jo,f.getMaxParallelImageRequests=function(){return a.c.MAX_PARALLEL_IMAGE_REQUESTS},f.getRTLTextPluginStatus=function(){return ke().getRTLTextPluginStatus()},f.getVersion=function(){return wd},f.getWorkerCount=function(){return At.workerCount},f.getWorkerUrl=function(){return a.c.WORKER_URL},f.importScriptInWorkers=function(_){return un().broadcast("IS",_)},f.isTimeFrozen=function(){return G.isFrozen()},f.now=te,f.prewarm=function(){cn().acquire(hi)},f.restoreNow=function(){G.restoreNow()},f.setMaxParallelImageRequests=function(_){a.c.MAX_PARALLEL_IMAGE_REQUESTS=_},f.setNow=function(_){G.setNow(_)},f.setRTLTextPlugin=function(_,t){return ke().setRTLTextPlugin(_,t)},f.setWorkerCount=function(_){At.workerCount=_},f.setWorkerUrl=function(_){a.c.WORKER_URL=_}}));var d=s;return d}))});var vE=Ee((F_,_E)=>{(function(s,o){typeof define=="function"&&define.amd?define(["leaflet","maplibre-gl"],o):typeof F_=="object"?_E.exports=o(Ll(),yE()):s.returnExports=o(s.L,s.maplibregl)})(typeof globalThis!="undefined"?globalThis:F_||self,function(s,o){s.MaplibreGL=s.Layer.extend({options:{updateInterval:32,padding:.1,interactive:!1,pane:"tilePane"},initialize:function(p){s.setOptions(this,p),this._throttledUpdate=s.Util.throttle(this._update,this.options.updateInterval,this)},onAdd:function(p){this._container||this._initContainer();var d=this.getPaneName();p.getPane(d).appendChild(this._container),this._initGL(),this._offset=this._map.containerPointToLayerPoint([0,0]),p.options.zoomAnimation&&s.DomEvent.on(p._proxy,s.DomUtil.TRANSITION_END,this._transitionEnd,this)},onRemove:function(p){this._map._proxy&&this._map.options.zoomAnimation&&s.DomEvent.off(this._map._proxy,s.DomUtil.TRANSITION_END,this._transitionEnd,this);var d=this.getPaneName();p.getPane(d).removeChild(this._container),this._glMap.remove(),this._glMap=null},getEvents:function(){return{move:this._throttledUpdate,zoomanim:this._animateZoom,zoom:this._pinchZoom,zoomstart:this._zoomStart,zoomend:this._zoomEnd,resize:this._resize}},getAttribution:function(){if(this.options.attributionControl)return this.options.attributionControl.customAttribution;var p=this._glMap;if(p&&this.options.attributionControl!==!1){var d=p.getStyle();if(d&&d.sources)return Object.keys(d.sources).map(function(f){var a=p.getSource(f);return a&&typeof a.attribution=="string"?a.attribution.trim():null}).filter(Boolean).join(", ")}return""},getMaplibreMap:function(){return this._glMap},getCanvas:function(){return this._glMap.getCanvas()},getSize:function(){return this._map.getSize().multiplyBy(1+this.options.padding*2)},getBounds:function(){var p=this.getSize().multiplyBy(.5),d=this._map.latLngToContainerPoint(this._map.getCenter());return s.latLngBounds(this._map.containerPointToLatLng(d.subtract(p)),this._map.containerPointToLatLng(d.add(p)))},getContainer:function(){return this._container},getPaneName:function(){return this._map.getPane(this.options.pane)?this.options.pane:"tilePane"},_roundPoint:function(p){return{x:Math.round(p.x),y:Math.round(p.y)}},_initContainer:function(){var p=this._container=s.DomUtil.create("div","leaflet-gl-layer");this._resizeContainer();var d=this._map.getSize().multiplyBy(this.options.padding),f=this._map.containerPointToLayerPoint([0,0]).subtract(d);s.DomUtil.setPosition(p,this._roundPoint(f))},_resizeContainer:function(){var p=this.getSize();this._container.style.width=p.x+"px",this._container.style.height=p.y+"px"},_initGL:function(){var p=this._map.getCenter(),d=s.extend({},this.options,{container:this._container,center:[p.lng,p.lat],zoom:this._map.getZoom()-1,attributionControl:!1});this._glMap=new o.Map(d);var f=this._map,a=this.getAttribution(),T=this.getAttribution.bind(this);this._glMap.on("load",function(){f&&f.attributionControl&&(f.attributionControl.removeAttribution(a),f.attributionControl.addAttribution(T()))});var M=Object.getPrototypeOf(this._glMap.transform),R=Object.getOwnPropertyDescriptor(M,"latRange");(!R||R.set||R.writable)&&(this._glMap.transform.latRange=null);var V=Object.getOwnPropertyDescriptor(M,"maxValidLatitude");(!V||V.set||V.writable)&&(this._glMap.transform.maxValidLatitude=1/0),this._glMap.transform._helper&&this._glMap.transform._helper._latRange&&(this._glMap.transform._helper._latRange=[-1/0,1/0]),this._transformGL(this._glMap),this._glMap._canvas.canvas?this._glMap._actualCanvas=this._glMap._canvas.canvas:this._glMap._actualCanvas=this._glMap._canvas;var Y=this._glMap._actualCanvas;s.DomUtil.addClass(Y,"leaflet-image-layer"),s.DomUtil.addClass(Y,"leaflet-zoom-animated"),this.options.interactive&&s.DomUtil.addClass(Y,"leaflet-interactive"),this.options.className&&s.DomUtil.addClass(Y,this.options.className)},_update:function(p){if(this._map&&(this._offset=this._map.containerPointToLayerPoint([0,0]),!this._zooming)){var d=this._container,f=this._glMap,a=this._map.getSize().multiplyBy(this.options.padding),T=this._map.containerPointToLayerPoint([0,0]).subtract(a);s.DomUtil.setPosition(d,this._roundPoint(T)),this._transformGL(f)}},_transformGL:function(p){var d=this._map.getCenter(),f=p._getTransformForUpdate();f.setCenter?(f.setCenter(o.LngLat.convert([d.lng,d.lat])),f.setZoom(this._map.getZoom()-1),p.transform.apply(f)):(f=p.transform,f.center=o.LngLat.convert([d.lng,d.lat]),f.zoom=this._map.getZoom()-1),p._fireMoveEvents()},_pinchZoom:function(p){this._glMap.jumpTo({zoom:this._map.getZoom()-1,center:this._map.getCenter()})},_animateZoom:function(p){var d=this._map.getZoomScale(p.zoom),f=this._map.getSize().multiplyBy(this.options.padding*d),a=this.getSize()._divideBy(2),T=this._map.project(p.center,p.zoom)._subtract(a)._add(this._map._getMapPanePos().add(f))._round(),M=this._map.project(this._map.getBounds().getNorthWest(),p.zoom)._subtract(T);s.DomUtil.setTransform(this._glMap._actualCanvas,M.subtract(this._offset),d)},_zoomStart:function(p){this._zooming=!0},_zoomEnd:function(){var p=this._map.getZoomScale(this._map.getZoom());s.DomUtil.setTransform(this._glMap._actualCanvas,null,p),this._zooming=!1,this._update()},_transitionEnd:function(p){s.Util.requestAnimFrame(function(){var d=this._map.getZoom(),f=this._map.getCenter(),a=this._map.latLngToContainerPoint(this._map.getBounds().getNorthWest());this._resizeContainer(),s.DomUtil.setTransform(this._glMap._actualCanvas,a,1),this._glMap.once("moveend",s.Util.bind(function(){this._zoomEnd()},this)),this._glMap.jumpTo({center:f,zoom:d-1})},this)},_resize:function(p){this._transitionEnd(p)}}),s.maplibreGL=function(p){return new s.MaplibreGL(p)}})});function Tp(s){if(!s)return;let o;if(typeof s.getBoundingClientRect!="undefined")o=s.getBoundingClientRect();else{let p=document.createRange();p.selectNode(s),o=p.getBoundingClientRect()}return o}function Jb(s){if(!s)return;let o;if(typeof s.getClientRects!="undefined")o=s.getClientRects();else{let p=document.createRange();p.selectNode(s),o=p.getClientRects()}return o}function $n(){var s=new Date().getTime();return typeof performance!="undefined"&&typeof performance.now=="function"&&(s+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){var p=(s+Math.random()*16)%16|0;return s=Math.floor(s/16),(o==="x"?p:p&3|8).toString(16)})}function Cp(s,o){for(var p=0;p<o.length;p++)if(s.hasAttribute(o[p]))return s.getAttribute(o[p])}function kp(s){if(arguments.length==0)throw new TypeError("`CSS.escape` requires an argument.");for(var o=String(s),p=o.length,d=-1,f,a="",T=o.charCodeAt(0);++d<p;){if(f=o.charCodeAt(d),f==0){a+="\uFFFD";continue}if(f>=1&&f<=31||f==127||d==0&&f>=48&&f<=57||d==1&&f>=48&&f<=57&&T==45){a+="\\"+f.toString(16)+" ";continue}if(d==0&&p==1&&f==45){a+="\\"+o.charAt(d);continue}if(f==46&&o.charAt(0)=="#"){a+="\\.";continue}if(f>=128||f==45||f==95||f==35||f==46||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122){a+=o.charAt(d);continue}a+="\\"+o.charAt(d)}return a}function Pp(){this.resolve=null,this.reject=null,this.id=$n(),this.promise=new Promise((s,o)=>{this.resolve=s,this.reject=o}),Object.freeze(this)}var ex=typeof window!="undefined"&&("requestIdleCallback"in window?window.requestIdleCallback:window.requestAnimationFrame);function bt(s){return s.value+(s.unit||"")}function ln(s){return s&&s.nodeType===1}function Bo(s){return s&&s.nodeType===3}function*$d(s,o){let p=s;for(;p;)if(yield p,p.childNodes.length)p=p.firstChild;else if(p.nextSibling){if(o&&p===o){p=void 0;break}p=p.nextSibling}else for(;p;){if(p=p.parentNode,o&&p===o){p=void 0;break}if(p&&p.nextSibling){p=p.nextSibling;break}}}function Sl(s,o){if(o&&s===o)return;let p=Ap(s);if(p)return p;if(s.parentNode)for(;s=s.parentNode;){if(o&&s===o)return;if(p=Ap(s),p)return p}}function Zd(s,o){if(o&&s===o)return;let p=Ep(s);if(p)return p;if(s.parentNode)for(;s=s.parentNode;){if(o&&s===o)return;if(p=Ep(s),p)return p}}function tx(s,o){let p=Sl(s,o);for(;p&&p.nodeType!==1;)p=Sl(p,o);return p}function ix(s,o){let p=Zd(s,o);for(;p&&p.nodeType!==1;)p=Zd(p,o);return p}function rg(s,o){let p=tx(s,o);for(;p&&p.dataset.undisplayed;)p=tx(p,o);return p}function nx(s,o){let p=ix(s,o);for(;p&&p.dataset.undisplayed;)p=ix(p,o);return p}function Mp(s){let o,p,d=[],f=[],a=document.createDocumentFragment();if(s.nodeName==="TR"){let R=s.previousElementSibling,V=1;for(;R;){if(R.childElementCount>s.childElementCount){let Y=Array.from(s.children);for(;s.firstChild;)s.firstChild.remove();let re=0;for(let G=0;G<R.children.length;G++){let te=R.children[G];if(te.rowSpan&&te.rowSpan>V){let H=te.cloneNode(!0);H.rowSpan=te.rowSpan-V,s.appendChild(H)}else{let H=Y[re++];H&&s.appendChild(H)}}}R=R.previousElementSibling,V++}}let T=s;for(;T.parentNode&&T.parentNode.nodeType===1;)d.unshift(T.parentNode),T=T.parentNode;for(var M=0;M<d.length;M++){if(p=d[M],o=p.cloneNode(!1),o.setAttribute("data-split-from",o.getAttribute("data-ref")),o.hasAttribute("id")){let R=o.getAttribute("id");o.setAttribute("data-id",R),o.removeAttribute("id")}if(o.hasAttribute("data-break-before")&&o.removeAttribute("data-break-before"),o.hasAttribute("data-previous-break-after")&&o.removeAttribute("data-previous-break-after"),f.length?f[f.length-1].appendChild(o):a.appendChild(o),f.push(o),o.nodeName==="TD"&&p.parentElement.contains(p)){let R=p,V=o;for(;R=R.previousElementSibling;){let Y=R.cloneNode(!1);o.parentElement.insertBefore(Y,V),V=Y}}}return f=void 0,a}function Ip(s){return typeof s!="undefined"&&typeof s.dataset!="undefined"&&typeof s.dataset.breakBefore!="undefined"&&(s.dataset.breakBefore==="always"||s.dataset.breakBefore==="page"||s.dataset.breakBefore==="left"||s.dataset.breakBefore==="right"||s.dataset.breakBefore==="recto"||s.dataset.breakBefore==="verso")}function ax(s){return typeof s!="undefined"&&typeof s.dataset!="undefined"&&typeof s.dataset.previousBreakAfter!="undefined"&&(s.dataset.previousBreakAfter==="always"||s.dataset.previousBreakAfter==="page"||s.dataset.previousBreakAfter==="left"||s.dataset.previousBreakAfter==="right"||s.dataset.previousBreakAfter==="recto"||s.dataset.previousBreakAfter==="verso")}function zp(s,o){if(typeof s=="undefined"||!o||Yd(s)||s.dataset&&s.dataset.undisplayed)return!1;let p=o.dataset?o.dataset.page:void 0;if(typeof p=="undefined"){let f=rx(o);f&&(p=f.dataset.page)}let d=s.dataset?s.dataset.page:void 0;if(typeof d=="undefined"){let f=rx(s,o);f&&(d=f.dataset.page)}return d!==p}function*sx(s){let o=s.nodeValue,p=o.length,d=0,f,a,T=s.parentElement&&s.parentElement.nodeName==="PRE";for(;d<p;)f=o[d],/^[\S\u202F\u00A0]$/.test(f)||T?a||(a=document.createRange(),a.setStart(s,d)):a&&(a.setEnd(s,d),yield a,a=void 0),d+=1;a&&(a.setEnd(s,d),yield a)}function*ox(s){let o=s.startContainer,p=o.length,d=s.startOffset,f;for(;d<p;)f=document.createRange(),f.setStart(o,d),f.setEnd(o,d+1),yield f,d+=1}function Lp(s){let o;if(typeof s.tagName=="undefined")return!0;if(s.style&&s.style.display==="none")return!1;switch(s.tagName){case"A":case"ABBR":case"ACRONYM":case"B":case"BDO":case"BIG":case"BR":case"BUTTON":case"CITE":case"CODE":case"DFN":case"EM":case"I":case"IMG":case"INPUT":case"KBD":case"LABEL":case"MAP":case"OBJECT":case"Q":case"SAMP":case"SCRIPT":case"SELECT":case"SMALL":case"SPAN":case"STRONG":case"SUB":case"SUP":case"TEXTAREA":case"TIME":case"TT":case"VAR":case"P":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"FIGCAPTION":case"BLOCKQUOTE":case"PRE":case"LI":case"TD":case"DT":case"DD":case"VIDEO":case"CANVAS":o=!1;break;default:o=!0}return o}function lx(s,o=!1){return s.cloneNode(o)}function xn(s,o,p){let d=s.getAttribute("data-ref");return hI(d,o,p)}function hI(s,o,p){return!p&&o.indexOfRefs&&o.indexOfRefs[s]?o.indexOfRefs[s]:o.querySelector(`[data-ref='${s}']`)}function Dp(s){return!!(Bo(s)||ln(s)&&s.dataset.ref)}function Hd(s){for(;!Dp(s)&&(s.previousSibling?s=s.previousSibling:s=s.parentNode,!!s););return s}function cx(s){let o=s.parentNode;return o?Array.prototype.indexOf.call(o.childNodes,s):0}function Op(s,o){return s.childNodes[o]}function ux(s){return ln(s)?!0:!!(Bo(s)&&s.textContent.trim().length)}function ng(s,o){if(!Bo(s))return-1;let p=s.textContent,d,f=-1;for(var a=0;a<o.childNodes.length;a++)if(d=o.childNodes[a],d.nodeType===3&&o.childNodes[a].textContent.includes(p)){f=a;break}return f}function Yd(s){return s.nodeType===8||s.nodeType===3&&pI(s)}function pI(s){return!/[^\t\n\r ]/.test(s.textContent)}function Ep(s){for(;s=s.previousSibling;)if(!Yd(s))return s;return null}function rx(s,o){if(s&&s.dataset&&s.dataset.page)return s;if(s.parentNode)for(;s=s.parentNode;){if(o&&s===o)return;if(s.dataset&&s.dataset.page)return s}return null}function dx(s){for(;s=s.parentNode;)if(s&&s.dataset&&s.dataset.breakInside==="avoid")return s;return null}function Rp(s,o,p){if(!(p&&s===p)&&s.parentNode)for(;s=s.parentNode;){if(p&&s===p)return;if(s.nodeName===o)return s}}function Ap(s){for(;s=s.nextSibling;)if(!Yd(s))return s;return null}function Bp(s,o,p){let d=document.createTreeWalker(s||this.dom,p||NodeFilter.SHOW_ALL,o?{acceptNode:o}:null,!1),f,a;for(f=d.nextNode();f;)a=f,f=d.nextNode(),a.parentNode.removeChild(a)}var ag=class{constructor(o,p){this.node=o,this.offset=p}equals(o){return!(!o||this.node&&o.node&&this.node!==o.node||this.offset&&o.offset&&this.offset!==o.offset)}toJSON(o){let p,d=0;return this.node?(ln(this.node)&&this.node.dataset.ref?p=this.node.dataset.ref:o&&(p=this.node.parentElement.dataset.ref),this.node.parentElement&&(d=Array.from(this.node.parentElement.childNodes).indexOf(this.node)),JSON.stringify({node:p,index:d,offset:this.offset})):{}}},vu=ag;var sg=class{constructor(o,p){this.breakToken=o,this.error=p}},Tl=class extends Error{constructor(o,p){super(o),this.items=p}},bu=sg;var t0=Ai(Cl(),1);var vg=class{constructor(o){this.context=o||this,this.hooks=[]}register(){for(var o=0;o<arguments.length;++o)if(typeof arguments[o]=="function")this.hooks.push(arguments[o]);else for(var p=0;p<arguments[o].length;++p)this.hooks.push(arguments[o][p])}trigger(){var o=arguments,p=this.context,d=[];return this.hooks.forEach(function(f){var a=f.apply(p,o);a&&typeof a.then=="function"?d.push(a):d.push(new Promise((T,M)=>{T(a)}))}),Promise.all(d)}triggerSync(){var o=arguments,p=this.context,d=[];return this.hooks.forEach(function(f){var a=f.apply(p,o);d.push(a)}),d}list(){return this.hooks}clear(){return this.hooks=[]}},Pt=vg;var RI=1500,Wp=class{constructor(o,p,d){this.element=o,this.bounds=this.element.getBoundingClientRect(),this.parentBounds=this.element.offsetParent.getBoundingClientRect();let f=parseFloat(window.getComputedStyle(this.element).columnGap);if(f){let a=this.bounds.left-this.parentBounds.left;this.gap=f-a}else this.gap=0;p?this.hooks=p:(this.hooks={},this.hooks.onPageLayout=new Pt,this.hooks.layout=new Pt,this.hooks.renderNode=new Pt,this.hooks.layoutNode=new Pt,this.hooks.beforeOverflow=new Pt,this.hooks.onOverflow=new Pt,this.hooks.afterOverflowRemoved=new Pt,this.hooks.onBreakToken=new Pt,this.hooks.beforeRenderResult=new Pt),this.settings=d||{},this.maxChars=this.settings.maxChars||RI,this.forceRenderBreak=!1}async renderTo(o,p,d,f=this.bounds){let a=this.getStart(p,d),T=$d(a,p),M,R,V,Y,re=!1,G,te=0,H=d||new vu(a);for(this.hooks&&this.hooks.onPageLayout.trigger(o,H,this);!V&&!G;){if(Y=T.next(),R=M,M=Y.value,V=Y.done,!M){this.hooks&&this.hooks.layout.trigger(o,this);let ye=o.querySelectorAll("img");return ye.length&&await this.waitForImages(ye),G=this.findBreakToken(o,p,f,H),G&&G.equals(H)?(console.warn("Unable to layout item: ",R),this.hooks&&this.hooks.beforeRenderResult.trigger(void 0,o,this),new bu(void 0,new Tl("Unable to layout item",[R]))):(this.rebuildTableFromBreakToken(G,o),this.hooks&&this.hooks.beforeRenderResult.trigger(G,o,this),new bu(G))}if(this.hooks&&this.hooks.layoutNode.trigger(M),re&&this.shouldBreak(M,a)){this.hooks&&this.hooks.layout.trigger(o,this);let ye=o.querySelectorAll("img");if(ye.length&&await this.waitForImages(ye),G=this.findBreakToken(o,p,f,H),G?this.rebuildTableFromBreakToken(G,o):G=this.breakAt(M),G&&G.equals(H)){console.warn("Unable to layout item: ",M);let Ce=G.node&&Sl(G.node);if(Ce)G=new vu(Ce);else return new bu(void 0,new Tl("Unable to layout item",[M]))}te=0;break}if(M.dataset&&M.dataset.page){let ye=M.dataset.page,Ce=this.element.closest(".pagedjs_page");Ce.classList.add("pagedjs_named_page"),Ce.classList.add("pagedjs_"+ye+"_page"),M.dataset.splitFrom||Ce.classList.add("pagedjs_"+ye+"_first_page")}let Se=Lp(M),je=this.append(M,o,d,Se);if(te+=je.textContent.length,re||(re=ux(M)),Se||(T=$d(Sl(M,p),p)),this.forceRenderBreak){this.hooks&&this.hooks.layout.trigger(o,this),G=this.findBreakToken(o,p,f,H),G?this.rebuildTableFromBreakToken(G,o):G=this.breakAt(M),te=0,this.forceRenderBreak=!1;break}if(te>=this.maxChars){this.hooks&&this.hooks.layout.trigger(o,this);let ye=o.querySelectorAll("img");if(ye.length&&await this.waitForImages(ye),G=this.findBreakToken(o,p,f,H),G&&(te=0,this.rebuildTableFromBreakToken(G,o)),G&&G.equals(H)){console.warn("Unable to layout item: ",M);let Ce=G.node&&Sl(G.node);if(Ce)G=new vu(Ce);else return this.hooks&&this.hooks.beforeRenderResult.trigger(void 0,o,this),new bu(void 0,new Tl("Unable to layout item",[M]))}}}return this.hooks&&this.hooks.beforeRenderResult.trigger(G,o,this),new bu(G)}breakAt(o,p=0){let d=new vu(o,p);return this.hooks.onBreakToken.triggerSync(d,void 0,o,this).forEach(a=>{typeof a!="undefined"&&(d=a)}),d}shouldBreak(o,p){let d=Zd(o,p),f=o.parentNode,a=Ip(o)&&f&&!d&&Ip(f),T;return a&&(T=o.dataset.breakBefore===f.dataset.breakBefore),!T&&Ip(o)||ax(o)||zp(o,d)}forceBreak(){this.forceRenderBreak=!0}getStart(o,p){let d,f=p&&p.node;return f?d=f:d=o.firstChild,d}append(o,p,d,f=!0,a=!0){let T=lx(o,!f);if(o.parentNode&&ln(o.parentNode)){let R=xn(o.parentNode,p);if(R)R.appendChild(T);else if(a){let V=Mp(o);R=xn(o.parentNode,V),R?(d&&Bo(d.node)&&d.offset>0&&(T.textContent=T.textContent.substring(d.offset)),R.appendChild(T)):p.appendChild(T),p.appendChild(V)}else p.appendChild(T)}else p.appendChild(T);return T.dataset&&T.dataset.ref&&(p.indexOfRefs||(p.indexOfRefs={}),p.indexOfRefs[T.dataset.ref]=T),this.hooks.renderNode.triggerSync(T,o,this).forEach(R=>{typeof R!="undefined"&&(T=R)}),T}rebuildTableFromBreakToken(o,p){if(!o||!o.node)return;let d=o.node,f=ln(d)?d.closest("td"):d.parentElement.closest("td");if(f){if(!xn(f,p,!0))return;for(;f=f.nextElementSibling;)this.append(f,p,null,!0)}}async waitForImages(o){let p=Array.from(o).map(async d=>this.awaitImageLoaded(d));await Promise.all(p)}async awaitImageLoaded(o){return new Promise(p=>{if(o.complete!==!0)o.onload=function(){let{width:d,height:f}=window.getComputedStyle(o);p(d,f)},o.onerror=function(d){let{width:f,height:a}=window.getComputedStyle(o);p(f,a,d)};else{let{width:d,height:f}=window.getComputedStyle(o);p(d,f)}})}avoidBreakInside(o,p){let d;if(o!==p){for(;o.parentNode&&(o=o.parentNode,o!==p);)if(window.getComputedStyle(o)["break-inside"]==="avoid"){d=o;break}return d}}createBreakToken(o,p,d){let f=o.startContainer,a=o.startOffset,T,M,R,V,Y;if(ln(f))if(Y=Op(f,a),ln(Y))if(M=xn(Y,p),M)T=xn(M,d),a=0;else{let re=Hd(Y);if(ln(re)||(re=re.parentElement),M=xn(re,p),!Y.nextSibling){let G=xn(M,d),H=document.createTreeWalker(G,NodeFilter.SHOW_ELEMENT).lastChild();if(!xn(H,p))return}T=xn(M,d).nextSibling,a=0}else M=xn(f,p),M||(M=xn(Hd(f),p)),R=xn(M,d),V=ng(Y,R),V===0?(T=R,a=0):(T=Op(R,V),a=0);else{if(M=xn(f.parentNode,p),M||(M=xn(Hd(f.parentNode),p)),R=xn(M,d),V=ng(f,R),V===-1)return;T=Op(R,V),a+=T.textContent.indexOf(f.textContent)}if(T)return new vu(T,a)}findBreakToken(o,p,d=this.bounds,f,a=!0){let T=this.findOverflow(o,d),M,R;if(this.hooks.onOverflow.triggerSync(T,o,d,this).forEach(Y=>{typeof Y!="undefined"&&(T=Y)}),T){if(M=this.createBreakToken(T,o,p),this.hooks.onBreakToken.triggerSync(M,T,o,this).forEach(re=>{typeof re!="undefined"&&(M=re)}),M&&M.equals(f))return M;if(M&&M.node&&M.offset&&M.node.textContent?R=M.node.textContent.charAt(M.offset):R=void 0,M&&M.node&&a){let re=this.removeOverflow(T,R);this.hooks&&this.hooks.afterOverflowRemoved.trigger(re,o,this)}}return M}hasOverflow(o,p=this.bounds){let d=o&&o.parentNode,{width:f,height:a}=o.getBoundingClientRect(),T=d?d.scrollWidth:0,M=d?d.scrollHeight:0;return Math.max(Math.floor(f),T)>Math.round(p.width)||Math.max(Math.floor(a),M)>Math.round(p.height)}findOverflow(o,p=this.bounds,d=this.gap){if(!this.hasOverflow(o,p))return;let f=Math.floor(p.left),a=Math.round(p.right+d),T=Math.round(p.top),M=Math.round(p.bottom),R,V=$d(o.firstChild,o),Y,re,G,te,H,Se,je,ye;for(;!re;)if(Y=V.next(),re=Y.done,G=Y.value,H=!1,Se=!1,je=void 0,ye=void 0,G){let Ye=Tp(G),rt=Math.round(Ye.left),Ct=Math.floor(Ye.right),gt=Math.round(Ye.top),Wt=Math.floor(Ye.bottom);if(!R&&(rt>=a||gt>=M)){let Gt=!1,wt=Rp(G,"TD",o);if(wt&&window.getComputedStyle(wt)["break-inside"]==="avoid")je=wt.parentElement;else if(ln(G)){let si=window.getComputedStyle(G);Gt=si.getPropertyValue("float")!=="none",H=si.getPropertyValue("break-inside")==="avoid",Se=G.dataset.breakBefore==="avoid"||G.dataset.previousBreakAfter==="avoid",je=Se&&Zd(G,o),ye=G.tagName==="BR"||G.tagName==="WBR"}let kt;if(G.nodeName==="TR"?kt=G:kt=Rp(G,"TR",o),kt){let si=kt.parentElement;["TBODY","THEAD"].includes(si.nodeName)&&window.getComputedStyle(si).getPropertyValue("break-inside")==="avoid"&&(je=si);let ri=Rp(kt,"TABLE",o),di=ri.querySelector("[colspan]");if(ri&&di){let ni=0;for(let Ut of Array.from(ri.rows[0].cells))ni+=parseInt(Ut.getAttribute("colspan")||"1");if(kt.cells.length!==ni){let Ut=kt.previousElementSibling,ut;for(;Ut!==null;){ut=0;for(let Ft of Array.from(Ut.cells))ut+=parseInt(Ft.getAttribute("colspan")||"1");if(ut===ni)break;Ut=Ut.previousElementSibling}ut===ni&&(je=Ut)}}}if(je){R=document.createRange(),R.selectNode(je);break}if(!ye&&!Gt&&ln(G)){R=document.createRange(),R.selectNode(G);break}if(Bo(G)&&G.textContent.trim().length){R=document.createRange(),R.selectNode(G);break}}if(!R&&Bo(G)&&G.textContent.trim().length&&!dx(G.parentNode)){let Gt=Jb(G),wt;rt=0,gt=0;for(var Ce=0;Ce!=Gt.length;Ce++)wt=Gt[Ce],wt.width>0&&(!rt||wt.left>rt)&&(rt=wt.left),wt.height>0&&(!gt||wt.top>gt)&&(gt=wt.top);if(rt>=a||gt>=M){R=document.createRange(),te=this.textBreak(G,f,a,T,M),te?R.setStart(G,te):R=void 0;break}}(H||Ct<=a&&Wt<=M)&&(Y=Sl(G,o),Y&&(V=$d(Y,o)))}if(R)return R.setEndAfter(o.lastChild),R}findEndToken(o,p){if(o.childNodes.length===0)return;let d=o.lastChild,f;for(;d&&d.lastChild;)if(!Dp(d))d=d.previousSibling;else if(Dp(d.lastChild))d=d.lastChild;else{d=Hd(d.lastChild);break}Bo(d)&&(d.parentNode.dataset.ref?(f=cx(d),d=d.parentNode):d=d.previousSibling);let a=xn(d,p);f&&(a=a.childNodes[f]);let T=Sl(a);return this.breakAt(T)}textBreak(o,p,d,f,a){let T=sx(o),M=0,R=0,V=0,Y=0,re,G,te,H,Se;for(;!te&&(G=T.next(),re=G.value,te=G.done,!!re);){if(H=Tp(re),M=Math.floor(H.left),R=Math.floor(H.right),V=Math.floor(H.top),Y=Math.floor(H.bottom),M>=d||V>=a){Se=re.startOffset;break}if(R>d||Y>a){let je=ox(re),ye,Ce,Ye;for(;!Ye&&(Ce=je.next(),ye=Ce.value,Ye=Ce.done,!!ye);)if(H=Tp(ye),M=Math.floor(H.left),V=Math.floor(H.top),M>=d||V>=a){Se=ye.startOffset,te=!0;break}}}return Se}removeOverflow(o,p){let{startContainer:d}=o,f=o.extractContents();return this.hyphenateAtBreak(d,p),f}hyphenateAtBreak(o,p){if(Bo(o)){let d=o.textContent,f=d[d.length-1];(p&&/^\w|\u00AD$/.test(f)&&/^\w|\u00AD$/.test(p)||!p&&/^\w|\u00AD$/.test(f))&&(o.parentNode.classList.add("pagedjs_hyphen"),o.textContent+=this.settings.hyphenGlyph||"\u2011")}}equalTokens(o,p){return!(!o||!p||o.node&&p.node&&o.node!==p.node||o.offset&&p.offset&&o.offset!==p.offset)}};(0,t0.default)(Wp.prototype);var Gp=Wp;var i0=Ai(Cl(),1),Up=class{constructor(o,p,d,f,a){this.pagesArea=o,this.pageTemplate=p,this.blank=d,this.width=void 0,this.height=void 0,this.hooks=f,this.settings=a||{}}create(o,p){let d=document.importNode(this.pageTemplate.content,!0),f,a;p?(this.pagesArea.insertBefore(d,p.nextElementSibling),a=Array.prototype.indexOf.call(this.pagesArea.children,p.nextElementSibling),f=this.pagesArea.children[a]):(this.pagesArea.appendChild(d),f=this.pagesArea.lastChild);let T=f.querySelector(".pagedjs_pagebox"),M=f.querySelector(".pagedjs_page_content"),R=f.querySelector(".pagedjs_footnote_area"),V=M.getBoundingClientRect();return M.style.columnWidth=Math.round(V.width)+"px",M.style.columnGap="calc(var(--pagedjs-margin-right) + var(--pagedjs-margin-left) + var(--pagedjs-bleed-right) + var(--pagedjs-bleed-left) + var(--pagedjs-column-gap-offset))",this.width=Math.round(V.width),this.height=Math.round(V.height),this.element=f,this.pagebox=T,this.area=M,this.footnotesArea=R,f}createWrapper(){let o=document.createElement("div");return this.area.appendChild(o),this.wrapper=o,o}index(o){this.position=o;let p=this.element,d=o+1,f=`page-${d}`;this.id=f,p.dataset.pageNumber=d,p.setAttribute("id",f),this.name&&p.classList.add("pagedjs_"+this.name+"_page"),this.blank&&p.classList.add("pagedjs_blank_page"),o===0&&p.classList.add("pagedjs_first_page"),o%2!==1?(p.classList.remove("pagedjs_left_page"),p.classList.add("pagedjs_right_page")):(p.classList.remove("pagedjs_right_page"),p.classList.add("pagedjs_left_page"))}async layout(o,p,d){this.clear(),this.startToken=p;let f=this.settings;!f.maxChars&&d&&(f.maxChars=d),this.layoutMethod=new Gp(this.area,this.hooks,f);let T=(await this.layoutMethod.renderTo(this.wrapper,o,p)).breakToken;return this.addListeners(o),this.endToken=T,T}async append(o,p){if(!this.layoutMethod)return this.layout(o,p);let f=(await this.layoutMethod.renderTo(this.wrapper,o,p)).breakToken;return this.endToken=f,f}getByParent(o,p){let d;for(var f=0;f<p.length;f++)if(d=p[f],d.dataset.ref===o)return d}onOverflow(o){this._onOverflow=o}onUnderflow(o){this._onUnderflow=o}clear(){this.removeListeners(),this.wrapper&&this.wrapper.remove(),this.createWrapper()}addListeners(o){return typeof ResizeObserver!="undefined"?this.addResizeObserver(o):(this._checkOverflowAfterResize=this.checkOverflowAfterResize.bind(this,o),this.element.addEventListener("overflow",this._checkOverflowAfterResize,!1),this.element.addEventListener("underflow",this._checkOverflowAfterResize,!1)),this._onScroll=function(){this.listening&&(this.element.scrollLeft=0)}.bind(this),this.element.addEventListener("scroll",this._onScroll),this.listening=!0,!0}removeListeners(){this.listening=!1,typeof ResizeObserver!="undefined"&&this.ro?this.ro.disconnect():this.element&&(this.element.removeEventListener("overflow",this._checkOverflowAfterResize,!1),this.element.removeEventListener("underflow",this._checkOverflowAfterResize,!1)),this.element&&this.element.removeEventListener("scroll",this._onScroll)}addResizeObserver(o){let p=this.wrapper,d=p.getBoundingClientRect().height;this.ro=new ResizeObserver(f=>{this.listening&&requestAnimationFrame(()=>{for(let a of f){let T=a.contentRect;T.height>d?(this.checkOverflowAfterResize(o),d=p.getBoundingClientRect().height):T.height<d&&(this.checkUnderflowAfterResize(o),d=T.height)}})}),this.ro.observe(p)}checkOverflowAfterResize(o){if(!this.listening||!this.layoutMethod)return;let p=this.layoutMethod.findBreakToken(this.wrapper,o,this.startToken);p&&(this.endToken=p,this._onOverflow&&this._onOverflow(p))}checkUnderflowAfterResize(o){if(!this.listening||!this.layoutMethod)return;let p=this.layoutMethod.findEndToken(this.wrapper,o);p&&this._onUnderflow&&this._onUnderflow(p)}destroy(){this.removeListeners(),this.element.remove(),this.element=void 0,this.wrapper=void 0}};(0,i0.default)(Up.prototype);var bg=Up;var xg=class{constructor(o,p){return o&&o.nodeType?this.dom=this.add(o):typeof o=="string"&&(this.dom=this.parse(o)),this.dom}parse(o,p){let f=document.createRange().createContextualFragment(o);return this.addRefs(f),f}add(o){return this.addRefs(o),o}addRefs(o){var p=document.createTreeWalker(o,NodeFilter.SHOW_ELEMENT,null,!1);let d=p.nextNode();for(;d;){if(!d.hasAttribute("data-ref")){let f=$n();d.setAttribute("data-ref",f)}d.id&&d.setAttribute("data-id",d.id),d=p.nextNode()}}find(o){return this.refs[o]}destroy(){this.refs=void 0,this.dom=void 0}},r0=xg;var o0=Ai(Cl(),1);var wg=class{constructor(o){this._q=[],this.context=o,this.tick=requestAnimationFrame,this.running=!1,this.paused=!1}enqueue(){var o,p,d,f=[].shift.call(arguments),a=arguments;if(!f)throw new Error("No Task Provided");return typeof f=="function"?(o=new Pp,p=o.promise,d={task:f,args:a,deferred:o,promise:p}):d={promise:f},this._q.push(d),this.paused==!1&&!this.running&&this.run(),d.promise}dequeue(){var o,p,d;if(this._q.length&&!this.paused){if(o=this._q.shift(),p=o.task,p)return d=p.apply(this.context,o.args),d&&typeof d.then=="function"?d.then(function(){o.deferred.resolve.apply(this.context,arguments)}.bind(this),function(){o.deferred.reject.apply(this.context,arguments)}.bind(this)):(o.deferred.resolve.apply(this.context,d),o.promise);if(o.promise)return o.promise}else return o=new Pp,o.deferred.resolve(),o.promise}dump(){for(;this._q.length;)this.dequeue()}run(){return this.running||(this.running=!0,this.defered=new Pp),this.tick.call(window,()=>{this._q.length?this.dequeue().then(function(){this.run()}.bind(this)):(this.defered.resolve(),this.running=void 0)}),this.paused==!0&&(this.paused=!1),this.defered.promise}flush(){if(this.running)return this.running;if(this._q.length)return this.running=this.dequeue().then(function(){return this.running=void 0,this.flush()}.bind(this)),this.running}clear(){this._q=[]}length(){return this._q.length}pause(){this.paused=!0}stop(){this._q=[],this.running=!1,this.paused=!0}};var n0=wg;var a0=!1,s0=!1,BI=`
<div class="pagedjs_page">
	<div class="pagedjs_sheet">
		<div class="pagedjs_bleed pagedjs_bleed-top">
			<div class="pagedjs_marks-crop"></div>
			<div class="pagedjs_marks-middle">
				<div class="pagedjs_marks-cross"></div>
			</div>
			<div class="pagedjs_marks-crop"></div>
		</div>
		<div class="pagedjs_bleed pagedjs_bleed-bottom">
			<div class="pagedjs_marks-crop"></div>
			<div class="pagedjs_marks-middle">
				<div class="pagedjs_marks-cross"></div>
			</div>		<div class="pagedjs_marks-crop"></div>
		</div>
		<div class="pagedjs_bleed pagedjs_bleed-left">
			<div class="pagedjs_marks-crop"></div>
			<div class="pagedjs_marks-middle">
				<div class="pagedjs_marks-cross"></div>
			</div>		<div class="pagedjs_marks-crop"></div>
		</div>
		<div class="pagedjs_bleed pagedjs_bleed-right">
			<div class="pagedjs_marks-crop"></div>
			<div class="pagedjs_marks-middle">
				<div class="pagedjs_marks-cross"></div>
			</div>
			<div class="pagedjs_marks-crop"></div>
		</div>
		<div class="pagedjs_pagebox">
			<div class="pagedjs_margin-top-left-corner-holder">
				<div class="pagedjs_margin pagedjs_margin-top-left-corner"><div class="pagedjs_margin-content"></div></div>
			</div>
			<div class="pagedjs_margin-top">
				<div class="pagedjs_margin pagedjs_margin-top-left"><div class="pagedjs_margin-content"></div></div>
				<div class="pagedjs_margin pagedjs_margin-top-center"><div class="pagedjs_margin-content"></div></div>
				<div class="pagedjs_margin pagedjs_margin-top-right"><div class="pagedjs_margin-content"></div></div>
			</div>
			<div class="pagedjs_margin-top-right-corner-holder">
				<div class="pagedjs_margin pagedjs_margin-top-right-corner"><div class="pagedjs_margin-content"></div></div>
			</div>
			<div class="pagedjs_margin-right">
				<div class="pagedjs_margin pagedjs_margin-right-top"><div class="pagedjs_margin-content"></div></div>
				<div class="pagedjs_margin pagedjs_margin-right-middle"><div class="pagedjs_margin-content"></div></div>
				<div class="pagedjs_margin pagedjs_margin-right-bottom"><div class="pagedjs_margin-content"></div></div>
			</div>
			<div class="pagedjs_margin-left">
				<div class="pagedjs_margin pagedjs_margin-left-top"><div class="pagedjs_margin-content"></div></div>
				<div class="pagedjs_margin pagedjs_margin-left-middle"><div class="pagedjs_margin-content"></div></div>
				<div class="pagedjs_margin pagedjs_margin-left-bottom"><div class="pagedjs_margin-content"></div></div>
			</div>
			<div class="pagedjs_margin-bottom-left-corner-holder">
				<div class="pagedjs_margin pagedjs_margin-bottom-left-corner"><div class="pagedjs_margin-content"></div></div>
			</div>
			<div class="pagedjs_margin-bottom">
				<div class="pagedjs_margin pagedjs_margin-bottom-left"><div class="pagedjs_margin-content"></div></div>
				<div class="pagedjs_margin pagedjs_margin-bottom-center"><div class="pagedjs_margin-content"></div></div>
				<div class="pagedjs_margin pagedjs_margin-bottom-right"><div class="pagedjs_margin-content"></div></div>
			</div>
			<div class="pagedjs_margin-bottom-right-corner-holder">
				<div class="pagedjs_margin pagedjs_margin-bottom-right-corner"><div class="pagedjs_margin-content"></div></div>
			</div>
			<div class="pagedjs_area">
				<div class="pagedjs_page_content"></div>
				<div class="pagedjs_footnote_area">
					<div class="pagedjs_footnote_content pagedjs_footnote_empty">
						<div class="pagedjs_footnote_inner_content"></div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>`,Zp=class{constructor(o,p,d){this.settings=d||{},this.hooks={},this.hooks.beforeParsed=new Pt(this),this.hooks.filter=new Pt(this),this.hooks.afterParsed=new Pt(this),this.hooks.beforePageLayout=new Pt(this),this.hooks.onPageLayout=new Pt(this),this.hooks.layout=new Pt(this),this.hooks.renderNode=new Pt(this),this.hooks.layoutNode=new Pt(this),this.hooks.onOverflow=new Pt(this),this.hooks.afterOverflowRemoved=new Pt(this),this.hooks.onBreakToken=new Pt,this.hooks.beforeRenderResult=new Pt(this),this.hooks.afterPageLayout=new Pt(this),this.hooks.finalizePage=new Pt(this),this.hooks.afterRendered=new Pt(this),this.pages=[],this.total=0,this.q=new n0(this),this.stopped=!1,this.rendered=!1,this.content=o,this.charsPerBreak=[],this.maxChars,o&&this.flow(o,p)}setup(o){this.pagesArea=document.createElement("div"),this.pagesArea.classList.add("pagedjs_pages"),o?o.appendChild(this.pagesArea):document.querySelector("body").appendChild(this.pagesArea),this.pageTemplate=document.createElement("template"),this.pageTemplate.innerHTML=BI}async flow(o,p){let d;await this.hooks.beforeParsed.trigger(o,this),d=new r0(o),this.hooks.filter.triggerSync(d),this.source=d,this.breakToken=void 0,this.pagesArea&&this.pageTemplate?(this.q.clear(),this.removePages()):this.setup(p),this.emit("rendering",d),await this.hooks.afterParsed.trigger(d,this),await this.loadFonts();let f=await this.render(d,this.breakToken);for(;f.canceled;)this.start(),f=await this.render(d,this.breakToken);return this.rendered=!0,this.pagesArea.style.setProperty("--pagedjs-page-count",this.total),await this.hooks.afterRendered.trigger(this.pages,this),this.emit("rendered",this.pages),this}async render(o,p){let d=this.layout(o,p),f=!1,a,T=0;for(;!f;)if(a=await this.q.enqueue(()=>this.renderAsync(d)),f=a.done,s0&&(T+=1,T>=s0)){this.stop();break}return a}start(){this.rendered=!1,this.stopped=!1}stop(){this.stopped=!0}renderOnIdle(o){return new Promise(p=>{ex(async()=>{if(this.stopped)return p({done:!0,canceled:!0});let d=await o.next();this.stopped?p({done:!0,canceled:!0}):p(d)})})}async renderAsync(o){if(this.stopped)return{done:!0,canceled:!0};let p=await o.next();return this.stopped?{done:!0,canceled:!0}:p}async handleBreaks(o,p){let d=this.total+1,f=d%2===0?"left":"right",a=d%2===0?"verso":"recto",T,M,R;d!==1&&(o&&typeof o.dataset!="undefined"&&typeof o.dataset.previousBreakAfter!="undefined"&&(T=o.dataset.previousBreakAfter),o&&typeof o.dataset!="undefined"&&typeof o.dataset.breakBefore!="undefined"&&(M=o.dataset.breakBefore),p?R=this.addPage(!0):T&&(T==="left"||T==="right")&&T!==f?R=this.addPage(!0):T&&(T==="verso"||T==="recto")&&T!==a?R=this.addPage(!0):M&&(M==="left"||M==="right")&&M!==f?R=this.addPage(!0):M&&(M==="verso"||M==="recto")&&M!==a&&(R=this.addPage(!0)),R&&(await this.hooks.beforePageLayout.trigger(R,void 0,void 0,this),this.emit("page",R),await this.hooks.afterPageLayout.trigger(R.element,R,void 0,this),await this.hooks.finalizePage.trigger(R.element,R,void 0,this),this.emit("renderedPage",R)))}async*layout(o,p){let d=p||!1,f=[];for(;d!==void 0&&(!a0||this.total<a0);){d&&d.node?await this.handleBreaks(d.node):await this.handleBreaks(o.firstChild);let a=this.addPage();if(await this.hooks.beforePageLayout.trigger(a,o,d,this),this.emit("page",a),d=await a.layout(o,d,this.maxChars),d){let T=d.toJSON(!0);if(f.lastIndexOf(T)>-1){let M=new Tl("Layout repeated",[d.node]);return console.error("Layout repeated at: ",d.node),M}else f.push(T)}await this.hooks.afterPageLayout.trigger(a.element,a,d,this),await this.hooks.finalizePage.trigger(a.element,a,void 0,this),this.emit("renderedPage",a),this.recoredCharLength(a.wrapper.textContent.length),yield d}}recoredCharLength(o){o!==0&&(this.charsPerBreak.push(o),this.charsPerBreak.length>4&&this.charsPerBreak.shift(),this.maxChars=this.charsPerBreak.reduce((p,d)=>p+d,0)/this.charsPerBreak.length)}removePages(o=0){if(!(o>=this.pages.length)){for(let p=o;p<this.pages.length;p++)this.pages[p].destroy();o>0?this.pages.splice(o):this.pages=[],this.total=this.pages.length}}addPage(o){let p=this.pages[this.pages.length-1],d=new bg(this.pagesArea,this.pageTemplate,o,this.hooks,this.settings);return this.pages.push(d),d.create(void 0,p&&p.element),d.index(this.total),o||(d.onOverflow(f=>{if(console.warn("overflow on",d.id,f),this.rendered)return;let a=this.pages.indexOf(d)+1;this.stop(),this.breakToken=f,this.removePages(a),this.rendered===!0&&(this.rendered=!1,this.q.enqueue(async()=>{this.start(),await this.render(this.source,this.breakToken),this.rendered=!0}))}),d.onUnderflow(f=>{})),this.total=this.pages.length,d}async clonePage(o){let p=this.pages[this.pages.length-1],d=new bg(this.pagesArea,this.pageTemplate,!1,this.hooks);this.pages.push(d),d.create(void 0,p&&p.element),d.index(this.total),await this.hooks.beforePageLayout.trigger(d,void 0,void 0,this),this.emit("page",d);for(let f of o.element.classList)f!=="pagedjs_left_page"&&f!=="pagedjs_right_page"&&d.element.classList.add(f);await this.hooks.afterPageLayout.trigger(d.element,d,void 0,this),await this.hooks.finalizePage.trigger(d.element,d,void 0,this),this.emit("renderedPage",d)}loadFonts(){let o=[];return(document.fonts||[]).forEach(p=>{if(p.status!=="loaded"){let d=p.load().then(f=>p.family,f=>(console.warn("Failed to preload font-family:",p.family),p.family));o.push(d)}}),Promise.all(o).catch(p=>{console.warn(p)})}destroy(){this.pagesArea.remove(),this.pageTemplate.remove()}};(0,o0.default)(Zp.prototype);var Sg=Zp;var Ar=Ai(In(),1);var Zy=class{constructor(o,p){p?this.hooks=p:(this.hooks={},this.hooks.onUrl=new Pt(this),this.hooks.onAtPage=new Pt(this),this.hooks.onAtMedia=new Pt(this),this.hooks.onRule=new Pt(this),this.hooks.onDeclaration=new Pt(this),this.hooks.onSelector=new Pt(this),this.hooks.onPseudoSelector=new Pt(this),this.hooks.onContent=new Pt(this),this.hooks.onImport=new Pt(this),this.hooks.beforeTreeParse=new Pt(this),this.hooks.beforeTreeWalk=new Pt(this),this.hooks.afterTreeWalk=new Pt(this));try{this.url=new URL(o,window.location.href)}catch(d){this.url=new URL(window.location.href)}}async parse(o){return this.text=o,await this.hooks.beforeTreeParse.trigger(this.text,this),this.ast=Ar.default.parse(this._text),await this.hooks.beforeTreeWalk.trigger(this.ast),this.replaceUrls(this.ast),this.id=$n(),this.replaceIds(this.ast),this.imported=[],this.urls(this.ast),this.rules(this.ast),this.atrules(this.ast),await this.hooks.afterTreeWalk.trigger(this.ast,this),this.ast}insertRule(o){let p=this.ast.children.appendData(o);return this.declarations(o),p}urls(o){Ar.default.walk(o,{visit:"Url",enter:(p,d,f)=>{this.hooks.onUrl.trigger(p,d,f)}})}atrules(o){Ar.default.walk(o,{visit:"Atrule",enter:(p,d,f)=>{let a=Ar.default.keyword(p.name).basename;a==="page"&&(this.hooks.onAtPage.trigger(p,d,f),this.declarations(p,d,f)),a==="media"&&(this.hooks.onAtMedia.trigger(p,d,f),this.declarations(p,d,f)),a==="import"&&(this.hooks.onImport.trigger(p,d,f),this.imports(p,d,f))}})}rules(o){Ar.default.walk(o,{visit:"Rule",enter:(p,d,f)=>{this.hooks.onRule.trigger(p,d,f),this.declarations(p,d,f),this.onSelector(p,d,f)}})}declarations(o,p,d){Ar.default.walk(o,{visit:"Declaration",enter:(f,a,T)=>{this.hooks.onDeclaration.trigger(f,a,T,{ruleNode:o,ruleItem:p,rulelist:d}),f.property==="content"&&Ar.default.walk(f,{visit:"Function",enter:(M,R,V)=>{this.hooks.onContent.trigger(M,R,V,{declarationNode:f,dItem:a,dList:T},{ruleNode:o,ruleItem:p,rulelist:d})}})}})}onSelector(o,p,d){Ar.default.walk(o,{visit:"Selector",enter:(f,a,T)=>{this.hooks.onSelector.trigger(f,a,T,{ruleNode:o,ruleItem:p,rulelist:d}),f.children.forEach(M=>{M.type==="PseudoElementSelector"&&Ar.default.walk(M,{visit:"PseudoElementSelector",enter:(R,V,Y)=>{this.hooks.onPseudoSelector.trigger(R,V,Y,{selectNode:f,selectItem:a,selectList:T},{ruleNode:o,ruleItem:p,rulelist:d})}})})}})}replaceUrls(o){Ar.default.walk(o,{visit:"Url",enter:(p,d,f)=>{let a=p.value.value;if(!(p.value.type==="Raw"&&a.startsWith("data:")||p.value.type==="String"&&(a.startsWith('"data:')||a.startsWith("'data:")))){let T=a.replace(/["']/g,""),M=new URL(T,this.url);p.value.value=M.toString()}}})}addScope(o,p){Ar.default.walk(o,{visit:"Selector",enter:(d,f,a)=>{let T=d.children;T.prepend(T.createItem({type:"WhiteSpace",value:" "})),T.prepend(T.createItem({type:"IdSelector",name:p,loc:null,children:null}))}})}getNamedPageSelectors(o){let p={};return Ar.default.walk(o,{visit:"Rule",enter:(d,f,a)=>{Ar.default.walk(d,{visit:"Declaration",enter:(T,M,R)=>{if(T.property==="page"){let V=T.value.children.first(),Y=V.name,re=Ar.default.generate(d.prelude);p[Y]={name:Y,selector:re},T.property="break-before",V.type="Identifier",V.name="always"}}})}}),p}replaceIds(o){Ar.default.walk(o,{visit:"Rule",enter:(p,d,f)=>{Ar.default.walk(p,{visit:"IdSelector",enter:(a,T,M)=>{let R=a.name;a.flags=null,a.matcher="=",a.name={type:"Identifier",loc:null,name:"data-id"},a.type="AttributeSelector",a.value={type:"String",loc:null,value:`"${R}"`}}})}})}imports(o,p,d){let f=[];Ar.default.walk(o,{visit:"MediaQuery",enter:(T,M,R)=>{Ar.default.walk(T,{visit:"Identifier",enter:(V,Y,re)=>{f.push(V.name)}})}}),!f.some((T,M)=>{let R=T;return R==="not"?(R=f[M+1],!(R==="screen"||R==="speech")):R==="screen"||R==="speech"})&&Ar.default.walk(o,{visit:"String",enter:(T,M,R)=>{let V=T.value.replace(/["']/g,""),re=new URL(V,this.url).toString();this.imported.push(re),d.remove(p)}})}set text(o){this._text=o}get text(){return this._text}toString(o){return Ar.default.generate(o||this.ast)}},YC=Zy;var XC=`
:root {
	--pagedjs-width: 8.5in;
	--pagedjs-height: 11in;
	--pagedjs-width-right: 8.5in;
	--pagedjs-height-right: 11in;
	--pagedjs-width-left: 8.5in;
	--pagedjs-height-left: 11in;
	--pagedjs-pagebox-width: 8.5in;
	--pagedjs-pagebox-height: 11in;
	--pagedjs-footnotes-height: 0mm;
	--pagedjs-margin-top: 1in;
	--pagedjs-margin-right: 1in;
	--pagedjs-margin-bottom: 1in;
	--pagedjs-margin-left: 1in;
	--pagedjs-padding-top: 0mm;
	--pagedjs-padding-right: 0mm;
	--pagedjs-padding-bottom: 0mm;
	--pagedjs-padding-left: 0mm;
	--pagedjs-border-top: 0mm;
	--pagedjs-border-right: 0mm;
	--pagedjs-border-bottom: 0mm;
	--pagedjs-border-left: 0mm;
	--pagedjs-bleed-top: 0mm;
	--pagedjs-bleed-right: 0mm;
	--pagedjs-bleed-bottom: 0mm;
	--pagedjs-bleed-left: 0mm;
	--pagedjs-bleed-right-top: 0mm;
	--pagedjs-bleed-right-right: 0mm;
	--pagedjs-bleed-right-bottom: 0mm;
	--pagedjs-bleed-right-left: 0mm;
	--pagedjs-bleed-left-top: 0mm;
	--pagedjs-bleed-left-right: 0mm;
	--pagedjs-bleed-left-bottom: 0mm;
	--pagedjs-bleed-left-left: 0mm;
	--pagedjs-crop-color: black;
	--pagedjs-crop-shadow: white;
	--pagedjs-crop-offset: 2mm;
	--pagedjs-crop-stroke: 1px;
	--pagedjs-cross-size: 5mm;
	--pagedjs-mark-cross-display: none;
	--pagedjs-mark-crop-display: none;
	--pagedjs-page-count: 0;
	--pagedjs-page-counter-increment: 1;
	--pagedjs-footnotes-count: 0;
	--pagedjs-column-gap-offset: 1000px;
}

@page {
	size: letter;
	margin: 0;
}

.pagedjs_sheet {
	box-sizing: border-box;
	width: var(--pagedjs-width);
	height: var(--pagedjs-height);
	overflow: hidden;
	position: relative;
	display: grid;
	grid-template-columns: [bleed-left] var(--pagedjs-bleed-left) [sheet-center] calc(var(--pagedjs-width) - var(--pagedjs-bleed-left) - var(--pagedjs-bleed-right)) [bleed-right] var(--pagedjs-bleed-right);
	grid-template-rows: [bleed-top] var(--pagedjs-bleed-top) [sheet-middle] calc(var(--pagedjs-height) - var(--pagedjs-bleed-top) - var(--pagedjs-bleed-bottom)) [bleed-bottom] var(--pagedjs-bleed-bottom);
}

.pagedjs_right_page .pagedjs_sheet {
	width: var(--pagedjs-width-right);
	height: var(--pagedjs-height-right);
	grid-template-columns: [bleed-left] var(--pagedjs-bleed-right-left) [sheet-center] calc(var(--pagedjs-width) - var(--pagedjs-bleed-right-left) - var(--pagedjs-bleed-right-right)) [bleed-right] var(--pagedjs-bleed-right-right);
	grid-template-rows: [bleed-top] var(--pagedjs-bleed-right-top) [sheet-middle] calc(var(--pagedjs-height) - var(--pagedjs-bleed-right-top) - var(--pagedjs-bleed-right-bottom)) [bleed-bottom] var(--pagedjs-bleed-right-bottom);
}

.pagedjs_left_page .pagedjs_sheet {
	width: var(--pagedjs-width-left);
	height: var(--pagedjs-height-left);
	grid-template-columns: [bleed-left] var(--pagedjs-bleed-left-left) [sheet-center] calc(var(--pagedjs-width) - var(--pagedjs-bleed-left-left) - var(--pagedjs-bleed-left-right)) [bleed-right] var(--pagedjs-bleed-left-right);
	grid-template-rows: [bleed-top] var(--pagedjs-bleed-left-top) [sheet-middle] calc(var(--pagedjs-height) - var(--pagedjs-bleed-left-top) - var(--pagedjs-bleed-left-bottom)) [bleed-bottom] var(--pagedjs-bleed-left-bottom);
}

.pagedjs_bleed {
	display: flex;
	align-items: center;
	justify-content: center;
	flex-wrap: nowrap;
	overflow: hidden;
}

.pagedjs_bleed-top {
	grid-column: bleed-left / -1;
	grid-row: bleed-top;
	flex-direction: row;
}

.pagedjs_bleed-bottom {
	grid-column: bleed-left / -1;
	grid-row: bleed-bottom;
	flex-direction: row;
}

.pagedjs_bleed-left {
	grid-column: bleed-left;
	grid-row: bleed-top / -1;
	flex-direction: column;
}

.pagedjs_bleed-right {
	grid-column: bleed-right;
	grid-row: bleed-top / -1;
	flex-direction: column;
}

.pagedjs_marks-crop {
	display: var(--pagedjs-mark-crop-display);
	flex-grow: 0;
	flex-shrink: 0;
	z-index: 9999999999;
}

.pagedjs_bleed-top .pagedjs_marks-crop:nth-child(1),
.pagedjs_bleed-bottom .pagedjs_marks-crop:nth-child(1) {
	width: calc(var(--pagedjs-bleed-left) - var(--pagedjs-crop-stroke));
	border-right: var(--pagedjs-crop-stroke) solid var(--pagedjs-crop-color);
	box-shadow: 1px 0px 0px 0px var(--pagedjs-crop-shadow);
}

.pagedjs_right_page .pagedjs_bleed-top .pagedjs_marks-crop:nth-child(1),
.pagedjs_right_page .pagedjs_bleed-bottom .pagedjs_marks-crop:nth-child(1) {
	width: calc(var(--pagedjs-bleed-right-left) - var(--pagedjs-crop-stroke));
}

.pagedjs_left_page .pagedjs_bleed-top .pagedjs_marks-crop:nth-child(1),
.pagedjs_left_page .pagedjs_bleed-bottom .pagedjs_marks-crop:nth-child(1) {
	width: calc(var(--pagedjs-bleed-left-left) - var(--pagedjs-crop-stroke));
}

.pagedjs_bleed-top .pagedjs_marks-crop:nth-child(3),
.pagedjs_bleed-bottom .pagedjs_marks-crop:nth-child(3) {
	width: calc(var(--pagedjs-bleed-right) - var(--pagedjs-crop-stroke));
	border-left: var(--pagedjs-crop-stroke) solid var(--pagedjs-crop-color);
	box-shadow: -1px 0px 0px 0px var(--pagedjs-crop-shadow);
}

.pagedjs_right_page .pagedjs_bleed-top .pagedjs_marks-crop:nth-child(3),
.pagedjs_right_page .pagedjs_bleed-bottom .pagedjs_marks-crop:nth-child(3) {
	width: calc(var(--pagedjs-bleed-right-right) - var(--pagedjs-crop-stroke));
}

.pagedjs_left_page .pagedjs_bleed-top .pagedjs_marks-crop:nth-child(3),
.pagedjs_left_page .pagedjs_bleed-bottom .pagedjs_marks-crop:nth-child(3) {
	width: calc(var(--pagedjs-bleed-left-right) - var(--pagedjs-crop-stroke));
}

.pagedjs_bleed-top .pagedjs_marks-crop {
	align-self: flex-start;
	height: calc(var(--pagedjs-bleed-top) - var(--pagedjs-crop-offset));
}

.pagedjs_right_page .pagedjs_bleed-top .pagedjs_marks-crop {
	height: calc(var(--pagedjs-bleed-right-top) - var(--pagedjs-crop-offset));
}

.pagedjs_left_page .pagedjs_bleed-top .pagedjs_marks-crop {
	height: calc(var(--pagedjs-bleed-left-top) - var(--pagedjs-crop-offset));
}

.pagedjs_bleed-bottom .pagedjs_marks-crop {
	align-self: flex-end;
	height: calc(var(--pagedjs-bleed-bottom) - var(--pagedjs-crop-offset));
}

.pagedjs_right_page .pagedjs_bleed-bottom .pagedjs_marks-crop {
	height: calc(var(--pagedjs-bleed-right-bottom) - var(--pagedjs-crop-offset));
}

.pagedjs_left_page .pagedjs_bleed-bottom .pagedjs_marks-crop {
	height: calc(var(--pagedjs-bleed-left-bottom) - var(--pagedjs-crop-offset));
}

.pagedjs_bleed-left .pagedjs_marks-crop:nth-child(1),
.pagedjs_bleed-right .pagedjs_marks-crop:nth-child(1) {
	height: calc(var(--pagedjs-bleed-top) - var(--pagedjs-crop-stroke));
	border-bottom: var(--pagedjs-crop-stroke) solid var(--pagedjs-crop-color);
	box-shadow: 0px 1px 0px 0px var(--pagedjs-crop-shadow);
}

.pagedjs_right_page .pagedjs_bleed-left .pagedjs_marks-crop:nth-child(1),
.pagedjs_right_page .pagedjs_bleed-right .pagedjs_marks-crop:nth-child(1) {
	height: calc(var(--pagedjs-bleed-right-top) - var(--pagedjs-crop-stroke));
}

.pagedjs_left_page .pagedjs_bleed-left .pagedjs_marks-crop:nth-child(1),
.pagedjs_left_page .pagedjs_bleed-right .pagedjs_marks-crop:nth-child(1) {
	height: calc(var(--pagedjs-bleed-left-top) - var(--pagedjs-crop-stroke));
}

.pagedjs_bleed-left .pagedjs_marks-crop:nth-child(3),
.pagedjs_bleed-right .pagedjs_marks-crop:nth-child(3) {
	height: calc(var(--pagedjs-bleed-bottom) - var(--pagedjs-crop-stroke));
	border-top: var(--pagedjs-crop-stroke) solid var(--pagedjs-crop-color);
	box-shadow: 0px -1px 0px 0px var(--pagedjs-crop-shadow);
}

.pagedjs_right_page .pagedjs_bleed-left .pagedjs_marks-crop:nth-child(3),
.pagedjs_right_page .pagedjs_bleed-right .pagedjs_marks-crop:nth-child(3) {
	height: calc(var(--pagedjs-bleed-right-bottom) - var(--pagedjs-crop-stroke));
}

.pagedjs_left_page .pagedjs_bleed-left .pagedjs_marks-crop:nth-child(3),
.pagedjs_left_page .pagedjs_bleed-right .pagedjs_marks-crop:nth-child(3) {
	height: calc(var(--pagedjs-bleed-left-bottom) - var(--pagedjs-crop-stroke));
}

.pagedjs_bleed-left .pagedjs_marks-crop {
	width: calc(var(--pagedjs-bleed-left) - var(--pagedjs-crop-offset));
	align-self: flex-start;
}

.pagedjs_right_page .pagedjs_bleed-left .pagedjs_marks-crop {
	width: calc(var(--pagedjs-bleed-right-left) - var(--pagedjs-crop-offset));
}

.pagedjs_left_page .pagedjs_bleed-left .pagedjs_marks-crop {
	width: calc(var(--pagedjs-bleed-left-left) - var(--pagedjs-crop-offset));
}

.pagedjs_bleed-right .pagedjs_marks-crop {
	width: calc(var(--pagedjs-bleed-right) - var(--pagedjs-crop-offset));
	align-self: flex-end;
}

.pagedjs_right_page .pagedjs_bleed-right .pagedjs_marks-crop {
	width: calc(var(--pagedjs-bleed-right-right) - var(--pagedjs-crop-offset));
}

.pagedjs_left_page .pagedjs_bleed-right .pagedjs_marks-crop {
	width: calc(var(--pagedjs-bleed-left-right) - var(--pagedjs-crop-offset));
}

.pagedjs_marks-middle {
	display: flex;
	flex-grow: 1;
	flex-shrink: 0;
	align-items: center;
	justify-content: center;
}

.pagedjs_marks-cross {
	display: var(--pagedjs-mark-cross-display);
	background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIzMi41MzdweCIgaGVpZ2h0PSIzMi41MzdweCIgdmlld0JveD0iMC4xMDQgMC4xMDQgMzIuNTM3IDMyLjUzNyIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwLjEwNCAwLjEwNCAzMi41MzcgMzIuNTM3IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNGRkZGRkYiIHN0cm9rZS13aWR0aD0iMy4zODkzIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0yOS45MzEsMTYuMzczYzAsNy40ODktNi4wNjgsMTMuNTYtMTMuNTU4LDEzLjU2Yy03LjQ4MywwLTEzLjU1Ny02LjA3Mi0xMy41NTctMTMuNTZjMC03LjQ4Niw2LjA3NC0xMy41NTQsMTMuNTU3LTEzLjU1NEMyMy44NjIsMi44MTksMjkuOTMxLDguODg3LDI5LjkzMSwxNi4zNzN6Ii8+PGxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjRkZGRkZGIiBzdHJva2Utd2lkdGg9IjMuMzg5MyIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiB4MT0iMC4xMDQiIHkxPSIxNi4zNzMiIHgyPSIzMi42NDIiIHkyPSIxNi4zNzMiLz48bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiNGRkZGRkYiIHN0cm9rZS13aWR0aD0iMy4zODkzIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHgxPSIxNi4zNzMiIHkxPSIwLjEwNCIgeDI9IjE2LjM3MyIgeTI9IjMyLjY0MiIvPjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0ZGRkZGRiIgc3Ryb2tlLXdpZHRoPSIzLjM4OTMiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTI0LjUwOCwxNi4zNzNjMCw0LjQ5Ni0zLjYzOCw4LjEzNS04LjEzNSw4LjEzNWMtNC40OTEsMC04LjEzNS0zLjYzOC04LjEzNS04LjEzNWMwLTQuNDg5LDMuNjQ0LTguMTM1LDguMTM1LTguMTM1QzIwLjg2OSw4LjIzOSwyNC41MDgsMTEuODg0LDI0LjUwOCwxNi4zNzN6Ii8+PHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjAuNjc3OCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMjkuOTMxLDE2LjM3M2MwLDcuNDg5LTYuMDY4LDEzLjU2LTEzLjU1OCwxMy41NmMtNy40ODMsMC0xMy41NTctNi4wNzItMTMuNTU3LTEzLjU2YzAtNy40ODYsNi4wNzQtMTMuNTU0LDEzLjU1Ny0xMy41NTRDMjMuODYyLDIuODE5LDI5LjkzMSw4Ljg4NywyOS45MzEsMTYuMzczeiIvPjxsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIwLjY3NzgiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgeDE9IjAuMTA0IiB5MT0iMTYuMzczIiB4Mj0iMzIuNjQyIiB5Mj0iMTYuMzczIi8+PGxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjAuNjc3OCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiB4MT0iMTYuMzczIiB5MT0iMC4xMDQiIHgyPSIxNi4zNzMiIHkyPSIzMi42NDIiLz48cGF0aCBkPSJNMjQuNTA4LDE2LjM3M2MwLDQuNDk2LTMuNjM4LDguMTM1LTguMTM1LDguMTM1Yy00LjQ5MSwwLTguMTM1LTMuNjM4LTguMTM1LTguMTM1YzAtNC40ODksMy42NDQtOC4xMzUsOC4xMzUtOC4xMzVDMjAuODY5LDguMjM5LDI0LjUwOCwxMS44ODQsMjQuNTA4LDE2LjM3MyIvPjxsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0ZGRkZGRiIgc3Ryb2tlLXdpZHRoPSIwLjY3NzgiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgeDE9IjguMjM5IiB5MT0iMTYuMzczIiB4Mj0iMjQuNTA4IiB5Mj0iMTYuMzczIi8+PGxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjRkZGRkZGIiBzdHJva2Utd2lkdGg9IjAuNjc3OCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiB4MT0iMTYuMzczIiB5MT0iOC4yMzkiIHgyPSIxNi4zNzMiIHkyPSIyNC41MDgiLz48L3N2Zz4=);
  background-repeat: no-repeat;
  background-position: 50% 50%;
  background-size: var(--pagedjs-cross-size);

  z-index: 2147483647;
	width: var(--pagedjs-cross-size);
	height: var(--pagedjs-cross-size);
}

.pagedjs_pagebox {
	box-sizing: border-box;
	width: var(--pagedjs-pagebox-width);
	height: var(--pagedjs-pagebox-height);
	position: relative;
	display: grid;
	grid-template-columns: [left] var(--pagedjs-margin-left) [center] calc(var(--pagedjs-pagebox-width) - var(--pagedjs-margin-left) - var(--pagedjs-margin-right)) [right] var(--pagedjs-margin-right);
	grid-template-rows: [header] var(--pagedjs-margin-top) [page] calc(var(--pagedjs-pagebox-height) - var(--pagedjs-margin-top) - var(--pagedjs-margin-bottom)) [footer] var(--pagedjs-margin-bottom);
	grid-column: sheet-center;
	grid-row: sheet-middle;
}

.pagedjs_pagebox * {
	box-sizing: border-box;
}

.pagedjs_margin-top {
	width: calc(var(--pagedjs-pagebox-width) - var(--pagedjs-margin-left) - var(--pagedjs-margin-right));
	height: var(--pagedjs-margin-top);
	grid-column: center;
	grid-row: header;
	flex-wrap: nowrap;
	display: grid;
	grid-template-columns: repeat(3, 1fr);
	grid-template-rows: 100%;
}

.pagedjs_margin-top-left-corner-holder {
	width: var(--pagedjs-margin-left);
	height: var(--pagedjs-margin-top);
	display: flex;
	grid-column: left;
	grid-row: header;
}

.pagedjs_margin-top-right-corner-holder {
	width: var(--pagedjs-margin-right);
	height: var(--pagedjs-margin-top);
	display: flex;
	grid-column: right;
	grid-row: header;
}

.pagedjs_margin-top-left-corner {
	width: var(--pagedjs-margin-left);
}

.pagedjs_margin-top-right-corner {
	width: var(--pagedjs-margin-right);
}

.pagedjs_margin-right {
	height: calc(var(--pagedjs-pagebox-height) - var(--pagedjs-margin-top) - var(--pagedjs-margin-bottom));
	width: var(--pagedjs-margin-right);
	right: 0;
	grid-column: right;
	grid-row: page;
	display: grid;
	grid-template-rows: repeat(3, 33.3333%);
	grid-template-columns: 100%;
}

.pagedjs_margin-bottom {
	width: calc(var(--pagedjs-pagebox-width) - var(--pagedjs-margin-left) - var(--pagedjs-margin-right));
	height: var(--pagedjs-margin-bottom);
	grid-column: center;
	grid-row: footer;
	display: grid;
	grid-template-columns: repeat(3, 1fr);
	grid-template-rows: 100%;
}

.pagedjs_margin-bottom-left-corner-holder {
	width: var(--pagedjs-margin-left);
	height: var(--pagedjs-margin-bottom);
	display: flex;
	grid-column: left;
	grid-row: footer;
}

.pagedjs_margin-bottom-right-corner-holder {
	width: var(--pagedjs-margin-right);
	height: var(--pagedjs-margin-bottom);
	display: flex;
	grid-column: right;
	grid-row: footer;
}

.pagedjs_margin-bottom-left-corner {
	width: var(--pagedjs-margin-left);
}

.pagedjs_margin-bottom-right-corner {
	width: var(--pagedjs-margin-right);
}



.pagedjs_margin-left {
	height: calc(var(--pagedjs-pagebox-height) - var(--pagedjs-margin-top) - var(--pagedjs-margin-bottom));
	width: var(--pagedjs-margin-left);
	grid-column: left;
	grid-row: page;
	display: grid;
	grid-template-rows: repeat(3, 33.33333%);
	grid-template-columns: 100%;
}

.pagedjs_pages .pagedjs_pagebox .pagedjs_margin:not(.hasContent) {
	visibility: hidden;
}

.pagedjs_pagebox > .pagedjs_area {
	grid-column: center;
	grid-row: page;
	width: 100%;
	height: 100%;
	padding: var(--pagedjs-padding-top) var(--pagedjs-padding-right) var(--pagedjs-padding-bottom) var(--pagedjs-padding-left);
	border-top: var(--pagedjs-border-top);
	border-right: var(--pagedjs-border-right);
	border-bottom: var(--pagedjs-border-bottom);
	border-left: var(--pagedjs-border-left);
}

.pagedjs_pagebox > .pagedjs_area > .pagedjs_page_content {
	width: 100%;
	height: calc(100% - var(--pagedjs-footnotes-height));
	position: relative;
	column-fill: auto;
}

.pagedjs_pagebox > .pagedjs_area > .pagedjs_page_content > div {
	height: inherit;
}

.pagedjs_pagebox > .pagedjs_area > .pagedjs_footnote_area {
	position: relative;
	overflow: hidden;
	height: var(--pagedjs-footnotes-height);
	display: flex;
    justify-content: flex-end;
    flex-flow: column;
}

.pagedjs_pagebox > .pagedjs_area > .pagedjs_footnote_area > .pagedjs_footnote_content {
	overflow: hidden;
}

.pagedjs_pagebox > .pagedjs_area > .pagedjs_footnote_area > .pagedjs_footnote_inner_content {
	overflow: hidden;
}

.pagedjs_area [data-footnote-call] {
	all: unset;
	counter-increment: footnote;
}

.pagedjs_area [data-split-from] {
	counter-increment: unset;
	counter-reset: unset;
}

[data-footnote-call]::after {
	vertical-align: super;
	font-size: 65%;
	line-height: normal;
	content: counter(footnote);
}

@supports ( font-variant-position: super ) {
	[data-footnote-call]::after {
		vertical-align: baseline;
		font-size: 100%;
		line-height: inherit;
		font-variant-position: super;
	}
}

.pagedjs_footnote_empty {
	display: none;
}

.pagedjs_area [data-split-from] {
	counter-increment: unset;
	counter-reset: unset;
}

[data-footnote-marker] {
	text-indent: 0;
	display: list-item;
	list-style-position: inside;
}

[data-footnote-marker][data-split-from] {
	list-style: none;
}

[data-footnote-marker]:not([data-split-from]) {
	counter-increment: footnote-marker;
}

[data-footnote-marker]::marker {
	content: counter(footnote-marker) ". ";
}

[data-footnote-marker][data-split-from]::marker {
	content: unset;
}

.pagedjs_area .pagedjs_footnote_inner_content [data-note-display="inline"] {
 	display: inline;
}

.pagedjs_page {
	counter-increment: page var(--pagedjs-page-counter-increment);
	width: var(--pagedjs-width);
	height: var(--pagedjs-height);
}

.pagedjs_page.pagedjs_right_page {
	width: var(--pagedjs-width-right);
	height: var(--pagedjs-height-right);
}

.pagedjs_page.pagedjs_left_page {
	width: var(--pagedjs-width-left);
	height: var(--pagedjs-height-left);
}

.pagedjs_pages {
	counter-reset: pages var(--pagedjs-page-count) footnote var(--pagedjs-footnotes-count) footnote-marker var(--pagedjs-footnotes-count);
}

.pagedjs_pagebox .pagedjs_margin-top-left-corner,
.pagedjs_pagebox .pagedjs_margin-top-right-corner,
.pagedjs_pagebox .pagedjs_margin-bottom-left-corner,
.pagedjs_pagebox .pagedjs_margin-bottom-right-corner,
.pagedjs_pagebox .pagedjs_margin-top-left,
.pagedjs_pagebox .pagedjs_margin-top-right,
.pagedjs_pagebox .pagedjs_margin-bottom-left,
.pagedjs_pagebox .pagedjs_margin-bottom-right,
.pagedjs_pagebox .pagedjs_margin-top-center,
.pagedjs_pagebox .pagedjs_margin-bottom-center,
.pagedjs_pagebox .pagedjs_margin-top-center,
.pagedjs_pagebox .pagedjs_margin-bottom-center,
.pagedjs_margin-right-middle,
.pagedjs_margin-left-middle  {
	display: flex;
	align-items: center;
}

.pagedjs_margin-right-top,
.pagedjs_margin-left-top  {
	display: flex;
	align-items: flex-top;
}


.pagedjs_margin-right-bottom,
.pagedjs_margin-left-bottom  {
	display: flex;
	align-items: flex-end;
}



/*
.pagedjs_pagebox .pagedjs_margin-top-center,
.pagedjs_pagebox .pagedjs_margin-bottom-center {
	height: 100%;
	display: none;
	align-items: center;
	flex: 1 0 33%;
	margin: 0 auto;
}

.pagedjs_pagebox .pagedjs_margin-top-left-corner,
.pagedjs_pagebox .pagedjs_margin-top-right-corner,
.pagedjs_pagebox .pagedjs_margin-bottom-right-corner,
.pagedjs_pagebox .pagedjs_margin-bottom-left-corner {
	display: none;
	align-items: center;
}

.pagedjs_pagebox .pagedjs_margin-left-top,
.pagedjs_pagebox .pagedjs_margin-right-top {
	display: none;
	align-items: flex-start;
}

.pagedjs_pagebox .pagedjs_margin-right-middle,
.pagedjs_pagebox .pagedjs_margin-left-middle {
	display: none;
	align-items: center;
}

.pagedjs_pagebox .pagedjs_margin-left-bottom,
.pagedjs_pagebox .pagedjs_margin-right-bottom {
	display: none;
	align-items: flex-end;
}
*/

.pagedjs_pagebox .pagedjs_margin-top-left,
.pagedjs_pagebox .pagedjs_margin-top-right-corner,
.pagedjs_pagebox .pagedjs_margin-bottom-left,
.pagedjs_pagebox .pagedjs_margin-bottom-right-corner { text-align: left; }

.pagedjs_pagebox .pagedjs_margin-top-left-corner,
.pagedjs_pagebox .pagedjs_margin-top-right,
.pagedjs_pagebox .pagedjs_margin-bottom-left-corner,
.pagedjs_pagebox .pagedjs_margin-bottom-right { text-align: right; }

.pagedjs_pagebox .pagedjs_margin-top-center,
.pagedjs_pagebox .pagedjs_margin-bottom-center,
.pagedjs_pagebox .pagedjs_margin-left-top,
.pagedjs_pagebox .pagedjs_margin-left-middle,
.pagedjs_pagebox .pagedjs_margin-left-bottom,
.pagedjs_pagebox .pagedjs_margin-right-top,
.pagedjs_pagebox .pagedjs_margin-right-middle,
.pagedjs_pagebox .pagedjs_margin-right-bottom { text-align: center; }

.pagedjs_pages .pagedjs_margin .pagedjs_margin-content {
	width: 100%;
}

.pagedjs_pages .pagedjs_margin-left .pagedjs_margin-content::after,
.pagedjs_pages .pagedjs_margin-top .pagedjs_margin-content::after,
.pagedjs_pages .pagedjs_margin-right .pagedjs_margin-content::after,
.pagedjs_pages .pagedjs_margin-bottom .pagedjs_margin-content::after {
	display: block;
}

.pagedjs_pages > .pagedjs_page > .pagedjs_sheet > .pagedjs_pagebox > .pagedjs_area > div [data-split-to] {
	margin-bottom: unset;
	padding-bottom: unset;
}

.pagedjs_pages > .pagedjs_page > .pagedjs_sheet > .pagedjs_pagebox > .pagedjs_area > div [data-split-from] {
	text-indent: unset;
	margin-top: unset;
	padding-top: unset;
	initial-letter: unset;
}

.pagedjs_pages > .pagedjs_page > .pagedjs_sheet > .pagedjs_pagebox > .pagedjs_area > div [data-split-from] > *::first-letter,
.pagedjs_pages > .pagedjs_page > .pagedjs_sheet > .pagedjs_pagebox > .pagedjs_area > div [data-split-from]::first-letter {
	color: unset;
	font-size: unset;
	font-weight: unset;
	font-family: unset;
	color: unset;
	line-height: unset;
	float: unset;
	padding: unset;
	margin: unset;
}

.pagedjs_pages > .pagedjs_page > .pagedjs_sheet > .pagedjs_pagebox > .pagedjs_area > div [data-split-to]:not([data-footnote-call]):after,
.pagedjs_pages > .pagedjs_page > .pagedjs_sheet > .pagedjs_pagebox > .pagedjs_area > div [data-split-to]:not([data-footnote-call])::after {
	content: unset;
}

.pagedjs_pages > .pagedjs_page > .pagedjs_sheet > .pagedjs_pagebox > .pagedjs_area > div [data-split-from]:not([data-footnote-call]):before,
.pagedjs_pages > .pagedjs_page > .pagedjs_sheet > .pagedjs_pagebox > .pagedjs_area > div [data-split-from]:not([data-footnote-call])::before {
	content: unset;
}

.pagedjs_pages > .pagedjs_page > .pagedjs_sheet > .pagedjs_pagebox > .pagedjs_area > div li[data-split-from]:first-of-type {
	list-style: none;
}

/*
[data-page]:not([data-split-from]),
[data-break-before="page"]:not([data-split-from]),
[data-break-before="always"]:not([data-split-from]),
[data-break-before="left"]:not([data-split-from]),
[data-break-before="right"]:not([data-split-from]),
[data-break-before="recto"]:not([data-split-from]),
[data-break-before="verso"]:not([data-split-from])
{
	break-before: column;
}

[data-page]:not([data-split-to]),
[data-break-after="page"]:not([data-split-to]),
[data-break-after="always"]:not([data-split-to]),
[data-break-after="left"]:not([data-split-to]),
[data-break-after="right"]:not([data-split-to]),
[data-break-after="recto"]:not([data-split-to]),
[data-break-after="verso"]:not([data-split-to])
{
	break-after: column;
}
*/

.pagedjs_clear-after::after {
	content: none !important;
}

[data-align-last-split-element='justify'] {
	text-align-last: justify;
}


@media print {
	html {
		width: 100%;
		height: 100%;
		-webkit-print-color-adjust: exact;
		print-color-adjust: exact;
	}
	body {
		margin: 0;
		padding: 0;
		width: 100% !important;
		height: 100% !important;
		min-width: 100%;
		max-width: 100%;
		min-height: 100%;
		max-height: 100%;
	}
	.pagedjs_pages {
		width: auto;
		display: block !important;
		transform: none !important;
		height: 100% !important;
		min-height: 100%;
		max-height: 100%;
		overflow: visible;
	}
	.pagedjs_page {
		margin: 0;
		padding: 0;
		max-height: 100%;
		min-height: 100%;
		height: 100% !important;
		page-break-after: always;
		break-after: page;
	}
	.pagedjs_sheet {
		margin: 0;
		padding: 0;
		max-height: 100%;
		min-height: 100%;
		height: 100% !important;
	}
}
`;async function Rf(s,o={}){return new Promise(function(p,d){let f=new XMLHttpRequest;f.open(o.method||"get",s,!0);for(let a in o.headers)f.setRequestHeader(a,o.headers[a]);f.withCredentials=o.credentials==="include",f.onload=()=>{let a=f.status===0&&s.startsWith("file://")?200:f.status;p(new Response(f.responseText,{status:a}))},f.onerror=d,f.send(o.body||null)})}var $y=class{constructor(o){this.sheets=[],this.inserted=[],this.hooks={},this.hooks.onUrl=new Pt(this),this.hooks.onAtPage=new Pt(this),this.hooks.onAtMedia=new Pt(this),this.hooks.onRule=new Pt(this),this.hooks.onDeclaration=new Pt(this),this.hooks.onContent=new Pt(this),this.hooks.onSelector=new Pt(this),this.hooks.onPseudoSelector=new Pt(this),this.hooks.onImport=new Pt(this),this.hooks.beforeTreeParse=new Pt(this),this.hooks.beforeTreeWalk=new Pt(this),this.hooks.afterTreeWalk=new Pt(this),o!==!1&&this.setup()}setup(){return this.base=this.insert(XC),this.styleEl=document.createElement("style"),document.head.appendChild(this.styleEl),this.styleSheet=this.styleEl.sheet,this.styleSheet}async add(){let o=[],p=[];for(var d=0;d<arguments.length;d++){let f;if(typeof arguments[d]=="object")for(let a in arguments[d]){let T=arguments[d];f=new Promise(function(M,R){p.push(a),M(T[a])})}else p.push(arguments[d]),f=Rf(arguments[d]).then(a=>a.text());o.push(f)}return await Promise.all(o).then(async f=>{let a="";for(let T=0;T<f.length;T++)a=await this.convertViaSheet(f[T],p[T]),this.insert(a);return a})}async convertViaSheet(o,p){let d=new YC(p,this.hooks);await d.parse(o);for(let f of d.imported){let a=await Rf(f).then(M=>M.text()),T=await this.convertViaSheet(a,f);this.insert(T)}return this.sheets.push(d),typeof d.width!="undefined"&&(this.width=d.width),typeof d.height!="undefined"&&(this.height=d.height),typeof d.orientation!="undefined"&&(this.orientation=d.orientation),d.toString()}insert(o){let p=document.querySelector("head"),d=document.createElement("style");return d.setAttribute("data-pagedjs-inserted-styles","true"),d.appendChild(document.createTextNode(o)),p.appendChild(d),this.inserted.push(d),d}destroy(){this.styleEl.remove(),this.inserted.forEach(o=>{o.remove()}),this.sheets=[]}},Hy=$y;var KP=Ai(Cl(),1);var KC=Ai(Cl(),1),Bf=class{constructor(o,p,d){let f=Object.assign({},o&&o.hooks,p&&p.hooks,d&&d.hooks);this.chunker=o,this.polisher=p,this.caller=d;for(let a in f)a in this&&f[a].register(this[a].bind(this))}};(0,KC.default)(Bf.prototype);var ai=Bf;var Tt=Ai(In(),1);var Yy={A0:{width:{value:841,unit:"mm"},height:{value:1189,unit:"mm"}},A1:{width:{value:594,unit:"mm"},height:{value:841,unit:"mm"}},A2:{width:{value:420,unit:"mm"},height:{value:594,unit:"mm"}},A3:{width:{value:297,unit:"mm"},height:{value:420,unit:"mm"}},A4:{width:{value:210,unit:"mm"},height:{value:297,unit:"mm"}},A5:{width:{value:148,unit:"mm"},height:{value:210,unit:"mm"}},A6:{width:{value:105,unit:"mm"},height:{value:148,unit:"mm"}},A7:{width:{value:74,unit:"mm"},height:{value:105,unit:"mm"}},A8:{width:{value:52,unit:"mm"},height:{value:74,unit:"mm"}},A9:{width:{value:37,unit:"mm"},height:{value:52,unit:"mm"}},A10:{width:{value:26,unit:"mm"},height:{value:37,unit:"mm"}},B4:{width:{value:250,unit:"mm"},height:{value:353,unit:"mm"}},B5:{width:{value:176,unit:"mm"},height:{value:250,unit:"mm"}},letter:{width:{value:8.5,unit:"in"},height:{value:11,unit:"in"}},legal:{width:{value:8.5,unit:"in"},height:{value:14,unit:"in"}},ledger:{width:{value:11,unit:"in"},height:{value:17,unit:"in"}}};var Xy=class extends ai{constructor(o,p,d){super(o,p,d),this.pages={},this.width=void 0,this.height=void 0,this.orientation=void 0,this.marginalia={}}pageModel(o){return{selector:o,name:void 0,psuedo:void 0,nth:void 0,marginalia:{},width:void 0,height:void 0,orientation:void 0,margin:{top:{},right:{},left:{},bottom:{}},padding:{top:{},right:{},left:{},bottom:{}},border:{top:{},right:{},left:{},bottom:{}},backgroundOrigin:void 0,block:{},marks:void 0,notes:void 0,added:!1}}onAtPage(o,p,d){let f,a,T="",M,R,V,Y=!1;o.prelude?(M=this.getTypeSelector(o),R=this.getPsuedoSelector(o),V=this.getNthSelector(o),T=Tt.default.generate(o.prelude)):T="*",T in this.pages?(f=this.pages[T],a=this.replaceMarginalia(o),Y=!0,f.added=!1):(f=this.pageModel(T),a=this.replaceMarginalia(o),this.pages[T]=f),f.name=M,f.psuedo=R,f.nth=V,Y?f.marginalia=Object.assign(f.marginalia,a):f.marginalia=a;let re=this.replaceNotes(o);f.notes=re;let G=this.replaceDeclarations(o);if(G.size&&(f.size=G.size,f.width=G.size.width,f.height=G.size.height,f.orientation=G.size.orientation,f.format=G.size.format),G.bleed&&G.bleed[0]!="auto")switch(G.bleed.length){case 4:f.bleed={top:G.bleed[0],right:G.bleed[1],bottom:G.bleed[2],left:G.bleed[3]};break;case 3:f.bleed={top:G.bleed[0],right:G.bleed[1],bottom:G.bleed[2],left:G.bleed[1]};break;case 2:f.bleed={top:G.bleed[0],right:G.bleed[1],bottom:G.bleed[0],left:G.bleed[1]};break;default:f.bleed={top:G.bleed[0],right:G.bleed[0],bottom:G.bleed[0],left:G.bleed[0]}}G.marks&&((!G.bleed||G.bleed&&G.bleed[0]==="auto")&&(f.bleed={top:{value:6,unit:"mm"},right:{value:6,unit:"mm"},bottom:{value:6,unit:"mm"},left:{value:6,unit:"mm"}}),f.marks=G.marks),G.margin&&(f.margin=G.margin),G.padding&&(f.padding=G.padding),G.border&&(f.border=G.border),G.marks&&(f.marks=G.marks),Y?f.block.children.appendList(o.block.children):f.block=o.block,d.remove(p)}afterTreeWalk(o,p){let d="*"in this.pages&&this.pages["*"].added===!1;if(this.addPageClasses(this.pages,o,p),d){let f=this.pages["*"].width,a=this.pages["*"].height,T=this.pages["*"].format,M=this.pages["*"].orientation,R=this.pages["*"].bleed,V=this.pages["*"].marks,Y,re;":left"in this.pages&&(Y=this.pages[":left"].bleed),":right"in this.pages&&(re=this.pages[":right"].bleed),f&&a&&(this.width!==f||this.height!==a)&&(this.width=f,this.height=a,this.format=T,this.orientation=M,this.addRootVars(o,f,a,M,R,re,Y,V),this.addRootPage(o,this.pages["*"].size,R,re,Y),this.emit("size",{width:f,height:a,orientation:M,format:T,bleed:R}),this.emit("atpages",this.pages))}}getTypeSelector(o){let p;return Tt.default.walk(o,{visit:"TypeSelector",enter:(d,f,a)=>{p=d.name}}),p}getPsuedoSelector(o){let p;return Tt.default.walk(o,{visit:"PseudoClassSelector",enter:(d,f,a)=>{d.name!=="nth"&&(p=d.name)}}),p}getNthSelector(o){let p;return Tt.default.walk(o,{visit:"PseudoClassSelector",enter:(d,f,a)=>{d.name==="nth"&&d.children&&(p=d.children.first().value)}}),p}replaceMarginalia(o){let p={},d=["top-left-corner","top-left","top","top-center","top-right","top-right-corner","bottom-left-corner","bottom-left","bottom","bottom-center","bottom-right","bottom-right-corner","left-top","left-middle","left","left-bottom","top-right-corner","right-top","right-middle","right","right-bottom","right-right-corner"];return Tt.default.walk(o.block,{visit:"Atrule",enter:(f,a,T)=>{let M=f.name;d.includes(M)&&(M==="top"&&(M="top-center"),M==="right"&&(M="right-middle"),M==="left"&&(M="left-middle"),M==="bottom"&&(M="bottom-center"),p[M]=f.block,T.remove(a))}}),p}replaceNotes(o){let p={};return Tt.default.walk(o.block,{visit:"Atrule",enter:(d,f,a)=>{let T=d.name;T==="footnote"&&(p[T]=d.block,a.remove(f))}}),p}replaceDeclarations(o){let p={};return Tt.default.walk(o.block,{visit:"Declaration",enter:(d,f,a)=>{let T=Tt.default.property(d.property).name;if(T==="marks")p.marks=[],Tt.default.walk(d,{visit:"Identifier",enter:M=>{p.marks.push(M.name)}}),a.remove(f);else if(T==="margin")p.margin=this.getMargins(d),a.remove(f);else if(T.indexOf("margin-")===0){let M=T.substring(7);p.margin||(p.margin={top:{},right:{},left:{},bottom:{}}),p.margin[M]=d.value.children.first(),a.remove(f)}else if(T==="padding")p.padding=this.getPaddings(d.value),a.remove(f);else if(T.indexOf("padding-")===0){let M=T.substring(8);p.padding||(p.padding={top:{},right:{},left:{},bottom:{}}),p.padding[M]=d.value.children.first(),a.remove(f)}else if(T==="border")p.border||(p.border={top:{},right:{},left:{},bottom:{}}),p.border.top=Tt.default.generate(d.value),p.border.right=Tt.default.generate(d.value),p.border.left=Tt.default.generate(d.value),p.border.bottom=Tt.default.generate(d.value),a.remove(f);else if(T.indexOf("border-")===0){p.border||(p.border={top:{},right:{},left:{},bottom:{}});let M=T.substring(7);p.border[M]=Tt.default.generate(d.value),a.remove(f)}else T==="size"?(p.size=this.getSize(d),a.remove(f)):T==="bleed"&&(p.bleed=[],Tt.default.walk(d,{enter:M=>{switch(M.type){case"String":M.value.indexOf("auto")>-1&&p.bleed.push("auto");break;case"Dimension":p.bleed.push({value:M.value,unit:M.unit});break;case"Number":p.bleed.push({value:M.value,unit:"px"});break;default:}}}),a.remove(f))}}),p}getSize(o){let p,d,f,a;return Tt.default.walk(o,{visit:"Dimension",enter:(T,M,R)=>{let{value:V,unit:Y}=T;typeof p=="undefined"?p={value:V,unit:Y}:typeof d=="undefined"&&(d={value:V,unit:Y})}}),Tt.default.walk(o,{visit:"String",enter:(T,M,R)=>{let V=T.value.replace(/["|']/g,""),Y=Yy[V];Y&&(p=Y.width,d=Y.height)}}),Tt.default.walk(o,{visit:"Identifier",enter:(T,M,R)=>{let V=T.name;if(V==="landscape"||V==="portrait")f=T.name;else if(V!=="auto"){let Y=Yy[V];Y&&(p=Y.width,d=Y.height),a=V}}}),{width:p,height:d,orientation:f,format:a}}getMargins(o){let p=[],d={top:{},right:{},left:{},bottom:{}};if(Tt.default.walk(o,{enter:f=>{switch(f.type){case"Dimension":p.push(f);break;case"Number":p.push({value:f.value,unit:"px"});break;default:}}}),p.length===1)for(let f in d)d[f]=p[0];else p.length===2?(d.top=p[0],d.right=p[1],d.bottom=p[0],d.left=p[1]):p.length===3?(d.top=p[0],d.right=p[1],d.bottom=p[2],d.left=p[1]):p.length===4&&(d.top=p[0],d.right=p[1],d.bottom=p[2],d.left=p[3]);return d}getPaddings(o){let p=[],d={top:{},right:{},left:{},bottom:{}};if(Tt.default.walk(o,{enter:f=>{switch(f.type){case"Dimension":p.push(f);break;case"Number":p.push({value:f.value,unit:"px"});break;default:}}}),p.length===1)for(let f in d)d[f]=p[0];else p.length===2?(d.top=p[0],d.right=p[1],d.bottom=p[0],d.left=p[1]):p.length===3?(d.top=p[0],d.right=p[1],d.bottom=p[2],d.left=p[1]):p.length===4&&(d.top=p[0],d.right=p[1],d.bottom=p[2],d.left=p[3]);return d}getBorders(o){let p={top:{},right:{},left:{},bottom:{}};return o.prop=="border"?(p.top=Tt.default.generate(o.value),p.right=Tt.default.generate(o.value),p.bottom=Tt.default.generate(o.value),p.left=Tt.default.generate(o.value)):o.prop=="border-top"?p.top=Tt.default.generate(o.value):o.prop=="border-right"?p.right=Tt.default.generate(o.value):o.prop=="border-bottom"?p.bottom=Tt.default.generate(o.value):o.prop=="border-left"&&(p.left=Tt.default.generate(o.value)),p}addPageClasses(o,p,d){if("*"in o&&o["*"].added===!1){let f=this.createPage(o["*"],p.children,d);d.insertRule(f),o["*"].added=!0}if(":left"in o&&o[":left"].added===!1){let f=this.createPage(o[":left"],p.children,d);d.insertRule(f),o[":left"].added=!0}if(":right"in o&&o[":right"].added===!1){let f=this.createPage(o[":right"],p.children,d);d.insertRule(f),o[":right"].added=!0}if(":first"in o&&o[":first"].added===!1){let f=this.createPage(o[":first"],p.children,d);d.insertRule(f),o[":first"].added=!0}if(":blank"in o&&o[":blank"].added===!1){let f=this.createPage(o[":blank"],p.children,d);d.insertRule(f),o[":blank"].added=!0}for(let f in o)if(o[f].nth&&o[f].added===!1){let a=this.createPage(o[f],p.children,d);d.insertRule(a),o[f].added=!0}for(let f in o)if(o[f].name&&o[f].added===!1){let a=this.createPage(o[f],p.children,d);d.insertRule(a),o[f].added=!0}}createPage(o,p,d){let f=this.selectorsForPage(o),a=o.block.children.copy(),T={type:"Block",loc:0,children:a},M=this.createRule(f,T);return this.addMarginVars(o.margin,a,a.first()),this.addPaddingVars(o.padding,a,a.first()),this.addBorderVars(o.border,a,a.first()),o.width&&this.addDimensions(o.width,o.height,o.orientation,a,a.first()),o.marginalia&&(this.addMarginaliaStyles(o,p,M,d),this.addMarginaliaContent(o,p,M,d)),o.notes&&this.addNotesStyles(o.notes,o,p,M,d),M}addMarginVars(o,p,d){for(let f in o)if(typeof o[f].value!="undefined"){let a=o[f].value+(o[f].unit||""),T=p.createItem({type:"Declaration",property:"--pagedjs-margin-"+f,value:{type:"Raw",value:a}});p.append(T,d)}}addPaddingVars(o,p,d){for(let f in o)if(typeof o[f].value!="undefined"){let a=o[f].value+(o[f].unit||""),T=p.createItem({type:"Declaration",property:"--pagedjs-padding-"+f,value:{type:"Raw",value:a}});p.append(T,d)}}addBorderVars(o,p,d){for(let f of Object.keys(o)){let a=o[f];if(typeof a=="string"){let T=p.createItem({type:"Declaration",property:"--pagedjs-border-"+f,value:{type:"Raw",value:a}});p.append(T,d)}}}addDimensions(o,p,d,f,a){let T,M;T=bt(o),M=bt(p),d&&d!=="portrait"&&([T,M]=[M,T]);let R=this.createVariable("--pagedjs-pagebox-width",T);f.appendData(R);let V=this.createVariable("--pagedjs-pagebox-height",M);f.appendData(V)}addMarginaliaStyles(o,p,d,f){for(let a in o.marginalia){let T=Tt.default.clone(o.marginalia[a]),M=!1;if(T.children.isEmpty())continue;Tt.default.walk(T,{visit:"Declaration",enter:(re,G,te)=>{if(re.property==="content"&&(re.value.children&&re.value.children.first().name==="none"?M=!1:M=!0,te.remove(G)),re.property==="vertical-align"&&(Tt.default.walk(re,{visit:"Identifier",enter:(H,Se,je)=>{let ye=H.name;ye==="top"?H.name="flex-start":ye==="middle"?H.name="center":ye==="bottom"&&(H.name="flex-end")}}),re.property="align-items"),re.property==="width"&&(a==="top-left"||a==="top-center"||a==="top-right"||a==="bottom-left"||a==="bottom-center"||a==="bottom-right")){let H=Tt.default.clone(re);H.property="max-width",te.appendData(H)}if(re.property==="height"&&(a==="left-top"||a==="left-middle"||a==="left-bottom"||a==="right-top"||a==="right-middle"||a==="right-bottom")){let H=Tt.default.clone(re);H.property="max-height",te.appendData(H)}}});let R=this.selectorsForPageMargin(o,a),V=this.createRule(R,T);p.appendData(V);let Y=Tt.default.generate({type:"Selector",children:R});this.marginalia[Y]={page:o,selector:Y,block:o.marginalia[a],hasContent:M}}}addMarginaliaContent(o,p,d,f){let a;for(let T in o.marginalia){let M=Tt.default.clone(o.marginalia[T]);if(Tt.default.walk(M,{visit:"Declaration",enter:(te,H,Se)=>{te.property!=="content"&&Se.remove(H),te.value.children&&te.value.children.first().name==="none"&&(a=!0)}}),M.children.isEmpty())continue;let R=this.selectorsForPageMargin(o,T),V;R.insertData({type:"Combinator",name:">"}),R.insertData({type:"ClassSelector",name:"pagedjs_margin-content"}),R.insertData({type:"Combinator",name:">"}),R.insertData({type:"TypeSelector",name:"*"}),a?V=this.createDeclaration("display","none"):V=this.createDeclaration("display","block");let Y=this.createRule(R,[V]);f.insertRule(Y);let re=this.selectorsForPageMargin(o,T);re.insertData({type:"Combinator",name:">"}),re.insertData({type:"ClassSelector",name:"pagedjs_margin-content"}),re.insertData({type:"PseudoElementSelector",name:"after",children:null});let G=this.createRule(re,M);f.insertRule(G)}}addRootVars(o,p,d,f,a,T,M,R){let V=[],Y=new Tt.default.List;Y.insertData({type:"PseudoClassSelector",name:"root",children:null});let re,G,te,H,Se,je;if(!a)re=bt(p),G=bt(d),te=bt(p),H=bt(d),Se=bt(p),je=bt(d);else{re=`calc( ${bt(p)} + ${bt(a.left)} + ${bt(a.right)} )`,G=`calc( ${bt(d)} + ${bt(a.top)} + ${bt(a.bottom)} )`,te=`calc( ${bt(p)} + ${bt(a.left)} + ${bt(a.right)} )`,H=`calc( ${bt(d)} + ${bt(a.top)} + ${bt(a.bottom)} )`,Se=`calc( ${bt(p)} + ${bt(a.left)} + ${bt(a.right)} )`,je=`calc( ${bt(d)} + ${bt(a.top)} + ${bt(a.bottom)} )`;let Gt=this.createVariable("--pagedjs-bleed-top",bt(a.top)),wt=this.createVariable("--pagedjs-bleed-right",bt(a.right)),kt=this.createVariable("--pagedjs-bleed-bottom",bt(a.bottom)),si=this.createVariable("--pagedjs-bleed-left",bt(a.left)),ri=this.createVariable("--pagedjs-bleed-right-top",bt(a.top)),di=this.createVariable("--pagedjs-bleed-right-right",bt(a.right)),ni=this.createVariable("--pagedjs-bleed-right-bottom",bt(a.bottom)),Ut=this.createVariable("--pagedjs-bleed-right-left",bt(a.left)),ut=this.createVariable("--pagedjs-bleed-left-top",bt(a.top)),Ft=this.createVariable("--pagedjs-bleed-left-right",bt(a.right)),_t=this.createVariable("--pagedjs-bleed-left-bottom",bt(a.bottom)),Kt=this.createVariable("--pagedjs-bleed-left-left",bt(a.left));T&&(ri=this.createVariable("--pagedjs-bleed-right-top",bt(T.top)),di=this.createVariable("--pagedjs-bleed-right-right",bt(T.right)),ni=this.createVariable("--pagedjs-bleed-right-bottom",bt(T.bottom)),Ut=this.createVariable("--pagedjs-bleed-right-left",bt(T.left)),te=`calc( ${bt(p)} + ${bt(T.left)} + ${bt(T.right)} )`,H=`calc( ${bt(d)} + ${bt(T.top)} + ${bt(T.bottom)} )`),M&&(ut=this.createVariable("--pagedjs-bleed-left-top",bt(M.top)),Ft=this.createVariable("--pagedjs-bleed-left-right",bt(M.right)),_t=this.createVariable("--pagedjs-bleed-left-bottom",bt(M.bottom)),Kt=this.createVariable("--pagedjs-bleed-left-left",bt(M.left)),Se=`calc( ${bt(p)} + ${bt(M.left)} + ${bt(M.right)} )`,je=`calc( ${bt(d)} + ${bt(M.top)} + ${bt(M.bottom)} )`);let Mi=this.createVariable("--pagedjs-width",bt(p)),Ii=this.createVariable("--pagedjs-height",bt(d));V.push(Gt,wt,kt,si,ri,di,ni,Ut,ut,Ft,_t,Kt,Mi,Ii)}if(R&&R.forEach(Gt=>{let wt=this.createVariable("--pagedjs-mark-"+Gt+"-display","block");V.push(wt)}),f){let Gt=this.createVariable("--pagedjs-orientation",f);V.push(Gt),f!=="portrait"&&([re,G]=[G,re],[te,H]=[H,te],[Se,je]=[je,Se])}let ye=this.createVariable("--pagedjs-width",re),Ce=this.createVariable("--pagedjs-height",G),Ye=this.createVariable("--pagedjs-width-right",te),rt=this.createVariable("--pagedjs-height-right",H),Ct=this.createVariable("--pagedjs-width-left",Se),gt=this.createVariable("--pagedjs-height-left",je);V.push(ye,Ce,Ye,rt,Ct,gt);let Wt=this.createRule(Y,V);o.children.appendData(Wt)}addNotesStyles(o,p,d,f,a){for(let T in o){let M=this.selectorsForPage(p);M.insertData({type:"Combinator",name:" "}),M.insertData({type:"ClassSelector",name:"pagedjs_"+T+"_content"});let R=this.createRule(M,o[T]);d.appendData(R)}}addRootPage(o,p,d,f,a){let{width:T,height:M,orientation:R,format:V}=p,Y=new Tt.default.List,re=new Tt.default.List,G=new Tt.default.List,te=new Tt.default.List,H=new Tt.default.List,Se=new Tt.default.List;if(d){let ye=new Tt.default.List,Ce=new Tt.default.List;ye.appendData({type:"Dimension",unit:T.unit,value:T.value}),ye.appendData({type:"WhiteSpace",value:" "}),ye.appendData({type:"Operator",value:"+"}),ye.appendData({type:"WhiteSpace",value:" "}),ye.appendData({type:"Dimension",unit:d.left.unit,value:d.left.value}),ye.appendData({type:"WhiteSpace",value:" "}),ye.appendData({type:"Operator",value:"+"}),ye.appendData({type:"WhiteSpace",value:" "}),ye.appendData({type:"Dimension",unit:d.right.unit,value:d.right.value}),Ce.appendData({type:"Dimension",unit:M.unit,value:M.value}),Ce.appendData({type:"WhiteSpace",value:" "}),Ce.appendData({type:"Operator",value:"+"}),Ce.appendData({type:"WhiteSpace",value:" "}),Ce.appendData({type:"Dimension",unit:d.top.unit,value:d.top.value}),Ce.appendData({type:"WhiteSpace",value:" "}),Ce.appendData({type:"Operator",value:"+"}),Ce.appendData({type:"WhiteSpace",value:" "}),Ce.appendData({type:"Dimension",unit:d.bottom.unit,value:d.bottom.value}),te.appendData({type:"Function",name:"calc",children:ye}),te.appendData({type:"WhiteSpace",value:" "}),te.appendData({type:"Function",name:"calc",children:Ce})}else V?(te.appendData({type:"Identifier",name:V}),R&&(te.appendData({type:"WhiteSpace",value:" "}),te.appendData({type:"Identifier",name:R}))):(te.appendData({type:"Dimension",unit:T.unit,value:T.value}),te.appendData({type:"WhiteSpace",value:" "}),te.appendData({type:"Dimension",unit:M.unit,value:M.value}));Y.appendData({type:"Declaration",property:"size",loc:null,value:{type:"Value",children:te}}),Y.appendData({type:"Declaration",property:"margin",loc:null,value:{type:"Value",children:[{type:"Dimension",unit:"px",value:0}]}}),Y.appendData({type:"Declaration",property:"padding",loc:null,value:{type:"Value",children:[{type:"Dimension",unit:"px",value:0}]}}),Y.appendData({type:"Declaration",property:"padding",loc:null,value:{type:"Value",children:[{type:"Dimension",unit:"px",value:0}]}});let je=o.children.createItem({type:"Atrule",prelude:null,name:"page",block:{type:"Block",loc:null,children:Y}});if(o.children.append(je),a){let ye=new Tt.default.List,Ce=new Tt.default.List;ye.appendData({type:"Dimension",unit:T.unit,value:T.value}),ye.appendData({type:"WhiteSpace",value:" "}),ye.appendData({type:"Operator",value:"+"}),ye.appendData({type:"WhiteSpace",value:" "}),ye.appendData({type:"Dimension",unit:a.left.unit,value:a.left.value}),ye.appendData({type:"WhiteSpace",value:" "}),ye.appendData({type:"Operator",value:"+"}),ye.appendData({type:"WhiteSpace",value:" "}),ye.appendData({type:"Dimension",unit:a.right.unit,value:a.right.value}),Ce.appendData({type:"Dimension",unit:M.unit,value:M.value}),Ce.appendData({type:"WhiteSpace",value:" "}),Ce.appendData({type:"Operator",value:"+"}),Ce.appendData({type:"WhiteSpace",value:" "}),Ce.appendData({type:"Dimension",unit:a.top.unit,value:a.top.value}),Ce.appendData({type:"WhiteSpace",value:" "}),Ce.appendData({type:"Operator",value:"+"}),Ce.appendData({type:"WhiteSpace",value:" "}),Ce.appendData({type:"Dimension",unit:a.bottom.unit,value:a.bottom.value}),H.appendData({type:"Function",name:"calc",children:ye}),H.appendData({type:"WhiteSpace",value:" "}),H.appendData({type:"Function",name:"calc",children:Ce}),re.appendData({type:"Declaration",property:"size",loc:null,value:{type:"Value",children:H}});let Ye=o.children.createItem({type:"Atrule",prelude:null,name:"page :left",block:{type:"Block",loc:null,children:re}});o.children.append(Ye)}if(f){let ye=new Tt.default.List,Ce=new Tt.default.List;ye.appendData({type:"Dimension",unit:T.unit,value:T.value}),ye.appendData({type:"WhiteSpace",value:" "}),ye.appendData({type:"Operator",value:"+"}),ye.appendData({type:"WhiteSpace",value:" "}),ye.appendData({type:"Dimension",unit:f.left.unit,value:f.left.value}),ye.appendData({type:"WhiteSpace",value:" "}),ye.appendData({type:"Operator",value:"+"}),ye.appendData({type:"WhiteSpace",value:" "}),ye.appendData({type:"Dimension",unit:f.right.unit,value:f.right.value}),Ce.appendData({type:"Dimension",unit:M.unit,value:M.value}),Ce.appendData({type:"WhiteSpace",value:" "}),Ce.appendData({type:"Operator",value:"+"}),Ce.appendData({type:"WhiteSpace",value:" "}),Ce.appendData({type:"Dimension",unit:f.top.unit,value:f.top.value}),Ce.appendData({type:"WhiteSpace",value:" "}),Ce.appendData({type:"Operator",value:"+"}),Ce.appendData({type:"WhiteSpace",value:" "}),Ce.appendData({type:"Dimension",unit:f.bottom.unit,value:f.bottom.value}),Se.appendData({type:"Function",name:"calc",children:ye}),Se.appendData({type:"WhiteSpace",value:" "}),Se.appendData({type:"Function",name:"calc",children:Ce}),G.appendData({type:"Declaration",property:"size",loc:null,value:{type:"Value",children:Se}});let Ye=o.children.createItem({type:"Atrule",prelude:null,name:"page :right",block:{type:"Block",loc:null,children:G}});o.children.append(Ye)}}getNth(o){let p=o.indexOf("n"),d=o.indexOf("+"),f=o.split("n"),a=o.split("+"),T=null,M=null;return p>-1?(T=f[0],d>-1&&(M=a[1])):M=o,{type:"Nth",loc:null,selector:null,nth:{type:"AnPlusB",loc:null,a:T,b:M}}}addPageAttributes(o,p,d){let f=[p.dataset.page];if(f&&f.length)for(let a of f)a&&(o.name=a,o.element.classList.add("pagedjs_named_page"),o.element.classList.add("pagedjs_"+a+"_page"),p.dataset.splitFrom||o.element.classList.add("pagedjs_"+a+"_first_page"))}getStartElement(o,p){let d=p&&p.node;if(!o&&!p)return;if(!d)return o.children[0];if(d.nodeType===1&&d.parentNode.nodeType===11||d.nodeType===1&&d.dataset.page)return d;let f=Mp(d),a=f.querySelectorAll("[data-page]");return a.length?a[a.length-1]:f.children[0]}beforePageLayout(o,p,d,f){let a=this.getStartElement(p,d);a&&this.addPageAttributes(o,a,f.pages)}finalizePage(o,p,d,f){for(let a in this.marginalia){let T=this.marginalia[a],M=a.split(" "),R;p.element.matches(M[0])&&T.hasContent&&(R=p.element.querySelector(M[1]),R.classList.add("hasContent"))}["top","bottom"].forEach(a=>{let T=p.element.querySelector(".pagedjs_margin-"+a),M=p.element.querySelector(".pagedjs_margin-"+a+"-center"),R=p.element.querySelector(".pagedjs_margin-"+a+"-left"),V=p.element.querySelector(".pagedjs_margin-"+a+"-right"),Y=M.classList.contains("hasContent"),re=R.classList.contains("hasContent"),G=V.classList.contains("hasContent"),te,H,Se;if(re&&(H=window.getComputedStyle(R)["max-width"]),G&&(Se=window.getComputedStyle(V)["max-width"]),Y)if(te=window.getComputedStyle(M)["max-width"],te==="none"||te==="auto")if(!re&&!G)T.style["grid-template-columns"]="0 1fr 0";else if(re)if(G)if(H!=="none"&&H!=="auto")Se!=="none"&&Se!=="auto"?T.style["grid-template-columns"]=H+" 1fr "+Se:T.style["grid-template-columns"]=H+" 1fr "+H;else if(Se!=="none"&&Se!=="auto")T.style["grid-template-columns"]=Se+" 1fr "+Se;else{T.style["grid-template-columns"]="auto auto 1fr",R.style["white-space"]="nowrap",M.style["white-space"]="nowrap",V.style["white-space"]="nowrap";let je=R.offsetWidth,ye=M.offsetWidth,Ce=V.offsetWidth,Ye=je+ye+Ce,rt=ye*100/Ye;rt>40?T.style["grid-template-columns"]="minmax(16.66%, 1fr) minmax(33%, "+rt+"%) minmax(16.66%, 1fr)":T.style["grid-template-columns"]="repeat(3, 1fr)",R.style["white-space"]="normal",M.style["white-space"]="normal",V.style["white-space"]="normal"}else if(H!=="none"&&H!=="auto")T.style["grid-template-columns"]=H+" 1fr "+H;else{T.style["grid-template-columns"]="auto auto 1fr",R.style["white-space"]="nowrap",M.style["white-space"]="nowrap";let je=R.offsetWidth,ye=M.offsetWidth,Ce=je+ye,Ye=ye*100/Ce;T.style["grid-template-columns"]="minmax(16.66%, 1fr) minmax(33%, "+Ye+"%) minmax(16.66%, 1fr)",R.style["white-space"]="normal",M.style["white-space"]="normal"}else if(Se!=="none"&&Se!=="auto")T.style["grid-template-columns"]=Se+" 1fr "+Se;else{T.style["grid-template-columns"]="auto auto 1fr",V.style["white-space"]="nowrap",M.style["white-space"]="nowrap";let je=V.offsetWidth,ye=M.offsetWidth,Ce=je+ye,Ye=ye*100/Ce;T.style["grid-template-columns"]="minmax(16.66%, 1fr) minmax(33%, "+Ye+"%) minmax(16.66%, 1fr)",V.style["white-space"]="normal",M.style["white-space"]="normal"}else te!=="none"&&te!=="auto"&&(re&&H!=="none"&&H!=="auto"?T.style["grid-template-columns"]=H+" "+te+" 1fr":G&&Se!=="none"&&Se!=="auto"?T.style["grid-template-columns"]="1fr "+te+" "+Se:T.style["grid-template-columns"]="1fr "+te+" 1fr");else if(re)if(!G)T.style["grid-template-columns"]="1fr 0 0";else if(H!=="none"&&H!=="auto")Se!=="none"&&Se!=="auto"?T.style["grid-template-columns"]=H+" 1fr "+Se:T.style["grid-template-columns"]=H+" 0 1fr";else if(Se!=="none"&&Se!=="auto")T.style["grid-template-columns"]="1fr 0 "+Se;else{T.style["grid-template-columns"]="auto 1fr auto",R.style["white-space"]="nowrap",V.style["white-space"]="nowrap";let je=R.offsetWidth,ye=V.offsetWidth,Ce=je+ye,Ye=je*100/Ce;T.style["grid-template-columns"]="minmax(16.66%, "+Ye+"%) 0 1fr",R.style["white-space"]="normal",V.style["white-space"]="normal"}else Se!=="none"&&Se!=="auto"?T.style["grid-template-columns"]="1fr 0 "+Se:T.style["grid-template-columns"]="0 0 1fr"}),["left","right"].forEach(a=>{let T=p.element.querySelector(".pagedjs_margin-"+a+"-middle.hasContent"),M=p.element.querySelector(".pagedjs_margin-"+a),R=p.element.querySelector(".pagedjs_margin-"+a+"-top"),V=p.element.querySelector(".pagedjs_margin-"+a+"-bottom"),Y=R.classList.contains("hasContent"),re=V.classList.contains("hasContent"),G,te,H;Y&&(te=window.getComputedStyle(R)["max-height"]),re&&(H=window.getComputedStyle(V)["max-height"]),T?(G=window.getComputedStyle(T)["max-height"],G==="none"||G==="auto"?!Y&&!re?M.style["grid-template-rows"]="0 1fr 0":Y?re?te!=="none"&&te!=="auto"?H!=="none"&&H!=="auto"?M.style["grid-template-rows"]=te+" calc(100% - "+te+" - "+H+") "+H:M.style["grid-template-rows"]=te+" calc(100% - "+te+"*2) "+te:H!=="none"&&H!=="auto"&&(M.style["grid-template-rows"]=H+" calc(100% - "+H+"*2) "+H):te!=="none"&&te!=="auto"&&(M.style["grid-template-rows"]=te+" calc(100% - "+te+"*2) "+te):H!=="none"&&H!=="auto"&&(M.style["grid-template-rows"]=H+" calc(100% - "+H+"*2) "+H):Y&&te!=="none"&&te!=="auto"?M.style["grid-template-rows"]=te+" "+G+" calc(100% - ("+te+" + "+G+"))":re&&H!=="none"&&H!=="auto"?M.style["grid-template-rows"]="1fr "+G+" "+H:M.style["grid-template-rows"]="calc((100% - "+G+")/2) "+G+" calc((100% - "+G+")/2)"):Y?re?te!=="none"&&te!=="auto"?H!=="none"&&H!=="auto"?M.style["grid-template-rows"]=te+" 1fr "+H:M.style["grid-template-rows"]=te+" 0 1fr":H!=="none"&&H!=="auto"?M.style["grid-template-rows"]="1fr 0 "+H:M.style["grid-template-rows"]="1fr 0 1fr":M.style["grid-template-rows"]="1fr 0 0":H!=="none"&&H!=="auto"?M.style["grid-template-rows"]="1fr 0 "+H:M.style["grid-template-rows"]="0 0 1fr"})}selectorsForPage(o){let p,d,f=new Tt.default.List;return f.insertData({type:"ClassSelector",name:"pagedjs_page"}),o.name&&(f.insertData({type:"ClassSelector",name:"pagedjs_named_page"}),f.insertData({type:"ClassSelector",name:"pagedjs_"+o.name+"_page"})),o.psuedo&&!(o.name&&o.psuedo==="first")&&f.insertData({type:"ClassSelector",name:"pagedjs_"+o.psuedo+"_page"}),o.name&&o.psuedo==="first"&&f.insertData({type:"ClassSelector",name:"pagedjs_"+o.name+"_"+o.psuedo+"_page"}),o.nth&&(p=new Tt.default.List,d=this.getNth(o.nth),p.insertData(d),f.insertData({type:"PseudoClassSelector",name:"nth-of-type",children:p})),f}selectorsForPageMargin(o,p){let d=this.selectorsForPage(o);return d.insertData({type:"Combinator",name:" "}),d.insertData({type:"ClassSelector",name:"pagedjs_margin-"+p}),d}createDeclaration(o,p,d){let f=new Tt.default.List;return f.insertData({type:"Identifier",loc:null,name:p}),{type:"Declaration",loc:null,important:d,property:o,value:{type:"Value",loc:null,children:f}}}createVariable(o,p){return{type:"Declaration",loc:null,property:o,value:{type:"Raw",value:p}}}createCalculatedDimension(o,p,d,f="+"){let a=new Tt.default.List,T=new Tt.default.List;return p.forEach((M,R)=>{T.appendData({type:"Dimension",unit:M.unit,value:M.value}),T.appendData({type:"WhiteSpace",value:" "}),R+1<p.length&&(T.appendData({type:"Operator",value:f}),T.appendData({type:"WhiteSpace",value:" "}))}),a.insertData({type:"Function",loc:null,name:"calc",children:T}),{type:"Declaration",loc:null,important:d,property:o,value:{type:"Value",loc:null,children:a}}}createDimension(o,p,d){let f=new Tt.default.List;return f.insertData({type:"Dimension",loc:null,value:p.value,unit:p.unit}),{type:"Declaration",loc:null,important:d,property:o,value:{type:"Value",loc:null,children:f}}}createBlock(o){let p=new Tt.default.List;return o.forEach(d=>{p.insertData(d)}),{type:"Block",loc:null,children:p}}createRule(o,p){let d=new Tt.default.List;return d.insertData({type:"Selector",children:o}),Array.isArray(p)&&(p=this.createBlock(p)),{type:"Rule",prelude:{type:"SelectorList",children:d},block:p}}},QC=Xy;var Ky=Ai(In(),1);var Qy=class extends ai{constructor(o,p,d){super(o,p,d),this.breaks={}}onDeclaration(o,p,d,f){let a=o.property;if(a==="page"){let M=o.value.children.first().name,R=Ky.default.generate(f.ruleNode.prelude),Y={property:a,value:M,selector:R,name:M};R.split(",").forEach(re=>{this.breaks[re]?this.breaks[re].push(Y):this.breaks[re]=[Y]}),d.remove(p)}if(a==="break-before"||a==="break-after"||a==="page-break-before"||a==="page-break-after"){let M=o.value.children.first().name,R=Ky.default.generate(f.ruleNode.prelude);a==="page-break-before"?a="break-before":a==="page-break-after"&&(a="break-after");let V={property:a,value:M,selector:R};R.split(",").forEach(Y=>{this.breaks[Y]?this.breaks[Y].push(V):this.breaks[Y]=[V]}),d.remove(p)}}afterParsed(o){this.processBreaks(o,this.breaks)}processBreaks(o,p){for(let f in p){let a=o.querySelectorAll(f);for(var d=0;d<a.length;d++)for(let T of p[f])if(T.property==="break-after"){let M=rg(a[d],o);a[d].setAttribute("data-break-after",T.value),M&&M.setAttribute("data-previous-break-after",T.value)}else if(T.property==="break-before"){let M=nx(a[d],o);if(M){if(T.value==="page"&&zp(a[d],M))continue;a[d].setAttribute("data-break-before",T.value),M.setAttribute("data-next-break-before",T.value)}}else if(T.property==="page"){a[d].setAttribute("data-page",T.value);let M=rg(a[d],o);M&&M.setAttribute("data-after-page",T.value)}else a[d].setAttribute("data-"+T.property,T.value)}}mergeBreaks(o,p){for(let d in p)d in o?o[d]=o[d].concat(p[d]):o[d]=p[d];return o}addBreakAttributes(o,p){let d=o.querySelector("[data-break-before]"),f=o.querySelector("[data-break-after]"),a=o.querySelector("[data-previous-break-after]");d&&(d.dataset.splitFrom?(p.splitFrom=d.dataset.splitFrom,o.setAttribute("data-split-from",d.dataset.splitFrom)):d.dataset.breakBefore&&d.dataset.breakBefore!=="avoid"&&(p.breakBefore=d.dataset.breakBefore,o.setAttribute("data-break-before",d.dataset.breakBefore))),f&&f.dataset&&(f.dataset.splitTo?(p.splitTo=f.dataset.splitTo,o.setAttribute("data-split-to",f.dataset.splitTo)):f.dataset.breakAfter&&f.dataset.breakAfter!=="avoid"&&(p.breakAfter=f.dataset.breakAfter,o.setAttribute("data-break-after",f.dataset.breakAfter))),a&&a.dataset&&a.dataset.previousBreakAfter&&a.dataset.previousBreakAfter!=="avoid"&&(p.previousBreakAfter=a.dataset.previousBreakAfter)}afterPageLayout(o,p){this.addBreakAttributes(o,p)}},JC=Qy;var ek=Ai(In(),1),Jy=class extends ai{constructor(o,p,d){super(o,p,d)}onAtMedia(o,p,d){let f=this.getMediaName(o),a;f.includes("print")?(a=o.block.children,d.appendList(a),d.remove(p)):!f.includes("all")&&!f.includes("pagedjs-ignore")&&d.remove(p)}getMediaName(o){let p=[];if(!(typeof o.prelude=="undefined"||o.prelude.type!=="AtrulePrelude"))return ek.default.walk(o.prelude,{visit:"Identifier",enter:(d,f,a)=>{p.push(d.name)}}),p}},tk=Jy;var e_=class extends ai{constructor(o,p,d){super(o,p,d)}afterPageLayout(o,p,d,f){let a=Array.from(o.querySelectorAll("[data-split-from]")),T=o.parentNode,M=Array.prototype.indexOf.call(T.children,o),R;if(M===0)return;R=T.children[M-1];let V;a.forEach(Y=>{let re=Y.dataset.ref;V=R.querySelector("[data-ref='"+re+"']:not([data-split-to])"),V&&(V.dataset.splitTo=re,V.dataset.splitFrom||(V.dataset.splitOriginal=!0))}),V&&this.handleAlignment(V)}handleAlignment(o){let p=window.getComputedStyle(o),d=p["text-align"],f=p["text-align-last"];o.dataset.lastSplitElement="true",d==="justify"&&f==="auto"?o.dataset.alignLastSplitElement="justify":o.dataset.alignLastSplitElement=f}},ik=e_;var Ff=Ai(In(),1),t_=class extends ai{constructor(o,p,d){super(o,p,d),this.styleSheet=p.styleSheet,this.counters={},this.resetCountersMap=new Map}onDeclaration(o,p,d,f){let a=o.property;if(a==="counter-increment"){this.handleIncrement(o,f);let T=!1;o.value.children.forEach(M=>{M.type&&M.type!=="WhiteSpace"&&(T=!0)}),T||d.remove(p)}else if(a==="counter-reset"){this.handleReset(o,f);let T=!1;o.value.children.forEach(M=>{M.type&&M.type!=="WhiteSpace"&&(T=!0)}),T||d.remove(p)}}afterParsed(o){this.processCounters(o,this.counters),this.scopeCounters(this.counters)}addCounter(o){return o in this.counters?this.counters[o]:(this.counters[o]={name:o,increments:{},resets:{}},this.counters[o])}handleIncrement(o,p){let d=[],f=o.value.children;return f.forEach((a,T)=>{if(a.type&&a.type==="Identifier"){let M=a.name;if(M==="page"||M.indexOf("target-counter-")===0)return;let R,V,Y;T.next&&T.next.data.type==="WhiteSpace"&&(R=T.next),R&&R.next&&R.next.data.type==="Number"&&(V=R.next,Y=parseInt(V.data.value));let re=Ff.default.generate(p.ruleNode.prelude),G;M in this.counters?G=this.counters[M]:G=this.addCounter(M);let te={selector:re,number:Y||1};G.increments[re]=te,d.push(te),f.remove(T),R&&f.remove(R),V&&f.remove(V)}}),d}handleReset(o,p){let d=o.value.children;d.forEach((f,a)=>{if(f.type&&f.type==="Identifier"){let T=f.name,M,R,V;a.next&&a.next.data.type==="WhiteSpace"&&(M=a.next),M&&M.next&&(M.next.data.type==="Number"?(R=M.next,V=parseInt(R.data.value)):M.next.data.type==="Function"&&M.next.data.name==="var"&&(R=M.next,V=M.next.data.children.head.data.name));let Y,re,G=p.ruleNode.prelude;p.ruleNode.type==="Atrule"&&p.ruleNode.name==="page"?re=".pagedjs_page":re=Ff.default.generate(G||p.ruleNode),T==="footnote"&&this.addFootnoteMarkerCounter(o.value.children),T in this.counters?Y=this.counters[T]:Y=this.addCounter(T);let te={selector:re,number:V||0};Y.resets[re]=te,re!==".pagedjs_page"&&(d.remove(a),M&&d.remove(M),R&&d.remove(R))}})}processCounters(o,p){let d;for(let f in p)d=this.counters[f],this.processCounterIncrements(o,d),this.processCounterResets(o,d),f!=="page"&&this.addCounterValues(o,d)}scopeCounters(o){let p=[];for(let d in o)d!=="page"&&p.push(`${o[d].name} 0`);this.insertRule(`.pagedjs_pages { counter-reset: ${p.join(" ")} page 0 pages var(--pagedjs-page-count) footnote var(--pagedjs-footnotes-count) footnote-marker var(--pagedjs-footnotes-count)}`)}insertRule(o){this.styleSheet.insertRule(o,this.styleSheet.cssRules.length)}processCounterIncrements(o,p){let d;for(let f in p.increments){d=p.increments[f];let a=o.querySelectorAll(d.selector);for(let T=0;T<a.length;T++)a[T].setAttribute("data-counter-"+p.name+"-increment",d.number),a[T].getAttribute("data-counter-increment")?a[T].setAttribute("data-counter-increment",a[T].getAttribute("data-counter-increment")+" "+p.name):a[T].setAttribute("data-counter-increment",p.name)}}processCounterResets(o,p){let d;for(let a in p.resets){d=p.resets[a];let T=o.querySelectorAll(d.selector);for(var f=0;f<T.length;f++){let M=d.number;typeof M=="string"&&M.startsWith("--")&&(M=T[f].style.getPropertyValue(M)||0),T[f].setAttribute("data-counter-"+p.name+"-reset",M),T[f].getAttribute("data-counter-reset")?T[f].setAttribute("data-counter-reset",T[f].getAttribute("data-counter-reset")+" "+p.name):T[f].setAttribute("data-counter-reset",p.name)}}}addCounterValues(o,p){let d=p.name;if(d==="page"||d==="footnote")return;let f=o.querySelectorAll("[data-counter-"+d+"-reset], [data-counter-"+d+"-increment]"),a=0,T,M,R,V,Y,re,G;for(let te=0;te<f.length;te++)T=f[te],re=0,G=[],T.hasAttribute("data-counter-"+d+"-reset")&&(R=T.getAttribute("data-counter-"+d+"-reset"),V=parseInt(R),re=V-a,G.push(`${d} ${re}`),a=V),T.hasAttribute("data-counter-"+d+"-increment")&&(M=T.getAttribute("data-counter-"+d+"-increment"),Y=parseInt(M),a+=Y,T.setAttribute("data-counter-"+d+"-value",a),G.push(`${d} ${Y}`)),G.length>0&&this.incrementCounterForElement(T,G)}addFootnoteMarkerCounter(o){let p=[];Ff.default.walk(o,{visit:"Identifier",enter:(d,f,a)=>{p.push(d.name)}}),!p.includes("footnote-maker")&&(o.insertData({type:"WhiteSpace",value:" "}),o.insertData({type:"Identifier",name:"footnote-marker"}),o.insertData({type:"WhiteSpace",value:" "}),o.insertData({type:"Number",value:0}))}incrementCounterForElement(o,p){if(!o||!p||p.length===0)return;let d=o.dataset.ref,f=Array.from(this.styleSheet.cssRules).filter(T=>T.selectorText===`[data-ref="${o.dataset.ref}"]:not([data-split-from])`&&T.style[0]==="counter-increment").map(T=>T.style.counterIncrement);f.push(this.mergeIncrements(p,(T,M)=>(parseInt(T)||0)+(parseInt(M)||0)));let a=this.mergeIncrements(f,(T,M)=>M);this.insertRule(`[data-ref="${d}"]:not([data-split-from]) { counter-increment: ${a} }`)}mergeIncrements(o,p){let d={};return o.forEach(f=>{let a=f.split(" ");for(let T=0;T<a.length;T+=2)d[a[T]]=p(d[a[T]],a[T+1])}),Object.entries(d).map(([f,a])=>`${f} ${a}`).join(" ")}afterPageLayout(o,p){let d=[];o.querySelectorAll("[data-counter-page-reset]:not([data-split-from])").forEach(T=>{let M=T.dataset&&T.dataset.ref;if(!(M&&this.resetCountersMap.has(M))){M&&this.resetCountersMap.set(M,"");let R=T.dataset.counterPageReset;d.push(`page ${R}`)}}),o.querySelectorAll("[data-counter-footnote-reset]:not([data-split-from])").forEach(T=>{let M=T.dataset.counterFootnoteReset;d.push(`footnote ${M}`),d.push(`footnote-marker ${M}`)}),d.length&&this.styleSheet.insertRule(`[data-page-number="${o.dataset.pageNumber}"] { counter-increment: none; counter-reset: ${d.join(" ")} }`,this.styleSheet.cssRules.length)}},rk=t_;var i_=class extends ai{constructor(o,p,d){super(o,p,d)}afterParsed(o){let p=o.querySelectorAll("ol");for(var d of p)this.addDataNumbers(d)}afterPageLayout(o,p,d,f){var a=o.getElementsByTagName("ol");for(var T of a)T.firstElementChild&&(T.start=T.firstElementChild.dataset.itemNum)}addDataNumbers(o){let p=1;o.hasAttribute("start")&&(p=parseInt(o.getAttribute("start"),10),isNaN(p)&&(p=1));let d=o.children;for(var f=0;f<d.length;f++)d[f].setAttribute("data-item-num",f+p)}},nk=i_;var ak=Ai(In(),1),r_=class extends ai{constructor(o,p,d){super(o,p,d),this.styleSheet=p.styleSheet,this.fixedElementsSelector=[],this.fixedElements=[]}onDeclaration(o,p,d,f){if(o.property==="position"&&o.value.children.first().name==="fixed"){let a=ak.default.generate(f.ruleNode.prelude);this.fixedElementsSelector.push(a),d.remove(p)}}afterParsed(o){this.fixedElementsSelector.forEach(p=>{o.querySelectorAll(`${p}`).forEach(d=>{d.style.setProperty("position","absolute"),this.fixedElements.push(d),d.remove()})})}afterPageLayout(o,p,d){this.fixedElements.forEach(f=>{let a=f.cloneNode(!0);o.querySelector(".pagedjs_pagebox").insertAdjacentElement("afterbegin",a)})}},sk=r_;var ok=Ai(In(),1),n_=class extends ai{constructor(o,p,d){super(o,p,d),this.styleSheet=p.styleSheet,this.pageCounter={name:"page",increments:{},resets:{}}}onDeclaration(o,p,d,f){o.property==="counter-increment"&&this.handleIncrement(o,f)&&d.remove(p)}afterParsed(o){for(let p in this.pageCounter.increments){let d=this.pageCounter.increments[p];this.insertRule(`${d.selector} { --pagedjs-page-counter-increment: ${d.number} }`)}}handleIncrement(o,p){let d=o.value.children.first(),f=o.value.children.getSize()>1?o.value.children.last().value:1,a=d&&d.name;if(a&&a.indexOf("target-counter-")===0||a!=="page"||p.ruleNode.name==="page"&&p.ruleNode.type==="Atrule")return;let T=ok.default.generate(p.ruleNode.prelude);return this.pageCounter.increments[T]={selector:T,number:f}}insertRule(o){this.styleSheet.insertRule(o,this.styleSheet.cssRules.length)}},lk=n_;var a_=Ai(In(),1);var s_=class extends ai{constructor(o,p,d){super(o,p,d),this.styleSheet=p.styleSheet,this.selectors={}}onRule(o,p,d){let f=a_.default.generate(o.prelude);if(f.match(/:(first|last|nth)-of-type/)){let a=a_.default.generate(o.block);a=a.replace(/[{}]/g,"");let T="nth-of-type-"+$n();f.split(",").forEach(M=>{this.selectors[M]?this.selectors[M][1]=`${this.selectors[M][1]};${a}`:this.selectors[M]=[T,a]}),d.remove(p)}}afterParsed(o){this.processSelectors(o,this.selectors)}processSelectors(o,p){for(let f in p){let a=o.querySelectorAll(f);for(var d=0;d<a.length;d++){let M=a[d].getAttribute("data-nth-of-type");M&&M!=""?(M=`${M},${p[f][0]}`,a[d].setAttribute("data-nth-of-type",M)):a[d].setAttribute("data-nth-of-type",p[f][0])}let T=`*[data-nth-of-type*='${p[f][0]}'] { ${p[f][1]}; }`;this.styleSheet.insertRule(T,this.styleSheet.cssRules.length)}}},ck=s_;var o_=Ai(In(),1);var l_=class extends ai{constructor(o,p,d){super(o,p,d),this.styleSheet=p.styleSheet,this.selectors={}}onRule(o,p,d){let f=o_.default.generate(o.prelude);if(f.match(/\+/)){let a=o_.default.generate(o.block);a=a.replace(/[{}]/g,"");let T="following-"+$n();f.split(",").forEach(M=>{this.selectors[M]?this.selectors[M][1]=`${this.selectors[M][1]};${a}`:this.selectors[M]=[T,a]}),d.remove(p)}}afterParsed(o){this.processSelectors(o,this.selectors)}processSelectors(o,p){for(let f in p){let a=o.querySelectorAll(f);for(var d=0;d<a.length;d++){let M=a[d].getAttribute("data-following");M&&M!=""?(M=`${M},${p[f][0]}`,a[d].setAttribute("data-following",M)):a[d].setAttribute("data-following",p[f][0])}let T=`*[data-following*='${p[f][0]}'] { ${p[f][1]}; }`;this.styleSheet.insertRule(T,this.styleSheet.cssRules.length)}}},uk=l_;var Vu=Ai(In(),1),c_=class extends ai{constructor(o,p,d){super(o,p,d),this.footnotes={},this.needsLayout=[]}onDeclaration(o,p,d,f){let a=o.property;if(a==="float"){let T=o.value.children&&o.value.children.first();if((T&&T.name)==="footnote"){let R=Vu.default.generate(f.ruleNode.prelude);this.footnotes[R]={selector:R,policy:"auto",display:"block"},d.remove(p)}}if(a==="footnote-policy"){let T=o.value.children&&o.value.children.first(),M=T&&T.name;if(M){let R=Vu.default.generate(f.ruleNode.prelude),V=this.footnotes[R];V&&(V.policy=M)}}if(a==="footnote-display"){let T=o.value.children&&o.value.children.first(),M=T&&T.name,R=Vu.default.generate(f.ruleNode.prelude);if(M&&this.footnotes[R]){let V=this.footnotes[R];V&&(V.display=M)}}}onPseudoSelector(o,p,d,f,a){let T=o.name;if(T==="footnote-marker"){let M=a.ruleNode.prelude,R=new Vu.default.List;M.children.first().children.each(V=>{V.type!=="PseudoElementSelector"&&R.appendData(V)}),R.appendData({type:"AttributeSelector",name:{type:"Identifier",name:"data-footnote-marker"},flags:null,loc:null,matcher:null,value:null}),R.appendData({type:"PseudoElementSelector",name:"marker",loc:null,children:null}),M.children.first().children=R}if(T==="footnote-call"){let M=a.ruleNode.prelude,R=new Vu.default.List;M.children.first().children.each(V=>{V.type!=="PseudoElementSelector"&&R.appendData(V)}),R.appendData({type:"AttributeSelector",name:{type:"Identifier",name:"data-footnote-call"},flags:null,loc:null,matcher:null,value:null}),R.appendData({type:"PseudoElementSelector",name:"after",loc:null,children:null}),M.children.first().children=R}}afterParsed(o){this.processFootnotes(o,this.footnotes)}processFootnotes(o,p){for(let f in p){let a=o.querySelectorAll(f),T,M=p[f];for(var d=0;d<a.length;d++)T=a[d],T.setAttribute("data-note","footnote"),T.setAttribute("data-break-before","avoid"),T.setAttribute("data-note-policy",M.policy||"auto"),T.setAttribute("data-note-display",M.display||"block"),this.processFootnoteContainer(T)}}processFootnoteContainer(o){let p=o.parentElement,d=p;for(;p;){if(Lp(p)){d.setAttribute("data-has-notes","true");break}d=p,p=p.parentElement,p||d.setAttribute("data-has-notes","true")}}renderNode(o){if(o.nodeType==1){let p;if(!o.dataset)return;o.dataset.note==="footnote"?p=[o]:(o.dataset.hasNotes||o.querySelectorAll("[data-note='footnote']"))&&(p=o.querySelectorAll("[data-note='footnote']")),p&&p.length&&this.findVisibleFootnotes(p,o)}}findVisibleFootnotes(o,p){let d,f,a;d=p.closest(".pagedjs_page_content"),f=d.getBoundingClientRect(),a=f.left+f.width;for(let T=0;T<o.length;++T){let M=o[T];M.getBoundingClientRect().left<a&&this.moveFootnote(M,p.closest(".pagedjs_area"),!0)}}moveFootnote(o,p,d){let f=p.querySelector(".pagedjs_footnote_area"),a=f.querySelector(".pagedjs_footnote_content"),T=a.querySelector(".pagedjs_footnote_inner_content");if(!ln(o))return;let M;if(d&&(M=this.createFootnoteCall(o)),o.removeAttribute("data-break-before"),T.querySelector(`[data-ref="${o.dataset.ref}"]`)){o.remove();return}T.appendChild(o),a.classList.contains("pagedjs_footnote_empty")&&a.classList.remove("pagedjs_footnote_empty"),o.dataset.footnoteMarker=o.dataset.ref,o.id=`note-${o.dataset.ref}`;let V=a.scrollHeight,re=p.querySelector(".pagedjs_page_content").getBoundingClientRect(),G=re.left+re.width,te=M&&M.getBoundingClientRect(),H=f.getBoundingClientRect(),Se=this.marginsHeight(a),je=this.paddingHeight(a),ye=this.borderHeight(a),Ce=Se+je+ye,Ye=Math.floor(H.top);H.height===0&&(Ye-=this.marginsHeight(a,!1),Ye-=this.paddingHeight(a,!1),Ye-=this.borderHeight(a,!1));let rt=o.dataset.notePolicy,Ct=0,gt=0;if(M){let si=M.previousSibling,ri=new Range;si?ri.setStartBefore(si):ri.setStartBefore(M),ri.setEndAfter(M);let di=ri.getBoundingClientRect();if(Ct=di.bottom,!rt||rt==="auto")gt=Math.ceil(di.bottom);else if(rt==="line")gt=Math.ceil(di.top);else if(rt==="block"){let ni=M.closest("p").previousElementSibling;ni?gt=Math.ceil(ni.getBoundingClientRect().bottom):gt=Math.ceil(di.bottom)}}let Wt=V+Ce-H.height,Gt=Ct?Ye-Ct:0,wt=Ct?Math.floor(H.top)-gt:0,kt=f.querySelector("[data-note='footnote']");if(d&&te.left>G)o.remove();else if(!kt&&d&&Ce>Gt){p.style.setProperty("--pagedjs-footnotes-height","0px");let si=document.createElement("div");si.appendChild(o),this.needsLayout.push(si)}else d?Ct<H.top-Wt?p.style.setProperty("--pagedjs-footnotes-height",`${V+Se+ye}px`):(p.style.setProperty("--pagedjs-footnotes-height",`${H.height+wt}px`),T.style.height=H.height+wt-Ce+"px"):p.style.setProperty("--pagedjs-footnotes-height",`${V+Ce}px`)}createFootnoteCall(o){let p=o.parentElement,d=document.createElement("a");for(let f of o.classList)d.classList.add(`${f}`);return d.dataset.footnoteCall=o.dataset.ref,d.dataset.ref=o.dataset.ref,d.dataset.dataCounterFootnoteIncrement=1,d.href=`#note-${o.dataset.ref}`,p.insertBefore(d,o),d}afterPageLayout(o,p,d,f){let a=o.querySelector(".pagedjs_area"),T=p.footnotesArea,M=T.querySelector(".pagedjs_footnote_content"),R=T.querySelector(".pagedjs_footnote_inner_content"),V=M.getBoundingClientRect(),{width:Y}=V;R.style.columnWidth=Math.round(Y)+"px",R.style.columnGap="calc(var(--pagedjs-margin-right) + var(--pagedjs-margin-left))";let G=new Gp(T,void 0,f.settings).findOverflow(R,V);if(G){let{startContainer:te,startOffset:H}=G,Se;if(ln(te)){let gt=te.childNodes[H];Se=ln(gt)&&gt.hasAttribute("data-footnote-marker")}let je=G.extractContents();if(!Se){let gt=je.firstElementChild;gt.dataset.splitFrom=gt.dataset.ref,this.handleAlignment(R.lastElementChild)}this.needsLayout.push(je),M.style.removeProperty("height"),R.style.removeProperty("height");let ye=R.getBoundingClientRect(),{height:Ce}=ye,Ye=this.marginsHeight(M),rt=this.paddingHeight(M),Ct=this.borderHeight(M);if(a.style.setProperty("--pagedjs-footnotes-height",`${Ce+Ye+Ct+rt}px`),R.childNodes.length===0&&M.classList.add("pagedjs_footnote_empty"),!d)f.clonePage(p);else{let gt,Wt;d.node&&typeof d.node.dataset!="undefined"&&typeof d.node.dataset.previousBreakAfter!="undefined"&&(Wt=d.node.dataset.previousBreakAfter),d.node&&typeof d.node.dataset!="undefined"&&typeof d.node.dataset.breakBefore!="undefined"&&(gt=d.node.dataset.breakBefore),(gt||Wt)&&f.clonePage(p)}}R.style.height="auto"}handleAlignment(o){let d=window.getComputedStyle(o)["text-align-last"];o.dataset.lastSplitElement="true",d==="auto"?o.dataset.alignLastSplitElement="justify":o.dataset.alignLastSplitElement=d}beforePageLayout(o){for(;this.needsLayout.length;){let p=this.needsLayout.shift();Array.from(p.childNodes).forEach(d=>{this.moveFootnote(d,o.element.querySelector(".pagedjs_area"),!1)})}}afterOverflowRemoved(o,p){let d=p.closest(".pagedjs_area"),f=d.querySelectorAll(".pagedjs_footnote_area [data-note='footnote']");for(let T=0;T<f.length;T++){let M=f[T];o.querySelector(`[data-footnote-call="${M.dataset.ref}"]`)&&M.remove()}let a=d.querySelector(".pagedjs_footnote_inner_content");a&&a.childNodes.length===0&&a.parentElement.classList.add("pagedjs_footnote_empty")}marginsHeight(o,p=!0){let d=window.getComputedStyle(o),f=parseInt(d.marginTop),a=parseInt(d.marginBottom),T=0;return f&&(T+=f),a&&p&&(T+=a),T}paddingHeight(o,p=!0){let d=window.getComputedStyle(o),f=parseInt(d.paddingTop),a=parseInt(d.paddingBottom),T=0;return f&&(T+=f),a&&p&&(T+=a),T}borderHeight(o,p=!0){let d=window.getComputedStyle(o),f=parseInt(d.borderTop),a=parseInt(d.borderBottom),T=0;return f&&(T+=f),a&&p&&(T+=a),T}},dk=c_;var hk=[tk,QC,JC,ik,rk,nk,sk,lk,ck,uk,dk];var wh=Ai(In(),1),u_=class extends ai{constructor(o,p,d){super(o,p,d),this.runningSelectors={},this.elements={}}onDeclaration(o,p,d,f){if(o.property==="position"){let a=wh.default.generate(f.ruleNode.prelude),T=o.value.children.first().name;if(T==="running"){let M;wh.default.walk(o,{visit:"Function",enter:(R,V,Y)=>{M=R.children.first().name}}),this.runningSelectors[M]={identifier:T,value:M,selector:a}}}o.property==="content"&&wh.default.walk(o,{visit:"Function",enter:(a,T,M)=>{if(a.name.indexOf("element")>-1){let R=wh.default.generate(f.ruleNode.prelude),V=a.name,Y=a.children.first().name,re=[Y],G="first";R.split(",").forEach(te=>{te=te.replace(/::after|::before/,""),this.elements[te]={func:V,args:re,value:Y,style:G||"first",selector:te,fullSelector:R}})}}})}afterParsed(o){for(let p of Object.keys(this.runningSelectors)){let d=this.runningSelectors[p],f=Array.from(o.querySelectorAll(d.selector));if(d.identifier==="running")for(let a of f)a.style.display="none"}}afterPageLayout(o){for(let p of Object.keys(this.runningSelectors)){let d=this.runningSelectors[p],f=o.querySelector(d.selector);f&&(d.identifier==="running"?d.first=f:console.warn(d.value+"needs css replacement"))}this.orderedSelectors||(this.orderedSelectors=this.orderSelectors(this.elements));for(let p of this.orderedSelectors)if(p){let d=this.elements[p],f=o.querySelector(p);if(f){let a=this.runningSelectors[d.args[0]];if(a&&a.first){f.innerHTML="";let T=a.first.cloneNode(!0);T.style.display=null,f.appendChild(T)}}}}pageWeight(o){let p=1,d=o.split(" "),f=d.length&&d[0].split(".");switch(f.shift(),f.length){case 4:/^pagedjs_[\w-]+_first_page$/.test(f[3])?p=7:(f[3]==="pagedjs_left_page"||f[3]==="pagedjs_right_page")&&(p=6);break;case 3:f[1]==="pagedjs_named_page"&&(f[2].indexOf(":nth-of-type")>-1?p=7:p=5);break;case 2:f[1]==="pagedjs_first_page"?p=4:f[1]==="pagedjs_blank_page"?p=3:(f[1]==="pagedjs_left_page"||f[1]==="pagedjs_right_page")&&(p=2);break;default:f[0].indexOf(":nth-of-type")>-1?p=4:p=1}return p}orderSelectors(o){let p=Object.keys(o),d={1:[],2:[],3:[],4:[],5:[],6:[],7:[]},f=[];for(let T of p){let M=this.pageWeight(T);d[M].unshift(T)}for(var a=1;a<=7;a++)f=f.concat(d[a]);return f}beforeTreeParse(o,p){p.text=o.replace(/element[\s]*\(([^|^#)]*)\)/g,"element-ident($1)")}},pk=u_;var d_=Ai(In(),1);function zl(s,o=`"' `){if(s!=null)return s.replace(new RegExp(`^[${o}]+`),"").replace(new RegExp(`[${o}]+$`),"").replace(/["']/g,p=>"\\"+p).replace(/[\n]/g,p=>"\\00000A")}function fk(s){if(s!=null)return s.replace(new RegExp("::footnote-call","g"),"").replace(new RegExp("::footnote-marker","g"),"")}var h_=class extends ai{constructor(o,p,d){super(o,p,d),this.stringSetSelectors={},this.type,this.pageLastString}onDeclaration(o,p,d,f){if(o.property==="string-set"){let a=d_.default.generate(f.ruleNode.prelude),T=[],M=[],R=[];o.value.children.forEach(V=>{V.type==="Identifier"&&T.push(V.name),V.type==="Function"&&(M.push(V.name),V.children.forEach(Y=>{Y.type==="Identifier"&&R.push(Y.name)}))}),T.forEach((V,Y)=>{let re=M[Y],G=R[Y];this.stringSetSelectors[V]={identifier:V,func:re,value:G,selector:a}})}}onContent(o,p,d,f,a){if(o.name==="string"){let T=o.children&&o.children.first().name;this.type=o.children.last().name,o.name="var",o.children=new d_.default.List,this.type==="first"||this.type==="last"||this.type==="start"||this.type==="first-except"?o.children.append(o.children.createItem({type:"Identifier",loc:null,name:"--pagedjs-string-"+this.type+"-"+T})):o.children.append(o.children.createItem({type:"Identifier",loc:null,name:"--pagedjs-string-first-"+T}))}}afterPageLayout(o){this.pageLastString===void 0&&(this.pageLastString={});for(let p of Object.keys(this.stringSetSelectors)){let d=this.stringSetSelectors[p],f=d.value,a=d.func,T=o.querySelectorAll(d.selector),M=p in this.pageLastString?this.pageLastString[p]:"",R,V,Y,re;if(T.length==0)R=M,V=M,Y=M,re=M;else{T.forEach(Se=>{a==="content"&&(this.pageLastString[p]=T[T.length-1].textContent),a==="attr"&&(this.pageLastString[p]=T[T.length-1].getAttribute(f)||"")}),a==="content"&&(R=T[0].textContent),a==="attr"&&(R=T[0].getAttribute(f)||""),a==="content"&&(V=T[T.length-1].textContent),a==="attr"&&(V=T[T.length-1].getAttribute(f)||"");let G=T[0].getBoundingClientRect().top,H=T[0].closest(".pagedjs_page_content").getBoundingClientRect().top;G==H?Y=R:Y=M,re=""}o.style.setProperty(`--pagedjs-string-first-${p}`,`"${zl(R)}`),o.style.setProperty(`--pagedjs-string-last-${p}`,`"${zl(V)}`),o.style.setProperty(`--pagedjs-string-start-${p}`,`"${zl(Y)}`),o.style.setProperty(`--pagedjs-string-first-except-${p}`,`"${zl(re)}`)}}},mk=h_;var Sh=Ai(In(),1),p_=class extends ai{constructor(o,p,d){super(o,p,d),this.styleSheet=p.styleSheet,this.counterTargets={}}onContent(o,p,d,f,a){if(o.name==="target-counter"){let T=Sh.default.generate(a.ruleNode.prelude),M=o.children.first(),R=M.name,V=Sh.default.generate(o),Y=[];M.children.forEach(Se=>{Se.type==="Identifier"&&Y.push(Se.name)});let re,G,te;o.children.forEach(Se=>{Se.type==="Identifier"&&(re?G||(te=Sh.default.clone(Se),G=Se.name):re=Se.name)});let H="target-counter-"+$n();T.split(",").forEach(Se=>{this.counterTargets[Se]={func:R,args:Y,value:V,counter:re,style:G,selector:Se,fullSelector:T,variable:H}}),o.name="counter",o.children=new Sh.default.List,o.children.appendData({type:"Identifier",loc:0,name:H}),te&&(o.children.appendData({type:"Operator",loc:null,value:","}),o.children.appendData(te))}}afterPageLayout(o,p,d,f){Object.keys(this.counterTargets).forEach(a=>{let T=this.counterTargets[a],M=T.selector.split(/::?/g),R=M[0];f.pagesArea.querySelectorAll(R+":not([data-"+T.variable+"])").forEach((Y,re)=>{if(T.func!=="attr")return;let G=Cp(Y,T.args),te=f.pagesArea.querySelector(kp(G));if(te){let H=$n();Y.setAttribute("data-"+T.variable,H);let Se="";if(M.length>1&&(Se+="::"+M[1]),T.counter==="page"){let ye=f.pagesArea.querySelectorAll(".pagedjs_page"),Ce=0;for(let Ye=0;Ye<ye.length;Ye++){let rt=ye[Ye],Ct=window.getComputedStyle(rt),gt=Ct["counter-reset"].replace("page","").trim(),Wt=Ct["counter-increment"].replace("page","").trim();if(gt!=="none"&&(Ce=parseInt(gt)),Wt!=="none"&&(Ce+=parseInt(Wt)),rt.contains(te))break}this.styleSheet.insertRule(`[data-${T.variable}="${H}"]${Se} { counter-reset: ${T.variable} ${Ce}; }`,this.styleSheet.cssRules.length)}else{let ye=te.getAttribute(`data-counter-${T.counter}-value`);ye&&this.styleSheet.insertRule(`[data-${T.variable}="${H}"]${Se} { counter-reset: ${T.variable} ${T.variable} ${parseInt(ye)}; }`,this.styleSheet.cssRules.length)}let je=document.querySelector(`[data-${T.variable}="${H}"]`);je&&(je.style.display="none",je.clientHeight,je.style.removeProperty("display"))}})})}},gk=p_;var jf=Ai(In(),1),f_=class extends ai{constructor(o,p,d){super(o,p,d),this.styleSheet=p.styleSheet,this.textTargets={},this.beforeContent="",this.afterContent="",this.selector={}}onContent(o,p,d,f,a){if(o.name==="target-text"){this.selector=jf.default.generate(a.ruleNode.prelude);let T=o.children.first(),M=o.children.last(),R=T.name,V=jf.default.generate(o),Y=[];T.children.forEach(te=>{te.type==="Identifier"&&Y.push(te.name)});let re;M!==T&&(re=M.name);let G="--pagedjs-"+$n();this.selector.split(",").forEach(te=>{this.textTargets[te]={func:R,args:Y,value:V,style:re||"content",selector:te,fullSelector:this.selector,variable:G}}),o.name="var",o.children=new jf.default.List,o.children.appendData({type:"Identifier",loc:0,name:G})}}onPseudoSelector(o,p,d,f,a){a.ruleNode.block.children.forEach(T=>{o.name==="before"&&T.property==="content"?T.value.children.forEach(R=>{R.type==="String"&&(this.beforeContent=R.value)}):o.name==="after"&&T.property==="content"&&T.value.children.forEach(M=>{M.type==="String"&&(this.afterContent=M.value)})})}afterParsed(o){Object.keys(this.textTargets).forEach(p=>{let d=this.textTargets[p],f=d.selector.split("::"),a=f[0],T=o.querySelectorAll(a),M;T.forEach((R,V)=>{let Y=Cp(R,d.args),re=o.querySelector(kp(Y));if(re)if(d.style){this.selector=$n(),R.setAttribute("data-target-text",this.selector);let G="";if(f.length>1&&(G+="::"+f[1]),d.style==="before"||d.style==="after"){let te=`${d.style}Content`;M=zl(this[te])}else M=zl(re.textContent," ");M=d.style==="first-letter"?M.charAt(0):M,this.styleSheet.insertRule(`[data-target-text="${this.selector}"]${G} { ${d.variable}: "${M}" }`)}else console.warn("missed target",Y)})})}},yk=f_;var _k=[pk,mk,gk,yk];var m_=class extends ai{constructor(o,p,d){super(o,p,d)}filter(o){Bp(o,p=>this.filterEmpty(p),NodeFilter.SHOW_TEXT)}filterEmpty(o){if(o.textContent.length>1&&Yd(o)){let p=o.parentNode;if(ln(p)&&p.closest("pre"))return NodeFilter.FILTER_REJECT;let f=Ep(o),a=Ap(o);return a===null&&f===null?(o.textContent=" ",NodeFilter.FILTER_REJECT):a===null||f===null?NodeFilter.FILTER_ACCEPT:(o.textContent=" ",NodeFilter.FILTER_REJECT)}else return NodeFilter.FILTER_REJECT}},vk=m_;var g_=class extends ai{constructor(o,p,d){super(o,p,d)}filter(o){Bp(o,null,NodeFilter.SHOW_COMMENT)}},bk=g_;var y_=class extends ai{constructor(o,p,d){super(o,p,d)}filter(o){o.querySelectorAll("script").forEach(p=>{p.remove()})}},xk=y_;var Ck=Ai(In(),1),kk=Ai(Tk(),1);var v_=class extends ai{constructor(o,p,d){super(o,p,d),this.displayRules={}}onDeclaration(o,p,d,f){if(o.property==="display"){let a=Ck.default.generate(f.ruleNode.prelude),T=o.value.children.first().name;a.split(",").forEach(M=>{this.displayRules[M]={value:T,selector:M,specificity:(0,kk.calculateSpecificity)(M),important:o.important}})}}filter(o){let{matches:p,selectors:d}=this.sortDisplayedSelectors(o,this.displayRules);for(let a=0;a<p.length;a++){let T=p[a],M=d[a],R=M[M.length-1].value;this.removable(T)&&R==="none"&&(T.dataset.undisplayed="undisplayed")}let f=o.querySelectorAll("[style]");for(let a=0;a<f.length;a++){let T=f[a];this.removable(T)&&(T.dataset.undisplayed="undisplayed")}}sorter(o,p){return o.important&&!p.important?1:p.important&&!o.important?-1:o.specificity-p.specificity}sortDisplayedSelectors(o,p=[]){let d=[],f=[];for(let a in p){let T=p[a],M=T.selector,R=[];try{try{R=o.querySelectorAll(M)}catch(Y){R=o.querySelectorAll(fk(M))}}catch(Y){R=[]}let V=Array.from(R);for(let Y of V)if(d.includes(Y)){let re=d.indexOf(Y);f[re].push(T),f[re]=f[re].sort(this.sorter)}else d.push(Y),f.push([T])}return{matches:d,selectors:f}}removable(o){return!(o.style&&o.style.display!==""&&o.style.display!=="none")}},Pk=v_;var Ek=[vk,bk,xk,Pk];var YP=Ai(Cl(),1),XP=Ai(HP(),1),P_=[...hk,..._k,...Ek],Vf=class{constructor(o,p,d){let f=[];P_.forEach(a=>{let T=new a(o,p,d);f.push(T),(0,XP.default)(T,this)})}};(0,YP.default)(Vf.prototype);function Wf(){for(var s=0;s<arguments.length;s++)P_.push(arguments[s])}function E_(s,o,p){return new Vf(s,o,p)}var Gf=class{constructor(o){this.settings=o||{},this.polisher=new Hy(!1),this.chunker=new Sg(void 0,void 0,this.settings),this.hooks={},this.hooks.beforePreview=new Pt(this),this.hooks.afterPreview=new Pt(this),this.size={width:{value:8.5,unit:"in"},height:{value:11,unit:"in"},format:void 0,orientation:void 0},this.chunker.on("page",p=>{this.emit("page",p)}),this.chunker.on("rendering",()=>{this.emit("rendering",this.chunker)})}initializeHandlers(){let o=E_(this.chunker,this.polisher,this);return o.on("size",p=>{this.size=p,this.emit("size",p)}),o.on("atpages",p=>{this.atpages=p,this.emit("atpages",p)}),o}registerHandlers(){return Wf.apply(Wf,arguments)}getParams(o){let p,d=new URL(window.location),f=new URLSearchParams(d.search);for(var a of f.entries())a[0]===o&&(p=a[1]);return p}wrapContent(){let o=document.querySelector("body"),p;return p=o.querySelector(":scope > template[data-ref='pagedjs-content']"),p||(p=document.createElement("template"),p.dataset.ref="pagedjs-content",p.innerHTML=o.innerHTML,o.innerHTML="",o.appendChild(p)),p.content}removeStyles(o=document){let p=Array.from(o.querySelectorAll("link[rel='stylesheet']:not([data-pagedjs-ignore], [media~='screen'])")),d=Array.from(o.querySelectorAll("style:not([data-pagedjs-inserted-styles], [data-pagedjs-ignore], [media~='screen'])"));return[...p,...d].sort(function(a,T){let M=a.compareDocumentPosition(T);return M===Node.DOCUMENT_POSITION_PRECEDING?1:M===Node.DOCUMENT_POSITION_FOLLOWING?-1:0}).map(a=>{if(a.nodeName==="STYLE"){let T={};return T[window.location.href]=a.textContent,a.remove(),T}if(a.nodeName==="LINK")return a.remove(),a.href;console.warn(`Unable to process: ${a}, ignoring.`)})}async preview(o,p,d){await this.hooks.beforePreview.trigger(o,d),o||(o=this.wrapContent()),p||(p=this.removeStyles()),this.polisher.setup(),this.handlers=this.initializeHandlers(),await this.polisher.add(...p);let f=performance.now(),a=await this.chunker.flow(o,d),T=performance.now();return a.performance=T-f,a.size=this.size,this.emit("rendered",a),await this.hooks.afterPreview.trigger(a.pages),a}};(0,KP.default)(Gf.prototype);var A_=Gf;addEventListener("DOMContentLoaded",s=>{let o=new A_,p=window.location,d=new URLSearchParams(p.search);(d.has("print")||d.has("p"))&&o.preview().then(f=>{console.log("Rendered",f.total,"pages.")})});var Zo=Ai(Ll()),eV=Ai(eE());var M_=Ai(Ll()),tE=Object.freeze(function(o,p){let d={},f=p.getTileSize(),a=M_.SVG.create("svg"),T=M_.SVG.create("g"),M=[];a.setAttribute("viewBox",`0 0 ${f.x} ${f.y}`),a.appendChild(T);function R(V,Y,re){let G=p.getFeatureStyle(V,Y,o.z);if(!G)return;let te=p.featureToLayer(V,Y,re,G);T.appendChild(te.graphics),M.push(te),p.addFeatureLayer(te)}return d.addVectorTile=function(Y){return p.getOrderedLayers(Object.keys(Y.layers),o.z).forEach(function(re){if(!Y.layers[re])return;let G=Y.layers[re],te=f.divideBy(G.extent),H=0;for(;H!==G.length;)R(G.feature(H),re,te),H+=1}),d},d.global=V=>o.scaleBy(f).add(V),d.eachFeatureLayer=V=>M.forEach((...Y)=>V(...Y,d)),d.domElement=()=>a,d.coords=()=>o,d});var qi=Ai(Ll());function to(s,o){this.x=s,this.y=o}to.prototype={clone(){return new to(this.x,this.y)},add(s){return this.clone()._add(s)},sub(s){return this.clone()._sub(s)},multByPoint(s){return this.clone()._multByPoint(s)},divByPoint(s){return this.clone()._divByPoint(s)},mult(s){return this.clone()._mult(s)},div(s){return this.clone()._div(s)},rotate(s){return this.clone()._rotate(s)},rotateAround(s,o){return this.clone()._rotateAround(s,o)},matMult(s){return this.clone()._matMult(s)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(s){return this.x===s.x&&this.y===s.y},dist(s){return Math.sqrt(this.distSqr(s))},distSqr(s){let o=s.x-this.x,p=s.y-this.y;return o*o+p*p},angle(){return Math.atan2(this.y,this.x)},angleTo(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith(s){return this.angleWithSep(s.x,s.y)},angleWithSep(s,o){return Math.atan2(this.x*o-this.y*s,this.x*s+this.y*o)},_matMult(s){let o=s[0]*this.x+s[1]*this.y,p=s[2]*this.x+s[3]*this.y;return this.x=o,this.y=p,this},_add(s){return this.x+=s.x,this.y+=s.y,this},_sub(s){return this.x-=s.x,this.y-=s.y,this},_mult(s){return this.x*=s,this.y*=s,this},_div(s){return this.x/=s,this.y/=s,this},_multByPoint(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint(s){return this.x/=s.x,this.y/=s.y,this},_unit(){return this._div(this.mag()),this},_perp(){let s=this.y;return this.y=this.x,this.x=-s,this},_rotate(s){let o=Math.cos(s),p=Math.sin(s),d=o*this.x-p*this.y,f=p*this.x+o*this.y;return this.x=d,this.y=f,this},_rotateAround(s,o){let p=Math.cos(s),d=Math.sin(s),f=o.x+p*(this.x-o.x)-d*(this.y-o.y),a=o.y+d*(this.x-o.x)+p*(this.y-o.y);return this.x=f,this.y=a,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:to};to.convert=function(s){if(s instanceof to)return s;if(Array.isArray(s))return new to(+s[0],+s[1]);if(s.x!==void 0&&s.y!==void 0)return new to(+s.x,+s.y);throw new Error("Expected [x, y] or {x, y} point format")};var xc=class{constructor(o,p,d,f,a){this.properties={},this.extent=d,this.type=0,this.id=void 0,this._pbf=o,this._geometry=-1,this._keys=f,this._values=a,o.readFields(A3,this,p)}loadGeometry(){let o=this._pbf;o.pos=this._geometry;let p=o.readVarint()+o.pos,d=[],f,a=1,T=0,M=0,R=0;for(;o.pos<p;){if(T<=0){let V=o.readVarint();a=V&7,T=V>>3}if(T--,a===1||a===2)M+=o.readSVarint(),R+=o.readSVarint(),a===1&&(f&&d.push(f),f=[]),f&&f.push(new to(M,R));else if(a===7)f&&f.push(f[0].clone());else throw new Error(`unknown command ${a}`)}return f&&d.push(f),d}bbox(){let o=this._pbf;o.pos=this._geometry;let p=o.readVarint()+o.pos,d=1,f=0,a=0,T=0,M=1/0,R=-1/0,V=1/0,Y=-1/0;for(;o.pos<p;){if(f<=0){let re=o.readVarint();d=re&7,f=re>>3}if(f--,d===1||d===2)a+=o.readSVarint(),T+=o.readSVarint(),a<M&&(M=a),a>R&&(R=a),T<V&&(V=T),T>Y&&(Y=T);else if(d!==7)throw new Error(`unknown command ${d}`)}return[M,V,R,Y]}toGeoJSON(o,p,d){let f=this.extent*Math.pow(2,d),a=this.extent*o,T=this.extent*p,M=this.loadGeometry();function R(G){return[(G.x+a)*360/f-180,360/Math.PI*Math.atan(Math.exp((1-(G.y+T)*2/f)*Math.PI))-90]}function V(G){return G.map(R)}let Y;if(this.type===1){let G=[];for(let H of M)G.push(H[0]);let te=V(G);Y=G.length===1?{type:"Point",coordinates:te[0]}:{type:"MultiPoint",coordinates:te}}else if(this.type===2){let G=M.map(V);Y=G.length===1?{type:"LineString",coordinates:G[0]}:{type:"MultiLineString",coordinates:G}}else if(this.type===3){let G=I3(M),te=[];for(let H of G)te.push(H.map(V));Y=te.length===1?{type:"Polygon",coordinates:te[0]}:{type:"MultiPolygon",coordinates:te}}else throw new Error("unknown feature type");let re={type:"Feature",geometry:Y,properties:this.properties};return this.id!=null&&(re.id=this.id),re}};xc.types=["Unknown","Point","LineString","Polygon"];function A3(s,o,p){s===1?o.id=p.readVarint():s===2?M3(p,o):s===3?o.type=p.readVarint():s===4&&(o._geometry=p.pos)}function M3(s,o){let p=s.readVarint()+s.pos;for(;s.pos<p;){let d=o._keys[s.readVarint()],f=o._values[s.readVarint()];o.properties[d]=f}}function I3(s){let o=s.length;if(o<=1)return[s];let p=[],d,f;for(let a=0;a<o;a++){let T=z3(s[a]);T!==0&&(f===void 0&&(f=T<0),f===T<0?(d&&p.push(d),d=[s[a]]):d&&d.push(s[a]))}return d&&p.push(d),p}function z3(s){let o=0;for(let p=0,d=s.length,f=d-1,a,T;p<d;f=p++)a=s[p],T=s[f],o+=(T.x-a.x)*(a.y+T.y);return o}var I_=class{constructor(o,p){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(L3,this,p),this.length=this._features.length}feature(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];let p=this._pbf.readVarint()+this._pbf.pos;return new xc(this._pbf,p,this.extent,this._keys,this._values)}};function L3(s,o,p){s===15?o.version=p.readVarint():s===1?o.name=p.readString():s===5?o.extent=p.readVarint():s===2?o._features.push(p.pos):s===3?o._keys.push(p.readString()):s===4&&o._values.push(D3(p))}function D3(s){let o=null,p=s.readVarint()+s.pos;for(;s.pos<p;){let d=s.readVarint()>>3;o=d===1?s.readString():d===2?s.readFloat():d===3?s.readDouble():d===4?s.readVarint64():d===5?s.readVarint():d===6?s.readSVarint():d===7?s.readBoolean():null}if(o==null)throw new Error("unknown feature value");return o}var $f=class{constructor(o,p){this.layers=o.readFields(O3,{},p)}};function O3(s,o,p){if(s===3){let d=new I_(p,p.readVarint()+p.pos);d.length&&(o[d.name]=d)}}function Hf(s,o,p,d){let f=new qi.Layer(d);return f.feature=s,f.layerName=o,f.properties=s.properties,f.addTo=function(T){f._map=T,f.addInteractiveTarget(f.graphics)},f.removeFrom=function(){f.removeInteractiveTarget(f.graphics),delete f._map},f.scalePoint=function(T){return(0,qi.point)(T).scaleBy(p)},f.bbox=function(){let[T,M,R,V]=s.bbox();return(0,qi.bounds)(f.scalePoint([T,M]),f.scalePoint([R,V]))},f.applyOptions=function(T){T.className&&qi.DomUtil.addClass(f.graphics,T.className),f.setStyle({})},f}function Yf(s,o){o.interactive?(s.setAttribute("pointer-events","auto"),qi.DomUtil.addClass(s,"leaflet-interactive")):(qi.DomUtil.removeClass(s,"leaflet-interactive"),s.removeAttribute("pointer-events")),o.hidden?s.setAttribute("visibility","hidden"):s.removeAttribute("visibility")}function z_(s,o){return o.stroke?(s.setAttribute("stroke",o.color),s.setAttribute("stroke-opacity",o.opacity),s.setAttribute("stroke-width",o.weight),s.setAttribute("stroke-linecap",o.lineCap),s.setAttribute("stroke-linejoin",o.lineJoin),o.dashArray?s.setAttribute("stroke-dasharray",o.dashArray):s.removeAttribute("stroke-dasharray"),o.dashOffset?s.setAttribute("stroke-dashoffset",o.dashOffset):s.removeAttribute("stroke-dashoffset")):s.setAttribute("stroke","none"),o.fill?(s.setAttribute("fill",o.fillColor||o.color),s.setAttribute("fill-opacity",o.fillOpacity),s.setAttribute("fill-rule",o.fillRule||"evenodd")):s.setAttribute("fill","none"),s}function iE(s,o){if(o.icon&&o.icon.options.iconUrl){let p=qi.SVG.create("image");p.setAttribute("width",o.icon.options.iconSize[0]),p.setAttribute("height",o.icon.options.iconSize[1]),p.setAttribute("href",o.icon.options.iconUrl),s.appendChild(p)}else o.icon&&o.icon.options.svg&&s.appendChild(o.icon.options.svg)}function rE(s,o,p,d){d=(0,qi.extend)({},qi.CircleMarker.prototype.options,d);let f=Hf(s,o,p,d),a=f.scalePoint(s.loadGeometry()[0][0]);return f.graphics=qi.SVG.create("circle"),f.graphics.setAttribute("cx",a.x),f.graphics.setAttribute("cy",a.y),f.setStyle=function(M){M=(0,qi.extend)({},d,M),Yf(f.graphics,M),z_(f.graphics,M),f.graphics.setAttribute("r",M.radius)},f.applyOptions(d),f}function nE(s,o,p,d){let f=xc.types[s.type];d=(0,qi.extend)({},f==="Polygon"?qi.Polygon.prototype.options:qi.Path.prototype.options,d);let a=Hf(s,o,p,d),T=s.loadGeometry();return a.graphics=qi.SVG.create("path"),a.graphics.setAttribute("d",qi.SVG.pointsToPath(T.map(M=>M.map(a.scalePoint)),f==="Polygon")),a.setStyle=function(R){R=(0,qi.extend)({},d,R),Yf(a.graphics,R),z_(a.graphics,R)},a.applyOptions(d),a}function aE(s,o,p,d){let f=Hf(s,o,p,d);f.setStyle=function(R){R=(0,qi.extend)({},d,R),Yf(f.graphics,R),iE(f.graphics,R)},f.graphics=qi.SVG.create("g");let a=f.scalePoint(s.loadGeometry()[0][0]),T=d.icon.options.iconAnchor||[0,0];return f.graphics.setAttribute("transform",`translate(${a.x-T[0]}, ${a.y-T[1]})`),f.applyOptions(d),f}function sE(s,o,p,d){switch(xc.types[s.type]){case"Point":return d.icon?aE(s,o,p,d):rE(s,o,p,d);case"Polygon":case"LineString":return nE(s,o,p,d);default:throw new Error("Unknown feature type")}}var Dl=Ai(Ll()),mE=Ai(pE());function J3(...s){return new Error(s.join(": "))}function eF(s,o){return fetch(s,o).then(function(p){if(p.ok)return p.arrayBuffer();if(p.status!==404)throw J3(s,p.status,p.statusText)})}function fE(s){return`${s.x}|${s.y}|${s.z}`}var tF={featureToLayer:sE,filter:void 0,layerOrder:void 0,layers:void 0,minZoom:0,maxZoom:18,maxDetailZoom:void 0,minDetailZoom:void 0,subdomains:"abc",zoomOffset:0,zoomReverse:!1},O_=Object.freeze(function(o,p){let d=new Dl.GridLayer(p),f=Object.getPrototypeOf(d),a={};function T(te,H,Se){let{getFeatureId:je,vectorTileLayerStyles:ye}=p,Ce=ye[H];if(je){let Ye=je(te);a[Ye]&&(Ce=a[Ye])}if(typeof Ce=="function"&&(Ce=Ce(te.properties,Se,te.type)),Array.isArray(Ce)){if(!Ce.length)return;Ce=Ce[0]}return Ce}p=Dl.Util.extend({},tF,p),typeof p.subdomains=="string"&&(p.subdomains=p.subdomains.split("")),p.vectorTileLayerStyles&&!p.style&&(p.style=T);let M={};d.on("tileunload",function(te){let H=fE(te.coords),Se=M[H];Se&&(Se.eachFeatureLayer(d.removeFeatureLayer),delete M[H])});let R;d.onAdd=function(H,...Se){return R=H,f.onAdd.call(d,H,...Se)},d.onRemove=function(...H){return R=void 0,f.onRemove.call(d,...H)},d.createTile=function(H,Se){let je=fE(H),ye=tE(H,d);return M[je]=ye,eF(d.getTileUrl(H),p.fetchOptions).then(function(Ce){ye.addVectorTile(new $f(new mE.default(Ce))),Se(null,ye)},function(Ce){Se(Ce,ye)}),ye.domElement()};function V(te){let H=Math.abs(te.x+te.y)%p.subdomains.length;return p.subdomains[H]}function Y(te){let{minDetailZoom:H,maxDetailZoom:Se}=p;return H!==void 0&&te<H?H:Se!==void 0&&Se<te?Se:te}function re(te){let{maxZoom:H,zoomReverse:Se,zoomOffset:je}=p;return Se&&(te=H-te),Y(te+je)}d.getTileUrl=function(H){let Se={s:V(H),x:H.x,y:H.y,z:re(H.z)};return R.options.crs.infinite||(Se["-y"]=d._globalTileRange.max.y-H.y),Dl.Util.template(o,Dl.Util.extend(Se,p))};function G(te){Object.keys(M).forEach(H=>M[H].eachFeatureLayer(te))}return d.setStyle=function(H){return p.style=H,G(function(Se,je,ye,Ce){let{feature:Ye,layerName:rt}=Se,Ct=d.getFeatureStyle(Ye,rt,Ce.coords().z);Se.setStyle(Ct)}),d},d.setFeatureStyle=function(H,Se){return a[H]=Se,d.setStyle(p.style),d},d.resetFeatureStyle=function(H){return delete a[H],d.setStyle(p.style),d},d.getTileSize=function(){let H=f.getTileSize.call(d),Se=d._tileZoom;return Se===void 0?H:H.divideBy(R.getZoomScale(Y(Se),Se)).round()},d.getFeatureStyle=function(H,Se,je){if(p.filter&&!p.filter(H,Se,je))return;let ye=p.style;return typeof ye=="function"?ye(H,Se,je):ye},d.getOrderedLayers=function(H,Se){H=p.layers||H;let je=p.layerOrder;return je!==void 0?je(H,Se):H},d.featureToLayer=p.featureToLayer,d.addFeatureLayer=function(H){return H.addTo(R),H.addEventParent(d),d},d.removeFeatureLayer=function(H){return H.removeEventParent(d),H.removeFrom(R),d},d.getBounds=function(){let H;return G(function(Se,je,ye,Ce){let Ye=gt=>R.unproject(Ce.global(gt),Ce.coords().z),rt=Se.bbox(),Ct=(0,Dl.latLngBounds)(Ye(rt.min),Ye(rt.max));H?H.extend(Ct):H=Ct}),H},d});var iV=Ai(vE());var Qf=Ai(Ll()),Ol=Ai(Ll()),iF=Qf.default.Icon.extend({options:{svgElement:null},createIcon:function(s){let o=s&&s.tagName==="DIV"?s:document.createElement("div"),p=this.options,d=Ol.SVG.create("svg");return d.setAttribute("width",p.iconSize[0]),d.setAttribute("height",p.iconSize[1]),d.appendChild(p.svgElement),o.appendChild(d),o}});function xE(s){let o=s.src,p=s.scale||1,d=s.anchor||[.5,.5];return o?new Promise(f=>{let a=new Image;a.onload=()=>{let T=a.naturalWidth,M=a.naturalHeight,R=T*p,V=M*p,Y=d[0],re=d[1];(s.anchorXUnits==="fraction"||Y<=1)&&(Y=R*Y),(s.anchorYUnits==="fraction"||re<=1)&&(re=V*re);let G=Qf.default.icon({iconUrl:o,iconSize:[R,V],iconAnchor:[Y,re],popupAnchor:[Y,re]});f(G)},a.onerror=()=>{f(null)},a.src=o}):Promise.resolve(null)}function j_(s){return s?(o,p)=>{let d=s[0];switch(d){case"==":case"!=":case">":case">=":case"<":case"<=":{let f=s[1],a=s[2],T=Array.isArray(f)?pi(f,p,o):o[f];return d==="=="?T==a:d==="!="?T!=a:d===">"?T>a:d===">="?T>=a:d==="<"?T<a:d==="<="?T<=a:!1}case"in":case"!in":{let f=s[1],a=Array.isArray(f)?pi(f,p,o):o[f],M=s.slice(2).includes(a);return d==="in"?M:!M}case"has":return o.hasOwnProperty(s[1]);case"!has":return!o.hasOwnProperty(s[1]);case"all":return s.slice(1).every(f=>j_(f)(o,p));default:return console.warn(`Unsupported filter operator: ${d}`),!0}}:()=>!0}function pi(s,o,p){if(typeof s=="string"&&(s.startsWith("rgba")||s.startsWith("hsla"))){let d=s.split(",");if(d.length===4){let f=parseFloat(d[3]);return{color:(d.slice(0,3).join(",")+")").replace("rgba","rgb").replace("hsla","hsl"),opacity:f}}}if(typeof s!="object"||s===null)return s;if(Array.isArray(s)){let d=["get","match"];if(typeof s[0]!="string"||!d.includes(s[0]))return s;let[f,...a]=s;switch(f){case"get":return p[a[0]];case"match":{let T=pi(a[0],o,p),M=a.slice(1);for(let R=0;R<M.length-1;R+=2){let V=M[R],Y=M[R+1];if(Array.isArray(V)){if(V.includes(T))return pi(Y,o,p)}else if(T===V)return pi(Y,o,p)}return pi(M[M.length-1],o,p)}default:return console.warn(`Unsupported expression operator: ${f}`),s}}if(s.stops){let d=s.stops,f=d[0],a=d[d.length-1];if(o<=f[0])return pi(f[1],o,p);if(o>=a[0])return pi(a[1],o,p);for(let H=0;H<d.length-1;H++)if(o>=d[H][0]&&o<d[H+1][0]){f=d[H],a=d[H+1];break}let T=f[0],M=a[0],R=f[1],V=a[1];if(typeof R!="number"||typeof V!="number")return pi(R,o,p);let Y=M-T,re=V-R,G=(o-T)/Y;return R+G*re}return console.warn("Unsupported expression type:",s),s}function wE(s,o,p=!0){let d=o.options.lang,f={};if(!s||!s.layers)return f;let a={};s.layers.forEach(T=>{if(T.type==="background")return;let M=T["source-layer"];M&&(a[M]||(a[M]=[]),a[M].push(T))});for(let T in a){let M=a[T];f[T]=function(R,V,Y){var te,H;let re=(te=f["*"])==null?void 0:te.cache,G=[];for(let Se=0;Se<s.layers.length;Se++){let je=s.layers[Se];if(je["source-layer"]!==T)continue;let ye=j_(je.filter);if(!(je.minzoom&&V<je.minzoom)&&!(je.maxzoom&&V>=je.maxzoom)&&ye(R,V)){let Ce={},Ye=je.paint||{},rt=je.layout||{};if(pi(rt.visibility,V,R)==="none")continue;switch(je.type){case"fill":Ce.fill=!0;let gt=pi(Ye["fill-color"],V,R);typeof gt=="object"&&gt.color?(Ce.fillColor=gt.color,Ce.fillOpacity=gt.opacity):(Ce.fillColor=gt,Ce.fillOpacity=(H=pi(Ye["fill-opacity"],V,R))!=null?H:1),Ye["fill-outline-color"]?(Ce.color=pi(Ye["fill-outline-color"],V,R),Ce.weight=1):Ce.stroke=!1;break;case"line":let Wt=pi(Ye["line-color"],V,R);if(typeof Wt=="object"&&Wt.color?(Ce.color=Wt.color,Ce.opacity=Wt.opacity):(Ce.color=Wt,Ce.opacity=pi(Ye["line-opacity"],V,R)),Ce.weight=pi(Ye["line-width"],V,R),Ce.weight<=0)continue;let Gt=pi(Ye["line-dasharray"],V,R);Array.isArray(Gt)&&(Ce.dashArray=Gt.join(" ")),Ce.lineCap=pi(rt["line-cap"],V,R),Ce.lineJoin=pi(rt["line-join"],V,R);break;case"circle":Ce.radius=pi(Ye["circle-radius"],V,R),Ce.color=pi(Ye["circle-stroke-color"],V,R),Ce.weight=pi(Ye["circle-stroke-width"],V,R),Ce.opacity=pi(Ye["circle-stroke-opacity"],V,R),Ce.fillColor=pi(Ye["circle-color"],V,R),Ce.fillOpacity=pi(Ye["circle-opacity"],V,R),Ce.fill=!0;break;case"symbol":let wt=pi(rt["icon-image"],V,R);if(!wt||wt===""){if(p)return{stroke:!1,fill:!1};let kt=R["name"+d];kt===void 0&&(kt=R.name);let si=s["ol:webfonts"],ri=Array.isArray(si)?si.join(", "):"sans-serif",di=pi(rt["text-size"],V,R)||0,ni=pi(Ye["text-color"],V,R),Ut=pi(Ye["text-halo-color"],V,R),ut=pi(Ye["text-halo-width"],V,R);if(di<=0)return{stroke:!1,fill:!1};if(re&&Y){let St=R.name.length,sr=di*St*.7,vi=di+10,cn=o.latLngToContainerPoint([Y[1],Y[0]]),Mr=sr/2,un={minX:cn.x-Mr,maxX:cn.x+Mr,minY:cn.y-vi,maxY:cn.y},or=10,wn={minX:un.minX-or,maxX:un.maxX+or,minY:un.minY-or,maxY:un.maxY+or};if(re.some(gr=>wn.maxX>gr.minX&&wn.minX<gr.maxX&&wn.maxY>gr.minY&&wn.minY<gr.maxY))return{stroke:!1,fill:!1};re.push(un)}let Ft=di*(kt?kt.length:0)*.8,_t=di+10,Kt=di,Mi=Ol.SVG.create("g"),Ii=Ol.SVG.create("text"),hi={"paint-order":"stroke fill",fill:ni,stroke:Ut,"stroke-width":ut,x:Ft/2,y:di,"font-size":`${di}px`,"font-family":ri,"text-anchor":"middle"};for(let St in hi)Ii.setAttribute(St,hi[St]);Ii.textContent=kt,Mi.appendChild(Ii);let At=new iF({svgElement:Mi,iconSize:[Ft,_t],iconAnchor:[Ft/2,Kt]})}else if(p)return{stroke:!1,fill:!1};default:console.warn(`Unsupported layer type: ${je.type}`);continue}G.push(Ce)}}return G.length>0?G.reverse():{stroke:!1,fill:!1}}}return f}var rF=typeof OffscreenCanvas!="undefined"?new OffscreenCanvas(0,0):document.createElement("canvas"),bE=rF.getContext("2d",{alpha:!1});function SE(s,o){return function(p,d,f,a){var ni,Ut;let T=p.properties,M=(ni=this["*"])==null?void 0:ni.cache,R=s.layers.find(ut=>ut["source-layer"]===d&&ut.type==="symbol"&&j_(ut.filter)(T,f));if(!R||R.minzoom&&f<R.minzoom||R.maxzoom&&f>=R.maxzoom||pi((Ut=R.layout)==null?void 0:Ut.visibility,f,T)==="none")return null;let Y=R.paint||{},re=R.layout||{},G=o.options.lang,te=T["name_"+G]||T.name,H=pi(re["text-size"],f,T)||0;if(!te||H<=0)return null;let Se=s["ol:webfonts"]||s.metadata["ol:webfonts"]||"sans-serif";bE.font=`${H}px ${Se}`;let je=bE.measureText(te).width;if(M&&p.type===1){let ut=a.x+":"+a.y+":"+a.z;M[ut]||(M[ut]=[]);let Ft=H*1.5,_t=Ft/2,Kt=p.loadGeometry()[0][0],Mi=256/4096,Ii=Kt.x*Mi,hi=Kt.y*Mi,At=10,St={minX:Ii-je/2-At,maxX:Ii+je/2+At,minY:hi-_t-At,maxY:hi+(Ft-_t)+At};if(M[ut].some(vi=>St.maxX>vi.minX&&St.minX<vi.maxX&&St.maxY>vi.minY&&St.minY<vi.maxY))return null;M[ut].push(St)}let ye=H*1.5,Ce=ye/2,Ye=pi(Y["text-color"],f,T),rt=pi(Y["text-halo-color"],f,T),Ct=pi(Y["text-halo-width"],f,T),gt=Ol.SVG.create("text"),Wt={"paint-order":"stroke fill","stroke-width":Ct,"font-size":`${H}px`,"font-family":Se,"text-anchor":"middle",x:je/2,y:H};Wt.fill=typeof Ye=="object"&&Ye.color?Ye.color:Ye,Wt["fill-opacity"]=typeof Ye=="object"&&Ye.opacity?Ye.opacity:1,Wt.stroke=typeof rt=="object"&&rt.color?rt.color:rt,Wt["stroke-opacity"]=typeof rt=="object"&&rt.opacity?rt.opacity:1;for(let ut in Wt)gt.setAttribute(ut,Wt[ut]);gt.textContent=te;let Gt=Ol.SVG.create("g");Gt.appendChild(gt);let wt=Ol.SVG.create("svg");wt.setAttribute("width",je),wt.setAttribute("height",ye),wt.setAttribute("viewBox",`0 0 ${je} ${ye}`);let kt=Ol.SVG.create("style");kt.textContent=`@font-face { font-family: "${Se}"; src: local('${Se}'), url("/fonts/space-grotesk-latin-ext-wght-normal.woff2") format("woff2-variations"); }`,wt.appendChild(kt),wt.appendChild(Gt);let si=new XMLSerializer().serializeToString(wt),ri="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(si))),di=Qf.default.icon({iconUrl:ri,iconSize:[je,ye],iconAnchor:[je/2,Ce]});return nF(Gt,je,ye,je/2,Ce)}}function nF(s,o,p,d,f){return{icon:{options:{svg:s,iconSize:[o,p],iconAnchor:[d,f]}}}}var{slice:aF,forEach:sF}=[];function oF(s){return sF.call(aF.call(arguments,1),o=>{if(o)for(let p in o)s[p]===void 0&&(s[p]=o[p])}),s}function lF(s){return typeof s!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(p=>p.test(s))}var TE=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,cF=function(s,o){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},f=encodeURIComponent(o),a=`${s}=${f}`;if(d.maxAge>0){let T=d.maxAge-0;if(Number.isNaN(T))throw new Error("maxAge should be a Number");a+=`; Max-Age=${Math.floor(T)}`}if(d.domain){if(!TE.test(d.domain))throw new TypeError("option domain is invalid");a+=`; Domain=${d.domain}`}if(d.path){if(!TE.test(d.path))throw new TypeError("option path is invalid");a+=`; Path=${d.path}`}if(d.expires){if(typeof d.expires.toUTCString!="function")throw new TypeError("option expires is invalid");a+=`; Expires=${d.expires.toUTCString()}`}if(d.httpOnly&&(a+="; HttpOnly"),d.secure&&(a+="; Secure"),d.sameSite)switch(typeof d.sameSite=="string"?d.sameSite.toLowerCase():d.sameSite){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return d.partitioned&&(a+="; Partitioned"),a},CE={create(s,o,p,d){let f=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};p&&(f.expires=new Date,f.expires.setTime(f.expires.getTime()+p*60*1e3)),d&&(f.domain=d),document.cookie=cF(s,o,f)},read(s){let o=`${s}=`,p=document.cookie.split(";");for(let d=0;d<p.length;d++){let f=p[d];for(;f.charAt(0)===" ";)f=f.substring(1,f.length);if(f.indexOf(o)===0)return f.substring(o.length,f.length)}return null},remove(s,o){this.create(s,"",-1,o)}},uF={name:"cookie",lookup(s){let{lookupCookie:o}=s;if(o&&typeof document!="undefined")return CE.read(o)||void 0},cacheUserLanguage(s,o){let{lookupCookie:p,cookieMinutes:d,cookieDomain:f,cookieOptions:a}=o;p&&typeof document!="undefined"&&CE.create(p,s,d,f,a)}},dF={name:"querystring",lookup(s){var d;let{lookupQuerystring:o}=s,p;if(typeof window!="undefined"){let{search:f}=window.location;!window.location.search&&((d=window.location.hash)==null?void 0:d.indexOf("?"))>-1&&(f=window.location.hash.substring(window.location.hash.indexOf("?")));let T=f.substring(1).split("&");for(let M=0;M<T.length;M++){let R=T[M].indexOf("=");R>0&&T[M].substring(0,R)===o&&(p=T[M].substring(R+1))}}return p}},hF={name:"hash",lookup(s){var f;let{lookupHash:o,lookupFromHashIndex:p}=s,d;if(typeof window!="undefined"){let{hash:a}=window.location;if(a&&a.length>2){let T=a.substring(1);if(o){let M=T.split("&");for(let R=0;R<M.length;R++){let V=M[R].indexOf("=");V>0&&M[R].substring(0,V)===o&&(d=M[R].substring(V+1))}}if(d)return d;if(!d&&p>-1){let M=a.match(/\/([a-zA-Z-]*)/g);return Array.isArray(M)?(f=M[typeof p=="number"?p:0])==null?void 0:f.replace("/",""):void 0}}}return d}},$u=null,kE=()=>{if($u!==null)return $u;try{if($u=typeof window!="undefined"&&window.localStorage!==null,!$u)return!1;let s="i18next.translate.boo";window.localStorage.setItem(s,"foo"),window.localStorage.removeItem(s)}catch(s){$u=!1}return $u},pF={name:"localStorage",lookup(s){let{lookupLocalStorage:o}=s;if(o&&kE())return window.localStorage.getItem(o)||void 0},cacheUserLanguage(s,o){let{lookupLocalStorage:p}=o;p&&kE()&&window.localStorage.setItem(p,s)}},Hu=null,PE=()=>{if(Hu!==null)return Hu;try{if(Hu=typeof window!="undefined"&&window.sessionStorage!==null,!Hu)return!1;let s="i18next.translate.boo";window.sessionStorage.setItem(s,"foo"),window.sessionStorage.removeItem(s)}catch(s){Hu=!1}return Hu},fF={name:"sessionStorage",lookup(s){let{lookupSessionStorage:o}=s;if(o&&PE())return window.sessionStorage.getItem(o)||void 0},cacheUserLanguage(s,o){let{lookupSessionStorage:p}=o;p&&PE()&&window.sessionStorage.setItem(p,s)}},mF={name:"navigator",lookup(s){let o=[];if(typeof navigator!="undefined"){let{languages:p,userLanguage:d,language:f}=navigator;if(p)for(let a=0;a<p.length;a++)o.push(p[a]);d&&o.push(d),f&&o.push(f)}return o.length>0?o:void 0}},gF={name:"htmlTag",lookup(s){let{htmlTag:o}=s,p,d=o||(typeof document!="undefined"?document.documentElement:null);return d&&typeof d.getAttribute=="function"&&(p=d.getAttribute("lang")),p}},yF={name:"path",lookup(s){var f;let{lookupFromPathIndex:o}=s;if(typeof window=="undefined")return;let p=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(p)?(f=p[typeof o=="number"?o:0])==null?void 0:f.replace("/",""):void 0}},_F={name:"subdomain",lookup(s){var f,a;let{lookupFromSubdomainIndex:o}=s,p=typeof o=="number"?o+1:1,d=typeof window!="undefined"&&((a=(f=window.location)==null?void 0:f.hostname)==null?void 0:a.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(d)return d[p]}},EE=!1;try{document.cookie,EE=!0}catch(s){}var AE=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];EE||AE.splice(1,1);var vF=()=>({order:AE,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:s=>s}),Ph=class{constructor(o){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(o,p)}init(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=o,this.options=oF(p,this.options||{},vF()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=f=>f.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=d,this.addDetector(uF),this.addDetector(dF),this.addDetector(pF),this.addDetector(fF),this.addDetector(mF),this.addDetector(gF),this.addDetector(yF),this.addDetector(_F),this.addDetector(hF)}addDetector(o){return this.detectors[o.name]=o,this}detect(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,p=[];return o.forEach(d=>{if(this.detectors[d]){let f=this.detectors[d].lookup(this.options);f&&typeof f=="string"&&(f=[f]),f&&(p=p.concat(f))}}),p=p.filter(d=>d!=null&&!lF(d)).map(d=>this.options.convertDetectedLanguage(d)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?p:p.length>0?p[0]:null}cacheUserLanguage(o){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;p&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(o)>-1||p.forEach(d=>{this.detectors[d]&&this.detectors[d].cacheUserLanguage(o,this.options)}))}};Ph.type="languageDetector";var Eh={};uI(Eh,{default:()=>kF,glyphs:()=>SF,layers:()=>N_,metadata:()=>wF,name:()=>xF,sources:()=>CF,sprite:()=>TF,version:()=>bF});var bF=8,xF="versatiles-colorful",wF={license:"https://creativecommons.org/publicdomain/zero/1.0/"},SF="https://tiles.versatiles.org/assets/glyphs/{fontstack}/{range}.pbf",TF=[{id:"basics",url:"https://tiles.versatiles.org/assets/sprites/basics/sprites"}],CF={"versatiles-shortbread":{attribution:'\xA9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',tiles:["https://tiles.versatiles.org/tiles/osm/{z}/{x}/{y}"],type:"vector",scheme:"xyz",bounds:[-180,-85.0511287798066,180,85.0511287798066],minzoom:0,maxzoom:14}},N_=[{id:"background",type:"background",paint:{"background-color":"rgb(249,244,238)"}},{source:"versatiles-shortbread",id:"water-ocean",type:"fill","source-layer":"ocean",paint:{"fill-color":"rgb(190,221,243)"}},{source:"versatiles-shortbread",id:"land-glacier",type:"fill","source-layer":"water_polygons",filter:["all",["==","kind","glacier"]],paint:{"fill-color":"rgb(255,255,255)"}},{source:"versatiles-shortbread",id:"land-commercial",type:"fill","source-layer":"land",filter:["all",["in","kind","commercial","retail"]],paint:{"fill-color":"rgb(215,215,215)","fill-opacity":{stops:[[5,0],[6,1]]}}},{source:"versatiles-shortbread",id:"land-industrial",type:"fill","source-layer":"land",filter:["all",["in","kind","industrial","quarry","railway"]],paint:{"fill-color":"rgba(235,232,218,0.333)","fill-opacity":{stops:[[5,0],[6,1]]}}},{source:"versatiles-shortbread",id:"land-residential",type:"fill","source-layer":"land",filter:["all",["in","kind","garages","residential"]],paint:{"fill-color":"rgb(215,215,215)","fill-opacity":{stops:[[5,0],[6,1]]}}},{source:"versatiles-shortbread",id:"land-agriculture",type:"fill","source-layer":"land",filter:["all",["in","kind","brownfield","farmland","farmyard","greenfield","greenhouse_horticulture","orchard","plant_nursery","vineyard"]],paint:{"fill-color":"rgb(224,228,222)","fill-opacity":{stops:[[5,0],[6,1]]}}},{source:"versatiles-shortbread",id:"land-waste",type:"fill","source-layer":"land",filter:["all",["in","kind","landfill"]],paint:{"fill-color":"rgb(221,219,212)","fill-opacity":{stops:[[5,0],[6,1]]}}},{source:"versatiles-shortbread",id:"land-park",type:"fill","source-layer":"land",filter:["all",["in","kind","park","village_green","recreation_ground"]],paint:{"fill-color":"rgb(221,221,204)","fill-opacity":{stops:[[5,0],[6,1]]}}},{source:"versatiles-shortbread",id:"land-garden",type:"fill","source-layer":"land",filter:["all",["in","kind","allotments","garden"]],paint:{"fill-color":"rgb(221,221,204)","fill-opacity":{stops:[[5,0],[6,1]]}}},{source:"versatiles-shortbread",id:"land-burial",type:"fill","source-layer":"land",filter:["all",["in","kind","cemetery","grave_yard"]],paint:{"fill-color":"rgb(221,221,216)","fill-opacity":{stops:[[5,0],[6,1]]}}},{source:"versatiles-shortbread",id:"land-leisure",type:"fill","source-layer":"land",filter:["all",["in","kind","miniature_golf","playground","golf_course"]],paint:{"fill-color":"rgb(228,232,226)","fill-opacity":{stops:[[5,0],[6,1]]}}},{source:"versatiles-shortbread",id:"land-rock",type:"fill","source-layer":"land",filter:["all",["in","kind","bare_rock","scree","shingle"]],paint:{"fill-color":"rgb(224,228,229)"}},{source:"versatiles-shortbread",id:"land-forest",type:"fill","source-layer":"land",filter:["all",["in","kind","forest"]],paint:{"fill-color":"rgb(210,220,205)","fill-opacity":{stops:[[5,0],[6,.2]]}}},{source:"versatiles-shortbread",id:"land-grass",type:"fill","source-layer":"land",filter:["all",["in","kind","grass","grassland","meadow","wet_meadow","scrub"]],paint:{"fill-color":"rgb(224,232,221)","fill-opacity":{stops:[[5,0],[6,1]]}}},{source:"versatiles-shortbread",id:"land-vegetation",type:"fill","source-layer":"land",filter:["all",["in","kind","heath","scrub"]],paint:{"fill-color":"rgb(221,221,204)","fill-opacity":{stops:[[5,0],[6,1]]}}},{source:"versatiles-shortbread",id:"land-sand",type:"fill","source-layer":"land",filter:["all",["in","kind","beach","sand"]],paint:{"fill-color":"rgb(250,250,237)"}},{source:"versatiles-shortbread",id:"land-wetland",type:"fill","source-layer":"land",filter:["all",["in","kind","bog","marsh","string_bog","swamp"]],paint:{"fill-color":"rgb(211,230,219)"}},{source:"versatiles-shortbread",id:"water-river",type:"line","source-layer":"water_lines",minzoom:10,filter:["all",["in","kind","river"],["!=","tunnel",!0],["!=","bridge",!0]],paint:{"line-color":"rgb(190,221,243)","line-width":{stops:[[9,0],[10,3],[15,5],[17,9],[18,20],[20,60]]}},layout:{"line-cap":"round","line-join":"round"}},{source:"versatiles-shortbread",id:"water-canal",type:"line","source-layer":"water_lines",filter:["all",["in","kind","canal"],["!=","tunnel",!0],["!=","bridge",!0]],paint:{"line-color":"rgb(190,221,243)","line-width":{stops:[[9,0],[10,2],[15,4],[17,8],[18,17],[20,50]]}},layout:{"line-cap":"round","line-join":"round"}},{source:"versatiles-shortbread",id:"water-stream",type:"line","source-layer":"water_lines",filter:["all",["in","kind","stream"],["!=","tunnel",!0],["!=","bridge",!0]],paint:{"line-color":"rgb(190,221,243)","line-width":{stops:[[13,0],[14,1],[15,2],[17,6],[18,12],[20,30]]}},layout:{"line-cap":"round","line-join":"round"}},{source:"versatiles-shortbread",id:"water-ditch",type:"line","source-layer":"water_lines",filter:["all",["in","kind","ditch","drain"],["!=","tunnel",!0],["!=","bridge",!0]],paint:{"line-color":"rgb(190,221,243)","line-width":{stops:[[14,0],[15,1],[17,4],[18,8],[20,20]]}},layout:{"line-cap":"round","line-join":"round"}},{source:"versatiles-shortbread",id:"water-covered",type:"line","source-layer":"water_lines",filter:["in","tunnel",!0,"culvert"],paint:{visibility:"none"},minzoom:15},{source:"versatiles-shortbread",id:"water-area",type:"fill","source-layer":"water_polygons",filter:["==","kind","water"],paint:{"fill-color":"rgb(190,221,243)","fill-opacity":{stops:[[8,0],[10,1]]}}},{source:"versatiles-shortbread",id:"water-area-river",type:"fill","source-layer":"water_polygons",filter:["==","kind","river"],paint:{"fill-color":"rgb(190,221,243)","fill-opacity":{stops:[[8,0],[10,1]]}}},{source:"versatiles-shortbread",id:"water-area-small",type:"fill","source-layer":"water_polygons",filter:["in","kind","reservoir","basin","dock"],paint:{"fill-color":"rgb(190,221,243)","fill-opacity":{stops:[[6,0],[8,1]]}}},{source:"versatiles-shortbread",id:"water-dam-area",type:"fill","source-layer":"dam_polygons",filter:["==","kind","dam"],paint:{"fill-color":"rgb(249,244,238)","fill-opacity":{stops:[[8,0],[10,1]]}}},{source:"versatiles-shortbread",id:"water-dam",type:"line","source-layer":"dam_lines",filter:["==","kind","dam"],paint:{"line-color":"rgb(190,221,243)","line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-cap":"round","line-join":"round"}},{source:"versatiles-shortbread",id:"water-pier-area",type:"fill","source-layer":"pier_polygons",filter:["in","kind","pier","breakwater","groyne"],paint:{"fill-color":"rgb(249,244,238)","fill-opacity":{stops:[[12,0],[13,1]]}}},{source:"versatiles-shortbread",id:"water-pier",type:"line","source-layer":"pier_lines",filter:["in","kind","pier","breakwater","groyne"],paint:{"line-color":"rgb(249,244,238)"},layout:{"line-cap":"round","line-join":"round"}},{source:"versatiles-shortbread",id:"site-dangerarea",type:"fill","source-layer":"sites",filter:["in","kind","danger_area"],paint:{"fill-color":"rgb(255,0,0)","fill-outline-color":"rgb(255,0,0)","fill-opacity":.3,"fill-pattern":"basics:pattern-warning"}},{source:"versatiles-shortbread",id:"site-university",type:"fill","source-layer":"sites",filter:["in","kind","university"],paint:{"fill-color":"rgb(255,255,128)","fill-opacity":.1}},{source:"versatiles-shortbread",id:"site-college",type:"fill","source-layer":"sites",filter:["in","kind","college"],paint:{"fill-color":"rgb(255,255,128)","fill-opacity":.1}},{source:"versatiles-shortbread",id:"site-school",type:"fill","source-layer":"sites",filter:["in","kind","school"],paint:{"fill-color":"rgb(255,255,128)","fill-opacity":.1}},{source:"versatiles-shortbread",id:"site-hospital",type:"fill","source-layer":"sites",filter:["in","kind","hospital"],paint:{"fill-color":"rgb(255,102,102)","fill-opacity":.1}},{source:"versatiles-shortbread",id:"site-prison",type:"fill","source-layer":"sites",filter:["in","kind","prison"],paint:{"fill-color":"rgb(253,242,252)","fill-pattern":"basics:pattern-striped","fill-opacity":.1}},{source:"versatiles-shortbread",id:"site-parking",type:"fill","source-layer":"sites",filter:["in","kind","parking"],paint:{"fill-color":"rgb(235,232,230)"}},{source:"versatiles-shortbread",id:"site-bicycleparking",type:"fill","source-layer":"sites",filter:["in","kind","bicycle_parking"],paint:{"fill-color":"rgb(235,232,230)"}},{source:"versatiles-shortbread",id:"site-construction",type:"fill","source-layer":"sites",filter:["in","kind","construction"],paint:{"fill-color":"rgb(169,169,169)","fill-pattern":"basics:pattern-hatched_thin","fill-opacity":.1}},{source:"versatiles-shortbread",id:"airport-area",type:"fill","source-layer":"street_polygons",filter:["in","kind","runway","taxiway"],paint:{"fill-color":"rgb(255,255,255)","fill-opacity":.5}},{source:"versatiles-shortbread",id:"airport-taxiway:outline",type:"line","source-layer":"streets",filter:["==","kind","taxiway"],paint:{"line-color":"rgb(207,205,202)","line-width":{stops:[[13,0],[14,2],[15,10],[16,14],[18,20],[20,40]]}},layout:{"line-join":"round"}},{source:"versatiles-shortbread",id:"airport-runway:outline",type:"line","source-layer":"streets",filter:["==","kind","runway"],paint:{"line-color":"rgb(207,205,202)","line-width":{stops:[[11,0],[12,6],[13,9],[14,16],[15,24],[16,40],[17,100],[18,160],[20,300]]}},layout:{"line-join":"round"}},{source:"versatiles-shortbread",id:"airport-taxiway",type:"line","source-layer":"streets",filter:["==","kind","taxiway"],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[13,0],[14,1],[15,8],[16,12],[18,18],[20,36]]},"line-opacity":{stops:[[13,0],[14,1]]}},layout:{"line-join":"round"}},{source:"versatiles-shortbread",id:"airport-runway",type:"line","source-layer":"streets",filter:["==","kind","runway"],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[11,0],[12,5],[13,8],[14,14],[15,22],[16,38],[17,98],[18,158],[20,298]]},"line-opacity":{stops:[[11,0],[12,1]]}},layout:{"line-join":"round"}},{source:"versatiles-shortbread",id:"building:outline",type:"fill","source-layer":"buildings",paint:{"fill-color":"rgb(223,219,215)","fill-opacity":{stops:[[14,0],[15,1]]}}},{source:"versatiles-shortbread",id:"building",type:"fill","source-layer":"buildings",paint:{"fill-color":"rgb(242,234,226)","fill-opacity":{stops:[[14,0],[15,1]]},"fill-translate":[-2,-2]}},{source:"versatiles-shortbread",id:"tunnel-street-pedestrian-zone",type:"fill","source-layer":"street_polygons",filter:["all",["==","tunnel",!0],["==","kind","pedestrian"]],paint:{"fill-color":"rgb(247,247,247)","fill-opacity":{stops:[[12,0],[13,1]]}}},{source:"versatiles-shortbread",id:"tunnel-way-footway:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","footway"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,5],[18,7],[19,12],[20,22]]},"line-color":"hsl(288,13%,86%)"},minzoom:15},{source:"versatiles-shortbread",id:"tunnel-way-steps:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","steps"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,5],[18,7],[19,12],[20,22]]},"line-color":"hsl(288,13%,86%)"},minzoom:15},{source:"versatiles-shortbread",id:"tunnel-way-path:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","path"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,5],[18,7],[19,12],[20,22]]},"line-color":"hsl(288,13%,86%)"},minzoom:15},{source:"versatiles-shortbread",id:"tunnel-way-cycleway:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","cycleway"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,5],[18,7],[19,12],[20,22]]},"line-color":"hsl(203,11%,87%)"},minzoom:15},{source:"versatiles-shortbread",id:"tunnel-street-track:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","track"],["==","tunnel",!0]],paint:{"line-color":"rgb(222,222,222)","line-width":{stops:[[14,2],[16,4],[18,18],[19,48],[20,96]]},"line-opacity":{stops:[[14,0],[15,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-pedestrian:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","pedestrian"],["==","tunnel",!0]],paint:{"line-color":"rgb(222,222,222)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-service:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","service"],["==","tunnel",!0]],paint:{"line-color":"rgb(221,220,218)","line-width":{stops:[[14,1],[16,3],[18,12],[19,32],[20,48]]},"line-opacity":{stops:[[15,0],[16,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-livingstreet:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","living_street"],["==","tunnel",!0]],paint:{"line-color":"rgb(222,222,222)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-residential:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","residential"],["==","tunnel",!0]],paint:{"line-color":"rgb(222,222,222)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-unclassified:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","unclassified"],["==","tunnel",!0]],paint:{"line-color":"rgb(222,222,222)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-tertiary-link:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","tertiary"],["==","link",!0]],paint:{"line-color":"rgb(222,222,222)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-secondary-link:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","secondary"],["==","link",!0]],paint:{"line-color":"rgb(221,220,218)","line-dasharray":[1,.3],"line-width":{stops:[[12,2],[14,3],[16,7],[18,14],[20,40]]}},layout:{"line-join":"round","line-cap":"round"},minzoom:13},{source:"versatiles-shortbread",id:"tunnel-street-primary-link:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","primary"],["==","link",!0]],paint:{"line-color":"rgb(221,220,218)","line-dasharray":[1,.3],"line-width":{stops:[[12,2],[14,3],[16,7],[18,14],[20,40]]}},layout:{"line-join":"round","line-cap":"round"},minzoom:13},{source:"versatiles-shortbread",id:"tunnel-street-trunk-link:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","trunk"],["==","link",!0]],paint:{"line-color":"rgb(221,220,218)","line-dasharray":[1,.3],"line-width":{stops:[[12,2],[14,3],[16,7],[18,14],[20,40]]}},layout:{"line-join":"round","line-cap":"round"},minzoom:13},{source:"versatiles-shortbread",id:"tunnel-street-motorway-link:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","motorway"],["==","link",!0]],paint:{"line-color":"rgb(221,220,218)","line-dasharray":[1,.3],"line-width":{stops:[[12,2],[14,3],[16,7],[18,14],[20,40]]}},layout:{"line-join":"round","line-cap":"round"},minzoom:12},{source:"versatiles-shortbread",id:"tunnel-street-tertiary:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","tertiary"],["!=","link",!0]],paint:{"line-color":"rgb(222,222,222)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-secondary:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","secondary"],["!=","link",!0]],paint:{"line-color":"rgb(215,215,215)","line-dasharray":[1,.3],"line-width":{stops:[[11,2],[14,5],[16,8],[18,30],[19,68],[20,138]]},"line-opacity":{stops:[[11,0],[12,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-primary:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","primary"],["!=","link",!0]],paint:{"line-color":"rgb(220,220,220)","line-dasharray":[1,.3],"line-width":{stops:[[8,0],[9,1],[10,4],[14,6],[16,12],[18,36],[19,74],[20,144]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-trunk:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","trunk"],["!=","link",!0]],paint:{"line-color":"rgb(220,220,220)","line-dasharray":[1,.3],"line-width":{stops:[[7,0],[8,2],[10,4],[14,6],[16,12],[18,36],[19,74],[20,144]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-motorway:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","motorway"],["!=","link",!0]],paint:{"line-color":"rgb(220,220,220)","line-dasharray":[1,.3],"line-width":{stops:[[5,0],[6,2],[10,5],[14,5],[16,14],[18,38],[19,84],[20,168]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-way-footway",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","footway"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,4],[18,6],[19,10],[20,20]]},"line-color":"hsl(288,33%,94%)","line-dasharray":[1,.2]},minzoom:15},{source:"versatiles-shortbread",id:"tunnel-way-steps",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","steps"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,4],[18,6],[19,10],[20,20]]},"line-color":"hsl(288,33%,94%)","line-dasharray":[1,.2]},minzoom:15},{source:"versatiles-shortbread",id:"tunnel-way-path",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","path"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,4],[18,6],[19,10],[20,20]]},"line-color":"hsl(288,33%,94%)","line-dasharray":[1,.2]},minzoom:15},{source:"versatiles-shortbread",id:"tunnel-way-cycleway",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","cycleway"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,4],[18,6],[19,10],[20,20]]},"line-color":"hsl(203,30%,95%)","line-dasharray":[1,.2]},minzoom:15},{source:"versatiles-shortbread",id:"tunnel-street-track",type:"line","source-layer":"streets",filter:["all",["==","kind","track"],["==","tunnel",!0]],paint:{"line-color":"rgb(247,247,247)","line-width":{stops:[[14,1],[16,3],[18,16],[19,44],[20,88]]},"line-opacity":{stops:[[14,0],[15,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-pedestrian",type:"line","source-layer":"streets",filter:["all",["==","kind","pedestrian"],["==","tunnel",!0]],paint:{"line-color":"rgb(247,247,247)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-service",type:"line","source-layer":"streets",filter:["all",["==","kind","service"],["==","tunnel",!0]],paint:{"line-color":"rgb(247,247,247)","line-width":{stops:[[14,1],[16,2],[18,10],[19,28],[20,40]]},"line-opacity":{stops:[[15,0],[16,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-livingstreet",type:"line","source-layer":"streets",filter:["all",["==","kind","living_street"],["==","tunnel",!0]],paint:{"line-color":"rgb(247,247,247)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-residential",type:"line","source-layer":"streets",filter:["all",["==","kind","residential"],["==","tunnel",!0]],paint:{"line-color":"rgb(247,247,247)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-unclassified",type:"line","source-layer":"streets",filter:["all",["==","kind","unclassified"],["==","tunnel",!0]],paint:{"line-color":"rgb(247,247,247)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-track-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","track"],["==","bicycle","designated"],["==","tunnel",!0]],paint:{"line-color":"rgb(247,247,247)"},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-pedestrian-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","pedestrian"],["==","bicycle","designated"],["==","tunnel",!0]],paint:{"line-color":"rgb(239,249,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-service-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","service"],["==","bicycle","designated"],["==","tunnel",!0]],paint:{"line-color":"rgb(247,247,247)"},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-livingstreet-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","living_street"],["==","bicycle","designated"],["==","tunnel",!0]],paint:{"line-color":"rgb(239,249,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-residential-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","residential"],["==","bicycle","designated"],["==","tunnel",!0]],paint:{"line-color":"rgb(239,249,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-unclassified-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","unclassified"],["==","bicycle","designated"],["==","tunnel",!0]],paint:{"line-color":"rgb(239,249,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-tertiary-link",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","tertiary"],["==","link",!0]],paint:{"line-color":"rgb(247,247,247)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-secondary-link",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","secondary"],["==","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[12,1],[14,2],[16,5],[18,12],[20,38]]}},layout:{"line-join":"round","line-cap":"butt"},minzoom:13},{source:"versatiles-shortbread",id:"tunnel-street-primary-link",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","primary"],["==","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[12,1],[14,2],[16,5],[18,12],[20,38]]}},layout:{"line-join":"round","line-cap":"butt"},minzoom:13},{source:"versatiles-shortbread",id:"tunnel-street-trunk-link",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","trunk"],["==","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[12,1],[14,2],[16,5],[18,12],[20,38]]}},layout:{"line-join":"round","line-cap":"butt"},minzoom:13},{source:"versatiles-shortbread",id:"tunnel-street-motorway-link",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","motorway"],["==","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[12,1],[14,2],[16,5],[18,12],[20,38]]}},layout:{"line-join":"round","line-cap":"butt"},minzoom:12},{source:"versatiles-shortbread",id:"tunnel-street-tertiary",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","tertiary"],["!=","link",!0]],paint:{"line-color":"rgb(247,247,247)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-secondary",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","secondary"],["!=","link",!0]],paint:{"line-color":"rgb(240,240,240)","line-width":{stops:[[11,1],[14,4],[16,6],[18,28],[19,64],[20,130]]},"line-opacity":{stops:[[11,0],[12,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"tunnel-street-primary",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","primary"],["!=","link",!0]],paint:{"line-color":"rgb(240,240,240)","line-width":{stops:[[8,0],[9,2],[10,3],[14,5],[16,10],[18,34],[19,70],[20,140]]},"line-opacity":{stops:[[8,0],[9,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"tunnel-street-trunk",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","trunk"],["!=","link",!0]],paint:{"line-color":"rgb(240,240,240)","line-width":{stops:[[7,0],[8,1],[10,3],[14,5],[16,10],[18,34],[19,70],[20,140]]},"line-opacity":{stops:[[7,0],[8,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"tunnel-street-motorway",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","motorway"],["!=","link",!0]],paint:{"line-color":"rgb(240,240,240)","line-width":{stops:[[5,0],[6,1],[10,4],[14,4],[16,12],[18,36],[19,80],[20,160]]},"line-opacity":{stops:[[5,0],[6,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"tunnel-transport-tram:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","tram"],["!has","service"],["==","tunnel",!0]],minzoom:15,paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[15,0],[16,5],[18,7],[20,20]]},"line-dasharray":[.1,.5]}},{source:"versatiles-shortbread",id:"tunnel-transport-narrowgauge:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","narrow_gauge"],["!has","service"],["==","tunnel",!0]],minzoom:15,paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[15,0],[16,5],[18,7],[20,20]]},"line-dasharray":[.1,.5]}},{source:"versatiles-shortbread",id:"tunnel-transport-subway:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","subway"],["!has","service"],["==","tunnel",!0]],paint:{"line-color":"rgb(166,184,199)","line-width":{stops:[[11,0],[12,1],[15,3],[16,3],[18,6],[19,8],[20,10]]},"line-opacity":{stops:[[11,0],[12,.5]]}}},{source:"versatiles-shortbread",id:"tunnel-transport-lightrail:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","light_rail"],["!has","service"],["==","tunnel",!0]],paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[8,1],[13,1],[15,1],[20,14]]},"line-opacity":{stops:[[11,0],[12,.5]]}},minzoom:8},{source:"versatiles-shortbread",id:"tunnel-transport-lightrail-service:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","light_rail"],["has","service"],["==","tunnel",!0]],paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[14,0],[15,1],[16,1],[20,14]]}},minzoom:14},{source:"versatiles-shortbread",id:"tunnel-transport-rail:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","rail"],["!has","service"],["==","tunnel",!0]],paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[8,1],[13,1],[15,1],[20,14]]},"line-opacity":{stops:[[8,0],[9,.3]]}},minzoom:8},{source:"versatiles-shortbread",id:"tunnel-transport-rail-service:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","rail"],["has","service"],["==","tunnel",!0]],paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[14,0],[15,1],[16,1],[20,14]]}},minzoom:14},{source:"versatiles-shortbread",id:"tunnel-transport-monorail:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","monorail"],["==","tunnel",!0]],minzoom:15,paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[15,0],[16,5],[18,7],[20,20]]},"line-dasharray":[.1,.5]}},{source:"versatiles-shortbread",id:"tunnel-transport-funicular:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","funicular"],["==","tunnel",!0]],minzoom:15,paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[15,0],[16,5],[18,7],[20,20]]},"line-dasharray":[.1,.5]}},{source:"versatiles-shortbread",id:"tunnel-transport-tram",type:"line","source-layer":"streets",filter:["all",["in","kind","tram"],["!has","service"],["==","tunnel",!0]],minzoom:13,paint:{"line-width":{stops:[[13,0],[16,1],[17,2],[18,3],[20,5]]},"line-color":"rgb(177,187,196)"}},{source:"versatiles-shortbread",id:"tunnel-transport-narrowgauge",type:"line","source-layer":"streets",filter:["all",["in","kind","narrow_gauge"],["!has","service"],["==","tunnel",!0]],minzoom:13,paint:{"line-width":{stops:[[13,0],[16,1],[17,2],[18,3],[20,5]]},"line-color":"rgb(177,187,196)"}},{source:"versatiles-shortbread",id:"tunnel-transport-subway",type:"line","source-layer":"streets",filter:["all",["in","kind","subway"],["!has","service"],["==","tunnel",!0]],paint:{"line-color":"rgb(188,202,213)","line-width":{stops:[[11,0],[12,1],[15,2],[16,2],[18,5],[19,6],[20,8]]},"line-dasharray":[2,2],"line-opacity":{stops:[[14,0],[15,1]]}}},{source:"versatiles-shortbread",id:"tunnel-transport-lightrail",type:"line","source-layer":"streets",filter:["all",["in","kind","light_rail"],["!has","service"],["==","tunnel",!0]],paint:{"line-color":"rgb(197,204,211)","line-width":{stops:[[14,0],[15,1],[20,10]]},"line-dasharray":[2,2],"line-opacity":{stops:[[14,0],[15,1]]}},minzoom:14},{source:"versatiles-shortbread",id:"tunnel-transport-lightrail-service",type:"line","source-layer":"streets",filter:["all",["in","kind","light_rail"],["has","service"],["==","tunnel",!0]],paint:{"line-color":"rgb(197,204,211)","line-width":{stops:[[15,0],[16,1],[20,10]]},"line-dasharray":[2,2]},minzoom:15},{source:"versatiles-shortbread",id:"tunnel-transport-rail",type:"line","source-layer":"streets",filter:["all",["in","kind","rail"],["!has","service"],["==","tunnel",!0]],paint:{"line-color":"rgb(197,204,211)","line-width":{stops:[[14,0],[15,1],[20,10]]},"line-dasharray":[2,2],"line-opacity":{stops:[[14,0],[15,.3]]}},minzoom:14},{source:"versatiles-shortbread",id:"tunnel-transport-rail-service",type:"line","source-layer":"streets",filter:["all",["in","kind","rail"],["has","service"],["==","tunnel",!0]],paint:{"line-color":"rgb(197,204,211)","line-width":{stops:[[15,0],[16,1],[20,10]]},"line-dasharray":[2,2]},minzoom:15},{source:"versatiles-shortbread",id:"tunnel-transport-monorail",type:"line","source-layer":"streets",filter:["all",["in","kind","monorail"],["==","tunnel",!0]],minzoom:13,paint:{"line-width":{stops:[[13,0],[16,1],[17,2],[18,3],[20,5]]},"line-color":"rgb(177,187,196)"}},{source:"versatiles-shortbread",id:"tunnel-transport-funicular",type:"line","source-layer":"streets",filter:["all",["in","kind","funicular"],["==","tunnel",!0]],minzoom:13,paint:{"line-width":{stops:[[13,0],[16,1],[17,2],[18,3],[20,5]]},"line-color":"rgb(177,187,196)"}},{source:"versatiles-shortbread",id:"bridge",type:"fill","source-layer":"bridges",paint:{"fill-color":"rgb(244,239,233)","fill-antialias":!0,"fill-opacity":.8}},{source:"versatiles-shortbread",id:"street-pedestrian-zone",type:"fill","source-layer":"street_polygons",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["==","kind","pedestrian"]],paint:{"fill-color":"rgba(251,235,255,0.25)","fill-opacity":{stops:[[12,0],[13,1],[14,0],[15,1]]}}},{source:"versatiles-shortbread",id:"way-footway:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","footway"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,5],[18,7],[19,12],[20,22]]},"line-color":"rgb(226,212,230)"},minzoom:15},{source:"versatiles-shortbread",id:"way-steps:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","steps"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,5],[18,7],[19,12],[20,22]]},"line-color":"rgb(226,212,230)"},minzoom:15},{source:"versatiles-shortbread",id:"way-path:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","path"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,5],[18,7],[19,12],[20,22]]},"line-color":"rgb(226,212,230)"},minzoom:15},{source:"versatiles-shortbread",id:"way-cycleway:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","cycleway"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,5],[18,7],[19,12],[20,22]]},"line-color":"rgb(215,224,230)"},minzoom:15},{source:"versatiles-shortbread",id:"street-track:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","track"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(207,205,202)","line-width":{stops:[[14,2],[16,4],[18,18],[19,48],[20,96]]},"line-opacity":{stops:[[14,0],[15,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-pedestrian:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","pedestrian"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(207,205,202)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-service:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","service"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(221,220,218)","line-width":{stops:[[14,1],[16,3],[18,12],[19,32],[20,48]]},"line-opacity":{stops:[[15,0],[16,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-livingstreet:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","living_street"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(207,205,202)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-residential:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","residential"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(207,205,202)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-unclassified:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","unclassified"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(207,205,202)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-tertiary-link:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","tertiary"],["==","link",!0]],paint:{"line-color":"rgb(207,205,202)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-secondary-link:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","secondary"],["==","link",!0]],paint:{"line-color":"rgb(221,220,218)","line-width":{stops:[[12,2],[14,3],[16,7],[18,14],[20,40]]}},layout:{"line-join":"round","line-cap":"round"},minzoom:13},{source:"versatiles-shortbread",id:"street-primary-link:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","primary"],["==","link",!0]],paint:{"line-color":"rgb(221,220,218)","line-width":{stops:[[12,2],[14,3],[16,7],[18,14],[20,40]]}},layout:{"line-join":"round","line-cap":"round"},minzoom:13},{source:"versatiles-shortbread",id:"street-trunk-link:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","trunk"],["==","link",!0]],paint:{"line-color":"rgb(221,220,218)","line-width":{stops:[[12,2],[14,3],[16,7],[18,14],[20,40]]}},layout:{"line-join":"round","line-cap":"round"},minzoom:13},{source:"versatiles-shortbread",id:"street-motorway-link:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","motorway"],["==","link",!0]],paint:{"line-color":"rgb(221,220,218)","line-width":{stops:[[12,2],[14,3],[16,7],[18,14],[20,40]]}},layout:{"line-join":"round","line-cap":"round"},minzoom:12},{source:"versatiles-shortbread",id:"street-tertiary:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","tertiary"],["!=","link",!0]],paint:{"line-color":"rgb(207,205,202)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-secondary:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","secondary"],["!=","link",!0]],paint:{"line-color":"rgb(220,220,220)","line-width":{stops:[[7,0],[8,1],[10,4],[14,4],[16,12],[18,36],[19,80],[20,160]]},"line-opacity":{stops:[[5,0],[6,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-primary:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","primary"],["!=","link",!0]],paint:{"line-color":"rgb(220,220,220)","line-width":{stops:[[8,0],[9,1],[10,4],[14,6],[16,12],[18,36],[19,74],[20,144]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-trunk:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","trunk"],["!=","link",!0]],paint:{"line-color":"rgb(220,220,220)","line-width":{stops:[[7,0],[8,2],[10,4],[14,6],[16,12],[18,36],[19,74],[20,144]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"boundary-state:outline",type:"line","source-layer":"boundaries",filter:["all",["==","admin_level",4],["!=","maritime",!0],["!=","disputed",!0],["!=","coastline",!0]],paint:{"line-color":"rgb(250,245,240)","line-blur":2,"line-width":{stops:[[5,0],[6,2],[10,4]]},"line-opacity":.75},layout:{"line-cap":"round","line-join":"round"}},{source:"versatiles-shortbread",id:"boundary-state",type:"line","source-layer":"boundaries",filter:["all",["==","admin_level",4],["!=","maritime",!0],["!=","disputed",!0],["!=","coastline",!0]],paint:{"line-color":"rgb(150,150,150)","line-width":{stops:[[5,0],[6,1],[10,2]]},"line-dasharray":[2,2]},layout:{"line-cap":"round","line-join":"round"}},{source:"versatiles-shortbread",id:"street-motorway:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","motorway"],["!=","link",!0]],paint:{"line-color":"rgb(220,220,220)","line-width":{stops:[[7,0],[8,1],[10,4],[14,4],[16,12],[18,36],[19,80],[20,160]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"way-footway",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","footway"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,4],[18,6],[19,10],[20,20]]},"line-color":"rgb(251,235,255)"},minzoom:15},{source:"versatiles-shortbread",id:"way-steps",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","steps"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,4],[18,6],[19,10],[20,20]]},"line-color":"rgb(251,235,255)"},minzoom:15},{source:"versatiles-shortbread",id:"way-path",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","path"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,4],[18,6],[19,10],[20,20]]},"line-color":"rgb(251,235,255)"},minzoom:15},{source:"versatiles-shortbread",id:"way-cycleway",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","cycleway"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,4],[18,6],[19,10],[20,20]]},"line-color":"rgb(239,249,255)"},minzoom:15},{source:"versatiles-shortbread",id:"street-track",type:"line","source-layer":"streets",filter:["all",["==","kind","track"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[14,1],[16,3],[18,16],[19,44],[20,88]]},"line-opacity":{stops:[[14,0],[15,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-pedestrian",type:"line","source-layer":"streets",filter:["all",["==","kind","pedestrian"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(251,235,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,0],[14,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-service",type:"line","source-layer":"streets",filter:["all",["==","kind","service"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(247,247,247)","line-width":{stops:[[14,1],[16,2],[18,10],[19,28],[20,40]]},"line-opacity":{stops:[[15,0],[16,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-livingstreet",type:"line","source-layer":"streets",filter:["all",["==","kind","living_street"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-residential",type:"line","source-layer":"streets",filter:["all",["==","kind","residential"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-unclassified",type:"line","source-layer":"streets",filter:["all",["==","kind","unclassified"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-track-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","track"],["==","bicycle","designated"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(255,255,255)"},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-pedestrian-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","pedestrian"],["==","bicycle","designated"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(239,249,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-service-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","service"],["==","bicycle","designated"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(255,255,255)"},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-livingstreet-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","living_street"],["==","bicycle","designated"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(239,249,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-residential-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","residential"],["==","bicycle","designated"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(239,249,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-unclassified-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","unclassified"],["==","bicycle","designated"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(239,249,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-tertiary-link",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","tertiary"],["==","link",!0]],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-secondary-link",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","secondary"],["==","link",!0]],paint:{"line-color":"rgb(255,238,170)","line-width":{stops:[[12,1],[14,2],[16,5],[18,12],[20,38]]}},layout:{"line-join":"round","line-cap":"round"},minzoom:13},{source:"versatiles-shortbread",id:"street-primary-link",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","primary"],["==","link",!0]],paint:{"line-color":"rgb(255,238,170)","line-width":{stops:[[12,1],[14,2],[16,5],[18,12],[20,38]]}},layout:{"line-join":"round","line-cap":"round"},minzoom:13},{source:"versatiles-shortbread",id:"street-trunk-link",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","trunk"],["==","link",!0]],paint:{"line-color":"rgb(255,238,170)","line-width":{stops:[[12,1],[14,2],[16,5],[18,12],[20,38]]}},layout:{"line-join":"round","line-cap":"round"},minzoom:13},{source:"versatiles-shortbread",id:"street-motorway-link",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","motorway"],["==","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[12,1],[14,2],[16,5],[18,12],[20,38]]}},layout:{"line-join":"round","line-cap":"round"},minzoom:12},{source:"versatiles-shortbread",id:"street-tertiary",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","tertiary"],["!=","link",!0]],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-secondary",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","secondary"],["!=","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[7,0],[8,0],[10,3],[14,3],[16,10],[18,34],[19,78],[20,158]]},"line-opacity":{stops:[[5,0],[6,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-primary",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","primary"],["!=","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[8,0],[9,2],[10,3],[14,5],[16,10],[18,34],[19,70],[20,140]]},"line-opacity":{stops:[[8,0],[9,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-trunk",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","trunk"],["!=","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[7,0],[8,1],[10,3],[14,5],[16,10],[18,34],[19,70],[20,140]]},"line-opacity":{stops:[[7,0],[8,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-motorway",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","motorway"],["!=","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[7,0],[8,0],[10,3],[14,3],[16,10],[18,34],[19,78],[20,158]]},"line-opacity":{stops:[[5,0],[6,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"transport-tram:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","tram"],["!has","service"],["!=","bridge",!0],["!=","tunnel",!0]],minzoom:15,paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[15,0],[16,5],[18,7],[20,20]]},"line-dasharray":[.1,.5]}},{source:"versatiles-shortbread",id:"transport-narrowgauge:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","narrow_gauge"],["!has","service"],["!=","bridge",!0],["!=","tunnel",!0]],minzoom:15,paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[15,0],[16,5],[18,7],[20,20]]},"line-dasharray":[.1,.5]}},{source:"versatiles-shortbread",id:"transport-subway:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","subway"],["!has","service"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(166,184,199)","line-width":{stops:[[11,0],[12,1],[15,3],[16,3],[18,6],[19,8],[20,10]]},"line-opacity":{stops:[[11,0],[12,1]]}}},{source:"versatiles-shortbread",id:"transport-lightrail:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","light_rail"],["!has","service"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[8,1],[13,1],[15,1],[20,14]]},"line-opacity":{stops:[[11,0],[12,1]]}},minzoom:8},{source:"versatiles-shortbread",id:"transport-lightrail-service:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","light_rail"],["has","service"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[14,0],[15,1],[16,1],[20,14]]}},minzoom:14},{source:"versatiles-shortbread",id:"transport-rail:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","rail"],["!has","service"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[8,1],[13,1],[15,1],[20,14]]},"line-opacity":{stops:[[8,0],[9,1]]}},minzoom:8},{source:"versatiles-shortbread",id:"transport-rail-service:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","rail"],["has","service"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[14,0],[15,1],[16,1],[20,14]]}},minzoom:14},{source:"versatiles-shortbread",id:"transport-monorail:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","monorail"],["!=","bridge",!0],["!=","tunnel",!0]],minzoom:15,paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[15,0],[16,5],[18,7],[20,20]]},"line-dasharray":[.1,.5]}},{source:"versatiles-shortbread",id:"transport-funicular:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","funicular"],["!=","bridge",!0],["!=","tunnel",!0]],minzoom:15,paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[15,0],[16,5],[18,7],[20,20]]},"line-dasharray":[.1,.5]}},{source:"versatiles-shortbread",id:"transport-tram",type:"line","source-layer":"streets",filter:["all",["in","kind","tram"],["!has","service"],["!=","bridge",!0],["!=","tunnel",!0]],minzoom:13,paint:{"line-width":{stops:[[13,0],[16,1],[17,2],[18,3],[20,5]]},"line-color":"rgb(177,187,196)"}},{source:"versatiles-shortbread",id:"transport-narrowgauge",type:"line","source-layer":"streets",filter:["all",["in","kind","narrow_gauge"],["!has","service"],["!=","bridge",!0],["!=","tunnel",!0]],minzoom:13,paint:{"line-width":{stops:[[13,0],[16,1],[17,2],[18,3],[20,5]]},"line-color":"rgb(177,187,196)"}},{source:"versatiles-shortbread",id:"transport-subway",type:"line","source-layer":"streets",filter:["all",["in","kind","subway"],["!has","service"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(188,202,213)","line-width":{stops:[[11,0],[12,1],[15,2],[16,2],[18,5],[19,6],[20,8]]},"line-dasharray":[2,2],"line-opacity":{stops:[[14,0],[15,1]]}}},{source:"versatiles-shortbread",id:"transport-lightrail",type:"line","source-layer":"streets",filter:["all",["in","kind","light_rail"],["!has","service"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(197,204,211)","line-width":{stops:[[14,0],[15,1],[20,10]]},"line-dasharray":[2,2],"line-opacity":{stops:[[14,0],[15,1]]}},minzoom:14},{source:"versatiles-shortbread",id:"transport-lightrail-service",type:"line","source-layer":"streets",filter:["all",["in","kind","light_rail"],["has","service"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(197,204,211)","line-width":{stops:[[15,0],[16,1],[20,10]]},"line-dasharray":[2,2]},minzoom:15},{source:"versatiles-shortbread",id:"transport-rail",type:"line","source-layer":"streets",filter:["all",["in","kind","rail"],["!has","service"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(197,204,211)","line-width":{stops:[[14,0],[15,1],[20,10]]},"line-dasharray":[2,2],"line-opacity":{stops:[[14,0],[15,1]]}},minzoom:14},{source:"versatiles-shortbread",id:"transport-rail-service",type:"line","source-layer":"streets",filter:["all",["in","kind","rail"],["has","service"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(197,204,211)","line-width":{stops:[[15,0],[16,1],[20,10]]},"line-dasharray":[2,2]},minzoom:15},{source:"versatiles-shortbread",id:"transport-monorail",type:"line","source-layer":"streets",filter:["all",["in","kind","monorail"],["!=","bridge",!0],["!=","tunnel",!0]],minzoom:13,paint:{"line-width":{stops:[[13,0],[16,1],[17,2],[18,3],[20,5]]},"line-color":"rgb(177,187,196)"}},{source:"versatiles-shortbread",id:"transport-funicular",type:"line","source-layer":"streets",filter:["all",["in","kind","funicular"],["!=","bridge",!0],["!=","tunnel",!0]],minzoom:13,paint:{"line-width":{stops:[[13,0],[16,1],[17,2],[18,3],[20,5]]},"line-color":"rgb(177,187,196)"}},{source:"versatiles-shortbread",id:"transport-ferry",type:"line","source-layer":"ferries",minzoom:10,paint:{"line-color":"rgb(171,199,219)","line-width":{stops:[[10,1],[13,2],[14,3],[16,4],[17,6]]},"line-opacity":{stops:[[10,0],[11,1]]},"line-dasharray":[1,1]}},{source:"versatiles-shortbread",id:"bridge-way-footway:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","footway"]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":.5,"line-width":{stops:[[15,0],[16,7],[18,10],[19,17],[20,31]]}},minzoom:15},{source:"versatiles-shortbread",id:"bridge-way-steps:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","steps"]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":.5,"line-width":{stops:[[15,0],[16,7],[18,10],[19,17],[20,31]]}},minzoom:15},{source:"versatiles-shortbread",id:"bridge-way-path:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","path"]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":.5,"line-width":{stops:[[15,0],[16,7],[18,10],[19,17],[20,31]]}},minzoom:15},{source:"versatiles-shortbread",id:"bridge-way-cycleway:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","cycleway"]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":.5,"line-width":{stops:[[15,0],[16,7],[18,10],[19,17],[20,31]]}},minzoom:15},{source:"versatiles-shortbread",id:"bridge-street-track:bridge",type:"line","source-layer":"streets",filter:["all",["==","kind","track"],["==","bridge",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":{stops:[[14,0],[15,1]]},"line-width":{stops:[[14,3],[16,6],[18,25],[19,67],[20,134]]}}},{source:"versatiles-shortbread",id:"bridge-street-pedestrian:bridge",type:"line","source-layer":"streets",filter:["all",["==","kind","pedestrian"],["==","bridge",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":{stops:[[12,0],[13,1]]},"line-width":{stops:[[12,3],[14,4],[16,8],[18,36],[19,90],[20,179]]}}},{source:"versatiles-shortbread",id:"bridge-street-service:bridge",type:"line","source-layer":"streets",filter:["all",["==","kind","service"],["==","bridge",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":{stops:[[14,0],[15,1]]},"line-width":{stops:[[14,3],[16,6],[18,25],[19,67],[20,134]]}}},{source:"versatiles-shortbread",id:"bridge-street-livingstreet:bridge",type:"line","source-layer":"streets",filter:["all",["==","kind","living_street"],["==","bridge",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":{stops:[[12,0],[13,1]]},"line-width":{stops:[[12,3],[14,4],[16,8],[18,36],[19,90],[20,179]]}}},{source:"versatiles-shortbread",id:"bridge-street-residential:bridge",type:"line","source-layer":"streets",filter:["all",["==","kind","residential"],["==","bridge",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":{stops:[[12,0],[13,1]]},"line-width":{stops:[[12,3],[14,4],[16,8],[18,36],[19,90],[20,179]]}}},{source:"versatiles-shortbread",id:"bridge-street-unclassified:bridge",type:"line","source-layer":"streets",filter:["all",["==","kind","unclassified"],["==","bridge",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":{stops:[[12,0],[13,1]]},"line-width":{stops:[[12,3],[14,4],[16,8],[18,36],[19,90],[20,179]]}}},{source:"versatiles-shortbread",id:"bridge-street-tertiary-link:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","tertiary"],["==","link",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":{stops:[[12,0],[13,1]]},"line-width":{stops:[[12,3],[14,4],[16,8],[18,36],[19,90],[20,179]]}}},{source:"versatiles-shortbread",id:"bridge-street-secondary-link:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","secondary"],["==","link",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":.5,"line-width":{stops:[[12,3],[14,4],[16,10],[18,20],[20,56]]}},minzoom:13},{source:"versatiles-shortbread",id:"bridge-street-primary-link:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","primary"],["==","link",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":.5,"line-width":{stops:[[12,3],[14,4],[16,10],[18,20],[20,56]]}},minzoom:13},{source:"versatiles-shortbread",id:"bridge-street-trunk-link:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","trunk"],["==","link",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":.5,"line-width":{stops:[[12,3],[14,4],[16,10],[18,20],[20,56]]}},minzoom:13},{source:"versatiles-shortbread",id:"bridge-street-motorway-link:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","motorway"],["==","link",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":.5,"line-width":{stops:[[12,3],[14,4],[16,10],[18,20],[20,56]]}},minzoom:12},{source:"versatiles-shortbread",id:"bridge-street-tertiary:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","tertiary"],["!=","link",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":{stops:[[12,0],[13,1]]},"line-width":{stops:[[12,3],[14,4],[16,8],[18,36],[19,90],[20,179]]}}},{source:"versatiles-shortbread",id:"bridge-street-secondary:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","secondary"],["!=","link",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":{stops:[[11,0],[12,1]]},"line-width":{stops:[[11,3],[14,7],[16,11],[18,42],[19,95],[20,193]]}}},{source:"versatiles-shortbread",id:"bridge-street-primary:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","primary"],["!=","link",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":.5,"line-width":{stops:[[8,0],[9,1],[10,6],[14,8],[16,17],[18,50],[19,104],[20,202]]}}},{source:"versatiles-shortbread",id:"bridge-street-trunk:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","trunk"],["!=","link",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":.5,"line-width":{stops:[[7,0],[8,3],[10,6],[14,8],[16,17],[18,50],[19,104],[20,202]]}}},{source:"versatiles-shortbread",id:"bridge-street-motorway:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","motorway"],["!=","link",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":.5,"line-width":{stops:[[5,0],[6,3],[10,7],[14,7],[16,20],[18,53],[19,118],[20,235]]}}},{source:"versatiles-shortbread",id:"bridge-street-pedestrian-zone",type:"fill","source-layer":"street_polygons",filter:["all",["==","bridge",!0],["==","kind","pedestrian"]],paint:{"fill-color":"rgb(255,255,255)","fill-opacity":{stops:[[12,0],[13,1]]}}},{source:"versatiles-shortbread",id:"bridge-way-footway:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","footway"]],layout:{"line-cap":"butt"},paint:{"line-width":{stops:[[15,0],[16,5],[18,7],[19,12],[20,22]]},"line-color":"rgb(226,212,230)"},minzoom:15},{source:"versatiles-shortbread",id:"bridge-way-steps:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","steps"]],layout:{"line-cap":"butt"},paint:{"line-width":{stops:[[15,0],[16,5],[18,7],[19,12],[20,22]]},"line-color":"rgb(226,212,230)"},minzoom:15},{source:"versatiles-shortbread",id:"bridge-way-path:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","path"]],layout:{"line-cap":"butt"},paint:{"line-width":{stops:[[15,0],[16,5],[18,7],[19,12],[20,22]]},"line-color":"rgb(226,212,230)"},minzoom:15},{source:"versatiles-shortbread",id:"bridge-way-cycleway:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","cycleway"]],layout:{"line-cap":"butt"},paint:{"line-width":{stops:[[15,0],[16,5],[18,7],[19,12],[20,22]]},"line-color":"rgb(215,224,230)"},minzoom:15},{source:"versatiles-shortbread",id:"bridge-street-track:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","track"],["==","bridge",!0]],paint:{"line-color":"rgb(217,217,217)","line-width":{stops:[[14,2],[16,4],[18,18],[19,48],[20,96]]},"line-opacity":{stops:[[14,0],[15,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-pedestrian:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","pedestrian"],["==","bridge",!0]],paint:{"line-color":"rgb(217,217,217)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-service:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","service"],["==","bridge",!0]],paint:{"line-color":"rgb(221,220,218)","line-width":{stops:[[14,1],[16,3],[18,12],[19,32],[20,48]]},"line-opacity":{stops:[[15,0],[16,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-livingstreet:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","living_street"],["==","bridge",!0]],paint:{"line-color":"rgb(217,217,217)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-residential:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","residential"],["==","bridge",!0]],paint:{"line-color":"rgb(217,217,217)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-unclassified:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","unclassified"],["==","bridge",!0]],paint:{"line-color":"rgb(217,217,217)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-tertiary-link:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","tertiary"],["==","link",!0]],paint:{"line-color":"rgb(217,217,217)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-secondary-link:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","secondary"],["==","link",!0]],paint:{"line-color":"rgb(233,172,119)","line-width":{stops:[[12,2],[14,3],[16,7],[18,14],[20,40]]}},layout:{"line-join":"round","line-cap":"butt"},minzoom:13},{source:"versatiles-shortbread",id:"bridge-street-primary-link:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","primary"],["==","link",!0]],paint:{"line-color":"rgb(233,172,119)","line-width":{stops:[[12,2],[14,3],[16,7],[18,14],[20,40]]}},layout:{"line-join":"round","line-cap":"butt"},minzoom:13},{source:"versatiles-shortbread",id:"bridge-street-trunk-link:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","trunk"],["==","link",!0]],paint:{"line-color":"rgb(233,172,119)","line-width":{stops:[[12,2],[14,3],[16,7],[18,14],[20,40]]}},layout:{"line-join":"round","line-cap":"butt"},minzoom:13},{source:"versatiles-shortbread",id:"bridge-street-motorway-link:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","motorway"],["==","link",!0]],paint:{"line-color":"rgb(233,172,119)","line-width":{stops:[[12,2],[14,3],[16,7],[18,14],[20,40]]}},layout:{"line-join":"round","line-cap":"butt"},minzoom:12},{source:"versatiles-shortbread",id:"bridge-street-tertiary:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","tertiary"],["!=","link",!0]],paint:{"line-color":"rgb(217,217,217)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-secondary:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","secondary"],["!=","link",!0]],paint:{"line-color":"rgb(233,172,119)","line-width":{stops:[[11,2],[14,5],[16,8],[18,30],[19,68],[20,138]]},"line-opacity":{stops:[[11,0],[12,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-primary:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","primary"],["!=","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[8,0],[9,1],[10,4],[14,6],[16,12],[18,36],[19,74],[20,144]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-trunk:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","trunk"],["!=","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[7,0],[8,2],[10,4],[14,6],[16,12],[18,36],[19,74],[20,144]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-motorway:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","motorway"],["!=","link",!0]],paint:{"line-color":"rgb(233,172,119)","line-width":{stops:[[5,0],[6,2],[10,5],[14,5],[16,14],[18,38],[19,84],[20,168]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-way-footway",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","footway"]],layout:{"line-cap":"butt"},paint:{"line-width":{stops:[[15,0],[16,4],[18,6],[19,10],[20,20]]},"line-color":"rgb(251,235,255)"},minzoom:15},{source:"versatiles-shortbread",id:"bridge-way-steps",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","steps"]],layout:{"line-cap":"butt"},paint:{"line-width":{stops:[[15,0],[16,4],[18,6],[19,10],[20,20]]},"line-color":"rgb(251,235,255)"},minzoom:15},{source:"versatiles-shortbread",id:"bridge-way-path",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","path"]],layout:{"line-cap":"butt"},paint:{"line-width":{stops:[[15,0],[16,4],[18,6],[19,10],[20,20]]},"line-color":"rgb(251,235,255)"},minzoom:15},{source:"versatiles-shortbread",id:"bridge-way-cycleway",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","cycleway"]],layout:{"line-cap":"butt"},paint:{"line-width":{stops:[[15,0],[16,4],[18,6],[19,10],[20,20]]},"line-color":"rgb(239,249,255)"},minzoom:15},{source:"versatiles-shortbread",id:"bridge-street-track",type:"line","source-layer":"streets",filter:["all",["==","kind","track"],["==","bridge",!0]],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[14,1],[16,3],[18,16],[19,44],[20,88]]},"line-opacity":{stops:[[14,0],[15,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-pedestrian",type:"line","source-layer":"streets",filter:["all",["==","kind","pedestrian"],["==","bridge",!0]],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-service",type:"line","source-layer":"streets",filter:["all",["==","kind","service"],["==","bridge",!0]],paint:{"line-color":"rgb(247,247,247)","line-width":{stops:[[14,1],[16,2],[18,10],[19,28],[20,40]]},"line-opacity":{stops:[[15,0],[16,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-livingstreet",type:"line","source-layer":"streets",filter:["all",["==","kind","living_street"],["==","bridge",!0]],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-residential",type:"line","source-layer":"streets",filter:["all",["==","kind","residential"],["==","bridge",!0]],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-unclassified",type:"line","source-layer":"streets",filter:["all",["==","kind","unclassified"],["==","bridge",!0]],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-track-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","track"],["==","bicycle","designated"],["==","bridge",!0]],paint:{"line-color":"rgb(255,255,255)"},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-pedestrian-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","pedestrian"],["==","bicycle","designated"],["==","bridge",!0]],paint:{"line-color":"rgb(239,249,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"bridge-street-service-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","service"],["==","bicycle","designated"],["==","bridge",!0]],paint:{"line-color":"rgb(255,255,255)"},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-livingstreet-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","living_street"],["==","bicycle","designated"],["==","bridge",!0]],paint:{"line-color":"rgb(239,249,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"bridge-street-residential-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","residential"],["==","bicycle","designated"],["==","bridge",!0]],paint:{"line-color":"rgb(239,249,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"bridge-street-unclassified-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","unclassified"],["==","bicycle","designated"],["==","bridge",!0]],paint:{"line-color":"rgb(239,249,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"bridge-street-tertiary-link",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","tertiary"],["==","link",!0]],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-secondary-link",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","secondary"],["==","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[12,1],[14,2],[16,5],[18,12],[20,38]]}},layout:{"line-join":"round","line-cap":"butt"},minzoom:13},{source:"versatiles-shortbread",id:"bridge-street-primary-link",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","primary"],["==","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[12,1],[14,2],[16,5],[18,12],[20,38]]}},layout:{"line-join":"round","line-cap":"butt"},minzoom:13},{source:"versatiles-shortbread",id:"bridge-street-trunk-link",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","trunk"],["==","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[12,1],[14,2],[16,5],[18,12],[20,38]]}},layout:{"line-join":"round","line-cap":"butt"},minzoom:13},{source:"versatiles-shortbread",id:"bridge-street-motorway-link",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","motorway"],["==","link",!0]],paint:{"line-color":"rgb(215,215,215)","line-width":{stops:[[12,1],[14,2],[16,5],[18,12],[20,38]]}},layout:{"line-join":"round","line-cap":"butt"},minzoom:12},{source:"versatiles-shortbread",id:"bridge-street-tertiary",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","tertiary"],["!=","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-secondary",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","secondary"],["!=","link",!0]],paint:{"line-color":"rgb(215,215,215)","line-width":{stops:[[11,1],[14,4],[16,6],[18,28],[19,64],[20,130]]},"line-opacity":{stops:[[11,0],[12,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-primary",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","primary"],["!=","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[8,0],[9,2],[10,3],[14,5],[16,10],[18,34],[19,70],[20,140]]},"line-opacity":{stops:[[8,0],[9,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-trunk",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","trunk"],["!=","link",!0]],paint:{"line-color":"rgb(215,215,215)","line-width":{stops:[[7,0],[8,1],[10,3],[14,5],[16,10],[18,34],[19,70],[20,140]]},"line-opacity":{stops:[[7,0],[8,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-motorway",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","motorway"],["!=","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[7,0],[8,0],[10,3],[14,3],[16,10],[18,34],[19,78],[20,158]]},"line-opacity":{stops:[[5,0],[6,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-transport-tram:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","tram"],["!has","service"],["==","bridge",!0]],minzoom:15,paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[15,0],[16,5],[18,7],[20,20]]},"line-dasharray":[.1,.5]}},{source:"versatiles-shortbread",id:"bridge-transport-narrowgauge:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","narrow_gauge"],["!has","service"],["==","bridge",!0]],minzoom:15,paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[15,0],[16,5],[18,7],[20,20]]},"line-dasharray":[.1,.5]}},{source:"versatiles-shortbread",id:"bridge-transport-subway:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","subway"],["!has","service"],["==","bridge",!0]],paint:{"line-color":"rgb(166,184,199)","line-width":{stops:[[11,0],[12,1],[15,3],[16,3],[18,6],[19,8],[20,10]]},"line-opacity":{stops:[[11,0],[12,1]]}}},{source:"versatiles-shortbread",id:"bridge-transport-lightrail:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","light_rail"],["!has","service"],["==","bridge",!0]],paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[8,1],[13,1],[15,1],[20,14]]},"line-opacity":{stops:[[11,0],[12,1]]}},minzoom:8},{source:"versatiles-shortbread",id:"bridge-transport-lightrail-service:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","light_rail"],["has","service"],["==","bridge",!0]],paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[14,0],[15,1],[16,1],[20,14]]}},minzoom:14},{source:"versatiles-shortbread",id:"bridge-transport-rail:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","rail"],["!has","service"],["==","bridge",!0]],paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[8,1],[13,1],[15,1],[20,14]]},"line-opacity":{stops:[[8,0],[9,1]]}},minzoom:8},{source:"versatiles-shortbread",id:"bridge-transport-rail-service:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","rail"],["has","service"],["==","bridge",!0]],paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[14,0],[15,1],[16,1],[20,14]]}},minzoom:14},{source:"versatiles-shortbread",id:"bridge-transport-monorail:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","monorail"],["==","bridge",!0]],minzoom:15,paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[15,0],[16,5],[18,7],[20,20]]},"line-dasharray":[.1,.5]}},{source:"versatiles-shortbread",id:"bridge-transport-funicular:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","funicular"],["==","bridge",!0]],minzoom:15,paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[15,0],[16,5],[18,7],[20,20]]},"line-dasharray":[.1,.5]}},{source:"versatiles-shortbread",id:"bridge-transport-tram",type:"line","source-layer":"streets",filter:["all",["in","kind","tram"],["!has","service"],["==","bridge",!0]],minzoom:13,paint:{"line-width":{stops:[[13,0],[16,1],[17,2],[18,3],[20,5]]},"line-color":"rgb(177,187,196)"}},{source:"versatiles-shortbread",id:"bridge-transport-narrowgauge",type:"line","source-layer":"streets",filter:["all",["in","kind","narrow_gauge"],["!has","service"],["==","bridge",!0]],minzoom:13,paint:{"line-width":{stops:[[13,0],[16,1],[17,2],[18,3],[20,5]]},"line-color":"rgb(177,187,196)"}},{source:"versatiles-shortbread",id:"bridge-transport-subway",type:"line","source-layer":"streets",filter:["all",["in","kind","subway"],["!has","service"],["==","bridge",!0]],paint:{"line-color":"rgb(188,202,213)","line-width":{stops:[[11,0],[12,1],[15,2],[16,2],[18,5],[19,6],[20,8]]},"line-dasharray":[2,2],"line-opacity":{stops:[[14,0],[15,1]]}}},{source:"versatiles-shortbread",id:"bridge-transport-lightrail",type:"line","source-layer":"streets",filter:["all",["in","kind","light_rail"],["!has","service"],["==","bridge",!0]],paint:{"line-color":"rgb(197,204,211)","line-width":{stops:[[14,0],[15,1],[20,10]]},"line-dasharray":[2,2],"line-opacity":{stops:[[14,0],[15,1]]}},minzoom:14},{source:"versatiles-shortbread",id:"bridge-transport-lightrail-service",type:"line","source-layer":"streets",filter:["all",["in","kind","light_rail"],["has","service"],["==","bridge",!0]],paint:{"line-color":"rgb(197,204,211)","line-width":{stops:[[15,0],[16,1],[20,10]]},"line-dasharray":[2,2]},minzoom:15},{source:"versatiles-shortbread",id:"bridge-transport-rail",type:"line","source-layer":"streets",filter:["all",["in","kind","rail"],["!has","service"],["==","bridge",!0]],paint:{"line-color":"rgb(197,204,211)","line-width":{stops:[[14,0],[15,1],[20,10]]},"line-dasharray":[2,2],"line-opacity":{stops:[[14,0],[15,1]]}},minzoom:14},{source:"versatiles-shortbread",id:"bridge-transport-rail-service",type:"line","source-layer":"streets",filter:["all",["in","kind","rail"],["has","service"],["==","bridge",!0]],paint:{"line-color":"rgb(197,204,211)","line-width":{stops:[[15,0],[16,1],[20,10]]},"line-dasharray":[2,2]},minzoom:15},{source:"versatiles-shortbread",id:"bridge-transport-monorail",type:"line","source-layer":"streets",filter:["all",["in","kind","monorail"],["==","bridge",!0]],minzoom:13,paint:{"line-width":{stops:[[13,0],[16,1],[17,2],[18,3],[20,5]]},"line-color":"rgb(177,187,196)"}},{source:"versatiles-shortbread",id:"bridge-transport-funicular",type:"line","source-layer":"streets",filter:["all",["in","kind","funicular"],["==","bridge",!0]],minzoom:13,paint:{"line-width":{stops:[[13,0],[16,1],[17,2],[18,3],[20,5]]},"line-color":"rgb(177,187,196)"}},{source:"versatiles-shortbread",id:"poi-amenity",type:"symbol","source-layer":"pois",filter:["to-boolean",["get","amenity"]],minzoom:16,layout:{"icon-size":{stops:[[16,.5],[19,.5],[20,1]]},"symbol-placement":"point","icon-optional":!0,"text-font":["noto_sans_regular"],"icon-image":["match",["get","amenity"],"arts_centre","basics:icon-art_gallery","atm","basics:icon-atm","bank","basics:icon-bank","bar","basics:icon-bar","bench","basics:icon-bench","bicycle_rental","basics:icon-bicycle_share","biergarten","basics:icon-beergarden","cafe","basics:icon-cafe","car_rental","basics:icon-car_rental","car_sharing","basics:icon-car_rental","car_wash","basics:icon-car_wash","cinema","basics:icon-cinema","college","basics:icon-college","community_centre","basics:icon-community","dentist","basics:icon-dentist","doctors","basics:icon-doctor","dog_park","basics:icon-dog_park","drinking_water","basics:icon-drinking_water","embassy","basics:icon-embassy","fast_food","basics:icon-fast_food","fire_station","basics:icon-fire_station","fountain","basics:icon-fountain","grave_yard","basics:icon-cemetery","hospital","basics:icon-hospital","hunting_stand","basics:icon-huntingstand","library","basics:icon-library","marketplace","basics:icon-marketplace","nightclub","basics:icon-nightclub","nursing_home","basics:icon-nursinghome","pharmacy","basics:icon-pharmacy","place_of_worship","basics:icon-place_of_worship","playground","basics:icon-playground","police","basics:icon-police","post_box","basics:icon-postbox","post_office","basics:icon-post","prison","basics:icon-prison","pub","basics:icon-beer","recycling","basics:icon-recycling","restaurant","basics:icon-restaurant","school","basics:icon-school","shelter","basics:icon-shelter","telephone","basics:icon-telephone","theatre","basics:icon-theatre","toilets","basics:icon-toilet","townhall","basics:icon-town_hall","vending_machine","basics:icon-vendingmachine","veterinary","basics:icon-veterinary","waste_basket","basics:icon-waste_basket",""],visibility:"none"},paint:{"icon-opacity":{stops:[[16,0],[17,.4]]},"text-opacity":{stops:[[16,0],[17,.4]]},"icon-color":"rgb(85,85,85)","text-color":"rgb(85,85,85)"}},{source:"versatiles-shortbread",id:"poi-leisure",type:"symbol","source-layer":"pois",filter:["to-boolean",["get","leisure"]],minzoom:16,layout:{"icon-size":{stops:[[16,.5],[19,.5],[20,1]]},"symbol-placement":"point","icon-optional":!0,"text-font":["noto_sans_regular"],"icon-image":["match",["get","leisure"],"golf_course","basics:icon-golf","ice_rink","basics:icon-icerink","pitch","basics:icon-pitch","stadium","basics:icon-stadium","swimming_pool","basics:icon-swimming","water_park","basics:icon-waterpark","basics:icon-sports"],visibility:"none"},paint:{"icon-opacity":{stops:[[16,0],[17,.4]]},"text-opacity":{stops:[[16,0],[17,.4]]},"icon-color":"rgb(85,85,85)","text-color":"rgb(85,85,85)"}},{source:"versatiles-shortbread",id:"poi-tourism",type:"symbol","source-layer":"pois",filter:["to-boolean",["get","tourism"]],minzoom:16,layout:{"icon-size":{stops:[[16,.5],[19,.5],[20,1]]},"symbol-placement":"point","icon-optional":!0,"text-font":["noto_sans_regular"],"icon-image":["match",["get","tourism"],"chalet","basics:icon-chalet","information","basics:transport-information","picnic_site","basics:icon-picnic_site","viewpoint","basics:icon-viewpoint","zoo","basics:icon-zoo",""],visibility:"none"},paint:{"icon-opacity":{stops:[[16,0],[17,.4]]},"text-opacity":{stops:[[16,0],[17,.4]]},"icon-color":"rgb(85,85,85)","text-color":"rgb(85,85,85)"}},{source:"versatiles-shortbread",id:"poi-shop",type:"symbol","source-layer":"pois",filter:["to-boolean",["get","shop"]],minzoom:16,layout:{"icon-size":{stops:[[16,.5],[19,.5],[20,1]]},"symbol-placement":"point","icon-optional":!0,"text-font":["noto_sans_regular"],"icon-image":["match",["get","shop"],"alcohol","basics:icon-alcohol_shop","bakery","basics:icon-bakery","beauty","basics:icon-beauty","beverages","basics:icon-beverages","books","basics:icon-books","butcher","basics:icon-butcher","chemist","basics:icon-chemist","clothes","basics:icon-clothes","doityourself","basics:icon-doityourself","dry_cleaning","basics:icon-drycleaning","florist","basics:icon-florist","furniture","basics:icon-furniture","garden_centre","basics:icon-garden_centre","general","basics:icon-shop","gift","basics:icon-gift","greengrocer","basics:icon-greengrocer","hairdresser","basics:icon-hairdresser","hardware","basics:icon-hardware","jewelry","basics:icon-jewelry_store","kiosk","basics:icon-kiosk","laundry","basics:icon-laundry","newsagent","basics:icon-newsagent","optican","basics:icon-optician","outdoor","basics:icon-outdoor","shoes","basics:icon-shoes","sports","basics:icon-sports","stationery","basics:icon-stationery","toys","basics:icon-toys","travel_agency","basics:icon-travel_agent","video","basics:icon-video","basics:icon-shop"],visibility:"none"},paint:{"icon-opacity":{stops:[[16,0],[17,.4]]},"text-opacity":{stops:[[16,0],[17,.4]]},"icon-color":"rgb(85,85,85)","text-color":"rgb(85,85,85)"}},{source:"versatiles-shortbread",id:"poi-man_made",type:"symbol","source-layer":"pois",filter:["to-boolean",["get","man_made"]],minzoom:16,layout:{"icon-size":{stops:[[16,.5],[19,.5],[20,1]]},"symbol-placement":"point","icon-optional":!0,"text-font":["noto_sans_regular"],"icon-image":["match",["get","man_made"],"lighthouse","basics:icon-lighthouse","surveillance","basics:icon-surveillance","tower","basics:icon-observation_tower","watermill","basics:icon-watermill","windmill","basics:icon-windmill",""],visibility:"none"},paint:{"icon-opacity":{stops:[[16,0],[17,.4]]},"text-opacity":{stops:[[16,0],[17,.4]]},"icon-color":"rgb(85,85,85)","text-color":"rgb(85,85,85)"}},{source:"versatiles-shortbread",id:"poi-historic",type:"symbol","source-layer":"pois",filter:["to-boolean",["get","historic"]],minzoom:16,layout:{"icon-size":{stops:[[16,.5],[19,.5],[20,1]]},"symbol-placement":"point","icon-optional":!0,"text-font":["noto_sans_regular"],"icon-image":["match",["get","historic"],"artwork","basics:icon-artwork","castle","basics:icon-castle","monument","basics:icon-monument","wayside_shrine","basics:icon-shrine","basics:icon-historic"],visibility:"none"},paint:{"icon-opacity":{stops:[[16,0],[17,.4]]},"text-opacity":{stops:[[16,0],[17,.4]]},"icon-color":"rgb(85,85,85)","text-color":"rgb(85,85,85)"}},{source:"versatiles-shortbread",id:"poi-emergency",type:"symbol","source-layer":"pois",filter:["to-boolean",["get","emergency"]],minzoom:16,layout:{"icon-size":{stops:[[16,.5],[19,.5],[20,1]]},"symbol-placement":"point","icon-optional":!0,"text-font":["noto_sans_regular"],"icon-image":["match",["get","emergency"],"defibrillator","basics:icon-defibrillator","fire_hydrant","basics:icon-hydrant","phone","basics:icon-emergency_phone",""],visibility:"none"},paint:{"icon-opacity":{stops:[[16,0],[17,.4]]},"text-opacity":{stops:[[16,0],[17,.4]]},"icon-color":"rgb(85,85,85)","text-color":"rgb(85,85,85)"}},{source:"versatiles-shortbread",id:"poi-highway",type:"symbol","source-layer":"pois",filter:["to-boolean",["get","highway"]],minzoom:16,layout:{"icon-size":{stops:[[16,.5],[19,.5],[20,1]]},"symbol-placement":"point","icon-optional":!0,"text-font":["noto_sans_regular"],visibility:"none"},paint:{"icon-opacity":{stops:[[16,0],[17,.4]]},"text-opacity":{stops:[[16,0],[17,.4]]},"icon-color":"rgb(85,85,85)","text-color":"rgb(85,85,85)"}},{source:"versatiles-shortbread",id:"poi-office",type:"symbol","source-layer":"pois",filter:["to-boolean",["get","office"]],minzoom:16,layout:{"icon-size":{stops:[[16,.5],[19,.5],[20,1]]},"symbol-placement":"point","icon-optional":!0,"text-font":["noto_sans_regular"],visibility:"none"},paint:{"icon-opacity":{stops:[[16,0],[17,.4]]},"text-opacity":{stops:[[16,0],[17,.4]]},"icon-color":"rgb(85,85,85)","text-color":"rgb(85,85,85)"}},{source:"versatiles-shortbread",id:"boundary-country:outline",type:"line","source-layer":"boundaries",filter:["all",["==","admin_level",2],["!=","maritime",!0],["!=","disputed",!0],["!=","coastline",!0]],paint:{"line-color":"rgb(249,245,239)","line-blur":2,"line-width":{stops:[[2,0],[3,2],[10,8]]},"line-opacity":.75},layout:{"line-cap":"round","line-join":"round"}},{source:"versatiles-shortbread",id:"boundary-country-disputed:outline",type:"line","source-layer":"boundaries",filter:["all",["==","admin_level",2],["==","disputed",!0],["!=","maritime",!0],["!=","coastline",!0]],paint:{"line-width":{stops:[[2,0],[3,2],[10,8]]},"line-opacity":.75,"line-color":"rgb(249,245,239)"}},{source:"versatiles-shortbread",id:"boundary-country",type:"line","source-layer":"boundaries",filter:["all",["==","admin_level",2],["!=","maritime",!0],["!=","disputed",!0],["!=","coastline",!0]],paint:{"line-color":"rgb(100,100,100)","line-width":{stops:[[2,0],[3,1],[10,4]]}},layout:{"line-cap":"round","line-join":"round"}},{source:"versatiles-shortbread",id:"boundary-country-disputed",type:"line","source-layer":"boundaries",filter:["all",["==","admin_level",2],["==","disputed",!0],["!=","maritime",!0],["!=","coastline",!0]],paint:{"line-width":{stops:[[2,0],[3,1],[10,4]]},"line-color":"rgb(150,150,150)","line-dasharray":[2,1]},layout:{"line-cap":"square"}},{source:"versatiles-shortbread",id:"label-address-housenumber",type:"symbol","source-layer":"addresses",filter:["has","housenumber"],layout:{"text-field":"{housenumber}","text-font":["noto_sans_regular"],"symbol-placement":"point","text-anchor":"center","text-size":{stops:[[17,8],[19,10]]},visibility:"none"},paint:{"text-halo-color":"rgb(243,235,227)","text-halo-width":2,"text-halo-blur":1,"icon-color":"rgb(169,164,158)","text-color":"rgb(169,164,158)"},minzoom:17},{source:"versatiles-shortbread",id:"label-motorway-shield",type:"symbol","source-layer":"street_labels",filter:["==","kind","motorway"],layout:{"text-field":"{ref}","text-font":["noto_sans_bold"],"symbol-placement":"line","text-anchor":"center","text-size":{stops:[[14,10],[18,12],[20,16]]}},paint:{"icon-color":"rgb(255,255,255)","text-color":"rgb(255,255,255)","text-halo-color":"rgb(255,204,136)","text-halo-width":.1,"text-halo-blur":1},minzoom:14},{source:"versatiles-shortbread",id:"label-street-pedestrian",type:"symbol","source-layer":"street_labels",filter:["==","kind","pedestrian"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"symbol-placement":"line","text-anchor":"center","text-size":{stops:[[12,10],[15,13]]}},paint:{"icon-color":"rgb(51,51,68)","text-color":"rgb(51,51,68)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:14},{source:"versatiles-shortbread",id:"label-street-livingstreet",type:"symbol","source-layer":"street_labels",filter:["==","kind","living_street"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"symbol-placement":"line","text-anchor":"center","text-size":{stops:[[12,10],[15,13]]}},paint:{"icon-color":"rgb(51,51,68)","text-color":"rgb(51,51,68)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:14},{source:"versatiles-shortbread",id:"label-street-residential",type:"symbol","source-layer":"street_labels",filter:["==","kind","residential"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"symbol-placement":"line","text-anchor":"center","text-size":{stops:[[12,10],[15,13]]}},paint:{"icon-color":"rgb(51,51,68)","text-color":"rgb(51,51,68)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:14},{source:"versatiles-shortbread",id:"label-street-unclassified",type:"symbol","source-layer":"street_labels",filter:["==","kind","unclassified"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"symbol-placement":"line","text-anchor":"center","text-size":{stops:[[12,10],[15,13]]}},paint:{"icon-color":"rgb(51,51,68)","text-color":"rgb(51,51,68)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:14},{source:"versatiles-shortbread",id:"label-street-tertiary",type:"symbol","source-layer":"street_labels",filter:["==","kind","tertiary"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"symbol-placement":"line","text-anchor":"center","text-size":{stops:[[12,10],[15,13]]}},paint:{"icon-color":"rgb(51,51,68)","text-color":"rgb(51,51,68)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:14},{source:"versatiles-shortbread",id:"label-street-secondary",type:"symbol","source-layer":"street_labels",filter:["==","kind","secondary"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"symbol-placement":"line","text-anchor":"center","text-size":{stops:[[12,10],[15,13]]}},paint:{"icon-color":"rgb(51,51,68)","text-color":"rgb(51,51,68)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:14},{source:"versatiles-shortbread",id:"label-street-primary",type:"symbol","source-layer":"street_labels",filter:["==","kind","primary"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"symbol-placement":"line","text-anchor":"center","text-size":{stops:[[12,10],[15,13]]}},paint:{"icon-color":"rgb(51,51,68)","text-color":"rgb(51,51,68)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:14},{source:"versatiles-shortbread",id:"label-street-trunk",type:"symbol","source-layer":"street_labels",filter:["==","kind","trunk"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"symbol-placement":"line","text-anchor":"center","text-size":{stops:[[12,10],[15,13]]}},paint:{"icon-color":"rgb(51,51,68)","text-color":"rgb(51,51,68)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:14},{source:"versatiles-shortbread",id:"label-place-neighbourhood",type:"symbol","source-layer":"place_labels",filter:["==","kind","neighbourhood"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"text-size":{stops:[[14,12]]},"text-transform":"uppercase"},paint:{"icon-color":"rgb(40,67,73)","text-color":"rgb(40,67,73)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:14},{source:"versatiles-shortbread",id:"label-place-quarter",type:"symbol","source-layer":"place_labels",filter:["==","kind","quarter"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"text-size":{stops:[[13,13]]},"text-transform":"uppercase"},paint:{"icon-color":"rgb(40,62,73)","text-color":"rgb(40,62,73)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:13},{source:"versatiles-shortbread",id:"label-place-suburb",type:"symbol","source-layer":"place_labels",filter:["==","kind","suburb"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"text-size":{stops:[[11,11],[13,14]]},"text-transform":"uppercase"},paint:{"icon-color":"rgb(40,57,73)","text-color":"rgb(40,57,73)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:12},{source:"versatiles-shortbread",id:"label-place-hamlet",type:"symbol","source-layer":"place_labels",filter:["==","kind","hamlet"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"text-size":{stops:[[10,11],[12,14]]}},paint:{"icon-color":"rgb(40,48,73)","text-color":"rgb(40,48,73)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:13},{source:"versatiles-shortbread",id:"label-place-village",type:"symbol","source-layer":"place_labels",filter:["==","kind","village"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"text-size":{stops:[[9,11],[12,14]]}},paint:{"icon-color":"rgb(40,48,73)","text-color":"rgb(40,48,73)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:13},{source:"versatiles-shortbread",id:"label-place-town",type:"symbol","source-layer":"place_labels",filter:["==","kind","town"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"text-size":{stops:[[9,11],[12,14]]}},paint:{"icon-color":"rgb(40,48,73)","text-color":"rgb(40,48,73)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:10},{source:"versatiles-shortbread",id:"label-boundary-state",type:"symbol","source-layer":"boundary_labels",filter:["in","admin_level",4,"4"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"text-transform":"uppercase","text-anchor":"top","text-offset":[0,.2],"text-padding":0,"text-optional":!0,"text-size":{stops:[[7,9],[10,12]]}},paint:{"icon-color":"rgb(61,61,77)","text-color":"rgb(61,61,77)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:7,maxzoom:10},{source:"versatiles-shortbread",id:"label-place-city",type:"symbol","source-layer":"place_labels",filter:["==","kind","city"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"text-size":{stops:[[8,11],[11,14]]}},paint:{"icon-color":"rgb(40,48,73)","text-color":"rgb(40,48,73)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:7},{source:"versatiles-shortbread",id:"label-place-statecapital",type:"symbol","source-layer":"place_labels",filter:["==","kind","state_capital"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"text-size":{stops:[[6,11],[10,15]]}},paint:{"icon-color":"rgb(40,48,73)","text-color":"rgb(40,48,73)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:7},{source:"versatiles-shortbread",id:"label-place-capital",type:"symbol","source-layer":"place_labels",filter:["==","kind","capital"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"text-size":{stops:[[5,12],[10,16]]}},paint:{"icon-color":"rgb(40,48,73)","text-color":"rgb(40,48,73)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:6},{source:"versatiles-shortbread",id:"label-boundary-country-small",type:"symbol","source-layer":"boundary_labels",filter:["all",["in","admin_level",2,"2"],["<=","way_area",1e7]],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"text-transform":"uppercase","text-anchor":"top","text-offset":[0,.2],"text-padding":0,"text-optional":!0,"text-size":{stops:[[4,12],[5,14]]}},paint:{"icon-color":"rgb(51,51,68)","text-color":"rgb(51,51,68)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:4,maxzoom:9},{source:"versatiles-shortbread",id:"label-boundary-country-medium",type:"symbol","source-layer":"boundary_labels",filter:["all",["in","admin_level",2,"2"],["<","way_area",9e7],[">","way_area",1e7]],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"text-transform":"uppercase","text-anchor":"top","text-offset":[0,.2],"text-padding":0,"text-optional":!0,"text-size":{stops:[[3,13],[5,14]]}},paint:{"icon-color":"rgb(51,51,68)","text-color":"rgb(51,51,68)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:3,maxzoom:8},{source:"versatiles-shortbread",id:"label-boundary-country-large",type:"symbol","source-layer":"boundary_labels",filter:["all",["in","admin_level",2,"2"],[">=","way_area",9e7]],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"text-transform":"uppercase","text-anchor":"top","text-offset":[0,.2],"text-padding":0,"text-optional":!0,"text-size":{stops:[[2,14],[5,16]]}},paint:{"icon-color":"rgb(51,51,68)","text-color":"rgb(51,51,68)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:2,maxzoom:7},{source:"versatiles-shortbread",id:"marking-oneway",type:"symbol","source-layer":"streets",filter:["all",["==","oneway",!0],["in","kind","trunk","primary","secondary","tertiary","unclassified","residential","living_street"]],layout:{"symbol-placement":"line","symbol-spacing":175,"icon-rotate":90,"icon-rotation-alignment":"map","icon-padding":5,"symbol-avoid-edges":!0,"icon-image":"basics:marking-arrow",visibility:"none","text-font":["noto_sans_regular"]},minzoom:16,paint:{"icon-opacity":{stops:[[16,0],[17,.4],[20,.4]]},"text-opacity":{stops:[[16,0],[17,.4],[20,.4]]}}},{source:"versatiles-shortbread",id:"marking-oneway-reverse",type:"symbol","source-layer":"streets",filter:["all",["==","oneway_reverse",!0],["in","kind","trunk","primary","secondary","tertiary","unclassified","residential","living_street"]],layout:{"symbol-placement":"line","symbol-spacing":75,"icon-rotate":-90,"icon-rotation-alignment":"map","icon-padding":5,"symbol-avoid-edges":!0,"icon-image":"basics:marking-arrow",visibility:"none","text-font":["noto_sans_regular"]},minzoom:16,paint:{"icon-opacity":{stops:[[16,0],[17,.4],[20,.4]]},"text-opacity":{stops:[[16,0],[17,.4],[20,.4]]}}},{source:"versatiles-shortbread",id:"symbol-transit-bus",type:"symbol","source-layer":"public_transport",filter:["==","kind","bus_stop"],layout:{"text-field":"{name}","icon-size":{stops:[[16,.5],[18,1]]},"symbol-placement":"point","icon-keep-upright":!0,"text-font":["noto_sans_regular"],"text-size":10,"icon-anchor":"bottom","text-anchor":"top","icon-image":"basics:icon-bus",visibility:"none"},paint:{"icon-opacity":.7,"icon-color":"rgb(102,98,106)","text-color":"rgb(102,98,106)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:16},{source:"versatiles-shortbread",id:"symbol-transit-tram",type:"symbol","source-layer":"public_transport",filter:["==","kind","tram_stop"],layout:{"text-field":"{name}","icon-size":{stops:[[15,.5],[17,1]]},"symbol-placement":"point","icon-keep-upright":!0,"text-font":["noto_sans_regular"],"text-size":10,"icon-anchor":"bottom","text-anchor":"top","icon-image":"basics:transport-tram",visibility:"none"},paint:{"icon-opacity":.7,"icon-color":"rgb(102,98,106)","text-color":"rgb(102,98,106)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:15},{source:"versatiles-shortbread",id:"symbol-transit-subway",type:"symbol","source-layer":"public_transport",filter:["all",["in","kind","station","halt"],["==","station","subway"]],layout:{"text-field":"{name}","icon-size":{stops:[[14,.5],[16,1]]},"symbol-placement":"point","icon-keep-upright":!0,"text-font":["noto_sans_regular"],"text-size":10,"icon-anchor":"bottom","text-anchor":"top","icon-image":"basics:icon-rail_metro",visibility:"none"},paint:{"icon-opacity":.7,"icon-color":"rgb(102,98,106)","text-color":"rgb(102,98,106)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:14},{source:"versatiles-shortbread",id:"symbol-transit-lightrail",type:"symbol","source-layer":"public_transport",filter:["all",["in","kind","station","halt"],["==","station","light_rail"]],layout:{"text-field":"{name}","icon-size":{stops:[[14,.5],[16,1]]},"symbol-placement":"point","icon-keep-upright":!0,"text-font":["noto_sans_regular"],"text-size":10,"icon-anchor":"bottom","text-anchor":"top","icon-image":"basics:icon-rail_light",visibility:"none"},paint:{"icon-opacity":.7,"icon-color":"rgb(102,98,106)","text-color":"rgb(102,98,106)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:14},{source:"versatiles-shortbread",id:"symbol-transit-station",type:"symbol","source-layer":"public_transport",filter:["all",["in","kind","station","halt"],["!in","station","light_rail","subway"]],layout:{"text-field":"{name}","icon-size":{stops:[[13,.5],[15,1]]},"symbol-placement":"point","icon-keep-upright":!0,"text-font":["noto_sans_regular"],"text-size":10,"icon-anchor":"bottom","text-anchor":"top","icon-image":"basics:icon-rail",visibility:"none"},paint:{"icon-opacity":.7,"icon-color":"rgb(102,98,106)","text-color":"rgb(102,98,106)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:13},{source:"versatiles-shortbread",id:"symbol-transit-airfield",type:"symbol","source-layer":"public_transport",filter:["all",["==","kind","aerodrome"],["!has","iata"]],layout:{"text-field":"{name}","icon-size":{stops:[[13,.5],[15,1]]},"symbol-placement":"point","icon-keep-upright":!0,"text-font":["noto_sans_regular"],"text-size":10,"icon-anchor":"bottom","text-anchor":"top","icon-image":"basics:icon-airfield",visibility:"none"},paint:{"icon-opacity":.7,"icon-color":"rgb(102,98,106)","text-color":"rgb(102,98,106)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:13},{source:"versatiles-shortbread",id:"symbol-transit-airport",type:"symbol","source-layer":"public_transport",filter:["all",["==","kind","aerodrome"],["has","iata"]],layout:{"text-field":"{name}","icon-size":{stops:[[12,.5],[14,1]]},"symbol-placement":"point","icon-keep-upright":!0,"text-font":["noto_sans_regular"],"text-size":10,"icon-anchor":"bottom","text-anchor":"top","icon-image":"basics:icon-airport",visibility:"none"},paint:{"icon-opacity":.7,"icon-color":"rgb(102,98,106)","text-color":"rgb(102,98,106)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:12}],kF={version:bF,name:xF,metadata:wF,glyphs:SF,sprite:TF,sources:CF,layers:N_};var q_=`/* required styles */\r
\r
.leaflet-pane,\r
.leaflet-tile,\r
.leaflet-marker-icon,\r
.leaflet-marker-shadow,\r
.leaflet-tile-container,\r
.leaflet-pane > svg,\r
.leaflet-pane > canvas,\r
.leaflet-zoom-box,\r
.leaflet-image-layer,\r
.leaflet-layer {\r
	position: absolute;\r
	left: 0;\r
	top: 0;\r
	}\r
.leaflet-container {\r
	overflow: hidden;\r
	}\r
.leaflet-tile,\r
.leaflet-marker-icon,\r
.leaflet-marker-shadow {\r
	-webkit-user-select: none;\r
	   -moz-user-select: none;\r
	        user-select: none;\r
	  -webkit-user-drag: none;\r
	}\r
/* Prevents IE11 from highlighting tiles in blue */\r
.leaflet-tile::selection {\r
	background: transparent;\r
}\r
/* Safari renders non-retina tile on retina better with this, but Chrome is worse */\r
.leaflet-safari .leaflet-tile {\r
	image-rendering: -webkit-optimize-contrast;\r
	}\r
/* hack that prevents hw layers "stretching" when loading new tiles */\r
.leaflet-safari .leaflet-tile-container {\r
	width: 1600px;\r
	height: 1600px;\r
	-webkit-transform-origin: 0 0;\r
	}\r
.leaflet-marker-icon,\r
.leaflet-marker-shadow {\r
	display: block;\r
	}\r
/* .leaflet-container svg: reset svg max-width decleration shipped in Joomla! (joomla.org) 3.x */\r
/* .leaflet-container img: map is broken in FF if you have max-width: 100% on tiles */\r
.leaflet-container .leaflet-overlay-pane svg {\r
	max-width: none !important;\r
	max-height: none !important;\r
	}\r
.leaflet-container .leaflet-marker-pane img,\r
.leaflet-container .leaflet-shadow-pane img,\r
.leaflet-container .leaflet-tile-pane img,\r
.leaflet-container img.leaflet-image-layer,\r
.leaflet-container .leaflet-tile {\r
	max-width: none !important;\r
	max-height: none !important;\r
	width: auto;\r
	padding: 0;\r
	}\r
\r
.leaflet-container img.leaflet-tile {\r
	/* See: https://bugs.chromium.org/p/chromium/issues/detail?id=600120 */\r
	mix-blend-mode: plus-lighter;\r
}\r
\r
.leaflet-container.leaflet-touch-zoom {\r
	-ms-touch-action: pan-x pan-y;\r
	touch-action: pan-x pan-y;\r
	}\r
.leaflet-container.leaflet-touch-drag {\r
	-ms-touch-action: pinch-zoom;\r
	/* Fallback for FF which doesn't support pinch-zoom */\r
	touch-action: none;\r
	touch-action: pinch-zoom;\r
}\r
.leaflet-container.leaflet-touch-drag.leaflet-touch-zoom {\r
	-ms-touch-action: none;\r
	touch-action: none;\r
}\r
.leaflet-container {\r
	-webkit-tap-highlight-color: transparent;\r
}\r
.leaflet-container a {\r
	-webkit-tap-highlight-color: rgba(51, 181, 229, 0.4);\r
}\r
.leaflet-tile {\r
	filter: inherit;\r
	visibility: hidden;\r
	}\r
.leaflet-tile-loaded {\r
	visibility: inherit;\r
	}\r
.leaflet-zoom-box {\r
	width: 0;\r
	height: 0;\r
	-moz-box-sizing: border-box;\r
	     box-sizing: border-box;\r
	z-index: 800;\r
	}\r
/* workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=888319 */\r
.leaflet-overlay-pane svg {\r
	-moz-user-select: none;\r
	}\r
\r
.leaflet-pane         { z-index: 400; }\r
\r
.leaflet-tile-pane    { z-index: 200; }\r
.leaflet-overlay-pane { z-index: 400; }\r
.leaflet-shadow-pane  { z-index: 500; }\r
.leaflet-marker-pane  { z-index: 600; }\r
.leaflet-tooltip-pane   { z-index: 650; }\r
.leaflet-popup-pane   { z-index: 700; }\r
\r
.leaflet-map-pane canvas { z-index: 100; }\r
.leaflet-map-pane svg    { z-index: 200; }\r
\r
.leaflet-vml-shape {\r
	width: 1px;\r
	height: 1px;\r
	}\r
.lvml {\r
	behavior: url(#default#VML);\r
	display: inline-block;\r
	position: absolute;\r
	}\r
\r
\r
/* control positioning */\r
\r
.leaflet-control {\r
	position: relative;\r
	z-index: 800;\r
	pointer-events: visiblePainted; /* IE 9-10 doesn't have auto */\r
	pointer-events: auto;\r
	}\r
.leaflet-top,\r
.leaflet-bottom {\r
	position: absolute;\r
	z-index: 1000;\r
	pointer-events: none;\r
	}\r
.leaflet-top {\r
	top: 0;\r
	}\r
.leaflet-right {\r
	right: 0;\r
	}\r
.leaflet-bottom {\r
	bottom: 0;\r
	}\r
.leaflet-left {\r
	left: 0;\r
	}\r
.leaflet-control {\r
	float: left;\r
	clear: both;\r
	}\r
.leaflet-right .leaflet-control {\r
	float: right;\r
	}\r
.leaflet-top .leaflet-control {\r
	margin-top: 10px;\r
	}\r
.leaflet-bottom .leaflet-control {\r
	margin-bottom: 10px;\r
	}\r
.leaflet-left .leaflet-control {\r
	margin-left: 10px;\r
	}\r
.leaflet-right .leaflet-control {\r
	margin-right: 10px;\r
	}\r
\r
\r
/* zoom and fade animations */\r
\r
.leaflet-fade-anim .leaflet-popup {\r
	opacity: 0;\r
	-webkit-transition: opacity 0.2s linear;\r
	   -moz-transition: opacity 0.2s linear;\r
	        transition: opacity 0.2s linear;\r
	}\r
.leaflet-fade-anim .leaflet-map-pane .leaflet-popup {\r
	opacity: 1;\r
	}\r
.leaflet-zoom-animated {\r
	-webkit-transform-origin: 0 0;\r
	    -ms-transform-origin: 0 0;\r
	        transform-origin: 0 0;\r
	}\r
svg.leaflet-zoom-animated {\r
	will-change: transform;\r
}\r
\r
.leaflet-zoom-anim .leaflet-zoom-animated {\r
	-webkit-transition: -webkit-transform 0.25s cubic-bezier(0,0,0.25,1);\r
	   -moz-transition:    -moz-transform 0.25s cubic-bezier(0,0,0.25,1);\r
	        transition:         transform 0.25s cubic-bezier(0,0,0.25,1);\r
	}\r
.leaflet-zoom-anim .leaflet-tile,\r
.leaflet-pan-anim .leaflet-tile {\r
	-webkit-transition: none;\r
	   -moz-transition: none;\r
	        transition: none;\r
	}\r
\r
.leaflet-zoom-anim .leaflet-zoom-hide {\r
	visibility: hidden;\r
	}\r
\r
\r
/* cursors */\r
\r
.leaflet-interactive {\r
	cursor: pointer;\r
	}\r
.leaflet-grab {\r
	cursor: -webkit-grab;\r
	cursor:    -moz-grab;\r
	cursor:         grab;\r
	}\r
.leaflet-crosshair,\r
.leaflet-crosshair .leaflet-interactive {\r
	cursor: crosshair;\r
	}\r
.leaflet-popup-pane,\r
.leaflet-control {\r
	cursor: auto;\r
	}\r
.leaflet-dragging .leaflet-grab,\r
.leaflet-dragging .leaflet-grab .leaflet-interactive,\r
.leaflet-dragging .leaflet-marker-draggable {\r
	cursor: move;\r
	cursor: -webkit-grabbing;\r
	cursor:    -moz-grabbing;\r
	cursor:         grabbing;\r
	}\r
\r
/* marker & overlays interactivity */\r
.leaflet-marker-icon,\r
.leaflet-marker-shadow,\r
.leaflet-image-layer,\r
.leaflet-pane > svg path,\r
.leaflet-tile-container {\r
	pointer-events: none;\r
	}\r
\r
.leaflet-marker-icon.leaflet-interactive,\r
.leaflet-image-layer.leaflet-interactive,\r
.leaflet-pane > svg path.leaflet-interactive,\r
svg.leaflet-image-layer.leaflet-interactive path {\r
	pointer-events: visiblePainted; /* IE 9-10 doesn't have auto */\r
	pointer-events: auto;\r
	}\r
\r
/* visual tweaks */\r
\r
.leaflet-container {\r
	background: #ddd;\r
	outline-offset: 1px;\r
	}\r
.leaflet-container a {\r
	color: #0078A8;\r
	}\r
.leaflet-zoom-box {\r
	border: 2px dotted #38f;\r
	background: rgba(255,255,255,0.5);\r
	}\r
\r
\r
/* general typography */\r
.leaflet-container {\r
	font-family: "Helvetica Neue", Arial, Helvetica, sans-serif;\r
	font-size: 12px;\r
	font-size: 0.75rem;\r
	line-height: 1.5;\r
	}\r
\r
\r
/* general toolbar styles */\r
\r
.leaflet-bar {\r
	box-shadow: 0 1px 5px rgba(0,0,0,0.65);\r
	border-radius: 4px;\r
	}\r
.leaflet-bar a {\r
	background-color: #fff;\r
	border-bottom: 1px solid #ccc;\r
	width: 26px;\r
	height: 26px;\r
	line-height: 26px;\r
	display: block;\r
	text-align: center;\r
	text-decoration: none;\r
	color: black;\r
	}\r
.leaflet-bar a,\r
.leaflet-control-layers-toggle {\r
	background-position: 50% 50%;\r
	background-repeat: no-repeat;\r
	display: block;\r
	}\r
.leaflet-bar a:hover,\r
.leaflet-bar a:focus {\r
	background-color: #f4f4f4;\r
	}\r
.leaflet-bar a:first-child {\r
	border-top-left-radius: 4px;\r
	border-top-right-radius: 4px;\r
	}\r
.leaflet-bar a:last-child {\r
	border-bottom-left-radius: 4px;\r
	border-bottom-right-radius: 4px;\r
	border-bottom: none;\r
	}\r
.leaflet-bar a.leaflet-disabled {\r
	cursor: default;\r
	background-color: #f4f4f4;\r
	color: #bbb;\r
	}\r
\r
.leaflet-touch .leaflet-bar a {\r
	width: 30px;\r
	height: 30px;\r
	line-height: 30px;\r
	}\r
.leaflet-touch .leaflet-bar a:first-child {\r
	border-top-left-radius: 2px;\r
	border-top-right-radius: 2px;\r
	}\r
.leaflet-touch .leaflet-bar a:last-child {\r
	border-bottom-left-radius: 2px;\r
	border-bottom-right-radius: 2px;\r
	}\r
\r
/* zoom control */\r
\r
.leaflet-control-zoom-in,\r
.leaflet-control-zoom-out {\r
	font: bold 18px 'Lucida Console', Monaco, monospace;\r
	text-indent: 1px;\r
	}\r
\r
.leaflet-touch .leaflet-control-zoom-in, .leaflet-touch .leaflet-control-zoom-out  {\r
	font-size: 22px;\r
	}\r
\r
\r
/* layers control */\r
\r
.leaflet-control-layers {\r
	box-shadow: 0 1px 5px rgba(0,0,0,0.4);\r
	background: #fff;\r
	border-radius: 5px;\r
	}\r
.leaflet-control-layers-toggle {\r
	background-image: url(images/layers.png);\r
	width: 36px;\r
	height: 36px;\r
	}\r
.leaflet-retina .leaflet-control-layers-toggle {\r
	background-image: url(images/layers-2x.png);\r
	background-size: 26px 26px;\r
	}\r
.leaflet-touch .leaflet-control-layers-toggle {\r
	width: 44px;\r
	height: 44px;\r
	}\r
.leaflet-control-layers .leaflet-control-layers-list,\r
.leaflet-control-layers-expanded .leaflet-control-layers-toggle {\r
	display: none;\r
	}\r
.leaflet-control-layers-expanded .leaflet-control-layers-list {\r
	display: block;\r
	position: relative;\r
	}\r
.leaflet-control-layers-expanded {\r
	padding: 6px 10px 6px 6px;\r
	color: #333;\r
	background: #fff;\r
	}\r
.leaflet-control-layers-scrollbar {\r
	overflow-y: scroll;\r
	overflow-x: hidden;\r
	padding-right: 5px;\r
	}\r
.leaflet-control-layers-selector {\r
	margin-top: 2px;\r
	position: relative;\r
	top: 1px;\r
	}\r
.leaflet-control-layers label {\r
	display: block;\r
	font-size: 13px;\r
	font-size: 1.08333em;\r
	}\r
.leaflet-control-layers-separator {\r
	height: 0;\r
	border-top: 1px solid #ddd;\r
	margin: 5px -10px 5px -6px;\r
	}\r
\r
/* Default icon URLs */\r
.leaflet-default-icon-path { /* used only in path-guessing heuristic, see L.Icon.Default */\r
	background-image: url(images/marker-icon.png);\r
	}\r
\r
\r
/* attribution and scale controls */\r
\r
.leaflet-container .leaflet-control-attribution {\r
	background: #fff;\r
	background: rgba(255, 255, 255, 0.8);\r
	margin: 0;\r
	}\r
.leaflet-control-attribution,\r
.leaflet-control-scale-line {\r
	padding: 0 5px;\r
	color: #333;\r
	line-height: 1.4;\r
	}\r
.leaflet-control-attribution a {\r
	text-decoration: none;\r
	}\r
.leaflet-control-attribution a:hover,\r
.leaflet-control-attribution a:focus {\r
	text-decoration: underline;\r
	}\r
.leaflet-attribution-flag {\r
	display: inline !important;\r
	vertical-align: baseline !important;\r
	width: 1em;\r
	height: 0.6669em;\r
	}\r
.leaflet-left .leaflet-control-scale {\r
	margin-left: 5px;\r
	}\r
.leaflet-bottom .leaflet-control-scale {\r
	margin-bottom: 5px;\r
	}\r
.leaflet-control-scale-line {\r
	border: 2px solid #777;\r
	border-top: none;\r
	line-height: 1.1;\r
	padding: 2px 5px 1px;\r
	white-space: nowrap;\r
	-moz-box-sizing: border-box;\r
	     box-sizing: border-box;\r
	background: rgba(255, 255, 255, 0.8);\r
	text-shadow: 1px 1px #fff;\r
	}\r
.leaflet-control-scale-line:not(:first-child) {\r
	border-top: 2px solid #777;\r
	border-bottom: none;\r
	margin-top: -2px;\r
	}\r
.leaflet-control-scale-line:not(:first-child):not(:last-child) {\r
	border-bottom: 2px solid #777;\r
	}\r
\r
.leaflet-touch .leaflet-control-attribution,\r
.leaflet-touch .leaflet-control-layers,\r
.leaflet-touch .leaflet-bar {\r
	box-shadow: none;\r
	}\r
.leaflet-touch .leaflet-control-layers,\r
.leaflet-touch .leaflet-bar {\r
	border: 2px solid rgba(0,0,0,0.2);\r
	background-clip: padding-box;\r
	}\r
\r
\r
/* popup */\r
\r
.leaflet-popup {\r
	position: absolute;\r
	text-align: center;\r
	margin-bottom: 20px;\r
	}\r
.leaflet-popup-content-wrapper {\r
	padding: 1px;\r
	text-align: left;\r
	border-radius: 12px;\r
	}\r
.leaflet-popup-content {\r
	margin: 13px 24px 13px 20px;\r
	line-height: 1.3;\r
	font-size: 13px;\r
	font-size: 1.08333em;\r
	min-height: 1px;\r
	}\r
.leaflet-popup-content p {\r
	margin: 17px 0;\r
	margin: 1.3em 0;\r
	}\r
.leaflet-popup-tip-container {\r
	width: 40px;\r
	height: 20px;\r
	position: absolute;\r
	left: 50%;\r
	margin-top: -1px;\r
	margin-left: -20px;\r
	overflow: hidden;\r
	pointer-events: none;\r
	}\r
.leaflet-popup-tip {\r
	width: 17px;\r
	height: 17px;\r
	padding: 1px;\r
\r
	margin: -10px auto 0;\r
	pointer-events: auto;\r
\r
	-webkit-transform: rotate(45deg);\r
	   -moz-transform: rotate(45deg);\r
	    -ms-transform: rotate(45deg);\r
	        transform: rotate(45deg);\r
	}\r
.leaflet-popup-content-wrapper,\r
.leaflet-popup-tip {\r
	background: white;\r
	color: #333;\r
	box-shadow: 0 3px 14px rgba(0,0,0,0.4);\r
	}\r
.leaflet-container a.leaflet-popup-close-button {\r
	position: absolute;\r
	top: 0;\r
	right: 0;\r
	border: none;\r
	text-align: center;\r
	width: 24px;\r
	height: 24px;\r
	font: 16px/24px Tahoma, Verdana, sans-serif;\r
	color: #757575;\r
	text-decoration: none;\r
	background: transparent;\r
	}\r
.leaflet-container a.leaflet-popup-close-button:hover,\r
.leaflet-container a.leaflet-popup-close-button:focus {\r
	color: #585858;\r
	}\r
.leaflet-popup-scrolled {\r
	overflow: auto;\r
	}\r
\r
.leaflet-oldie .leaflet-popup-content-wrapper {\r
	-ms-zoom: 1;\r
	}\r
.leaflet-oldie .leaflet-popup-tip {\r
	width: 24px;\r
	margin: 0 auto;\r
\r
	-ms-filter: "progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)";\r
	filter: progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678);\r
	}\r
\r
.leaflet-oldie .leaflet-control-zoom,\r
.leaflet-oldie .leaflet-control-layers,\r
.leaflet-oldie .leaflet-popup-content-wrapper,\r
.leaflet-oldie .leaflet-popup-tip {\r
	border: 1px solid #999;\r
	}\r
\r
\r
/* div icon */\r
\r
.leaflet-div-icon {\r
	background: #fff;\r
	border: 1px solid #666;\r
	}\r
\r
\r
/* Tooltip */\r
/* Base styles for the element that has a tooltip */\r
.leaflet-tooltip {\r
	position: absolute;\r
	padding: 6px;\r
	background-color: #fff;\r
	border: 1px solid #fff;\r
	border-radius: 3px;\r
	color: #222;\r
	white-space: nowrap;\r
	-webkit-user-select: none;\r
	-moz-user-select: none;\r
	-ms-user-select: none;\r
	user-select: none;\r
	pointer-events: none;\r
	box-shadow: 0 1px 3px rgba(0,0,0,0.4);\r
	}\r
.leaflet-tooltip.leaflet-interactive {\r
	cursor: pointer;\r
	pointer-events: auto;\r
	}\r
.leaflet-tooltip-top:before,\r
.leaflet-tooltip-bottom:before,\r
.leaflet-tooltip-left:before,\r
.leaflet-tooltip-right:before {\r
	position: absolute;\r
	pointer-events: none;\r
	border: 6px solid transparent;\r
	background: transparent;\r
	content: "";\r
	}\r
\r
/* Directions */\r
\r
.leaflet-tooltip-bottom {\r
	margin-top: 6px;\r
}\r
.leaflet-tooltip-top {\r
	margin-top: -6px;\r
}\r
.leaflet-tooltip-bottom:before,\r
.leaflet-tooltip-top:before {\r
	left: 50%;\r
	margin-left: -6px;\r
	}\r
.leaflet-tooltip-top:before {\r
	bottom: 0;\r
	margin-bottom: -12px;\r
	border-top-color: #fff;\r
	}\r
.leaflet-tooltip-bottom:before {\r
	top: 0;\r
	margin-top: -12px;\r
	margin-left: -6px;\r
	border-bottom-color: #fff;\r
	}\r
.leaflet-tooltip-left {\r
	margin-left: -6px;\r
}\r
.leaflet-tooltip-right {\r
	margin-left: 6px;\r
}\r
.leaflet-tooltip-left:before,\r
.leaflet-tooltip-right:before {\r
	top: 50%;\r
	margin-top: -6px;\r
	}\r
.leaflet-tooltip-left:before {\r
	right: 0;\r
	margin-right: -12px;\r
	border-left-color: #fff;\r
	}\r
.leaflet-tooltip-right:before {\r
	left: 0;\r
	margin-left: -12px;\r
	border-right-color: #fff;\r
	}\r
\r
/* Printing */\r
\r
@media print {\r
	/* Prevent printers from removing background-images of controls. */\r
	.leaflet-control {\r
		-webkit-print-color-adjust: exact;\r
		print-color-adjust: exact;\r
		}\r
	}\r
`;var ME=`.leaflet-custom-marker-cluster .cluster-count {
    width: 30px;
    height: 30px;
    text-align: center;
    border-radius: 50%;
    position: relative;
    top: -40px;
    left: 2px;
    color: white;
    font-weight: bold;
    text-shadow: 
        -1px -1px 0 #000,  
        1px -1px 0 #000,
        -1px  1px 0 #000,
        1px  1px 0 #000;
}

.leaflet-custom-marker-cluster .cluster-count:before {
    content: '';
    position: absolute;
    top: 0;
    left: -50%;
    width: 16px;
    height: 16px;
    background-color: white;
    opacity: 0.3;
    border-radius: 50%;
    z-index: -1;
}

.leaflet-custom-marker-cluster .cluster-count:after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 32px;
    height: 32px;
    transform: translate(-50%, -50%);
    background-color: white;
    opacity: 0.7;
    border-radius: 50%;
    z-index: -1;
}
`;var V_=void 0,IE="Space Grotesk Variable",LE=new Ph(null,{order:["querystring","navigator","htmlTag","path"],lookupQuerystring:"lang",htmlTag:document.documentElement});LE.detect();var AF=LE.detect(),Bl={shortbread:Eh};V_!==void 0?(Bl.shortbread["ol:webfonts"]=V_,Bl.shortbread.metadata["ol:webfonts"]=V_):(Bl.shortbread["ol:webfonts"]=IE,Bl.shortbread.metadata["ol:webfonts"]=IE);var Jf=[30,30],zE="vectorgrid";async function DE(s,o,p,d,f,a,T){var je;if(!a in Bl)throw new Error(`'${a}' is not a valid style.`);let M={};if(f){let ye=await xE(f);M.icon=ye}let R,V;o!==void 0&&(o=JSON.parse(o),R=Zo.default.geoJson(o,{pointToLayer:function(ye,Ce){return Zo.default.marker(Ce,M)},onEachFeature:function(ye,Ce){if(ye.properties&&(ye.properties.name||ye.properties.popupContent)){let Ye="";ye.properties.name&&(Ye+="<h1>"+ye.properties.name+"</h1>"),ye.properties.popupContent&&(Ye+=ye.properties.popupContent),Ce.bindPopup(Ye)}}}),V=R.getBounds().getCenter());let Y,re=[[180,-1/0],[-180,1/0]];T&&T.length===4&&(Y=[[T[3],T[2]],[T[1],T[0]]],re=Y);let G,te;te=document.querySelector(s),G=Zo.default.map(te,{maxBounds:re,zoomControl:!1,renderer:Zo.default.svg(),minZoom:1,maxZoom:15,center:V,zoom:3,zoomSnap:.1,preferCanvas:!1,lang:AF}),T&&T.length===4&&G.fitBounds(Y,{padding:Jf});var H;if(zE==="maplibre")H=Zo.default.maplibreGL({style:Bl[a]}).addTo(G);else if(zE==="vectorgrid"){let ye=Bl[a].sources["versatiles-"+a].tiles[0],Ce=Bl[a].sources["versatiles-"+a].attribution,Ye=N_.find(kt=>kt.type==="background");Ye&&((je=Ye.paint)!=null&&je["background-color"])&&(te.style.backgroundColor=Ye.paint["background-color"]),G.createPane("labels"),G.getPane("labels").style.zIndex=500,G.getPane("labels").style.pointerEvents="none",G.createPane("clusters"),G.getPane("clusters").style.zIndex=650;let rt=wE(Eh,G,!1);H=O_(ye,{attribution:Ce,vectorTileLayerStyles:rt,minDetailZoom:4,maxDetailZoom:14,maxZoom:20,reuseTiles:!0,layers:["ocean","water_polygons","land","water_lines","dam_polygons","dam_lines","pier_polygons","pier_lines","sites","street_polygons","streets","buildings","bridges","boundaries"]}).addTo(G);let gt=SE(Eh,G),Wt={},wt=O_(ye,{style:gt,minDetailZoom:7,maxDetailZoom:14,maxZoom:20,pane:"labels",reuseTiles:!0,layers:["place_labels","boundary_labels","street_labels"],"*":{cache:Wt}});wt.addTo(G),wt.on("tileload",kt=>{let si=kt.tile.x+":"+kt.tile.y+":"+kt.tile.z;Wt[si]=[]})}if(d!==void 0&&d){let ye=Zo.default.markerClusterGroup({maxClusterRadius:40,pane:"clusters",iconCreateFunction:function(Ce){let Ye=Ce.getChildCount(),rt=M.icon;if(!rt)return Zo.default.divIcon({html:"<b>"+Ye+"</b>",className:"marker-cluster"});let Ct=rt.options.iconUrl,gt=rt.options.iconSize,Wt=`transform: scale(${1+Ye/20});transform-origin: center center;`;return Zo.default.divIcon({html:`<img src="${Ct}" style="width:${gt[0]}px;height:${gt[1]}px;${Wt}"><span class="cluster-count">${Ye}</span>`,className:"leaflet-custom-marker-cluster",iconSize:gt})}});ye.addLayer(R),G.addLayer(ye)}else G.addLayer(R);Y!==void 0?G.fitBounds(Y,{padding:Jf}):G.fitBounds(R.getBounds(),{padding:Jf});let Se=new ResizeObserver(()=>{te.querySelectorAll(".leaflet-control-container").forEach(Ct=>{Ct.remove()}),console.log(q_);let ye=Ah.cleanCss(q_)+`
`+Ah.cleanCss(ME);console.log("Full print style:",ye);let Ce=Ah.filterStylesByPrefix(ye,".leaflet");console.log("Applying",Ce," to ",te);let Ye=te.id+"-leaflet-inline-style";document.getElementById(Ye)&&document.getElementById(Ye).remove();let rt=document.createElement("style");rt.id=Ye,rt.setAttribute("type","text/css"),rt.textContent=Ce,document.head.appendChild(rt),G.invalidateSize(),Y!==void 0&&(G.fitBounds(Y,{padding:Jf}),console.log("Resized map and fit to bounds: ",G.getBounds()," expected: ",Y,te.clientWidth,te.clientHeight))});return te!==null?Se.observe(te):console.error("Couldn't set up resize observer for",te),G}var Ah=class s{static inlineStyle(o,p){let d=/([^{]+)\{([\s\S]+?)\}/g,f;for(;(f=d.exec(p))!==null;){let a=f[1].trim(),T=f[2].trim();if(a)try{let M=o.querySelectorAll(a),R={};T.split(";").forEach(V=>{let Y=V.split(":").map(re=>re.trim());if(Y.length===2&&Y[0]){let re=Y[0].replace(/-([a-z])/g,G=>G[1].toUpperCase());R[re]=Y[1]}}),M.forEach(V=>{for(let Y in R)V.style[Y]=R[Y]})}catch(M){console.error(`Error processing selector "${a}"!`,M)}}}static filterStylesByPrefix(o,p){if(p!==""){let d=[],f=/([^{]+)\{([^}]+)\}/g,a;for(;(a=f.exec(o))!==null;){let T=a[1].trim(),M=a[2].trim();T.split(",").map(Y=>Y.trim()).some(Y=>Y.startsWith(p))&&d.push(`${T} { ${M} }`)}return d.join(`
`)}return o}static async getStyles(o="",p){p!==void 0?typeof p=="string"&&(p=[p]):p=[],document.querySelectorAll('link[rel="stylesheet"], link[rel="print-stylesheet"]').forEach(M=>{M.href&&p.push(M.href)});let d=document.querySelectorAll("style");if(p.length===0&&d.length===0)return console.warn("No stylesheets!"),"";let f=String(o||"").trim(),a=p.map(async M=>{if(!M)return;let R;try{let V=await fetch(M);if(!V.ok){console.error(`HTTP error fetching ${M}: status ${V.status}`);return}R=await V.text()}catch(V){console.error(`Failed to fetch stylesheet from ${M}:`,V);return}return R}),T=await Promise.all(a);return d.forEach(M=>{T.push(M.textContent+`
`||"")}),s.filterStylesByPrefix(T.join(`
`),f)}static cleanCss(o){let p=/\/\*[\s\S]*?\*\//g,d=o.replace(p,""),f="",a=0;for(;a<d.length;){let T=d[a];if(T==="@"){let M=a,R=d.indexOf("{",M);if(R===-1){if(R=d.indexOf(";",M),R!==-1){a=R+1;continue}}else{let V=1,Y=R+1;for(;Y<d.length;){let re=d[Y];if(re==="{"?V++:re==="}"&&V--,V===0){a=Y+1;break}Y++}V!==0&&(a=d.length)}}else f+=T,a++}return f.trim().replace(/(\r?\n){2,}/g,`
`)}};window.initMap=DE;})();
/*! Bundled license information:

leaflet/dist/leaflet-src.js:
  (* @preserve
   * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
   * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
   *)

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

maplibre-gl/dist/maplibre-gl.js:
  (**
   * MapLibre GL JS
   * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.14.0/LICENSE.txt
   *)
*/
