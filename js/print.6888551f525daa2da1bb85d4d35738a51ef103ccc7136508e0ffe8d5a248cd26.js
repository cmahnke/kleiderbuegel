(()=>{var lz=Object.create;var xp=Object.defineProperty;var cz=Object.getOwnPropertyDescriptor;var uz=Object.getOwnPropertyNames;var dz=Object.getPrototypeOf,hz=Object.prototype.hasOwnProperty;var pz=(s,o,p)=>o in s?xp(s,o,{enumerable:!0,configurable:!0,writable:!0,value:p}):s[o]=p;var ze=(s,o)=>()=>(o||s((o={exports:{}}).exports,o),o.exports),fz=(s,o)=>{for(var p in o)xp(s,p,{get:o[p],enumerable:!0})},mz=(s,o,p,d)=>{if(o&&typeof o=="object"||typeof o=="function")for(let f of uz(o))!hz.call(s,f)&&f!==p&&xp(s,f,{get:()=>o[f],enumerable:!(d=cz(o,f))||d.enumerable});return s};var ki=(s,o,p)=>(p=s!=null?lz(dz(s)):{},mz(o||!s||!s.__esModule?xp(p,"default",{value:s,enumerable:!0}):p,s));var zt=(s,o,p)=>pz(s,typeof o!="symbol"?o+"":o,p);var lg=ze((qF,fx)=>{"use strict";var _z=void 0;fx.exports=function(s){return s!==_z&&s!==null}});var gx=ze((VF,mx)=>{"use strict";var vz=lg(),bz={object:!0,function:!0,undefined:!0};mx.exports=function(s){return vz(s)?hasOwnProperty.call(bz,typeof s):!1}});var _x=ze((WF,yx)=>{"use strict";var xz=gx();yx.exports=function(s){if(!xz(s))return!1;try{return s.constructor?s.constructor.prototype===s:!1}catch(o){return!1}}});var bx=ze((GF,vx)=>{"use strict";var wz=_x();vx.exports=function(s){if(typeof s!="function"||!hasOwnProperty.call(s,"length"))return!1;try{if(typeof s.length!="number"||typeof s.call!="function"||typeof s.apply!="function")return!1}catch(o){return!1}return!wz(s)}});var wx=ze((UF,xx)=>{"use strict";var Sz=bx(),Tz=/^\s*class[\s{/}]/,Cz=Function.prototype.toString;xx.exports=function(s){return!(!Sz(s)||Tz.test(Cz.call(s)))}});var Tx=ze((ZF,Sx)=>{"use strict";Sx.exports=function(){var s=Object.assign,o;return typeof s!="function"?!1:(o={foo:"raz"},s(o,{bar:"dwa"},{trzy:"trzy"}),o.foo+o.bar+o.trzy==="razdwatrzy")}});var kx=ze((HF,Cx)=>{"use strict";Cx.exports=function(){try{return Object.keys("primitive"),!0}catch(s){return!1}}});var Ex=ze(($F,Px)=>{"use strict";Px.exports=function(){}});var Tu=ze((YF,Ax)=>{"use strict";var kz=Ex()();Ax.exports=function(s){return s!==kz&&s!==null}});var zx=ze((XF,Mx)=>{"use strict";var Pz=Tu(),Ez=Object.keys;Mx.exports=function(s){return Ez(Pz(s)?Object(s):s)}});var Lx=ze((KF,Ix)=>{"use strict";Ix.exports=kx()()?Object.keys:zx()});var Rp=ze((JF,Dx)=>{"use strict";var Az=Tu();Dx.exports=function(s){if(!Az(s))throw new TypeError("Cannot use null or undefined");return s}});var Rx=ze((QF,Ox)=>{"use strict";var Mz=Lx(),zz=Rp(),Iz=Math.max;Ox.exports=function(s,o){var p,d,f=Iz(arguments.length,2),a;for(s=Object(zz(s)),a=function(T){try{s[T]=o[T]}catch(M){p||(p=M)}},d=1;d<f;++d)o=arguments[d],Mz(o).forEach(a);if(p!==void 0)throw p;return s}});var Fx=ze((ej,Bx)=>{"use strict";Bx.exports=Tx()()?Object.assign:Rx()});var Nx=ze((tj,jx)=>{"use strict";var Lz=Tu(),Dz=Array.prototype.forEach,Oz=Object.create,Rz=function(s,o){var p;for(p in s)o[p]=s[p]};jx.exports=function(s){var o=Oz(null);return Dz.call(arguments,function(p){Lz(p)&&Rz(Object(p),o)}),o}});var Vx=ze((ij,qx)=>{"use strict";var cg="razdwatrzy";qx.exports=function(){return typeof cg.contains!="function"?!1:cg.contains("dwa")===!0&&cg.contains("foo")===!1}});var Gx=ze((rj,Wx)=>{"use strict";var Bz=String.prototype.indexOf;Wx.exports=function(s){return Bz.call(this,s,arguments[1])>-1}});var Zx=ze((nj,Ux)=>{"use strict";Ux.exports=Vx()()?String.prototype.contains:Gx()});var fc=ze((aj,Xx)=>{"use strict";var Bp=lg(),Hx=wx(),$x=Fx(),Yx=Nx(),Xd=Zx(),Fz=Xx.exports=function(s,o){var p,d,f,a,T;return arguments.length<2||typeof s!="string"?(a=o,o=s,s=null):a=arguments[2],Bp(s)?(p=Xd.call(s,"c"),d=Xd.call(s,"e"),f=Xd.call(s,"w")):(p=f=!0,d=!1),T={value:o,configurable:p,enumerable:d,writable:f},a?$x(Yx(a),T):T};Fz.gs=function(s,o,p){var d,f,a,T;return typeof s!="string"?(a=p,p=o,o=s,s=null):a=arguments[3],Bp(o)?Hx(o)?Bp(p)?Hx(p)||(a=p,p=void 0):p=void 0:(a=o,o=p=void 0):o=void 0,Bp(s)?(d=Xd.call(s,"c"),f=Xd.call(s,"e")):(d=!0,f=!1),T={get:o,set:p,configurable:d,enumerable:f},a?$x(Yx(a),T):T}});var ug=ze((sj,Kx)=>{"use strict";Kx.exports=function(s){if(typeof s!="function")throw new TypeError(s+" is not a function");return s}});var wl=ze((vg,i0)=>{"use strict";var Fp=fc(),fg=ug(),pg=Function.prototype.apply,dg=Function.prototype.call,Jx=Object.create,jz=Object.defineProperty,Qx=Object.defineProperties,mg=Object.prototype.hasOwnProperty,hg={configurable:!0,enumerable:!1,writable:!0},jp,gg,Np,yg,e0,_g,t0;jp=function(s,o){var p;return fg(o),mg.call(this,"__ee__")?p=this.__ee__:(p=hg.value=Jx(null),jz(this,"__ee__",hg),hg.value=null),p[s]?typeof p[s]=="object"?p[s].push(o):p[s]=[p[s],o]:p[s]=o,this};gg=function(s,o){var p,d;return fg(o),d=this,jp.call(this,s,p=function(){Np.call(d,s,p),pg.call(o,this,arguments)}),p.__eeOnceListener__=o,this};Np=function(s,o){var p,d,f,a;if(fg(o),!mg.call(this,"__ee__"))return this;if(p=this.__ee__,!p[s])return this;if(d=p[s],typeof d=="object")for(a=0;f=d[a];++a)(f===o||f.__eeOnceListener__===o)&&(d.length===2?p[s]=d[a?0:1]:d.splice(a,1));else(d===o||d.__eeOnceListener__===o)&&delete p[s];return this};yg=function(s){var o,p,d,f,a;if(mg.call(this,"__ee__")&&(f=this.__ee__[s],!!f))if(typeof f=="object"){for(p=arguments.length,a=new Array(p-1),o=1;o<p;++o)a[o-1]=arguments[o];for(f=f.slice(),o=0;d=f[o];++o)pg.call(d,this,a)}else switch(arguments.length){case 1:dg.call(f,this);break;case 2:dg.call(f,this,arguments[1]);break;case 3:dg.call(f,this,arguments[1],arguments[2]);break;default:for(p=arguments.length,a=new Array(p-1),o=1;o<p;++o)a[o-1]=arguments[o];pg.call(f,this,a)}};e0={on:jp,once:gg,off:Np,emit:yg};_g={on:Fp(jp),once:Fp(gg),off:Fp(Np),emit:Fp(yg)};t0=Qx({},_g);i0.exports=vg=function(s){return s==null?Jx(t0):Qx(Object(s),_g)};vg.methods=e0});var mc=ze((Pj,u0)=>{function Ro(s){return{prev:null,next:null,data:s}}function ku(s,o,p){var d;return Cu!==null?(d=Cu,Cu=Cu.cursor,d.prev=o,d.next=p,d.cursor=s.cursor):d={prev:o,next:p,cursor:s.cursor},s.cursor=d,d}function Pu(s){var o=s.cursor;s.cursor=o.cursor,o.prev=null,o.next=null,o.cursor=Cu,Cu=o}var Cu=null,Yt=function(){this.cursor=null,this.head=null,this.tail=null};Yt.createItem=Ro;Yt.prototype.createItem=Ro;Yt.prototype.updateCursors=function(s,o,p,d){for(var f=this.cursor;f!==null;)f.prev===s&&(f.prev=o),f.next===p&&(f.next=d),f=f.cursor};Yt.prototype.getSize=function(){for(var s=0,o=this.head;o;)s++,o=o.next;return s};Yt.prototype.fromArray=function(s){var o=null;this.head=null;for(var p=0;p<s.length;p++){var d=Ro(s[p]);o!==null?o.next=d:this.head=d,d.prev=o,o=d}return this.tail=o,this};Yt.prototype.toArray=function(){for(var s=this.head,o=[];s;)o.push(s.data),s=s.next;return o};Yt.prototype.toJSON=Yt.prototype.toArray;Yt.prototype.isEmpty=function(){return this.head===null};Yt.prototype.first=function(){return this.head&&this.head.data};Yt.prototype.last=function(){return this.tail&&this.tail.data};Yt.prototype.each=function(s,o){var p;o===void 0&&(o=this);for(var d=ku(this,null,this.head);d.next!==null;)p=d.next,d.next=p.next,s.call(o,p.data,p,this);Pu(this)};Yt.prototype.forEach=Yt.prototype.each;Yt.prototype.eachRight=function(s,o){var p;o===void 0&&(o=this);for(var d=ku(this,this.tail,null);d.prev!==null;)p=d.prev,d.prev=p.prev,s.call(o,p.data,p,this);Pu(this)};Yt.prototype.forEachRight=Yt.prototype.eachRight;Yt.prototype.reduce=function(s,o,p){var d;p===void 0&&(p=this);for(var f=ku(this,null,this.head),a=o;f.next!==null;)d=f.next,f.next=d.next,a=s.call(p,a,d.data,d,this);return Pu(this),a};Yt.prototype.reduceRight=function(s,o,p){var d;p===void 0&&(p=this);for(var f=ku(this,this.tail,null),a=o;f.prev!==null;)d=f.prev,f.prev=d.prev,a=s.call(p,a,d.data,d,this);return Pu(this),a};Yt.prototype.nextUntil=function(s,o,p){if(s!==null){var d;p===void 0&&(p=this);for(var f=ku(this,null,s);f.next!==null&&(d=f.next,f.next=d.next,!o.call(p,d.data,d,this)););Pu(this)}};Yt.prototype.prevUntil=function(s,o,p){if(s!==null){var d;p===void 0&&(p=this);for(var f=ku(this,s,null);f.prev!==null&&(d=f.prev,f.prev=d.prev,!o.call(p,d.data,d,this)););Pu(this)}};Yt.prototype.some=function(s,o){var p=this.head;for(o===void 0&&(o=this);p!==null;){if(s.call(o,p.data,p,this))return!0;p=p.next}return!1};Yt.prototype.map=function(s,o){var p=new Yt,d=this.head;for(o===void 0&&(o=this);d!==null;)p.appendData(s.call(o,d.data,d,this)),d=d.next;return p};Yt.prototype.filter=function(s,o){var p=new Yt,d=this.head;for(o===void 0&&(o=this);d!==null;)s.call(o,d.data,d,this)&&p.appendData(d.data),d=d.next;return p};Yt.prototype.clear=function(){this.head=null,this.tail=null};Yt.prototype.copy=function(){for(var s=new Yt,o=this.head;o!==null;)s.insert(Ro(o.data)),o=o.next;return s};Yt.prototype.prepend=function(s){return this.updateCursors(null,s,this.head,s),this.head!==null?(this.head.prev=s,s.next=this.head):this.tail=s,this.head=s,this};Yt.prototype.prependData=function(s){return this.prepend(Ro(s))};Yt.prototype.append=function(s){return this.insert(s)};Yt.prototype.appendData=function(s){return this.insert(Ro(s))};Yt.prototype.insert=function(s,o){if(o!=null)if(this.updateCursors(o.prev,s,o,s),o.prev===null){if(this.head!==o)throw new Error("before doesn't belong to list");this.head=s,o.prev=s,s.next=o,this.updateCursors(null,s)}else o.prev.next=s,s.prev=o.prev,o.prev=s,s.next=o;else this.updateCursors(this.tail,s,null,s),this.tail!==null?(this.tail.next=s,s.prev=this.tail):this.head=s,this.tail=s;return this};Yt.prototype.insertData=function(s,o){return this.insert(Ro(s),o)};Yt.prototype.remove=function(s){if(this.updateCursors(s,s.prev,s,s.next),s.prev!==null)s.prev.next=s.next;else{if(this.head!==s)throw new Error("item doesn't belong to list");this.head=s.next}if(s.next!==null)s.next.prev=s.prev;else{if(this.tail!==s)throw new Error("item doesn't belong to list");this.tail=s.prev}return s.prev=null,s.next=null,s};Yt.prototype.push=function(s){this.insert(Ro(s))};Yt.prototype.pop=function(){if(this.tail!==null)return this.remove(this.tail)};Yt.prototype.unshift=function(s){this.prepend(Ro(s))};Yt.prototype.shift=function(){if(this.head!==null)return this.remove(this.head)};Yt.prototype.prependList=function(s){return this.insertList(s,this.head)};Yt.prototype.appendList=function(s){return this.insertList(s)};Yt.prototype.insertList=function(s,o){return s.head===null?this:(o!=null?(this.updateCursors(o.prev,s.tail,o,s.head),o.prev!==null?(o.prev.next=s.head,s.head.prev=o.prev):this.head=s.head,o.prev=s.tail,s.tail.next=o):(this.updateCursors(this.tail,s.tail,null,s.head),this.tail!==null?(this.tail.next=s.head,s.head.prev=this.tail):this.head=s.head,this.tail=s.tail),s.head=null,s.tail=null,this)};Yt.prototype.replace=function(s,o){"head"in o?this.insertList(o,s):this.insert(o,s),this.remove(s)};u0.exports=Yt});var Up=ze((Ej,d0)=>{d0.exports=function(o,p){var d=Object.create(SyntaxError.prototype),f=new Error;return d.name=o,d.message=p,Object.defineProperty(d,"stack",{get:function(){return(f.stack||"").replace(/^(.+\n){1,3}/,o+": "+p+`
`)}}),d}});var kg=ze((Aj,m0)=>{var Vz=Up(),Cg=100,h0=60,p0="    ";function f0(s,o){function p(ne,G){return d.slice(ne,G).map(function(ie,Y){for(var Se=String(ne+Y+1);Se.length<R;)Se=" "+Se;return Se+" |"+ie}).join(`
`)}var d=s.source.split(/\r\n?|\n|\f/),f=s.line,a=s.column,T=Math.max(1,f-o)-1,M=Math.min(f+o,d.length+1),R=Math.max(4,String(M).length)+1,V=0;a+=(p0.length-1)*(d[f-1].substr(0,a-1).match(/\t/g)||[]).length,a>Cg&&(V=a-h0+3,a=h0-2);for(var K=T;K<=M;K++)K>=0&&K<d.length&&(d[K]=d[K].replace(/\t/g,p0),d[K]=(V>0&&d[K].length>V?"\u2026":"")+d[K].substr(V,Cg-2)+(d[K].length>V+Cg-1?"\u2026":""));return[p(T,f),new Array(a+R+2).join("-")+"^",p(f,M)].filter(Boolean).join(`
`)}var Wz=function(s,o,p,d,f){var a=Vz("SyntaxError",s);return a.source=o,a.offset=p,a.line=d,a.column=f,a.sourceFragment=function(T){return f0(a,isNaN(T)?0:T)},Object.defineProperty(a,"formattedMessage",{get:function(){return"Parse error: "+a.message+`
`+f0(a,2)}}),a.parseError={offset:p,line:d,column:f},a};m0.exports=Wz});var Kd=ze((Mj,g0)=>{var Pg={EOF:0,Ident:1,Function:2,AtKeyword:3,Hash:4,String:5,BadString:6,Url:7,BadUrl:8,Delim:9,Number:10,Percentage:11,Dimension:12,WhiteSpace:13,CDO:14,CDC:15,Colon:16,Semicolon:17,Comma:18,LeftSquareBracket:19,RightSquareBracket:20,LeftParenthesis:21,RightParenthesis:22,LeftCurlyBracket:23,RightCurlyBracket:24,Comment:25},Gz=Object.keys(Pg).reduce(function(s,o){return s[Pg[o]]=o,s},{});g0.exports={TYPE:Pg,NAME:Gz}});var Mg=ze((zj,S0)=>{var Uz=0;function Sl(s){return s>=48&&s<=57}function Zz(s){return Sl(s)||s>=65&&s<=70||s>=97&&s<=102}function y0(s){return s>=65&&s<=90}function _0(s){return s>=97&&s<=122}function v0(s){return y0(s)||_0(s)}function b0(s){return s>=128}function Jd(s){return v0(s)||b0(s)||s===95}function Hz(s){return Jd(s)||Sl(s)||s===45}function x0(s){return s>=0&&s<=8||s===11||s>=14&&s<=31||s===127}function Ag(s){return s===10||s===13||s===12}function w0(s){return Ag(s)||s===32||s===9}function Eg(s,o){return!(s!==92||Ag(o)||o===Uz)}function $z(s,o,p){return s===45?Jd(o)||o===45||Eg(o,p):Jd(s)?!0:s===92?Eg(s,o):!1}function Yz(s,o,p){return s===43||s===45?Sl(o)?2:o===46&&Sl(p)?3:0:s===46?Sl(o)?2:0:Sl(s)?1:0}function Xz(s){return s===65279||s===65534?1:0}var gc=new Array(128);Ga.Eof=128;Ga.WhiteSpace=130;Ga.Digit=131;Ga.NameStart=132;Ga.NonPrintable=133;for(ka=0;ka<gc.length;ka++)switch(!0){case w0(ka):gc[ka]=Ga.WhiteSpace;break;case Sl(ka):gc[ka]=Ga.Digit;break;case Jd(ka):gc[ka]=Ga.NameStart;break;case x0(ka):gc[ka]=Ga.NonPrintable;break;default:gc[ka]=ka||Ga.Eof}var ka;function Ga(s){return s<128?gc[s]:Ga.NameStart}S0.exports={isDigit:Sl,isHexDigit:Zz,isUppercaseLetter:y0,isLowercaseLetter:_0,isLetter:v0,isNonAscii:b0,isNameStart:Jd,isName:Hz,isNonPrintable:x0,isNewline:Ag,isWhiteSpace:w0,isValidEscape:Eg,isIdentifierStart:$z,isNumberStart:Yz,isBOM:Xz,charCodeCategory:Ga}});var Mu=ze((Ij,A0)=>{var Au=Mg(),Zp=Au.isDigit,T0=Au.isHexDigit,C0=Au.isUppercaseLetter,Kz=Au.isName,Ig=Au.isWhiteSpace,k0=Au.isValidEscape;function Eu(s,o){return o<s.length?s.charCodeAt(o):0}function P0(s,o,p){return p===13&&Eu(s,o+1)===10?2:1}function E0(s,o,p){var d=s.charCodeAt(o);return C0(d)&&(d=d|32),d===p}function Jz(s,o,p,d){if(p-o!==d.length||o<0||p>s.length)return!1;for(var f=o;f<p;f++){var a=s.charCodeAt(f),T=d.charCodeAt(f-o);if(C0(a)&&(a=a|32),a!==T)return!1}return!0}function Qz(s,o){for(;o>=0&&Ig(s.charCodeAt(o));o--);return o+1}function eI(s,o){for(;o<s.length&&Ig(s.charCodeAt(o));o++);return o}function zg(s,o){for(;o<s.length&&Zp(s.charCodeAt(o));o++);return o}function Lg(s,o){if(o+=2,T0(Eu(s,o-1))){for(var p=Math.min(s.length,o+5);o<p&&T0(Eu(s,o));o++);var d=Eu(s,o);Ig(d)&&(o+=P0(s,o,d))}return o}function tI(s,o){for(;o<s.length;o++){var p=s.charCodeAt(o);if(!Kz(p)){if(k0(p,Eu(s,o+1))){o=Lg(s,o)-1;continue}break}}return o}function iI(s,o){var p=s.charCodeAt(o);if((p===43||p===45)&&(p=s.charCodeAt(o+=1)),Zp(p)&&(o=zg(s,o+1),p=s.charCodeAt(o)),p===46&&Zp(s.charCodeAt(o+1))&&(p=s.charCodeAt(o+=2),o=zg(s,o)),E0(s,o,101)){var d=0;p=s.charCodeAt(o+1),(p===45||p===43)&&(d=1,p=s.charCodeAt(o+2)),Zp(p)&&(o=zg(s,o+1+d+1))}return o}function rI(s,o){for(;o<s.length;o++){var p=s.charCodeAt(o);if(p===41){o++;break}k0(p,Eu(s,o+1))&&(o=Lg(s,o))}return o}A0.exports={consumeEscaped:Lg,consumeName:tI,consumeNumber:iI,consumeBadUrlRemnants:rI,cmpChar:E0,cmpStr:Jz,getNewlineLength:P0,findWhiteSpaceStart:Qz,findWhiteSpaceEnd:eI}});var eh=ze((Lj,D0)=>{var I0=Kd(),Qd=I0.TYPE,nI=I0.NAME,aI=Mu(),sI=aI.cmpStr,M0=Qd.EOF,z0=Qd.WhiteSpace,oI=Qd.Comment,_s=16777215,zu=24,L0=function(){this.offsetAndType=null,this.balance=null,this.reset()};L0.prototype={reset:function(){this.eof=!1,this.tokenIndex=-1,this.tokenType=0,this.tokenStart=this.firstCharOffset,this.tokenEnd=this.firstCharOffset},lookupType:function(s){return s+=this.tokenIndex,s<this.tokenCount?this.offsetAndType[s]>>zu:M0},lookupOffset:function(s){return s+=this.tokenIndex,s<this.tokenCount?this.offsetAndType[s-1]&_s:this.source.length},lookupValue:function(s,o){return s+=this.tokenIndex,s<this.tokenCount?sI(this.source,this.offsetAndType[s-1]&_s,this.offsetAndType[s]&_s,o):!1},getTokenStart:function(s){return s===this.tokenIndex?this.tokenStart:s>0?s<this.tokenCount?this.offsetAndType[s-1]&_s:this.offsetAndType[this.tokenCount]&_s:this.firstCharOffset},getRawLength:function(s,o){var p=s,d,f=this.offsetAndType[Math.max(p-1,0)]&_s,a;e:for(;p<this.tokenCount;p++){if(d=this.balance[p],d<s)break e;switch(a=this.offsetAndType[p]>>zu,o(a,this.source,f)){case 1:break e;case 2:p++;break e;default:this.balance[d]===p&&(p=d),f=this.offsetAndType[p]&_s}}return p-this.tokenIndex},isBalanceEdge:function(s){return this.balance[this.tokenIndex]<s},isDelim:function(s,o){return o?this.lookupType(o)===Qd.Delim&&this.source.charCodeAt(this.lookupOffset(o))===s:this.tokenType===Qd.Delim&&this.source.charCodeAt(this.tokenStart)===s},getTokenValue:function(){return this.source.substring(this.tokenStart,this.tokenEnd)},getTokenLength:function(){return this.tokenEnd-this.tokenStart},substrToCursor:function(s){return this.source.substring(s,this.tokenStart)},skipWS:function(){for(var s=this.tokenIndex,o=0;s<this.tokenCount&&this.offsetAndType[s]>>zu===z0;s++,o++);o>0&&this.skip(o)},skipSC:function(){for(;this.tokenType===z0||this.tokenType===oI;)this.next()},skip:function(s){var o=this.tokenIndex+s;o<this.tokenCount?(this.tokenIndex=o,this.tokenStart=this.offsetAndType[o-1]&_s,o=this.offsetAndType[o],this.tokenType=o>>zu,this.tokenEnd=o&_s):(this.tokenIndex=this.tokenCount,this.next())},next:function(){var s=this.tokenIndex+1;s<this.tokenCount?(this.tokenIndex=s,this.tokenStart=this.tokenEnd,s=this.offsetAndType[s],this.tokenType=s>>zu,this.tokenEnd=s&_s):(this.tokenIndex=this.tokenCount,this.eof=!0,this.tokenType=M0,this.tokenStart=this.tokenEnd=this.source.length)},forEachToken(s){for(var o=0,p=this.firstCharOffset;o<this.tokenCount;o++){var d=p,f=this.offsetAndType[o],a=f&_s,T=f>>zu;p=a,s(T,d,a,o)}},dump(){var s=new Array(this.tokenCount);return this.forEachToken((o,p,d,f)=>{s[f]={idx:f,type:nI[o],chunk:this.source.substring(p,d),balance:this.balance[f]}}),s}};D0.exports=L0});var Hp=ze((Dj,O0)=>{function lI(s){return s}function cI(s){return s.min===0&&s.max===0?"*":s.min===0&&s.max===1?"?":s.min===1&&s.max===0?s.comma?"#":"+":s.min===1&&s.max===1?"":(s.comma?"#":"")+(s.min===s.max?"{"+s.min+"}":"{"+s.min+","+(s.max!==0?s.max:"")+"}")}function uI(s){if(s.type==="Range")return" ["+(s.min===null?"-\u221E":s.min)+","+(s.max===null?"\u221E":s.max)+"]";throw new Error("Unknown node type `"+s.type+"`")}function dI(s,o,p,d){var f=s.combinator===" "||d?s.combinator:" "+s.combinator+" ",a=s.terms.map(function(T){return Dg(T,o,p,d)}).join(f);return(s.explicit||p)&&(a=(d||a[0]===","?"[":"[ ")+a+(d?"]":" ]")),a}function Dg(s,o,p,d){var f;switch(s.type){case"Group":f=dI(s,o,p,d)+(s.disallowEmpty?"!":"");break;case"Multiplier":return Dg(s.term,o,p,d)+o(cI(s),s);case"Type":f="<"+s.name+(s.opts?o(uI(s.opts),s.opts):"")+">";break;case"Property":f="<'"+s.name+"'>";break;case"Keyword":f=s.name;break;case"AtKeyword":f="@"+s.name;break;case"Function":f=s.name+"(";break;case"String":case"Token":f=s.value;break;case"Comma":f=",";break;default:throw new Error("Unknown node type `"+s.type+"`")}return o(f,s)}O0.exports=function(s,o){var p=lI,d=!1,f=!1;return typeof o=="function"?p=o:o&&(d=!!o.forceBraces,f=!!o.compact,typeof o.decorate=="function"&&(p=o.decorate)),Dg(s,p,d,f)}});var Og=ze((Oj,F0)=>{var B0=Up(),hI=Hp(),R0={offset:0,line:1,column:1};function pI(s,o){let p=s.tokens,d=s.longestMatch,f=d<p.length&&p[d].node||null,a=f!==o?f:null,T=0,M=0,R=0,V="",K,ne;for(let G=0;G<p.length;G++){let ie=p[G].value;G===d&&(M=ie.length,T=V.length),a!==null&&p[G].node===a&&(G<=d?R++:R=0),V+=ie}return d===p.length||R>1?(K=$p(a||o,"end")||th(R0,V),ne=th(K)):(K=$p(a,"start")||th($p(o,"start")||R0,V.slice(0,T)),ne=$p(a,"end")||th(K,V.substr(T,M))),{css:V,mismatchOffset:T,mismatchLength:M,start:K,end:ne}}function $p(s,o){let p=s&&s.loc&&s.loc[o];return p?"line"in p?th(p):p:null}function th({offset:s,line:o,column:p},d){let f={offset:s,line:o,column:p};if(d){let a=d.split(/\n|\r\n?|\f/);f.offset+=d.length,f.line+=a.length-1,f.column=a.length===1?f.column+d.length:a.pop().length+1}return f}var fI=function(s,o){let p=B0("SyntaxReferenceError",s+(o?" `"+o+"`":""));return p.reference=o,p},mI=function(s,o,p,d){let f=B0("SyntaxMatchError",s),{css:a,mismatchOffset:T,mismatchLength:M,start:R,end:V}=pI(d,p);return f.rawMessage=s,f.syntax=o?hI(o):"<generic>",f.css=a,f.mismatchOffset=T,f.mismatchLength=M,f.message=s+`
  syntax: `+f.syntax+`
   value: `+(a||"<empty string>")+`
  --------`+new Array(f.mismatchOffset+1).join("-")+"^",Object.assign(f,R),f.loc={source:p&&p.loc&&p.loc.source||"<unknown>",start:R,end:V},f};F0.exports={SyntaxReferenceError:fI,SyntaxMatchError:mI}});var Kp=ze((Rj,j0)=>{var Yp=Object.prototype.hasOwnProperty,Iu=Object.create(null),Lu=Object.create(null),Xp=45;function Rg(s,o){return o=o||0,s.length-o>=2&&s.charCodeAt(o)===Xp&&s.charCodeAt(o+1)===Xp}function Bg(s,o){if(o=o||0,s.length-o>=3&&s.charCodeAt(o)===Xp&&s.charCodeAt(o+1)!==Xp){var p=s.indexOf("-",o+2);if(p!==-1)return s.substring(o,p+1)}return""}function gI(s){if(Yp.call(Iu,s))return Iu[s];var o=s.toLowerCase();if(Yp.call(Iu,o))return Iu[s]=Iu[o];var p=Rg(o,0),d=p?"":Bg(o,0);return Iu[s]=Object.freeze({basename:o.substr(d.length),name:o,vendor:d,prefix:d,custom:p})}function yI(s){if(Yp.call(Lu,s))return Lu[s];var o=s,p=s[0];p==="/"?p=s[1]==="/"?"//":"/":p!=="_"&&p!=="*"&&p!=="$"&&p!=="#"&&p!=="+"&&p!=="&"&&(p="");var d=Rg(o,p.length);if(!d&&(o=o.toLowerCase(),Yp.call(Lu,o)))return Lu[s]=Lu[o];var f=d?"":Bg(o,p.length),a=o.substr(0,p.length+f.length);return Lu[s]=Object.freeze({basename:o.substr(a.length),name:o.substr(p.length),hack:p,vendor:f,prefix:a,custom:d})}j0.exports={keyword:gI,property:yI,isCustomProperty:Rg,vendorPrefix:Bg}});var Fg=ze((Bj,N0)=>{var _I=16384,vI=typeof Uint32Array!="undefined"?Uint32Array:Array;N0.exports=function(o,p){return o===null||o.length<p?new vI(Math.max(p+1024,_I)):o}});var vt=ze((Fj,Z0)=>{var bI=eh(),q0=Fg(),Vg=Kd(),Kt=Vg.TYPE,Bo=Mg(),V0=Bo.isNewline,xI=Bo.isName,Jp=Bo.isValidEscape,jg=Bo.isNumberStart,Ng=Bo.isIdentifierStart,Ua=Bo.charCodeCategory,wI=Bo.isBOM,Fo=Mu(),SI=Fo.cmpStr,W0=Fo.getNewlineLength,Qp=Fo.findWhiteSpaceEnd,G0=Fo.consumeEscaped,ef=Fo.consumeName,TI=Fo.consumeNumber,qg=Fo.consumeBadUrlRemnants,U0=16777215,Du=24;function tf(s,o){function p(Pe){return Pe<M?s.charCodeAt(Pe):0}function d(){if(G=TI(s,G),Ng(p(G),p(G+1),p(G+2))){_e=Kt.Dimension,G=ef(s,G);return}if(p(G)===37){_e=Kt.Percentage,G++;return}_e=Kt.Number}function f(){let Pe=G;if(G=ef(s,G),SI(s,Pe,G,"url")&&p(G)===40){if(G=Qp(s,G+1),p(G)===34||p(G)===39){_e=Kt.Function,G=Pe+4;return}T();return}if(p(G)===40){_e=Kt.Function,G++;return}_e=Kt.Ident}function a(Pe){for(Pe||(Pe=p(G++)),_e=Kt.String;G<s.length;G++){var Ye=s.charCodeAt(G);switch(Ua(Ye)){case Pe:G++;return;case Ua.Eof:return;case Ua.WhiteSpace:if(V0(Ye)){G+=W0(s,G,Ye),_e=Kt.BadString;return}break;case 92:if(G===s.length-1)break;var st=p(G+1);V0(st)?G+=W0(s,G+1,st):Jp(Ye,st)&&(G=G0(s,G)-1);break}}}function T(){for(_e=Kt.Url,G=Qp(s,G);G<s.length;G++){var Pe=s.charCodeAt(G);switch(Ua(Pe)){case 41:G++;return;case Ua.Eof:return;case Ua.WhiteSpace:if(G=Qp(s,G),p(G)===41||G>=s.length){G<s.length&&G++;return}G=qg(s,G),_e=Kt.BadUrl;return;case 34:case 39:case 40:case Ua.NonPrintable:G=qg(s,G),_e=Kt.BadUrl;return;case 92:if(Jp(Pe,p(G+1))){G=G0(s,G)-1;break}G=qg(s,G),_e=Kt.BadUrl;return}}}o||(o=new bI),s=String(s||"");for(var M=s.length,R=q0(o.offsetAndType,M+1),V=q0(o.balance,M+1),K=0,ne=wI(p(0)),G=ne,ie=0,Y=0,Se=0;G<M;){var je=s.charCodeAt(G),_e=0;switch(V[K]=M,Ua(je)){case Ua.WhiteSpace:_e=Kt.WhiteSpace,G=Qp(s,G+1);break;case 34:a();break;case 35:xI(p(G+1))||Jp(p(G+1),p(G+2))?(_e=Kt.Hash,G=ef(s,G+1)):(_e=Kt.Delim,G++);break;case 39:a();break;case 40:_e=Kt.LeftParenthesis,G++;break;case 41:_e=Kt.RightParenthesis,G++;break;case 43:jg(je,p(G+1),p(G+2))?d():(_e=Kt.Delim,G++);break;case 44:_e=Kt.Comma,G++;break;case 45:jg(je,p(G+1),p(G+2))?d():p(G+1)===45&&p(G+2)===62?(_e=Kt.CDC,G=G+3):Ng(je,p(G+1),p(G+2))?f():(_e=Kt.Delim,G++);break;case 46:jg(je,p(G+1),p(G+2))?d():(_e=Kt.Delim,G++);break;case 47:p(G+1)===42?(_e=Kt.Comment,G=s.indexOf("*/",G+2)+2,G===1&&(G=s.length)):(_e=Kt.Delim,G++);break;case 58:_e=Kt.Colon,G++;break;case 59:_e=Kt.Semicolon,G++;break;case 60:p(G+1)===33&&p(G+2)===45&&p(G+3)===45?(_e=Kt.CDO,G=G+4):(_e=Kt.Delim,G++);break;case 64:Ng(p(G+1),p(G+2),p(G+3))?(_e=Kt.AtKeyword,G=ef(s,G+1)):(_e=Kt.Delim,G++);break;case 91:_e=Kt.LeftSquareBracket,G++;break;case 92:Jp(je,p(G+1))?f():(_e=Kt.Delim,G++);break;case 93:_e=Kt.RightSquareBracket,G++;break;case 123:_e=Kt.LeftCurlyBracket,G++;break;case 125:_e=Kt.RightCurlyBracket,G++;break;case Ua.Digit:d();break;case Ua.NameStart:f();break;case Ua.Eof:break;default:_e=Kt.Delim,G++}switch(_e){case ie:for(Se=Y&U0,Y=V[Se],ie=Y>>Du,V[K]=Se,V[Se++]=K;Se<K;Se++)V[Se]===M&&(V[Se]=K);break;case Kt.LeftParenthesis:case Kt.Function:V[K]=Y,ie=Kt.RightParenthesis,Y=ie<<Du|K;break;case Kt.LeftSquareBracket:V[K]=Y,ie=Kt.RightSquareBracket,Y=ie<<Du|K;break;case Kt.LeftCurlyBracket:V[K]=Y,ie=Kt.RightCurlyBracket,Y=ie<<Du|K;break}R[K++]=_e<<Du|G}for(R[K]=Kt.EOF<<Du|G,V[K]=M,V[M]=M;Y!==0;)Se=Y&U0,Y=V[Se],V[Se]=M;return o.source=s,o.firstCharOffset=ne,o.offsetAndType=R,o.tokenCount=K,o.balance=V,o.reset(),o.next(),o}Object.keys(Vg).forEach(function(s){tf[s]=Vg[s]});Object.keys(Bo).forEach(function(s){tf[s]=Bo[s]});Object.keys(Fo).forEach(function(s){tf[s]=Fo[s]});Z0.exports=tf});var Y0=ze((jj,$0)=>{var H0=vt().isDigit,Wg=vt().cmpChar,Ru=vt().TYPE,CI=Ru.Delim,kI=Ru.WhiteSpace,PI=Ru.Comment,rf=Ru.Ident,Zg=Ru.Number,EI=Ru.Dimension,rh=43,io=45,Gg=110,Ou=!0,AI=!1;function Hg(s,o){return s!==null&&s.type===CI&&s.value.charCodeAt(0)===o}function ih(s,o,p){for(;s!==null&&(s.type===kI||s.type===PI);)s=p(++o);return o}function Tl(s,o,p,d){if(!s)return 0;var f=s.value.charCodeAt(o);if(f===rh||f===io){if(p)return 0;o++}for(;o<s.value.length;o++)if(!H0(s.value.charCodeAt(o)))return 0;return d+1}function Ug(s,o,p){var d=!1,f=ih(s,o,p);if(s=p(f),s===null)return o;if(s.type!==Zg)if(Hg(s,rh)||Hg(s,io)){if(d=!0,f=ih(p(++f),f,p),s=p(f),s===null&&s.type!==Zg)return 0}else return o;if(!d){var a=s.value.charCodeAt(0);if(a!==rh&&a!==io)return 0}return Tl(s,d?0:1,d,f)}$0.exports=function(o,p){var d=0;if(!o)return 0;if(o.type===Zg)return Tl(o,0,AI,d);if(o.type===rf&&o.value.charCodeAt(0)===io){if(!Wg(o.value,1,Gg))return 0;switch(o.value.length){case 2:return Ug(p(++d),d,p);case 3:return o.value.charCodeAt(2)!==io?0:(d=ih(p(++d),d,p),o=p(d),Tl(o,0,Ou,d));default:return o.value.charCodeAt(2)!==io?0:Tl(o,3,Ou,d)}}else if(o.type===rf||Hg(o,rh)&&p(d+1).type===rf){if(o.type!==rf&&(o=p(++d)),o===null||!Wg(o.value,0,Gg))return 0;switch(o.value.length){case 1:return Ug(p(++d),d,p);case 2:return o.value.charCodeAt(1)!==io?0:(d=ih(p(++d),d,p),o=p(d),Tl(o,0,Ou,d));default:return o.value.charCodeAt(1)!==io?0:Tl(o,2,Ou,d)}}else if(o.type===EI){for(var f=o.value.charCodeAt(0),a=f===rh||f===io?1:0,T=a;T<o.value.length&&H0(o.value.charCodeAt(T));T++);return T===a||!Wg(o.value,T,Gg)?0:T+1===o.value.length?Ug(p(++d),d,p):o.value.charCodeAt(T+1)!==io?0:T+2===o.value.length?(d=ih(p(++d),d,p),o=p(d),Tl(o,0,Ou,d)):Tl(o,T+2,Ou,d)}return 0}});var i1=ze((Nj,t1)=>{var MI=vt().isHexDigit,zI=vt().cmpChar,af=vt().TYPE,X0=af.Ident,II=af.Delim,K0=af.Number,J0=af.Dimension,$g=43,Q0=45,e1=63,LI=117;function Xg(s,o){return s!==null&&s.type===II&&s.value.charCodeAt(0)===o}function Yg(s,o){return s.value.charCodeAt(0)===o}function nh(s,o,p){for(var d=o,f=0;d<s.value.length;d++){var a=s.value.charCodeAt(d);if(a===Q0&&p&&f!==0)return nh(s,o+f+1,!1)>0?6:0;if(!MI(a)||++f>6)return 0}return f}function nf(s,o,p){if(!s)return 0;for(;Xg(p(o),e1);){if(++s>6)return 0;o++}return o}t1.exports=function(o,p){var d=0;if(o===null||o.type!==X0||!zI(o.value,0,LI)||(o=p(++d),o===null))return 0;if(Xg(o,$g))return o=p(++d),o===null?0:o.type===X0?nf(nh(o,0,!0),++d,p):Xg(o,e1)?nf(1,++d,p):0;if(o.type===K0){if(!Yg(o,$g))return 0;var f=nh(o,1,!0);return f===0?0:(o=p(++d),o===null?d:o.type===J0||o.type===K0?!Yg(o,Q0)||!nh(o,1,!1)?0:d+1:nf(f,d,p))}return o.type===J0&&Yg(o,$g)?nf(nh(o,1,!0),++d,p):0}});var u1=ze((qj,c1)=>{var Bu=vt(),DI=Bu.isIdentifierStart,OI=Bu.isHexDigit,n1=Bu.isDigit,RI=Bu.cmpStr,a1=Bu.consumeNumber,Bt=Bu.TYPE,BI=Y0(),FI=i1(),jI=["unset","initial","inherit"],NI=["calc(","-moz-calc(","-webkit-calc("],qI={px:!0,mm:!0,cm:!0,in:!0,pt:!0,pc:!0,q:!0,em:!0,ex:!0,ch:!0,rem:!0,vh:!0,vw:!0,vmin:!0,vmax:!0,vm:!0},VI={deg:!0,grad:!0,rad:!0,turn:!0},WI={s:!0,ms:!0},GI={hz:!0,khz:!0},UI={dpi:!0,dpcm:!0,dppx:!0,x:!0},ZI={fr:!0},HI={db:!0},$I={st:!0};function ah(s,o){return o<s.length?s.charCodeAt(o):0}function Kg(s,o){return RI(s,0,s.length,o)}function s1(s,o){for(var p=0;p<o.length;p++)if(Kg(s,o[p]))return!0;return!1}function o1(s,o){return o!==s.length-2?!1:s.charCodeAt(o)===92&&n1(s.charCodeAt(o+1))}function sf(s,o,p){if(s&&s.type==="Range"){var d=Number(p!==void 0&&p!==o.length?o.substr(0,p):o);if(isNaN(d)||s.min!==null&&d<s.min||s.max!==null&&d>s.max)return!0}return!1}function l1(s,o){var p=s.index,d=0;do if(d++,s.balance<=p)break;while(s=o(d));return d}function Za(s){return function(o,p,d){return o===null?0:o.type===Bt.Function&&s1(o.value,NI)?l1(o,p):s(o,p,d)}}function ir(s){return function(o){return o===null||o.type!==s?0:1}}function YI(s){return s=s+"(",function(o,p){return o!==null&&Kg(o.value,s)?l1(o,p):0}}function XI(s){if(s===null||s.type!==Bt.Ident)return 0;var o=s.value.toLowerCase();return s1(o,jI)||Kg(o,"default")?0:1}function KI(s){return s===null||s.type!==Bt.Ident||ah(s.value,0)!==45||ah(s.value,1)!==45?0:1}function JI(s){if(s===null||s.type!==Bt.Hash)return 0;var o=s.value.length;if(o!==4&&o!==5&&o!==7&&o!==9)return 0;for(var p=1;p<o;p++)if(!OI(s.value.charCodeAt(p)))return 0;return 1}function QI(s){return s===null||s.type!==Bt.Hash||!DI(ah(s.value,1),ah(s.value,2),ah(s.value,3))?0:1}function eL(s,o){if(!s)return 0;var p=0,d=0,f=s.index;e:do{switch(s.type){case Bt.BadString:case Bt.BadUrl:break e;case Bt.RightCurlyBracket:case Bt.RightParenthesis:case Bt.RightSquareBracket:if(s.balance>s.index||s.balance<f)break e;d--;break;case Bt.Semicolon:if(d===0)break e;break;case Bt.Delim:if(s.value==="!"&&d===0)break e;break;case Bt.Function:case Bt.LeftParenthesis:case Bt.LeftSquareBracket:case Bt.LeftCurlyBracket:d++;break}if(p++,s.balance<=f)break}while(s=o(p));return p}function tL(s,o){if(!s)return 0;var p=s.index,d=0;e:do{switch(s.type){case Bt.BadString:case Bt.BadUrl:break e;case Bt.RightCurlyBracket:case Bt.RightParenthesis:case Bt.RightSquareBracket:if(s.balance>s.index||s.balance<p)break e;break}if(d++,s.balance<=p)break}while(s=o(d));return d}function jo(s){return function(o,p,d){if(o===null||o.type!==Bt.Dimension)return 0;var f=a1(o.value,0);if(s!==null){var a=o.value.indexOf("\\",f),T=a===-1||!o1(o.value,a)?o.value.substr(f):o.value.substring(f,a);if(s.hasOwnProperty(T.toLowerCase())===!1)return 0}return sf(d,o.value,f)?0:1}}function iL(s,o,p){return s===null||s.type!==Bt.Percentage||sf(p,s.value,s.value.length-1)?0:1}function r1(s){return typeof s!="function"&&(s=function(){return 0}),function(o,p,d){return o!==null&&o.type===Bt.Number&&Number(o.value)===0?1:s(o,p,d)}}function rL(s,o,p){if(s===null)return 0;var d=a1(s.value,0),f=d===s.value.length;return!f&&!o1(s.value,d)||sf(p,s.value,d)?0:1}function nL(s,o,p){if(s===null||s.type!==Bt.Number)return 0;for(var d=s.value.charCodeAt(0)===43||s.value.charCodeAt(0)===45?1:0;d<s.value.length;d++)if(!n1(s.value.charCodeAt(d)))return 0;return sf(p,s.value,d)?0:1}c1.exports={"ident-token":ir(Bt.Ident),"function-token":ir(Bt.Function),"at-keyword-token":ir(Bt.AtKeyword),"hash-token":ir(Bt.Hash),"string-token":ir(Bt.String),"bad-string-token":ir(Bt.BadString),"url-token":ir(Bt.Url),"bad-url-token":ir(Bt.BadUrl),"delim-token":ir(Bt.Delim),"number-token":ir(Bt.Number),"percentage-token":ir(Bt.Percentage),"dimension-token":ir(Bt.Dimension),"whitespace-token":ir(Bt.WhiteSpace),"CDO-token":ir(Bt.CDO),"CDC-token":ir(Bt.CDC),"colon-token":ir(Bt.Colon),"semicolon-token":ir(Bt.Semicolon),"comma-token":ir(Bt.Comma),"[-token":ir(Bt.LeftSquareBracket),"]-token":ir(Bt.RightSquareBracket),"(-token":ir(Bt.LeftParenthesis),")-token":ir(Bt.RightParenthesis),"{-token":ir(Bt.LeftCurlyBracket),"}-token":ir(Bt.RightCurlyBracket),string:ir(Bt.String),ident:ir(Bt.Ident),"custom-ident":XI,"custom-property-name":KI,"hex-color":JI,"id-selector":QI,"an-plus-b":BI,urange:FI,"declaration-value":eL,"any-value":tL,dimension:Za(jo(null)),angle:Za(jo(VI)),decibel:Za(jo(HI)),frequency:Za(jo(GI)),flex:Za(jo(ZI)),length:Za(r1(jo(qI))),resolution:Za(jo(UI)),semitones:Za(jo($I)),time:Za(jo(WI)),percentage:Za(iL),zero:r1(),number:Za(rL),integer:Za(nL),"-ms-legacy-expression":YI("expression")}});var Jg=ze((Vj,d1)=>{var aL=Up();d1.exports=function(o,p,d){var f=aL("SyntaxError",o);return f.input=p,f.offset=d,f.rawMessage=o,f.message=f.rawMessage+`
  `+f.input+`
--`+new Array((f.offset||f.input.length)+1).join("-")+"^",f}});var f1=ze((Wj,p1)=>{var sL=Jg(),oL=9,lL=10,cL=12,uL=13,dL=32,h1=function(s){this.str=s,this.pos=0};h1.prototype={charCodeAt:function(s){return s<this.str.length?this.str.charCodeAt(s):0},charCode:function(){return this.charCodeAt(this.pos)},nextCharCode:function(){return this.charCodeAt(this.pos+1)},nextNonWsCode:function(s){return this.charCodeAt(this.findWsEnd(s))},findWsEnd:function(s){for(;s<this.str.length;s++){var o=this.str.charCodeAt(s);if(o!==uL&&o!==lL&&o!==cL&&o!==dL&&o!==oL)break}return s},substringToPos:function(s){return this.str.substring(this.pos,this.pos=s)},eat:function(s){this.charCode()!==s&&this.error("Expect `"+String.fromCharCode(s)+"`"),this.pos++},peek:function(){return this.pos<this.str.length?this.str.charAt(this.pos++):""},error:function(s){throw new sL(s,this.str,this.pos)}};p1.exports=h1});var pf=ze((Gj,z1)=>{var hL=f1(),pL=9,fL=10,mL=12,gL=13,yL=32,w1=33,S1=35,m1=38,of=39,T1=40,_L=41,C1=42,k1=43,ty=44,g1=45,iy=60,P1=62,E1=63,vL=64,df=91,ry=93,lf=123,y1=124,_1=125,v1=8734,ey=bL(function(s){return/[a-zA-Z0-9\-]/.test(s)}),b1={" ":1,"&&":2,"||":3,"|":4};function bL(s){for(var o=typeof Uint32Array=="function"?new Uint32Array(128):new Array(128),p=0;p<128;p++)o[p]=s(String.fromCharCode(p))?1:0;return o}function cf(s){return s.substringToPos(s.findWsEnd(s.pos))}function hf(s){for(var o=s.pos;o<s.str.length;o++){var p=s.str.charCodeAt(o);if(p>=128||ey[p]===0)break}return s.pos===o&&s.error("Expect a keyword"),s.substringToPos(o)}function uf(s){for(var o=s.pos;o<s.str.length;o++){var p=s.str.charCodeAt(o);if(p<48||p>57)break}return s.pos===o&&s.error("Expect a number"),s.substringToPos(o)}function xL(s){var o=s.str.indexOf("'",s.pos+1);return o===-1&&(s.pos=s.str.length,s.error("Expect an apostrophe")),s.substringToPos(o+1)}function x1(s){var o=null,p=null;return s.eat(lf),o=uf(s),s.charCode()===ty?(s.pos++,s.charCode()!==_1&&(p=uf(s))):p=o,s.eat(_1),{min:Number(o),max:p?Number(p):0}}function wL(s){var o=null,p=!1;switch(s.charCode()){case C1:s.pos++,o={min:0,max:0};break;case k1:s.pos++,o={min:1,max:0};break;case E1:s.pos++,o={min:0,max:1};break;case S1:s.pos++,p=!0,s.charCode()===lf?o=x1(s):o={min:1,max:0};break;case lf:o=x1(s);break;default:return null}return{type:"Multiplier",comma:p,min:o.min,max:o.max,term:null}}function sh(s,o){var p=wL(s);return p!==null?(p.term=o,p):o}function Qg(s){var o=s.peek();return o===""?null:{type:"Token",value:o}}function SL(s){var o;return s.eat(iy),s.eat(of),o=hf(s),s.eat(of),s.eat(P1),sh(s,{type:"Property",name:o})}function TL(s){var o=null,p=null,d=1;return s.eat(df),s.charCode()===g1&&(s.peek(),d=-1),d==-1&&s.charCode()===v1?s.peek():o=d*Number(uf(s)),cf(s),s.eat(ty),cf(s),s.charCode()===v1?s.peek():(d=1,s.charCode()===g1&&(s.peek(),d=-1),p=d*Number(uf(s))),s.eat(ry),o===null&&p===null?null:{type:"Range",min:o,max:p}}function CL(s){var o,p=null;return s.eat(iy),o=hf(s),s.charCode()===T1&&s.nextCharCode()===_L&&(s.pos+=2,o+="()"),s.charCodeAt(s.findWsEnd(s.pos))===df&&(cf(s),p=TL(s)),s.eat(P1),sh(s,{type:"Type",name:o,opts:p})}function kL(s){var o;return o=hf(s),s.charCode()===T1?(s.pos++,{type:"Function",name:o}):sh(s,{type:"Keyword",name:o})}function PL(s,o){function p(M,R){return{type:"Group",terms:M,combinator:R,disallowEmpty:!1,explicit:!1}}for(o=Object.keys(o).sort(function(M,R){return b1[M]-b1[R]});o.length>0;){for(var d=o.shift(),f=0,a=0;f<s.length;f++){var T=s[f];T.type==="Combinator"&&(T.value===d?(a===-1&&(a=f-1),s.splice(f,1),f--):(a!==-1&&f-a>1&&(s.splice(a,f-a,p(s.slice(a,f),d)),f=a+1),a=-1))}a!==-1&&o.length&&s.splice(a,f-a,p(s.slice(a,f),d))}return d}function A1(s){for(var o=[],p={},d,f=null,a=s.pos;d=AL(s);)d.type!=="Spaces"&&(d.type==="Combinator"?((f===null||f.type==="Combinator")&&(s.pos=a,s.error("Unexpected combinator")),p[d.value]=!0):f!==null&&f.type!=="Combinator"&&(p[" "]=!0,o.push({type:"Combinator",value:" "})),o.push(d),f=d,a=s.pos);return f!==null&&f.type==="Combinator"&&(s.pos-=a,s.error("Unexpected combinator")),{type:"Group",terms:o,combinator:PL(o,p)||" ",disallowEmpty:!1,explicit:!1}}function EL(s){var o;return s.eat(df),o=A1(s),s.eat(ry),o.explicit=!0,s.charCode()===w1&&(s.pos++,o.disallowEmpty=!0),o}function AL(s){var o=s.charCode();if(o<128&&ey[o]===1)return kL(s);switch(o){case ry:break;case df:return sh(s,EL(s));case iy:return s.nextCharCode()===of?SL(s):CL(s);case y1:return{type:"Combinator",value:s.substringToPos(s.nextCharCode()===y1?s.pos+2:s.pos+1)};case m1:return s.pos++,s.eat(m1),{type:"Combinator",value:"&&"};case ty:return s.pos++,{type:"Comma"};case of:return sh(s,{type:"String",value:xL(s)});case yL:case pL:case fL:case gL:case mL:return{type:"Spaces",value:cf(s)};case vL:return o=s.nextCharCode(),o<128&&ey[o]===1?(s.pos++,{type:"AtKeyword",name:hf(s)}):Qg(s);case C1:case k1:case E1:case S1:case w1:break;case lf:if(o=s.nextCharCode(),o<48||o>57)return Qg(s);break;default:return Qg(s)}}function M1(s){var o=new hL(s),p=A1(o);return o.pos!==s.length&&o.error("Unexpected input"),p.terms.length===1&&p.terms[0].type==="Group"&&(p=p.terms[0]),p}M1("[a&&<b>#|<'c'>*||e() f{2} /,(% g#{1,2} h{2,})]!");z1.exports=M1});var ny=ze((Uj,L1)=>{var oh=function(){};function I1(s){return typeof s=="function"?s:oh}L1.exports=function(s,o,p){function d(T){switch(f.call(p,T),T.type){case"Group":T.terms.forEach(d);break;case"Multiplier":d(T.term);break;case"Type":case"Property":case"Keyword":case"AtKeyword":case"Function":case"String":case"Token":case"Comma":break;default:throw new Error("Unknown type: "+T.type)}a.call(p,T)}var f=oh,a=oh;if(typeof o=="function"?f=o:o&&(f=I1(o.enter),a=I1(o.leave)),f===oh&&a===oh)throw new Error("Neither `enter` nor `leave` walker handler is set or both aren't a function");d(s,p)}});var R1=ze((Zj,O1)=>{var ML=vt(),zL=eh(),No=new zL,IL={decorator:function(s){var o=null,p={len:0,node:null},d=[p],f="";return{children:s.children,node:function(a){var T=o;o=a,s.node.call(this,a),o=T},chunk:function(a){f+=a,p.node!==o?d.push({len:a.length,node:o}):p.len+=a.length},result:function(){return D1(f,d)}}}};function D1(s,o){var p=[],d=0,f=0,a=o?o[f].node:null;for(ML(s,No);!No.eof;){if(o)for(;f<o.length&&d+o[f].len<=No.tokenStart;)d+=o[f++].len,a=o[f].node;p.push({type:No.tokenType,value:No.getTokenValue(),index:No.tokenIndex,balance:No.balance[No.tokenIndex],node:a}),No.next()}return p}O1.exports=function(s,o){return typeof s=="string"?D1(s,null):o.generate(s,IL)}});var ly=ze((Hj,j1)=>{var LL=pf(),Ar={type:"Match"},qn={type:"Mismatch"},sy={type:"DisallowEmpty"},DL=40,OL=41;function kn(s,o,p){return o===Ar&&p===qn||s===Ar&&o===Ar&&p===Ar?s:(s.type==="If"&&s.else===qn&&o===Ar&&(o=s.then,s=s.match),{type:"If",match:s,then:o,else:p})}function F1(s){return s.length>2&&s.charCodeAt(s.length-2)===DL&&s.charCodeAt(s.length-1)===OL}function B1(s){return s.type==="Keyword"||s.type==="AtKeyword"||s.type==="Function"||s.type==="Type"&&F1(s.name)}function ay(s,o,p){switch(s){case" ":for(var R=Ar,d=o.length-1;d>=0;d--){var f=o[d];R=kn(f,R,qn)}return R;case"|":for(var R=qn,a=null,d=o.length-1;d>=0;d--){var f=o[d];if(B1(f)&&(a===null&&d>0&&B1(o[d-1])&&(a=Object.create(null),R=kn({type:"Enum",map:a},Ar,R)),a!==null)){var T=(F1(f.name)?f.name.slice(0,-1):f.name).toLowerCase();if(!(T in a)){a[T]=f;continue}}a=null,R=kn(f,Ar,R)}return R;case"&&":if(o.length>5)return{type:"MatchOnce",terms:o,all:!0};for(var R=qn,d=o.length-1;d>=0;d--){var f=o[d],M;o.length>1?M=ay(s,o.filter(function(ne){return ne!==f}),!1):M=Ar,R=kn(f,M,R)}return R;case"||":if(o.length>5)return{type:"MatchOnce",terms:o,all:!1};for(var R=p?Ar:qn,d=o.length-1;d>=0;d--){var f=o[d],M;o.length>1?M=ay(s,o.filter(function(G){return G!==f}),!0):M=Ar,R=kn(f,M,R)}return R}}function RL(s){var o=Ar,p=oy(s.term);if(s.max===0)p=kn(p,sy,qn),o=kn(p,null,qn),o.then=kn(Ar,Ar,o),s.comma&&(o.then.else=kn({type:"Comma",syntax:s},o,qn));else for(var d=s.min||1;d<=s.max;d++)s.comma&&o!==Ar&&(o=kn({type:"Comma",syntax:s},o,qn)),o=kn(p,kn(Ar,Ar,o),qn);if(s.min===0)o=kn(Ar,Ar,o);else for(var d=0;d<s.min-1;d++)s.comma&&o!==Ar&&(o=kn({type:"Comma",syntax:s},o,qn)),o=kn(p,o,qn);return o}function oy(s){if(typeof s=="function")return{type:"Generic",fn:s};switch(s.type){case"Group":var o=ay(s.combinator,s.terms.map(oy),!1);return s.disallowEmpty&&(o=kn(o,sy,qn)),o;case"Multiplier":return RL(s);case"Type":case"Property":return{type:s.type,name:s.name,syntax:s};case"Keyword":return{type:s.type,name:s.name.toLowerCase(),syntax:s};case"AtKeyword":return{type:s.type,name:"@"+s.name.toLowerCase(),syntax:s};case"Function":return{type:s.type,name:s.name.toLowerCase()+"(",syntax:s};case"String":return s.value.length===3?{type:"Token",value:s.value.charAt(1),syntax:s}:{type:s.type,value:s.value.substr(1,s.value.length-2).replace(/\\'/g,"'"),syntax:s};case"Token":return{type:s.type,value:s.value,syntax:s};case"Comma":return{type:s.type,syntax:s};default:throw new Error("Unknown node type:",s.type)}}j1.exports={MATCH:Ar,MISMATCH:qn,DISALLOW_EMPTY:sy,buildMatchGraph:function(s,o){return typeof s=="string"&&(s=LL(s)),{type:"MatchGraph",match:oy(s),syntax:o||null,source:s}}}});var X1=ze(($j,Y1)=>{var N1=Object.prototype.hasOwnProperty,uy=ly(),vs=uy.MATCH,ia=uy.MISMATCH,BL=uy.DISALLOW_EMPTY,ra=Kd().TYPE,U1=0,FL=1,ff=2,dy=3,q1="Match",jL="Mismatch",NL="Maximum iteration number exceeded (please fill an issue on https://github.com/csstree/csstree/issues)",V1=15e3,Z1=0;function H1(s){for(var o=null,p=null,d=s;d!==null;)p=d.prev,d.prev=o,o=d,d=p;return o}function cy(s,o){if(s.length!==o.length)return!1;for(var p=0;p<s.length;p++){var d=s.charCodeAt(p),f=o.charCodeAt(p);if(d>=65&&d<=90&&(d=d|32),d!==f)return!1}return!0}function qL(s){return s.type!==ra.Delim?!1:s.value!=="?"}function W1(s){return s===null?!0:s.type===ra.Comma||s.type===ra.Function||s.type===ra.LeftParenthesis||s.type===ra.LeftSquareBracket||s.type===ra.LeftCurlyBracket||qL(s)}function G1(s){return s===null?!0:s.type===ra.RightParenthesis||s.type===ra.RightSquareBracket||s.type===ra.RightCurlyBracket||s.type===ra.Delim}function $1(s,o,p){function d(){do Pe++,_e=Pe<s.length?s[Pe]:null;while(_e!==null&&(_e.type===ra.WhiteSpace||_e.type===ra.Comment))}function f(Ct){var dt=Pe+Ct;return dt<s.length?s[dt]:null}function a(Ct,dt){return{nextState:Ct,matchStack:st,syntaxStack:ne,thenStack:G,tokenIndex:Pe,prev:dt}}function T(Ct){G={nextState:Ct,matchStack:st,syntaxStack:ne,prev:G}}function M(Ct){ie=a(Ct,ie)}function R(){st={type:FL,syntax:o.syntax,token:_e,prev:st},d(),Y=null,Pe>Ye&&(Ye=Pe)}function V(){ne={syntax:o.syntax,opts:o.syntax.opts||ne!==null&&ne.opts||null,prev:ne},st={type:ff,syntax:o.syntax,token:st.token,prev:st}}function K(){st.type===ff?st=st.prev:st={type:dy,syntax:ne.syntax,token:st.token,prev:st},ne=ne.prev}var ne=null,G=null,ie=null,Y=null,Se=0,je=null,_e=null,Pe=-1,Ye=0,st={type:U1,syntax:null,token:null,prev:null};for(d();je===null&&++Se<V1;)switch(o.type){case"Match":if(G===null){if(_e!==null&&(Pe!==s.length-1||_e.value!=="\\0"&&_e.value!=="\\9")){o=ia;break}je=q1;break}if(o=G.nextState,o===BL)if(G.matchStack===st){o=ia;break}else o=vs;for(;G.syntaxStack!==ne;)K();G=G.prev;break;case"Mismatch":if(Y!==null&&Y!==!1)(ie===null||Pe>ie.tokenIndex)&&(ie=Y,Y=!1);else if(ie===null){je=jL;break}o=ie.nextState,G=ie.thenStack,ne=ie.syntaxStack,st=ie.matchStack,Pe=ie.tokenIndex,_e=Pe<s.length?s[Pe]:null,ie=ie.prev;break;case"MatchGraph":o=o.match;break;case"If":o.else!==ia&&M(o.else),o.then!==vs&&T(o.then),o=o.match;break;case"MatchOnce":o={type:"MatchOnceBuffer",syntax:o,index:0,mask:0};break;case"MatchOnceBuffer":var Pt=o.syntax.terms;if(o.index===Pt.length){if(o.mask===0||o.syntax.all){o=ia;break}o=vs;break}if(o.mask===(1<<Pt.length)-1){o=vs;break}for(;o.index<Pt.length;o.index++){var _t=1<<o.index;if((o.mask&_t)===0){M(o),T({type:"AddMatchOnce",syntax:o.syntax,mask:o.mask|_t}),o=Pt[o.index++];break}}break;case"AddMatchOnce":o={type:"MatchOnceBuffer",syntax:o.syntax,index:0,mask:o.mask};break;case"Enum":if(_e!==null){var ni=_e.value.toLowerCase();if(ni.indexOf("\\")!==-1&&(ni=ni.replace(/\\[09].*$/,"")),N1.call(o.map,ni)){o=o.map[ni];break}}o=ia;break;case"Generic":var Ut=ne!==null?ne.opts:null,Ht=Pe+Math.floor(o.fn(_e,f,Ut));if(!isNaN(Ht)&&Ht>Pe){for(;Pe<Ht;)R();o=vs}else o=ia;break;case"Type":case"Property":var Tt=o.type==="Type"?"types":"properties",Et=N1.call(p,Tt)?p[Tt][o.name]:null;if(!Et||!Et.match)throw new Error("Bad syntax reference: "+(o.type==="Type"?"<"+o.name+">":"<'"+o.name+"'>"));if(Y!==!1&&_e!==null&&o.type==="Type"){var oi=o.name==="custom-ident"&&_e.type===ra.Ident||o.name==="length"&&_e.value==="0";if(oi){Y===null&&(Y=a(o,ie)),o=ia;break}}V(),o=Et.match;break;case"Keyword":var ni=o.name;if(_e!==null){var di=_e.value;if(di.indexOf("\\")!==-1&&(di=di.replace(/\\[09].*$/,"")),cy(di,ni)){R(),o=vs;break}}o=ia;break;case"AtKeyword":case"Function":if(_e!==null&&cy(_e.value,o.name)){R(),o=vs;break}o=ia;break;case"Token":if(_e!==null&&_e.value===o.value){R(),o=vs;break}o=ia;break;case"Comma":_e!==null&&_e.type===ra.Comma?W1(st.token)?o=ia:(R(),o=G1(_e)?ia:vs):o=W1(st.token)||G1(_e)?vs:ia;break;case"String":for(var ai="",Ht=Pe;Ht<s.length&&ai.length<o.value.length;Ht++)ai+=s[Ht].value;if(cy(ai,o.value)){for(;Pe<Ht;)R();o=vs}else o=ia;break;default:throw new Error("Unknown node type: "+o.type)}switch(Z1+=Se,je){case null:console.warn("[csstree-match] BREAK after "+V1+" iterations"),je=NL,st=null;break;case q1:for(;ne!==null;)K();break;default:st=null}return{tokens:s,reason:je,iterations:Se,match:st,longestMatch:Ye}}function VL(s,o,p){var d=$1(s,o,p||{});if(d.match!==null){var f=H1(d.match).prev;for(d.match=[];f!==null;){switch(f.type){case U1:break;case ff:case dy:d.match.push({type:f.type,syntax:f.syntax});break;default:d.match.push({token:f.token.value,node:f.token.node});break}f=f.prev}}return d}function WL(s,o,p){var d=$1(s,o,p||{});if(d.match===null)return d;var f=d.match,a=d.match={syntax:o.syntax||null,match:[]},T=[a];for(f=H1(f).prev;f!==null;){switch(f.type){case ff:a.match.push(a={syntax:f.syntax,match:[]}),T.push(a);break;case dy:T.pop(),a=T[T.length-1];break;default:a.match.push({syntax:f.syntax||null,token:f.token.value,node:f.token.node})}f=f.prev}return d}Y1.exports={matchAsList:VL,matchAsTree:WL,getTotalIterationCount:function(){return Z1}}});var Q1=ze((Yj,J1)=>{function K1(s){function o(f){return f===null?!1:f.type==="Type"||f.type==="Property"||f.type==="Keyword"}function p(f){if(Array.isArray(f.match)){for(var a=0;a<f.match.length;a++)if(p(f.match[a]))return o(f.syntax)&&d.unshift(f.syntax),!0}else if(f.node===s)return d=o(f.syntax)?[f.syntax]:[],!0;return!1}var d=null;return this.matched!==null&&p(this.matched),d}function hy(s,o,p){var d=K1.call(s,o);return d===null?!1:d.some(p)}function GL(s,o){return hy(this,s,function(p){return p.type==="Type"&&p.name===o})}function UL(s,o){return hy(this,s,function(p){return p.type==="Property"&&p.name===o})}function ZL(s){return hy(this,s,function(o){return o.type==="Keyword"})}J1.exports={getTrace:K1,isType:GL,isProperty:UL,isKeyword:ZL}});var rw=ze((Xj,iw)=>{var HL=mc();function ew(s){return"node"in s?s.node:ew(s.match[0])}function tw(s){return"node"in s?s.node:tw(s.match[s.match.length-1])}function $L(s,o,p,d,f){function a(M){if(M.syntax!==null&&M.syntax.type===d&&M.syntax.name===f){var R=ew(M),V=tw(M);s.syntax.walk(o,function(K,ne,G){if(K===R){var ie=new HL;do{if(ie.appendData(ne.data),ne.data===V)break;ne=ne.next}while(ne!==null);T.push({parent:G,nodes:ie})}})}Array.isArray(M.match)&&M.match.forEach(a)}var T=[];return p.matched!==null&&a(p.matched),T}iw.exports={matchFragments:$L}});var sw=ze((Kj,aw)=>{var YL=mc(),lh=Object.prototype.hasOwnProperty;function py(s){return typeof s=="number"&&isFinite(s)&&Math.floor(s)===s&&s>=0}function nw(s){return!!s&&py(s.offset)&&py(s.line)&&py(s.column)}function XL(s,o){return function(d,f){if(!d||d.constructor!==Object)return f(d,"Type of node should be an Object");for(var a in d){var T=!0;if(lh.call(d,a)!==!1){if(a==="type")d.type!==s&&f(d,"Wrong node type `"+d.type+"`, expected `"+s+"`");else if(a==="loc"){if(d.loc===null)continue;if(d.loc&&d.loc.constructor===Object)if(typeof d.loc.source!="string")a+=".source";else if(!nw(d.loc.start))a+=".start";else if(!nw(d.loc.end))a+=".end";else continue;T=!1}else if(o.hasOwnProperty(a))for(var M=0,T=!1;!T&&M<o[a].length;M++){var R=o[a][M];switch(R){case String:T=typeof d[a]=="string";break;case Boolean:T=typeof d[a]=="boolean";break;case null:T=d[a]===null;break;default:typeof R=="string"?T=d[a]&&d[a].type===R:Array.isArray(R)&&(T=d[a]instanceof YL)}}else f(d,"Unknown field `"+a+"` for "+s+" node type");T||f(d,"Bad value for `"+s+"."+a+"`")}}for(var a in o)lh.call(o,a)&&lh.call(d,a)===!1&&f(d,"Field `"+s+"."+a+"` is missed")}}function KL(s,o){var p=o.structure,d={type:String,loc:!0},f={type:'"'+s+'"'};for(var a in p)if(lh.call(p,a)!==!1){for(var T=[],M=d[a]=Array.isArray(p[a])?p[a].slice():[p[a]],R=0;R<M.length;R++){var V=M[R];if(V===String||V===Boolean)T.push(V.name);else if(V===null)T.push("null");else if(typeof V=="string")T.push("<"+V+">");else if(Array.isArray(V))T.push("List");else throw new Error("Wrong value `"+V+"` in `"+s+"."+a+"` structure definition")}f[a]=T.join(" | ")}return{docs:f,check:XL(s,d)}}aw.exports={getStructureFromConfig:function(s){var o={};if(s.node){for(var p in s.node)if(lh.call(s.node,p)){var d=s.node[p];if(d.structure)o[p]=KL(p,d);else throw new Error("Missed `structure` field in `"+p+"` node type definition")}}return o}}});var hw=ze((Jj,dw)=>{var ch=Og().SyntaxReferenceError,JL=Og().SyntaxMatchError,uh=Kp(),fy=u1(),QL=pf(),cw=Hp(),eD=ny(),tD=R1(),gf=ly().buildMatchGraph,ow=X1().matchAsTree,mf=Q1(),lw=rw(),iD=sw().getStructureFromConfig,rD=gf("inherit | initial | unset"),nD=gf("inherit | initial | unset | <-ms-legacy-expression>");function my(s,o,p){var d={};for(var f in s)s[f].syntax&&(d[f]=p?s[f].syntax:cw(s[f].syntax,{compact:o}));return d}function aD(s,o,p){let d={};for(let[f,a]of Object.entries(s))d[f]={prelude:a.prelude&&(p?a.prelude.syntax:cw(a.prelude.syntax,{compact:o})),descriptors:a.descriptors&&my(a.descriptors,o,p)};return d}function sD(s){for(var o=0;o<s.length;o++)if(s[o].value.toLowerCase()==="var(")return!0;return!1}function ro(s,o,p){return{matched:s,iterations:p,error:o,getTrace:mf.getTrace,isType:mf.isType,isProperty:mf.isProperty,isKeyword:mf.isKeyword}}function dh(s,o,p,d){var f=tD(p,s.syntax),a;return sD(f)?ro(null,new Error("Matching for a tree with var() is not supported")):(d&&(a=ow(f,s.valueCommonSyntax,s)),(!d||!a.match)&&(a=ow(f,o.match,s),!a.match)?ro(null,new JL(a.reason,o.syntax,p,a),a.iterations):ro(a.match,null,a.iterations))}var uw=function(s,o,p){if(this.valueCommonSyntax=rD,this.syntax=o,this.generic=!1,this.atrules={},this.properties={},this.types={},this.structure=p||iD(s),s){if(s.types)for(var d in s.types)this.addType_(d,s.types[d]);if(s.generic){this.generic=!0;for(var d in fy)this.addType_(d,fy[d])}if(s.atrules)for(var d in s.atrules)this.addAtrule_(d,s.atrules[d]);if(s.properties)for(var d in s.properties)this.addProperty_(d,s.properties[d])}};uw.prototype={structure:{},checkStructure:function(s){function o(f,a){d.push({node:f,message:a})}var p=this.structure,d=[];return this.syntax.walk(s,function(f){p.hasOwnProperty(f.type)?p[f.type].check(f,o):o(f,"Unknown node type `"+f.type+"`")}),d.length?d:!1},createDescriptor:function(s,o,p,d=null){var f={type:o,name:p},a={type:o,name:p,parent:d,syntax:null,match:null};return typeof s=="function"?a.match=gf(s,f):(typeof s=="string"?Object.defineProperty(a,"syntax",{get:function(){return Object.defineProperty(a,"syntax",{value:QL(s)}),a.syntax}}):a.syntax=s,Object.defineProperty(a,"match",{get:function(){return Object.defineProperty(a,"match",{value:gf(a.syntax,f)}),a.match}})),a},addAtrule_:function(s,o){o&&(this.atrules[s]={type:"Atrule",name:s,prelude:o.prelude?this.createDescriptor(o.prelude,"AtrulePrelude",s):null,descriptors:o.descriptors?Object.keys(o.descriptors).reduce((p,d)=>(p[d]=this.createDescriptor(o.descriptors[d],"AtruleDescriptor",d,s),p),{}):null})},addProperty_:function(s,o){o&&(this.properties[s]=this.createDescriptor(o,"Property",s))},addType_:function(s,o){o&&(this.types[s]=this.createDescriptor(o,"Type",s),o===fy["-ms-legacy-expression"]&&(this.valueCommonSyntax=nD))},checkAtruleName:function(s){if(!this.getAtrule(s))return new ch("Unknown at-rule","@"+s)},checkAtrulePrelude:function(s,o){let p=this.checkAtruleName(s);if(p)return p;var d=this.getAtrule(s);if(!d.prelude&&o)return new SyntaxError("At-rule `@"+s+"` should not contain a prelude");if(d.prelude&&!o)return new SyntaxError("At-rule `@"+s+"` should contain a prelude")},checkAtruleDescriptorName:function(s,o){let p=this.checkAtruleName(s);if(p)return p;var d=this.getAtrule(s),f=uh.keyword(o);if(!d.descriptors)return new SyntaxError("At-rule `@"+s+"` has no known descriptors");if(!d.descriptors[f.name]&&!d.descriptors[f.basename])return new ch("Unknown at-rule descriptor",o)},checkPropertyName:function(s){var o=uh.property(s);if(o.custom)return new Error("Lexer matching doesn't applicable for custom properties");if(!this.getProperty(s))return new ch("Unknown property",s)},matchAtrulePrelude:function(s,o){var p=this.checkAtrulePrelude(s,o);return p?ro(null,p):o?dh(this,this.getAtrule(s).prelude,o,!1):ro(null,null)},matchAtruleDescriptor:function(s,o,p){var d=this.checkAtruleDescriptorName(s,o);if(d)return ro(null,d);var f=this.getAtrule(s),a=uh.keyword(o);return dh(this,f.descriptors[a.name]||f.descriptors[a.basename],p,!1)},matchDeclaration:function(s){return s.type!=="Declaration"?ro(null,new Error("Not a Declaration node")):this.matchProperty(s.property,s.value)},matchProperty:function(s,o){var p=this.checkPropertyName(s);return p?ro(null,p):dh(this,this.getProperty(s),o,!0)},matchType:function(s,o){var p=this.getType(s);return p?dh(this,p,o,!1):ro(null,new ch("Unknown type",s))},match:function(s,o){return typeof s!="string"&&(!s||!s.type)?ro(null,new ch("Bad syntax")):((typeof s=="string"||!s.match)&&(s=this.createDescriptor(s,"Type","anonymous")),dh(this,s,o,!1))},findValueFragments:function(s,o,p,d){return lw.matchFragments(this,o,this.matchProperty(s,o),p,d)},findDeclarationValueFragments:function(s,o,p){return lw.matchFragments(this,s.value,this.matchDeclaration(s),o,p)},findAllFragments:function(s,o,p){var d=[];return this.syntax.walk(s,{visit:"Declaration",enter:function(f){d.push.apply(d,this.findDeclarationValueFragments(f,o,p))}.bind(this)}),d},getAtrule:function(s,o=!0){var p=uh.keyword(s),d=p.vendor&&o?this.atrules[p.name]||this.atrules[p.basename]:this.atrules[p.name];return d||null},getAtrulePrelude:function(s,o=!0){let p=this.getAtrule(s,o);return p&&p.prelude||null},getAtruleDescriptor:function(s,o){return this.atrules.hasOwnProperty(s)&&this.atrules.declarators&&this.atrules[s].declarators[o]||null},getProperty:function(s,o=!0){var p=uh.property(s),d=p.vendor&&o?this.properties[p.name]||this.properties[p.basename]:this.properties[p.name];return d||null},getType:function(s){return this.types.hasOwnProperty(s)?this.types[s]:null},validate:function(){function s(f,a,T,M){if(T.hasOwnProperty(a))return T[a];T[a]=!1,M.syntax!==null&&eD(M.syntax,function(R){if(!(R.type!=="Type"&&R.type!=="Property")){var V=R.type==="Type"?f.types:f.properties,K=R.type==="Type"?o:p;(!V.hasOwnProperty(R.name)||s(f,R.name,K,V[R.name]))&&(T[a]=!0)}},this)}var o={},p={};for(var d in this.types)s(this,d,o,this.types[d]);for(var d in this.properties)s(this,d,p,this.properties[d]);return o=Object.keys(o).filter(function(f){return o[f]}),p=Object.keys(p).filter(function(f){return p[f]}),o.length||p.length?{types:o,properties:p}:null},dump:function(s,o){return{generic:this.generic,types:my(this.types,!o,s),properties:my(this.properties,!o,s),atrules:aD(this.atrules,!o,s)}},toString:function(){return JSON.stringify(this.dump())}};dw.exports=uw});var fw=ze((Qj,pw)=>{pw.exports={SyntaxError:Jg(),parse:pf(),generate:Hp(),walk:ny()}});var bw=ze((e4,vw)=>{var mw=Fg(),oD=vt().isBOM,gw=10,lD=12,yw=13;function cD(s,o){for(var p=o.length,d=mw(s.lines,p),f=s.startLine,a=mw(s.columns,p),T=s.startColumn,M=o.length>0?oD(o.charCodeAt(0)):0,R=M;R<p;R++){var V=o.charCodeAt(R);d[R]=f,a[R]=T++,(V===gw||V===yw||V===lD)&&(V===yw&&R+1<p&&o.charCodeAt(R+1)===gw&&(R++,d[R]=f,a[R]=T),f++,T=1)}d[R]=f,a[R]=T,s.lines=d,s.columns=a}var _w=function(){this.lines=null,this.columns=null,this.linesAndColumnsComputed=!1};_w.prototype={setSource:function(s,o,p,d){this.source=s,this.startOffset=typeof o=="undefined"?0:o,this.startLine=typeof p=="undefined"?1:p,this.startColumn=typeof d=="undefined"?1:d,this.linesAndColumnsComputed=!1},ensureLinesAndColumnsComputed:function(){this.linesAndColumnsComputed||(cD(this,this.source),this.linesAndColumnsComputed=!0)},getLocation:function(s,o){return this.ensureLinesAndColumnsComputed(),{source:o,offset:this.startOffset+s,line:this.lines[s],column:this.columns[s]}},getLocationRange:function(s,o,p){return this.ensureLinesAndColumnsComputed(),{source:p,start:{offset:this.startOffset+s,line:this.lines[s],column:this.columns[s]},end:{offset:this.startOffset+o,line:this.lines[o],column:this.columns[o]}}}};vw.exports=_w});var Sw=ze((t4,ww)=>{var xw=vt().TYPE,uD=xw.WhiteSpace,dD=xw.Comment;ww.exports=function(o){var p=this.createList(),d=null,f={recognizer:o,space:null,ignoreWS:!1,ignoreWSAfter:!1};for(this.scanner.skipSC();!this.scanner.eof;){switch(this.scanner.tokenType){case dD:this.scanner.next();continue;case uD:f.ignoreWS?this.scanner.next():f.space=this.WhiteSpace();continue}if(d=o.getNode.call(this,f),d===void 0)break;f.space!==null&&(p.push(f.space),f.space=null),p.push(d),f.ignoreWSAfter?(f.ignoreWSAfter=!1,f.ignoreWS=!0):f.ignoreWS=!1}return p}});var Mw=ze((i4,Aw)=>{var hD=bw(),pD=kg(),fD=eh(),Tw=mc(),mD=vt(),Ew=Kd(),{findWhiteSpaceStart:gD,cmpStr:yD}=Mu(),_D=Sw(),Cw=function(){},Cl=Ew.TYPE,vD=Ew.NAME,bD=Cl.WhiteSpace,xD=Cl.Comment,wD=Cl.Ident,kw=Cl.Function,SD=Cl.Url,TD=Cl.Hash,CD=Cl.Percentage,kD=Cl.Number,PD=35,Pw=0;function ED(s){return function(){return this[s]()}}function AD(s){var o={context:{},scope:{},atrule:{},pseudo:{}};if(s.parseContext)for(var p in s.parseContext)switch(typeof s.parseContext[p]){case"function":o.context[p]=s.parseContext[p];break;case"string":o.context[p]=ED(s.parseContext[p]);break}if(s.scope)for(var p in s.scope)o.scope[p]=s.scope[p];if(s.atrule)for(var p in s.atrule){var d=s.atrule[p];d.parse&&(o.atrule[p]=d.parse)}if(s.pseudo)for(var p in s.pseudo){var f=s.pseudo[p];f.parse&&(o.pseudo[p]=f.parse)}if(s.node)for(var p in s.node)o[p]=s.node[p].parse;return o}Aw.exports=function(o){var p={scanner:new fD,locationMap:new hD,filename:"<unknown>",needPositions:!1,onParseError:Cw,onParseErrorThrow:!1,parseAtrulePrelude:!0,parseRulePrelude:!0,parseValue:!0,parseCustomProperty:!1,readSequence:_D,createList:function(){return new Tw},createSingleNodeList:function(f){return new Tw().appendData(f)},getFirstListNode:function(f){return f&&f.first()},getLastListNode:function(f){return f.last()},parseWithFallback:function(f,a){var T=this.scanner.tokenIndex;try{return f.call(this)}catch(R){if(this.onParseErrorThrow)throw R;var M=a.call(this,T);return this.onParseErrorThrow=!0,this.onParseError(R,M),this.onParseErrorThrow=!1,M}},lookupNonWSType:function(f){do{var a=this.scanner.lookupType(f++);if(a!==bD)return a}while(a!==Pw);return Pw},eat:function(f){if(this.scanner.tokenType!==f){var a=this.scanner.tokenStart,T=vD[f]+" is expected";switch(f){case wD:this.scanner.tokenType===kw||this.scanner.tokenType===SD?(a=this.scanner.tokenEnd-1,T="Identifier is expected but function found"):T="Identifier is expected";break;case TD:this.scanner.isDelim(PD)&&(this.scanner.next(),a++,T="Name is expected");break;case CD:this.scanner.tokenType===kD&&(a=this.scanner.tokenEnd,T="Percent sign is expected");break;default:this.scanner.source.charCodeAt(this.scanner.tokenStart)===f&&(a=a+1)}this.error(T,a)}this.scanner.next()},consume:function(f){var a=this.scanner.getTokenValue();return this.eat(f),a},consumeFunctionName:function(){var f=this.scanner.source.substring(this.scanner.tokenStart,this.scanner.tokenEnd-1);return this.eat(kw),f},getLocation:function(f,a){return this.needPositions?this.locationMap.getLocationRange(f,a,this.filename):null},getLocationFromList:function(f){if(this.needPositions){var a=this.getFirstListNode(f),T=this.getLastListNode(f);return this.locationMap.getLocationRange(a!==null?a.loc.start.offset-this.locationMap.startOffset:this.scanner.tokenStart,T!==null?T.loc.end.offset-this.locationMap.startOffset:this.scanner.tokenStart,this.filename)}return null},error:function(f,a){var T=typeof a!="undefined"&&a<this.scanner.source.length?this.locationMap.getLocation(a):this.scanner.eof?this.locationMap.getLocation(gD(this.scanner.source,this.scanner.source.length-1)):this.locationMap.getLocation(this.scanner.tokenStart);throw new pD(f||"Unexpected input",this.scanner.source,T.offset,T.line,T.column)}};o=AD(o||{});for(var d in o)p[d]=o[d];return function(f,a){a=a||{};var T=a.context||"default",M=a.onComment,R;if(mD(f,p.scanner),p.locationMap.setSource(f,a.offset,a.line,a.column),p.filename=a.filename||"<unknown>",p.needPositions=!!a.positions,p.onParseError=typeof a.onParseError=="function"?a.onParseError:Cw,p.onParseErrorThrow=!1,p.parseAtrulePrelude="parseAtrulePrelude"in a?!!a.parseAtrulePrelude:!0,p.parseRulePrelude="parseRulePrelude"in a?!!a.parseRulePrelude:!0,p.parseValue="parseValue"in a?!!a.parseValue:!0,p.parseCustomProperty="parseCustomProperty"in a?!!a.parseCustomProperty:!1,!p.context.hasOwnProperty(T))throw new Error("Unknown context `"+T+"`");return typeof M=="function"&&p.scanner.forEachToken((V,K,ne)=>{if(V===xD){let G=p.getLocation(K,ne),ie=yD(f,ne-2,ne,"*/")?f.slice(K+2,ne-2):f.slice(K+2,ne);M(ie,G)}}),R=p.context[T].call(p,a),p.scanner.eof||p.error(),R}}});var Iw=ze(gy=>{var zw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");gy.encode=function(s){if(0<=s&&s<zw.length)return zw[s];throw new TypeError("Must be between 0 and 63: "+s)};gy.decode=function(s){var o=65,p=90,d=97,f=122,a=48,T=57,M=43,R=47,V=26,K=52;return o<=s&&s<=p?s-o:d<=s&&s<=f?s-d+V:a<=s&&s<=T?s-a+K:s==M?62:s==R?63:-1}});var Bw=ze(_y=>{var Lw=Iw(),yy=5,Dw=1<<yy,Ow=Dw-1,Rw=Dw;function MD(s){return s<0?(-s<<1)+1:(s<<1)+0}function zD(s){var o=(s&1)===1,p=s>>1;return o?-p:p}_y.encode=function(o){var p="",d,f=MD(o);do d=f&Ow,f>>>=yy,f>0&&(d|=Rw),p+=Lw.encode(d);while(f>0);return p};_y.decode=function(o,p,d){var f=o.length,a=0,T=0,M,R;do{if(p>=f)throw new Error("Expected more digits in base 64 VLQ value.");if(R=Lw.decode(o.charCodeAt(p++)),R===-1)throw new Error("Invalid base64 digit: "+o.charAt(p-1));M=!!(R&Rw),R&=Ow,a=a+(R<<T),T+=yy}while(M);d.value=zD(a),d.rest=p}});var yf=ze(Pn=>{function ID(s,o,p){if(o in s)return s[o];if(arguments.length===3)return p;throw new Error('"'+o+'" is a required argument.')}Pn.getArg=ID;var Fw=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,LD=/^data:.+\,.+$/;function hh(s){var o=s.match(Fw);return o?{scheme:o[1],auth:o[2],host:o[3],port:o[4],path:o[5]}:null}Pn.urlParse=hh;function Fu(s){var o="";return s.scheme&&(o+=s.scheme+":"),o+="//",s.auth&&(o+=s.auth+"@"),s.host&&(o+=s.host),s.port&&(o+=":"+s.port),s.path&&(o+=s.path),o}Pn.urlGenerate=Fu;function vy(s){var o=s,p=hh(s);if(p){if(!p.path)return s;o=p.path}for(var d=Pn.isAbsolute(o),f=o.split(/\/+/),a,T=0,M=f.length-1;M>=0;M--)a=f[M],a==="."?f.splice(M,1):a===".."?T++:T>0&&(a===""?(f.splice(M+1,T),T=0):(f.splice(M,2),T--));return o=f.join("/"),o===""&&(o=d?"/":"."),p?(p.path=o,Fu(p)):o}Pn.normalize=vy;function jw(s,o){s===""&&(s="."),o===""&&(o=".");var p=hh(o),d=hh(s);if(d&&(s=d.path||"/"),p&&!p.scheme)return d&&(p.scheme=d.scheme),Fu(p);if(p||o.match(LD))return o;if(d&&!d.host&&!d.path)return d.host=o,Fu(d);var f=o.charAt(0)==="/"?o:vy(s.replace(/\/+$/,"")+"/"+o);return d?(d.path=f,Fu(d)):f}Pn.join=jw;Pn.isAbsolute=function(s){return s.charAt(0)==="/"||Fw.test(s)};function DD(s,o){s===""&&(s="."),s=s.replace(/\/$/,"");for(var p=0;o.indexOf(s+"/")!==0;){var d=s.lastIndexOf("/");if(d<0||(s=s.slice(0,d),s.match(/^([^\/]+:\/)?\/*$/)))return o;++p}return Array(p+1).join("../")+o.substr(s.length+1)}Pn.relative=DD;var Nw=(function(){var s=Object.create(null);return!("__proto__"in s)})();function qw(s){return s}function OD(s){return Vw(s)?"$"+s:s}Pn.toSetString=Nw?qw:OD;function RD(s){return Vw(s)?s.slice(1):s}Pn.fromSetString=Nw?qw:RD;function Vw(s){if(!s)return!1;var o=s.length;if(o<9||s.charCodeAt(o-1)!==95||s.charCodeAt(o-2)!==95||s.charCodeAt(o-3)!==111||s.charCodeAt(o-4)!==116||s.charCodeAt(o-5)!==111||s.charCodeAt(o-6)!==114||s.charCodeAt(o-7)!==112||s.charCodeAt(o-8)!==95||s.charCodeAt(o-9)!==95)return!1;for(var p=o-10;p>=0;p--)if(s.charCodeAt(p)!==36)return!1;return!0}function BD(s,o,p){var d=ju(s.source,o.source);return d!==0||(d=s.originalLine-o.originalLine,d!==0)||(d=s.originalColumn-o.originalColumn,d!==0||p)||(d=s.generatedColumn-o.generatedColumn,d!==0)||(d=s.generatedLine-o.generatedLine,d!==0)?d:ju(s.name,o.name)}Pn.compareByOriginalPositions=BD;function FD(s,o,p){var d=s.generatedLine-o.generatedLine;return d!==0||(d=s.generatedColumn-o.generatedColumn,d!==0||p)||(d=ju(s.source,o.source),d!==0)||(d=s.originalLine-o.originalLine,d!==0)||(d=s.originalColumn-o.originalColumn,d!==0)?d:ju(s.name,o.name)}Pn.compareByGeneratedPositionsDeflated=FD;function ju(s,o){return s===o?0:s===null?1:o===null?-1:s>o?1:-1}function jD(s,o){var p=s.generatedLine-o.generatedLine;return p!==0||(p=s.generatedColumn-o.generatedColumn,p!==0)||(p=ju(s.source,o.source),p!==0)||(p=s.originalLine-o.originalLine,p!==0)||(p=s.originalColumn-o.originalColumn,p!==0)?p:ju(s.name,o.name)}Pn.compareByGeneratedPositionsInflated=jD;function ND(s){return JSON.parse(s.replace(/^\)]}'[^\n]*\n/,""))}Pn.parseSourceMapInput=ND;function qD(s,o,p){if(o=o||"",s&&(s[s.length-1]!=="/"&&o[0]!=="/"&&(s+="/"),o=s+o),p){var d=hh(p);if(!d)throw new Error("sourceMapURL could not be parsed");if(d.path){var f=d.path.lastIndexOf("/");f>=0&&(d.path=d.path.substring(0,f+1))}o=jw(Fu(d),o)}return vy(o)}Pn.computeSourceURL=qD});var Gw=ze(Ww=>{var by=yf(),xy=Object.prototype.hasOwnProperty,yc=typeof Map!="undefined";function qo(){this._array=[],this._set=yc?new Map:Object.create(null)}qo.fromArray=function(o,p){for(var d=new qo,f=0,a=o.length;f<a;f++)d.add(o[f],p);return d};qo.prototype.size=function(){return yc?this._set.size:Object.getOwnPropertyNames(this._set).length};qo.prototype.add=function(o,p){var d=yc?o:by.toSetString(o),f=yc?this.has(o):xy.call(this._set,d),a=this._array.length;(!f||p)&&this._array.push(o),f||(yc?this._set.set(o,a):this._set[d]=a)};qo.prototype.has=function(o){if(yc)return this._set.has(o);var p=by.toSetString(o);return xy.call(this._set,p)};qo.prototype.indexOf=function(o){if(yc){var p=this._set.get(o);if(p>=0)return p}else{var d=by.toSetString(o);if(xy.call(this._set,d))return this._set[d]}throw new Error('"'+o+'" is not in the set.')};qo.prototype.at=function(o){if(o>=0&&o<this._array.length)return this._array[o];throw new Error("No element indexed by "+o)};qo.prototype.toArray=function(){return this._array.slice()};Ww.ArraySet=qo});var Hw=ze(Zw=>{var Uw=yf();function VD(s,o){var p=s.generatedLine,d=o.generatedLine,f=s.generatedColumn,a=o.generatedColumn;return d>p||d==p&&a>=f||Uw.compareByGeneratedPositionsInflated(s,o)<=0}function _f(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}_f.prototype.unsortedForEach=function(o,p){this._array.forEach(o,p)};_f.prototype.add=function(o){VD(this._last,o)?(this._last=o,this._array.push(o)):(this._sorted=!1,this._array.push(o))};_f.prototype.toArray=function(){return this._sorted||(this._array.sort(Uw.compareByGeneratedPositionsInflated),this._sorted=!0),this._array};Zw.MappingList=_f});var Yw=ze($w=>{var ph=Bw(),Nr=yf(),vf=Gw().ArraySet,WD=Hw().MappingList;function Ha(s){s||(s={}),this._file=Nr.getArg(s,"file",null),this._sourceRoot=Nr.getArg(s,"sourceRoot",null),this._skipValidation=Nr.getArg(s,"skipValidation",!1),this._sources=new vf,this._names=new vf,this._mappings=new WD,this._sourcesContents=null}Ha.prototype._version=3;Ha.fromSourceMap=function(o){var p=o.sourceRoot,d=new Ha({file:o.file,sourceRoot:p});return o.eachMapping(function(f){var a={generated:{line:f.generatedLine,column:f.generatedColumn}};f.source!=null&&(a.source=f.source,p!=null&&(a.source=Nr.relative(p,a.source)),a.original={line:f.originalLine,column:f.originalColumn},f.name!=null&&(a.name=f.name)),d.addMapping(a)}),o.sources.forEach(function(f){var a=f;p!==null&&(a=Nr.relative(p,f)),d._sources.has(a)||d._sources.add(a);var T=o.sourceContentFor(f);T!=null&&d.setSourceContent(f,T)}),d};Ha.prototype.addMapping=function(o){var p=Nr.getArg(o,"generated"),d=Nr.getArg(o,"original",null),f=Nr.getArg(o,"source",null),a=Nr.getArg(o,"name",null);this._skipValidation||this._validateMapping(p,d,f,a),f!=null&&(f=String(f),this._sources.has(f)||this._sources.add(f)),a!=null&&(a=String(a),this._names.has(a)||this._names.add(a)),this._mappings.add({generatedLine:p.line,generatedColumn:p.column,originalLine:d!=null&&d.line,originalColumn:d!=null&&d.column,source:f,name:a})};Ha.prototype.setSourceContent=function(o,p){var d=o;this._sourceRoot!=null&&(d=Nr.relative(this._sourceRoot,d)),p!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[Nr.toSetString(d)]=p):this._sourcesContents&&(delete this._sourcesContents[Nr.toSetString(d)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))};Ha.prototype.applySourceMap=function(o,p,d){var f=p;if(p==null){if(o.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);f=o.file}var a=this._sourceRoot;a!=null&&(f=Nr.relative(a,f));var T=new vf,M=new vf;this._mappings.unsortedForEach(function(R){if(R.source===f&&R.originalLine!=null){var V=o.originalPositionFor({line:R.originalLine,column:R.originalColumn});V.source!=null&&(R.source=V.source,d!=null&&(R.source=Nr.join(d,R.source)),a!=null&&(R.source=Nr.relative(a,R.source)),R.originalLine=V.line,R.originalColumn=V.column,V.name!=null&&(R.name=V.name))}var K=R.source;K!=null&&!T.has(K)&&T.add(K);var ne=R.name;ne!=null&&!M.has(ne)&&M.add(ne)},this),this._sources=T,this._names=M,o.sources.forEach(function(R){var V=o.sourceContentFor(R);V!=null&&(d!=null&&(R=Nr.join(d,R)),a!=null&&(R=Nr.relative(a,R)),this.setSourceContent(R,V))},this)};Ha.prototype._validateMapping=function(o,p,d,f){if(p&&typeof p.line!="number"&&typeof p.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(o&&"line"in o&&"column"in o&&o.line>0&&o.column>=0&&!p&&!d&&!f)){if(o&&"line"in o&&"column"in o&&p&&"line"in p&&"column"in p&&o.line>0&&o.column>=0&&p.line>0&&p.column>=0&&d)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:o,source:d,original:p,name:f}))}};Ha.prototype._serializeMappings=function(){for(var o=0,p=1,d=0,f=0,a=0,T=0,M="",R,V,K,ne,G=this._mappings.toArray(),ie=0,Y=G.length;ie<Y;ie++){if(V=G[ie],R="",V.generatedLine!==p)for(o=0;V.generatedLine!==p;)R+=";",p++;else if(ie>0){if(!Nr.compareByGeneratedPositionsInflated(V,G[ie-1]))continue;R+=","}R+=ph.encode(V.generatedColumn-o),o=V.generatedColumn,V.source!=null&&(ne=this._sources.indexOf(V.source),R+=ph.encode(ne-T),T=ne,R+=ph.encode(V.originalLine-1-f),f=V.originalLine-1,R+=ph.encode(V.originalColumn-d),d=V.originalColumn,V.name!=null&&(K=this._names.indexOf(V.name),R+=ph.encode(K-a),a=K)),M+=R}return M};Ha.prototype._generateSourcesContent=function(o,p){return o.map(function(d){if(!this._sourcesContents)return null;p!=null&&(d=Nr.relative(p,d));var f=Nr.toSetString(d);return Object.prototype.hasOwnProperty.call(this._sourcesContents,f)?this._sourcesContents[f]:null},this)};Ha.prototype.toJSON=function(){var o={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(o.file=this._file),this._sourceRoot!=null&&(o.sourceRoot=this._sourceRoot),this._sourcesContents&&(o.sourcesContent=this._generateSourcesContent(o.sources,o.sourceRoot)),o};Ha.prototype.toString=function(){return JSON.stringify(this.toJSON())};$w.SourceMapGenerator=Ha});var Jw=ze((c4,Kw)=>{var GD=Yw().SourceMapGenerator,Xw={Atrule:!0,Selector:!0,Declaration:!0};Kw.exports=function(o){var p=new GD,d=1,f=0,a={line:1,column:0},T={line:0,column:0},M=!1,R={line:1,column:0},V={generated:R},K=o.node;o.node=function(ie){if(ie.loc&&ie.loc.start&&Xw.hasOwnProperty(ie.type)){var Y=ie.loc.start.line,Se=ie.loc.start.column-1;(T.line!==Y||T.column!==Se)&&(T.line=Y,T.column=Se,a.line=d,a.column=f,M&&(M=!1,(a.line!==R.line||a.column!==R.column)&&p.addMapping(V)),M=!0,p.addMapping({source:ie.loc.source,original:T,generated:a}))}K.call(this,ie),M&&Xw.hasOwnProperty(ie.type)&&(R.line=d,R.column=f)};var ne=o.chunk;o.chunk=function(ie){for(var Y=0;Y<ie.length;Y++)ie.charCodeAt(Y)===10?(d++,f=0):f++;ne(ie)};var G=o.result;return o.result=function(){return M&&p.addMapping(V),{css:G(),map:p}},o}});var eS=ze((u4,Qw)=>{var UD=Jw(),ZD=Object.prototype.hasOwnProperty;function HD(s,o){var p=s.children,d=null;typeof o!="function"?p.forEach(this.node,this):p.forEach(function(f){d!==null&&o.call(this,d),this.node(f),d=f},this)}Qw.exports=function(o){function p(a){if(ZD.call(d,a.type))d[a.type].call(this,a);else throw new Error("Unknown node type: "+a.type)}var d={};if(o.node)for(var f in o.node)d[f]=o.node[f].generate;return function(a,T){var M="",R={children:HD,node:p,chunk:function(V){M+=V},result:function(){return M}};return T&&(typeof T.decorator=="function"&&(R=T.decorator(R)),T.sourceMap&&(R=UD(R))),R.node(a),R.result()}}});var iS=ze((d4,tS)=>{var wy=mc();tS.exports=function(o){return{fromPlainObject:function(p){return o(p,{enter:function(d){d.children&&!(d.children instanceof wy)&&(d.children=new wy().fromArray(d.children))}}),p},toPlainObject:function(p){return o(p,{leave:function(d){d.children&&d.children instanceof wy&&(d.children=d.children.toArray())}}),p}}}});var lS=ze((h4,oS)=>{var Sy=Object.prototype.hasOwnProperty,fh=function(){};function rS(s){return typeof s=="function"?s:fh}function nS(s,o){return function(p,d,f){p.type===o&&s.call(this,p,d,f)}}function $D(s,o){var p=o.structure,d=[];for(var f in p)if(Sy.call(p,f)!==!1){var a=p[f],T={name:f,type:!1,nullable:!1};Array.isArray(p[f])||(a=[p[f]]);for(var M=0;M<a.length;M++){var R=a[M];R===null?T.nullable=!0:typeof R=="string"?T.type="node":Array.isArray(R)&&(T.type="list")}T.type&&d.push(T)}return d.length?{context:o.walkContext,fields:d}:null}function YD(s){var o={};for(var p in s.node)if(Sy.call(s.node,p)){var d=s.node[p];if(!d.structure)throw new Error("Missed `structure` field in `"+p+"` node type definition");o[p]=$D(p,d)}return o}function aS(s,o){var p=s.fields.slice(),d=s.context,f=typeof d=="string";return o&&p.reverse(),function(a,T,M,R){var V;f&&(V=T[d],T[d]=a);for(var K=0;K<p.length;K++){var ne=p[K],G=a[ne.name];if(!ne.nullable||G){if(ne.type==="list"){var ie=o?G.reduceRight(R,!1):G.reduce(R,!1);if(ie)return!0}else if(M(G))return!0}}f&&(T[d]=V)}}function sS(s){return{Atrule:{StyleSheet:s.StyleSheet,Atrule:s.Atrule,Rule:s.Rule,Block:s.Block},Rule:{StyleSheet:s.StyleSheet,Atrule:s.Atrule,Rule:s.Rule,Block:s.Block},Declaration:{StyleSheet:s.StyleSheet,Atrule:s.Atrule,Rule:s.Rule,Block:s.Block,DeclarationList:s.DeclarationList}}}oS.exports=function(o){var p=YD(o),d={},f={},a=Symbol("break-walk"),T=Symbol("skip-node");for(var M in p)Sy.call(p,M)&&p[M]!==null&&(d[M]=aS(p[M],!1),f[M]=aS(p[M],!0));var R=sS(d),V=sS(f),K=function(ne,G){function ie(Ye,st,Pt){var _t=Se.call(Pe,Ye,st,Pt);if(_t===a){debugger;return!0}return _t===T?!1:!!(_e.hasOwnProperty(Ye.type)&&_e[Ye.type](Ye,Pe,ie,Y)||je.call(Pe,Ye,st,Pt)===a)}var Y=(Ye,st,Pt,_t)=>Ye||ie(st,Pt,_t),Se=fh,je=fh,_e=d,Pe={break:a,skip:T,root:ne,stylesheet:null,atrule:null,atrulePrelude:null,rule:null,selector:null,block:null,declaration:null,function:null};if(typeof G=="function")Se=G;else if(G&&(Se=rS(G.enter),je=rS(G.leave),G.reverse&&(_e=f),G.visit)){if(R.hasOwnProperty(G.visit))_e=G.reverse?V[G.visit]:R[G.visit];else if(!p.hasOwnProperty(G.visit))throw new Error("Bad value `"+G.visit+"` for `visit` option (should be: "+Object.keys(p).join(", ")+")");Se=nS(Se,G.visit),je=nS(je,G.visit)}if(Se===fh&&je===fh)throw new Error("Neither `enter` nor `leave` walker handler is set or both aren't a function");ie(ne)};return K.break=a,K.skip=T,K.find=function(ne,G){var ie=null;return K(ne,function(Y,Se,je){if(G.call(this,Y,Se,je))return ie=Y,a}),ie},K.findLast=function(ne,G){var ie=null;return K(ne,{reverse:!0,enter:function(Y,Se,je){if(G.call(this,Y,Se,je))return ie=Y,a}}),ie},K.findAll=function(ne,G){var ie=[];return K(ne,function(Y,Se,je){G.call(this,Y,Se,je)&&ie.push(Y)}),ie},K}});var uS=ze((p4,cS)=>{var XD=mc();cS.exports=function s(o){var p={};for(var d in o){var f=o[d];f&&(Array.isArray(f)||f instanceof XD?f=f.map(s):f.constructor===Object&&(f=s(f))),p[d]=f}return p}});var mS=ze((f4,fS)=>{var Nu=Object.prototype.hasOwnProperty,KD={generic:!0,types:Cy,atrules:{prelude:hS,descriptors:hS},properties:Cy,parseContext:JD,scope:pS,atrule:["parse"],pseudo:["parse"],node:["name","structure","parse","generate","walkContext"]};function bf(s){return s&&s.constructor===Object}function Ty(s){return bf(s)?Object.assign({},s):s}function JD(s,o){return Object.assign(s,o)}function pS(s,o){for(let p in o)Nu.call(o,p)&&(bf(s[p])?pS(s[p],Ty(o[p])):s[p]=Ty(o[p]));return s}function dS(s,o){return typeof o=="string"&&/^\s*\|/.test(o)?typeof s=="string"?s+o:o.replace(/^\s*\|\s*/,""):o||null}function Cy(s,o){if(typeof o=="string")return dS(s,o);let p=Object.assign({},s);for(let d in o)Nu.call(o,d)&&(p[d]=dS(Nu.call(s,d)?s[d]:void 0,o[d]));return p}function hS(s,o){let p=Cy(s,o);return!bf(p)||Object.keys(p).length?p:null}function mh(s,o,p){for(let d in p)if(Nu.call(p,d)!==!1){if(p[d]===!0)d in o&&Nu.call(o,d)&&(s[d]=Ty(o[d]));else if(p[d]){if(typeof p[d]=="function"){let f=p[d];s[d]=f({},s[d]),s[d]=f(s[d]||{},o[d])}else if(bf(p[d])){let f={};for(let a in s[d])f[a]=mh({},s[d][a],p[d]);for(let a in o[d])f[a]=mh(f[a]||{},o[d][a],p[d]);s[d]=f}else if(Array.isArray(p[d])){let f={},a=p[d].reduce(function(T,M){return T[M]=!0,T},{});for(let[T,M]of Object.entries(s[d]||{}))f[T]={},M&&mh(f[T],M,a);for(let T in o[d])Nu.call(o[d],T)&&(f[T]||(f[T]={}),o[d]&&o[d][T]&&mh(f[T],o[d][T],a));s[d]=f}}}return s}fS.exports=(s,o)=>mh(s,o,KD)});var yS=ze(gS=>{var QD=mc(),eO=kg(),tO=eh(),ky=hw(),iO=fw(),rO=vt(),nO=Mw(),aO=eS(),sO=iS(),oO=lS(),lO=uS(),xf=Kp(),wf=mS();function Py(s){var o=nO(s),p=oO(s),d=aO(s),f=sO(p),a={List:QD,SyntaxError:eO,TokenStream:tO,Lexer:ky,vendorPrefix:xf.vendorPrefix,keyword:xf.keyword,property:xf.property,isCustomProperty:xf.isCustomProperty,definitionSyntax:iO,lexer:null,createLexer:function(T){return new ky(T,a,a.lexer.structure)},tokenize:rO,parse:o,walk:p,generate:d,find:p.find,findLast:p.findLast,findAll:p.findAll,clone:lO,fromPlainObject:f.fromPlainObject,toPlainObject:f.toPlainObject,createSyntax:function(T){return Py(wf({},T))},fork:function(T){var M=wf({},s);return Py(typeof T=="function"?T(M,Object.assign):wf(M,T))}};return a.lexer=new ky({generic:!0,types:s.types,atrules:s.atrules,properties:s.properties,node:s.node},a),a}gS.create=function(s){return Py(wf({},s))}});var _S=ze((g4,cO)=>{cO.exports={"@charset":{syntax:'@charset "<charset>";',groups:["CSS Charsets"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@charset"},"@counter-style":{syntax:`@counter-style <counter-style-name> {
  [ system: <counter-system>; ] ||
  [ symbols: <counter-symbols>; ] ||
  [ additive-symbols: <additive-symbols>; ] ||
  [ negative: <negative-symbol>; ] ||
  [ prefix: <prefix>; ] ||
  [ suffix: <suffix>; ] ||
  [ range: <range>; ] ||
  [ pad: <padding>; ] ||
  [ speak-as: <speak-as>; ] ||
  [ fallback: <counter-style-name>; ]
}`,interfaces:["CSSCounterStyleRule"],groups:["CSS Counter Styles"],descriptors:{"additive-symbols":{syntax:"[ <integer> && <symbol> ]#",media:"all",initial:"n/a (required)",percentages:"no",computed:"asSpecified",order:"orderOfAppearance",status:"standard"},fallback:{syntax:"<counter-style-name>",media:"all",initial:"decimal",percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},negative:{syntax:"<symbol> <symbol>?",media:"all",initial:'"-" hyphen-minus',percentages:"no",computed:"asSpecified",order:"orderOfAppearance",status:"standard"},pad:{syntax:"<integer> && <symbol>",media:"all",initial:'0 ""',percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},prefix:{syntax:"<symbol>",media:"all",initial:'""',percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},range:{syntax:"[ [ <integer> | infinite ]{2} ]# | auto",media:"all",initial:"auto",percentages:"no",computed:"asSpecified",order:"orderOfAppearance",status:"standard"},"speak-as":{syntax:"auto | bullets | numbers | words | spell-out | <counter-style-name>",media:"all",initial:"auto",percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},suffix:{syntax:"<symbol>",media:"all",initial:'". "',percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},symbols:{syntax:"<symbol>+",media:"all",initial:"n/a (required)",percentages:"no",computed:"asSpecified",order:"orderOfAppearance",status:"standard"},system:{syntax:"cyclic | numeric | alphabetic | symbolic | additive | [ fixed <integer>? ] | [ extends <counter-style-name> ]",media:"all",initial:"symbolic",percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"}},status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@counter-style"},"@document":{syntax:`@document [ <url> | url-prefix(<string>) | domain(<string>) | media-document(<string>) | regexp(<string>) ]# {
  <group-rule-body>
}`,interfaces:["CSSGroupingRule","CSSConditionRule"],groups:["CSS Conditional Rules"],status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@document"},"@font-face":{syntax:`@font-face {
  [ font-family: <family-name>; ] ||
  [ src: <src>; ] ||
  [ unicode-range: <unicode-range>; ] ||
  [ font-variant: <font-variant>; ] ||
  [ font-feature-settings: <font-feature-settings>; ] ||
  [ font-variation-settings: <font-variation-settings>; ] ||
  [ font-stretch: <font-stretch>; ] ||
  [ font-weight: <font-weight>; ] ||
  [ font-style: <font-style>; ]
}`,interfaces:["CSSFontFaceRule"],groups:["CSS Fonts"],descriptors:{"font-display":{syntax:"[ auto | block | swap | fallback | optional ]",media:"visual",percentages:"no",initial:"auto",computed:"asSpecified",order:"uniqueOrder",status:"experimental"},"font-family":{syntax:"<family-name>",media:"all",initial:"n/a (required)",percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},"font-feature-settings":{syntax:"normal | <feature-tag-value>#",media:"all",initial:"normal",percentages:"no",computed:"asSpecified",order:"orderOfAppearance",status:"standard"},"font-variation-settings":{syntax:"normal | [ <string> <number> ]#",media:"all",initial:"normal",percentages:"no",computed:"asSpecified",order:"orderOfAppearance",status:"standard"},"font-stretch":{syntax:"<font-stretch-absolute>{1,2}",media:"all",initial:"normal",percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},"font-style":{syntax:"normal | italic | oblique <angle>{0,2}",media:"all",initial:"normal",percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},"font-weight":{syntax:"<font-weight-absolute>{1,2}",media:"all",initial:"normal",percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},"font-variant":{syntax:"normal | none | [ <common-lig-values> || <discretionary-lig-values> || <historical-lig-values> || <contextual-alt-values> || stylistic(<feature-value-name>) || historical-forms || styleset(<feature-value-name>#) || character-variant(<feature-value-name>#) || swash(<feature-value-name>) || ornaments(<feature-value-name>) || annotation(<feature-value-name>) || [ small-caps | all-small-caps | petite-caps | all-petite-caps | unicase | titling-caps ] || <numeric-figure-values> || <numeric-spacing-values> || <numeric-fraction-values> || ordinal || slashed-zero || <east-asian-variant-values> || <east-asian-width-values> || ruby ]",media:"all",initial:"normal",percentages:"no",computed:"asSpecified",order:"orderOfAppearance",status:"standard"},src:{syntax:"[ <url> [ format( <string># ) ]? | local( <family-name> ) ]#",media:"all",initial:"n/a (required)",percentages:"no",computed:"asSpecified",order:"orderOfAppearance",status:"standard"},"unicode-range":{syntax:"<unicode-range>#",media:"all",initial:"U+0-10FFFF",percentages:"no",computed:"asSpecified",order:"orderOfAppearance",status:"standard"}},status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@font-face"},"@font-feature-values":{syntax:`@font-feature-values <family-name># {
  <feature-value-block-list>
}`,interfaces:["CSSFontFeatureValuesRule"],groups:["CSS Fonts"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@font-feature-values"},"@import":{syntax:"@import [ <string> | <url> ] [ <media-query-list> ]?;",groups:["Media Queries"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@import"},"@keyframes":{syntax:`@keyframes <keyframes-name> {
  <keyframe-block-list>
}`,interfaces:["CSSKeyframeRule","CSSKeyframesRule"],groups:["CSS Animations"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@keyframes"},"@media":{syntax:`@media <media-query-list> {
  <group-rule-body>
}`,interfaces:["CSSGroupingRule","CSSConditionRule","CSSMediaRule","CSSCustomMediaRule"],groups:["CSS Conditional Rules","Media Queries"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@media"},"@namespace":{syntax:"@namespace <namespace-prefix>? [ <string> | <url> ];",groups:["CSS Namespaces"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@namespace"},"@page":{syntax:`@page <page-selector-list> {
  <page-body>
}`,interfaces:["CSSPageRule"],groups:["CSS Pages"],descriptors:{bleed:{syntax:"auto | <length>",media:["visual","paged"],initial:"auto",percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},marks:{syntax:"none | [ crop || cross ]",media:["visual","paged"],initial:"none",percentages:"no",computed:"asSpecified",order:"orderOfAppearance",status:"standard"},size:{syntax:"<length>{1,2} | auto | [ <page-size> || [ portrait | landscape ] ]",media:["visual","paged"],initial:"auto",percentages:"no",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"orderOfAppearance",status:"standard"}},status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@page"},"@property":{syntax:`@property <custom-property-name> {
  <declaration-list>
}`,interfaces:["CSS","CSSPropertyRule"],groups:["CSS Houdini"],descriptors:{syntax:{syntax:"<string>",media:"all",percentages:"no",initial:"n/a (required)",computed:"asSpecified",order:"uniqueOrder",status:"experimental"},inherits:{syntax:"true | false",media:"all",percentages:"no",initial:"auto",computed:"asSpecified",order:"uniqueOrder",status:"experimental"},"initial-value":{syntax:"<string>",media:"all",initial:"n/a (required)",percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"experimental"}},status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@property"},"@supports":{syntax:`@supports <supports-condition> {
  <group-rule-body>
}`,interfaces:["CSSGroupingRule","CSSConditionRule","CSSSupportsRule"],groups:["CSS Conditional Rules"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@supports"},"@viewport":{syntax:`@viewport {
  <group-rule-body>
}`,interfaces:["CSSViewportRule"],groups:["CSS Device Adaptation"],descriptors:{height:{syntax:"<viewport-length>{1,2}",media:["visual","continuous"],initial:["min-height","max-height"],percentages:["min-height","max-height"],computed:["min-height","max-height"],order:"orderOfAppearance",status:"standard"},"max-height":{syntax:"<viewport-length>",media:["visual","continuous"],initial:"auto",percentages:"referToHeightOfInitialViewport",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard"},"max-width":{syntax:"<viewport-length>",media:["visual","continuous"],initial:"auto",percentages:"referToWidthOfInitialViewport",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard"},"max-zoom":{syntax:"auto | <number> | <percentage>",media:["visual","continuous"],initial:"auto",percentages:"the zoom factor itself",computed:"autoNonNegativeOrPercentage",order:"uniqueOrder",status:"standard"},"min-height":{syntax:"<viewport-length>",media:["visual","continuous"],initial:"auto",percentages:"referToHeightOfInitialViewport",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard"},"min-width":{syntax:"<viewport-length>",media:["visual","continuous"],initial:"auto",percentages:"referToWidthOfInitialViewport",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard"},"min-zoom":{syntax:"auto | <number> | <percentage>",media:["visual","continuous"],initial:"auto",percentages:"the zoom factor itself",computed:"autoNonNegativeOrPercentage",order:"uniqueOrder",status:"standard"},orientation:{syntax:"auto | portrait | landscape",media:["visual","continuous"],initial:"auto",percentages:"referToSizeOfBoundingBox",computed:"asSpecified",order:"uniqueOrder",status:"standard"},"user-zoom":{syntax:"zoom | fixed",media:["visual","continuous"],initial:"zoom",percentages:"referToSizeOfBoundingBox",computed:"asSpecified",order:"uniqueOrder",status:"standard"},"viewport-fit":{syntax:"auto | contain | cover",media:["visual","continuous"],initial:"auto",percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},width:{syntax:"<viewport-length>{1,2}",media:["visual","continuous"],initial:["min-width","max-width"],percentages:["min-width","max-width"],computed:["min-width","max-width"],order:"orderOfAppearance",status:"standard"},zoom:{syntax:"auto | <number> | <percentage>",media:["visual","continuous"],initial:"auto",percentages:"the zoom factor itself",computed:"autoNonNegativeOrPercentage",order:"uniqueOrder",status:"standard"}},status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@viewport"}}});var vS=ze((y4,uO)=>{uO.exports={"--*":{syntax:"<declaration-value>",media:"all",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Variables"],initial:"seeProse",appliesto:"allElements",computed:"asSpecifiedWithVarsSubstituted",order:"perGrammar",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/--*"},"-ms-accelerator":{syntax:"false | true",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"false",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-accelerator"},"-ms-block-progression":{syntax:"tb | rl | bt | lr",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"tb",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-block-progression"},"-ms-content-zoom-chaining":{syntax:"none | chained",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"none",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-content-zoom-chaining"},"-ms-content-zooming":{syntax:"none | zoom",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"zoomForTheTopLevelNoneForTheRest",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-content-zooming"},"-ms-content-zoom-limit":{syntax:"<'-ms-content-zoom-limit-min'> <'-ms-content-zoom-limit-max'>",media:"interactive",inherited:!1,animationType:"discrete",percentages:["-ms-content-zoom-limit-max","-ms-content-zoom-limit-min"],groups:["Microsoft Extensions"],initial:["-ms-content-zoom-limit-max","-ms-content-zoom-limit-min"],appliesto:"nonReplacedBlockAndInlineBlockElements",computed:["-ms-content-zoom-limit-max","-ms-content-zoom-limit-min"],order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-content-zoom-limit"},"-ms-content-zoom-limit-max":{syntax:"<percentage>",media:"interactive",inherited:!1,animationType:"discrete",percentages:"maxZoomFactor",groups:["Microsoft Extensions"],initial:"400%",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-content-zoom-limit-max"},"-ms-content-zoom-limit-min":{syntax:"<percentage>",media:"interactive",inherited:!1,animationType:"discrete",percentages:"minZoomFactor",groups:["Microsoft Extensions"],initial:"100%",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-content-zoom-limit-min"},"-ms-content-zoom-snap":{syntax:"<'-ms-content-zoom-snap-type'> || <'-ms-content-zoom-snap-points'>",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:["-ms-content-zoom-snap-type","-ms-content-zoom-snap-points"],appliesto:"nonReplacedBlockAndInlineBlockElements",computed:["-ms-content-zoom-snap-type","-ms-content-zoom-snap-points"],order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-content-zoom-snap"},"-ms-content-zoom-snap-points":{syntax:"snapInterval( <percentage>, <percentage> ) | snapList( <percentage># )",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"snapInterval(0%, 100%)",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-content-zoom-snap-points"},"-ms-content-zoom-snap-type":{syntax:"none | proximity | mandatory",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"none",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-content-zoom-snap-type"},"-ms-filter":{syntax:"<string>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:'""',appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-filter"},"-ms-flow-from":{syntax:"[ none | <custom-ident> ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"none",appliesto:"nonReplacedElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-flow-from"},"-ms-flow-into":{syntax:"[ none | <custom-ident> ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"none",appliesto:"iframeElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-flow-into"},"-ms-grid-columns":{syntax:"none | <track-list> | <auto-track-list>",media:"visual",inherited:!1,animationType:"simpleListOfLpcDifferenceLpc",percentages:"referToDimensionOfContentArea",groups:["CSS Grid Layout"],initial:"none",appliesto:"gridContainers",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-grid-columns"},"-ms-grid-rows":{syntax:"none | <track-list> | <auto-track-list>",media:"visual",inherited:!1,animationType:"simpleListOfLpcDifferenceLpc",percentages:"referToDimensionOfContentArea",groups:["CSS Grid Layout"],initial:"none",appliesto:"gridContainers",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-grid-rows"},"-ms-high-contrast-adjust":{syntax:"auto | none",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-high-contrast-adjust"},"-ms-hyphenate-limit-chars":{syntax:"auto | <integer>{1,3}",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-hyphenate-limit-chars"},"-ms-hyphenate-limit-lines":{syntax:"no-limit | <integer>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"no-limit",appliesto:"blockContainerElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-hyphenate-limit-lines"},"-ms-hyphenate-limit-zone":{syntax:"<percentage> | <length>",media:"visual",inherited:!0,animationType:"discrete",percentages:"referToLineBoxWidth",groups:["Microsoft Extensions"],initial:"0",appliesto:"blockContainerElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-hyphenate-limit-zone"},"-ms-ime-align":{syntax:"auto | after",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-ime-align"},"-ms-overflow-style":{syntax:"auto | none | scrollbar | -ms-autohiding-scrollbar",media:"interactive",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"auto",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-overflow-style"},"-ms-scrollbar-3dlight-color":{syntax:"<color>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"dependsOnUserAgent",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scrollbar-3dlight-color"},"-ms-scrollbar-arrow-color":{syntax:"<color>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"ButtonText",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scrollbar-arrow-color"},"-ms-scrollbar-base-color":{syntax:"<color>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"dependsOnUserAgent",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scrollbar-base-color"},"-ms-scrollbar-darkshadow-color":{syntax:"<color>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"ThreeDDarkShadow",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scrollbar-darkshadow-color"},"-ms-scrollbar-face-color":{syntax:"<color>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"ThreeDFace",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scrollbar-face-color"},"-ms-scrollbar-highlight-color":{syntax:"<color>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"ThreeDHighlight",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scrollbar-highlight-color"},"-ms-scrollbar-shadow-color":{syntax:"<color>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"ThreeDDarkShadow",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scrollbar-shadow-color"},"-ms-scrollbar-track-color":{syntax:"<color>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"Scrollbar",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scrollbar-track-color"},"-ms-scroll-chaining":{syntax:"chained | none",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"chained",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-chaining"},"-ms-scroll-limit":{syntax:"<'-ms-scroll-limit-x-min'> <'-ms-scroll-limit-y-min'> <'-ms-scroll-limit-x-max'> <'-ms-scroll-limit-y-max'>",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:["-ms-scroll-limit-x-min","-ms-scroll-limit-y-min","-ms-scroll-limit-x-max","-ms-scroll-limit-y-max"],appliesto:"nonReplacedBlockAndInlineBlockElements",computed:["-ms-scroll-limit-x-min","-ms-scroll-limit-y-min","-ms-scroll-limit-x-max","-ms-scroll-limit-y-max"],order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-limit"},"-ms-scroll-limit-x-max":{syntax:"auto | <length>",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"auto",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-limit-x-max"},"-ms-scroll-limit-x-min":{syntax:"<length>",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"0",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-limit-x-min"},"-ms-scroll-limit-y-max":{syntax:"auto | <length>",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"auto",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-limit-y-max"},"-ms-scroll-limit-y-min":{syntax:"<length>",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"0",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-limit-y-min"},"-ms-scroll-rails":{syntax:"none | railed",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"railed",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-rails"},"-ms-scroll-snap-points-x":{syntax:"snapInterval( <length-percentage>, <length-percentage> ) | snapList( <length-percentage># )",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"snapInterval(0px, 100%)",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-snap-points-x"},"-ms-scroll-snap-points-y":{syntax:"snapInterval( <length-percentage>, <length-percentage> ) | snapList( <length-percentage># )",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"snapInterval(0px, 100%)",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-snap-points-y"},"-ms-scroll-snap-type":{syntax:"none | proximity | mandatory",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"none",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-snap-type"},"-ms-scroll-snap-x":{syntax:"<'-ms-scroll-snap-type'> <'-ms-scroll-snap-points-x'>",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:["-ms-scroll-snap-type","-ms-scroll-snap-points-x"],appliesto:"nonReplacedBlockAndInlineBlockElements",computed:["-ms-scroll-snap-type","-ms-scroll-snap-points-x"],order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-snap-x"},"-ms-scroll-snap-y":{syntax:"<'-ms-scroll-snap-type'> <'-ms-scroll-snap-points-y'>",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:["-ms-scroll-snap-type","-ms-scroll-snap-points-y"],appliesto:"nonReplacedBlockAndInlineBlockElements",computed:["-ms-scroll-snap-type","-ms-scroll-snap-points-y"],order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-snap-y"},"-ms-scroll-translation":{syntax:"none | vertical-to-horizontal",media:"interactive",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-translation"},"-ms-text-autospace":{syntax:"none | ideograph-alpha | ideograph-numeric | ideograph-parenthesis | ideograph-space",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-text-autospace"},"-ms-touch-select":{syntax:"grippers | none",media:"interactive",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"grippers",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-touch-select"},"-ms-user-select":{syntax:"none | element | text",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"text",appliesto:"nonReplacedElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-user-select"},"-ms-wrap-flow":{syntax:"auto | both | start | end | maximum | clear",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"auto",appliesto:"blockLevelElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-wrap-flow"},"-ms-wrap-margin":{syntax:"<length>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"0",appliesto:"exclusionElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-wrap-margin"},"-ms-wrap-through":{syntax:"wrap | none",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"wrap",appliesto:"blockLevelElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-wrap-through"},"-moz-appearance":{syntax:"none | button | button-arrow-down | button-arrow-next | button-arrow-previous | button-arrow-up | button-bevel | button-focus | caret | checkbox | checkbox-container | checkbox-label | checkmenuitem | dualbutton | groupbox | listbox | listitem | menuarrow | menubar | menucheckbox | menuimage | menuitem | menuitemtext | menulist | menulist-button | menulist-text | menulist-textfield | menupopup | menuradio | menuseparator | meterbar | meterchunk | progressbar | progressbar-vertical | progresschunk | progresschunk-vertical | radio | radio-container | radio-label | radiomenuitem | range | range-thumb | resizer | resizerpanel | scale-horizontal | scalethumbend | scalethumb-horizontal | scalethumbstart | scalethumbtick | scalethumb-vertical | scale-vertical | scrollbarbutton-down | scrollbarbutton-left | scrollbarbutton-right | scrollbarbutton-up | scrollbarthumb-horizontal | scrollbarthumb-vertical | scrollbartrack-horizontal | scrollbartrack-vertical | searchfield | separator | sheet | spinner | spinner-downbutton | spinner-textfield | spinner-upbutton | splitter | statusbar | statusbarpanel | tab | tabpanel | tabpanels | tab-scroll-arrow-back | tab-scroll-arrow-forward | textfield | textfield-multiline | toolbar | toolbarbutton | toolbarbutton-dropdown | toolbargripper | toolbox | tooltip | treeheader | treeheadercell | treeheadersortarrow | treeitem | treeline | treetwisty | treetwistyopen | treeview | -moz-mac-unified-toolbar | -moz-win-borderless-glass | -moz-win-browsertabbar-toolbox | -moz-win-communicationstext | -moz-win-communications-toolbox | -moz-win-exclude-glass | -moz-win-glass | -moz-win-mediatext | -moz-win-media-toolbox | -moz-window-button-box | -moz-window-button-box-maximized | -moz-window-button-close | -moz-window-button-maximize | -moz-window-button-minimize | -moz-window-button-restore | -moz-window-frame-bottom | -moz-window-frame-left | -moz-window-frame-right | -moz-window-titlebar | -moz-window-titlebar-maximized",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions","WebKit Extensions"],initial:"noneButOverriddenInUserAgentCSS",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/appearance"},"-moz-binding":{syntax:"<url> | none",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"none",appliesto:"allElementsExceptGeneratedContentOrPseudoElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-binding"},"-moz-border-bottom-colors":{syntax:"<color>+ | none",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-border-bottom-colors"},"-moz-border-left-colors":{syntax:"<color>+ | none",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-border-left-colors"},"-moz-border-right-colors":{syntax:"<color>+ | none",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-border-right-colors"},"-moz-border-top-colors":{syntax:"<color>+ | none",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-border-top-colors"},"-moz-context-properties":{syntax:"none | [ fill | fill-opacity | stroke | stroke-opacity ]#",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"none",appliesto:"allElementsThatCanReferenceImages",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-context-properties"},"-moz-float-edge":{syntax:"border-box | content-box | margin-box | padding-box",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"content-box",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-float-edge"},"-moz-force-broken-image-icon":{syntax:"<integer [0,1]>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"0",appliesto:"images",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-force-broken-image-icon"},"-moz-image-region":{syntax:"<shape> | auto",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"auto",appliesto:"xulImageElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-image-region"},"-moz-orient":{syntax:"inline | block | horizontal | vertical",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"inline",appliesto:"anyElementEffectOnProgressAndMeter",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-orient"},"-moz-outline-radius":{syntax:"<outline-radius>{1,4} [ / <outline-radius>{1,4} ]?",media:"visual",inherited:!1,animationType:["-moz-outline-radius-topleft","-moz-outline-radius-topright","-moz-outline-radius-bottomright","-moz-outline-radius-bottomleft"],percentages:["-moz-outline-radius-topleft","-moz-outline-radius-topright","-moz-outline-radius-bottomright","-moz-outline-radius-bottomleft"],groups:["Mozilla Extensions"],initial:["-moz-outline-radius-topleft","-moz-outline-radius-topright","-moz-outline-radius-bottomright","-moz-outline-radius-bottomleft"],appliesto:"allElements",computed:["-moz-outline-radius-topleft","-moz-outline-radius-topright","-moz-outline-radius-bottomright","-moz-outline-radius-bottomleft"],order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-outline-radius"},"-moz-outline-radius-bottomleft":{syntax:"<outline-radius>",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["Mozilla Extensions"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-outline-radius-bottomleft"},"-moz-outline-radius-bottomright":{syntax:"<outline-radius>",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["Mozilla Extensions"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-outline-radius-bottomright"},"-moz-outline-radius-topleft":{syntax:"<outline-radius>",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["Mozilla Extensions"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-outline-radius-topleft"},"-moz-outline-radius-topright":{syntax:"<outline-radius>",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["Mozilla Extensions"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-outline-radius-topright"},"-moz-stack-sizing":{syntax:"ignore | stretch-to-fit",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"stretch-to-fit",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-stack-sizing"},"-moz-text-blink":{syntax:"none | blink",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-text-blink"},"-moz-user-focus":{syntax:"ignore | normal | select-after | select-before | select-menu | select-same | select-all | none",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-user-focus"},"-moz-user-input":{syntax:"auto | none | enabled | disabled",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-user-input"},"-moz-user-modify":{syntax:"read-only | read-write | write-only",media:"interactive",inherited:!0,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"read-only",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-user-modify"},"-moz-window-dragging":{syntax:"drag | no-drag",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"drag",appliesto:"allElementsCreatingNativeWindows",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-window-dragging"},"-moz-window-shadow":{syntax:"default | menu | tooltip | sheet | none",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"default",appliesto:"allElementsCreatingNativeWindows",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-window-shadow"},"-webkit-appearance":{syntax:"none | button | button-bevel | caret | checkbox | default-button | inner-spin-button | listbox | listitem | media-controls-background | media-controls-fullscreen-background | media-current-time-display | media-enter-fullscreen-button | media-exit-fullscreen-button | media-fullscreen-button | media-mute-button | media-overlay-play-button | media-play-button | media-seek-back-button | media-seek-forward-button | media-slider | media-sliderthumb | media-time-remaining-display | media-toggle-closed-captions-button | media-volume-slider | media-volume-slider-container | media-volume-sliderthumb | menulist | menulist-button | menulist-text | menulist-textfield | meter | progress-bar | progress-bar-value | push-button | radio | searchfield | searchfield-cancel-button | searchfield-decoration | searchfield-results-button | searchfield-results-decoration | slider-horizontal | slider-vertical | sliderthumb-horizontal | sliderthumb-vertical | square-button | textarea | textfield | -apple-pay-button",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"noneButOverriddenInUserAgentCSS",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/appearance"},"-webkit-border-before":{syntax:"<'border-width'> || <'border-style'> || <'color'>",media:"visual",inherited:!0,animationType:"discrete",percentages:["-webkit-border-before-width"],groups:["WebKit Extensions"],initial:["border-width","border-style","color"],appliesto:"allElements",computed:["border-width","border-style","color"],order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-border-before"},"-webkit-border-before-color":{syntax:"<'color'>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",status:"nonstandard"},"-webkit-border-before-style":{syntax:"<'border-style'>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard"},"-webkit-border-before-width":{syntax:"<'border-width'>",media:"visual",inherited:!0,animationType:"discrete",percentages:"logicalWidthOfContainingBlock",groups:["WebKit Extensions"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthZeroIfBorderStyleNoneOrHidden",order:"uniqueOrder",status:"nonstandard"},"-webkit-box-reflect":{syntax:"[ above | below | right | left ]? <length>? <image>?",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-box-reflect"},"-webkit-line-clamp":{syntax:"none | <integer>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["WebKit Extensions","CSS Overflow"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-line-clamp"},"-webkit-mask":{syntax:"[ <mask-reference> || <position> [ / <bg-size> ]? || <repeat-style> || [ <box> | border | padding | content | text ] || [ <box> | border | padding | content ] ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:["-webkit-mask-image","-webkit-mask-repeat","-webkit-mask-attachment","-webkit-mask-position","-webkit-mask-origin","-webkit-mask-clip"],appliesto:"allElements",computed:["-webkit-mask-image","-webkit-mask-repeat","-webkit-mask-attachment","-webkit-mask-position","-webkit-mask-origin","-webkit-mask-clip"],order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask"},"-webkit-mask-attachment":{syntax:"<attachment>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"scroll",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-mask-attachment"},"-webkit-mask-clip":{syntax:"[ <box> | border | padding | content | text ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"border",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-clip"},"-webkit-mask-composite":{syntax:"<composite-style>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"source-over",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-mask-composite"},"-webkit-mask-image":{syntax:"<mask-reference>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"none",appliesto:"allElements",computed:"absoluteURIOrNone",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-image"},"-webkit-mask-origin":{syntax:"[ <box> | border | padding | content ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"padding",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-origin"},"-webkit-mask-position":{syntax:"<position>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"referToSizeOfElement",groups:["WebKit Extensions"],initial:"0% 0%",appliesto:"allElements",computed:"absoluteLengthOrPercentage",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-position"},"-webkit-mask-position-x":{syntax:"[ <length-percentage> | left | center | right ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"referToSizeOfElement",groups:["WebKit Extensions"],initial:"0%",appliesto:"allElements",computed:"absoluteLengthOrPercentage",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-mask-position-x"},"-webkit-mask-position-y":{syntax:"[ <length-percentage> | top | center | bottom ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"referToSizeOfElement",groups:["WebKit Extensions"],initial:"0%",appliesto:"allElements",computed:"absoluteLengthOrPercentage",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-mask-position-y"},"-webkit-mask-repeat":{syntax:"<repeat-style>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"repeat",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-repeat"},"-webkit-mask-repeat-x":{syntax:"repeat | no-repeat | space | round",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"repeat",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-mask-repeat-x"},"-webkit-mask-repeat-y":{syntax:"repeat | no-repeat | space | round",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"repeat",appliesto:"allElements",computed:"absoluteLengthOrPercentage",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-mask-repeat-y"},"-webkit-mask-size":{syntax:"<bg-size>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"relativeToBackgroundPositioningArea",groups:["WebKit Extensions"],initial:"auto auto",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-size"},"-webkit-overflow-scrolling":{syntax:"auto | touch",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"auto",appliesto:"scrollingBoxes",computed:"asSpecified",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-overflow-scrolling"},"-webkit-tap-highlight-color":{syntax:"<color>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"black",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-tap-highlight-color"},"-webkit-text-fill-color":{syntax:"<color>",media:"visual",inherited:!0,animationType:"color",percentages:"no",groups:["WebKit Extensions"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-text-fill-color"},"-webkit-text-stroke":{syntax:"<length> || <color>",media:"visual",inherited:!0,animationType:["-webkit-text-stroke-width","-webkit-text-stroke-color"],percentages:"no",groups:["WebKit Extensions"],initial:["-webkit-text-stroke-width","-webkit-text-stroke-color"],appliesto:"allElements",computed:["-webkit-text-stroke-width","-webkit-text-stroke-color"],order:"canonicalOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-text-stroke"},"-webkit-text-stroke-color":{syntax:"<color>",media:"visual",inherited:!0,animationType:"color",percentages:"no",groups:["WebKit Extensions"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-text-stroke-color"},"-webkit-text-stroke-width":{syntax:"<length>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"0",appliesto:"allElements",computed:"absoluteLength",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-text-stroke-width"},"-webkit-touch-callout":{syntax:"default | none",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"default",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-touch-callout"},"-webkit-user-modify":{syntax:"read-only | read-write | read-write-plaintext-only",media:"interactive",inherited:!0,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"read-only",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard"},"align-content":{syntax:"normal | <baseline-position> | <content-distribution> | <overflow-position>? <content-position>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Alignment"],initial:"normal",appliesto:"multilineFlexContainers",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/align-content"},"align-items":{syntax:"normal | stretch | <baseline-position> | [ <overflow-position>? <self-position> ]",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Alignment"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/align-items"},"align-self":{syntax:"auto | normal | stretch | <baseline-position> | <overflow-position>? <self-position>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Alignment"],initial:"auto",appliesto:"flexItemsGridItemsAndAbsolutelyPositionedBoxes",computed:"autoOnAbsolutelyPositionedElementsValueOfAlignItemsOnParent",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/align-self"},"align-tracks":{syntax:"[ normal | <baseline-position> | <content-distribution> | <overflow-position>? <content-position> ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:"normal",appliesto:"gridContainersWithMasonryLayoutInTheirBlockAxis",computed:"asSpecified",order:"uniqueOrder",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/align-tracks"},all:{syntax:"initial | inherit | unset | revert",media:"noPracticalMedia",inherited:!1,animationType:"eachOfShorthandPropertiesExceptUnicodeBiDiAndDirection",percentages:"no",groups:["CSS Miscellaneous"],initial:"noPracticalInitialValue",appliesto:"allElements",computed:"asSpecifiedAppliesToEachProperty",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/all"},animation:{syntax:"<single-animation>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Animations"],initial:["animation-name","animation-duration","animation-timing-function","animation-delay","animation-iteration-count","animation-direction","animation-fill-mode","animation-play-state"],appliesto:"allElementsAndPseudos",computed:["animation-name","animation-duration","animation-timing-function","animation-delay","animation-direction","animation-iteration-count","animation-fill-mode","animation-play-state"],order:"orderOfAppearance",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/animation"},"animation-delay":{syntax:"<time>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Animations"],initial:"0s",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/animation-delay"},"animation-direction":{syntax:"<single-animation-direction>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Animations"],initial:"normal",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/animation-direction"},"animation-duration":{syntax:"<time>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Animations"],initial:"0s",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/animation-duration"},"animation-fill-mode":{syntax:"<single-animation-fill-mode>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Animations"],initial:"none",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/animation-fill-mode"},"animation-iteration-count":{syntax:"<single-animation-iteration-count>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Animations"],initial:"1",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/animation-iteration-count"},"animation-name":{syntax:"[ none | <keyframes-name> ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Animations"],initial:"none",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/animation-name"},"animation-play-state":{syntax:"<single-animation-play-state>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Animations"],initial:"running",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/animation-play-state"},"animation-timing-function":{syntax:"<timing-function>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Animations"],initial:"ease",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/animation-timing-function"},appearance:{syntax:"none | auto | textfield | menulist-button | <compat-auto>",media:"all",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Basic User Interface"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/appearance"},"aspect-ratio":{syntax:"auto | <ratio>",media:"all",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Basic User Interface"],initial:"auto",appliesto:"allElementsExceptInlineBoxesAndInternalRubyOrTableBoxes",computed:"asSpecified",order:"perGrammar",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/aspect-ratio"},azimuth:{syntax:"<angle> | [ [ left-side | far-left | left | center-left | center | center-right | right | far-right | right-side ] || behind ] | leftwards | rightwards",media:"aural",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Speech"],initial:"center",appliesto:"allElements",computed:"normalizedAngle",order:"orderOfAppearance",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/azimuth"},"backdrop-filter":{syntax:"none | <filter-function-list>",media:"visual",inherited:!1,animationType:"filterList",percentages:"no",groups:["Filter Effects"],initial:"none",appliesto:"allElementsSVGContainerElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/backdrop-filter"},"backface-visibility":{syntax:"visible | hidden",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Transforms"],initial:"visible",appliesto:"transformableElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/backface-visibility"},background:{syntax:"[ <bg-layer> , ]* <final-bg-layer>",media:"visual",inherited:!1,animationType:["background-color","background-image","background-clip","background-position","background-size","background-repeat","background-attachment"],percentages:["background-position","background-size"],groups:["CSS Backgrounds and Borders"],initial:["background-image","background-position","background-size","background-repeat","background-origin","background-clip","background-attachment","background-color"],appliesto:"allElements",computed:["background-image","background-position","background-size","background-repeat","background-origin","background-clip","background-attachment","background-color"],order:"orderOfAppearance",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background"},"background-attachment":{syntax:"<attachment>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"scroll",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-attachment"},"background-blend-mode":{syntax:"<blend-mode>#",media:"none",inherited:!1,animationType:"discrete",percentages:"no",groups:["Compositing and Blending"],initial:"normal",appliesto:"allElementsSVGContainerGraphicsAndGraphicsReferencingElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-blend-mode"},"background-clip":{syntax:"<box>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"border-box",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-clip"},"background-color":{syntax:"<color>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"transparent",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-color"},"background-image":{syntax:"<bg-image>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"none",appliesto:"allElements",computed:"asSpecifiedURLsAbsolute",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-image"},"background-origin":{syntax:"<box>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"padding-box",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-origin"},"background-position":{syntax:"<bg-position>#",media:"visual",inherited:!1,animationType:"repeatableListOfSimpleListOfLpc",percentages:"referToSizeOfBackgroundPositioningAreaMinusBackgroundImageSize",groups:["CSS Backgrounds and Borders"],initial:"0% 0%",appliesto:"allElements",computed:"listEachItemTwoKeywordsOriginOffsets",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-position"},"background-position-x":{syntax:"[ center | [ [ left | right | x-start | x-end ]? <length-percentage>? ]! ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"referToWidthOfBackgroundPositioningAreaMinusBackgroundImageHeight",groups:["CSS Backgrounds and Borders"],initial:"left",appliesto:"allElements",computed:"listEachItemConsistingOfAbsoluteLengthPercentageAndOrigin",order:"uniqueOrder",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-position-x"},"background-position-y":{syntax:"[ center | [ [ top | bottom | y-start | y-end ]? <length-percentage>? ]! ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"referToHeightOfBackgroundPositioningAreaMinusBackgroundImageHeight",groups:["CSS Backgrounds and Borders"],initial:"top",appliesto:"allElements",computed:"listEachItemConsistingOfAbsoluteLengthPercentageAndOrigin",order:"uniqueOrder",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-position-y"},"background-repeat":{syntax:"<repeat-style>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"repeat",appliesto:"allElements",computed:"listEachItemHasTwoKeywordsOnePerDimension",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-repeat"},"background-size":{syntax:"<bg-size>#",media:"visual",inherited:!1,animationType:"repeatableListOfSimpleListOfLpc",percentages:"relativeToBackgroundPositioningArea",groups:["CSS Backgrounds and Borders"],initial:"auto auto",appliesto:"allElements",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-size"},"block-overflow":{syntax:"clip | ellipsis | <string>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Overflow"],initial:"clip",appliesto:"blockContainers",computed:"asSpecified",order:"perGrammar",status:"experimental"},"block-size":{syntax:"<'width'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"blockSizeOfContainingBlock",groups:["CSS Logical Properties"],initial:"auto",appliesto:"sameAsWidthAndHeight",computed:"sameAsWidthAndHeight",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/block-size"},border:{syntax:"<line-width> || <line-style> || <color>",media:"visual",inherited:!1,animationType:["border-color","border-style","border-width"],percentages:"no",groups:["CSS Backgrounds and Borders"],initial:["border-width","border-style","border-color"],appliesto:"allElements",computed:["border-width","border-style","border-color"],order:"orderOfAppearance",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border"},"border-block":{syntax:"<'border-top-width'> || <'border-top-style'> || <'color'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Logical Properties"],initial:["border-top-width","border-top-style","border-top-color"],appliesto:"allElements",computed:["border-top-width","border-top-style","border-top-color"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block"},"border-block-color":{syntax:"<'border-top-color'>{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Logical Properties"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-color"},"border-block-style":{syntax:"<'border-top-style'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Logical Properties"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-style"},"border-block-width":{syntax:"<'border-top-width'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthZeroIfBorderStyleNoneOrHidden",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-width"},"border-block-end":{syntax:"<'border-top-width'> || <'border-top-style'> || <'color'>",media:"visual",inherited:!1,animationType:["border-block-end-color","border-block-end-style","border-block-end-width"],percentages:"no",groups:["CSS Logical Properties"],initial:["border-top-width","border-top-style","border-top-color"],appliesto:"allElements",computed:["border-top-width","border-top-style","border-top-color"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-end"},"border-block-end-color":{syntax:"<'border-top-color'>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Logical Properties"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-end-color"},"border-block-end-style":{syntax:"<'border-top-style'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Logical Properties"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-end-style"},"border-block-end-width":{syntax:"<'border-top-width'>",media:"visual",inherited:!1,animationType:"length",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthZeroIfBorderStyleNoneOrHidden",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-end-width"},"border-block-start":{syntax:"<'border-top-width'> || <'border-top-style'> || <'color'>",media:"visual",inherited:!1,animationType:["border-block-start-color","border-block-start-style","border-block-start-width"],percentages:"no",groups:["CSS Logical Properties"],initial:["border-width","border-style","color"],appliesto:"allElements",computed:["border-width","border-style","border-block-start-color"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-start"},"border-block-start-color":{syntax:"<'border-top-color'>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Logical Properties"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-start-color"},"border-block-start-style":{syntax:"<'border-top-style'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Logical Properties"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-start-style"},"border-block-start-width":{syntax:"<'border-top-width'>",media:"visual",inherited:!1,animationType:"length",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthZeroIfBorderStyleNoneOrHidden",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-start-width"},"border-bottom":{syntax:"<line-width> || <line-style> || <color>",media:"visual",inherited:!1,animationType:["border-bottom-color","border-bottom-style","border-bottom-width"],percentages:"no",groups:["CSS Backgrounds and Borders"],initial:["border-bottom-width","border-bottom-style","border-bottom-color"],appliesto:"allElements",computed:["border-bottom-width","border-bottom-style","border-bottom-color"],order:"orderOfAppearance",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-bottom"},"border-bottom-color":{syntax:"<'border-top-color'>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-bottom-color"},"border-bottom-left-radius":{syntax:"<length-percentage>{1,2}",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["CSS Backgrounds and Borders"],initial:"0",appliesto:"allElementsUAsNotRequiredWhenCollapse",computed:"twoAbsoluteLengthOrPercentages",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-bottom-left-radius"},"border-bottom-right-radius":{syntax:"<length-percentage>{1,2}",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["CSS Backgrounds and Borders"],initial:"0",appliesto:"allElementsUAsNotRequiredWhenCollapse",computed:"twoAbsoluteLengthOrPercentages",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-bottom-right-radius"},"border-bottom-style":{syntax:"<line-style>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-bottom-style"},"border-bottom-width":{syntax:"<line-width>",media:"visual",inherited:!1,animationType:"length",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthOr0IfBorderBottomStyleNoneOrHidden",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-bottom-width"},"border-collapse":{syntax:"collapse | separate",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Table"],initial:"separate",appliesto:"tableElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-collapse"},"border-color":{syntax:"<color>{1,4}",media:"visual",inherited:!1,animationType:["border-bottom-color","border-left-color","border-right-color","border-top-color"],percentages:"no",groups:["CSS Backgrounds and Borders"],initial:["border-top-color","border-right-color","border-bottom-color","border-left-color"],appliesto:"allElements",computed:["border-bottom-color","border-left-color","border-right-color","border-top-color"],order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-color"},"border-end-end-radius":{syntax:"<length-percentage>{1,2}",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["CSS Logical Properties"],initial:"0",appliesto:"allElementsUAsNotRequiredWhenCollapse",computed:"twoAbsoluteLengthOrPercentages",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-end-end-radius"},"border-end-start-radius":{syntax:"<length-percentage>{1,2}",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["CSS Logical Properties"],initial:"0",appliesto:"allElementsUAsNotRequiredWhenCollapse",computed:"twoAbsoluteLengthOrPercentages",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-end-start-radius"},"border-image":{syntax:"<'border-image-source'> || <'border-image-slice'> [ / <'border-image-width'> | / <'border-image-width'>? / <'border-image-outset'> ]? || <'border-image-repeat'>",media:"visual",inherited:!1,animationType:"discrete",percentages:["border-image-slice","border-image-width"],groups:["CSS Backgrounds and Borders"],initial:["border-image-source","border-image-slice","border-image-width","border-image-outset","border-image-repeat"],appliesto:"allElementsExceptTableElementsWhenCollapse",computed:["border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width"],order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-image"},"border-image-outset":{syntax:"[ <length> | <number> ]{1,4}",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"0",appliesto:"allElementsExceptTableElementsWhenCollapse",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-image-outset"},"border-image-repeat":{syntax:"[ stretch | repeat | round | space ]{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"stretch",appliesto:"allElementsExceptTableElementsWhenCollapse",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-image-repeat"},"border-image-slice":{syntax:"<number-percentage>{1,4} && fill?",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"referToSizeOfBorderImage",groups:["CSS Backgrounds and Borders"],initial:"100%",appliesto:"allElementsExceptTableElementsWhenCollapse",computed:"oneToFourPercentagesOrAbsoluteLengthsPlusFill",order:"percentagesOrLengthsFollowedByFill",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-image-slice"},"border-image-source":{syntax:"none | <image>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"none",appliesto:"allElementsExceptTableElementsWhenCollapse",computed:"noneOrImageWithAbsoluteURI",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-image-source"},"border-image-width":{syntax:"[ <length-percentage> | <number> | auto ]{1,4}",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"referToWidthOrHeightOfBorderImageArea",groups:["CSS Backgrounds and Borders"],initial:"1",appliesto:"allElementsExceptTableElementsWhenCollapse",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-image-width"},"border-inline":{syntax:"<'border-top-width'> || <'border-top-style'> || <'color'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Logical Properties"],initial:["border-top-width","border-top-style","border-top-color"],appliesto:"allElements",computed:["border-top-width","border-top-style","border-top-color"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline"},"border-inline-end":{syntax:"<'border-top-width'> || <'border-top-style'> || <'color'>",media:"visual",inherited:!1,animationType:["border-inline-end-color","border-inline-end-style","border-inline-end-width"],percentages:"no",groups:["CSS Logical Properties"],initial:["border-width","border-style","color"],appliesto:"allElements",computed:["border-width","border-style","border-inline-end-color"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-end"},"border-inline-color":{syntax:"<'border-top-color'>{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Logical Properties"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-color"},"border-inline-style":{syntax:"<'border-top-style'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Logical Properties"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-style"},"border-inline-width":{syntax:"<'border-top-width'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthZeroIfBorderStyleNoneOrHidden",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-width"},"border-inline-end-color":{syntax:"<'border-top-color'>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Logical Properties"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-end-color"},"border-inline-end-style":{syntax:"<'border-top-style'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Logical Properties"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-end-style"},"border-inline-end-width":{syntax:"<'border-top-width'>",media:"visual",inherited:!1,animationType:"length",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthZeroIfBorderStyleNoneOrHidden",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-end-width"},"border-inline-start":{syntax:"<'border-top-width'> || <'border-top-style'> || <'color'>",media:"visual",inherited:!1,animationType:["border-inline-start-color","border-inline-start-style","border-inline-start-width"],percentages:"no",groups:["CSS Logical Properties"],initial:["border-width","border-style","color"],appliesto:"allElements",computed:["border-width","border-style","border-inline-start-color"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-start"},"border-inline-start-color":{syntax:"<'border-top-color'>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Logical Properties"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-start-color"},"border-inline-start-style":{syntax:"<'border-top-style'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Logical Properties"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-start-style"},"border-inline-start-width":{syntax:"<'border-top-width'>",media:"visual",inherited:!1,animationType:"length",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthZeroIfBorderStyleNoneOrHidden",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-start-width"},"border-left":{syntax:"<line-width> || <line-style> || <color>",media:"visual",inherited:!1,animationType:["border-left-color","border-left-style","border-left-width"],percentages:"no",groups:["CSS Backgrounds and Borders"],initial:["border-left-width","border-left-style","border-left-color"],appliesto:"allElements",computed:["border-left-width","border-left-style","border-left-color"],order:"orderOfAppearance",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-left"},"border-left-color":{syntax:"<color>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-left-color"},"border-left-style":{syntax:"<line-style>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-left-style"},"border-left-width":{syntax:"<line-width>",media:"visual",inherited:!1,animationType:"length",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthOr0IfBorderLeftStyleNoneOrHidden",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-left-width"},"border-radius":{syntax:"<length-percentage>{1,4} [ / <length-percentage>{1,4} ]?",media:"visual",inherited:!1,animationType:["border-top-left-radius","border-top-right-radius","border-bottom-right-radius","border-bottom-left-radius"],percentages:"referToDimensionOfBorderBox",groups:["CSS Backgrounds and Borders"],initial:["border-top-left-radius","border-top-right-radius","border-bottom-right-radius","border-bottom-left-radius"],appliesto:"allElementsUAsNotRequiredWhenCollapse",computed:["border-bottom-left-radius","border-bottom-right-radius","border-top-left-radius","border-top-right-radius"],order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-radius"},"border-right":{syntax:"<line-width> || <line-style> || <color>",media:"visual",inherited:!1,animationType:["border-right-color","border-right-style","border-right-width"],percentages:"no",groups:["CSS Backgrounds and Borders"],initial:["border-right-width","border-right-style","border-right-color"],appliesto:"allElements",computed:["border-right-width","border-right-style","border-right-color"],order:"orderOfAppearance",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-right"},"border-right-color":{syntax:"<color>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-right-color"},"border-right-style":{syntax:"<line-style>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-right-style"},"border-right-width":{syntax:"<line-width>",media:"visual",inherited:!1,animationType:"length",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthOr0IfBorderRightStyleNoneOrHidden",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-right-width"},"border-spacing":{syntax:"<length> <length>?",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Table"],initial:"0",appliesto:"tableElements",computed:"twoAbsoluteLengths",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-spacing"},"border-start-end-radius":{syntax:"<length-percentage>{1,2}",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["CSS Logical Properties"],initial:"0",appliesto:"allElementsUAsNotRequiredWhenCollapse",computed:"twoAbsoluteLengthOrPercentages",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-start-end-radius"},"border-start-start-radius":{syntax:"<length-percentage>{1,2}",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["CSS Logical Properties"],initial:"0",appliesto:"allElementsUAsNotRequiredWhenCollapse",computed:"twoAbsoluteLengthOrPercentages",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-start-start-radius"},"border-style":{syntax:"<line-style>{1,4}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:["border-top-style","border-right-style","border-bottom-style","border-left-style"],appliesto:"allElements",computed:["border-bottom-style","border-left-style","border-right-style","border-top-style"],order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-style"},"border-top":{syntax:"<line-width> || <line-style> || <color>",media:"visual",inherited:!1,animationType:["border-top-color","border-top-style","border-top-width"],percentages:"no",groups:["CSS Backgrounds and Borders"],initial:["border-top-width","border-top-style","border-top-color"],appliesto:"allElements",computed:["border-top-width","border-top-style","border-top-color"],order:"orderOfAppearance",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-top"},"border-top-color":{syntax:"<color>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-top-color"},"border-top-left-radius":{syntax:"<length-percentage>{1,2}",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["CSS Backgrounds and Borders"],initial:"0",appliesto:"allElementsUAsNotRequiredWhenCollapse",computed:"twoAbsoluteLengthOrPercentages",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-top-left-radius"},"border-top-right-radius":{syntax:"<length-percentage>{1,2}",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["CSS Backgrounds and Borders"],initial:"0",appliesto:"allElementsUAsNotRequiredWhenCollapse",computed:"twoAbsoluteLengthOrPercentages",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-top-right-radius"},"border-top-style":{syntax:"<line-style>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-top-style"},"border-top-width":{syntax:"<line-width>",media:"visual",inherited:!1,animationType:"length",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthOr0IfBorderTopStyleNoneOrHidden",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-top-width"},"border-width":{syntax:"<line-width>{1,4}",media:"visual",inherited:!1,animationType:["border-bottom-width","border-left-width","border-right-width","border-top-width"],percentages:"no",groups:["CSS Backgrounds and Borders"],initial:["border-top-width","border-right-width","border-bottom-width","border-left-width"],appliesto:"allElements",computed:["border-bottom-width","border-left-width","border-right-width","border-top-width"],order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-width"},bottom:{syntax:"<length> | <percentage> | auto",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToContainingBlockHeight",groups:["CSS Positioning"],initial:"auto",appliesto:"positionedElements",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/bottom"},"box-align":{syntax:"start | center | end | baseline | stretch",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions","WebKit Extensions"],initial:"stretch",appliesto:"elementsWithDisplayBoxOrInlineBox",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-align"},"box-decoration-break":{syntax:"slice | clone",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Fragmentation"],initial:"slice",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-decoration-break"},"box-direction":{syntax:"normal | reverse | inherit",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions","WebKit Extensions"],initial:"normal",appliesto:"elementsWithDisplayBoxOrInlineBox",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-direction"},"box-flex":{syntax:"<number>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions","WebKit Extensions"],initial:"0",appliesto:"directChildrenOfElementsWithDisplayMozBoxMozInlineBox",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-flex"},"box-flex-group":{syntax:"<integer>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions","WebKit Extensions"],initial:"1",appliesto:"inFlowChildrenOfBoxElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-flex-group"},"box-lines":{syntax:"single | multiple",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions","WebKit Extensions"],initial:"single",appliesto:"boxElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-lines"},"box-ordinal-group":{syntax:"<integer>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions","WebKit Extensions"],initial:"1",appliesto:"childrenOfBoxElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-ordinal-group"},"box-orient":{syntax:"horizontal | vertical | inline-axis | block-axis | inherit",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions","WebKit Extensions"],initial:"inlineAxisHorizontalInXUL",appliesto:"elementsWithDisplayBoxOrInlineBox",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-orient"},"box-pack":{syntax:"start | center | end | justify",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions","WebKit Extensions"],initial:"start",appliesto:"elementsWithDisplayMozBoxMozInlineBox",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-pack"},"box-shadow":{syntax:"none | <shadow>#",media:"visual",inherited:!1,animationType:"shadowList",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"none",appliesto:"allElements",computed:"absoluteLengthsSpecifiedColorAsSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-shadow"},"box-sizing":{syntax:"content-box | border-box",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Basic User Interface"],initial:"content-box",appliesto:"allElementsAcceptingWidthOrHeight",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-sizing"},"break-after":{syntax:"auto | avoid | always | all | avoid-page | page | left | right | recto | verso | avoid-column | column | avoid-region | region",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Fragmentation"],initial:"auto",appliesto:"blockLevelElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/break-after"},"break-before":{syntax:"auto | avoid | always | all | avoid-page | page | left | right | recto | verso | avoid-column | column | avoid-region | region",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Fragmentation"],initial:"auto",appliesto:"blockLevelElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/break-before"},"break-inside":{syntax:"auto | avoid | avoid-page | avoid-column | avoid-region",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Fragmentation"],initial:"auto",appliesto:"blockLevelElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/break-inside"},"caption-side":{syntax:"top | bottom | block-start | block-end | inline-start | inline-end",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Table"],initial:"top",appliesto:"tableCaptionElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/caption-side"},"caret-color":{syntax:"auto | <color>",media:"interactive",inherited:!0,animationType:"color",percentages:"no",groups:["CSS Basic User Interface"],initial:"auto",appliesto:"allElements",computed:"asAutoOrColor",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/caret-color"},clear:{syntax:"none | left | right | both | inline-start | inline-end",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Positioning"],initial:"none",appliesto:"blockLevelElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/clear"},clip:{syntax:"<shape> | auto",media:"visual",inherited:!1,animationType:"rectangle",percentages:"no",groups:["CSS Masking"],initial:"auto",appliesto:"absolutelyPositionedElements",computed:"autoOrRectangle",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/clip"},"clip-path":{syntax:"<clip-source> | [ <basic-shape> || <geometry-box> ] | none",media:"visual",inherited:!1,animationType:"basicShapeOtherwiseNo",percentages:"referToReferenceBoxWhenSpecifiedOtherwiseBorderBox",groups:["CSS Masking"],initial:"none",appliesto:"allElementsSVGContainerElements",computed:"asSpecifiedURLsAbsolute",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/clip-path"},color:{syntax:"<color>",media:"visual",inherited:!0,animationType:"color",percentages:"no",groups:["CSS Color"],initial:"variesFromBrowserToBrowser",appliesto:"allElements",computed:"translucentValuesRGBAOtherwiseRGB",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/color"},"color-adjust":{syntax:"economy | exact",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Color"],initial:"economy",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/color-adjust"},"column-count":{syntax:"<integer> | auto",media:"visual",inherited:!1,animationType:"integer",percentages:"no",groups:["CSS Columns"],initial:"auto",appliesto:"blockContainersExceptTableWrappers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/column-count"},"column-fill":{syntax:"auto | balance | balance-all",media:"visualInContinuousMediaNoEffectInOverflowColumns",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Columns"],initial:"balance",appliesto:"multicolElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/column-fill"},"column-gap":{syntax:"normal | <length-percentage>",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfContentArea",groups:["CSS Box Alignment"],initial:"normal",appliesto:"multiColumnElementsFlexContainersGridContainers",computed:"asSpecifiedWithLengthsAbsoluteAndNormalComputingToZeroExceptMultiColumn",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/column-gap"},"column-rule":{syntax:"<'column-rule-width'> || <'column-rule-style'> || <'column-rule-color'>",media:"visual",inherited:!1,animationType:["column-rule-color","column-rule-style","column-rule-width"],percentages:"no",groups:["CSS Columns"],initial:["column-rule-width","column-rule-style","column-rule-color"],appliesto:"multicolElements",computed:["column-rule-color","column-rule-style","column-rule-width"],order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/column-rule"},"column-rule-color":{syntax:"<color>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Columns"],initial:"currentcolor",appliesto:"multicolElements",computed:"computedColor",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/column-rule-color"},"column-rule-style":{syntax:"<'border-style'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Columns"],initial:"none",appliesto:"multicolElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/column-rule-style"},"column-rule-width":{syntax:"<'border-width'>",media:"visual",inherited:!1,animationType:"length",percentages:"no",groups:["CSS Columns"],initial:"medium",appliesto:"multicolElements",computed:"absoluteLength0IfColumnRuleStyleNoneOrHidden",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/column-rule-width"},"column-span":{syntax:"none | all",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Columns"],initial:"none",appliesto:"inFlowBlockLevelElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/column-span"},"column-width":{syntax:"<length> | auto",media:"visual",inherited:!1,animationType:"length",percentages:"no",groups:["CSS Columns"],initial:"auto",appliesto:"blockContainersExceptTableWrappers",computed:"absoluteLengthZeroOrLarger",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/column-width"},columns:{syntax:"<'column-width'> || <'column-count'>",media:"visual",inherited:!1,animationType:["column-width","column-count"],percentages:"no",groups:["CSS Columns"],initial:["column-width","column-count"],appliesto:"blockContainersExceptTableWrappers",computed:["column-width","column-count"],order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/columns"},contain:{syntax:"none | strict | content | [ size || layout || style || paint ]",media:"all",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Containment"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/contain"},content:{syntax:"normal | none | [ <content-replacement> | <content-list> ] [/ <string> ]?",media:"all",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Generated Content"],initial:"normal",appliesto:"beforeAndAfterPseudos",computed:"normalOnElementsForPseudosNoneAbsoluteURIStringOrAsSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/content"},"counter-increment":{syntax:"[ <custom-ident> <integer>? ]+ | none",media:"all",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Counter Styles"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/counter-increment"},"counter-reset":{syntax:"[ <custom-ident> <integer>? ]+ | none",media:"all",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Counter Styles"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/counter-reset"},"counter-set":{syntax:"[ <custom-ident> <integer>? ]+ | none",media:"all",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Counter Styles"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/counter-set"},cursor:{syntax:"[ [ <url> [ <x> <y> ]? , ]* [ auto | default | none | context-menu | help | pointer | progress | wait | cell | crosshair | text | vertical-text | alias | copy | move | no-drop | not-allowed | e-resize | n-resize | ne-resize | nw-resize | s-resize | se-resize | sw-resize | w-resize | ew-resize | ns-resize | nesw-resize | nwse-resize | col-resize | row-resize | all-scroll | zoom-in | zoom-out | grab | grabbing ] ]",media:["visual","interactive"],inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Basic User Interface"],initial:"auto",appliesto:"allElements",computed:"asSpecifiedURLsAbsolute",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/cursor"},direction:{syntax:"ltr | rtl",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Writing Modes"],initial:"ltr",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/direction"},display:{syntax:"[ <display-outside> || <display-inside> ] | <display-listitem> | <display-internal> | <display-box> | <display-legacy>",media:"all",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Display"],initial:"inline",appliesto:"allElements",computed:"asSpecifiedExceptPositionedFloatingAndRootElementsKeywordMaybeDifferent",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/display"},"empty-cells":{syntax:"show | hide",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Table"],initial:"show",appliesto:"tableCellElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/empty-cells"},filter:{syntax:"none | <filter-function-list>",media:"visual",inherited:!1,animationType:"filterList",percentages:"no",groups:["Filter Effects"],initial:"none",appliesto:"allElementsSVGContainerElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/filter"},flex:{syntax:"none | [ <'flex-grow'> <'flex-shrink'>? || <'flex-basis'> ]",media:"visual",inherited:!1,animationType:["flex-grow","flex-shrink","flex-basis"],percentages:"no",groups:["CSS Flexible Box Layout"],initial:["flex-grow","flex-shrink","flex-basis"],appliesto:"flexItemsAndInFlowPseudos",computed:["flex-grow","flex-shrink","flex-basis"],order:"orderOfAppearance",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/flex"},"flex-basis":{syntax:"content | <'width'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToFlexContainersInnerMainSize",groups:["CSS Flexible Box Layout"],initial:"auto",appliesto:"flexItemsAndInFlowPseudos",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"lengthOrPercentageBeforeKeywordIfBothPresent",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/flex-basis"},"flex-direction":{syntax:"row | row-reverse | column | column-reverse",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Flexible Box Layout"],initial:"row",appliesto:"flexContainers",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/flex-direction"},"flex-flow":{syntax:"<'flex-direction'> || <'flex-wrap'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Flexible Box Layout"],initial:["flex-direction","flex-wrap"],appliesto:"flexContainers",computed:["flex-direction","flex-wrap"],order:"orderOfAppearance",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/flex-flow"},"flex-grow":{syntax:"<number>",media:"visual",inherited:!1,animationType:"number",percentages:"no",groups:["CSS Flexible Box Layout"],initial:"0",appliesto:"flexItemsAndInFlowPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/flex-grow"},"flex-shrink":{syntax:"<number>",media:"visual",inherited:!1,animationType:"number",percentages:"no",groups:["CSS Flexible Box Layout"],initial:"1",appliesto:"flexItemsAndInFlowPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/flex-shrink"},"flex-wrap":{syntax:"nowrap | wrap | wrap-reverse",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Flexible Box Layout"],initial:"nowrap",appliesto:"flexContainers",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/flex-wrap"},float:{syntax:"left | right | none | inline-start | inline-end",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Positioning"],initial:"none",appliesto:"allElementsNoEffectIfDisplayNone",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/float"},font:{syntax:"[ [ <'font-style'> || <font-variant-css21> || <'font-weight'> || <'font-stretch'> ]? <'font-size'> [ / <'line-height'> ]? <'font-family'> ] | caption | icon | menu | message-box | small-caption | status-bar",media:"visual",inherited:!0,animationType:["font-style","font-variant","font-weight","font-stretch","font-size","line-height","font-family"],percentages:["font-size","line-height"],groups:["CSS Fonts"],initial:["font-style","font-variant","font-weight","font-stretch","font-size","line-height","font-family"],appliesto:"allElements",computed:["font-style","font-variant","font-weight","font-stretch","font-size","line-height","font-family"],order:"orderOfAppearance",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font"},"font-family":{syntax:"[ <family-name> | <generic-family> ]#",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"dependsOnUserAgent",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-family"},"font-feature-settings":{syntax:"normal | <feature-tag-value>#",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-feature-settings"},"font-kerning":{syntax:"auto | normal | none",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-kerning"},"font-language-override":{syntax:"normal | <string>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-language-override"},"font-optical-sizing":{syntax:"auto | none",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-optical-sizing"},"font-variation-settings":{syntax:"normal | [ <string> <number> ]#",media:"visual",inherited:!0,animationType:"transform",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-variation-settings"},"font-size":{syntax:"<absolute-size> | <relative-size> | <length-percentage>",media:"visual",inherited:!0,animationType:"length",percentages:"referToParentElementsFontSize",groups:["CSS Fonts"],initial:"medium",appliesto:"allElements",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-size"},"font-size-adjust":{syntax:"none | <number>",media:"visual",inherited:!0,animationType:"number",percentages:"no",groups:["CSS Fonts"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-size-adjust"},"font-smooth":{syntax:"auto | never | always | <absolute-size> | <length>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-smooth"},"font-stretch":{syntax:"<font-stretch-absolute>",media:"visual",inherited:!0,animationType:"fontStretch",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-stretch"},"font-style":{syntax:"normal | italic | oblique <angle>?",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-style"},"font-synthesis":{syntax:"none | [ weight || style ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"weight style",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-synthesis"},"font-variant":{syntax:"normal | none | [ <common-lig-values> || <discretionary-lig-values> || <historical-lig-values> || <contextual-alt-values> || stylistic( <feature-value-name> ) || historical-forms || styleset( <feature-value-name># ) || character-variant( <feature-value-name># ) || swash( <feature-value-name> ) || ornaments( <feature-value-name> ) || annotation( <feature-value-name> ) || [ small-caps | all-small-caps | petite-caps | all-petite-caps | unicase | titling-caps ] || <numeric-figure-values> || <numeric-spacing-values> || <numeric-fraction-values> || ordinal || slashed-zero || <east-asian-variant-values> || <east-asian-width-values> || ruby ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-variant"},"font-variant-alternates":{syntax:"normal | [ stylistic( <feature-value-name> ) || historical-forms || styleset( <feature-value-name># ) || character-variant( <feature-value-name># ) || swash( <feature-value-name> ) || ornaments( <feature-value-name> ) || annotation( <feature-value-name> ) ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-variant-alternates"},"font-variant-caps":{syntax:"normal | small-caps | all-small-caps | petite-caps | all-petite-caps | unicase | titling-caps",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-variant-caps"},"font-variant-east-asian":{syntax:"normal | [ <east-asian-variant-values> || <east-asian-width-values> || ruby ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-variant-east-asian"},"font-variant-ligatures":{syntax:"normal | none | [ <common-lig-values> || <discretionary-lig-values> || <historical-lig-values> || <contextual-alt-values> ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-variant-ligatures"},"font-variant-numeric":{syntax:"normal | [ <numeric-figure-values> || <numeric-spacing-values> || <numeric-fraction-values> || ordinal || slashed-zero ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-variant-numeric"},"font-variant-position":{syntax:"normal | sub | super",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-variant-position"},"font-weight":{syntax:"<font-weight-absolute> | bolder | lighter",media:"visual",inherited:!0,animationType:"fontWeight",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"keywordOrNumericalValueBolderLighterTransformedToRealValue",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-weight"},gap:{syntax:"<'row-gap'> <'column-gap'>?",media:"visual",inherited:!1,animationType:["row-gap","column-gap"],percentages:"no",groups:["CSS Box Alignment"],initial:["row-gap","column-gap"],appliesto:"multiColumnElementsFlexContainersGridContainers",computed:["row-gap","column-gap"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/gap"},grid:{syntax:"<'grid-template'> | <'grid-template-rows'> / [ auto-flow && dense? ] <'grid-auto-columns'>? | [ auto-flow && dense? ] <'grid-auto-rows'>? / <'grid-template-columns'>",media:"visual",inherited:!1,animationType:"discrete",percentages:["grid-template-rows","grid-template-columns","grid-auto-rows","grid-auto-columns"],groups:["CSS Grid Layout"],initial:["grid-template-rows","grid-template-columns","grid-template-areas","grid-auto-rows","grid-auto-columns","grid-auto-flow","grid-column-gap","grid-row-gap","column-gap","row-gap"],appliesto:"gridContainers",computed:["grid-template-rows","grid-template-columns","grid-template-areas","grid-auto-rows","grid-auto-columns","grid-auto-flow","grid-column-gap","grid-row-gap","column-gap","row-gap"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid"},"grid-area":{syntax:"<grid-line> [ / <grid-line> ]{0,3}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:["grid-row-start","grid-column-start","grid-row-end","grid-column-end"],appliesto:"gridItemsAndBoxesWithinGridContainer",computed:["grid-row-start","grid-column-start","grid-row-end","grid-column-end"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-area"},"grid-auto-columns":{syntax:"<track-size>+",media:"visual",inherited:!1,animationType:"discrete",percentages:"referToDimensionOfContentArea",groups:["CSS Grid Layout"],initial:"auto",appliesto:"gridContainers",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-auto-columns"},"grid-auto-flow":{syntax:"[ row | column ] || dense",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:"row",appliesto:"gridContainers",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-auto-flow"},"grid-auto-rows":{syntax:"<track-size>+",media:"visual",inherited:!1,animationType:"discrete",percentages:"referToDimensionOfContentArea",groups:["CSS Grid Layout"],initial:"auto",appliesto:"gridContainers",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-auto-rows"},"grid-column":{syntax:"<grid-line> [ / <grid-line> ]?",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:["grid-column-start","grid-column-end"],appliesto:"gridItemsAndBoxesWithinGridContainer",computed:["grid-column-start","grid-column-end"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-column"},"grid-column-end":{syntax:"<grid-line>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:"auto",appliesto:"gridItemsAndBoxesWithinGridContainer",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-column-end"},"grid-column-gap":{syntax:"<length-percentage>",media:"visual",inherited:!1,animationType:"length",percentages:"referToDimensionOfContentArea",groups:["CSS Grid Layout"],initial:"0",appliesto:"gridContainers",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/column-gap"},"grid-column-start":{syntax:"<grid-line>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:"auto",appliesto:"gridItemsAndBoxesWithinGridContainer",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-column-start"},"grid-gap":{syntax:"<'grid-row-gap'> <'grid-column-gap'>?",media:"visual",inherited:!1,animationType:["grid-row-gap","grid-column-gap"],percentages:"no",groups:["CSS Grid Layout"],initial:["grid-row-gap","grid-column-gap"],appliesto:"gridContainers",computed:["grid-row-gap","grid-column-gap"],order:"uniqueOrder",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/gap"},"grid-row":{syntax:"<grid-line> [ / <grid-line> ]?",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:["grid-row-start","grid-row-end"],appliesto:"gridItemsAndBoxesWithinGridContainer",computed:["grid-row-start","grid-row-end"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-row"},"grid-row-end":{syntax:"<grid-line>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:"auto",appliesto:"gridItemsAndBoxesWithinGridContainer",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-row-end"},"grid-row-gap":{syntax:"<length-percentage>",media:"visual",inherited:!1,animationType:"length",percentages:"referToDimensionOfContentArea",groups:["CSS Grid Layout"],initial:"0",appliesto:"gridContainers",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/row-gap"},"grid-row-start":{syntax:"<grid-line>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:"auto",appliesto:"gridItemsAndBoxesWithinGridContainer",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-row-start"},"grid-template":{syntax:"none | [ <'grid-template-rows'> / <'grid-template-columns'> ] | [ <line-names>? <string> <track-size>? <line-names>? ]+ [ / <explicit-track-list> ]?",media:"visual",inherited:!1,animationType:"discrete",percentages:["grid-template-columns","grid-template-rows"],groups:["CSS Grid Layout"],initial:["grid-template-columns","grid-template-rows","grid-template-areas"],appliesto:"gridContainers",computed:["grid-template-columns","grid-template-rows","grid-template-areas"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-template"},"grid-template-areas":{syntax:"none | <string>+",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:"none",appliesto:"gridContainers",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-template-areas"},"grid-template-columns":{syntax:"none | <track-list> | <auto-track-list> | subgrid <line-name-list>?",media:"visual",inherited:!1,animationType:"simpleListOfLpcDifferenceLpc",percentages:"referToDimensionOfContentArea",groups:["CSS Grid Layout"],initial:"none",appliesto:"gridContainers",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-template-columns"},"grid-template-rows":{syntax:"none | <track-list> | <auto-track-list> | subgrid <line-name-list>?",media:"visual",inherited:!1,animationType:"simpleListOfLpcDifferenceLpc",percentages:"referToDimensionOfContentArea",groups:["CSS Grid Layout"],initial:"none",appliesto:"gridContainers",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-template-rows"},"hanging-punctuation":{syntax:"none | [ first || [ force-end | allow-end ] || last ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/hanging-punctuation"},height:{syntax:"auto | <length> | <percentage> | min-content | max-content | fit-content(<length-percentage>)",media:"visual",inherited:!1,animationType:"lpc",percentages:"regardingHeightOfGeneratedBoxContainingBlockPercentagesRelativeToContainingBlock",groups:["CSS Box Model"],initial:"auto",appliesto:"allElementsButNonReplacedAndTableColumns",computed:"percentageAutoOrAbsoluteLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/height"},hyphens:{syntax:"none | manual | auto",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"manual",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/hyphens"},"image-orientation":{syntax:"from-image | <angle> | [ <angle>? flip ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Images"],initial:"from-image",appliesto:"allElements",computed:"angleRoundedToNextQuarter",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/image-orientation"},"image-rendering":{syntax:"auto | crisp-edges | pixelated",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Images"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/image-rendering"},"image-resolution":{syntax:"[ from-image || <resolution> ] && snap?",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Images"],initial:"1dppx",appliesto:"allElements",computed:"asSpecifiedWithExceptionOfResolution",order:"uniqueOrder",status:"experimental"},"ime-mode":{syntax:"auto | normal | active | inactive | disabled",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Basic User Interface"],initial:"auto",appliesto:"textFields",computed:"asSpecified",order:"uniqueOrder",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/ime-mode"},"initial-letter":{syntax:"normal | [ <number> <integer>? ]",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Inline"],initial:"normal",appliesto:"firstLetterPseudoElementsAndInlineLevelFirstChildren",computed:"asSpecified",order:"uniqueOrder",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/initial-letter"},"initial-letter-align":{syntax:"[ auto | alphabetic | hanging | ideographic ]",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Inline"],initial:"auto",appliesto:"firstLetterPseudoElementsAndInlineLevelFirstChildren",computed:"asSpecified",order:"uniqueOrder",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/initial-letter-align"},"inline-size":{syntax:"<'width'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"inlineSizeOfContainingBlock",groups:["CSS Logical Properties"],initial:"auto",appliesto:"sameAsWidthAndHeight",computed:"sameAsWidthAndHeight",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/inline-size"},inset:{syntax:"<'top'>{1,4}",media:"visual",inherited:!1,animationType:"lpc",percentages:"logicalHeightOfContainingBlock",groups:["CSS Logical Properties"],initial:"auto",appliesto:"positionedElements",computed:"sameAsBoxOffsets",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/inset"},"inset-block":{syntax:"<'top'>{1,2}",media:"visual",inherited:!1,animationType:"lpc",percentages:"logicalHeightOfContainingBlock",groups:["CSS Logical Properties"],initial:"auto",appliesto:"positionedElements",computed:"sameAsBoxOffsets",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/inset-block"},"inset-block-end":{syntax:"<'top'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"logicalHeightOfContainingBlock",groups:["CSS Logical Properties"],initial:"auto",appliesto:"positionedElements",computed:"sameAsBoxOffsets",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/inset-block-end"},"inset-block-start":{syntax:"<'top'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"logicalHeightOfContainingBlock",groups:["CSS Logical Properties"],initial:"auto",appliesto:"positionedElements",computed:"sameAsBoxOffsets",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/inset-block-start"},"inset-inline":{syntax:"<'top'>{1,2}",media:"visual",inherited:!1,animationType:"lpc",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"auto",appliesto:"positionedElements",computed:"sameAsBoxOffsets",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/inset-inline"},"inset-inline-end":{syntax:"<'top'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"auto",appliesto:"positionedElements",computed:"sameAsBoxOffsets",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/inset-inline-end"},"inset-inline-start":{syntax:"<'top'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"auto",appliesto:"positionedElements",computed:"sameAsBoxOffsets",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/inset-inline-start"},isolation:{syntax:"auto | isolate",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Compositing and Blending"],initial:"auto",appliesto:"allElementsSVGContainerGraphicsAndGraphicsReferencingElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/isolation"},"justify-content":{syntax:"normal | <content-distribution> | <overflow-position>? [ <content-position> | left | right ]",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Alignment"],initial:"normal",appliesto:"flexContainers",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/justify-content"},"justify-items":{syntax:"normal | stretch | <baseline-position> | <overflow-position>? [ <self-position> | left | right ] | legacy | legacy && [ left | right | center ]",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Alignment"],initial:"legacy",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/justify-items"},"justify-self":{syntax:"auto | normal | stretch | <baseline-position> | <overflow-position>? [ <self-position> | left | right ]",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Alignment"],initial:"auto",appliesto:"blockLevelBoxesAndAbsolutelyPositionedBoxesAndGridItems",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/justify-self"},"justify-tracks":{syntax:"[ normal | <content-distribution> | <overflow-position>? [ <content-position> | left | right ] ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:"normal",appliesto:"gridContainersWithMasonryLayoutInTheirInlineAxis",computed:"asSpecified",order:"uniqueOrder",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/justify-tracks"},left:{syntax:"<length> | <percentage> | auto",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToWidthOfContainingBlock",groups:["CSS Positioning"],initial:"auto",appliesto:"positionedElements",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/left"},"letter-spacing":{syntax:"normal | <length>",media:"visual",inherited:!0,animationType:"length",percentages:"no",groups:["CSS Text"],initial:"normal",appliesto:"allElements",computed:"optimumValueOfAbsoluteLengthOrNormal",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/letter-spacing"},"line-break":{syntax:"auto | loose | normal | strict | anywhere",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/line-break"},"line-clamp":{syntax:"none | <integer>",media:"visual",inherited:!1,animationType:"integer",percentages:"no",groups:["CSS Overflow"],initial:"none",appliesto:"blockContainersExceptMultiColumnContainers",computed:"asSpecified",order:"perGrammar",status:"experimental"},"line-height":{syntax:"normal | <number> | <length> | <percentage>",media:"visual",inherited:!0,animationType:"numberOrLength",percentages:"referToElementFontSize",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"absoluteLengthOrAsSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/line-height"},"line-height-step":{syntax:"<length>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"0",appliesto:"blockContainers",computed:"absoluteLength",order:"perGrammar",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/line-height-step"},"list-style":{syntax:"<'list-style-type'> || <'list-style-position'> || <'list-style-image'>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Lists and Counters"],initial:["list-style-type","list-style-position","list-style-image"],appliesto:"listItems",computed:["list-style-image","list-style-position","list-style-type"],order:"orderOfAppearance",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/list-style"},"list-style-image":{syntax:"<url> | none",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Lists and Counters"],initial:"none",appliesto:"listItems",computed:"noneOrImageWithAbsoluteURI",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/list-style-image"},"list-style-position":{syntax:"inside | outside",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Lists and Counters"],initial:"outside",appliesto:"listItems",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/list-style-position"},"list-style-type":{syntax:"<counter-style> | <string> | none",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Lists and Counters"],initial:"disc",appliesto:"listItems",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/list-style-type"},margin:{syntax:"[ <length> | <percentage> | auto ]{1,4}",media:"visual",inherited:!1,animationType:"length",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:["margin-bottom","margin-left","margin-right","margin-top"],appliesto:"allElementsExceptTableDisplayTypes",computed:["margin-bottom","margin-left","margin-right","margin-top"],order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin"},"margin-block":{syntax:"<'margin-left'>{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"dependsOnLayoutModel",groups:["CSS Logical Properties"],initial:"0",appliesto:"sameAsMargin",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-block"},"margin-block-end":{syntax:"<'margin-left'>",media:"visual",inherited:!1,animationType:"length",percentages:"dependsOnLayoutModel",groups:["CSS Logical Properties"],initial:"0",appliesto:"sameAsMargin",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-block-end"},"margin-block-start":{syntax:"<'margin-left'>",media:"visual",inherited:!1,animationType:"length",percentages:"dependsOnLayoutModel",groups:["CSS Logical Properties"],initial:"0",appliesto:"sameAsMargin",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-block-start"},"margin-bottom":{syntax:"<length> | <percentage> | auto",media:"visual",inherited:!1,animationType:"length",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"0",appliesto:"allElementsExceptTableDisplayTypes",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-bottom"},"margin-inline":{syntax:"<'margin-left'>{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"dependsOnLayoutModel",groups:["CSS Logical Properties"],initial:"0",appliesto:"sameAsMargin",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-inline"},"margin-inline-end":{syntax:"<'margin-left'>",media:"visual",inherited:!1,animationType:"length",percentages:"dependsOnLayoutModel",groups:["CSS Logical Properties"],initial:"0",appliesto:"sameAsMargin",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-inline-end"},"margin-inline-start":{syntax:"<'margin-left'>",media:"visual",inherited:!1,animationType:"length",percentages:"dependsOnLayoutModel",groups:["CSS Logical Properties"],initial:"0",appliesto:"sameAsMargin",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-inline-start"},"margin-left":{syntax:"<length> | <percentage> | auto",media:"visual",inherited:!1,animationType:"length",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"0",appliesto:"allElementsExceptTableDisplayTypes",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-left"},"margin-right":{syntax:"<length> | <percentage> | auto",media:"visual",inherited:!1,animationType:"length",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"0",appliesto:"allElementsExceptTableDisplayTypes",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-right"},"margin-top":{syntax:"<length> | <percentage> | auto",media:"visual",inherited:!1,animationType:"length",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"0",appliesto:"allElementsExceptTableDisplayTypes",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-top"},"margin-trim":{syntax:"none | in-flow | all",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Model"],initial:"none",appliesto:"blockContainersAndMultiColumnContainers",computed:"asSpecified",order:"perGrammar",alsoAppliesTo:["::first-letter","::first-line"],status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-trim"},mask:{syntax:"<mask-layer>#",media:"visual",inherited:!1,animationType:["mask-image","mask-mode","mask-repeat","mask-position","mask-clip","mask-origin","mask-size","mask-composite"],percentages:["mask-position"],groups:["CSS Masking"],initial:["mask-image","mask-mode","mask-repeat","mask-position","mask-clip","mask-origin","mask-size","mask-composite"],appliesto:"allElementsSVGContainerElements",computed:["mask-image","mask-mode","mask-repeat","mask-position","mask-clip","mask-origin","mask-size","mask-composite"],order:"perGrammar",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask"},"mask-border":{syntax:"<'mask-border-source'> || <'mask-border-slice'> [ / <'mask-border-width'>? [ / <'mask-border-outset'> ]? ]? || <'mask-border-repeat'> || <'mask-border-mode'>",media:"visual",inherited:!1,animationType:["mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width"],percentages:["mask-border-slice","mask-border-width"],groups:["CSS Masking"],initial:["mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width"],appliesto:"allElementsSVGContainerElements",computed:["mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width"],order:"perGrammar",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-border"},"mask-border-mode":{syntax:"luminance | alpha",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"alpha",appliesto:"allElementsSVGContainerElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-border-mode"},"mask-border-outset":{syntax:"[ <length> | <number> ]{1,4}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"0",appliesto:"allElementsSVGContainerElements",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-border-outset"},"mask-border-repeat":{syntax:"[ stretch | repeat | round | space ]{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"stretch",appliesto:"allElementsSVGContainerElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-border-repeat"},"mask-border-slice":{syntax:"<number-percentage>{1,4} fill?",media:"visual",inherited:!1,animationType:"discrete",percentages:"referToSizeOfMaskBorderImage",groups:["CSS Masking"],initial:"0",appliesto:"allElementsSVGContainerElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-border-slice"},"mask-border-source":{syntax:"none | <image>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"none",appliesto:"allElementsSVGContainerElements",computed:"asSpecifiedURLsAbsolute",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-border-source"},"mask-border-width":{syntax:"[ <length-percentage> | <number> | auto ]{1,4}",media:"visual",inherited:!1,animationType:"discrete",percentages:"relativeToMaskBorderImageArea",groups:["CSS Masking"],initial:"auto",appliesto:"allElementsSVGContainerElements",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-border-width"},"mask-clip":{syntax:"[ <geometry-box> | no-clip ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"border-box",appliesto:"allElementsSVGContainerElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-clip"},"mask-composite":{syntax:"<compositing-operator>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"add",appliesto:"allElementsSVGContainerElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-composite"},"mask-image":{syntax:"<mask-reference>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"none",appliesto:"allElementsSVGContainerElements",computed:"asSpecifiedURLsAbsolute",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-image"},"mask-mode":{syntax:"<masking-mode>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"match-source",appliesto:"allElementsSVGContainerElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-mode"},"mask-origin":{syntax:"<geometry-box>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"border-box",appliesto:"allElementsSVGContainerElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-origin"},"mask-position":{syntax:"<position>#",media:"visual",inherited:!1,animationType:"repeatableListOfSimpleListOfLpc",percentages:"referToSizeOfMaskPaintingArea",groups:["CSS Masking"],initial:"center",appliesto:"allElementsSVGContainerElements",computed:"consistsOfTwoKeywordsForOriginAndOffsets",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-position"},"mask-repeat":{syntax:"<repeat-style>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"no-repeat",appliesto:"allElementsSVGContainerElements",computed:"consistsOfTwoDimensionKeywords",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-repeat"},"mask-size":{syntax:"<bg-size>#",media:"visual",inherited:!1,animationType:"repeatableListOfSimpleListOfLpc",percentages:"no",groups:["CSS Masking"],initial:"auto",appliesto:"allElementsSVGContainerElements",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-size"},"mask-type":{syntax:"luminance | alpha",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"luminance",appliesto:"maskElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-type"},"masonry-auto-flow":{syntax:"[ pack | next ] || [ definite-first | ordered ]",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:"pack",appliesto:"gridContainersWithMasonryLayout",computed:"asSpecified",order:"uniqueOrder",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/masonry-auto-flow"},"math-style":{syntax:"normal | compact",media:"visual",inherited:!0,animationType:"notAnimatable",percentages:"no",groups:["MathML"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/math-style"},"max-block-size":{syntax:"<'max-width'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"blockSizeOfContainingBlock",groups:["CSS Logical Properties"],initial:"0",appliesto:"sameAsWidthAndHeight",computed:"sameAsMaxWidthAndMaxHeight",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/max-block-size"},"max-height":{syntax:"none | <length-percentage> | min-content | max-content | fit-content(<length-percentage>)",media:"visual",inherited:!1,animationType:"lpc",percentages:"regardingHeightOfGeneratedBoxContainingBlockPercentagesNone",groups:["CSS Box Model"],initial:"none",appliesto:"allElementsButNonReplacedAndTableColumns",computed:"percentageAsSpecifiedAbsoluteLengthOrNone",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/max-height"},"max-inline-size":{syntax:"<'max-width'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"inlineSizeOfContainingBlock",groups:["CSS Logical Properties"],initial:"0",appliesto:"sameAsWidthAndHeight",computed:"sameAsMaxWidthAndMaxHeight",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/max-inline-size"},"max-lines":{syntax:"none | <integer>",media:"visual",inherited:!1,animationType:"integer",percentages:"no",groups:["CSS Overflow"],initial:"none",appliesto:"blockContainersExceptMultiColumnContainers",computed:"asSpecified",order:"perGrammar",status:"experimental"},"max-width":{syntax:"none | <length-percentage> | min-content | max-content | fit-content(<length-percentage>)",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"none",appliesto:"allElementsButNonReplacedAndTableRows",computed:"percentageAsSpecifiedAbsoluteLengthOrNone",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/max-width"},"min-block-size":{syntax:"<'min-width'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"blockSizeOfContainingBlock",groups:["CSS Logical Properties"],initial:"0",appliesto:"sameAsWidthAndHeight",computed:"sameAsMinWidthAndMinHeight",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/min-block-size"},"min-height":{syntax:"auto | <length> | <percentage> | min-content | max-content | fit-content(<length-percentage>)",media:"visual",inherited:!1,animationType:"lpc",percentages:"regardingHeightOfGeneratedBoxContainingBlockPercentages0",groups:["CSS Box Model"],initial:"auto",appliesto:"allElementsButNonReplacedAndTableColumns",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/min-height"},"min-inline-size":{syntax:"<'min-width'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"inlineSizeOfContainingBlock",groups:["CSS Logical Properties"],initial:"0",appliesto:"sameAsWidthAndHeight",computed:"sameAsMinWidthAndMinHeight",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/min-inline-size"},"min-width":{syntax:"auto | <length> | <percentage> | min-content | max-content | fit-content(<length-percentage>)",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"auto",appliesto:"allElementsButNonReplacedAndTableRows",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/min-width"},"mix-blend-mode":{syntax:"<blend-mode>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Compositing and Blending"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mix-blend-mode"},"object-fit":{syntax:"fill | contain | cover | none | scale-down",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Images"],initial:"fill",appliesto:"replacedElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/object-fit"},"object-position":{syntax:"<position>",media:"visual",inherited:!0,animationType:"repeatableListOfSimpleListOfLpc",percentages:"referToWidthAndHeightOfElement",groups:["CSS Images"],initial:"50% 50%",appliesto:"replacedElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/object-position"},offset:{syntax:"[ <'offset-position'>? [ <'offset-path'> [ <'offset-distance'> || <'offset-rotate'> ]? ]? ]! [ / <'offset-anchor'> ]?",media:"visual",inherited:!1,animationType:["offset-position","offset-path","offset-distance","offset-anchor","offset-rotate"],percentages:["offset-position","offset-distance","offset-anchor"],groups:["CSS Motion Path"],initial:["offset-position","offset-path","offset-distance","offset-anchor","offset-rotate"],appliesto:"transformableElements",computed:["offset-position","offset-path","offset-distance","offset-anchor","offset-rotate"],order:"perGrammar",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/offset"},"offset-anchor":{syntax:"auto | <position>",media:"visual",inherited:!1,animationType:"position",percentages:"relativeToWidthAndHeight",groups:["CSS Motion Path"],initial:"auto",appliesto:"transformableElements",computed:"forLengthAbsoluteValueOtherwisePercentage",order:"perGrammar",status:"standard"},"offset-distance":{syntax:"<length-percentage>",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToTotalPathLength",groups:["CSS Motion Path"],initial:"0",appliesto:"transformableElements",computed:"forLengthAbsoluteValueOtherwisePercentage",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/offset-distance"},"offset-path":{syntax:"none | ray( [ <angle> && <size> && contain? ] ) | <path()> | <url> | [ <basic-shape> || <geometry-box> ]",media:"visual",inherited:!1,animationType:"angleOrBasicShapeOrPath",percentages:"no",groups:["CSS Motion Path"],initial:"none",appliesto:"transformableElements",computed:"asSpecified",order:"perGrammar",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/offset-path"},"offset-position":{syntax:"auto | <position>",media:"visual",inherited:!1,animationType:"position",percentages:"referToSizeOfContainingBlock",groups:["CSS Motion Path"],initial:"auto",appliesto:"transformableElements",computed:"forLengthAbsoluteValueOtherwisePercentage",order:"perGrammar",status:"experimental"},"offset-rotate":{syntax:"[ auto | reverse ] || <angle>",media:"visual",inherited:!1,animationType:"angleOrBasicShapeOrPath",percentages:"no",groups:["CSS Motion Path"],initial:"auto",appliesto:"transformableElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/offset-rotate"},opacity:{syntax:"<alpha-value>",media:"visual",inherited:!1,animationType:"number",percentages:"no",groups:["CSS Color"],initial:"1.0",appliesto:"allElements",computed:"specifiedValueClipped0To1",order:"uniqueOrder",alsoAppliesTo:["::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/opacity"},order:{syntax:"<integer>",media:"visual",inherited:!1,animationType:"integer",percentages:"no",groups:["CSS Flexible Box Layout"],initial:"0",appliesto:"flexItemsGridItemsAbsolutelyPositionedContainerChildren",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/order"},orphans:{syntax:"<integer>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fragmentation"],initial:"2",appliesto:"blockContainerElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/orphans"},outline:{syntax:"[ <'outline-color'> || <'outline-style'> || <'outline-width'> ]",media:["visual","interactive"],inherited:!1,animationType:["outline-color","outline-width","outline-style"],percentages:"no",groups:["CSS Basic User Interface"],initial:["outline-color","outline-style","outline-width"],appliesto:"allElements",computed:["outline-color","outline-width","outline-style"],order:"orderOfAppearance",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/outline"},"outline-color":{syntax:"<color> | invert",media:["visual","interactive"],inherited:!1,animationType:"color",percentages:"no",groups:["CSS Basic User Interface"],initial:"invertOrCurrentColor",appliesto:"allElements",computed:"invertForTranslucentColorRGBAOtherwiseRGB",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/outline-color"},"outline-offset":{syntax:"<length>",media:["visual","interactive"],inherited:!1,animationType:"length",percentages:"no",groups:["CSS Basic User Interface"],initial:"0",appliesto:"allElements",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/outline-offset"},"outline-style":{syntax:"auto | <'border-style'>",media:["visual","interactive"],inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Basic User Interface"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/outline-style"},"outline-width":{syntax:"<line-width>",media:["visual","interactive"],inherited:!1,animationType:"length",percentages:"no",groups:["CSS Basic User Interface"],initial:"medium",appliesto:"allElements",computed:"absoluteLength0ForNone",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/outline-width"},overflow:{syntax:"[ visible | hidden | clip | scroll | auto ]{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Overflow"],initial:"visible",appliesto:"blockContainersFlexContainersGridContainers",computed:["overflow-x","overflow-y"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/overflow"},"overflow-anchor":{syntax:"auto | none",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Scroll Anchoring"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard"},"overflow-block":{syntax:"visible | hidden | clip | scroll | auto",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Overflow"],initial:"auto",appliesto:"blockContainersFlexContainersGridContainers",computed:"asSpecifiedButVisibleOrClipReplacedToAutoOrHiddenIfOtherValueDifferent",order:"perGrammar",status:"standard"},"overflow-clip-box":{syntax:"padding-box | content-box",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"padding-box",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Mozilla/CSS/overflow-clip-box"},"overflow-inline":{syntax:"visible | hidden | clip | scroll | auto",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Overflow"],initial:"auto",appliesto:"blockContainersFlexContainersGridContainers",computed:"asSpecifiedButVisibleOrClipReplacedToAutoOrHiddenIfOtherValueDifferent",order:"perGrammar",status:"standard"},"overflow-wrap":{syntax:"normal | break-word | anywhere",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"normal",appliesto:"nonReplacedInlineElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/overflow-wrap"},"overflow-x":{syntax:"visible | hidden | clip | scroll | auto",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Overflow"],initial:"visible",appliesto:"blockContainersFlexContainersGridContainers",computed:"asSpecifiedButVisibleOrClipReplacedToAutoOrHiddenIfOtherValueDifferent",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/overflow-x"},"overflow-y":{syntax:"visible | hidden | clip | scroll | auto",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Overflow"],initial:"visible",appliesto:"blockContainersFlexContainersGridContainers",computed:"asSpecifiedButVisibleOrClipReplacedToAutoOrHiddenIfOtherValueDifferent",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/overflow-y"},"overscroll-behavior":{syntax:"[ contain | none | auto ]{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Model"],initial:"auto",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/overscroll-behavior"},"overscroll-behavior-block":{syntax:"contain | none | auto",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Model"],initial:"auto",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/overscroll-behavior-block"},"overscroll-behavior-inline":{syntax:"contain | none | auto",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Model"],initial:"auto",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/overscroll-behavior-inline"},"overscroll-behavior-x":{syntax:"contain | none | auto",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Model"],initial:"auto",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/overscroll-behavior-x"},"overscroll-behavior-y":{syntax:"contain | none | auto",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Model"],initial:"auto",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/overscroll-behavior-y"},padding:{syntax:"[ <length> | <percentage> ]{1,4}",media:"visual",inherited:!1,animationType:"length",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:["padding-bottom","padding-left","padding-right","padding-top"],appliesto:"allElementsExceptInternalTableDisplayTypes",computed:["padding-bottom","padding-left","padding-right","padding-top"],order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding"},"padding-block":{syntax:"<'padding-left'>{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"0",appliesto:"allElements",computed:"asLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding-block"},"padding-block-end":{syntax:"<'padding-left'>",media:"visual",inherited:!1,animationType:"length",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"0",appliesto:"allElements",computed:"asLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding-block-end"},"padding-block-start":{syntax:"<'padding-left'>",media:"visual",inherited:!1,animationType:"length",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"0",appliesto:"allElements",computed:"asLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding-block-start"},"padding-bottom":{syntax:"<length> | <percentage>",media:"visual",inherited:!1,animationType:"length",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"0",appliesto:"allElementsExceptInternalTableDisplayTypes",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding-bottom"},"padding-inline":{syntax:"<'padding-left'>{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"0",appliesto:"allElements",computed:"asLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding-inline"},"padding-inline-end":{syntax:"<'padding-left'>",media:"visual",inherited:!1,animationType:"length",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"0",appliesto:"allElements",computed:"asLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding-inline-end"},"padding-inline-start":{syntax:"<'padding-left'>",media:"visual",inherited:!1,animationType:"length",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"0",appliesto:"allElements",computed:"asLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding-inline-start"},"padding-left":{syntax:"<length> | <percentage>",media:"visual",inherited:!1,animationType:"length",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"0",appliesto:"allElementsExceptInternalTableDisplayTypes",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding-left"},"padding-right":{syntax:"<length> | <percentage>",media:"visual",inherited:!1,animationType:"length",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"0",appliesto:"allElementsExceptInternalTableDisplayTypes",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding-right"},"padding-top":{syntax:"<length> | <percentage>",media:"visual",inherited:!1,animationType:"length",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"0",appliesto:"allElementsExceptInternalTableDisplayTypes",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding-top"},"page-break-after":{syntax:"auto | always | avoid | left | right | recto | verso",media:["visual","paged"],inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Pages"],initial:"auto",appliesto:"blockElementsInNormalFlow",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/page-break-after"},"page-break-before":{syntax:"auto | always | avoid | left | right | recto | verso",media:["visual","paged"],inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Pages"],initial:"auto",appliesto:"blockElementsInNormalFlow",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/page-break-before"},"page-break-inside":{syntax:"auto | avoid",media:["visual","paged"],inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Pages"],initial:"auto",appliesto:"blockElementsInNormalFlow",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/page-break-inside"},"paint-order":{syntax:"normal | [ fill || stroke || markers ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"normal",appliesto:"textElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/paint-order"},perspective:{syntax:"none | <length>",media:"visual",inherited:!1,animationType:"length",percentages:"no",groups:["CSS Transforms"],initial:"none",appliesto:"transformableElements",computed:"absoluteLengthOrNone",order:"uniqueOrder",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/perspective"},"perspective-origin":{syntax:"<position>",media:"visual",inherited:!1,animationType:"simpleListOfLpc",percentages:"referToSizeOfBoundingBox",groups:["CSS Transforms"],initial:"50% 50%",appliesto:"transformableElements",computed:"forLengthAbsoluteValueOtherwisePercentage",order:"oneOrTwoValuesLengthAbsoluteKeywordsPercentages",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/perspective-origin"},"place-content":{syntax:"<'align-content'> <'justify-content'>?",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Alignment"],initial:"normal",appliesto:"multilineFlexContainers",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/place-content"},"place-items":{syntax:"<'align-items'> <'justify-items'>?",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Alignment"],initial:["align-items","justify-items"],appliesto:"allElements",computed:["align-items","justify-items"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/place-items"},"place-self":{syntax:"<'align-self'> <'justify-self'>?",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Alignment"],initial:["align-self","justify-self"],appliesto:"blockLevelBoxesAndAbsolutelyPositionedBoxesAndGridItems",computed:["align-self","justify-self"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/place-self"},"pointer-events":{syntax:"auto | none | visiblePainted | visibleFill | visibleStroke | visible | painted | fill | stroke | all | inherit",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Pointer Events"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/pointer-events"},position:{syntax:"static | relative | absolute | sticky | fixed",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Positioning"],initial:"static",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/position"},quotes:{syntax:"none | auto | [ <string> <string> ]+",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Generated Content"],initial:"dependsOnUserAgent",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/quotes"},resize:{syntax:"none | both | horizontal | vertical | block | inline",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Basic User Interface"],initial:"none",appliesto:"elementsWithOverflowNotVisibleAndReplacedElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/resize"},right:{syntax:"<length> | <percentage> | auto",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToWidthOfContainingBlock",groups:["CSS Positioning"],initial:"auto",appliesto:"positionedElements",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/right"},rotate:{syntax:"none | <angle> | [ x | y | z | <number>{3} ] && <angle>",media:"visual",inherited:!1,animationType:"transform",percentages:"no",groups:["CSS Transforms"],initial:"none",appliesto:"transformableElements",computed:"asSpecified",order:"perGrammar",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/rotate"},"row-gap":{syntax:"normal | <length-percentage>",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfContentArea",groups:["CSS Box Alignment"],initial:"normal",appliesto:"multiColumnElementsFlexContainersGridContainers",computed:"asSpecifiedWithLengthsAbsoluteAndNormalComputingToZeroExceptMultiColumn",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/row-gap"},"ruby-align":{syntax:"start | center | space-between | space-around",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Ruby"],initial:"space-around",appliesto:"rubyBasesAnnotationsBaseAnnotationContainers",computed:"asSpecified",order:"uniqueOrder",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/ruby-align"},"ruby-merge":{syntax:"separate | collapse | auto",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Ruby"],initial:"separate",appliesto:"rubyAnnotationsContainers",computed:"asSpecified",order:"uniqueOrder",status:"experimental"},"ruby-position":{syntax:"over | under | inter-character",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Ruby"],initial:"over",appliesto:"rubyAnnotationsContainers",computed:"asSpecified",order:"uniqueOrder",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/ruby-position"},scale:{syntax:"none | <number>{1,3}",media:"visual",inherited:!1,animationType:"transform",percentages:"no",groups:["CSS Transforms"],initial:"none",appliesto:"transformableElements",computed:"asSpecified",order:"perGrammar",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scale"},"scrollbar-color":{syntax:"auto | dark | light | <color>{2}",media:"visual",inherited:!0,animationType:"color",percentages:"no",groups:["CSS Scrollbars"],initial:"auto",appliesto:"scrollingBoxes",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scrollbar-color"},"scrollbar-gutter":{syntax:"auto | [ stable | always ] && both? && force?",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Overflow"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scrollbar-gutter"},"scrollbar-width":{syntax:"auto | thin | none",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Scrollbars"],initial:"auto",appliesto:"scrollingBoxes",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scrollbar-width"},"scroll-behavior":{syntax:"auto | smooth",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSSOM View"],initial:"auto",appliesto:"scrollingBoxes",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-behavior"},"scroll-margin":{syntax:"<length>{1,4}",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin"},"scroll-margin-block":{syntax:"<length>{1,2}",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin-block"},"scroll-margin-block-start":{syntax:"<length>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin-block-start"},"scroll-margin-block-end":{syntax:"<length>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin-block-end"},"scroll-margin-bottom":{syntax:"<length>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin-bottom"},"scroll-margin-inline":{syntax:"<length>{1,2}",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin-inline"},"scroll-margin-inline-start":{syntax:"<length>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin-inline-start"},"scroll-margin-inline-end":{syntax:"<length>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin-inline-end"},"scroll-margin-left":{syntax:"<length>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin-left"},"scroll-margin-right":{syntax:"<length>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin-right"},"scroll-margin-top":{syntax:"<length>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin-top"},"scroll-padding":{syntax:"[ auto | <length-percentage> ]{1,4}",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding"},"scroll-padding-block":{syntax:"[ auto | <length-percentage> ]{1,2}",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding-block"},"scroll-padding-block-start":{syntax:"auto | <length-percentage>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding-block-start"},"scroll-padding-block-end":{syntax:"auto | <length-percentage>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding-block-end"},"scroll-padding-bottom":{syntax:"auto | <length-percentage>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding-bottom"},"scroll-padding-inline":{syntax:"[ auto | <length-percentage> ]{1,2}",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding-inline"},"scroll-padding-inline-start":{syntax:"auto | <length-percentage>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding-inline-start"},"scroll-padding-inline-end":{syntax:"auto | <length-percentage>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding-inline-end"},"scroll-padding-left":{syntax:"auto | <length-percentage>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding-left"},"scroll-padding-right":{syntax:"auto | <length-percentage>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding-right"},"scroll-padding-top":{syntax:"auto | <length-percentage>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding-top"},"scroll-snap-align":{syntax:"[ none | start | end | center ]{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Scroll Snap"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-snap-align"},"scroll-snap-coordinate":{syntax:"none | <position>#",media:"interactive",inherited:!1,animationType:"position",percentages:"referToBorderBox",groups:["CSS Scroll Snap"],initial:"none",appliesto:"allElements",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-snap-coordinate"},"scroll-snap-destination":{syntax:"<position>",media:"interactive",inherited:!1,animationType:"position",percentages:"relativeToScrollContainerPaddingBoxAxis",groups:["CSS Scroll Snap"],initial:"0px 0px",appliesto:"scrollContainers",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-snap-destination"},"scroll-snap-points-x":{syntax:"none | repeat( <length-percentage> )",media:"interactive",inherited:!1,animationType:"discrete",percentages:"relativeToScrollContainerPaddingBoxAxis",groups:["CSS Scroll Snap"],initial:"none",appliesto:"scrollContainers",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-snap-points-x"},"scroll-snap-points-y":{syntax:"none | repeat( <length-percentage> )",media:"interactive",inherited:!1,animationType:"discrete",percentages:"relativeToScrollContainerPaddingBoxAxis",groups:["CSS Scroll Snap"],initial:"none",appliesto:"scrollContainers",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-snap-points-y"},"scroll-snap-stop":{syntax:"normal | always",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Scroll Snap"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-snap-stop"},"scroll-snap-type":{syntax:"none | [ x | y | block | inline | both ] [ mandatory | proximity ]?",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Scroll Snap"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-snap-type"},"scroll-snap-type-x":{syntax:"none | mandatory | proximity",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Scroll Snap"],initial:"none",appliesto:"scrollContainers",computed:"asSpecified",order:"uniqueOrder",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-snap-type-x"},"scroll-snap-type-y":{syntax:"none | mandatory | proximity",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Scroll Snap"],initial:"none",appliesto:"scrollContainers",computed:"asSpecified",order:"uniqueOrder",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-snap-type-y"},"shape-image-threshold":{syntax:"<alpha-value>",media:"visual",inherited:!1,animationType:"number",percentages:"no",groups:["CSS Shapes"],initial:"0.0",appliesto:"floats",computed:"specifiedValueNumberClipped0To1",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/shape-image-threshold"},"shape-margin":{syntax:"<length-percentage>",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToWidthOfContainingBlock",groups:["CSS Shapes"],initial:"0",appliesto:"floats",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/shape-margin"},"shape-outside":{syntax:"none | <shape-box> || <basic-shape> | <image>",media:"visual",inherited:!1,animationType:"basicShapeOtherwiseNo",percentages:"no",groups:["CSS Shapes"],initial:"none",appliesto:"floats",computed:"asDefinedForBasicShapeWithAbsoluteURIOtherwiseAsSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/shape-outside"},"tab-size":{syntax:"<integer> | <length>",media:"visual",inherited:!0,animationType:"length",percentages:"no",groups:["CSS Text"],initial:"8",appliesto:"blockContainers",computed:"specifiedIntegerOrAbsoluteLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/tab-size"},"table-layout":{syntax:"auto | fixed",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Table"],initial:"auto",appliesto:"tableElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/table-layout"},"text-align":{syntax:"start | end | left | right | center | justify | match-parent",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"startOrNamelessValueIfLTRRightIfRTL",appliesto:"blockContainers",computed:"asSpecifiedExceptMatchParent",order:"orderOfAppearance",alsoAppliesTo:["::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-align"},"text-align-last":{syntax:"auto | start | end | left | right | center | justify",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"auto",appliesto:"blockContainers",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-align-last"},"text-combine-upright":{syntax:"none | all | [ digits <integer>? ]",media:"visual",inherited:!0,animationType:"notAnimatable",percentages:"no",groups:["CSS Writing Modes"],initial:"none",appliesto:"nonReplacedInlineElements",computed:"keywordPlusIntegerIfDigits",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-combine-upright"},"text-decoration":{syntax:"<'text-decoration-line'> || <'text-decoration-style'> || <'text-decoration-color'> || <'text-decoration-thickness'>",media:"visual",inherited:!1,animationType:["text-decoration-color","text-decoration-style","text-decoration-line","text-decoration-thickness"],percentages:"no",groups:["CSS Text Decoration"],initial:["text-decoration-color","text-decoration-style","text-decoration-line"],appliesto:"allElements",computed:["text-decoration-line","text-decoration-style","text-decoration-color","text-decoration-thickness"],order:"orderOfAppearance",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-decoration"},"text-decoration-color":{syntax:"<color>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Text Decoration"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-decoration-color"},"text-decoration-line":{syntax:"none | [ underline || overline || line-through || blink ] | spelling-error | grammar-error",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Text Decoration"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-decoration-line"},"text-decoration-skip":{syntax:"none | [ objects || [ spaces | [ leading-spaces || trailing-spaces ] ] || edges || box-decoration ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text Decoration"],initial:"objects",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-decoration-skip"},"text-decoration-skip-ink":{syntax:"auto | all | none",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text Decoration"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-decoration-skip-ink"},"text-decoration-style":{syntax:"solid | double | dotted | dashed | wavy",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Text Decoration"],initial:"solid",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-decoration-style"},"text-decoration-thickness":{syntax:"auto | from-font | <length> | <percentage> ",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"referToElementFontSize",groups:["CSS Text Decoration"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-decoration-thickness"},"text-emphasis":{syntax:"<'text-emphasis-style'> || <'text-emphasis-color'>",media:"visual",inherited:!1,animationType:["text-emphasis-color","text-emphasis-style"],percentages:"no",groups:["CSS Text Decoration"],initial:["text-emphasis-style","text-emphasis-color"],appliesto:"allElements",computed:["text-emphasis-style","text-emphasis-color"],order:"orderOfAppearance",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-emphasis"},"text-emphasis-color":{syntax:"<color>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Text Decoration"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-emphasis-color"},"text-emphasis-position":{syntax:"[ over | under ] && [ right | left ]",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Text Decoration"],initial:"over right",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-emphasis-position"},"text-emphasis-style":{syntax:"none | [ [ filled | open ] || [ dot | circle | double-circle | triangle | sesame ] ] | <string>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Text Decoration"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-emphasis-style"},"text-indent":{syntax:"<length-percentage> && hanging? && each-line?",media:"visual",inherited:!0,animationType:"lpc",percentages:"referToWidthOfContainingBlock",groups:["CSS Text"],initial:"0",appliesto:"blockContainers",computed:"percentageOrAbsoluteLengthPlusKeywords",order:"lengthOrPercentageBeforeKeywords",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-indent"},"text-justify":{syntax:"auto | inter-character | inter-word | none",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"auto",appliesto:"inlineLevelAndTableCellElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-justify"},"text-orientation":{syntax:"mixed | upright | sideways",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Writing Modes"],initial:"mixed",appliesto:"allElementsExceptTableRowGroupsRowsColumnGroupsAndColumns",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-orientation"},"text-overflow":{syntax:"[ clip | ellipsis | <string> ]{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Basic User Interface"],initial:"clip",appliesto:"blockContainerElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-overflow"},"text-rendering":{syntax:"auto | optimizeSpeed | optimizeLegibility | geometricPrecision",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Miscellaneous"],initial:"auto",appliesto:"textElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-rendering"},"text-shadow":{syntax:"none | <shadow-t>#",media:"visual",inherited:!0,animationType:"shadowList",percentages:"no",groups:["CSS Text Decoration"],initial:"none",appliesto:"allElements",computed:"colorPlusThreeAbsoluteLengths",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-shadow"},"text-size-adjust":{syntax:"none | auto | <percentage>",media:"visual",inherited:!0,animationType:"discrete",percentages:"referToSizeOfFont",groups:["CSS Text"],initial:"autoForSmartphoneBrowsersSupportingInflation",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-size-adjust"},"text-transform":{syntax:"none | capitalize | uppercase | lowercase | full-width | full-size-kana",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-transform"},"text-underline-offset":{syntax:"auto | <length> | <percentage> ",media:"visual",inherited:!0,animationType:"byComputedValueType",percentages:"referToElementFontSize",groups:["CSS Text Decoration"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-underline-offset"},"text-underline-position":{syntax:"auto | from-font | [ under || [ left | right ] ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text Decoration"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-underline-position"},top:{syntax:"<length> | <percentage> | auto",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToContainingBlockHeight",groups:["CSS Positioning"],initial:"auto",appliesto:"positionedElements",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/top"},"touch-action":{syntax:"auto | none | [ [ pan-x | pan-left | pan-right ] || [ pan-y | pan-up | pan-down ] || pinch-zoom ] | manipulation",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Pointer Events"],initial:"auto",appliesto:"allElementsExceptNonReplacedInlineElementsTableRowsColumnsRowColumnGroups",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/touch-action"},transform:{syntax:"none | <transform-list>",media:"visual",inherited:!1,animationType:"transform",percentages:"referToSizeOfBoundingBox",groups:["CSS Transforms"],initial:"none",appliesto:"transformableElements",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/transform"},"transform-box":{syntax:"content-box | border-box | fill-box | stroke-box | view-box",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Transforms"],initial:"view-box",appliesto:"transformableElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/transform-box"},"transform-origin":{syntax:"[ <length-percentage> | left | center | right | top | bottom ] | [ [ <length-percentage> | left | center | right ] && [ <length-percentage> | top | center | bottom ] ] <length>?",media:"visual",inherited:!1,animationType:"simpleListOfLpc",percentages:"referToSizeOfBoundingBox",groups:["CSS Transforms"],initial:"50% 50% 0",appliesto:"transformableElements",computed:"forLengthAbsoluteValueOtherwisePercentage",order:"oneOrTwoValuesLengthAbsoluteKeywordsPercentages",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/transform-origin"},"transform-style":{syntax:"flat | preserve-3d",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Transforms"],initial:"flat",appliesto:"transformableElements",computed:"asSpecified",order:"uniqueOrder",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/transform-style"},transition:{syntax:"<single-transition>#",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Transitions"],initial:["transition-delay","transition-duration","transition-property","transition-timing-function"],appliesto:"allElementsAndPseudos",computed:["transition-delay","transition-duration","transition-property","transition-timing-function"],order:"orderOfAppearance",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/transition"},"transition-delay":{syntax:"<time>#",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Transitions"],initial:"0s",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/transition-delay"},"transition-duration":{syntax:"<time>#",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Transitions"],initial:"0s",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/transition-duration"},"transition-property":{syntax:"none | <single-transition-property>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Transitions"],initial:"all",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/transition-property"},"transition-timing-function":{syntax:"<timing-function>#",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Transitions"],initial:"ease",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/transition-timing-function"},translate:{syntax:"none | <length-percentage> [ <length-percentage> <length>? ]?",media:"visual",inherited:!1,animationType:"transform",percentages:"referToSizeOfBoundingBox",groups:["CSS Transforms"],initial:"none",appliesto:"transformableElements",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"perGrammar",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/translate"},"unicode-bidi":{syntax:"normal | embed | isolate | bidi-override | isolate-override | plaintext",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Writing Modes"],initial:"normal",appliesto:"allElementsSomeValuesNoEffectOnNonInlineElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/unicode-bidi"},"user-select":{syntax:"auto | text | none | contain | all",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Basic User Interface"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/user-select"},"vertical-align":{syntax:"baseline | sub | super | text-top | text-bottom | middle | top | bottom | <percentage> | <length>",media:"visual",inherited:!1,animationType:"length",percentages:"referToLineHeight",groups:["CSS Table"],initial:"baseline",appliesto:"inlineLevelAndTableCellElements",computed:"absoluteLengthOrKeyword",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/vertical-align"},visibility:{syntax:"visible | hidden | collapse",media:"visual",inherited:!0,animationType:"visibility",percentages:"no",groups:["CSS Box Model"],initial:"visible",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/visibility"},"white-space":{syntax:"normal | pre | nowrap | pre-wrap | pre-line | break-spaces",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/white-space"},widows:{syntax:"<integer>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fragmentation"],initial:"2",appliesto:"blockContainerElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/widows"},width:{syntax:"auto | <length> | <percentage> | min-content | max-content | fit-content(<length-percentage>)",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"auto",appliesto:"allElementsButNonReplacedAndTableRows",computed:"percentageAutoOrAbsoluteLength",order:"lengthOrPercentageBeforeKeywordIfBothPresent",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/width"},"will-change":{syntax:"auto | <animateable-feature>#",media:"all",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Will Change"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/will-change"},"word-break":{syntax:"normal | break-all | keep-all | break-word",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/word-break"},"word-spacing":{syntax:"normal | <length-percentage>",media:"visual",inherited:!0,animationType:"length",percentages:"referToWidthOfAffectedGlyph",groups:["CSS Text"],initial:"normal",appliesto:"allElements",computed:"optimumMinAndMaxValueOfAbsoluteLengthPercentageOrNormal",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/word-spacing"},"word-wrap":{syntax:"normal | break-word",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"normal",appliesto:"nonReplacedInlineElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/overflow-wrap"},"writing-mode":{syntax:"horizontal-tb | vertical-rl | vertical-lr | sideways-rl | sideways-lr",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Writing Modes"],initial:"horizontal-tb",appliesto:"allElementsExceptTableRowColumnGroupsTableRowsColumns",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/writing-mode"},"z-index":{syntax:"auto | <integer>",media:"visual",inherited:!1,animationType:"integer",percentages:"no",groups:["CSS Positioning"],initial:"auto",appliesto:"positionedElements",computed:"asSpecified",order:"uniqueOrder",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/z-index"},zoom:{syntax:"normal | reset | <number> | <percentage>",media:"visual",inherited:!1,animationType:"integer",percentages:"no",groups:["Microsoft Extensions"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/zoom"}}});var bS=ze((_4,dO)=>{dO.exports={"absolute-size":{syntax:"xx-small | x-small | small | medium | large | x-large | xx-large | xxx-large"},"alpha-value":{syntax:"<number> | <percentage>"},"angle-percentage":{syntax:"<angle> | <percentage>"},"angular-color-hint":{syntax:"<angle-percentage>"},"angular-color-stop":{syntax:"<color> && <color-stop-angle>?"},"angular-color-stop-list":{syntax:"[ <angular-color-stop> [, <angular-color-hint>]? ]# , <angular-color-stop>"},"animateable-feature":{syntax:"scroll-position | contents | <custom-ident>"},attachment:{syntax:"scroll | fixed | local"},"attr()":{syntax:"attr( <attr-name> <type-or-unit>? [, <attr-fallback> ]? )"},"attr-matcher":{syntax:"[ '~' | '|' | '^' | '$' | '*' ]? '='"},"attr-modifier":{syntax:"i | s"},"attribute-selector":{syntax:"'[' <wq-name> ']' | '[' <wq-name> <attr-matcher> [ <string-token> | <ident-token> ] <attr-modifier>? ']'"},"auto-repeat":{syntax:"repeat( [ auto-fill | auto-fit ] , [ <line-names>? <fixed-size> ]+ <line-names>? )"},"auto-track-list":{syntax:`[ <line-names>? [ <fixed-size> | <fixed-repeat> ] ]* <line-names>? <auto-repeat>
[ <line-names>? [ <fixed-size> | <fixed-repeat> ] ]* <line-names>?`},"baseline-position":{syntax:"[ first | last ]? baseline"},"basic-shape":{syntax:"<inset()> | <circle()> | <ellipse()> | <polygon()> | <path()>"},"bg-image":{syntax:"none | <image>"},"bg-layer":{syntax:"<bg-image> || <bg-position> [ / <bg-size> ]? || <repeat-style> || <attachment> || <box> || <box>"},"bg-position":{syntax:"[ [ left | center | right | top | bottom | <length-percentage> ] | [ left | center | right | <length-percentage> ] [ top | center | bottom | <length-percentage> ] | [ center | [ left | right ] <length-percentage>? ] && [ center | [ top | bottom ] <length-percentage>? ] ]"},"bg-size":{syntax:"[ <length-percentage> | auto ]{1,2} | cover | contain"},"blur()":{syntax:"blur( <length> )"},"blend-mode":{syntax:"normal | multiply | screen | overlay | darken | lighten | color-dodge | color-burn | hard-light | soft-light | difference | exclusion | hue | saturation | color | luminosity"},box:{syntax:"border-box | padding-box | content-box"},"brightness()":{syntax:"brightness( <number-percentage> )"},"calc()":{syntax:"calc( <calc-sum> )"},"calc-sum":{syntax:"<calc-product> [ [ '+' | '-' ] <calc-product> ]*"},"calc-product":{syntax:"<calc-value> [ '*' <calc-value> | '/' <number> ]*"},"calc-value":{syntax:"<number> | <dimension> | <percentage> | ( <calc-sum> )"},"cf-final-image":{syntax:"<image> | <color>"},"cf-mixing-image":{syntax:"<percentage>? && <image>"},"circle()":{syntax:"circle( [ <shape-radius> ]? [ at <position> ]? )"},"clamp()":{syntax:"clamp( <calc-sum>#{3} )"},"class-selector":{syntax:"'.' <ident-token>"},"clip-source":{syntax:"<url>"},color:{syntax:"<rgb()> | <rgba()> | <hsl()> | <hsla()> | <hex-color> | <named-color> | currentcolor | <deprecated-system-color>"},"color-stop":{syntax:"<color-stop-length> | <color-stop-angle>"},"color-stop-angle":{syntax:"<angle-percentage>{1,2}"},"color-stop-length":{syntax:"<length-percentage>{1,2}"},"color-stop-list":{syntax:"[ <linear-color-stop> [, <linear-color-hint>]? ]# , <linear-color-stop>"},combinator:{syntax:"'>' | '+' | '~' | [ '||' ]"},"common-lig-values":{syntax:"[ common-ligatures | no-common-ligatures ]"},"compat-auto":{syntax:"searchfield | textarea | push-button | slider-horizontal | checkbox | radio | square-button | menulist | listbox | meter | progress-bar | button"},"composite-style":{syntax:"clear | copy | source-over | source-in | source-out | source-atop | destination-over | destination-in | destination-out | destination-atop | xor"},"compositing-operator":{syntax:"add | subtract | intersect | exclude"},"compound-selector":{syntax:"[ <type-selector>? <subclass-selector>* [ <pseudo-element-selector> <pseudo-class-selector>* ]* ]!"},"compound-selector-list":{syntax:"<compound-selector>#"},"complex-selector":{syntax:"<compound-selector> [ <combinator>? <compound-selector> ]*"},"complex-selector-list":{syntax:"<complex-selector>#"},"conic-gradient()":{syntax:"conic-gradient( [ from <angle> ]? [ at <position> ]?, <angular-color-stop-list> )"},"contextual-alt-values":{syntax:"[ contextual | no-contextual ]"},"content-distribution":{syntax:"space-between | space-around | space-evenly | stretch"},"content-list":{syntax:"[ <string> | contents | <image> | <quote> | <target> | <leader()> ]+"},"content-position":{syntax:"center | start | end | flex-start | flex-end"},"content-replacement":{syntax:"<image>"},"contrast()":{syntax:"contrast( [ <number-percentage> ] )"},"counter()":{syntax:"counter( <custom-ident>, <counter-style>? )"},"counter-style":{syntax:"<counter-style-name> | symbols()"},"counter-style-name":{syntax:"<custom-ident>"},"counters()":{syntax:"counters( <custom-ident>, <string>, <counter-style>? )"},"cross-fade()":{syntax:"cross-fade( <cf-mixing-image> , <cf-final-image>? )"},"cubic-bezier-timing-function":{syntax:"ease | ease-in | ease-out | ease-in-out | cubic-bezier(<number [0,1]>, <number>, <number [0,1]>, <number>)"},"deprecated-system-color":{syntax:"ActiveBorder | ActiveCaption | AppWorkspace | Background | ButtonFace | ButtonHighlight | ButtonShadow | ButtonText | CaptionText | GrayText | Highlight | HighlightText | InactiveBorder | InactiveCaption | InactiveCaptionText | InfoBackground | InfoText | Menu | MenuText | Scrollbar | ThreeDDarkShadow | ThreeDFace | ThreeDHighlight | ThreeDLightShadow | ThreeDShadow | Window | WindowFrame | WindowText"},"discretionary-lig-values":{syntax:"[ discretionary-ligatures | no-discretionary-ligatures ]"},"display-box":{syntax:"contents | none"},"display-inside":{syntax:"flow | flow-root | table | flex | grid | ruby"},"display-internal":{syntax:"table-row-group | table-header-group | table-footer-group | table-row | table-cell | table-column-group | table-column | table-caption | ruby-base | ruby-text | ruby-base-container | ruby-text-container"},"display-legacy":{syntax:"inline-block | inline-list-item | inline-table | inline-flex | inline-grid"},"display-listitem":{syntax:"<display-outside>? && [ flow | flow-root ]? && list-item"},"display-outside":{syntax:"block | inline | run-in"},"drop-shadow()":{syntax:"drop-shadow( <length>{2,3} <color>? )"},"east-asian-variant-values":{syntax:"[ jis78 | jis83 | jis90 | jis04 | simplified | traditional ]"},"east-asian-width-values":{syntax:"[ full-width | proportional-width ]"},"element()":{syntax:"element( <id-selector> )"},"ellipse()":{syntax:"ellipse( [ <shape-radius>{2} ]? [ at <position> ]? )"},"ending-shape":{syntax:"circle | ellipse"},"env()":{syntax:"env( <custom-ident> , <declaration-value>? )"},"explicit-track-list":{syntax:"[ <line-names>? <track-size> ]+ <line-names>?"},"family-name":{syntax:"<string> | <custom-ident>+"},"feature-tag-value":{syntax:"<string> [ <integer> | on | off ]?"},"feature-type":{syntax:"@stylistic | @historical-forms | @styleset | @character-variant | @swash | @ornaments | @annotation"},"feature-value-block":{syntax:"<feature-type> '{' <feature-value-declaration-list> '}'"},"feature-value-block-list":{syntax:"<feature-value-block>+"},"feature-value-declaration":{syntax:"<custom-ident>: <integer>+;"},"feature-value-declaration-list":{syntax:"<feature-value-declaration>"},"feature-value-name":{syntax:"<custom-ident>"},"fill-rule":{syntax:"nonzero | evenodd"},"filter-function":{syntax:"<blur()> | <brightness()> | <contrast()> | <drop-shadow()> | <grayscale()> | <hue-rotate()> | <invert()> | <opacity()> | <saturate()> | <sepia()>"},"filter-function-list":{syntax:"[ <filter-function> | <url> ]+"},"final-bg-layer":{syntax:"<'background-color'> || <bg-image> || <bg-position> [ / <bg-size> ]? || <repeat-style> || <attachment> || <box> || <box>"},"fit-content()":{syntax:"fit-content( [ <length> | <percentage> ] )"},"fixed-breadth":{syntax:"<length-percentage>"},"fixed-repeat":{syntax:"repeat( [ <positive-integer> ] , [ <line-names>? <fixed-size> ]+ <line-names>? )"},"fixed-size":{syntax:"<fixed-breadth> | minmax( <fixed-breadth> , <track-breadth> ) | minmax( <inflexible-breadth> , <fixed-breadth> )"},"font-stretch-absolute":{syntax:"normal | ultra-condensed | extra-condensed | condensed | semi-condensed | semi-expanded | expanded | extra-expanded | ultra-expanded | <percentage>"},"font-variant-css21":{syntax:"[ normal | small-caps ]"},"font-weight-absolute":{syntax:"normal | bold | <number [1,1000]>"},"frequency-percentage":{syntax:"<frequency> | <percentage>"},"general-enclosed":{syntax:"[ <function-token> <any-value> ) ] | ( <ident> <any-value> )"},"generic-family":{syntax:"serif | sans-serif | cursive | fantasy | monospace"},"generic-name":{syntax:"serif | sans-serif | cursive | fantasy | monospace"},"geometry-box":{syntax:"<shape-box> | fill-box | stroke-box | view-box"},gradient:{syntax:"<linear-gradient()> | <repeating-linear-gradient()> | <radial-gradient()> | <repeating-radial-gradient()> | <conic-gradient()>"},"grayscale()":{syntax:"grayscale( <number-percentage> )"},"grid-line":{syntax:"auto | <custom-ident> | [ <integer> && <custom-ident>? ] | [ span && [ <integer> || <custom-ident> ] ]"},"historical-lig-values":{syntax:"[ historical-ligatures | no-historical-ligatures ]"},"hsl()":{syntax:"hsl( <hue> <percentage> <percentage> [ / <alpha-value> ]? ) | hsl( <hue>, <percentage>, <percentage>, <alpha-value>? )"},"hsla()":{syntax:"hsla( <hue> <percentage> <percentage> [ / <alpha-value> ]? ) | hsla( <hue>, <percentage>, <percentage>, <alpha-value>? )"},hue:{syntax:"<number> | <angle>"},"hue-rotate()":{syntax:"hue-rotate( <angle> )"},"id-selector":{syntax:"<hash-token>"},image:{syntax:"<url> | <image()> | <image-set()> | <element()> | <paint()> | <cross-fade()> | <gradient>"},"image()":{syntax:"image( <image-tags>? [ <image-src>? , <color>? ]! )"},"image-set()":{syntax:"image-set( <image-set-option># )"},"image-set-option":{syntax:"[ <image> | <string> ] <resolution>"},"image-src":{syntax:"<url> | <string>"},"image-tags":{syntax:"ltr | rtl"},"inflexible-breadth":{syntax:"<length> | <percentage> | min-content | max-content | auto"},"inset()":{syntax:"inset( <length-percentage>{1,4} [ round <'border-radius'> ]? )"},"invert()":{syntax:"invert( <number-percentage> )"},"keyframes-name":{syntax:"<custom-ident> | <string>"},"keyframe-block":{syntax:`<keyframe-selector># {
  <declaration-list>
}`},"keyframe-block-list":{syntax:"<keyframe-block>+"},"keyframe-selector":{syntax:"from | to | <percentage>"},"leader()":{syntax:"leader( <leader-type> )"},"leader-type":{syntax:"dotted | solid | space | <string>"},"length-percentage":{syntax:"<length> | <percentage>"},"line-names":{syntax:"'[' <custom-ident>* ']'"},"line-name-list":{syntax:"[ <line-names> | <name-repeat> ]+"},"line-style":{syntax:"none | hidden | dotted | dashed | solid | double | groove | ridge | inset | outset"},"line-width":{syntax:"<length> | thin | medium | thick"},"linear-color-hint":{syntax:"<length-percentage>"},"linear-color-stop":{syntax:"<color> <color-stop-length>?"},"linear-gradient()":{syntax:"linear-gradient( [ <angle> | to <side-or-corner> ]? , <color-stop-list> )"},"mask-layer":{syntax:"<mask-reference> || <position> [ / <bg-size> ]? || <repeat-style> || <geometry-box> || [ <geometry-box> | no-clip ] || <compositing-operator> || <masking-mode>"},"mask-position":{syntax:"[ <length-percentage> | left | center | right ] [ <length-percentage> | top | center | bottom ]?"},"mask-reference":{syntax:"none | <image> | <mask-source>"},"mask-source":{syntax:"<url>"},"masking-mode":{syntax:"alpha | luminance | match-source"},"matrix()":{syntax:"matrix( <number>#{6} )"},"matrix3d()":{syntax:"matrix3d( <number>#{16} )"},"max()":{syntax:"max( <calc-sum># )"},"media-and":{syntax:"<media-in-parens> [ and <media-in-parens> ]+"},"media-condition":{syntax:"<media-not> | <media-and> | <media-or> | <media-in-parens>"},"media-condition-without-or":{syntax:"<media-not> | <media-and> | <media-in-parens>"},"media-feature":{syntax:"( [ <mf-plain> | <mf-boolean> | <mf-range> ] )"},"media-in-parens":{syntax:"( <media-condition> ) | <media-feature> | <general-enclosed>"},"media-not":{syntax:"not <media-in-parens>"},"media-or":{syntax:"<media-in-parens> [ or <media-in-parens> ]+"},"media-query":{syntax:"<media-condition> | [ not | only ]? <media-type> [ and <media-condition-without-or> ]?"},"media-query-list":{syntax:"<media-query>#"},"media-type":{syntax:"<ident>"},"mf-boolean":{syntax:"<mf-name>"},"mf-name":{syntax:"<ident>"},"mf-plain":{syntax:"<mf-name> : <mf-value>"},"mf-range":{syntax:`<mf-name> [ '<' | '>' ]? '='? <mf-value>
| <mf-value> [ '<' | '>' ]? '='? <mf-name>
| <mf-value> '<' '='? <mf-name> '<' '='? <mf-value>
| <mf-value> '>' '='? <mf-name> '>' '='? <mf-value>`},"mf-value":{syntax:"<number> | <dimension> | <ident> | <ratio>"},"min()":{syntax:"min( <calc-sum># )"},"minmax()":{syntax:"minmax( [ <length> | <percentage> | min-content | max-content | auto ] , [ <length> | <percentage> | <flex> | min-content | max-content | auto ] )"},"named-color":{syntax:"transparent | aliceblue | antiquewhite | aqua | aquamarine | azure | beige | bisque | black | blanchedalmond | blue | blueviolet | brown | burlywood | cadetblue | chartreuse | chocolate | coral | cornflowerblue | cornsilk | crimson | cyan | darkblue | darkcyan | darkgoldenrod | darkgray | darkgreen | darkgrey | darkkhaki | darkmagenta | darkolivegreen | darkorange | darkorchid | darkred | darksalmon | darkseagreen | darkslateblue | darkslategray | darkslategrey | darkturquoise | darkviolet | deeppink | deepskyblue | dimgray | dimgrey | dodgerblue | firebrick | floralwhite | forestgreen | fuchsia | gainsboro | ghostwhite | gold | goldenrod | gray | green | greenyellow | grey | honeydew | hotpink | indianred | indigo | ivory | khaki | lavender | lavenderblush | lawngreen | lemonchiffon | lightblue | lightcoral | lightcyan | lightgoldenrodyellow | lightgray | lightgreen | lightgrey | lightpink | lightsalmon | lightseagreen | lightskyblue | lightslategray | lightslategrey | lightsteelblue | lightyellow | lime | limegreen | linen | magenta | maroon | mediumaquamarine | mediumblue | mediumorchid | mediumpurple | mediumseagreen | mediumslateblue | mediumspringgreen | mediumturquoise | mediumvioletred | midnightblue | mintcream | mistyrose | moccasin | navajowhite | navy | oldlace | olive | olivedrab | orange | orangered | orchid | palegoldenrod | palegreen | paleturquoise | palevioletred | papayawhip | peachpuff | peru | pink | plum | powderblue | purple | rebeccapurple | red | rosybrown | royalblue | saddlebrown | salmon | sandybrown | seagreen | seashell | sienna | silver | skyblue | slateblue | slategray | slategrey | snow | springgreen | steelblue | tan | teal | thistle | tomato | turquoise | violet | wheat | white | whitesmoke | yellow | yellowgreen"},"namespace-prefix":{syntax:"<ident>"},"ns-prefix":{syntax:"[ <ident-token> | '*' ]? '|'"},"number-percentage":{syntax:"<number> | <percentage>"},"numeric-figure-values":{syntax:"[ lining-nums | oldstyle-nums ]"},"numeric-fraction-values":{syntax:"[ diagonal-fractions | stacked-fractions ]"},"numeric-spacing-values":{syntax:"[ proportional-nums | tabular-nums ]"},nth:{syntax:"<an-plus-b> | even | odd"},"opacity()":{syntax:"opacity( [ <number-percentage> ] )"},"overflow-position":{syntax:"unsafe | safe"},"outline-radius":{syntax:"<length> | <percentage>"},"page-body":{syntax:"<declaration>? [ ; <page-body> ]? | <page-margin-box> <page-body>"},"page-margin-box":{syntax:"<page-margin-box-type> '{' <declaration-list> '}'"},"page-margin-box-type":{syntax:"@top-left-corner | @top-left | @top-center | @top-right | @top-right-corner | @bottom-left-corner | @bottom-left | @bottom-center | @bottom-right | @bottom-right-corner | @left-top | @left-middle | @left-bottom | @right-top | @right-middle | @right-bottom"},"page-selector-list":{syntax:"[ <page-selector># ]?"},"page-selector":{syntax:"<pseudo-page>+ | <ident> <pseudo-page>*"},"path()":{syntax:"path( [ <fill-rule>, ]? <string> )"},"paint()":{syntax:"paint( <ident>, <declaration-value>? )"},"perspective()":{syntax:"perspective( <length> )"},"polygon()":{syntax:"polygon( <fill-rule>? , [ <length-percentage> <length-percentage> ]# )"},position:{syntax:"[ [ left | center | right ] || [ top | center | bottom ] | [ left | center | right | <length-percentage> ] [ top | center | bottom | <length-percentage> ]? | [ [ left | right ] <length-percentage> ] && [ [ top | bottom ] <length-percentage> ] ]"},"pseudo-class-selector":{syntax:"':' <ident-token> | ':' <function-token> <any-value> ')'"},"pseudo-element-selector":{syntax:"':' <pseudo-class-selector>"},"pseudo-page":{syntax:": [ left | right | first | blank ]"},quote:{syntax:"open-quote | close-quote | no-open-quote | no-close-quote"},"radial-gradient()":{syntax:"radial-gradient( [ <ending-shape> || <size> ]? [ at <position> ]? , <color-stop-list> )"},"relative-selector":{syntax:"<combinator>? <complex-selector>"},"relative-selector-list":{syntax:"<relative-selector>#"},"relative-size":{syntax:"larger | smaller"},"repeat-style":{syntax:"repeat-x | repeat-y | [ repeat | space | round | no-repeat ]{1,2}"},"repeating-linear-gradient()":{syntax:"repeating-linear-gradient( [ <angle> | to <side-or-corner> ]? , <color-stop-list> )"},"repeating-radial-gradient()":{syntax:"repeating-radial-gradient( [ <ending-shape> || <size> ]? [ at <position> ]? , <color-stop-list> )"},"rgb()":{syntax:"rgb( <percentage>{3} [ / <alpha-value> ]? ) | rgb( <number>{3} [ / <alpha-value> ]? ) | rgb( <percentage>#{3} , <alpha-value>? ) | rgb( <number>#{3} , <alpha-value>? )"},"rgba()":{syntax:"rgba( <percentage>{3} [ / <alpha-value> ]? ) | rgba( <number>{3} [ / <alpha-value> ]? ) | rgba( <percentage>#{3} , <alpha-value>? ) | rgba( <number>#{3} , <alpha-value>? )"},"rotate()":{syntax:"rotate( [ <angle> | <zero> ] )"},"rotate3d()":{syntax:"rotate3d( <number> , <number> , <number> , [ <angle> | <zero> ] )"},"rotateX()":{syntax:"rotateX( [ <angle> | <zero> ] )"},"rotateY()":{syntax:"rotateY( [ <angle> | <zero> ] )"},"rotateZ()":{syntax:"rotateZ( [ <angle> | <zero> ] )"},"saturate()":{syntax:"saturate( <number-percentage> )"},"scale()":{syntax:"scale( <number> , <number>? )"},"scale3d()":{syntax:"scale3d( <number> , <number> , <number> )"},"scaleX()":{syntax:"scaleX( <number> )"},"scaleY()":{syntax:"scaleY( <number> )"},"scaleZ()":{syntax:"scaleZ( <number> )"},"self-position":{syntax:"center | start | end | self-start | self-end | flex-start | flex-end"},"shape-radius":{syntax:"<length-percentage> | closest-side | farthest-side"},"skew()":{syntax:"skew( [ <angle> | <zero> ] , [ <angle> | <zero> ]? )"},"skewX()":{syntax:"skewX( [ <angle> | <zero> ] )"},"skewY()":{syntax:"skewY( [ <angle> | <zero> ] )"},"sepia()":{syntax:"sepia( <number-percentage> )"},shadow:{syntax:"inset? && <length>{2,4} && <color>?"},"shadow-t":{syntax:"[ <length>{2,3} && <color>? ]"},shape:{syntax:"rect(<top>, <right>, <bottom>, <left>)"},"shape-box":{syntax:"<box> | margin-box"},"side-or-corner":{syntax:"[ left | right ] || [ top | bottom ]"},"single-animation":{syntax:"<time> || <timing-function> || <time> || <single-animation-iteration-count> || <single-animation-direction> || <single-animation-fill-mode> || <single-animation-play-state> || [ none | <keyframes-name> ]"},"single-animation-direction":{syntax:"normal | reverse | alternate | alternate-reverse"},"single-animation-fill-mode":{syntax:"none | forwards | backwards | both"},"single-animation-iteration-count":{syntax:"infinite | <number>"},"single-animation-play-state":{syntax:"running | paused"},"single-transition":{syntax:"[ none | <single-transition-property> ] || <time> || <timing-function> || <time>"},"single-transition-property":{syntax:"all | <custom-ident>"},size:{syntax:"closest-side | farthest-side | closest-corner | farthest-corner | <length> | <length-percentage>{2}"},"step-position":{syntax:"jump-start | jump-end | jump-none | jump-both | start | end"},"step-timing-function":{syntax:"step-start | step-end | steps(<integer>[, <step-position>]?)"},"subclass-selector":{syntax:"<id-selector> | <class-selector> | <attribute-selector> | <pseudo-class-selector>"},"supports-condition":{syntax:"not <supports-in-parens> | <supports-in-parens> [ and <supports-in-parens> ]* | <supports-in-parens> [ or <supports-in-parens> ]*"},"supports-in-parens":{syntax:"( <supports-condition> ) | <supports-feature> | <general-enclosed>"},"supports-feature":{syntax:"<supports-decl> | <supports-selector-fn>"},"supports-decl":{syntax:"( <declaration> )"},"supports-selector-fn":{syntax:"selector( <complex-selector> )"},symbol:{syntax:"<string> | <image> | <custom-ident>"},target:{syntax:"<target-counter()> | <target-counters()> | <target-text()>"},"target-counter()":{syntax:"target-counter( [ <string> | <url> ] , <custom-ident> , <counter-style>? )"},"target-counters()":{syntax:"target-counters( [ <string> | <url> ] , <custom-ident> , <string> , <counter-style>? )"},"target-text()":{syntax:"target-text( [ <string> | <url> ] , [ content | before | after | first-letter ]? )"},"time-percentage":{syntax:"<time> | <percentage>"},"timing-function":{syntax:"linear | <cubic-bezier-timing-function> | <step-timing-function>"},"track-breadth":{syntax:"<length-percentage> | <flex> | min-content | max-content | auto"},"track-list":{syntax:"[ <line-names>? [ <track-size> | <track-repeat> ] ]+ <line-names>?"},"track-repeat":{syntax:"repeat( [ <positive-integer> ] , [ <line-names>? <track-size> ]+ <line-names>? )"},"track-size":{syntax:"<track-breadth> | minmax( <inflexible-breadth> , <track-breadth> ) | fit-content( [ <length> | <percentage> ] )"},"transform-function":{syntax:"<matrix()> | <translate()> | <translateX()> | <translateY()> | <scale()> | <scaleX()> | <scaleY()> | <rotate()> | <skew()> | <skewX()> | <skewY()> | <matrix3d()> | <translate3d()> | <translateZ()> | <scale3d()> | <scaleZ()> | <rotate3d()> | <rotateX()> | <rotateY()> | <rotateZ()> | <perspective()>"},"transform-list":{syntax:"<transform-function>+"},"translate()":{syntax:"translate( <length-percentage> , <length-percentage>? )"},"translate3d()":{syntax:"translate3d( <length-percentage> , <length-percentage> , <length> )"},"translateX()":{syntax:"translateX( <length-percentage> )"},"translateY()":{syntax:"translateY( <length-percentage> )"},"translateZ()":{syntax:"translateZ( <length> )"},"type-or-unit":{syntax:"string | color | url | integer | number | length | angle | time | frequency | cap | ch | em | ex | ic | lh | rlh | rem | vb | vi | vw | vh | vmin | vmax | mm | Q | cm | in | pt | pc | px | deg | grad | rad | turn | ms | s | Hz | kHz | %"},"type-selector":{syntax:"<wq-name> | <ns-prefix>? '*'"},"var()":{syntax:"var( <custom-property-name> , <declaration-value>? )"},"viewport-length":{syntax:"auto | <length-percentage>"},"wq-name":{syntax:"<ns-prefix>? <ident-token>"}}});var xS=ze((v4,hO)=>{hO.exports={atrules:{charset:{prelude:"<string>"},"font-face":{descriptors:{"unicode-range":{comment:"replaces <unicode-range>, an old production name",syntax:"<urange>#"}}}},properties:{"-moz-background-clip":{comment:"deprecated syntax in old Firefox, https://developer.mozilla.org/en/docs/Web/CSS/background-clip",syntax:"padding | border"},"-moz-border-radius-bottomleft":{comment:"https://developer.mozilla.org/en-US/docs/Web/CSS/border-bottom-left-radius",syntax:"<'border-bottom-left-radius'>"},"-moz-border-radius-bottomright":{comment:"https://developer.mozilla.org/en-US/docs/Web/CSS/border-bottom-right-radius",syntax:"<'border-bottom-right-radius'>"},"-moz-border-radius-topleft":{comment:"https://developer.mozilla.org/en-US/docs/Web/CSS/border-top-left-radius",syntax:"<'border-top-left-radius'>"},"-moz-border-radius-topright":{comment:"https://developer.mozilla.org/en-US/docs/Web/CSS/border-bottom-right-radius",syntax:"<'border-bottom-right-radius'>"},"-moz-control-character-visibility":{comment:"firefox specific keywords, https://bugzilla.mozilla.org/show_bug.cgi?id=947588",syntax:"visible | hidden"},"-moz-osx-font-smoothing":{comment:"misssed old syntax https://developer.mozilla.org/en-US/docs/Web/CSS/font-smooth",syntax:"auto | grayscale"},"-moz-user-select":{comment:"https://developer.mozilla.org/en-US/docs/Web/CSS/user-select",syntax:"none | text | all | -moz-none"},"-ms-flex-align":{comment:"misssed old syntax implemented in IE, https://www.w3.org/TR/2012/WD-css3-flexbox-20120322/#flex-align",syntax:"start | end | center | baseline | stretch"},"-ms-flex-item-align":{comment:"misssed old syntax implemented in IE, https://www.w3.org/TR/2012/WD-css3-flexbox-20120322/#flex-align",syntax:"auto | start | end | center | baseline | stretch"},"-ms-flex-line-pack":{comment:"misssed old syntax implemented in IE, https://www.w3.org/TR/2012/WD-css3-flexbox-20120322/#flex-line-pack",syntax:"start | end | center | justify | distribute | stretch"},"-ms-flex-negative":{comment:"misssed old syntax implemented in IE; TODO: find references for comfirmation",syntax:"<'flex-shrink'>"},"-ms-flex-pack":{comment:"misssed old syntax implemented in IE, https://www.w3.org/TR/2012/WD-css3-flexbox-20120322/#flex-pack",syntax:"start | end | center | justify | distribute"},"-ms-flex-order":{comment:"misssed old syntax implemented in IE; https://msdn.microsoft.com/en-us/library/jj127303(v=vs.85).aspx",syntax:"<integer>"},"-ms-flex-positive":{comment:"misssed old syntax implemented in IE; TODO: find references for comfirmation",syntax:"<'flex-grow'>"},"-ms-flex-preferred-size":{comment:"misssed old syntax implemented in IE; TODO: find references for comfirmation",syntax:"<'flex-basis'>"},"-ms-interpolation-mode":{comment:"https://msdn.microsoft.com/en-us/library/ff521095(v=vs.85).aspx",syntax:"nearest-neighbor | bicubic"},"-ms-grid-column-align":{comment:"add this property first since it uses as fallback for flexbox, https://msdn.microsoft.com/en-us/library/windows/apps/hh466338.aspx",syntax:"start | end | center | stretch"},"-ms-grid-row-align":{comment:"add this property first since it uses as fallback for flexbox, https://msdn.microsoft.com/en-us/library/windows/apps/hh466348.aspx",syntax:"start | end | center | stretch"},"-ms-hyphenate-limit-last":{comment:"misssed old syntax implemented in IE; https://www.w3.org/TR/css-text-4/#hyphenate-line-limits",syntax:"none | always | column | page | spread"},"-webkit-appearance":{comment:"webkit specific keywords",references:["http://css-infos.net/property/-webkit-appearance"],syntax:"none | button | button-bevel | caps-lock-indicator | caret | checkbox | default-button | inner-spin-button | listbox | listitem | media-controls-background | media-controls-fullscreen-background | media-current-time-display | media-enter-fullscreen-button | media-exit-fullscreen-button | media-fullscreen-button | media-mute-button | media-overlay-play-button | media-play-button | media-seek-back-button | media-seek-forward-button | media-slider | media-sliderthumb | media-time-remaining-display | media-toggle-closed-captions-button | media-volume-slider | media-volume-slider-container | media-volume-sliderthumb | menulist | menulist-button | menulist-text | menulist-textfield | meter | progress-bar | progress-bar-value | push-button | radio | scrollbarbutton-down | scrollbarbutton-left | scrollbarbutton-right | scrollbarbutton-up | scrollbargripper-horizontal | scrollbargripper-vertical | scrollbarthumb-horizontal | scrollbarthumb-vertical | scrollbartrack-horizontal | scrollbartrack-vertical | searchfield | searchfield-cancel-button | searchfield-decoration | searchfield-results-button | searchfield-results-decoration | slider-horizontal | slider-vertical | sliderthumb-horizontal | sliderthumb-vertical | square-button | textarea | textfield | -apple-pay-button"},"-webkit-background-clip":{comment:"https://developer.mozilla.org/en/docs/Web/CSS/background-clip",syntax:"[ <box> | border | padding | content | text ]#"},"-webkit-column-break-after":{comment:"added, http://help.dottoro.com/lcrthhhv.php",syntax:"always | auto | avoid"},"-webkit-column-break-before":{comment:"added, http://help.dottoro.com/lcxquvkf.php",syntax:"always | auto | avoid"},"-webkit-column-break-inside":{comment:"added, http://help.dottoro.com/lclhnthl.php",syntax:"always | auto | avoid"},"-webkit-font-smoothing":{comment:"https://developer.mozilla.org/en-US/docs/Web/CSS/font-smooth",syntax:"auto | none | antialiased | subpixel-antialiased"},"-webkit-mask-box-image":{comment:"missed; https://developer.mozilla.org/en-US/docs/Web/CSS/-webkit-mask-box-image",syntax:"[ <url> | <gradient> | none ] [ <length-percentage>{4} <-webkit-mask-box-repeat>{2} ]?"},"-webkit-print-color-adjust":{comment:"missed",references:["https://developer.mozilla.org/en/docs/Web/CSS/-webkit-print-color-adjust"],syntax:"economy | exact"},"-webkit-text-security":{comment:"missed; http://help.dottoro.com/lcbkewgt.php",syntax:"none | circle | disc | square"},"-webkit-user-drag":{comment:"missed; http://help.dottoro.com/lcbixvwm.php",syntax:"none | element | auto"},"-webkit-user-select":{comment:"auto is supported by old webkit, https://developer.mozilla.org/en-US/docs/Web/CSS/user-select",syntax:"auto | none | text | all"},"alignment-baseline":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/text.html#AlignmentBaselineProperty"],syntax:"auto | baseline | before-edge | text-before-edge | middle | central | after-edge | text-after-edge | ideographic | alphabetic | hanging | mathematical"},"baseline-shift":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/text.html#BaselineShiftProperty"],syntax:"baseline | sub | super | <svg-length>"},behavior:{comment:"added old IE property https://msdn.microsoft.com/en-us/library/ms530723(v=vs.85).aspx",syntax:"<url>+"},"clip-rule":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/masking.html#ClipRuleProperty"],syntax:"nonzero | evenodd"},cue:{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<'cue-before'> <'cue-after'>?"},"cue-after":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<url> <decibel>? | none"},"cue-before":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<url> <decibel>? | none"},cursor:{comment:"added legacy keywords: hand, -webkit-grab. -webkit-grabbing, -webkit-zoom-in, -webkit-zoom-out, -moz-grab, -moz-grabbing, -moz-zoom-in, -moz-zoom-out",references:["https://www.sitepoint.com/css3-cursor-styles/"],syntax:"[ [ <url> [ <x> <y> ]? , ]* [ auto | default | none | context-menu | help | pointer | progress | wait | cell | crosshair | text | vertical-text | alias | copy | move | no-drop | not-allowed | e-resize | n-resize | ne-resize | nw-resize | s-resize | se-resize | sw-resize | w-resize | ew-resize | ns-resize | nesw-resize | nwse-resize | col-resize | row-resize | all-scroll | zoom-in | zoom-out | grab | grabbing | hand | -webkit-grab | -webkit-grabbing | -webkit-zoom-in | -webkit-zoom-out | -moz-grab | -moz-grabbing | -moz-zoom-in | -moz-zoom-out ] ]"},display:{comment:"extended with -ms-flexbox",syntax:"| <-non-standard-display>"},position:{comment:"extended with -webkit-sticky",syntax:"| -webkit-sticky"},"dominant-baseline":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/text.html#DominantBaselineProperty"],syntax:"auto | use-script | no-change | reset-size | ideographic | alphabetic | hanging | mathematical | central | middle | text-after-edge | text-before-edge"},"image-rendering":{comment:"extended with <-non-standard-image-rendering>, added SVG keywords optimizeSpeed and optimizeQuality",references:["https://developer.mozilla.org/en/docs/Web/CSS/image-rendering","https://www.w3.org/TR/SVG/painting.html#ImageRenderingProperty"],syntax:"| optimizeSpeed | optimizeQuality | <-non-standard-image-rendering>"},fill:{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#FillProperty"],syntax:"<paint>"},"fill-opacity":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#FillProperty"],syntax:"<number-zero-one>"},"fill-rule":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#FillProperty"],syntax:"nonzero | evenodd"},filter:{comment:"extend with IE legacy syntaxes",syntax:"| <-ms-filter-function-list>"},"glyph-orientation-horizontal":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/text.html#GlyphOrientationHorizontalProperty"],syntax:"<angle>"},"glyph-orientation-vertical":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/text.html#GlyphOrientationVerticalProperty"],syntax:"<angle>"},kerning:{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/text.html#KerningProperty"],syntax:"auto | <svg-length>"},"letter-spacing":{comment:"fix syntax <length> -> <length-percentage>",references:["https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/letter-spacing"],syntax:"normal | <length-percentage>"},marker:{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#MarkerProperties"],syntax:"none | <url>"},"marker-end":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#MarkerProperties"],syntax:"none | <url>"},"marker-mid":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#MarkerProperties"],syntax:"none | <url>"},"marker-start":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#MarkerProperties"],syntax:"none | <url>"},"max-width":{comment:"fix auto -> none (https://github.com/mdn/data/pull/431); extend by non-standard width keywords https://developer.mozilla.org/en-US/docs/Web/CSS/max-width",syntax:"none | <length-percentage> | min-content | max-content | fit-content(<length-percentage>) | <-non-standard-width>"},width:{comment:"per spec fit-content should be a function, however browsers are supporting it as a keyword (https://github.com/csstree/stylelint-validator/issues/29)",syntax:"| fit-content | -moz-fit-content | -webkit-fit-content"},"min-width":{comment:"extend by non-standard width keywords https://developer.mozilla.org/en-US/docs/Web/CSS/width",syntax:"auto | <length-percentage> | min-content | max-content | fit-content(<length-percentage>) | <-non-standard-width>"},overflow:{comment:"extend by vendor keywords https://developer.mozilla.org/en-US/docs/Web/CSS/overflow",syntax:"| <-non-standard-overflow>"},pause:{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<'pause-before'> <'pause-after'>?"},"pause-after":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<time> | none | x-weak | weak | medium | strong | x-strong"},"pause-before":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<time> | none | x-weak | weak | medium | strong | x-strong"},rest:{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<'rest-before'> <'rest-after'>?"},"rest-after":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<time> | none | x-weak | weak | medium | strong | x-strong"},"rest-before":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<time> | none | x-weak | weak | medium | strong | x-strong"},"shape-rendering":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#ShapeRenderingPropert"],syntax:"auto | optimizeSpeed | crispEdges | geometricPrecision"},src:{comment:"added @font-face's src property https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/src",syntax:"[ <url> [ format( <string># ) ]? | local( <family-name> ) ]#"},speak:{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"auto | none | normal"},"speak-as":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"normal | spell-out || digits || [ literal-punctuation | no-punctuation ]"},stroke:{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#StrokeProperties"],syntax:"<paint>"},"stroke-dasharray":{comment:"added SVG property; a list of comma and/or white space separated <length>s and <percentage>s",references:["https://www.w3.org/TR/SVG/painting.html#StrokeProperties"],syntax:"none | [ <svg-length>+ ]#"},"stroke-dashoffset":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#StrokeProperties"],syntax:"<svg-length>"},"stroke-linecap":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#StrokeProperties"],syntax:"butt | round | square"},"stroke-linejoin":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#StrokeProperties"],syntax:"miter | round | bevel"},"stroke-miterlimit":{comment:"added SVG property (<miterlimit> = <number-one-or-greater>) ",references:["https://www.w3.org/TR/SVG/painting.html#StrokeProperties"],syntax:"<number-one-or-greater>"},"stroke-opacity":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#StrokeProperties"],syntax:"<number-zero-one>"},"stroke-width":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#StrokeProperties"],syntax:"<svg-length>"},"text-anchor":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/text.html#TextAlignmentProperties"],syntax:"start | middle | end"},"unicode-bidi":{comment:"added prefixed keywords https://developer.mozilla.org/en-US/docs/Web/CSS/unicode-bidi",syntax:"| -moz-isolate | -moz-isolate-override | -moz-plaintext | -webkit-isolate | -webkit-isolate-override | -webkit-plaintext"},"unicode-range":{comment:"added missed property https://developer.mozilla.org/en-US/docs/Web/CSS/%40font-face/unicode-range",syntax:"<urange>#"},"voice-balance":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<number> | left | center | right | leftwards | rightwards"},"voice-duration":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"auto | <time>"},"voice-family":{comment:"<name> -> <family-name>, https://www.w3.org/TR/css3-speech/#property-index",syntax:"[ [ <family-name> | <generic-voice> ] , ]* [ <family-name> | <generic-voice> ] | preserve"},"voice-pitch":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<frequency> && absolute | [ [ x-low | low | medium | high | x-high ] || [ <frequency> | <semitones> | <percentage> ] ]"},"voice-range":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<frequency> && absolute | [ [ x-low | low | medium | high | x-high ] || [ <frequency> | <semitones> | <percentage> ] ]"},"voice-rate":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"[ normal | x-slow | slow | medium | fast | x-fast ] || <percentage>"},"voice-stress":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"normal | strong | moderate | none | reduced"},"voice-volume":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"silent | [ [ x-soft | soft | medium | loud | x-loud ] || <decibel> ]"},"writing-mode":{comment:"extend with SVG keywords",syntax:"| <svg-writing-mode>"}},syntaxes:{"-legacy-gradient":{comment:"added collection of legacy gradient syntaxes",syntax:"<-webkit-gradient()> | <-legacy-linear-gradient> | <-legacy-repeating-linear-gradient> | <-legacy-radial-gradient> | <-legacy-repeating-radial-gradient>"},"-legacy-linear-gradient":{comment:"like standard syntax but w/o `to` keyword https://developer.mozilla.org/en-US/docs/Web/CSS/linear-gradient",syntax:"-moz-linear-gradient( <-legacy-linear-gradient-arguments> ) | -webkit-linear-gradient( <-legacy-linear-gradient-arguments> ) | -o-linear-gradient( <-legacy-linear-gradient-arguments> )"},"-legacy-repeating-linear-gradient":{comment:"like standard syntax but w/o `to` keyword https://developer.mozilla.org/en-US/docs/Web/CSS/linear-gradient",syntax:"-moz-repeating-linear-gradient( <-legacy-linear-gradient-arguments> ) | -webkit-repeating-linear-gradient( <-legacy-linear-gradient-arguments> ) | -o-repeating-linear-gradient( <-legacy-linear-gradient-arguments> )"},"-legacy-linear-gradient-arguments":{comment:"like standard syntax but w/o `to` keyword https://developer.mozilla.org/en-US/docs/Web/CSS/linear-gradient",syntax:"[ <angle> | <side-or-corner> ]? , <color-stop-list>"},"-legacy-radial-gradient":{comment:"deprecated syntax that implemented by some browsers https://www.w3.org/TR/2011/WD-css3-images-20110908/#radial-gradients",syntax:"-moz-radial-gradient( <-legacy-radial-gradient-arguments> ) | -webkit-radial-gradient( <-legacy-radial-gradient-arguments> ) | -o-radial-gradient( <-legacy-radial-gradient-arguments> )"},"-legacy-repeating-radial-gradient":{comment:"deprecated syntax that implemented by some browsers https://www.w3.org/TR/2011/WD-css3-images-20110908/#radial-gradients",syntax:"-moz-repeating-radial-gradient( <-legacy-radial-gradient-arguments> ) | -webkit-repeating-radial-gradient( <-legacy-radial-gradient-arguments> ) | -o-repeating-radial-gradient( <-legacy-radial-gradient-arguments> )"},"-legacy-radial-gradient-arguments":{comment:"deprecated syntax that implemented by some browsers https://www.w3.org/TR/2011/WD-css3-images-20110908/#radial-gradients",syntax:"[ <position> , ]? [ [ [ <-legacy-radial-gradient-shape> || <-legacy-radial-gradient-size> ] | [ <length> | <percentage> ]{2} ] , ]? <color-stop-list>"},"-legacy-radial-gradient-size":{comment:"before a standard it contains 2 extra keywords (`contain` and `cover`) https://www.w3.org/TR/2011/WD-css3-images-20110908/#ltsize",syntax:"closest-side | closest-corner | farthest-side | farthest-corner | contain | cover"},"-legacy-radial-gradient-shape":{comment:"define to double sure it doesn't extends in future https://www.w3.org/TR/2011/WD-css3-images-20110908/#ltshape",syntax:"circle | ellipse"},"-non-standard-font":{comment:"non standard fonts",references:["https://webkit.org/blog/3709/using-the-system-font-in-web-content/"],syntax:"-apple-system-body | -apple-system-headline | -apple-system-subheadline | -apple-system-caption1 | -apple-system-caption2 | -apple-system-footnote | -apple-system-short-body | -apple-system-short-headline | -apple-system-short-subheadline | -apple-system-short-caption1 | -apple-system-short-footnote | -apple-system-tall-body"},"-non-standard-color":{comment:"non standard colors",references:["http://cssdot.ru/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B8%D0%BA_CSS/color-i305.html","https://developer.mozilla.org/en-US/docs/Web/CSS/color_value#Mozilla_Color_Preference_Extensions"],syntax:"-moz-ButtonDefault | -moz-ButtonHoverFace | -moz-ButtonHoverText | -moz-CellHighlight | -moz-CellHighlightText | -moz-Combobox | -moz-ComboboxText | -moz-Dialog | -moz-DialogText | -moz-dragtargetzone | -moz-EvenTreeRow | -moz-Field | -moz-FieldText | -moz-html-CellHighlight | -moz-html-CellHighlightText | -moz-mac-accentdarkestshadow | -moz-mac-accentdarkshadow | -moz-mac-accentface | -moz-mac-accentlightesthighlight | -moz-mac-accentlightshadow | -moz-mac-accentregularhighlight | -moz-mac-accentregularshadow | -moz-mac-chrome-active | -moz-mac-chrome-inactive | -moz-mac-focusring | -moz-mac-menuselect | -moz-mac-menushadow | -moz-mac-menutextselect | -moz-MenuHover | -moz-MenuHoverText | -moz-MenuBarText | -moz-MenuBarHoverText | -moz-nativehyperlinktext | -moz-OddTreeRow | -moz-win-communicationstext | -moz-win-mediatext | -moz-activehyperlinktext | -moz-default-background-color | -moz-default-color | -moz-hyperlinktext | -moz-visitedhyperlinktext | -webkit-activelink | -webkit-focus-ring-color | -webkit-link | -webkit-text"},"-non-standard-image-rendering":{comment:"non-standard keywords http://phrogz.net/tmp/canvas_image_zoom.html",syntax:"optimize-contrast | -moz-crisp-edges | -o-crisp-edges | -webkit-optimize-contrast"},"-non-standard-overflow":{comment:"non-standard keywords https://developer.mozilla.org/en-US/docs/Web/CSS/overflow",syntax:"-moz-scrollbars-none | -moz-scrollbars-horizontal | -moz-scrollbars-vertical | -moz-hidden-unscrollable"},"-non-standard-width":{comment:"non-standard keywords https://developer.mozilla.org/en-US/docs/Web/CSS/width",syntax:"fill-available | min-intrinsic | intrinsic | -moz-available | -moz-fit-content | -moz-min-content | -moz-max-content | -webkit-min-content | -webkit-max-content"},"-webkit-gradient()":{comment:"first Apple proposal gradient syntax https://webkit.org/blog/175/introducing-css-gradients/ - TODO: simplify when after match algorithm improvement ( [, point, radius | , point] -> [, radius]? , point )",syntax:"-webkit-gradient( <-webkit-gradient-type>, <-webkit-gradient-point> [, <-webkit-gradient-point> | , <-webkit-gradient-radius>, <-webkit-gradient-point> ] [, <-webkit-gradient-radius>]? [, <-webkit-gradient-color-stop>]* )"},"-webkit-gradient-color-stop":{comment:"first Apple proposal gradient syntax https://webkit.org/blog/175/introducing-css-gradients/",syntax:"from( <color> ) | color-stop( [ <number-zero-one> | <percentage> ] , <color> ) | to( <color> )"},"-webkit-gradient-point":{comment:"first Apple proposal gradient syntax https://webkit.org/blog/175/introducing-css-gradients/",syntax:"[ left | center | right | <length-percentage> ] [ top | center | bottom | <length-percentage> ]"},"-webkit-gradient-radius":{comment:"first Apple proposal gradient syntax https://webkit.org/blog/175/introducing-css-gradients/",syntax:"<length> | <percentage>"},"-webkit-gradient-type":{comment:"first Apple proposal gradient syntax https://webkit.org/blog/175/introducing-css-gradients/",syntax:"linear | radial"},"-webkit-mask-box-repeat":{comment:"missed; https://developer.mozilla.org/en-US/docs/Web/CSS/-webkit-mask-box-image",syntax:"repeat | stretch | round"},"-webkit-mask-clip-style":{comment:"missed; there is no enough information about `-webkit-mask-clip` property, but looks like all those keywords are working",syntax:"border | border-box | padding | padding-box | content | content-box | text"},"-ms-filter-function-list":{comment:"https://developer.mozilla.org/en-US/docs/Web/CSS/-ms-filter",syntax:"<-ms-filter-function>+"},"-ms-filter-function":{comment:"https://developer.mozilla.org/en-US/docs/Web/CSS/-ms-filter",syntax:"<-ms-filter-function-progid> | <-ms-filter-function-legacy>"},"-ms-filter-function-progid":{comment:"https://developer.mozilla.org/en-US/docs/Web/CSS/-ms-filter",syntax:"'progid:' [ <ident-token> '.' ]* [ <ident-token> | <function-token> <any-value>? ) ]"},"-ms-filter-function-legacy":{comment:"https://developer.mozilla.org/en-US/docs/Web/CSS/-ms-filter",syntax:"<ident-token> | <function-token> <any-value>? )"},"-ms-filter":{syntax:"<string>"},age:{comment:"https://www.w3.org/TR/css3-speech/#voice-family",syntax:"child | young | old"},"attr-name":{syntax:"<wq-name>"},"attr-fallback":{syntax:"<any-value>"},"border-radius":{comment:"missed, https://drafts.csswg.org/css-backgrounds-3/#the-border-radius",syntax:"<length-percentage>{1,2}"},bottom:{comment:"missed; not sure we should add it, but no others except `shape` is using it so it's ok for now; https://drafts.fxtf.org/css-masking-1/#funcdef-clip-rect",syntax:"<length> | auto"},"content-list":{comment:"missed -> https://drafts.csswg.org/css-content/#typedef-content-list (document-url, <target> and leader() is omitted util stabilization)",syntax:"[ <string> | contents | <image> | <quote> | <target> | <leader()> | <attr()> | counter( <ident>, <'list-style-type'>? ) ]+"},"element()":{comment:"https://drafts.csswg.org/css-gcpm/#element-syntax & https://drafts.csswg.org/css-images-4/#element-notation",syntax:"element( <custom-ident> , [ first | start | last | first-except ]? ) | element( <id-selector> )"},"generic-voice":{comment:"https://www.w3.org/TR/css3-speech/#voice-family",syntax:"[ <age>? <gender> <integer>? ]"},gender:{comment:"https://www.w3.org/TR/css3-speech/#voice-family",syntax:"male | female | neutral"},"generic-family":{comment:"added -apple-system",references:["https://webkit.org/blog/3709/using-the-system-font-in-web-content/"],syntax:"| -apple-system"},gradient:{comment:"added legacy syntaxes support",syntax:"| <-legacy-gradient>"},left:{comment:"missed; not sure we should add it, but no others except `shape` is using it so it's ok for now; https://drafts.fxtf.org/css-masking-1/#funcdef-clip-rect",syntax:"<length> | auto"},"mask-image":{comment:"missed; https://drafts.fxtf.org/css-masking-1/#the-mask-image",syntax:"<mask-reference>#"},"name-repeat":{comment:"missed, and looks like obsolete, keep it as is since other property syntaxes should be changed too; https://www.w3.org/TR/2015/WD-css-grid-1-20150917/#typedef-name-repeat",syntax:"repeat( [ <positive-integer> | auto-fill ], <line-names>+)"},"named-color":{comment:"added non standard color names",syntax:"| <-non-standard-color>"},paint:{comment:"used by SVG https://www.w3.org/TR/SVG/painting.html#SpecifyingPaint",syntax:"none | <color> | <url> [ none | <color> ]? | context-fill | context-stroke"},"page-size":{comment:"https://www.w3.org/TR/css-page-3/#typedef-page-size-page-size",syntax:"A5 | A4 | A3 | B5 | B4 | JIS-B5 | JIS-B4 | letter | legal | ledger"},ratio:{comment:"missed, https://drafts.csswg.org/mediaqueries-4/#typedef-ratio",syntax:"<integer> / <integer>"},right:{comment:"missed; not sure we should add it, but no others except `shape` is using it so it's ok for now; https://drafts.fxtf.org/css-masking-1/#funcdef-clip-rect",syntax:"<length> | auto"},shape:{comment:"missed spaces in function body and add backwards compatible syntax",syntax:"rect( <top>, <right>, <bottom>, <left> ) | rect( <top> <right> <bottom> <left> )"},"svg-length":{comment:"All coordinates and lengths in SVG can be specified with or without a unit identifier",references:["https://www.w3.org/TR/SVG11/coords.html#Units"],syntax:"<percentage> | <length> | <number>"},"svg-writing-mode":{comment:"SVG specific keywords (deprecated for CSS)",references:["https://developer.mozilla.org/en/docs/Web/CSS/writing-mode","https://www.w3.org/TR/SVG/text.html#WritingModeProperty"],syntax:"lr-tb | rl-tb | tb-rl | lr | rl | tb"},top:{comment:"missed; not sure we should add it, but no others except `shape` is using it so it's ok for now; https://drafts.fxtf.org/css-masking-1/#funcdef-clip-rect",syntax:"<length> | auto"},"track-group":{comment:"used by old grid-columns and grid-rows syntax v0",syntax:"'(' [ <string>* <track-minmax> <string>* ]+ ')' [ '[' <positive-integer> ']' ]? | <track-minmax>"},"track-list-v0":{comment:"used by old grid-columns and grid-rows syntax v0",syntax:"[ <string>* <track-group> <string>* ]+ | none"},"track-minmax":{comment:"used by old grid-columns and grid-rows syntax v0",syntax:"minmax( <track-breadth> , <track-breadth> ) | auto | <track-breadth> | fit-content"},x:{comment:"missed; not sure we should add it, but no others except `cursor` is using it so it's ok for now; https://drafts.csswg.org/css-ui-3/#cursor",syntax:"<number>"},y:{comment:"missed; not sure we should add it, but no others except `cursor` is using so it's ok for now; https://drafts.csswg.org/css-ui-3/#cursor",syntax:"<number>"},declaration:{comment:"missed, restored by https://drafts.csswg.org/css-syntax",syntax:"<ident-token> : <declaration-value>? [ '!' important ]?"},"declaration-list":{comment:"missed, restored by https://drafts.csswg.org/css-syntax",syntax:"[ <declaration>? ';' ]* <declaration>?"},url:{comment:"https://drafts.csswg.org/css-values-4/#urls",syntax:"url( <string> <url-modifier>* ) | <url-token>"},"url-modifier":{comment:"https://drafts.csswg.org/css-values-4/#typedef-url-modifier",syntax:"<ident> | <function-token> <any-value> )"},"number-zero-one":{syntax:"<number [0,1]>"},"number-one-or-greater":{syntax:"<number [1,\u221E]>"},"positive-integer":{syntax:"<integer [0,\u221E]>"},"-non-standard-display":{syntax:"-ms-inline-flexbox | -ms-grid | -ms-inline-grid | -webkit-flex | -webkit-inline-flex | -webkit-box | -webkit-inline-box | -moz-inline-stack | -moz-box | -moz-inline-box"}}}});var CS=ze((b4,TS)=>{var pO=_S(),fO=vS(),mO=bS(),Ey=xS(),wS=/^\s*\|\s*/;function gO(s){let o=Object.create(null);for(let p in s){let d=s[p],f=null;if(d.descriptors){f=Object.create(null);for(let a in d.descriptors)f[a]=d.descriptors[a].syntax}o[p.substr(1)]={prelude:d.syntax.trim().match(/^@\S+\s+([^;\{]*)/)[1].trim()||null,descriptors:f}}return o}function Ay(s,o){let p={};for(let d in s)p[d]=s[d].syntax||s[d];for(let d in o)d in s?o[d].syntax?p[d]=wS.test(o[d].syntax)?p[d]+" "+o[d].syntax.trim():o[d].syntax:delete p[d]:o[d].syntax&&(p[d]=o[d].syntax.replace(wS,""));return p}function SS(s){let o={};for(let p in s)o[p]=s[p].syntax;return o}function yO(s,o){let p={};for(let d in s){let f=o[d]&&o[d].descriptors||null;p[d]={prelude:d in o&&"prelude"in o[d]?o[d].prelude:s[d].prelude||null,descriptors:s[d].descriptors?Ay(s[d].descriptors,f||{}):f&&SS(f)}}for(let d in o)hasOwnProperty.call(s,d)||(p[d]={prelude:o[d].prelude||null,descriptors:o[d].descriptors&&SS(o[d].descriptors)});return p}TS.exports={types:Ay(mO,Ey.syntaxes),atrules:yO(gO(pO),Ey.atrules),properties:Ay(fO,Ey.properties)}});var zS=ze((x4,MS)=>{var ES=vt().cmpChar,AS=vt().isDigit,gh=vt().TYPE,kS=gh.WhiteSpace,PS=gh.Comment,My=gh.Ident,Vo=gh.Number,_O=gh.Dimension,no=43,Pa=45,Sf=110,_c=!0,vO=!1;function Tf(s,o){var p=this.scanner.tokenStart+s,d=this.scanner.source.charCodeAt(p);for((d===no||d===Pa)&&(o&&this.error("Number sign is not allowed"),p++);p<this.scanner.tokenEnd;p++)AS(this.scanner.source.charCodeAt(p))||this.error("Integer is expected",p)}function qu(s){return Tf.call(this,0,s)}function kl(s,o){if(!ES(this.scanner.source,this.scanner.tokenStart+s,o)){var p="";switch(o){case Sf:p="N is expected";break;case Pa:p="HyphenMinus is expected";break}this.error(p,this.scanner.tokenStart+s)}}function zy(){for(var s=0,o=0,p=this.scanner.tokenType;p===kS||p===PS;)p=this.scanner.lookupType(++s);if(p!==Vo)if(this.scanner.isDelim(no,s)||this.scanner.isDelim(Pa,s)){o=this.scanner.isDelim(no,s)?no:Pa;do p=this.scanner.lookupType(++s);while(p===kS||p===PS);p!==Vo&&(this.scanner.skip(s),qu.call(this,_c))}else return null;return s>0&&this.scanner.skip(s),o===0&&(p=this.scanner.source.charCodeAt(this.scanner.tokenStart),p!==no&&p!==Pa&&this.error("Number sign is expected")),qu.call(this,o!==0),o===Pa?"-"+this.consume(Vo):this.consume(Vo)}MS.exports={name:"AnPlusB",structure:{a:[String,null],b:[String,null]},parse:function(){var s=this.scanner.tokenStart,o=null,p=null;if(this.scanner.tokenType===Vo)qu.call(this,vO),p=this.consume(Vo);else if(this.scanner.tokenType===My&&ES(this.scanner.source,this.scanner.tokenStart,Pa))switch(o="-1",kl.call(this,1,Sf),this.scanner.getTokenLength()){case 2:this.scanner.next(),p=zy.call(this);break;case 3:kl.call(this,2,Pa),this.scanner.next(),this.scanner.skipSC(),qu.call(this,_c),p="-"+this.consume(Vo);break;default:kl.call(this,2,Pa),Tf.call(this,3,_c),this.scanner.next(),p=this.scanner.substrToCursor(s+2)}else if(this.scanner.tokenType===My||this.scanner.isDelim(no)&&this.scanner.lookupType(1)===My){var d=0;switch(o="1",this.scanner.isDelim(no)&&(d=1,this.scanner.next()),kl.call(this,0,Sf),this.scanner.getTokenLength()){case 1:this.scanner.next(),p=zy.call(this);break;case 2:kl.call(this,1,Pa),this.scanner.next(),this.scanner.skipSC(),qu.call(this,_c),p="-"+this.consume(Vo);break;default:kl.call(this,1,Pa),Tf.call(this,2,_c),this.scanner.next(),p=this.scanner.substrToCursor(s+d+1)}}else if(this.scanner.tokenType===_O){for(var f=this.scanner.source.charCodeAt(this.scanner.tokenStart),d=f===no||f===Pa,a=this.scanner.tokenStart+d;a<this.scanner.tokenEnd&&AS(this.scanner.source.charCodeAt(a));a++);a===this.scanner.tokenStart+d&&this.error("Integer is expected",this.scanner.tokenStart+d),kl.call(this,a-this.scanner.tokenStart,Sf),o=this.scanner.source.substring(s,a),a+1===this.scanner.tokenEnd?(this.scanner.next(),p=zy.call(this)):(kl.call(this,a-this.scanner.tokenStart+1,Pa),a+2===this.scanner.tokenEnd?(this.scanner.next(),this.scanner.skipSC(),qu.call(this,_c),p="-"+this.consume(Vo)):(Tf.call(this,a-this.scanner.tokenStart+2,_c),this.scanner.next(),p=this.scanner.substrToCursor(a+1)))}else this.error();return o!==null&&o.charCodeAt(0)===no&&(o=o.substr(1)),p!==null&&p.charCodeAt(0)===no&&(p=p.substr(1)),{type:"AnPlusB",loc:this.getLocation(s,this.scanner.tokenStart),a:o,b:p}},generate:function(s){var o=s.a!==null&&s.a!==void 0,p=s.b!==null&&s.b!==void 0;o?(this.chunk(s.a==="+1"?"+n":s.a==="1"?"n":s.a==="-1"?"-n":s.a+"n"),p&&(p=String(s.b),p.charAt(0)==="-"||p.charAt(0)==="+"?(this.chunk(p.charAt(0)),this.chunk(p.substr(1))):(this.chunk("+"),this.chunk(p)))):this.chunk(String(s.b))}}});var Pl=ze((w4,DS)=>{var bO=vt(),Cf=bO.TYPE,xO=Cf.WhiteSpace,Iy=Cf.Semicolon,LS=Cf.LeftCurlyBracket,wO=Cf.Delim,SO=33;function TO(){return this.scanner.tokenIndex>0&&this.scanner.lookupType(-1)===xO?this.scanner.tokenIndex>1?this.scanner.getTokenStart(this.scanner.tokenIndex-1):this.scanner.firstCharOffset:this.scanner.tokenStart}function IS(){return 0}function CO(s){return s===LS?1:0}function kO(s){return s===LS||s===Iy?1:0}function PO(s,o,p){return s===wO&&o.charCodeAt(p)===SO||s===Iy?1:0}function EO(s){return s===Iy?2:0}DS.exports={name:"Raw",structure:{value:String},parse:function(s,o,p){var d=this.scanner.getTokenStart(s),f;return this.scanner.skip(this.scanner.getRawLength(s,o||IS)),p&&this.scanner.tokenStart>d?f=TO.call(this):f=this.scanner.tokenStart,{type:"Raw",loc:this.getLocation(d,f),value:this.scanner.source.substring(d,f)}},generate:function(s){this.chunk(s.value)},mode:{default:IS,leftCurlyBracket:CO,leftCurlyBracketOrSemicolon:kO,exclamationMarkOrSemicolon:PO,semicolonIncluded:EO}}});var jS=ze((S4,FS)=>{var kf=vt().TYPE,AO=Pl().mode,BS=kf.AtKeyword,OS=kf.Semicolon,Ly=kf.LeftCurlyBracket,MO=kf.RightCurlyBracket;function RS(s){return this.Raw(s,AO.leftCurlyBracketOrSemicolon,!0)}function zO(){for(var s=1,o;o=this.scanner.lookupType(s);s++){if(o===MO)return!0;if(o===Ly||o===BS)return!1}return!1}FS.exports={name:"Atrule",structure:{name:String,prelude:["AtrulePrelude","Raw",null],block:["Block",null]},parse:function(){var s=this.scanner.tokenStart,o,p,d=null,f=null;switch(this.eat(BS),o=this.scanner.substrToCursor(s+1),p=o.toLowerCase(),this.scanner.skipSC(),this.scanner.eof===!1&&this.scanner.tokenType!==Ly&&this.scanner.tokenType!==OS&&(this.parseAtrulePrelude?(d=this.parseWithFallback(this.AtrulePrelude.bind(this,o),RS),d.type==="AtrulePrelude"&&d.children.head===null&&(d=null)):d=RS.call(this,this.scanner.tokenIndex),this.scanner.skipSC()),this.scanner.tokenType){case OS:this.scanner.next();break;case Ly:this.atrule.hasOwnProperty(p)&&typeof this.atrule[p].block=="function"?f=this.atrule[p].block.call(this):f=this.Block(zO.call(this));break}return{type:"Atrule",loc:this.getLocation(s,this.scanner.tokenStart),name:o,prelude:d,block:f}},generate:function(s){this.chunk("@"),this.chunk(s.name),s.prelude!==null&&(this.chunk(" "),this.node(s.prelude)),s.block?this.node(s.block):this.chunk(";")},walkContext:"atrule"}});var VS=ze((T4,qS)=>{var NS=vt().TYPE,IO=NS.Semicolon,LO=NS.LeftCurlyBracket;qS.exports={name:"AtrulePrelude",structure:{children:[[]]},parse:function(s){var o=null;return s!==null&&(s=s.toLowerCase()),this.scanner.skipSC(),this.atrule.hasOwnProperty(s)&&typeof this.atrule[s].prelude=="function"?o=this.atrule[s].prelude.call(this):o=this.readSequence(this.scope.AtrulePrelude),this.scanner.skipSC(),this.scanner.eof!==!0&&this.scanner.tokenType!==LO&&this.scanner.tokenType!==IO&&this.error("Semicolon or block is expected"),o===null&&(o=this.createList()),{type:"AtrulePrelude",loc:this.getLocationFromList(o),children:o}},generate:function(s){this.children(s)},walkContext:"atrulePrelude"}});var ZS=ze((C4,US)=>{var _h=vt().TYPE,yh=_h.Ident,DO=_h.String,OO=_h.Colon,RO=_h.LeftSquareBracket,WS=_h.RightSquareBracket,BO=36,GS=42,Pf=61,FO=94,Dy=124,jO=126;function NO(){this.scanner.eof&&this.error("Unexpected end of input");var s=this.scanner.tokenStart,o=!1,p=!0;return this.scanner.isDelim(GS)?(o=!0,p=!1,this.scanner.next()):this.scanner.isDelim(Dy)||this.eat(yh),this.scanner.isDelim(Dy)?this.scanner.source.charCodeAt(this.scanner.tokenStart+1)!==Pf?(this.scanner.next(),this.eat(yh)):o&&this.error("Identifier is expected",this.scanner.tokenEnd):o&&this.error("Vertical line is expected"),p&&this.scanner.tokenType===OO&&(this.scanner.next(),this.eat(yh)),{type:"Identifier",loc:this.getLocation(s,this.scanner.tokenStart),name:this.scanner.substrToCursor(s)}}function qO(){var s=this.scanner.tokenStart,o=this.scanner.source.charCodeAt(s);return o!==Pf&&o!==jO&&o!==FO&&o!==BO&&o!==GS&&o!==Dy&&this.error("Attribute selector (=, ~=, ^=, $=, *=, |=) is expected"),this.scanner.next(),o!==Pf&&(this.scanner.isDelim(Pf)||this.error("Equal sign is expected"),this.scanner.next()),this.scanner.substrToCursor(s)}US.exports={name:"AttributeSelector",structure:{name:"Identifier",matcher:[String,null],value:["String","Identifier",null],flags:[String,null]},parse:function(){var s=this.scanner.tokenStart,o,p=null,d=null,f=null;return this.eat(RO),this.scanner.skipSC(),o=NO.call(this),this.scanner.skipSC(),this.scanner.tokenType!==WS&&(this.scanner.tokenType!==yh&&(p=qO.call(this),this.scanner.skipSC(),d=this.scanner.tokenType===DO?this.String():this.Identifier(),this.scanner.skipSC()),this.scanner.tokenType===yh&&(f=this.scanner.getTokenValue(),this.scanner.next(),this.scanner.skipSC())),this.eat(WS),{type:"AttributeSelector",loc:this.getLocation(s,this.scanner.tokenStart),name:o,matcher:p,value:d,flags:f}},generate:function(s){var o=" ";this.chunk("["),this.node(s.name),s.matcher!==null&&(this.chunk(s.matcher),s.value!==null&&(this.node(s.value),s.value.type==="String"&&(o=""))),s.flags!==null&&(this.chunk(o),this.chunk(s.flags)),this.chunk("]")}}});var JS=ze((k4,KS)=>{var Vu=vt().TYPE,VO=Pl().mode,WO=Vu.WhiteSpace,GO=Vu.Comment,HS=Vu.Semicolon,UO=Vu.AtKeyword,ZO=Vu.LeftCurlyBracket,$S=Vu.RightCurlyBracket;function XS(s){return this.Raw(s,null,!0)}function HO(){return this.parseWithFallback(this.Rule,XS)}function YS(s){return this.Raw(s,VO.semicolonIncluded,!0)}function $O(){if(this.scanner.tokenType===HS)return YS.call(this,this.scanner.tokenIndex);var s=this.parseWithFallback(this.Declaration,YS);return this.scanner.tokenType===HS&&this.scanner.next(),s}KS.exports={name:"Block",structure:{children:[["Atrule","Rule","Declaration"]]},parse:function(s){var o=s?$O:HO,p=this.scanner.tokenStart,d=this.createList();this.eat(ZO);e:for(;!this.scanner.eof;)switch(this.scanner.tokenType){case $S:break e;case WO:case GO:this.scanner.next();break;case UO:d.push(this.parseWithFallback(this.Atrule,XS));break;default:d.push(o.call(this))}return this.scanner.eof||this.eat($S),{type:"Block",loc:this.getLocation(p,this.scanner.tokenStart),children:d}},generate:function(s){this.chunk("{"),this.children(s,function(o){o.type==="Declaration"&&this.chunk(";")}),this.chunk("}")},walkContext:"block"}});var t2=ze((P4,e2)=>{var QS=vt().TYPE,YO=QS.LeftSquareBracket,XO=QS.RightSquareBracket;e2.exports={name:"Brackets",structure:{children:[[]]},parse:function(s,o){var p=this.scanner.tokenStart,d=null;return this.eat(YO),d=s.call(this,o),this.scanner.eof||this.eat(XO),{type:"Brackets",loc:this.getLocation(p,this.scanner.tokenStart),children:d}},generate:function(s){this.chunk("["),this.children(s),this.chunk("]")}}});var r2=ze((E4,i2)=>{var KO=vt().TYPE.CDC;i2.exports={name:"CDC",structure:[],parse:function(){var s=this.scanner.tokenStart;return this.eat(KO),{type:"CDC",loc:this.getLocation(s,this.scanner.tokenStart)}},generate:function(){this.chunk("-->")}}});var a2=ze((A4,n2)=>{var JO=vt().TYPE.CDO;n2.exports={name:"CDO",structure:[],parse:function(){var s=this.scanner.tokenStart;return this.eat(JO),{type:"CDO",loc:this.getLocation(s,this.scanner.tokenStart)}},generate:function(){this.chunk("<!--")}}});var o2=ze((M4,s2)=>{var QO=vt().TYPE,eR=QO.Ident,tR=46;s2.exports={name:"ClassSelector",structure:{name:String},parse:function(){return this.scanner.isDelim(tR)||this.error("Full stop is expected"),this.scanner.next(),{type:"ClassSelector",loc:this.getLocation(this.scanner.tokenStart-1,this.scanner.tokenEnd),name:this.consume(eR)}},generate:function(s){this.chunk("."),this.chunk(s.name)}}});var u2=ze((z4,c2)=>{var iR=vt().TYPE,rR=iR.Ident,nR=43,l2=47,aR=62,sR=126;c2.exports={name:"Combinator",structure:{name:String},parse:function(){var s=this.scanner.tokenStart,o=this.scanner.source.charCodeAt(this.scanner.tokenStart);switch(o){case aR:case nR:case sR:this.scanner.next();break;case l2:this.scanner.next(),(this.scanner.tokenType!==rR||this.scanner.lookupValue(0,"deep")===!1)&&this.error("Identifier `deep` is expected"),this.scanner.next(),this.scanner.isDelim(l2)||this.error("Solidus is expected"),this.scanner.next();break;default:this.error("Combinator is expected")}return{type:"Combinator",loc:this.getLocation(s,this.scanner.tokenStart),name:this.scanner.substrToCursor(s)}},generate:function(s){this.chunk(s.name)}}});var h2=ze((I4,d2)=>{var oR=vt().TYPE,lR=oR.Comment,cR=42,uR=47;d2.exports={name:"Comment",structure:{value:String},parse:function(){var s=this.scanner.tokenStart,o=this.scanner.tokenEnd;return this.eat(lR),o-s+2>=2&&this.scanner.source.charCodeAt(o-2)===cR&&this.scanner.source.charCodeAt(o-1)===uR&&(o-=2),{type:"Comment",loc:this.getLocation(s,this.scanner.tokenStart),value:this.scanner.source.substring(s+2,o)}},generate:function(s){this.chunk("/*"),this.chunk(s.value),this.chunk("*/")}}});var x2=ze((L4,b2)=>{var dR=Kp().isCustomProperty,Wu=vt().TYPE,m2=Pl().mode,g2=Wu.Ident,p2=Wu.Hash,hR=Wu.Colon,y2=Wu.Semicolon,_2=Wu.Delim,pR=Wu.WhiteSpace,v2=33,fR=35,mR=36,gR=38,yR=42,_R=43,f2=47;function vR(s){return this.Raw(s,m2.exclamationMarkOrSemicolon,!0)}function bR(s){return this.Raw(s,m2.exclamationMarkOrSemicolon,!1)}function xR(){var s=this.scanner.tokenIndex,o=this.Value();return o.type!=="Raw"&&this.scanner.eof===!1&&this.scanner.tokenType!==y2&&this.scanner.isDelim(v2)===!1&&this.scanner.isBalanceEdge(s)===!1&&this.error(),o}b2.exports={name:"Declaration",structure:{important:[Boolean,String],property:String,value:["Value","Raw"]},parse:function(){var s=this.scanner.tokenStart,o=this.scanner.tokenIndex,p=wR.call(this),d=dR(p),f=d?this.parseCustomProperty:this.parseValue,a=d?bR:vR,T=!1,M;this.scanner.skipSC(),this.eat(hR);let R=this.scanner.tokenIndex;if(d||this.scanner.skipSC(),f?M=this.parseWithFallback(xR,a):M=a.call(this,this.scanner.tokenIndex),d&&M.type==="Value"&&M.children.isEmpty()){for(let V=R-this.scanner.tokenIndex;V<=0;V++)if(this.scanner.lookupType(V)===pR){M.children.appendData({type:"WhiteSpace",loc:null,value:" "});break}}return this.scanner.isDelim(v2)&&(T=SR.call(this),this.scanner.skipSC()),this.scanner.eof===!1&&this.scanner.tokenType!==y2&&this.scanner.isBalanceEdge(o)===!1&&this.error(),{type:"Declaration",loc:this.getLocation(s,this.scanner.tokenStart),important:T,property:p,value:M}},generate:function(s){this.chunk(s.property),this.chunk(":"),this.node(s.value),s.important&&this.chunk(s.important===!0?"!important":"!"+s.important)},walkContext:"declaration"};function wR(){var s=this.scanner.tokenStart,o=0;if(this.scanner.tokenType===_2)switch(this.scanner.source.charCodeAt(this.scanner.tokenStart)){case yR:case mR:case _R:case fR:case gR:this.scanner.next();break;case f2:this.scanner.next(),this.scanner.isDelim(f2)&&this.scanner.next();break}return o&&this.scanner.skip(o),this.scanner.tokenType===p2?this.eat(p2):this.eat(g2),this.scanner.substrToCursor(s)}function SR(){this.eat(_2),this.scanner.skipSC();var s=this.consume(g2);return s==="important"?!0:s}});var S2=ze((D4,w2)=>{var Oy=vt().TYPE,TR=Pl().mode,CR=Oy.WhiteSpace,kR=Oy.Comment,PR=Oy.Semicolon;function ER(s){return this.Raw(s,TR.semicolonIncluded,!0)}w2.exports={name:"DeclarationList",structure:{children:[["Declaration"]]},parse:function(){for(var s=this.createList();!this.scanner.eof;)switch(this.scanner.tokenType){case CR:case kR:case PR:this.scanner.next();break;default:s.push(this.parseWithFallback(this.Declaration,ER))}return{type:"DeclarationList",loc:this.getLocationFromList(s),children:s}},generate:function(s){this.children(s,function(o){o.type==="Declaration"&&this.chunk(";")})}}});var C2=ze((O4,T2)=>{var AR=Mu().consumeNumber,MR=vt().TYPE,zR=MR.Dimension;T2.exports={name:"Dimension",structure:{value:String,unit:String},parse:function(){var s=this.scanner.tokenStart,o=AR(this.scanner.source,s);return this.eat(zR),{type:"Dimension",loc:this.getLocation(s,this.scanner.tokenStart),value:this.scanner.source.substring(s,o),unit:this.scanner.source.substring(o,this.scanner.tokenStart)}},generate:function(s){this.chunk(s.value),this.chunk(s.unit)}}});var P2=ze((R4,k2)=>{var IR=vt().TYPE,LR=IR.RightParenthesis;k2.exports={name:"Function",structure:{name:String,children:[[]]},parse:function(s,o){var p=this.scanner.tokenStart,d=this.consumeFunctionName(),f=d.toLowerCase(),a;return a=o.hasOwnProperty(f)?o[f].call(this,o):s.call(this,o),this.scanner.eof||this.eat(LR),{type:"Function",loc:this.getLocation(p,this.scanner.tokenStart),name:d,children:a}},generate:function(s){this.chunk(s.name),this.chunk("("),this.children(s),this.chunk(")")},walkContext:"function"}});var A2=ze((B4,E2)=>{var DR=vt().TYPE,OR=DR.Hash;E2.exports={name:"Hash",structure:{value:String},parse:function(){var s=this.scanner.tokenStart;return this.eat(OR),{type:"Hash",loc:this.getLocation(s,this.scanner.tokenStart),value:this.scanner.substrToCursor(s+1)}},generate:function(s){this.chunk("#"),this.chunk(s.value)}}});var z2=ze((F4,M2)=>{var RR=vt().TYPE,BR=RR.Ident;M2.exports={name:"Identifier",structure:{name:String},parse:function(){return{type:"Identifier",loc:this.getLocation(this.scanner.tokenStart,this.scanner.tokenEnd),name:this.consume(BR)}},generate:function(s){this.chunk(s.name)}}});var L2=ze((j4,I2)=>{var FR=vt().TYPE,jR=FR.Hash;I2.exports={name:"IdSelector",structure:{name:String},parse:function(){var s=this.scanner.tokenStart;return this.eat(jR),{type:"IdSelector",loc:this.getLocation(s,this.scanner.tokenStart),name:this.scanner.substrToCursor(s+1)}},generate:function(s){this.chunk("#"),this.chunk(s.name)}}});var B2=ze((N4,R2)=>{var vc=vt().TYPE,D2=vc.Ident,NR=vc.Number,qR=vc.Dimension,VR=vc.LeftParenthesis,O2=vc.RightParenthesis,WR=vc.Colon,GR=vc.Delim;R2.exports={name:"MediaFeature",structure:{name:String,value:["Identifier","Number","Dimension","Ratio",null]},parse:function(){var s=this.scanner.tokenStart,o,p=null;if(this.eat(VR),this.scanner.skipSC(),o=this.consume(D2),this.scanner.skipSC(),this.scanner.tokenType!==O2){switch(this.eat(WR),this.scanner.skipSC(),this.scanner.tokenType){case NR:this.lookupNonWSType(1)===GR?p=this.Ratio():p=this.Number();break;case qR:p=this.Dimension();break;case D2:p=this.Identifier();break;default:this.error("Number, dimension, ratio or identifier is expected")}this.scanner.skipSC()}return this.eat(O2),{type:"MediaFeature",loc:this.getLocation(s,this.scanner.tokenStart),name:o,value:p}},generate:function(s){this.chunk("("),this.chunk(s.name),s.value!==null&&(this.chunk(":"),this.node(s.value)),this.chunk(")")}}});var j2=ze((q4,F2)=>{var Ef=vt().TYPE,UR=Ef.WhiteSpace,ZR=Ef.Comment,HR=Ef.Ident,$R=Ef.LeftParenthesis;F2.exports={name:"MediaQuery",structure:{children:[["Identifier","MediaFeature","WhiteSpace"]]},parse:function(){this.scanner.skipSC();var s=this.createList(),o=null,p=null;e:for(;!this.scanner.eof;){switch(this.scanner.tokenType){case ZR:this.scanner.next();continue;case UR:p=this.WhiteSpace();continue;case HR:o=this.Identifier();break;case $R:o=this.MediaFeature();break;default:break e}p!==null&&(s.push(p),p=null),s.push(o)}return o===null&&this.error("Identifier or parenthesis is expected"),{type:"MediaQuery",loc:this.getLocationFromList(s),children:s}},generate:function(s){this.children(s)}}});var q2=ze((V4,N2)=>{var YR=vt().TYPE.Comma;N2.exports={name:"MediaQueryList",structure:{children:[["MediaQuery"]]},parse:function(s){var o=this.createList();for(this.scanner.skipSC();!this.scanner.eof&&(o.push(this.MediaQuery(s)),this.scanner.tokenType===YR);)this.scanner.next();return{type:"MediaQueryList",loc:this.getLocationFromList(o),children:o}},generate:function(s){this.children(s,function(){this.chunk(",")})}}});var W2=ze((W4,V2)=>{V2.exports={name:"Nth",structure:{nth:["AnPlusB","Identifier"],selector:["SelectorList",null]},parse:function(s){this.scanner.skipSC();var o=this.scanner.tokenStart,p=o,d=null,f;return this.scanner.lookupValue(0,"odd")||this.scanner.lookupValue(0,"even")?f=this.Identifier():f=this.AnPlusB(),this.scanner.skipSC(),s&&this.scanner.lookupValue(0,"of")?(this.scanner.next(),d=this.SelectorList(),this.needPositions&&(p=this.getLastListNode(d.children).loc.end.offset)):this.needPositions&&(p=f.loc.end.offset),{type:"Nth",loc:this.getLocation(o,p),nth:f,selector:d}},generate:function(s){this.node(s.nth),s.selector!==null&&(this.chunk(" of "),this.node(s.selector))}}});var U2=ze((G4,G2)=>{var XR=vt().TYPE.Number;G2.exports={name:"Number",structure:{value:String},parse:function(){return{type:"Number",loc:this.getLocation(this.scanner.tokenStart,this.scanner.tokenEnd),value:this.consume(XR)}},generate:function(s){this.chunk(s.value)}}});var H2=ze((U4,Z2)=>{Z2.exports={name:"Operator",structure:{value:String},parse:function(){var s=this.scanner.tokenStart;return this.scanner.next(),{type:"Operator",loc:this.getLocation(s,this.scanner.tokenStart),value:this.scanner.substrToCursor(s)}},generate:function(s){this.chunk(s.value)}}});var X2=ze((Z4,Y2)=>{var $2=vt().TYPE,KR=$2.LeftParenthesis,JR=$2.RightParenthesis;Y2.exports={name:"Parentheses",structure:{children:[[]]},parse:function(s,o){var p=this.scanner.tokenStart,d=null;return this.eat(KR),d=s.call(this,o),this.scanner.eof||this.eat(JR),{type:"Parentheses",loc:this.getLocation(p,this.scanner.tokenStart),children:d}},generate:function(s){this.chunk("("),this.children(s),this.chunk(")")}}});var J2=ze((H4,K2)=>{var QR=Mu().consumeNumber,eB=vt().TYPE,tB=eB.Percentage;K2.exports={name:"Percentage",structure:{value:String},parse:function(){var s=this.scanner.tokenStart,o=QR(this.scanner.source,s);return this.eat(tB),{type:"Percentage",loc:this.getLocation(s,this.scanner.tokenStart),value:this.scanner.source.substring(s,o)}},generate:function(s){this.chunk(s.value),this.chunk("%")}}});var eT=ze(($4,Q2)=>{var Af=vt().TYPE,iB=Af.Ident,rB=Af.Function,nB=Af.Colon,aB=Af.RightParenthesis;Q2.exports={name:"PseudoClassSelector",structure:{name:String,children:[["Raw"],null]},parse:function(){var s=this.scanner.tokenStart,o=null,p,d;return this.eat(nB),this.scanner.tokenType===rB?(p=this.consumeFunctionName(),d=p.toLowerCase(),this.pseudo.hasOwnProperty(d)?(this.scanner.skipSC(),o=this.pseudo[d].call(this),this.scanner.skipSC()):(o=this.createList(),o.push(this.Raw(this.scanner.tokenIndex,null,!1))),this.eat(aB)):p=this.consume(iB),{type:"PseudoClassSelector",loc:this.getLocation(s,this.scanner.tokenStart),name:p,children:o}},generate:function(s){this.chunk(":"),this.chunk(s.name),s.children!==null&&(this.chunk("("),this.children(s),this.chunk(")"))},walkContext:"function"}});var rT=ze((Y4,iT)=>{var Mf=vt().TYPE,sB=Mf.Ident,oB=Mf.Function,tT=Mf.Colon,lB=Mf.RightParenthesis;iT.exports={name:"PseudoElementSelector",structure:{name:String,children:[["Raw"],null]},parse:function(){var s=this.scanner.tokenStart,o=null,p,d;return this.eat(tT),this.eat(tT),this.scanner.tokenType===oB?(p=this.consumeFunctionName(),d=p.toLowerCase(),this.pseudo.hasOwnProperty(d)?(this.scanner.skipSC(),o=this.pseudo[d].call(this),this.scanner.skipSC()):(o=this.createList(),o.push(this.Raw(this.scanner.tokenIndex,null,!1))),this.eat(lB)):p=this.consume(sB),{type:"PseudoElementSelector",loc:this.getLocation(s,this.scanner.tokenStart),name:p,children:o}},generate:function(s){this.chunk("::"),this.chunk(s.name),s.children!==null&&(this.chunk("("),this.children(s),this.chunk(")"))},walkContext:"function"}});var oT=ze((X4,sT)=>{var cB=vt().isDigit,aT=vt().TYPE,uB=aT.Number,dB=aT.Delim,hB=47,pB=46;function nT(){this.scanner.skipWS();for(var s=this.consume(uB),o=0;o<s.length;o++){var p=s.charCodeAt(o);!cB(p)&&p!==pB&&this.error("Unsigned number is expected",this.scanner.tokenStart-s.length+o)}return Number(s)===0&&this.error("Zero number is not allowed",this.scanner.tokenStart-s.length),s}sT.exports={name:"Ratio",structure:{left:String,right:String},parse:function(){var s=this.scanner.tokenStart,o=nT.call(this),p;return this.scanner.skipWS(),this.scanner.isDelim(hB)||this.error("Solidus is expected"),this.eat(dB),p=nT.call(this),{type:"Ratio",loc:this.getLocation(s,this.scanner.tokenStart),left:o,right:p}},generate:function(s){this.chunk(s.left),this.chunk("/"),this.chunk(s.right)}}});var uT=ze((K4,cT)=>{var fB=vt().TYPE,mB=Pl().mode,gB=fB.LeftCurlyBracket;function lT(s){return this.Raw(s,mB.leftCurlyBracket,!0)}function yB(){var s=this.SelectorList();return s.type!=="Raw"&&this.scanner.eof===!1&&this.scanner.tokenType!==gB&&this.error(),s}cT.exports={name:"Rule",structure:{prelude:["SelectorList","Raw"],block:["Block"]},parse:function(){var s=this.scanner.tokenIndex,o=this.scanner.tokenStart,p,d;return this.parseRulePrelude?p=this.parseWithFallback(yB,lT):p=lT.call(this,s),d=this.Block(!0),{type:"Rule",loc:this.getLocation(o,this.scanner.tokenStart),prelude:p,block:d}},generate:function(s){this.node(s.prelude),this.node(s.block)},walkContext:"rule"}});var hT=ze((J4,dT)=>{dT.exports={name:"Selector",structure:{children:[["TypeSelector","IdSelector","ClassSelector","AttributeSelector","PseudoClassSelector","PseudoElementSelector","Combinator","WhiteSpace"]]},parse:function(){var s=this.readSequence(this.scope.Selector);return this.getFirstListNode(s)===null&&this.error("Selector is expected"),{type:"Selector",loc:this.getLocationFromList(s),children:s}},generate:function(s){this.children(s)}}});var fT=ze((Q4,pT)=>{var _B=vt().TYPE,vB=_B.Comma;pT.exports={name:"SelectorList",structure:{children:[["Selector","Raw"]]},parse:function(){for(var s=this.createList();!this.scanner.eof;){if(s.push(this.Selector()),this.scanner.tokenType===vB){this.scanner.next();continue}break}return{type:"SelectorList",loc:this.getLocationFromList(s),children:s}},generate:function(s){this.children(s,function(){this.chunk(",")})},walkContext:"selector"}});var gT=ze((eN,mT)=>{var bB=vt().TYPE.String;mT.exports={name:"String",structure:{value:String},parse:function(){return{type:"String",loc:this.getLocation(this.scanner.tokenStart,this.scanner.tokenEnd),value:this.consume(bB)}},generate:function(s){this.chunk(s.value)}}});var vT=ze((tN,_T)=>{var vh=vt().TYPE,xB=vh.WhiteSpace,wB=vh.Comment,SB=vh.AtKeyword,TB=vh.CDO,CB=vh.CDC,kB=33;function yT(s){return this.Raw(s,null,!1)}_T.exports={name:"StyleSheet",structure:{children:[["Comment","CDO","CDC","Atrule","Rule","Raw"]]},parse:function(){for(var s=this.scanner.tokenStart,o=this.createList(),p;!this.scanner.eof;){switch(this.scanner.tokenType){case xB:this.scanner.next();continue;case wB:if(this.scanner.source.charCodeAt(this.scanner.tokenStart+2)!==kB){this.scanner.next();continue}p=this.Comment();break;case TB:p=this.CDO();break;case CB:p=this.CDC();break;case SB:p=this.parseWithFallback(this.Atrule,yT);break;default:p=this.parseWithFallback(this.Rule,yT)}o.push(p)}return{type:"StyleSheet",loc:this.getLocation(s,this.scanner.tokenStart),children:o}},generate:function(s){this.children(s)},walkContext:"stylesheet"}});var wT=ze((iN,xT)=>{var PB=vt().TYPE,EB=PB.Ident,AB=42,bT=124;function Ry(){this.scanner.tokenType!==EB&&this.scanner.isDelim(AB)===!1&&this.error("Identifier or asterisk is expected"),this.scanner.next()}xT.exports={name:"TypeSelector",structure:{name:String},parse:function(){var s=this.scanner.tokenStart;return this.scanner.isDelim(bT)?(this.scanner.next(),Ry.call(this)):(Ry.call(this),this.scanner.isDelim(bT)&&(this.scanner.next(),Ry.call(this))),{type:"TypeSelector",loc:this.getLocation(s,this.scanner.tokenStart),name:this.scanner.substrToCursor(s)}},generate:function(s){this.chunk(s.name)}}});var ET=ze((rN,PT)=>{var MB=vt().isHexDigit,ST=vt().cmpChar,jy=vt().TYPE,zB=vt().NAME,IB=jy.Ident,TT=jy.Number,CT=jy.Dimension,If=43,kT=45,Fy=63,LB=117;function bh(s,o){for(var p=this.scanner.tokenStart+s,d=0;p<this.scanner.tokenEnd;p++){var f=this.scanner.source.charCodeAt(p);if(f===kT&&o&&d!==0)return bh.call(this,s+d+1,!1)===0&&this.error(),-1;MB(f)||this.error(o&&d!==0?"HyphenMinus"+(d<6?" or hex digit":"")+" is expected":d<6?"Hex digit is expected":"Unexpected input",p),++d>6&&this.error("Too many hex digits",p)}return this.scanner.next(),d}function zf(s){for(var o=0;this.scanner.isDelim(Fy);)++o>s&&this.error("Too many question marks"),this.scanner.next()}function By(s){this.scanner.source.charCodeAt(this.scanner.tokenStart)!==s&&this.error(zB[s]+" is expected")}function DB(){var s=0;if(this.scanner.isDelim(If)){if(this.scanner.next(),this.scanner.tokenType===IB){s=bh.call(this,0,!0),s>0&&zf.call(this,6-s);return}if(this.scanner.isDelim(Fy)){this.scanner.next(),zf.call(this,5);return}this.error("Hex digit or question mark is expected");return}if(this.scanner.tokenType===TT){if(By.call(this,If),s=bh.call(this,1,!0),this.scanner.isDelim(Fy)){zf.call(this,6-s);return}if(this.scanner.tokenType===CT||this.scanner.tokenType===TT){By.call(this,kT),bh.call(this,1,!1);return}return}if(this.scanner.tokenType===CT){By.call(this,If),s=bh.call(this,1,!0),s>0&&zf.call(this,6-s);return}this.error()}PT.exports={name:"UnicodeRange",structure:{value:String},parse:function(){var s=this.scanner.tokenStart;return ST(this.scanner.source,s,LB)||this.error("U is expected"),ST(this.scanner.source,s+1,If)||this.error("Plus sign is expected"),this.scanner.next(),DB.call(this),{type:"UnicodeRange",loc:this.getLocation(s,this.scanner.tokenStart),value:this.scanner.substrToCursor(s)}},generate:function(s){this.chunk(s.value)}}});var LT=ze((nN,IT)=>{var AT=vt().isWhiteSpace,OB=vt().cmpStr,Ny=vt().TYPE,MT=Ny.Function,zT=Ny.Url,RB=Ny.RightParenthesis;IT.exports={name:"Url",structure:{value:["String","Raw"]},parse:function(){var s=this.scanner.tokenStart,o;switch(this.scanner.tokenType){case zT:for(var p=s+4,d=this.scanner.tokenEnd-1;p<d&&AT(this.scanner.source.charCodeAt(p));)p++;for(;p<d&&AT(this.scanner.source.charCodeAt(d-1));)d--;o={type:"Raw",loc:this.getLocation(p,d),value:this.scanner.source.substring(p,d)},this.eat(zT);break;case MT:OB(this.scanner.source,this.scanner.tokenStart,this.scanner.tokenEnd,"url(")||this.error("Function name must be `url`"),this.eat(MT),this.scanner.skipSC(),o=this.String(),this.scanner.skipSC(),this.eat(RB);break;default:this.error("Url or Function is expected")}return{type:"Url",loc:this.getLocation(s,this.scanner.tokenStart),value:o}},generate:function(s){this.chunk("url"),this.chunk("("),this.node(s.value),this.chunk(")")}}});var OT=ze((aN,DT)=>{DT.exports={name:"Value",structure:{children:[[]]},parse:function(){var s=this.scanner.tokenStart,o=this.readSequence(this.scope.Value);return{type:"Value",loc:this.getLocation(s,this.scanner.tokenStart),children:o}},generate:function(s){this.children(s)}}});var BT=ze((sN,RT)=>{var BB=vt().TYPE.WhiteSpace,FB=Object.freeze({type:"WhiteSpace",loc:null,value:" "});RT.exports={name:"WhiteSpace",structure:{value:String},parse:function(){return this.eat(BB),FB},generate:function(s){this.chunk(s.value)}}});var Lf=ze((oN,FT)=>{FT.exports={AnPlusB:zS(),Atrule:jS(),AtrulePrelude:VS(),AttributeSelector:ZS(),Block:JS(),Brackets:t2(),CDC:r2(),CDO:a2(),ClassSelector:o2(),Combinator:u2(),Comment:h2(),Declaration:x2(),DeclarationList:S2(),Dimension:C2(),Function:P2(),Hash:A2(),Identifier:z2(),IdSelector:L2(),MediaFeature:B2(),MediaQuery:j2(),MediaQueryList:q2(),Nth:W2(),Number:U2(),Operator:H2(),Parentheses:X2(),Percentage:J2(),PseudoClassSelector:eT(),PseudoElementSelector:rT(),Ratio:oT(),Raw:Pl(),Rule:uT(),Selector:hT(),SelectorList:fT(),String:gT(),StyleSheet:vT(),TypeSelector:wT(),UnicodeRange:ET(),Url:LT(),Value:OT(),WhiteSpace:BT()}});var NT=ze((lN,jT)=>{var qy=CS();jT.exports={generic:!0,types:qy.types,atrules:qy.atrules,properties:qy.properties,node:Lf()}});var Vy=ze((cN,WT)=>{var qT=vt().cmpChar,jB=vt().cmpStr,$a=vt().TYPE,NB=$a.Ident,qB=$a.String,VB=$a.Number,WB=$a.Function,GB=$a.Url,UB=$a.Hash,ZB=$a.Dimension,HB=$a.Percentage,$B=$a.LeftParenthesis,YB=$a.LeftSquareBracket,XB=$a.Comma,KB=$a.Delim,JB=35,QB=42,VT=43,e3=45,t3=47,i3=117;WT.exports=function(o){switch(this.scanner.tokenType){case UB:return this.Hash();case XB:return o.space=null,o.ignoreWSAfter=!0,this.Operator();case $B:return this.Parentheses(this.readSequence,o.recognizer);case YB:return this.Brackets(this.readSequence,o.recognizer);case qB:return this.String();case ZB:return this.Dimension();case HB:return this.Percentage();case VB:return this.Number();case WB:return jB(this.scanner.source,this.scanner.tokenStart,this.scanner.tokenEnd,"url(")?this.Url():this.Function(this.readSequence,o.recognizer);case GB:return this.Url();case NB:return qT(this.scanner.source,this.scanner.tokenStart,i3)&&qT(this.scanner.source,this.scanner.tokenStart+1,VT)?this.UnicodeRange():this.Identifier();case KB:var p=this.scanner.source.charCodeAt(this.scanner.tokenStart);if(p===t3||p===QB||p===VT||p===e3)return this.Operator();p===JB&&this.error("Hex or identifier is expected",this.scanner.tokenStart+1);break}}});var UT=ze((uN,GT)=>{GT.exports={getNode:Vy()}});var YT=ze((dN,$T)=>{var El=vt().TYPE,r3=El.Delim,n3=El.Ident,a3=El.Dimension,s3=El.Percentage,o3=El.Number,l3=El.Hash,ZT=El.Colon,c3=El.LeftSquareBracket,u3=35,d3=42,h3=43,p3=47,HT=46,f3=62,m3=124,g3=126;function y3(s){switch(this.scanner.tokenType){case c3:return this.AttributeSelector();case l3:return this.IdSelector();case ZT:return this.scanner.lookupType(1)===ZT?this.PseudoElementSelector():this.PseudoClassSelector();case n3:return this.TypeSelector();case o3:case s3:return this.Percentage();case a3:this.scanner.source.charCodeAt(this.scanner.tokenStart)===HT&&this.error("Identifier is expected",this.scanner.tokenStart+1);break;case r3:var o=this.scanner.source.charCodeAt(this.scanner.tokenStart);switch(o){case h3:case f3:case g3:return s.space=null,s.ignoreWSAfter=!0,this.Combinator();case p3:return this.Combinator();case HT:return this.ClassSelector();case d3:case m3:return this.TypeSelector();case u3:return this.IdSelector()}break}}$T.exports={getNode:y3}});var KT=ze((hN,XT)=>{XT.exports=function(){return this.createSingleNodeList(this.Raw(this.scanner.tokenIndex,null,!1))}});var eC=ze((pN,QT)=>{var JT=vt().TYPE,_3=Pl().mode,v3=JT.Comma,b3=JT.WhiteSpace;QT.exports=function(){var s=this.createList();if(this.scanner.skipSC(),s.push(this.Identifier()),this.scanner.skipSC(),this.scanner.tokenType===v3){s.push(this.Operator());let o=this.scanner.tokenIndex,p=this.parseCustomProperty?this.Value(null):this.Raw(this.scanner.tokenIndex,_3.exclamationMarkOrSemicolon,!1);if(p.type==="Value"&&p.children.isEmpty()){for(let d=o-this.scanner.tokenIndex;d<=0;d++)if(this.scanner.lookupType(d)===b3){p.children.appendData({type:"WhiteSpace",loc:null,value:" "});break}}s.push(p)}return s}});var iC=ze((fN,tC)=>{tC.exports={getNode:Vy(),expression:KT(),var:eC()}});var nC=ze((mN,rC)=>{rC.exports={AtrulePrelude:UT(),Selector:YT(),Value:iC()}});var sC=ze((gN,aC)=>{aC.exports={parse:{prelude:null,block:function(){return this.Block(!0)}}}});var lC=ze((yN,oC)=>{var xh=vt().TYPE,x3=xh.String,w3=xh.Ident,S3=xh.Url,T3=xh.Function,C3=xh.LeftParenthesis;oC.exports={parse:{prelude:function(){var s=this.createList();switch(this.scanner.skipSC(),this.scanner.tokenType){case x3:s.push(this.String());break;case S3:case T3:s.push(this.Url());break;default:this.error("String or url() is expected")}return(this.lookupNonWSType(0)===w3||this.lookupNonWSType(0)===C3)&&(s.push(this.WhiteSpace()),s.push(this.MediaQueryList())),s},block:null}}});var uC=ze((_N,cC)=>{cC.exports={parse:{prelude:function(){return this.createSingleNodeList(this.MediaQueryList())},block:function(){return this.Block(!1)}}}});var hC=ze((vN,dC)=>{dC.exports={parse:{prelude:function(){return this.createSingleNodeList(this.SelectorList())},block:function(){return this.Block(!0)}}}});var gC=ze((bN,mC)=>{var Gu=vt().TYPE,k3=Gu.WhiteSpace,P3=Gu.Comment,pC=Gu.Ident,E3=Gu.Function,A3=Gu.Colon,M3=Gu.LeftParenthesis;function z3(){return this.createSingleNodeList(this.Raw(this.scanner.tokenIndex,null,!1))}function I3(){return this.scanner.skipSC(),this.scanner.tokenType===pC&&this.lookupNonWSType(1)===A3?this.createSingleNodeList(this.Declaration()):fC.call(this)}function fC(){var s=this.createList(),o=null,p;this.scanner.skipSC();e:for(;!this.scanner.eof;){switch(this.scanner.tokenType){case k3:o=this.WhiteSpace();continue;case P3:this.scanner.next();continue;case E3:p=this.Function(z3,this.scope.AtrulePrelude);break;case pC:p=this.Identifier();break;case M3:p=this.Parentheses(I3,this.scope.AtrulePrelude);break;default:break e}o!==null&&(s.push(o),o=null),s.push(p)}return s}mC.exports={parse:{prelude:function(){var s=fC.call(this);return this.getFirstListNode(s)===null&&this.error("Condition is expected"),s},block:function(){return this.Block(!1)}}}});var _C=ze((xN,yC)=>{yC.exports={"font-face":sC(),import:lC(),media:uC(),page:hC(),supports:gC()}});var bC=ze((wN,vC)=>{vC.exports={parse:function(){return this.createSingleNodeList(this.Identifier())}}});var wC=ze((SN,xC)=>{xC.exports={parse:function(){return this.createSingleNodeList(this.SelectorList())}}});var TC=ze((TN,SC)=>{SC.exports={parse:function(){return this.createSingleNodeList(this.Identifier())}}});var Wy=ze((CN,CC)=>{CC.exports={parse:function(){return this.createSingleNodeList(this.SelectorList())}}});var PC=ze((kN,kC)=>{kC.exports=Wy()});var AC=ze((PN,EC)=>{EC.exports=Wy()});var Gy=ze((EN,MC)=>{var L3=!0;MC.exports={parse:function(){return this.createSingleNodeList(this.Nth(L3))}}});var IC=ze((AN,zC)=>{zC.exports=Gy()});var DC=ze((MN,LC)=>{LC.exports=Gy()});var Uy=ze((zN,OC)=>{var D3=!1;OC.exports={parse:function(){return this.createSingleNodeList(this.Nth(D3))}}});var BC=ze((IN,RC)=>{RC.exports=Uy()});var jC=ze((LN,FC)=>{FC.exports=Uy()});var qC=ze((DN,NC)=>{NC.exports={parse:function(){return this.createSingleNodeList(this.Selector())}}});var WC=ze((ON,VC)=>{VC.exports={dir:bC(),has:wC(),lang:TC(),matches:PC(),not:AC(),"nth-child":IC(),"nth-last-child":DC(),"nth-last-of-type":BC(),"nth-of-type":jC(),slotted:qC()}});var UC=ze((RN,GC)=>{GC.exports={parseContext:{default:"StyleSheet",stylesheet:"StyleSheet",atrule:"Atrule",atrulePrelude:function(s){return this.AtrulePrelude(s.atrule?String(s.atrule):null)},mediaQueryList:"MediaQueryList",mediaQuery:"MediaQuery",rule:"Rule",selectorList:"SelectorList",selector:"Selector",block:function(){return this.Block(!0)},declarationList:"DeclarationList",declaration:"Declaration",value:"Value"},scope:nC(),atrule:_C(),pseudo:WC(),node:Lf()}});var HC=ze((BN,ZC)=>{ZC.exports={node:Lf()}});var $C=ze((FN,O3)=>{O3.exports={name:"css-tree",version:"1.1.3",description:"A tool set for CSS: fast detailed parser (CSS \u2192 AST), walker (AST traversal), generator (AST \u2192 CSS) and lexer (validation and matching) based on specs and browser implementations",author:"Roman Dvornov <rdvornov@gmail.com> (https://github.com/lahmatiy)",license:"MIT",repository:"csstree/csstree",keywords:["css","ast","tokenizer","parser","walker","lexer","generator","utils","syntax","validation"],main:"lib/index.js",unpkg:"dist/csstree.min.js",jsdelivr:"dist/csstree.min.js",scripts:{build:"rollup --config",lint:"eslint data lib scripts test && node scripts/review-syntax-patch --lint && node scripts/update-docs --lint","lint-and-test":"npm run lint && npm test","update:docs":"node scripts/update-docs","review:syntax-patch":"node scripts/review-syntax-patch",test:"mocha --reporter progress",coverage:"nyc npm test",travis:"nyc npm run lint-and-test && npm run coveralls",coveralls:"nyc report --reporter=text-lcov | coveralls",prepublishOnly:"npm run build",hydrogen:"node --trace-hydrogen --trace-phase=Z --trace-deopt --code-comments --hydrogen-track-positions --redirect-code-traces --redirect-code-traces-to=code.asm --trace_hydrogen_file=code.cfg --print-opt-code bin/parse --stat -o /dev/null"},dependencies:{"mdn-data":"2.0.14","source-map":"^0.6.1"},devDependencies:{"@rollup/plugin-commonjs":"^11.0.2","@rollup/plugin-json":"^4.0.2","@rollup/plugin-node-resolve":"^7.1.1",coveralls:"^3.0.9",eslint:"^6.8.0","json-to-ast":"^2.1.0",mocha:"^6.2.3",nyc:"^14.1.1",rollup:"^1.32.1","rollup-plugin-terser":"^5.3.0"},engines:{node:">=8.0.0"},files:["data","dist","lib"]}});var YC=ze((jN,Zy)=>{function R3(){for(var s={},o=0;o<arguments.length;o++){var p=arguments[o];for(var d in p)s[d]=p[d]}return s}Zy.exports=yS().create(R3(NT(),UC(),HC()));Zy.exports.version=$C().version});var En=ze((NN,XC)=>{XC.exports=YC()});var kk=ze(Th=>{var B3=/(\[[^\]]+\])/g,F3=/(#[^\s\+>~\.\[:]+)/g,j3=/(\.[^\s\+>~\.\[:]+)/g,N3=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/g,q3=/(:[^\s\+>~\.\[:]+)/g,V3=/([^\s\+>~\.\[:]+)/g,W3=/:not\(([^\)]*)\)/g,G3=/\{[^]*/gm,U3=/[\*\s\+>~]/g,Z3=/[#\.]/g,Zu=function(s,o,p,d){var f=d.match(s);if(f)for(var a=0;a<f.length;a++)p[o]++,d=d.replace(f[a]," ");return d},H3=function(s){var o=s.indexOf(",");o!==-1&&(s=s.substring(0,o));var p={a:0,b:0,c:0};return s=s.replace(W3," $1 "),s=s.replace(G3," "),s=Zu(B3,"b",p,s),s=Zu(F3,"a",p,s),s=Zu(j3,"b",p,s),s=Zu(N3,"c",p,s),s=Zu(q3,"b",p,s),s=s.replace(U3," "),s=s.replace(Z3," "),Zu(V3,"c",p,s),p.a*100+p.b*10+p.c*1},Tk={};Th.calculateSpecificity=function(s){var o=Tk[s];return o===void 0&&(o=H3(s),Tk[s]=o),o};var Ck={},v_=null;Th.isSelectorValid=function(s){var o=Ck[s];if(o===void 0){v_==null&&(v_=document.createElement("div"));try{v_.querySelector(s),o=!0}catch(p){o=!1}Ck[s]=o}return o};Th.validateSelector=function(s){if(!Th.isSelectorValid(s)){var o=new SyntaxError(s+" is not a valid selector");throw o.code="EBADSELECTOR",o}}});var Ik=ze((wq,zk)=>{"use strict";zk.exports=function(){var s=Array.from,o,p;return typeof s!="function"?!1:(o=["raz","dwa"],p=s(o),!!(p&&p!==o&&p[1]==="dwa"))}});var Dk=ze((Sq,Lk)=>{"use strict";Lk.exports=function(){return typeof globalThis!="object"||!globalThis?!1:globalThis.Array===Array}});var Bk=ze((Tq,Rk)=>{var Ok=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};Rk.exports=(function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(s){return Ok()}try{return __global__||Ok()}finally{delete Object.prototype.__global__}})()});var Ch=ze((Cq,Fk)=>{"use strict";Fk.exports=Dk()()?globalThis:Bk()});var Nk=ze((kq,jk)=>{"use strict";var $3=Ch(),x_={object:!0,symbol:!0};jk.exports=function(){var s=$3.Symbol,o;if(typeof s!="function")return!1;o=s("test symbol");try{String(o)}catch(p){return!1}return!(!x_[typeof s.iterator]||!x_[typeof s.toPrimitive]||!x_[typeof s.toStringTag])}});var Vk=ze((Pq,qk)=>{"use strict";qk.exports=function(s){return s?typeof s=="symbol"?!0:!s.constructor||s.constructor.name!=="Symbol"?!1:s[s.constructor.toStringTag]==="Symbol":!1}});var w_=ze((Eq,Wk)=>{"use strict";var Y3=Vk();Wk.exports=function(s){if(!Y3(s))throw new TypeError(s+" is not a symbol");return s}});var $k=ze((Aq,Hk)=>{"use strict";var Gk=fc(),X3=Object.create,Uk=Object.defineProperty,K3=Object.prototype,Zk=X3(null);Hk.exports=function(s){for(var o=0,p,d;Zk[s+(o||"")];)++o;return s+=o||"",Zk[s]=!0,p="@@"+s,Uk(K3,p,Gk.gs(null,function(f){d||(d=!0,Uk(this,p,Gk(f)),d=!1)})),p}});var Xk=ze((Mq,Yk)=>{"use strict";var bs=fc(),Tr=Ch().Symbol;Yk.exports=function(s){return Object.defineProperties(s,{hasInstance:bs("",Tr&&Tr.hasInstance||s("hasInstance")),isConcatSpreadable:bs("",Tr&&Tr.isConcatSpreadable||s("isConcatSpreadable")),iterator:bs("",Tr&&Tr.iterator||s("iterator")),match:bs("",Tr&&Tr.match||s("match")),replace:bs("",Tr&&Tr.replace||s("replace")),search:bs("",Tr&&Tr.search||s("search")),species:bs("",Tr&&Tr.species||s("species")),split:bs("",Tr&&Tr.split||s("split")),toPrimitive:bs("",Tr&&Tr.toPrimitive||s("toPrimitive")),toStringTag:bs("",Tr&&Tr.toStringTag||s("toStringTag")),unscopables:bs("",Tr&&Tr.unscopables||s("unscopables"))})}});var Qk=ze((zq,Jk)=>{"use strict";var Kk=fc(),J3=w_(),kh=Object.create(null);Jk.exports=function(s){return Object.defineProperties(s,{for:Kk(function(o){return kh[o]?kh[o]:kh[o]=s(String(o))}),keyFor:Kk(function(o){var p;J3(o);for(p in kh)if(kh[p]===o)return p})})}});var iP=ze((Iq,tP)=>{"use strict";var ao=fc(),S_=w_(),Ff=Ch().Symbol,Q3=$k(),e5=Xk(),t5=Qk(),i5=Object.create,T_=Object.defineProperties,jf=Object.defineProperty,An,Hu,eP;if(typeof Ff=="function")try{String(Ff()),eP=!0}catch(s){}else Ff=null;Hu=function(o){if(this instanceof Hu)throw new TypeError("Symbol is not a constructor");return An(o)};tP.exports=An=function s(o){var p;if(this instanceof s)throw new TypeError("Symbol is not a constructor");return eP?Ff(o):(p=i5(Hu.prototype),o=o===void 0?"":String(o),T_(p,{__description__:ao("",o),__name__:ao("",Q3(o))}))};e5(An);t5(An);T_(Hu.prototype,{constructor:ao(An),toString:ao("",function(){return this.__name__})});T_(An.prototype,{toString:ao(function(){return"Symbol ("+S_(this).__description__+")"}),valueOf:ao(function(){return S_(this)})});jf(An.prototype,An.toPrimitive,ao("",function(){var s=S_(this);return typeof s=="symbol"?s:s.toString()}));jf(An.prototype,An.toStringTag,ao("c","Symbol"));jf(Hu.prototype,An.toStringTag,ao("c",An.prototype[An.toStringTag]));jf(Hu.prototype,An.toPrimitive,ao("c",An.prototype[An.toPrimitive]))});var nP=ze((Lq,rP)=>{"use strict";rP.exports=Nk()()?Ch().Symbol:iP()});var oP=ze((Dq,sP)=>{"use strict";var aP=Object.prototype.toString,r5=aP.call((function(){return arguments})());sP.exports=function(s){return aP.call(s)===r5}});var cP=ze((Oq,lP)=>{"use strict";var n5=Object.prototype.toString,a5=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);lP.exports=function(s){return typeof s=="function"&&a5(n5.call(s))}});var dP=ze((Rq,uP)=>{"use strict";uP.exports=function(){var s=Math.sign;return typeof s!="function"?!1:s(10)===1&&s(-20)===-1}});var pP=ze((Bq,hP)=>{"use strict";hP.exports=function(s){return s=Number(s),isNaN(s)||s===0?s:s>0?1:-1}});var mP=ze((Fq,fP)=>{"use strict";fP.exports=dP()()?Math.sign:pP()});var yP=ze((jq,gP)=>{"use strict";var s5=mP(),o5=Math.abs,l5=Math.floor;gP.exports=function(s){return isNaN(s)?0:(s=Number(s),s===0||!isFinite(s)?s:s5(s)*l5(o5(s)))}});var C_=ze((Nq,_P)=>{"use strict";var c5=yP(),u5=Math.max;_P.exports=function(s){return u5(0,c5(s))}});var xP=ze((qq,bP)=>{"use strict";var vP=Object.prototype.toString,d5=vP.call("");bP.exports=function(s){return typeof s=="string"||s&&typeof s=="object"&&(s instanceof String||vP.call(s)===d5)||!1}});var CP=ze((Vq,TP)=>{"use strict";var h5=nP().iterator,p5=oP(),f5=cP(),m5=C_(),wP=ug(),g5=Rp(),y5=Tu(),_5=xP(),SP=Array.isArray,k_=Function.prototype.call,bc={configurable:!0,enumerable:!0,writable:!0,value:null},P_=Object.defineProperty;TP.exports=function(s){var o=arguments[1],p=arguments[2],d,f,a,T,M,R,V,K,ne,G;if(s=Object(g5(s)),y5(o)&&wP(o),!this||this===Array||!f5(this)){if(!o){if(p5(s))return M=s.length,M!==1?Array.apply(null,s):(T=new Array(1),T[0]=s[0],T);if(SP(s)){for(T=new Array(M=s.length),f=0;f<M;++f)T[f]=s[f];return T}}T=[]}else d=this;if(!SP(s)){if((ne=s[h5])!==void 0){for(V=wP(ne).call(s),d&&(T=new d),K=V.next(),f=0;!K.done;)G=o?k_.call(o,p,K.value,f):K.value,d?(bc.value=G,P_(T,f,bc)):T[f]=G,K=V.next(),++f;M=f}else if(_5(s)){for(M=s.length,d&&(T=new d),f=0,a=0;f<M;++f)G=s[f],f+1<M&&(R=G.charCodeAt(0),R>=55296&&R<=56319&&(G+=s[++f])),G=o?k_.call(o,p,G,a):G,d?(bc.value=G,P_(T,a,bc)):T[a]=G,++a;M=a}}if(M===void 0)for(M=m5(s.length),d&&(T=new d(M)),f=0;f<M;++f)G=o?k_.call(o,p,s[f],f):s[f],d?(bc.value=G,P_(T,f,bc)):T[f]=G;return d&&(bc.value=null,T.length=M),T}});var PP=ze((Wq,kP)=>{"use strict";kP.exports=Ik()()?Array.from:CP()});var AP=ze((Gq,EP)=>{"use strict";EP.exports=function(){var s=Number.isNaN;return typeof s!="function"?!1:!s({})&&s(NaN)&&!s(34)}});var zP=ze((Uq,MP)=>{"use strict";MP.exports=function(s){return s!==s}});var LP=ze((Zq,IP)=>{"use strict";IP.exports=AP()()?Number.isNaN:zP()});var FP=ze((Hq,BP)=>{"use strict";var DP=LP(),OP=C_(),v5=Rp(),b5=Array.prototype.indexOf,x5=Object.prototype.hasOwnProperty,w5=Math.abs,RP=Math.floor;BP.exports=function(s){var o,p,d,f;if(!DP(s))return b5.apply(this,arguments);for(p=OP(v5(this).length),d=arguments[1],isNaN(d)?d=0:d>=0?d=RP(d):d=OP(this.length)-RP(w5(d)),o=d;o<p;++o)if(x5.call(this,o)&&(f=this[o],DP(f)))return o;return-1}});var NP=ze(($q,jP)=>{"use strict";var S5=FP(),T5=Array.prototype.forEach,C5=Array.prototype.splice;jP.exports=function(s){T5.call(arguments,function(o){var p=S5.call(this,o);p!==-1&&C5.call(this,p,1)},this)}});var VP=ze((Yq,qP)=>{"use strict";var k5=Tu(),P5={function:!0,object:!0};qP.exports=function(s){return k5(s)&&P5[typeof s]||!1}});var GP=ze((Xq,WP)=>{"use strict";var E5=VP();WP.exports=function(s){if(!E5(s))throw new TypeError(s+" is not an Object");return s}});var XP=ze((Kq,YP)=>{"use strict";var A5=PP(),M5=NP(),UP=GP(),ZP=fc(),HP=wl().methods.emit,$P=Object.defineProperty,z5=Object.prototype.hasOwnProperty,I5=Object.getOwnPropertyDescriptor;YP.exports=function(s,o){var p,d,f,a;return UP(s)&&UP(o),a=arguments[2],a===void 0&&(a="emit"),d={close:function(){M5.call(p,o)}},z5.call(s,"__eePipes__")?((p=s.__eePipes__).push(o),d):($P(s,"__eePipes__",ZP("c",p=[o])),f=I5(s,a),f?(delete f.get,delete f.set):f=ZP("c",void 0),f.value=function(){var T,M,R=A5(p);for(HP.apply(this,arguments),T=0;M=R[T];++T)HP.apply(M,arguments)},$P(s,a,f),d)}});var Ml=ze((Wf,eE)=>{(function(s,o){typeof Wf=="object"&&typeof eE!="undefined"?o(Wf):typeof define=="function"&&define.amd?define(["exports"],o):(s=typeof globalThis!="undefined"?globalThis:s||self,o(s.leaflet={}))})(Wf,(function(s){"use strict";var o="1.9.4";function p(c){var v,C,I,q;for(C=1,I=arguments.length;C<I;C++){q=arguments[C];for(v in q)c[v]=q[v]}return c}var d=Object.create||(function(){function c(){}return function(v){return c.prototype=v,new c}})();function f(c,v){var C=Array.prototype.slice;if(c.bind)return c.bind.apply(c,C.call(arguments,1));var I=C.call(arguments,2);return function(){return c.apply(v,I.length?I.concat(C.call(arguments)):arguments)}}var a=0;function T(c){return"_leaflet_id"in c||(c._leaflet_id=++a),c._leaflet_id}function M(c,v,C){var I,q,re,ve;return ve=function(){I=!1,q&&(re.apply(C,q),q=!1)},re=function(){I?q=arguments:(c.apply(C,arguments),setTimeout(ve,v),I=!0)},re}function R(c,v,C){var I=v[1],q=v[0],re=I-q;return c===I&&C?c:((c-q)%re+re)%re+q}function V(){return!1}function K(c,v){if(v===!1)return c;var C=Math.pow(10,v===void 0?6:v);return Math.round(c*C)/C}function ne(c){return c.trim?c.trim():c.replace(/^\s+|\s+$/g,"")}function G(c){return ne(c).split(/\s+/)}function ie(c,v){Object.prototype.hasOwnProperty.call(c,"options")||(c.options=c.options?d(c.options):{});for(var C in v)c.options[C]=v[C];return c.options}function Y(c,v,C){var I=[];for(var q in c)I.push(encodeURIComponent(C?q.toUpperCase():q)+"="+encodeURIComponent(c[q]));return(!v||v.indexOf("?")===-1?"?":"&")+I.join("&")}var Se=/\{ *([\w_ -]+) *\}/g;function je(c,v){return c.replace(Se,function(C,I){var q=v[I];if(q===void 0)throw new Error("No value provided for variable "+C);return typeof q=="function"&&(q=q(v)),q})}var _e=Array.isArray||function(c){return Object.prototype.toString.call(c)==="[object Array]"};function Pe(c,v){for(var C=0;C<c.length;C++)if(c[C]===v)return C;return-1}var Ye="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function st(c){return window["webkit"+c]||window["moz"+c]||window["ms"+c]}var Pt=0;function _t(c){var v=+new Date,C=Math.max(0,16-(v-Pt));return Pt=v+C,window.setTimeout(c,C)}var Ut=window.requestAnimationFrame||st("RequestAnimationFrame")||_t,Ht=window.cancelAnimationFrame||st("CancelAnimationFrame")||st("CancelRequestAnimationFrame")||function(c){window.clearTimeout(c)};function Tt(c,v,C){if(C&&Ut===_t)c.call(v);else return Ut.call(window,f(c,v))}function Et(c){c&&Ht.call(window,c)}var oi={__proto__:null,extend:p,create:d,bind:f,get lastId(){return a},stamp:T,throttle:M,wrapNum:R,falseFn:V,formatNum:K,trim:ne,splitWords:G,setOptions:ie,getParamString:Y,template:je,isArray:_e,indexOf:Pe,emptyImageUrl:Ye,requestFn:Ut,cancelFn:Ht,requestAnimFrame:Tt,cancelAnimFrame:Et};function ni(){}ni.extend=function(c){var v=function(){ie(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},C=v.__super__=this.prototype,I=d(C);I.constructor=v,v.prototype=I;for(var q in this)Object.prototype.hasOwnProperty.call(this,q)&&q!=="prototype"&&q!=="__super__"&&(v[q]=this[q]);return c.statics&&p(v,c.statics),c.includes&&(di(c.includes),p.apply(null,[I].concat(c.includes))),p(I,c),delete I.statics,delete I.includes,I.options&&(I.options=C.options?d(C.options):{},p(I.options,c.options)),I._initHooks=[],I.callInitHooks=function(){if(!this._initHooksCalled){C.callInitHooks&&C.callInitHooks.call(this),this._initHooksCalled=!0;for(var re=0,ve=I._initHooks.length;re<ve;re++)I._initHooks[re].call(this)}},v},ni.include=function(c){var v=this.prototype.options;return p(this.prototype,c),c.options&&(this.prototype.options=v,this.mergeOptions(c.options)),this},ni.mergeOptions=function(c){return p(this.prototype.options,c),this},ni.addInitHook=function(c){var v=Array.prototype.slice.call(arguments,1),C=typeof c=="function"?c:function(){this[c].apply(this,v)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(C),this};function di(c){if(!(typeof L=="undefined"||!L||!L.Mixin)){c=_e(c)?c:[c];for(var v=0;v<c.length;v++)c[v]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ai={on:function(c,v,C){if(typeof c=="object")for(var I in c)this._on(I,c[I],v);else{c=G(c);for(var q=0,re=c.length;q<re;q++)this._on(c[q],v,C)}return this},off:function(c,v,C){if(!arguments.length)delete this._events;else if(typeof c=="object")for(var I in c)this._off(I,c[I],v);else{c=G(c);for(var q=arguments.length===1,re=0,ve=c.length;re<ve;re++)q?this._off(c[re]):this._off(c[re],v,C)}return this},_on:function(c,v,C,I){if(typeof v!="function"){console.warn("wrong listener type: "+typeof v);return}if(this._listens(c,v,C)===!1){C===this&&(C=void 0);var q={fn:v,ctx:C};I&&(q.once=!0),this._events=this._events||{},this._events[c]=this._events[c]||[],this._events[c].push(q)}},_off:function(c,v,C){var I,q,re;if(this._events&&(I=this._events[c],!!I)){if(arguments.length===1){if(this._firingCount)for(q=0,re=I.length;q<re;q++)I[q].fn=V;delete this._events[c];return}if(typeof v!="function"){console.warn("wrong listener type: "+typeof v);return}var ve=this._listens(c,v,C);if(ve!==!1){var De=I[ve];this._firingCount&&(De.fn=V,this._events[c]=I=I.slice()),I.splice(ve,1)}}},fire:function(c,v,C){if(!this.listens(c,C))return this;var I=p({},v,{type:c,target:this,sourceTarget:v&&v.sourceTarget||this});if(this._events){var q=this._events[c];if(q){this._firingCount=this._firingCount+1||1;for(var re=0,ve=q.length;re<ve;re++){var De=q[re],Ve=De.fn;De.once&&this.off(c,Ve,De.ctx),Ve.call(De.ctx||this,I)}this._firingCount--}}return C&&this._propagateEvent(I),this},listens:function(c,v,C,I){typeof c!="string"&&console.warn('"string" type argument expected');var q=v;typeof v!="function"&&(I=!!v,q=void 0,C=void 0);var re=this._events&&this._events[c];if(re&&re.length&&this._listens(c,q,C)!==!1)return!0;if(I){for(var ve in this._eventParents)if(this._eventParents[ve].listens(c,v,C,I))return!0}return!1},_listens:function(c,v,C){if(!this._events)return!1;var I=this._events[c]||[];if(!v)return!!I.length;C===this&&(C=void 0);for(var q=0,re=I.length;q<re;q++)if(I[q].fn===v&&I[q].ctx===C)return q;return!1},once:function(c,v,C){if(typeof c=="object")for(var I in c)this._on(I,c[I],v,!0);else{c=G(c);for(var q=0,re=c.length;q<re;q++)this._on(c[q],v,C,!0)}return this},addEventParent:function(c){return this._eventParents=this._eventParents||{},this._eventParents[T(c)]=c,this},removeEventParent:function(c){return this._eventParents&&delete this._eventParents[T(c)],this},_propagateEvent:function(c){for(var v in this._eventParents)this._eventParents[v].fire(c.type,p({layer:c.target,propagatedFrom:c.target},c),!0)}};ai.addEventListener=ai.on,ai.removeEventListener=ai.clearAllEventListeners=ai.off,ai.addOneTimeEventListener=ai.once,ai.fireEvent=ai.fire,ai.hasEventListeners=ai.listens;var Ct=ni.extend(ai);function dt(c,v,C){this.x=C?Math.round(c):c,this.y=C?Math.round(v):v}var qt=Math.trunc||function(c){return c>0?Math.floor(c):Math.ceil(c)};dt.prototype={clone:function(){return new dt(this.x,this.y)},add:function(c){return this.clone()._add(bt(c))},_add:function(c){return this.x+=c.x,this.y+=c.y,this},subtract:function(c){return this.clone()._subtract(bt(c))},_subtract:function(c){return this.x-=c.x,this.y-=c.y,this},divideBy:function(c){return this.clone()._divideBy(c)},_divideBy:function(c){return this.x/=c,this.y/=c,this},multiplyBy:function(c){return this.clone()._multiplyBy(c)},_multiplyBy:function(c){return this.x*=c,this.y*=c,this},scaleBy:function(c){return new dt(this.x*c.x,this.y*c.y)},unscaleBy:function(c){return new dt(this.x/c.x,this.y/c.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=qt(this.x),this.y=qt(this.y),this},distanceTo:function(c){c=bt(c);var v=c.x-this.x,C=c.y-this.y;return Math.sqrt(v*v+C*C)},equals:function(c){return c=bt(c),c.x===this.x&&c.y===this.y},contains:function(c){return c=bt(c),Math.abs(c.x)<=Math.abs(this.x)&&Math.abs(c.y)<=Math.abs(this.y)},toString:function(){return"Point("+K(this.x)+", "+K(this.y)+")"}};function bt(c,v,C){return c instanceof dt?c:_e(c)?new dt(c[0],c[1]):c==null?c:typeof c=="object"&&"x"in c&&"y"in c?new dt(c.x,c.y):new dt(c,v,C)}function Qt(c,v){if(c)for(var C=v?[c,v]:c,I=0,q=C.length;I<q;I++)this.extend(C[I])}Qt.prototype={extend:function(c){var v,C;if(!c)return this;if(c instanceof dt||typeof c[0]=="number"||"x"in c)v=C=bt(c);else if(c=Pi(c),v=c.min,C=c.max,!v||!C)return this;return!this.min&&!this.max?(this.min=v.clone(),this.max=C.clone()):(this.min.x=Math.min(v.x,this.min.x),this.max.x=Math.max(C.x,this.max.x),this.min.y=Math.min(v.y,this.min.y),this.max.y=Math.max(C.y,this.max.y)),this},getCenter:function(c){return bt((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,c)},getBottomLeft:function(){return bt(this.min.x,this.max.y)},getTopRight:function(){return bt(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(c){var v,C;return typeof c[0]=="number"||c instanceof dt?c=bt(c):c=Pi(c),c instanceof Qt?(v=c.min,C=c.max):v=C=c,v.x>=this.min.x&&C.x<=this.max.x&&v.y>=this.min.y&&C.y<=this.max.y},intersects:function(c){c=Pi(c);var v=this.min,C=this.max,I=c.min,q=c.max,re=q.x>=v.x&&I.x<=C.x,ve=q.y>=v.y&&I.y<=C.y;return re&&ve},overlaps:function(c){c=Pi(c);var v=this.min,C=this.max,I=c.min,q=c.max,re=q.x>v.x&&I.x<C.x,ve=q.y>v.y&&I.y<C.y;return re&&ve},isValid:function(){return!!(this.min&&this.max)},pad:function(c){var v=this.min,C=this.max,I=Math.abs(v.x-C.x)*c,q=Math.abs(v.y-C.y)*c;return Pi(bt(v.x-I,v.y-q),bt(C.x+I,C.y+q))},equals:function(c){return c?(c=Pi(c),this.min.equals(c.getTopLeft())&&this.max.equals(c.getBottomRight())):!1}};function Pi(c,v){return!c||c instanceof Qt?c:new Qt(c,v)}function xi(c,v){if(c)for(var C=v?[c,v]:c,I=0,q=C.length;I<q;I++)this.extend(C[I])}xi.prototype={extend:function(c){var v=this._southWest,C=this._northEast,I,q;if(c instanceof Zt)I=c,q=c;else if(c instanceof xi){if(I=c._southWest,q=c._northEast,!I||!q)return this}else return c?this.extend(gt(c)||hi(c)):this;return!v&&!C?(this._southWest=new Zt(I.lat,I.lng),this._northEast=new Zt(q.lat,q.lng)):(v.lat=Math.min(I.lat,v.lat),v.lng=Math.min(I.lng,v.lng),C.lat=Math.max(q.lat,C.lat),C.lng=Math.max(q.lng,C.lng)),this},pad:function(c){var v=this._southWest,C=this._northEast,I=Math.abs(v.lat-C.lat)*c,q=Math.abs(v.lng-C.lng)*c;return new xi(new Zt(v.lat-I,v.lng-q),new Zt(C.lat+I,C.lng+q))},getCenter:function(){return new Zt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Zt(this.getNorth(),this.getWest())},getSouthEast:function(){return new Zt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(c){typeof c[0]=="number"||c instanceof Zt||"lat"in c?c=gt(c):c=hi(c);var v=this._southWest,C=this._northEast,I,q;return c instanceof xi?(I=c.getSouthWest(),q=c.getNorthEast()):I=q=c,I.lat>=v.lat&&q.lat<=C.lat&&I.lng>=v.lng&&q.lng<=C.lng},intersects:function(c){c=hi(c);var v=this._southWest,C=this._northEast,I=c.getSouthWest(),q=c.getNorthEast(),re=q.lat>=v.lat&&I.lat<=C.lat,ve=q.lng>=v.lng&&I.lng<=C.lng;return re&&ve},overlaps:function(c){c=hi(c);var v=this._southWest,C=this._northEast,I=c.getSouthWest(),q=c.getNorthEast(),re=q.lat>v.lat&&I.lat<C.lat,ve=q.lng>v.lng&&I.lng<C.lng;return re&&ve},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(c,v){return c?(c=hi(c),this._southWest.equals(c.getSouthWest(),v)&&this._northEast.equals(c.getNorthEast(),v)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function hi(c,v){return c instanceof xi?c:new xi(c,v)}function Zt(c,v,C){if(isNaN(c)||isNaN(v))throw new Error("Invalid LatLng object: ("+c+", "+v+")");this.lat=+c,this.lng=+v,C!==void 0&&(this.alt=+C)}Zt.prototype={equals:function(c,v){if(!c)return!1;c=gt(c);var C=Math.max(Math.abs(this.lat-c.lat),Math.abs(this.lng-c.lng));return C<=(v===void 0?1e-9:v)},toString:function(c){return"LatLng("+K(this.lat,c)+", "+K(this.lng,c)+")"},distanceTo:function(c){return yi.distance(this,gt(c))},wrap:function(){return yi.wrapLatLng(this)},toBounds:function(c){var v=180*c/40075017,C=v/Math.cos(Math.PI/180*this.lat);return hi([this.lat-v,this.lng-C],[this.lat+v,this.lng+C])},clone:function(){return new Zt(this.lat,this.lng,this.alt)}};function gt(c,v,C){return c instanceof Zt?c:_e(c)&&typeof c[0]!="object"?c.length===3?new Zt(c[0],c[1],c[2]):c.length===2?new Zt(c[0],c[1]):null:c==null?c:typeof c=="object"&&"lat"in c?new Zt(c.lat,"lng"in c?c.lng:c.lon,c.alt):v===void 0?null:new Zt(c,v,C)}var pr={latLngToPoint:function(c,v){var C=this.projection.project(c),I=this.scale(v);return this.transformation._transform(C,I)},pointToLatLng:function(c,v){var C=this.scale(v),I=this.transformation.untransform(c,C);return this.projection.unproject(I)},project:function(c){return this.projection.project(c)},unproject:function(c){return this.projection.unproject(c)},scale:function(c){return 256*Math.pow(2,c)},zoom:function(c){return Math.log(c/256)/Math.LN2},getProjectedBounds:function(c){if(this.infinite)return null;var v=this.projection.bounds,C=this.scale(c),I=this.transformation.transform(v.min,C),q=this.transformation.transform(v.max,C);return new Qt(I,q)},infinite:!1,wrapLatLng:function(c){var v=this.wrapLng?R(c.lng,this.wrapLng,!0):c.lng,C=this.wrapLat?R(c.lat,this.wrapLat,!0):c.lat,I=c.alt;return new Zt(C,v,I)},wrapLatLngBounds:function(c){var v=c.getCenter(),C=this.wrapLatLng(v),I=v.lat-C.lat,q=v.lng-C.lng;if(I===0&&q===0)return c;var re=c.getSouthWest(),ve=c.getNorthEast(),De=new Zt(re.lat-I,re.lng-q),Ve=new Zt(ve.lat-I,ve.lng-q);return new xi(De,Ve)}},yi=p({},pr,{wrapLng:[-180,180],R:6371e3,distance:function(c,v){var C=Math.PI/180,I=c.lat*C,q=v.lat*C,re=Math.sin((v.lat-c.lat)*C/2),ve=Math.sin((v.lng-c.lng)*C/2),De=re*re+Math.cos(I)*Math.cos(q)*ve*ve,Ve=2*Math.atan2(Math.sqrt(De),Math.sqrt(1-De));return this.R*Ve}}),gn=6378137,sn={R:gn,MAX_LATITUDE:85.0511287798,project:function(c){var v=Math.PI/180,C=this.MAX_LATITUDE,I=Math.max(Math.min(C,c.lat),-C),q=Math.sin(I*v);return new dt(this.R*c.lng*v,this.R*Math.log((1+q)/(1-q))/2)},unproject:function(c){var v=180/Math.PI;return new Zt((2*Math.atan(Math.exp(c.y/this.R))-Math.PI/2)*v,c.x*v/this.R)},bounds:(function(){var c=gn*Math.PI;return new Qt([-c,-c],[c,c])})()};function br(c,v,C,I){if(_e(c)){this._a=c[0],this._b=c[1],this._c=c[2],this._d=c[3];return}this._a=c,this._b=v,this._c=C,this._d=I}br.prototype={transform:function(c,v){return this._transform(c.clone(),v)},_transform:function(c,v){return v=v||1,c.x=v*(this._a*c.x+this._b),c.y=v*(this._c*c.y+this._d),c},untransform:function(c,v){return v=v||1,new dt((c.x/v-this._b)/this._a,(c.y/v-this._d)/this._c)}};function cr(c,v,C,I){return new br(c,v,C,I)}var Mn=p({},yi,{code:"EPSG:3857",projection:sn,transformation:(function(){var c=.5/(Math.PI*sn.R);return cr(c,.5,-c,.5)})()}),fr=p({},Mn,{code:"EPSG:900913"});function xr(c){return document.createElementNS("http://www.w3.org/2000/svg",c)}function yn(c,v){var C="",I,q,re,ve,De,Ve;for(I=0,re=c.length;I<re;I++){for(De=c[I],q=0,ve=De.length;q<ve;q++)Ve=De[q],C+=(q?"L":"M")+Ve.x+" "+Ve.y;C+=v?Ae.svg?"z":"x":""}return C||"M0 0"}var zi=document.documentElement.style,_n="ActiveXObject"in window,xs=_n&&!document.addEventListener,Ya="msLaunchUri"in navigator&&!("documentMode"in document),vn=Si("webkit"),Vn=Si("android"),Ea=Si("android 2")||Si("android 3"),ws=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),on=Vn&&Si("Google")&&ws<537&&!("AudioNode"in window),Wn=!!window.opera,Ss=!Ya&&Si("chrome"),Xa=Si("gecko")&&!vn&&!Wn&&!_n,Ts=!Ss&&Si("safari"),ke=Si("phantom"),$="OTransition"in zi,X=navigator.platform.indexOf("Win")===0,Q=_n&&"transition"in zi,pe="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ea,xe="MozPerspective"in zi,Me=!window.L_DISABLE_3D&&(Q||pe||xe)&&!$&&!ke,Le=typeof orientation!="undefined"||Si("mobile"),we=Le&&vn,Ee=Le&&pe,Ze=!window.PointerEvent&&window.MSPointerEvent,Ne=!!(window.PointerEvent||Ze),Xe="ontouchstart"in window||!!window.TouchEvent,Ce=!window.L_NO_TOUCH&&(Xe||Ne),Mt=Le&&Wn,wi=Le&&Xa,pt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,yt=(function(){var c=!1;try{var v=Object.defineProperty({},"passive",{get:function(){c=!0}});window.addEventListener("testPassiveEventSupport",V,v),window.removeEventListener("testPassiveEventSupport",V,v)}catch(C){}return c})(),Lt=(function(){return!!document.createElement("canvas").getContext})(),pi=!!(document.createElementNS&&xr("svg").createSVGRect),Ei=!!pi&&(function(){var c=document.createElement("div");return c.innerHTML="<svg/>",(c.firstChild&&c.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),mr=!pi&&(function(){try{var c=document.createElement("div");c.innerHTML='<v:shape adj="1"/>';var v=c.firstChild;return v.style.behavior="url(#default#VML)",v&&typeof v.adj=="object"}catch(C){return!1}})(),gr=navigator.platform.indexOf("Mac")===0,Vi=navigator.platform.indexOf("Linux")===0;function Si(c){return navigator.userAgent.toLowerCase().indexOf(c)>=0}var Ae={ie:_n,ielt9:xs,edge:Ya,webkit:vn,android:Vn,android23:Ea,androidStock:on,opera:Wn,chrome:Ss,gecko:Xa,safari:Ts,phantom:ke,opera12:$,win:X,ie3d:Q,webkit3d:pe,gecko3d:xe,any3d:Me,mobile:Le,mobileWebkit:we,mobileWebkit3d:Ee,msPointer:Ze,pointer:Ne,touch:Ce,touchNative:Xe,mobileOpera:Mt,mobileGecko:wi,retina:pt,passiveEvents:yt,canvas:Lt,svg:pi,vml:mr,inlineSvg:Ei,mac:gr,linux:Vi},Xi=Ae.msPointer?"MSPointerDown":"pointerdown",qr=Ae.msPointer?"MSPointerMove":"pointermove",Aa=Ae.msPointer?"MSPointerUp":"pointerup",Wi=Ae.msPointer?"MSPointerCancel":"pointercancel",nt={touchstart:Xi,touchmove:qr,touchend:Aa,touchcancel:Wi},Dt={touchstart:lo,touchmove:aa,touchend:aa,touchcancel:aa},Ot={},Yr=!1;function Uo(c,v,C){return v==="touchstart"&&Zo(),Dt[v]?(C=Dt[v].bind(this,C),c.addEventListener(nt[v],C,!1),C):(console.warn("wrong event specified:",v),V)}function na(c,v,C){if(!nt[v]){console.warn("wrong event specified:",v);return}c.removeEventListener(nt[v],C,!1)}function jt(c){Ot[c.pointerId]=c}function oo(c){Ot[c.pointerId]&&(Ot[c.pointerId]=c)}function Cs(c){delete Ot[c.pointerId]}function Zo(){Yr||(document.addEventListener(Xi,jt,!0),document.addEventListener(qr,oo,!0),document.addEventListener(Aa,Cs,!0),document.addEventListener(Wi,Cs,!0),Yr=!0)}function aa(c,v){if(v.pointerType!==(v.MSPOINTER_TYPE_MOUSE||"mouse")){v.touches=[];for(var C in Ot)v.touches.push(Ot[C]);v.changedTouches=[v],c(v)}}function lo(c,v){v.MSPOINTER_TYPE_TOUCH&&v.pointerType===v.MSPOINTER_TYPE_TOUCH&&ei(v),aa(c,v)}function ks(c){var v={},C,I;for(I in c)C=c[I],v[I]=C&&C.bind?C.bind(c):C;return c=v,v.type="dblclick",v.detail=2,v.isTrusted=!1,v._simulated=!0,v}var co=200;function Vr(c,v){c.addEventListener("dblclick",v);var C=0,I;function q(re){if(re.detail!==1){I=re.detail;return}if(!(re.pointerType==="mouse"||re.sourceCapabilities&&!re.sourceCapabilities.firesTouchEvents)){var ve=In(re);if(!(ve.some(function(Ve){return Ve instanceof HTMLLabelElement&&Ve.attributes.for})&&!ve.some(function(Ve){return Ve instanceof HTMLInputElement||Ve instanceof HTMLSelectElement}))){var De=Date.now();De-C<=co?(I++,I===2&&v(ks(re))):I=1,C=De}}}return c.addEventListener("click",q),{dblclick:v,simDblclick:q}}function mi(c,v){c.removeEventListener("dblclick",v.dblclick),c.removeEventListener("click",v.simDblclick)}var Ps=As(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Gn=As(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Es=Gn==="webkitTransition"||Gn==="OTransition"?Gn+"End":"transitionend";function Ma(c){return typeof c=="string"?document.getElementById(c):c}function Wr(c,v){var C=c.style[v]||c.currentStyle&&c.currentStyle[v];if((!C||C==="auto")&&document.defaultView){var I=document.defaultView.getComputedStyle(c,null);C=I?I[v]:null}return C==="auto"?null:C}function li(c,v,C){var I=document.createElement(c);return I.className=v||"",C&&C.appendChild(I),I}function _i(c){var v=c.parentNode;v&&v.removeChild(c)}function Ka(c){for(;c.firstChild;)c.removeChild(c.firstChild)}function Ti(c){var v=c.parentNode;v&&v.lastChild!==c&&v.appendChild(c)}function Ja(c){var v=c.parentNode;v&&v.firstChild!==c&&v.insertBefore(c,v.firstChild)}function Ho(c,v){if(c.classList!==void 0)return c.classList.contains(v);var C=uo(c);return C.length>0&&new RegExp("(^|\\s)"+v+"(\\s|$)").test(C)}function Vt(c,v){if(c.classList!==void 0)for(var C=G(v),I=0,q=C.length;I<q;I++)c.classList.add(C[I]);else if(!Ho(c,v)){var re=uo(c);$o(c,(re?re+" ":"")+v)}}function Ki(c,v){c.classList!==void 0?c.classList.remove(v):$o(c,ne((" "+uo(c)+" ").replace(" "+v+" "," ")))}function $o(c,v){c.className.baseVal===void 0?c.className=v:c.className.baseVal=v}function uo(c){return c.correspondingElement&&(c=c.correspondingElement),c.className.baseVal===void 0?c.className:c.className.baseVal}function Gr(c,v){"opacity"in c.style?c.style.opacity=v:"filter"in c.style&&Ol(c,v)}function Ol(c,v){var C=!1,I="DXImageTransform.Microsoft.Alpha";try{C=c.filters.item(I)}catch(q){if(v===1)return}v=Math.round(v*100),C?(C.Enabled=v!==100,C.Opacity=v):c.style.filter+=" progid:"+I+"(opacity="+v+")"}function As(c){for(var v=document.documentElement.style,C=0;C<c.length;C++)if(c[C]in v)return c[C];return!1}function sa(c,v,C){var I=v||new dt(0,0);c.style[Ps]=(Ae.ie3d?"translate("+I.x+"px,"+I.y+"px)":"translate3d("+I.x+"px,"+I.y+"px,0)")+(C?" scale("+C+")":"")}function Ji(c,v){c._leaflet_pos=v,Ae.any3d?sa(c,v):(c.style.left=v.x+"px",c.style.top=v.y+"px")}function Qa(c){return c._leaflet_pos||new dt(0,0)}var oa,za,Yo;if("onselectstart"in document)oa=function(){wt(window,"selectstart",ei)},za=function(){ct(window,"selectstart",ei)};else{var Un=As(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);oa=function(){if(Un){var c=document.documentElement.style;Yo=c[Un],c[Un]="none"}},za=function(){Un&&(document.documentElement.style[Un]=Yo,Yo=void 0)}}function ho(){wt(window,"dragstart",ei)}function es(){ct(window,"dragstart",ei)}var zn,Ia;function Nt(c){for(;c.tabIndex===-1;)c=c.parentNode;c.style&&(Ms(),zn=c,Ia=c.style.outlineStyle,c.style.outlineStyle="none",wt(window,"keydown",Ms))}function Ms(){zn&&(zn.style.outlineStyle=Ia,zn=void 0,Ia=void 0,ct(window,"keydown",Ms))}function wc(c){do c=c.parentNode;while((!c.offsetWidth||!c.offsetHeight)&&c!==document.body);return c}function po(c){var v=c.getBoundingClientRect();return{x:v.width/c.offsetWidth||1,y:v.height/c.offsetHeight||1,boundingClientRect:v}}var Xr={__proto__:null,TRANSFORM:Ps,TRANSITION:Gn,TRANSITION_END:Es,get:Ma,getStyle:Wr,create:li,remove:_i,empty:Ka,toFront:Ti,toBack:Ja,hasClass:Ho,addClass:Vt,removeClass:Ki,setClass:$o,getClass:uo,setOpacity:Gr,testProp:As,setTransform:sa,setPosition:Ji,getPosition:Qa,get disableTextSelection(){return oa},get enableTextSelection(){return za},disableImageDrag:ho,enableImageDrag:es,preventOutline:Nt,restoreOutline:Ms,getSizedParentNode:wc,getScale:po};function wt(c,v,C,I){if(v&&typeof v=="object")for(var q in v)Cr(c,q,v[q],C);else{v=G(v);for(var re=0,ve=v.length;re<ve;re++)Cr(c,v[re],C,I)}return this}var ci="_leaflet_events";function ct(c,v,C,I){if(arguments.length===1)vi(c),delete c[ci];else if(v&&typeof v=="object")for(var q in v)Ur(c,q,v[q],C);else if(v=G(v),arguments.length===2)vi(c,function(De){return Pe(v,De)!==-1});else for(var re=0,ve=v.length;re<ve;re++)Ur(c,v[re],C,I);return this}function vi(c,v){for(var C in c[ci]){var I=C.split(/\d/)[0];(!v||v(I))&&Ur(c,I,null,null,C)}}var Zn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Cr(c,v,C,I){var q=v+T(C)+(I?"_"+T(I):"");if(c[ci]&&c[ci][q])return this;var re=function(De){return C.call(I||c,De||window.event)},ve=re;!Ae.touchNative&&Ae.pointer&&v.indexOf("touch")===0?re=Uo(c,v,re):Ae.touch&&v==="dblclick"?re=Vr(c,re):"addEventListener"in c?v==="touchstart"||v==="touchmove"||v==="wheel"||v==="mousewheel"?c.addEventListener(Zn[v]||v,re,Ae.passiveEvents?{passive:!1}:!1):v==="mouseenter"||v==="mouseleave"?(re=function(De){De=De||window.event,Ln(c,De)&&ve(De)},c.addEventListener(Zn[v],re,!1)):c.addEventListener(v,ve,!1):c.attachEvent("on"+v,re),c[ci]=c[ci]||{},c[ci][q]=re}function Ur(c,v,C,I,q){q=q||v+T(C)+(I?"_"+T(I):"");var re=c[ci]&&c[ci][q];if(!re)return this;!Ae.touchNative&&Ae.pointer&&v.indexOf("touch")===0?na(c,v,re):Ae.touch&&v==="dblclick"?mi(c,re):"removeEventListener"in c?c.removeEventListener(Zn[v]||v,re,!1):c.detachEvent("on"+v,re),c[ci][q]=null}function rr(c){return c.stopPropagation?c.stopPropagation():c.originalEvent?c.originalEvent._stopped=!0:c.cancelBubble=!0,this}function La(c){return Cr(c,"wheel",rr),this}function bn(c){return wt(c,"mousedown touchstart dblclick contextmenu",rr),c._leaflet_disable_click=!0,this}function ei(c){return c.preventDefault?c.preventDefault():c.returnValue=!1,this}function ln(c){return ei(c),rr(c),this}function In(c){if(c.composedPath)return c.composedPath();for(var v=[],C=c.target;C;)v.push(C),C=C.parentNode;return v}function fo(c,v){if(!v)return new dt(c.clientX,c.clientY);var C=po(v),I=C.boundingClientRect;return new dt((c.clientX-I.left)/C.x-v.clientLeft,(c.clientY-I.top)/C.y-v.clientTop)}var Kr=Ae.linux&&Ae.chrome?window.devicePixelRatio:Ae.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Da(c){return Ae.edge?c.wheelDeltaY/2:c.deltaY&&c.deltaMode===0?-c.deltaY/Kr:c.deltaY&&c.deltaMode===1?-c.deltaY*20:c.deltaY&&c.deltaMode===2?-c.deltaY*60:c.deltaX||c.deltaZ?0:c.wheelDelta?(c.wheelDeltaY||c.wheelDelta)/2:c.detail&&Math.abs(c.detail)<32765?-c.detail*20:c.detail?c.detail/-32765*60:0}function Ln(c,v){var C=v.relatedTarget;if(!C)return!0;try{for(;C&&C!==c;)C=C.parentNode}catch(I){return!1}return C!==c}var Sc={__proto__:null,on:wt,off:ct,stopPropagation:rr,disableScrollPropagation:La,disableClickPropagation:bn,preventDefault:ei,stop:ln,getPropagationPath:In,getMousePosition:fo,getWheelDelta:Da,isExternalTarget:Ln,addListener:wt,removeListener:ct},Xo=Ct.extend({run:function(c,v,C,I){this.stop(),this._el=c,this._inProgress=!0,this._duration=C||.25,this._easeOutPower=1/Math.max(I||.5,.2),this._startPos=Qa(c),this._offset=v.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Tt(this._animate,this),this._step()},_step:function(c){var v=+new Date-this._startTime,C=this._duration*1e3;v<C?this._runFrame(this._easeOut(v/C),c):(this._runFrame(1),this._complete())},_runFrame:function(c,v){var C=this._startPos.add(this._offset.multiplyBy(c));v&&C._round(),Ji(this._el,C),this.fire("step")},_complete:function(){Et(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(c){return 1-Math.pow(1-c,this._easeOutPower)}}),Xt=Ct.extend({options:{crs:Mn,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(c,v){v=ie(this,v),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(c),this._initLayout(),this._onResize=f(this._onResize,this),this._initEvents(),v.maxBounds&&this.setMaxBounds(v.maxBounds),v.zoom!==void 0&&(this._zoom=this._limitZoom(v.zoom)),v.center&&v.zoom!==void 0&&this.setView(gt(v.center),v.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Gn&&Ae.any3d&&!Ae.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),wt(this._proxy,Es,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(c,v,C){if(v=v===void 0?this._zoom:this._limitZoom(v),c=this._limitCenter(gt(c),v,this.options.maxBounds),C=C||{},this._stop(),this._loaded&&!C.reset&&C!==!0){C.animate!==void 0&&(C.zoom=p({animate:C.animate},C.zoom),C.pan=p({animate:C.animate,duration:C.duration},C.pan));var I=this._zoom!==v?this._tryAnimatedZoom&&this._tryAnimatedZoom(c,v,C.zoom):this._tryAnimatedPan(c,C.pan);if(I)return clearTimeout(this._sizeTimer),this}return this._resetView(c,v,C.pan&&C.pan.noMoveStart),this},setZoom:function(c,v){return this._loaded?this.setView(this.getCenter(),c,{zoom:v}):(this._zoom=c,this)},zoomIn:function(c,v){return c=c||(Ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+c,v)},zoomOut:function(c,v){return c=c||(Ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-c,v)},setZoomAround:function(c,v,C){var I=this.getZoomScale(v),q=this.getSize().divideBy(2),re=c instanceof dt?c:this.latLngToContainerPoint(c),ve=re.subtract(q).multiplyBy(1-1/I),De=this.containerPointToLatLng(q.add(ve));return this.setView(De,v,{zoom:C})},_getBoundsCenterZoom:function(c,v){v=v||{},c=c.getBounds?c.getBounds():hi(c);var C=bt(v.paddingTopLeft||v.padding||[0,0]),I=bt(v.paddingBottomRight||v.padding||[0,0]),q=this.getBoundsZoom(c,!1,C.add(I));if(q=typeof v.maxZoom=="number"?Math.min(v.maxZoom,q):q,q===1/0)return{center:c.getCenter(),zoom:q};var re=I.subtract(C).divideBy(2),ve=this.project(c.getSouthWest(),q),De=this.project(c.getNorthEast(),q),Ve=this.unproject(ve.add(De).divideBy(2).add(re),q);return{center:Ve,zoom:q}},fitBounds:function(c,v){if(c=hi(c),!c.isValid())throw new Error("Bounds are not valid.");var C=this._getBoundsCenterZoom(c,v);return this.setView(C.center,C.zoom,v)},fitWorld:function(c){return this.fitBounds([[-90,-180],[90,180]],c)},panTo:function(c,v){return this.setView(c,this._zoom,{pan:v})},panBy:function(c,v){if(c=bt(c).round(),v=v||{},!c.x&&!c.y)return this.fire("moveend");if(v.animate!==!0&&!this.getSize().contains(c))return this._resetView(this.unproject(this.project(this.getCenter()).add(c)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Xo,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),v.noMoveStart||this.fire("movestart"),v.animate!==!1){Vt(this._mapPane,"leaflet-pan-anim");var C=this._getMapPanePos().subtract(c).round();this._panAnim.run(this._mapPane,C,v.duration||.25,v.easeLinearity)}else this._rawPanBy(c),this.fire("move").fire("moveend");return this},flyTo:function(c,v,C){if(C=C||{},C.animate===!1||!Ae.any3d)return this.setView(c,v,C);this._stop();var I=this.project(this.getCenter()),q=this.project(c),re=this.getSize(),ve=this._zoom;c=gt(c),v=v===void 0?ve:v;var De=Math.max(re.x,re.y),Ve=De*this.getZoomScale(ve,v),Ke=q.distanceTo(I)||1,ht=1.42,It=ht*ht;function Jt(Ui){var ja=Ui?-1:1,ll=Ui?Ve:De,Na=Ve*Ve-De*De+ja*It*It*Ke*Ke,To=2*ll*It*Ke,ga=Na/To,us=Math.sqrt(ga*ga+1)-ga,Wc=us<1e-9?-18:Math.log(us);return Wc}function yr(Ui){return(Math.exp(Ui)-Math.exp(-Ui))/2}function ar(Ui){return(Math.exp(Ui)+Math.exp(-Ui))/2}function hn(Ui){return yr(Ui)/ar(Ui)}var Zr=Jt(0);function Kn(Ui){return De*(ar(Zr)/ar(Zr+ht*Ui))}function ol(Ui){return De*(ar(Zr)*hn(Zr+ht*Ui)-yr(Zr))/It}function qc(Ui){return 1-Math.pow(1-Ui,1.5)}var Vc=Date.now(),Gi=(Jt(1)-Zr)/ht,cs=C.duration?1e3*C.duration:1e3*Gi*.8;function Qr(){var Ui=(Date.now()-Vc)/cs,ja=qc(Ui)*Gi;Ui<=1?(this._flyToFrame=Tt(Qr,this),this._move(this.unproject(I.add(q.subtract(I).multiplyBy(ol(ja)/Ke)),ve),this.getScaleZoom(De/Kn(ja),ve),{flyTo:!0})):this._move(c,v)._moveEnd(!0)}return this._moveStart(!0,C.noMoveStart),Qr.call(this),this},flyToBounds:function(c,v){var C=this._getBoundsCenterZoom(c,v);return this.flyTo(C.center,C.zoom,v)},setMaxBounds:function(c){return c=hi(c),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),c.isValid()?(this.options.maxBounds=c,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(c){var v=this.options.minZoom;return this.options.minZoom=c,this._loaded&&v!==c&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(c):this},setMaxZoom:function(c){var v=this.options.maxZoom;return this.options.maxZoom=c,this._loaded&&v!==c&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(c):this},panInsideBounds:function(c,v){this._enforcingBounds=!0;var C=this.getCenter(),I=this._limitCenter(C,this._zoom,hi(c));return C.equals(I)||this.panTo(I,v),this._enforcingBounds=!1,this},panInside:function(c,v){v=v||{};var C=bt(v.paddingTopLeft||v.padding||[0,0]),I=bt(v.paddingBottomRight||v.padding||[0,0]),q=this.project(this.getCenter()),re=this.project(c),ve=this.getPixelBounds(),De=Pi([ve.min.add(C),ve.max.subtract(I)]),Ve=De.getSize();if(!De.contains(re)){this._enforcingBounds=!0;var Ke=re.subtract(De.getCenter()),ht=De.extend(re).getSize().subtract(Ve);q.x+=Ke.x<0?-ht.x:ht.x,q.y+=Ke.y<0?-ht.y:ht.y,this.panTo(this.unproject(q),v),this._enforcingBounds=!1}return this},invalidateSize:function(c){if(!this._loaded)return this;c=p({animate:!1,pan:!0},c===!0?{animate:!0}:c);var v=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var C=this.getSize(),I=v.divideBy(2).round(),q=C.divideBy(2).round(),re=I.subtract(q);return!re.x&&!re.y?this:(c.animate&&c.pan?this.panBy(re):(c.pan&&this._rawPanBy(re),this.fire("move"),c.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:v,newSize:C}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(c){if(c=this._locateOptions=p({timeout:1e4,watch:!1},c),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var v=f(this._handleGeolocationResponse,this),C=f(this._handleGeolocationError,this);return c.watch?this._locationWatchId=navigator.geolocation.watchPosition(v,C,c):navigator.geolocation.getCurrentPosition(v,C,c),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(c){if(this._container._leaflet_id){var v=c.code,C=c.message||(v===1?"permission denied":v===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:v,message:"Geolocation error: "+C+"."})}},_handleGeolocationResponse:function(c){if(this._container._leaflet_id){var v=c.coords.latitude,C=c.coords.longitude,I=new Zt(v,C),q=I.toBounds(c.coords.accuracy*2),re=this._locateOptions;if(re.setView){var ve=this.getBoundsZoom(q);this.setView(I,re.maxZoom?Math.min(ve,re.maxZoom):ve)}var De={latlng:I,bounds:q,timestamp:c.timestamp};for(var Ve in c.coords)typeof c.coords[Ve]=="number"&&(De[Ve]=c.coords[Ve]);this.fire("locationfound",De)}},addHandler:function(c,v){if(!v)return this;var C=this[c]=new v(this);return this._handlers.push(C),this.options[c]&&C.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(v){this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),_i(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Et(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var c;for(c in this._layers)this._layers[c].remove();for(c in this._panes)_i(this._panes[c]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(c,v){var C="leaflet-pane"+(c?" leaflet-"+c.replace("Pane","")+"-pane":""),I=li("div",C,v||this._mapPane);return c&&(this._panes[c]=I),I},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var c=this.getPixelBounds(),v=this.unproject(c.getBottomLeft()),C=this.unproject(c.getTopRight());return new xi(v,C)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(c,v,C){c=hi(c),C=bt(C||[0,0]);var I=this.getZoom()||0,q=this.getMinZoom(),re=this.getMaxZoom(),ve=c.getNorthWest(),De=c.getSouthEast(),Ve=this.getSize().subtract(C),Ke=Pi(this.project(De,I),this.project(ve,I)).getSize(),ht=Ae.any3d?this.options.zoomSnap:1,It=Ve.x/Ke.x,Jt=Ve.y/Ke.y,yr=v?Math.max(It,Jt):Math.min(It,Jt);return I=this.getScaleZoom(yr,I),ht&&(I=Math.round(I/(ht/100))*(ht/100),I=v?Math.ceil(I/ht)*ht:Math.floor(I/ht)*ht),Math.max(q,Math.min(re,I))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new dt(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(c,v){var C=this._getTopLeftPoint(c,v);return new Qt(C,C.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(c){return this.options.crs.getProjectedBounds(c===void 0?this.getZoom():c)},getPane:function(c){return typeof c=="string"?this._panes[c]:c},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(c,v){var C=this.options.crs;return v=v===void 0?this._zoom:v,C.scale(c)/C.scale(v)},getScaleZoom:function(c,v){var C=this.options.crs;v=v===void 0?this._zoom:v;var I=C.zoom(c*C.scale(v));return isNaN(I)?1/0:I},project:function(c,v){return v=v===void 0?this._zoom:v,this.options.crs.latLngToPoint(gt(c),v)},unproject:function(c,v){return v=v===void 0?this._zoom:v,this.options.crs.pointToLatLng(bt(c),v)},layerPointToLatLng:function(c){var v=bt(c).add(this.getPixelOrigin());return this.unproject(v)},latLngToLayerPoint:function(c){var v=this.project(gt(c))._round();return v._subtract(this.getPixelOrigin())},wrapLatLng:function(c){return this.options.crs.wrapLatLng(gt(c))},wrapLatLngBounds:function(c){return this.options.crs.wrapLatLngBounds(hi(c))},distance:function(c,v){return this.options.crs.distance(gt(c),gt(v))},containerPointToLayerPoint:function(c){return bt(c).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(c){return bt(c).add(this._getMapPanePos())},containerPointToLatLng:function(c){var v=this.containerPointToLayerPoint(bt(c));return this.layerPointToLatLng(v)},latLngToContainerPoint:function(c){return this.layerPointToContainerPoint(this.latLngToLayerPoint(gt(c)))},mouseEventToContainerPoint:function(c){return fo(c,this._container)},mouseEventToLayerPoint:function(c){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(c))},mouseEventToLatLng:function(c){return this.layerPointToLatLng(this.mouseEventToLayerPoint(c))},_initContainer:function(c){var v=this._container=Ma(c);if(v){if(v._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");wt(v,"scroll",this._onScroll,this),this._containerId=T(v)},_initLayout:function(){var c=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ae.any3d,Vt(c,"leaflet-container"+(Ae.touch?" leaflet-touch":"")+(Ae.retina?" leaflet-retina":"")+(Ae.ielt9?" leaflet-oldie":"")+(Ae.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var v=Wr(c,"position");v!=="absolute"&&v!=="relative"&&v!=="fixed"&&v!=="sticky"&&(c.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var c=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ji(this._mapPane,new dt(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Vt(c.markerPane,"leaflet-zoom-hide"),Vt(c.shadowPane,"leaflet-zoom-hide"))},_resetView:function(c,v,C){Ji(this._mapPane,new dt(0,0));var I=!this._loaded;this._loaded=!0,v=this._limitZoom(v),this.fire("viewprereset");var q=this._zoom!==v;this._moveStart(q,C)._move(c,v)._moveEnd(q),this.fire("viewreset"),I&&this.fire("load")},_moveStart:function(c,v){return c&&this.fire("zoomstart"),v||this.fire("movestart"),this},_move:function(c,v,C,I){v===void 0&&(v=this._zoom);var q=this._zoom!==v;return this._zoom=v,this._lastCenter=c,this._pixelOrigin=this._getNewPixelOrigin(c),I?C&&C.pinch&&this.fire("zoom",C):((q||C&&C.pinch)&&this.fire("zoom",C),this.fire("move",C)),this},_moveEnd:function(c){return c&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Et(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(c){Ji(this._mapPane,this._getMapPanePos().subtract(c))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(c){this._targets={},this._targets[T(this._container)]=this;var v=c?ct:wt;v(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&v(window,"resize",this._onResize,this),Ae.any3d&&this.options.transform3DLimit&&(c?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Et(this._resizeRequest),this._resizeRequest=Tt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var c=this._getMapPanePos();Math.max(Math.abs(c.x),Math.abs(c.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(c,v){for(var C=[],I,q=v==="mouseout"||v==="mouseover",re=c.target||c.srcElement,ve=!1;re;){if(I=this._targets[T(re)],I&&(v==="click"||v==="preclick")&&this._draggableMoved(I)){ve=!0;break}if(I&&I.listens(v,!0)&&(q&&!Ln(re,c)||(C.push(I),q))||re===this._container)break;re=re.parentNode}return!C.length&&!ve&&!q&&this.listens(v,!0)&&(C=[this]),C},_isClickDisabled:function(c){for(;c&&c!==this._container;){if(c._leaflet_disable_click)return!0;c=c.parentNode}},_handleDOMEvent:function(c){var v=c.target||c.srcElement;if(!(!this._loaded||v._leaflet_disable_events||c.type==="click"&&this._isClickDisabled(v))){var C=c.type;C==="mousedown"&&Nt(v),this._fireDOMEvent(c,C)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(c,v,C){if(c.type==="click"){var I=p({},c);I.type="preclick",this._fireDOMEvent(I,I.type,C)}var q=this._findEventTargets(c,v);if(C){for(var re=[],ve=0;ve<C.length;ve++)C[ve].listens(v,!0)&&re.push(C[ve]);q=re.concat(q)}if(q.length){v==="contextmenu"&&ei(c);var De=q[0],Ve={originalEvent:c};if(c.type!=="keypress"&&c.type!=="keydown"&&c.type!=="keyup"){var Ke=De.getLatLng&&(!De._radius||De._radius<=10);Ve.containerPoint=Ke?this.latLngToContainerPoint(De.getLatLng()):this.mouseEventToContainerPoint(c),Ve.layerPoint=this.containerPointToLayerPoint(Ve.containerPoint),Ve.latlng=Ke?De.getLatLng():this.layerPointToLatLng(Ve.layerPoint)}for(ve=0;ve<q.length;ve++)if(q[ve].fire(v,Ve,!0),Ve.originalEvent._stopped||q[ve].options.bubblingMouseEvents===!1&&Pe(this._mouseEvents,v)!==-1)return}},_draggableMoved:function(c){return c=c.dragging&&c.dragging.enabled()?c:this,c.dragging&&c.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var c=0,v=this._handlers.length;c<v;c++)this._handlers[c].disable()},whenReady:function(c,v){return this._loaded?c.call(v||this,{target:this}):this.on("load",c,v),this},_getMapPanePos:function(){return Qa(this._mapPane)||new dt(0,0)},_moved:function(){var c=this._getMapPanePos();return c&&!c.equals([0,0])},_getTopLeftPoint:function(c,v){var C=c&&v!==void 0?this._getNewPixelOrigin(c,v):this.getPixelOrigin();return C.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(c,v){var C=this.getSize()._divideBy(2);return this.project(c,v)._subtract(C)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(c,v,C){var I=this._getNewPixelOrigin(C,v);return this.project(c,v)._subtract(I)},_latLngBoundsToNewLayerBounds:function(c,v,C){var I=this._getNewPixelOrigin(C,v);return Pi([this.project(c.getSouthWest(),v)._subtract(I),this.project(c.getNorthWest(),v)._subtract(I),this.project(c.getSouthEast(),v)._subtract(I),this.project(c.getNorthEast(),v)._subtract(I)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(c){return this.latLngToLayerPoint(c).subtract(this._getCenterLayerPoint())},_limitCenter:function(c,v,C){if(!C)return c;var I=this.project(c,v),q=this.getSize().divideBy(2),re=new Qt(I.subtract(q),I.add(q)),ve=this._getBoundsOffset(re,C,v);return Math.abs(ve.x)<=1&&Math.abs(ve.y)<=1?c:this.unproject(I.add(ve),v)},_limitOffset:function(c,v){if(!v)return c;var C=this.getPixelBounds(),I=new Qt(C.min.add(c),C.max.add(c));return c.add(this._getBoundsOffset(I,v))},_getBoundsOffset:function(c,v,C){var I=Pi(this.project(v.getNorthEast(),C),this.project(v.getSouthWest(),C)),q=I.min.subtract(c.min),re=I.max.subtract(c.max),ve=this._rebound(q.x,-re.x),De=this._rebound(q.y,-re.y);return new dt(ve,De)},_rebound:function(c,v){return c+v>0?Math.round(c-v)/2:Math.max(0,Math.ceil(c))-Math.max(0,Math.floor(v))},_limitZoom:function(c){var v=this.getMinZoom(),C=this.getMaxZoom(),I=Ae.any3d?this.options.zoomSnap:1;return I&&(c=Math.round(c/I)*I),Math.max(v,Math.min(C,c))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ki(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(c,v){var C=this._getCenterOffset(c)._trunc();return(v&&v.animate)!==!0&&!this.getSize().contains(C)?!1:(this.panBy(C,v),!0)},_createAnimProxy:function(){var c=this._proxy=li("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(c),this.on("zoomanim",function(v){var C=Ps,I=this._proxy.style[C];sa(this._proxy,this.project(v.center,v.zoom),this.getZoomScale(v.zoom,1)),I===this._proxy.style[C]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){_i(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var c=this.getCenter(),v=this.getZoom();sa(this._proxy,this.project(c,v),this.getZoomScale(v,1))},_catchTransitionEnd:function(c){this._animatingZoom&&c.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(c,v,C){if(this._animatingZoom)return!0;if(C=C||{},!this._zoomAnimated||C.animate===!1||this._nothingToAnimate()||Math.abs(v-this._zoom)>this.options.zoomAnimationThreshold)return!1;var I=this.getZoomScale(v),q=this._getCenterOffset(c)._divideBy(1-1/I);return C.animate!==!0&&!this.getSize().contains(q)?!1:(Tt(function(){this._moveStart(!0,C.noMoveStart||!1)._animateZoom(c,v,!0)},this),!0)},_animateZoom:function(c,v,C,I){this._mapPane&&(C&&(this._animatingZoom=!0,this._animateToCenter=c,this._animateToZoom=v,Vt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:c,zoom:v,noUpdate:I}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(f(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ki(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ci(c,v){return new Xt(c,v)}var zr=ni.extend({options:{position:"topright"},initialize:function(c){ie(this,c)},getPosition:function(){return this.options.position},setPosition:function(c){var v=this._map;return v&&v.removeControl(this),this.options.position=c,v&&v.addControl(this),this},getContainer:function(){return this._container},addTo:function(c){this.remove(),this._map=c;var v=this._container=this.onAdd(c),C=this.getPosition(),I=c._controlCorners[C];return Vt(v,"leaflet-control"),C.indexOf("bottom")!==-1?I.insertBefore(v,I.firstChild):I.appendChild(v),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(_i(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(c){this._map&&c&&c.screenX>0&&c.screenY>0&&this._map.getContainer().focus()}}),$t=function(c){return new zr(c)};Xt.include({addControl:function(c){return c.addTo(this),this},removeControl:function(c){return c.remove(),this},_initControlPos:function(){var c=this._controlCorners={},v="leaflet-",C=this._controlContainer=li("div",v+"control-container",this._container);function I(q,re){var ve=v+q+" "+v+re;c[q+re]=li("div",ve,C)}I("top","left"),I("top","right"),I("bottom","left"),I("bottom","right")},_clearControlPos:function(){for(var c in this._controlCorners)_i(this._controlCorners[c]);_i(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ft=zr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(c,v,C,I){return C<I?-1:I<C?1:0}},initialize:function(c,v,C){ie(this,C),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var I in c)this._addLayer(c[I],I);for(I in v)this._addLayer(v[I],I,!0)},onAdd:function(c){this._initLayout(),this._update(),this._map=c,c.on("zoomend",this._checkDisabledLayers,this);for(var v=0;v<this._layers.length;v++)this._layers[v].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(c){return zr.prototype.addTo.call(this,c),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(c,v){return this._addLayer(c,v),this._map?this._update():this},addOverlay:function(c,v){return this._addLayer(c,v,!0),this._map?this._update():this},removeLayer:function(c){c.off("add remove",this._onLayerChange,this);var v=this._getLayer(T(c));return v&&this._layers.splice(this._layers.indexOf(v),1),this._map?this._update():this},expand:function(){Vt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var c=this._map.getSize().y-(this._container.offsetTop+50);return c<this._section.clientHeight?(Vt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=c+"px"):Ki(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ki(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var c="leaflet-control-layers",v=this._container=li("div",c),C=this.options.collapsed;v.setAttribute("aria-haspopup",!0),bn(v),La(v);var I=this._section=li("section",c+"-list");C&&(this._map.on("click",this.collapse,this),wt(v,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var q=this._layersLink=li("a",c+"-toggle",v);q.href="#",q.title="Layers",q.setAttribute("role","button"),wt(q,{keydown:function(re){re.keyCode===13&&this._expandSafely()},click:function(re){ei(re),this._expandSafely()}},this),C||this.expand(),this._baseLayersList=li("div",c+"-base",I),this._separator=li("div",c+"-separator",I),this._overlaysList=li("div",c+"-overlays",I),v.appendChild(I)},_getLayer:function(c){for(var v=0;v<this._layers.length;v++)if(this._layers[v]&&T(this._layers[v].layer)===c)return this._layers[v]},_addLayer:function(c,v,C){this._map&&c.on("add remove",this._onLayerChange,this),this._layers.push({layer:c,name:v,overlay:C}),this.options.sortLayers&&this._layers.sort(f(function(I,q){return this.options.sortFunction(I.layer,q.layer,I.name,q.name)},this)),this.options.autoZIndex&&c.setZIndex&&(this._lastZIndex++,c.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ka(this._baseLayersList),Ka(this._overlaysList),this._layerControlInputs=[];var c,v,C,I,q=0;for(C=0;C<this._layers.length;C++)I=this._layers[C],this._addItem(I),v=v||I.overlay,c=c||!I.overlay,q+=I.overlay?0:1;return this.options.hideSingleBase&&(c=c&&q>1,this._baseLayersList.style.display=c?"":"none"),this._separator.style.display=v&&c?"":"none",this},_onLayerChange:function(c){this._handlingClick||this._update();var v=this._getLayer(T(c.target)),C=v.overlay?c.type==="add"?"overlayadd":"overlayremove":c.type==="add"?"baselayerchange":null;C&&this._map.fire(C,v)},_createRadioElement:function(c,v){var C='<input type="radio" class="leaflet-control-layers-selector" name="'+c+'"'+(v?' checked="checked"':"")+"/>",I=document.createElement("div");return I.innerHTML=C,I.firstChild},_addItem:function(c){var v=document.createElement("label"),C=this._map.hasLayer(c.layer),I;c.overlay?(I=document.createElement("input"),I.type="checkbox",I.className="leaflet-control-layers-selector",I.defaultChecked=C):I=this._createRadioElement("leaflet-base-layers_"+T(this),C),this._layerControlInputs.push(I),I.layerId=T(c.layer),wt(I,"click",this._onInputClick,this);var q=document.createElement("span");q.innerHTML=" "+c.name;var re=document.createElement("span");v.appendChild(re),re.appendChild(I),re.appendChild(q);var ve=c.overlay?this._overlaysList:this._baseLayersList;return ve.appendChild(v),this._checkDisabledLayers(),v},_onInputClick:function(){if(!this._preventClick){var c=this._layerControlInputs,v,C,I=[],q=[];this._handlingClick=!0;for(var re=c.length-1;re>=0;re--)v=c[re],C=this._getLayer(v.layerId).layer,v.checked?I.push(C):v.checked||q.push(C);for(re=0;re<q.length;re++)this._map.hasLayer(q[re])&&this._map.removeLayer(q[re]);for(re=0;re<I.length;re++)this._map.hasLayer(I[re])||this._map.addLayer(I[re]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var c=this._layerControlInputs,v,C,I=this._map.getZoom(),q=c.length-1;q>=0;q--)v=c[q],C=this._getLayer(v.layerId).layer,v.disabled=C.options.minZoom!==void 0&&I<C.options.minZoom||C.options.maxZoom!==void 0&&I>C.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var c=this._section;this._preventClick=!0,wt(c,"click",ei),this.expand();var v=this;setTimeout(function(){ct(c,"click",ei),v._preventClick=!1})}}),zs=function(c,v,C){return new Ft(c,v,C)},ti=zr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(c){var v="leaflet-control-zoom",C=li("div",v+" leaflet-bar"),I=this.options;return this._zoomInButton=this._createButton(I.zoomInText,I.zoomInTitle,v+"-in",C,this._zoomIn),this._zoomOutButton=this._createButton(I.zoomOutText,I.zoomOutTitle,v+"-out",C,this._zoomOut),this._updateDisabled(),c.on("zoomend zoomlevelschange",this._updateDisabled,this),C},onRemove:function(c){c.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(c){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(c.shiftKey?3:1))},_zoomOut:function(c){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(c.shiftKey?3:1))},_createButton:function(c,v,C,I,q){var re=li("a",C,I);return re.innerHTML=c,re.href="#",re.title=v,re.setAttribute("role","button"),re.setAttribute("aria-label",v),bn(re),wt(re,"click",ln),wt(re,"click",q,this),wt(re,"click",this._refocusOnMap,this),re},_updateDisabled:function(){var c=this._map,v="leaflet-disabled";Ki(this._zoomInButton,v),Ki(this._zoomOutButton,v),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||c._zoom===c.getMinZoom())&&(Vt(this._zoomOutButton,v),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||c._zoom===c.getMaxZoom())&&(Vt(this._zoomInButton,v),this._zoomInButton.setAttribute("aria-disabled","true"))}});Xt.mergeOptions({zoomControl:!0}),Xt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ti,this.addControl(this.zoomControl))});var mo=function(c){return new ti(c)},cn=zr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(c){var v="leaflet-control-scale",C=li("div",v),I=this.options;return this._addScales(I,v+"-line",C),c.on(I.updateWhenIdle?"moveend":"move",this._update,this),c.whenReady(this._update,this),C},onRemove:function(c){c.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(c,v,C){c.metric&&(this._mScale=li("div",v,C)),c.imperial&&(this._iScale=li("div",v,C))},_update:function(){var c=this._map,v=c.getSize().y/2,C=c.distance(c.containerPointToLatLng([0,v]),c.containerPointToLatLng([this.options.maxWidth,v]));this._updateScales(C)},_updateScales:function(c){this.options.metric&&c&&this._updateMetric(c),this.options.imperial&&c&&this._updateImperial(c)},_updateMetric:function(c){var v=this._getRoundNum(c),C=v<1e3?v+" m":v/1e3+" km";this._updateScale(this._mScale,C,v/c)},_updateImperial:function(c){var v=c*3.2808399,C,I,q;v>5280?(C=v/5280,I=this._getRoundNum(C),this._updateScale(this._iScale,I+" mi",I/C)):(q=this._getRoundNum(v),this._updateScale(this._iScale,q+" ft",q/v))},_updateScale:function(c,v,C){c.style.width=Math.round(this.options.maxWidth*C)+"px",c.innerHTML=v},_getRoundNum:function(c){var v=Math.pow(10,(Math.floor(c)+"").length-1),C=c/v;return C=C>=10?10:C>=5?5:C>=3?3:C>=2?2:1,v*C}}),Is=function(c){return new cn(c)},Oa='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ko=zr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ae.inlineSvg?Oa+" ":"")+"Leaflet</a>"},initialize:function(c){ie(this,c),this._attributions={}},onAdd:function(c){c.attributionControl=this,this._container=li("div","leaflet-control-attribution"),bn(this._container);for(var v in c._layers)c._layers[v].getAttribution&&this.addAttribution(c._layers[v].getAttribution());return this._update(),c.on("layeradd",this._addAttribution,this),this._container},onRemove:function(c){c.off("layeradd",this._addAttribution,this)},_addAttribution:function(c){c.layer.getAttribution&&(this.addAttribution(c.layer.getAttribution()),c.layer.once("remove",function(){this.removeAttribution(c.layer.getAttribution())},this))},setPrefix:function(c){return this.options.prefix=c,this._update(),this},addAttribution:function(c){return c?(this._attributions[c]||(this._attributions[c]=0),this._attributions[c]++,this._update(),this):this},removeAttribution:function(c){return c?(this._attributions[c]&&(this._attributions[c]--,this._update()),this):this},_update:function(){if(this._map){var c=[];for(var v in this._attributions)this._attributions[v]&&c.push(v);var C=[];this.options.prefix&&C.push(this.options.prefix),c.length&&C.push(c.join(", ")),this._container.innerHTML=C.join(' <span aria-hidden="true">|</span> ')}}});Xt.mergeOptions({attributionControl:!0}),Xt.addInitHook(function(){this.options.attributionControl&&new Ko().addTo(this)});var go=function(c){return new Ko(c)};zr.Layers=Ft,zr.Zoom=ti,zr.Scale=cn,zr.Attribution=Ko,$t.layers=zs,$t.zoom=mo,$t.scale=Is,$t.attribution=go;var xn=ni.extend({initialize:function(c){this._map=c},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});xn.addTo=function(c,v){return c.addHandler(v,this),this};var Qu={Events:ai},Rl=Ae.touch?"touchstart mousedown":"mousedown",Qi=Ct.extend({options:{clickTolerance:3},initialize:function(c,v,C,I){ie(this,I),this._element=c,this._dragStartTarget=v||c,this._preventOutline=C},enable:function(){this._enabled||(wt(this._dragStartTarget,Rl,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Qi._dragging===this&&this.finishDrag(!0),ct(this._dragStartTarget,Rl,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(c){if(this._enabled&&(this._moved=!1,!Ho(this._element,"leaflet-zoom-anim"))){if(c.touches&&c.touches.length!==1){Qi._dragging===this&&this.finishDrag();return}if(!(Qi._dragging||c.shiftKey||c.which!==1&&c.button!==1&&!c.touches)&&(Qi._dragging=this,this._preventOutline&&Nt(this._element),ho(),oa(),!this._moving)){this.fire("down");var v=c.touches?c.touches[0]:c,C=wc(this._element);this._startPoint=new dt(v.clientX,v.clientY),this._startPos=Qa(this._element),this._parentScale=po(C);var I=c.type==="mousedown";wt(document,I?"mousemove":"touchmove",this._onMove,this),wt(document,I?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(c){if(this._enabled){if(c.touches&&c.touches.length>1){this._moved=!0;return}var v=c.touches&&c.touches.length===1?c.touches[0]:c,C=new dt(v.clientX,v.clientY)._subtract(this._startPoint);!C.x&&!C.y||Math.abs(C.x)+Math.abs(C.y)<this.options.clickTolerance||(C.x/=this._parentScale.x,C.y/=this._parentScale.y,ei(c),this._moved||(this.fire("dragstart"),this._moved=!0,Vt(document.body,"leaflet-dragging"),this._lastTarget=c.target||c.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Vt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(C),this._moving=!0,this._lastEvent=c,this._updatePosition())}},_updatePosition:function(){var c={originalEvent:this._lastEvent};this.fire("predrag",c),Ji(this._element,this._newPos),this.fire("drag",c)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(c){Ki(document.body,"leaflet-dragging"),this._lastTarget&&(Ki(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ct(document,"mousemove touchmove",this._onMove,this),ct(document,"mouseup touchend touchcancel",this._onUp,this),es(),za();var v=this._moved&&this._moving;this._moving=!1,Qi._dragging=!1,v&&this.fire("dragend",{noInertia:c,distance:this._newPos.distanceTo(this._startPos)})}});function Dn(c,v,C){var I,q=[1,4,2,8],re,ve,De,Ve,Ke,ht,It,Jt;for(re=0,ht=c.length;re<ht;re++)c[re]._code=ua(c[re],v);for(De=0;De<4;De++){for(It=q[De],I=[],re=0,ht=c.length,ve=ht-1;re<ht;ve=re++)Ve=c[re],Ke=c[ve],Ve._code&It?Ke._code&It||(Jt=ca(Ke,Ve,It,v,C),Jt._code=ua(Jt,v),I.push(Jt)):(Ke._code&It&&(Jt=ca(Ke,Ve,It,v,C),Jt._code=ua(Jt,v),I.push(Jt)),I.push(Ve));c=I}return c}function Ii(c,v){var C,I,q,re,ve,De,Ve,Ke,ht;if(!c||c.length===0)throw new Error("latlngs not passed");kr(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var It=gt([0,0]),Jt=hi(c),yr=Jt.getNorthWest().distanceTo(Jt.getSouthWest())*Jt.getNorthEast().distanceTo(Jt.getNorthWest());yr<1700&&(It=la(c));var ar=c.length,hn=[];for(C=0;C<ar;C++){var Zr=gt(c[C]);hn.push(v.project(gt([Zr.lat-It.lat,Zr.lng-It.lng])))}for(De=Ve=Ke=0,C=0,I=ar-1;C<ar;I=C++)q=hn[C],re=hn[I],ve=q.y*re.x-re.y*q.x,Ve+=(q.x+re.x)*ve,Ke+=(q.y+re.y)*ve,De+=ve*3;De===0?ht=hn[0]:ht=[Ve/De,Ke/De];var Kn=v.unproject(bt(ht));return gt([Kn.lat+It.lat,Kn.lng+It.lng])}function la(c){for(var v=0,C=0,I=0,q=0;q<c.length;q++){var re=gt(c[q]);v+=re.lat,C+=re.lng,I++}return gt([v/I,C/I])}var Bl={__proto__:null,clipPolygon:Dn,polygonCenter:Ii,centroid:la};function Ls(c,v){if(!v||!c.length)return c.slice();var C=v*v;return c=ed(c,C),c=Fl(c,C),c}function Fi(c,v,C){return Math.sqrt(Hn(c,v,C,!0))}function Tc(c,v,C){return Hn(c,v,C)}function Fl(c,v){var C=c.length,I=typeof Uint8Array!="undefined"?Uint8Array:Array,q=new I(C);q[0]=q[C-1]=1,Jo(c,q,v,0,C-1);var re,ve=[];for(re=0;re<C;re++)q[re]&&ve.push(c[re]);return ve}function Jo(c,v,C,I,q){var re=0,ve,De,Ve;for(De=I+1;De<=q-1;De++)Ve=Hn(c[De],c[I],c[q],!0),Ve>re&&(ve=De,re=Ve);re>C&&(v[ve]=1,Jo(c,v,C,I,ve),Jo(c,v,C,ve,q))}function ed(c,v){for(var C=[c[0]],I=1,q=0,re=c.length;I<re;I++)_o(c[I],c[q])>v&&(C.push(c[I]),q=I);return q<re-1&&C.push(c[re-1]),C}var ts;function yo(c,v,C,I,q){var re=I?ts:ua(c,C),ve=ua(v,C),De,Ve,Ke;for(ts=ve;;){if(!(re|ve))return[c,v];if(re&ve)return!1;De=re||ve,Ve=ca(c,v,De,C,q),Ke=ua(Ve,C),De===re?(c=Ve,re=Ke):(v=Ve,ve=Ke)}}function ca(c,v,C,I,q){var re=v.x-c.x,ve=v.y-c.y,De=I.min,Ve=I.max,Ke,ht;return C&8?(Ke=c.x+re*(Ve.y-c.y)/ve,ht=Ve.y):C&4?(Ke=c.x+re*(De.y-c.y)/ve,ht=De.y):C&2?(Ke=Ve.x,ht=c.y+ve*(Ve.x-c.x)/re):C&1&&(Ke=De.x,ht=c.y+ve*(De.x-c.x)/re),new dt(Ke,ht,q)}function ua(c,v){var C=0;return c.x<v.min.x?C|=1:c.x>v.max.x&&(C|=2),c.y<v.min.y?C|=4:c.y>v.max.y&&(C|=8),C}function _o(c,v){var C=v.x-c.x,I=v.y-c.y;return C*C+I*I}function Hn(c,v,C,I){var q=v.x,re=v.y,ve=C.x-q,De=C.y-re,Ve=ve*ve+De*De,Ke;return Ve>0&&(Ke=((c.x-q)*ve+(c.y-re)*De)/Ve,Ke>1?(q=C.x,re=C.y):Ke>0&&(q+=ve*Ke,re+=De*Ke)),ve=c.x-q,De=c.y-re,I?ve*ve+De*De:new dt(q,re)}function kr(c){return!_e(c[0])||typeof c[0][0]!="object"&&typeof c[0][0]!="undefined"}function nr(c){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),kr(c)}function jl(c,v){var C,I,q,re,ve,De,Ve,Ke;if(!c||c.length===0)throw new Error("latlngs not passed");kr(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var ht=gt([0,0]),It=hi(c),Jt=It.getNorthWest().distanceTo(It.getSouthWest())*It.getNorthEast().distanceTo(It.getNorthWest());Jt<1700&&(ht=la(c));var yr=c.length,ar=[];for(C=0;C<yr;C++){var hn=gt(c[C]);ar.push(v.project(gt([hn.lat-ht.lat,hn.lng-ht.lng])))}for(C=0,I=0;C<yr-1;C++)I+=ar[C].distanceTo(ar[C+1])/2;if(I===0)Ke=ar[0];else for(C=0,re=0;C<yr-1;C++)if(ve=ar[C],De=ar[C+1],q=ve.distanceTo(De),re+=q,re>I){Ve=(re-I)/q,Ke=[De.x-Ve*(De.x-ve.x),De.y-Ve*(De.y-ve.y)];break}var Zr=v.unproject(bt(Ke));return gt([Zr.lat+ht.lat,Zr.lng+ht.lng])}var Ds={__proto__:null,simplify:Ls,pointToSegmentDistance:Fi,closestPointOnSegment:Tc,clipSegment:yo,_getEdgeIntersection:ca,_getBitCode:ua,_sqClosestPointOnSegment:Hn,isFlat:kr,_flat:nr,polylineCenter:jl},is={project:function(c){return new dt(c.lng,c.lat)},unproject:function(c){return new Zt(c.y,c.x)},bounds:new Qt([-180,-90],[180,90])},da={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Qt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(c){var v=Math.PI/180,C=this.R,I=c.lat*v,q=this.R_MINOR/C,re=Math.sqrt(1-q*q),ve=re*Math.sin(I),De=Math.tan(Math.PI/4-I/2)/Math.pow((1-ve)/(1+ve),re/2);return I=-C*Math.log(Math.max(De,1e-10)),new dt(c.lng*v*C,I)},unproject:function(c){for(var v=180/Math.PI,C=this.R,I=this.R_MINOR/C,q=Math.sqrt(1-I*I),re=Math.exp(-c.y/C),ve=Math.PI/2-2*Math.atan(re),De=0,Ve=.1,Ke;De<15&&Math.abs(Ve)>1e-7;De++)Ke=q*Math.sin(ve),Ke=Math.pow((1-Ke)/(1+Ke),q/2),Ve=Math.PI/2-2*Math.atan(re*Ke)-ve,ve+=Ve;return new Zt(ve*v,c.x*v/C)}},td={__proto__:null,LonLat:is,Mercator:da,SphericalMercator:sn},Qo=p({},yi,{code:"EPSG:3395",projection:da,transformation:(function(){var c=.5/(Math.PI*da.R);return cr(c,.5,-c,.5)})()}),Cc=p({},yi,{code:"EPSG:4326",projection:is,transformation:cr(1/180,1,-1/180,.5)}),Os=p({},pr,{projection:is,transformation:cr(1,0,-1,0),scale:function(c){return Math.pow(2,c)},zoom:function(c){return Math.log(c)/Math.LN2},distance:function(c,v){var C=v.lng-c.lng,I=v.lat-c.lat;return Math.sqrt(C*C+I*I)},infinite:!0});pr.Earth=yi,pr.EPSG3395=Qo,pr.EPSG3857=Mn,pr.EPSG900913=fr,pr.EPSG4326=Cc,pr.Simple=Os;var Jr=Ct.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(c){return c.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(c){return c&&c.removeLayer(this),this},getPane:function(c){return this._map.getPane(c?this.options[c]||c:this.options.pane)},addInteractiveTarget:function(c){return this._map._targets[T(c)]=this,this},removeInteractiveTarget:function(c){return delete this._map._targets[T(c)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(c){var v=c.target;if(v.hasLayer(this)){if(this._map=v,this._zoomAnimated=v._zoomAnimated,this.getEvents){var C=this.getEvents();v.on(C,this),this.once("remove",function(){v.off(C,this)},this)}this.onAdd(v),this.fire("add"),v.fire("layeradd",{layer:this})}}});Xt.include({addLayer:function(c){if(!c._layerAdd)throw new Error("The provided object is not a Layer.");var v=T(c);return this._layers[v]?this:(this._layers[v]=c,c._mapToAdd=this,c.beforeAdd&&c.beforeAdd(this),this.whenReady(c._layerAdd,c),this)},removeLayer:function(c){var v=T(c);return this._layers[v]?(this._loaded&&c.onRemove(this),delete this._layers[v],this._loaded&&(this.fire("layerremove",{layer:c}),c.fire("remove")),c._map=c._mapToAdd=null,this):this},hasLayer:function(c){return T(c)in this._layers},eachLayer:function(c,v){for(var C in this._layers)c.call(v,this._layers[C]);return this},_addLayers:function(c){c=c?_e(c)?c:[c]:[];for(var v=0,C=c.length;v<C;v++)this.addLayer(c[v])},_addZoomLimit:function(c){(!isNaN(c.options.maxZoom)||!isNaN(c.options.minZoom))&&(this._zoomBoundLayers[T(c)]=c,this._updateZoomLevels())},_removeZoomLimit:function(c){var v=T(c);this._zoomBoundLayers[v]&&(delete this._zoomBoundLayers[v],this._updateZoomLevels())},_updateZoomLevels:function(){var c=1/0,v=-1/0,C=this._getZoomSpan();for(var I in this._zoomBoundLayers){var q=this._zoomBoundLayers[I].options;c=q.minZoom===void 0?c:Math.min(c,q.minZoom),v=q.maxZoom===void 0?v:Math.max(v,q.maxZoom)}this._layersMaxZoom=v===-1/0?void 0:v,this._layersMinZoom=c===1/0?void 0:c,C!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var rs=Jr.extend({initialize:function(c,v){ie(this,v),this._layers={};var C,I;if(c)for(C=0,I=c.length;C<I;C++)this.addLayer(c[C])},addLayer:function(c){var v=this.getLayerId(c);return this._layers[v]=c,this._map&&this._map.addLayer(c),this},removeLayer:function(c){var v=c in this._layers?c:this.getLayerId(c);return this._map&&this._layers[v]&&this._map.removeLayer(this._layers[v]),delete this._layers[v],this},hasLayer:function(c){var v=typeof c=="number"?c:this.getLayerId(c);return v in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(c){var v=Array.prototype.slice.call(arguments,1),C,I;for(C in this._layers)I=this._layers[C],I[c]&&I[c].apply(I,v);return this},onAdd:function(c){this.eachLayer(c.addLayer,c)},onRemove:function(c){this.eachLayer(c.removeLayer,c)},eachLayer:function(c,v){for(var C in this._layers)c.call(v,this._layers[C]);return this},getLayer:function(c){return this._layers[c]},getLayers:function(){var c=[];return this.eachLayer(c.push,c),c},setZIndex:function(c){return this.invoke("setZIndex",c)},getLayerId:function(c){return T(c)}}),kc=function(c,v){return new rs(c,v)},On=rs.extend({addLayer:function(c){return this.hasLayer(c)?this:(c.addEventParent(this),rs.prototype.addLayer.call(this,c),this.fire("layeradd",{layer:c}))},removeLayer:function(c){return this.hasLayer(c)?(c in this._layers&&(c=this._layers[c]),c.removeEventParent(this),rs.prototype.removeLayer.call(this,c),this.fire("layerremove",{layer:c})):this},setStyle:function(c){return this.invoke("setStyle",c)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var c=new xi;for(var v in this._layers){var C=this._layers[v];c.extend(C.getBounds?C.getBounds():C.getLatLng())}return c}}),Nl=function(c,v){return new On(c,v)},Ra=ni.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(c){ie(this,c)},createIcon:function(c){return this._createIcon("icon",c)},createShadow:function(c){return this._createIcon("shadow",c)},_createIcon:function(c,v){var C=this._getIconUrl(c);if(!C){if(c==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var I=this._createImg(C,v&&v.tagName==="IMG"?v:null);return this._setIconStyles(I,c),(this.options.crossOrigin||this.options.crossOrigin==="")&&(I.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),I},_setIconStyles:function(c,v){var C=this.options,I=C[v+"Size"];typeof I=="number"&&(I=[I,I]);var q=bt(I),re=bt(v==="shadow"&&C.shadowAnchor||C.iconAnchor||q&&q.divideBy(2,!0));c.className="leaflet-marker-"+v+" "+(C.className||""),re&&(c.style.marginLeft=-re.x+"px",c.style.marginTop=-re.y+"px"),q&&(c.style.width=q.x+"px",c.style.height=q.y+"px")},_createImg:function(c,v){return v=v||document.createElement("img"),v.src=c,v},_getIconUrl:function(c){return Ae.retina&&this.options[c+"RetinaUrl"]||this.options[c+"Url"]}});function Pc(c){return new Ra(c)}var Rs=Ra.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(c){return typeof Rs.imagePath!="string"&&(Rs.imagePath=this._detectIconPath()),(this.options.imagePath||Rs.imagePath)+Ra.prototype._getIconUrl.call(this,c)},_stripUrl:function(c){var v=function(C,I,q){var re=I.exec(C);return re&&re[q]};return c=v(c,/^url\((['"])?(.+)\1\)$/,2),c&&v(c,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var c=li("div","leaflet-default-icon-path",document.body),v=Wr(c,"background-image")||Wr(c,"backgroundImage");if(document.body.removeChild(c),v=this._stripUrl(v),v)return v;var C=document.querySelector('link[href$="leaflet.css"]');return C?C.href.substring(0,C.href.length-11-1):""}}),ql=xn.extend({initialize:function(c){this._marker=c},addHooks:function(){var c=this._marker._icon;this._draggable||(this._draggable=new Qi(c,c,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Vt(c,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ki(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(c){var v=this._marker,C=v._map,I=this._marker.options.autoPanSpeed,q=this._marker.options.autoPanPadding,re=Qa(v._icon),ve=C.getPixelBounds(),De=C.getPixelOrigin(),Ve=Pi(ve.min._subtract(De).add(q),ve.max._subtract(De).subtract(q));if(!Ve.contains(re)){var Ke=bt((Math.max(Ve.max.x,re.x)-Ve.max.x)/(ve.max.x-Ve.max.x)-(Math.min(Ve.min.x,re.x)-Ve.min.x)/(ve.min.x-Ve.min.x),(Math.max(Ve.max.y,re.y)-Ve.max.y)/(ve.max.y-Ve.max.y)-(Math.min(Ve.min.y,re.y)-Ve.min.y)/(ve.min.y-Ve.min.y)).multiplyBy(I);C.panBy(Ke,{animate:!1}),this._draggable._newPos._add(Ke),this._draggable._startPos._add(Ke),Ji(v._icon,this._draggable._newPos),this._onDrag(c),this._panRequest=Tt(this._adjustPan.bind(this,c))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(c){this._marker.options.autoPan&&(Et(this._panRequest),this._panRequest=Tt(this._adjustPan.bind(this,c)))},_onDrag:function(c){var v=this._marker,C=v._shadow,I=Qa(v._icon),q=v._map.layerPointToLatLng(I);C&&Ji(C,I),v._latlng=q,c.latlng=q,c.oldLatLng=this._oldLatLng,v.fire("move",c).fire("drag",c)},_onDragEnd:function(c){Et(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",c)}}),$n=Jr.extend({options:{icon:new Rs,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(c,v){ie(this,v),this._latlng=gt(c)},onAdd:function(c){this._zoomAnimated=this._zoomAnimated&&c.options.markerZoomAnimation,this._zoomAnimated&&c.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(c){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&c.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(c){var v=this._latlng;return this._latlng=gt(c),this.update(),this.fire("move",{oldLatLng:v,latlng:this._latlng})},setZIndexOffset:function(c){return this.options.zIndexOffset=c,this.update()},getIcon:function(){return this.options.icon},setIcon:function(c){return this.options.icon=c,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var c=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(c)}return this},_initIcon:function(){var c=this.options,v="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),C=c.icon.createIcon(this._icon),I=!1;C!==this._icon&&(this._icon&&this._removeIcon(),I=!0,c.title&&(C.title=c.title),C.tagName==="IMG"&&(C.alt=c.alt||"")),Vt(C,v),c.keyboard&&(C.tabIndex="0",C.setAttribute("role","button")),this._icon=C,c.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&wt(C,"focus",this._panOnFocus,this);var q=c.icon.createShadow(this._shadow),re=!1;q!==this._shadow&&(this._removeShadow(),re=!0),q&&(Vt(q,v),q.alt=""),this._shadow=q,c.opacity<1&&this._updateOpacity(),I&&this.getPane().appendChild(this._icon),this._initInteraction(),q&&re&&this.getPane(c.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ct(this._icon,"focus",this._panOnFocus,this),_i(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&_i(this._shadow),this._shadow=null},_setPos:function(c){this._icon&&Ji(this._icon,c),this._shadow&&Ji(this._shadow,c),this._zIndex=c.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(c){this._icon&&(this._icon.style.zIndex=this._zIndex+c)},_animateZoom:function(c){var v=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center).round();this._setPos(v)},_initInteraction:function(){if(this.options.interactive&&(Vt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),ql)){var c=this.options.draggable;this.dragging&&(c=this.dragging.enabled(),this.dragging.disable()),this.dragging=new ql(this),c&&this.dragging.enable()}},setOpacity:function(c){return this.options.opacity=c,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var c=this.options.opacity;this._icon&&Gr(this._icon,c),this._shadow&&Gr(this._shadow,c)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var c=this._map;if(c){var v=this.options.icon.options,C=v.iconSize?bt(v.iconSize):bt(0,0),I=v.iconAnchor?bt(v.iconAnchor):bt(0,0);c.panInside(this._latlng,{paddingTopLeft:I,paddingBottomRight:C.subtract(I)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Ec(c,v){return new $n(c,v)}var Yn=Jr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(c){this._renderer=c.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(c){return ie(this,c),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&c&&Object.prototype.hasOwnProperty.call(c,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ha=Yn.extend({options:{fill:!0,radius:10},initialize:function(c,v){ie(this,v),this._latlng=gt(c),this._radius=this.options.radius},setLatLng:function(c){var v=this._latlng;return this._latlng=gt(c),this.redraw(),this.fire("move",{oldLatLng:v,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(c){return this.options.radius=this._radius=c,this.redraw()},getRadius:function(){return this._radius},setStyle:function(c){var v=c&&c.radius||this._radius;return Yn.prototype.setStyle.call(this,c),this.setRadius(v),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var c=this._radius,v=this._radiusY||c,C=this._clickTolerance(),I=[c+C,v+C];this._pxBounds=new Qt(this._point.subtract(I),this._point.add(I))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(c){return c.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Ac(c,v){return new ha(c,v)}var Bs=ha.extend({initialize:function(c,v,C){if(typeof v=="number"&&(v=p({},C,{radius:v})),ie(this,v),this._latlng=gt(c),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(c){return this._mRadius=c,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var c=[this._radius,this._radiusY||this._radius];return new xi(this._map.layerPointToLatLng(this._point.subtract(c)),this._map.layerPointToLatLng(this._point.add(c)))},setStyle:Yn.prototype.setStyle,_project:function(){var c=this._latlng.lng,v=this._latlng.lat,C=this._map,I=C.options.crs;if(I.distance===yi.distance){var q=Math.PI/180,re=this._mRadius/yi.R/q,ve=C.project([v+re,c]),De=C.project([v-re,c]),Ve=ve.add(De).divideBy(2),Ke=C.unproject(Ve).lat,ht=Math.acos((Math.cos(re*q)-Math.sin(v*q)*Math.sin(Ke*q))/(Math.cos(v*q)*Math.cos(Ke*q)))/q;(isNaN(ht)||ht===0)&&(ht=re/Math.cos(Math.PI/180*v)),this._point=Ve.subtract(C.getPixelOrigin()),this._radius=isNaN(ht)?0:Ve.x-C.project([Ke,c-ht]).x,this._radiusY=Ve.y-ve.y}else{var It=I.unproject(I.project(this._latlng).subtract([this._mRadius,0]));this._point=C.latLngToLayerPoint(this._latlng),this._radius=this._point.x-C.latLngToLayerPoint(It).x}this._updateBounds()}});function id(c,v,C){return new Bs(c,v,C)}var pa=Yn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(c,v){ie(this,v),this._setLatLngs(c)},getLatLngs:function(){return this._latlngs},setLatLngs:function(c){return this._setLatLngs(c),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(c){for(var v=1/0,C=null,I=Hn,q,re,ve=0,De=this._parts.length;ve<De;ve++)for(var Ve=this._parts[ve],Ke=1,ht=Ve.length;Ke<ht;Ke++){q=Ve[Ke-1],re=Ve[Ke];var It=I(c,q,re,!0);It<v&&(v=It,C=I(c,q,re))}return C&&(C.distance=Math.sqrt(v)),C},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return jl(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(c,v){return v=v||this._defaultShape(),c=gt(c),v.push(c),this._bounds.extend(c),this.redraw()},_setLatLngs:function(c){this._bounds=new xi,this._latlngs=this._convertLatLngs(c)},_defaultShape:function(){return kr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(c){for(var v=[],C=kr(c),I=0,q=c.length;I<q;I++)C?(v[I]=gt(c[I]),this._bounds.extend(v[I])):v[I]=this._convertLatLngs(c[I]);return v},_project:function(){var c=new Qt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,c),this._bounds.isValid()&&c.isValid()&&(this._rawPxBounds=c,this._updateBounds())},_updateBounds:function(){var c=this._clickTolerance(),v=new dt(c,c);this._rawPxBounds&&(this._pxBounds=new Qt([this._rawPxBounds.min.subtract(v),this._rawPxBounds.max.add(v)]))},_projectLatlngs:function(c,v,C){var I=c[0]instanceof Zt,q=c.length,re,ve;if(I){for(ve=[],re=0;re<q;re++)ve[re]=this._map.latLngToLayerPoint(c[re]),C.extend(ve[re]);v.push(ve)}else for(re=0;re<q;re++)this._projectLatlngs(c[re],v,C)},_clipPoints:function(){var c=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(c))){if(this.options.noClip){this._parts=this._rings;return}var v=this._parts,C,I,q,re,ve,De,Ve;for(C=0,q=0,re=this._rings.length;C<re;C++)for(Ve=this._rings[C],I=0,ve=Ve.length;I<ve-1;I++)De=yo(Ve[I],Ve[I+1],c,I,!0),De&&(v[q]=v[q]||[],v[q].push(De[0]),(De[1]!==Ve[I+1]||I===ve-2)&&(v[q].push(De[1]),q++))}},_simplifyPoints:function(){for(var c=this._parts,v=this.options.smoothFactor,C=0,I=c.length;C<I;C++)c[C]=Ls(c[C],v)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(c,v){var C,I,q,re,ve,De,Ve=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(C=0,re=this._parts.length;C<re;C++)for(De=this._parts[C],I=0,ve=De.length,q=ve-1;I<ve;q=I++)if(!(!v&&I===0)&&Fi(c,De[q],De[I])<=Ve)return!0;return!1}});function Mc(c,v){return new pa(c,v)}pa._flat=nr;var Xn=pa.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ii(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(c){var v=pa.prototype._convertLatLngs.call(this,c),C=v.length;return C>=2&&v[0]instanceof Zt&&v[0].equals(v[C-1])&&v.pop(),v},_setLatLngs:function(c){pa.prototype._setLatLngs.call(this,c),kr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return kr(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var c=this._renderer._bounds,v=this.options.weight,C=new dt(v,v);if(c=new Qt(c.min.subtract(C),c.max.add(C)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(c))){if(this.options.noClip){this._parts=this._rings;return}for(var I=0,q=this._rings.length,re;I<q;I++)re=Dn(this._rings[I],c,!0),re.length&&this._parts.push(re)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(c){var v=!1,C,I,q,re,ve,De,Ve,Ke;if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(re=0,Ve=this._parts.length;re<Ve;re++)for(C=this._parts[re],ve=0,Ke=C.length,De=Ke-1;ve<Ke;De=ve++)I=C[ve],q=C[De],I.y>c.y!=q.y>c.y&&c.x<(q.x-I.x)*(c.y-I.y)/(q.y-I.y)+I.x&&(v=!v);return v||pa.prototype._containsPoint.call(this,c,!0)}});function zc(c,v){return new Xn(c,v)}var Rn=On.extend({initialize:function(c,v){ie(this,v),this._layers={},c&&this.addData(c)},addData:function(c){var v=_e(c)?c:c.features,C,I,q;if(v){for(C=0,I=v.length;C<I;C++)q=v[C],(q.geometries||q.geometry||q.features||q.coordinates)&&this.addData(q);return this}var re=this.options;if(re.filter&&!re.filter(c))return this;var ve=vo(c,re);return ve?(ve.feature=as(c),ve.defaultOptions=ve.options,this.resetStyle(ve),re.onEachFeature&&re.onEachFeature(c,ve),this.addLayer(ve)):this},resetStyle:function(c){return c===void 0?this.eachLayer(this.resetStyle,this):(c.options=p({},c.defaultOptions),this._setLayerStyle(c,this.options.style),this)},setStyle:function(c){return this.eachLayer(function(v){this._setLayerStyle(v,c)},this)},_setLayerStyle:function(c,v){c.setStyle&&(typeof v=="function"&&(v=v(c.feature)),c.setStyle(v))}});function vo(c,v){var C=c.type==="Feature"?c.geometry:c,I=C?C.coordinates:null,q=[],re=v&&v.pointToLayer,ve=v&&v.coordsToLatLng||un,De,Ve,Ke,ht;if(!I&&!C)return null;switch(C.type){case"Point":return De=ve(I),bo(re,c,De,v);case"MultiPoint":for(Ke=0,ht=I.length;Ke<ht;Ke++)De=ve(I[Ke]),q.push(bo(re,c,De,v));return new On(q);case"LineString":case"MultiLineString":return Ve=ns(I,C.type==="LineString"?0:1,ve),new pa(Ve,v);case"Polygon":case"MultiPolygon":return Ve=ns(I,C.type==="Polygon"?1:2,ve),new Xn(Ve,v);case"GeometryCollection":for(Ke=0,ht=C.geometries.length;Ke<ht;Ke++){var It=vo({geometry:C.geometries[Ke],type:"Feature",properties:c.properties},v);It&&q.push(It)}return new On(q);case"FeatureCollection":for(Ke=0,ht=C.features.length;Ke<ht;Ke++){var Jt=vo(C.features[Ke],v);Jt&&q.push(Jt)}return new On(q);default:throw new Error("Invalid GeoJSON object.")}}function bo(c,v,C,I){return c?c(v,C):new $n(C,I&&I.markersInheritOptions&&I)}function un(c){return new Zt(c[1],c[0],c[2])}function ns(c,v,C){for(var I=[],q=0,re=c.length,ve;q<re;q++)ve=v?ns(c[q],v-1,C):(C||un)(c[q]),I.push(ve);return I}function xo(c,v){return c=gt(c),c.alt!==void 0?[K(c.lng,v),K(c.lat,v),K(c.alt,v)]:[K(c.lng,v),K(c.lat,v)]}function Fs(c,v,C,I){for(var q=[],re=0,ve=c.length;re<ve;re++)q.push(v?Fs(c[re],kr(c[re])?0:v-1,C,I):xo(c[re],I));return!v&&C&&q.length>0&&q.push(q[0].slice()),q}function Ba(c,v){return c.feature?p({},c.feature,{geometry:v}):as(v)}function as(c){return c.type==="Feature"||c.type==="FeatureCollection"?c:{type:"Feature",properties:{},geometry:c}}var fa={toGeoJSON:function(c){return Ba(this,{type:"Point",coordinates:xo(this.getLatLng(),c)})}};$n.include(fa),Bs.include(fa),ha.include(fa),pa.include({toGeoJSON:function(c){var v=!kr(this._latlngs),C=Fs(this._latlngs,v?1:0,!1,c);return Ba(this,{type:(v?"Multi":"")+"LineString",coordinates:C})}}),Xn.include({toGeoJSON:function(c){var v=!kr(this._latlngs),C=v&&!kr(this._latlngs[0]),I=Fs(this._latlngs,C?2:v?1:0,!0,c);return v||(I=[I]),Ba(this,{type:(C?"Multi":"")+"Polygon",coordinates:I})}}),rs.include({toMultiPoint:function(c){var v=[];return this.eachLayer(function(C){v.push(C.toGeoJSON(c).geometry.coordinates)}),Ba(this,{type:"MultiPoint",coordinates:v})},toGeoJSON:function(c){var v=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(v==="MultiPoint")return this.toMultiPoint(c);var C=v==="GeometryCollection",I=[];return this.eachLayer(function(q){if(q.toGeoJSON){var re=q.toGeoJSON(c);if(C)I.push(re.geometry);else{var ve=as(re);ve.type==="FeatureCollection"?I.push.apply(I,ve.features):I.push(ve)}}}),C?Ba(this,{geometries:I,type:"GeometryCollection"}):{type:"FeatureCollection",features:I}}});function el(c,v){return new Rn(c,v)}var rd=el,wo=Jr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(c,v,C){this._url=c,this._bounds=hi(v),ie(this,C)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Vt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){_i(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(c){return this.options.opacity=c,this._image&&this._updateOpacity(),this},setStyle:function(c){return c.opacity&&this.setOpacity(c.opacity),this},bringToFront:function(){return this._map&&Ti(this._image),this},bringToBack:function(){return this._map&&Ja(this._image),this},setUrl:function(c){return this._url=c,this._image&&(this._image.src=c),this},setBounds:function(c){return this._bounds=hi(c),this._map&&this._reset(),this},getEvents:function(){var c={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var c=this._url.tagName==="IMG",v=this._image=c?this._url:li("img");if(Vt(v,"leaflet-image-layer"),this._zoomAnimated&&Vt(v,"leaflet-zoom-animated"),this.options.className&&Vt(v,this.options.className),v.onselectstart=V,v.onmousemove=V,v.onload=f(this.fire,this,"load"),v.onerror=f(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),c){this._url=v.src;return}v.src=this._url,v.alt=this.options.alt},_animateZoom:function(c){var v=this._map.getZoomScale(c.zoom),C=this._map._latLngBoundsToNewLayerBounds(this._bounds,c.zoom,c.center).min;sa(this._image,C,v)},_reset:function(){var c=this._image,v=new Qt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),C=v.getSize();Ji(c,v.min),c.style.width=C.x+"px",c.style.height=C.y+"px"},_updateOpacity:function(){Gr(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var c=this.options.errorOverlayUrl;c&&this._url!==c&&(this._url=c,this._image.src=c)},getCenter:function(){return this._bounds.getCenter()}}),nd=function(c,v,C){return new wo(c,v,C)},Ic=wo.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var c=this._url.tagName==="VIDEO",v=this._image=c?this._url:li("video");if(Vt(v,"leaflet-image-layer"),this._zoomAnimated&&Vt(v,"leaflet-zoom-animated"),this.options.className&&Vt(v,this.options.className),v.onselectstart=V,v.onmousemove=V,v.onloadeddata=f(this.fire,this,"load"),c){for(var C=v.getElementsByTagName("source"),I=[],q=0;q<C.length;q++)I.push(C[q].src);this._url=C.length>0?I:[v.src];return}_e(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(v.style,"objectFit")&&(v.style.objectFit="fill"),v.autoplay=!!this.options.autoplay,v.loop=!!this.options.loop,v.muted=!!this.options.muted,v.playsInline=!!this.options.playsInline;for(var re=0;re<this._url.length;re++){var ve=li("source");ve.src=this._url[re],v.appendChild(ve)}}});function Lc(c,v,C){return new Ic(c,v,C)}var Dc=wo.extend({_initImage:function(){var c=this._image=this._url;Vt(c,"leaflet-image-layer"),this._zoomAnimated&&Vt(c,"leaflet-zoom-animated"),this.options.className&&Vt(c,this.options.className),c.onselectstart=V,c.onmousemove=V}});function ui(c,v,C){return new Dc(c,v,C)}var dn=Jr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(c,v){c&&(c instanceof Zt||_e(c))?(this._latlng=gt(c),ie(this,v)):(ie(this,c),this._source=v),this.options.content&&(this._content=this.options.content)},openOn:function(c){return c=arguments.length?c:this._source._map,c.hasLayer(this)||c.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(c){return this._map?this.close():(arguments.length?this._source=c:c=this._source,this._prepareOpen(),this.openOn(c._map)),this},onAdd:function(c){this._zoomAnimated=c._zoomAnimated,this._container||this._initLayout(),c._fadeAnimated&&Gr(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),c._fadeAnimated&&Gr(this._container,1),this.bringToFront(),this.options.interactive&&(Vt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(c){c._fadeAnimated?(Gr(this._container,0),this._removeTimeout=setTimeout(f(_i,void 0,this._container),200)):_i(this._container),this.options.interactive&&(Ki(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(c){return this._latlng=gt(c),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(c){return this._content=c,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var c={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ti(this._container),this},bringToBack:function(){return this._map&&Ja(this._container),this},_prepareOpen:function(c){var v=this._source;if(!v._map)return!1;if(v instanceof On){v=null;var C=this._source._layers;for(var I in C)if(C[I]._map){v=C[I];break}if(!v)return!1;this._source=v}if(!c)if(v.getCenter)c=v.getCenter();else if(v.getLatLng)c=v.getLatLng();else if(v.getBounds)c=v.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(c),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var c=this._contentNode,v=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof v=="string")c.innerHTML=v;else{for(;c.hasChildNodes();)c.removeChild(c.firstChild);c.appendChild(v)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var c=this._map.latLngToLayerPoint(this._latlng),v=bt(this.options.offset),C=this._getAnchor();this._zoomAnimated?Ji(this._container,c.add(C)):v=v.add(c).add(C);var I=this._containerBottom=-v.y,q=this._containerLeft=-Math.round(this._containerWidth/2)+v.x;this._container.style.bottom=I+"px",this._container.style.left=q+"px"}},_getAnchor:function(){return[0,0]}});Xt.include({_initOverlay:function(c,v,C,I){var q=v;return q instanceof c||(q=new c(I).setContent(v)),C&&q.setLatLng(C),q}}),Jr.include({_initOverlay:function(c,v,C,I){var q=C;return q instanceof c?(ie(q,I),q._source=this):(q=v&&!I?v:new c(I,this),q.setContent(C)),q}});var ss=dn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(c){return c=arguments.length?c:this._source._map,!c.hasLayer(this)&&c._popup&&c._popup.options.autoClose&&c.removeLayer(c._popup),c._popup=this,dn.prototype.openOn.call(this,c)},onAdd:function(c){dn.prototype.onAdd.call(this,c),c.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Yn||this._source.on("preclick",rr))},onRemove:function(c){dn.prototype.onRemove.call(this,c),c.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Yn||this._source.off("preclick",rr))},getEvents:function(){var c=dn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(c.preclick=this.close),this.options.keepInView&&(c.moveend=this._adjustPan),c},_initLayout:function(){var c="leaflet-popup",v=this._container=li("div",c+" "+(this.options.className||"")+" leaflet-zoom-animated"),C=this._wrapper=li("div",c+"-content-wrapper",v);if(this._contentNode=li("div",c+"-content",C),bn(v),La(this._contentNode),wt(v,"contextmenu",rr),this._tipContainer=li("div",c+"-tip-container",v),this._tip=li("div",c+"-tip",this._tipContainer),this.options.closeButton){var I=this._closeButton=li("a",c+"-close-button",v);I.setAttribute("role","button"),I.setAttribute("aria-label","Close popup"),I.href="#close",I.innerHTML='<span aria-hidden="true">&#215;</span>',wt(I,"click",function(q){ei(q),this.close()},this)}},_updateLayout:function(){var c=this._contentNode,v=c.style;v.width="",v.whiteSpace="nowrap";var C=c.offsetWidth;C=Math.min(C,this.options.maxWidth),C=Math.max(C,this.options.minWidth),v.width=C+1+"px",v.whiteSpace="",v.height="";var I=c.offsetHeight,q=this.options.maxHeight,re="leaflet-popup-scrolled";q&&I>q?(v.height=q+"px",Vt(c,re)):Ki(c,re),this._containerWidth=this._container.offsetWidth},_animateZoom:function(c){var v=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center),C=this._getAnchor();Ji(this._container,v.add(C))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var c=this._map,v=parseInt(Wr(this._container,"marginBottom"),10)||0,C=this._container.offsetHeight+v,I=this._containerWidth,q=new dt(this._containerLeft,-C-this._containerBottom);q._add(Qa(this._container));var re=c.layerPointToContainerPoint(q),ve=bt(this.options.autoPanPadding),De=bt(this.options.autoPanPaddingTopLeft||ve),Ve=bt(this.options.autoPanPaddingBottomRight||ve),Ke=c.getSize(),ht=0,It=0;re.x+I+Ve.x>Ke.x&&(ht=re.x+I-Ke.x+Ve.x),re.x-ht-De.x<0&&(ht=re.x-De.x),re.y+C+Ve.y>Ke.y&&(It=re.y+C-Ke.y+Ve.y),re.y-It-De.y<0&&(It=re.y-De.y),(ht||It)&&(this.options.keepInView&&(this._autopanning=!0),c.fire("autopanstart").panBy([ht,It]))}},_getAnchor:function(){return bt(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),tl=function(c,v){return new ss(c,v)};Xt.mergeOptions({closePopupOnClick:!0}),Xt.include({openPopup:function(c,v,C){return this._initOverlay(ss,c,v,C).openOn(this),this},closePopup:function(c){return c=arguments.length?c:this._popup,c&&c.close(),this}}),Jr.include({bindPopup:function(c,v){return this._popup=this._initOverlay(ss,this._popup,c,v),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(c){return this._popup&&(this instanceof On||(this._popup._source=this),this._popup._prepareOpen(c||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(c){return this._popup&&this._popup.setContent(c),this},getPopup:function(){return this._popup},_openPopup:function(c){if(!(!this._popup||!this._map)){ln(c);var v=c.layer||c.target;if(this._popup._source===v&&!(v instanceof Yn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(c.latlng);return}this._popup._source=v,this.openPopup(c.latlng)}},_movePopup:function(c){this._popup.setLatLng(c.latlng)},_onKeyPress:function(c){c.originalEvent.keyCode===13&&this._openPopup(c)}});var js=dn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(c){dn.prototype.onAdd.call(this,c),this.setOpacity(this.options.opacity),c.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(c){dn.prototype.onRemove.call(this,c),c.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var c=dn.prototype.getEvents.call(this);return this.options.permanent||(c.preclick=this.close),c},_initLayout:function(){var c="leaflet-tooltip",v=c+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=li("div",v),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+T(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(c){var v,C,I=this._map,q=this._container,re=I.latLngToContainerPoint(I.getCenter()),ve=I.layerPointToContainerPoint(c),De=this.options.direction,Ve=q.offsetWidth,Ke=q.offsetHeight,ht=bt(this.options.offset),It=this._getAnchor();De==="top"?(v=Ve/2,C=Ke):De==="bottom"?(v=Ve/2,C=0):De==="center"?(v=Ve/2,C=Ke/2):De==="right"?(v=0,C=Ke/2):De==="left"?(v=Ve,C=Ke/2):ve.x<re.x?(De="right",v=0,C=Ke/2):(De="left",v=Ve+(ht.x+It.x)*2,C=Ke/2),c=c.subtract(bt(v,C,!0)).add(ht).add(It),Ki(q,"leaflet-tooltip-right"),Ki(q,"leaflet-tooltip-left"),Ki(q,"leaflet-tooltip-top"),Ki(q,"leaflet-tooltip-bottom"),Vt(q,"leaflet-tooltip-"+De),Ji(q,c)},_updatePosition:function(){var c=this._map.latLngToLayerPoint(this._latlng);this._setPosition(c)},setOpacity:function(c){this.options.opacity=c,this._container&&Gr(this._container,c)},_animateZoom:function(c){var v=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center);this._setPosition(v)},_getAnchor:function(){return bt(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),os=function(c,v){return new js(c,v)};Xt.include({openTooltip:function(c,v,C){return this._initOverlay(js,c,v,C).openOn(this),this},closeTooltip:function(c){return c.close(),this}}),Jr.include({bindTooltip:function(c,v){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(js,this._tooltip,c,v),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(c){if(!(!c&&this._tooltipHandlersAdded)){var v=c?"off":"on",C={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?C.add=this._openTooltip:(C.mouseover=this._openTooltip,C.mouseout=this.closeTooltip,C.click=this._openTooltip,this._map?this._addFocusListeners():C.add=this._addFocusListeners),this._tooltip.options.sticky&&(C.mousemove=this._moveTooltip),this[v](C),this._tooltipHandlersAdded=!c}},openTooltip:function(c){return this._tooltip&&(this instanceof On||(this._tooltip._source=this),this._tooltip._prepareOpen(c)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(c){return this._tooltip&&this._tooltip.setContent(c),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(c){var v=typeof c.getElement=="function"&&c.getElement();v&&(wt(v,"focus",function(){this._tooltip._source=c,this.openTooltip()},this),wt(v,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(c){var v=typeof c.getElement=="function"&&c.getElement();v&&v.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(c){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var v=this;this._map.once("moveend",function(){v._openOnceFlag=!1,v._openTooltip(c)});return}this._tooltip._source=c.layer||c.target,this.openTooltip(this._tooltip.options.sticky?c.latlng:void 0)}},_moveTooltip:function(c){var v=c.latlng,C,I;this._tooltip.options.sticky&&c.originalEvent&&(C=this._map.mouseEventToContainerPoint(c.originalEvent),I=this._map.containerPointToLayerPoint(C),v=this._map.layerPointToLatLng(I)),this._tooltip.setLatLng(v)}});var Ns=Ra.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(c){var v=c&&c.tagName==="DIV"?c:document.createElement("div"),C=this.options;if(C.html instanceof Element?(Ka(v),v.appendChild(C.html)):v.innerHTML=C.html!==!1?C.html:"",C.bgPos){var I=bt(C.bgPos);v.style.backgroundPosition=-I.x+"px "+-I.y+"px"}return this._setIconStyles(v,"icon"),v},createShadow:function(){return null}});function qs(c){return new Ns(c)}Ra.Default=Rs;var Ir=Jr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ae.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(c){ie(this,c)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(c){c._addZoomLimit(this)},onRemove:function(c){this._removeAllTiles(),_i(this._container),c._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ti(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ja(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(c){return this.options.opacity=c,this._updateOpacity(),this},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var c=this._clampZoom(this._map.getZoom());c!==this._tileZoom&&(this._tileZoom=c,this._updateLevels()),this._update()}return this},getEvents:function(){var c={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=M(this._onMoveEnd,this.options.updateInterval,this)),c.move=this._onMove),this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},createTile:function(){return document.createElement("div")},getTileSize:function(){var c=this.options.tileSize;return c instanceof dt?c:new dt(c,c)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(c){for(var v=this.getPane().children,C=-c(-1/0,1/0),I=0,q=v.length,re;I<q;I++)re=v[I].style.zIndex,v[I]!==this._container&&re&&(C=c(C,+re));isFinite(C)&&(this.options.zIndex=C+c(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ae.ielt9){Gr(this._container,this.options.opacity);var c=+new Date,v=!1,C=!1;for(var I in this._tiles){var q=this._tiles[I];if(!(!q.current||!q.loaded)){var re=Math.min(1,(c-q.loaded)/200);Gr(q.el,re),re<1?v=!0:(q.active?C=!0:this._onOpaqueTile(q),q.active=!0)}}C&&!this._noPrune&&this._pruneTiles(),v&&(Et(this._fadeFrame),this._fadeFrame=Tt(this._updateOpacity,this))}},_onOpaqueTile:V,_initContainer:function(){this._container||(this._container=li("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var c=this._tileZoom,v=this.options.maxZoom;if(c!==void 0){for(var C in this._levels)C=Number(C),this._levels[C].el.children.length||C===c?(this._levels[C].el.style.zIndex=v-Math.abs(c-C),this._onUpdateLevel(C)):(_i(this._levels[C].el),this._removeTilesAtZoom(C),this._onRemoveLevel(C),delete this._levels[C]);var I=this._levels[c],q=this._map;return I||(I=this._levels[c]={},I.el=li("div","leaflet-tile-container leaflet-zoom-animated",this._container),I.el.style.zIndex=v,I.origin=q.project(q.unproject(q.getPixelOrigin()),c).round(),I.zoom=c,this._setZoomTransform(I,q.getCenter(),q.getZoom()),V(I.el.offsetWidth),this._onCreateLevel(I)),this._level=I,I}},_onUpdateLevel:V,_onRemoveLevel:V,_onCreateLevel:V,_pruneTiles:function(){if(this._map){var c,v,C=this._map.getZoom();if(C>this.options.maxZoom||C<this.options.minZoom){this._removeAllTiles();return}for(c in this._tiles)v=this._tiles[c],v.retain=v.current;for(c in this._tiles)if(v=this._tiles[c],v.current&&!v.active){var I=v.coords;this._retainParent(I.x,I.y,I.z,I.z-5)||this._retainChildren(I.x,I.y,I.z,I.z+2)}for(c in this._tiles)this._tiles[c].retain||this._removeTile(c)}},_removeTilesAtZoom:function(c){for(var v in this._tiles)this._tiles[v].coords.z===c&&this._removeTile(v)},_removeAllTiles:function(){for(var c in this._tiles)this._removeTile(c)},_invalidateAll:function(){for(var c in this._levels)_i(this._levels[c].el),this._onRemoveLevel(Number(c)),delete this._levels[c];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(c,v,C,I){var q=Math.floor(c/2),re=Math.floor(v/2),ve=C-1,De=new dt(+q,+re);De.z=+ve;var Ve=this._tileCoordsToKey(De),Ke=this._tiles[Ve];return Ke&&Ke.active?(Ke.retain=!0,!0):(Ke&&Ke.loaded&&(Ke.retain=!0),ve>I?this._retainParent(q,re,ve,I):!1)},_retainChildren:function(c,v,C,I){for(var q=2*c;q<2*c+2;q++)for(var re=2*v;re<2*v+2;re++){var ve=new dt(q,re);ve.z=C+1;var De=this._tileCoordsToKey(ve),Ve=this._tiles[De];if(Ve&&Ve.active){Ve.retain=!0;continue}else Ve&&Ve.loaded&&(Ve.retain=!0);C+1<I&&this._retainChildren(q,re,C+1,I)}},_resetView:function(c){var v=c&&(c.pinch||c.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),v,v)},_animateZoom:function(c){this._setView(c.center,c.zoom,!0,c.noUpdate)},_clampZoom:function(c){var v=this.options;return v.minNativeZoom!==void 0&&c<v.minNativeZoom?v.minNativeZoom:v.maxNativeZoom!==void 0&&v.maxNativeZoom<c?v.maxNativeZoom:c},_setView:function(c,v,C,I){var q=Math.round(v);this.options.maxZoom!==void 0&&q>this.options.maxZoom||this.options.minZoom!==void 0&&q<this.options.minZoom?q=void 0:q=this._clampZoom(q);var re=this.options.updateWhenZooming&&q!==this._tileZoom;(!I||re)&&(this._tileZoom=q,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),q!==void 0&&this._update(c),C||this._pruneTiles(),this._noPrune=!!C),this._setZoomTransforms(c,v)},_setZoomTransforms:function(c,v){for(var C in this._levels)this._setZoomTransform(this._levels[C],c,v)},_setZoomTransform:function(c,v,C){var I=this._map.getZoomScale(C,c.zoom),q=c.origin.multiplyBy(I).subtract(this._map._getNewPixelOrigin(v,C)).round();Ae.any3d?sa(c.el,q,I):Ji(c.el,q)},_resetGrid:function(){var c=this._map,v=c.options.crs,C=this._tileSize=this.getTileSize(),I=this._tileZoom,q=this._map.getPixelWorldBounds(this._tileZoom);q&&(this._globalTileRange=this._pxBoundsToTileRange(q)),this._wrapX=v.wrapLng&&!this.options.noWrap&&[Math.floor(c.project([0,v.wrapLng[0]],I).x/C.x),Math.ceil(c.project([0,v.wrapLng[1]],I).x/C.y)],this._wrapY=v.wrapLat&&!this.options.noWrap&&[Math.floor(c.project([v.wrapLat[0],0],I).y/C.x),Math.ceil(c.project([v.wrapLat[1],0],I).y/C.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(c){var v=this._map,C=v._animatingZoom?Math.max(v._animateToZoom,v.getZoom()):v.getZoom(),I=v.getZoomScale(C,this._tileZoom),q=v.project(c,this._tileZoom).floor(),re=v.getSize().divideBy(I*2);return new Qt(q.subtract(re),q.add(re))},_update:function(c){var v=this._map;if(v){var C=this._clampZoom(v.getZoom());if(c===void 0&&(c=v.getCenter()),this._tileZoom!==void 0){var I=this._getTiledPixelBounds(c),q=this._pxBoundsToTileRange(I),re=q.getCenter(),ve=[],De=this.options.keepBuffer,Ve=new Qt(q.getBottomLeft().subtract([De,-De]),q.getTopRight().add([De,-De]));if(!(isFinite(q.min.x)&&isFinite(q.min.y)&&isFinite(q.max.x)&&isFinite(q.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ke in this._tiles){var ht=this._tiles[Ke].coords;(ht.z!==this._tileZoom||!Ve.contains(new dt(ht.x,ht.y)))&&(this._tiles[Ke].current=!1)}if(Math.abs(C-this._tileZoom)>1){this._setView(c,C);return}for(var It=q.min.y;It<=q.max.y;It++)for(var Jt=q.min.x;Jt<=q.max.x;Jt++){var yr=new dt(Jt,It);if(yr.z=this._tileZoom,!!this._isValidTile(yr)){var ar=this._tiles[this._tileCoordsToKey(yr)];ar?ar.current=!0:ve.push(yr)}}if(ve.sort(function(Zr,Kn){return Zr.distanceTo(re)-Kn.distanceTo(re)}),ve.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var hn=document.createDocumentFragment();for(Jt=0;Jt<ve.length;Jt++)this._addTile(ve[Jt],hn);this._level.el.appendChild(hn)}}}},_isValidTile:function(c){var v=this._map.options.crs;if(!v.infinite){var C=this._globalTileRange;if(!v.wrapLng&&(c.x<C.min.x||c.x>C.max.x)||!v.wrapLat&&(c.y<C.min.y||c.y>C.max.y))return!1}if(!this.options.bounds)return!0;var I=this._tileCoordsToBounds(c);return hi(this.options.bounds).overlaps(I)},_keyToBounds:function(c){return this._tileCoordsToBounds(this._keyToTileCoords(c))},_tileCoordsToNwSe:function(c){var v=this._map,C=this.getTileSize(),I=c.scaleBy(C),q=I.add(C),re=v.unproject(I,c.z),ve=v.unproject(q,c.z);return[re,ve]},_tileCoordsToBounds:function(c){var v=this._tileCoordsToNwSe(c),C=new xi(v[0],v[1]);return this.options.noWrap||(C=this._map.wrapLatLngBounds(C)),C},_tileCoordsToKey:function(c){return c.x+":"+c.y+":"+c.z},_keyToTileCoords:function(c){var v=c.split(":"),C=new dt(+v[0],+v[1]);return C.z=+v[2],C},_removeTile:function(c){var v=this._tiles[c];v&&(_i(v.el),delete this._tiles[c],this.fire("tileunload",{tile:v.el,coords:this._keyToTileCoords(c)}))},_initTile:function(c){Vt(c,"leaflet-tile");var v=this.getTileSize();c.style.width=v.x+"px",c.style.height=v.y+"px",c.onselectstart=V,c.onmousemove=V,Ae.ielt9&&this.options.opacity<1&&Gr(c,this.options.opacity)},_addTile:function(c,v){var C=this._getTilePos(c),I=this._tileCoordsToKey(c),q=this.createTile(this._wrapCoords(c),f(this._tileReady,this,c));this._initTile(q),this.createTile.length<2&&Tt(f(this._tileReady,this,c,null,q)),Ji(q,C),this._tiles[I]={el:q,coords:c,current:!0},v.appendChild(q),this.fire("tileloadstart",{tile:q,coords:c})},_tileReady:function(c,v,C){v&&this.fire("tileerror",{error:v,tile:C,coords:c});var I=this._tileCoordsToKey(c);C=this._tiles[I],C&&(C.loaded=+new Date,this._map._fadeAnimated?(Gr(C.el,0),Et(this._fadeFrame),this._fadeFrame=Tt(this._updateOpacity,this)):(C.active=!0,this._pruneTiles()),v||(Vt(C.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:C.el,coords:c})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ae.ielt9||!this._map._fadeAnimated?Tt(this._pruneTiles,this):setTimeout(f(this._pruneTiles,this),250)))},_getTilePos:function(c){return c.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(c){var v=new dt(this._wrapX?R(c.x,this._wrapX):c.x,this._wrapY?R(c.y,this._wrapY):c.y);return v.z=c.z,v},_pxBoundsToTileRange:function(c){var v=this.getTileSize();return new Qt(c.min.unscaleBy(v).floor(),c.max.unscaleBy(v).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var c in this._tiles)if(!this._tiles[c].loaded)return!1;return!0}});function Oc(c){return new Ir(c)}var ls=Ir.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(c,v){this._url=c,v=ie(this,v),v.detectRetina&&Ae.retina&&v.maxZoom>0?(v.tileSize=Math.floor(v.tileSize/2),v.zoomReverse?(v.zoomOffset--,v.minZoom=Math.min(v.maxZoom,v.minZoom+1)):(v.zoomOffset++,v.maxZoom=Math.max(v.minZoom,v.maxZoom-1)),v.minZoom=Math.max(0,v.minZoom)):v.zoomReverse?v.minZoom=Math.min(v.maxZoom,v.minZoom):v.maxZoom=Math.max(v.minZoom,v.maxZoom),typeof v.subdomains=="string"&&(v.subdomains=v.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(c,v){return this._url===c&&v===void 0&&(v=!0),this._url=c,v||this.redraw(),this},createTile:function(c,v){var C=document.createElement("img");return wt(C,"load",f(this._tileOnLoad,this,v,C)),wt(C,"error",f(this._tileOnError,this,v,C)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(C.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(C.referrerPolicy=this.options.referrerPolicy),C.alt="",C.src=this.getTileUrl(c),C},getTileUrl:function(c){var v={r:Ae.retina?"@2x":"",s:this._getSubdomain(c),x:c.x,y:c.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var C=this._globalTileRange.max.y-c.y;this.options.tms&&(v.y=C),v["-y"]=C}return je(this._url,p(v,this.options))},_tileOnLoad:function(c,v){Ae.ielt9?setTimeout(f(c,this,null,v),0):c(null,v)},_tileOnError:function(c,v,C){var I=this.options.errorTileUrl;I&&v.getAttribute("src")!==I&&(v.src=I),c(C,v)},_onTileRemove:function(c){c.tile.onload=null},_getZoomForUrl:function(){var c=this._tileZoom,v=this.options.maxZoom,C=this.options.zoomReverse,I=this.options.zoomOffset;return C&&(c=v-c),c+I},_getSubdomain:function(c){var v=Math.abs(c.x+c.y)%this.options.subdomains.length;return this.options.subdomains[v]},_abortLoading:function(){var c,v;for(c in this._tiles)if(this._tiles[c].coords.z!==this._tileZoom&&(v=this._tiles[c].el,v.onload=V,v.onerror=V,!v.complete)){v.src=Ye;var C=this._tiles[c].coords;_i(v),delete this._tiles[c],this.fire("tileabort",{tile:v,coords:C})}},_removeTile:function(c){var v=this._tiles[c];if(v)return v.el.setAttribute("src",Ye),Ir.prototype._removeTile.call(this,c)},_tileReady:function(c,v,C){if(!(!this._map||C&&C.getAttribute("src")===Ye))return Ir.prototype._tileReady.call(this,c,v,C)}});function il(c,v){return new ls(c,v)}var Fa=ls.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(c,v){this._url=c;var C=p({},this.defaultWmsParams);for(var I in v)I in this.options||(C[I]=v[I]);v=ie(this,v);var q=v.detectRetina&&Ae.retina?2:1,re=this.getTileSize();C.width=re.x*q,C.height=re.y*q,this.wmsParams=C},onAdd:function(c){this._crs=this.options.crs||c.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var v=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[v]=this._crs.code,ls.prototype.onAdd.call(this,c)},getTileUrl:function(c){var v=this._tileCoordsToNwSe(c),C=this._crs,I=Pi(C.project(v[0]),C.project(v[1])),q=I.min,re=I.max,ve=(this._wmsVersion>=1.3&&this._crs===Cc?[q.y,q.x,re.y,re.x]:[q.x,q.y,re.x,re.y]).join(","),De=ls.prototype.getTileUrl.call(this,c);return De+Y(this.wmsParams,De,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ve},setParams:function(c,v){return p(this.wmsParams,c),v||this.redraw(),this}});function rl(c,v){return new Fa(c,v)}ls.WMS=Fa,il.wms=rl;var wn=Jr.extend({options:{padding:.1},initialize:function(c){ie(this,c),T(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Vt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var c={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(c.zoomanim=this._onAnimZoom),c},_onAnimZoom:function(c){this._updateTransform(c.center,c.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(c,v){var C=this._map.getZoomScale(v,this._zoom),I=this._map.getSize().multiplyBy(.5+this.options.padding),q=this._map.project(this._center,v),re=I.multiplyBy(-C).add(q).subtract(this._map._getNewPixelOrigin(c,v));Ae.any3d?sa(this._container,re,C):Ji(this._container,re)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var c in this._layers)this._layers[c]._reset()},_onZoomEnd:function(){for(var c in this._layers)this._layers[c]._project()},_updatePaths:function(){for(var c in this._layers)this._layers[c]._update()},_update:function(){var c=this.options.padding,v=this._map.getSize(),C=this._map.containerPointToLayerPoint(v.multiplyBy(-c)).round();this._bounds=new Qt(C,C.add(v.multiplyBy(1+c*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Vs=wn.extend({options:{tolerance:0},getEvents:function(){var c=wn.prototype.getEvents.call(this);return c.viewprereset=this._onViewPreReset,c},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){wn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var c=this._container=document.createElement("canvas");wt(c,"mousemove",this._onMouseMove,this),wt(c,"click dblclick mousedown mouseup contextmenu",this._onClick,this),wt(c,"mouseout",this._handleMouseOut,this),c._leaflet_disable_events=!0,this._ctx=c.getContext("2d")},_destroyContainer:function(){Et(this._redrawRequest),delete this._ctx,_i(this._container),ct(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var c;this._redrawBounds=null;for(var v in this._layers)c=this._layers[v],c._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){wn.prototype._update.call(this);var c=this._bounds,v=this._container,C=c.getSize(),I=Ae.retina?2:1;Ji(v,c.min),v.width=I*C.x,v.height=I*C.y,v.style.width=C.x+"px",v.style.height=C.y+"px",Ae.retina&&this._ctx.scale(2,2),this._ctx.translate(-c.min.x,-c.min.y),this.fire("update")}},_reset:function(){wn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(c){this._updateDashArray(c),this._layers[T(c)]=c;var v=c._order={layer:c,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=v),this._drawLast=v,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(c){this._requestRedraw(c)},_removePath:function(c){var v=c._order,C=v.next,I=v.prev;C?C.prev=I:this._drawLast=I,I?I.next=C:this._drawFirst=C,delete c._order,delete this._layers[T(c)],this._requestRedraw(c)},_updatePath:function(c){this._extendRedrawBounds(c),c._project(),c._update(),this._requestRedraw(c)},_updateStyle:function(c){this._updateDashArray(c),this._requestRedraw(c)},_updateDashArray:function(c){if(typeof c.options.dashArray=="string"){var v=c.options.dashArray.split(/[, ]+/),C=[],I,q;for(q=0;q<v.length;q++){if(I=Number(v[q]),isNaN(I))return;C.push(I)}c.options._dashArray=C}else c.options._dashArray=c.options.dashArray},_requestRedraw:function(c){this._map&&(this._extendRedrawBounds(c),this._redrawRequest=this._redrawRequest||Tt(this._redraw,this))},_extendRedrawBounds:function(c){if(c._pxBounds){var v=(c.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Qt,this._redrawBounds.extend(c._pxBounds.min.subtract([v,v])),this._redrawBounds.extend(c._pxBounds.max.add([v,v]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var c=this._redrawBounds;if(c){var v=c.getSize();this._ctx.clearRect(c.min.x,c.min.y,v.x,v.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var c,v=this._redrawBounds;if(this._ctx.save(),v){var C=v.getSize();this._ctx.beginPath(),this._ctx.rect(v.min.x,v.min.y,C.x,C.y),this._ctx.clip()}this._drawing=!0;for(var I=this._drawFirst;I;I=I.next)c=I.layer,(!v||c._pxBounds&&c._pxBounds.intersects(v))&&c._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(c,v){if(this._drawing){var C,I,q,re,ve=c._parts,De=ve.length,Ve=this._ctx;if(De){for(Ve.beginPath(),C=0;C<De;C++){for(I=0,q=ve[C].length;I<q;I++)re=ve[C][I],Ve[I?"lineTo":"moveTo"](re.x,re.y);v&&Ve.closePath()}this._fillStroke(Ve,c)}}},_updateCircle:function(c){if(!(!this._drawing||c._empty())){var v=c._point,C=this._ctx,I=Math.max(Math.round(c._radius),1),q=(Math.max(Math.round(c._radiusY),1)||I)/I;q!==1&&(C.save(),C.scale(1,q)),C.beginPath(),C.arc(v.x,v.y/q,I,0,Math.PI*2,!1),q!==1&&C.restore(),this._fillStroke(C,c)}},_fillStroke:function(c,v){var C=v.options;C.fill&&(c.globalAlpha=C.fillOpacity,c.fillStyle=C.fillColor||C.color,c.fill(C.fillRule||"evenodd")),C.stroke&&C.weight!==0&&(c.setLineDash&&c.setLineDash(v.options&&v.options._dashArray||[]),c.globalAlpha=C.opacity,c.lineWidth=C.weight,c.strokeStyle=C.color,c.lineCap=C.lineCap,c.lineJoin=C.lineJoin,c.stroke())},_onClick:function(c){for(var v=this._map.mouseEventToLayerPoint(c),C,I,q=this._drawFirst;q;q=q.next)C=q.layer,C.options.interactive&&C._containsPoint(v)&&(!(c.type==="click"||c.type==="preclick")||!this._map._draggableMoved(C))&&(I=C);this._fireEvent(I?[I]:!1,c)},_onMouseMove:function(c){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var v=this._map.mouseEventToLayerPoint(c);this._handleMouseHover(c,v)}},_handleMouseOut:function(c){var v=this._hoveredLayer;v&&(Ki(this._container,"leaflet-interactive"),this._fireEvent([v],c,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(c,v){if(!this._mouseHoverThrottled){for(var C,I,q=this._drawFirst;q;q=q.next)C=q.layer,C.options.interactive&&C._containsPoint(v)&&(I=C);I!==this._hoveredLayer&&(this._handleMouseOut(c),I&&(Vt(this._container,"leaflet-interactive"),this._fireEvent([I],c,"mouseover"),this._hoveredLayer=I)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,c),this._mouseHoverThrottled=!0,setTimeout(f(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(c,v,C){this._map._fireDOMEvent(v,C||v.type,c)},_bringToFront:function(c){var v=c._order;if(v){var C=v.next,I=v.prev;if(C)C.prev=I;else return;I?I.next=C:C&&(this._drawFirst=C),v.prev=this._drawLast,this._drawLast.next=v,v.next=null,this._drawLast=v,this._requestRedraw(c)}},_bringToBack:function(c){var v=c._order;if(v){var C=v.next,I=v.prev;if(I)I.next=C;else return;C?C.prev=I:I&&(this._drawLast=I),v.prev=null,v.next=this._drawFirst,this._drawFirst.prev=v,this._drawFirst=v,this._requestRedraw(c)}}});function So(c){return Ae.canvas?new Vs(c):null}var Ws=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(c){return document.createElement("<lvml:"+c+' class="lvml">')}}catch(c){}return function(c){return document.createElement("<"+c+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Gs={_initContainer:function(){this._container=li("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(wn.prototype._update.call(this),this.fire("update"))},_initPath:function(c){var v=c._container=Ws("shape");Vt(v,"leaflet-vml-shape "+(this.options.className||"")),v.coordsize="1 1",c._path=Ws("path"),v.appendChild(c._path),this._updateStyle(c),this._layers[T(c)]=c},_addPath:function(c){var v=c._container;this._container.appendChild(v),c.options.interactive&&c.addInteractiveTarget(v)},_removePath:function(c){var v=c._container;_i(v),c.removeInteractiveTarget(v),delete this._layers[T(c)]},_updateStyle:function(c){var v=c._stroke,C=c._fill,I=c.options,q=c._container;q.stroked=!!I.stroke,q.filled=!!I.fill,I.stroke?(v||(v=c._stroke=Ws("stroke")),q.appendChild(v),v.weight=I.weight+"px",v.color=I.color,v.opacity=I.opacity,I.dashArray?v.dashStyle=_e(I.dashArray)?I.dashArray.join(" "):I.dashArray.replace(/( *, *)/g," "):v.dashStyle="",v.endcap=I.lineCap.replace("butt","flat"),v.joinstyle=I.lineJoin):v&&(q.removeChild(v),c._stroke=null),I.fill?(C||(C=c._fill=Ws("fill")),q.appendChild(C),C.color=I.fillColor||I.color,C.opacity=I.fillOpacity):C&&(q.removeChild(C),c._fill=null)},_updateCircle:function(c){var v=c._point.round(),C=Math.round(c._radius),I=Math.round(c._radiusY||C);this._setPath(c,c._empty()?"M0 0":"AL "+v.x+","+v.y+" "+C+","+I+" 0,"+65535*360)},_setPath:function(c,v){c._path.v=v},_bringToFront:function(c){Ti(c._container)},_bringToBack:function(c){Ja(c._container)}},ma=Ae.vml?Ws:xr,Us=wn.extend({_initContainer:function(){this._container=ma("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ma("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){_i(this._container),ct(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){wn.prototype._update.call(this);var c=this._bounds,v=c.getSize(),C=this._container;(!this._svgSize||!this._svgSize.equals(v))&&(this._svgSize=v,C.setAttribute("width",v.x),C.setAttribute("height",v.y)),Ji(C,c.min),C.setAttribute("viewBox",[c.min.x,c.min.y,v.x,v.y].join(" ")),this.fire("update")}},_initPath:function(c){var v=c._path=ma("path");c.options.className&&Vt(v,c.options.className),c.options.interactive&&Vt(v,"leaflet-interactive"),this._updateStyle(c),this._layers[T(c)]=c},_addPath:function(c){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(c._path),c.addInteractiveTarget(c._path)},_removePath:function(c){_i(c._path),c.removeInteractiveTarget(c._path),delete this._layers[T(c)]},_updatePath:function(c){c._project(),c._update()},_updateStyle:function(c){var v=c._path,C=c.options;v&&(C.stroke?(v.setAttribute("stroke",C.color),v.setAttribute("stroke-opacity",C.opacity),v.setAttribute("stroke-width",C.weight),v.setAttribute("stroke-linecap",C.lineCap),v.setAttribute("stroke-linejoin",C.lineJoin),C.dashArray?v.setAttribute("stroke-dasharray",C.dashArray):v.removeAttribute("stroke-dasharray"),C.dashOffset?v.setAttribute("stroke-dashoffset",C.dashOffset):v.removeAttribute("stroke-dashoffset")):v.setAttribute("stroke","none"),C.fill?(v.setAttribute("fill",C.fillColor||C.color),v.setAttribute("fill-opacity",C.fillOpacity),v.setAttribute("fill-rule",C.fillRule||"evenodd")):v.setAttribute("fill","none"))},_updatePoly:function(c,v){this._setPath(c,yn(c._parts,v))},_updateCircle:function(c){var v=c._point,C=Math.max(Math.round(c._radius),1),I=Math.max(Math.round(c._radiusY),1)||C,q="a"+C+","+I+" 0 1,0 ",re=c._empty()?"M0 0":"M"+(v.x-C)+","+v.y+q+C*2+",0 "+q+-C*2+",0 ";this._setPath(c,re)},_setPath:function(c,v){c._path.setAttribute("d",v)},_bringToFront:function(c){Ti(c._path)},_bringToBack:function(c){Ja(c._path)}});Ae.vml&&Us.include(Gs);function nl(c){return Ae.svg||Ae.vml?new Us(c):null}Xt.include({getRenderer:function(c){var v=c.options.renderer||this._getPaneRenderer(c.options.pane)||this.options.renderer||this._renderer;return v||(v=this._renderer=this._createRenderer()),this.hasLayer(v)||this.addLayer(v),v},_getPaneRenderer:function(c){if(c==="overlayPane"||c===void 0)return!1;var v=this._paneRenderers[c];return v===void 0&&(v=this._createRenderer({pane:c}),this._paneRenderers[c]=v),v},_createRenderer:function(c){return this.options.preferCanvas&&So(c)||nl(c)}});var Gt=Xn.extend({initialize:function(c,v){Xn.prototype.initialize.call(this,this._boundsToLatLngs(c),v)},setBounds:function(c){return this.setLatLngs(this._boundsToLatLngs(c))},_boundsToLatLngs:function(c){return c=hi(c),[c.getSouthWest(),c.getNorthWest(),c.getNorthEast(),c.getSouthEast()]}});function al(c,v){return new Gt(c,v)}Us.create=ma,Us.pointsToPath=yn,Rn.geometryToLayer=vo,Rn.coordsToLatLng=un,Rn.coordsToLatLngs=ns,Rn.latLngToCoords=xo,Rn.latLngsToCoords=Fs,Rn.getFeature=Ba,Rn.asFeature=as,Xt.mergeOptions({boxZoom:!0});var Rc=xn.extend({initialize:function(c){this._map=c,this._container=c._container,this._pane=c._panes.overlayPane,this._resetStateTimeout=0,c.on("unload",this._destroy,this)},addHooks:function(){wt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ct(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){_i(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(c){if(!c.shiftKey||c.which!==1&&c.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),oa(),ho(),this._startPoint=this._map.mouseEventToContainerPoint(c),wt(document,{contextmenu:ln,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(c){this._moved||(this._moved=!0,this._box=li("div","leaflet-zoom-box",this._container),Vt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(c);var v=new Qt(this._point,this._startPoint),C=v.getSize();Ji(this._box,v.min),this._box.style.width=C.x+"px",this._box.style.height=C.y+"px"},_finish:function(){this._moved&&(_i(this._box),Ki(this._container,"leaflet-crosshair")),za(),es(),ct(document,{contextmenu:ln,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(c){if(!(c.which!==1&&c.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(f(this._resetState,this),0);var v=new xi(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(v).fire("boxzoomend",{boxZoomBounds:v})}},_onKeyDown:function(c){c.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Xt.addInitHook("addHandler","boxZoom",Rc),Xt.mergeOptions({doubleClickZoom:!0});var Vl=xn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(c){var v=this._map,C=v.getZoom(),I=v.options.zoomDelta,q=c.originalEvent.shiftKey?C-I:C+I;v.options.doubleClickZoom==="center"?v.setZoom(q):v.setZoomAround(c.containerPoint,q)}});Xt.addInitHook("addHandler","doubleClickZoom",Vl),Xt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Zs=xn.extend({addHooks:function(){if(!this._draggable){var c=this._map;this._draggable=new Qi(c._mapPane,c._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),c.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),c.on("zoomend",this._onZoomEnd,this),c.whenReady(this._onZoomEnd,this))}Vt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ki(this._map._container,"leaflet-grab"),Ki(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var c=this._map;if(c._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var v=hi(this._map.options.maxBounds);this._offsetLimit=Pi(this._map.latLngToContainerPoint(v.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(v.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;c.fire("movestart").fire("dragstart"),c.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(c){if(this._map.options.inertia){var v=this._lastTime=+new Date,C=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(C),this._times.push(v),this._prunePositions(v)}this._map.fire("move",c).fire("drag",c)},_prunePositions:function(c){for(;this._positions.length>1&&c-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var c=this._map.getSize().divideBy(2),v=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=v.subtract(c).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(c,v){return c-(c-v)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var c=this._draggable._newPos.subtract(this._draggable._startPos),v=this._offsetLimit;c.x<v.min.x&&(c.x=this._viscousLimit(c.x,v.min.x)),c.y<v.min.y&&(c.y=this._viscousLimit(c.y,v.min.y)),c.x>v.max.x&&(c.x=this._viscousLimit(c.x,v.max.x)),c.y>v.max.y&&(c.y=this._viscousLimit(c.y,v.max.y)),this._draggable._newPos=this._draggable._startPos.add(c)}},_onPreDragWrap:function(){var c=this._worldWidth,v=Math.round(c/2),C=this._initialWorldOffset,I=this._draggable._newPos.x,q=(I-v+C)%c+v-C,re=(I+v+C)%c-v-C,ve=Math.abs(q+C)<Math.abs(re+C)?q:re;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ve},_onDragEnd:function(c){var v=this._map,C=v.options,I=!C.inertia||c.noInertia||this._times.length<2;if(v.fire("dragend",c),I)v.fire("moveend");else{this._prunePositions(+new Date);var q=this._lastPos.subtract(this._positions[0]),re=(this._lastTime-this._times[0])/1e3,ve=C.easeLinearity,De=q.multiplyBy(ve/re),Ve=De.distanceTo([0,0]),Ke=Math.min(C.inertiaMaxSpeed,Ve),ht=De.multiplyBy(Ke/Ve),It=Ke/(C.inertiaDeceleration*ve),Jt=ht.multiplyBy(-It/2).round();!Jt.x&&!Jt.y?v.fire("moveend"):(Jt=v._limitOffset(Jt,v.options.maxBounds),Tt(function(){v.panBy(Jt,{duration:It,easeLinearity:ve,noMoveStart:!0,animate:!0})}))}}});Xt.addInitHook("addHandler","dragging",Zs),Xt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Bc=xn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(c){this._map=c,this._setPanDelta(c.options.keyboardPanDelta),this._setZoomDelta(c.options.zoomDelta)},addHooks:function(){var c=this._map._container;c.tabIndex<=0&&(c.tabIndex="0"),wt(c,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ct(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var c=document.body,v=document.documentElement,C=c.scrollTop||v.scrollTop,I=c.scrollLeft||v.scrollLeft;this._map._container.focus(),window.scrollTo(I,C)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(c){var v=this._panKeys={},C=this.keyCodes,I,q;for(I=0,q=C.left.length;I<q;I++)v[C.left[I]]=[-1*c,0];for(I=0,q=C.right.length;I<q;I++)v[C.right[I]]=[c,0];for(I=0,q=C.down.length;I<q;I++)v[C.down[I]]=[0,c];for(I=0,q=C.up.length;I<q;I++)v[C.up[I]]=[0,-1*c]},_setZoomDelta:function(c){var v=this._zoomKeys={},C=this.keyCodes,I,q;for(I=0,q=C.zoomIn.length;I<q;I++)v[C.zoomIn[I]]=c;for(I=0,q=C.zoomOut.length;I<q;I++)v[C.zoomOut[I]]=-c},_addHooks:function(){wt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ct(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(c){if(!(c.altKey||c.ctrlKey||c.metaKey)){var v=c.keyCode,C=this._map,I;if(v in this._panKeys){if(!C._panAnim||!C._panAnim._inProgress)if(I=this._panKeys[v],c.shiftKey&&(I=bt(I).multiplyBy(3)),C.options.maxBounds&&(I=C._limitOffset(bt(I),C.options.maxBounds)),C.options.worldCopyJump){var q=C.wrapLatLng(C.unproject(C.project(C.getCenter()).add(I)));C.panTo(q)}else C.panBy(I)}else if(v in this._zoomKeys)C.setZoom(C.getZoom()+(c.shiftKey?3:1)*this._zoomKeys[v]);else if(v===27&&C._popup&&C._popup.options.closeOnEscapeKey)C.closePopup();else return;ln(c)}}});Xt.addInitHook("addHandler","keyboard",Bc),Xt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Fc=xn.extend({addHooks:function(){wt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ct(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(c){var v=Da(c),C=this._map.options.wheelDebounceTime;this._delta+=v,this._lastMousePos=this._map.mouseEventToContainerPoint(c),this._startTime||(this._startTime=+new Date);var I=Math.max(C-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f(this._performZoom,this),I),ln(c)},_performZoom:function(){var c=this._map,v=c.getZoom(),C=this._map.options.zoomSnap||0;c._stop();var I=this._delta/(this._map.options.wheelPxPerZoomLevel*4),q=4*Math.log(2/(1+Math.exp(-Math.abs(I))))/Math.LN2,re=C?Math.ceil(q/C)*C:q,ve=c._limitZoom(v+(this._delta>0?re:-re))-v;this._delta=0,this._startTime=null,ve&&(c.options.scrollWheelZoom==="center"?c.setZoom(v+ve):c.setZoomAround(this._lastMousePos,v+ve))}});Xt.addInitHook("addHandler","scrollWheelZoom",Fc);var jc=600;Xt.mergeOptions({tapHold:Ae.touchNative&&Ae.safari&&Ae.mobile,tapTolerance:15});var Nc=xn.extend({addHooks:function(){wt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ct(this._map._container,"touchstart",this._onDown,this)},_onDown:function(c){if(clearTimeout(this._holdTimeout),c.touches.length===1){var v=c.touches[0];this._startPos=this._newPos=new dt(v.clientX,v.clientY),this._holdTimeout=setTimeout(f(function(){this._cancel(),this._isTapValid()&&(wt(document,"touchend",ei),wt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",v))},this),jc),wt(document,"touchend touchcancel contextmenu",this._cancel,this),wt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function c(){ct(document,"touchend",ei),ct(document,"touchend touchcancel",c)},_cancel:function(){clearTimeout(this._holdTimeout),ct(document,"touchend touchcancel contextmenu",this._cancel,this),ct(document,"touchmove",this._onMove,this)},_onMove:function(c){var v=c.touches[0];this._newPos=new dt(v.clientX,v.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(c,v){var C=new MouseEvent(c,{bubbles:!0,cancelable:!0,view:window,screenX:v.screenX,screenY:v.screenY,clientX:v.clientX,clientY:v.clientY});C._simulated=!0,v.target.dispatchEvent(C)}});Xt.addInitHook("addHandler","tapHold",Nc),Xt.mergeOptions({touchZoom:Ae.touch,bounceAtZoomLimits:!0});var sl=xn.extend({addHooks:function(){Vt(this._map._container,"leaflet-touch-zoom"),wt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ki(this._map._container,"leaflet-touch-zoom"),ct(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(c){var v=this._map;if(!(!c.touches||c.touches.length!==2||v._animatingZoom||this._zooming)){var C=v.mouseEventToContainerPoint(c.touches[0]),I=v.mouseEventToContainerPoint(c.touches[1]);this._centerPoint=v.getSize()._divideBy(2),this._startLatLng=v.containerPointToLatLng(this._centerPoint),v.options.touchZoom!=="center"&&(this._pinchStartLatLng=v.containerPointToLatLng(C.add(I)._divideBy(2))),this._startDist=C.distanceTo(I),this._startZoom=v.getZoom(),this._moved=!1,this._zooming=!0,v._stop(),wt(document,"touchmove",this._onTouchMove,this),wt(document,"touchend touchcancel",this._onTouchEnd,this),ei(c)}},_onTouchMove:function(c){if(!(!c.touches||c.touches.length!==2||!this._zooming)){var v=this._map,C=v.mouseEventToContainerPoint(c.touches[0]),I=v.mouseEventToContainerPoint(c.touches[1]),q=C.distanceTo(I)/this._startDist;if(this._zoom=v.getScaleZoom(q,this._startZoom),!v.options.bounceAtZoomLimits&&(this._zoom<v.getMinZoom()&&q<1||this._zoom>v.getMaxZoom()&&q>1)&&(this._zoom=v._limitZoom(this._zoom)),v.options.touchZoom==="center"){if(this._center=this._startLatLng,q===1)return}else{var re=C._add(I)._divideBy(2)._subtract(this._centerPoint);if(q===1&&re.x===0&&re.y===0)return;this._center=v.unproject(v.project(this._pinchStartLatLng,this._zoom).subtract(re),this._zoom)}this._moved||(v._moveStart(!0,!1),this._moved=!0),Et(this._animRequest);var ve=f(v._move,v,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Tt(ve,this,!0),ei(c)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Et(this._animRequest),ct(document,"touchmove",this._onTouchMove,this),ct(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Xt.addInitHook("addHandler","touchZoom",sl),Xt.BoxZoom=Rc,Xt.DoubleClickZoom=Vl,Xt.Drag=Zs,Xt.Keyboard=Bc,Xt.ScrollWheelZoom=Fc,Xt.TapHold=Nc,Xt.TouchZoom=sl,s.Bounds=Qt,s.Browser=Ae,s.CRS=pr,s.Canvas=Vs,s.Circle=Bs,s.CircleMarker=ha,s.Class=ni,s.Control=zr,s.DivIcon=Ns,s.DivOverlay=dn,s.DomEvent=Sc,s.DomUtil=Xr,s.Draggable=Qi,s.Evented=Ct,s.FeatureGroup=On,s.GeoJSON=Rn,s.GridLayer=Ir,s.Handler=xn,s.Icon=Ra,s.ImageOverlay=wo,s.LatLng=Zt,s.LatLngBounds=xi,s.Layer=Jr,s.LayerGroup=rs,s.LineUtil=Ds,s.Map=Xt,s.Marker=$n,s.Mixin=Qu,s.Path=Yn,s.Point=dt,s.PolyUtil=Bl,s.Polygon=Xn,s.Polyline=pa,s.Popup=ss,s.PosAnimation=Xo,s.Projection=td,s.Rectangle=Gt,s.Renderer=wn,s.SVG=Us,s.SVGOverlay=Dc,s.TileLayer=ls,s.Tooltip=js,s.Transformation=br,s.Util=oi,s.VideoOverlay=Ic,s.bind=f,s.bounds=Pi,s.canvas=So,s.circle=id,s.circleMarker=Ac,s.control=$t,s.divIcon=qs,s.extend=p,s.featureGroup=Nl,s.geoJSON=el,s.geoJson=rd,s.gridLayer=Oc,s.icon=Pc,s.imageOverlay=nd,s.latLng=gt,s.latLngBounds=hi,s.layerGroup=kc,s.map=Ci,s.marker=Ec,s.point=bt,s.polygon=zc,s.polyline=Mc,s.popup=tl,s.rectangle=al,s.setOptions=ie,s.stamp=T,s.svg=nl,s.svgOverlay=ui,s.tileLayer=il,s.tooltip=os,s.transformation=cr,s.version=o,s.videoOverlay=Lc;var Hs=window.L;s.noConflict=function(){return window.L=Hs,this},window.L=s}))});var iE=ze((Gf,tE)=>{(function(s,o){typeof Gf=="object"&&typeof tE!="undefined"?o(Gf):typeof define=="function"&&define.amd?define(["exports"],o):(s=s||self,o((s.Leaflet=s.Leaflet||{},s.Leaflet.markercluster={})))})(Gf,function(s){"use strict";var o=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(d){L.Util.setOptions(this,d),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var f=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,f?this._withAnimation:this._noAnimation),this._markerCluster=f?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(d){if(d instanceof L.LayerGroup)return this.addLayers([d]);if(!d.getLatLng)return this._nonPointGroup.addLayer(d),this.fire("layeradd",{layer:d}),this;if(!this._map)return this._needsClustering.push(d),this.fire("layeradd",{layer:d}),this;if(this.hasLayer(d))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(d,this._maxZoom),this.fire("layeradd",{layer:d}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var f=d,a=this._zoom;if(d.__parent)for(;f.__parent._zoom>=a;)f=f.__parent;return this._currentShownBounds.contains(f.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(d,f):this._animationAddLayerNonAnimated(d,f)),this},removeLayer:function(d){return d instanceof L.LayerGroup?this.removeLayers([d]):d.getLatLng?this._map?d.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(d)),this._removeLayer(d,!0),this.fire("layerremove",{layer:d}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),d.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(d)&&(this._featureGroup.removeLayer(d),d.clusterShow&&d.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,d)&&this.hasLayer(d)&&this._needsRemoving.push({layer:d,latlng:d._latlng}),this.fire("layerremove",{layer:d}),this):(this._nonPointGroup.removeLayer(d),this.fire("layerremove",{layer:d}),this)},addLayers:function(d,f){if(!L.Util.isArray(d))return this.addLayer(d);var a=this._featureGroup,T=this._nonPointGroup,M=this.options.chunkedLoading,R=this.options.chunkInterval,V=this.options.chunkProgress,K=d.length,ne=0,G=!0,ie;if(this._map){var Y=new Date().getTime(),Se=L.bind(function(){var _e=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();ne<K;ne++){if(M&&ne%200===0){var Pe=new Date().getTime()-_e;if(Pe>R)break}if(ie=d[ne],ie instanceof L.LayerGroup){G&&(d=d.slice(),G=!1),this._extractNonGroupLayers(ie,d),K=d.length;continue}if(!ie.getLatLng){T.addLayer(ie),f||this.fire("layeradd",{layer:ie});continue}if(!this.hasLayer(ie)&&(this._addLayer(ie,this._maxZoom),f||this.fire("layeradd",{layer:ie}),ie.__parent&&ie.__parent.getChildCount()===2)){var Ye=ie.__parent.getAllChildMarkers(),st=Ye[0]===ie?Ye[1]:Ye[0];a.removeLayer(st)}}V&&V(ne,K,new Date().getTime()-Y),ne===K?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(Se,this.options.chunkDelay)},this);Se()}else for(var je=this._needsClustering;ne<K;ne++){if(ie=d[ne],ie instanceof L.LayerGroup){G&&(d=d.slice(),G=!1),this._extractNonGroupLayers(ie,d),K=d.length;continue}if(!ie.getLatLng){T.addLayer(ie);continue}this.hasLayer(ie)||je.push(ie)}return this},removeLayers:function(d){var f,a,T=d.length,M=this._featureGroup,R=this._nonPointGroup,V=!0;if(!this._map){for(f=0;f<T;f++){if(a=d[f],a instanceof L.LayerGroup){V&&(d=d.slice(),V=!1),this._extractNonGroupLayers(a,d),T=d.length;continue}this._arraySplice(this._needsClustering,a),R.removeLayer(a),this.hasLayer(a)&&this._needsRemoving.push({layer:a,latlng:a._latlng}),this.fire("layerremove",{layer:a})}return this}if(this._unspiderfy){this._unspiderfy();var K=d.slice(),ne=T;for(f=0;f<ne;f++){if(a=K[f],a instanceof L.LayerGroup){this._extractNonGroupLayers(a,K),ne=K.length;continue}this._unspiderfyLayer(a)}}for(f=0;f<T;f++){if(a=d[f],a instanceof L.LayerGroup){V&&(d=d.slice(),V=!1),this._extractNonGroupLayers(a,d),T=d.length;continue}if(!a.__parent){R.removeLayer(a),this.fire("layerremove",{layer:a});continue}this._removeLayer(a,!0,!0),this.fire("layerremove",{layer:a}),M.hasLayer(a)&&(M.removeLayer(a),a.clusterShow&&a.clusterShow())}return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(d){d.off(this._childMarkerEventHandlers,this),delete d.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var d=new L.LatLngBounds;this._topClusterLevel&&d.extend(this._topClusterLevel._bounds);for(var f=this._needsClustering.length-1;f>=0;f--)d.extend(this._needsClustering[f].getLatLng());return d.extend(this._nonPointGroup.getBounds()),d},eachLayer:function(d,f){var a=this._needsClustering.slice(),T=this._needsRemoving,M,R,V;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(a),R=a.length-1;R>=0;R--){for(M=!0,V=T.length-1;V>=0;V--)if(T[V].layer===a[R]){M=!1;break}M&&d.call(f,a[R])}this._nonPointGroup.eachLayer(d,f)},getLayers:function(){var d=[];return this.eachLayer(function(f){d.push(f)}),d},getLayer:function(d){var f=null;return d=parseInt(d,10),this.eachLayer(function(a){L.stamp(a)===d&&(f=a)}),f},hasLayer:function(d){if(!d)return!1;var f,a=this._needsClustering;for(f=a.length-1;f>=0;f--)if(a[f]===d)return!0;for(a=this._needsRemoving,f=a.length-1;f>=0;f--)if(a[f].layer===d)return!1;return!!(d.__parent&&d.__parent._group===this)||this._nonPointGroup.hasLayer(d)},zoomToShowLayer:function(d,f){var a=this._map;typeof f!="function"&&(f=function(){});var T=function(){(a.hasLayer(d)||a.hasLayer(d.__parent))&&!this._inZoomAnimation&&(this._map.off("moveend",T,this),this.off("animationend",T,this),a.hasLayer(d)?f():d.__parent._icon&&(this.once("spiderfied",f,this),d.__parent.spiderfy()))};d._icon&&this._map.getBounds().contains(d.getLatLng())?f():d.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",T,this),this._map.panTo(d.getLatLng())):(this._map.on("moveend",T,this),this.on("animationend",T,this),d.__parent.zoomToBounds())},onAdd:function(d){this._map=d;var f,a,T;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(d),this._nonPointGroup.addTo(d),this._gridClusters||this._generateInitialClusters(),this._maxLat=d.options.crs.projection.MAX_LATITUDE,f=0,a=this._needsRemoving.length;f<a;f++)T=this._needsRemoving[f],T.newlatlng=T.layer._latlng,T.layer._latlng=T.latlng;for(f=0,a=this._needsRemoving.length;f<a;f++)T=this._needsRemoving[f],this._removeLayer(T.layer,!0),T.layer._latlng=T.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),a=this._needsClustering,this._needsClustering=[],this.addLayers(a,!0)},onRemove:function(d){d.off("zoomend",this._zoomEnd,this),d.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(d){for(var f=d;f&&!f._icon;)f=f.__parent;return f||null},_arraySplice:function(d,f){for(var a=d.length-1;a>=0;a--)if(d[a]===f)return d.splice(a,1),!0},_removeFromGridUnclustered:function(d,f){for(var a=this._map,T=this._gridUnclustered,M=Math.floor(this._map.getMinZoom());f>=M&&T[f].removeObject(d,a.project(d.getLatLng(),f));f--);},_childMarkerDragStart:function(d){d.target.__dragStart=d.target._latlng},_childMarkerMoved:function(d){if(!this._ignoreMove&&!d.target.__dragStart){var f=d.target._popup&&d.target._popup.isOpen();this._moveChild(d.target,d.oldLatLng,d.latlng),f&&d.target.openPopup()}},_moveChild:function(d,f,a){d._latlng=f,this.removeLayer(d),d._latlng=a,this.addLayer(d)},_childMarkerDragEnd:function(d){var f=d.target.__dragStart;delete d.target.__dragStart,f&&this._moveChild(d.target,f,d.target._latlng)},_removeLayer:function(d,f,a){var T=this._gridClusters,M=this._gridUnclustered,R=this._featureGroup,V=this._map,K=Math.floor(this._map.getMinZoom());f&&this._removeFromGridUnclustered(d,this._maxZoom);var ne=d.__parent,G=ne._markers,ie;for(this._arraySplice(G,d);ne&&(ne._childCount--,ne._boundsNeedUpdate=!0,!(ne._zoom<K));)f&&ne._childCount<=1?(ie=ne._markers[0]===d?ne._markers[1]:ne._markers[0],T[ne._zoom].removeObject(ne,V.project(ne._cLatLng,ne._zoom)),M[ne._zoom].addObject(ie,V.project(ie.getLatLng(),ne._zoom)),this._arraySplice(ne.__parent._childClusters,ne),ne.__parent._markers.push(ie),ie.__parent=ne.__parent,ne._icon&&(R.removeLayer(ne),a||R.addLayer(ie))):ne._iconNeedsUpdate=!0,ne=ne.__parent;delete d.__parent},_isOrIsParent:function(d,f){for(;f;){if(d===f)return!0;f=f.parentNode}return!1},fire:function(d,f,a){if(f&&f.layer instanceof L.MarkerCluster){if(f.originalEvent&&this._isOrIsParent(f.layer._icon,f.originalEvent.relatedTarget))return;d="cluster"+d}L.FeatureGroup.prototype.fire.call(this,d,f,a)},listens:function(d,f){return L.FeatureGroup.prototype.listens.call(this,d,f)||L.FeatureGroup.prototype.listens.call(this,"cluster"+d,f)},_defaultIconCreateFunction:function(d){var f=d.getChildCount(),a=" marker-cluster-";return f<10?a+="small":f<100?a+="medium":a+="large",new L.DivIcon({html:"<div><span>"+f+"</span></div>",className:"marker-cluster"+a,iconSize:new L.Point(40,40)})},_bindEvents:function(){var d=this._map,f=this.options.spiderfyOnMaxZoom,a=this.options.showCoverageOnHover,T=this.options.zoomToBoundsOnClick,M=this.options.spiderfyOnEveryZoom;(f||T||M)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),a&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),d.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(d){var f=d.layer,a=f;if(!(d.type==="clusterkeypress"&&d.originalEvent&&d.originalEvent.keyCode!==13)){for(;a._childClusters.length===1;)a=a._childClusters[0];a._zoom===this._maxZoom&&a._childCount===f._childCount&&this.options.spiderfyOnMaxZoom?f.spiderfy():this.options.zoomToBoundsOnClick&&f.zoomToBounds(),this.options.spiderfyOnEveryZoom&&f.spiderfy(),d.originalEvent&&d.originalEvent.keyCode===13&&this._map._container.focus()}},_showCoverage:function(d){var f=this._map;this._inZoomAnimation||(this._shownPolygon&&f.removeLayer(this._shownPolygon),d.layer.getChildCount()>2&&d.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(d.layer.getConvexHull(),this.options.polygonOptions),f.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var d=this.options.spiderfyOnMaxZoom,f=this.options.showCoverageOnHover,a=this.options.zoomToBoundsOnClick,T=this.options.spiderfyOnEveryZoom,M=this._map;(d||a||T)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),f&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),M.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var d=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,d),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),d),this._currentShownBounds=d}},_generateInitialClusters:function(){var d=Math.ceil(this._map.getMaxZoom()),f=Math.floor(this._map.getMinZoom()),a=this.options.maxClusterRadius,T=a;typeof a!="function"&&(T=function(){return a}),this.options.disableClusteringAtZoom!==null&&(d=this.options.disableClusteringAtZoom-1),this._maxZoom=d,this._gridClusters={},this._gridUnclustered={};for(var M=d;M>=f;M--)this._gridClusters[M]=new L.DistanceGrid(T(M)),this._gridUnclustered[M]=new L.DistanceGrid(T(M));this._topClusterLevel=new this._markerCluster(this,f-1)},_addLayer:function(d,f){var a=this._gridClusters,T=this._gridUnclustered,M=Math.floor(this._map.getMinZoom()),R,V;for(this.options.singleMarkerMode&&this._overrideMarkerIcon(d),d.on(this._childMarkerEventHandlers,this);f>=M;f--){R=this._map.project(d.getLatLng(),f);var K=a[f].getNearObject(R);if(K){K._addChild(d),d.__parent=K;return}if(K=T[f].getNearObject(R),K){var ne=K.__parent;ne&&this._removeLayer(K,!1);var G=new this._markerCluster(this,f,K,d);a[f].addObject(G,this._map.project(G._cLatLng,f)),K.__parent=G,d.__parent=G;var ie=G;for(V=f-1;V>ne._zoom;V--)ie=new this._markerCluster(this,V,ie),a[V].addObject(ie,this._map.project(K.getLatLng(),V));ne._addChild(ie),this._removeFromGridUnclustered(K,f);return}T[f].addObject(d,R)}this._topClusterLevel._addChild(d),d.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(d){d instanceof L.MarkerCluster&&d._iconNeedsUpdate&&d._updateIcon()})},_enqueue:function(d){this._queue.push(d),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var d=0;d<this._queue.length;d++)this._queue[d].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var d=Math.round(this._map._zoom);this._processQueue(),this._zoom<d&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,d)):this._zoom>d?(this._animationStart(),this._animationZoomOut(this._zoom,d)):this._moveEnd()},_getExpandedVisibleBounds:function(){if(this.options.removeOutsideVisibleBounds){if(L.Browser.mobile)return this._checkBoundsMaxLat(this._map.getBounds())}else return this._mapBoundsInfinite;return this._checkBoundsMaxLat(this._map.getBounds().pad(1))},_checkBoundsMaxLat:function(d){var f=this._maxLat;return f!==void 0&&(d.getNorth()>=f&&(d._northEast.lat=1/0),d.getSouth()<=-f&&(d._southWest.lat=-1/0)),d},_animationAddLayerNonAnimated:function(d,f){if(f===d)this._featureGroup.addLayer(d);else if(f._childCount===2){f._addToMap();var a=f.getAllChildMarkers();this._featureGroup.removeLayer(a[0]),this._featureGroup.removeLayer(a[1])}else f._updateIcon()},_extractNonGroupLayers:function(d,f){var a=d.getLayers(),T=0,M;for(f=f||[];T<a.length;T++){if(M=a[T],M instanceof L.LayerGroup){this._extractNonGroupLayers(M,f);continue}f.push(M)}return f},_overrideMarkerIcon:function(d){var f=d.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[d]}});return f}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(d,f){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),d),this._topClusterLevel._recursivelyAddChildrenToMap(null,f,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(d,f){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),d),this._topClusterLevel._recursivelyAddChildrenToMap(null,f,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(d,f){this._animationAddLayerNonAnimated(d,f)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(d,f){var a=this._getExpandedVisibleBounds(),T=this._featureGroup,M=Math.floor(this._map.getMinZoom()),R;this._ignoreMove=!0,this._topClusterLevel._recursively(a,d,M,function(V){var K=V._latlng,ne=V._markers,G;for(a.contains(K)||(K=null),V._isSingleParent()&&d+1===f?(T.removeLayer(V),V._recursivelyAddChildrenToMap(null,f,a)):(V.clusterHide(),V._recursivelyAddChildrenToMap(K,f,a)),R=ne.length-1;R>=0;R--)G=ne[R],a.contains(G._latlng)||T.removeLayer(G)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(a,f),T.eachLayer(function(V){!(V instanceof L.MarkerCluster)&&V._icon&&V.clusterShow()}),this._topClusterLevel._recursively(a,d,f,function(V){V._recursivelyRestoreChildPositions(f)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(a,d,M,function(V){T.removeLayer(V),V.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(d,f){this._animationZoomOutSingle(this._topClusterLevel,d-1,f),this._topClusterLevel._recursivelyAddChildrenToMap(null,f,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),d,this._getExpandedVisibleBounds())},_animationAddLayer:function(d,f){var a=this,T=this._featureGroup;T.addLayer(d),f!==d&&(f._childCount>2?(f._updateIcon(),this._forceLayout(),this._animationStart(),d._setPos(this._map.latLngToLayerPoint(f.getLatLng())),d.clusterHide(),this._enqueue(function(){T.removeLayer(d),d.clusterShow(),a._animationEnd()})):(this._forceLayout(),a._animationStart(),a._animationZoomOutSingle(f,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(d,f,a){var T=this._getExpandedVisibleBounds(),M=Math.floor(this._map.getMinZoom());d._recursivelyAnimateChildrenInAndAddSelfToMap(T,M,f+1,a);var R=this;this._forceLayout(),d._recursivelyBecomeVisible(T,a),this._enqueue(function(){if(d._childCount===1){var V=d._markers[0];this._ignoreMove=!0,V.setLatLng(V.getLatLng()),this._ignoreMove=!1,V.clusterShow&&V.clusterShow()}else d._recursively(T,a,M,function(K){K._recursivelyRemoveChildrenFromMap(T,M,f+1)});R._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(d){return new L.MarkerClusterGroup(d)};var p=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(d,f,a,T){L.Marker.prototype.initialize.call(this,a?a._cLatLng||a.getLatLng():new L.LatLng(0,0),{icon:this,pane:d.options.clusterPane}),this._group=d,this._zoom=f,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,a&&this._addChild(a),T&&this._addChild(T)},getAllChildMarkers:function(d,f){d=d||[];for(var a=this._childClusters.length-1;a>=0;a--)this._childClusters[a].getAllChildMarkers(d,f);for(var T=this._markers.length-1;T>=0;T--)f&&this._markers[T].__dragStart||d.push(this._markers[T]);return d},getChildCount:function(){return this._childCount},zoomToBounds:function(d){for(var f=this._childClusters.slice(),a=this._group._map,T=a.getBoundsZoom(this._bounds),M=this._zoom+1,R=a.getZoom(),V;f.length>0&&T>M;){M++;var K=[];for(V=0;V<f.length;V++)K=K.concat(f[V]._childClusters);f=K}T>M?this._group._map.setView(this._latlng,M):T<=R?this._group._map.setView(this._latlng,R+1):this._group._map.fitBounds(this._bounds,d)},getBounds:function(){var d=new L.LatLngBounds;return d.extend(this._bounds),d},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(d,f){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(d),d instanceof L.MarkerCluster?(f||(this._childClusters.push(d),d.__parent=this),this._childCount+=d._childCount):(f||this._markers.push(d),this._childCount++),this.__parent&&this.__parent._addChild(d,!0)},_setClusterCenter:function(d){this._cLatLng||(this._cLatLng=d._cLatLng||d._latlng)},_resetBounds:function(){var d=this._bounds;d._southWest&&(d._southWest.lat=1/0,d._southWest.lng=1/0),d._northEast&&(d._northEast.lat=-1/0,d._northEast.lng=-1/0)},_recalculateBounds:function(){var d=this._markers,f=this._childClusters,a=0,T=0,M=this._childCount,R,V,K,ne;if(M!==0){for(this._resetBounds(),R=0;R<d.length;R++)K=d[R]._latlng,this._bounds.extend(K),a+=K.lat,T+=K.lng;for(R=0;R<f.length;R++)V=f[R],V._boundsNeedUpdate&&V._recalculateBounds(),this._bounds.extend(V._bounds),K=V._wLatLng,ne=V._childCount,a+=K.lat*ne,T+=K.lng*ne;this._latlng=this._wLatLng=new L.LatLng(a/M,T/M),this._boundsNeedUpdate=!1}},_addToMap:function(d){d&&(this._backupLatlng=this._latlng,this.setLatLng(d)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(d,f,a){this._recursively(d,this._group._map.getMinZoom(),a-1,function(T){var M=T._markers,R,V;for(R=M.length-1;R>=0;R--)V=M[R],V._icon&&(V._setPos(f),V.clusterHide())},function(T){var M=T._childClusters,R,V;for(R=M.length-1;R>=0;R--)V=M[R],V._icon&&(V._setPos(f),V.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(d,f,a,T){this._recursively(d,T,f,function(M){M._recursivelyAnimateChildrenIn(d,M._group._map.latLngToLayerPoint(M.getLatLng()).round(),a),M._isSingleParent()&&a-1===T?(M.clusterShow(),M._recursivelyRemoveChildrenFromMap(d,f,a)):M.clusterHide(),M._addToMap()})},_recursivelyBecomeVisible:function(d,f){this._recursively(d,this._group._map.getMinZoom(),f,null,function(a){a.clusterShow()})},_recursivelyAddChildrenToMap:function(d,f,a){this._recursively(a,this._group._map.getMinZoom()-1,f,function(T){if(f!==T._zoom)for(var M=T._markers.length-1;M>=0;M--){var R=T._markers[M];a.contains(R._latlng)&&(d&&(R._backupLatlng=R.getLatLng(),R.setLatLng(d),R.clusterHide&&R.clusterHide()),T._group._featureGroup.addLayer(R))}},function(T){T._addToMap(d)})},_recursivelyRestoreChildPositions:function(d){for(var f=this._markers.length-1;f>=0;f--){var a=this._markers[f];a._backupLatlng&&(a.setLatLng(a._backupLatlng),delete a._backupLatlng)}if(d-1===this._zoom)for(var T=this._childClusters.length-1;T>=0;T--)this._childClusters[T]._restorePosition();else for(var M=this._childClusters.length-1;M>=0;M--)this._childClusters[M]._recursivelyRestoreChildPositions(d)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(d,f,a,T){var M,R;this._recursively(d,f-1,a-1,function(V){for(R=V._markers.length-1;R>=0;R--)M=V._markers[R],(!T||!T.contains(M._latlng))&&(V._group._featureGroup.removeLayer(M),M.clusterShow&&M.clusterShow())},function(V){for(R=V._childClusters.length-1;R>=0;R--)M=V._childClusters[R],(!T||!T.contains(M._latlng))&&(V._group._featureGroup.removeLayer(M),M.clusterShow&&M.clusterShow())})},_recursively:function(d,f,a,T,M){var R=this._childClusters,V=this._zoom,K,ne;if(f<=V&&(T&&T(this),M&&V===a&&M(this)),V<f||V<a)for(K=R.length-1;K>=0;K--)ne=R[K],ne._boundsNeedUpdate&&ne._recalculateBounds(),d.intersects(ne._bounds)&&ne._recursively(d,f,a,T,M)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var d=this.options.opacity;return this.setOpacity(0),this.options.opacity=d,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(d){this._cellSize=d,this._sqCellSize=d*d,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(d,f){var a=this._getCoord(f.x),T=this._getCoord(f.y),M=this._grid,R=M[T]=M[T]||{},V=R[a]=R[a]||[],K=L.Util.stamp(d);this._objectPoint[K]=f,V.push(d)},updateObject:function(d,f){this.removeObject(d),this.addObject(d,f)},removeObject:function(d,f){var a=this._getCoord(f.x),T=this._getCoord(f.y),M=this._grid,R=M[T]=M[T]||{},V=R[a]=R[a]||[],K,ne;for(delete this._objectPoint[L.Util.stamp(d)],K=0,ne=V.length;K<ne;K++)if(V[K]===d)return V.splice(K,1),ne===1&&delete R[a],!0},eachObject:function(d,f){var a,T,M,R,V,K,ne,G=this._grid;for(a in G){V=G[a];for(T in V)for(K=V[T],M=0,R=K.length;M<R;M++)ne=d.call(f,K[M]),ne&&(M--,R--)}},getNearObject:function(d){var f=this._getCoord(d.x),a=this._getCoord(d.y),T,M,R,V,K,ne,G,ie,Y=this._objectPoint,Se=this._sqCellSize,je=null;for(T=a-1;T<=a+1;T++)if(V=this._grid[T],V){for(M=f-1;M<=f+1;M++)if(K=V[M],K)for(R=0,ne=K.length;R<ne;R++)G=K[R],ie=this._sqDist(Y[L.Util.stamp(G)],d),(ie<Se||ie<=Se&&je===null)&&(Se=ie,je=G)}return je},_getCoord:function(d){var f=Math.floor(d/this._cellSize);return isFinite(f)?f:d},_sqDist:function(d,f){var a=f.x-d.x,T=f.y-d.y;return a*a+T*T}},(function(){L.QuickHull={getDistant:function(d,f){var a=f[1].lat-f[0].lat,T=f[0].lng-f[1].lng;return T*(d.lat-f[0].lat)+a*(d.lng-f[0].lng)},findMostDistantPointFromBaseLine:function(d,f){var a=0,T=null,M=[],R,V,K;for(R=f.length-1;R>=0;R--){if(V=f[R],K=this.getDistant(V,d),K>0)M.push(V);else continue;K>a&&(a=K,T=V)}return{maxPoint:T,newPoints:M}},buildConvexHull:function(d,f){var a=[],T=this.findMostDistantPointFromBaseLine(d,f);return T.maxPoint?(a=a.concat(this.buildConvexHull([d[0],T.maxPoint],T.newPoints)),a=a.concat(this.buildConvexHull([T.maxPoint,d[1]],T.newPoints)),a):[d[0]]},getConvexHull:function(d){var f=!1,a=!1,T=!1,M=!1,R=null,V=null,K=null,ne=null,G=null,ie=null,Y;for(Y=d.length-1;Y>=0;Y--){var Se=d[Y];(f===!1||Se.lat>f)&&(R=Se,f=Se.lat),(a===!1||Se.lat<a)&&(V=Se,a=Se.lat),(T===!1||Se.lng>T)&&(K=Se,T=Se.lng),(M===!1||Se.lng<M)&&(ne=Se,M=Se.lng)}a!==f?(ie=V,G=R):(ie=ne,G=K);var je=[].concat(this.buildConvexHull([ie,G],d),this.buildConvexHull([G,ie],d));return je}}})(),L.MarkerCluster.include({getConvexHull:function(){var d=this.getAllChildMarkers(),f=[],a,T;for(T=d.length-1;T>=0;T--)a=d[T].getLatLng(),f.push(a);return L.QuickHull.getConvexHull(f)}}),L.MarkerCluster.include({_2PI:Math.PI*2,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(!(this._group._spiderfied===this||this._group._inZoomAnimation)){var d=this.getAllChildMarkers(null,!0),f=this._group,a=f._map,T=a.latLngToLayerPoint(this._latlng),M;this._group._unspiderfy(),this._group._spiderfied=this,this._group.options.spiderfyShapePositions?M=this._group.options.spiderfyShapePositions(d.length,T):d.length>=this._circleSpiralSwitchover?M=this._generatePointsSpiral(d.length,T):(T.y+=10,M=this._generatePointsCircle(d.length,T)),this._animationSpiderfy(d,M)}},unspiderfy:function(d){this._group._inZoomAnimation||(this._animationUnspiderfy(d),this._group._spiderfied=null)},_generatePointsCircle:function(d,f){var a=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+d),T=a/this._2PI,M=this._2PI/d,R=[],V,K;for(T=Math.max(T,35),R.length=d,V=0;V<d;V++)K=this._circleStartAngle+V*M,R[V]=new L.Point(f.x+T*Math.cos(K),f.y+T*Math.sin(K))._round();return R},_generatePointsSpiral:function(d,f){var a=this._group.options.spiderfyDistanceMultiplier,T=a*this._spiralLengthStart,M=a*this._spiralFootSeparation,R=a*this._spiralLengthFactor*this._2PI,V=0,K=[],ne;for(K.length=d,ne=d;ne>=0;ne--)ne<d&&(K[ne]=new L.Point(f.x+T*Math.cos(V),f.y+T*Math.sin(V))._round()),V+=M/T+ne*5e-4,T+=R/V;return K},_noanimationUnspiderfy:function(){var d=this._group,f=d._map,a=d._featureGroup,T=this.getAllChildMarkers(null,!0),M,R;for(d._ignoreMove=!0,this.setOpacity(1),R=T.length-1;R>=0;R--)M=T[R],a.removeLayer(M),M._preSpiderfyLatlng&&(M.setLatLng(M._preSpiderfyLatlng),delete M._preSpiderfyLatlng),M.setZIndexOffset&&M.setZIndexOffset(0),M._spiderLeg&&(f.removeLayer(M._spiderLeg),delete M._spiderLeg);d.fire("unspiderfied",{cluster:this,markers:T}),d._ignoreMove=!1,d._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(d,f){var a=this._group,T=a._map,M=a._featureGroup,R=this._group.options.spiderLegPolylineOptions,V,K,ne,G;for(a._ignoreMove=!0,V=0;V<d.length;V++)G=T.layerPointToLatLng(f[V]),K=d[V],ne=new L.Polyline([this._latlng,G],R),T.addLayer(ne),K._spiderLeg=ne,K._preSpiderfyLatlng=K._latlng,K.setLatLng(G),K.setZIndexOffset&&K.setZIndexOffset(1e6),M.addLayer(K);this.setOpacity(.3),a._ignoreMove=!1,a.fire("spiderfied",{cluster:this,markers:d})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(d,f){var a=this,T=this._group,M=T._map,R=T._featureGroup,V=this._latlng,K=M.latLngToLayerPoint(V),ne=L.Path.SVG,G=L.extend({},this._group.options.spiderLegPolylineOptions),ie=G.opacity,Y,Se,je,_e,Pe,Ye;for(ie===void 0&&(ie=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),ne?(G.opacity=0,G.className=(G.className||"")+" leaflet-cluster-spider-leg"):G.opacity=ie,T._ignoreMove=!0,Y=0;Y<d.length;Y++)Se=d[Y],Ye=M.layerPointToLatLng(f[Y]),je=new L.Polyline([V,Ye],G),M.addLayer(je),Se._spiderLeg=je,ne&&(_e=je._path,Pe=_e.getTotalLength()+.1,_e.style.strokeDasharray=Pe,_e.style.strokeDashoffset=Pe),Se.setZIndexOffset&&Se.setZIndexOffset(1e6),Se.clusterHide&&Se.clusterHide(),R.addLayer(Se),Se._setPos&&Se._setPos(K);for(T._forceLayout(),T._animationStart(),Y=d.length-1;Y>=0;Y--)Ye=M.layerPointToLatLng(f[Y]),Se=d[Y],Se._preSpiderfyLatlng=Se._latlng,Se.setLatLng(Ye),Se.clusterShow&&Se.clusterShow(),ne&&(je=Se._spiderLeg,_e=je._path,_e.style.strokeDashoffset=0,je.setStyle({opacity:ie}));this.setOpacity(.3),T._ignoreMove=!1,setTimeout(function(){T._animationEnd(),T.fire("spiderfied",{cluster:a,markers:d})},200)},_animationUnspiderfy:function(d){var f=this,a=this._group,T=a._map,M=a._featureGroup,R=d?T._latLngToNewLayerPoint(this._latlng,d.zoom,d.center):T.latLngToLayerPoint(this._latlng),V=this.getAllChildMarkers(null,!0),K=L.Path.SVG,ne,G,ie,Y,Se,je;for(a._ignoreMove=!0,a._animationStart(),this.setOpacity(1),G=V.length-1;G>=0;G--)ne=V[G],ne._preSpiderfyLatlng&&(ne.closePopup(),ne.setLatLng(ne._preSpiderfyLatlng),delete ne._preSpiderfyLatlng,je=!0,ne._setPos&&(ne._setPos(R),je=!1),ne.clusterHide&&(ne.clusterHide(),je=!1),je&&M.removeLayer(ne),K&&(ie=ne._spiderLeg,Y=ie._path,Se=Y.getTotalLength()+.1,Y.style.strokeDashoffset=Se,ie.setStyle({opacity:0})));a._ignoreMove=!1,setTimeout(function(){var _e=0;for(G=V.length-1;G>=0;G--)ne=V[G],ne._spiderLeg&&_e++;for(G=V.length-1;G>=0;G--)ne=V[G],ne._spiderLeg&&(ne.clusterShow&&ne.clusterShow(),ne.setZIndexOffset&&ne.setZIndexOffset(0),_e>1&&M.removeLayer(ne),T.removeLayer(ne._spiderLeg),delete ne._spiderLeg);a._animationEnd(),a.fire("unspiderfied",{cluster:f,markers:V})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(d){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(d))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(d){this._spiderfied&&this._spiderfied.unspiderfy(d)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(d){d._spiderLeg&&(this._featureGroup.removeLayer(d),d.clusterShow&&d.clusterShow(),d.setZIndexOffset&&d.setZIndexOffset(0),this._map.removeLayer(d._spiderLeg),delete d._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(d){return d?d instanceof L.MarkerClusterGroup?d=d._topClusterLevel.getAllChildMarkers():d instanceof L.LayerGroup?d=d._layers:d instanceof L.MarkerCluster?d=d.getAllChildMarkers():d instanceof L.Marker&&(d=[d]):d=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(d),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(d),this},_flagParentsIconsNeedUpdate:function(d){var f,a;for(f in d)for(a=d[f].__parent;a;)a._iconNeedsUpdate=!0,a=a.__parent},_refreshSingleMarkerModeMarkers:function(d){var f,a;for(f in d)a=d[f],this.hasLayer(a)&&a.setIcon(this._overrideMarkerIcon(a))}}),L.Marker.include({refreshIconOptions:function(d,f){var a=this.options.icon;return L.setOptions(a,d),this.setIcon(a),f&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),s.MarkerClusterGroup=o,s.MarkerCluster=p,Object.defineProperty(s,"__esModule",{value:!0})})});var cE=ze(D_=>{D_.read=function(s,o,p,d,f){var a,T,M=f*8-d-1,R=(1<<M)-1,V=R>>1,K=-7,ne=p?f-1:0,G=p?-1:1,ie=s[o+ne];for(ne+=G,a=ie&(1<<-K)-1,ie>>=-K,K+=M;K>0;a=a*256+s[o+ne],ne+=G,K-=8);for(T=a&(1<<-K)-1,a>>=-K,K+=d;K>0;T=T*256+s[o+ne],ne+=G,K-=8);if(a===0)a=1-V;else{if(a===R)return T?NaN:(ie?-1:1)*(1/0);T=T+Math.pow(2,d),a=a-V}return(ie?-1:1)*T*Math.pow(2,a-d)};D_.write=function(s,o,p,d,f,a){var T,M,R,V=a*8-f-1,K=(1<<V)-1,ne=K>>1,G=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,ie=d?0:a-1,Y=d?1:-1,Se=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(M=isNaN(o)?1:0,T=K):(T=Math.floor(Math.log(o)/Math.LN2),o*(R=Math.pow(2,-T))<1&&(T--,R*=2),T+ne>=1?o+=G/R:o+=G*Math.pow(2,1-ne),o*R>=2&&(T++,R/=2),T+ne>=K?(M=0,T=K):T+ne>=1?(M=(o*R-1)*Math.pow(2,f),T=T+ne):(M=o*Math.pow(2,ne-1)*Math.pow(2,f),T=0));f>=8;s[p+ie]=M&255,ie+=Y,M/=256,f-=8);for(T=T<<f|M,V+=f;V>0;s[p+ie]=T&255,ie+=Y,T/=256,V-=8);s[p+ie-Y]|=Se*128}});var mE=ze((x8,fE)=>{"use strict";fE.exports=Mi;var $f=cE();function Mi(s){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(s)?s:new Uint8Array(s||0),this.pos=0,this.type=0,this.length=this.buf.length}Mi.Varint=0;Mi.Fixed64=1;Mi.Bytes=2;Mi.Fixed32=5;var O_=65536*65536,uE=1/O_,N5=12,pE=typeof TextDecoder=="undefined"?null:new TextDecoder("utf-8");Mi.prototype={destroy:function(){this.buf=null},readFields:function(s,o,p){for(p=p||this.length;this.pos<p;){var d=this.readVarint(),f=d>>3,a=this.pos;this.type=d&7,s(f,o,this),this.pos===a&&this.skip(d)}return o},readMessage:function(s,o){return this.readFields(s,o,this.readVarint()+this.pos)},readFixed32:function(){var s=Yf(this.buf,this.pos);return this.pos+=4,s},readSFixed32:function(){var s=hE(this.buf,this.pos);return this.pos+=4,s},readFixed64:function(){var s=Yf(this.buf,this.pos)+Yf(this.buf,this.pos+4)*O_;return this.pos+=8,s},readSFixed64:function(){var s=Yf(this.buf,this.pos)+hE(this.buf,this.pos+4)*O_;return this.pos+=8,s},readFloat:function(){var s=$f.read(this.buf,this.pos,!0,23,4);return this.pos+=4,s},readDouble:function(){var s=$f.read(this.buf,this.pos,!0,52,8);return this.pos+=8,s},readVarint:function(s){var o=this.buf,p,d;return d=o[this.pos++],p=d&127,d<128||(d=o[this.pos++],p|=(d&127)<<7,d<128)||(d=o[this.pos++],p|=(d&127)<<14,d<128)||(d=o[this.pos++],p|=(d&127)<<21,d<128)?p:(d=o[this.pos],p|=(d&15)<<28,q5(p,s,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var s=this.readVarint();return s%2===1?(s+1)/-2:s/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var s=this.readVarint()+this.pos,o=this.pos;return this.pos=s,s-o>=N5&&pE?tF(this.buf,o,s):eF(this.buf,o,s)},readBytes:function(){var s=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,s);return this.pos=s,o},readPackedVarint:function(s,o){if(this.type!==Mi.Bytes)return s.push(this.readVarint(o));var p=Wo(this);for(s=s||[];this.pos<p;)s.push(this.readVarint(o));return s},readPackedSVarint:function(s){if(this.type!==Mi.Bytes)return s.push(this.readSVarint());var o=Wo(this);for(s=s||[];this.pos<o;)s.push(this.readSVarint());return s},readPackedBoolean:function(s){if(this.type!==Mi.Bytes)return s.push(this.readBoolean());var o=Wo(this);for(s=s||[];this.pos<o;)s.push(this.readBoolean());return s},readPackedFloat:function(s){if(this.type!==Mi.Bytes)return s.push(this.readFloat());var o=Wo(this);for(s=s||[];this.pos<o;)s.push(this.readFloat());return s},readPackedDouble:function(s){if(this.type!==Mi.Bytes)return s.push(this.readDouble());var o=Wo(this);for(s=s||[];this.pos<o;)s.push(this.readDouble());return s},readPackedFixed32:function(s){if(this.type!==Mi.Bytes)return s.push(this.readFixed32());var o=Wo(this);for(s=s||[];this.pos<o;)s.push(this.readFixed32());return s},readPackedSFixed32:function(s){if(this.type!==Mi.Bytes)return s.push(this.readSFixed32());var o=Wo(this);for(s=s||[];this.pos<o;)s.push(this.readSFixed32());return s},readPackedFixed64:function(s){if(this.type!==Mi.Bytes)return s.push(this.readFixed64());var o=Wo(this);for(s=s||[];this.pos<o;)s.push(this.readFixed64());return s},readPackedSFixed64:function(s){if(this.type!==Mi.Bytes)return s.push(this.readSFixed64());var o=Wo(this);for(s=s||[];this.pos<o;)s.push(this.readSFixed64());return s},skip:function(s){var o=s&7;if(o===Mi.Varint)for(;this.buf[this.pos++]>127;);else if(o===Mi.Bytes)this.pos=this.readVarint()+this.pos;else if(o===Mi.Fixed32)this.pos+=4;else if(o===Mi.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+o)},writeTag:function(s,o){this.writeVarint(s<<3|o)},realloc:function(s){for(var o=this.length||16;o<this.pos+s;)o*=2;if(o!==this.length){var p=new Uint8Array(o);p.set(this.buf),this.buf=p,this.length=o}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(s){this.realloc(4),Yu(this.buf,s,this.pos),this.pos+=4},writeSFixed32:function(s){this.realloc(4),Yu(this.buf,s,this.pos),this.pos+=4},writeFixed64:function(s){this.realloc(8),Yu(this.buf,s&-1,this.pos),Yu(this.buf,Math.floor(s*uE),this.pos+4),this.pos+=8},writeSFixed64:function(s){this.realloc(8),Yu(this.buf,s&-1,this.pos),Yu(this.buf,Math.floor(s*uE),this.pos+4),this.pos+=8},writeVarint:function(s){if(s=+s||0,s>268435455||s<0){V5(s,this);return}this.realloc(4),this.buf[this.pos++]=s&127|(s>127?128:0),!(s<=127)&&(this.buf[this.pos++]=(s>>>=7)&127|(s>127?128:0),!(s<=127)&&(this.buf[this.pos++]=(s>>>=7)&127|(s>127?128:0),!(s<=127)&&(this.buf[this.pos++]=s>>>7&127)))},writeSVarint:function(s){this.writeVarint(s<0?-s*2-1:s*2)},writeBoolean:function(s){this.writeVarint(!!s)},writeString:function(s){s=String(s),this.realloc(s.length*4),this.pos++;var o=this.pos;this.pos=iF(this.buf,s,this.pos);var p=this.pos-o;p>=128&&dE(o,p,this),this.pos=o-1,this.writeVarint(p),this.pos+=p},writeFloat:function(s){this.realloc(4),$f.write(this.buf,s,this.pos,!0,23,4),this.pos+=4},writeDouble:function(s){this.realloc(8),$f.write(this.buf,s,this.pos,!0,52,8),this.pos+=8},writeBytes:function(s){var o=s.length;this.writeVarint(o),this.realloc(o);for(var p=0;p<o;p++)this.buf[this.pos++]=s[p]},writeRawMessage:function(s,o){this.pos++;var p=this.pos;s(o,this);var d=this.pos-p;d>=128&&dE(p,d,this),this.pos=p-1,this.writeVarint(d),this.pos+=d},writeMessage:function(s,o,p){this.writeTag(s,Mi.Bytes),this.writeRawMessage(o,p)},writePackedVarint:function(s,o){o.length&&this.writeMessage(s,U5,o)},writePackedSVarint:function(s,o){o.length&&this.writeMessage(s,Z5,o)},writePackedBoolean:function(s,o){o.length&&this.writeMessage(s,Y5,o)},writePackedFloat:function(s,o){o.length&&this.writeMessage(s,H5,o)},writePackedDouble:function(s,o){o.length&&this.writeMessage(s,$5,o)},writePackedFixed32:function(s,o){o.length&&this.writeMessage(s,X5,o)},writePackedSFixed32:function(s,o){o.length&&this.writeMessage(s,K5,o)},writePackedFixed64:function(s,o){o.length&&this.writeMessage(s,J5,o)},writePackedSFixed64:function(s,o){o.length&&this.writeMessage(s,Q5,o)},writeBytesField:function(s,o){this.writeTag(s,Mi.Bytes),this.writeBytes(o)},writeFixed32Field:function(s,o){this.writeTag(s,Mi.Fixed32),this.writeFixed32(o)},writeSFixed32Field:function(s,o){this.writeTag(s,Mi.Fixed32),this.writeSFixed32(o)},writeFixed64Field:function(s,o){this.writeTag(s,Mi.Fixed64),this.writeFixed64(o)},writeSFixed64Field:function(s,o){this.writeTag(s,Mi.Fixed64),this.writeSFixed64(o)},writeVarintField:function(s,o){this.writeTag(s,Mi.Varint),this.writeVarint(o)},writeSVarintField:function(s,o){this.writeTag(s,Mi.Varint),this.writeSVarint(o)},writeStringField:function(s,o){this.writeTag(s,Mi.Bytes),this.writeString(o)},writeFloatField:function(s,o){this.writeTag(s,Mi.Fixed32),this.writeFloat(o)},writeDoubleField:function(s,o){this.writeTag(s,Mi.Fixed64),this.writeDouble(o)},writeBooleanField:function(s,o){this.writeVarintField(s,!!o)}};function q5(s,o,p){var d=p.buf,f,a;if(a=d[p.pos++],f=(a&112)>>4,a<128||(a=d[p.pos++],f|=(a&127)<<3,a<128)||(a=d[p.pos++],f|=(a&127)<<10,a<128)||(a=d[p.pos++],f|=(a&127)<<17,a<128)||(a=d[p.pos++],f|=(a&127)<<24,a<128)||(a=d[p.pos++],f|=(a&1)<<31,a<128))return $u(s,f,o);throw new Error("Expected varint not more than 10 bytes")}function Wo(s){return s.type===Mi.Bytes?s.readVarint()+s.pos:s.pos+1}function $u(s,o,p){return p?o*4294967296+(s>>>0):(o>>>0)*4294967296+(s>>>0)}function V5(s,o){var p,d;if(s>=0?(p=s%4294967296|0,d=s/4294967296|0):(p=~(-s%4294967296),d=~(-s/4294967296),p^4294967295?p=p+1|0:(p=0,d=d+1|0)),s>=18446744073709552e3||s<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");o.realloc(10),W5(p,d,o),G5(d,o)}function W5(s,o,p){p.buf[p.pos++]=s&127|128,s>>>=7,p.buf[p.pos++]=s&127|128,s>>>=7,p.buf[p.pos++]=s&127|128,s>>>=7,p.buf[p.pos++]=s&127|128,s>>>=7,p.buf[p.pos]=s&127}function G5(s,o){var p=(s&7)<<4;o.buf[o.pos++]|=p|((s>>>=3)?128:0),s&&(o.buf[o.pos++]=s&127|((s>>>=7)?128:0),s&&(o.buf[o.pos++]=s&127|((s>>>=7)?128:0),s&&(o.buf[o.pos++]=s&127|((s>>>=7)?128:0),s&&(o.buf[o.pos++]=s&127|((s>>>=7)?128:0),s&&(o.buf[o.pos++]=s&127)))))}function dE(s,o,p){var d=o<=16383?1:o<=2097151?2:o<=268435455?3:Math.floor(Math.log(o)/(Math.LN2*7));p.realloc(d);for(var f=p.pos-1;f>=s;f--)p.buf[f+d]=p.buf[f]}function U5(s,o){for(var p=0;p<s.length;p++)o.writeVarint(s[p])}function Z5(s,o){for(var p=0;p<s.length;p++)o.writeSVarint(s[p])}function H5(s,o){for(var p=0;p<s.length;p++)o.writeFloat(s[p])}function $5(s,o){for(var p=0;p<s.length;p++)o.writeDouble(s[p])}function Y5(s,o){for(var p=0;p<s.length;p++)o.writeBoolean(s[p])}function X5(s,o){for(var p=0;p<s.length;p++)o.writeFixed32(s[p])}function K5(s,o){for(var p=0;p<s.length;p++)o.writeSFixed32(s[p])}function J5(s,o){for(var p=0;p<s.length;p++)o.writeFixed64(s[p])}function Q5(s,o){for(var p=0;p<s.length;p++)o.writeSFixed64(s[p])}function Yf(s,o){return(s[o]|s[o+1]<<8|s[o+2]<<16)+s[o+3]*16777216}function Yu(s,o,p){s[p]=o,s[p+1]=o>>>8,s[p+2]=o>>>16,s[p+3]=o>>>24}function hE(s,o){return(s[o]|s[o+1]<<8|s[o+2]<<16)+(s[o+3]<<24)}function eF(s,o,p){for(var d="",f=o;f<p;){var a=s[f],T=null,M=a>239?4:a>223?3:a>191?2:1;if(f+M>p)break;var R,V,K;M===1?a<128&&(T=a):M===2?(R=s[f+1],(R&192)===128&&(T=(a&31)<<6|R&63,T<=127&&(T=null))):M===3?(R=s[f+1],V=s[f+2],(R&192)===128&&(V&192)===128&&(T=(a&15)<<12|(R&63)<<6|V&63,(T<=2047||T>=55296&&T<=57343)&&(T=null))):M===4&&(R=s[f+1],V=s[f+2],K=s[f+3],(R&192)===128&&(V&192)===128&&(K&192)===128&&(T=(a&15)<<18|(R&63)<<12|(V&63)<<6|K&63,(T<=65535||T>=1114112)&&(T=null))),T===null?(T=65533,M=1):T>65535&&(T-=65536,d+=String.fromCharCode(T>>>10&1023|55296),T=56320|T&1023),d+=String.fromCharCode(T),f+=M}return d}function tF(s,o,p){return pE.decode(s.subarray(o,p))}function iF(s,o,p){for(var d=0,f,a;d<o.length;d++){if(f=o.charCodeAt(d),f>55295&&f<57344)if(a)if(f<56320){s[p++]=239,s[p++]=191,s[p++]=189,a=f;continue}else f=a-55296<<10|f-56320|65536,a=null;else{f>56319||d+1===o.length?(s[p++]=239,s[p++]=191,s[p++]=189):a=f;continue}else a&&(s[p++]=239,s[p++]=191,s[p++]=189,a=null);f<128?s[p++]=f:(f<2048?s[p++]=f>>6|192:(f<65536?s[p++]=f>>12|224:(s[p++]=f>>18|240,s[p++]=f>>12&63|128),s[p++]=f>>6&63|128),s[p++]=f&63|128)}return p}});var vE=ze((B_,F_)=>{(function(s,o){typeof B_=="object"&&typeof F_!="undefined"?F_.exports=o():typeof define=="function"&&define.amd?define(o):(s=typeof globalThis!="undefined"?globalThis:s||self,s.maplibregl=o())})(B_,(function(){"use strict";var s={},o={};function p(f,a,T){if(o[f]=T,f==="index"){var M="var sharedModule = {}; ("+o.shared+")(sharedModule); ("+o.worker+")(sharedModule);",R={};return o.shared(R),o.index(s,R),typeof window!="undefined"&&s.setWorkerUrl(window.URL.createObjectURL(new Blob([M],{type:"text/javascript"}))),s}}p("shared",["exports"],(function(f){"use strict";function a(r,t,i,l){return new(i||(i=Promise))((function(h,g){function y(P){try{S(l.next(P))}catch(A){g(A)}}function x(P){try{S(l.throw(P))}catch(A){g(A)}}function S(P){var A;P.done?h(P.value):(A=P.value,A instanceof i?A:new i((function(D){D(A)}))).then(y,x)}S((l=l.apply(r,t||[])).next())}))}function T(r,t){this.x=r,this.y=t}function M(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var R,V;typeof SuppressedError=="function"&&SuppressedError,T.prototype={clone(){return new T(this.x,this.y)},add(r){return this.clone()._add(r)},sub(r){return this.clone()._sub(r)},multByPoint(r){return this.clone()._multByPoint(r)},divByPoint(r){return this.clone()._divByPoint(r)},mult(r){return this.clone()._mult(r)},div(r){return this.clone()._div(r)},rotate(r){return this.clone()._rotate(r)},rotateAround(r,t){return this.clone()._rotateAround(r,t)},matMult(r){return this.clone()._matMult(r)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(r){return this.x===r.x&&this.y===r.y},dist(r){return Math.sqrt(this.distSqr(r))},distSqr(r){let t=r.x-this.x,i=r.y-this.y;return t*t+i*i},angle(){return Math.atan2(this.y,this.x)},angleTo(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith(r){return this.angleWithSep(r.x,r.y)},angleWithSep(r,t){return Math.atan2(this.x*t-this.y*r,this.x*r+this.y*t)},_matMult(r){let t=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=t,this},_add(r){return this.x+=r.x,this.y+=r.y,this},_sub(r){return this.x-=r.x,this.y-=r.y,this},_mult(r){return this.x*=r,this.y*=r,this},_div(r){return this.x/=r,this.y/=r,this},_multByPoint(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint(r){return this.x/=r.x,this.y/=r.y,this},_unit(){return this._div(this.mag()),this},_perp(){let r=this.y;return this.y=this.x,this.x=-r,this},_rotate(r){let t=Math.cos(r),i=Math.sin(r),l=i*this.x+t*this.y;return this.x=t*this.x-i*this.y,this.y=l,this},_rotateAround(r,t){let i=Math.cos(r),l=Math.sin(r),h=t.y+l*(this.x-t.x)+i*(this.y-t.y);return this.x=t.x+i*(this.x-t.x)-l*(this.y-t.y),this.y=h,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:T},T.convert=function(r){if(r instanceof T)return r;if(Array.isArray(r))return new T(+r[0],+r[1]);if(r.x!==void 0&&r.y!==void 0)return new T(+r.x,+r.y);throw new Error("Expected [x, y] or {x, y} point format")};var K=(function(){if(V)return R;function r(t,i,l,h){this.cx=3*t,this.bx=3*(l-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(h-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=i,this.p2x=l,this.p2y=h}return V=1,R=r,r.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,i){if(i===void 0&&(i=1e-6),t<0)return 0;if(t>1)return 1;for(var l=t,h=0;h<8;h++){var g=this.sampleCurveX(l)-t;if(Math.abs(g)<i)return l;var y=this.sampleCurveDerivativeX(l);if(Math.abs(y)<1e-6)break;l-=g/y}var x=0,S=1;for(l=t,h=0;h<20&&(g=this.sampleCurveX(l),!(Math.abs(g-t)<i));h++)t>g?x=l:S=l,l=.5*(S-x)+x;return l},solve:function(t,i){return this.sampleCurveY(this.solveCurveX(t,i))}},R})(),ne=M(K);let G,ie;function Y(){return G==null&&(G=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),G}function Se(){if(ie==null&&(ie=!1,Y())){let t=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(t){for(let l=0;l<25;l++){let h=4*l;t.fillStyle=`rgb(${h},${h+1},${h+2})`,t.fillRect(l%5,Math.floor(l/5),1,1)}let i=t.getImageData(0,0,5,5).data;for(let l=0;l<100;l++)if(l%4!=3&&i[l]!==l){ie=!0;break}}}return ie||!1}var je=1e-6,_e=typeof Float32Array!="undefined"?Float32Array:Array;function Pe(){var r=new _e(9);return _e!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function Ye(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function st(){var r=new _e(3);return _e!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function Pt(r){var t=r[0],i=r[1],l=r[2];return Math.sqrt(t*t+i*i+l*l)}function _t(r,t,i){var l=new _e(3);return l[0]=r,l[1]=t,l[2]=i,l}function Ut(r,t,i){return r[0]=t[0]+i[0],r[1]=t[1]+i[1],r[2]=t[2]+i[2],r}function Ht(r,t,i){return r[0]=t[0]*i,r[1]=t[1]*i,r[2]=t[2]*i,r}function Tt(r,t,i){var l=t[0],h=t[1],g=t[2],y=i[0],x=i[1],S=i[2];return r[0]=h*S-g*x,r[1]=g*y-l*S,r[2]=l*x-h*y,r}var Et,oi=Pt;function ni(r,t,i){var l=t[0],h=t[1],g=t[2],y=t[3];return r[0]=i[0]*l+i[4]*h+i[8]*g+i[12]*y,r[1]=i[1]*l+i[5]*h+i[9]*g+i[13]*y,r[2]=i[2]*l+i[6]*h+i[10]*g+i[14]*y,r[3]=i[3]*l+i[7]*h+i[11]*g+i[15]*y,r}function di(){var r=new _e(4);return _e!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r[3]=1,r}function ai(r,t,i,l){var h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",g=Math.PI/360;t*=g,l*=g,i*=g;var y=Math.sin(t),x=Math.cos(t),S=Math.sin(i),P=Math.cos(i),A=Math.sin(l),D=Math.cos(l);switch(h){case"xyz":r[0]=y*P*D+x*S*A,r[1]=x*S*D-y*P*A,r[2]=x*P*A+y*S*D,r[3]=x*P*D-y*S*A;break;case"xzy":r[0]=y*P*D-x*S*A,r[1]=x*S*D-y*P*A,r[2]=x*P*A+y*S*D,r[3]=x*P*D+y*S*A;break;case"yxz":r[0]=y*P*D+x*S*A,r[1]=x*S*D-y*P*A,r[2]=x*P*A-y*S*D,r[3]=x*P*D+y*S*A;break;case"yzx":r[0]=y*P*D+x*S*A,r[1]=x*S*D+y*P*A,r[2]=x*P*A-y*S*D,r[3]=x*P*D-y*S*A;break;case"zxy":r[0]=y*P*D-x*S*A,r[1]=x*S*D+y*P*A,r[2]=x*P*A+y*S*D,r[3]=x*P*D-y*S*A;break;case"zyx":r[0]=y*P*D-x*S*A,r[1]=x*S*D+y*P*A,r[2]=x*P*A-y*S*D,r[3]=x*P*D+y*S*A;break;default:throw new Error("Unknown angle order "+h)}return r}function Ct(){var r=new _e(2);return _e!=Float32Array&&(r[0]=0,r[1]=0),r}function dt(r,t){var i=new _e(2);return i[0]=r,i[1]=t,i}st(),Et=new _e(4),_e!=Float32Array&&(Et[0]=0,Et[1]=0,Et[2]=0,Et[3]=0),st(),_t(1,0,0),_t(0,1,0),di(),di(),Pe(),Ct();let qt=8192;function bt(r,t,i){return t*(qt/(r.tileSize*Math.pow(2,i-r.tileID.overscaledZ)))}function Qt(r,t){return(r%t+t)%t}function Pi(r,t,i){return r*(1-i)+t*i}function xi(r){if(r<=0)return 0;if(r>=1)return 1;let t=r*r,i=t*r;return 4*(r<.5?i:3*(r-t)+i-.75)}function hi(r,t,i,l){let h=new ne(r,t,i,l);return g=>h.solve(g)}let Zt=hi(.25,.1,.25,1);function gt(r,t,i){return Math.min(i,Math.max(t,r))}function pr(r,t,i){let l=i-t,h=((r-t)%l+l)%l+t;return h===t?i:h}function yi(r,...t){for(let i of t)for(let l in i)r[l]=i[l];return r}let gn=1;function sn(r,t,i){let l={};for(let h in r)l[h]=t.call(this,r[h],h,r);return l}function br(r,t,i){let l={};for(let h in r)t.call(this,r[h],h,r)&&(l[h]=r[h]);return l}function cr(r){return Array.isArray(r)?r.map(cr):typeof r=="object"&&r?sn(r,cr):r}let Mn={};function fr(r){Mn[r]||(typeof console!="undefined"&&console.warn(r),Mn[r]=!0)}function xr(r,t,i){return(i.y-r.y)*(t.x-r.x)>(t.y-r.y)*(i.x-r.x)}function yn(r){return typeof WorkerGlobalScope!="undefined"&&r!==void 0&&r instanceof WorkerGlobalScope}let zi=null;function _n(r){return typeof ImageBitmap!="undefined"&&r instanceof ImageBitmap}let xs="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Ya(r,t,i,l,h){return a(this,void 0,void 0,(function*(){if(typeof VideoFrame=="undefined")throw new Error("VideoFrame not supported");let g=new VideoFrame(r,{timestamp:0});try{let y=g==null?void 0:g.format;if(!y||!y.startsWith("BGR")&&!y.startsWith("RGB"))throw new Error(`Unrecognized format ${y}`);let x=y.startsWith("BGR"),S=new Uint8ClampedArray(l*h*4);if(yield g.copyTo(S,(function(P,A,D,B,F){let W=4*Math.max(-A,0),U=(Math.max(0,D)-D)*B*4+W,H=4*B,ee=Math.max(0,A),ce=Math.max(0,D);return{rect:{x:ee,y:ce,width:Math.min(P.width,A+B)-ee,height:Math.min(P.height,D+F)-ce},layout:[{offset:U,stride:H}]}})(r,t,i,l,h)),x)for(let P=0;P<S.length;P+=4){let A=S[P];S[P]=S[P+2],S[P+2]=A}return S}finally{g.close()}}))}let vn,Vn;function Ea(r,t,i,l){return r.addEventListener(t,i,l),{unsubscribe:()=>{r.removeEventListener(t,i,l)}}}function ws(r){return r*Math.PI/180}function on(r){return r/Math.PI*180}let Wn={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},Ss={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},Xa="AbortError";class Ts extends Error{constructor(t=Xa){super(t instanceof Error?t.message:t),this.name=Xa,t instanceof Error&&t.stack&&(this.stack=t.stack)}}function ke(r){return r.name===Xa}let $={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function X(r){return $.REGISTERED_PROTOCOLS[r.substring(0,r.indexOf("://"))]}let Q="global-dispatcher";class pe extends Error{constructor(t,i,l,h){super(`AJAXError: ${i} (${t}): ${l}`),this.status=t,this.statusText=i,this.url=l,this.body=h}}let xe=()=>yn(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Me=function(r,t){if(/:\/\//.test(r.url)&&!/^https?:|^file:/.test(r.url)){let l=X(r.url);if(l)return l(r,t);if(yn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:r,targetMapId:Q},t)}if(!(/^file:/.test(i=r.url)||/^file:/.test(xe())&&!/^\w+:/.test(i))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(l,h){return a(this,void 0,void 0,(function*(){let g=new Request(l.url,{method:l.method||"GET",body:l.body,credentials:l.credentials,headers:l.headers,cache:l.cache,referrer:xe(),signal:h.signal}),y,x;l.type!=="json"||g.headers.has("Accept")||g.headers.set("Accept","application/json");try{y=yield fetch(g)}catch(P){throw ke(P)?P:new pe(0,P.message,l.url,new Blob)}if(!y.ok){let P=yield y.blob();throw new pe(y.status,y.statusText,l.url,P)}x=l.type==="arrayBuffer"||l.type==="image"?y.arrayBuffer():l.type==="json"?y.json():y.text();let S=yield x;return h.signal.throwIfAborted(),{data:S,cacheControl:y.headers.get("Cache-Control"),expires:y.headers.get("Expires")}}))})(r,t);if(yn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:r,mustQueue:!0,targetMapId:Q},t)}var i;return(function(l,h){return new Promise(((g,y)=>{var x;let S=new XMLHttpRequest;S.open(l.method||"GET",l.url,!0),l.type!=="arrayBuffer"&&l.type!=="image"||(S.responseType="arraybuffer");for(let P in l.headers)S.setRequestHeader(P,l.headers[P]);l.type==="json"&&(S.responseType="text",!((x=l.headers)===null||x===void 0)&&x.Accept||S.setRequestHeader("Accept","application/json")),S.withCredentials=l.credentials==="include",S.onerror=()=>{y(new Error(S.statusText))},S.onload=()=>{if(!h.signal.aborted)if((S.status>=200&&S.status<300||S.status===0)&&S.response!==null){let P=S.response;if(l.type==="json")try{P=JSON.parse(S.response)}catch(A){return void y(A)}g({data:P,cacheControl:S.getResponseHeader("Cache-Control"),expires:S.getResponseHeader("Expires")})}else{let P=new Blob([S.response],{type:S.getResponseHeader("Content-Type")});y(new pe(S.status,S.statusText,l.url,P))}},h.signal.addEventListener("abort",(()=>{S.abort(),y(new Ts(h.signal.reason))})),S.send(l.body)}))})(r,t)};function Le(r){if(!r||r.indexOf("://")<=0||r.indexOf("data:image/")===0||r.indexOf("blob:")===0)return!0;let t=new URL(r),i=window.location;return t.protocol===i.protocol&&t.host===i.host}function we(r,t,i){i[r]&&i[r].indexOf(t)!==-1||(i[r]=i[r]||[],i[r].push(t))}function Ee(r,t,i){if(i&&i[r]){let l=i[r].indexOf(t);l!==-1&&i[r].splice(l,1)}}class Ze{constructor(t,i={}){yi(this,i),this.type=t}}class Ne extends Ze{constructor(t,i={}){super("error",yi({error:t},i))}}class Xe{on(t,i){return this._listeners=this._listeners||{},we(t,i,this._listeners),{unsubscribe:()=>{this.off(t,i)}}}off(t,i){return Ee(t,i,this._listeners),Ee(t,i,this._oneTimeListeners),this}once(t,i){return i?(this._oneTimeListeners=this._oneTimeListeners||{},we(t,i,this._oneTimeListeners),this):new Promise((l=>this.once(t,l)))}fire(t,i){typeof t=="string"&&(t=new Ze(t,i||{}));let l=t.type;if(this.listens(l)){t.target=this;let h=this._listeners&&this._listeners[l]?this._listeners[l].slice():[];for(let x of h)x.call(this,t);let g=this._oneTimeListeners&&this._oneTimeListeners[l]?this._oneTimeListeners[l].slice():[];for(let x of g)Ee(l,x,this._oneTimeListeners),x.call(this,t);let y=this._eventedParent;y&&(yi(t,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),y.fire(t))}else t instanceof Ne&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,i){return this._eventedParent=t,this._eventedParentData=i,this}}var Ce={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number",length:2},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"filter"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},filter:{type:"boolean",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"expression_name",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}},interpolation:{type:"array",value:"interpolation_name",minimum:1},interpolation_name:{type:"enum",values:{linear:{syntax:{overloads:[{parameters:[],"output-type":"interpolation"}],parameters:[]}},exponential:{syntax:{overloads:[{parameters:["base"],"output-type":"interpolation"}],parameters:[{name:"base",type:"number literal"}]}},"cubic-bezier":{syntax:{overloads:[{parameters:["x1","y1","x2","y2"],"output-type":"interpolation"}],parameters:[{name:"x1",type:"number literal"},{name:"y1",type:"number literal"},{name:"x2",type:"number literal"},{name:"y2",type:"number literal"}]}}}}};let Mt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function wi(r,t){let i={};for(let l in r)l!=="ref"&&(i[l]=r[l]);return Mt.forEach((l=>{l in t&&(i[l]=t[l])})),i}function pt(r,t){if(Array.isArray(r)){if(!Array.isArray(t)||r.length!==t.length)return!1;for(let i=0;i<r.length;i++)if(!pt(r[i],t[i]))return!1;return!0}if(typeof r=="object"&&r!==null&&t!==null){if(typeof t!="object"||Object.keys(r).length!==Object.keys(t).length)return!1;for(let i in r)if(!pt(r[i],t[i]))return!1;return!0}return r===t}function yt(r,t){r.push(t)}function Lt(r,t,i){yt(i,{command:"addSource",args:[r,t[r]]})}function pi(r,t,i){yt(t,{command:"removeSource",args:[r]}),i[r]=!0}function Ei(r,t,i,l){pi(r,i,l),Lt(r,t,i)}function mr(r,t,i){let l;for(l in r[i])if(Object.prototype.hasOwnProperty.call(r[i],l)&&l!=="data"&&!pt(r[i][l],t[i][l]))return!1;for(l in t[i])if(Object.prototype.hasOwnProperty.call(t[i],l)&&l!=="data"&&!pt(r[i][l],t[i][l]))return!1;return!0}function gr(r,t,i,l,h,g){r=r||{},t=t||{};for(let y in r)Object.prototype.hasOwnProperty.call(r,y)&&(pt(r[y],t[y])||i.push({command:g,args:[l,y,t[y],h]}));for(let y in t)Object.prototype.hasOwnProperty.call(t,y)&&!Object.prototype.hasOwnProperty.call(r,y)&&(pt(r[y],t[y])||i.push({command:g,args:[l,y,t[y],h]}))}function Vi(r){return r.id}function Si(r,t){return r[t.id]=t,r}class Ae{constructor(t,i,l,h){this.message=(t?`${t}: `:"")+l,h&&(this.identifier=h),i!=null&&i.__line__&&(this.line=i.__line__)}}function Xi(r,...t){for(let i of t)for(let l in i)r[l]=i[l];return r}class qr extends Error{constructor(t,i){super(i),this.message=i,this.key=t}}class Aa{constructor(t,i=[]){this.parent=t,this.bindings={};for(let[l,h]of i)this.bindings[l]=h}concat(t){return new Aa(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}let Wi={kind:"null"},nt={kind:"number"},Dt={kind:"string"},Ot={kind:"boolean"},Yr={kind:"color"},Uo={kind:"projectionDefinition"},na={kind:"object"},jt={kind:"value"},oo={kind:"collator"},Cs={kind:"formatted"},Zo={kind:"padding"},aa={kind:"colorArray"},lo={kind:"numberArray"},ks={kind:"resolvedImage"},co={kind:"variableAnchorOffsetCollection"};function Vr(r,t){return{kind:"array",itemType:r,N:t}}function mi(r){if(r.kind==="array"){let t=mi(r.itemType);return typeof r.N=="number"?`array<${t}, ${r.N}>`:r.itemType.kind==="value"?"array":`array<${t}>`}return r.kind}let Ps=[Wi,nt,Dt,Ot,Yr,Uo,Cs,na,Vr(jt),Zo,lo,aa,ks,co];function Gn(r,t){if(t.kind==="error")return null;if(r.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!Gn(r.itemType,t.itemType))&&(typeof r.N!="number"||r.N===t.N))return null}else{if(r.kind===t.kind)return null;if(r.kind==="value"){for(let i of Ps)if(!Gn(i,t))return null}}return`Expected ${mi(r)} but found ${mi(t)} instead.`}function Es(r,t){return t.some((i=>i.kind===r.kind))}function Ma(r,t){return t.some((i=>i==="null"?r===null:i==="array"?Array.isArray(r):i==="object"?r&&!Array.isArray(r)&&typeof r=="object":i===typeof r))}function Wr(r,t){return r.kind==="array"&&t.kind==="array"?r.itemType.kind===t.itemType.kind&&typeof r.N=="number":r.kind===t.kind}let li=.96422,_i=.82521,Ka=4/29,Ti=6/29,Ja=3*Ti*Ti,Ho=Ti*Ti*Ti,Vt=Math.PI/180,Ki=180/Math.PI;function $o(r){return(r%=360)<0&&(r+=360),r}function uo([r,t,i,l]){let h,g,y=Ol((.2225045*(r=Gr(r))+.7168786*(t=Gr(t))+.0606169*(i=Gr(i)))/1);r===t&&t===i?h=g=y:(h=Ol((.4360747*r+.3850649*t+.1430804*i)/li),g=Ol((.0139322*r+.0971045*t+.7141733*i)/_i));let x=116*y-16;return[x<0?0:x,500*(h-y),200*(y-g),l]}function Gr(r){return r<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function Ol(r){return r>Ho?Math.pow(r,1/3):r/Ja+Ka}function As([r,t,i,l]){let h=(r+16)/116,g=isNaN(t)?h:h+t/500,y=isNaN(i)?h:h-i/200;return h=1*Ji(h),g=li*Ji(g),y=_i*Ji(y),[sa(3.1338561*g-1.6168667*h-.4906146*y),sa(-.9787684*g+1.9161415*h+.033454*y),sa(.0719453*g-.2289914*h+1.4052427*y),l]}function sa(r){return(r=r<=.00304?12.92*r:1.055*Math.pow(r,1/2.4)-.055)<0?0:r>1?1:r}function Ji(r){return r>Ti?r*r*r:Ja*(r-Ka)}let Qa=Object.hasOwn||function(r,t){return Object.prototype.hasOwnProperty.call(r,t)};function oa(r,t){return Qa(r,t)?r[t]:void 0}function za(r){return parseInt(r.padEnd(2,r),16)/255}function Yo(r,t){return Un(t?r/100:r,0,1)}function Un(r,t,i){return Math.min(Math.max(t,r),i)}function ho(r){return!r.some(Number.isNaN)}let es={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function zn(r,t,i){return r+i*(t-r)}function Ia(r,t,i){return r.map(((l,h)=>zn(l,t[h],i)))}class Nt{constructor(t,i,l,h=1,g=!0){this.r=t,this.g=i,this.b=l,this.a=h,g||(this.r*=h,this.g*=h,this.b*=h,h||this.overwriteGetter("rgb",[t,i,l,h]))}static parse(t){if(t instanceof Nt)return t;if(typeof t!="string")return;let i=(function(l){if((l=l.toLowerCase().trim())==="transparent")return[0,0,0,0];let h=oa(es,l);if(h){let[y,x,S]=h;return[y/255,x/255,S/255,1]}if(l.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(l)){let y=l.length<6?1:2,x=1;return[za(l.slice(x,x+=y)),za(l.slice(x,x+=y)),za(l.slice(x,x+=y)),za(l.slice(x,x+y)||"ff")]}if(l.startsWith("rgb")){let y=l.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(y){let[x,S,P,A,D,B,F,W,U,H,ee,ce]=y,te=[A||" ",F||" ",H].join("");if(te==="  "||te==="  /"||te===",,"||te===",,,"){let ae=[P,B,U].join(""),he=ae==="%%%"?100:ae===""?255:0;if(he){let ge=[Un(+S/he,0,1),Un(+D/he,0,1),Un(+W/he,0,1),ee?Yo(+ee,ce):1];if(ho(ge))return ge}}return}}let g=l.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(g){let[y,x,S,P,A,D,B,F,W]=g,U=[S||" ",A||" ",B].join("");if(U==="  "||U==="  /"||U===",,"||U===",,,"){let H=[+x,Un(+P,0,100),Un(+D,0,100),F?Yo(+F,W):1];if(ho(H))return(function([ee,ce,te,ae]){function he(ge){let Ie=(ge+ee/30)%12,Ge=ce*Math.min(te,1-te);return te-Ge*Math.max(-1,Math.min(Ie-3,9-Ie,1))}return ee=$o(ee),ce/=100,te/=100,[he(0),he(8),he(4),ae]})(H)}}})(t);return i?new Nt(...i,!1):void 0}get rgb(){let{r:t,g:i,b:l,a:h}=this,g=h||1/0;return this.overwriteGetter("rgb",[t/g,i/g,l/g,h])}get hcl(){return this.overwriteGetter("hcl",(function(t){let[i,l,h,g]=uo(t),y=Math.sqrt(l*l+h*h);return[Math.round(1e4*y)?$o(Math.atan2(h,l)*Ki):NaN,y,i,g]})(this.rgb))}get lab(){return this.overwriteGetter("lab",uo(this.rgb))}overwriteGetter(t,i){return Object.defineProperty(this,t,{value:i}),i}toString(){let[t,i,l,h]=this.rgb;return`rgba(${[t,i,l].map((g=>Math.round(255*g))).join(",")},${h})`}static interpolate(t,i,l,h="rgb"){switch(h){case"rgb":{let[g,y,x,S]=Ia(t.rgb,i.rgb,l);return new Nt(g,y,x,S,!1)}case"hcl":{let[g,y,x,S]=t.hcl,[P,A,D,B]=i.hcl,F,W;if(isNaN(g)||isNaN(P))isNaN(g)?isNaN(P)?F=NaN:(F=P,x!==1&&x!==0||(W=A)):(F=g,D!==1&&D!==0||(W=y));else{let te=P-g;P>g&&te>180?te-=360:P<g&&g-P>180&&(te+=360),F=g+l*te}let[U,H,ee,ce]=(function([te,ae,he,ge]){return te=isNaN(te)?0:te*Vt,As([he,Math.cos(te)*ae,Math.sin(te)*ae,ge])})([F,W!=null?W:zn(y,A,l),zn(x,D,l),zn(S,B,l)]);return new Nt(U,H,ee,ce,!1)}case"lab":{let[g,y,x,S]=As(Ia(t.lab,i.lab,l));return new Nt(g,y,x,S,!1)}}}}Nt.black=new Nt(0,0,0,1),Nt.white=new Nt(1,1,1,1),Nt.transparent=new Nt(0,0,0,0),Nt.red=new Nt(1,0,0,1);class Ms{constructor(t,i,l){this.sensitivity=t?i?"variant":"case":i?"accent":"base",this.locale=l,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,i){return this.collator.compare(t,i)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}let wc=["bottom","center","top"];class po{constructor(t,i,l,h,g,y){this.text=t,this.image=i,this.scale=l,this.fontStack=h,this.textColor=g,this.verticalAlign=y}}class Xr{constructor(t){this.sections=t}static fromString(t){return new Xr([new po(t,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((t=>t.text.length!==0||t.image&&t.image.name.length!==0))}static factory(t){return t instanceof Xr?t:Xr.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map((t=>t.text)).join("")}}class wt{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof wt)return t;if(typeof t=="number")return new wt([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(let i of t)if(typeof i!="number")return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]]}return new wt(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,i,l){return new wt(Ia(t.values,i.values,l))}}class ci{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof ci)return t;if(typeof t=="number")return new ci([t]);if(Array.isArray(t)){for(let i of t)if(typeof i!="number")return;return new ci(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,i,l){return new ci(Ia(t.values,i.values,l))}}class ct{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof ct)return t;if(typeof t=="string"){let l=Nt.parse(t);return l?new ct([l]):void 0}if(!Array.isArray(t))return;let i=[];for(let l of t){if(typeof l!="string")return;let h=Nt.parse(l);if(!h)return;i.push(h)}return new ct(i)}toString(){return JSON.stringify(this.values)}static interpolate(t,i,l,h="rgb"){let g=[];if(t.values.length!=i.values.length)throw new Error(`colorArray: Arrays have mismatched length (${t.values.length} vs. ${i.values.length}), cannot interpolate.`);for(let y=0;y<t.values.length;y++)g.push(Nt.interpolate(t.values[y],i.values[y],l,h));return new ct(g)}}class vi extends Error{constructor(t){super(t),this.name="RuntimeError"}toJSON(){return this.message}}let Zn=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Cr{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Cr)return t;if(Array.isArray(t)&&!(t.length<1)&&t.length%2==0){for(let i=0;i<t.length;i+=2){let l=t[i],h=t[i+1];if(typeof l!="string"||!Zn.has(l)||!Array.isArray(h)||h.length!==2||typeof h[0]!="number"||typeof h[1]!="number")return}return new Cr(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,i,l){let h=t.values,g=i.values;if(h.length!==g.length)throw new vi(`Cannot interpolate values of different length. from: ${t.toString()}, to: ${i.toString()}`);let y=[];for(let x=0;x<h.length;x+=2){if(h[x]!==g[x])throw new vi(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${h[x]}, to[${x}]: ${g[x]}`);y.push(h[x]);let[S,P]=h[x+1],[A,D]=g[x+1];y.push([zn(S,A,l),zn(P,D,l)])}return new Cr(y)}}class Ur{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new Ur({name:t,available:!1}):null}}class rr{constructor(t,i,l){this.from=t,this.to=i,this.transition=l}static interpolate(t,i,l){return new rr(t,i,l)}static parse(t){return t instanceof rr?t:Array.isArray(t)&&t.length===3&&typeof t[0]=="string"&&typeof t[1]=="string"&&typeof t[2]=="number"?new rr(t[0],t[1],t[2]):typeof t=="object"&&typeof t.from=="string"&&typeof t.to=="string"&&typeof t.transition=="number"?new rr(t.from,t.to,t.transition):typeof t=="string"?new rr(t,t,1):void 0}}function La(r,t,i,l){return typeof r=="number"&&r>=0&&r<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof i=="number"&&i>=0&&i<=255?l===void 0||typeof l=="number"&&l>=0&&l<=1?null:`Invalid rgba value [${[r,t,i,l].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof l=="number"?[r,t,i,l]:[r,t,i]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function bn(r){if(r===null||typeof r=="string"||typeof r=="boolean"||typeof r=="number"||r instanceof rr||r instanceof Nt||r instanceof Ms||r instanceof Xr||r instanceof wt||r instanceof ci||r instanceof ct||r instanceof Cr||r instanceof Ur)return!0;if(Array.isArray(r)){for(let t of r)if(!bn(t))return!1;return!0}if(typeof r=="object"){for(let t in r)if(!bn(r[t]))return!1;return!0}return!1}function ei(r){if(r===null)return Wi;if(typeof r=="string")return Dt;if(typeof r=="boolean")return Ot;if(typeof r=="number")return nt;if(r instanceof Nt)return Yr;if(r instanceof rr)return Uo;if(r instanceof Ms)return oo;if(r instanceof Xr)return Cs;if(r instanceof wt)return Zo;if(r instanceof ci)return lo;if(r instanceof ct)return aa;if(r instanceof Cr)return co;if(r instanceof Ur)return ks;if(Array.isArray(r)){let t=r.length,i;for(let l of r){let h=ei(l);if(i){if(i===h)continue;i=jt;break}i=h}return Vr(i||jt,t)}return na}function ln(r){let t=typeof r;return r===null?"":t==="string"||t==="number"||t==="boolean"?String(r):r instanceof Nt||r instanceof rr||r instanceof Xr||r instanceof wt||r instanceof ci||r instanceof ct||r instanceof Cr||r instanceof Ur?r.toString():JSON.stringify(r)}class In{constructor(t,i){this.type=t,this.value=i}static parse(t,i){if(t.length!==2)return i.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!bn(t[1]))return i.error("invalid value");let l=t[1],h=ei(l),g=i.expectedType;return h.kind!=="array"||h.N!==0||!g||g.kind!=="array"||typeof g.N=="number"&&g.N!==0||(h=g),new In(h,l)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}let fo={string:Dt,number:nt,boolean:Ot,object:na};class Kr{constructor(t,i){this.type=t,this.args=i}static parse(t,i){if(t.length<2)return i.error("Expected at least one argument.");let l,h=1,g=t[0];if(g==="array"){let x,S;if(t.length>2){let P=t[1];if(typeof P!="string"||!(P in fo)||P==="object")return i.error('The item type argument of "array" must be one of string, number, boolean',1);x=fo[P],h++}else x=jt;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return i.error('The length argument to "array" must be a positive integer literal',2);S=t[2],h++}l=Vr(x,S)}else{if(!fo[g])throw new Error(`Types doesn't contain name = ${g}`);l=fo[g]}let y=[];for(;h<t.length;h++){let x=i.parse(t[h],h,jt);if(!x)return null;y.push(x)}return new Kr(l,y)}evaluate(t){for(let i=0;i<this.args.length;i++){let l=this.args[i].evaluate(t);if(!Gn(this.type,ei(l)))return l;if(i===this.args.length-1)throw new vi(`Expected value to be of type ${mi(this.type)}, but found ${mi(ei(l))} instead.`)}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}let Da={"to-boolean":Ot,"to-color":Yr,"to-number":nt,"to-string":Dt};class Ln{constructor(t,i){this.type=t,this.args=i}static parse(t,i){if(t.length<2)return i.error("Expected at least one argument.");let l=t[0];if(!Da[l])throw new Error(`Can't parse ${l} as it is not part of the known types`);if((l==="to-boolean"||l==="to-string")&&t.length!==2)return i.error("Expected one argument.");let h=Da[l],g=[];for(let y=1;y<t.length;y++){let x=i.parse(t[y],y,jt);if(!x)return null;g.push(x)}return new Ln(h,g)}evaluate(t){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(t);case"color":{let i,l;for(let h of this.args){if(i=h.evaluate(t),l=null,i instanceof Nt)return i;if(typeof i=="string"){let g=t.parseColor(i);if(g)return g}else if(Array.isArray(i)&&(l=i.length<3||i.length>4?`Invalid rgba value ${JSON.stringify(i)}: expected an array containing either three or four numeric values.`:La(i[0],i[1],i[2],i[3]),!l))return new Nt(i[0]/255,i[1]/255,i[2]/255,i[3])}throw new vi(l||`Could not parse color from value '${typeof i=="string"?i:JSON.stringify(i)}'`)}case"padding":{let i;for(let l of this.args){i=l.evaluate(t);let h=wt.parse(i);if(h)return h}throw new vi(`Could not parse padding from value '${typeof i=="string"?i:JSON.stringify(i)}'`)}case"numberArray":{let i;for(let l of this.args){i=l.evaluate(t);let h=ci.parse(i);if(h)return h}throw new vi(`Could not parse numberArray from value '${typeof i=="string"?i:JSON.stringify(i)}'`)}case"colorArray":{let i;for(let l of this.args){i=l.evaluate(t);let h=ct.parse(i);if(h)return h}throw new vi(`Could not parse colorArray from value '${typeof i=="string"?i:JSON.stringify(i)}'`)}case"variableAnchorOffsetCollection":{let i;for(let l of this.args){i=l.evaluate(t);let h=Cr.parse(i);if(h)return h}throw new vi(`Could not parse variableAnchorOffsetCollection from value '${typeof i=="string"?i:JSON.stringify(i)}'`)}case"number":{let i=null;for(let l of this.args){if(i=l.evaluate(t),i===null)return 0;let h=Number(i);if(!isNaN(h))return h}throw new vi(`Could not convert ${JSON.stringify(i)} to number.`)}case"formatted":return Xr.fromString(ln(this.args[0].evaluate(t)));case"resolvedImage":return Ur.fromString(ln(this.args[0].evaluate(t)));case"projectionDefinition":return this.args[0].evaluate(t);default:return ln(this.args[0].evaluate(t))}}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}let Sc=["Unknown","Point","LineString","Polygon"];class Xo{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Sc[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let i=this._parseColorCache.get(t);return i||(i=Nt.parse(t),this._parseColorCache.set(t,i)),i}}class Xt{constructor(t,i,l=[],h,g=new Aa,y=[]){this.registry=t,this.path=l,this.key=l.map((x=>`[${x}]`)).join(""),this.scope=g,this.errors=y,this.expectedType=h,this._isConstant=i}parse(t,i,l,h,g={}){return i?this.concat(i,l,h)._parse(t,g):this._parse(t,g)}_parse(t,i){function l(h,g,y){return y==="assert"?new Kr(g,[h]):y==="coerce"?new Ln(g,[h]):h}if(t!==null&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"||(t=["literal",t]),Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');let h=t[0];if(typeof h!="string")return this.error(`Expression name must be a string, but found ${typeof h} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;let g=this.registry[h];if(g){let y=g.parse(t,this);if(!y)return null;if(this.expectedType){let x=this.expectedType,S=y.type;if(x.kind!=="string"&&x.kind!=="number"&&x.kind!=="boolean"&&x.kind!=="object"&&x.kind!=="array"||S.kind!=="value"){if(x.kind==="projectionDefinition"&&["string","array"].includes(S.kind)||["color","formatted","resolvedImage"].includes(x.kind)&&["value","string"].includes(S.kind)||["padding","numberArray"].includes(x.kind)&&["value","number","array"].includes(S.kind)||x.kind==="colorArray"&&["value","string","array"].includes(S.kind)||x.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(S.kind))y=l(y,x,i.typeAnnotation||"coerce");else if(this.checkSubtype(x,S))return null}else y=l(y,x,i.typeAnnotation||"assert")}if(!(y instanceof In)&&y.type.kind!=="resolvedImage"&&this._isConstant(y)){let x=new Xo;try{y=new In(y.type,y.evaluate(x))}catch(S){return this.error(S.message),null}}return y}return this.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(t===void 0?"'undefined' value invalid. Use null instead.":typeof t=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,i,l){let h=typeof t=="number"?this.path.concat(t):this.path,g=l?this.scope.concat(l):this.scope;return new Xt(this.registry,this._isConstant,h,i||null,g,this.errors)}error(t,...i){let l=`${this.key}${i.map((h=>`[${h}]`)).join("")}`;this.errors.push(new qr(l,t))}checkSubtype(t,i){let l=Gn(t,i);return l&&this.error(l),l}}class Ci{constructor(t,i){this.type=i.type,this.bindings=[].concat(t),this.result=i}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(let i of this.bindings)t(i[1]);t(this.result)}static parse(t,i){if(t.length<4)return i.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);let l=[];for(let g=1;g<t.length-1;g+=2){let y=t[g];if(typeof y!="string")return i.error(`Expected string, but found ${typeof y} instead.`,g);if(/[^a-zA-Z0-9_]/.test(y))return i.error("Variable names must contain only alphanumeric characters or '_'.",g);let x=i.parse(t[g+1],g+1);if(!x)return null;l.push([y,x])}let h=i.parse(t[t.length-1],t.length-1,i.expectedType,l);return h?new Ci(l,h):null}outputDefined(){return this.result.outputDefined()}}class zr{constructor(t,i){this.type=i.type,this.name=t,this.boundExpression=i}static parse(t,i){if(t.length!==2||typeof t[1]!="string")return i.error("'var' expression requires exactly one string literal argument.");let l=t[1];return i.scope.has(l)?new zr(l,i.scope.get(l)):i.error(`Unknown variable "${l}". Make sure "${l}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class $t{constructor(t,i,l){this.type=t,this.index=i,this.input=l}static parse(t,i){if(t.length!==3)return i.error(`Expected 2 arguments, but found ${t.length-1} instead.`);let l=i.parse(t[1],1,nt),h=i.parse(t[2],2,Vr(i.expectedType||jt));return l&&h?new $t(h.type.itemType,l,h):null}evaluate(t){let i=this.index.evaluate(t),l=this.input.evaluate(t);if(i<0)throw new vi(`Array index out of bounds: ${i} < 0.`);if(i>=l.length)throw new vi(`Array index out of bounds: ${i} > ${l.length-1}.`);if(i!==Math.floor(i))throw new vi(`Array index must be an integer, but found ${i} instead.`);return l[i]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class Ft{constructor(t,i){this.type=Ot,this.needle=t,this.haystack=i}static parse(t,i){if(t.length!==3)return i.error(`Expected 2 arguments, but found ${t.length-1} instead.`);let l=i.parse(t[1],1,jt),h=i.parse(t[2],2,jt);return l&&h?Es(l.type,[Ot,Dt,nt,Wi,jt])?new Ft(l,h):i.error(`Expected first argument to be of type boolean, string, number or null, but found ${mi(l.type)} instead`):null}evaluate(t){let i=this.needle.evaluate(t),l=this.haystack.evaluate(t);if(!l)return!1;if(!Ma(i,["boolean","string","number","null"]))throw new vi(`Expected first argument to be of type boolean, string, number or null, but found ${mi(ei(i))} instead.`);if(!Ma(l,["string","array"]))throw new vi(`Expected second argument to be of type array or string, but found ${mi(ei(l))} instead.`);return l.indexOf(i)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class zs{constructor(t,i,l){this.type=nt,this.needle=t,this.haystack=i,this.fromIndex=l}static parse(t,i){if(t.length<=2||t.length>=5)return i.error(`Expected 2 or 3 arguments, but found ${t.length-1} instead.`);let l=i.parse(t[1],1,jt),h=i.parse(t[2],2,jt);if(!l||!h)return null;if(!Es(l.type,[Ot,Dt,nt,Wi,jt]))return i.error(`Expected first argument to be of type boolean, string, number or null, but found ${mi(l.type)} instead`);if(t.length===4){let g=i.parse(t[3],3,nt);return g?new zs(l,h,g):null}return new zs(l,h)}evaluate(t){let i=this.needle.evaluate(t),l=this.haystack.evaluate(t);if(!Ma(i,["boolean","string","number","null"]))throw new vi(`Expected first argument to be of type boolean, string, number or null, but found ${mi(ei(i))} instead.`);let h;if(this.fromIndex&&(h=this.fromIndex.evaluate(t)),Ma(l,["string"])){let g=l.indexOf(i,h);return g===-1?-1:[...l.slice(0,g)].length}if(Ma(l,["array"]))return l.indexOf(i,h);throw new vi(`Expected second argument to be of type array or string, but found ${mi(ei(l))} instead.`)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class ti{constructor(t,i,l,h,g,y){this.inputType=t,this.type=i,this.input=l,this.cases=h,this.outputs=g,this.otherwise=y}static parse(t,i){if(t.length<5)return i.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return i.error("Expected an even number of arguments.");let l,h;i.expectedType&&i.expectedType.kind!=="value"&&(h=i.expectedType);let g={},y=[];for(let P=2;P<t.length-1;P+=2){let A=t[P],D=t[P+1];Array.isArray(A)||(A=[A]);let B=i.concat(P);if(A.length===0)return B.error("Expected at least one branch label.");for(let W of A){if(typeof W!="number"&&typeof W!="string")return B.error("Branch labels must be numbers or strings.");if(typeof W=="number"&&Math.abs(W)>Number.MAX_SAFE_INTEGER)return B.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof W=="number"&&Math.floor(W)!==W)return B.error("Numeric branch labels must be integer values.");if(l){if(B.checkSubtype(l,ei(W)))return null}else l=ei(W);if(g[String(W)]!==void 0)return B.error("Branch labels must be unique.");g[String(W)]=y.length}let F=i.parse(D,P,h);if(!F)return null;h=h||F.type,y.push(F)}let x=i.parse(t[1],1,jt);if(!x)return null;let S=i.parse(t[t.length-1],t.length-1,h);return S?x.type.kind!=="value"&&i.concat(1).checkSubtype(l,x.type)?null:new ti(l,h,x,g,y,S):null}evaluate(t){let i=this.input.evaluate(t);return(ei(i)===this.inputType&&this.outputs[this.cases[i]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))&&this.otherwise.outputDefined()}}class mo{constructor(t,i,l){this.type=t,this.branches=i,this.otherwise=l}static parse(t,i){if(t.length<4)return i.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return i.error("Expected an odd number of arguments.");let l;i.expectedType&&i.expectedType.kind!=="value"&&(l=i.expectedType);let h=[];for(let y=1;y<t.length-1;y+=2){let x=i.parse(t[y],y,Ot);if(!x)return null;let S=i.parse(t[y+1],y+1,l);if(!S)return null;h.push([x,S]),l=l||S.type}let g=i.parse(t[t.length-1],t.length-1,l);if(!g)return null;if(!l)throw new Error("Can't infer output type");return new mo(l,h,g)}evaluate(t){for(let[i,l]of this.branches)if(i.evaluate(t))return l.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(let[i,l]of this.branches)t(i),t(l);t(this.otherwise)}outputDefined(){return this.branches.every((([t,i])=>i.outputDefined()))&&this.otherwise.outputDefined()}}class cn{constructor(t,i,l,h){this.type=t,this.input=i,this.beginIndex=l,this.endIndex=h}static parse(t,i){if(t.length<=2||t.length>=5)return i.error(`Expected 2 or 3 arguments, but found ${t.length-1} instead.`);let l=i.parse(t[1],1,jt),h=i.parse(t[2],2,nt);if(!l||!h)return null;if(!Es(l.type,[Vr(jt),Dt,jt]))return i.error(`Expected first argument to be of type array or string, but found ${mi(l.type)} instead`);if(t.length===4){let g=i.parse(t[3],3,nt);return g?new cn(l.type,l,h,g):null}return new cn(l.type,l,h)}evaluate(t){let i=this.input.evaluate(t),l=this.beginIndex.evaluate(t),h;if(this.endIndex&&(h=this.endIndex.evaluate(t)),Ma(i,["string"]))return[...i].slice(l,h).join("");if(Ma(i,["array"]))return i.slice(l,h);throw new vi(`Expected first argument to be of type array or string, but found ${mi(ei(i))} instead.`)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function Is(r,t){let i=r.length-1,l,h,g=0,y=i,x=0;for(;g<=y;)if(x=Math.floor((g+y)/2),l=r[x],h=r[x+1],l<=t){if(x===i||t<h)return x;g=x+1}else{if(!(l>t))throw new vi("Input is not a number.");y=x-1}return 0}class Oa{constructor(t,i,l){this.type=t,this.input=i,this.labels=[],this.outputs=[];for(let[h,g]of l)this.labels.push(h),this.outputs.push(g)}static parse(t,i){if(t.length-1<4)return i.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return i.error("Expected an even number of arguments.");let l=i.parse(t[1],1,nt);if(!l)return null;let h=[],g=null;i.expectedType&&i.expectedType.kind!=="value"&&(g=i.expectedType);for(let y=1;y<t.length;y+=2){let x=y===1?-1/0:t[y],S=t[y+1],P=y,A=y+1;if(typeof x!="number")return i.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',P);if(h.length&&h[h.length-1][0]>=x)return i.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',P);let D=i.parse(S,A,g);if(!D)return null;g=g||D.type,h.push([x,D])}return new Oa(g,l,h)}evaluate(t){let i=this.labels,l=this.outputs;if(i.length===1)return l[0].evaluate(t);let h=this.input.evaluate(t);if(h<=i[0])return l[0].evaluate(t);let g=i.length;return h>=i[g-1]?l[g-1].evaluate(t):l[Is(i,h)].evaluate(t)}eachChild(t){t(this.input);for(let i of this.outputs)t(i)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}}function Ko(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var go,xn,Qu=(function(){if(xn)return go;function r(t,i,l,h){this.cx=3*t,this.bx=3*(l-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(h-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=i,this.p2x=l,this.p2y=h}return xn=1,go=r,r.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,i){if(i===void 0&&(i=1e-6),t<0)return 0;if(t>1)return 1;for(var l=t,h=0;h<8;h++){var g=this.sampleCurveX(l)-t;if(Math.abs(g)<i)return l;var y=this.sampleCurveDerivativeX(l);if(Math.abs(y)<1e-6)break;l-=g/y}var x=0,S=1;for(l=t,h=0;h<20&&(g=this.sampleCurveX(l),!(Math.abs(g-t)<i));h++)t>g?x=l:S=l,l=.5*(S-x)+x;return l},solve:function(t,i){return this.sampleCurveY(this.solveCurveX(t,i))}},go})(),Rl=Ko(Qu);class Qi{constructor(t,i,l,h,g){this.type=t,this.operator=i,this.interpolation=l,this.input=h,this.labels=[],this.outputs=[];for(let[y,x]of g)this.labels.push(y),this.outputs.push(x)}static interpolationFactor(t,i,l,h){let g=0;if(t.name==="exponential")g=Dn(i,t.base,l,h);else if(t.name==="linear")g=Dn(i,1,l,h);else if(t.name==="cubic-bezier"){let y=t.controlPoints;g=new Rl(y[0],y[1],y[2],y[3]).solve(Dn(i,1,l,h))}return g}static parse(t,i){let[l,h,g,...y]=t;if(!Array.isArray(h)||h.length===0)return i.error("Expected an interpolation type expression.",1);if(h[0]==="linear")h={name:"linear"};else if(h[0]==="exponential"){let P=h[1];if(typeof P!="number")return i.error("Exponential interpolation requires a numeric base.",1,1);h={name:"exponential",base:P}}else{if(h[0]!=="cubic-bezier")return i.error(`Unknown interpolation type ${String(h[0])}`,1,0);{let P=h.slice(1);if(P.length!==4||P.some((A=>typeof A!="number"||A<0||A>1)))return i.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);h={name:"cubic-bezier",controlPoints:P}}}if(t.length-1<4)return i.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return i.error("Expected an even number of arguments.");if(g=i.parse(g,2,nt),!g)return null;let x=[],S=null;l!=="interpolate-hcl"&&l!=="interpolate-lab"||i.expectedType==aa?i.expectedType&&i.expectedType.kind!=="value"&&(S=i.expectedType):S=Yr;for(let P=0;P<y.length;P+=2){let A=y[P],D=y[P+1],B=P+3,F=P+4;if(typeof A!="number")return i.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',B);if(x.length&&x[x.length-1][0]>=A)return i.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',B);let W=i.parse(D,F,S);if(!W)return null;S=S||W.type,x.push([A,W])}return Wr(S,nt)||Wr(S,Uo)||Wr(S,Yr)||Wr(S,Zo)||Wr(S,lo)||Wr(S,aa)||Wr(S,co)||Wr(S,Vr(nt))?new Qi(S,l,h,g,x):i.error(`Type ${mi(S)} is not interpolatable.`)}evaluate(t){let i=this.labels,l=this.outputs;if(i.length===1)return l[0].evaluate(t);let h=this.input.evaluate(t);if(h<=i[0])return l[0].evaluate(t);let g=i.length;if(h>=i[g-1])return l[g-1].evaluate(t);let y=Is(i,h),x=Qi.interpolationFactor(this.interpolation,h,i[y],i[y+1]),S=l[y].evaluate(t),P=l[y+1].evaluate(t);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return zn(S,P,x);case"color":return Nt.interpolate(S,P,x);case"padding":return wt.interpolate(S,P,x);case"colorArray":return ct.interpolate(S,P,x);case"numberArray":return ci.interpolate(S,P,x);case"variableAnchorOffsetCollection":return Cr.interpolate(S,P,x);case"array":return Ia(S,P,x);case"projectionDefinition":return rr.interpolate(S,P,x)}case"interpolate-hcl":switch(this.type.kind){case"color":return Nt.interpolate(S,P,x,"hcl");case"colorArray":return ct.interpolate(S,P,x,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Nt.interpolate(S,P,x,"lab");case"colorArray":return ct.interpolate(S,P,x,"lab")}}}eachChild(t){t(this.input);for(let i of this.outputs)t(i)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}}function Dn(r,t,i,l){let h=l-i,g=r-i;return h===0?0:t===1?g/h:(Math.pow(t,g)-1)/(Math.pow(t,h)-1)}let Ii={color:Nt.interpolate,number:zn,padding:wt.interpolate,numberArray:ci.interpolate,colorArray:ct.interpolate,variableAnchorOffsetCollection:Cr.interpolate,array:Ia};class la{constructor(t,i){this.type=t,this.args=i}static parse(t,i){if(t.length<2)return i.error("Expected at least one argument.");let l=null,h=i.expectedType;h&&h.kind!=="value"&&(l=h);let g=[];for(let x of t.slice(1)){let S=i.parse(x,1+g.length,l,void 0,{typeAnnotation:"omit"});if(!S)return null;l=l||S.type,g.push(S)}if(!l)throw new Error("No output type");let y=h&&g.some((x=>Gn(h,x.type)));return new la(y?jt:l,g)}evaluate(t){let i,l=null,h=0;for(let g of this.args)if(h++,l=g.evaluate(t),l&&l instanceof Ur&&!l.available&&(i||(i=l.name),l=null,h===this.args.length&&(l=i)),l!==null)break;return l}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}function Bl(r,t){return r==="=="||r==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function Ls(r,t,i,l){return l.compare(t,i)===0}function Fi(r,t,i){let l=r!=="=="&&r!=="!=";return class _E{constructor(g,y,x){this.type=Ot,this.lhs=g,this.rhs=y,this.collator=x,this.hasUntypedArgument=g.type.kind==="value"||y.type.kind==="value"}static parse(g,y){if(g.length!==3&&g.length!==4)return y.error("Expected two or three arguments.");let x=g[0],S=y.parse(g[1],1,jt);if(!S)return null;if(!Bl(x,S.type))return y.concat(1).error(`"${x}" comparisons are not supported for type '${mi(S.type)}'.`);let P=y.parse(g[2],2,jt);if(!P)return null;if(!Bl(x,P.type))return y.concat(2).error(`"${x}" comparisons are not supported for type '${mi(P.type)}'.`);if(S.type.kind!==P.type.kind&&S.type.kind!=="value"&&P.type.kind!=="value")return y.error(`Cannot compare types '${mi(S.type)}' and '${mi(P.type)}'.`);l&&(S.type.kind==="value"&&P.type.kind!=="value"?S=new Kr(P.type,[S]):S.type.kind!=="value"&&P.type.kind==="value"&&(P=new Kr(S.type,[P])));let A=null;if(g.length===4){if(S.type.kind!=="string"&&P.type.kind!=="string"&&S.type.kind!=="value"&&P.type.kind!=="value")return y.error("Cannot use collator to compare non-string types.");if(A=y.parse(g[3],3,oo),!A)return null}return new _E(S,P,A)}evaluate(g){let y=this.lhs.evaluate(g),x=this.rhs.evaluate(g);if(l&&this.hasUntypedArgument){let S=ei(y),P=ei(x);if(S.kind!==P.kind||S.kind!=="string"&&S.kind!=="number")throw new vi(`Expected arguments for "${r}" to be (string, string) or (number, number), but found (${S.kind}, ${P.kind}) instead.`)}if(this.collator&&!l&&this.hasUntypedArgument){let S=ei(y),P=ei(x);if(S.kind!=="string"||P.kind!=="string")return t(g,y,x)}return this.collator?i(g,y,x,this.collator.evaluate(g)):t(g,y,x)}eachChild(g){g(this.lhs),g(this.rhs),this.collator&&g(this.collator)}outputDefined(){return!0}}}let Tc=Fi("==",(function(r,t,i){return t===i}),Ls),Fl=Fi("!=",(function(r,t,i){return t!==i}),(function(r,t,i,l){return!Ls(0,t,i,l)})),Jo=Fi("<",(function(r,t,i){return t<i}),(function(r,t,i,l){return l.compare(t,i)<0})),ed=Fi(">",(function(r,t,i){return t>i}),(function(r,t,i,l){return l.compare(t,i)>0})),ts=Fi("<=",(function(r,t,i){return t<=i}),(function(r,t,i,l){return l.compare(t,i)<=0})),yo=Fi(">=",(function(r,t,i){return t>=i}),(function(r,t,i,l){return l.compare(t,i)>=0}));class ca{constructor(t,i,l){this.type=oo,this.locale=l,this.caseSensitive=t,this.diacriticSensitive=i}static parse(t,i){if(t.length!==2)return i.error("Expected one argument.");let l=t[1];if(typeof l!="object"||Array.isArray(l))return i.error("Collator options argument must be an object.");let h=i.parse(l["case-sensitive"]!==void 0&&l["case-sensitive"],1,Ot);if(!h)return null;let g=i.parse(l["diacritic-sensitive"]!==void 0&&l["diacritic-sensitive"],1,Ot);if(!g)return null;let y=null;return l.locale&&(y=i.parse(l.locale,1,Dt),!y)?null:new ca(h,g,y)}evaluate(t){return new Ms(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}class ua{constructor(t,i,l,h,g){this.type=Dt,this.number=t,this.locale=i,this.currency=l,this.minFractionDigits=h,this.maxFractionDigits=g}static parse(t,i){if(t.length!==3)return i.error("Expected two arguments.");let l=i.parse(t[1],1,nt);if(!l)return null;let h=t[2];if(typeof h!="object"||Array.isArray(h))return i.error("NumberFormat options argument must be an object.");let g=null;if(h.locale&&(g=i.parse(h.locale,1,Dt),!g))return null;let y=null;if(h.currency&&(y=i.parse(h.currency,1,Dt),!y))return null;let x=null;if(h["min-fraction-digits"]&&(x=i.parse(h["min-fraction-digits"],1,nt),!x))return null;let S=null;return h["max-fraction-digits"]&&(S=i.parse(h["max-fraction-digits"],1,nt),!S)?null:new ua(l,g,y,x,S)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class _o{constructor(t){this.type=Cs,this.sections=t}static parse(t,i){if(t.length<2)return i.error("Expected at least one argument.");let l=t[1];if(!Array.isArray(l)&&typeof l=="object")return i.error("First argument must be an image or text section.");let h=[],g=!1;for(let y=1;y<=t.length-1;++y){let x=t[y];if(g&&typeof x=="object"&&!Array.isArray(x)){g=!1;let S=null;if(x["font-scale"]&&(S=i.parse(x["font-scale"],1,nt),!S))return null;let P=null;if(x["text-font"]&&(P=i.parse(x["text-font"],1,Vr(Dt)),!P))return null;let A=null;if(x["text-color"]&&(A=i.parse(x["text-color"],1,Yr),!A))return null;let D=null;if(x["vertical-align"]){if(typeof x["vertical-align"]=="string"&&!wc.includes(x["vertical-align"]))return i.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${x["vertical-align"]}' instead.`);if(D=i.parse(x["vertical-align"],1,Dt),!D)return null}let B=h[h.length-1];B.scale=S,B.font=P,B.textColor=A,B.verticalAlign=D}else{let S=i.parse(t[y],1,jt);if(!S)return null;let P=S.type.kind;if(P!=="string"&&P!=="value"&&P!=="null"&&P!=="resolvedImage")return i.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");g=!0,h.push({content:S,scale:null,font:null,textColor:null,verticalAlign:null})}}return new _o(h)}evaluate(t){return new Xr(this.sections.map((i=>{let l=i.content.evaluate(t);return ei(l)===ks?new po("",l,null,null,null,i.verticalAlign?i.verticalAlign.evaluate(t):null):new po(ln(l),null,i.scale?i.scale.evaluate(t):null,i.font?i.font.evaluate(t).join(","):null,i.textColor?i.textColor.evaluate(t):null,i.verticalAlign?i.verticalAlign.evaluate(t):null)})))}eachChild(t){for(let i of this.sections)t(i.content),i.scale&&t(i.scale),i.font&&t(i.font),i.textColor&&t(i.textColor),i.verticalAlign&&t(i.verticalAlign)}outputDefined(){return!1}}class Hn{constructor(t){this.type=ks,this.input=t}static parse(t,i){if(t.length!==2)return i.error("Expected two arguments.");let l=i.parse(t[1],1,Dt);return l?new Hn(l):i.error("No image name provided.")}evaluate(t){let i=this.input.evaluate(t),l=Ur.fromString(i);return l&&t.availableImages&&(l.available=t.availableImages.indexOf(i)>-1),l}eachChild(t){t(this.input)}outputDefined(){return!1}}class kr{constructor(t){this.type=nt,this.input=t}static parse(t,i){if(t.length!==2)return i.error(`Expected 1 argument, but found ${t.length-1} instead.`);let l=i.parse(t[1],1);return l?l.type.kind!=="array"&&l.type.kind!=="string"&&l.type.kind!=="value"?i.error(`Expected argument of type string or array, but found ${mi(l.type)} instead.`):new kr(l):null}evaluate(t){let i=this.input.evaluate(t);if(typeof i=="string")return[...i].length;if(Array.isArray(i))return i.length;throw new vi(`Expected value to be of type string or array, but found ${mi(ei(i))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}let nr=8192;function jl(r,t){let i=(180+r[0])/360,l=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r[1]*Math.PI/360)))/360,h=Math.pow(2,t.z);return[Math.round(i*h*nr),Math.round(l*h*nr)]}function Ds(r,t){let i=Math.pow(2,t.z);return[(h=(r[0]/nr+t.x)/i,360*h-180),(l=(r[1]/nr+t.y)/i,360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90)];var l,h}function is(r,t){r[0]=Math.min(r[0],t[0]),r[1]=Math.min(r[1],t[1]),r[2]=Math.max(r[2],t[0]),r[3]=Math.max(r[3],t[1])}function da(r,t){return!(r[0]<=t[0]||r[2]>=t[2]||r[1]<=t[1]||r[3]>=t[3])}function td(r,t,i){let l=r[0]-t[0],h=r[1]-t[1],g=r[0]-i[0],y=r[1]-i[1];return l*y-g*h==0&&l*g<=0&&h*y<=0}function Qo(r,t,i,l){return(h=[l[0]-i[0],l[1]-i[1]])[0]*(g=[t[0]-r[0],t[1]-r[1]])[1]-h[1]*g[0]!=0&&!(!On(r,t,i,l)||!On(i,l,r,t));var h,g}function Cc(r,t,i){for(let l of i)for(let h=0;h<l.length-1;++h)if(Qo(r,t,l[h],l[h+1]))return!0;return!1}function Os(r,t,i=!1){let l=!1;for(let x of t)for(let S=0;S<x.length-1;S++){if(td(r,x[S],x[S+1]))return i;(g=x[S])[1]>(h=r)[1]!=(y=x[S+1])[1]>h[1]&&h[0]<(y[0]-g[0])*(h[1]-g[1])/(y[1]-g[1])+g[0]&&(l=!l)}var h,g,y;return l}function Jr(r,t){for(let i of t)if(Os(r,i))return!0;return!1}function rs(r,t){for(let i of r)if(!Os(i,t))return!1;for(let i=0;i<r.length-1;++i)if(Cc(r[i],r[i+1],t))return!1;return!0}function kc(r,t){for(let i of t)if(rs(r,i))return!0;return!1}function On(r,t,i,l){let h=l[0]-i[0],g=l[1]-i[1],y=(r[0]-i[0])*g-h*(r[1]-i[1]),x=(t[0]-i[0])*g-h*(t[1]-i[1]);return y>0&&x<0||y<0&&x>0}function Nl(r,t,i){let l=[];for(let h=0;h<r.length;h++){let g=[];for(let y=0;y<r[h].length;y++){let x=jl(r[h][y],i);is(t,x),g.push(x)}l.push(g)}return l}function Ra(r,t,i){let l=[];for(let h=0;h<r.length;h++){let g=Nl(r[h],t,i);l.push(g)}return l}function Pc(r,t,i,l){if(r[0]<i[0]||r[0]>i[2]){let h=.5*l,g=r[0]-i[0]>h?-l:i[0]-r[0]>h?l:0;g===0&&(g=r[0]-i[2]>h?-l:i[2]-r[0]>h?l:0),r[0]+=g}is(t,r)}function Rs(r,t,i,l){let h=Math.pow(2,l.z)*nr,g=[l.x*nr,l.y*nr],y=[];for(let x of r)for(let S of x){let P=[S.x+g[0],S.y+g[1]];Pc(P,t,i,h),y.push(P)}return y}function ql(r,t,i,l){let h=Math.pow(2,l.z)*nr,g=[l.x*nr,l.y*nr],y=[];for(let S of r){let P=[];for(let A of S){let D=[A.x+g[0],A.y+g[1]];is(t,D),P.push(D)}y.push(P)}if(t[2]-t[0]<=h/2){(x=t)[0]=x[1]=1/0,x[2]=x[3]=-1/0;for(let S of y)for(let P of S)Pc(P,t,i,h)}var x;return y}class $n{constructor(t,i){this.type=Ot,this.geojson=t,this.geometries=i}static parse(t,i){if(t.length!==2)return i.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(bn(t[1])){let l=t[1];if(l.type==="FeatureCollection"){let h=[];for(let g of l.features){let{type:y,coordinates:x}=g.geometry;y==="Polygon"&&h.push(x),y==="MultiPolygon"&&h.push(...x)}if(h.length)return new $n(l,{type:"MultiPolygon",coordinates:h})}else if(l.type==="Feature"){let h=l.geometry.type;if(h==="Polygon"||h==="MultiPolygon")return new $n(l,l.geometry)}else if(l.type==="Polygon"||l.type==="MultiPolygon")return new $n(l,l)}return i.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return(function(i,l){let h=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],y=i.canonicalID();if(l.type==="Polygon"){let x=Nl(l.coordinates,g,y),S=Rs(i.geometry(),h,g,y);if(!da(h,g))return!1;for(let P of S)if(!Os(P,x))return!1}if(l.type==="MultiPolygon"){let x=Ra(l.coordinates,g,y),S=Rs(i.geometry(),h,g,y);if(!da(h,g))return!1;for(let P of S)if(!Jr(P,x))return!1}return!0})(t,this.geometries);if(t.geometryType()==="LineString")return(function(i,l){let h=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],y=i.canonicalID();if(l.type==="Polygon"){let x=Nl(l.coordinates,g,y),S=ql(i.geometry(),h,g,y);if(!da(h,g))return!1;for(let P of S)if(!rs(P,x))return!1}if(l.type==="MultiPolygon"){let x=Ra(l.coordinates,g,y),S=ql(i.geometry(),h,g,y);if(!da(h,g))return!1;for(let P of S)if(!kc(P,x))return!1}return!0})(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Ec=class{constructor(r=[],t=(i,l)=>i<l?-1:i>l?1:0){if(this.data=r,this.length=this.data.length,this.compare=t,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(r){this.data.push(r),this._up(this.length++)}pop(){if(this.length===0)return;let r=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),r}peek(){return this.data[0]}_up(r){let{data:t,compare:i}=this,l=t[r];for(;r>0;){let h=r-1>>1,g=t[h];if(i(l,g)>=0)break;t[r]=g,r=h}t[r]=l}_down(r){let{data:t,compare:i}=this,l=this.length>>1,h=t[r];for(;r<l;){let g=1+(r<<1),y=g+1;if(y<this.length&&i(t[y],t[g])<0&&(g=y),i(t[g],h)>=0)break;t[r]=t[g],r=g}t[r]=h}};function Yn(r,t,i=0,l=r.length-1,h=Ac){for(;l>i;){if(l-i>600){let S=l-i+1,P=t-i+1,A=Math.log(S),D=.5*Math.exp(2*A/3),B=.5*Math.sqrt(A*D*(S-D)/S)*(P-S/2<0?-1:1);Yn(r,t,Math.max(i,Math.floor(t-P*D/S+B)),Math.min(l,Math.floor(t+(S-P)*D/S+B)),h)}let g=r[t],y=i,x=l;for(ha(r,i,t),h(r[l],g)>0&&ha(r,i,l);y<x;){for(ha(r,y,x),y++,x--;h(r[y],g)<0;)y++;for(;h(r[x],g)>0;)x--}h(r[i],g)===0?ha(r,i,x):(x++,ha(r,x,l)),x<=t&&(i=x+1),t<=x&&(l=x-1)}}function ha(r,t,i){let l=r[t];r[t]=r[i],r[i]=l}function Ac(r,t){return r<t?-1:r>t?1:0}function Bs(r,t){if(r.length<=1)return[r];let i=[],l,h;for(let g of r){let y=pa(g);y!==0&&(g.area=Math.abs(y),h===void 0&&(h=y<0),h===y<0?(l&&i.push(l),l=[g]):l.push(g))}if(l&&i.push(l),t>1)for(let g=0;g<i.length;g++)i[g].length<=t||(Yn(i[g],t,1,i[g].length-1,id),i[g]=i[g].slice(0,t));return i}function id(r,t){return t.area-r.area}function pa(r){let t=0;for(let i,l,h=0,g=r.length,y=g-1;h<g;y=h++)i=r[h],l=r[y],t+=(l.x-i.x)*(i.y+l.y);return t}let Mc=1/298.257223563,Xn=Mc*(2-Mc),zc=Math.PI/180;class Rn{constructor(t){let i=6378.137*zc*1e3,l=Math.cos(t*zc),h=1/(1-Xn*(1-l*l)),g=Math.sqrt(h);this.kx=i*g*l,this.ky=i*g*h*(1-Xn)}distance(t,i){let l=this.wrap(t[0]-i[0])*this.kx,h=(t[1]-i[1])*this.ky;return Math.sqrt(l*l+h*h)}pointOnLine(t,i){let l,h,g,y,x=1/0;for(let S=0;S<t.length-1;S++){let P=t[S][0],A=t[S][1],D=this.wrap(t[S+1][0]-P)*this.kx,B=(t[S+1][1]-A)*this.ky,F=0;D===0&&B===0||(F=(this.wrap(i[0]-P)*this.kx*D+(i[1]-A)*this.ky*B)/(D*D+B*B),F>1?(P=t[S+1][0],A=t[S+1][1]):F>0&&(P+=D/this.kx*F,A+=B/this.ky*F)),D=this.wrap(i[0]-P)*this.kx,B=(i[1]-A)*this.ky;let W=D*D+B*B;W<x&&(x=W,l=P,h=A,g=S,y=F)}return{point:[l,h],index:g,t:Math.max(0,Math.min(1,y))}}wrap(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}}function vo(r,t){return t[0]-r[0]}function bo(r){return r[1]-r[0]+1}function un(r,t){return r[1]>=r[0]&&r[1]<t}function ns(r,t){if(r[0]>r[1])return[null,null];let i=bo(r);if(t){if(i===2)return[r,null];let h=Math.floor(i/2);return[[r[0],r[0]+h],[r[0]+h,r[1]]]}if(i===1)return[r,null];let l=Math.floor(i/2)-1;return[[r[0],r[0]+l],[r[0]+l+1,r[1]]]}function xo(r,t){if(!un(t,r.length))return[1/0,1/0,-1/0,-1/0];let i=[1/0,1/0,-1/0,-1/0];for(let l=t[0];l<=t[1];++l)is(i,r[l]);return i}function Fs(r){let t=[1/0,1/0,-1/0,-1/0];for(let i of r)for(let l of i)is(t,l);return t}function Ba(r){return r[0]!==-1/0&&r[1]!==-1/0&&r[2]!==1/0&&r[3]!==1/0}function as(r,t,i){if(!Ba(r)||!Ba(t))return NaN;let l=0,h=0;return r[2]<t[0]&&(l=t[0]-r[2]),r[0]>t[2]&&(l=r[0]-t[2]),r[1]>t[3]&&(h=r[1]-t[3]),r[3]<t[1]&&(h=t[1]-r[3]),i.distance([0,0],[l,h])}function fa(r,t,i){let l=i.pointOnLine(t,r);return i.distance(r,l.point)}function el(r,t,i,l,h){let g=Math.min(fa(r,[i,l],h),fa(t,[i,l],h)),y=Math.min(fa(i,[r,t],h),fa(l,[r,t],h));return Math.min(g,y)}function rd(r,t,i,l,h){if(!un(t,r.length)||!un(l,i.length))return 1/0;let g=1/0;for(let y=t[0];y<t[1];++y){let x=r[y],S=r[y+1];for(let P=l[0];P<l[1];++P){let A=i[P],D=i[P+1];if(Qo(x,S,A,D))return 0;g=Math.min(g,el(x,S,A,D,h))}}return g}function wo(r,t,i,l,h){if(!un(t,r.length)||!un(l,i.length))return NaN;let g=1/0;for(let y=t[0];y<=t[1];++y)for(let x=l[0];x<=l[1];++x)if(g=Math.min(g,h.distance(r[y],i[x])),g===0)return g;return g}function nd(r,t,i){if(Os(r,t,!0))return 0;let l=1/0;for(let h of t){let g=h[0],y=h[h.length-1];if(g!==y&&(l=Math.min(l,fa(r,[y,g],i)),l===0))return l;let x=i.pointOnLine(h,r);if(l=Math.min(l,i.distance(r,x.point)),l===0)return l}return l}function Ic(r,t,i,l){if(!un(t,r.length))return NaN;for(let g=t[0];g<=t[1];++g)if(Os(r[g],i,!0))return 0;let h=1/0;for(let g=t[0];g<t[1];++g){let y=r[g],x=r[g+1];for(let S of i)for(let P=0,A=S.length,D=A-1;P<A;D=P++){let B=S[D],F=S[P];if(Qo(y,x,B,F))return 0;h=Math.min(h,el(y,x,B,F,l))}}return h}function Lc(r,t){for(let i of r)for(let l of i)if(Os(l,t,!0))return!0;return!1}function Dc(r,t,i,l=1/0){let h=Fs(r),g=Fs(t);if(l!==1/0&&as(h,g,i)>=l)return l;if(da(h,g)){if(Lc(r,t))return 0}else if(Lc(t,r))return 0;let y=1/0;for(let x of r)for(let S=0,P=x.length,A=P-1;S<P;A=S++){let D=x[A],B=x[S];for(let F of t)for(let W=0,U=F.length,H=U-1;W<U;H=W++){let ee=F[H],ce=F[W];if(Qo(D,B,ee,ce))return 0;y=Math.min(y,el(D,B,ee,ce,i))}}return y}function ui(r,t,i,l,h,g){if(!g)return;let y=as(xo(l,g),h,i);y<t&&r.push([y,g,[0,0]])}function dn(r,t,i,l,h,g,y){if(!g||!y)return;let x=as(xo(l,g),xo(h,y),i);x<t&&r.push([x,g,y])}function ss(r,t,i,l,h=1/0){let g=Math.min(l.distance(r[0],i[0][0]),h);if(g===0)return g;let y=new Ec([[0,[0,r.length-1],[0,0]]],vo),x=Fs(i);for(;y.length>0;){let S=y.pop();if(S[0]>=g)continue;let P=S[1],A=t?50:100;if(bo(P)<=A){if(!un(P,r.length))return NaN;if(t){let D=Ic(r,P,i,l);if(isNaN(D)||D===0)return D;g=Math.min(g,D)}else for(let D=P[0];D<=P[1];++D){let B=nd(r[D],i,l);if(g=Math.min(g,B),g===0)return 0}}else{let D=ns(P,t);ui(y,g,l,r,x,D[0]),ui(y,g,l,r,x,D[1])}}return g}function tl(r,t,i,l,h,g=1/0){let y=Math.min(g,h.distance(r[0],i[0]));if(y===0)return y;let x=new Ec([[0,[0,r.length-1],[0,i.length-1]]],vo);for(;x.length>0;){let S=x.pop();if(S[0]>=y)continue;let P=S[1],A=S[2],D=t?50:100,B=l?50:100;if(bo(P)<=D&&bo(A)<=B){if(!un(P,r.length)&&un(A,i.length))return NaN;let F;if(t&&l)F=rd(r,P,i,A,h),y=Math.min(y,F);else if(t&&!l){let W=r.slice(P[0],P[1]+1);for(let U=A[0];U<=A[1];++U)if(F=fa(i[U],W,h),y=Math.min(y,F),y===0)return y}else if(!t&&l){let W=i.slice(A[0],A[1]+1);for(let U=P[0];U<=P[1];++U)if(F=fa(r[U],W,h),y=Math.min(y,F),y===0)return y}else F=wo(r,P,i,A,h),y=Math.min(y,F)}else{let F=ns(P,t),W=ns(A,l);dn(x,y,h,r,i,F[0],W[0]),dn(x,y,h,r,i,F[0],W[1]),dn(x,y,h,r,i,F[1],W[0]),dn(x,y,h,r,i,F[1],W[1])}}return y}function js(r){return r.type==="MultiPolygon"?r.coordinates.map((t=>({type:"Polygon",coordinates:t}))):r.type==="MultiLineString"?r.coordinates.map((t=>({type:"LineString",coordinates:t}))):r.type==="MultiPoint"?r.coordinates.map((t=>({type:"Point",coordinates:t}))):[r]}class os{constructor(t,i){this.type=nt,this.geojson=t,this.geometries=i}static parse(t,i){if(t.length!==2)return i.error(`'distance' expression requires exactly one argument, but found ${t.length-1} instead.`);if(bn(t[1])){let l=t[1];if(l.type==="FeatureCollection")return new os(l,l.features.map((h=>js(h.geometry))).flat());if(l.type==="Feature")return new os(l,js(l.geometry));if("type"in l&&"coordinates"in l)return new os(l,js(l))}return i.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return(function(i,l){let h=i.geometry(),g=h.flat().map((S=>Ds([S.x,S.y],i.canonical)));if(h.length===0)return NaN;let y=new Rn(g[0][1]),x=1/0;for(let S of l){switch(S.type){case"Point":x=Math.min(x,tl(g,!1,[S.coordinates],!1,y,x));break;case"LineString":x=Math.min(x,tl(g,!1,S.coordinates,!0,y,x));break;case"Polygon":x=Math.min(x,ss(g,!1,S.coordinates,y,x))}if(x===0)return x}return x})(t,this.geometries);if(t.geometryType()==="LineString")return(function(i,l){let h=i.geometry(),g=h.flat().map((S=>Ds([S.x,S.y],i.canonical)));if(h.length===0)return NaN;let y=new Rn(g[0][1]),x=1/0;for(let S of l){switch(S.type){case"Point":x=Math.min(x,tl(g,!0,[S.coordinates],!1,y,x));break;case"LineString":x=Math.min(x,tl(g,!0,S.coordinates,!0,y,x));break;case"Polygon":x=Math.min(x,ss(g,!0,S.coordinates,y,x))}if(x===0)return x}return x})(t,this.geometries);if(t.geometryType()==="Polygon")return(function(i,l){let h=i.geometry();if(h.length===0||h[0].length===0)return NaN;let g=Bs(h,0).map((S=>S.map((P=>P.map((A=>Ds([A.x,A.y],i.canonical))))))),y=new Rn(g[0][0][0][1]),x=1/0;for(let S of l)for(let P of g){switch(S.type){case"Point":x=Math.min(x,ss([S.coordinates],!1,P,y,x));break;case"LineString":x=Math.min(x,ss(S.coordinates,!0,P,y,x));break;case"Polygon":x=Math.min(x,Dc(P,S.coordinates,y,x))}if(x===0)return x}return x})(t,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Ns{constructor(t){this.type=jt,this.key=t}static parse(t,i){if(t.length!==2)return i.error(`Expected 1 argument, but found ${t.length-1} instead.`);let l=t[1];return l==null?i.error("Global state property must be defined."):typeof l!="string"?i.error(`Global state property must be string, but found ${typeof t[1]} instead.`):new Ns(l)}evaluate(t){var i;let l=(i=t.globals)===null||i===void 0?void 0:i.globalState;return l&&Object.keys(l).length!==0?oa(l,this.key):null}eachChild(){}outputDefined(){return!1}}let qs={"==":Tc,"!=":Fl,">":ed,"<":Jo,">=":yo,"<=":ts,array:Kr,at:$t,boolean:Kr,case:mo,coalesce:la,collator:ca,format:_o,image:Hn,in:Ft,"index-of":zs,interpolate:Qi,"interpolate-hcl":Qi,"interpolate-lab":Qi,length:kr,let:Ci,literal:In,match:ti,number:Kr,"number-format":ua,object:Kr,slice:cn,step:Oa,string:Kr,"to-boolean":Ln,"to-color":Ln,"to-number":Ln,"to-string":Ln,var:zr,within:$n,distance:os,"global-state":Ns};class Ir{constructor(t,i,l,h){this.name=t,this.type=i,this._evaluate=l,this.args=h}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,i){let l=t[0],h=Ir.definitions[l];if(!h)return i.error(`Unknown expression "${l}". If you wanted a literal array, use ["literal", [...]].`,0);let g=Array.isArray(h)?h[0]:h.type,y=Array.isArray(h)?[[h[1],h[2]]]:h.overloads,x=y.filter((([P])=>!Array.isArray(P)||P.length===t.length-1)),S=null;for(let[P,A]of x){S=new Xt(i.registry,rl,i.path,null,i.scope);let D=[],B=!1;for(let F=1;F<t.length;F++){let W=t[F],U=Array.isArray(P)?P[F-1]:P.type,H=S.parse(W,1+D.length,U);if(!H){B=!0;break}D.push(H)}if(!B)if(Array.isArray(P)&&P.length!==D.length)S.error(`Expected ${P.length} arguments, but found ${D.length} instead.`);else{for(let F=0;F<D.length;F++){let W=Array.isArray(P)?P[F]:P.type,U=D[F];S.concat(F+1).checkSubtype(W,U.type)}if(S.errors.length===0)return new Ir(l,g,A,D)}}if(x.length===1)i.errors.push(...S.errors);else{let P=(x.length?x:y).map((([D])=>{return B=D,Array.isArray(B)?`(${B.map(mi).join(", ")})`:`(${mi(B.type)}...)`;var B})).join(" | "),A=[];for(let D=1;D<t.length;D++){let B=i.parse(t[D],1+A.length);if(!B)return null;A.push(mi(B.type))}i.error(`Expected arguments of type ${P}, but found (${A.join(", ")}) instead.`)}return null}static register(t,i){Ir.definitions=i;for(let l in i)t[l]=Ir}}function Oc(r,[t,i,l,h]){t=t.evaluate(r),i=i.evaluate(r),l=l.evaluate(r);let g=h?h.evaluate(r):1,y=La(t,i,l,g);if(y)throw new vi(y);return new Nt(t/255,i/255,l/255,g,!1)}function ls(r,t){return r in t}function il(r,t){let i=t[r];return i===void 0?null:i}function Fa(r){return{type:r}}function rl(r){if(r instanceof zr)return rl(r.boundExpression);if(r instanceof Ir&&r.name==="error"||r instanceof ca||r instanceof $n||r instanceof os||r instanceof Ns)return!1;let t=r instanceof Ln||r instanceof Kr,i=!0;return r.eachChild((l=>{i=t?i&&rl(l):i&&l instanceof In})),!!i&&wn(r)&&So(r,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function wn(r){if(r instanceof Ir&&(r.name==="get"&&r.args.length===1||r.name==="feature-state"||r.name==="has"&&r.args.length===1||r.name==="properties"||r.name==="geometry-type"||r.name==="id"||/^filter-/.test(r.name))||r instanceof $n||r instanceof os)return!1;let t=!0;return r.eachChild((i=>{t&&!wn(i)&&(t=!1)})),t}function Vs(r){if(r instanceof Ir&&r.name==="feature-state")return!1;let t=!0;return r.eachChild((i=>{t&&!Vs(i)&&(t=!1)})),t}function So(r,t){if(r instanceof Ir&&t.indexOf(r.name)>=0)return!1;let i=!0;return r.eachChild((l=>{i&&!So(l,t)&&(i=!1)})),i}function Ws(r){return{result:"success",value:r}}function Gs(r){return{result:"error",value:r}}function ma(r){return r["property-type"]==="data-driven"||r["property-type"]==="cross-faded-data-driven"}function Us(r){return!!r.expression&&r.expression.parameters.indexOf("zoom")>-1}function nl(r){return!!r.expression&&r.expression.interpolated}function Gt(r){return r instanceof Number?"number":r instanceof String?"string":r instanceof Boolean?"boolean":Array.isArray(r)?"array":r===null?"null":typeof r}function al(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)&&ei(r)===na}function Rc(r){return r}function Vl(r,t){let i=r.stops&&typeof r.stops[0][0]=="object",l=i||!(i||r.property!==void 0),h=r.type||(nl(t)?"exponential":"interval"),g=(function(A){switch(A.type){case"color":return Nt.parse;case"padding":return wt.parse;case"numberArray":return ci.parse;case"colorArray":return ct.parse;default:return null}})(t);if(g&&((r=Xi({},r)).stops&&(r.stops=r.stops.map((A=>[A[0],g(A[1])]))),r.default=g(r.default?r.default:t.default)),r.colorSpace&&(y=r.colorSpace)!=="rgb"&&y!=="hcl"&&y!=="lab")throw new Error(`Unknown color space: "${r.colorSpace}"`);var y;let x=(function(A){switch(A){case"exponential":return jc;case"interval":return Fc;case"categorical":return Bc;case"identity":return Nc;default:throw new Error(`Unknown function type "${A}"`)}})(h),S,P;if(h==="categorical"){S=Object.create(null);for(let A of r.stops)S[A[0]]=A[1];P=typeof r.stops[0][0]}if(i){let A={},D=[];for(let W=0;W<r.stops.length;W++){let U=r.stops[W],H=U[0].zoom;A[H]===void 0&&(A[H]={zoom:H,type:r.type,property:r.property,default:r.default,stops:[]},D.push(H)),A[H].stops.push([U[0].value,U[1]])}let B=[];for(let W of D)B.push([A[W].zoom,Vl(A[W],t)]);let F={name:"linear"};return{kind:"composite",interpolationType:F,interpolationFactor:Qi.interpolationFactor.bind(void 0,F),zoomStops:B.map((W=>W[0])),evaluate:({zoom:W},U)=>jc({stops:B,base:r.base},t,W).evaluate(W,U)}}if(l){let A=h==="exponential"?{name:"exponential",base:r.base!==void 0?r.base:1}:null;return{kind:"camera",interpolationType:A,interpolationFactor:Qi.interpolationFactor.bind(void 0,A),zoomStops:r.stops.map((D=>D[0])),evaluate:({zoom:D})=>x(r,t,D,S,P)}}return{kind:"source",evaluate(A,D){let B=D&&D.properties?D.properties[r.property]:void 0;return B===void 0?Zs(r.default,t.default):x(r,t,B,S,P)}}}function Zs(r,t,i){return r!==void 0?r:t!==void 0?t:i!==void 0?i:void 0}function Bc(r,t,i,l,h){return Zs(typeof i===h?l[i]:void 0,r.default,t.default)}function Fc(r,t,i){if(Gt(i)!=="number")return Zs(r.default,t.default);let l=r.stops.length;if(l===1||i<=r.stops[0][0])return r.stops[0][1];if(i>=r.stops[l-1][0])return r.stops[l-1][1];let h=Is(r.stops.map((g=>g[0])),i);return r.stops[h][1]}function jc(r,t,i){let l=r.base!==void 0?r.base:1;if(Gt(i)!=="number")return Zs(r.default,t.default);let h=r.stops.length;if(h===1||i<=r.stops[0][0])return r.stops[0][1];if(i>=r.stops[h-1][0])return r.stops[h-1][1];let g=Is(r.stops.map((A=>A[0])),i),y=(function(A,D,B,F){let W=F-B,U=A-B;return W===0?0:D===1?U/W:(Math.pow(D,U)-1)/(Math.pow(D,W)-1)})(i,l,r.stops[g][0],r.stops[g+1][0]),x=r.stops[g][1],S=r.stops[g+1][1],P=Ii[t.type]||Rc;return typeof x.evaluate=="function"?{evaluate(...A){let D=x.evaluate.apply(void 0,A),B=S.evaluate.apply(void 0,A);if(D!==void 0&&B!==void 0)return P(D,B,y,r.colorSpace)}}:P(x,S,y,r.colorSpace)}function Nc(r,t,i){switch(t.type){case"color":i=Nt.parse(i);break;case"formatted":i=Xr.fromString(i.toString());break;case"resolvedImage":i=Ur.fromString(i.toString());break;case"padding":i=wt.parse(i);break;case"colorArray":i=ct.parse(i);break;case"numberArray":i=ci.parse(i);break;default:Gt(i)===t.type||t.type==="enum"&&t.values[i]||(i=void 0)}return Zs(i,r.default,t.default)}Ir.register(qs,{error:[{kind:"error"},[Dt],(r,[t])=>{throw new vi(t.evaluate(r))}],typeof:[Dt,[jt],(r,[t])=>mi(ei(t.evaluate(r)))],"to-rgba":[Vr(nt,4),[Yr],(r,[t])=>{let[i,l,h,g]=t.evaluate(r).rgb;return[255*i,255*l,255*h,g]}],rgb:[Yr,[nt,nt,nt],Oc],rgba:[Yr,[nt,nt,nt,nt],Oc],has:{type:Ot,overloads:[[[Dt],(r,[t])=>ls(t.evaluate(r),r.properties())],[[Dt,na],(r,[t,i])=>ls(t.evaluate(r),i.evaluate(r))]]},get:{type:jt,overloads:[[[Dt],(r,[t])=>il(t.evaluate(r),r.properties())],[[Dt,na],(r,[t,i])=>il(t.evaluate(r),i.evaluate(r))]]},"feature-state":[jt,[Dt],(r,[t])=>il(t.evaluate(r),r.featureState||{})],properties:[na,[],r=>r.properties()],"geometry-type":[Dt,[],r=>r.geometryType()],id:[jt,[],r=>r.id()],zoom:[nt,[],r=>r.globals.zoom],"heatmap-density":[nt,[],r=>r.globals.heatmapDensity||0],elevation:[nt,[],r=>r.globals.elevation||0],"line-progress":[nt,[],r=>r.globals.lineProgress||0],accumulated:[jt,[],r=>r.globals.accumulated===void 0?null:r.globals.accumulated],"+":[nt,Fa(nt),(r,t)=>{let i=0;for(let l of t)i+=l.evaluate(r);return i}],"*":[nt,Fa(nt),(r,t)=>{let i=1;for(let l of t)i*=l.evaluate(r);return i}],"-":{type:nt,overloads:[[[nt,nt],(r,[t,i])=>t.evaluate(r)-i.evaluate(r)],[[nt],(r,[t])=>-t.evaluate(r)]]},"/":[nt,[nt,nt],(r,[t,i])=>t.evaluate(r)/i.evaluate(r)],"%":[nt,[nt,nt],(r,[t,i])=>t.evaluate(r)%i.evaluate(r)],ln2:[nt,[],()=>Math.LN2],pi:[nt,[],()=>Math.PI],e:[nt,[],()=>Math.E],"^":[nt,[nt,nt],(r,[t,i])=>Math.pow(t.evaluate(r),i.evaluate(r))],sqrt:[nt,[nt],(r,[t])=>Math.sqrt(t.evaluate(r))],log10:[nt,[nt],(r,[t])=>Math.log(t.evaluate(r))/Math.LN10],ln:[nt,[nt],(r,[t])=>Math.log(t.evaluate(r))],log2:[nt,[nt],(r,[t])=>Math.log(t.evaluate(r))/Math.LN2],sin:[nt,[nt],(r,[t])=>Math.sin(t.evaluate(r))],cos:[nt,[nt],(r,[t])=>Math.cos(t.evaluate(r))],tan:[nt,[nt],(r,[t])=>Math.tan(t.evaluate(r))],asin:[nt,[nt],(r,[t])=>Math.asin(t.evaluate(r))],acos:[nt,[nt],(r,[t])=>Math.acos(t.evaluate(r))],atan:[nt,[nt],(r,[t])=>Math.atan(t.evaluate(r))],min:[nt,Fa(nt),(r,t)=>Math.min(...t.map((i=>i.evaluate(r))))],max:[nt,Fa(nt),(r,t)=>Math.max(...t.map((i=>i.evaluate(r))))],abs:[nt,[nt],(r,[t])=>Math.abs(t.evaluate(r))],round:[nt,[nt],(r,[t])=>{let i=t.evaluate(r);return i<0?-Math.round(-i):Math.round(i)}],floor:[nt,[nt],(r,[t])=>Math.floor(t.evaluate(r))],ceil:[nt,[nt],(r,[t])=>Math.ceil(t.evaluate(r))],"filter-==":[Ot,[Dt,jt],(r,[t,i])=>r.properties()[t.value]===i.value],"filter-id-==":[Ot,[jt],(r,[t])=>r.id()===t.value],"filter-type-==":[Ot,[Dt],(r,[t])=>r.geometryType()===t.value],"filter-<":[Ot,[Dt,jt],(r,[t,i])=>{let l=r.properties()[t.value],h=i.value;return typeof l==typeof h&&l<h}],"filter-id-<":[Ot,[jt],(r,[t])=>{let i=r.id(),l=t.value;return typeof i==typeof l&&i<l}],"filter->":[Ot,[Dt,jt],(r,[t,i])=>{let l=r.properties()[t.value],h=i.value;return typeof l==typeof h&&l>h}],"filter-id->":[Ot,[jt],(r,[t])=>{let i=r.id(),l=t.value;return typeof i==typeof l&&i>l}],"filter-<=":[Ot,[Dt,jt],(r,[t,i])=>{let l=r.properties()[t.value],h=i.value;return typeof l==typeof h&&l<=h}],"filter-id-<=":[Ot,[jt],(r,[t])=>{let i=r.id(),l=t.value;return typeof i==typeof l&&i<=l}],"filter->=":[Ot,[Dt,jt],(r,[t,i])=>{let l=r.properties()[t.value],h=i.value;return typeof l==typeof h&&l>=h}],"filter-id->=":[Ot,[jt],(r,[t])=>{let i=r.id(),l=t.value;return typeof i==typeof l&&i>=l}],"filter-has":[Ot,[jt],(r,[t])=>t.value in r.properties()],"filter-has-id":[Ot,[],r=>r.id()!==null&&r.id()!==void 0],"filter-type-in":[Ot,[Vr(Dt)],(r,[t])=>t.value.indexOf(r.geometryType())>=0],"filter-id-in":[Ot,[Vr(jt)],(r,[t])=>t.value.indexOf(r.id())>=0],"filter-in-small":[Ot,[Dt,Vr(jt)],(r,[t,i])=>i.value.indexOf(r.properties()[t.value])>=0],"filter-in-large":[Ot,[Dt,Vr(jt)],(r,[t,i])=>(function(l,h,g,y){for(;g<=y;){let x=g+y>>1;if(h[x]===l)return!0;h[x]>l?y=x-1:g=x+1}return!1})(r.properties()[t.value],i.value,0,i.value.length-1)],all:{type:Ot,overloads:[[[Ot,Ot],(r,[t,i])=>t.evaluate(r)&&i.evaluate(r)],[Fa(Ot),(r,t)=>{for(let i of t)if(!i.evaluate(r))return!1;return!0}]]},any:{type:Ot,overloads:[[[Ot,Ot],(r,[t,i])=>t.evaluate(r)||i.evaluate(r)],[Fa(Ot),(r,t)=>{for(let i of t)if(i.evaluate(r))return!0;return!1}]]},"!":[Ot,[Ot],(r,[t])=>!t.evaluate(r)],"is-supported-script":[Ot,[Dt],(r,[t])=>{let i=r.globals&&r.globals.isSupportedScript;return!i||i(t.evaluate(r))}],upcase:[Dt,[Dt],(r,[t])=>t.evaluate(r).toUpperCase()],downcase:[Dt,[Dt],(r,[t])=>t.evaluate(r).toLowerCase()],concat:[Dt,Fa(jt),(r,t)=>t.map((i=>ln(i.evaluate(r)))).join("")],"resolved-locale":[Dt,[oo],(r,[t])=>t.evaluate(r).resolvedLocale()]});class sl{constructor(t,i,l){this.expression=t,this._warningHistory={},this._evaluator=new Xo,this._defaultValue=i?(function(h){if(h.type==="color"&&al(h.default))return new Nt(0,0,0,0);switch(h.type){case"color":return Nt.parse(h.default)||null;case"padding":return wt.parse(h.default)||null;case"numberArray":return ci.parse(h.default)||null;case"colorArray":return ct.parse(h.default)||null;case"variableAnchorOffsetCollection":return Cr.parse(h.default)||null;case"projectionDefinition":return rr.parse(h.default)||null;default:return h.default===void 0?null:h.default}})(i):null,this._enumValues=i&&i.type==="enum"?i.values:null,this._globalState=l}evaluateWithoutErrorHandling(t,i,l,h,g,y){return this._globalState&&(t=De(t,this._globalState)),this._evaluator.globals=t,this._evaluator.feature=i,this._evaluator.featureState=l,this._evaluator.canonical=h,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=y,this.expression.evaluate(this._evaluator)}evaluate(t,i,l,h,g,y){this._globalState&&(t=De(t,this._globalState)),this._evaluator.globals=t,this._evaluator.feature=i||null,this._evaluator.featureState=l||null,this._evaluator.canonical=h,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=y||null;try{let x=this.expression.evaluate(this._evaluator);if(x==null||typeof x=="number"&&x!=x)return this._defaultValue;if(this._enumValues&&!(x in this._enumValues))throw new vi(`Expected value to be one of ${Object.keys(this._enumValues).map((S=>JSON.stringify(S))).join(", ")}, but found ${JSON.stringify(x)} instead.`);return x}catch(x){return this._warningHistory[x.message]||(this._warningHistory[x.message]=!0,typeof console!="undefined"&&console.warn(x.message)),this._defaultValue}}}function Hs(r){return Array.isArray(r)&&r.length>0&&typeof r[0]=="string"&&r[0]in qs}function c(r,t,i){let l=new Xt(qs,rl,[],t?(function(g){let y={color:Yr,string:Dt,number:nt,enum:Dt,boolean:Ot,formatted:Cs,padding:Zo,numberArray:lo,colorArray:aa,projectionDefinition:Uo,resolvedImage:ks,variableAnchorOffsetCollection:co};return g.type==="array"?Vr(y[g.value]||jt,g.length):y[g.type]})(t):void 0),h=l.parse(r,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?Ws(new sl(h,t,i)):Gs(l.errors)}class v{constructor(t,i,l){this.kind=t,this._styleExpression=i,this.isStateDependent=t!=="constant"&&!Vs(i.expression),this.globalStateRefs=ve(i.expression),this._globalState=l}evaluateWithoutErrorHandling(t,i,l,h,g,y){return this._globalState&&(t=De(t,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(t,i,l,h,g,y)}evaluate(t,i,l,h,g,y){return this._globalState&&(t=De(t,this._globalState)),this._styleExpression.evaluate(t,i,l,h,g,y)}}class C{constructor(t,i,l,h,g){this.kind=t,this.zoomStops=l,this._styleExpression=i,this.isStateDependent=t!=="camera"&&!Vs(i.expression),this.globalStateRefs=ve(i.expression),this.interpolationType=h,this._globalState=g}evaluateWithoutErrorHandling(t,i,l,h,g,y){return this._globalState&&(t=De(t,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(t,i,l,h,g,y)}evaluate(t,i,l,h,g,y){return this._globalState&&(t=De(t,this._globalState)),this._styleExpression.evaluate(t,i,l,h,g,y)}interpolationFactor(t,i,l){return this.interpolationType?Qi.interpolationFactor(this.interpolationType,t,i,l):0}}function I(r,t,i){let l=c(r,t,i);if(l.result==="error")return l;let h=l.value.expression,g=wn(h);if(!g&&!ma(t))return Gs([new qr("","data expressions not supported")]);let y=So(h,["zoom"]);if(!y&&!Us(t))return Gs([new qr("","zoom expressions not supported")]);let x=re(h);return x||y?x instanceof qr?Gs([x]):x instanceof Qi&&!nl(t)?Gs([new qr("",'"interpolate" expressions cannot be used with this property')]):Ws(x?new C(g?"camera":"composite",l.value,x.labels,x instanceof Qi?x.interpolation:void 0,i):new v(g?"constant":"source",l.value,i)):Gs([new qr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class q{constructor(t,i){this._parameters=t,this._specification=i,Xi(this,Vl(this._parameters,this._specification))}static deserialize(t){return new q(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function re(r){let t=null;if(r instanceof Ci)t=re(r.result);else if(r instanceof la){for(let i of r.args)if(t=re(i),t)break}else(r instanceof Oa||r instanceof Qi)&&r.input instanceof Ir&&r.input.name==="zoom"&&(t=r);return t instanceof qr||r.eachChild((i=>{let l=re(i);l instanceof qr?t=l:!t&&l?t=new qr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&l&&t!==l&&(t=new qr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),t}function ve(r,t=new Set){return r instanceof Ns&&t.add(r.key),r.eachChild((i=>{ve(i,t)})),t}function De(r,t){let{zoom:i,heatmapDensity:l,elevation:h,lineProgress:g,isSupportedScript:y,accumulated:x}=r!=null?r:{};return{zoom:i,heatmapDensity:l,elevation:h,lineProgress:g,isSupportedScript:y,accumulated:x,globalState:t}}function Ve(r){if(r===!0||r===!1)return!0;if(!Array.isArray(r)||r.length===0)return!1;switch(r[0]){case"has":return r.length>=2&&r[1]!=="$id"&&r[1]!=="$type";case"in":return r.length>=3&&(typeof r[1]!="string"||Array.isArray(r[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return r.length!==3||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(let t of r.slice(1))if(!Ve(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}let Ke={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ht(r,t){if(r==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};Ve(r)||(r=yr(r));let i=c(r,Ke,t);if(i.result==="error")throw new Error(i.value.map((l=>`${l.key}: ${l.message}`)).join(", "));return{filter:(l,h,g)=>i.value.evaluate(l,h,{},g),needGeometry:Jt(r),getGlobalStateRefs:()=>ve(i.value.expression)}}function It(r,t){return r<t?-1:r>t?1:0}function Jt(r){if(!Array.isArray(r))return!1;if(r[0]==="within"||r[0]==="distance")return!0;for(let t=1;t<r.length;t++)if(Jt(r[t]))return!0;return!1}function yr(r){if(!r)return!0;let t=r[0];return r.length<=1?t!=="any":t==="=="?ar(r[1],r[2],"=="):t==="!="?Kn(ar(r[1],r[2],"==")):t==="<"||t===">"||t==="<="||t===">="?ar(r[1],r[2],t):t==="any"?(i=r.slice(1),["any"].concat(i.map(yr))):t==="all"?["all"].concat(r.slice(1).map(yr)):t==="none"?["all"].concat(r.slice(1).map(yr).map(Kn)):t==="in"?hn(r[1],r.slice(2)):t==="!in"?Kn(hn(r[1],r.slice(2))):t==="has"?Zr(r[1]):t!=="!has"||Kn(Zr(r[1]));var i}function ar(r,t,i){switch(r){case"$type":return[`filter-type-${i}`,t];case"$id":return[`filter-id-${i}`,t];default:return[`filter-${i}`,r,t]}}function hn(r,t){if(t.length===0)return!1;switch(r){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((i=>typeof i!=typeof t[0]))?["filter-in-large",r,["literal",t.sort(It)]]:["filter-in-small",r,["literal",t]]}}function Zr(r){switch(r){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",r]}}function Kn(r){return["!",r]}function ol(r){let t=typeof r;if(t==="number"||t==="boolean"||t==="string"||r==null)return JSON.stringify(r);if(Array.isArray(r)){let h="[";for(let g of r)h+=`${ol(g)},`;return`${h}]`}let i=Object.keys(r).sort(),l="{";for(let h=0;h<i.length;h++)l+=`${JSON.stringify(i[h])}:${ol(r[i[h]])},`;return`${l}}`}function qc(r){let t="";for(let i of Mt)t+=`/${ol(r[i])}`;return t}function Vc(r){let t=r.value;return t?[new Ae(r.key,t,"constants have been deprecated as of v8")]:[]}function Gi(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}function cs(r){if(Array.isArray(r))return r.map(cs);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){let t={};for(let i in r)t[i]=cs(r[i]);return t}return Gi(r)}function Qr(r){let t=r.key,i=r.value,l=r.valueSpec||{},h=r.objectElementValidators||{},g=r.style,y=r.styleSpec,x=r.validateSpec,S=[],P=Gt(i);if(P!=="object")return[new Ae(t,i,`object expected, ${P} found`)];for(let A in i){let D=A.split(".")[0],B=oa(l,D)||l["*"],F;if(oa(h,D))F=h[D];else if(oa(l,D)){if(i[A]===void 0)continue;F=x}else if(h["*"])F=h["*"];else{if(!l["*"]){S.push(new Ae(t,i[A],`unknown property "${A}"`));continue}F=x}S=S.concat(F({key:(t&&`${t}.`)+A,value:i[A],valueSpec:B,style:g,styleSpec:y,object:i,objectKey:A,validateSpec:x},i))}for(let A in l)h[A]||l[A].required&&l[A].default===void 0&&i[A]===void 0&&S.push(new Ae(t,i,`missing required property "${A}"`));return S}function Ui(r){let t=r.value,i=r.valueSpec,l=r.style,h=r.styleSpec,g=r.key,y=r.arrayElementValidator||r.validateSpec;if(Gt(t)!=="array")return[new Ae(g,t,`array expected, ${Gt(t)} found`)];if(i.length&&t.length!==i.length)return[new Ae(g,t,`array length ${i.length} expected, length ${t.length} found`)];let x={type:i.value,values:i.values};h.$version<7&&(x.function=i.function),Gt(i.value)==="object"&&(x=i.value);let S=[];for(let P=0;P<t.length;P++)S=S.concat(y({array:t,arrayIndex:P,value:t[P],valueSpec:x,validateSpec:r.validateSpec,style:l,styleSpec:h,key:`${g}[${P}]`}));return S}function ja(r){let t=r.key,i=r.value,l=r.valueSpec,h=Gt(i);return h==="number"&&i!=i&&(h="NaN"),h!=="number"?[new Ae(t,i,`number expected, ${h} found`)]:"minimum"in l&&i<l.minimum?[new Ae(t,i,`${i} is less than the minimum value ${l.minimum}`)]:"maximum"in l&&i>l.maximum?[new Ae(t,i,`${i} is greater than the maximum value ${l.maximum}`)]:[]}function ll(r){let t=r.valueSpec,i=Gi(r.value.type),l,h,g,y={},x=i!=="categorical"&&r.value.property===void 0,S=!x,P=Gt(r.value.stops)==="array"&&Gt(r.value.stops[0])==="array"&&Gt(r.value.stops[0][0])==="object",A=Qr({key:r.key,value:r.value,valueSpec:r.styleSpec.function,validateSpec:r.validateSpec,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{stops:function(F){if(i==="identity")return[new Ae(F.key,F.value,'identity function may not have a "stops" property')];let W=[],U=F.value;return W=W.concat(Ui({key:F.key,value:U,valueSpec:F.valueSpec,validateSpec:F.validateSpec,style:F.style,styleSpec:F.styleSpec,arrayElementValidator:D})),Gt(U)==="array"&&U.length===0&&W.push(new Ae(F.key,U,"array must have at least one stop")),W},default:function(F){return F.validateSpec({key:F.key,value:F.value,valueSpec:t,validateSpec:F.validateSpec,style:F.style,styleSpec:F.styleSpec})}}});return i==="identity"&&x&&A.push(new Ae(r.key,r.value,'missing required property "property"')),i==="identity"||r.value.stops||A.push(new Ae(r.key,r.value,'missing required property "stops"')),i==="exponential"&&r.valueSpec.expression&&!nl(r.valueSpec)&&A.push(new Ae(r.key,r.value,"exponential functions not supported")),r.styleSpec.$version>=8&&(S&&!ma(r.valueSpec)?A.push(new Ae(r.key,r.value,"property functions not supported")):x&&!Us(r.valueSpec)&&A.push(new Ae(r.key,r.value,"zoom functions not supported"))),i!=="categorical"&&!P||r.value.property!==void 0||A.push(new Ae(r.key,r.value,'"property" property is required')),A;function D(F){let W=[],U=F.value,H=F.key;if(Gt(U)!=="array")return[new Ae(H,U,`array expected, ${Gt(U)} found`)];if(U.length!==2)return[new Ae(H,U,`array length 2 expected, length ${U.length} found`)];if(P){if(Gt(U[0])!=="object")return[new Ae(H,U,`object expected, ${Gt(U[0])} found`)];if(U[0].zoom===void 0)return[new Ae(H,U,"object stop key must have zoom")];if(U[0].value===void 0)return[new Ae(H,U,"object stop key must have value")];if(g&&g>Gi(U[0].zoom))return[new Ae(H,U[0].zoom,"stop zoom values must appear in ascending order")];Gi(U[0].zoom)!==g&&(g=Gi(U[0].zoom),h=void 0,y={}),W=W.concat(Qr({key:`${H}[0]`,value:U[0],valueSpec:{zoom:{}},validateSpec:F.validateSpec,style:F.style,styleSpec:F.styleSpec,objectElementValidators:{zoom:ja,value:B}}))}else W=W.concat(B({key:`${H}[0]`,value:U[0],validateSpec:F.validateSpec,style:F.style,styleSpec:F.styleSpec},U));return Hs(cs(U[1]))?W.concat([new Ae(`${H}[1]`,U[1],"expressions are not allowed in function stops.")]):W.concat(F.validateSpec({key:`${H}[1]`,value:U[1],valueSpec:t,validateSpec:F.validateSpec,style:F.style,styleSpec:F.styleSpec}))}function B(F,W){let U=Gt(F.value),H=Gi(F.value),ee=F.value!==null?F.value:W;if(l){if(U!==l)return[new Ae(F.key,ee,`${U} stop domain type must match previous stop domain type ${l}`)]}else l=U;if(U!=="number"&&U!=="string"&&U!=="boolean")return[new Ae(F.key,ee,"stop domain value must be a number, string, or boolean")];if(U!=="number"&&i!=="categorical"){let ce=`number expected, ${U} found`;return ma(t)&&i===void 0&&(ce+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ae(F.key,ee,ce)]}return i!=="categorical"||U!=="number"||isFinite(H)&&Math.floor(H)===H?i!=="categorical"&&U==="number"&&h!==void 0&&H<h?[new Ae(F.key,ee,"stop domain values must appear in ascending order")]:(h=H,i==="categorical"&&H in y?[new Ae(F.key,ee,"stop domain values must be unique")]:(y[H]=!0,[])):[new Ae(F.key,ee,`integer expected, found ${H}`)]}}function Na(r){let t=(r.expressionContext==="property"?I:c)(cs(r.value),r.valueSpec);if(t.result==="error")return t.value.map((l=>new Ae(`${r.key}${l.key}`,r.value,l.message)));let i=t.value.expression||t.value._styleExpression.expression;if(r.expressionContext==="property"&&r.propertyKey==="text-font"&&!i.outputDefined())return[new Ae(r.key,r.value,`Invalid data expression for "${r.propertyKey}". Output values must be contained as literals within the expression.`)];if(r.expressionContext==="property"&&r.propertyType==="layout"&&!Vs(i))return[new Ae(r.key,r.value,'"feature-state" data expressions are not supported with layout properties.')];if(r.expressionContext==="filter"&&!Vs(i))return[new Ae(r.key,r.value,'"feature-state" data expressions are not supported with filters.')];if(r.expressionContext&&r.expressionContext.indexOf("cluster")===0){if(!So(i,["zoom","feature-state"]))return[new Ae(r.key,r.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(r.expressionContext==="cluster-initial"&&!wn(i))return[new Ae(r.key,r.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function To(r){let t=r.key,i=r.value,l=Gt(i);return l!=="string"?[new Ae(t,i,`color expected, ${l} found`)]:Nt.parse(String(i))?[]:[new Ae(t,i,`color expected, "${i}" found`)]}function ga(r){let t=r.key,i=r.value,l=r.valueSpec,h=[];return Array.isArray(l.values)?l.values.indexOf(Gi(i))===-1&&h.push(new Ae(t,i,`expected one of [${l.values.join(", ")}], ${JSON.stringify(i)} found`)):Object.keys(l.values).indexOf(Gi(i))===-1&&h.push(new Ae(t,i,`expected one of [${Object.keys(l.values).join(", ")}], ${JSON.stringify(i)} found`)),h}function us(r){return Ve(cs(r.value))?Na(Xi({},r,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Wc(r)}function Wc(r){let t=r.value,i=r.key;if(Gt(t)!=="array")return[new Ae(i,t,`array expected, ${Gt(t)} found`)];let l=r.styleSpec,h,g=[];if(t.length<1)return[new Ae(i,t,"filter array must have at least 1 element")];switch(g=g.concat(ga({key:`${i}[0]`,value:t[0],valueSpec:l.filter_operator,style:r.style,styleSpec:r.styleSpec})),Gi(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&Gi(t[1])==="$type"&&g.push(new Ae(i,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&g.push(new Ae(i,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(h=Gt(t[1]),h!=="string"&&g.push(new Ae(`${i}[1]`,t[1],`string expected, ${h} found`)));for(let y=2;y<t.length;y++)h=Gt(t[y]),Gi(t[1])==="$type"?g=g.concat(ga({key:`${i}[${y}]`,value:t[y],valueSpec:l.geometry_type,style:r.style,styleSpec:r.styleSpec})):h!=="string"&&h!=="number"&&h!=="boolean"&&g.push(new Ae(`${i}[${y}]`,t[y],`string, number, or boolean expected, ${h} found`));break;case"any":case"all":case"none":for(let y=1;y<t.length;y++)g=g.concat(Wc({key:`${i}[${y}]`,value:t[y],style:r.style,styleSpec:r.styleSpec}));break;case"has":case"!has":h=Gt(t[1]),t.length!==2?g.push(new Ae(i,t,`filter array for "${t[0]}" operator must have 2 elements`)):h!=="string"&&g.push(new Ae(`${i}[1]`,t[1],`string expected, ${h} found`))}return g}function Ah(r,t){let i=r.key,l=r.validateSpec,h=r.style,g=r.styleSpec,y=r.value,x=r.objectKey,S=g[`${t}_${r.layerType}`];if(!S)return[];let P=x.match(/^(.*)-transition$/);if(t==="paint"&&P&&S[P[1]]&&S[P[1]].transition)return l({key:i,value:y,valueSpec:g.transition,style:h,styleSpec:g});let A=r.valueSpec||S[x];if(!A)return[new Ae(i,y,`unknown property "${x}"`)];let D;if(Gt(y)==="string"&&ma(A)&&!A.tokens&&(D=/^{([^}]+)}$/.exec(y)))return[new Ae(i,y,`"${x}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(D[1])} }\`.`)];let B=[];return r.layerType==="symbol"&&x==="text-font"&&al(cs(y))&&Gi(y.type)==="identity"&&B.push(new Ae(i,y,'"text-font" does not support identity functions')),B.concat(l({key:r.key,value:y,valueSpec:A,style:h,styleSpec:g,expressionContext:"property",propertyType:t,propertyKey:x}))}function Mh(r){return Ah(r,"paint")}function zh(r){return Ah(r,"layout")}function Ih(r){let t=[],i=r.value,l=r.key,h=r.style,g=r.styleSpec;if(Gt(i)!=="object")return[new Ae(l,i,`object expected, ${Gt(i)} found`)];i.type||i.ref||t.push(new Ae(l,i,'either "type" or "ref" is required'));let y=Gi(i.type),x=Gi(i.ref);if(i.id){let S=Gi(i.id);for(let P=0;P<r.arrayIndex;P++){let A=h.layers[P];Gi(A.id)===S&&t.push(new Ae(l,i.id,`duplicate layer id "${i.id}", previously used at line ${A.id.__line__}`))}}if("ref"in i){let S;["type","source","source-layer","filter","layout"].forEach((P=>{P in i&&t.push(new Ae(l,i[P],`"${P}" is prohibited for ref layers`))})),h.layers.forEach((P=>{Gi(P.id)===x&&(S=P)})),S?S.ref?t.push(new Ae(l,i.ref,"ref cannot reference another ref layer")):y=Gi(S.type):t.push(new Ae(l,i.ref,`ref layer "${x}" not found`))}else if(y!=="background")if(i.source){let S=h.sources&&h.sources[i.source],P=S&&Gi(S.type);S?P==="vector"&&y==="raster"?t.push(new Ae(l,i.source,`layer "${i.id}" requires a raster source`)):P!=="raster-dem"&&y==="hillshade"||P!=="raster-dem"&&y==="color-relief"?t.push(new Ae(l,i.source,`layer "${i.id}" requires a raster-dem source`)):P==="raster"&&y!=="raster"?t.push(new Ae(l,i.source,`layer "${i.id}" requires a vector source`)):P!=="vector"||i["source-layer"]?P==="raster-dem"&&y!=="hillshade"&&y!=="color-relief"?t.push(new Ae(l,i.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):y!=="line"||!i.paint||!i.paint["line-gradient"]||P==="geojson"&&S.lineMetrics||t.push(new Ae(l,i,`layer "${i.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new Ae(l,i,`layer "${i.id}" must specify a "source-layer"`)):t.push(new Ae(l,i.source,`source "${i.source}" not found`))}else t.push(new Ae(l,i,'missing required property "source"'));return t=t.concat(Qr({key:l,value:i,valueSpec:g.layer,style:r.style,styleSpec:r.styleSpec,validateSpec:r.validateSpec,objectElementValidators:{"*":()=>[],type:()=>r.validateSpec({key:`${l}.type`,value:i.type,valueSpec:g.layer.type,style:r.style,styleSpec:r.styleSpec,validateSpec:r.validateSpec,object:i,objectKey:"type"}),filter:us,layout:S=>Qr({layer:i,key:S.key,value:S.value,style:S.style,styleSpec:S.styleSpec,validateSpec:S.validateSpec,objectElementValidators:{"*":P=>zh(Xi({layerType:y},P))}}),paint:S=>Qr({layer:i,key:S.key,value:S.value,style:S.style,styleSpec:S.styleSpec,validateSpec:S.validateSpec,objectElementValidators:{"*":P=>Mh(Xi({layerType:y},P))}})}})),t}function $s(r){let t=r.value,i=r.key,l=Gt(t);return l!=="string"?[new Ae(i,t,`string expected, ${l} found`)]:[]}let ad={promoteId:function({key:r,value:t}){if(Gt(t)==="string")return $s({key:r,value:t});{let i=[];for(let l in t)i.push(...$s({key:`${r}.${l}`,value:t[l]}));return i}}};function sd(r){let t=r.value,i=r.key,l=r.styleSpec,h=r.style,g=r.validateSpec;if(!t.type)return[new Ae(i,t,'"type" is required')];let y=Gi(t.type),x;switch(y){case"vector":case"raster":return x=Qr({key:i,value:t,valueSpec:l[`source_${y.replace("-","_")}`],style:r.style,styleSpec:l,objectElementValidators:ad,validateSpec:g}),x;case"raster-dem":return x=(function(S){var P;let A=(P=S.sourceName)!==null&&P!==void 0?P:"",D=S.value,B=S.styleSpec,F=B.source_raster_dem,W=S.style,U=[],H=Gt(D);if(D===void 0)return U;if(H!=="object")return U.push(new Ae("source_raster_dem",D,`object expected, ${H} found`)),U;let ee=Gi(D.encoding)==="custom",ce=["redFactor","greenFactor","blueFactor","baseShift"],te=S.value.encoding?`"${S.value.encoding}"`:"Default";for(let ae in D)!ee&&ce.includes(ae)?U.push(new Ae(ae,D[ae],`In "${A}": "${ae}" is only valid when "encoding" is set to "custom". ${te} encoding found`)):F[ae]?U=U.concat(S.validateSpec({key:ae,value:D[ae],valueSpec:F[ae],validateSpec:S.validateSpec,style:W,styleSpec:B})):U.push(new Ae(ae,D[ae],`unknown property "${ae}"`));return U})({sourceName:i,value:t,style:r.style,styleSpec:l,validateSpec:g}),x;case"geojson":if(x=Qr({key:i,value:t,valueSpec:l.source_geojson,style:h,styleSpec:l,validateSpec:g,objectElementValidators:ad}),t.cluster)for(let S in t.clusterProperties){let[P,A]=t.clusterProperties[S],D=typeof P=="string"?[P,["accumulated"],["get",S]]:P;x.push(...Na({key:`${i}.${S}.map`,value:A,expressionContext:"cluster-map"})),x.push(...Na({key:`${i}.${S}.reduce`,value:D,expressionContext:"cluster-reduce"}))}return x;case"video":return Qr({key:i,value:t,valueSpec:l.source_video,style:h,validateSpec:g,styleSpec:l});case"image":return Qr({key:i,value:t,valueSpec:l.source_image,style:h,validateSpec:g,styleSpec:l});case"canvas":return[new Ae(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ga({key:`${i}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Wl(r){let t=r.value,i=r.styleSpec,l=i.light,h=r.style,g=[],y=Gt(t);if(t===void 0)return g;if(y!=="object")return g=g.concat([new Ae("light",t,`object expected, ${y} found`)]),g;for(let x in t){let S=x.match(/^(.*)-transition$/);g=g.concat(S&&l[S[1]]&&l[S[1]].transition?r.validateSpec({key:x,value:t[x],valueSpec:i.transition,validateSpec:r.validateSpec,style:h,styleSpec:i}):l[x]?r.validateSpec({key:x,value:t[x],valueSpec:l[x],validateSpec:r.validateSpec,style:h,styleSpec:i}):[new Ae(x,t[x],`unknown property "${x}"`)])}return g}function Lh(r){let t=r.value,i=r.styleSpec,l=i.sky,h=r.style,g=Gt(t);if(t===void 0)return[];if(g!=="object")return[new Ae("sky",t,`object expected, ${g} found`)];let y=[];for(let x in t)y=y.concat(l[x]?r.validateSpec({key:x,value:t[x],valueSpec:l[x],style:h,styleSpec:i}):[new Ae(x,t[x],`unknown property "${x}"`)]);return y}function od(r){let t=r.value,i=r.styleSpec,l=i.terrain,h=r.style,g=[],y=Gt(t);if(t===void 0)return g;if(y!=="object")return g=g.concat([new Ae("terrain",t,`object expected, ${y} found`)]),g;for(let x in t)g=g.concat(l[x]?r.validateSpec({key:x,value:t[x],valueSpec:l[x],validateSpec:r.validateSpec,style:h,styleSpec:i}):[new Ae(x,t[x],`unknown property "${x}"`)]);return g}function ld(r){let t=[],i=r.value,l=r.key;if(Array.isArray(i)){let h=[],g=[];for(let y in i)i[y].id&&h.includes(i[y].id)&&t.push(new Ae(l,i,`all the sprites' ids must be unique, but ${i[y].id} is duplicated`)),h.push(i[y].id),i[y].url&&g.includes(i[y].url)&&t.push(new Ae(l,i,`all the sprites' URLs must be unique, but ${i[y].url} is duplicated`)),g.push(i[y].url),t=t.concat(Qr({key:`${l}[${y}]`,value:i[y],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:r.validateSpec}));return t}return $s({key:l,value:i})}function Dh(r){return!!r&&r.constructor===Object}function cd(r){return Dh(r.value)?[]:[new Ae(r.key,r.value,`object expected, ${Gt(r.value)} found`)]}let ud={"*":()=>[],array:Ui,boolean:function(r){let t=r.value,i=r.key,l=Gt(t);return l!=="boolean"?[new Ae(i,t,`boolean expected, ${l} found`)]:[]},number:ja,color:To,constants:Vc,enum:ga,filter:us,function:ll,layer:Ih,object:Qr,source:sd,light:Wl,sky:Lh,terrain:od,projection:function(r){let t=r.value,i=r.styleSpec,l=i.projection,h=r.style,g=Gt(t);if(t===void 0)return[];if(g!=="object")return[new Ae("projection",t,`object expected, ${g} found`)];let y=[];for(let x in t)y=y.concat(l[x]?r.validateSpec({key:x,value:t[x],valueSpec:l[x],style:h,styleSpec:i}):[new Ae(x,t[x],`unknown property "${x}"`)]);return y},projectionDefinition:function(r){let t=r.key,i=r.value;i=i instanceof String?i.valueOf():i;let l=Gt(i);return l!=="array"||(function(h){return Array.isArray(h)&&h.length===3&&typeof h[0]=="string"&&typeof h[1]=="string"&&typeof h[2]=="number"})(i)||(function(h){return!!["interpolate","step","literal"].includes(h[0])})(i)?["array","string"].includes(l)?[]:[new Ae(t,i,`projection expected, invalid type "${l}" found`)]:[new Ae(t,i,`projection expected, invalid array ${JSON.stringify(i)} found`)]},string:$s,formatted:function(r){return $s(r).length===0?[]:Na(r)},resolvedImage:function(r){return $s(r).length===0?[]:Na(r)},padding:function(r){let t=r.key,i=r.value;if(Gt(i)==="array"){if(i.length<1||i.length>4)return[new Ae(t,i,`padding requires 1 to 4 values; ${i.length} values found`)];let l={type:"number"},h=[];for(let g=0;g<i.length;g++)h=h.concat(r.validateSpec({key:`${t}[${g}]`,value:i[g],validateSpec:r.validateSpec,valueSpec:l}));return h}return ja({key:t,value:i,valueSpec:{}})},numberArray:function(r){let t=r.key,i=r.value;if(Gt(i)==="array"){let l={type:"number"};if(i.length<1)return[new Ae(t,i,"array length at least 1 expected, length 0 found")];let h=[];for(let g=0;g<i.length;g++)h=h.concat(r.validateSpec({key:`${t}[${g}]`,value:i[g],validateSpec:r.validateSpec,valueSpec:l}));return h}return ja({key:t,value:i,valueSpec:{}})},colorArray:function(r){let t=r.key,i=r.value;if(Gt(i)==="array"){if(i.length<1)return[new Ae(t,i,"array length at least 1 expected, length 0 found")];let l=[];for(let h=0;h<i.length;h++)l=l.concat(To({key:`${t}[${h}]`,value:i[h]}));return l}return To({key:t,value:i})},variableAnchorOffsetCollection:function(r){let t=r.key,i=r.value,l=Gt(i),h=r.styleSpec;if(l!=="array"||i.length<1||i.length%2!=0)return[new Ae(t,i,"variableAnchorOffsetCollection requires a non-empty array of even length")];let g=[];for(let y=0;y<i.length;y+=2)g=g.concat(ga({key:`${t}[${y}]`,value:i[y],valueSpec:h.layout_symbol["text-anchor"]})),g=g.concat(Ui({key:`${t}[${y+1}]`,value:i[y+1],valueSpec:{length:2,value:"number"},validateSpec:r.validateSpec,style:r.style,styleSpec:h}));return g},sprite:ld,state:cd,fontFaces:function(r){let t=r.key,i=r.value,l=r.validateSpec,h=r.styleSpec,g=r.style;if(!Dh(i))return[new Ae(t,i,`object expected, ${Gt(i)} found`)];let y=[];for(let x in i){let S=i[x],P=Gt(S);if(P==="string")y.push(...$s({key:`${t}.${x}`,value:S}));else if(P==="array"){let A={url:{type:"string",required:!0},"unicode-range":{type:"array",value:"string"}};for(let[D,B]of S.entries())y.push(...Qr({key:`${t}.${x}[${D}]`,value:B,valueSpec:A,styleSpec:h,style:g,validateSpec:l}))}else y.push(new Ae(`${t}.${x}`,S,`string or array expected, ${P} found`))}return y}};function Ys(r){let t=r.value,i=r.valueSpec,l=r.styleSpec;return r.validateSpec=Ys,i.expression&&al(Gi(t))?ll(r):i.expression&&Hs(cs(t))?Na(r):i.type&&ud[i.type]?ud[i.type](r):Qr(Xi({},r,{valueSpec:i.type?l[i.type]:i}))}function Oh(r){let t=r.value,i=r.key,l=$s(r);return l.length||(t.indexOf("{fontstack}")===-1&&l.push(new Ae(i,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&l.push(new Ae(i,t,'"glyphs" url must include a "{range}" token'))),l}function Jn(r,t=Ce){let i=[];return i=i.concat(Ys({key:"",value:r,valueSpec:t.$root,styleSpec:t,style:r,validateSpec:Ys,objectElementValidators:{glyphs:Oh,"*":()=>[]}})),r.constants&&(i=i.concat(Vc({key:"constants",value:r.constants}))),Rh(i)}function ya(r){return function(t){return r(Object.assign({},t,{validateSpec:Ys}))}}function Rh(r){return[].concat(r).sort(((t,i)=>t.line-i.line))}function _a(r){return function(...t){return Rh(r.apply(this,t))}}Jn.source=_a(ya(sd)),Jn.sprite=_a(ya(ld)),Jn.glyphs=_a(ya(Oh)),Jn.light=_a(ya(Wl)),Jn.sky=_a(ya(Lh)),Jn.terrain=_a(ya(od)),Jn.state=_a(ya(cd)),Jn.layer=_a(ya(Ih)),Jn.filter=_a(ya(us)),Jn.paintProperty=_a(ya(Mh)),Jn.layoutProperty=_a(ya(zh));let Jf={type:"enum","property-type":"data-constant",expression:{interpolated:!1,parameters:["global-state"]},values:{visible:{},none:{}},transition:!1,default:"visible"};class Gl{constructor(t,i){this._globalState=i,this.setValue(t)}evaluate(){var t;return(t=this._literalValue)!==null&&t!==void 0?t:this._compiledValue.evaluate({})}setValue(t){if(t==null||t==="visible"||t==="none")return this._literalValue=t==="none"?"none":"visible",this._compiledValue=void 0,void(this._globalStateRefs=new Set);let i=c(t,Jf,this._globalState);if(i.result==="error")throw this._literalValue="visible",this._compiledValue=void 0,new Error(i.value.map((l=>`${l.key}: ${l.message}`)).join(", "));this._literalValue=void 0,this._compiledValue=i.value,this._globalStateRefs=ve(i.value.expression)}getGlobalStateRefs(){return this._globalStateRefs}}let Ul=Ce,Lr=Jn,Zl=Lr.light,Bh=Lr.sky,Qf=Lr.paintProperty,em=Lr.layoutProperty;function cl(r,t){let i=!1;if(t&&t.length)for(let l of t)r.fire(new Ne(new Error(l.message))),i=!0;return i}class ul{constructor(t,i,l){let h=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;let y=new Int32Array(this.arrayBuffer);t=y[0],this.d=(i=y[1])+2*(l=y[2]);for(let S=0;S<this.d*this.d;S++){let P=y[3+S],A=y[3+S+1];h.push(P===A?null:y.subarray(P,A))}let x=y[3+h.length+1];this.keys=y.subarray(y[3+h.length],x),this.bboxes=y.subarray(x),this.insert=this._insertReadonly}else{this.d=i+2*l;for(let y=0;y<this.d*this.d;y++)h.push([]);this.keys=[],this.bboxes=[]}this.n=i,this.extent=t,this.padding=l,this.scale=i/t,this.uid=0;let g=l/i*t;this.min=-g,this.max=t+g}insert(t,i,l,h,g){this._forEachCell(i,l,h,g,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(i),this.bboxes.push(l),this.bboxes.push(h),this.bboxes.push(g)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,i,l,h,g,y){this.cells[g].push(y)}query(t,i,l,h,g){let y=this.min,x=this.max;if(t<=y&&i<=y&&x<=l&&x<=h&&!g)return Array.prototype.slice.call(this.keys);{let S=[];return this._forEachCell(t,i,l,h,this._queryCell,S,{},g),S}}_queryCell(t,i,l,h,g,y,x,S){let P=this.cells[g];if(P!==null){let A=this.keys,D=this.bboxes;for(let B=0;B<P.length;B++){let F=P[B];if(x[F]===void 0){let W=4*F;(S?S(D[W+0],D[W+1],D[W+2],D[W+3]):t<=D[W+2]&&i<=D[W+3]&&l>=D[W+0]&&h>=D[W+1])?(x[F]=!0,y.push(A[F])):x[F]=!1}}}}_forEachCell(t,i,l,h,g,y,x,S){let P=this._convertToCellCoord(t),A=this._convertToCellCoord(i),D=this._convertToCellCoord(l),B=this._convertToCellCoord(h);for(let F=P;F<=D;F++)for(let W=A;W<=B;W++){let U=this.d*W+F;if((!S||S(this._convertFromCellCoord(F),this._convertFromCellCoord(W),this._convertFromCellCoord(F+1),this._convertFromCellCoord(W+1)))&&g.call(this,t,i,l,h,U,y,x,S))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;let t=this.cells,i=3+this.cells.length+1+1,l=0;for(let y=0;y<this.cells.length;y++)l+=this.cells[y].length;let h=new Int32Array(i+l+this.keys.length+this.bboxes.length);h[0]=this.extent,h[1]=this.n,h[2]=this.padding;let g=i;for(let y=0;y<t.length;y++){let x=t[y];h[3+y]=g,h.set(x,g),g+=x.length}return h[3+t.length]=g,h.set(this.keys,g),g+=this.keys.length,h[3+t.length+1]=g,h.set(this.bboxes,g),g+=this.bboxes.length,h.buffer}static serialize(t,i){let l=t.toArrayBuffer();return i&&i.push(l),{buffer:l}}static deserialize(t){return new ul(t.buffer)}}let va={};function ut(r,t,i={}){if(va[r])throw new Error(`${r} is already registered.`);Object.defineProperty(t,"_classRegistryKey",{value:r,writeable:!1}),va[r]={klass:t,omit:i.omit||[],shallow:i.shallow||[]}}ut("Object",Object),ut("Set",Set),ut("TransferableGridIndex",ul),ut("Color",Nt),ut("Error",Error),ut("AJAXError",pe),ut("ResolvedImage",Ur),ut("StylePropertyFunction",q),ut("StyleExpression",sl,{omit:["_evaluator"]}),ut("ZoomDependentExpression",C),ut("ZoomConstantExpression",v),ut("CompoundExpression",Ir,{omit:["_evaluate"]});for(let r in qs)qs[r]._classRegistryKey||ut(`Expression_${r}`,qs[r]);function Gc(r){return r&&typeof ArrayBuffer!="undefined"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}function dd(r){return r.$name||r.constructor._classRegistryKey}function dl(r){return!(function(t){if(t===null||typeof t!="object")return!1;let i=dd(t);return!(!i||i==="Object")})(r)&&(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||r instanceof Blob||r instanceof Error||Gc(r)||_n(r)||ArrayBuffer.isView(r)||r instanceof ImageData)}function Hl(r,t){if(dl(r))return(Gc(r)||_n(r))&&t&&t.push(r),ArrayBuffer.isView(r)&&t&&t.push(r.buffer),r instanceof ImageData&&t&&t.push(r.data.buffer),r;if(Array.isArray(r)){let g=[];for(let y of r)g.push(Hl(y,t));return g}if(typeof r!="object")throw new Error("can't serialize object of type "+typeof r);let i=dd(r);if(!i)throw new Error(`can't serialize object of unregistered class ${r.constructor.name}`);if(!va[i])throw new Error(`${i} is not registered.`);let{klass:l}=va[i],h=l.serialize?l.serialize(r,t):{};if(l.serialize){if(t&&h===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(let g in r){if(!r.hasOwnProperty(g)||va[i].omit.indexOf(g)>=0)continue;let y=r[g];h[g]=va[i].shallow.indexOf(g)>=0?y:Hl(y,t)}r instanceof Error&&(h.message=r.message)}if(h.$name)throw new Error("$name property is reserved for worker serialization logic.");return i!=="Object"&&(h.$name=i),h}function $l(r){if(dl(r))return r;if(Array.isArray(r))return r.map($l);if(typeof r!="object")throw new Error("can't deserialize object of type "+typeof r);let t=dd(r)||"Object";if(!va[t])throw new Error(`can't deserialize unregistered class ${t}`);let{klass:i}=va[t];if(!i)throw new Error(`can't deserialize unregistered class ${t}`);if(i.deserialize)return i.deserialize(r);let l=Object.create(i.prototype);for(let h of Object.keys(r)){if(h==="$name")continue;let g=r[h];l[h]=va[t].shallow.indexOf(h)>=0?g:$l(g)}return l}class hd{constructor(){this.first=!0}update(t,i){let l=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=l,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=l,!0):(this.lastFloorZoom>l?(this.lastIntegerZoom=l+1,this.lastIntegerZoomTime=i):this.lastFloorZoom<l&&(this.lastIntegerZoom=l,this.lastIntegerZoomTime=i),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=l,!0))}}function Yl(r){return/[\u02EA\u02EB\u2E80-\u2FDF\u2FF0-\u303F\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u3105-\u312F\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(r))}function pd(r){return/[\u02EA\u02EB\u1100-\u11FF\u1400-\u167F\u18B0-\u18F5\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303F\u3041-\u3096\u309D-\u30FB\u30FD-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE48\uFE50-\uFE57\uFE5F-\uFE62\uFE67-\uFE6F\uFF00-\uFF07\uFF0A-\uFF0C\uFF0E-\uFF19\uFF1F-\uFF3A\uFF3C\uFF3E\uFF40-\uFF5A\uFFE0-\uFFE2\uFFE4-\uFFE7]|\uD802[\uDD80-\uDD9F]|\uD805[\uDD80-\uDDFF]|\uD806[\uDE00-\uDEBF]|\uD811[\uDC00-\uDE7F]|\uD81B[\uDFE0-\uDFE4\uDFF0-\uDFF6]|[\uD81C-\uD822\uD83D\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD30-\uDEFB]|\uD833[\uDEC0-\uDFCF]|\uD834[\uDC00-\uDDFF\uDEE0-\uDF7F]|\uD836[\uDC00-\uDEAF]|\uD83C[\uDC00-\uDE00\uDF00-\uDFFF]|\uD83E[\uDD00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(r))}function Fh(r){return/\s/u.test(String.fromCodePoint(r))}function hl(r){for(let t of r)if(pd(t.codePointAt(0)))return!0;return!1}function tm(r){for(let t of r)if(!jh(t.codePointAt(0)))return!1;return!0}function Uc(r){let t=r.map((i=>{try{return new RegExp(`\\p{sc=${i}}`,"u").source}catch(l){return null}})).filter((i=>i));return new RegExp(t.join("|"),"u")}let Zc=Uc(["Arab","Dupl","Mong","Ougr","Syrc"]);function jh(r){return!Zc.test(String.fromCodePoint(r))}function fd(r){return!(pd(r)||(t=r,/[\xA7\xA9\xAE\xB1\xBC-\xBE\xD7\xF7\u2016\u2020\u2021\u2030\u2031\u203B\u203C\u2042\u2047-\u2049\u2051\u2100-\u218F\u221E\u2234\u2235\u2300-\u2307\u230C-\u231F\u2324-\u2328\u232B\u237D-\u239A\u23BE-\u23CD\u23CF\u23D1-\u23DB\u23E2-\u2422\u2424-\u24FF\u25A0-\u2619\u2620-\u2767\u2776-\u2793\u2B12-\u2B2F\u2B50-\u2B59\u2BB8-\u2BEB\u3000-\u303F\u30A0-\u30FF\uE000-\uF8FF\uFE30-\uFE6F\uFF00-\uFFEF\uFFFC\uFFFD]|[\uDB80-\uDBFF][\uDC00-\uDFFF]/gim.test(String.fromCodePoint(t))));var t}let Nh=Uc(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function md(r){return Nh.test(String.fromCodePoint(r))}function gd(r,t){return!(!t&&md(r)||/[\u0900-\u0DFF\u0F00-\u109F\u1780-\u17FF]/gim.test(String.fromCodePoint(r)))}function qh(r){for(let t of r)if(md(t.codePointAt(0)))return!0;return!1}let Xs=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(r){this.pluginStatus=r.pluginStatus,this.pluginURL=r.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(r){if(Xs.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=r.applyArabicShaping,this.processBidirectionalText=r.processBidirectionalText,this.processStyledBidirectionalText=r.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(r,t){return a(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(r.pluginStatus!=="loading")return this.setState(r),r;let i=r.pluginURL,l=new Promise((g=>{this.loadScriptResolve=g}));t(i);let h=new Promise((g=>setTimeout((()=>g()),this.TIMEOUT)));if(yield Promise.race([l,h]),this.isParsed()){let g={pluginStatus:"loaded",pluginURL:i};return this.setState(g),g}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${i}`)}))}};class Ai{constructor(t,i){this.isSupportedScript=im,this.zoom=t,i?(this.now=i.now||0,this.fadeDuration=i.fadeDuration||0,this.zoomHistory=i.zoomHistory||new hd,this.transition=i.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new hd,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){let t=this.zoom,i=t-Math.floor(t),l=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:i+(1-i)*l}:{fromScale:.5,toScale:1,t:1-(1-l)*i}}}function im(r){return(function(t,i){for(let l of t)if(!gd(l.codePointAt(0),i))return!1;return!0})(r,Xs.getRTLTextPluginStatus()==="loaded")}let Xl="-transition";class Hc{constructor(t,i,l){this.property=t,this.value=i,this.expression=(function(h,g,y){if(al(h))return new q(h,g);if(Hs(h)){let x=I(h,g,y);if(x.result==="error")throw new Error(x.value.map((S=>`${S.key}: ${S.message}`)).join(", "));return x.value}{let x=h;return g.type==="color"&&typeof h=="string"?x=Nt.parse(h):g.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?g.type!=="numberArray"||typeof h!="number"&&!Array.isArray(h)?g.type!=="colorArray"||typeof h!="string"&&!Array.isArray(h)?g.type==="variableAnchorOffsetCollection"&&Array.isArray(h)?x=Cr.parse(h):g.type==="projectionDefinition"&&typeof h=="string"&&(x=rr.parse(h)):x=ct.parse(h):x=ci.parse(h):x=wt.parse(h),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>x}}})(i===void 0?t.specification.default:i,t.specification,l)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(t,i,l){return this.property.possiblyEvaluate(this,t,i,l)}}class $c{constructor(t,i){this.property=t,this.value=new Hc(t,void 0,i)}transitioned(t,i){return new Vh(this.property,this.value,i,yi({},t.transition,this.transition),t.now)}untransitioned(){return new Vh(this.property,this.value,null,{},0)}}class yd{constructor(t,i){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues),this._globalState=i}getValue(t){return cr(this._values[t].value.value)}setValue(t,i){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new $c(this._values[t].property,this._globalState)),this._values[t].value=new Hc(this._values[t].property,i===null?void 0:cr(i),this._globalState)}getTransition(t){return cr(this._values[t].transition)}setTransition(t,i){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new $c(this._values[t].property,this._globalState)),this._values[t].transition=cr(i)||void 0}serialize(){let t={};for(let i of Object.keys(this._values)){let l=this.getValue(i);l!==void 0&&(t[i]=l);let h=this.getTransition(i);h!==void 0&&(t[`${i}${Xl}`]=h)}return t}transitioned(t,i){let l=new Wh(this._properties);for(let h of Object.keys(this._values))l._values[h]=this._values[h].transitioned(t,i._values[h]);return l}untransitioned(){let t=new Wh(this._properties);for(let i of Object.keys(this._values))t._values[i]=this._values[i].untransitioned();return t}}class Vh{constructor(t,i,l,h,g){this.property=t,this.value=i,this.begin=g+h.delay||0,this.end=this.begin+h.duration||0,t.specification.transition&&(h.delay||h.duration)&&(this.prior=l)}possiblyEvaluate(t,i,l){let h=t.now||0,g=this.value.possiblyEvaluate(t,i,l),y=this.prior;if(y){if(h>this.end)return this.prior=null,g;if(this.value.isDataDriven())return this.prior=null,g;if(h<this.begin)return y.possiblyEvaluate(t,i,l);{let x=(h-this.begin)/(this.end-this.begin);return this.property.interpolate(y.possiblyEvaluate(t,i,l),g,xi(x))}}return g}}class Wh{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,i,l){let h=new Kl(this._properties);for(let g of Object.keys(this._values))h._values[g]=this._values[g].possiblyEvaluate(t,i,l);return h}hasTransition(){for(let t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class Gh{constructor(t,i){this._properties=t,this._values=Object.create(t.defaultPropertyValues),this._globalState=i}hasValue(t){return this._values[t].value!==void 0}getValue(t){return cr(this._values[t].value)}setValue(t,i){this._values[t]=new Hc(this._values[t].property,i===null?void 0:cr(i),this._globalState)}serialize(){let t={};for(let i of Object.keys(this._values)){let l=this.getValue(i);l!==void 0&&(t[i]=l)}return t}possiblyEvaluate(t,i,l){let h=new Kl(this._properties);for(let g of Object.keys(this._values))h._values[g]=this._values[g].possiblyEvaluate(t,i,l);return h}}class ba{constructor(t,i,l){this.property=t,this.value=i,this.parameters=l}isConstant(){return this.value.kind==="constant"}constantOr(t){return this.value.kind==="constant"?this.value.value:t}evaluate(t,i,l,h){return this.property.evaluate(this.value,this.parameters,t,i,l,h)}}class Kl{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class ft{constructor(t){this.specification=t}possiblyEvaluate(t,i){if(t.isDataDriven())throw new Error("Value should not be data driven");return t.expression.evaluate(i)}interpolate(t,i,l){let h=Ii[this.specification.type];return h?h(t,i,l):t}}class xt{constructor(t,i){this.specification=t,this.overrides=i}possiblyEvaluate(t,i,l,h){return new ba(this,t.expression.kind==="constant"||t.expression.kind==="camera"?{kind:"constant",value:t.expression.evaluate(i,null,{},l,h)}:t.expression,i)}interpolate(t,i,l){if(t.value.kind!=="constant"||i.value.kind!=="constant")return t;if(t.value.value===void 0||i.value.value===void 0)return new ba(this,{kind:"constant",value:void 0},t.parameters);let h=Ii[this.specification.type];if(h){let g=h(t.value.value,i.value.value,l);return new ba(this,{kind:"constant",value:g},t.parameters)}return t}evaluate(t,i,l,h,g,y){return t.kind==="constant"?t.value:t.evaluate(i,l,h,g,y)}}class Jl extends xt{possiblyEvaluate(t,i,l,h){if(t.value===void 0)return new ba(this,{kind:"constant",value:void 0},i);if(t.expression.kind==="constant"){let g=t.expression.evaluate(i,null,{},l,h),y=t.property.specification.type==="resolvedImage"&&typeof g!="string"?g.name:g,x=this._calculate(y,y,y,i);return new ba(this,{kind:"constant",value:x},i)}if(t.expression.kind==="camera"){let g=this._calculate(t.expression.evaluate({zoom:i.zoom-1}),t.expression.evaluate({zoom:i.zoom}),t.expression.evaluate({zoom:i.zoom+1}),i);return new ba(this,{kind:"constant",value:g},i)}return new ba(this,t.expression,i)}evaluate(t,i,l,h,g,y){if(t.kind==="source"){let x=t.evaluate(i,l,h,g,y);return this._calculate(x,x,x,i)}return t.kind==="composite"?this._calculate(t.evaluate({zoom:Math.floor(i.zoom)-1},l,h),t.evaluate({zoom:Math.floor(i.zoom)},l,h),t.evaluate({zoom:Math.floor(i.zoom)+1},l,h),i):t.value}_calculate(t,i,l,h){return h.zoom>h.zoomHistory.lastIntegerZoom?{from:t,to:i}:{from:l,to:i}}interpolate(t){return t}}class Yc{constructor(t){this.specification=t}possiblyEvaluate(t,i,l,h){if(t.value!==void 0){if(t.expression.kind==="constant"){let g=t.expression.evaluate(i,null,{},l,h);return this._calculate(g,g,g,i)}return this._calculate(t.expression.evaluate(new Ai(Math.floor(i.zoom-1),i)),t.expression.evaluate(new Ai(Math.floor(i.zoom),i)),t.expression.evaluate(new Ai(Math.floor(i.zoom+1),i)),i)}}_calculate(t,i,l,h){return h.zoom>h.zoomHistory.lastIntegerZoom?{from:t,to:i}:{from:l,to:i}}interpolate(t){return t}}class Xc{constructor(t){this.specification=t}possiblyEvaluate(t,i,l,h){return!!t.expression.evaluate(i,null,{},l,h)}interpolate(){return!1}}class pn{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(let i in t){let l=t[i];l.specification.overridable&&this.overridableProperties.push(i);let h=this.defaultPropertyValues[i]=new Hc(l,void 0,void 0),g=this.defaultTransitionablePropertyValues[i]=new $c(l,void 0);this.defaultTransitioningPropertyValues[i]=g.untransitioned(),this.defaultPossiblyEvaluatedValues[i]=h.possiblyEvaluate({})}}}ut("DataDrivenProperty",xt),ut("DataConstantProperty",ft),ut("CrossFadedDataDrivenProperty",Jl),ut("CrossFadedProperty",Yc),ut("ColorRampProperty",Xc);class Qn extends Xe{constructor(t,i,l){if(super(),this.id=t.id,this.type=t.type,this._globalState=l,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},this._visibilityExpression=(function(h,g){return new Gl(h,g)})(this.visibility,l),t.type!=="custom"&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,t.type!=="background"&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter,this._featureFilter=ht(t.filter,l)),i.layout&&(this._unevaluatedLayout=new Gh(i.layout,l)),i.paint)){this._transitionablePaint=new yd(i.paint,l);for(let h in t.paint)this.setPaintProperty(h,t.paint[h],{validate:!1});for(let h in t.layout)this.setLayoutProperty(h,t.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Kl(i.paint)}}setFilter(t){this.filter=t,this._featureFilter=ht(t,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return t==="visibility"?this.visibility:this._unevaluatedLayout.getValue(t)}getLayoutAffectingGlobalStateRefs(){let t=new Set;for(let i of this._visibilityExpression.getGlobalStateRefs())t.add(i);if(this._unevaluatedLayout)for(let i in this._unevaluatedLayout._values){let l=this._unevaluatedLayout._values[i];for(let h of l.getGlobalStateRefs())t.add(h)}for(let i of this._featureFilter.getGlobalStateRefs())t.add(i);return t}getPaintAffectingGlobalStateRefs(){var t;let i=new globalThis.Map;if(this._transitionablePaint)for(let l in this._transitionablePaint._values){let h=this._transitionablePaint._values[l].value;for(let g of h.getGlobalStateRefs()){let y=(t=i.get(g))!==null&&t!==void 0?t:[];y.push({name:l,value:h.value}),i.set(g,y)}}return i}getVisibilityAffectingGlobalStateRefs(){return this._visibilityExpression.getGlobalStateRefs()}setLayoutProperty(t,i,l={}){if(i==null||!this._validate(em,`layers.${this.id}.layout.${t}`,t,i,l))return t==="visibility"?(this.visibility=i,this._visibilityExpression.setValue(i),void this.recalculateVisibility()):void this._unevaluatedLayout.setValue(t,i)}getPaintProperty(t){return t.endsWith(Xl)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,i,l={}){if(i!=null&&this._validate(Qf,`layers.${this.id}.paint.${t}`,t,i,l))return!1;if(t.endsWith(Xl))return this._transitionablePaint.setTransition(t.slice(0,-11),i||void 0),!1;{let h=this._transitionablePaint._values[t],g=h.property.specification["property-type"]==="cross-faded-data-driven",y=h.value.isDataDriven(),x=h.value;this._transitionablePaint.setValue(t,i),this._handleSpecialPaintPropertyUpdate(t);let S=this._transitionablePaint._values[t].value;return S.isDataDriven()||y||g||this._handleOverridablePaintPropertyUpdate(t,x,S)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,i,l){return!1}isHidden(t=this.minzoom,i=!1){return!!(this.minzoom&&t<(i?Math.floor(this.minzoom):this.minzoom))||!!(this.maxzoom&&t>=this.maxzoom)||this._evaluatedVisibility==="none"}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculateVisibility(){this._evaluatedVisibility=this._visibilityExpression.evaluate()}recalculate(t,i){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,i)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,i)}serialize(){let t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),br(t,((i,l)=>!(i===void 0||l==="layout"&&!Object.keys(i).length||l==="paint"&&!Object.keys(i).length)))}_validate(t,i,l,h,g={}){return(!g||g.validate!==!1)&&cl(this,t.call(Lr,{key:i,layerType:this.type,objectKey:l,value:h,styleSpec:Ce,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(let t in this.paint._values){let i=this.paint.get(t);if(i instanceof ba&&ma(i.property.specification)&&(i.value.kind==="source"||i.value.kind==="composite")&&i.value.isStateDependent)return!0}return!1}}let _d;var Uh={get paint(){return _d=_d||new pn({"raster-opacity":new ft(Ce.paint_raster["raster-opacity"]),"raster-hue-rotate":new ft(Ce.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ft(Ce.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ft(Ce.paint_raster["raster-brightness-max"]),"raster-saturation":new ft(Ce.paint_raster["raster-saturation"]),"raster-contrast":new ft(Ce.paint_raster["raster-contrast"]),"raster-resampling":new ft(Ce.paint_raster["raster-resampling"]),"raster-fade-duration":new ft(Ce.paint_raster["raster-fade-duration"])})}};class rm extends Qn{constructor(t,i){super(t,Uh,i)}}let nm={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ql{constructor(t,i){this._structArray=t,this._pos1=i*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class er{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,i){return t._trim(),i&&(t.isTransferred=!0,i.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){let i=Object.create(this.prototype);return i.arrayBuffer=t.arrayBuffer,i.length=t.length,i.capacity=t.arrayBuffer.byteLength/i.bytesPerElement,i._refreshViews(),i}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);let i=this.uint8;this._refreshViews(),i&&this.uint8.set(i)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function ur(r,t=1){let i=0,l=0;return{members:r.map((h=>{let g=nm[h.type].BYTES_PER_ELEMENT,y=i=Co(i,Math.max(t,g)),x=h.components||1;return l=Math.max(l,g),i+=g*x,{name:h.name,type:h.type,components:x,offset:y}})),size:Co(i,Math.max(l,t)),alignment:t}}function Co(r,t){return Math.ceil(r/t)*t}class ec extends er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,i){let l=this.length;return this.resize(l+1),this.emplace(l,t,i)}emplace(t,i,l){let h=2*t;return this.int16[h+0]=i,this.int16[h+1]=l,t}}ec.prototype.bytesPerElement=4,ut("StructArrayLayout2i4",ec);class Kc extends er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,i,l){let h=this.length;return this.resize(h+1),this.emplace(h,t,i,l)}emplace(t,i,l,h){let g=3*t;return this.int16[g+0]=i,this.int16[g+1]=l,this.int16[g+2]=h,t}}Kc.prototype.bytesPerElement=6,ut("StructArrayLayout3i6",Kc);class vd extends er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,i,l,h){let g=this.length;return this.resize(g+1),this.emplace(g,t,i,l,h)}emplace(t,i,l,h,g){let y=4*t;return this.int16[y+0]=i,this.int16[y+1]=l,this.int16[y+2]=h,this.int16[y+3]=g,t}}vd.prototype.bytesPerElement=8,ut("StructArrayLayout4i8",vd);class Jc extends er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,i,l,h,g,y){let x=this.length;return this.resize(x+1),this.emplace(x,t,i,l,h,g,y)}emplace(t,i,l,h,g,y,x){let S=6*t;return this.int16[S+0]=i,this.int16[S+1]=l,this.int16[S+2]=h,this.int16[S+3]=g,this.int16[S+4]=y,this.int16[S+5]=x,t}}Jc.prototype.bytesPerElement=12,ut("StructArrayLayout2i4i12",Jc);class bd extends er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,i,l,h,g,y){let x=this.length;return this.resize(x+1),this.emplace(x,t,i,l,h,g,y)}emplace(t,i,l,h,g,y,x){let S=4*t,P=8*t;return this.int16[S+0]=i,this.int16[S+1]=l,this.uint8[P+4]=h,this.uint8[P+5]=g,this.uint8[P+6]=y,this.uint8[P+7]=x,t}}bd.prototype.bytesPerElement=8,ut("StructArrayLayout2i4ub8",bd);class tc extends er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,i){let l=this.length;return this.resize(l+1),this.emplace(l,t,i)}emplace(t,i,l){let h=2*t;return this.float32[h+0]=i,this.float32[h+1]=l,t}}tc.prototype.bytesPerElement=8,ut("StructArrayLayout2f8",tc);class ds extends er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,i,l,h,g,y,x,S,P,A){let D=this.length;return this.resize(D+1),this.emplace(D,t,i,l,h,g,y,x,S,P,A)}emplace(t,i,l,h,g,y,x,S,P,A,D){let B=10*t;return this.uint16[B+0]=i,this.uint16[B+1]=l,this.uint16[B+2]=h,this.uint16[B+3]=g,this.uint16[B+4]=y,this.uint16[B+5]=x,this.uint16[B+6]=S,this.uint16[B+7]=P,this.uint16[B+8]=A,this.uint16[B+9]=D,t}}ds.prototype.bytesPerElement=20,ut("StructArrayLayout10ui20",ds);class Qc extends er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,i,l,h,g,y,x,S){let P=this.length;return this.resize(P+1),this.emplace(P,t,i,l,h,g,y,x,S)}emplace(t,i,l,h,g,y,x,S,P){let A=8*t;return this.uint16[A+0]=i,this.uint16[A+1]=l,this.uint16[A+2]=h,this.uint16[A+3]=g,this.uint16[A+4]=y,this.uint16[A+5]=x,this.uint16[A+6]=S,this.uint16[A+7]=P,t}}Qc.prototype.bytesPerElement=16,ut("StructArrayLayout8ui16",Qc);class ic extends er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,i,l,h,g,y,x,S,P,A,D,B){let F=this.length;return this.resize(F+1),this.emplace(F,t,i,l,h,g,y,x,S,P,A,D,B)}emplace(t,i,l,h,g,y,x,S,P,A,D,B,F){let W=12*t;return this.int16[W+0]=i,this.int16[W+1]=l,this.int16[W+2]=h,this.int16[W+3]=g,this.uint16[W+4]=y,this.uint16[W+5]=x,this.uint16[W+6]=S,this.uint16[W+7]=P,this.int16[W+8]=A,this.int16[W+9]=D,this.int16[W+10]=B,this.int16[W+11]=F,t}}ic.prototype.bytesPerElement=24,ut("StructArrayLayout4i4ui4i24",ic);class eu extends er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,i,l){let h=this.length;return this.resize(h+1),this.emplace(h,t,i,l)}emplace(t,i,l,h){let g=3*t;return this.float32[g+0]=i,this.float32[g+1]=l,this.float32[g+2]=h,t}}eu.prototype.bytesPerElement=12,ut("StructArrayLayout3f12",eu);class rc extends er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){let i=this.length;return this.resize(i+1),this.emplace(i,t)}emplace(t,i){return this.uint32[1*t+0]=i,t}}rc.prototype.bytesPerElement=4,ut("StructArrayLayout1ul4",rc);class xd extends er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,i,l,h,g,y,x,S,P){let A=this.length;return this.resize(A+1),this.emplace(A,t,i,l,h,g,y,x,S,P)}emplace(t,i,l,h,g,y,x,S,P,A){let D=10*t,B=5*t;return this.int16[D+0]=i,this.int16[D+1]=l,this.int16[D+2]=h,this.int16[D+3]=g,this.int16[D+4]=y,this.int16[D+5]=x,this.uint32[B+3]=S,this.uint16[D+8]=P,this.uint16[D+9]=A,t}}xd.prototype.bytesPerElement=20,ut("StructArrayLayout6i1ul2ui20",xd);class pl extends er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,i,l,h,g,y){let x=this.length;return this.resize(x+1),this.emplace(x,t,i,l,h,g,y)}emplace(t,i,l,h,g,y,x){let S=6*t;return this.int16[S+0]=i,this.int16[S+1]=l,this.int16[S+2]=h,this.int16[S+3]=g,this.int16[S+4]=y,this.int16[S+5]=x,t}}pl.prototype.bytesPerElement=12,ut("StructArrayLayout2i2i2i12",pl);class ko extends er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,i,l,h,g){let y=this.length;return this.resize(y+1),this.emplace(y,t,i,l,h,g)}emplace(t,i,l,h,g,y){let x=4*t,S=8*t;return this.float32[x+0]=i,this.float32[x+1]=l,this.float32[x+2]=h,this.int16[S+6]=g,this.int16[S+7]=y,t}}ko.prototype.bytesPerElement=16,ut("StructArrayLayout2f1f2i16",ko);class wd extends er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,i,l,h,g,y){let x=this.length;return this.resize(x+1),this.emplace(x,t,i,l,h,g,y)}emplace(t,i,l,h,g,y,x){let S=16*t,P=4*t,A=8*t;return this.uint8[S+0]=i,this.uint8[S+1]=l,this.float32[P+1]=h,this.float32[P+2]=g,this.int16[A+6]=y,this.int16[A+7]=x,t}}wd.prototype.bytesPerElement=16,ut("StructArrayLayout2ub2f2i16",wd);class nc extends er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,i,l){let h=this.length;return this.resize(h+1),this.emplace(h,t,i,l)}emplace(t,i,l,h){let g=3*t;return this.uint16[g+0]=i,this.uint16[g+1]=l,this.uint16[g+2]=h,t}}nc.prototype.bytesPerElement=6,ut("StructArrayLayout3ui6",nc);class Po extends er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,i,l,h,g,y,x,S,P,A,D,B,F,W,U,H,ee){let ce=this.length;return this.resize(ce+1),this.emplace(ce,t,i,l,h,g,y,x,S,P,A,D,B,F,W,U,H,ee)}emplace(t,i,l,h,g,y,x,S,P,A,D,B,F,W,U,H,ee,ce){let te=24*t,ae=12*t,he=48*t;return this.int16[te+0]=i,this.int16[te+1]=l,this.uint16[te+2]=h,this.uint16[te+3]=g,this.uint32[ae+2]=y,this.uint32[ae+3]=x,this.uint32[ae+4]=S,this.uint16[te+10]=P,this.uint16[te+11]=A,this.uint16[te+12]=D,this.float32[ae+7]=B,this.float32[ae+8]=F,this.uint8[he+36]=W,this.uint8[he+37]=U,this.uint8[he+38]=H,this.uint32[ae+10]=ee,this.int16[te+22]=ce,t}}Po.prototype.bytesPerElement=48,ut("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Po);class Sd extends er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,i,l,h,g,y,x,S,P,A,D,B,F,W,U,H,ee,ce,te,ae,he,ge,Ie,Ge,We,Ue,tt,Qe){let He=this.length;return this.resize(He+1),this.emplace(He,t,i,l,h,g,y,x,S,P,A,D,B,F,W,U,H,ee,ce,te,ae,he,ge,Ie,Ge,We,Ue,tt,Qe)}emplace(t,i,l,h,g,y,x,S,P,A,D,B,F,W,U,H,ee,ce,te,ae,he,ge,Ie,Ge,We,Ue,tt,Qe,He){let qe=32*t,it=16*t;return this.int16[qe+0]=i,this.int16[qe+1]=l,this.int16[qe+2]=h,this.int16[qe+3]=g,this.int16[qe+4]=y,this.int16[qe+5]=x,this.int16[qe+6]=S,this.int16[qe+7]=P,this.uint16[qe+8]=A,this.uint16[qe+9]=D,this.uint16[qe+10]=B,this.uint16[qe+11]=F,this.uint16[qe+12]=W,this.uint16[qe+13]=U,this.uint16[qe+14]=H,this.uint16[qe+15]=ee,this.uint16[qe+16]=ce,this.uint16[qe+17]=te,this.uint16[qe+18]=ae,this.uint16[qe+19]=he,this.uint16[qe+20]=ge,this.uint16[qe+21]=Ie,this.uint16[qe+22]=Ge,this.uint32[it+12]=We,this.float32[it+13]=Ue,this.float32[it+14]=tt,this.uint16[qe+30]=Qe,this.uint16[qe+31]=He,t}}Sd.prototype.bytesPerElement=64,ut("StructArrayLayout8i15ui1ul2f2ui64",Sd);class tu extends er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){let i=this.length;return this.resize(i+1),this.emplace(i,t)}emplace(t,i){return this.float32[1*t+0]=i,t}}tu.prototype.bytesPerElement=4,ut("StructArrayLayout1f4",tu);class iu extends er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,i,l){let h=this.length;return this.resize(h+1),this.emplace(h,t,i,l)}emplace(t,i,l,h){let g=3*t;return this.uint16[6*t+0]=i,this.float32[g+1]=l,this.float32[g+2]=h,t}}iu.prototype.bytesPerElement=12,ut("StructArrayLayout1ui2f12",iu);class Td extends er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,i,l){let h=this.length;return this.resize(h+1),this.emplace(h,t,i,l)}emplace(t,i,l,h){let g=4*t;return this.uint32[2*t+0]=i,this.uint16[g+2]=l,this.uint16[g+3]=h,t}}Td.prototype.bytesPerElement=8,ut("StructArrayLayout1ul2ui8",Td);class _ extends er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,i){let l=this.length;return this.resize(l+1),this.emplace(l,t,i)}emplace(t,i,l){let h=2*t;return this.uint16[h+0]=i,this.uint16[h+1]=l,t}}_.prototype.bytesPerElement=4,ut("StructArrayLayout2ui4",_);class e extends er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){let i=this.length;return this.resize(i+1),this.emplace(i,t)}emplace(t,i){return this.uint16[1*t+0]=i,t}}e.prototype.bytesPerElement=2,ut("StructArrayLayout1ui2",e);class n extends er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,i,l,h){let g=this.length;return this.resize(g+1),this.emplace(g,t,i,l,h)}emplace(t,i,l,h,g){let y=4*t;return this.float32[y+0]=i,this.float32[y+1]=l,this.float32[y+2]=h,this.float32[y+3]=g,t}}n.prototype.bytesPerElement=16,ut("StructArrayLayout4f16",n);class u extends Ql{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new T(this.anchorPointX,this.anchorPointY)}}u.prototype.size=20;class m extends xd{get(t){return new u(this,t)}}ut("CollisionBoxArray",m);class b extends Ql{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}b.prototype.size=48;class w extends Po{get(t){return new b(this,t)}}ut("PlacedSymbolArray",w);class k extends Ql{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}k.prototype.size=64;class E extends Sd{get(t){return new k(this,t)}}ut("SymbolInstanceArray",E);class z extends tu{getoffsetX(t){return this.float32[1*t+0]}}ut("GlyphOffsetArray",z);class O extends Kc{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}ut("SymbolLineVertexArray",O);class N extends Ql{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}N.prototype.size=12;class j extends iu{get(t){return new N(this,t)}}ut("TextAnchorOffsetArray",j);class Z extends Ql{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Z.prototype.size=8;class J extends Td{get(t){return new Z(this,t)}}ut("FeatureIndexArray",J);class se extends ec{}class le extends ec{}class oe extends ec{}class de extends Jc{}class ye extends bd{}class ue extends tc{}class me extends ds{}class be extends Qc{}class fe extends ic{}class Te extends eu{}class Fe extends rc{}class Oe extends pl{}class Re extends wd{}class Be extends nc{}class Je extends _{}let et=ur([{name:"a_pos",components:2,type:"Int16"}],4),{members:$e}=et;class ot{constructor(t=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=t}prepareSegment(t,i,l,h){let g=this.segments[this.segments.length-1];return t>ot.MAX_VERTEX_ARRAY_LENGTH&&fr(`Max vertices per segment is ${ot.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${ot.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!g||g.vertexLength+t>ot.MAX_VERTEX_ARRAY_LENGTH||g.sortKey!==h?this.createNewSegment(i,l,h):g}createNewSegment(t,i,l){let h={vertexOffset:t.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0,vaos:{}};return l!==void 0&&(h.sortKey=l),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(h),h}getOrCreateLatestSegment(t,i,l){return this.prepareSegment(0,t,i,l)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(let t of this.segments)for(let i in t.vaos)t.vaos[i].destroy()}static simpleSegment(t,i,l,h){return new ot([{vertexOffset:t,primitiveOffset:i,vertexLength:l,primitiveLength:h,vaos:{},sortKey:0}])}}function Rt(r,t){return 256*(r=gt(Math.floor(r),0,255))+gt(Math.floor(t),0,255)}ot.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ut("SegmentVector",ot);let bi=ur([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),ji=ur([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var Li,Zi,Di,sr={exports:{}},Hi={exports:{}},Dr={exports:{}},_r=(function(){if(Di)return sr.exports;Di=1;var r=(Li||(Li=1,Hi.exports=function(i,l){var h,g,y,x,S,P,A,D;for(g=i.length-(h=3&i.length),y=l,S=3432918353,P=461845907,D=0;D<g;)A=255&i.charCodeAt(D)|(255&i.charCodeAt(++D))<<8|(255&i.charCodeAt(++D))<<16|(255&i.charCodeAt(++D))<<24,++D,y=27492+(65535&(x=5*(65535&(y=(y^=A=(65535&(A=(A=(65535&A)*S+(((A>>>16)*S&65535)<<16)&4294967295)<<15|A>>>17))*P+(((A>>>16)*P&65535)<<16)&4294967295)<<13|y>>>19))+((5*(y>>>16)&65535)<<16)&4294967295))+((58964+(x>>>16)&65535)<<16);switch(A=0,h){case 3:A^=(255&i.charCodeAt(D+2))<<16;case 2:A^=(255&i.charCodeAt(D+1))<<8;case 1:y^=A=(65535&(A=(A=(65535&(A^=255&i.charCodeAt(D)))*S+(((A>>>16)*S&65535)<<16)&4294967295)<<15|A>>>17))*P+(((A>>>16)*P&65535)<<16)&4294967295}return y^=i.length,y=2246822507*(65535&(y^=y>>>16))+((2246822507*(y>>>16)&65535)<<16)&4294967295,y=3266489909*(65535&(y^=y>>>13))+((3266489909*(y>>>16)&65535)<<16)&4294967295,(y^=y>>>16)>>>0}),Hi.exports),t=(Zi||(Zi=1,Dr.exports=function(i,l){for(var h,g=i.length,y=l^g,x=0;g>=4;)h=1540483477*(65535&(h=255&i.charCodeAt(x)|(255&i.charCodeAt(++x))<<8|(255&i.charCodeAt(++x))<<16|(255&i.charCodeAt(++x))<<24))+((1540483477*(h>>>16)&65535)<<16),y=1540483477*(65535&y)+((1540483477*(y>>>16)&65535)<<16)^(h=1540483477*(65535&(h^=h>>>24))+((1540483477*(h>>>16)&65535)<<16)),g-=4,++x;switch(g){case 3:y^=(255&i.charCodeAt(x+2))<<16;case 2:y^=(255&i.charCodeAt(x+1))<<8;case 1:y=1540483477*(65535&(y^=255&i.charCodeAt(x)))+((1540483477*(y>>>16)&65535)<<16)}return y=1540483477*(65535&(y^=y>>>13))+((1540483477*(y>>>16)&65535)<<16),(y^=y>>>15)>>>0}),Dr.exports);return sr.exports=r,sr.exports.murmur3=r,sr.exports.murmur2=t,sr.exports})(),dr=M(_r);class Hr{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,i,l,h){this.ids.push(Ks(t)),this.positions.push(i,l,h)}getPositions(t){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");let i=Ks(t),l=0,h=this.ids.length-1;for(;l<h;){let y=l+h>>1;this.ids[y]>=i?h=y:l=y+1}let g=[];for(;this.ids[l]===i;)g.push({index:this.positions[3*l],start:this.positions[3*l+1],end:this.positions[3*l+2]}),l++;return g}static serialize(t,i){let l=new Float64Array(t.ids),h=new Uint32Array(t.positions);return hs(l,h,0,l.length-1),i&&i.push(l.buffer,h.buffer),{ids:l,positions:h}}static deserialize(t){let i=new Hr;return i.ids=t.ids,i.positions=t.positions,i.indexed=!0,i}}function Ks(r){let t=+r;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:dr(String(r))}function hs(r,t,i,l){for(;i<l;){let h=r[i+l>>1],g=i-1,y=l+1;for(;;){do g++;while(r[g]<h);do y--;while(r[y]>h);if(g>=y)break;qa(r,g,y),qa(t,3*g,3*y),qa(t,3*g+1,3*y+1),qa(t,3*g+2,3*y+2)}y-i<l-y?(hs(r,t,i,y),i=y+1):(hs(r,t,y+1,l),l=y)}}function qa(r,t,i){let l=r[t];r[t]=r[i],r[i]=l}ut("FeaturePositionMap",Hr);class Sn{constructor(t,i){this.gl=t.gl,this.location=i}}class Eo extends Sn{constructor(t,i){super(t,i),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class ac extends Sn{constructor(t,i){super(t,i),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class Ao extends Sn{constructor(t,i){super(t,i),this.current=Nt.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}let ea=new Float32Array(16);function Va(r){return[Rt(255*r.r,255*r.g),Rt(255*r.b,255*r.a)]}class xa{constructor(t,i,l){this.value=t,this.uniformNames=i.map((h=>`u_${h}`)),this.type=l}setUniform(t,i,l){t.set(l.constantOr(this.value))}getBinding(t,i,l){return this.type==="color"?new Ao(t,i):new Eo(t,i)}}class wa{constructor(t,i){this.uniformNames=i.map((l=>`u_${l}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,i){this.pixelRatioFrom=i.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=i.tlbr,this.patternTo=t.tlbr}setConstantDashPositions(t,i){this.dashTo=[0,t.y,t.height,t.width],this.dashFrom=[0,i.y,i.height,i.width]}setUniform(t,i,l,h){let g=null;h==="u_pattern_to"?g=this.patternTo:h==="u_pattern_from"?g=this.patternFrom:h==="u_dasharray_to"?g=this.dashTo:h==="u_dasharray_from"?g=this.dashFrom:h==="u_pixel_ratio_to"?g=this.pixelRatioTo:h==="u_pixel_ratio_from"&&(g=this.pixelRatioFrom),g!==null&&t.set(g)}getBinding(t,i,l){return l.substr(0,9)==="u_pattern"||l.substr(0,12)==="u_dasharray_"?new ac(t,i):new Eo(t,i)}}class Ri{constructor(t,i,l,h){this.expression=t,this.type=l,this.maxValue=0,this.paintVertexAttributes=i.map((g=>({name:`a_${g}`,type:"Float32",components:l==="color"?2:1,offset:0}))),this.paintVertexArray=new h}populatePaintArray(t,i,l){let h=this.paintVertexArray.length,g=this.expression.evaluate(new Ai(0,l),i,{},l.canonical,[],l.formattedSection);this.paintVertexArray.resize(t),this._setPaintValue(h,t,g)}updatePaintArray(t,i,l,h,g){let y=this.expression.evaluate(new Ai(0,g),l,h);this._setPaintValue(t,i,y)}_setPaintValue(t,i,l){if(this.type==="color"){let h=Va(l);for(let g=t;g<i;g++)this.paintVertexArray.emplace(g,h[0],h[1])}else{for(let h=t;h<i;h++)this.paintVertexArray.emplace(h,l);this.maxValue=Math.max(this.maxValue,Math.abs(l))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Oi{constructor(t,i,l,h,g,y){this.expression=t,this.uniformNames=i.map((x=>`u_${x}_t`)),this.type=l,this.useIntegerZoom=h,this.zoom=g,this.maxValue=0,this.paintVertexAttributes=i.map((x=>({name:`a_${x}`,type:"Float32",components:l==="color"?4:2,offset:0}))),this.paintVertexArray=new y}populatePaintArray(t,i,l){let h=this.expression.evaluate(new Ai(this.zoom,l),i,{},l.canonical,[],l.formattedSection),g=this.expression.evaluate(new Ai(this.zoom+1,l),i,{},l.canonical,[],l.formattedSection),y=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(y,t,h,g)}updatePaintArray(t,i,l,h,g){let y=this.expression.evaluate(new Ai(this.zoom,g),l,h),x=this.expression.evaluate(new Ai(this.zoom+1,g),l,h);this._setPaintValue(t,i,y,x)}_setPaintValue(t,i,l,h){if(this.type==="color"){let g=Va(l),y=Va(h);for(let x=t;x<i;x++)this.paintVertexArray.emplace(x,g[0],g[1],y[0],y[1])}else{for(let g=t;g<i;g++)this.paintVertexArray.emplace(g,l,h);this.maxValue=Math.max(this.maxValue,Math.abs(l),Math.abs(h))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,i){let l=this.useIntegerZoom?Math.floor(i.zoom):i.zoom,h=gt(this.expression.interpolationFactor(l,this.zoom,this.zoom+1),0,1);t.set(h)}getBinding(t,i,l){return new Eo(t,i)}}class Pr{constructor(t,i,l,h,g,y){this.expression=t,this.type=i,this.useIntegerZoom=l,this.zoom=h,this.layerId=y,this.zoomInPaintVertexArray=new g,this.zoomOutPaintVertexArray=new g}populatePaintArray(t,i,l){let h=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(h,t,this.getPositionIds(i),l)}updatePaintArray(t,i,l,h,g){this._setPaintValues(t,i,this.getPositionIds(l),g)}_setPaintValues(t,i,l,h){let g=this.getPositions(h);if(!g||!l)return;let y=g[l.min],x=g[l.mid],S=g[l.max];if(y&&x&&S)for(let P=t;P<i;P++)this.emplace(this.zoomInPaintVertexArray,P,x,y),this.emplace(this.zoomOutPaintVertexArray,P,x,S)}upload(t){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){let i=this.getVertexAttributes();this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,i,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,i,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Er extends Pr{getPositions(t){return t.imagePositions}getPositionIds(t){return t.patterns&&t.patterns[this.layerId]}getVertexAttributes(){return bi.members}emplace(t,i,l,h){t.emplace(i,l.tlbr[0],l.tlbr[1],l.tlbr[2],l.tlbr[3],h.tlbr[0],h.tlbr[1],h.tlbr[2],h.tlbr[3],l.pixelRatio,h.pixelRatio)}}class Zh extends Pr{getPositions(t){return t.dashPositions}getPositionIds(t){return t.dashes&&t.dashes[this.layerId]}getVertexAttributes(){return ji.members}emplace(t,i,l,h){t.emplace(i,0,l.y,l.height,l.width,0,h.y,h.height,h.width)}}class Hh{constructor(t,i,l){this.binders={},this._buffers=[];let h=[];for(let g in t.paint._values){if(!l(g))continue;let y=t.paint.get(g);if(!(y instanceof ba&&ma(y.property.specification)))continue;let x=am(g,t.type),S=y.value,P=y.property.specification.type,A=y.property.useIntegerZoom,D=y.property.specification["property-type"],B=D==="cross-faded"||D==="cross-faded-data-driven";if(S.kind==="constant")this.binders[g]=B?new wa(S.value,x):new xa(S.value,x,P),h.push(`/u_${g}`);else if(S.kind==="source"||B){let F=$h(g,P,"source");this.binders[g]=B?g==="line-dasharray"?new Zh(S,P,A,i,F,t.id):new Er(S,P,A,i,F,t.id):new Ri(S,x,P,F),h.push(`/a_${g}`)}else{let F=$h(g,P,"composite");this.binders[g]=new Oi(S,x,P,A,i,F),h.push(`/z_${g}`)}}this.cacheKey=h.sort().join("")}getMaxValue(t){let i=this.binders[t];return i instanceof Ri||i instanceof Oi?i.maxValue:0}populatePaintArrays(t,i,l){for(let h in this.binders){let g=this.binders[h];(g instanceof Ri||g instanceof Oi||g instanceof Pr)&&g.populatePaintArray(t,i,l)}}setConstantPatternPositions(t,i){for(let l in this.binders){let h=this.binders[l];h instanceof wa&&h.setConstantPatternPositions(t,i)}}setConstantDashPositions(t,i){for(let l in this.binders){let h=this.binders[l];h instanceof wa&&h.setConstantDashPositions(t,i)}}updatePaintArrays(t,i,l,h,g){let y=!1;for(let x in t){let S=i.getPositions(x);for(let P of S){let A=l.feature(P.index);for(let D in this.binders){let B=this.binders[D];if((B instanceof Ri||B instanceof Oi||B instanceof Pr)&&B.expression.isStateDependent===!0){let F=h.paint.get(D);B.expression=F.value,B.updatePaintArray(P.start,P.end,A,t[x],g),y=!0}}}}return y}defines(){let t=[];for(let i in this.binders){let l=this.binders[i];(l instanceof xa||l instanceof wa)&&t.push(...l.uniformNames.map((h=>`#define HAS_UNIFORM_${h}`)))}return t}getBinderAttributes(){let t=[];for(let i in this.binders){let l=this.binders[i];if(l instanceof Ri||l instanceof Oi)for(let h=0;h<l.paintVertexAttributes.length;h++)t.push(l.paintVertexAttributes[h].name);else if(l instanceof Pr){let h=l.getVertexAttributes();for(let g of h)t.push(g.name)}}return t}getBinderUniforms(){let t=[];for(let i in this.binders){let l=this.binders[i];if(l instanceof xa||l instanceof wa||l instanceof Oi)for(let h of l.uniformNames)t.push(h)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,i){let l=[];for(let h in this.binders){let g=this.binders[h];if(g instanceof xa||g instanceof wa||g instanceof Oi){for(let y of g.uniformNames)if(i[y]){let x=g.getBinding(t,i[y],y);l.push({name:y,property:h,binding:x})}}}return l}setUniforms(t,i,l,h){for(let{name:g,property:y,binding:x}of i)this.binders[y].setUniform(x,h,l.get(y),g)}updatePaintBuffers(t){this._buffers=[];for(let i in this.binders){let l=this.binders[i];if(t&&l instanceof Pr){let h=t.fromScale===2?l.zoomInPaintVertexBuffer:l.zoomOutPaintVertexBuffer;h&&this._buffers.push(h)}else(l instanceof Ri||l instanceof Oi)&&l.paintVertexBuffer&&this._buffers.push(l.paintVertexBuffer)}}upload(t){for(let i in this.binders){let l=this.binders[i];(l instanceof Ri||l instanceof Oi||l instanceof Pr)&&l.upload(t)}this.updatePaintBuffers()}destroy(){for(let t in this.binders){let i=this.binders[t];(i instanceof Ri||i instanceof Oi||i instanceof Pr)&&i.destroy()}}}class Mo{constructor(t,i,l=()=>!0){this.programConfigurations={};for(let h of t)this.programConfigurations[h.id]=new Hh(h,i,l);this.needsUpload=!1,this._featureMap=new Hr,this._bufferOffset=0}populatePaintArrays(t,i,l,h){for(let g in this.programConfigurations)this.programConfigurations[g].populatePaintArrays(t,i,h);i.id!==void 0&&this._featureMap.add(i.id,l,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,i,l,h){for(let g of l)this.needsUpload=this.programConfigurations[g.id].updatePaintArrays(t,this._featureMap,i,g,h)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(let i in this.programConfigurations)this.programConfigurations[i].upload(t);this.needsUpload=!1}}destroy(){for(let t in this.programConfigurations)this.programConfigurations[t].destroy()}}function am(r,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[r]||[r.replace(`${t}-`,"").replace(/-/g,"_")]}function $h(r,t,i){let l={color:{source:tc,composite:n},number:{source:tu,composite:tc}},h=(function(g){return{"line-pattern":{source:me,composite:me},"fill-pattern":{source:me,composite:me},"fill-extrusion-pattern":{source:me,composite:me},"line-dasharray":{source:be,composite:be}}[g]})(r);return h&&h[i]||l[t][i]}ut("ConstantBinder",xa),ut("CrossFadedConstantBinder",wa),ut("SourceExpressionBinder",Ri),ut("CrossFadedPatternBinder",Er),ut("CrossFadedDasharrayBinder",Zh),ut("CompositeExpressionBinder",Oi),ut("ProgramConfiguration",Hh,{omit:["_buffers"]}),ut("ProgramConfigurationSet",Mo);let Cd=Math.pow(2,14)-1,Js=-Cd-1;function Qs(r){let t=qt/r.extent,i=r.loadGeometry();for(let l=0;l<i.length;l++){let h=i[l];for(let g=0;g<h.length;g++){let y=h[g],x=Math.round(y.x*t),S=Math.round(y.y*t);y.x=gt(x,Js,Cd),y.y=gt(S,Js,Cd),(x<y.x||x>y.x+1||S<y.y||S>y.y+1)&&fr("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return i}function eo(r,t){return{type:r.type,id:r.id,properties:r.properties,geometry:t?Qs(r):[]}}let kd=-32768;function Pd(r,t,i,l,h){r.emplaceBack(kd+8*t+l,kd+8*i+h)}class ru{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((i=>i.id)),this.index=t.index,this.hasDependencies=!1,this.layoutVertexArray=new le,this.indexArray=new Be,this.segments=new ot,this.programConfigurations=new Mo(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((i=>i.isStateDependent())).map((i=>i.id))}populate(t,i,l){let h=this.layers[0],g=[],y=null,x=!1,S=h.type==="heatmap";if(h.type==="circle"){let A=h;y=A.layout.get("circle-sort-key"),x=!y.isConstant(),S=S||A.paint.get("circle-pitch-alignment")==="map"}let P=S?i.subdivisionGranularity.circle:1;for(let{feature:A,id:D,index:B,sourceLayerIndex:F}of t){let W=this.layers[0]._featureFilter.needGeometry,U=eo(A,W);if(!this.layers[0]._featureFilter.filter(new Ai(this.zoom),U,l))continue;let H=x?y.evaluate(U,{},l):void 0,ee={id:D,properties:A.properties,type:A.type,sourceLayerIndex:F,index:B,geometry:W?U.geometry:Qs(A),patterns:{},sortKey:H};g.push(ee)}x&&g.sort(((A,D)=>A.sortKey-D.sortKey));for(let A of g){let{geometry:D,index:B,sourceLayerIndex:F}=A,W=t[B].feature;this.addFeature(A,D,B,l,P),i.featureIndex.insert(W,D,B,F,this.index)}}update(t,i,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,i,this.stateDependentLayers,{imagePositions:l})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,$e),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,i,l,h,g=1){let y;switch(g){case 1:y=[0,7];break;case 3:y=[0,2,5,7];break;case 5:y=[0,1,3,4,6,7];break;case 7:y=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${g}; valid values are 1, 3, 5, 7.`)}let x=y.length;for(let S of i)for(let P of S){let A=P.x,D=P.y;if(A<0||A>=qt||D<0||D>=qt)continue;let B=this.segments.prepareSegment(x*x,this.layoutVertexArray,this.indexArray,t.sortKey),F=B.vertexLength;for(let W=0;W<x;W++)for(let U=0;U<x;U++)Pd(this.layoutVertexArray,A,D,y[U],y[W]);for(let W=0;W<x-1;W++)for(let U=0;U<x-1;U++){let H=F+W*x+U,ee=F+(W+1)*x+U;this.indexArray.emplaceBack(H,ee+1,H+1),this.indexArray.emplaceBack(H,ee,ee+1)}B.vertexLength+=x*x,B.primitiveLength+=(x-1)*(x-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,l,{imagePositions:{},canonical:h})}}function nu(r,t){for(let i=0;i<r.length;i++)if(au(t,r[i]))return!0;for(let i=0;i<t.length;i++)if(au(r,t[i]))return!0;return!!sm(r,t)}function Yh(r,t,i){return!!au(r,t)||!!om(t,r,i)}function G_(r,t){if(r.length===1)return Z_(t,r[0]);for(let i=0;i<t.length;i++){let l=t[i];for(let h=0;h<l.length;h++)if(au(r,l[h]))return!0}for(let i=0;i<r.length;i++)if(Z_(t,r[i]))return!0;for(let i=0;i<t.length;i++)if(sm(r,t[i]))return!0;return!1}function FE(r,t,i){if(r.length>1){if(sm(r,t))return!0;for(let l=0;l<t.length;l++)if(om(t[l],r,i))return!0}for(let l=0;l<r.length;l++)if(om(r[l],t,i))return!0;return!1}function sm(r,t){if(r.length===0||t.length===0)return!1;for(let i=0;i<r.length-1;i++){let l=r[i],h=r[i+1];for(let g=0;g<t.length-1;g++)if(jE(l,h,t[g],t[g+1]))return!0}return!1}function jE(r,t,i,l){return xr(r,i,l)!==xr(t,i,l)&&xr(r,t,i)!==xr(r,t,l)}function om(r,t,i){let l=i*i;if(t.length===1)return r.distSqr(t[0])<l;for(let h=1;h<t.length;h++)if(U_(r,t[h-1],t[h])<l)return!0;return!1}function U_(r,t,i){let l=t.distSqr(i);if(l===0)return r.distSqr(t);let h=((r.x-t.x)*(i.x-t.x)+(r.y-t.y)*(i.y-t.y))/l;return r.distSqr(h<0?t:h>1?i:i.sub(t)._mult(h)._add(t))}function Z_(r,t){let i,l,h,g=!1;for(let y=0;y<r.length;y++){i=r[y];for(let x=0,S=i.length-1;x<i.length;S=x++)l=i[x],h=i[S],l.y>t.y!=h.y>t.y&&t.x<(h.x-l.x)*(t.y-l.y)/(h.y-l.y)+l.x&&(g=!g)}return g}function au(r,t){let i=!1;for(let l=0,h=r.length-1;l<r.length;h=l++){let g=r[l],y=r[h];g.y>t.y!=y.y>t.y&&t.x<(y.x-g.x)*(t.y-g.y)/(y.y-g.y)+g.x&&(i=!i)}return i}function NE(r,t,i){let l=i[0],h=i[2];if(r.x<l.x&&t.x<l.x||r.x>h.x&&t.x>h.x||r.y<l.y&&t.y<l.y||r.y>h.y&&t.y>h.y)return!1;let g=xr(r,t,i[0]);return g!==xr(r,t,i[1])||g!==xr(r,t,i[2])||g!==xr(r,t,i[3])}function su(r,t,i){let l=t.paint.get(r).value;return l.kind==="constant"?l.value:i.programConfigurations.get(t.id).getMaxValue(r)}function Xh(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function Kh(r,t,i,l,h){if(!t[0]&&!t[1])return r;let g=T.convert(t)._mult(h);i==="viewport"&&g._rotate(-l);let y=[];for(let x=0;x<r.length;x++)y.push(r[x].sub(g));return y}function qE(r){let t=[];for(let i=0;i<r.length;i++){let l=r[i],h=t.at(-1);(i===0||h&&!l.equals(h))&&t.push(l)}return t}function VE({queryGeometry:r,size:t},i){return Yh(r,i,t)}function WE({queryGeometry:r,size:t,transform:i,unwrappedTileID:l,getElevation:h},g){return Yh(r,g,t*(i.projectTileCoordinates(g.x,g.y,l,h).signedDistanceFromCamera/i.cameraToCenterDistance))}function GE({queryGeometry:r,size:t,transform:i,unwrappedTileID:l,getElevation:h},g){let y=i.projectTileCoordinates(g.x,g.y,l,h).signedDistanceFromCamera,x=t*(i.cameraToCenterDistance/y);return Yh(r,lm(g,i,l,h),x)}function UE({queryGeometry:r,size:t,transform:i,unwrappedTileID:l,getElevation:h},g){return Yh(r,lm(g,i,l,h),t)}function H_({queryGeometry:r,size:t,transform:i,unwrappedTileID:l,getElevation:h,pitchAlignment:g="map",pitchScale:y="map"},x){let S=g==="map"?y==="map"?VE:WE:y==="map"?GE:UE,P={queryGeometry:r,size:t,transform:i,unwrappedTileID:l,getElevation:h};for(let A of x)for(let D of A)if(S(P,D))return!0;return!1}function lm(r,t,i,l){let h=t.projectTileCoordinates(r.x,r.y,i,l).point;return new T((.5*h.x+.5)*t.width,(.5*-h.y+.5)*t.height)}let $_,Y_;ut("CircleBucket",ru,{omit:["layers"]});var ZE={get paint(){return Y_=Y_||new pn({"circle-radius":new xt(Ce.paint_circle["circle-radius"]),"circle-color":new xt(Ce.paint_circle["circle-color"]),"circle-blur":new xt(Ce.paint_circle["circle-blur"]),"circle-opacity":new xt(Ce.paint_circle["circle-opacity"]),"circle-translate":new ft(Ce.paint_circle["circle-translate"]),"circle-translate-anchor":new ft(Ce.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ft(Ce.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ft(Ce.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new xt(Ce.paint_circle["circle-stroke-width"]),"circle-stroke-color":new xt(Ce.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new xt(Ce.paint_circle["circle-stroke-opacity"])})},get layout(){return $_=$_||new pn({"circle-sort-key":new xt(Ce.layout_circle["circle-sort-key"])})}};class HE extends Qn{constructor(t,i){super(t,ZE,i)}createBucket(t){return new ru(t)}queryRadius(t){let i=t;return su("circle-radius",this,i)+su("circle-stroke-width",this,i)+Xh(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:t,feature:i,featureState:l,geometry:h,transform:g,pixelsToTileUnits:y,unwrappedTileID:x,getElevation:S}){let P=Kh(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-g.bearingInRadians,y),A=this.paint.get("circle-radius").evaluate(i,l)+this.paint.get("circle-stroke-width").evaluate(i,l),D=this.paint.get("circle-pitch-scale"),B=this.paint.get("circle-pitch-alignment"),F,W;return B==="map"?(F=P,W=A*y):(F=(function(U,H,ee,ce){return U.map((te=>lm(te,H,ee,ce)))})(P,g,x,S),W=A),H_({queryGeometry:F,size:W,transform:g,unwrappedTileID:x,getElevation:S,pitchAlignment:B,pitchScale:D},h)}}class X_ extends ru{}let K_;ut("HeatmapBucket",X_,{omit:["layers"]});var $E={get paint(){return K_=K_||new pn({"heatmap-radius":new xt(Ce.paint_heatmap["heatmap-radius"]),"heatmap-weight":new xt(Ce.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ft(Ce.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Xc(Ce.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ft(Ce.paint_heatmap["heatmap-opacity"])})}};function cm(r,{width:t,height:i},l,h){if(h){if(h instanceof Uint8ClampedArray)h=new Uint8Array(h.buffer);else if(h.length!==t*i*l)throw new RangeError(`mismatched image size. expected: ${h.length} but got: ${t*i*l}`)}else h=new Uint8Array(t*i*l);return r.width=t,r.height=i,r.data=h,r}function J_(r,{width:t,height:i},l){if(t===r.width&&i===r.height)return;let h=cm({},{width:t,height:i},l);um(r,h,{x:0,y:0},{x:0,y:0},{width:Math.min(r.width,t),height:Math.min(r.height,i)},l),r.width=t,r.height=i,r.data=h.data}function um(r,t,i,l,h,g){if(h.width===0||h.height===0)return t;if(h.width>r.width||h.height>r.height||i.x>r.width-h.width||i.y>r.height-h.height)throw new RangeError("out of range source coordinates for image copy");if(h.width>t.width||h.height>t.height||l.x>t.width-h.width||l.y>t.height-h.height)throw new RangeError("out of range destination coordinates for image copy");let y=r.data,x=t.data;if(y===x)throw new Error("srcData equals dstData, so image is already copied");for(let S=0;S<h.height;S++){let P=((i.y+S)*r.width+i.x)*g,A=((l.y+S)*t.width+l.x)*g;for(let D=0;D<h.width*g;D++)x[A+D]=y[P+D]}return t}class Ed{constructor(t,i){cm(this,t,1,i)}resize(t){J_(this,t,1)}clone(){return new Ed({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,i,l,h,g){um(t,i,l,h,g,1)}}class Bn{constructor(t,i){cm(this,t,4,i)}resize(t){J_(this,t,4)}replace(t,i){i?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new Bn({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,i,l,h,g){um(t,i,l,h,g,4)}setPixel(t,i,l){let h=4*(t*this.width+i);this.data[h+0]=Math.round(255*l.r/l.a),this.data[h+1]=Math.round(255*l.g/l.a),this.data[h+2]=Math.round(255*l.b/l.a),this.data[h+3]=Math.round(255*l.a)}}function Q_(r){let t={},i=r.resolution||256,l=r.clips?r.clips.length:1,h=r.image||new Bn({width:i,height:l});if(Math.log(i)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${i}`);let g=(y,x,S)=>{t[r.evaluationKey]=S;let P=r.expression.evaluate(t);h.setPixel(y/4/i,x/4,P)};if(r.clips)for(let y=0,x=0;y<l;++y,x+=4*i)for(let S=0,P=0;S<i;S++,P+=4){let A=S/(i-1),{start:D,end:B}=r.clips[y];g(x,P,D*(1-A)+B*A)}else for(let y=0,x=0;y<i;y++,x+=4)g(0,x,y/(i-1));return h}ut("AlphaImage",Ed),ut("RGBAImage",Bn);let dm="big-fb";class YE extends Qn{createBucket(t){return new X_(t)}constructor(t,i){super(t,$E,i),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){t==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Q_({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(dm)&&this.heatmapFbos.delete(dm)}queryRadius(t){return su("heatmap-radius",this,t)}queryIntersectsFeature({queryGeometry:t,feature:i,featureState:l,geometry:h,transform:g,pixelsToTileUnits:y,unwrappedTileID:x,getElevation:S}){return H_({queryGeometry:t,size:this.paint.get("heatmap-radius").evaluate(i,l)*y,transform:g,unwrappedTileID:x,getElevation:S},h)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&!this.isHidden()}}let ev;var XE={get paint(){return ev=ev||new pn({"hillshade-illumination-direction":new ft(Ce.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new ft(Ce.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new ft(Ce.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ft(Ce.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ft(Ce.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ft(Ce.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ft(Ce.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new ft(Ce.paint_hillshade["hillshade-method"])})}};class KE extends Qn{constructor(t,i){super(t,XE,i),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let t=this.paint.get("hillshade-illumination-direction").values,i=this.paint.get("hillshade-illumination-altitude").values,l=this.paint.get("hillshade-highlight-color").values,h=this.paint.get("hillshade-shadow-color").values,g=Math.max(t.length,i.length,l.length,h.length);t=t.concat(Array(g-t.length).fill(t.at(-1))),i=i.concat(Array(g-i.length).fill(i.at(-1))),l=l.concat(Array(g-l.length).fill(l.at(-1))),h=h.concat(Array(g-h.length).fill(h.at(-1)));let y=i.map(ws);return{directionRadians:t.map(ws),altitudeRadians:y,shadowColor:h,highlightColor:l}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&!this.isHidden()}}let tv;var JE={get paint(){return tv=tv||new pn({"color-relief-opacity":new ft(Ce["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new Xc(Ce["paint_color-relief"]["color-relief-color"])})}};class hm{constructor(t,i,l,h){this.context=t,this.format=l,this.texture=t.gl.createTexture(),this.update(i,h)}update(t,i,l){let{width:h,height:g}=t,y=!(this.size&&this.size[0]===h&&this.size[1]===g||l),{context:x}=this,{gl:S}=x;if(this.useMipmap=!!(i&&i.useMipmap),S.bindTexture(S.TEXTURE_2D,this.texture),x.pixelStoreUnpackFlipY.set(!1),x.pixelStoreUnpack.set(1),x.pixelStoreUnpackPremultiplyAlpha.set(this.format===S.RGBA&&(!i||i.premultiply!==!1)),y)this.size=[h,g],t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||_n(t)?S.texImage2D(S.TEXTURE_2D,0,this.format,this.format,S.UNSIGNED_BYTE,t):S.texImage2D(S.TEXTURE_2D,0,this.format,h,g,0,this.format,S.UNSIGNED_BYTE,t.data);else{let{x:P,y:A}=l||{x:0,y:0};t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||_n(t)?S.texSubImage2D(S.TEXTURE_2D,0,P,A,S.RGBA,S.UNSIGNED_BYTE,t):S.texSubImage2D(S.TEXTURE_2D,0,P,A,h,g,S.RGBA,S.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&S.generateMipmap(S.TEXTURE_2D),x.pixelStoreUnpackFlipY.setDefault(),x.pixelStoreUnpack.setDefault(),x.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(t,i,l){let{context:h}=this,{gl:g}=h;g.bindTexture(g.TEXTURE_2D,this.texture),l!==g.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(l=g.LINEAR),t!==this.filter&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,t),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,l||t),this.filter=t),i!==this.wrap&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,i),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,i),this.wrap=i)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){let{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}class iv{constructor(t,i,l,h=1,g=1,y=1,x=0){if(this.uid=t,i.height!==i.width)throw new RangeError("DEM tiles must be square");if(l&&!["mapbox","terrarium","custom"].includes(l))return void fr(`"${l}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=i.height;let S=this.dim=i.height-2;switch(this.data=new Uint32Array(i.data.buffer),l){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=h,this.greenFactor=g,this.blueFactor=y,this.baseShift=x;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let P=0;P<S;P++)this.data[this._idx(-1,P)]=this.data[this._idx(0,P)],this.data[this._idx(S,P)]=this.data[this._idx(S-1,P)],this.data[this._idx(P,-1)]=this.data[this._idx(P,0)],this.data[this._idx(P,S)]=this.data[this._idx(P,S-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(S,-1)]=this.data[this._idx(S-1,0)],this.data[this._idx(-1,S)]=this.data[this._idx(0,S-1)],this.data[this._idx(S,S)]=this.data[this._idx(S-1,S-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let P=0;P<S;P++)for(let A=0;A<S;A++){let D=this.get(P,A);D>this.max&&(this.max=D),D<this.min&&(this.min=D)}}get(t,i){let l=new Uint8Array(this.data.buffer),h=4*this._idx(t,i);return this.unpack(l[h],l[h+1],l[h+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(t,i){if(t<-1||t>=this.dim+1||i<-1||i>=this.dim+1)throw new RangeError(`Out of range source coordinates for DEM data. x: ${t}, y: ${i}, dim: ${this.dim}`);return(i+1)*this.stride+(t+1)}unpack(t,i,l){return t*this.redFactor+i*this.greenFactor+l*this.blueFactor-this.baseShift}pack(t){return rv(t,this.getUnpackVector())}getPixels(){return new Bn({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,i,l){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let h=i*this.dim,g=i*this.dim+this.dim,y=l*this.dim,x=l*this.dim+this.dim;switch(i){case-1:h=g-1;break;case 1:g=h+1}switch(l){case-1:y=x-1;break;case 1:x=y+1}let S=-i*this.dim,P=-l*this.dim;for(let A=y;A<x;A++)for(let D=h;D<g;D++)this.data[this._idx(D,A)]=t.data[this._idx(D+S,A+P)]}}function rv(r,t){let i=t[0],l=t[1],h=t[2],g=t[3],y=Math.min(i,l,h),x=Math.round((r+g)/y);return{r:Math.floor(x*y/i)%256,g:Math.floor(x*y/l)%256,b:Math.floor(x*y/h)%256}}ut("DEMData",iv);class QE extends Qn{constructor(t,i){super(t,JE,i)}_createColorRamp(t){let i={elevationStops:[],colorStops:[]},l=this._transitionablePaint._values["color-relief-color"].value.expression;if(l instanceof v&&l._styleExpression.expression instanceof Qi){this.colorRampExpression=l;let y=l._styleExpression.expression;i.elevationStops=y.labels,i.colorStops=[];for(let x of i.elevationStops)i.colorStops.push(y.evaluate({globals:{elevation:x}}))}if(i.elevationStops.length<1&&(i.elevationStops=[0],i.colorStops=[Nt.transparent]),i.elevationStops.length<2&&(i.elevationStops.push(i.elevationStops[0]+1),i.colorStops.push(i.colorStops[0])),i.elevationStops.length<=t)return i;let h={elevationStops:[],colorStops:[]},g=(i.elevationStops.length-1)/(t-1);for(let y=0;y<i.elevationStops.length-.5;y+=g)h.elevationStops.push(i.elevationStops[Math.round(y)]),h.colorStops.push(i.colorStops[Math.round(y)]);return fr(`Too many colors in specification of ${this.id} color-relief layer, may not render properly. Max possible colors: ${t}, provided: ${i.elevationStops.length}`),h}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(t,i,l){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;let h=this._createColorRamp(i),g=new Bn({width:h.colorStops.length,height:1}),y=new Bn({width:h.colorStops.length,height:1});for(let x=0;x<h.elevationStops.length;x++){let S=rv(h.elevationStops[x],l);y.setPixel(0,x,new Nt(S.r/255,S.g/255,S.b/255,1)),g.setPixel(0,x,h.colorStops[x])}return this.colorRampTextures={elevationTexture:new hm(t,y,t.gl.RGBA),colorTexture:new hm(t,g,t.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return!this.isHidden()&&!!this.colorRampTextures}}let eA=ur([{name:"a_pos",components:2,type:"Int16"}],4),{members:tA}=eA;function Jh(r,t,i){let l=i.patternDependencies,h=!1;for(let g of t){let y=g.paint.get(`${r}-pattern`);y.isConstant()||(h=!0);let x=y.constantOr(null);x&&(h=!0,l[x.to]=!0,l[x.from]=!0)}return h}function pm(r,t,i,l,h){let{zoom:g}=l,y=h.patternDependencies;for(let x of t){let S=x.paint.get(`${r}-pattern`).value;if(S.kind!=="constant"){let P=S.evaluate({zoom:g-1},i,{},h.availableImages),A=S.evaluate({zoom:g},i,{},h.availableImages),D=S.evaluate({zoom:g+1},i,{},h.availableImages);P=P&&P.name?P.name:P,A=A&&A.name?A.name:A,D=D&&D.name?D.name:D,y[P]=!0,y[A]=!0,y[D]=!0,i.patterns[x.id]={min:P,mid:A,max:D}}}return i}function nv(r,t,i,l,h){let g;if(h===(function(y,x,S,P){let A=0;for(let D=x,B=S-P;D<S;D+=P)A+=(y[B]-y[D])*(y[D+1]+y[B+1]),B=D;return A})(r,t,i,l)>0)for(let y=t;y<i;y+=l)g=lv(y/l|0,r[y],r[y+1],g);else for(let y=i-l;y>=t;y-=l)g=lv(y/l|0,r[y],r[y+1],g);return g&&ou(g,g.next)&&(Id(g),g=g.next),g}function sc(r,t){if(!r)return r;t||(t=r);let i,l=r;do if(i=!1,l.steiner||!ou(l,l.next)&&vr(l.prev,l,l.next)!==0)l=l.next;else{if(Id(l),l=t=l.prev,l===l.next)break;i=!0}while(i||l!==t);return t}function Ad(r,t,i,l,h,g,y){if(!r)return;!y&&g&&(function(S,P,A,D){let B=S;do B.z===0&&(B.z=fm(B.x,B.y,P,A,D)),B.prevZ=B.prev,B.nextZ=B.next,B=B.next;while(B!==S);B.prevZ.nextZ=null,B.prevZ=null,(function(F){let W,U=1;do{let H,ee=F;F=null;let ce=null;for(W=0;ee;){W++;let te=ee,ae=0;for(let ge=0;ge<U&&(ae++,te=te.nextZ,te);ge++);let he=U;for(;ae>0||he>0&&te;)ae!==0&&(he===0||!te||ee.z<=te.z)?(H=ee,ee=ee.nextZ,ae--):(H=te,te=te.nextZ,he--),ce?ce.nextZ=H:F=H,H.prevZ=ce,ce=H;ee=te}ce.nextZ=null,U*=2}while(W>1)})(B)})(r,l,h,g);let x=r;for(;r.prev!==r.next;){let S=r.prev,P=r.next;if(g?rA(r,l,h,g):iA(r))t.push(S.i,r.i,P.i),Id(r),r=P.next,x=P.next;else if((r=P)===x){y?y===1?Ad(r=nA(sc(r),t),t,i,l,h,g,2):y===2&&aA(r,t,i,l,h,g):Ad(sc(r),t,i,l,h,g,1);break}}}function iA(r){let t=r.prev,i=r,l=r.next;if(vr(t,i,l)>=0)return!1;let h=t.x,g=i.x,y=l.x,x=t.y,S=i.y,P=l.y,A=Math.min(h,g,y),D=Math.min(x,S,P),B=Math.max(h,g,y),F=Math.max(x,S,P),W=l.next;for(;W!==t;){if(W.x>=A&&W.x<=B&&W.y>=D&&W.y<=F&&Md(h,x,g,S,y,P,W.x,W.y)&&vr(W.prev,W,W.next)>=0)return!1;W=W.next}return!0}function rA(r,t,i,l){let h=r.prev,g=r,y=r.next;if(vr(h,g,y)>=0)return!1;let x=h.x,S=g.x,P=y.x,A=h.y,D=g.y,B=y.y,F=Math.min(x,S,P),W=Math.min(A,D,B),U=Math.max(x,S,P),H=Math.max(A,D,B),ee=fm(F,W,t,i,l),ce=fm(U,H,t,i,l),te=r.prevZ,ae=r.nextZ;for(;te&&te.z>=ee&&ae&&ae.z<=ce;){if(te.x>=F&&te.x<=U&&te.y>=W&&te.y<=H&&te!==h&&te!==y&&Md(x,A,S,D,P,B,te.x,te.y)&&vr(te.prev,te,te.next)>=0||(te=te.prevZ,ae.x>=F&&ae.x<=U&&ae.y>=W&&ae.y<=H&&ae!==h&&ae!==y&&Md(x,A,S,D,P,B,ae.x,ae.y)&&vr(ae.prev,ae,ae.next)>=0))return!1;ae=ae.nextZ}for(;te&&te.z>=ee;){if(te.x>=F&&te.x<=U&&te.y>=W&&te.y<=H&&te!==h&&te!==y&&Md(x,A,S,D,P,B,te.x,te.y)&&vr(te.prev,te,te.next)>=0)return!1;te=te.prevZ}for(;ae&&ae.z<=ce;){if(ae.x>=F&&ae.x<=U&&ae.y>=W&&ae.y<=H&&ae!==h&&ae!==y&&Md(x,A,S,D,P,B,ae.x,ae.y)&&vr(ae.prev,ae,ae.next)>=0)return!1;ae=ae.nextZ}return!0}function nA(r,t){let i=r;do{let l=i.prev,h=i.next.next;!ou(l,h)&&sv(l,i,i.next,h)&&zd(l,h)&&zd(h,l)&&(t.push(l.i,i.i,h.i),Id(i),Id(i.next),i=r=h),i=i.next}while(i!==r);return sc(i)}function aA(r,t,i,l,h,g){let y=r;do{let x=y.next.next;for(;x!==y.prev;){if(y.i!==x.i&&uA(y,x)){let S=ov(y,x);return y=sc(y,y.next),S=sc(S,S.next),Ad(y,t,i,l,h,g,0),void Ad(S,t,i,l,h,g,0)}x=x.next}y=y.next}while(y!==r)}function sA(r,t){let i=r.x-t.x;return i===0&&(i=r.y-t.y,i===0)&&(i=(r.next.y-r.y)/(r.next.x-r.x)-(t.next.y-t.y)/(t.next.x-t.x)),i}function oA(r,t){let i=(function(h,g){let y=g,x=h.x,S=h.y,P,A=-1/0;if(ou(h,y))return y;do{if(ou(h,y.next))return y.next;if(S<=y.y&&S>=y.next.y&&y.next.y!==y.y){let U=y.x+(S-y.y)*(y.next.x-y.x)/(y.next.y-y.y);if(U<=x&&U>A&&(A=U,P=y.x<y.next.x?y:y.next,U===x))return P}y=y.next}while(y!==g);if(!P)return null;let D=P,B=P.x,F=P.y,W=1/0;y=P;do{if(x>=y.x&&y.x>=B&&x!==y.x&&av(S<F?x:A,S,B,F,S<F?A:x,S,y.x,y.y)){let U=Math.abs(S-y.y)/(x-y.x);zd(y,h)&&(U<W||U===W&&(y.x>P.x||y.x===P.x&&lA(P,y)))&&(P=y,W=U)}y=y.next}while(y!==D);return P})(r,t);if(!i)return t;let l=ov(i,r);return sc(l,l.next),sc(i,i.next)}function lA(r,t){return vr(r.prev,r,t.prev)<0&&vr(t.next,r,r.next)<0}function fm(r,t,i,l,h){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-i)*h|0)|r<<8))|r<<4))|r<<2))|r<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-l)*h|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function cA(r){let t=r,i=r;do(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next;while(t!==r);return i}function av(r,t,i,l,h,g,y,x){return(h-y)*(t-x)>=(r-y)*(g-x)&&(r-y)*(l-x)>=(i-y)*(t-x)&&(i-y)*(g-x)>=(h-y)*(l-x)}function Md(r,t,i,l,h,g,y,x){return!(r===y&&t===x)&&av(r,t,i,l,h,g,y,x)}function uA(r,t){return r.next.i!==t.i&&r.prev.i!==t.i&&!(function(i,l){let h=i;do{if(h.i!==i.i&&h.next.i!==i.i&&h.i!==l.i&&h.next.i!==l.i&&sv(h,h.next,i,l))return!0;h=h.next}while(h!==i);return!1})(r,t)&&(zd(r,t)&&zd(t,r)&&(function(i,l){let h=i,g=!1,y=(i.x+l.x)/2,x=(i.y+l.y)/2;do h.y>x!=h.next.y>x&&h.next.y!==h.y&&y<(h.next.x-h.x)*(x-h.y)/(h.next.y-h.y)+h.x&&(g=!g),h=h.next;while(h!==i);return g})(r,t)&&(vr(r.prev,r,t.prev)||vr(r,t.prev,t))||ou(r,t)&&vr(r.prev,r,r.next)>0&&vr(t.prev,t,t.next)>0)}function vr(r,t,i){return(t.y-r.y)*(i.x-t.x)-(t.x-r.x)*(i.y-t.y)}function ou(r,t){return r.x===t.x&&r.y===t.y}function sv(r,t,i,l){let h=ep(vr(r,t,i)),g=ep(vr(r,t,l)),y=ep(vr(i,l,r)),x=ep(vr(i,l,t));return h!==g&&y!==x||!(h!==0||!Qh(r,i,t))||!(g!==0||!Qh(r,l,t))||!(y!==0||!Qh(i,r,l))||!(x!==0||!Qh(i,t,l))}function Qh(r,t,i){return t.x<=Math.max(r.x,i.x)&&t.x>=Math.min(r.x,i.x)&&t.y<=Math.max(r.y,i.y)&&t.y>=Math.min(r.y,i.y)}function ep(r){return r>0?1:r<0?-1:0}function zd(r,t){return vr(r.prev,r,r.next)<0?vr(r,t,r.next)>=0&&vr(r,r.prev,t)>=0:vr(r,t,r.prev)<0||vr(r,r.next,t)<0}function ov(r,t){let i=mm(r.i,r.x,r.y),l=mm(t.i,t.x,t.y),h=r.next,g=t.prev;return r.next=t,t.prev=r,i.next=h,h.prev=i,l.next=i,i.prev=l,g.next=l,l.prev=g,l}function lv(r,t,i,l){let h=mm(r,t,i);return l?(h.next=l.next,h.prev=l,l.next.prev=h,l.next=h):(h.prev=h,h.next=h),h}function Id(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function mm(r,t,i){return{i:r,x:t,y:i,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class lu{constructor(t,i){if(i>t)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=t,this._minGranularity=i}getGranularityForZoomLevel(t){return Math.max(Math.floor(this._baseZoomGranularity/(1<<t)),this._minGranularity,1)}}class tp{constructor(t){this.fill=t.fill,this.line=t.line,this.tile=t.tile,this.stencil=t.stencil,this.circle=t.circle}}tp.noSubdivision=new tp({fill:new lu(0,0),line:new lu(0,0),tile:new lu(0,0),stencil:new lu(0,0),circle:1}),ut("SubdivisionGranularityExpression",lu),ut("SubdivisionGranularitySetting",tp);let cu=-32768,Ld=32767;class dA{constructor(t,i){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=t,this._granularityCellSize=qt/t,this._canonical=i}_getKey(t,i){return(t+=32768)<<16|i+32768}_vertexToIndex(t,i){if(t<-32768||i<-32768||t>32767||i>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");let l=0|Math.round(t),h=0|Math.round(i),g=this._getKey(l,h);if(this._vertexDictionary.has(g))return this._vertexDictionary.get(g);let y=this._vertexBuffer.length/2;return this._vertexDictionary.set(g,y),this._vertexBuffer.push(l,h),y}_subdivideTrianglesScanline(t){if(this._granularity<2)return(function(h,g){let y=[];for(let x=0;x<g.length;x+=3){let S=g[x],P=g[x+1],A=g[x+2],D=h[2*S],B=h[2*S+1];(h[2*P]-D)*(h[2*A+1]-B)-(h[2*P+1]-B)*(h[2*A]-D)>0?(y.push(S),y.push(A),y.push(P)):(y.push(S),y.push(P),y.push(A))}return y})(this._vertexBuffer,t);let i=[],l=t.length;for(let h=0;h<l;h+=3){let g=[t[h+0],t[h+1],t[h+2]],y=[this._vertexBuffer[2*t[h+0]+0],this._vertexBuffer[2*t[h+0]+1],this._vertexBuffer[2*t[h+1]+0],this._vertexBuffer[2*t[h+1]+1],this._vertexBuffer[2*t[h+2]+0],this._vertexBuffer[2*t[h+2]+1]],x=1/0,S=1/0,P=-1/0,A=-1/0;for(let U=0;U<3;U++){let H=y[2*U],ee=y[2*U+1];x=Math.min(x,H),P=Math.max(P,H),S=Math.min(S,ee),A=Math.max(A,ee)}if(x===P||S===A)continue;let D=Math.floor(x/this._granularityCellSize),B=Math.ceil(P/this._granularityCellSize),F=Math.floor(S/this._granularityCellSize),W=Math.ceil(A/this._granularityCellSize);if(D!==B||F!==W)for(let U=F;U<W;U++){let H=this._scanlineGenerateVertexRingForCellRow(U,y,g);hA(this._vertexBuffer,H,i)}else i.push(...g)}return i}_scanlineGenerateVertexRingForCellRow(t,i,l){let h=t*this._granularityCellSize,g=h+this._granularityCellSize,y=[];for(let x=0;x<3;x++){let S=i[2*x],P=i[2*x+1],A=i[2*(x+1)%6],D=i[(2*(x+1)+1)%6],B=i[2*(x+2)%6],F=i[(2*(x+2)+1)%6],W=A-S,U=D-P,H=W===0,ee=U===0,ce=(h-P)/U,te=(g-P)/U,ae=Math.min(ce,te),he=Math.max(ce,te);if(!ee&&(ae>=1||he<=0)||ee&&(P<h||P>g)){D>=h&&D<=g&&y.push(l[(x+1)%3]);continue}!ee&&ae>0&&y.push(this._vertexToIndex(S+W*ae,P+U*ae));let ge=S+W*Math.max(ae,0),Ie=S+W*Math.min(he,1);H||this._generateIntraEdgeVertices(y,S,P,A,D,ge,Ie),!ee&&he<1&&y.push(this._vertexToIndex(S+W*he,P+U*he)),(ee||D>=h&&D<=g)&&y.push(l[(x+1)%3]),!ee&&(D<=h||D>=g)&&this._generateInterEdgeVertices(y,S,P,A,D,B,F,Ie,h,g)}return y}_generateIntraEdgeVertices(t,i,l,h,g,y,x){let S=h-i,P=g-l,A=P===0,D=A?Math.min(i,h):Math.min(y,x),B=A?Math.max(i,h):Math.max(y,x),F=Math.floor(D/this._granularityCellSize)+1,W=Math.ceil(B/this._granularityCellSize)-1;if(A?i<h:y<x)for(let U=F;U<=W;U++){let H=U*this._granularityCellSize;t.push(this._vertexToIndex(H,l+P*(H-i)/S))}else for(let U=W;U>=F;U--){let H=U*this._granularityCellSize;t.push(this._vertexToIndex(H,l+P*(H-i)/S))}}_generateInterEdgeVertices(t,i,l,h,g,y,x,S,P,A){let D=g-l,B=y-h,F=x-g,W=(P-g)/F,U=(A-g)/F,H=Math.min(W,U),ee=Math.max(W,U),ce=h+B*H,te=Math.floor(Math.min(ce,S)/this._granularityCellSize)+1,ae=Math.ceil(Math.max(ce,S)/this._granularityCellSize)-1,he=S<ce,ge=F===0;if(ge&&(x===P||x===A))return;if(ge||H>=1||ee<=0){let Ge=l-x,We=y+(i-y)*Math.min((P-x)/Ge,(A-x)/Ge);te=Math.floor(Math.min(We,S)/this._granularityCellSize)+1,ae=Math.ceil(Math.max(We,S)/this._granularityCellSize)-1,he=S<We}let Ie=D>0?A:P;if(he)for(let Ge=te;Ge<=ae;Ge++)t.push(this._vertexToIndex(Ge*this._granularityCellSize,Ie));else for(let Ge=ae;Ge>=te;Ge--)t.push(this._vertexToIndex(Ge*this._granularityCellSize,Ie))}_generateOutline(t){let i=[];for(let l of t){let h=oc(l,this._granularity,!0),g=this._pointArrayToIndices(h),y=[];for(let x=1;x<g.length;x++)y.push(g[x-1]),y.push(g[x]);i.push(y)}return i}_handlePoles(t){let i=!1,l=!1;this._canonical&&(this._canonical.y===0&&(i=!0),this._canonical.y===(1<<this._canonical.z)-1&&(l=!0)),(i||l)&&this._fillPoles(t,i,l)}_ensureNoPoleVertices(){let t=this._vertexBuffer;for(let i=0;i<t.length;i+=2){let l=t[i+1];l===cu&&(t[i+1]=-32767),l===Ld&&(t[i+1]=32766)}}_generatePoleQuad(t,i,l,h,g,y){h>g!=(y===cu)?(t.push(i),t.push(l),t.push(this._vertexToIndex(h,y)),t.push(l),t.push(this._vertexToIndex(g,y)),t.push(this._vertexToIndex(h,y))):(t.push(l),t.push(i),t.push(this._vertexToIndex(h,y)),t.push(this._vertexToIndex(g,y)),t.push(l),t.push(this._vertexToIndex(h,y)))}_fillPoles(t,i,l){let h=this._vertexBuffer,g=qt,y=t.length;for(let x=2;x<y;x+=3){let S=t[x-2],P=t[x-1],A=t[x],D=h[2*S],B=h[2*S+1],F=h[2*P],W=h[2*P+1],U=h[2*A],H=h[2*A+1];i&&(B===0&&W===0&&this._generatePoleQuad(t,S,P,D,F,cu),W===0&&H===0&&this._generatePoleQuad(t,P,A,F,U,cu),H===0&&B===0&&this._generatePoleQuad(t,A,S,U,D,cu)),l&&(B===g&&W===g&&this._generatePoleQuad(t,S,P,D,F,Ld),W===g&&H===g&&this._generatePoleQuad(t,P,A,F,U,Ld),H===g&&B===g&&this._generatePoleQuad(t,A,S,U,D,Ld))}}_initializeVertices(t){for(let i=0;i<t.length;i+=2)this._vertexToIndex(t[i],t[i+1])}subdividePolygonInternal(t,i){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;let{flattened:l,holeIndices:h}=(function(x){let S=[],P=[];for(let A of x)if(A.length!==0){A!==x[0]&&S.push(P.length/2);for(let D=0;D<A.length;D++)P.push(A[D].x),P.push(A[D].y)}return{flattened:P,holeIndices:S}})(t),g;this._initializeVertices(l);try{let x=(function(P,A,D=2){let B=A&&A.length,F=B?A[0]*D:P.length,W=nv(P,0,F,D,!0),U=[];if(!W||W.next===W.prev)return U;let H,ee,ce;if(B&&(W=(function(te,ae,he,ge){let Ie=[];for(let Ge=0,We=ae.length;Ge<We;Ge++){let Ue=nv(te,ae[Ge]*ge,Ge<We-1?ae[Ge+1]*ge:te.length,ge,!1);Ue===Ue.next&&(Ue.steiner=!0),Ie.push(cA(Ue))}Ie.sort(sA);for(let Ge=0;Ge<Ie.length;Ge++)he=oA(Ie[Ge],he);return he})(P,A,W,D)),P.length>80*D){H=P[0],ee=P[1];let te=H,ae=ee;for(let he=D;he<F;he+=D){let ge=P[he],Ie=P[he+1];ge<H&&(H=ge),Ie<ee&&(ee=Ie),ge>te&&(te=ge),Ie>ae&&(ae=Ie)}ce=Math.max(te-H,ae-ee),ce=ce!==0?32767/ce:0}return Ad(W,U,D,H,ee,ce,0),U})(l,h),S=this._convertIndices(l,x);g=this._subdivideTrianglesScanline(S)}catch(x){console.error(x)}let y=[];return i&&(y=this._generateOutline(t)),this._ensureNoPoleVertices(),this._handlePoles(g),{verticesFlattened:this._vertexBuffer,indicesTriangles:g,indicesLineList:y}}_convertIndices(t,i){let l=[];for(let h=0;h<i.length;h++)l.push(this._vertexToIndex(t[2*i[h]],t[2*i[h]+1]));return l}_pointArrayToIndices(t){let i=[];for(let l=0;l<t.length;l++){let h=t[l];i.push(this._vertexToIndex(h.x,h.y))}return i}}function cv(r,t,i,l=!0){return new dA(i,t).subdividePolygonInternal(r,l)}function oc(r,t,i=!1){if(!r||r.length<1)return[];if(r.length<2)return[];let l=r[0],h=r[r.length-1],g=i&&(l.x!==h.x||l.y!==h.y);if(t<2)return g?[...r,r[0]]:[...r];let y=Math.floor(qt/t),x=[];x.push(new T(r[0].x,r[0].y));let S=r.length,P=g?S:S-1;for(let A=0;A<P;A++){let D=r[A],B=A<S-1?r[A+1]:r[0],F=D.x,W=D.y,U=B.x,H=B.y,ee=F!==U,ce=W!==H;if(!ee&&!ce)continue;let te=U-F,ae=H-W,he=Math.abs(te),ge=Math.abs(ae),Ie=F,Ge=W;for(;;){let Ue=te>0?(Math.floor(Ie/y)+1)*y:(Math.ceil(Ie/y)-1)*y,tt=ae>0?(Math.floor(Ge/y)+1)*y:(Math.ceil(Ge/y)-1)*y,Qe=Math.abs(Ie-Ue),He=Math.abs(Ge-tt),qe=Math.abs(Ie-U),it=Math.abs(Ge-H),at=ee?Qe/he:Number.POSITIVE_INFINITY,lt=ce?He/ge:Number.POSITIVE_INFINITY;if((qe<=Qe||!ee)&&(it<=He||!ce))break;if(at<lt&&ee||!ce){Ie=Ue,Ge+=ae*at;let rt=new T(Ie,Math.round(Ge));x[x.length-1].x===rt.x&&x[x.length-1].y===rt.y||x.push(rt)}else{Ie+=te*lt,Ge=tt;let rt=new T(Math.round(Ie),Ge);x[x.length-1].x===rt.x&&x[x.length-1].y===rt.y||x.push(rt)}}let We=new T(U,H);x[x.length-1].x===We.x&&x[x.length-1].y===We.y||x.push(We)}return x}function hA(r,t,i){if(t.length===0)throw new Error("Subdivision vertex ring is empty.");let l=0,h=r[2*t[0]];for(let S=1;S<t.length;S++){let P=r[2*t[S]];P<h&&(h=P,l=S)}let g=t.length,y=l,x=(y+1)%g;for(;;){let S=y-1>=0?y-1:g-1,P=(x+1)%g,A=r[2*t[S]],D=r[2*t[P]],B=r[2*t[y]],F=r[2*t[y]+1],W=r[2*t[x]+1],U=!1;if(A<D)U=!0;else if(A>D)U=!1;else{let H=W-F,ee=-(r[2*t[x]]-B),ce=F<W?1:-1;((A-B)*H+(r[2*t[S]+1]-F)*ee)*ce>((D-B)*H+(r[2*t[P]+1]-F)*ee)*ce&&(U=!0)}if(U){let H=t[S],ee=t[y],ce=t[x];H!==ee&&H!==ce&&ee!==ce&&i.push(ce,ee,H),y--,y<0&&(y=g-1)}else{let H=t[P],ee=t[y],ce=t[x];H!==ee&&H!==ce&&ee!==ce&&i.push(ce,ee,H),x++,x>=g&&(x=0)}if(S===P)break}}function uv(r,t,i,l,h,g,y,x,S){let P=h.length/2,A=y&&x&&S;if(P<ot.MAX_VERTEX_ARRAY_LENGTH){let D=t.prepareSegment(P,i,l),B=D.vertexLength;for(let U=0;U<g.length;U+=3)l.emplaceBack(B+g[U],B+g[U+1],B+g[U+2]);let F,W;D.vertexLength+=P,D.primitiveLength+=g.length/3,A&&(W=y.prepareSegment(P,i,x),F=W.vertexLength,W.vertexLength+=P);for(let U=0;U<h.length;U+=2)r(h[U],h[U+1]);if(A)for(let U=0;U<S.length;U++){let H=S[U];for(let ee=1;ee<H.length;ee+=2)x.emplaceBack(F+H[ee-1],F+H[ee]);W.primitiveLength+=H.length/2}}else(function(D,B,F,W,U,H){let ee=[];for(let ge=0;ge<W.length/2;ge++)ee.push(-1);let ce={count:0},te=0,ae=D.getOrCreateLatestSegment(B,F),he=ae.vertexLength;for(let ge=2;ge<U.length;ge+=3){let Ie=U[ge-2],Ge=U[ge-1],We=U[ge],Ue=ee[Ie]<te,tt=ee[Ge]<te,Qe=ee[We]<te;ae.vertexLength+((Ue?1:0)+(tt?1:0)+(Qe?1:0))>ot.MAX_VERTEX_ARRAY_LENGTH&&(ae=D.createNewSegment(B,F),te=ce.count,Ue=!0,tt=!0,Qe=!0,he=0);let He=Dd(ee,W,H,ce,Ie,Ue,ae),qe=Dd(ee,W,H,ce,Ge,tt,ae),it=Dd(ee,W,H,ce,We,Qe,ae);F.emplaceBack(he+He-te,he+qe-te,he+it-te),ae.primitiveLength++}})(t,i,l,h,g,r),A&&(function(D,B,F,W,U,H){let ee=[];for(let ge=0;ge<W.length/2;ge++)ee.push(-1);let ce={count:0},te=0,ae=D.getOrCreateLatestSegment(B,F),he=ae.vertexLength;for(let ge=0;ge<U.length;ge++){let Ie=U[ge];for(let Ge=1;Ge<U[ge].length;Ge+=2){let We=Ie[Ge-1],Ue=Ie[Ge],tt=ee[We]<te,Qe=ee[Ue]<te;ae.vertexLength+((tt?1:0)+(Qe?1:0))>ot.MAX_VERTEX_ARRAY_LENGTH&&(ae=D.createNewSegment(B,F),te=ce.count,tt=!0,Qe=!0,he=0);let He=Dd(ee,W,H,ce,We,tt,ae),qe=Dd(ee,W,H,ce,Ue,Qe,ae);F.emplaceBack(he+He-te,he+qe-te),ae.primitiveLength++}}})(y,i,x,h,S,r),t.forceNewSegmentOnNextPrepare(),y==null||y.forceNewSegmentOnNextPrepare()}function Dd(r,t,i,l,h,g,y){if(g){let x=l.count;return i(t[2*h],t[2*h+1]),r[h]=l.count,l.count++,y.vertexLength++,x}return r[h]}class gm{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((i=>i.id)),this.index=t.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new oe,this.indexArray=new Be,this.indexArray2=new Je,this.programConfigurations=new Mo(t.layers,t.zoom),this.segments=new ot,this.segments2=new ot,this.stateDependentLayerIds=this.layers.filter((i=>i.isStateDependent())).map((i=>i.id))}populate(t,i,l){this.hasDependencies=Jh("fill",this.layers,i);let h=this.layers[0].layout.get("fill-sort-key"),g=!h.isConstant(),y=[];for(let{feature:x,id:S,index:P,sourceLayerIndex:A}of t){let D=this.layers[0]._featureFilter.needGeometry,B=eo(x,D);if(!this.layers[0]._featureFilter.filter(new Ai(this.zoom),B,l))continue;let F=g?h.evaluate(B,{},l,i.availableImages):void 0,W={id:S,properties:x.properties,type:x.type,sourceLayerIndex:A,index:P,geometry:D?B.geometry:Qs(x),patterns:{},sortKey:F};y.push(W)}g&&y.sort(((x,S)=>x.sortKey-S.sortKey));for(let x of y){let{geometry:S,index:P,sourceLayerIndex:A}=x;if(this.hasDependencies){let D=pm("fill",this.layers,x,{zoom:this.zoom},i);this.patternFeatures.push(D)}else this.addFeature(x,S,P,l,{},i.subdivisionGranularity);i.featureIndex.insert(t[P].feature,S,P,A,this.index)}}update(t,i,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,i,this.stateDependentLayers,{imagePositions:l})}addFeatures(t,i,l){for(let h of this.patternFeatures)this.addFeature(h,h.geometry,h.index,i,l,t.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,tA),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,i,l,h,g,y){for(let x of Bs(i,500)){let S=cv(x,h,y.fill.getGranularityForZoomLevel(h.z)),P=this.layoutVertexArray;uv(((A,D)=>{P.emplaceBack(A,D)}),this.segments,this.layoutVertexArray,this.indexArray,S.verticesFlattened,S.indicesTriangles,this.segments2,this.indexArray2,S.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,l,{imagePositions:g,canonical:h})}}let dv,hv;ut("FillBucket",gm,{omit:["layers","patternFeatures"]});var pA={get paint(){return hv=hv||new pn({"fill-antialias":new ft(Ce.paint_fill["fill-antialias"]),"fill-opacity":new xt(Ce.paint_fill["fill-opacity"]),"fill-color":new xt(Ce.paint_fill["fill-color"]),"fill-outline-color":new xt(Ce.paint_fill["fill-outline-color"]),"fill-translate":new ft(Ce.paint_fill["fill-translate"]),"fill-translate-anchor":new ft(Ce.paint_fill["fill-translate-anchor"]),"fill-pattern":new Jl(Ce.paint_fill["fill-pattern"])})},get layout(){return dv=dv||new pn({"fill-sort-key":new xt(Ce.layout_fill["fill-sort-key"])})}};class fA extends Qn{constructor(t,i){super(t,pA,i)}recalculate(t,i){super.recalculate(t,i);let l=this.paint._values["fill-outline-color"];l.value.kind==="constant"&&l.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new gm(t)}queryRadius(){return Xh(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:t,geometry:i,transform:l,pixelsToTileUnits:h}){return G_(Kh(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-l.bearingInRadians,h),i)}isTileClipped(){return!0}}let mA=ur([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),gA=ur([{name:"a_centroid",components:2,type:"Int16"}],4),{members:yA}=mA;class Od{constructor(t,i,l,h,g){this.properties={},this.extent=l,this.type=0,this.id=void 0,this._pbf=t,this._geometry=-1,this._keys=h,this._values=g,t.readFields(_A,this,i)}loadGeometry(){let t=this._pbf;t.pos=this._geometry;let i=t.readVarint()+t.pos,l=[],h,g=1,y=0,x=0,S=0;for(;t.pos<i;){if(y<=0){let P=t.readVarint();g=7&P,y=P>>3}if(y--,g===1||g===2)x+=t.readSVarint(),S+=t.readSVarint(),g===1&&(h&&l.push(h),h=[]),h&&h.push(new T(x,S));else{if(g!==7)throw new Error(`unknown command ${g}`);h&&h.push(h[0].clone())}}return h&&l.push(h),l}bbox(){let t=this._pbf;t.pos=this._geometry;let i=t.readVarint()+t.pos,l=1,h=0,g=0,y=0,x=1/0,S=-1/0,P=1/0,A=-1/0;for(;t.pos<i;){if(h<=0){let D=t.readVarint();l=7&D,h=D>>3}if(h--,l===1||l===2)g+=t.readSVarint(),y+=t.readSVarint(),g<x&&(x=g),g>S&&(S=g),y<P&&(P=y),y>A&&(A=y);else if(l!==7)throw new Error(`unknown command ${l}`)}return[x,P,S,A]}toGeoJSON(t,i,l){let h=this.extent*Math.pow(2,l),g=this.extent*t,y=this.extent*i,x=this.loadGeometry();function S(B){return[360*(B.x+g)/h-180,360/Math.PI*Math.atan(Math.exp((1-2*(B.y+y)/h)*Math.PI))-90]}function P(B){return B.map(S)}let A;if(this.type===1){let B=[];for(let W of x)B.push(W[0]);let F=P(B);A=B.length===1?{type:"Point",coordinates:F[0]}:{type:"MultiPoint",coordinates:F}}else if(this.type===2){let B=x.map(P);A=B.length===1?{type:"LineString",coordinates:B[0]}:{type:"MultiLineString",coordinates:B}}else{if(this.type!==3)throw new Error("unknown feature type");{let B=pv(x),F=[];for(let W of B)F.push(W.map(P));A=F.length===1?{type:"Polygon",coordinates:F[0]}:{type:"MultiPolygon",coordinates:F}}}let D={type:"Feature",geometry:A,properties:this.properties};return this.id!=null&&(D.id=this.id),D}}function _A(r,t,i){r===1?t.id=i.readVarint():r===2?(function(l,h){let g=l.readVarint()+l.pos;for(;l.pos<g;){let y=h._keys[l.readVarint()],x=h._values[l.readVarint()];h.properties[y]=x}})(i,t):r===3?t.type=i.readVarint():r===4&&(t._geometry=i.pos)}function pv(r){let t=r.length;if(t<=1)return[r];let i=[],l,h;for(let g=0;g<t;g++){let y=vA(r[g]);y!==0&&(h===void 0&&(h=y<0),h===y<0?(l&&i.push(l),l=[r[g]]):l&&l.push(r[g]))}return l&&i.push(l),i}function vA(r){let t=0;for(let i,l,h=0,g=r.length,y=g-1;h<g;y=h++)i=r[h],l=r[y],t+=(l.x-i.x)*(i.y+l.y);return t}Od.types=["Unknown","Point","LineString","Polygon"];class bA{constructor(t,i){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(xA,this,i),this.length=this._features.length}feature(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];let i=this._pbf.readVarint()+this._pbf.pos;return new Od(this._pbf,i,this.extent,this._keys,this._values)}}function xA(r,t,i){r===15?t.version=i.readVarint():r===1?t.name=i.readString():r===5?t.extent=i.readVarint():r===2?t._features.push(i.pos):r===3?t._keys.push(i.readString()):r===4&&t._values.push((function(l){let h=null,g=l.readVarint()+l.pos;for(;l.pos<g;){let y=l.readVarint()>>3;h=y===1?l.readString():y===2?l.readFloat():y===3?l.readDouble():y===4?l.readVarint64():y===5?l.readVarint():y===6?l.readSVarint():y===7?l.readBoolean():null}if(h==null)throw new Error("unknown feature value");return h})(i))}class fv{constructor(t,i){this.layers=t.readFields(wA,{},i)}}function wA(r,t,i){if(r===3){let l=new bA(i,i.readVarint()+i.pos);l.length&&(t[l.name]=l)}}let ym=Math.pow(2,13);function Rd(r,t,i,l,h,g,y,x){r.emplaceBack(t,i,2*Math.floor(l*ym)+y,h*ym*2,g*ym*2,Math.round(x))}class _m{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((i=>i.id)),this.index=t.index,this.hasDependencies=!1,this.layoutVertexArray=new de,this.centroidVertexArray=new se,this.indexArray=new Be,this.programConfigurations=new Mo(t.layers,t.zoom),this.segments=new ot,this.stateDependentLayerIds=this.layers.filter((i=>i.isStateDependent())).map((i=>i.id))}populate(t,i,l){this.features=[],this.hasDependencies=Jh("fill-extrusion",this.layers,i);for(let{feature:h,id:g,index:y,sourceLayerIndex:x}of t){let S=this.layers[0]._featureFilter.needGeometry,P=eo(h,S);if(!this.layers[0]._featureFilter.filter(new Ai(this.zoom),P,l))continue;let A={id:g,sourceLayerIndex:x,index:y,geometry:S?P.geometry:Qs(h),properties:h.properties,type:h.type,patterns:{}};this.hasDependencies?this.features.push(pm("fill-extrusion",this.layers,A,{zoom:this.zoom},i)):this.addFeature(A,A.geometry,y,l,{},i.subdivisionGranularity),i.featureIndex.insert(h,A.geometry,y,x,this.index,!0)}}addFeatures(t,i,l){for(let h of this.features){let{geometry:g}=h;this.addFeature(h,g,h.index,i,l,t.subdivisionGranularity)}}update(t,i,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,i,this.stateDependentLayers,{imagePositions:l})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,yA),this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,gA.members,!0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(t,i,l,h,g,y){for(let x of Bs(i,500)){let S={x:0,y:0,sampleCount:0},P=this.layoutVertexArray.length;this.processPolygon(S,h,t,x,y);let A=this.layoutVertexArray.length-P,D=Math.floor(S.x/S.sampleCount),B=Math.floor(S.y/S.sampleCount);for(let F=0;F<A;F++)this.centroidVertexArray.emplaceBack(D,B)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,l,{imagePositions:g,canonical:h})}processPolygon(t,i,l,h,g){if(h.length<1||mv(h[0]))return;for(let D of h)D.length!==0&&SA(t,D);let y={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},x=g.fill.getGranularityForZoomLevel(i.z),S=Od.types[l.type]==="Polygon";for(let D of h){if(D.length===0||mv(D))continue;let B=oc(D,x,S);this._generateSideFaces(B,y)}if(!S)return;let P=cv(h,i,x,!1),A=this.layoutVertexArray;uv(((D,B)=>{Rd(A,D,B,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,P.verticesFlattened,P.indicesTriangles)}_generateSideFaces(t,i){let l=0;for(let h=1;h<t.length;h++){let g=t[h],y=t[h-1];if(TA(g,y))continue;i.segment.vertexLength+4>ot.MAX_VERTEX_ARRAY_LENGTH&&(i.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));let x=g.sub(y)._perp()._unit(),S=y.dist(g);l+S>32768&&(l=0),Rd(this.layoutVertexArray,g.x,g.y,x.x,x.y,0,0,l),Rd(this.layoutVertexArray,g.x,g.y,x.x,x.y,0,1,l),l+=S,Rd(this.layoutVertexArray,y.x,y.y,x.x,x.y,0,0,l),Rd(this.layoutVertexArray,y.x,y.y,x.x,x.y,0,1,l);let P=i.segment.vertexLength;this.indexArray.emplaceBack(P,P+2,P+1),this.indexArray.emplaceBack(P+1,P+2,P+3),i.segment.vertexLength+=4,i.segment.primitiveLength+=2}}}function SA(r,t){for(let i=0;i<t.length;i++){let l=t[i];i===t.length-1&&t[0].x===l.x&&t[0].y===l.y||(r.x+=l.x,r.y+=l.y,r.sampleCount++)}}function TA(r,t){return r.x===t.x&&(r.x<0||r.x>qt)||r.y===t.y&&(r.y<0||r.y>qt)}function mv(r){return r.every((t=>t.x<0))||r.every((t=>t.x>qt))||r.every((t=>t.y<0))||r.every((t=>t.y>qt))}let gv;ut("FillExtrusionBucket",_m,{omit:["layers","features"]});var CA={get paint(){return gv=gv||new pn({"fill-extrusion-opacity":new ft(Ce["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new xt(Ce["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ft(Ce["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ft(Ce["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Jl(Ce["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new xt(Ce["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new xt(Ce["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ft(Ce["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class kA extends Qn{constructor(t,i){super(t,CA,i)}createBucket(t){return new _m(t)}queryRadius(){return Xh(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:t,feature:i,featureState:l,geometry:h,transform:g,pixelsToTileUnits:y,pixelPosMatrix:x}){let S=Kh(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-g.bearingInRadians,y),P=this.paint.get("fill-extrusion-height").evaluate(i,l),A=this.paint.get("fill-extrusion-base").evaluate(i,l),D=(function(F,W){let U=[];for(let H of F){let ee=[H.x,H.y,0,1];ni(ee,ee,W),U.push(new T(ee[0]/ee[3],ee[1]/ee[3]))}return U})(S,x),B=(function(F,W,U,H){let ee=[],ce=[],te=H[8]*W,ae=H[9]*W,he=H[10]*W,ge=H[11]*W,Ie=H[8]*U,Ge=H[9]*U,We=H[10]*U,Ue=H[11]*U;for(let tt of F){let Qe=[],He=[];for(let qe of tt){let it=qe.x,at=qe.y,lt=H[0]*it+H[4]*at+H[12],rt=H[1]*it+H[5]*at+H[13],mt=H[2]*it+H[6]*at+H[14],ri=H[3]*it+H[7]*at+H[15],Wt=mt+he,$i=ri+ge,rn=lt+Ie,wr=rt+Ge,Yi=mt+We,Ni=ri+Ue,gi=new T((lt+te)/$i,(rt+ae)/$i);gi.z=Wt/$i,Qe.push(gi);let or=new T(rn/Ni,wr/Ni);or.z=Yi/Ni,He.push(or)}ee.push(Qe),ce.push(He)}return[ee,ce]})(h,A,P,x);return(function(F,W,U){let H=1/0;G_(U,W)&&(H=yv(U,W[0]));for(let ee=0;ee<W.length;ee++){let ce=W[ee],te=F[ee];for(let ae=0;ae<ce.length-1;ae++){let he=ce[ae],ge=[he,ce[ae+1],te[ae+1],te[ae],he];nu(U,ge)&&(H=Math.min(H,yv(U,ge)))}}return H!==1/0&&H})(B[0],B[1],D)}}function Bd(r,t){return r.x*t.x+r.y*t.y}function yv(r,t){if(r.length===1){let i=0,l=t[i++],h;for(;!h||l.equals(h);)if(h=t[i++],!h)return 1/0;for(;i<t.length;i++){let g=t[i],y=r[0],x=h.sub(l),S=g.sub(l),P=y.sub(l),A=Bd(x,x),D=Bd(x,S),B=Bd(S,S),F=Bd(P,x),W=Bd(P,S),U=A*B-D*D,H=(B*F-D*W)/U,ee=(A*W-D*F)/U,ce=l.z*(1-H-ee)+h.z*H+g.z*ee;if(isFinite(ce))return ce}return 1/0}{let i=1/0;for(let l of t)i=Math.min(i,l.z);return i}}let PA=ur([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:EA}=PA,AA=ur([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:MA}=AA,zA=Math.cos(Math.PI/180*37.5),_v=Math.pow(2,14)/.5;class vm{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((i=>i.id)),this.index=t.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((i=>{this.gradients[i.id]={}})),this.layoutVertexArray=new ye,this.layoutVertexArray2=new ue,this.indexArray=new Be,this.programConfigurations=new Mo(t.layers,t.zoom),this.segments=new ot,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((i=>i.isStateDependent())).map((i=>i.id))}populate(t,i,l){this.hasDependencies=Jh("line",this.layers,i)||this.hasLineDasharray(this.layers);let h=this.layers[0].layout.get("line-sort-key"),g=!h.isConstant(),y=[];for(let{feature:x,id:S,index:P,sourceLayerIndex:A}of t){let D=this.layers[0]._featureFilter.needGeometry,B=eo(x,D);if(!this.layers[0]._featureFilter.filter(new Ai(this.zoom),B,l))continue;let F=g?h.evaluate(B,{},l):void 0,W={id:S,properties:x.properties,type:x.type,sourceLayerIndex:A,index:P,geometry:D?B.geometry:Qs(x),patterns:{},dashes:{},sortKey:F};y.push(W)}g&&y.sort(((x,S)=>x.sortKey-S.sortKey));for(let x of y){let{geometry:S,index:P,sourceLayerIndex:A}=x;this.hasDependencies?(Jh("line",this.layers,i)?pm("line",this.layers,x,{zoom:this.zoom},i):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,x,this.zoom,i),this.patternFeatures.push(x)):this.addFeature(x,S,P,l,{},{},i.subdivisionGranularity),i.featureIndex.insert(t[P].feature,S,P,A,this.index)}}update(t,i,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,i,this.stateDependentLayers,{imagePositions:l,dashPositions:h})}addFeatures(t,i,l,h){for(let g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,i,l,h,t.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,MA)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,EA),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,i,l,h,g,y,x){let S=this.layers[0].layout,P=S.get("line-join").evaluate(t,{}),A=S.get("line-cap"),D=S.get("line-miter-limit"),B=S.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(let F of i)this.addLine(F,t,P,A,D,B,h,x);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,l,{imagePositions:g,dashPositions:y,canonical:h})}addLine(t,i,l,h,g,y,x,S){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,t=oc(t,x?S.line.getGranularityForZoomLevel(x.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let te=0;te<t.length-1;te++)this.totalDistance+=t[te].dist(t[te+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}let P=Od.types[i.type]==="Polygon",A=t.length;for(;A>=2&&t[A-1].equals(t[A-2]);)A--;let D=0;for(;D<A-1&&t[D].equals(t[D+1]);)D++;if(A<(P?3:2))return;l==="bevel"&&(g=1.05);let B=this.overscaling<=16?122880/(512*this.overscaling):0,F=this.segments.prepareSegment(10*A,this.layoutVertexArray,this.indexArray),W,U,H,ee,ce;this.e1=this.e2=-1,P&&(W=t[A-2],ce=t[D].sub(W)._unit()._perp());for(let te=D;te<A;te++){if(H=te===A-1?P?t[D+1]:void 0:t[te+1],H&&t[te].equals(H))continue;ce&&(ee=ce),W&&(U=W),W=t[te],ce=H?H.sub(W)._unit()._perp():ee,ee=ee||ce;let ae=ee.add(ce);ae.x===0&&ae.y===0||ae._unit();let he=ee.x*ce.x+ee.y*ce.y,ge=ae.x*ce.x+ae.y*ce.y,Ie=ge!==0?1/ge:1/0,Ge=2*Math.sqrt(2-2*ge),We=ge<zA&&U&&H,Ue=ee.x*ce.y-ee.y*ce.x>0;if(We&&te>D){let He=W.dist(U);if(He>2*B){let qe=W.sub(W.sub(U)._mult(B/He)._round());this.updateDistance(U,qe),this.addCurrentVertex(qe,ee,0,0,F),U=qe}}let tt=U&&H,Qe=tt?l:P?"butt":h;if(tt&&Qe==="round"&&(Ie<y?Qe="miter":Ie<=2&&(Qe="fakeround")),Qe==="miter"&&Ie>g&&(Qe="bevel"),Qe==="bevel"&&(Ie>2&&(Qe="flipbevel"),Ie<g&&(Qe="miter")),U&&this.updateDistance(U,W),Qe==="miter")ae._mult(Ie),this.addCurrentVertex(W,ae,0,0,F);else if(Qe==="flipbevel"){if(Ie>100)ae=ce.mult(-1);else{let He=Ie*ee.add(ce).mag()/ee.sub(ce).mag();ae._perp()._mult(He*(Ue?-1:1))}this.addCurrentVertex(W,ae,0,0,F),this.addCurrentVertex(W,ae.mult(-1),0,0,F)}else if(Qe==="bevel"||Qe==="fakeround"){let He=-Math.sqrt(Ie*Ie-1),qe=Ue?He:0,it=Ue?0:He;if(U&&this.addCurrentVertex(W,ee,qe,it,F),Qe==="fakeround"){let at=Math.round(180*Ge/Math.PI/20);for(let lt=1;lt<at;lt++){let rt=lt/at;if(rt!==.5){let ri=rt-.5;rt+=rt*ri*(rt-1)*((1.0904+he*(he*(3.55645-1.43519*he)-3.2452))*ri*ri+(.848013+he*(.215638*he-1.06021)))}let mt=ce.sub(ee)._mult(rt)._add(ee)._unit()._mult(Ue?-1:1);this.addHalfVertex(W,mt.x,mt.y,!1,Ue,0,F)}}H&&this.addCurrentVertex(W,ce,-qe,-it,F)}else if(Qe==="butt")this.addCurrentVertex(W,ae,0,0,F);else if(Qe==="square"){let He=U?1:-1;this.addCurrentVertex(W,ae,He,He,F)}else Qe==="round"&&(U&&(this.addCurrentVertex(W,ee,0,0,F),this.addCurrentVertex(W,ee,1,1,F,!0)),H&&(this.addCurrentVertex(W,ce,-1,-1,F,!0),this.addCurrentVertex(W,ce,0,0,F)));if(We&&te<A-1){let He=W.dist(H);if(He>2*B){let qe=W.add(H.sub(W)._mult(B/He)._round());this.updateDistance(W,qe),this.addCurrentVertex(qe,ce,0,0,F),W=qe}}}}addCurrentVertex(t,i,l,h,g,y=!1){let x=i.y*h-i.x,S=-i.y-i.x*h;this.addHalfVertex(t,i.x+i.y*l,i.y-i.x*l,y,!1,l,g),this.addHalfVertex(t,x,S,y,!0,-h,g),this.distance>_v/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(t,i,l,h,g,y))}addHalfVertex({x:t,y:i},l,h,g,y,x,S){let P=.5*(this.lineClips?this.scaledDistance*(_v-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(g?1:0),(i<<1)+(y?1:0),Math.round(63*l)+128,Math.round(63*h)+128,1+(x===0?0:x<0?-1:1)|(63&P)<<2,P>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);let A=S.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,A,this.e2),S.primitiveLength++),y?this.e2=A:this.e1=A}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,i){this.distance+=t.dist(i),this.updateScaledDistance()}hasLineDasharray(t){for(let i of t){let l=i.paint.get("line-dasharray");if(l&&!l.isConstant())return!0}return!1}addLineDashDependencies(t,i,l,h){for(let g of t){let y=g.paint.get("line-dasharray");if(!y||y.value.kind==="constant")continue;let x=g.layout.get("line-cap")==="round",S={dasharray:y.value.evaluate({zoom:l-1},i,{}),round:x},P={dasharray:y.value.evaluate({zoom:l},i,{}),round:x},A={dasharray:y.value.evaluate({zoom:l+1},i,{}),round:x},D=`${S.dasharray.join(",")},${S.round}`,B=`${P.dasharray.join(",")},${P.round}`,F=`${A.dasharray.join(",")},${A.round}`;h.dashDependencies[D]=S,h.dashDependencies[B]=P,h.dashDependencies[F]=A,i.dashes[g.id]={min:D,mid:B,max:F}}}}let vv,bv;ut("LineBucket",vm,{omit:["layers","patternFeatures"]});var xv={get paint(){return bv=bv||new pn({"line-opacity":new xt(Ce.paint_line["line-opacity"]),"line-color":new xt(Ce.paint_line["line-color"]),"line-translate":new ft(Ce.paint_line["line-translate"]),"line-translate-anchor":new ft(Ce.paint_line["line-translate-anchor"]),"line-width":new xt(Ce.paint_line["line-width"]),"line-gap-width":new xt(Ce.paint_line["line-gap-width"]),"line-offset":new xt(Ce.paint_line["line-offset"]),"line-blur":new xt(Ce.paint_line["line-blur"]),"line-dasharray":new Jl(Ce.paint_line["line-dasharray"]),"line-pattern":new Jl(Ce.paint_line["line-pattern"]),"line-gradient":new Xc(Ce.paint_line["line-gradient"])})},get layout(){return vv=vv||new pn({"line-cap":new ft(Ce.layout_line["line-cap"]),"line-join":new xt(Ce.layout_line["line-join"]),"line-miter-limit":new ft(Ce.layout_line["line-miter-limit"]),"line-round-limit":new ft(Ce.layout_line["line-round-limit"]),"line-sort-key":new xt(Ce.layout_line["line-sort-key"])})}};class IA extends xt{possiblyEvaluate(t,i){return i=new Ai(Math.floor(i.zoom),{now:i.now,fadeDuration:i.fadeDuration,zoomHistory:i.zoomHistory,transition:i.transition}),super.possiblyEvaluate(t,i)}evaluate(t,i,l,h){return i=yi({},i,{zoom:Math.floor(i.zoom)}),super.evaluate(t,i,l,h)}}let ip;class LA extends Qn{constructor(t,i){super(t,xv,i),this.gradientVersion=0,ip||(ip=new IA(xv.paint.properties["line-width"].specification),ip.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(t){if(t==="line-gradient"){let i=this.gradientExpression();this.stepInterpolant=!!(function(l){return l._styleExpression!==void 0})(i)&&i._styleExpression.expression instanceof Oa,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,i){super.recalculate(t,i),this.paint._values["line-floorwidth"]=ip.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new vm(t)}queryRadius(t){let i=t,l=wv(su("line-width",this,i),su("line-gap-width",this,i)),h=su("line-offset",this,i);return l/2+Math.abs(h)+Xh(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:t,feature:i,featureState:l,geometry:h,transform:g,pixelsToTileUnits:y}){let x=Kh(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-g.bearingInRadians,y),S=y/2*wv(this.paint.get("line-width").evaluate(i,l),this.paint.get("line-gap-width").evaluate(i,l)),P=this.paint.get("line-offset").evaluate(i,l);return P&&(h=(function(A,D){let B=[];for(let F=0;F<A.length;F++){let W=qE(A[F]),U=[];for(let H=0;H<W.length;H++){let ee=W[H],ce=W[H-1],te=W[H+1],ae=H===0?new T(0,0):ee.sub(ce)._unit()._perp(),he=H===W.length-1?new T(0,0):te.sub(ee)._unit()._perp(),ge=ae._add(he)._unit(),Ie=ge.x*he.x+ge.y*he.y;Ie!==0&&ge._mult(1/Ie),U.push(ge._mult(D)._add(ee))}B.push(U)}return B})(h,P*y)),(function(A,D,B){for(let F=0;F<D.length;F++){let W=D[F];if(A.length>=3){for(let U=0;U<W.length;U++)if(au(A,W[U]))return!0}if(FE(A,W,B))return!0}return!1})(x,h,S)}isTileClipped(){return!0}}function wv(r,t){return t>0?t+2*r:r}let DA=ur([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),OA=ur([{name:"a_projected_pos",components:3,type:"Float32"}],4);ur([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);let RA=ur([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);ur([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);let Sv=ur([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),BA=ur([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function FA(r,t,i){return r.sections.forEach((l=>{l.text=(function(h,g,y){let x=g.layout.get("text-transform").evaluate(y,{});return x==="uppercase"?h=h.toLocaleUpperCase():x==="lowercase"&&(h=h.toLocaleLowerCase()),Xs.applyArabicShaping&&(h=Xs.applyArabicShaping(h)),h})(l.text,t,i)})),r}ur([{name:"triangle",components:3,type:"Uint16"}]),ur([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ur([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),ur([{type:"Float32",name:"offsetX"}]),ur([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),ur([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);var Or=24;let Fd={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u22EF":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},jA={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},NA={40:!0};function Tv(r,t,i,l,h,g){if("fontStack"in t){let y=i[t.fontStack],x=y&&y[r];return x?x.metrics.advance*t.scale+h:0}{let y=l[t.imageName];return y?y.displaySize[0]*t.scale*Or/g+h:0}}function Cv(r,t,i,l){let h=Math.pow(r-t,2);return l?r<t?h/2:2*h:h+Math.abs(i)*i}function qA(r,t,i){let l=0;return r===10&&(l-=1e4),i&&(l+=150),r!==40&&r!==65288||(l+=50),t!==41&&t!==65289||(l+=50),l}function kv(r,t,i,l,h,g){let y=null,x=Cv(t,i,h,g);for(let S of l){let P=Cv(t-S.x,i,h,g)+S.badness;P<=x&&(y=S,x=P)}return{index:r,x:t,priorBreak:y,badness:x}}function Pv(r){return r?Pv(r.priorBreak).concat(r.index):[]}class uu{constructor(t="",i=[],l=[]){this.text=t,this.sections=i,this.sectionIndex=l,this.imageSectionID=null}static fromFeature(t,i){let l=new uu;for(let h=0;h<t.sections.length;h++){let g=t.sections[h];g.image?l.addImageSection(g):l.addTextSection(g,i)}return l}length(){return[...this.text].length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}verticalizePunctuation(){this.text=(function(t){let i="",l={premature:!0,value:void 0},h=t[Symbol.iterator](),g=h.next(),y=t[Symbol.iterator]();y.next();let x=y.next();for(;!g.done;)i+=!x.done&&fd(x.value.codePointAt(0))&&!Fd[x.value]||!l.premature&&fd(l.value.codePointAt(0))&&!Fd[l.value]||!Fd[g.value]?g.value:Fd[g.value],l={value:g.value,premature:!1},g=h.next(),x=y.next();return i})(this.text)}hasZeroWidthSpaces(){return this.text.includes("\u200B")}trim(){let t=this.text.match(/^\s*/),i=t?t[0].length:0,l=this.text.match(/\S\s*$/),h=l?l[0].length-1:0;this.text=this.text.substring(i,this.text.length-h),this.sectionIndex=this.sectionIndex.slice(i,this.sectionIndex.length-h)}substring(t,i){let l=[...this.text].slice(t,i).join(""),h=this.sectionIndex.slice(t,i);return new uu(l,this.sections,h)}toCodeUnitIndex(t){return[...this.text].slice(0,t).join("").length}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((t,i)=>Math.max(t,this.sections[i].scale)),0)}getMaxImageSize(t){let i=0,l=0;for(let h=0;h<this.length();h++){let g=this.getSection(h);if("imageName"in g){let y=t[g.imageName];if(!y)continue;let x=y.displaySize;i=Math.max(i,x[0]),l=Math.max(l,x[1])}}return{maxImageWidth:i,maxImageHeight:l}}addTextSection(t,i){this.text+=t.text,this.sections.push({scale:t.scale||1,verticalAlign:t.verticalAlign||"bottom",fontStack:t.fontStack||i});let l=this.sections.length-1;this.sectionIndex.push(...[...t.text].map((()=>l)))}addImageSection(t){let i=t.image?t.image.name:"";if(i.length===0)return void fr("Can't add FormattedSection with an empty image.");let l=this.getNextImageSectionCharCode();l?(this.text+=String.fromCharCode(l),this.sections.push({scale:1,verticalAlign:t.verticalAlign||"bottom",imageName:i}),this.sectionIndex.push(this.sections.length-1)):fr("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}determineLineBreaks(t,i,l,h,g){let y=[],x=this.determineAverageLineWidth(t,i,l,h,g),S=this.hasZeroWidthSpaces(),P=0,A=0,D=this.text[Symbol.iterator](),B=D.next(),F=this.text[Symbol.iterator]();F.next();let W=F.next(),U=this.text[Symbol.iterator]();U.next(),U.next();let H=U.next();for(;!B.done;){let ee=this.getSection(A),ce=B.value.codePointAt(0);if(Fh(ce)||(P+=Tv(ce,ee,l,h,t,g)),!W.done){let te=Yl(ce),ae=W.value.codePointAt(0);(jA[ce]||te||"imageName"in ee||!H.done&&NA[ae])&&y.push(kv(A+1,P,x,y,qA(ce,ae,te&&S),!1))}A++,B=D.next(),W=F.next(),H=U.next()}return Pv(kv(this.length(),P,x,y,0,!0))}determineAverageLineWidth(t,i,l,h,g){let y=0,x=0;for(let S of this.text){let P=this.getSection(x);y+=Tv(S.codePointAt(0),P,l,h,t,g),x++}return y/Math.max(1,Math.ceil(y/i))}}let bm=4294967296,Ev=1/bm,Av=typeof TextDecoder=="undefined"?null:new TextDecoder("utf-8");class rp{constructor(t=new Uint8Array(16)){this.buf=ArrayBuffer.isView(t)?t:new Uint8Array(t),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(t,i,l=this.length){for(;this.pos<l;){let h=this.readVarint(),g=h>>3,y=this.pos;this.type=7&h,t(g,i,this),this.pos===y&&this.skip(h)}return i}readMessage(t,i){return this.readFields(t,i,this.readVarint()+this.pos)}readFixed32(){let t=this.dataView.getUint32(this.pos,!0);return this.pos+=4,t}readSFixed32(){let t=this.dataView.getInt32(this.pos,!0);return this.pos+=4,t}readFixed64(){let t=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*bm;return this.pos+=8,t}readSFixed64(){let t=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*bm;return this.pos+=8,t}readFloat(){let t=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,t}readDouble(){let t=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,t}readVarint(t){let i=this.buf,l,h;return h=i[this.pos++],l=127&h,h<128?l:(h=i[this.pos++],l|=(127&h)<<7,h<128?l:(h=i[this.pos++],l|=(127&h)<<14,h<128?l:(h=i[this.pos++],l|=(127&h)<<21,h<128?l:(h=i[this.pos],l|=(15&h)<<28,(function(g,y,x){let S=x.buf,P,A;if(A=S[x.pos++],P=(112&A)>>4,A<128||(A=S[x.pos++],P|=(127&A)<<3,A<128)||(A=S[x.pos++],P|=(127&A)<<10,A<128)||(A=S[x.pos++],P|=(127&A)<<17,A<128)||(A=S[x.pos++],P|=(127&A)<<24,A<128)||(A=S[x.pos++],P|=(1&A)<<31,A<128))return du(g,P,y);throw new Error("Expected varint not more than 10 bytes")})(l,t,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){let t=this.readVarint();return t%2==1?(t+1)/-2:t/2}readBoolean(){return!!this.readVarint()}readString(){let t=this.readVarint()+this.pos,i=this.pos;return this.pos=t,t-i>=12&&Av?Av.decode(this.buf.subarray(i,t)):(function(l,h,g){let y="",x=h;for(;x<g;){let S=l[x],P,A,D,B=null,F=S>239?4:S>223?3:S>191?2:1;if(x+F>g)break;F===1?S<128&&(B=S):F===2?(P=l[x+1],(192&P)==128&&(B=(31&S)<<6|63&P,B<=127&&(B=null))):F===3?(P=l[x+1],A=l[x+2],(192&P)==128&&(192&A)==128&&(B=(15&S)<<12|(63&P)<<6|63&A,(B<=2047||B>=55296&&B<=57343)&&(B=null))):F===4&&(P=l[x+1],A=l[x+2],D=l[x+3],(192&P)==128&&(192&A)==128&&(192&D)==128&&(B=(15&S)<<18|(63&P)<<12|(63&A)<<6|63&D,(B<=65535||B>=1114112)&&(B=null))),B===null?(B=65533,F=1):B>65535&&(B-=65536,y+=String.fromCharCode(B>>>10&1023|55296),B=56320|1023&B),y+=String.fromCharCode(B),x+=F}return y})(this.buf,i,t)}readBytes(){let t=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,t);return this.pos=t,i}readPackedVarint(t=[],i){let l=this.readPackedEnd();for(;this.pos<l;)t.push(this.readVarint(i));return t}readPackedSVarint(t=[]){let i=this.readPackedEnd();for(;this.pos<i;)t.push(this.readSVarint());return t}readPackedBoolean(t=[]){let i=this.readPackedEnd();for(;this.pos<i;)t.push(this.readBoolean());return t}readPackedFloat(t=[]){let i=this.readPackedEnd();for(;this.pos<i;)t.push(this.readFloat());return t}readPackedDouble(t=[]){let i=this.readPackedEnd();for(;this.pos<i;)t.push(this.readDouble());return t}readPackedFixed32(t=[]){let i=this.readPackedEnd();for(;this.pos<i;)t.push(this.readFixed32());return t}readPackedSFixed32(t=[]){let i=this.readPackedEnd();for(;this.pos<i;)t.push(this.readSFixed32());return t}readPackedFixed64(t=[]){let i=this.readPackedEnd();for(;this.pos<i;)t.push(this.readFixed64());return t}readPackedSFixed64(t=[]){let i=this.readPackedEnd();for(;this.pos<i;)t.push(this.readSFixed64());return t}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(t){let i=7&t;if(i===0)for(;this.buf[this.pos++]>127;);else if(i===2)this.pos=this.readVarint()+this.pos;else if(i===5)this.pos+=4;else{if(i!==1)throw new Error(`Unimplemented type: ${i}`);this.pos+=8}}writeTag(t,i){this.writeVarint(t<<3|i)}realloc(t){let i=this.length||16;for(;i<this.pos+t;)i*=2;if(i!==this.length){let l=new Uint8Array(i);l.set(this.buf),this.buf=l,this.dataView=new DataView(l.buffer),this.length=i}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(t){this.realloc(4),this.dataView.setInt32(this.pos,t,!0),this.pos+=4}writeSFixed32(t){this.realloc(4),this.dataView.setInt32(this.pos,t,!0),this.pos+=4}writeFixed64(t){this.realloc(8),this.dataView.setInt32(this.pos,-1&t,!0),this.dataView.setInt32(this.pos+4,Math.floor(t*Ev),!0),this.pos+=8}writeSFixed64(t){this.realloc(8),this.dataView.setInt32(this.pos,-1&t,!0),this.dataView.setInt32(this.pos+4,Math.floor(t*Ev),!0),this.pos+=8}writeVarint(t){(t=+t||0)>268435455||t<0?(function(i,l){let h,g;if(i>=0?(h=i%4294967296|0,g=i/4294967296|0):(h=~(-i%4294967296),g=~(-i/4294967296),4294967295^h?h=h+1|0:(h=0,g=g+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");l.realloc(10),(function(y,x,S){S.buf[S.pos++]=127&y|128,y>>>=7,S.buf[S.pos++]=127&y|128,y>>>=7,S.buf[S.pos++]=127&y|128,y>>>=7,S.buf[S.pos++]=127&y|128,S.buf[S.pos]=127&(y>>>=7)})(h,0,l),(function(y,x){let S=(7&y)<<4;x.buf[x.pos++]|=S|((y>>>=3)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y)))))})(g,l)})(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))}writeSVarint(t){this.writeVarint(t<0?2*-t-1:2*t)}writeBoolean(t){this.writeVarint(+t)}writeString(t){t=String(t),this.realloc(4*t.length),this.pos++;let i=this.pos;this.pos=(function(h,g,y){for(let x,S,P=0;P<g.length;P++){if(x=g.charCodeAt(P),x>55295&&x<57344){if(!S){x>56319||P+1===g.length?(h[y++]=239,h[y++]=191,h[y++]=189):S=x;continue}if(x<56320){h[y++]=239,h[y++]=191,h[y++]=189,S=x;continue}x=S-55296<<10|x-56320|65536,S=null}else S&&(h[y++]=239,h[y++]=191,h[y++]=189,S=null);x<128?h[y++]=x:(x<2048?h[y++]=x>>6|192:(x<65536?h[y++]=x>>12|224:(h[y++]=x>>18|240,h[y++]=x>>12&63|128),h[y++]=x>>6&63|128),h[y++]=63&x|128)}return y})(this.buf,t,this.pos);let l=this.pos-i;l>=128&&Mv(i,l,this),this.pos=i-1,this.writeVarint(l),this.pos+=l}writeFloat(t){this.realloc(4),this.dataView.setFloat32(this.pos,t,!0),this.pos+=4}writeDouble(t){this.realloc(8),this.dataView.setFloat64(this.pos,t,!0),this.pos+=8}writeBytes(t){let i=t.length;this.writeVarint(i),this.realloc(i);for(let l=0;l<i;l++)this.buf[this.pos++]=t[l]}writeRawMessage(t,i){this.pos++;let l=this.pos;t(i,this);let h=this.pos-l;h>=128&&Mv(l,h,this),this.pos=l-1,this.writeVarint(h),this.pos+=h}writeMessage(t,i,l){this.writeTag(t,2),this.writeRawMessage(i,l)}writePackedVarint(t,i){i.length&&this.writeMessage(t,VA,i)}writePackedSVarint(t,i){i.length&&this.writeMessage(t,WA,i)}writePackedBoolean(t,i){i.length&&this.writeMessage(t,ZA,i)}writePackedFloat(t,i){i.length&&this.writeMessage(t,GA,i)}writePackedDouble(t,i){i.length&&this.writeMessage(t,UA,i)}writePackedFixed32(t,i){i.length&&this.writeMessage(t,HA,i)}writePackedSFixed32(t,i){i.length&&this.writeMessage(t,$A,i)}writePackedFixed64(t,i){i.length&&this.writeMessage(t,YA,i)}writePackedSFixed64(t,i){i.length&&this.writeMessage(t,XA,i)}writeBytesField(t,i){this.writeTag(t,2),this.writeBytes(i)}writeFixed32Field(t,i){this.writeTag(t,5),this.writeFixed32(i)}writeSFixed32Field(t,i){this.writeTag(t,5),this.writeSFixed32(i)}writeFixed64Field(t,i){this.writeTag(t,1),this.writeFixed64(i)}writeSFixed64Field(t,i){this.writeTag(t,1),this.writeSFixed64(i)}writeVarintField(t,i){this.writeTag(t,0),this.writeVarint(i)}writeSVarintField(t,i){this.writeTag(t,0),this.writeSVarint(i)}writeStringField(t,i){this.writeTag(t,2),this.writeString(i)}writeFloatField(t,i){this.writeTag(t,5),this.writeFloat(i)}writeDoubleField(t,i){this.writeTag(t,1),this.writeDouble(i)}writeBooleanField(t,i){this.writeVarintField(t,+i)}}function du(r,t,i){return i?4294967296*t+(r>>>0):4294967296*(t>>>0)+(r>>>0)}function Mv(r,t,i){let l=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));i.realloc(l);for(let h=i.pos-1;h>=r;h--)i.buf[h+l]=i.buf[h]}function VA(r,t){for(let i=0;i<r.length;i++)t.writeVarint(r[i])}function WA(r,t){for(let i=0;i<r.length;i++)t.writeSVarint(r[i])}function GA(r,t){for(let i=0;i<r.length;i++)t.writeFloat(r[i])}function UA(r,t){for(let i=0;i<r.length;i++)t.writeDouble(r[i])}function ZA(r,t){for(let i=0;i<r.length;i++)t.writeBoolean(r[i])}function HA(r,t){for(let i=0;i<r.length;i++)t.writeFixed32(r[i])}function $A(r,t){for(let i=0;i<r.length;i++)t.writeSFixed32(r[i])}function YA(r,t){for(let i=0;i<r.length;i++)t.writeFixed64(r[i])}function XA(r,t){for(let i=0;i<r.length;i++)t.writeSFixed64(r[i])}function KA(r,t,i){r===1&&i.readMessage(JA,t)}function JA(r,t,i){if(r===3){let{id:l,bitmap:h,width:g,height:y,left:x,top:S,advance:P}=i.readMessage(QA,{});t.push({id:l,bitmap:new Ed({width:g+6,height:y+6},h),metrics:{width:g,height:y,left:x,top:S,advance:P}})}}function QA(r,t,i){r===1?t.id=i.readVarint():r===2?t.bitmap=i.readBytes():r===3?t.width=i.readVarint():r===4?t.height=i.readVarint():r===5?t.left=i.readSVarint():r===6?t.top=i.readSVarint():r===7&&(t.advance=i.readVarint())}function zv(r){let t=0,i=0;for(let y of r)t+=y.w*y.h,i=Math.max(i,y.w);r.sort(((y,x)=>x.h-y.h));let l=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),i),h:1/0}],h=0,g=0;for(let y of r)for(let x=l.length-1;x>=0;x--){let S=l[x];if(!(y.w>S.w||y.h>S.h)){if(y.x=S.x,y.y=S.y,g=Math.max(g,y.y+y.h),h=Math.max(h,y.x+y.w),y.w===S.w&&y.h===S.h){let P=l.pop();P&&x<l.length&&(l[x]=P)}else y.h===S.h?(S.x+=y.w,S.w-=y.w):y.w===S.w?(S.y+=y.h,S.h-=y.h):(l.push({x:S.x+y.w,y:S.y,w:S.w-y.w,h:y.h}),S.y+=y.h,S.h-=y.h);break}}return{w:h,h:g,fill:t/(h*g)||0}}class xm{constructor(t,{pixelRatio:i,version:l,stretchX:h,stretchY:g,content:y,textFitWidth:x,textFitHeight:S}){this.paddedRect=t,this.pixelRatio=i,this.stretchX=h,this.stretchY=g,this.content=y,this.version=l,this.textFitWidth=x,this.textFitHeight=S}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Iv{constructor(t,i){let l={},h={};this.haveRenderCallbacks=[];let g=[];this.addImages(t,l,g),this.addImages(i,h,g);let{w:y,h:x}=zv(g),S=new Bn({width:y||1,height:x||1});for(let P in t){let A=t[P],D=l[P].paddedRect;Bn.copy(A.data,S,{x:0,y:0},{x:D.x+1,y:D.y+1},A.data)}for(let P in i){let A=i[P],D=h[P].paddedRect,B=D.x+1,F=D.y+1,W=A.data.width,U=A.data.height;Bn.copy(A.data,S,{x:0,y:0},{x:B,y:F},A.data),Bn.copy(A.data,S,{x:0,y:U-1},{x:B,y:F-1},{width:W,height:1}),Bn.copy(A.data,S,{x:0,y:0},{x:B,y:F+U},{width:W,height:1}),Bn.copy(A.data,S,{x:W-1,y:0},{x:B-1,y:F},{width:1,height:U}),Bn.copy(A.data,S,{x:0,y:0},{x:B+W,y:F},{width:1,height:U})}this.image=S,this.iconPositions=l,this.patternPositions=h}addImages(t,i,l){for(let h in t){let g=t[h],y={x:0,y:0,w:g.data.width+2,h:g.data.height+2};l.push(y),i[h]=new xm(y,g),g.hasRenderCallback&&this.haveRenderCallbacks.push(h)}}patchUpdatedImages(t,i){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(let l in t.updatedImages)this.patchUpdatedImage(this.iconPositions[l],t.getImage(l),i),this.patchUpdatedImage(this.patternPositions[l],t.getImage(l),i)}patchUpdatedImage(t,i,l){if(!t||!i||t.version===i.version)return;t.version=i.version;let[h,g]=t.tl;l.update(i.data,void 0,{x:h,y:g})}}var fl;function np(r,t,i,l,h,g,y,x,S,P,A,D,B,F,W){let U=uu.fromFeature(r,h),H;D===f.az.vertical&&U.verticalizePunctuation();let ee=U.determineLineBreaks(P,g,t,l,F),{processBidirectionalText:ce,processStyledBidirectionalText:te}=Xs;if(ce&&U.sections.length===1){H=[],ee=ee.map((Ie=>U.toCodeUnitIndex(Ie)));let ge=ce(U.toString(),ee);for(let Ie of ge){let Ge=[...Ie].map((()=>0));H.push(new uu(Ie,U.sections,Ge))}}else if(te){H=[],ee=ee.map((We=>U.toCodeUnitIndex(We)));let ge=0,Ie=[];for(let We of U.text)Ie.push(...Array(We.length).fill(U.sectionIndex[ge])),ge++;let Ge=te(U.text,Ie,ee);for(let We of Ge){let Ue=[],tt="";for(let Qe of We[0])Ue.push(We[1][tt.length]),tt+=Qe;H.push(new uu(We[0],U.sections,Ue))}}else H=(function(ge,Ie){let Ge=[],We=0;for(let Ue of Ie)Ge.push(ge.substring(We,Ue)),We=Ue;return We<ge.length()&&Ge.push(ge.substring(We,ge.length())),Ge})(U,ee);let ae=[],he={positionedLines:ae,text:U.toString(),top:A[1],bottom:A[1],left:A[0],right:A[0],writingMode:D,iconsInText:!1,verticalizable:!1};return(function(ge,Ie,Ge,We,Ue,tt,Qe,He,qe,it,at,lt){let rt=0,mt=0,ri=0,Wt=0,$i=He==="right"?1:He==="left"?0:.5,rn=Or/lt,wr=0;for(let gi of Ue){gi.trim();let or=gi.getMaxScale(),hr={positionedGlyphs:[],lineOffset:0};ge.positionedLines[wr]=hr;let Bi=hr.positionedGlyphs,Fn=0;if(!gi.length()){mt+=tt,++wr;continue}let nn=eM(We,gi,rn),jn=0;for(let Fr of gi.text){let tr=gi.getSection(jn),Sr=Fr.codePointAt(0),lr=tM(qe,at,Sr),jr={glyph:Sr,imageName:null,x:rt,y:mt+-17,vertical:lr,scale:1,fontStack:"",sectionIndex:gi.getSectionIndex(jn),metrics:null,rect:null},Lo;if("fontStack"in tr){if(Lo=iM(tr,Sr,lr,nn,Ie,Ge),!Lo)continue;jr.fontStack=tr.fontStack}else{if(ge.iconsInText=!0,tr.scale*=rn,Lo=rM(tr,lr,or,nn,We),!Lo)continue;Fn=Math.max(Fn,Lo.imageOffset),jr.imageName=tr.imageName}let{rect:ms,metrics:Ud,baselineOffset:vl}=Lo;jr.y+=vl,jr.scale=tr.scale,jr.metrics=Ud,jr.rect=ms,Bi.push(jr),lr?(ge.verticalizable=!0,rt+=("imageName"in tr?Ud.advance:Or)*tr.scale+it):rt+=Ud.advance*tr.scale+it,jn++}Bi.length!==0&&(ri=Math.max(rt-it,ri),nM(Bi,0,Bi.length-1,$i)),rt=0,hr.lineOffset=Math.max(Fn,(or-1)*Or);let Wa=tt*or+Fn;mt+=Wa,Wt=Math.max(Wa,Wt),++wr}let{horizontalAlign:Yi,verticalAlign:Ni}=wm(Qe);(function(gi,or,hr,Bi,Fn,nn,jn,Wa,Fr){let tr=(or-hr)*Fn,Sr=0;Sr=nn!==jn?-Wa*Bi- -17:-Bi*Fr*jn+.5*jn;for(let lr of gi)for(let jr of lr.positionedGlyphs)jr.x+=tr,jr.y+=Sr})(ge.positionedLines,$i,Yi,Ni,ri,Wt,tt,mt,Ue.length),ge.top+=-Ni*mt,ge.bottom=ge.top+mt,ge.left+=-Yi*ri,ge.right=ge.left+ri})(he,t,i,l,H,y,x,S,D,P,B,W),!(function(ge){for(let Ie of ge)if(Ie.positionedGlyphs.length!==0)return!1;return!0})(ae)&&he}function wm(r){let t=.5,i=.5;switch(r){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(r){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:t,verticalAlign:i}}function eM(r,t,i){let l=t.getMaxScale()*Or,{maxImageWidth:h,maxImageHeight:g}=t.getMaxImageSize(r),y=Math.max(l,g*i);return{verticalLineContentWidth:Math.max(l,h*i),horizontalLineContentHeight:y}}function Lv(r){switch(r){case"top":return 0;case"center":return .5;default:return 1}}function tM(r,t,i){return!(r===f.az.horizontal||!t&&!pd(i)||t&&(Fh(i)||(l=i,/\p{sc=Arab}/u.test(String.fromCodePoint(l)))));var l}function iM(r,t,i,l,h,g){let y=g[r.fontStack],x=(function(P,A,D,B){if(P&&P.rect)return P;let F=A[D.fontStack],W=F&&F[B];return W?{rect:null,metrics:W.metrics}:null})(y&&y[t],h,r,t);if(x===null)return null;let S;if(i)S=l.verticalLineContentWidth-r.scale*Or;else{let P=Lv(r.verticalAlign);S=(l.horizontalLineContentHeight-r.scale*Or)*P}return{rect:x.rect,metrics:x.metrics,baselineOffset:S}}function rM(r,t,i,l,h){let g=h[r.imageName];if(!g)return null;let y=g.paddedRect,x=g.displaySize,S={width:x[0],height:x[1],left:1,top:-3,advance:t?x[1]:x[0]},P;if(t)P=l.verticalLineContentWidth-x[1]*r.scale;else{let A=Lv(r.verticalAlign);P=(l.horizontalLineContentHeight-x[1]*r.scale)*A}return{rect:y,metrics:S,baselineOffset:P,imageOffset:(t?x[0]:x[1])*r.scale-Or*i}}function nM(r,t,i,l){if(l===0)return;let h=r[i],g=(r[i].x+h.metrics.advance*h.scale)*l;for(let y=t;y<=i;y++)r[y].x-=g}function aM(r,t,i){let{horizontalAlign:l,verticalAlign:h}=wm(i),g=t[0]-r.displaySize[0]*l,y=t[1]-r.displaySize[1]*h;return{image:r,top:y,bottom:y+r.displaySize[1],left:g,right:g+r.displaySize[0]}}function Dv(r){var t,i;let l=r.left,h=r.top,g=r.right-l,y=r.bottom-h,x=(t=r.image.textFitWidth)!==null&&t!==void 0?t:"stretchOrShrink",S=(i=r.image.textFitHeight)!==null&&i!==void 0?i:"stretchOrShrink",P=(r.image.content[2]-r.image.content[0])/(r.image.content[3]-r.image.content[1]);if(S==="proportional"){if(x==="stretchOnly"&&g/y<P||x==="proportional"){let A=Math.ceil(y*P);l*=A/g,g=A}}else if(x==="proportional"&&S==="stretchOnly"&&P!==0&&g/y>P){let A=Math.ceil(g/P);h*=A/y,y=A}return{x1:l,y1:h,x2:l+g,y2:h+y}}function Ov(r,t,i,l,h,g){let y=r.image,x;if(y.content){let H=y.content,ee=y.pixelRatio||1;x=[H[0]/ee,H[1]/ee,y.displaySize[0]-H[2]/ee,y.displaySize[1]-H[3]/ee]}let S=t.left*g,P=t.right*g,A,D,B,F;i==="width"||i==="both"?(F=h[0]+S-l[3],D=h[0]+P+l[1]):(F=h[0]+(S+P-y.displaySize[0])/2,D=F+y.displaySize[0]);let W=t.top*g,U=t.bottom*g;return i==="height"||i==="both"?(A=h[1]+W-l[0],B=h[1]+U+l[2]):(A=h[1]+(W+U-y.displaySize[1])/2,B=A+y.displaySize[1]),{image:y,top:A,right:D,bottom:B,left:F,collisionPadding:x}}ut("ImagePosition",xm),ut("ImageAtlas",Iv),f.az=void 0,(fl=f.az||(f.az={}))[fl.none=0]="none",fl[fl.horizontal=1]="horizontal",fl[fl.vertical=2]="vertical",fl[fl.horizontalOnly=3]="horizontalOnly";let zo=128,ml=32640;function Rv(r,t){let{expression:i}=t;if(i.kind==="constant")return{kind:"constant",layoutSize:i.evaluate(new Ai(r+1))};if(i.kind==="source")return{kind:"source"};{let{zoomStops:l,interpolationType:h}=i,g=0;for(;g<l.length&&l[g]<=r;)g++;g=Math.max(0,g-1);let y=g;for(;y<l.length&&l[y]<r+1;)y++;y=Math.min(l.length-1,y);let x=l[g],S=l[y];return i.kind==="composite"?{kind:"composite",minZoom:x,maxZoom:S,interpolationType:h}:{kind:"camera",minZoom:x,maxZoom:S,minSize:i.evaluate(new Ai(x)),maxSize:i.evaluate(new Ai(S)),interpolationType:h}}}function Sm(r,t,i){let l="never",h=r.get(t);return h?l=h:r.get(i)&&(l="always"),l}let sM=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ap(r,t,i,l,h,g,y,x,S,P,A,D,B){let F=x?Math.min(ml,Math.round(x[0])):0,W=x?Math.min(ml,Math.round(x[1])):0;r.emplaceBack(t,i,Math.round(32*l),Math.round(32*h),g,y,(F<<1)+(S?1:0),W,16*P,16*A,256*D,256*B)}function Tm(r,t,i){r.emplaceBack(t.x,t.y,i),r.emplaceBack(t.x,t.y,i),r.emplaceBack(t.x,t.y,i),r.emplaceBack(t.x,t.y,i)}function oM(r){for(let t of r.sections)if(qh(t.text))return!0;return!1}class Cm{constructor(t){this.layoutVertexArray=new fe,this.indexArray=new Be,this.programConfigurations=t,this.segments=new ot,this.dynamicLayoutVertexArray=new Te,this.opacityVertexArray=new Fe,this.hasVisibleVertices=!1,this.placedSymbolArray=new w}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(t,i,l,h){this.isEmpty()||(l&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,DA.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,i),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,OA.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,sM,!0),this.opacityVertexBuffer.itemSize=1),(l||h)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}ut("SymbolBuffers",Cm);class km{constructor(t,i,l){this.layoutVertexArray=new t,this.layoutAttributes=i,this.indexArray=new l,this.segments=new ot,this.collisionVertexArray=new Re}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,RA.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}ut("CollisionBuffers",km);class hu{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((y=>y.id)),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];let i=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Rv(this.zoom,i["text-size"]),this.iconSizeData=Rv(this.zoom,i["icon-size"]);let l=this.layers[0].layout,h=l.get("symbol-sort-key"),g=l.get("symbol-z-order");this.canOverlap=Sm(l,"text-overlap","text-allow-overlap")!=="never"||Sm(l,"icon-overlap","icon-allow-overlap")!=="never"||l.get("text-ignore-placement")||l.get("icon-ignore-placement"),this.sortFeaturesByKey=g!=="viewport-y"&&!h.isConstant(),this.sortFeaturesByY=(g==="viewport-y"||g==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,l.get("symbol-placement")==="point"&&(this.writingModes=l.get("text-writing-mode").map((y=>f.az[y]))),this.stateDependentLayerIds=this.layers.filter((y=>y.isStateDependent())).map((y=>y.id)),this.sourceID=t.sourceID}createArrays(){this.text=new Cm(new Mo(this.layers,this.zoom,(t=>/^text/.test(t)))),this.icon=new Cm(new Mo(this.layers,this.zoom,(t=>/^icon/.test(t)))),this.glyphOffsetArray=new z,this.lineVertexArray=new O,this.symbolInstances=new E,this.textAnchorOffsets=new j}calculateGlyphDependencies(t,i,l,h,g){for(let y of t)if(i[y.codePointAt(0)]=!0,(l||h)&&g){let x=Fd[y];x&&(i[x.codePointAt(0)]=!0)}}populate(t,i,l){let h=this.layers[0],g=h.layout,y=g.get("text-font"),x=g.get("text-field"),S=g.get("icon-image"),P=(x.value.kind!=="constant"||x.value.value instanceof Xr&&!x.value.value.isEmpty()||x.value.value.toString().length>0)&&(y.value.kind!=="constant"||y.value.value.length>0),A=S.value.kind!=="constant"||!!S.value.value||Object.keys(S.parameters).length>0,D=g.get("symbol-sort-key");if(this.features=[],!P&&!A)return;let B=i.iconDependencies,F=i.glyphDependencies,W=i.availableImages,U=new Ai(this.zoom);for(let{feature:H,id:ee,index:ce,sourceLayerIndex:te}of t){let ae=h._featureFilter.needGeometry,he=eo(H,ae);if(!h._featureFilter.filter(U,he,l))continue;let ge,Ie;if(ae||(he.geometry=Qs(H)),P){let We=h.getValueAndResolveTokens("text-field",he,l,W),Ue=Xr.factory(We),tt=this.hasRTLText=this.hasRTLText||oM(Ue);(!tt||Xs.getRTLTextPluginStatus()==="unavailable"||tt&&Xs.isParsed())&&(ge=FA(Ue,h,he))}if(A){let We=h.getValueAndResolveTokens("icon-image",he,l,W);Ie=We instanceof Ur?We:Ur.fromString(We)}if(!ge&&!Ie)continue;let Ge=this.sortFeaturesByKey?D.evaluate(he,{},l):void 0;if(this.features.push({id:ee,text:ge,icon:Ie,index:ce,sourceLayerIndex:te,geometry:he.geometry,properties:H.properties,type:Od.types[H.type],sortKey:Ge}),Ie&&(B[Ie.name]=!0),ge){let We=y.evaluate(he,{},l).join(","),Ue=g.get("text-rotation-alignment")!=="viewport"&&g.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(f.az.vertical)>=0;for(let tt of ge.sections)if(tt.image)B[tt.image.name]=!0;else{let Qe=hl(ge.toString()),He=tt.fontStack||We,qe=F[He]=F[He]||{};this.calculateGlyphDependencies(tt.text,qe,Ue,this.allowVerticalPlacement,Qe)}}}g.get("symbol-placement")==="line"&&(this.features=(function(H){let ee={},ce={},te=[],ae=0;function he(We){te.push(H[We]),ae++}function ge(We,Ue,tt){let Qe=ce[We];return delete ce[We],ce[Ue]=Qe,te[Qe].geometry[0].pop(),te[Qe].geometry[0]=te[Qe].geometry[0].concat(tt[0]),Qe}function Ie(We,Ue,tt){let Qe=ee[Ue];return delete ee[Ue],ee[We]=Qe,te[Qe].geometry[0].shift(),te[Qe].geometry[0]=tt[0].concat(te[Qe].geometry[0]),Qe}function Ge(We,Ue,tt){let Qe=tt?Ue[0][Ue[0].length-1]:Ue[0][0];return`${We}:${Qe.x}:${Qe.y}`}for(let We=0;We<H.length;We++){let Ue=H[We],tt=Ue.geometry,Qe=Ue.text?Ue.text.toString():null;if(!Qe){he(We);continue}let He=Ge(Qe,tt),qe=Ge(Qe,tt,!0);if(He in ce&&qe in ee&&ce[He]!==ee[qe]){let it=Ie(He,qe,tt),at=ge(He,qe,te[it].geometry);delete ee[He],delete ce[qe],ce[Ge(Qe,te[at].geometry,!0)]=at,te[it].geometry=null}else He in ce?ge(He,qe,tt):qe in ee?Ie(He,qe,tt):(he(We),ee[He]=ae-1,ce[qe]=ae-1)}return te.filter((We=>We.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((H,ee)=>H.sortKey-ee.sortKey))}update(t,i,l){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,i,this.layers,{imagePositions:l}),this.icon.programConfigurations.updatePaintArrays(t,i,this.layers,{imagePositions:l}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,i){let l=this.lineVertexArray.length;if(t.segment!==void 0){let h=t.dist(i[t.segment+1]),g=t.dist(i[t.segment]),y={};for(let x=t.segment+1;x<i.length;x++)y[x]={x:i[x].x,y:i[x].y,tileUnitDistanceFromAnchor:h},x<i.length-1&&(h+=i[x+1].dist(i[x]));for(let x=t.segment||0;x>=0;x--)y[x]={x:i[x].x,y:i[x].y,tileUnitDistanceFromAnchor:g},x>0&&(g+=i[x-1].dist(i[x]));for(let x=0;x<i.length;x++){let S=y[x];this.lineVertexArray.emplaceBack(S.x,S.y,S.tileUnitDistanceFromAnchor)}}return{lineStartIndex:l,lineLength:this.lineVertexArray.length-l}}addSymbols(t,i,l,h,g,y,x,S,P,A,D,B){let F=t.indexArray,W=t.layoutVertexArray,U=t.segments.prepareSegment(4*i.length,W,F,this.canOverlap?y.sortKey:void 0),H=this.glyphOffsetArray.length,ee=U.vertexLength,ce=this.allowVerticalPlacement&&x===f.az.vertical?Math.PI/2:0,te=y.text&&y.text.sections;for(let ae=0;ae<i.length;ae++){let{tl:he,tr:ge,bl:Ie,br:Ge,tex:We,pixelOffsetTL:Ue,pixelOffsetBR:tt,minFontScaleX:Qe,minFontScaleY:He,glyphOffset:qe,isSDF:it,sectionIndex:at}=i[ae],lt=U.vertexLength,rt=qe[1];ap(W,S.x,S.y,he.x,rt+he.y,We.x,We.y,l,it,Ue.x,Ue.y,Qe,He),ap(W,S.x,S.y,ge.x,rt+ge.y,We.x+We.w,We.y,l,it,tt.x,Ue.y,Qe,He),ap(W,S.x,S.y,Ie.x,rt+Ie.y,We.x,We.y+We.h,l,it,Ue.x,tt.y,Qe,He),ap(W,S.x,S.y,Ge.x,rt+Ge.y,We.x+We.w,We.y+We.h,l,it,tt.x,tt.y,Qe,He),Tm(t.dynamicLayoutVertexArray,S,ce),F.emplaceBack(lt,lt+2,lt+1),F.emplaceBack(lt+1,lt+2,lt+3),U.vertexLength+=4,U.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(qe[0]),ae!==i.length-1&&at===i[ae+1].sectionIndex||t.programConfigurations.populatePaintArrays(W.length,y,y.index,{imagePositions:{},canonical:B,formattedSection:te&&te[at]})}t.placedSymbolArray.emplaceBack(S.x,S.y,H,this.glyphOffsetArray.length-H,ee,P,A,S.segment,l?l[0]:0,l?l[1]:0,h[0],h[1],x,0,!1,0,D)}_addCollisionDebugVertex(t,i,l,h,g,y){return i.emplaceBack(0,0),t.emplaceBack(l.x,l.y,h,g,Math.round(y.x),Math.round(y.y))}addCollisionDebugVertices(t,i,l,h,g,y,x){let S=g.segments.prepareSegment(4,g.layoutVertexArray,g.indexArray),P=S.vertexLength,A=g.layoutVertexArray,D=g.collisionVertexArray,B=x.anchorX,F=x.anchorY;this._addCollisionDebugVertex(A,D,y,B,F,new T(t,i)),this._addCollisionDebugVertex(A,D,y,B,F,new T(l,i)),this._addCollisionDebugVertex(A,D,y,B,F,new T(l,h)),this._addCollisionDebugVertex(A,D,y,B,F,new T(t,h)),S.vertexLength+=4;let W=g.indexArray;W.emplaceBack(P,P+1),W.emplaceBack(P+1,P+2),W.emplaceBack(P+2,P+3),W.emplaceBack(P+3,P),S.primitiveLength+=4}addDebugCollisionBoxes(t,i,l,h){for(let g=t;g<i;g++){let y=this.collisionBoxArray.get(g);this.addCollisionDebugVertices(y.x1,y.y1,y.x2,y.y2,h?this.textCollisionBox:this.iconCollisionBox,y.anchorPoint,l)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new km(Oe,Sv.members,Je),this.iconCollisionBox=new km(Oe,Sv.members,Je);for(let t=0;t<this.symbolInstances.length;t++){let i=this.symbolInstances.get(t);this.addDebugCollisionBoxes(i.textBoxStartIndex,i.textBoxEndIndex,i,!0),this.addDebugCollisionBoxes(i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i,!0),this.addDebugCollisionBoxes(i.iconBoxStartIndex,i.iconBoxEndIndex,i,!1),this.addDebugCollisionBoxes(i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex,i,!1)}}_deserializeCollisionBoxesForSymbol(t,i,l,h,g,y,x,S,P){let A={};for(let D=i;D<l;D++){let B=t.get(D);A.textBox={x1:B.x1,y1:B.y1,x2:B.x2,y2:B.y2,anchorPointX:B.anchorPointX,anchorPointY:B.anchorPointY},A.textFeatureIndex=B.featureIndex;break}for(let D=h;D<g;D++){let B=t.get(D);A.verticalTextBox={x1:B.x1,y1:B.y1,x2:B.x2,y2:B.y2,anchorPointX:B.anchorPointX,anchorPointY:B.anchorPointY},A.verticalTextFeatureIndex=B.featureIndex;break}for(let D=y;D<x;D++){let B=t.get(D);A.iconBox={x1:B.x1,y1:B.y1,x2:B.x2,y2:B.y2,anchorPointX:B.anchorPointX,anchorPointY:B.anchorPointY},A.iconFeatureIndex=B.featureIndex;break}for(let D=S;D<P;D++){let B=t.get(D);A.verticalIconBox={x1:B.x1,y1:B.y1,x2:B.x2,y2:B.y2,anchorPointX:B.anchorPointX,anchorPointY:B.anchorPointY},A.verticalIconFeatureIndex=B.featureIndex;break}return A}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let i=0;i<this.symbolInstances.length;i++){let l=this.symbolInstances.get(i);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,l.textBoxStartIndex,l.textBoxEndIndex,l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l.iconBoxStartIndex,l.iconBoxEndIndex,l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,i){let l=t.placedSymbolArray.get(i),h=l.vertexStartIndex+4*l.numGlyphs;for(let g=l.vertexStartIndex;g<h;g+=4)t.indexArray.emplaceBack(g,g+2,g+1),t.indexArray.emplaceBack(g+1,g+2,g+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;let i=Math.sin(t),l=Math.cos(t),h=[],g=[],y=[];for(let x=0;x<this.symbolInstances.length;++x){y.push(x);let S=this.symbolInstances.get(x);h.push(0|Math.round(i*S.anchorX+l*S.anchorY)),g.push(S.featureIndex)}return y.sort(((x,S)=>h[x]-h[S]||g[S]-g[x])),y}addToSortKeyRanges(t,i){let l=this.sortKeyRanges[this.sortKeyRanges.length-1];l&&l.sortKey===i?l.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:i,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(let i of this.symbolInstanceIndexes){let l=this.symbolInstances.get(i);this.featureSortOrder.push(l.featureIndex),[l.rightJustifiedTextSymbolIndex,l.centerJustifiedTextSymbolIndex,l.leftJustifiedTextSymbolIndex].forEach(((h,g,y)=>{h>=0&&y.indexOf(h)===g&&this.addIndicesForPlacedSymbol(this.text,h)})),l.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,l.verticalPlacedTextSymbolIndex),l.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,l.placedIconSymbolIndex),l.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,l.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Bv,Fv;ut("SymbolBucket",hu,{omit:["layers","collisionBoxArray","features","compareText"]}),hu.MAX_GLYPHS=65535,hu.addDynamicAttributes=Tm;var Pm={get paint(){return Fv=Fv||new pn({"icon-opacity":new xt(Ce.paint_symbol["icon-opacity"]),"icon-color":new xt(Ce.paint_symbol["icon-color"]),"icon-halo-color":new xt(Ce.paint_symbol["icon-halo-color"]),"icon-halo-width":new xt(Ce.paint_symbol["icon-halo-width"]),"icon-halo-blur":new xt(Ce.paint_symbol["icon-halo-blur"]),"icon-translate":new ft(Ce.paint_symbol["icon-translate"]),"icon-translate-anchor":new ft(Ce.paint_symbol["icon-translate-anchor"]),"text-opacity":new xt(Ce.paint_symbol["text-opacity"]),"text-color":new xt(Ce.paint_symbol["text-color"],{runtimeType:Yr,getOverride:r=>r.textColor,hasOverride:r=>!!r.textColor}),"text-halo-color":new xt(Ce.paint_symbol["text-halo-color"]),"text-halo-width":new xt(Ce.paint_symbol["text-halo-width"]),"text-halo-blur":new xt(Ce.paint_symbol["text-halo-blur"]),"text-translate":new ft(Ce.paint_symbol["text-translate"]),"text-translate-anchor":new ft(Ce.paint_symbol["text-translate-anchor"])})},get layout(){return Bv=Bv||new pn({"symbol-placement":new ft(Ce.layout_symbol["symbol-placement"]),"symbol-spacing":new ft(Ce.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ft(Ce.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new xt(Ce.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ft(Ce.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ft(Ce.layout_symbol["icon-allow-overlap"]),"icon-overlap":new ft(Ce.layout_symbol["icon-overlap"]),"icon-ignore-placement":new ft(Ce.layout_symbol["icon-ignore-placement"]),"icon-optional":new ft(Ce.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ft(Ce.layout_symbol["icon-rotation-alignment"]),"icon-size":new xt(Ce.layout_symbol["icon-size"]),"icon-text-fit":new ft(Ce.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ft(Ce.layout_symbol["icon-text-fit-padding"]),"icon-image":new xt(Ce.layout_symbol["icon-image"]),"icon-rotate":new xt(Ce.layout_symbol["icon-rotate"]),"icon-padding":new xt(Ce.layout_symbol["icon-padding"]),"icon-keep-upright":new ft(Ce.layout_symbol["icon-keep-upright"]),"icon-offset":new xt(Ce.layout_symbol["icon-offset"]),"icon-anchor":new xt(Ce.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ft(Ce.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ft(Ce.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ft(Ce.layout_symbol["text-rotation-alignment"]),"text-field":new xt(Ce.layout_symbol["text-field"]),"text-font":new xt(Ce.layout_symbol["text-font"]),"text-size":new xt(Ce.layout_symbol["text-size"]),"text-max-width":new xt(Ce.layout_symbol["text-max-width"]),"text-line-height":new ft(Ce.layout_symbol["text-line-height"]),"text-letter-spacing":new xt(Ce.layout_symbol["text-letter-spacing"]),"text-justify":new xt(Ce.layout_symbol["text-justify"]),"text-radial-offset":new xt(Ce.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ft(Ce.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new xt(Ce.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new xt(Ce.layout_symbol["text-anchor"]),"text-max-angle":new ft(Ce.layout_symbol["text-max-angle"]),"text-writing-mode":new ft(Ce.layout_symbol["text-writing-mode"]),"text-rotate":new xt(Ce.layout_symbol["text-rotate"]),"text-padding":new ft(Ce.layout_symbol["text-padding"]),"text-keep-upright":new ft(Ce.layout_symbol["text-keep-upright"]),"text-transform":new xt(Ce.layout_symbol["text-transform"]),"text-offset":new xt(Ce.layout_symbol["text-offset"]),"text-allow-overlap":new ft(Ce.layout_symbol["text-allow-overlap"]),"text-overlap":new ft(Ce.layout_symbol["text-overlap"]),"text-ignore-placement":new ft(Ce.layout_symbol["text-ignore-placement"]),"text-optional":new ft(Ce.layout_symbol["text-optional"])})}};class jv{constructor(t){if(t.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=t.property.overrides?t.property.overrides.runtimeType:Wi,this.defaultValue=t}evaluate(t){if(t.formattedSection){let i=this.defaultValue.property.overrides;if(i&&i.hasOverride(t.formattedSection))return i.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}ut("FormatSectionOverride",jv,{omit:["defaultValue"]});class sp extends Qn{constructor(t,i){super(t,Pm,i)}recalculate(t,i){if(super.recalculate(t,i),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){let l=this.layout.get("text-writing-mode");if(l){let h=[];for(let g of l)h.indexOf(g)<0&&h.push(g);this.layout._values["text-writing-mode"]=h}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,i,l,h){let g=this.layout.get(t).evaluate(i,{},l,h),y=this._unevaluatedLayout._values[t];return y.isDataDriven()||Hs(y.value)||!g?g:(function(x,S){return S.replace(/{([^{}]+)}/g,((P,A)=>x&&A in x?String(x[A]):""))})(i.properties,g)}createBucket(t){return new hu(t)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(let t of Pm.paint.overridableProperties){if(!sp.hasPaintOverride(this.layout,t))continue;let i=this.paint.get(t),l=new jv(i),h=new sl(l,i.property.specification),g=null;g=i.value.kind==="constant"||i.value.kind==="source"?new v("source",h):new C("composite",h,i.value.zoomStops),this.paint._values[t]=new ba(i.property,g,i.parameters)}}_handleOverridablePaintPropertyUpdate(t,i,l){return!(!this.layout||i.isDataDriven()||l.isDataDriven())&&sp.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,i){let l=t.get("text-field"),h=Pm.paint.properties[i],g=!1,y=x=>{for(let S of x)if(h.overrides&&h.overrides.hasOverride(S))return void(g=!0)};if(l.value.kind==="constant"&&l.value.value instanceof Xr)y(l.value.value.sections);else if(l.value.kind==="source"||l.value.kind==="composite"){let x=P=>{g||(P instanceof In&&ei(P.value)===Cs?y(P.value.sections):P instanceof _o?y(P.sections):P.eachChild(x))},S=l.value;S._styleExpression&&x(S._styleExpression.expression)}return g}}let Nv;var lM={get paint(){return Nv=Nv||new pn({"background-color":new ft(Ce.paint_background["background-color"]),"background-pattern":new Yc(Ce.paint_background["background-pattern"]),"background-opacity":new ft(Ce.paint_background["background-opacity"])})}};class cM extends Qn{constructor(t,i){super(t,lM,i)}}class uM extends Qn{constructor(t,i){super(t,{},i),this.onAdd=l=>{this.implementation.onAdd&&this.implementation.onAdd(l,l.painter.context.gl)},this.onRemove=l=>{this.implementation.onRemove&&this.implementation.onRemove(l,l.painter.context.gl)},this.implementation=t}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class dM{constructor(t){this._methodToThrottle=t,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}let hM={once:!0},Em=63710088e-1;class gl{constructor(t,i){if(isNaN(t)||isNaN(i))throw new Error(`Invalid LngLat object: (${t}, ${i})`);if(this.lng=+t,this.lat=+i,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new gl(pr(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){let i=Math.PI/180,l=this.lat*i,h=t.lat*i,g=Math.sin(l)*Math.sin(h)+Math.cos(l)*Math.cos(h)*Math.cos((t.lng-this.lng)*i);return Em*Math.acos(Math.min(g,1))}static convert(t){if(t instanceof gl)return t;if(Array.isArray(t)&&(t.length===2||t.length===3))return new gl(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null)return new gl(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}let qv=2*Math.PI*Em;function Vv(r){return qv*Math.cos(r*Math.PI/180)}function Wv(r){return(180+r)/360}function Gv(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function Uv(r,t){return r/Vv(t)}function Zv(r){return 360*r-180}function op(r){return 360/Math.PI*Math.atan(Math.exp((180-360*r)*Math.PI/180))-90}function Hv(r,t){return r*Vv(op(t))}class jd{constructor(t,i,l=0){this.x=+t,this.y=+i,this.z=+l}static fromLngLat(t,i=0){let l=gl.convert(t);return new jd(Wv(l.lng),Gv(l.lat),Uv(i,l.lat))}toLngLat(){return new gl(Zv(this.x),op(this.y))}toAltitude(){return Hv(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/qv*(t=op(this.y),1/Math.cos(t*Math.PI/180));var t}}function $v(r,t,i){var l=2*Math.PI*6378137/256/Math.pow(2,i);return[r*l-2*Math.PI*6378137/2,t*l-2*Math.PI*6378137/2]}class Am{constructor(t,i,l){if(!(function(h,g,y){return!(h<0||h>25||y<0||y>=Math.pow(2,h)||g<0||g>=Math.pow(2,h))})(t,i,l))throw new Error(`x=${i}, y=${l}, z=${t} outside of bounds. 0<=x<${Math.pow(2,t)}, 0<=y<${Math.pow(2,t)} 0<=z<=25 `);this.z=t,this.x=i,this.y=l,this.key=pu(0,t,t,i,l)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,i,l){let h=(y=this.y,x=this.z,S=$v(256*(g=this.x),256*(y=Math.pow(2,x)-y-1),x),P=$v(256*(g+1),256*(y+1),x),S[0]+","+S[1]+","+P[0]+","+P[1]);var g,y,x,S,P;let A=(function(D,B,F){let W,U="";for(let H=D;H>0;H--)W=1<<H-1,U+=(B&W?1:0)+(F&W?2:0);return U})(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(l==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,i>1?"@2x":"").replace(/{quadkey}/g,A).replace(/{bbox-epsg-3857}/g,h)}isChildOf(t){let i=this.z-t.z;return i>0&&t.x===this.x>>i&&t.y===this.y>>i}getTilePoint(t){let i=Math.pow(2,this.z);return new T((t.x*i-this.x)*qt,(t.y*i-this.y)*qt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Yv{constructor(t,i){this.wrap=t,this.canonical=i,this.key=pu(t,i.z,i.z,i.x,i.y)}}class Sa{constructor(t,i,l,h,g){if(this.terrainRttPosMatrix32f=null,t<l)throw new Error(`overscaledZ should be >= z; overscaledZ = ${t}; z = ${l}`);this.overscaledZ=t,this.wrap=i,this.canonical=new Am(l,+h,+g),this.key=pu(i,t,l,h,g)}clone(){return new Sa(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);let i=this.canonical.z-t;return t>this.canonical.z?new Sa(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Sa(t,this.wrap,t,this.canonical.x>>i,this.canonical.y>>i)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(t,i){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);let l=this.canonical.z-t;return t>this.canonical.z?pu(this.wrap*+i,t,this.canonical.z,this.canonical.x,this.canonical.y):pu(this.wrap*+i,t,t,this.canonical.x>>l,this.canonical.y>>l)}isChildOf(t){if(t.wrap!==this.wrap||this.overscaledZ-t.overscaledZ<=0)return!1;if(t.overscaledZ===0)return this.overscaledZ>0;let i=this.canonical.z-t.canonical.z;return!(i<0)&&t.canonical.x===this.canonical.x>>i&&t.canonical.y===this.canonical.y>>i}children(t){if(this.overscaledZ>=t)return[new Sa(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];let i=this.canonical.z+1,l=2*this.canonical.x,h=2*this.canonical.y;return[new Sa(i,this.wrap,i,l,h),new Sa(i,this.wrap,i,l+1,h),new Sa(i,this.wrap,i,l,h+1),new Sa(i,this.wrap,i,l+1,h+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new Sa(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new Sa(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Yv(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new jd(t.x-this.wrap,t.y))}}function pu(r,t,i,l,h){(r*=2)<0&&(r=-1*r-1);let g=1<<i;return(g*g*r+g*h+l).toString(36)+i.toString(36)+t.toString(36)}function Mm(r,t){return t?r.properties[t]:r.id}function pM(r,t){let i={id:r.id};if(t.removeAllProperties&&(delete r.removeProperties,delete r.addOrUpdateProperties,delete t.removeProperties),t.removeProperties)for(let l of t.removeProperties){let h=r.addOrUpdateProperties.findIndex((g=>g.key===l));h>-1&&r.addOrUpdateProperties.splice(h,1)}return(r.removeAllProperties||t.removeAllProperties)&&(i.removeAllProperties=!0),(r.removeProperties||t.removeProperties)&&(i.removeProperties=[...r.removeProperties||[],...t.removeProperties||[]]),(r.addOrUpdateProperties||t.addOrUpdateProperties)&&(i.addOrUpdateProperties=[...r.addOrUpdateProperties||[],...t.addOrUpdateProperties||[]]),(r.newGeometry||t.newGeometry)&&(i.newGeometry=t.newGeometry||r.newGeometry),i}function Xv(r){var t,i;if(!r)return{};let l={};return l.removeAll=r.removeAll,l.remove=new Set(r.remove||[]),l.add=new Map((t=r.add)===null||t===void 0?void 0:t.map((h=>[h.id,h]))),l.update=new Map((i=r.update)===null||i===void 0?void 0:i.map((h=>[h.id,h]))),l}ut("CanonicalTileID",Am),ut("OverscaledTileID",Sa,{omit:["terrainRttPosMatrix32f"]});class lc{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(t){return this.minX=Math.min(this.minX,t.x),this.minY=Math.min(this.minY,t.y),this.maxX=Math.max(this.maxX,t.x),this.maxY=Math.max(this.maxY,t.y),this}expandBy(t){return this.minX-=t,this.minY-=t,this.maxX+=t,this.maxY+=t,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(t){return this.expandBy(-t)}map(t){let i=new lc;return i.extend(t(new T(this.minX,this.minY))),i.extend(t(new T(this.maxX,this.minY))),i.extend(t(new T(this.minX,this.maxY))),i.extend(t(new T(this.maxX,this.maxY))),i}static fromPoints(t){let i=new lc;for(let l of t)i.extend(l);return i}contains(t){return t.x>=this.minX&&t.x<=this.maxX&&t.y>=this.minY&&t.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(t){return!this.empty()&&!t.empty()&&t.minX>=this.minX&&t.maxX<=this.maxX&&t.minY>=this.minY&&t.maxY<=this.maxY}intersects(t){return!this.empty()&&!t.empty()&&t.minX<=this.maxX&&t.maxX>=this.minX&&t.minY<=this.maxY&&t.maxY>=this.minY}}class Kv{constructor(t){this._stringToNumber={},this._numberToString=[];for(let i=0;i<t.length;i++){let l=t[i];this._stringToNumber[l]=i,this._numberToString[i]=l}}encode(t){return this._stringToNumber[t]}decode(t){if(t>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${t} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[t]}}class Jv{constructor(t,i,l,h,g){this.type="Feature",this._vectorTileFeature=t,this._x=l,this._y=h,this._z=i,this.properties=t.properties,this.id=g}projectPoint(t,i,l,h){return[360*(t.x+i)/h-180,360/Math.PI*Math.atan(Math.exp((1-2*(t.y+l)/h)*Math.PI))-90]}projectLine(t,i,l,h){return t.map((g=>this.projectPoint(g,i,l,h)))}get geometry(){if(this._geometry)return this._geometry;let t=this._vectorTileFeature,i=t.extent*Math.pow(2,this._z),l=t.extent*this._x,h=t.extent*this._y,g=t.loadGeometry();switch(t.type){case 1:{let y=[];for(let S of g)y.push(S[0]);let x=this.projectLine(y,l,h,i);this._geometry=y.length===1?{type:"Point",coordinates:x[0]}:{type:"MultiPoint",coordinates:x};break}case 2:{let y=g.map((x=>this.projectLine(x,l,h,i)));this._geometry=y.length===1?{type:"LineString",coordinates:y[0]}:{type:"MultiLineString",coordinates:y};break}case 3:{let y=pv(g),x=[];for(let S of y)x.push(S.map((P=>this.projectLine(P,l,h,i))));this._geometry=x.length===1?{type:"Polygon",coordinates:x[0]}:{type:"MultiPolygon",coordinates:x};break}default:throw new Error(`unknown feature type: ${t.type}`)}return this._geometry}set geometry(t){this._geometry=t}toJSON(){let t={geometry:this.geometry};for(let i in this)i!=="_geometry"&&i!=="_vectorTileFeature"&&i!=="_x"&&i!=="_y"&&i!=="_z"&&(t[i]=this[i]);return t}}class fu{constructor(t,i,l){zt(this,"_name");zt(this,"dataBuffer");zt(this,"nullabilityBuffer");zt(this,"_size");this._name=t,this.dataBuffer=i,typeof l=="number"?this._size=l:(this.nullabilityBuffer=l,this._size=l.size())}getValue(t){return this.nullabilityBuffer&&!this.nullabilityBuffer.get(t)?null:this.getValueFromBuffer(t)}has(t){return this.nullabilityBuffer&&this.nullabilityBuffer.get(t)||!this.nullabilityBuffer}get name(){return this._name}get size(){return this._size}}class lp extends fu{}class zm extends lp{getValueFromBuffer(t){return this.dataBuffer[t]}}class Im extends lp{getValueFromBuffer(t){return this.dataBuffer[t]}}class Qv extends fu{constructor(i,l,h,g){super(i,l,g);zt(this,"delta");this.delta=h}}class Lm extends Qv{constructor(t,i,l,h){super(t,Int32Array.of(i),l,h)}getValueFromBuffer(t){return this.dataBuffer[0]+t*this.delta}}class Dm extends fu{constructor(t,i,l){super(t,Int32Array.of(i),l)}getValueFromBuffer(t){return this.dataBuffer[0]}}class fM{constructor(t,i,l,h,g=4096){zt(this,"_name");zt(this,"_geometryVector");zt(this,"_idVector");zt(this,"_propertyVectors");zt(this,"_extent");zt(this,"propertyVectorsMap");this._name=t,this._geometryVector=i,this._idVector=l,this._propertyVectors=h,this._extent=g}get name(){return this._name}get idVector(){return this._idVector}get geometryVector(){return this._geometryVector}get propertyVectors(){return this._propertyVectors}getPropertyVector(t){return this.propertyVectorsMap||(this.propertyVectorsMap=new Map(this._propertyVectors.map((i=>[i.name,i])))),this.propertyVectorsMap.get(t)}*[Symbol.iterator](){let t=this.geometryVector[Symbol.iterator](),i=0;for(;i<this.numFeatures;){let l;this.idVector&&(l=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(i)):this.idVector.getValue(i));let h=t==null?void 0:t.next().value,g={};for(let y of this.propertyVectors){if(!y)continue;let x=y.name,S=y.getValue(i);S!==null&&(g[x]=S)}i++,yield{id:l,geometry:h,properties:g}}}get numFeatures(){return this.geometryVector.numGeometries}get extent(){return this._extent}getFeatures(){let t=[],i=this.geometryVector.getGeometries();for(let l=0;l<this.numFeatures;l++){let h;this.idVector&&(h=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(l)):this.idVector.getValue(l));let g={coordinates:i[l],type:this.geometryVector.geometryType(l)},y={};for(let x of this.propertyVectors){if(!x)continue;let S=x.name,P=x.getValue(l);P!==null&&(y[S]=P)}t.push({id:h,geometry:g,properties:y})}return t}containsMaxSaveIntegerValues(t){return t instanceof zm||t instanceof Dm&&t instanceof Lm||t instanceof Im}}class mM{constructor(t){zt(this,"value");this.value=t}get(){return this.value}set(t){this.value=t}increment(){return this.value++}add(t){this.value+=t}}var ii,Io,en,ps,cc,ta,Rr,Br,eb,Ta;function $r(r,t,i){let l=new Int32Array(i),h=0,g=t.get();for(let y=0;y<l.length;y++){let x=r[g++],S=127&x;x<128||(x=r[g++],S|=(127&x)<<7,x<128||(x=r[g++],S|=(127&x)<<14,x<128||(x=r[g++],S|=(127&x)<<21,x<128||(x=r[g++],S|=(15&x)<<28)))),l[h++]=S}return t.set(g),l}function cp(r,t,i){let l=new BigInt64Array(i);for(let h=0;h<l.length;h++)l[h]=yM(r,t);return l}function gM(r,t){let i,l;return l=r[t.get()],t.increment(),i=127&l,l<128?i:(l=r[t.get()],t.increment(),i|=(127&l)<<7,l<128?i:(l=r[t.get()],t.increment(),i|=(127&l)<<14,l<128?i:(l=r[t.get()],t.increment(),i|=(127&l)<<21,l<128?i:(l=r[t.get()],i|=(15&l)<<28,(function(h,g,y){let x,S;if(S=g[y.get()],y.increment(),x=(112&S)>>4,S<128||(S=g[y.get()],y.increment(),x|=(127&S)<<3,S<128)||(S=g[y.get()],y.increment(),x|=(127&S)<<10,S<128)||(S=g[y.get()],y.increment(),x|=(127&S)<<17,S<128)||(S=g[y.get()],y.increment(),x|=(127&S)<<24,S<128)||(S=g[y.get()],y.increment(),x|=(1&S)<<31,S<128))return 4294967296*x+(h>>>0);throw new Error("Expected varint not more than 10 bytes")})(i,r,t)))))}function tb(r,t,i,l){throw new Error("FastPFor is not implemented yet.")}function uc(r){return r>>>1^-(1&r)}function mu(r){return r>>BigInt(1)^-(BigInt(1)&r)}function yM(r,t){let i=BigInt(0),l=0,h=t.get();for(;h<r.length;){let g=r[h++];if(i|=BigInt(127&g)<<BigInt(l),!(128&g))break;if(l+=7,l>=64)throw new Error("Varint too long")}return t.set(h),i}function ib(r,t,i){let l=new Int32Array(i),h=0;for(let g=0;g<t;g++){let y=r[g];l.fill(r[g+t],h,h+y),h+=y}return l}function rb(r,t,i){let l=new BigInt64Array(i),h=0;for(let g=0;g<t;g++){let y=Number(r[g]);l.fill(r[g+t],h,h+y),h+=y}return l}function nb(r,t,i){let l=new Float64Array(i),h=0;for(let g=0;g<t;g++){let y=r[g];l.fill(r[g+t],h,h+y),h+=y}return l}function Om(r){let t=r.length/4*4,i=1;if(t>=4)for(let l=r[0];i<t-4;i+=4)l=r[i]+=l,l=r[i+1]+=l,l=r[i+2]+=l,l=r[i+3]+=l;for(;i!=r.length;)r[i]+=r[i-1],++i}function ab(r){r[0]=r[0]>>>1^-(1&r[0]),r[1]=r[1]>>>1^-(1&r[1]);let t=r.length/4*4,i=2;if(t>=4)for(;i<t-4;i+=4){let l=r[i],h=r[i+1],g=r[i+2],y=r[i+3];r[i]=(l>>>1^-(1&l))+r[i-2],r[i+1]=(h>>>1^-(1&h))+r[i-1],r[i+2]=(g>>>1^-(1&g))+r[i],r[i+3]=(y>>>1^-(1&y))+r[i+1]}for(;i!=r.length;i+=2)r[i]=(r[i]>>>1^-(1&r[i]))+r[i-2],r[i+1]=(r[i+1]>>>1^-(1&r[i+1]))+r[i-1]}(function(r){r.NONE="NONE",r.DELTA="DELTA",r.COMPONENTWISE_DELTA="COMPONENTWISE_DELTA",r.RLE="RLE",r.MORTON="MORTON",r.PDE="PDE"})(ii||(ii={})),(function(r){r.NONE="NONE",r.FAST_PFOR="FAST_PFOR",r.VARINT="VARINT",r.ALP="ALP"})(Io||(Io={})),(function(r){r.PRESENT="PRESENT",r.DATA="DATA",r.OFFSET="OFFSET",r.LENGTH="LENGTH"})(en||(en={}));class Rm{constructor(t,i,l){zt(this,"_dictionaryType");zt(this,"_offsetType");zt(this,"_lengthType");this._dictionaryType=t,this._offsetType=i,this._lengthType=l}get dictionaryType(){return this._dictionaryType}get offsetType(){return this._offsetType}get lengthType(){return this._lengthType}}function Tn(r,t){let i=(function(l,h){let g=l[h.get()],y=Object.values(en)[g>>4],x=null;switch(y){case en.DATA:x=new Rm(Object.values(ps)[15&g]);break;case en.OFFSET:x=new Rm(null,Object.values(cc)[15&g]);break;case en.LENGTH:x=new Rm(null,null,Object.values(ta)[15&g])}h.increment();let S=l[h.get()],P=Object.values(ii)[S>>5],A=Object.values(ii)[S>>2&7],D=Object.values(Io)[3&S];h.increment();let B=$r(l,h,2),F=B[0];return{physicalStreamType:y,logicalStreamType:x,logicalLevelTechnique1:P,logicalLevelTechnique2:A,physicalLevelTechnique:D,numValues:F,byteLength:B[1],decompressedCount:F}})(r,t);return i.logicalLevelTechnique1===ii.MORTON?(function(l,h,g){let y=$r(h,g,2);return{physicalStreamType:l.physicalStreamType,logicalStreamType:l.logicalStreamType,logicalLevelTechnique1:l.logicalLevelTechnique1,logicalLevelTechnique2:l.logicalLevelTechnique2,physicalLevelTechnique:l.physicalLevelTechnique,numValues:l.numValues,byteLength:l.byteLength,decompressedCount:l.decompressedCount,numBits:y[0],coordinateShift:y[1]}})(i,r,t):ii.RLE!==i.logicalLevelTechnique1&&ii.RLE!==i.logicalLevelTechnique2||Io.NONE===i.physicalLevelTechnique?i:(function(l,h,g){let y=$r(h,g,2);return{physicalStreamType:l.physicalStreamType,logicalStreamType:l.logicalStreamType,logicalLevelTechnique1:l.logicalLevelTechnique1,logicalLevelTechnique2:l.logicalLevelTechnique2,physicalLevelTechnique:l.physicalLevelTechnique,numValues:l.numValues,byteLength:l.byteLength,decompressedCount:y[1],runs:y[0],numRleValues:y[1]}})(i,r,t)}(function(r){r.NONE="NONE",r.SINGLE="SINGLE",r.SHARED="SHARED",r.VERTEX="VERTEX",r.MORTON="MORTON",r.FSST="FSST"})(ps||(ps={})),(function(r){r.VERTEX="VERTEX",r.INDEX="INDEX",r.STRING="STRING",r.KEY="KEY"})(cc||(cc={})),(function(r){r.VAR_BINARY="VAR_BINARY",r.GEOMETRIES="GEOMETRIES",r.PARTS="PARTS",r.RINGS="RINGS",r.TRIANGLES="TRIANGLES",r.SYMBOL="SYMBOL",r.DICTIONARY="DICTIONARY"})(ta||(ta={})),(function(r){r[r.FLAT=0]="FLAT",r[r.CONST=1]="CONST",r[r.SEQUENCE=2]="SEQUENCE",r[r.DICTIONARY=3]="DICTIONARY",r[r.FSST_DICTIONARY=4]="FSST_DICTIONARY"})(Rr||(Rr={}));class fs{constructor(t,i){zt(this,"values");zt(this,"_size");this.values=t,this._size=i}get(t){let i=Math.floor(t/8);return(this.values[i]>>t%8&1)==1}set(t,i){let l=Math.floor(t/8);this.values[l]=this.values[l]|(i?1:0)<<t%8}getInt(t){let i=Math.floor(t/8);return this.values[i]>>t%8&1}size(){return this._size}getBuffer(){return this.values}}function Cn(r,t,i,l,h){return(function(g,y,x){switch(y.logicalLevelTechnique1){case ii.DELTA:return y.logicalLevelTechnique2===ii.RLE?(function(S,P,A){let D=new Int32Array(A),B=0,F=0;for(let W=0;W<P;W++){let U=S[W],H=uc(S[W+P]);for(let ee=0;ee<U;ee++)F+=H,D[B++]=F}return D})(g,y.runs,y.numRleValues):((function(S){S[0]=S[0]>>>1^-(1&S[0]);let P=S.length/4*4,A=1;if(P>=4)for(;A<P-4;A+=4){let D=S[A],B=S[A+1],F=S[A+2],W=S[A+3];S[A]=(D>>>1^-(1&D))+S[A-1],S[A+1]=(B>>>1^-(1&B))+S[A],S[A+2]=(F>>>1^-(1&F))+S[A+1],S[A+3]=(W>>>1^-(1&W))+S[A+2]}for(;A!=S.length;++A)S[A]=(S[A]>>>1^-(1&S[A]))+S[A-1]})(g),g);case ii.RLE:return(function(S,P,A){return A?(function(D,B,F){let W=new Int32Array(F),U=0;for(let H=0;H<B;H++){let ee=D[H],ce=D[H+B];ce=ce>>>1^-(1&ce),W.fill(ce,U,U+ee),U+=ee}return W})(S,P.runs,P.numRleValues):ib(S,P.runs,P.numRleValues)})(g,y,x);case ii.MORTON:return Om(g),g;case ii.COMPONENTWISE_DELTA:return ab(g),g;case ii.NONE:return x&&(function(S){for(let P=0;P<S.length;P++){let A=S[P];S[P]=A>>>1^-(1&A)}})(g),g;default:throw new Error(`The specified Logical level technique is not supported: ${y.logicalLevelTechnique1}`)}})(up(r,t,i),i,l)}function yl(r,t,i){return(function(l,h){if(h.logicalLevelTechnique1===ii.DELTA&&h.logicalLevelTechnique2===ii.NONE)return(function(y){let x=new Int32Array(y.length+1);x[0]=0,x[1]=uc(y[0]);let S=x[1],P=2;for(;P!=x.length;++P){let A=y[P-1];S+=A>>>1^-(1&A),x[P]=x[P-1]+S}return x})(l);if(h.logicalLevelTechnique1===ii.RLE&&h.logicalLevelTechnique2===ii.NONE)return(function(y,x,S){let P=new Int32Array(S+1);P[0]=0;let A=1,D=P[0];for(let B=0;B<x;B++){let F=y[B],W=y[B+x];for(let U=A;U<A+F;U++)P[U]=W+D,D=P[U];A+=F}return P})(l,h.runs,h.numRleValues);if(h.logicalLevelTechnique1===ii.NONE&&h.logicalLevelTechnique2===ii.NONE){(function(y){let x=0;for(let S=0;S<y.length;S++)y[S]+=x,x=y[S]})(l);let g=new Int32Array(h.numValues+1);return g[0]=0,g.set(l,1),g}if(h.logicalLevelTechnique1===ii.DELTA&&h.logicalLevelTechnique2===ii.RLE){let g=(function(y,x,S){let P=new Int32Array(S+1);P[0]=0;let A=1,D=P[0];for(let B=0;B<x;B++){let F=y[B],W=y[B+x];W=W>>>1^-(1&W);for(let U=A;U<A+F;U++)P[U]=W+D,D=P[U];A+=F}return P})(l,h.runs,h.numRleValues);return Om(g),g}throw new Error("Only delta encoding is supported for transforming length to offset streams yet.")})(up(r,t,i),i)}function up(r,t,i){let l=i.physicalLevelTechnique;if(l===Io.FAST_PFOR)return tb();if(l===Io.VARINT)return $r(r,t,i.numValues);if(l===Io.NONE){let h=t.get();t.add(i.byteLength);let g=r.subarray(h,t.get());return new Int32Array(g)}throw new Error("Specified physicalLevelTechnique is not supported (yet).")}function Bm(r,t,i,l){let h=up(r,t,i);if(h.length===1){let g=h[0];return l?uc(g):g}return l?(function(g){return uc(g[1])})(h):(function(g){return g[1]})(h)}function sb(r,t,i){return(function(l){if(l.length==2){let h=uc(l[1]);return[h,h]}return[uc(l[2]),uc(l[3])]})(up(r,t,i))}function ob(r,t,i){return(function(l){if(l.length==2){let h=mu(l[1]);return[h,h]}return[mu(l[2]),mu(l[3])]})(cp(r,t,i.numValues))}function lb(r,t,i,l){return(function(h,g,y){switch(g.logicalLevelTechnique1){case ii.DELTA:return g.logicalLevelTechnique2===ii.RLE?(function(x,S,P){let A=new BigInt64Array(P),D=0,B=BigInt(0);for(let F=0;F<S;F++){let W=Number(x[F]),U=mu(x[F+S]);for(let H=0;H<W;H++)B+=U,A[D++]=B}return A})(h,g.runs,g.numRleValues):((function(x){x[0]=x[0]>>BigInt(1)^-(BigInt(1)&x[0]);let S=x.length/4*4,P=1;if(S>=4)for(;P<S-4;P+=4){let A=x[P],D=x[P+1],B=x[P+2],F=x[P+3];x[P]=(A>>BigInt(1)^-(BigInt(1)&A))+x[P-1],x[P+1]=(D>>BigInt(1)^-(BigInt(1)&D))+x[P],x[P+2]=(B>>BigInt(1)^-(BigInt(1)&B))+x[P+1],x[P+3]=(F>>BigInt(1)^-(BigInt(1)&F))+x[P+2]}for(;P!=x.length;++P)x[P]=(x[P]>>BigInt(1)^-(BigInt(1)&x[P]))+x[P-1]})(h),h);case ii.RLE:return(function(x,S,P){return P?(function(A,D,B){let F=new BigInt64Array(B),W=0;for(let U=0;U<D;U++){let H=Number(A[U]),ee=A[U+D];ee=ee>>BigInt(1)^-(BigInt(1)&ee),F.fill(ee,W,W+H),W+=H}return F})(x,S.runs,S.numRleValues):rb(x,S.runs,S.numRleValues)})(h,g,y);case ii.NONE:return y&&(function(x){for(let S=0;S<x.length;S++){let P=x[S];x[S]=P>>BigInt(1)^-(BigInt(1)&P)}})(h),h;default:throw new Error(`The specified Logical level technique is not supported: ${g.logicalLevelTechnique1}`)}})(cp(r,t,i.numValues),i,l)}function cb(r,t,i,l){let h=cp(r,t,i.numValues);if(h.length===1){let g=h[0];return l?mu(g):g}return l?(function(g){return mu(g[1])})(h):(function(g){return g[1]})(h)}function Fm(r,t,i,l,h){return(function(g,y,x,S){switch(y.logicalLevelTechnique1){case ii.DELTA:return y.logicalLevelTechnique2===ii.RLE&&(g=ib(g,y.runs,y.numRleValues)),(function(P,A){let D=new Int32Array(P.size()),B=0;P.get(0)?(D[0]=P.get(0)?A[0]>>>1^-(1&A[0]):0,B=1):D[0]=0;let F=1;for(;F!=D.length;++F)D[F]=P.get(F)?D[F-1]+(A[B]>>>1^-(1&A[B++])):D[F-1];return D})(S,g);case ii.RLE:return(function(P,A,D,B){let F=A;return D?(function(W,U,H){let ee=new Int32Array(W.size()),ce=0;for(let te=0;te<H;te++){let ae=U[te],he=U[te+H];he=he>>>1^-(1&he);for(let ge=ce;ge<ce+ae;ge++)W.get(ge)?ee[ge]=he:(ee[ge]=0,ce++);ce+=ae}return ee})(B,P,F.runs):(function(W,U,H){let ee=new Int32Array(W.size()),ce=0;for(let te=0;te<H;te++){let ae=U[te],he=U[te+H];for(let ge=ce;ge<ce+ae;ge++)W.get(ge)?ee[ge]=he:(ee[ge]=0,ce++);ce+=ae}return ee})(B,P,F.runs)})(g,y,x,S);case ii.MORTON:return Om(g),g;case ii.COMPONENTWISE_DELTA:return ab(g),g;case ii.NONE:return g=x?(function(P,A){let D=new Int32Array(P.size()),B=0,F=0;for(;F!=D.length;++F)if(P.get(F)){let W=A[B++];D[F]=W>>>1^-(1&W)}else D[F]=0;return D})(S,g):(function(P,A){let D=new Int32Array(P.size()),B=0,F=0;for(;F!=D.length;++F)D[F]=P.get(F)?A[B++]:0;return D})(S,g),g;default:throw new Error("The specified Logical level technique is not supported")}})(i.physicalLevelTechnique===Io.FAST_PFOR?tb():$r(r,t,i.numValues),i,l,h)}function dp(r,t,i,l){let h=r.logicalLevelTechnique1;if(h===ii.RLE)return r.runs===1?Rr.CONST:Rr.FLAT;let g=t instanceof fs?t.size():t;if(h===ii.DELTA&&r.logicalLevelTechnique2===ii.RLE){let y=r.runs,x=2;if(r.numRleValues!==g)return Rr.FLAT;if(y===1)return Rr.SEQUENCE;if(y===2){let S=l.get(),P;if(r.physicalLevelTechnique===Io.VARINT)P=$r(i,l,4);else{let A=l.get();P=new Int32Array(i.buffer,i.byteOffset+A,4)}if(l.set(S),P[2]===x&&P[3]===x)return Rr.SEQUENCE}}return r.numValues===1?Rr.CONST:Rr.FLAT}class ub extends lp{getValueFromBuffer(t){return this.dataBuffer[t]}}class db extends Qv{constructor(t,i,l,h){super(t,BigInt64Array.of(i),l,h)}getValueFromBuffer(t){return this.dataBuffer[0]+BigInt(t)*this.delta}}class gu{constructor(t,i,l){zt(this,"_geometryOffsets");zt(this,"_partOffsets");zt(this,"_ringOffsets");this._geometryOffsets=t,this._partOffsets=i,this._ringOffsets=l}get geometryOffsets(){return this._geometryOffsets}get partOffsets(){return this._partOffsets}get ringOffsets(){return this._ringOffsets}}function jm(r,t,i){return{x:hb(r,t)-i,y:hb(r>>1,t)-i}}function hb(r,t){let i=0;for(let l=0;l<t;l++)i|=(r&1<<2*l)>>l;return i}(function(r){r[r.POINT=0]="POINT",r[r.LINESTRING=1]="LINESTRING",r[r.POLYGON=2]="POLYGON",r[r.MULTIPOINT=3]="MULTIPOINT",r[r.MULTILINESTRING=4]="MULTILINESTRING",r[r.MULTIPOLYGON=5]="MULTIPOLYGON"})(Br||(Br={})),(function(r){r[r.POINT=0]="POINT",r[r.LINESTRING=1]="LINESTRING",r[r.POLYGON=2]="POLYGON"})(eb||(eb={})),(function(r){r[r.MORTON=0]="MORTON",r[r.VEC_2=1]="VEC_2",r[r.VEC_3=2]="VEC_3"})(Ta||(Ta={}));class _M{createPoint(t){return[[t]]}createMultiPoint(t){return t.map((i=>[i]))}createLineString(t){return[t]}createMultiLineString(t){return t}createPolygon(t,i){return[t].concat(i)}createMultiPolygon(t){return t.flat()}}function pb(r){let t=new Array(r.numGeometries),i=1,l=1,h=1,g=0,y=new _M,x=0,S=0,P=r.mortonSettings,A=r.topologyVector,D=A.geometryOffsets,B=A.partOffsets,F=A.ringOffsets,W=r.vertexOffsets,U=r.containsPolygonGeometry(),H=r.vertexBuffer;for(let ee=0;ee<r.numGeometries;ee++){let ce=r.geometryType(ee);if(ce===Br.POINT){if(W&&W.length!==0)if(r.vertexBufferType===Ta.VEC_2){let te=2*W[S++],ae=new T(H[te],H[te+1]);t[g++]=y.createPoint(ae)}else{let te=jm(H[W[S++]],P.numBits,P.coordinateShift),ae=new T(te.x,te.y);t[g++]=y.createPoint(ae)}else{let te=new T(H[x++],H[x++]);t[g++]=y.createPoint(te)}D&&h++,B&&i++,F&&l++}else if(ce===Br.MULTIPOINT){let te=D[h]-D[h-1];h++;let ae=new Array(te);if(W&&W.length!==0){for(let he=0;he<te;he++){let ge=2*W[S++];ae[he]=new T(H[ge],H[ge+1])}t[g++]=y.createMultiPoint(ae)}else{for(let he=0;he<te;he++){let ge=H[x++],Ie=H[x++];ae[he]=new T(ge,Ie)}t[g++]=y.createMultiPoint(ae)}}else if(ce===Br.LINESTRING){let te,ae=0;U?(ae=F[l]-F[l-1],l++):ae=B[i]-B[i-1],i++,W&&W.length!==0?(te=r.vertexBufferType===Ta.VEC_2?qm(H,W,S,ae,!1):Vm(H,W,S,ae,!1,P),S+=ae):(te=Nm(H,x,ae,!1),x+=2*ae),t[g++]=y.createLineString(te),D&&h++}else if(ce===Br.POLYGON){let te=B[i]-B[i-1];i++;let ae=new Array(te-1),he=F[l]-F[l-1];if(l++,W&&W.length!==0){let ge=r.vertexBufferType===Ta.VEC_2?pp(H,W,S,he):fp(H,W,S,he,0,P);S+=he;for(let Ie=0;Ie<ae.length;Ie++)he=F[l]-F[l-1],l++,ae[Ie]=r.vertexBufferType===Ta.VEC_2?pp(H,W,S,he):fp(H,W,S,he,0,P),S+=he;t[g++]=y.createPolygon(ge,ae)}else{let ge=hp(H,x,he);x+=2*he;for(let Ie=0;Ie<ae.length;Ie++)he=F[l]-F[l-1],l++,ae[Ie]=hp(H,x,he),x+=2*he;t[g++]=y.createPolygon(ge,ae)}D&&h++}else if(ce===Br.MULTILINESTRING){let te=D[h]-D[h-1];h++;let ae=new Array(te);if(W&&W.length!==0){for(let he=0;he<te;he++){let ge=0;U?(ge=F[l]-F[l-1],l++):ge=B[i]-B[i-1],i++;let Ie=r.vertexBufferType===Ta.VEC_2?qm(H,W,S,ge,!1):Vm(H,W,S,ge,!1,P);ae[he]=Ie,S+=ge}t[g++]=y.createMultiLineString(ae)}else{for(let he=0;he<te;he++){let ge=0;U?(ge=F[l]-F[l-1],l++):ge=B[i]-B[i-1],i++,ae[he]=Nm(H,x,ge,!1),x+=2*ge}t[g++]=y.createMultiLineString(ae)}}else{if(ce!==Br.MULTIPOLYGON)throw new Error("The specified geometry type is currently not supported.");{let te=D[h]-D[h-1];h++;let ae=new Array(te),he=0;if(W&&W.length!==0){for(let ge=0;ge<te;ge++){let Ie=B[i]-B[i-1];i++;let Ge=new Array(Ie-1);he=F[l]-F[l-1],l++;let We=r.vertexBufferType===Ta.VEC_2?pp(H,W,S,he):fp(H,W,S,he,0,P);S+=he;for(let Ue=0;Ue<Ge.length;Ue++)he=F[l]-F[l-1],l++,Ge[Ue]=r.vertexBufferType===Ta.VEC_2?pp(H,W,S,he):fp(H,W,S,he,0,P),S+=he;ae[ge]=y.createPolygon(We,Ge)}t[g++]=y.createMultiPolygon(ae)}else{for(let ge=0;ge<te;ge++){let Ie=B[i]-B[i-1];i++;let Ge=new Array(Ie-1);he=F[l]-F[l-1],l++;let We=hp(H,x,he);x+=2*he;for(let Ue=0;Ue<Ge.length;Ue++){let tt=F[l]-F[l-1];l++,Ge[Ue]=hp(H,x,tt),x+=2*tt}ae[ge]=y.createPolygon(We,Ge)}t[g++]=y.createMultiPolygon(ae)}}}}return t}function hp(r,t,i){return Nm(r,t,i,!0)}function pp(r,t,i,l){return qm(r,t,i,l,!0)}function fp(r,t,i,l,h,g){return Vm(r,t,i,l,!0,g)}function Nm(r,t,i,l){let h=new Array(l?i+1:i);for(let g=0;g<2*i;g+=2)h[g/2]=new T(r[t+g],r[t+g+1]);return l&&(h[h.length-1]=h[0]),h}function qm(r,t,i,l,h){let g=new Array(h?l+1:l);for(let y=0;y<2*l;y+=2){let x=2*t[i+y/2];g[y/2]=new T(r[x],r[x+1])}return h&&(g[g.length-1]=g[0]),g}function Vm(r,t,i,l,h,g){let y=new Array(h?l+1:l);for(let x=0;x<l;x++){let S=jm(r[t[i+x]],g.numBits,g.coordinateShift);y[x]=new T(S.x,S.y)}return h&&(y[y.length-1]=y[0]),y}class fb{constructor(t,i,l,h,g){zt(this,"_vertexBufferType");zt(this,"_topologyVector");zt(this,"_vertexOffsets");zt(this,"_vertexBuffer");zt(this,"_mortonSettings");this._vertexBufferType=t,this._topologyVector=i,this._vertexOffsets=l,this._vertexBuffer=h,this._mortonSettings=g}get vertexBufferType(){return this._vertexBufferType}get topologyVector(){return this._topologyVector}get vertexOffsets(){return this._vertexOffsets}get vertexBuffer(){return this._vertexBuffer}*[Symbol.iterator](){let t=pb(this),i=0;for(;i<this.numGeometries;)yield{coordinates:t[i],type:this.geometryType(i)},i++}getSimpleEncodedVertex(t){let i=this.vertexOffsets?2*this.vertexOffsets[t]:2*t;return[this.vertexBuffer[i],this.vertexBuffer[i+1]]}getVertex(t){if(this.vertexOffsets&&this.mortonSettings){let l=jm(this.vertexBuffer[this.vertexOffsets[t]],this.mortonSettings.numBits,this.mortonSettings.coordinateShift);return[l.x,l.y]}let i=this.vertexOffsets?2*this.vertexOffsets[t]:2*t;return[this.vertexBuffer[i],this.vertexBuffer[i+1]]}getGeometries(){return pb(this)}get mortonSettings(){return this._mortonSettings}}class mb extends fb{constructor(i,l,h,g,y,x,S){super(h,g,y,x,S);zt(this,"_numGeometries");zt(this,"_geometryType");this._numGeometries=i,this._geometryType=l}geometryType(i){return this._geometryType}get numGeometries(){return this._numGeometries}containsPolygonGeometry(){return this._geometryType===Br.POLYGON||this._geometryType===Br.MULTIPOLYGON}containsSingleGeometryType(){return!0}}class gb extends fb{constructor(i,l,h,g,y,x){super(i,h,g,y,x);zt(this,"_geometryTypes");this._geometryTypes=l}geometryType(i){return this._geometryTypes[i]}get numGeometries(){return this._geometryTypes.length}containsPolygonGeometry(){for(let i=0;i<this.numGeometries;i++)if(this.geometryType(i)===Br.POLYGON||this.geometryType(i)===Br.MULTIPOLYGON)return!0;return!1}containsSingleGeometryType(){return!1}}class yb{constructor(t,i,l,h){zt(this,"_triangleOffsets");zt(this,"_indexBuffer");zt(this,"_vertexBuffer");zt(this,"_topologyVector");this._triangleOffsets=t,this._indexBuffer=i,this._vertexBuffer=l,this._topologyVector=h}get triangleOffsets(){return this._triangleOffsets}get indexBuffer(){return this._indexBuffer}get vertexBuffer(){return this._vertexBuffer}get topologyVector(){return this._topologyVector}getGeometries(){if(!this._topologyVector)throw new Error("Cannot convert GpuVector to coordinates without topology information");let t=new Array(this.numGeometries),i=this._topologyVector,l=i.partOffsets,h=i.ringOffsets,g=i.geometryOffsets,y=0,x=1,S=1,P=1;for(let A=0;A<this.numGeometries;A++)switch(this.geometryType(A)){case Br.POLYGON:{let D=l[x]-l[x-1];x++;let B=[];for(let F=0;F<D;F++){let W=h[S]-h[S-1];S++;let U=[];for(let H=0;H<W;H++){let ee=this._vertexBuffer[y++],ce=this._vertexBuffer[y++];U.push(new T(ee,ce))}U.length>0&&U.push(U[0]),B.push(U)}t[A]=B,g&&P++}break;case Br.MULTIPOLYGON:{let D=g[P]-g[P-1];P++;let B=[];for(let F=0;F<D;F++){let W=l[x]-l[x-1];x++;for(let U=0;U<W;U++){let H=h[S]-h[S-1];S++;let ee=[];for(let ce=0;ce<H;ce++){let te=this._vertexBuffer[y++],ae=this._vertexBuffer[y++];ee.push(new T(te,ae))}ee.length>0&&ee.push(ee[0]),B.push(ee)}}t[A]=B}}return t}[Symbol.iterator](){return null}}function _b(r,t,i,l,h,g){return new vM(r,t,i,l,h,g)}class vM extends yb{constructor(i,l,h,g,y,x){super(h,g,y,x);zt(this,"_numGeometries");zt(this,"_geometryType");this._numGeometries=i,this._geometryType=l}geometryType(i){return this._geometryType}get numGeometries(){return this._numGeometries}containsSingleGeometryType(){return!0}}function vb(r,t,i,l,h){return new bM(r,t,i,l,h)}class bM extends yb{constructor(i,l,h,g,y){super(l,h,g,y);zt(this,"_geometryTypes");this._geometryTypes=i}geometryType(i){return this._geometryTypes[i]}get numGeometries(){return this._geometryTypes.length}containsSingleGeometryType(){return!1}}function xM(r,t,i,l,h){let g=Tn(r,i),y=null,x=null,S=null,P=null,A=null,D=null,B=null,F=null;if(dp(g,l,r,i)===Rr.CONST){let U=Bm(r,i,g,!1);for(let H=0;H<t-1;H++){let ee=Tn(r,i);switch(ee.physicalStreamType){case en.LENGTH:switch(ee.logicalStreamType.lengthType){case ta.GEOMETRIES:y=yl(r,i,ee);break;case ta.PARTS:x=yl(r,i,ee);break;case ta.RINGS:S=yl(r,i,ee);break;case ta.TRIANGLES:B=yl(r,i,ee)}break;case en.OFFSET:switch(ee.logicalStreamType.offsetType){case cc.VERTEX:P=Cn(r,i,ee,!1);break;case cc.INDEX:F=Cn(r,i,ee,!1)}break;case en.DATA:ps.VERTEX===ee.logicalStreamType.dictionaryType?A=Cn(r,i,ee,!0):(D={numBits:ee.numBits,coordinateShift:ee.coordinateShift},A=Cn(r,i,ee,!1))}}return F!==null?y!=null||x!=null?_b(l,U,B,F,A,new gu(y,x,S)):_b(l,U,B,F,A):D===null?(function(H,ee,ce,te,ae){return new mb(H,ee,Ta.VEC_2,ce,te,ae)})(l,U,new gu(y,x,S),P,A):(function(H,ee,ce,te,ae,he){return new mb(H,ee,Ta.MORTON,ce,te,ae,he)})(l,U,new gu(y,x,S),P,A,D)}let W=Cn(r,i,g,!1);for(let U=0;U<t-1;U++){let H=Tn(r,i);switch(H.physicalStreamType){case en.LENGTH:switch(H.logicalStreamType.lengthType){case ta.GEOMETRIES:y=Cn(r,i,H,!1);break;case ta.PARTS:x=Cn(r,i,H,!1);break;case ta.RINGS:S=Cn(r,i,H,!1);break;case ta.TRIANGLES:B=yl(r,i,H)}break;case en.OFFSET:switch(H.logicalStreamType.offsetType){case cc.VERTEX:P=Cn(r,i,H,!1);break;case cc.INDEX:F=Cn(r,i,H,!1)}break;case en.DATA:ps.VERTEX===H.logicalStreamType.dictionaryType?A=Cn(r,i,H,!0):(D={numBits:H.numBits,coordinateShift:H.coordinateShift},A=Cn(r,i,H,!1))}}return F!==null&&x===null?vb(W,B,F,A):(y!==null?(y=Wm(W,y,2),x!==null&&S!==null?(x=bb(W,y,x,!1),S=(function(U,H,ee,ce){let te=new Int32Array(ee[ee.length-1]+1),ae=0;te[0]=ae;let he=1,ge=1,Ie=0;for(let Ge=0;Ge<U.length;Ge++){let We=U[Ge],Ue=H[Ge+1]-H[Ge];if(We!==0&&We!==3)for(let tt=0;tt<Ue;tt++){let Qe=ee[he]-ee[he-1];he++;for(let He=0;He<Qe;He++)ae=te[ge++]=ae+ce[Ie++]}else for(let tt=0;tt<Ue;tt++)te[ge++]=++ae,he++}return te})(W,y,x,S)):x!==null&&(x=(function(U,H,ee){let ce=new Int32Array(H[H.length-1]+1),te=0;ce[0]=te;let ae=1,he=0;for(let ge=0;ge<U.length;ge++){let Ie=U[ge],Ge=H[ge+1]-H[ge];if(Ie===4||Ie===1)for(let We=0;We<Ge;We++)te=ce[ae++]=te+ee[he++];else for(let We=0;We<Ge;We++)ce[ae++]=++te}return ce})(W,y,x))):x!==null&&S!==null?(x=Wm(W,x,1),S=bb(W,x,S,!0)):x!==null&&(x=Wm(W,x,0)),F!==null?vb(W,B,F,A,new gu(y,x,S)):D===null?(function(U,H,ee,ce){return new gb(Ta.VEC_2,U,H,ee,ce)})(W,new gu(y,x,S),P,A):(function(U,H,ee,ce,te){return new gb(Ta.MORTON,U,H,ee,ce,te)})(W,new gu(y,x,S),P,A,D))}function Wm(r,t,i){let l=new Int32Array(r.length+1),h=0;l[0]=h;let g=0;for(let y=0;y<r.length;y++)h=l[y+1]=h+(r[y]>i?t[g++]:1);return l}function bb(r,t,i,l){let h=new Int32Array(t[t.length-1]+1),g=0;h[0]=g;let y=1,x=0;for(let S=0;S<r.length;S++){let P=r[S],A=t[S+1]-t[S];if(P===5||P===2||l&&(P===4||P===1))for(let D=0;D<A;D++)g=h[y++]=g+i[x++];else for(let D=0;D<A;D++)h[y++]=++g}return h}class wM extends fu{constructor(i,l,h){super(i,l.getBuffer(),h);zt(this,"dataVector");this.dataVector=l}getValueFromBuffer(i){return this.dataVector.get(i)}}class SM extends lp{getValueFromBuffer(t){return this.dataBuffer[t]}}class xb extends fu{constructor(t,i,l){super(t,BigInt64Array.of(i),l)}getValueFromBuffer(t){return this.dataBuffer[0]}}function Nd(r,t,i){return wb(r,Math.ceil(t/8),i)}function wb(r,t,i){let l=new Uint8Array(t),h=0;for(;h<t;){let g=r[i.increment()];if(g<=127){let y=g+3,x=r[i.increment()],S=h+y;l.fill(x,h,S),h=S}else{let y=256-g;for(let x=0;x<y;x++)l[h++]=r[i.increment()]}}return l}let TM=new TextDecoder;function Gm(r,t,i){return i-t>=12?TM.decode(r.subarray(t,i)):(function(l,h,g){let y="",x=h;for(;x<g;){let S=l[x],P,A,D,B=null,F=S>239?4:S>223?3:S>191?2:1;if(x+F>g)break;F===1?S<128&&(B=S):F===2?(P=l[x+1],(192&P)==128&&(B=(31&S)<<6|63&P,B<=127&&(B=null))):F===3?(P=l[x+1],A=l[x+2],(192&P)==128&&(192&A)==128&&(B=(15&S)<<12|(63&P)<<6|63&A,(B<=2047||B>=55296&&B<=57343)&&(B=null))):F===4&&(P=l[x+1],A=l[x+2],D=l[x+3],(192&P)==128&&(192&A)==128&&(192&D)==128&&(B=(15&S)<<18|(63&P)<<12|(63&A)<<6|63&D,(B<=65535||B>=1114112)&&(B=null))),B===null?(B=65533,F=1):B>65535&&(B-=65536,y+=String.fromCharCode(B>>>10&1023|55296),B=56320|1023&B),y+=String.fromCharCode(B),x+=F}return y})(r,t,i)}class Um extends fu{constructor(i,l,h,g){super(i,h,g);zt(this,"offsetBuffer");this.offsetBuffer=l}}class Sb extends Um{constructor(i,l,h,g){super(i,l,h,g!=null?g:l.length-1);zt(this,"textEncoder");this.textEncoder=new TextEncoder}getValueFromBuffer(i){return Gm(this.dataBuffer,this.offsetBuffer[i],this.offsetBuffer[i+1])}}class yu extends Um{constructor(i,l,h,g,y){super(i,h,g,y!=null?y:l.length);zt(this,"indexBuffer");zt(this,"textEncoder");this.indexBuffer=l,this.indexBuffer=l,this.textEncoder=new TextEncoder}getValueFromBuffer(i){let l=this.indexBuffer[i];return Gm(this.dataBuffer,this.offsetBuffer[l],this.offsetBuffer[l+1])}}class Tb extends Um{constructor(i,l,h,g,y,x,S){super(i,h,g,S);zt(this,"indexBuffer");zt(this,"symbolOffsetBuffer");zt(this,"symbolTableBuffer");zt(this,"textEncoder");zt(this,"symbolLengthBuffer");zt(this,"lengthBuffer");zt(this,"decodedDictionary");this.indexBuffer=l,this.symbolOffsetBuffer=y,this.symbolTableBuffer=x,this.textEncoder=new TextEncoder}getValueFromBuffer(i){this.decodedDictionary==null&&(this.symbolLengthBuffer==null&&(this.symbolLengthBuffer=this.offsetToLengthBuffer(this.symbolOffsetBuffer),this.lengthBuffer=this.offsetToLengthBuffer(this.offsetBuffer)),this.decodedDictionary=(function(h,g,y){let x=[],S=new Array(g.length).fill(0);for(let P=1;P<g.length;P++)S[P]=S[P-1]+g[P-1];for(let P=0;P<y.length;P++)if(y[P]===255)x.push(y[++P]);else{let A=g[y[P]],D=S[y[P]];for(let B=0;B<A;B++)x.push(h[D+B])}return new Uint8Array(x)})(this.symbolTableBuffer,this.symbolLengthBuffer,this.dataBuffer));let l=this.indexBuffer[i];return Gm(this.decodedDictionary,this.offsetBuffer[l],this.offsetBuffer[l+1])}offsetToLengthBuffer(i){let l=new Uint32Array(i.length-1),h=i[0];for(let g=1;g<i.length;g++){let y=i[g];l[g-1]=y-h,h=y}return l}}function CM(r,t,i,l,h,g){return i.type==="scalarType"?(function(y,x,S,P,A,D){let B=null,F=0;if(y===0)return null;if(D.nullable){let U=Tn(x,S);F=U.numValues;let H=S.get(),ee=Nd(x,F,S);S.set(H+U.byteLength),B=new fs(ee,U.numValues)}let W=B!=null?B:P;switch(A.physicalType){case 4:case 3:return(function(U,H,ee,ce,te){let ae=Tn(U,H),he=dp(ae,te,U,H),ge=ce.physicalType===3;if(he===Rr.FLAT){let Ie=qd(te)?Fm(U,H,ae,ge,te):Cn(U,H,ae,ge);return new zm(ee.name,Ie,te)}if(he===Rr.SEQUENCE){let Ie=sb(U,H,ae);return new Lm(ee.name,Ie[0],Ie[1],ae.numRleValues)}{let Ie=Bm(U,H,ae,ge);return new Dm(ee.name,Ie,te)}})(x,S,D,A,W);case 9:return(function(U,H,ee,ce,te){var Qe,He;let ae=null,he=null,ge=null,Ie=null,Ge=null,We=null,Ue=null,tt=null;for(let qe=0;qe<ce;qe++){let it=Tn(H,ee);if(it.byteLength!==0)switch(it.physicalStreamType){case en.PRESENT:{let at=Nd(H,it.numValues,ee);We=new fs(at,it.numValues);break}case en.OFFSET:he=te!=null||We!=null?Fm(H,ee,it,!1,te!=null?te:We):Cn(H,ee,it,!1);break;case en.LENGTH:{let at=yl(H,ee,it);ta.DICTIONARY===it.logicalStreamType.lengthType?ae=at:ta.SYMBOL===it.logicalStreamType.lengthType?Ie=at:Ue=at;break}case en.DATA:{let at=H.subarray(ee.get(),ee.get()+it.byteLength);ee.add(it.byteLength);let lt=it.logicalStreamType.dictionaryType;ps.FSST===lt?Ge=at:ps.SINGLE===lt||ps.SHARED===lt?ge=at:ps.NONE===lt&&(tt=at);break}}}return(He=(Qe=(function(qe,it,at,lt,rt,mt,ri){return it?new Tb(qe,at,lt,rt,mt,it,ri):null})(U,Ge,he,ae,ge,Ie,te!=null?te:We))!=null?Qe:(function(qe,it,at,lt,rt){return it?rt?new yu(qe,at,lt,it,rt):new yu(qe,at,lt,it):null})(U,ge,he,ae,te!=null?te:We))!=null?He:(function(qe,it,at,lt,rt){if(!it||!at)return null;if(lt)return rt?new yu(qe,lt,it,at,rt):new yu(qe,lt,it,at);if(rt&&rt.size()!==it.length-1){let mt=new Int32Array(rt.size()),ri=0;for(let Wt=0;Wt<rt.size();Wt++)mt[Wt]=rt.get(Wt)?ri++:0;return new yu(qe,mt,it,at,rt)}return rt?new Sb(qe,it,at,rt):new Sb(qe,it,at)})(U,Ue,tt,he,te!=null?te:We)})(D.name,x,S,D.nullable?y-1:y,B);case 0:return(function(U,H,ee,ce,te){let ae=Tn(U,H),he=ae.numValues,ge=H.get(),Ie=qd(te)?(function(We,Ue,tt,Qe){let He=wb(We,Math.ceil(Ue/8),tt),qe=new fs(He,Ue),it=Qe.size(),at=new fs(new Uint8Array(it),it),lt=0;for(let rt=0;rt<Qe.size();rt++){let mt=!!Qe.get(rt)&&qe.get(lt++);at.set(rt,mt)}return at.getBuffer()})(U,he,H,te):Nd(U,he,H);H.set(ge+ae.byteLength);let Ge=new fs(Ie,he);return new wM(ee.name,Ge,te)})(x,S,D,0,W);case 6:case 5:return(function(U,H,ee,ce,te){let ae=Tn(U,H),he=dp(ae,ce,U,H),ge=te.physicalType===5;if(he===Rr.FLAT){let Ie=qd(ce)?(function(Ge,We,Ue,tt,Qe){return(function(He,qe,it,at){switch(qe.logicalLevelTechnique1){case ii.DELTA:return qe.logicalLevelTechnique2===ii.RLE&&(He=rb(He,qe.runs,qe.numRleValues)),(function(lt,rt){let mt=new BigInt64Array(lt.size()),ri=0;lt.get(0)?(mt[0]=lt.get(0)?rt[0]>>BigInt(1)^-(BigInt(1)&rt[0]):BigInt(0),ri=1):mt[0]=BigInt(0);let Wt=1;for(;Wt!=mt.length;++Wt)mt[Wt]=lt.get(Wt)?mt[Wt-1]+(rt[ri]>>BigInt(1)^-(BigInt(1)&rt[ri++])):mt[Wt-1];return mt})(at,He);case ii.RLE:return(function(lt,rt,mt,ri){let Wt=rt;return mt?(function($i,rn,wr){let Yi=new BigInt64Array($i.size()),Ni=0;for(let gi=0;gi<wr;gi++){let or=Number(rn[gi]),hr=rn[gi+wr];hr=hr>>BigInt(1)^-(BigInt(1)&hr);for(let Bi=Ni;Bi<Ni+or;Bi++)$i.get(Bi)?Yi[Bi]=hr:(Yi[Bi]=BigInt(0),Ni++);Ni+=or}return Yi})(ri,lt,Wt.runs):(function($i,rn,wr){let Yi=new BigInt64Array($i.size()),Ni=0;for(let gi=0;gi<wr;gi++){let or=Number(rn[gi]),hr=rn[gi+wr];for(let Bi=Ni;Bi<Ni+or;Bi++)$i.get(Bi)?Yi[Bi]=hr:(Yi[Bi]=BigInt(0),Ni++);Ni+=or}return Yi})(ri,lt,Wt.runs)})(He,qe,it,at);case ii.NONE:return He=it?(function(lt,rt){let mt=new BigInt64Array(lt.size()),ri=0,Wt=0;for(;Wt!=mt.length;++Wt)if(lt.get(Wt)){let $i=rt[ri++];mt[Wt]=$i>>BigInt(1)^-(BigInt(1)&$i)}else mt[Wt]=BigInt(0);return mt})(at,He):(function(lt,rt){let mt=new BigInt64Array(lt.size()),ri=0,Wt=0;for(;Wt!=mt.length;++Wt)mt[Wt]=lt.get(Wt)?rt[ri++]:BigInt(0);return mt})(at,He),He;default:throw new Error("The specified Logical level technique is not supported")}})(cp(Ge,We,Ue.numValues),Ue,tt,Qe)})(U,H,ae,ge,ce):lb(U,H,ae,ge);return new ub(ee.name,Ie,ce)}if(he===Rr.SEQUENCE){let Ie=ob(U,H,ae);return new db(ee.name,Ie[0],Ie[1],ae.numRleValues)}{let Ie=cb(U,H,ae,ge);return new xb(ee.name,Ie,ce)}})(x,S,D,W,A);case 7:return(function(U,H,ee,ce){let te=Tn(U,H),ae=qd(ce)?(function(he,ge,Ie,Ge){let We=ge.get(),Ue=We+Ge*Float32Array.BYTES_PER_ELEMENT,tt=new Uint8Array(he.subarray(We,Ue)).buffer,Qe=new Float32Array(tt);ge.set(Ue);let He=Ie.size(),qe=new Float32Array(He),it=0;for(let at=0;at<He;at++)qe[at]=Ie.get(at)?Qe[it++]:0;return qe})(U,H,ce,te.numValues):(function(he,ge,Ie){let Ge=ge.get(),We=Ge+Ie*Float32Array.BYTES_PER_ELEMENT,Ue=new Uint8Array(he.subarray(Ge,We)).buffer,tt=new Float32Array(Ue);return ge.set(We),tt})(U,H,te.numValues);return new SM(ee.name,ae,ce)})(x,S,D,W);case 8:return(function(U,H,ee,ce){let te=Tn(U,H),ae=qd(ce)?(function(he,ge,Ie,Ge){let We=ge.get(),Ue=We+Ge*Float64Array.BYTES_PER_ELEMENT,tt=new Uint8Array(he.subarray(We,Ue)).buffer,Qe=new Float64Array(tt);ge.set(Ue);let He=Ie.size(),qe=new Float64Array(He),it=0;for(let at=0;at<He;at++)qe[at]=Ie.get(at)?Qe[it++]:0;return qe})(U,H,ce,te.numValues):(function(he,ge,Ie){let Ge=ge.get(),We=Ge+Ie*Float64Array.BYTES_PER_ELEMENT,Ue=new Uint8Array(he.subarray(Ge,We)).buffer,tt=new Float64Array(Ue);return ge.set(We),tt})(U,H,te.numValues);return new Im(ee.name,ae,ce)})(x,S,D,W);default:throw new Error(`The specified data type for the field is currently not supported: ${A}`)}})(l,r,t,h,i.scalarType,i):l!=1?null:(function(y,x,S,P){let A=null,D=null,B=null,F=null,W=!1;for(;!W;){let ce=Tn(y,x);switch(ce.physicalStreamType){case en.LENGTH:ta.DICTIONARY===ce.logicalStreamType.lengthType?A=yl(y,x,ce):B=yl(y,x,ce);break;case en.DATA:ps.SINGLE===ce.logicalStreamType.dictionaryType||ps.SHARED===ce.logicalStreamType.dictionaryType?(D=y.subarray(x.get(),x.get()+ce.byteLength),W=!0):F=y.subarray(x.get(),x.get()+ce.byteLength),x.add(ce.byteLength)}}let U=S.complexType.children,H=[],ee=0;for(let ce of U){let te=$r(y,x,1)[0];if(te==0)continue;let ae=`${S.name}${ce.name==="default"?"":":"+ce.name}`;if(te!==2||ce.type!=="scalarField"||ce.scalarField.physicalType!==9)throw new Error("Currently only optional string fields are implemented for a struct.");let he=Tn(y,x),ge=Nd(y,he.numValues,x),Ie=Tn(y,x),Ge=Ie.decompressedCount!==P?Fm(y,x,Ie,!1,new fs(ge,he.numValues)):Cn(y,x,Ie,!1);H[ee++]=F?new Tb(ae,Ge,A,D,B,F,new fs(ge,he.numValues)):new yu(ae,Ge,A,D,new fs(ge,he.numValues))}return H})(r,t,i,h)}function qd(r){return r instanceof fs}function kM(r){if(r.name==="id")return!1;if(r.type==="scalarType"){let t=r.scalarType;if(t.type==="physicalType")switch(t.physicalType){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:default:return!1;case 9:return!0}else if(t.type==="logicalType")return!1}else if(r.type==="complexType"){let t=r.complexType;if(t.type==="physicalType")switch(t.physicalType){case 0:case 1:return!0;default:return!1}}return console.warn("Unexpected column type in hasStreamCount",r),!1}let PM=new TextDecoder;function Cb(r,t){let i=$r(r,t,1)[0];if(i===0)return"";let l=t.get(),h=r.subarray(l,l+i);return t.add(i),PM.decode(h)}function kb(r,t){let i=$r(r,t,1)[0]>>>0,l=!!(4&i),h=!!(2&i),g=$r(r,t,1)[0]>>>0,y={};if(1&i&&(y.nullable=!0),h){let x={};if(l?(x.type="logicalType",x.logicalType=g):(x.type="physicalType",x.physicalType=g),8&i){let S=$r(r,t,1)[0]>>>0;x.children=new Array(S);for(let P=0;P<S;P++)x.children[P]=kb(r,t)}y.type="complexField",y.complexField=x}else{let x={};l?(x.type="logicalType",x.logicalType=g):(x.type="physicalType",x.physicalType=g),y.type="scalarField",y.scalarField=x}return y}function EM(r,t){let i=$r(r,t,1)[0]>>>0,l=(function(h){switch(h){case 0:case 1:case 2:case 3:{let g={};g.nullable=!!(1&h),g.columnScope=0;let y={};return y.physicalType=h>1?6:4,y.type="physicalType",g.scalarType=y,g.type="scalarType",g}case 4:{let g={nullable:!1,columnScope:0},y={type:"physicalType",physicalType:0};return g.type="complexType",g.complexType=y,g}case 30:{let g={nullable:!1,columnScope:0},y={type:"physicalType",physicalType:1};return g.type="complexType",g.complexType=y,g}default:return(function(g){let y=null;switch(g){case 10:case 11:y=0;break;case 12:case 13:y=1;break;case 14:case 15:y=2;break;case 16:case 17:y=3;break;case 18:case 19:y=4;break;case 20:case 21:y=5;break;case 22:case 23:y=6;break;case 24:case 25:y=7;break;case 26:case 27:y=8;break;case 28:case 29:y=9;break;default:return null}let x={};x.nullable=!!(1&g),x.columnScope=0;let S={type:"physicalType"};return S.physicalType=y,x.type="scalarType",x.scalarType=S,x})(h)}})(i);if(!l)throw new Error(`Unsupported column type code: ${i}`);if((function(h){return h>=10})(i)?l.name=Cb(r,t):i>=0&&i<=3?l.name="id":i===4&&(l.name="geometry"),(function(h){return h===30})(i)){let h=$r(r,t,1)[0]>>>0,g=l.complexType;g.children=new Array(h);for(let y=0;y<h;y++)g.children[y]=kb(r,t)}return l}function AM(r,t){let i={featureTables:[]},l={};l.name=Cb(r,t);let h=$r(r,t,1)[0]>>>0,g=$r(r,t,1)[0]>>>0;l.columns=new Array(g);for(let y=0;y<g;y++)l.columns[y]=EM(r,t);return i.featureTables.push(l),[i,h]}function MM(r,t,i,l,h,g,y=!1){let x=t.scalarType.physicalType,S=dp(h,g,r,i);if(x===4)switch(S){case Rr.FLAT:{let P=Cn(r,i,h,!1);return new zm(l,P,g)}case Rr.SEQUENCE:{let P=sb(r,i,h);return new Lm(l,P[0],P[1],h.numRleValues)}case Rr.CONST:{let P=Bm(r,i,h,!1);return new Dm(l,P,g)}}else switch(S){case Rr.FLAT:{if(y){let A=(function(D,B,F,W){let U=(function(H,ee,ce){let te=new Float64Array(ee);for(let ae=0;ae<ee;ae++)te[ae]=gM(H,ce);return te})(D,F.numValues,B);return(function(H,ee,ce){switch(ee.logicalLevelTechnique1){case ii.DELTA:return ee.logicalLevelTechnique2===ii.RLE&&(H=nb(H,ee.runs,ee.numRleValues)),(function(te){te[0]=te[0]%2==1?(te[0]+1)/-2:te[0]/2;let ae=te.length/4*4,he=1;if(ae>=4)for(;he<ae-4;he+=4){let ge=te[he],Ie=te[he+1],Ge=te[he+2],We=te[he+3];te[he]=(ge%2==1?(ge+1)/-2:ge/2)+te[he-1],te[he+1]=(Ie%2==1?(Ie+1)/-2:Ie/2)+te[he],te[he+2]=(Ge%2==1?(Ge+1)/-2:Ge/2)+te[he+1],te[he+3]=(We%2==1?(We+1)/-2:We/2)+te[he+2]}for(;he!=te.length;++he)te[he]=(te[he]%2==1?(te[he]+1)/-2:te[he]/2)+te[he-1]})(H),H;case ii.RLE:return(function(te,ae,he){return he?(function(ge,Ie,Ge){let We=new Float64Array(Ge),Ue=0;for(let tt=0;tt<Ie;tt++){let Qe=ge[tt],He=ge[tt+Ie];He=He%2==1?(He+1)/-2:He/2,We.fill(He,Ue,Ue+Qe),Ue+=Qe}return We})(te,ae.runs,ae.numRleValues):nb(te,ae.runs,ae.numRleValues)})(H,ee,ce);case ii.NONE:return H;default:throw new Error(`The specified Logical level technique is not supported: ${ee.logicalLevelTechnique1}`)}})(U,F,W)})(r,i,h,!1);return new Im(l,A,g)}let P=lb(r,i,h,!1);return new ub(l,P,g)}case Rr.SEQUENCE:{let P=ob(r,i,h);return new db(l,P[0],P[1],h.numRleValues)}case Rr.CONST:{let P=cb(r,i,h,!1);return new xb(l,P,g)}}throw new Error("Vector type not supported for id column.")}class zM{constructor(t,i){var l;switch(this._featureData=t,this.properties=this._featureData.properties||{},(l=this._featureData.geometry)===null||l===void 0?void 0:l.type){case Br.POINT:case Br.MULTIPOINT:this.type=1;break;case Br.LINESTRING:case Br.MULTILINESTRING:this.type=2;break;case Br.POLYGON:case Br.MULTIPOLYGON:this.type=3;break;default:this.type=0}this.extent=i,this.id=Number(this._featureData.id)}loadGeometry(){let t=[];for(let i of this._featureData.geometry.coordinates){let l=[];for(let h of i)l.push(new T(h.x,h.y));t.push(l)}return t}}class IM{constructor(t){this.features=[],this.featureTable=t,this.name=t.name,this.extent=t.extent,this.version=2,this.features=t.getFeatures(),this.length=this.features.length}feature(t){return new zM(this.features[t],this.extent)}}class Pb{constructor(t){this.layers={};let i=(function(l,h,g=!0){let y=new mM(0),x=[];for(;y.get()<l.length;){let S=$r(l,y,1)[0]>>>0,P=y.get()+S;if(P>l.length)throw new Error(`Block overruns tile: ${P} > ${l.length}`);if($r(l,y,1)[0]>>>0!=1){y.set(P);continue}let A=AM(l,y),D=A[1],B=A[0].featureTables[0],F=null,W=null,U=[],H=0;for(let ce of B.columns){let te=ce.name;if(te==="id"){let ae=null;if(ce.nullable){let ge=Tn(l,y),Ie=y.get(),Ge=Nd(l,ge.numValues,y);y.set(Ie+ge.byteLength),ae=new fs(Ge,ge.numValues)}let he=Tn(l,y);H=he.decompressedCount,F=MM(l,ce,y,te,he,ae!=null?ae:H,g)}else if(te==="geometry"){let ae=$r(l,y,1)[0];if(H===0){let he=y.get();H=Tn(l,y).decompressedCount,y.set(he)}W=xM(l,ae,y,H)}else{let ae=kM(ce)?$r(l,y,1)[0]:1;if(ae===0&&ce.type==="scalarType")continue;let he=CM(l,y,ce,ae,H);if(he)if(Array.isArray(he))for(let ge of he)U.push(ge);else U.push(he)}}let ee=new fM(B.name,W,F,U,D);x.push(ee),y.set(P)}return x})(new Uint8Array(t));this.layers=i.reduce(((l,h)=>Object.assign(Object.assign({},l),{[h.name]:new IM(h)})),{})}}class LM{constructor(t,i){this.feature=t,this.type=t.type,this.properties=t.tags?t.tags:{},this.extent=i,"id"in t&&(typeof t.id=="string"?this.id=parseInt(t.id,10):typeof t.id!="number"||isNaN(t.id)||(this.id=t.id))}loadGeometry(){let t=[],i=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(let l of i){let h=[];for(let g of l)h.push(new T(g[0],g[1]));t.push(h)}return t}}let Vd="_geojsonTileLayer";function DM(r,t){t.writeVarintField(15,r.version||1),t.writeStringField(1,r.name||""),t.writeVarintField(5,r.extent||4096);let i={keys:[],values:[],keycache:{},valuecache:{}};for(let g=0;g<r.length;g++)i.feature=r.feature(g),t.writeMessage(2,OM,i);let l=i.keys;for(let g of l)t.writeStringField(3,g);let h=i.values;for(let g of h)t.writeMessage(4,FM,g)}function OM(r,t){if(!r.feature)return;let i=r.feature;i.id!==void 0&&t.writeVarintField(1,i.id),t.writeMessage(2,RM,r),t.writeVarintField(3,i.type),t.writeMessage(4,BM,i)}function RM(r,t){var i;for(let l in(i=r.feature)==null?void 0:i.properties){let h=r.feature.properties[l],g=r.keycache[l];if(h==null)continue;g===void 0&&(r.keys.push(l),g=r.keys.length-1,r.keycache[l]=g),t.writeVarint(g),typeof h!="string"&&typeof h!="boolean"&&typeof h!="number"&&(h=JSON.stringify(h));let y=typeof h+":"+h,x=r.valuecache[y];x===void 0&&(r.values.push(h),x=r.values.length-1,r.valuecache[y]=x),t.writeVarint(x)}}function Zm(r,t){return(t<<3)+(7&r)}function Eb(r){return r<<1^r>>31}function BM(r,t){let i=r.loadGeometry(),l=r.type,h=0,g=0;for(let y of i){let x=1;l===1&&(x=y.length),t.writeVarint(Zm(1,x));let S=l===3?y.length-1:y.length;for(let P=0;P<S;P++){P===1&&l!==1&&t.writeVarint(Zm(2,S-1));let A=y[P].x-h,D=y[P].y-g;t.writeVarint(Eb(A)),t.writeVarint(Eb(D)),h+=A,g+=D}r.type===3&&t.writeVarint(Zm(7,1))}}function FM(r,t){let i=typeof r;i==="string"?t.writeStringField(1,r):i==="boolean"?t.writeBooleanField(7,r):i==="number"&&(r%1!=0?t.writeDoubleField(3,r):r<0?t.writeSVarintField(6,r):t.writeVarintField(5,r))}class Ab{constructor(t,i){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new ul(qt,16,0),this.grid3D=new ul(qt,16,0),this.featureIndexArray=new J,this.promoteId=i}insert(t,i,l,h,g,y){let x=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(l,h,g);let S=y?this.grid3D:this.grid;for(let P=0;P<i.length;P++){let A=i[P],D=[1/0,1/0,-1/0,-1/0];for(let B=0;B<A.length;B++){let F=A[B];D[0]=Math.min(D[0],F.x),D[1]=Math.min(D[1],F.y),D[2]=Math.max(D[2],F.x),D[3]=Math.max(D[3],F.y)}D[0]<qt&&D[1]<qt&&D[2]>=0&&D[3]>=0&&S.insert(x,D[0],D[1],D[2],D[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=this.encoding!=="mlt"?new fv(new rp(this.rawTileData)).layers:new Pb(this.rawTileData).layers,this.sourceLayerCoder=new Kv(this.vtLayers?Object.keys(this.vtLayers).sort():[Vd])),this.vtLayers}query(t,i,l,h){this.loadVTLayers();let g=t.params,y=qt/t.tileSize/t.scale,x=ht(g.filter,g.globalState),S=t.queryGeometry,P=t.queryPadding*y,A=lc.fromPoints(S),D=this.grid.query(A.minX-P,A.minY-P,A.maxX+P,A.maxY+P),B=lc.fromPoints(t.cameraQueryGeometry).expandBy(P),F=this.grid3D.query(B.minX,B.minY,B.maxX,B.maxY,((H,ee,ce,te)=>(function(ae,he,ge,Ie,Ge){for(let Ue of ae)if(he<=Ue.x&&ge<=Ue.y&&Ie>=Ue.x&&Ge>=Ue.y)return!0;let We=[new T(he,ge),new T(he,Ge),new T(Ie,Ge),new T(Ie,ge)];if(ae.length>2){for(let Ue of We)if(au(ae,Ue))return!0}for(let Ue=0;Ue<ae.length-1;Ue++)if(NE(ae[Ue],ae[Ue+1],We))return!0;return!1})(t.cameraQueryGeometry,H-P,ee-P,ce+P,te+P)));for(let H of F)D.push(H);D.sort(jM);let W={},U;for(let H=0;H<D.length;H++){let ee=D[H];if(ee===U)continue;U=ee;let ce=this.featureIndexArray.get(ee),te=null;this.loadMatchingFeature(W,ce.bucketIndex,ce.sourceLayerIndex,ce.featureIndex,x,g.layers,g.availableImages,i,l,h,((ae,he,ge)=>(te||(te=Qs(ae)),he.queryIntersectsFeature({queryGeometry:S,feature:ae,featureState:ge,geometry:te,zoom:this.z,transform:t.transform,pixelsToTileUnits:y,pixelPosMatrix:t.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:t.getElevation}))))}return W}loadMatchingFeature(t,i,l,h,g,y,x,S,P,A,D){let B=this.bucketLayerIDs[i];if(y&&!B.some((H=>y.has(H))))return;let F=this.sourceLayerCoder.decode(l),W=this.vtLayers[F].feature(h);if(g.needGeometry){let H=eo(W,!0);if(!g.filter(new Ai(this.tileID.overscaledZ),H,this.tileID.canonical))return}else if(!g.filter(new Ai(this.tileID.overscaledZ),W))return;let U=this.getId(W,F);for(let H=0;H<B.length;H++){let ee=B[H];if(y&&!y.has(ee))continue;let ce=S[ee];if(!ce)continue;let te={};U&&A&&(te=A.getState(ce.sourceLayer||Vd,U));let ae=yi({},P[ee]);ae.paint=Mb(ae.paint,ce.paint,W,te,x),ae.layout=Mb(ae.layout,ce.layout,W,te,x);let he=!D||D(W,ce,te);if(!he)continue;let ge=new Jv(W,this.z,this.x,this.y,U);ge.layer=ae;let Ie=t[ee];Ie===void 0&&(Ie=t[ee]=[]),Ie.push({featureIndex:h,feature:ge,intersectionZ:he})}}lookupSymbolFeatures(t,i,l,h,g,y,x,S){let P={};this.loadVTLayers();let A=ht(g.filterSpec,g.globalState);for(let D of t)this.loadMatchingFeature(P,l,h,D,A,y,x,S,i);return P}hasLayer(t){for(let i of this.bucketLayerIDs)for(let l of i)if(t===l)return!0;return!1}getId(t,i){var l;let h=t.id;return this.promoteId&&(h=t.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[i]],typeof h=="boolean"&&(h=Number(h)),h===void 0&&(!((l=t.properties)===null||l===void 0)&&l.cluster)&&this.promoteId&&(h=Number(t.properties.cluster_id))),h}}function Mb(r,t,i,l,h){return sn(r,((g,y)=>{let x=t instanceof Kl?t.get(y):null;return x&&x.evaluate?x.evaluate(i,l,h):x}))}function jM(r,t){return t-r}function zb(r,t,i,l,h){let g=[];for(let y=0;y<r.length;y++){let x=r[y],S;for(let P=0;P<x.length-1;P++){let A=x[P],D=x[P+1];A.x<t&&D.x<t||(A.x<t?A=new T(t,A.y+(t-A.x)/(D.x-A.x)*(D.y-A.y))._round():D.x<t&&(D=new T(t,A.y+(t-A.x)/(D.x-A.x)*(D.y-A.y))._round()),A.y<i&&D.y<i||(A.y<i?A=new T(A.x+(i-A.y)/(D.y-A.y)*(D.x-A.x),i)._round():D.y<i&&(D=new T(A.x+(i-A.y)/(D.y-A.y)*(D.x-A.x),i)._round()),A.x>=l&&D.x>=l||(A.x>=l?A=new T(l,A.y+(l-A.x)/(D.x-A.x)*(D.y-A.y))._round():D.x>=l&&(D=new T(l,A.y+(l-A.x)/(D.x-A.x)*(D.y-A.y))._round()),A.y>=h&&D.y>=h||(A.y>=h?A=new T(A.x+(h-A.y)/(D.y-A.y)*(D.x-A.x),h)._round():D.y>=h&&(D=new T(A.x+(h-A.y)/(D.y-A.y)*(D.x-A.x),h)._round()),S&&A.equals(S[S.length-1])||(S=[A],g.push(S)),S.push(D)))))}}return g}function Ib(r,t,i,l,h){switch(t){case 1:return(function(g,y,x,S){let P=[];for(let A of g)for(let D of A){let B=S===0?D.x:D.y;B>=y&&B<=x&&P.push([D])}return P})(r,i,l,h);case 2:return Lb(r,i,l,h,!1);case 3:return Lb(r,i,l,h,!0)}return[]}function NM(r,t,i,l,h){let g=l===0?qM:VM,y=[],x=[];for(let A=0;A<r.length-1;A++){let D=r[A],B=r[A+1],F=l===0?D.x:D.y,W=l===0?B.x:B.y,U=!1;F<t?W>t&&y.push(g(D,B,t)):F>i?W<i&&y.push(g(D,B,i)):y.push(D),W<t&&F>=t&&(y.push(g(D,B,t)),U=!0),W>i&&F<=i&&(y.push(g(D,B,i)),U=!0),!h&&U&&(x.push(y),y=[])}let S=r.length-1,P=l===0?r[S].x:r[S].y;return P>=t&&P<=i&&y.push(r[S]),h&&y.length>0&&!y[0].equals(y[y.length-1])&&y.push(new T(y[0].x,y[0].y)),y.length>0&&x.push(y),x}function Lb(r,t,i,l,h){let g=[];for(let y of r){let x=NM(y,t,i,l,h);x.length>0&&g.push(...x)}return g}function qM(r,t,i){return new T(i,r.y+(i-r.x)/(t.x-r.x)*(t.y-r.y))}function VM(r,t,i){return new T(r.x+(i-r.y)/(t.y-r.y)*(t.x-r.x),i)}ut("FeatureIndex",Ab,{omit:["rawTileData","sourceLayerCoder"]});class _l extends T{constructor(t,i,l,h){super(t,i),this.angle=l,h!==void 0&&(this.segment=h)}clone(){return new _l(this.x,this.y,this.angle,this.segment)}}function Db(r,t,i,l,h){if(t.segment===void 0||i===0)return!0;let g=t,y=t.segment+1,x=0;for(;x>-i/2;){if(y--,y<0)return!1;x-=r[y].dist(g),g=r[y]}x+=r[y].dist(r[y+1]),y++;let S=[],P=0;for(;x<i/2;){let A=r[y],D=r[y+1];if(!D)return!1;let B=r[y-1].angleTo(A)-A.angleTo(D);for(B=Math.abs((B+3*Math.PI)%(2*Math.PI)-Math.PI),S.push({distance:x,angleDelta:B}),P+=B;x-S[0].distance>l;)P-=S.shift().angleDelta;if(P>h)return!1;y++,x+=A.dist(D)}return!0}function Ob(r){let t=0;for(let i=0;i<r.length-1;i++)t+=r[i].dist(r[i+1]);return t}function Rb(r,t,i){return r?.6*t*i:0}function Bb(r,t){return Math.max(r?r.right-r.left:0,t?t.right-t.left:0)}function WM(r,t,i,l,h,g){let y=Rb(i,h,g),x=Bb(i,l)*g,S=0,P=Ob(r)/2;for(let A=0;A<r.length-1;A++){let D=r[A],B=r[A+1],F=D.dist(B);if(S+F>P){let W=(P-S)/F,U=Ii.number(D.x,B.x,W),H=Ii.number(D.y,B.y,W),ee=new _l(U,H,B.angleTo(D),A);return ee._round(),!y||Db(r,ee,x,y,t)?ee:void 0}S+=F}}function GM(r,t,i,l,h,g,y,x,S){let P=Rb(l,g,y),A=Bb(l,h),D=A*y,B=r[0].x===0||r[0].x===S||r[0].y===0||r[0].y===S;return t-D<t/4&&(t=D+t/4),Fb(r,B?t/2*x%t:(A/2+2*g)*y*x%t,t,P,i,D,B,!1,S)}function Fb(r,t,i,l,h,g,y,x,S){let P=g/2,A=Ob(r),D=0,B=t-i,F=[];for(let W=0;W<r.length-1;W++){let U=r[W],H=r[W+1],ee=U.dist(H),ce=H.angleTo(U);for(;B+i<D+ee;){B+=i;let te=(B-D)/ee,ae=Ii.number(U.x,H.x,te),he=Ii.number(U.y,H.y,te);if(ae>=0&&ae<S&&he>=0&&he<S&&B-P>=0&&B+P<=A){let ge=new _l(ae,he,ce,W);ge._round(),l&&!Db(r,ge,g,l,h)||F.push(ge)}}D+=ee}return x||F.length||y||(F=Fb(r,D/2,i,l,h,g,y,!0,S)),F}function jb(r,t,i,l){let h=[],g=r.image,y=g.pixelRatio,x=g.paddedRect.w-2,S=g.paddedRect.h-2,P={x1:r.left,y1:r.top,x2:r.right,y2:r.bottom},A=g.stretchX||[[0,x]],D=g.stretchY||[[0,S]],B=(qe,it)=>qe+it[1]-it[0],F=A.reduce(B,0),W=D.reduce(B,0),U=x-F,H=S-W,ee=0,ce=F,te=0,ae=W,he=0,ge=U,Ie=0,Ge=H;if(g.content&&l){let qe=g.content,it=qe[2]-qe[0],at=qe[3]-qe[1];(g.textFitWidth||g.textFitHeight)&&(P=Dv(r)),ee=mp(A,0,qe[0]),te=mp(D,0,qe[1]),ce=mp(A,qe[0],qe[2]),ae=mp(D,qe[1],qe[3]),he=qe[0]-ee,Ie=qe[1]-te,ge=it-ce,Ge=at-ae}let We=P.x1,Ue=P.y1,tt=P.x2-We,Qe=P.y2-Ue,He=(qe,it,at,lt)=>{let rt=gp(qe.stretch-ee,ce,tt,We),mt=yp(qe.fixed-he,ge,qe.stretch,F),ri=gp(it.stretch-te,ae,Qe,Ue),Wt=yp(it.fixed-Ie,Ge,it.stretch,W),$i=gp(at.stretch-ee,ce,tt,We),rn=yp(at.fixed-he,ge,at.stretch,F),wr=gp(lt.stretch-te,ae,Qe,Ue),Yi=yp(lt.fixed-Ie,Ge,lt.stretch,W),Ni=new T(rt,ri),gi=new T($i,ri),or=new T($i,wr),hr=new T(rt,wr),Bi=new T(mt/y,Wt/y),Fn=new T(rn/y,Yi/y),nn=t*Math.PI/180;if(nn){let Fr=Math.sin(nn),tr=Math.cos(nn),Sr=[tr,-Fr,Fr,tr];Ni._matMult(Sr),gi._matMult(Sr),hr._matMult(Sr),or._matMult(Sr)}let jn=qe.stretch+qe.fixed,Wa=it.stretch+it.fixed;return{tl:Ni,tr:gi,bl:hr,br:or,tex:{x:g.paddedRect.x+1+jn,y:g.paddedRect.y+1+Wa,w:at.stretch+at.fixed-jn,h:lt.stretch+lt.fixed-Wa},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Bi,pixelOffsetBR:Fn,minFontScaleX:ge/y/tt,minFontScaleY:Ge/y/Qe,isSDF:i}};if(l&&(g.stretchX||g.stretchY)){let qe=Nb(A,U,F),it=Nb(D,H,W);for(let at=0;at<qe.length-1;at++){let lt=qe[at],rt=qe[at+1];for(let mt=0;mt<it.length-1;mt++)h.push(He(lt,it[mt],rt,it[mt+1]))}}else h.push(He({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:x+1},{fixed:0,stretch:S+1}));return h}function mp(r,t,i){let l=0;for(let h of r)l+=Math.max(t,Math.min(i,h[1]))-Math.max(t,Math.min(i,h[0]));return l}function Nb(r,t,i){let l=[{fixed:-1,stretch:0}];for(let[h,g]of r){let y=l[l.length-1];l.push({fixed:h-y.stretch,stretch:y.stretch}),l.push({fixed:h-y.stretch,stretch:y.stretch+(g-h)})}return l.push({fixed:t+1,stretch:i}),l}function gp(r,t,i,l){return r/t*i+l}function yp(r,t,i,l){return r-t*i/l}ut("Anchor",_l);class _p{constructor(t,i,l,h,g,y,x,S,P,A){var D;if(this.boxStartIndex=t.length,P){let B=y.top,F=y.bottom,W=y.collisionPadding;W&&(B-=W[1],F+=W[3]);let U=F-B;U>0&&(U=Math.max(10,U),this.circleDiameter=U)}else{let B=!((D=y.image)===null||D===void 0)&&D.content&&(y.image.textFitWidth||y.image.textFitHeight)?Dv(y):{x1:y.left,y1:y.top,x2:y.right,y2:y.bottom};B.y1=B.y1*x-S[0],B.y2=B.y2*x+S[2],B.x1=B.x1*x-S[3],B.x2=B.x2*x+S[1];let F=y.collisionPadding;if(F&&(B.x1-=F[0]*x,B.y1-=F[1]*x,B.x2+=F[2]*x,B.y2+=F[3]*x),A){let W=new T(B.x1,B.y1),U=new T(B.x2,B.y1),H=new T(B.x1,B.y2),ee=new T(B.x2,B.y2),ce=A*Math.PI/180;W._rotate(ce),U._rotate(ce),H._rotate(ce),ee._rotate(ce),B.x1=Math.min(W.x,U.x,H.x,ee.x),B.x2=Math.max(W.x,U.x,H.x,ee.x),B.y1=Math.min(W.y,U.y,H.y,ee.y),B.y2=Math.max(W.y,U.y,H.y,ee.y)}t.emplaceBack(i.x,i.y,B.x1,B.y1,B.x2,B.y2,l,h,g)}this.boxEndIndex=t.length}}class UM{constructor(t=[],i=(l,h)=>l<h?-1:l>h?1:0){if(this.data=t,this.length=this.data.length,this.compare=i,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(t){this.data.push(t),this._up(this.length++)}pop(){if(this.length===0)return;let t=this.data[0],i=this.data.pop();return--this.length>0&&(this.data[0]=i,this._down(0)),t}peek(){return this.data[0]}_up(t){let{data:i,compare:l}=this,h=i[t];for(;t>0;){let g=t-1>>1,y=i[g];if(l(h,y)>=0)break;i[t]=y,t=g}i[t]=h}_down(t){let{data:i,compare:l}=this,h=this.length>>1,g=i[t];for(;t<h;){let y=1+(t<<1),x=y+1;if(x<this.length&&l(i[x],i[y])<0&&(y=x),l(i[y],g)>=0)break;i[t]=i[y],t=y}i[t]=g}}function ZM(r,t=1,i=!1){let l=lc.fromPoints(r[0]),h=Math.min(l.width(),l.height()),g=h/2,y=new UM([],HM),{minX:x,minY:S,maxX:P,maxY:A}=l;if(h===0)return new T(x,S);for(let F=x;F<P;F+=h)for(let W=S;W<A;W+=h)y.push(new _u(F+g,W+g,g,r));let D=(function(F){let W=0,U=0,H=0,ee=F[0];for(let ce=0,te=ee.length,ae=te-1;ce<te;ae=ce++){let he=ee[ce],ge=ee[ae],Ie=he.x*ge.y-ge.x*he.y;U+=(he.x+ge.x)*Ie,H+=(he.y+ge.y)*Ie,W+=3*Ie}return new _u(U/W,H/W,0,F)})(r),B=y.length;for(;y.length;){let F=y.pop();(F.d>D.d||!D.d)&&(D=F,i&&console.log("found best %d after %d probes",Math.round(1e4*F.d)/1e4,B)),F.max-D.d<=t||(g=F.h/2,y.push(new _u(F.p.x-g,F.p.y-g,g,r)),y.push(new _u(F.p.x+g,F.p.y-g,g,r)),y.push(new _u(F.p.x-g,F.p.y+g,g,r)),y.push(new _u(F.p.x+g,F.p.y+g,g,r)),B+=4)}return i&&(console.log(`num probes: ${B}`),console.log(`best distance: ${D.d}`)),D.p}function HM(r,t){return t.max-r.max}function _u(r,t,i,l){this.p=new T(r,t),this.h=i,this.d=(function(h,g){let y=!1,x=1/0;for(let S=0;S<g.length;S++){let P=g[S];for(let A=0,D=P.length,B=D-1;A<D;B=A++){let F=P[A],W=P[B];F.y>h.y!=W.y>h.y&&h.x<(W.x-F.x)*(h.y-F.y)/(W.y-F.y)+F.x&&(y=!y),x=Math.min(x,U_(h,F,W))}}return(y?1:-1)*Math.sqrt(x)})(this.p,l),this.max=this.d+this.h*Math.SQRT2}var tn;f.aP=void 0,(tn=f.aP||(f.aP={}))[tn.center=1]="center",tn[tn.left=2]="left",tn[tn.right=3]="right",tn[tn.top=4]="top",tn[tn.bottom=5]="bottom",tn[tn["top-left"]=6]="top-left",tn[tn["top-right"]=7]="top-right",tn[tn["bottom-left"]=8]="bottom-left",tn[tn["bottom-right"]=9]="bottom-right";let Hm=Number.POSITIVE_INFINITY;function qb(r,t){return t[1]!==Hm?(function(i,l,h){let g=0,y=0;switch(l=Math.abs(l),h=Math.abs(h),i){case"top-right":case"top-left":case"top":y=h-7;break;case"bottom-right":case"bottom-left":case"bottom":y=7-h}switch(i){case"top-right":case"bottom-right":case"right":g=-l;break;case"top-left":case"bottom-left":case"left":g=l}return[g,y]})(r,t[0],t[1]):(function(i,l){let h=0,g=0;l<0&&(l=0);let y=l/Math.SQRT2;switch(i){case"top-right":case"top-left":g=y-7;break;case"bottom-right":case"bottom-left":g=7-y;break;case"bottom":g=7-l;break;case"top":g=l-7}switch(i){case"top-right":case"bottom-right":h=-y;break;case"top-left":case"bottom-left":h=y;break;case"left":h=l;break;case"right":h=-l}return[h,g]})(r,t[0])}function Vb(r,t,i){var l;let h=r.layout,g=(l=h.get("text-variable-anchor-offset"))===null||l===void 0?void 0:l.evaluate(t,{},i);if(g){let x=g.values,S=[];for(let P=0;P<x.length;P+=2){let A=S[P]=x[P],D=x[P+1].map((B=>B*Or));A.startsWith("top")?D[1]-=7:A.startsWith("bottom")&&(D[1]+=7),S[P+1]=D}return new Cr(S)}let y=h.get("text-variable-anchor");if(y){let x;x=r._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[h.get("text-radial-offset").evaluate(t,{},i)*Or,Hm]:h.get("text-offset").evaluate(t,{},i).map((P=>P*Or));let S=[];for(let P of y)S.push(P,qb(P,x));return new Cr(S)}return null}function $m(r){switch(r){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function $M(r,t,i,l,h,g,y,x,S,P,A,D){let B=g.textMaxSize.evaluate(t,{});B===void 0&&(B=y);let F=r.layers[0].layout,W=F.get("icon-offset").evaluate(t,{},A),U=Gb(i.horizontal),H=y/24,ee=r.tilePixelRatio*H,ce=r.tilePixelRatio*B/24,te=r.tilePixelRatio*x,ae=r.tilePixelRatio*F.get("symbol-spacing"),he=F.get("text-padding")*r.tilePixelRatio,ge=(function(at,lt,rt,mt=1){let ri=at.get("icon-padding").evaluate(lt,{},rt),Wt=ri&&ri.values;return[Wt[0]*mt,Wt[1]*mt,Wt[2]*mt,Wt[3]*mt]})(F,t,A,r.tilePixelRatio),Ie=F.get("text-max-angle")/180*Math.PI,Ge=F.get("text-rotation-alignment")!=="viewport"&&F.get("symbol-placement")!=="point",We=F.get("icon-rotation-alignment")==="map"&&F.get("symbol-placement")!=="point",Ue=F.get("symbol-placement"),tt=ae/2,Qe=F.get("icon-text-fit"),He;l&&Qe!=="none"&&(r.allowVerticalPlacement&&i.vertical&&(He=Ov(l,i.vertical,Qe,F.get("icon-text-fit-padding"),W,H)),U&&(l=Ov(l,U,Qe,F.get("icon-text-fit-padding"),W,H)));let qe=A?D.line.getGranularityForZoomLevel(A.z):1,it=(at,lt)=>{lt.x<0||lt.x>=qt||lt.y<0||lt.y>=qt||(function(rt,mt,ri,Wt,$i,rn,wr,Yi,Ni,gi,or,hr,Bi,Fn,nn,jn,Wa,Fr,tr,Sr,lr,jr,Lo,ms,Ud){let vl=rt.addToLineVertexArray(mt,ri),dc,vu,bu,xu,$b=0,Yb=0,Xb=0,Kb=0,ig=-1,rg=-1,Do={},Jb=dr("");if(rt.allowVerticalPlacement&&Wt.vertical){let fn=Yi.layout.get("text-rotate").evaluate(lr,{},ms)+90;bu=new _p(Ni,mt,gi,or,hr,Wt.vertical,Bi,Fn,nn,fn),wr&&(xu=new _p(Ni,mt,gi,or,hr,wr,Wa,Fr,nn,fn))}if($i){let fn=Yi.layout.get("icon-rotate").evaluate(lr,{}),Ca=Yi.layout.get("icon-text-fit")!=="none",hc=jb($i,fn,Lo,Ca),ys=wr?jb(wr,fn,Lo,Ca):void 0;vu=new _p(Ni,mt,gi,or,hr,$i,Wa,Fr,!1,fn),$b=4*hc.length;let pc=rt.iconSizeData,to=null;pc.kind==="source"?(to=[zo*Yi.layout.get("icon-size").evaluate(lr,{})],to[0]>ml&&fr(`${rt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):pc.kind==="composite"&&(to=[zo*jr.compositeIconSizes[0].evaluate(lr,{},ms),zo*jr.compositeIconSizes[1].evaluate(lr,{},ms)],(to[0]>ml||to[1]>ml)&&fr(`${rt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),rt.addSymbols(rt.icon,hc,to,Sr,tr,lr,f.az.none,mt,vl.lineStartIndex,vl.lineLength,-1,ms),ig=rt.icon.placedSymbolArray.length-1,ys&&(Yb=4*ys.length,rt.addSymbols(rt.icon,ys,to,Sr,tr,lr,f.az.vertical,mt,vl.lineStartIndex,vl.lineLength,-1,ms),rg=rt.icon.placedSymbolArray.length-1)}let Qb=Object.keys(Wt.horizontal);for(let fn of Qb){let Ca=Wt.horizontal[fn];if(!dc){Jb=dr(Ca.text);let ys=Yi.layout.get("text-rotate").evaluate(lr,{},ms);dc=new _p(Ni,mt,gi,or,hr,Ca,Bi,Fn,nn,ys)}let hc=Ca.positionedLines.length===1;if(Xb+=Wb(rt,mt,Ca,rn,Yi,nn,lr,jn,vl,Wt.vertical?f.az.horizontal:f.az.horizontalOnly,hc?Qb:[fn],Do,ig,jr,ms),hc)break}Wt.vertical&&(Kb+=Wb(rt,mt,Wt.vertical,rn,Yi,nn,lr,jn,vl,f.az.vertical,["vertical"],Do,rg,jr,ms));let KM=dc?dc.boxStartIndex:rt.collisionBoxArray.length,JM=dc?dc.boxEndIndex:rt.collisionBoxArray.length,QM=bu?bu.boxStartIndex:rt.collisionBoxArray.length,ez=bu?bu.boxEndIndex:rt.collisionBoxArray.length,tz=vu?vu.boxStartIndex:rt.collisionBoxArray.length,iz=vu?vu.boxEndIndex:rt.collisionBoxArray.length,rz=xu?xu.boxStartIndex:rt.collisionBoxArray.length,nz=xu?xu.boxEndIndex:rt.collisionBoxArray.length,gs=-1,bp=(fn,Ca)=>fn&&fn.circleDiameter?Math.max(fn.circleDiameter,Ca):Ca;gs=bp(dc,gs),gs=bp(bu,gs),gs=bp(vu,gs),gs=bp(xu,gs);let ex=gs>-1?1:0;ex&&(gs*=Ud/Or),rt.glyphOffsetArray.length>=hu.MAX_GLYPHS&&fr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),lr.sortKey!==void 0&&rt.addToSortKeyRanges(rt.symbolInstances.length,lr.sortKey);let az=Vb(Yi,lr,ms),[sz,oz]=(function(fn,Ca){let hc=fn.length,ys=Ca==null?void 0:Ca.values;if((ys==null?void 0:ys.length)>0)for(let pc=0;pc<ys.length;pc+=2){let to=ys[pc+1];fn.emplaceBack(f.aP[ys[pc]],to[0],to[1])}return[hc,fn.length]})(rt.textAnchorOffsets,az);rt.symbolInstances.emplaceBack(mt.x,mt.y,Do.right>=0?Do.right:-1,Do.center>=0?Do.center:-1,Do.left>=0?Do.left:-1,Do.vertical||-1,ig,rg,Jb,KM,JM,QM,ez,tz,iz,rz,nz,gi,Xb,Kb,$b,Yb,ex,0,Bi,gs,sz,oz)})(r,lt,at,i,l,h,He,r.layers[0],r.collisionBoxArray,t.index,t.sourceLayerIndex,r.index,ee,[he,he,he,he],Ge,S,te,ge,We,W,t,g,P,A,y)};if(Ue==="line")for(let at of zb(t.geometry,0,0,qt,qt)){let lt=oc(at,qe),rt=GM(lt,ae,Ie,i.vertical||U,l,24,ce,r.overscaling,qt);for(let mt of rt)U&&YM(r,U.text,tt,mt)||it(lt,mt)}else if(Ue==="line-center"){for(let at of t.geometry)if(at.length>1){let lt=oc(at,qe),rt=WM(lt,Ie,i.vertical||U,l,24,ce);rt&&it(lt,rt)}}else if(t.type==="Polygon")for(let at of Bs(t.geometry,0)){let lt=ZM(at,16);it(oc(at[0],qe,!0),new _l(lt.x,lt.y,0))}else if(t.type==="LineString")for(let at of t.geometry){let lt=oc(at,qe);it(lt,new _l(lt[0].x,lt[0].y,0))}else if(t.type==="Point")for(let at of t.geometry)for(let lt of at)it([lt],new _l(lt.x,lt.y,0))}function Wb(r,t,i,l,h,g,y,x,S,P,A,D,B,F,W){let U=(function(ce,te,ae,he,ge,Ie,Ge,We){let Ue=he.layout.get("text-rotate").evaluate(Ie,{})*Math.PI/180,tt=[];for(let Qe of te.positionedLines)for(let He of Qe.positionedGlyphs){if(!He.rect)continue;let qe=He.rect||{},it=4,at=!0,lt=1,rt=0,mt=(ge||We)&&He.vertical,ri=He.metrics.advance*He.scale/2;if(We&&te.verticalizable&&(rt=Qe.lineOffset/2-(He.imageName?-(Or-He.metrics.width*He.scale)/2:(He.scale-1)*Or)),He.imageName){let Fr=Ge[He.imageName];at=Fr.sdf,lt=Fr.pixelRatio,it=1/lt}let Wt=ge?[He.x+ri,He.y]:[0,0],$i=ge?[0,0]:[He.x+ri+ae[0],He.y+ae[1]-rt],rn=[0,0];mt&&(rn=$i,$i=[0,0]);let wr=He.metrics.isDoubleResolution?2:1,Yi=(He.metrics.left-it)*He.scale-ri+$i[0],Ni=(-He.metrics.top-it)*He.scale+$i[1],gi=Yi+qe.w/wr*He.scale/lt,or=Ni+qe.h/wr*He.scale/lt,hr=new T(Yi,Ni),Bi=new T(gi,Ni),Fn=new T(Yi,or),nn=new T(gi,or);if(mt){let Fr=new T(-ri,ri- -17),tr=-Math.PI/2,Sr=12-ri,lr=new T(22-Sr,-(He.imageName?Sr:0)),jr=new T(...rn);hr._rotateAround(tr,Fr)._add(lr)._add(jr),Bi._rotateAround(tr,Fr)._add(lr)._add(jr),Fn._rotateAround(tr,Fr)._add(lr)._add(jr),nn._rotateAround(tr,Fr)._add(lr)._add(jr)}if(Ue){let Fr=Math.sin(Ue),tr=Math.cos(Ue),Sr=[tr,-Fr,Fr,tr];hr._matMult(Sr),Bi._matMult(Sr),Fn._matMult(Sr),nn._matMult(Sr)}let jn=new T(0,0),Wa=new T(0,0);tt.push({tl:hr,tr:Bi,bl:Fn,br:nn,tex:qe,writingMode:te.writingMode,glyphOffset:Wt,sectionIndex:He.sectionIndex,isSDF:at,pixelOffsetTL:jn,pixelOffsetBR:Wa,minFontScaleX:0,minFontScaleY:0})}return tt})(0,i,x,h,g,y,l,r.allowVerticalPlacement),H=r.textSizeData,ee=null;H.kind==="source"?(ee=[zo*h.layout.get("text-size").evaluate(y,{})],ee[0]>ml&&fr(`${r.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):H.kind==="composite"&&(ee=[zo*F.compositeTextSizes[0].evaluate(y,{},W),zo*F.compositeTextSizes[1].evaluate(y,{},W)],(ee[0]>ml||ee[1]>ml)&&fr(`${r.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),r.addSymbols(r.text,U,ee,x,g,y,P,t,S.lineStartIndex,S.lineLength,B,W);for(let ce of A)D[ce]=r.text.placedSymbolArray.length-1;return 4*U.length}function Gb(r){for(let t in r)return r[t];return null}function YM(r,t,i,l){let h=r.compareText;if(t in h){let g=h[t];for(let y=g.length-1;y>=0;y--)if(l.dist(g[y])<i)return!0}else h[t]=[];return h[t].push(l),!1}let Ub=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Ym{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");let[i,l]=new Uint8Array(t,0,2);if(i!==219)throw new Error("Data does not appear to be in a KDBush format.");let h=l>>4;if(h!==1)throw new Error(`Got v${h} data when expected v1.`);let g=Ub[15&l];if(!g)throw new Error("Unrecognized array type.");let[y]=new Uint16Array(t,2,1),[x]=new Uint32Array(t,4,1);return new Ym(x,y,g,t)}constructor(t,i=64,l=Float64Array,h){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+i,2),65535),this.ArrayType=l,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;let g=Ub.indexOf(this.ArrayType),y=2*t*this.ArrayType.BYTES_PER_ELEMENT,x=t*this.IndexArrayType.BYTES_PER_ELEMENT,S=(8-x%8)%8;if(g<0)throw new Error(`Unexpected typed array class: ${l}.`);h&&h instanceof ArrayBuffer?(this.data=h,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+x+S,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+y+x+S),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+x+S,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+g]),new Uint16Array(this.data,2,1)[0]=i,new Uint32Array(this.data,4,1)[0]=t)}add(t,i){let l=this._pos>>1;return this.ids[l]=l,this.coords[this._pos++]=t,this.coords[this._pos++]=i,l}finish(){let t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return Xm(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,i,l,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:g,coords:y,nodeSize:x}=this,S=[0,g.length-1,0],P=[];for(;S.length;){let A=S.pop()||0,D=S.pop()||0,B=S.pop()||0;if(D-B<=x){for(let H=B;H<=D;H++){let ee=y[2*H],ce=y[2*H+1];ee>=t&&ee<=l&&ce>=i&&ce<=h&&P.push(g[H])}continue}let F=B+D>>1,W=y[2*F],U=y[2*F+1];W>=t&&W<=l&&U>=i&&U<=h&&P.push(g[F]),(A===0?t<=W:i<=U)&&(S.push(B),S.push(F-1),S.push(1-A)),(A===0?l>=W:h>=U)&&(S.push(F+1),S.push(D),S.push(1-A))}return P}within(t,i,l){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:h,coords:g,nodeSize:y}=this,x=[0,h.length-1,0],S=[],P=l*l;for(;x.length;){let A=x.pop()||0,D=x.pop()||0,B=x.pop()||0;if(D-B<=y){for(let H=B;H<=D;H++)Hb(g[2*H],g[2*H+1],t,i)<=P&&S.push(h[H]);continue}let F=B+D>>1,W=g[2*F],U=g[2*F+1];Hb(W,U,t,i)<=P&&S.push(h[F]),(A===0?t-l<=W:i-l<=U)&&(x.push(B),x.push(F-1),x.push(1-A)),(A===0?t+l>=W:i+l>=U)&&(x.push(F+1),x.push(D),x.push(1-A))}return S}}function Xm(r,t,i,l,h,g){if(h-l<=i)return;let y=l+h>>1;Zb(r,t,y,l,h,g),Xm(r,t,i,l,y-1,1-g),Xm(r,t,i,y+1,h,1-g)}function Zb(r,t,i,l,h,g){for(;h>l;){if(h-l>600){let P=h-l+1,A=i-l+1,D=Math.log(P),B=.5*Math.exp(2*D/3),F=.5*Math.sqrt(D*B*(P-B)/P)*(A-P/2<0?-1:1);Zb(r,t,i,Math.max(l,Math.floor(i-A*B/P+F)),Math.min(h,Math.floor(i+(P-A)*B/P+F)),g)}let y=t[2*i+g],x=l,S=h;for(Wd(r,t,l,i),t[2*h+g]>y&&Wd(r,t,l,h);x<S;){for(Wd(r,t,x,S),x++,S--;t[2*x+g]<y;)x++;for(;t[2*S+g]>y;)S--}t[2*l+g]===y?Wd(r,t,l,S):(S++,Wd(r,t,S,h)),S<=i&&(l=S+1),i<=S&&(h=S-1)}}function Wd(r,t,i,l){Km(r,i,l),Km(t,2*i,2*l),Km(t,2*i+1,2*l+1)}function Km(r,t,i){let l=r[t];r[t]=r[i],r[i]=l}function Hb(r,t,i,l){let h=r-i,g=t-l;return h*h+g*g}var Jm;f.cI=void 0,(Jm=f.cI||(f.cI={})).create="create",Jm.load="load",Jm.fullLoad="fullLoad";let vp=null,Gd=[],Qm=1e3/60,eg="loadTime",tg="fullLoadTime",XM={mark(r){performance.mark(r)},frame(r){let t=r;vp!=null&&Gd.push(t-vp),vp=t},clearMetrics(){vp=null,Gd=[],performance.clearMeasures(eg),performance.clearMeasures(tg);for(let r in f.cI)performance.clearMarks(f.cI[r])},getPerformanceMetrics(){performance.measure(eg,f.cI.create,f.cI.load),performance.measure(tg,f.cI.create,f.cI.fullLoad);let r=performance.getEntriesByName(eg)[0].duration,t=performance.getEntriesByName(tg)[0].duration,i=Gd.length,l=1/(Gd.reduce(((g,y)=>g+y),0)/i/1e3),h=Gd.filter((g=>g>Qm)).reduce(((g,y)=>g+(y-Qm)/Qm),0);return{loadTime:r,fullLoadTime:t,fps:l,percentDroppedFrames:h/(i+h)*100,totalFrames:i}}};f.$=Y,f.A=_e,f.B=cl,f.C=Lr,f.D=ft,f.E=Xe,f.F=function([r,t,i]){return t+=90,t*=Math.PI/180,i*=Math.PI/180,{x:r*Math.cos(t)*Math.sin(i),y:r*Math.sin(t)*Math.sin(i),z:r*Math.cos(i)}},f.G=Ii,f.H=Ai,f.I=xm,f.J=Bh,f.K=function(r){if(zi==null){let t=r.navigator?r.navigator.userAgent:null;zi=!!r.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return zi},f.L=class{constructor(r,t){this.target=r,this.mapId=t,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new dM((()=>this.process())),this.subscription=Ea(this.target,"message",(i=>this.receive(i)),!1),this.globalScope=yn(self)?r:window}registerMessageHandler(r,t){this.messageHandlers[r]=t}unregisterMessageHandler(r){delete this.messageHandlers[r]}sendAsync(r,t){return new Promise(((i,l)=>{let h=Math.round(1e18*Math.random()).toString(36).substring(0,10),g=t?Ea(t.signal,"abort",(()=>{g==null||g.unsubscribe(),delete this.resolveRejects[h];let S={id:h,type:"<cancel>",origin:location.origin,targetMapId:r.targetMapId,sourceMapId:this.mapId};this.target.postMessage(S)}),hM):null;this.resolveRejects[h]={resolve:S=>{g==null||g.unsubscribe(),i(S)},reject:S=>{g==null||g.unsubscribe(),l(S)}};let y=[],x=Object.assign(Object.assign({},r),{id:h,sourceMapId:this.mapId,origin:location.origin,data:Hl(r.data,y)});this.target.postMessage(x,{transfer:y})}))}receive(r){let t=r.data,i=t.id;if(!(t.origin!=="file://"&&location.origin!=="file://"&&t.origin!=="resource://android"&&location.origin!=="resource://android"&&t.origin!==location.origin||t.targetMapId&&this.mapId!==t.targetMapId)){if(t.type==="<cancel>"){delete this.tasks[i];let l=this.abortControllers[i];return delete this.abortControllers[i],void(l&&l.abort())}if(yn(self)||t.mustQueue)return this.tasks[i]=t,this.taskQueue.push(i),void this.invoker.trigger();this.processTask(i,t)}}process(){if(this.taskQueue.length===0)return;let r=this.taskQueue.shift(),t=this.tasks[r];delete this.tasks[r],this.taskQueue.length>0&&this.invoker.trigger(),t&&this.processTask(r,t)}processTask(r,t){return a(this,void 0,void 0,(function*(){if(t.type==="<response>"){let h=this.resolveRejects[r];return delete this.resolveRejects[r],h?void(t.error?h.reject($l(t.error)):h.resolve($l(t.data))):void 0}if(!this.messageHandlers[t.type])return void this.completeTask(r,new Error(`Could not find a registered handler for ${t.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));let i=$l(t.data),l=new AbortController;this.abortControllers[r]=l;try{let h=yield this.messageHandlers[t.type](t.sourceMapId,i,l);this.completeTask(r,null,h)}catch(h){this.completeTask(r,h)}}))}completeTask(r,t,i){let l=[];delete this.abortControllers[r];let h={id:r,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:t?Hl(t):null,data:Hl(i,l)};this.target.postMessage(h,{transfer:l})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},f.M=Q,f.N=function(){var r=new _e(16);return _e!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r},f.O=function(r,t,i){var l,h,g,y,x,S,P,A,D,B,F,W,U=i[0],H=i[1],ee=i[2];return t===r?(r[12]=t[0]*U+t[4]*H+t[8]*ee+t[12],r[13]=t[1]*U+t[5]*H+t[9]*ee+t[13],r[14]=t[2]*U+t[6]*H+t[10]*ee+t[14],r[15]=t[3]*U+t[7]*H+t[11]*ee+t[15]):(h=t[1],g=t[2],y=t[3],x=t[4],S=t[5],P=t[6],A=t[7],D=t[8],B=t[9],F=t[10],W=t[11],r[0]=l=t[0],r[1]=h,r[2]=g,r[3]=y,r[4]=x,r[5]=S,r[6]=P,r[7]=A,r[8]=D,r[9]=B,r[10]=F,r[11]=W,r[12]=l*U+x*H+D*ee+t[12],r[13]=h*U+S*H+B*ee+t[13],r[14]=g*U+P*H+F*ee+t[14],r[15]=y*U+A*H+W*ee+t[15]),r},f.P=T,f.Q=function(r,t,i){var l=i[0],h=i[1],g=i[2];return r[0]=t[0]*l,r[1]=t[1]*l,r[2]=t[2]*l,r[3]=t[3]*l,r[4]=t[4]*h,r[5]=t[5]*h,r[6]=t[6]*h,r[7]=t[7]*h,r[8]=t[8]*g,r[9]=t[9]*g,r[10]=t[10]*g,r[11]=t[11]*g,r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r},f.R=Bn,f.S=function(r,t,i){var l=t[0],h=t[1],g=t[2],y=t[3],x=t[4],S=t[5],P=t[6],A=t[7],D=t[8],B=t[9],F=t[10],W=t[11],U=t[12],H=t[13],ee=t[14],ce=t[15],te=i[0],ae=i[1],he=i[2],ge=i[3];return r[0]=te*l+ae*x+he*D+ge*U,r[1]=te*h+ae*S+he*B+ge*H,r[2]=te*g+ae*P+he*F+ge*ee,r[3]=te*y+ae*A+he*W+ge*ce,r[4]=(te=i[4])*l+(ae=i[5])*x+(he=i[6])*D+(ge=i[7])*U,r[5]=te*h+ae*S+he*B+ge*H,r[6]=te*g+ae*P+he*F+ge*ee,r[7]=te*y+ae*A+he*W+ge*ce,r[8]=(te=i[8])*l+(ae=i[9])*x+(he=i[10])*D+(ge=i[11])*U,r[9]=te*h+ae*S+he*B+ge*H,r[10]=te*g+ae*P+he*F+ge*ee,r[11]=te*y+ae*A+he*W+ge*ce,r[12]=(te=i[12])*l+(ae=i[13])*x+(he=i[14])*D+(ge=i[15])*U,r[13]=te*h+ae*S+he*B+ge*H,r[14]=te*g+ae*P+he*F+ge*ee,r[15]=te*y+ae*A+he*W+ge*ce,r},f.T=hm,f.U=function(r,t){let i={};for(let l=0;l<t.length;l++){let h=t[l];h in r&&(i[h]=r[h])}return i},f.V=gl,f.W=pr,f.X=Gv,f.Y=Wv,f.Z=ke,f._=a,f.a=Ts,f.a$=Ht,f.a0=Se,f.a1=Ya,f.a2=Sa,f.a3=Zv,f.a4=op,f.a5=qt,f.a6=function(r,t,i){if(!r)return t||{};if(!t)return r||{};let l=Xv(r),h=Xv(t);(function(y,x){x.removeAll&&(y.add.clear(),y.update.clear(),y.remove.clear(),x.remove.clear());for(let S of x.remove)y.add.delete(S),y.update.delete(S);for(let[S,P]of x.update){let A=y.update.get(S);A&&(x.update.set(S,pM(A,P)),y.update.delete(S))}})(l,h);let g={};if((l.removeAll||h.removeAll)&&(g.removeAll=!0),g.remove=new Set([...l.remove,...h.remove]),g.add=new Map([...l.add,...h.add]),g.update=new Map([...l.update,...h.update]),g.remove.size&&g.add.size)for(let y of g.add.keys())g.remove.delete(y);return(function(y){let x={};return y.removeAll&&(x.removeAll=y.removeAll),y.remove&&(x.remove=Array.from(y.remove)),y.add&&(x.add=Array.from(y.add.values())),y.update&&(x.update=Array.from(y.update.values())),x})(g)},f.a7=function(r,t){let i=new Map;if(r==null||r.type==null)return i;if(r.type==="Feature"){let l=Mm(r,t);return l==null?void 0:(i.set(l,r),i)}if(r.type==="FeatureCollection"){let l=new Set;for(let h of r.features){let g=Mm(h,t);if(g==null||l.has(g))return;l.add(g),i.set(g,h)}return i}},f.a8=function(r,t,i){var l,h;let g=[];if(t.removeAll)r.clear();else if(t.remove)for(let y of t.remove){let x=r.get(y);x&&(g.push(x.geometry),r.delete(y))}if(t.add)for(let y of t.add){let x=Mm(y,i);if(x==null)continue;let S=r.get(x);S&&g.push(S.geometry),g.push(y.geometry),r.set(x,y)}if(t.update)for(let y of t.update){let x=r.get(y.id);if(!x)continue;let S=!!y.newGeometry,P=y.removeAllProperties||((l=y.removeProperties)===null||l===void 0?void 0:l.length)>0||((h=y.addOrUpdateProperties)===null||h===void 0?void 0:h.length)>0;if(!S&&!P)continue;g.push(x.geometry);let A=Object.assign({},x);if(r.set(y.id,A),S&&(g.push(y.newGeometry),A.geometry=y.newGeometry),P){if(A.properties=y.removeAllProperties?{}:Object.assign({},A.properties||{}),y.removeProperties)for(let D of y.removeProperties)delete A.properties[D];if(y.addOrUpdateProperties)for(let{key:D,value:B}of y.addOrUpdateProperties)A.properties[D]=B}}return g},f.a9=jd,f.aA=function(r,{uSize:t,uSizeT:i},{lowerSize:l,upperSize:h}){return r.kind==="source"?l/zo:r.kind==="composite"?Ii.number(l/zo,h/zo,i):t},f.aB=function(r,t){var i=t[0],l=t[1],h=t[2],g=t[3],y=t[4],x=t[5],S=t[6],P=t[7],A=t[8],D=t[9],B=t[10],F=t[11],W=t[12],U=t[13],H=t[14],ee=t[15],ce=i*x-l*y,te=i*S-h*y,ae=i*P-g*y,he=l*S-h*x,ge=l*P-g*x,Ie=h*P-g*S,Ge=A*U-D*W,We=A*H-B*W,Ue=A*ee-F*W,tt=D*H-B*U,Qe=D*ee-F*U,He=B*ee-F*H,qe=ce*He-te*Qe+ae*tt+he*Ue-ge*We+Ie*Ge;return qe?(r[0]=(x*He-S*Qe+P*tt)*(qe=1/qe),r[1]=(h*Qe-l*He-g*tt)*qe,r[2]=(U*Ie-H*ge+ee*he)*qe,r[3]=(B*ge-D*Ie-F*he)*qe,r[4]=(S*Ue-y*He-P*We)*qe,r[5]=(i*He-h*Ue+g*We)*qe,r[6]=(H*ae-W*Ie-ee*te)*qe,r[7]=(A*Ie-B*ae+F*te)*qe,r[8]=(y*Qe-x*Ue+P*Ge)*qe,r[9]=(l*Ue-i*Qe-g*Ge)*qe,r[10]=(W*ge-U*ae+ee*ce)*qe,r[11]=(D*ae-A*ge-F*ce)*qe,r[12]=(x*We-y*tt-S*Ge)*qe,r[13]=(i*tt-l*We+h*Ge)*qe,r[14]=(U*te-W*he-H*ce)*qe,r[15]=(A*he-D*te+B*ce)*qe,r):null},f.aC=Ct,f.aD=function(r){var t=r[0],i=r[1];return Math.sqrt(t*t+i*i)},f.aE=function(r){return r[0]=0,r[1]=0,r},f.aF=function(r,t,i){return r[0]=t[0]*i,r[1]=t[1]*i,r},f.aG=Tm,f.aH=ni,f.aI=function(r,t,i,l){let h=t.y-r.y,g=t.x-r.x,y=l.y-i.y,x=l.x-i.x,S=y*g-x*h;if(S===0)return null;let P=(x*(r.y-i.y)-y*(r.x-i.x))/S;return new T(r.x+P*g,r.y+P*h)},f.aJ=zb,f.aK=nu,f.aL=function(r){let t=1/0,i=1/0,l=-1/0,h=-1/0;for(let g of r)t=Math.min(t,g.x),i=Math.min(i,g.y),l=Math.max(l,g.x),h=Math.max(h,g.y);return[t,i,l,h]},f.aM=Or,f.aN=bt,f.aO=function(r,t,i,l,h=!1){if(!i[0]&&!i[1])return[0,0];let g=h?l==="map"?-r.bearingInRadians:0:l==="viewport"?r.bearingInRadians:0;if(g){let y=Math.sin(g),x=Math.cos(g);i=[i[0]*x-i[1]*y,i[0]*y+i[1]*x]}return[h?i[0]:bt(t,i[0],r.zoom),h?i[1]:bt(t,i[1],r.zoom)]},f.aQ=Sm,f.aR=$m,f.aS=wm,f.aT=Ym,f.aU=ur,f.aV=tp,f.aW=se,f.aX=ot,f.aY=Be,f.aZ=on,f.a_=Hv,f.aa=lc,f.ab=25,f.ac=Am,f.ad=r=>{let t=window.document.createElement("video");return t.muted=!0,new Promise((i=>{t.onloadstart=()=>{i(t)};for(let l of r){let h=window.document.createElement("source");Le(l)||(t.crossOrigin="Anonymous"),h.src=l,t.appendChild(h)}}))},f.ae=Ae,f.af=function(){return gn++},f.ag=m,f.ah=hu,f.ai=Vd,f.aj=ht,f.ak=eo,f.al=Jv,f.am=function(r){let t={};if(r.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((i,l,h,g)=>{let y=h||g;return t[l]=!y||y.toLowerCase(),""})),t["max-age"]){let i=parseInt(t["max-age"],10);isNaN(i)?delete t["max-age"]:t["max-age"]=i}return t},f.an=gt,f.ao=85.051129,f.ap=ws,f.aq=function(r){return Math.pow(2,r)},f.ar=Ye,f.as=Uv,f.at=function(r){return Math.log(r)/Math.LN2},f.au=function(r){var t=r[0],i=r[1];return t*t+i*i},f.av=function(r){if(!r.length)return new Set;let t=Math.max(...r.map((S=>S.canonical.z))),i=1/0,l=-1/0,h=1/0,g=-1/0,y=[];for(let S of r){let{x:P,y:A,z:D}=S.canonical,B=Math.pow(2,t-D),F=P*B,W=A*B;y.push({id:S,x:F,y:W}),F<i&&(i=F),F>l&&(l=F),W<h&&(h=W),W>g&&(g=W)}let x=new Set;for(let S of y)S.x!==i&&S.x!==l&&S.y!==h&&S.y!==g||x.add(S.id);return x},f.aw=function(r,t){let i=Math.abs(2*r.wrap)-+(r.wrap<0),l=Math.abs(2*t.wrap)-+(t.wrap<0);return r.overscaledZ-t.overscaledZ||l-i||t.canonical.y-r.canonical.y||t.canonical.x-r.canonical.x},f.ax=class{constructor(r,t){this.max=r,this.onRemove=t,this.reset()}reset(){for(let r in this.data)for(let t of this.data[r])t.timeout&&clearTimeout(t.timeout),this.onRemove(t.value);return this.data={},this.order=[],this}add(r,t,i){let l=r.wrapped().key;this.data[l]===void 0&&(this.data[l]=[]);let h={value:t,timeout:void 0};if(i!==void 0&&(h.timeout=setTimeout((()=>{this.remove(r,h)}),i)),this.data[l].push(h),this.order.push(l),this.order.length>this.max){let g=this._getAndRemoveByKey(this.order[0]);g&&this.onRemove(g)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){let t=this.data[r].shift();return t.timeout&&clearTimeout(t.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),t.value}getByKey(r){let t=this.data[r];return t?t[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,t){if(!this.has(r))return this;let i=r.wrapped().key,l=t===void 0?0:this.data[i].indexOf(t),h=this.data[i][l];return this.data[i].splice(l,1),h.timeout&&clearTimeout(h.timeout),this.data[i].length===0&&delete this.data[i],this.onRemove(h.value),this.order.splice(this.order.indexOf(i),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){let t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}filter(r){let t=[];for(let i in this.data)for(let l of this.data[i])r(l.value)||t.push(l);for(let i of t)this.remove(i.value.tileID,i)}},f.ay=function(r,t){let i=0,l=0;if(r.kind==="constant")l=r.layoutSize;else if(r.kind!=="source"){let{interpolationType:h,minZoom:g,maxZoom:y}=r,x=h?gt(Qi.interpolationFactor(h,t,g,y),0,1):0;r.kind==="camera"?l=Ii.number(r.minSize,r.maxSize,x):i=x}return{uSizeT:i,uSize:l}},f.b=_n,f.b$=Ao,f.b0=Ut,f.b1=function(r){var t=new _e(3);return t[0]=r[0],t[1]=r[1],t[2]=r[2],t},f.b2=function(r,t,i){return r[0]=t[0]-i[0],r[1]=t[1]-i[1],r[2]=t[2]-i[2],r},f.b3=function(r,t){var i=t[0],l=t[1],h=t[2],g=i*i+l*l+h*h;return g>0&&(g=1/Math.sqrt(g)),r[0]=t[0]*g,r[1]=t[1]*g,r[2]=t[2]*g,r},f.b4=Tt,f.b5=function(r,t){return r[0]*t[0]+r[1]*t[1]+r[2]*t[2]},f.b6=function(r,t,i){return r[0]=t[0]*i[0],r[1]=t[1]*i[1],r[2]=t[2]*i[2],r[3]=t[3]*i[3],r},f.b7=Pt,f.b8=function(r,t,i){let l=t[0]*i[0]+t[1]*i[1]+t[2]*i[2];return l===0?null:(-(r[0]*i[0]+r[1]*i[1]+r[2]*i[2])-i[3])/l},f.b9=oi,f.bA=function(){return new Float64Array(3)},f.bB=ai,f.bC=function(r,t,i){var l=i[0],h=i[1],g=i[2],y=i[3],x=t[0],S=t[1],P=t[2],A=h*P-g*S,D=g*x-l*P,B=l*S-h*x;return r[0]=x+y*(A+=A)+h*(B+=B)-g*(D+=D),r[1]=S+y*D+g*A-l*B,r[2]=P+y*B+l*D-h*A,r},f.bD=function(r,t,i){let l=(h=[r[0],r[1],r[2],t[0],t[1],t[2],i[0],i[1],i[2]])[0]*((A=h[8])*(y=h[4])-(x=h[5])*(P=h[7]))+h[1]*(-A*(g=h[3])+x*(S=h[6]))+h[2]*(P*g-y*S);var h,g,y,x,S,P,A;if(l===0)return null;let D=Tt([],[t[0],t[1],t[2]],[i[0],i[1],i[2]]),B=Tt([],[i[0],i[1],i[2]],[r[0],r[1],r[2]]),F=Tt([],[r[0],r[1],r[2]],[t[0],t[1],t[2]]),W=Ht([],D,-r[3]);return Ut(W,W,Ht([],B,-t[3])),Ut(W,W,Ht([],F,-i[3])),Ht(W,W,1/l),W},f.bE=Em,f.bF=function(){return new Float64Array(4)},f.bG=function(r,t,i,l){var h=[],g=[];return h[0]=t[0]-i[0],h[1]=t[1]-i[1],h[2]=t[2]-i[2],g[0]=h[0]*Math.cos(l)-h[1]*Math.sin(l),g[1]=h[0]*Math.sin(l)+h[1]*Math.cos(l),g[2]=h[2],r[0]=g[0]+i[0],r[1]=g[1]+i[1],r[2]=g[2]+i[2],r},f.bH=function(r,t,i,l){var h=[],g=[];return h[0]=t[0]-i[0],h[1]=t[1]-i[1],h[2]=t[2]-i[2],g[0]=h[0],g[1]=h[1]*Math.cos(l)-h[2]*Math.sin(l),g[2]=h[1]*Math.sin(l)+h[2]*Math.cos(l),r[0]=g[0]+i[0],r[1]=g[1]+i[1],r[2]=g[2]+i[2],r},f.bI=function(r,t,i,l){var h=[],g=[];return h[0]=t[0]-i[0],h[1]=t[1]-i[1],h[2]=t[2]-i[2],g[0]=h[2]*Math.sin(l)+h[0]*Math.cos(l),g[1]=h[1],g[2]=h[2]*Math.cos(l)-h[0]*Math.sin(l),r[0]=g[0]+i[0],r[1]=g[1]+i[1],r[2]=g[2]+i[2],r},f.bJ=function(r,t,i){var l=Math.sin(i),h=Math.cos(i),g=t[0],y=t[1],x=t[2],S=t[3],P=t[8],A=t[9],D=t[10],B=t[11];return t!==r&&(r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[0]=g*h-P*l,r[1]=y*h-A*l,r[2]=x*h-D*l,r[3]=S*h-B*l,r[8]=g*l+P*h,r[9]=y*l+A*h,r[10]=x*l+D*h,r[11]=S*l+B*h,r},f.bK=function(r,t){let i=Qt(r,360),l=Qt(t,360),h=l-i,g=l>i?h-360:h+360;return Math.abs(h)<Math.abs(g)?h:g},f.bL=function(r){return r[0]=0,r[1]=0,r[2]=0,r},f.bM=function(r,t,i,l){let h=Math.sqrt(r*r+t*t),g=Math.sqrt(i*i+l*l);r/=h,t/=h,i/=g,l/=g;let y=Math.acos(r*i+t*l);return-t*i+r*l>0?y:-y},f.bN=function(r,t){let i=Qt(r,2*Math.PI),l=Qt(t,2*Math.PI);return Math.min(Math.abs(i-l),Math.abs(i-l+2*Math.PI),Math.abs(i-l-2*Math.PI))},f.bO=function(){let r={},t=Ce.$version;for(let i in Ce.$root){let l=Ce.$root[i];if(l.required){let h=null;h=i==="version"?t:l.type==="array"?[]:{},h!=null&&(r[i]=h)}}return r},f.bP=xe,f.bQ=hd,f.bR=function r(t,i){if(Array.isArray(t)){if(!Array.isArray(i)||t.length!==i.length)return!1;for(let l=0;l<t.length;l++)if(!r(t[l],i[l]))return!1;return!0}if(typeof t=="object"&&t!==null&&i!==null){if(typeof i!="object"||Object.keys(t).length!==Object.keys(i).length)return!1;for(let l in t)if(!r(t[l],i[l]))return!1;return!0}return t===i},f.bS=function(r){r=r.slice();let t=Object.create(null);for(let i=0;i<r.length;i++)t[r[i].id]=r[i];for(let i=0;i<r.length;i++)"ref"in r[i]&&(r[i]=wi(r[i],t[r[i].ref]));return r},f.bT=function(r,t){if(r.type==="custom")return new uM(r,t);switch(r.type){case"background":return new cM(r,t);case"circle":return new HE(r,t);case"color-relief":return new QE(r,t);case"fill":return new fA(r,t);case"fill-extrusion":return new kA(r,t);case"heatmap":return new YE(r,t);case"hillshade":return new KE(r,t);case"line":return new LA(r,t);case"raster":return new rm(r,t);case"symbol":return new sp(r,t)}},f.bU=r=>r.type==="raster",f.bV=cr,f.bW=function(r,t){if(!r)return[{command:"setStyle",args:[t]}];let i=[];try{if(!pt(r.version,t.version))return[{command:"setStyle",args:[t]}];pt(r.center,t.center)||i.push({command:"setCenter",args:[t.center]}),pt(r.state,t.state)||i.push({command:"setGlobalState",args:[t.state]}),pt(r.centerAltitude,t.centerAltitude)||i.push({command:"setCenterAltitude",args:[t.centerAltitude]}),pt(r.zoom,t.zoom)||i.push({command:"setZoom",args:[t.zoom]}),pt(r.bearing,t.bearing)||i.push({command:"setBearing",args:[t.bearing]}),pt(r.pitch,t.pitch)||i.push({command:"setPitch",args:[t.pitch]}),pt(r.roll,t.roll)||i.push({command:"setRoll",args:[t.roll]}),pt(r.sprite,t.sprite)||i.push({command:"setSprite",args:[t.sprite]}),pt(r.glyphs,t.glyphs)||i.push({command:"setGlyphs",args:[t.glyphs]}),pt(r.transition,t.transition)||i.push({command:"setTransition",args:[t.transition]}),pt(r.light,t.light)||i.push({command:"setLight",args:[t.light]}),pt(r.terrain,t.terrain)||i.push({command:"setTerrain",args:[t.terrain]}),pt(r.sky,t.sky)||i.push({command:"setSky",args:[t.sky]}),pt(r.projection,t.projection)||i.push({command:"setProjection",args:[t.projection]});let l={},h=[];(function(y,x,S,P){let A;for(A in x=x||{},y=y||{})Object.prototype.hasOwnProperty.call(y,A)&&(Object.prototype.hasOwnProperty.call(x,A)||pi(A,S,P));for(A in x)Object.prototype.hasOwnProperty.call(x,A)&&(Object.prototype.hasOwnProperty.call(y,A)?pt(y[A],x[A])||(y[A].type==="geojson"&&x[A].type==="geojson"&&mr(y,x,A)?yt(S,{command:"setGeoJSONSourceData",args:[A,x[A].data]}):Ei(A,x,S,P)):Lt(A,x,S))})(r.sources,t.sources,h,l);let g=[];r.layers&&r.layers.forEach((y=>{"source"in y&&l[y.source]?i.push({command:"removeLayer",args:[y.id]}):g.push(y)})),i=i.concat(h),(function(y,x,S){x=x||[];let P=(y=y||[]).map(Vi),A=x.map(Vi),D=y.reduce(Si,{}),B=x.reduce(Si,{}),F=P.slice(),W=Object.create(null),U,H,ee,ce,te;for(let ae=0,he=0;ae<P.length;ae++)U=P[ae],Object.prototype.hasOwnProperty.call(B,U)?he++:(yt(S,{command:"removeLayer",args:[U]}),F.splice(F.indexOf(U,he),1));for(let ae=0,he=0;ae<A.length;ae++)U=A[A.length-1-ae],F[F.length-1-ae]!==U&&(Object.prototype.hasOwnProperty.call(D,U)?(yt(S,{command:"removeLayer",args:[U]}),F.splice(F.lastIndexOf(U,F.length-he),1)):he++,ce=F[F.length-ae],yt(S,{command:"addLayer",args:[B[U],ce]}),F.splice(F.length-ae,0,U),W[U]=!0);for(let ae=0;ae<A.length;ae++)if(U=A[ae],H=D[U],ee=B[U],!W[U]&&!pt(H,ee))if(pt(H.source,ee.source)&&pt(H["source-layer"],ee["source-layer"])&&pt(H.type,ee.type)){for(te in gr(H.layout,ee.layout,S,U,null,"setLayoutProperty"),gr(H.paint,ee.paint,S,U,null,"setPaintProperty"),pt(H.filter,ee.filter)||yt(S,{command:"setFilter",args:[U,ee.filter]}),pt(H.minzoom,ee.minzoom)&&pt(H.maxzoom,ee.maxzoom)||yt(S,{command:"setLayerZoomRange",args:[U,ee.minzoom,ee.maxzoom]}),H)Object.prototype.hasOwnProperty.call(H,te)&&te!=="layout"&&te!=="paint"&&te!=="filter"&&te!=="metadata"&&te!=="minzoom"&&te!=="maxzoom"&&(te.indexOf("paint.")===0?gr(H[te],ee[te],S,U,te.slice(6),"setPaintProperty"):pt(H[te],ee[te])||yt(S,{command:"setLayerProperty",args:[U,te,ee[te]]}));for(te in ee)Object.prototype.hasOwnProperty.call(ee,te)&&!Object.prototype.hasOwnProperty.call(H,te)&&te!=="layout"&&te!=="paint"&&te!=="filter"&&te!=="metadata"&&te!=="minzoom"&&te!=="maxzoom"&&(te.indexOf("paint.")===0?gr(H[te],ee[te],S,U,te.slice(6),"setPaintProperty"):pt(H[te],ee[te])||yt(S,{command:"setLayerProperty",args:[U,te,ee[te]]}))}else yt(S,{command:"removeLayer",args:[U]}),ce=F[F.lastIndexOf(U)+1],yt(S,{command:"addLayer",args:[ee,ce]})})(g,t.layers,i)}catch(l){console.warn("Unable to compute style diff:",l),i=[{command:"setStyle",args:[t]}]}return i},f.bX=function(r){let t=[],i=r.id;return i===void 0&&t.push({message:`layers.${i}: missing required property "id"`}),r.render===void 0&&t.push({message:`layers.${i}: missing required method "render"`}),r.renderingMode&&r.renderingMode!=="2d"&&r.renderingMode!=="3d"&&t.push({message:`layers.${i}: property "renderingMode" must be either "2d" or "3d"`}),t},f.bY=sn,f.bZ=br,f.b_=class extends Sn{constructor(r,t){super(r,t),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1i(this.location,r))}},f.ba=function(r,t,i){return r[0]=t[0]*i,r[1]=t[1]*i,r[2]=t[2]*i,r[3]=t[3]*i,r},f.bb=function(r,t){return r[0]*t[0]+r[1]*t[1]+r[2]*t[2]+r[3]},f.bc=Yv,f.bd=pu,f.be=function(r,t,i,l,h){var g=1/Math.tan(t/2);if(r[0]=g/i,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=g,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,h!=null&&h!==1/0){var y=1/(l-h);r[10]=(h+l)*y,r[14]=2*h*l*y}else r[10]=-1,r[14]=-2*l;return r},f.bf=function(r){var t=new _e(16);return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t},f.bg=function(r,t,i){var l=Math.sin(i),h=Math.cos(i),g=t[0],y=t[1],x=t[2],S=t[3],P=t[4],A=t[5],D=t[6],B=t[7];return t!==r&&(r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[0]=g*h+P*l,r[1]=y*h+A*l,r[2]=x*h+D*l,r[3]=S*h+B*l,r[4]=P*h-g*l,r[5]=A*h-y*l,r[6]=D*h-x*l,r[7]=B*h-S*l,r},f.bh=function(r,t,i){var l=Math.sin(i),h=Math.cos(i),g=t[4],y=t[5],x=t[6],S=t[7],P=t[8],A=t[9],D=t[10],B=t[11];return t!==r&&(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[4]=g*h+P*l,r[5]=y*h+A*l,r[6]=x*h+D*l,r[7]=S*h+B*l,r[8]=P*h-g*l,r[9]=A*h-y*l,r[10]=D*h-x*l,r[11]=B*h-S*l,r},f.bi=function(){let r=new Float32Array(16);return Ye(r),r},f.bj=function(){let r=new Float64Array(16);return Ye(r),r},f.bk=function(){return new Float64Array(16)},f.bl=function(r,t,i){let l=new Float64Array(4);return ai(l,r,t-90,i),l},f.bm=function(r,t,i,l){var h,g,y,x,S,P=t[0],A=t[1],D=t[2],B=t[3],F=i[0],W=i[1],U=i[2],H=i[3];return(g=P*F+A*W+D*U+B*H)<0&&(g=-g,F=-F,W=-W,U=-U,H=-H),1-g>je?(h=Math.acos(g),y=Math.sin(h),x=Math.sin((1-l)*h)/y,S=Math.sin(l*h)/y):(x=1-l,S=l),r[0]=x*P+S*F,r[1]=x*A+S*W,r[2]=x*D+S*U,r[3]=x*B+S*H,r},f.bn=function(r){let t=new Float64Array(9);var i,l,h,g,y,x,S,P,A,D,B,F,W,U,H,ee,ce,te;D=(h=(l=r)[0])*(S=h+h),B=(g=l[1])*S,W=(y=l[2])*S,U=y*(P=g+g),ee=(x=l[3])*S,ce=x*P,te=x*(A=y+y),(i=t)[0]=1-(F=g*P)-(H=y*A),i[3]=B-te,i[6]=W+ce,i[1]=B+te,i[4]=1-D-H,i[7]=U-ee,i[2]=W-ce,i[5]=U+ee,i[8]=1-D-F;let ae=on(-Math.asin(gt(t[2],-1,1))),he,ge;return Math.hypot(t[5],t[8])<.001?(he=0,ge=-on(Math.atan2(t[3],t[4]))):(he=on(t[5]===0&&t[8]===0?0:Math.atan2(t[5],t[8])),ge=on(t[1]===0&&t[0]===0?0:Math.atan2(t[1],t[0]))),{roll:he,pitch:ae+90,bearing:ge}},f.bo=function(r,t){return r.roll==t.roll&&r.pitch==t.pitch&&r.bearing==t.bearing},f.bp=Nt,f.bq=Eo,f.br=cu,f.bs=Ld,f.bt=lu,f.bu=Pi,f.bv=xi,f.bw=rr,f.bx=function(r,t,i,l,h){return Pi(l,h,gt((r-t)/(i-t),0,1))},f.by=function(r,t,i,l){return r[0]=t[0]+i[0]*l,r[1]=t[1]+i[1]*l,r[2]=t[2]+i[2]*l,r},f.bz=Qt,f.c=$,f.c$=class{constructor(r){this._marks={start:[r.url,"start"].join("#"),end:[r.url,"end"].join("#"),measure:r.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let r=performance.getEntriesByName(this._marks.measure);return r.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),r=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),r}},f.c0=class extends Sn{constructor(r,t){super(r,t),this.current=ea}set(r){if(r[12]!==this.current[12]||r[0]!==this.current[0])return this.current=r,void this.gl.uniformMatrix4fv(this.location,!1,r);for(let t=1;t<16;t++)if(r[t]!==this.current[t]){this.current=r,this.gl.uniformMatrix4fv(this.location,!1,r);break}}},f.c1=ac,f.c2=class extends Sn{constructor(r,t){super(r,t),this.current=[0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]||(this.current=r,this.gl.uniform3f(this.location,r[0],r[1],r[2]))}},f.c3=class extends Sn{constructor(r,t){super(r,t),this.current=[0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]||(this.current=r,this.gl.uniform2f(this.location,r[0],r[1]))}},f.c4=Pe,f.c5=function(r,t){var i=Math.sin(t),l=Math.cos(t);return r[0]=l,r[1]=i,r[2]=0,r[3]=-i,r[4]=l,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r},f.c6=function(r,t,i){var l=t[0],h=t[1],g=t[2];return r[0]=l*i[0]+h*i[3]+g*i[6],r[1]=l*i[1]+h*i[4]+g*i[7],r[2]=l*i[2]+h*i[5]+g*i[8],r},f.c7=function(r,t,i,l,h,g,y){var x=1/(t-i),S=1/(l-h),P=1/(g-y);return r[0]=-2*x,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*S,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*P,r[11]=0,r[12]=(t+i)*x,r[13]=(h+l)*S,r[14]=(y+g)*P,r[15]=1,r},f.c8=class extends Sn{constructor(r,t){super(r,t),this.current=new Array}set(r){if(r!=this.current){this.current=r;let t=new Float32Array(4*r.length);for(let i=0;i<r.length;i++)t[4*i]=r[i].r,t[4*i+1]=r[i].g,t[4*i+2]=r[i].b,t[4*i+3]=r[i].a;this.gl.uniform4fv(this.location,t)}}},f.c9=class extends Sn{constructor(r,t){super(r,t),this.current=new Array}set(r){if(r!=this.current){this.current=r;let t=new Float32Array(r);this.gl.uniform1fv(this.location,t)}}},f.cA=function(r,t){var i;if(!Ss[t])return!1;let l=r==null?void 0:r.target,h=((i=l==null?void 0:l.ownerDocument)===null||i===void 0?void 0:i.defaultView)||window;return r instanceof h.MouseEvent||r instanceof h.WheelEvent},f.cB=function(r,t){return Wn[t]&&"touches"in r},f.cC=function(r){return Wn[r]||Ss[r]},f.cD=function(r,t,i){var l=t[0],h=t[1];return r[0]=i[0]*l+i[4]*h+i[12],r[1]=i[1]*l+i[5]*h+i[13],r},f.cE=function(r,t){let{x:i,y:l}=jd.fromLngLat(t);return!(r<0||r>25||l<0||l>=1||i<0||i>=1)},f.cF=function(r,t){return r[0]=t[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=t[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=t[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},f.cG=class extends Kc{},f.cH=XM,f.cJ=pe,f.cK=function(r,t){$.REGISTERED_PROTOCOLS[r]=t},f.cL=function(r){delete $.REGISTERED_PROTOCOLS[r]},f.cM=function(r,t){let i={};for(let h=0;h<r.length;h++){let g=t&&t[r[h].id]||qc(r[h]);t&&(t[r[h].id]=g);let y=i[g];y||(y=i[g]=[]),y.push(r[h])}let l=[];for(let h in i)l.push(i[h]);return l},f.cN=ut,f.cO=Kv,f.cP=Ab,f.cQ=Iv,f.cR=function(r){var t;r.bucket.createArrays(),r.bucket.tilePixelRatio=qt/(512*r.bucket.overscaling),r.bucket.compareText={},r.bucket.iconsNeedLinear=!1;let i=r.bucket.layers[0],l=i.layout,h=i._unevaluatedLayout._values,g={layoutIconSize:h["icon-size"].possiblyEvaluate(new Ai(r.bucket.zoom+1),r.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new Ai(r.bucket.zoom+1),r.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new Ai(18))};if(r.bucket.textSizeData.kind==="composite"){let{minZoom:A,maxZoom:D}=r.bucket.textSizeData;g.compositeTextSizes=[h["text-size"].possiblyEvaluate(new Ai(A),r.canonical),h["text-size"].possiblyEvaluate(new Ai(D),r.canonical)]}if(r.bucket.iconSizeData.kind==="composite"){let{minZoom:A,maxZoom:D}=r.bucket.iconSizeData;g.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new Ai(A),r.canonical),h["icon-size"].possiblyEvaluate(new Ai(D),r.canonical)]}let y=l.get("text-line-height")*Or,x=l.get("text-rotation-alignment")!=="viewport"&&l.get("symbol-placement")!=="point",S=l.get("text-keep-upright"),P=l.get("text-size");for(let A of r.bucket.features){let D=l.get("text-font").evaluate(A,{},r.canonical).join(","),B=P.evaluate(A,{},r.canonical),F=g.layoutTextSize.evaluate(A,{},r.canonical),W=g.layoutIconSize.evaluate(A,{},r.canonical),U={horizontal:{},vertical:void 0},H=A.text,ee,ce=[0,0];if(H){let he=H.toString(),ge=l.get("text-letter-spacing").evaluate(A,{},r.canonical)*Or,Ie=tm(he)?ge:0,Ge=l.get("text-anchor").evaluate(A,{},r.canonical),We=Vb(i,A,r.canonical);if(!We){let He=l.get("text-radial-offset").evaluate(A,{},r.canonical);ce=He?qb(Ge,[He*Or,Hm]):l.get("text-offset").evaluate(A,{},r.canonical).map((qe=>qe*Or))}let Ue=x?"center":l.get("text-justify").evaluate(A,{},r.canonical),tt=l.get("symbol-placement")==="point"?l.get("text-max-width").evaluate(A,{},r.canonical)*Or:1/0,Qe=()=>{r.bucket.allowVerticalPlacement&&hl(he)&&(U.vertical=np(H,r.glyphMap,r.glyphPositions,r.imagePositions,D,tt,y,Ge,"left",Ie,ce,f.az.vertical,!0,F,B))};if(!x&&We){let He=new Set;if(Ue==="auto")for(let it=0;it<We.values.length;it+=2)He.add($m(We.values[it]));else He.add(Ue);let qe=!1;for(let it of He)if(!U.horizontal[it])if(qe)U.horizontal[it]=U.horizontal[0];else{let at=np(H,r.glyphMap,r.glyphPositions,r.imagePositions,D,tt,y,"center",it,Ie,ce,f.az.horizontal,!1,F,B);at&&(U.horizontal[it]=at,qe=at.positionedLines.length===1)}Qe()}else{Ue==="auto"&&(Ue=$m(Ge));let He=np(H,r.glyphMap,r.glyphPositions,r.imagePositions,D,tt,y,Ge,Ue,Ie,ce,f.az.horizontal,!1,F,B);He&&(U.horizontal[Ue]=He),Qe(),hl(he)&&x&&S&&(U.vertical=np(H,r.glyphMap,r.glyphPositions,r.imagePositions,D,tt,y,Ge,Ue,Ie,ce,f.az.vertical,!1,F,B))}}let te=!1;if(A.icon&&A.icon.name){let he=r.imageMap[A.icon.name];he&&(ee=aM(r.imagePositions[A.icon.name],l.get("icon-offset").evaluate(A,{},r.canonical),l.get("icon-anchor").evaluate(A,{},r.canonical)),te=!!he.sdf,r.bucket.sdfIcons===void 0?r.bucket.sdfIcons=te:r.bucket.sdfIcons!==te&&fr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(he.pixelRatio!==r.bucket.pixelRatio||l.get("icon-rotate").constantOr(1)!==0)&&(r.bucket.iconsNeedLinear=!0))}let ae=Gb(U.horizontal)||U.vertical;(t=r.bucket).iconsInText||(t.iconsInText=!!ae&&ae.iconsInText),(ae||ee)&&$M(r.bucket,A,U,ee,r.imageMap,g,F,W,ce,te,r.canonical,r.subdivisionGranularity)}r.showCollisionBoxes&&r.bucket.generateCollisionDebugBuffers()},f.cS=gm,f.cT=_m,f.cU=vm,f.cV=function(r){let t=new rp;return(function(i,l){for(let h in i.layers)l.writeMessage(3,DM,i.layers[h])})(r,t),t.finish()},f.cW=function(r,t,i,l,h,g){let y=Ib(r,t,i,h,0);return y=Ib(y,t,l,g,1),y},f.cX=class{constructor(r){this.maxEntries=r,this.map=new Map}get(r){let t=this.map.get(r);return t!==void 0&&(this.map.delete(r),this.map.set(r,t)),t}set(r,t){if(this.map.has(r))this.map.delete(r);else if(this.map.size>=this.maxEntries){let i=this.map.keys().next().value;this.map.delete(i)}this.map.set(r,t)}clear(){this.map.clear()}},f.cY=fv,f.cZ=rp,f.c_=Pb,f.ca=class extends ko{},f.cb=BA,f.cc=class extends nc{},f.cd=dm,f.ce=function(r){return r<=1?1:Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))},f.cf=Q_,f.cg=function(r,t,i){var l=t[0],h=t[1],g=t[2],y=i[3]*l+i[7]*h+i[11]*g+i[15];return r[0]=(i[0]*l+i[4]*h+i[8]*g+i[12])/(y=y||1),r[1]=(i[1]*l+i[5]*h+i[9]*g+i[13])/y,r[2]=(i[2]*l+i[6]*h+i[10]*g+i[14])/y,r},f.ch=class extends vd{},f.ci=class extends e{},f.cj=function(r,t){return r[0]===t[0]&&r[1]===t[1]&&r[2]===t[2]&&r[3]===t[3]&&r[4]===t[4]&&r[5]===t[5]&&r[6]===t[6]&&r[7]===t[7]&&r[8]===t[8]&&r[9]===t[9]&&r[10]===t[10]&&r[11]===t[11]&&r[12]===t[12]&&r[13]===t[13]&&r[14]===t[14]&&r[15]===t[15]},f.ck=function(r,t){var i=r[0],l=r[1],h=r[2],g=r[3],y=r[4],x=r[5],S=r[6],P=r[7],A=r[8],D=r[9],B=r[10],F=r[11],W=r[12],U=r[13],H=r[14],ee=r[15],ce=t[0],te=t[1],ae=t[2],he=t[3],ge=t[4],Ie=t[5],Ge=t[6],We=t[7],Ue=t[8],tt=t[9],Qe=t[10],He=t[11],qe=t[12],it=t[13],at=t[14],lt=t[15];return Math.abs(i-ce)<=je*Math.max(1,Math.abs(i),Math.abs(ce))&&Math.abs(l-te)<=je*Math.max(1,Math.abs(l),Math.abs(te))&&Math.abs(h-ae)<=je*Math.max(1,Math.abs(h),Math.abs(ae))&&Math.abs(g-he)<=je*Math.max(1,Math.abs(g),Math.abs(he))&&Math.abs(y-ge)<=je*Math.max(1,Math.abs(y),Math.abs(ge))&&Math.abs(x-Ie)<=je*Math.max(1,Math.abs(x),Math.abs(Ie))&&Math.abs(S-Ge)<=je*Math.max(1,Math.abs(S),Math.abs(Ge))&&Math.abs(P-We)<=je*Math.max(1,Math.abs(P),Math.abs(We))&&Math.abs(A-Ue)<=je*Math.max(1,Math.abs(A),Math.abs(Ue))&&Math.abs(D-tt)<=je*Math.max(1,Math.abs(D),Math.abs(tt))&&Math.abs(B-Qe)<=je*Math.max(1,Math.abs(B),Math.abs(Qe))&&Math.abs(F-He)<=je*Math.max(1,Math.abs(F),Math.abs(He))&&Math.abs(W-qe)<=je*Math.max(1,Math.abs(W),Math.abs(qe))&&Math.abs(U-it)<=je*Math.max(1,Math.abs(U),Math.abs(it))&&Math.abs(H-at)<=je*Math.max(1,Math.abs(H),Math.abs(at))&&Math.abs(ee-lt)<=je*Math.max(1,Math.abs(ee),Math.abs(lt))},f.cl=function(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r},f.cm=r=>r.type==="symbol",f.cn=r=>r.type==="circle",f.co=r=>r.type==="heatmap",f.cp=r=>r.type==="line",f.cq=r=>r.type==="fill",f.cr=r=>r.type==="fill-extrusion",f.cs=r=>r.type==="hillshade",f.ct=r=>r.type==="color-relief",f.cu=r=>r.type==="background",f.cv=r=>r.type==="custom",f.cw=hi,f.cx=function(r,t,i){if(t<=0)return r;let l=1/t;return i===void 0||Math.abs(i)<1e-10?Math.round(r*l)/l:(i>0?Math.ceil(r*l-1e-9):Math.floor(r*l+1e-10))/l},f.cy=function(r,t,i){let l=dt(t.x-i.x,t.y-i.y),h=dt(r.x-i.x,r.y-i.y);var g,y;return on(Math.atan2(l[0]*h[1]-l[1]*h[0],(g=l)[0]*(y=h)[0]+g[1]*y[1]))},f.cz=Zt,f.d=Le,f.d0=function(r,t,i,l,h){return a(this,void 0,void 0,(function*(){if(Se())try{return yield Ya(r,t,i,l,h)}catch(g){}return(function(g,y,x,S,P){let A=g.width,D=g.height;vn&&Vn||(vn=new OffscreenCanvas(A,D),Vn=vn.getContext("2d",{willReadFrequently:!0})),vn.width=A,vn.height=D,Vn.drawImage(g,0,0,A,D);let B=Vn.getImageData(y,x,S,P);return Vn.clearRect(0,0,A,D),B.data})(r,t,i,l,h)}))},f.d1=iv,f.d2=M,f.d3=class{constructor(r,t){this.layers={[Vd]:this},this.name=Vd,this.version=t?t.version:1,this.extent=t?t.extent:4096,this.length=r.length,this.features=r}feature(r){return new LM(this.features[r],this.extent)}},f.d4=c,f.d5=Xs,f.e=yi,f.f=r=>a(void 0,void 0,void 0,(function*(){if(r.byteLength===0)return createImageBitmap(new ImageData(1,1));let t=new Blob([new Uint8Array(r)],{type:"image/png"});try{return createImageBitmap(t)}catch(i){throw new Error(`Could not load image because of ${i.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),f.g=X,f.h=r=>new Promise(((t,i)=>{let l=new Image;l.onload=()=>{t(l),URL.revokeObjectURL(l.src),l.onload=null,window.requestAnimationFrame((()=>{l.src=xs}))},l.onerror=()=>i(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));let h=new Blob([new Uint8Array(r)],{type:"image/png"});l.src=r.byteLength?URL.createObjectURL(h):xs})),f.i=yn,f.j=(r,t)=>Me(yi(r,{type:"json"}),t),f.k=Ne,f.l=Ze,f.m=Me,f.n=(r,t)=>Me(yi(r,{type:"arrayBuffer"}),t),f.o=function(r){return new rp(r).readFields(KA,[])},f.p=zv,f.q=function(r){return/[\u02EA\u02EB\u1100-\u11FF\u2E80-\u2FDF\u3000-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(r))},f.r=Ed,f.s=Ea,f.t=pn,f.u=Ce,f.v=Ul,f.w=fr,f.x=yd,f.y=Zl,f.z=Xl})),p("worker",["./shared"],(function(f){"use strict";class a{constructor($,X){this.keyCache={},$&&this.replace($,X)}replace($,X){this._layerConfigs={},this._layers={},this.update($,[],X)}update($,X,Q){for(let xe of $){this._layerConfigs[xe.id]=xe;let Me=this._layers[xe.id]=f.bT(xe,Q);Me._featureFilter=f.aj(Me.filter,Q),this.keyCache[xe.id]&&delete this.keyCache[xe.id]}for(let xe of X)delete this.keyCache[xe],delete this._layerConfigs[xe],delete this._layers[xe];this.familiesBySource={};let pe=f.cM(Object.values(this._layerConfigs),this.keyCache);for(let xe of pe){let Me=xe.map((Xe=>this._layers[Xe.id])),Le=Me[0];if(Le.isHidden())continue;let we=Le.source||"",Ee=this.familiesBySource[we];Ee||(Ee=this.familiesBySource[we]={});let Ze=Le.sourceLayer||f.ai,Ne=Ee[Ze];Ne||(Ne=Ee[Ze]=[]),Ne.push(Me)}}}class T{constructor($){let X={},Q=[];for(let Le in $){let we=$[Le],Ee=X[Le]={};for(let Ze in we){let Ne=we[+Ze];if(!Ne||Ne.bitmap.width===0||Ne.bitmap.height===0)continue;let Xe={x:0,y:0,w:Ne.bitmap.width+2,h:Ne.bitmap.height+2};Q.push(Xe),Ee[Ze]={rect:Xe,metrics:Ne.metrics}}}let{w:pe,h:xe}=f.p(Q),Me=new f.r({width:pe||1,height:xe||1});for(let Le in $){let we=$[Le];for(let Ee in we){let Ze=we[+Ee];if(!Ze||Ze.bitmap.width===0||Ze.bitmap.height===0)continue;let Ne=X[Le][Ee].rect;f.r.copy(Ze.bitmap,Me,{x:0,y:0},{x:Ne.x+1,y:Ne.y+1},Ze.bitmap)}}this.image=Me,this.positions=X}}f.cN("GlyphAtlas",T);class M{constructor($){this.tileID=new f.a2($.tileID.overscaledZ,$.tileID.wrap,$.tileID.canonical.z,$.tileID.canonical.x,$.tileID.canonical.y),this.uid=$.uid,this.zoom=$.zoom,this.pixelRatio=$.pixelRatio,this.tileSize=$.tileSize,this.source=$.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=$.showCollisionBoxes,this.collectResourceTiming=!!$.collectResourceTiming,this.returnDependencies=!!$.returnDependencies,this.promoteId=$.promoteId,this.inFlightDependencies=[]}parse($,X,Q,pe,xe){return f._(this,void 0,void 0,(function*(){this.status="parsing",this.data=$,this.collisionBoxArray=new f.ag;let Me=new f.cO(Object.keys($.layers).sort()),Le=new f.cP(this.tileID,this.promoteId);Le.bucketLayerIDs=[];let we={},Ee={featureIndex:Le,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:Q,subdivisionGranularity:xe},Ze=X.familiesBySource[this.source];for(let Ae in Ze){let Xi=$.layers[Ae];if(!Xi)continue;Xi.version===1&&f.w(`Vector tile source "${this.source}" layer "${Ae}" does not use vector tile spec v2 and therefore may have some rendering errors.`);let qr=Me.encode(Ae),Aa=[];for(let Wi=0;Wi<Xi.length;Wi++){let nt=Xi.feature(Wi),Dt=Le.getId(nt,Ae);Aa.push({feature:nt,id:Dt,index:Wi,sourceLayerIndex:qr})}for(let Wi of Ze[Ae]){let nt=Wi[0];nt.source!==this.source&&f.w(`layer.source = ${nt.source} does not equal this.source = ${this.source}`),nt.isHidden(this.zoom,!0)||(R(Wi,this.zoom,Q),(we[nt.id]=nt.createBucket({index:Le.bucketLayerIDs.length,layers:Wi,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:qr,sourceID:this.source})).populate(Aa,Ee,this.tileID.canonical),Le.bucketLayerIDs.push(Wi.map((Dt=>Dt.id))))}}let Ne=f.bY(Ee.glyphDependencies,(Ae=>Object.keys(Ae).map(Number)));this.inFlightDependencies.forEach((Ae=>Ae==null?void 0:Ae.abort())),this.inFlightDependencies=[];let Xe=Promise.resolve({});if(Object.keys(Ne).length){let Ae=new AbortController;this.inFlightDependencies.push(Ae),Xe=pe.sendAsync({type:"GG",data:{stacks:Ne,source:this.source,tileID:this.tileID,type:"glyphs"}},Ae)}let Ce=Object.keys(Ee.iconDependencies),Mt=Promise.resolve({});if(Ce.length){let Ae=new AbortController;this.inFlightDependencies.push(Ae),Mt=pe.sendAsync({type:"GI",data:{icons:Ce,source:this.source,tileID:this.tileID,type:"icons"}},Ae)}let wi=Object.keys(Ee.patternDependencies),pt=Promise.resolve({});if(wi.length){let Ae=new AbortController;this.inFlightDependencies.push(Ae),pt=pe.sendAsync({type:"GI",data:{icons:wi,source:this.source,tileID:this.tileID,type:"patterns"}},Ae)}let yt=Ee.dashDependencies,Lt=Promise.resolve({});if(Object.keys(yt).length){let Ae=new AbortController;this.inFlightDependencies.push(Ae),Lt=pe.sendAsync({type:"GDA",data:{dashes:yt}},Ae)}let[pi,Ei,mr,gr]=yield Promise.all([Xe,Mt,pt,Lt]),Vi=new T(pi),Si=new f.cQ(Ei,mr);for(let Ae in we){let Xi=we[Ae];Xi instanceof f.ah?(R(Xi.layers,this.zoom,Q),f.cR({bucket:Xi,glyphMap:pi,glyphPositions:Vi.positions,imageMap:Ei,imagePositions:Si.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Ee.subdivisionGranularity})):Xi.hasDependencies&&(Xi instanceof f.cS||Xi instanceof f.cT||Xi instanceof f.cU)&&(R(Xi.layers,this.zoom,Q),Xi.addFeatures(Ee,this.tileID.canonical,Si.patternPositions,gr))}return this.status="done",{buckets:Object.values(we).filter((Ae=>!Ae.isEmpty())),featureIndex:Le,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Vi.image,imageAtlas:Si,dashPositions:gr,glyphMap:this.returnDependencies?pi:null,iconMap:this.returnDependencies?Ei:null,glyphPositions:this.returnDependencies?Vi.positions:null}}))}}function R(ke,$,X){let Q=new f.H($);for(let pe of ke)pe.recalculate(Q,X)}class V{constructor($,X,Q,pe,xe){this.type=$,this.properties=Q||{},this.extent=xe,this.pointsArray=X,this.id=pe}loadGeometry(){return this.pointsArray.map(($=>$.map((X=>new f.P(X.x,X.y)))))}}class K{constructor($,X,Q){this.version=2,this._myFeatures=$,this.name=X,this.length=$.length,this.extent=Q}feature($){return this._myFeatures[$]}}class ne{constructor(){this.layers={}}addLayer($){this.layers[$.name]=$}}function G(ke){let $=f.cV(ke);return $.byteOffset===0&&$.byteLength===$.buffer.byteLength||($=new Uint8Array($)),{vectorTile:ke,rawData:$.buffer}}function ie(ke,$,X){let{extent:Q}=ke,pe=Math.pow(2,X.z-$.z),xe=(X.x-$.x*pe)*Q,Me=(X.y-$.y*pe)*Q,Le=[];for(let we=0;we<ke.length;we++){let Ee=ke.feature(we),Ze=Ee.loadGeometry();for(let Xe of Ze)for(let Ce of Xe)Ce.x=Ce.x*pe-xe,Ce.y=Ce.y*pe-Me;let Ne=128;Ze=f.cW(Ze,Ee.type,-Ne,-Ne,Q+Ne,Q+Ne),Ze.length!==0&&Le.push(new V(Ee.type,Ze,Ee.properties,Ee.id,Q))}return new K(Le,ke.name,Q)}class Y{constructor($,X,Q){this.actor=$,this.layerIndex=X,this.availableImages=Q,this.fetching={},this.loading={},this.loaded={},this.overzoomedTileResultCache=new f.cX(1e3)}loadVectorTile($,X){return f._(this,void 0,void 0,(function*(){let Q=yield f.n($.request,X);try{return{vectorTile:$.encoding!=="mlt"?new f.cY(new f.cZ(Q.data)):new f.c_(Q.data),rawData:Q.data,cacheControl:Q.cacheControl,expires:Q.expires}}catch(pe){let xe=new Uint8Array(Q.data),Me=`Unable to parse the tile at ${$.request.url}, `;throw Me+=xe[0]===31&&xe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${pe.message}`,new Error(Me)}}))}loadTile($){return f._(this,void 0,void 0,(function*(){let{uid:X,overzoomParameters:Q}=$;Q&&($.request=Q.overzoomRequest);let pe=!!($&&$.request&&$.request.collectResourceTiming)&&new f.c$($.request),xe=new M($);this.loading[X]=xe;let Me=new AbortController;xe.abort=Me;try{let Le=yield this.loadVectorTile($,Me);if(delete this.loading[X],!Le)return null;if(Q){let Xe=this._getOverzoomTile($,Le.vectorTile);Le.rawData=Xe.rawData,Le.vectorTile=Xe.vectorTile}let we=Le.rawData,Ee={};Le.expires&&(Ee.expires=Le.expires),Le.cacheControl&&(Ee.cacheControl=Le.cacheControl);let Ze={};if(pe){let Xe=pe.finish();Xe&&(Ze.resourceTiming=JSON.parse(JSON.stringify(Xe)))}xe.vectorTile=Le.vectorTile;let Ne=xe.parse(Le.vectorTile,this.layerIndex,this.availableImages,this.actor,$.subdivisionGranularity);this.loaded[X]=xe,this.fetching[X]={rawTileData:we,cacheControl:Ee,resourceTiming:Ze};try{let Xe=yield Ne;return f.e({rawTileData:we.slice(0),encoding:$.encoding},Xe,Ee,Ze)}finally{delete this.fetching[X]}}catch(Le){throw delete this.loading[X],xe.status="done",this.loaded[X]=xe,Le}}))}_getOverzoomTile($,X){let{tileID:Q,source:pe,overzoomParameters:xe}=$,{maxZoomTileID:Me}=xe,Le=`${Me.key}_${Q.key}`,we=this.overzoomedTileResultCache.get(Le);if(we)return we;let Ee=new ne,Ze=this.layerIndex.familiesBySource[pe];for(let Xe in Ze){let Ce=X.layers[Xe];if(!Ce)continue;let Mt=ie(Ce,Me,Q.canonical);Mt.length>0&&Ee.addLayer(Mt)}let Ne=G(Ee);return this.overzoomedTileResultCache.set(Le,Ne),Ne}reloadTile($){return f._(this,void 0,void 0,(function*(){let X=$.uid;if(!this.loaded||!this.loaded[X])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");let Q=this.loaded[X];if(Q.showCollisionBoxes=$.showCollisionBoxes,Q.status==="parsing"){let pe=yield Q.parse(Q.vectorTile,this.layerIndex,this.availableImages,this.actor,$.subdivisionGranularity),xe;if(this.fetching[X]){let{rawTileData:Me,cacheControl:Le,resourceTiming:we}=this.fetching[X];delete this.fetching[X],xe=f.e({rawTileData:Me.slice(0),encoding:$.encoding},pe,Le,we)}else xe=pe;return xe}if(Q.status==="done"&&Q.vectorTile)return Q.parse(Q.vectorTile,this.layerIndex,this.availableImages,this.actor,$.subdivisionGranularity)}))}abortTile($){return f._(this,void 0,void 0,(function*(){let X=this.loading,Q=$.uid;X&&X[Q]&&X[Q].abort&&(X[Q].abort.abort(),delete X[Q])}))}removeTile($){return f._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[$.uid]&&delete this.loaded[$.uid]}))}}class Se{constructor(){this.loaded={}}loadTile($){return f._(this,void 0,void 0,(function*(){let{uid:X,encoding:Q,rawImageData:pe,redFactor:xe,greenFactor:Me,blueFactor:Le,baseShift:we}=$,Ee=pe.width+2,Ze=pe.height+2,Ne=f.b(pe)?new f.R({width:Ee,height:Ze},yield f.d0(pe,-1,-1,Ee,Ze)):pe,Xe=new f.d1(X,Ne,Q,xe,Me,Le,we);return this.loaded=this.loaded||{},this.loaded[X]=Xe,Xe}))}removeTile($){let X=this.loaded,Q=$.uid;X&&X[Q]&&delete X[Q]}}var je,_e,Pe=(function(){if(_e)return je;function ke(X,Q){if(X.length!==0){$(X[0],Q);for(var pe=1;pe<X.length;pe++)$(X[pe],!Q)}}function $(X,Q){for(var pe=0,xe=0,Me=0,Le=X.length,we=Le-1;Me<Le;we=Me++){var Ee=(X[Me][0]-X[we][0])*(X[we][1]+X[Me][1]),Ze=pe+Ee;xe+=Math.abs(pe)>=Math.abs(Ee)?pe-Ze+Ee:Ee-Ze+pe,pe=Ze}pe+xe>=0!=!!Q&&X.reverse()}return _e=1,je=function X(Q,pe){var xe,Me=Q&&Q.type;if(Me==="FeatureCollection")for(xe=0;xe<Q.features.length;xe++)X(Q.features[xe],pe);else if(Me==="GeometryCollection")for(xe=0;xe<Q.geometries.length;xe++)X(Q.geometries[xe],pe);else if(Me==="Feature")X(Q.geometry,pe);else if(Me==="Polygon")ke(Q.coordinates,pe);else if(Me==="MultiPolygon")for(xe=0;xe<Q.coordinates.length;xe++)ke(Q.coordinates[xe],pe);return Q}})(),Ye=f.d2(Pe);let st={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ke=>ke},Pt=Math.fround||(_t=new Float32Array(1),ke=>(_t[0]=+ke,_t[0]));var _t;class Ut{constructor($){this.options=Object.assign(Object.create(st),$),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load($){let{log:X,minZoom:Q,maxZoom:pe}=this.options;X&&console.time("total time");let xe=`prepare ${$.length} points`;X&&console.time(xe),this.points=$;let Me=[];for(let we=0;we<$.length;we++){let Ee=$[we];if(!Ee.geometry)continue;let[Ze,Ne]=Ee.geometry.coordinates,Xe=Pt(Et(Ze)),Ce=Pt(oi(Ne));Me.push(Xe,Ce,1/0,we,-1,1),this.options.reduce&&Me.push(0)}let Le=this.trees[pe+1]=this._createTree(Me);X&&console.timeEnd(xe);for(let we=pe;we>=Q;we--){let Ee=+Date.now();Le=this.trees[we]=this._createTree(this._cluster(Le,we)),X&&console.log("z%d: %d clusters in %dms",we,Le.numItems,+Date.now()-Ee)}return X&&console.timeEnd("total time"),this}getClusters($,X){let Q=(($[0]+180)%360+360)%360-180,pe=Math.max(-90,Math.min(90,$[1])),xe=$[2]===180?180:(($[2]+180)%360+360)%360-180,Me=Math.max(-90,Math.min(90,$[3]));if($[2]-$[0]>=360)Q=-180,xe=180;else if(Q>xe){let Ne=this.getClusters([Q,pe,180,Me],X),Xe=this.getClusters([-180,pe,xe,Me],X);return Ne.concat(Xe)}let Le=this.trees[this._limitZoom(X)],we=Le.range(Et(Q),oi(Me),Et(xe),oi(pe)),Ee=Le.data,Ze=[];for(let Ne of we){let Xe=this.stride*Ne;Ze.push(Ee[Xe+5]>1?Ht(Ee,Xe,this.clusterProps):this.points[Ee[Xe+3]])}return Ze}getChildren($){let X=this._getOriginId($),Q=this._getOriginZoom($),pe="No cluster with the specified id.",xe=this.trees[Q];if(!xe)throw new Error(pe);let Me=xe.data;if(X*this.stride>=Me.length)throw new Error(pe);let Le=this.options.radius/(this.options.extent*Math.pow(2,Q-1)),we=xe.within(Me[X*this.stride],Me[X*this.stride+1],Le),Ee=[];for(let Ze of we){let Ne=Ze*this.stride;Me[Ne+4]===$&&Ee.push(Me[Ne+5]>1?Ht(Me,Ne,this.clusterProps):this.points[Me[Ne+3]])}if(Ee.length===0)throw new Error(pe);return Ee}getLeaves($,X,Q){let pe=[];return this._appendLeaves(pe,$,X=X||10,Q=Q||0,0),pe}getTile($,X,Q){let pe=this.trees[this._limitZoom($)],xe=Math.pow(2,$),{extent:Me,radius:Le}=this.options,we=Le/Me,Ee=(Q-we)/xe,Ze=(Q+1+we)/xe,Ne={features:[]};return this._addTileFeatures(pe.range((X-we)/xe,Ee,(X+1+we)/xe,Ze),pe.data,X,Q,xe,Ne),X===0&&this._addTileFeatures(pe.range(1-we/xe,Ee,1,Ze),pe.data,xe,Q,xe,Ne),X===xe-1&&this._addTileFeatures(pe.range(0,Ee,we/xe,Ze),pe.data,-1,Q,xe,Ne),Ne.features.length?Ne:null}getClusterExpansionZoom($){let X=this._getOriginZoom($)-1;for(;X<=this.options.maxZoom;){let Q=this.getChildren($);if(X++,Q.length!==1)break;$=Q[0].properties.cluster_id}return X}_appendLeaves($,X,Q,pe,xe){let Me=this.getChildren(X);for(let Le of Me){let we=Le.properties;if(we&&we.cluster?xe+we.point_count<=pe?xe+=we.point_count:xe=this._appendLeaves($,we.cluster_id,Q,pe,xe):xe<pe?xe++:$.push(Le),$.length===Q)break}return xe}_createTree($){let X=new f.aT($.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Q=0;Q<$.length;Q+=this.stride)X.add($[Q],$[Q+1]);return X.finish(),X.data=$,X}_addTileFeatures($,X,Q,pe,xe,Me){for(let Le of $){let we=Le*this.stride,Ee=X[we+5]>1,Ze,Ne,Xe;if(Ee)Ze=Tt(X,we,this.clusterProps),Ne=X[we],Xe=X[we+1];else{let wi=this.points[X[we+3]];Ze=wi.properties;let[pt,yt]=wi.geometry.coordinates;Ne=Et(pt),Xe=oi(yt)}let Ce={type:1,geometry:[[Math.round(this.options.extent*(Ne*xe-Q)),Math.round(this.options.extent*(Xe*xe-pe))]],tags:Ze},Mt;Mt=Ee||this.options.generateId?X[we+3]:this.points[X[we+3]].id,Mt!==void 0&&(Ce.id=Mt),Me.features.push(Ce)}}_limitZoom($){return Math.max(this.options.minZoom,Math.min(Math.floor(+$),this.options.maxZoom+1))}_cluster($,X){let{radius:Q,extent:pe,reduce:xe,minPoints:Me}=this.options,Le=Q/(pe*Math.pow(2,X)),we=$.data,Ee=[],Ze=this.stride;for(let Ne=0;Ne<we.length;Ne+=Ze){if(we[Ne+2]<=X)continue;we[Ne+2]=X;let Xe=we[Ne],Ce=we[Ne+1],Mt=$.within(we[Ne],we[Ne+1],Le),wi=we[Ne+5],pt=wi;for(let yt of Mt){let Lt=yt*Ze;we[Lt+2]>X&&(pt+=we[Lt+5])}if(pt>wi&&pt>=Me){let yt,Lt=Xe*wi,pi=Ce*wi,Ei=-1,mr=(Ne/Ze<<5)+(X+1)+this.points.length;for(let gr of Mt){let Vi=gr*Ze;if(we[Vi+2]<=X)continue;we[Vi+2]=X;let Si=we[Vi+5];Lt+=we[Vi]*Si,pi+=we[Vi+1]*Si,we[Vi+4]=mr,xe&&(yt||(yt=this._map(we,Ne,!0),Ei=this.clusterProps.length,this.clusterProps.push(yt)),xe(yt,this._map(we,Vi)))}we[Ne+4]=mr,Ee.push(Lt/pt,pi/pt,1/0,mr,-1,pt),xe&&Ee.push(Ei)}else{for(let yt=0;yt<Ze;yt++)Ee.push(we[Ne+yt]);if(pt>1)for(let yt of Mt){let Lt=yt*Ze;if(!(we[Lt+2]<=X)){we[Lt+2]=X;for(let pi=0;pi<Ze;pi++)Ee.push(we[Lt+pi])}}}}return Ee}_getOriginId($){return $-this.points.length>>5}_getOriginZoom($){return($-this.points.length)%32}_map($,X,Q){if($[X+5]>1){let Me=this.clusterProps[$[X+6]];return Q?Object.assign({},Me):Me}let pe=this.points[$[X+3]].properties,xe=this.options.map(pe);return Q&&xe===pe?Object.assign({},xe):xe}}function Ht(ke,$,X){return{type:"Feature",id:ke[$+3],properties:Tt(ke,$,X),geometry:{type:"Point",coordinates:[(Q=ke[$],360*(Q-.5)),ni(ke[$+1])]}};var Q}function Tt(ke,$,X){let Q=ke[$+5],pe=Q>=1e4?`${Math.round(Q/1e3)}k`:Q>=1e3?Math.round(Q/100)/10+"k":Q,xe=ke[$+6],Me=xe===-1?{}:Object.assign({},X[xe]);return Object.assign(Me,{cluster:!0,cluster_id:ke[$+3],point_count:Q,point_count_abbreviated:pe})}function Et(ke){return ke/360+.5}function oi(ke){let $=Math.sin(ke*Math.PI/180),X=.5-.25*Math.log((1+$)/(1-$))/Math.PI;return X<0?0:X>1?1:X}function ni(ke){let $=(180-360*ke)*Math.PI/180;return 360*Math.atan(Math.exp($))/Math.PI-90}function di(ke,$,X,Q){let pe=Q,xe=$+(X-$>>1),Me,Le=X-$,we=ke[$],Ee=ke[$+1],Ze=ke[X],Ne=ke[X+1];for(let Xe=$+3;Xe<X;Xe+=3){let Ce=ai(ke[Xe],ke[Xe+1],we,Ee,Ze,Ne);if(Ce>pe)Me=Xe,pe=Ce;else if(Ce===pe){let Mt=Math.abs(Xe-xe);Mt<Le&&(Me=Xe,Le=Mt)}}pe>Q&&(Me-$>3&&di(ke,$,Me,Q),ke[Me+2]=pe,X-Me>3&&di(ke,Me,X,Q))}function ai(ke,$,X,Q,pe,xe){let Me=pe-X,Le=xe-Q;if(Me!==0||Le!==0){let we=((ke-X)*Me+($-Q)*Le)/(Me*Me+Le*Le);we>1?(X=pe,Q=xe):we>0&&(X+=Me*we,Q+=Le*we)}return Me=ke-X,Le=$-Q,Me*Me+Le*Le}function Ct(ke,$,X,Q){let pe={type:$,geom:X},xe={id:ke==null?null:ke,type:pe.type,geometry:pe.geom,tags:Q,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};switch(pe.type){case"Point":case"MultiPoint":case"LineString":dt(xe,pe.geom);break;case"Polygon":dt(xe,pe.geom[0]);break;case"MultiLineString":for(let Me of pe.geom)dt(xe,Me);break;case"MultiPolygon":for(let Me of pe.geom)dt(xe,Me[0])}return xe}function dt(ke,$){for(let X=0;X<$.length;X+=3)ke.minX=Math.min(ke.minX,$[X]),ke.minY=Math.min(ke.minY,$[X+1]),ke.maxX=Math.max(ke.maxX,$[X]),ke.maxY=Math.max(ke.maxY,$[X+1])}function qt(ke,$){let X=[];switch(ke.type){case"FeatureCollection":for(let Q=0;Q<ke.features.length;Q++)bt(X,ke.features[Q],$,Q);break;case"Feature":bt(X,ke,$);break;default:bt(X,{geometry:ke,properties:void 0},$)}return X}function bt(ke,$,X,Q){var Le;if(!$.geometry)return;if($.geometry.type==="GeometryCollection"){for(let we of $.geometry.geometries)bt(ke,{id:$.id,geometry:we,properties:$.properties},X,Q);return}let pe=$.geometry.coordinates;if(!(pe!=null&&pe.length))return;let xe=Math.pow(X.tolerance/((1<<X.maxZoom)*X.extent),2),Me=$.id;switch(X.promoteId?Me=(Le=$.properties)==null?void 0:Le[X.promoteId]:X.generateId&&(Me=Q||0),$.geometry.type){case"Point":{let we=[];return Qt($.geometry.coordinates,we),void ke.push(Ct(Me,$.geometry.type,we,$.properties))}case"MultiPoint":{let we=[];for(let Ee of $.geometry.coordinates)Qt(Ee,we);return void ke.push(Ct(Me,$.geometry.type,we,$.properties))}case"LineString":{let we=[];return Pi($.geometry.coordinates,we,xe,!1),void ke.push(Ct(Me,$.geometry.type,we,$.properties))}case"MultiLineString":{if(X.lineMetrics){for(let Ee of $.geometry.coordinates){let Ze=[];Pi(Ee,Ze,xe,!1),ke.push(Ct(Me,"LineString",Ze,$.properties))}return}let we=[];return xi($.geometry.coordinates,we,xe,!1),void ke.push(Ct(Me,$.geometry.type,we,$.properties))}case"Polygon":{let we=[];return xi($.geometry.coordinates,we,xe,!0),void ke.push(Ct(Me,$.geometry.type,we,$.properties))}case"MultiPolygon":{let we=[];for(let Ee of $.geometry.coordinates){let Ze=[];xi(Ee,Ze,xe,!0),we.push(Ze)}return void ke.push(Ct(Me,$.geometry.type,we,$.properties))}default:throw new Error("Input data is not a valid GeoJSON object.")}}function Qt(ke,$){$.push(hi(ke[0]),Zt(ke[1]),0)}function Pi(ke,$,X,Q){let pe,xe,Me=0;for(let we=0;we<ke.length;we++){let Ee=hi(ke[we][0]),Ze=Zt(ke[we][1]);$.push(Ee,Ze,0),we>0&&(Me+=Q?(pe*Ze-Ee*xe)/2:Math.sqrt(Math.pow(Ee-pe,2)+Math.pow(Ze-xe,2))),pe=Ee,xe=Ze}let Le=$.length-3;$[2]=1,X>0&&di($,0,Le,X),$[Le+2]=1,$.size=Math.abs(Me),$.start=0,$.end=$.size}function xi(ke,$,X,Q){for(let pe=0;pe<ke.length;pe++){let xe=[];Pi(ke[pe],xe,X,Q),$.push(xe)}}function hi(ke){return ke/360+.5}function Zt(ke){let $=Math.sin(ke*Math.PI/180),X=.5-.25*Math.log((1+$)/(1-$))/Math.PI;return X<0?0:X>1?1:X}function gt(ke,$,X,Q,pe,xe,Me,Le){if(Q/=$,xe>=(X/=$)&&Me<Q)return ke;if(Me<X||xe>=Q)return null;let we=[];for(let Ee of ke){let Ze=pe===0?Ee.minX:Ee.minY,Ne=pe===0?Ee.maxX:Ee.maxY;if(Ze>=X&&Ne<Q)we.push(Ee);else if(!(Ne<X||Ze>=Q))switch(Ee.type){case"Point":case"MultiPoint":{let Xe=[];if(pr(Ee.geometry,Xe,X,Q,pe),!Xe.length)continue;we.push(Ct(Ee.id,Xe.length===3?"Point":"MultiPoint",Xe,Ee.tags));continue}case"LineString":{let Xe=[];if(yi(Ee.geometry,Xe,X,Q,pe,!1,Le.lineMetrics),!Xe.length)continue;if(Le.lineMetrics){for(let Ce of Xe)we.push(Ct(Ee.id,Ee.type,Ce,Ee.tags));continue}if(Xe.length>1){we.push(Ct(Ee.id,"MultiLineString",Xe,Ee.tags));continue}we.push(Ct(Ee.id,Ee.type,Xe[0],Ee.tags));continue}case"MultiLineString":{let Xe=[];if(sn(Ee.geometry,Xe,X,Q,pe,!1),!Xe.length)continue;if(Xe.length===1){we.push(Ct(Ee.id,"LineString",Xe[0],Ee.tags));continue}we.push(Ct(Ee.id,Ee.type,Xe,Ee.tags));continue}case"Polygon":{let Xe=[];if(sn(Ee.geometry,Xe,X,Q,pe,!0),!Xe.length)continue;we.push(Ct(Ee.id,Ee.type,Xe,Ee.tags));continue}case"MultiPolygon":{let Xe=[];for(let Ce of Ee.geometry){let Mt=[];sn(Ce,Mt,X,Q,pe,!0),Mt.length&&Xe.push(Mt)}if(!Xe.length)continue;we.push(Ct(Ee.id,Ee.type,Xe,Ee.tags));continue}}}return we.length?we:null}function pr(ke,$,X,Q,pe){for(let xe=0;xe<ke.length;xe+=3){let Me=ke[xe+pe];Me>=X&&Me<=Q&&br($,ke[xe],ke[xe+1],ke[xe+2])}}function yi(ke,$,X,Q,pe,xe,Me){let Le=gn(ke),we=pe===0?cr:Mn,Ee,Ze,Ne=ke.start;for(let pt=0;pt<ke.length-3;pt+=3){let yt=ke[pt],Lt=ke[pt+1],pi=ke[pt+2],Ei=ke[pt+3],mr=ke[pt+4],gr=pe===0?yt:Lt,Vi=pe===0?Ei:mr,Si=!1;Me&&(Ee=Math.sqrt(Math.pow(yt-Ei,2)+Math.pow(Lt-mr,2))),gr<X?Vi>X&&(Ze=we(Le,yt,Lt,Ei,mr,X),Me&&(Le.start=Ne+Ee*Ze)):gr>Q?Vi<Q&&(Ze=we(Le,yt,Lt,Ei,mr,Q),Me&&(Le.start=Ne+Ee*Ze)):br(Le,yt,Lt,pi),Vi<X&&gr>=X&&(Ze=we(Le,yt,Lt,Ei,mr,X),Si=!0),Vi>Q&&gr<=Q&&(Ze=we(Le,yt,Lt,Ei,mr,Q),Si=!0),!xe&&Si&&(Me&&(Le.end=Ne+Ee*Ze),$.push(Le),Le=gn(ke)),Me&&(Ne+=Ee)}let Xe=ke.length-3,Ce=ke[Xe],Mt=ke[Xe+1],wi=pe===0?Ce:Mt;wi>=X&&wi<=Q&&br(Le,Ce,Mt,ke[Xe+2]),Xe=Le.length-3,xe&&Xe>=3&&(Le[Xe]!==Le[0]||Le[Xe+1]!==Le[1])&&br(Le,Le[0],Le[1],Le[2]),Le.length&&$.push(Le)}function gn(ke){let $=[];return $.size=ke.size,$.start=ke.start,$.end=ke.end,$}function sn(ke,$,X,Q,pe,xe){for(let Me of ke)yi(Me,$,X,Q,pe,xe,!1)}function br(ke,$,X,Q){ke.push($,X,Q)}function cr(ke,$,X,Q,pe,xe){let Me=(xe-$)/(Q-$);return br(ke,xe,X+(pe-X)*Me,1),Me}function Mn(ke,$,X,Q,pe,xe){let Me=(xe-X)/(pe-X);return br(ke,$+(Q-$)*Me,xe,1),Me}function fr(ke,$){let X=$.buffer/$.extent,Q=ke,pe=gt(ke,1,-1-X,X,0,-1,2,$),xe=gt(ke,1,1-X,2+X,0,-1,2,$);return(pe||xe)&&(Q=gt(ke,1,-X,1+X,0,-1,2,$)||[],pe&&(Q=xr(pe,1).concat(Q)),xe&&(Q=Q.concat(xr(xe,-1)))),Q}function xr(ke,$){let X=[];for(let Q of ke)switch(Q.type){case"Point":case"MultiPoint":case"LineString":{let pe=yn(Q.geometry,$);X.push(Ct(Q.id,Q.type,pe,Q.tags));continue}case"MultiLineString":case"Polygon":{let pe=[];for(let xe of Q.geometry)pe.push(yn(xe,$));X.push(Ct(Q.id,Q.type,pe,Q.tags));continue}case"MultiPolygon":{let pe=[];for(let xe of Q.geometry){let Me=[];for(let Le of xe)Me.push(yn(Le,$));pe.push(Me)}X.push(Ct(Q.id,Q.type,pe,Q.tags));continue}}return X}function yn(ke,$){let X=[];X.size=ke.size,ke.start!==void 0&&(X.start=ke.start,X.end=ke.end);for(let Q=0;Q<ke.length;Q+=3)X.push(ke[Q]+$,ke[Q+1],ke[Q+2]);return X}function zi(ke,$){if(ke.transformed)return ke;let X=1<<ke.z,Q=ke.x,pe=ke.y;for(let xe of ke.features){if(xe.type===1){let Le=[];for(let we=0;we<xe.geometry.length;we+=2)Le.push(_n(xe.geometry[we],xe.geometry[we+1],$,X,Q,pe));xe.geometry=Le;continue}let Me=[];for(let Le of xe.geometry){let we=[];for(let Ee=0;Ee<Le.length;Ee+=2)we.push(_n(Le[Ee],Le[Ee+1],$,X,Q,pe));Me.push(we)}xe.geometry=Me}return ke.transformed=!0,ke}function _n(ke,$,X,Q,pe,xe){return[Math.round(X*(ke*Q-pe)),Math.round(X*($*Q-xe))]}function xs(ke,$,X,Q,pe){let xe=$===pe.maxZoom?0:pe.tolerance/((1<<$)*pe.extent),Me={features:[],numPoints:0,numSimplified:0,numFeatures:ke.length,source:null,x:X,y:Q,z:$,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(let Le of ke)Ya(Me,Le,xe,pe);return Me}function Ya(ke,$,X,Q){ke.minX=Math.min(ke.minX,$.minX),ke.minY=Math.min(ke.minY,$.minY),ke.maxX=Math.max(ke.maxX,$.maxX),ke.maxY=Math.max(ke.maxY,$.maxY);let pe,xe=$.tags||null;switch($.type){case"Point":case"MultiPoint":{let Me=[];for(let Le=0;Le<$.geometry.length;Le+=3)Me.push($.geometry[Le],$.geometry[Le+1]),ke.numPoints++,ke.numSimplified++;if(!Me.length)return;pe={type:1,tags:xe,geometry:Me};break}case"LineString":{let Me=[];if(vn(Me,$.geometry,ke,X,!1,!1),!Me.length)return;if(Q.lineMetrics){xe={};for(let Le in $.tags)xe[Le]=$.tags[Le];xe.mapbox_clip_start=$.geometry.start/$.geometry.size,xe.mapbox_clip_end=$.geometry.end/$.geometry.size}pe={type:2,tags:xe,geometry:Me};break}case"MultiLineString":case"Polygon":{let Me=[];for(let Le=0;Le<$.geometry.length;Le++)vn(Me,$.geometry[Le],ke,X,$.type==="Polygon",Le===0);if(!Me.length)return;pe={type:$.type==="Polygon"?3:2,tags:xe,geometry:Me};break}case"MultiPolygon":{let Me=[];for(let Le=0;Le<$.geometry.length;Le++){let we=$.geometry[Le];for(let Ee=0;Ee<we.length;Ee++)vn(Me,we[Ee],ke,X,!0,Ee===0)}if(!Me.length)return;pe={type:3,tags:xe,geometry:Me};break}}$.id!==null&&(pe.id=$.id),ke.features.push(pe)}function vn(ke,$,X,Q,pe,xe){let Me=Q*Q;if(Q>0&&$.size<(pe?Me:Q))return void(X.numPoints+=$.length/3);let Le=[];for(let we=0;we<$.length;we+=3)(Q===0||$[we+2]>Me)&&(X.numSimplified++,Le.push($[we],$[we+1])),X.numPoints++;pe&&(function(we,Ee){let Ze=0;for(let Ne=0,Xe=we.length,Ce=Xe-2;Ne<Xe;Ce=Ne,Ne+=2)Ze+=(we[Ne]-we[Ce])*(we[Ne+1]+we[Ce+1]);if(Ze>0===Ee)for(let Ne=0,Xe=we.length;Ne<Xe/2;Ne+=2){let Ce=we[Ne],Mt=we[Ne+1];we[Ne]=we[Xe-2-Ne],we[Ne+1]=we[Xe-1-Ne],we[Xe-2-Ne]=Ce,we[Xe-1-Ne]=Mt}})(Le,xe),ke.push(Le)}function Vn(ke,$,X){var xe,Me;let Q=!!$.newGeometry,pe=$.removeAllProperties||((xe=$.removeProperties)==null?void 0:xe.length)>0||((Me=$.addOrUpdateProperties)==null?void 0:Me.length)>0;if(Q){let Le=qt({type:"FeatureCollection",features:[{type:"Feature",id:ke.id,geometry:$.newGeometry,properties:pe?Ea(ke.tags,$):ke.tags}]},X);return Le=fr(Le,X),Le[0]}if(pe){let Le={...ke};return Le.tags=Ea(Le.tags,$),Le}return null}function Ea(ke,$){if($.removeAllProperties)return{};let X={...ke||{}};if($.removeProperties)for(let Q of $.removeProperties)delete X[Q];if($.addOrUpdateProperties)for(let{key:Q,value:pe}of $.addOrUpdateProperties)X[Q]=pe;return X}let ws={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,updateable:!1,debug:0};class on{constructor($,X){zt(this,"options");zt(this,"tiles");zt(this,"tileCoords");zt(this,"stats",{});zt(this,"total",0);zt(this,"source");let Q=(X=this.options=Object.assign({},ws,X)).debug;if(Q&&console.time("preprocess data"),X.maxZoom<0||X.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(X.promoteId&&X.generateId)throw new Error("promoteId and generateId cannot be used together.");let pe=qt($,X);this.tiles={},this.tileCoords=[],Q&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",X.indexMaxZoom,X.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),pe=fr(pe,X),pe.length&&this.splitTile(pe,0,0,0),X.updateable&&(this.source=pe),Q&&(pe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile($,X,Q,pe,xe,Me,Le){let we=[$,X,Q,pe],Ee=this.options,Ze=Ee.debug;for(;we.length;){pe=we.pop(),Q=we.pop(),X=we.pop(),$=we.pop();let Ne=1<<X,Xe=Wn(X,Q,pe),Ce=this.tiles[Xe];if(!Ce&&(Ze>1&&console.time("creation"),Ce=this.tiles[Xe]=xs($,X,Q,pe,Ee),this.tileCoords.push({z:X,x:Q,y:pe,id:Xe}),Ze)){Ze>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",X,Q,pe,Ce.numFeatures,Ce.numPoints,Ce.numSimplified),console.timeEnd("creation"));let Si=`z${X}`;this.stats[Si]=(this.stats[Si]||0)+1,this.total++}if(Ce.source=$,xe==null){if(X===Ee.indexMaxZoom||Ce.numPoints<=Ee.indexMaxPoints)continue}else{if(X===Ee.maxZoom||X===xe)continue;if(xe!=null){let Si=xe-X;if(Q!==Me>>Si||pe!==Le>>Si)continue}}if(Ce.source=null,!$.length)continue;Ze>1&&console.time("clipping");let Mt=.5*Ee.buffer/Ee.extent,wi=.5-Mt,pt=.5+Mt,yt=1+Mt,Lt=null,pi=null,Ei=null,mr=null,gr=gt($,Ne,Q-Mt,Q+pt,0,Ce.minX,Ce.maxX,Ee),Vi=gt($,Ne,Q+wi,Q+yt,0,Ce.minX,Ce.maxX,Ee);gr&&(Lt=gt(gr,Ne,pe-Mt,pe+pt,1,Ce.minY,Ce.maxY,Ee),pi=gt(gr,Ne,pe+wi,pe+yt,1,Ce.minY,Ce.maxY,Ee)),Vi&&(Ei=gt(Vi,Ne,pe-Mt,pe+pt,1,Ce.minY,Ce.maxY,Ee),mr=gt(Vi,Ne,pe+wi,pe+yt,1,Ce.minY,Ce.maxY,Ee)),Ze>1&&console.timeEnd("clipping"),we.push(Lt||[],X+1,2*Q,2*pe),we.push(pi||[],X+1,2*Q,2*pe+1),we.push(Ei||[],X+1,2*Q+1,2*pe),we.push(mr||[],X+1,2*Q+1,2*pe+1)}}getTile($,X,Q){$=+$,X=+X,Q=+Q;let pe=this.options,{extent:xe,debug:Me}=pe;if($<0||$>24)return null;let Le=1<<$,we=Wn($,X=X+Le&Le-1,Q);if(this.tiles[we])return zi(this.tiles[we],xe);Me>1&&console.log("drilling down to z%d-%d-%d",$,X,Q);let Ee,Ze=$,Ne=X,Xe=Q;for(;!Ee&&Ze>0;)Ze--,Ne>>=1,Xe>>=1,Ee=this.tiles[Wn(Ze,Ne,Xe)];return Ee!=null&&Ee.source?(Me>1&&(console.log("found parent tile z%d-%d-%d",Ze,Ne,Xe),console.time("drilling down")),this.splitTile(Ee.source,Ze,Ne,Xe,$,X,Q),Me>1&&console.timeEnd("drilling down"),this.tiles[we]?zi(this.tiles[we],xe):null):null}invalidateTiles($){let X=this.options,{debug:Q}=X,pe=1/0,xe=-1/0,Me=1/0,Le=-1/0;for(let Ze of $)pe=Math.min(pe,Ze.minX),xe=Math.max(xe,Ze.maxX),Me=Math.min(Me,Ze.minY),Le=Math.max(Le,Ze.maxY);let we=X.buffer/X.extent,Ee=new Set;for(let Ze in this.tiles){let Ne=this.tiles[Ze],Xe=1<<Ne.z,Ce=(Ne.x-we)/Xe,Mt=(Ne.x+1+we)/Xe,wi=(Ne.y-we)/Xe,pt=(Ne.y+1+we)/Xe;if(xe<Ce||pe>=Mt||Le<wi||Me>=pt)continue;let yt=!1;for(let Lt of $)if(Lt.maxX>=Ce&&Lt.minX<Mt&&Lt.maxY>=wi&&Lt.minY<pt){yt=!0;break}if(yt){if(Q){Q>1&&console.log("invalidate tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ne.z,Ne.x,Ne.y,Ne.numFeatures,Ne.numPoints,Ne.numSimplified);let Lt=`z${Ne.z}`;this.stats[Lt]=(this.stats[Lt]||0)-1,this.total--}delete this.tiles[Ze],Ee.add(Ze)}}Ee.size&&(this.tileCoords=this.tileCoords.filter((Ze=>!Ee.has(Ze.id))))}updateData($){let X=this.options,Q=X.debug;if(!X.updateable)throw new Error("to update tile geojson `updateable` option must be set to true");let{affected:pe,source:xe}=(function(Ne,Xe,Ce){let Mt=(function(pt){var yt,Lt;return pt?{removeAll:pt.removeAll,remove:new Set(pt.remove||[]),add:new Map((yt=pt.add)==null?void 0:yt.map((pi=>[pi.id,pi]))),update:new Map((Lt=pt.update)==null?void 0:Lt.map((pi=>[pi.id,pi])))}:{remove:new Set,add:new Map,update:new Map}})(Xe),wi=[];if(Mt.removeAll&&(wi=Ne,Ne=[]),Mt.remove.size||Mt.add.size){let pt=[];for(let yt of Ne){let{id:Lt}=yt;(Mt.remove.has(Lt)||Mt.add.has(Lt))&&pt.push(yt)}if(pt.length){wi.push(...pt);let yt=new Set(pt.map((Lt=>Lt.id)));Ne=Ne.filter((Lt=>!yt.has(Lt.id)))}if(Mt.add.size){let yt=qt({type:"FeatureCollection",features:Array.from(Mt.add.values())},Ce);yt=fr(yt,Ce),wi.push(...yt),Ne.push(...yt)}}if(Mt.update.size)for(let[pt,yt]of Mt.update){let Lt=Ne.findIndex((mr=>mr.id===pt));if(Lt===-1)continue;let pi=Ne[Lt],Ei=Vn(pi,yt,Ce);Ei&&(wi.push(pi,Ei),Ne[Lt]=Ei)}return{affected:wi,source:Ne}})(this.source,$,X);if(!pe.length)return;this.source=xe,Q>1&&(console.log("invalidating tiles"),console.time("invalidating")),this.invalidateTiles(pe),Q>1&&console.timeEnd("invalidating");let[Me,Le,we]=[0,0,0],Ee=xs(this.source,Me,Le,we,this.options);Ee.source=this.source;let Ze=Wn(Me,Le,we);if(this.tiles[Ze]=Ee,this.tileCoords.push({z:Me,x:Le,y:we,id:Ze}),Q){let Ne=`z${Me}`;this.stats[Ne]=(this.stats[Ne]||0)+1,this.total++}}}function Wn(ke,$,X){return 32*((1<<ke)*X+$)+ke}class Ss extends Y{constructor($,X,Q,pe=Xa){super($,X,Q),this._dataUpdateable=new Map,this._createGeoJSONIndex=pe}loadVectorTile($,X){return f._(this,void 0,void 0,(function*(){let Q=$.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");let pe=this._geoJSONIndex.getTile(Q.z,Q.x,Q.y);return pe?G(new f.d3(pe.features,{version:2,extent:f.a5})):null}))}loadData($){return f._(this,void 0,void 0,(function*(){var X;(X=this._pendingRequest)===null||X===void 0||X.abort();let Q=this._startPerformance($);this._pendingRequest=new AbortController;try{(!this._pendingData||$.request||$.data||$.dataDiff)&&(this._pendingData=this.loadAndProcessGeoJSON($,this._pendingRequest));let pe=yield this._pendingData;this._geoJSONIndex=this._createGeoJSONIndex(pe,$),this.loaded={};let xe={};return $.request&&(xe.data=pe),this._finishPerformance(Q,$,xe),xe}catch(pe){if(delete this._pendingRequest,f.Z(pe))return{abandoned:!0};throw pe}}))}_startPerformance($){var X;if(!((X=$==null?void 0:$.request)===null||X===void 0)&&X.collectResourceTiming)return new f.c$($.request)}_finishPerformance($,X,Q){if(!$)return;let pe=$.finish();pe&&(Q.resourceTiming={},Q.resourceTiming[X.source]=JSON.parse(JSON.stringify(pe)))}getData(){return f._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile($){let X=this.loaded;return X&&X[$.uid]?super.reloadTile($):this.loadTile($)}loadAndProcessGeoJSON($,X){return f._(this,void 0,void 0,(function*(){let Q;if($.request?Q=yield this.loadGeoJSONFromUrl($.request,$.promoteId,X):$.data?Q=this._loadGeoJSONFromObject($.data,$.promoteId):$.dataDiff&&(Q=this._loadGeoJSONFromDiff($.dataDiff,$.promoteId,$.source)),delete this._pendingRequest,typeof Q!="object")throw new Error(`Input data given to '${$.source}' is not a valid GeoJSON object.`);return Ye(Q,!0),$.filter&&(Q=this._filterGeoJSON(Q,$.filter)),Q}))}loadGeoJSONFromUrl($,X,Q){return f._(this,void 0,void 0,(function*(){let pe=yield f.j($,Q);return this._dataUpdateable=f.a7(pe.data,X),pe.data}))}_loadGeoJSONFromObject($,X){return this._dataUpdateable=f.a7($,X),$}_loadGeoJSONFromDiff($,X,Q){if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${Q}`);f.a8(this._dataUpdateable,$,X);let pe=Array.from(this._dataUpdateable.values());return this._toFeatureCollection(pe)}_filterGeoJSON($,X){let Q=f.d4(X,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Q.result==="error")throw new Error(Q.value.map((xe=>`${xe.key}: ${xe.message}`)).join(", "));let pe=$.features.filter((xe=>Q.value.evaluate({zoom:0},xe)));return this._toFeatureCollection(pe)}_toFeatureCollection($){return{type:"FeatureCollection",features:$}}removeSource($){return f._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom($){return this._geoJSONIndex.getClusterExpansionZoom($.clusterId)}getClusterChildren($){return this._geoJSONIndex.getChildren($.clusterId)}getClusterLeaves($){return this._geoJSONIndex.getLeaves($.clusterId,$.limit,$.offset)}}function Xa(ke,$){return $.cluster?new Ut((function({superclusterOptions:X,clusterProperties:Q}){if(!Q||!X)return X;let pe={},xe={},Me={accumulated:null,zoom:0},Le={properties:null},we=Object.keys(Q);for(let Ee of we){let[Ze,Ne]=Q[Ee],Xe=f.d4(Ne),Ce=f.d4(typeof Ze=="string"?[Ze,["accumulated"],["get",Ee]]:Ze);pe[Ee]=Xe.value,xe[Ee]=Ce.value}return X.map=Ee=>{Le.properties=Ee;let Ze={};for(let Ne of we)Ze[Ne]=pe[Ne].evaluate(Me,Le);return Ze},X.reduce=(Ee,Ze)=>{Le.properties=Ze;for(let Ne of we)Me.accumulated=Ee[Ne],Ee[Ne]=xe[Ne].evaluate(Me,Le)},X})($)).load(ke.features):(function(X,Q){return new on(X,Q)})(ke,$.geojsonVtOptions)}class Ts{constructor($){this.self=$,this.actor=new f.L($),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(X,Q)=>{if(this.externalWorkerSourceTypes[X])throw new Error(`Worker source with name "${X}" already registered.`);this.externalWorkerSourceTypes[X]=Q},this.self.addProtocol=f.cK,this.self.removeProtocol=f.cL,this.self.registerRTLTextPlugin=X=>{f.d5.setMethods(X)},this.actor.registerMessageHandler("LDT",((X,Q)=>this._getDEMWorkerSource(X,Q.source).loadTile(Q))),this.actor.registerMessageHandler("RDT",((X,Q)=>f._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(X,Q.source).removeTile(Q)})))),this.actor.registerMessageHandler("GCEZ",((X,Q)=>f._(this,void 0,void 0,(function*(){return this._getWorkerSource(X,Q.type,Q.source).getClusterExpansionZoom(Q)})))),this.actor.registerMessageHandler("GCC",((X,Q)=>f._(this,void 0,void 0,(function*(){return this._getWorkerSource(X,Q.type,Q.source).getClusterChildren(Q)})))),this.actor.registerMessageHandler("GCL",((X,Q)=>f._(this,void 0,void 0,(function*(){return this._getWorkerSource(X,Q.type,Q.source).getClusterLeaves(Q)})))),this.actor.registerMessageHandler("LD",((X,Q)=>this._getWorkerSource(X,Q.type,Q.source).loadData(Q))),this.actor.registerMessageHandler("GD",((X,Q)=>this._getWorkerSource(X,Q.type,Q.source).getData())),this.actor.registerMessageHandler("LT",((X,Q)=>this._getWorkerSource(X,Q.type,Q.source).loadTile(Q))),this.actor.registerMessageHandler("RT",((X,Q)=>this._getWorkerSource(X,Q.type,Q.source).reloadTile(Q))),this.actor.registerMessageHandler("AT",((X,Q)=>this._getWorkerSource(X,Q.type,Q.source).abortTile(Q))),this.actor.registerMessageHandler("RMT",((X,Q)=>this._getWorkerSource(X,Q.type,Q.source).removeTile(Q))),this.actor.registerMessageHandler("RS",((X,Q)=>f._(this,void 0,void 0,(function*(){if(!this.workerSources[X]||!this.workerSources[X][Q.type]||!this.workerSources[X][Q.type][Q.source])return;let pe=this.workerSources[X][Q.type][Q.source];delete this.workerSources[X][Q.type][Q.source],pe.removeSource!==void 0&&pe.removeSource(Q)})))),this.actor.registerMessageHandler("RM",(X=>f._(this,void 0,void 0,(function*(){delete this.layerIndexes[X],delete this.availableImages[X],delete this.workerSources[X],delete this.demWorkerSources[X],this.globalStates.delete(X)})))),this.actor.registerMessageHandler("SR",((X,Q)=>f._(this,void 0,void 0,(function*(){this.referrer=Q})))),this.actor.registerMessageHandler("SRPS",((X,Q)=>this._syncRTLPluginState(X,Q))),this.actor.registerMessageHandler("IS",((X,Q)=>f._(this,void 0,void 0,(function*(){this.self.importScripts(Q)})))),this.actor.registerMessageHandler("SI",((X,Q)=>this._setImages(X,Q))),this.actor.registerMessageHandler("UL",((X,Q)=>f._(this,void 0,void 0,(function*(){this._getLayerIndex(X).update(Q.layers,Q.removedIds,this._getGlobalState(X))})))),this.actor.registerMessageHandler("UGS",((X,Q)=>f._(this,void 0,void 0,(function*(){let pe=this._getGlobalState(X);for(let xe in Q)pe[xe]=Q[xe]})))),this.actor.registerMessageHandler("SL",((X,Q)=>f._(this,void 0,void 0,(function*(){this._getLayerIndex(X).replace(Q,this._getGlobalState(X))}))))}_getGlobalState($){let X=this.globalStates.get($);return X||(X={},this.globalStates.set($,X)),X}_setImages($,X){return f._(this,void 0,void 0,(function*(){this.availableImages[$]=X;for(let Q in this.workerSources[$]){let pe=this.workerSources[$][Q];for(let xe in pe)pe[xe].availableImages=X}}))}_syncRTLPluginState($,X){return f._(this,void 0,void 0,(function*(){return yield f.d5.syncState(X,this.self.importScripts)}))}_getAvailableImages($){let X=this.availableImages[$];return X||(X=[]),X}_getLayerIndex($){let X=this.layerIndexes[$];return X||(X=this.layerIndexes[$]=new a),X}_getWorkerSource($,X,Q){if(this.workerSources[$]||(this.workerSources[$]={}),this.workerSources[$][X]||(this.workerSources[$][X]={}),!this.workerSources[$][X][Q]){let pe={sendAsync:(xe,Me)=>(xe.targetMapId=$,this.actor.sendAsync(xe,Me))};switch(X){case"vector":this.workerSources[$][X][Q]=new Y(pe,this._getLayerIndex($),this._getAvailableImages($));break;case"geojson":this.workerSources[$][X][Q]=new Ss(pe,this._getLayerIndex($),this._getAvailableImages($));break;default:this.workerSources[$][X][Q]=new this.externalWorkerSourceTypes[X](pe,this._getLayerIndex($),this._getAvailableImages($))}}return this.workerSources[$][X][Q]}_getDEMWorkerSource($,X){return this.demWorkerSources[$]||(this.demWorkerSources[$]={}),this.demWorkerSources[$][X]||(this.demWorkerSources[$][X]=new Se),this.demWorkerSources[$][X]}}return f.i(self)&&(self.worker=new Ts(self)),Ts})),p("index",["exports","./shared"],(function(f,a){"use strict";var T="5.17.0";function M(){var _=new a.A(4);return a.A!=Float32Array&&(_[1]=0,_[2]=0),_[0]=1,_[3]=1,_}let R,V,K,ne={frame(_,e,n,u){let m=u||window,b=m.requestAnimationFrame((k=>{w(),e(k)})),{unsubscribe:w}=a.s(_.signal,"abort",(()=>{w(),m.cancelAnimationFrame(b),n(new a.a(_.signal.reason))}),!1)},frameAsync(_,e){return new Promise(((n,u)=>{this.frame(_,n,u,e)}))},getImageData(_,e=0){return this.getImageCanvasContext(_).getImageData(-e,-e,_.width+2*e,_.height+2*e)},getImageCanvasContext(_){let e=window.document.createElement("canvas"),n=e.getContext("2d",{willReadFrequently:!0});if(!n)throw new Error("failed to create canvas 2d context");return e.width=_.width,e.height=_.height,n.drawImage(_,0,0,_.width,_.height),n},resolveURL:_=>(R||(R=document.createElement("a")),R.href=_,R.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return K!==void 0?K:!!matchMedia&&(V==null&&(V=matchMedia("(prefers-reduced-motion: reduce)")),V.matches)},set prefersReducedMotion(_){K=_}},G=new class{constructor(){this._realTime=typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),this._frozenAt=null}getCurrentTime(){return this._frozenAt!==null?this._frozenAt:this._realTime()}setNow(_){this._frozenAt=_}restoreNow(){this._frozenAt=null}isFrozen(){return this._frozenAt!==null}};function ie(){return G.getCurrentTime()}class Y{static testProp(e){if(!Y.docStyle)return e[0];for(let n=0;n<e.length;n++)if(e[n]in Y.docStyle)return e[n];return e[0]}static create(e,n,u){let m=window.document.createElement(e);return n!==void 0&&(m.className=n),u&&u.appendChild(m),m}static createNS(e,n){return window.document.createElementNS(e,n)}static disableDrag(){Y.docStyle&&Y.selectProp&&(Y.userSelect=Y.docStyle[Y.selectProp],Y.docStyle[Y.selectProp]="none")}static enableDrag(){Y.docStyle&&Y.selectProp&&(Y.docStyle[Y.selectProp]=Y.userSelect)}static setTransform(e,n){e.style[Y.transformProp]=n}static addEventListener(e,n,u,m={}){e.addEventListener(n,u,"passive"in m?m:m.capture)}static removeEventListener(e,n,u,m={}){e.removeEventListener(n,u,"passive"in m?m:m.capture)}static suppressClickInternal(e){e.preventDefault(),e.stopPropagation(),window.removeEventListener("click",Y.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",Y.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",Y.suppressClickInternal,!0)}),0)}static getScale(e){let n=e.getBoundingClientRect();return{x:n.width/e.offsetWidth||1,y:n.height/e.offsetHeight||1,boundingClientRect:n}}static getPoint(e,n,u){let m=n.boundingClientRect;return new a.P((u.clientX-m.left)/n.x-e.clientLeft,(u.clientY-m.top)/n.y-e.clientTop)}static mousePos(e,n){let u=Y.getScale(e);return Y.getPoint(e,u,n)}static touchPos(e,n){let u=[],m=Y.getScale(e);for(let b=0;b<n.length;b++)u.push(Y.getPoint(e,m,n[b]));return u}static mouseButton(e){return e.button}static remove(e){e.parentNode&&e.parentNode.removeChild(e)}static sanitize(e){let n=new DOMParser().parseFromString(e,"text/html").body||document.createElement("body"),u=n.querySelectorAll("script");for(let m of u)m.remove();return Y.clean(n),n.innerHTML}static isPossiblyDangerous(e,n){let u=n.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(e)||!u.includes("javascript:")&&!u.includes("data:"))||!!e.startsWith("on")||void 0}static clean(e){let n=e.children;for(let u of n)Y.removeAttributes(u),Y.clean(u)}static removeAttributes(e){for(let{name:n,value:u}of e.attributes)Y.isPossiblyDangerous(n,u)&&e.removeAttribute(n)}}Y.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,Y.selectProp=Y.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),Y.transformProp=Y.testProp(["transform","WebkitTransform"]);let Se={supported:!1,testSupport:function(_){!Pe&&_e&&(Ye?st(_):je=_)}},je,_e,Pe=!1,Ye=!1;function st(_){let e=_.createTexture();_.bindTexture(_.TEXTURE_2D,e);try{if(_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,_e),_.isContextLost())return;Se.supported=!0}catch(n){}_.deleteTexture(e),Pe=!0}var Pt;typeof document!="undefined"&&(_e=document.createElement("img"),_e.onload=()=>{je&&st(je),je=null,Ye=!0},_e.onerror=()=>{Pe=!0,je=null},_e.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(_){let e,n,u,m;_.resetRequestQueue=()=>{e=[],n=0,u=0,m={}},_.addThrottleControl=E=>{let z=u++;return m[z]=E,z},_.removeThrottleControl=E=>{delete m[E],w()},_.getImage=(E,z,O=!0)=>new Promise(((N,j)=>{Se.supported&&(E.headers||(E.headers={}),E.headers.accept="image/webp,*/*"),a.e(E,{type:"image"}),e.push({abortController:z,requestParameters:E,supportImageRefresh:O,state:"queued",onError:Z=>{j(Z)},onSuccess:Z=>{N(Z)}}),w()}));let b=E=>a._(this,void 0,void 0,(function*(){E.state="running";let{requestParameters:z,supportImageRefresh:O,onError:N,onSuccess:j,abortController:Z}=E,J=O===!1&&!a.i(self)&&!a.g(z.url)&&(!z.headers||Object.keys(z.headers).reduce(((oe,de)=>oe&&de==="accept"),!0));n++;let se=J?k(z,Z):a.m(z,Z);try{let oe=yield se;delete E.abortController,E.state="completed",oe.data instanceof HTMLImageElement||a.b(oe.data)?j(oe):oe.data&&j({data:yield(le=oe.data,typeof createImageBitmap=="function"?a.f(le):a.h(le)),cacheControl:oe.cacheControl,expires:oe.expires})}catch(oe){delete E.abortController,N(oe)}finally{n--,w()}var le})),w=()=>{let E=(()=>{for(let z of Object.keys(m))if(m[z]())return!0;return!1})()?a.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let z=n;z<E&&e.length>0;z++){let O=e.shift();O.abortController.signal.aborted?z--:b(O)}},k=(E,z)=>new Promise(((O,N)=>{let j=new Image,Z=E.url,J=E.credentials;J&&J==="include"?j.crossOrigin="use-credentials":(J&&J==="same-origin"||!a.d(Z))&&(j.crossOrigin="anonymous"),z.signal.addEventListener("abort",(()=>{j.src="",N(new a.a(z.signal.reason))})),j.fetchPriority="high",j.onload=()=>{j.onerror=j.onload=null,O({data:j})},j.onerror=()=>{j.onerror=j.onload=null,z.signal.aborted||N(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},j.src=Z}))})(Pt||(Pt={})),Pt.resetRequestQueue();class _t{constructor(e){this._transformRequestFn=e!=null?e:null}transformRequest(e,n){return this._transformRequestFn&&this._transformRequestFn(e,n)||{url:e}}setTransformRequest(e){this._transformRequestFn=e}}function Ut(_){let e=[];if(typeof _=="string")e.push({id:"default",url:_});else if(_&&_.length>0){let n=[];for(let{id:u,url:m}of _){let b=`${u}${m}`;n.indexOf(b)===-1&&(n.push(b),e.push({id:u,url:m}))}}return e}function Ht(_,e,n){try{let u=new URL(_);return u.pathname+=`${e}${n}`,u.toString()}catch(u){throw new Error(`Invalid sprite URL "${_}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function Tt(_){let{userImage:e}=_;return!!(e&&e.render&&e.render())&&(_.data.replace(new Uint8Array(e.data.buffer)),!0)}class Et extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}destroy(){this.atlasTexture&&(this.atlasTexture.destroy(),this.atlasTexture=null);for(let e of Object.keys(this.images))this.removeImage(e);this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(let{ids:n,promiseResolve:u}of this.requestors)u(this._getImagesForIds(n));this.requestors=[]}}getImage(e){let n=this.images[e];if(n&&!n.data&&n.spriteData){let u=n.spriteData;n.data=new a.R({width:u.width,height:u.height},u.context.getImageData(u.x,u.y,u.width,u.height).data),n.spriteData=null}return n}addImage(e,n){if(this.images[e])throw new Error(`Image id ${e} already exist, use updateImage instead`);this._validate(e,n)&&(this.images[e]=n)}_validate(e,n){let u=!0,m=n.data||n.spriteData;return this._validateStretch(n.stretchX,m&&m.width)||(this.fire(new a.k(new Error(`Image "${e}" has invalid "stretchX" value`))),u=!1),this._validateStretch(n.stretchY,m&&m.height)||(this.fire(new a.k(new Error(`Image "${e}" has invalid "stretchY" value`))),u=!1),this._validateContent(n.content,n)||(this.fire(new a.k(new Error(`Image "${e}" has invalid "content" value`))),u=!1),u}_validateStretch(e,n){if(!e)return!0;let u=0;for(let m of e){if(m[0]<u||m[1]<m[0]||n<m[1])return!1;u=m[1]}return!0}_validateContent(e,n){if(!e)return!0;if(e.length!==4)return!1;let u=n.spriteData,m=u&&u.width||n.data.width,b=u&&u.height||n.data.height;return!(e[0]<0||m<e[0]||e[1]<0||b<e[1]||e[2]<0||m<e[2]||e[3]<0||b<e[3]||e[2]<e[0]||e[3]<e[1])}updateImage(e,n,u=!0){let m=this.getImage(e);if(u&&(m.data.width!==n.data.width||m.data.height!==n.data.height))throw new Error(`size mismatch between old image (${m.data.width}x${m.data.height}) and new image (${n.data.width}x${n.data.height}).`);n.version=m.version+1,this.images[e]=n,this.updatedImages[e]=!0}removeImage(e){let n=this.images[e];delete this.images[e],delete this.patterns[e],n.userImage&&n.userImage.onRemove&&n.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e){return new Promise(((n,u)=>{let m=!0;if(!this.isLoaded())for(let b of e)this.images[b]||(m=!1);this.isLoaded()||m?n(this._getImagesForIds(e)):this.requestors.push({ids:e,promiseResolve:n})}))}_getImagesForIds(e){let n={};for(let u of e){let m=this.getImage(u);m||(this.fire(new a.l("styleimagemissing",{id:u})),m=this.getImage(u)),m?n[u]={data:m.data.clone(),pixelRatio:m.pixelRatio,sdf:m.sdf,version:m.version,stretchX:m.stretchX,stretchY:m.stretchY,content:m.content,textFitWidth:m.textFitWidth,textFitHeight:m.textFitHeight,hasRenderCallback:!!(m.userImage&&m.userImage.render)}:a.w(`Image "${u}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return n}getPixelSize(){let{width:e,height:n}=this.atlasImage;return{width:e,height:n}}getPattern(e){let n=this.patterns[e],u=this.getImage(e);if(!u)return null;if(n&&n.position.version===u.version)return n.position;if(n)n.position.version=u.version;else{let m={w:u.data.width+2,h:u.data.height+2,x:0,y:0},b=new a.I(m,u);this.patterns[e]={bin:m,position:b}}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){let n=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.T(e,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}_updatePatternAtlas(){let e=[];for(let b in this.patterns)e.push(this.patterns[b].bin);let{w:n,h:u}=a.p(e),m=this.atlasImage;m.resize({width:n||1,height:u||1});for(let b in this.patterns){let{bin:w}=this.patterns[b],k=w.x+1,E=w.y+1,z=this.getImage(b).data,O=z.width,N=z.height;a.R.copy(z,m,{x:0,y:0},{x:k,y:E},{width:O,height:N}),a.R.copy(z,m,{x:0,y:N-1},{x:k,y:E-1},{width:O,height:1}),a.R.copy(z,m,{x:0,y:0},{x:k,y:E+N},{width:O,height:1}),a.R.copy(z,m,{x:O-1,y:0},{x:k-1,y:E},{width:1,height:N}),a.R.copy(z,m,{x:0,y:0},{x:k+O,y:E},{width:1,height:N})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(let n of e){if(this.callbackDispatchedThisFrame[n])continue;this.callbackDispatchedThisFrame[n]=!0;let u=this.getImage(n);u||a.w(`Image with ID: "${n}" was not found`),Tt(u)&&this.updateImage(n,u)}}cloneImages(){let e={};for(let n in this.images){let u=this.images[n];e[n]=Object.assign(Object.assign({},u),{data:u.data?u.data.clone():null})}return e}}let oi=1e20;function ni(_,e,n,u,m,b,w,k,E){for(let z=e;z<e+u;z++)di(_,n*b+z,b,m,w,k,E);for(let z=n;z<n+m;z++)di(_,z*b+e,1,u,w,k,E)}function di(_,e,n,u,m,b,w){b[0]=0,w[0]=-oi,w[1]=oi,m[0]=_[e];for(let k=1,E=0,z=0;k<u;k++){m[k]=_[e+k*n];let O=k*k;do{let N=b[E];z=(m[k]-m[N]+O-N*N)/(k-N)/2}while(z<=w[E]&&--E>-1);E++,b[E]=k,w[E]=z,w[E+1]=oi}for(let k=0,E=0;k<u;k++){for(;w[E+1]<k;)E++;let z=b[E],O=k-z;_[e+k*n]=m[z]+O*O}}let ai=a.v.layout_symbol["text-font"].default.join(",");class Ct{constructor(e,n,u){this.requestManager=e,this.localIdeographFontFamily=n,this.entries={},this.lang=u}setURL(e){this.url=e}getGlyphs(e){return a._(this,void 0,void 0,(function*(){let n=[];for(let b in e)for(let w of e[b])n.push(this._getAndCacheGlyphsPromise(b,w));let u=yield Promise.all(n),m={};for(let{stack:b,id:w,glyph:k}of u)m[b]||(m[b]={}),m[b][w]=k&&{id:k.id,bitmap:k.bitmap.clone(),metrics:k.metrics};return m}))}_getAndCacheGlyphsPromise(e,n){return a._(this,void 0,void 0,(function*(){let u=this.entries[e];u||(u=this.entries[e]={glyphs:{},requests:{},ranges:{}});let m=u.glyphs[n];return m!==void 0?{stack:e,id:n,glyph:m}:!this.url||this._charUsesLocalIdeographFontFamily(n)?(m=u.glyphs[n]=this._drawGlyph(u,e,n),{stack:e,id:n,glyph:m}):yield this._downloadAndCacheRangePromise(e,n)}))}_downloadAndCacheRangePromise(e,n){return a._(this,void 0,void 0,(function*(){let u=this.entries[e],m=Math.floor(n/256);if(u.ranges[m])return{stack:e,id:n,glyph:null};if(!u.requests[m]){let b=Ct.loadGlyphRange(e,m,this.url,this.requestManager);u.requests[m]=b}try{let b=yield u.requests[m];for(let w in b)u.glyphs[+w]=b[+w];return u.ranges[m]=!0,{stack:e,id:n,glyph:b[n]||null}}catch(b){let w=u.glyphs[n]=this._drawGlyph(u,e,n);return this._warnOnMissingGlyphRange(w,m,n,b),{stack:e,id:n,glyph:w}}}))}_warnOnMissingGlyphRange(e,n,u,m){let b=256*n,w=b+255,k=u.toString(16).padStart(4,"0").toUpperCase();a.w(`Unable to load glyph range ${n}, ${b}-${w}. Rendering codepoint U+${k} locally instead. ${m}`)}_charUsesLocalIdeographFontFamily(e){return!!this.localIdeographFontFamily&&a.q(e)}_drawGlyph(e,n,u){let m=n===ai&&this.localIdeographFontFamily!==""&&this._charUsesLocalIdeographFontFamily(u),b=m?"ideographTinySDF":"tinySDF";e[b]||(e[b]=this._createTinySDF(m?this.localIdeographFontFamily:n));let w=e[b].draw(String.fromCodePoint(u)),k=/^\p{gc=Cf}+$/u.test(String.fromCodePoint(u));return{id:u,bitmap:new a.r({width:w.width||60,height:w.height||60},w.data),metrics:{width:k?0:w.glyphWidth/2||24,height:w.glyphHeight/2||24,left:w.glyphLeft/2+.5||0,top:w.glyphTop/2-27.5||-8,advance:k?0:w.glyphAdvance/2||24,isDoubleResolution:!0}}}_createTinySDF(e){let n=e?e.split(","):[];n.push("sans-serif");let u=n.map((m=>/[-\w]+/.test(m)?m:`'${CSS.escape(m)}'`)).join(",");return new Ct.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:u,fontWeight:this._fontWeight(n[0]),fontStyle:this._fontStyle(n[0]),lang:this.lang})}_fontStyle(e){return/italic/i.test(e)?"italic":/oblique/i.test(e)?"oblique":"normal"}_fontWeight(e){let n={thin:100,hairline:100,"extra light":200,"ultra light":200,light:300,normal:400,regular:400,medium:500,semibold:600,demibold:600,bold:700,"extra bold":800,"ultra bold":800,black:900,heavy:900,"extra black":950,"ultra black":950},u;for(let[m,b]of Object.entries(n))new RegExp(`\\b${m}\\b`,"i").test(e)&&(u=`${b}`);return u}destroy(){for(let e in this.entries){let n=this.entries[e];n.tinySDF&&(n.tinySDF=null),n.ideographTinySDF&&(n.ideographTinySDF=null),n.glyphs={},n.requests={},n.ranges={}}this.entries={}}}Ct.loadGlyphRange=function(_,e,n,u){return a._(this,void 0,void 0,(function*(){let m=256*e,b=m+255,w=u.transformRequest(n.replace("{fontstack}",_).replace("{range}",`${m}-${b}`),"Glyphs"),k=yield a.n(w,new AbortController);if(!k||!k.data)throw new Error(`Could not load glyph range. range: ${e}, ${m}-${b}`);let E={};for(let z of a.o(k.data))E[z.id]=z;return E}))},Ct.TinySDF=class{constructor({fontSize:_=24,buffer:e=3,radius:n=8,cutoff:u=.25,fontFamily:m="sans-serif",fontWeight:b="normal",fontStyle:w="normal",lang:k=null}={}){this.buffer=e,this.cutoff=u,this.radius=n,this.lang=k;let E=this.size=_+4*e,z=this._createCanvas(E),O=this.ctx=z.getContext("2d",{willReadFrequently:!0});O.font=`${w} ${b} ${_}px ${m}`,O.textBaseline="alphabetic",O.textAlign="left",O.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Uint16Array(E)}_createCanvas(_){let e=document.createElement("canvas");return e.width=e.height=_,e}draw(_){let{width:e,actualBoundingBoxAscent:n,actualBoundingBoxDescent:u,actualBoundingBoxLeft:m,actualBoundingBoxRight:b}=this.ctx.measureText(_),w=Math.ceil(n),k=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(b-m))),E=Math.min(this.size-this.buffer,w+Math.ceil(u)),z=k+2*this.buffer,O=E+2*this.buffer,N=Math.max(z*O,0),j=new Uint8ClampedArray(N),Z={data:j,width:z,height:O,glyphWidth:k,glyphHeight:E,glyphTop:w,glyphLeft:0,glyphAdvance:e};if(k===0||E===0)return Z;let{ctx:J,buffer:se,gridInner:le,gridOuter:oe}=this;this.lang&&(J.lang=this.lang),J.clearRect(se,se,k,E),J.fillText(_,se,se+w);let de=J.getImageData(se,se,k,E);oe.fill(oi,0,N),le.fill(0,0,N);for(let ye=0;ye<E;ye++)for(let ue=0;ue<k;ue++){let me=de.data[4*(ye*k+ue)+3]/255;if(me===0)continue;let be=(ye+se)*z+ue+se;if(me===1)oe[be]=0,le[be]=oi;else{let fe=.5-me;oe[be]=fe>0?fe*fe:0,le[be]=fe<0?fe*fe:0}}ni(oe,0,0,z,O,z,this.f,this.v,this.z),ni(le,se,se,k,E,z,this.f,this.v,this.z);for(let ye=0;ye<N;ye++){let ue=Math.sqrt(oe[ye])-Math.sqrt(le[ye]);j[ye]=Math.round(255-255*(ue/this.radius+this.cutoff))}return Z}};class dt{constructor(){this.specification=a.u.light.position}possiblyEvaluate(e,n){return a.F(e.expression.evaluate(n))}interpolate(e,n,u){return{x:a.G.number(e.x,n.x,u),y:a.G.number(e.y,n.y,u),z:a.G.number(e.z,n.z,u)}}}let qt;class bt extends a.E{constructor(e){super(),qt=qt||new a.t({anchor:new a.D(a.u.light.anchor),position:new dt,color:new a.D(a.u.light.color),intensity:new a.D(a.u.light.intensity)}),this._transitionable=new a.x(qt,void 0),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e,n={}){if(!this._validate(a.y,e,n))for(let u in e){let m=e[u];u.endsWith(a.z)?this._transitionable.setTransition(u.slice(0,-a.z.length),m):this._transitionable.setValue(u,m)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,n,u){return(!u||u.validate!==!1)&&a.B(this,e.call(a.C,{value:n,style:{glyphs:!0,sprite:!0},styleSpec:a.u}))}}let Qt=new a.t({"sky-color":new a.D(a.u.sky["sky-color"]),"horizon-color":new a.D(a.u.sky["horizon-color"]),"fog-color":new a.D(a.u.sky["fog-color"]),"fog-ground-blend":new a.D(a.u.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.u.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.u.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.u.sky["atmosphere-blend"])});class Pi extends a.E{constructor(e){super(),this._transitionable=new a.x(Qt,void 0),this.setSky(e),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.H(0))}setSky(e,n={}){if(!this._validate(a.J,e,n)){e||(e={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(let u in e){let m=e[u];u.endsWith(a.z)?this._transitionable.setTransition(u.slice(0,-a.z.length),m):this._transitionable.setValue(u,m)}}}getSky(){return this._transitionable.serialize()}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,n,u={}){return(u==null?void 0:u.validate)!==!1&&a.B(this,e.call(a.C,a.e({value:n,style:{glyphs:!0,sprite:!0},styleSpec:a.u})))}calculateFogBlendOpacity(e){return e<60?0:e<70?(e-60)/10:1}}class xi{constructor(e,n){this.width=e,this.height=n,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(e,n){let u=e.join(",")+String(n);return this.dashEntry[u]||(this.dashEntry[u]=this.addDash(e,n)),this.dashEntry[u]}getDashRanges(e,n,u){let m=[],b=e.length%2==1?-e[e.length-1]*u:0,w=e[0]*u,k=!0;m.push({left:b,right:w,isDash:k,zeroLength:e[0]===0});let E=e[0];for(let z=1;z<e.length;z++){k=!k;let O=e[z];b=E*u,E+=O,w=E*u,m.push({left:b,right:w,isDash:k,zeroLength:O===0})}return m}addRoundDash(e,n,u){let m=n/2;for(let b=-u;b<=u;b++){let w=this.width*(this.nextRow+u+b),k=0,E=e[k];for(let z=0;z<this.width;z++){z/E.right>1&&(E=e[++k]);let O=Math.abs(z-E.left),N=Math.abs(z-E.right),j=Math.min(O,N),Z,J=b/u*(m+1);if(E.isDash){let se=m-Math.abs(J);Z=Math.sqrt(j*j+se*se)}else Z=m-Math.sqrt(j*j+J*J);this.data[w+z]=Math.max(0,Math.min(255,Z+128))}}}addRegularDash(e){for(let k=e.length-1;k>=0;--k){let E=e[k],z=e[k+1];E.zeroLength?e.splice(k,1):z&&z.isDash===E.isDash&&(z.left=E.left,e.splice(k,1))}let n=e[0],u=e[e.length-1];n.isDash===u.isDash&&(n.left=u.left-this.width,u.right=n.right+this.width);let m=this.width*this.nextRow,b=0,w=e[b];for(let k=0;k<this.width;k++){k/w.right>1&&(w=e[++b]);let E=Math.abs(k-w.left),z=Math.abs(k-w.right),O=Math.min(E,z);this.data[m+k]=Math.max(0,Math.min(255,(w.isDash?O:-O)+128))}}addDash(e,n){let u=n?7:0,m=2*u+1;if(this.nextRow+m>this.height)return a.w("LineAtlas out of space"),null;let b=0;for(let k=0;k<e.length;k++)b+=e[k];if(b!==0){let k=this.width/b,E=this.getDashRanges(e,this.width,k);n?this.addRoundDash(E,k,u):this.addRegularDash(E)}let w={y:this.nextRow+u,height:2*u,width:b};return this.nextRow+=m,this.dirty=!0,w}bind(e){let n=e.gl;this.texture?(n.bindTexture(n.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,n.texSubImage2D(n.TEXTURE_2D,0,0,0,this.width,this.height,n.ALPHA,n.UNSIGNED_BYTE,this.data))):(this.texture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.REPEAT),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.REPEAT),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texImage2D(n.TEXTURE_2D,0,n.ALPHA,this.width,this.height,0,n.ALPHA,n.UNSIGNED_BYTE,this.data))}}let hi="maplibre_preloaded_worker_pool";class Zt{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<Zt.workerCount;)this.workers.push(new Worker(a.c.WORKER_URL));return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],this.numActive()===0&&(this.workers.forEach((n=>{n.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[hi]}numActive(){return Object.keys(this.active).length}}let gt=Math.floor(ne.hardwareConcurrency/2),pr,yi;function gn(){return pr||(pr=new Zt),pr}Zt.workerCount=a.K(globalThis)?Math.max(Math.min(gt,3),1):1;class sn{constructor(e,n){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=n;let u=this.workerPool.acquire(n);for(let m=0;m<u.length;m++){let b=new a.L(u[m],n);b.name=`Worker ${m}`,this.actors.push(b)}if(!this.actors.length)throw new Error("No actors found")}broadcast(e,n){let u=[];for(let m of this.actors)u.push(m.sendAsync({type:e,data:n}));return Promise.all(u)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(e=!0){this.actors.forEach((n=>{n.remove()})),this.actors=[],e&&this.workerPool.release(this.id)}registerMessageHandler(e,n){for(let u of this.actors)u.registerMessageHandler(e,n)}unregisterMessageHandler(e){for(let n of this.actors)n.unregisterMessageHandler(e)}}function br(){return yi||(yi=new sn(gn(),a.M),yi.registerMessageHandler("GR",((_,e,n)=>a.m(e,n)))),yi}function cr(_,e){let n=a.N();return a.O(n,n,[1,1,0]),a.Q(n,n,[.5*_.width,.5*_.height,1]),_.calculatePosMatrix?a.S(n,n,_.calculatePosMatrix(e.toUnwrapped())):n}function Mn(_,e,n,u,m,b,w){var k;let E=(function(j,Z,J){if(j)for(let se of j){let le=Z[se];if(le&&le.source===J&&le.type==="fill-extrusion")return!0}else for(let se in Z){let le=Z[se];if(le.source===J&&le.type==="fill-extrusion")return!0}return!1})((k=m==null?void 0:m.layers)!==null&&k!==void 0?k:null,e,_.id),z=b.maxPitchScaleFactor(),O=_.tilesIn(u,z,E);O.sort(fr);let N=[];for(let j of O)N.push({wrappedTileID:j.tileID.wrapped().key,queryResults:j.tile.queryRenderedFeatures(e,n,_.getState(),j.queryGeometry,j.cameraQueryGeometry,j.scale,m,b,z,cr(b,j.tileID),w?(Z,J)=>w(j.tileID,Z,J):void 0)});return(function(j,Z){for(let J in j)for(let se of j[J])xr(se,Z);return j})((function(j){let Z={},J={};for(let se of j){let le=se.queryResults,oe=se.wrappedTileID,de=J[oe]=J[oe]||{};for(let ye in le){let ue=le[ye],me=de[ye]=de[ye]||{},be=Z[ye]=Z[ye]||[];for(let fe of ue)me[fe.featureIndex]||(me[fe.featureIndex]=!0,be.push(fe))}}return Z})(N),_)}function fr(_,e){let n=_.tileID,u=e.tileID;return n.overscaledZ-u.overscaledZ||n.canonical.y-u.canonical.y||n.wrap-u.wrap||n.canonical.x-u.canonical.x}function xr(_,e){let n=_.feature,u=e.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=u}function yn(_,e,n,u){return a._(this,void 0,void 0,(function*(){let m=_;if(_.url?m=(yield a.j(e.transformRequest(_.url,"Source"),n)).data:yield ne.frameAsync(n,u),!m)return null;let b=a.U(a.e(m,_),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in m&&m.vector_layers&&(b.vectorLayerIds=m.vector_layers.map((w=>w.id))),b}))}class zi{constructor(e,n){e&&(n?this.setSouthWest(e).setNorthEast(n):Array.isArray(e)&&(e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1])))}setNorthEast(e){return this._ne=e instanceof a.V?new a.V(e.lng,e.lat):a.V.convert(e),this}setSouthWest(e){return this._sw=e instanceof a.V?new a.V(e.lng,e.lat):a.V.convert(e),this}extend(e){let n=this._sw,u=this._ne,m,b;if(e instanceof a.V)m=e,b=e;else{if(!(e instanceof zi))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(zi.convert(e)):this.extend(a.V.convert(e)):e&&("lng"in e||"lon"in e)&&"lat"in e?this.extend(a.V.convert(e)):this;if(m=e._sw,b=e._ne,!m||!b)return this}return n||u?(n.lng=Math.min(m.lng,n.lng),n.lat=Math.min(m.lat,n.lat),u.lng=Math.max(b.lng,u.lng),u.lat=Math.max(b.lat,u.lat)):(this._sw=new a.V(m.lng,m.lat),this._ne=new a.V(b.lng,b.lat)),this}getCenter(){return new a.V((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.V(this.getWest(),this.getNorth())}getSouthEast(){return new a.V(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){let{lng:n,lat:u}=a.V.convert(e),m=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=u&&u<=this._ne.lat&&m}intersects(e){if(!((e=zi.convert(e)).getNorth()>=this.getSouth()&&e.getSouth()<=this.getNorth()))return!1;let n=Math.abs(this.getEast()-this.getWest()),u=Math.abs(e.getEast()-e.getWest());if(n>=360||u>=360)return!0;let m=a.W(this.getWest(),-180,180),b=a.W(this.getEast(),-180,180),w=a.W(e.getWest(),-180,180),k=a.W(e.getEast(),-180,180),E=m>=b,z=w>=k;return!(!E||!z)||(E?k>=m||w<=b:z?b>=w||m<=k:w<=b&&k>=m)}static convert(e){return e instanceof zi?e:e&&new zi(e)}static fromLngLat(e,n=0){let u=360*n/40075017,m=u/Math.cos(Math.PI/180*e.lat);return new zi(new a.V(e.lng-m,e.lat-u),new a.V(e.lng+m,e.lat+u))}adjustAntiMeridian(){let e=new a.V(this._sw.lng,this._sw.lat),n=new a.V(this._ne.lng,this._ne.lat);return new zi(e,e.lng>n.lng?new a.V(n.lng+360,n.lat):n)}}class _n{constructor(e,n,u){this.bounds=zi.convert(this.validateBounds(e)),this.minzoom=n||0,this.maxzoom=u||24}validateBounds(e){return Array.isArray(e)&&e.length===4?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(e){let n=Math.pow(2,e.z),u=Math.floor(a.Y(this.bounds.getWest())*n),m=Math.floor(a.X(this.bounds.getNorth())*n),b=Math.ceil(a.Y(this.bounds.getEast())*n),w=Math.ceil(a.X(this.bounds.getSouth())*n);return e.x>=u&&e.x<b&&e.y>=m&&e.y<w}}class xs extends a.E{constructor(e,n,u,m){if(super(),this.id=e,this.dispatcher=u,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.U(n,["url","scheme","tileSize","promoteId","encoding"])),this._options=a.e({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m)}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let e=yield yn(this._options,this.map._requestManager,this._tileJSONRequest,this.map._ownerWindow);this._tileJSONRequest=null,this._loaded=!0,this.map.style.tileManagers[this.id].clearTiles(),e&&(a.e(this,e),e.bounds&&(this.tileBounds=new _n(e.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this._loaded=!0,a.Z(e)||this.fire(new a.k(e))}}))}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}setSourceProperty(e){this._tileJSONRequest&&this._tileJSONRequest.abort(),e(),this.load()}setTiles(e){return this.setSourceProperty((()=>{this._options.tiles=e})),this}setUrl(e){return this.setSourceProperty((()=>{this.url=e,this._options.url=e})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(e){return a._(this,void 0,void 0,(function*(){let n=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),u={request:this.map._requestManager.transformRequest(n,"Tile"),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,encoding:this.encoding,overzoomParameters:this._getOverzoomParameters(e)};u.request.collectResourceTiming=this._collectResourceTiming;let m="RT";if(e.actor&&e.state!=="expired"){if(e.state==="loading")return new Promise(((b,w)=>{e.reloadPromise={resolve:b,reject:w}}))}else e.actor=this.dispatcher.getActor(),m="LT";e.abortController=new AbortController;try{let b=yield e.actor.sendAsync({type:m,data:u},e.abortController);if(delete e.abortController,e.aborted)return;this._afterTileLoadWorkerResponse(e,b)}catch(b){if(delete e.abortController,e.aborted)return;if(b&&b.status!==404)throw b;this._afterTileLoadWorkerResponse(e,null)}}))}_getOverzoomParameters(e){if(e.tileID.canonical.z<=this.maxzoom||this.map._zoomLevelsToOverscale===void 0)return;let n=e.tileID.scaledTo(this.maxzoom).canonical,u=n.url(this.tiles,this.map.getPixelRatio(),this.scheme);return{maxZoomTileID:n,overzoomRequest:this.map._requestManager.transformRequest(u,"Tile")}}_afterTileLoadWorkerResponse(e,n){if(n&&n.resourceTiming&&(e.resourceTiming=n.resourceTiming),n&&this.map._refreshExpiredTiles&&e.setExpiryData(n),e.loadVectorData(n,this.map.painter),e.reloadPromise){let u=e.reloadPromise;e.reloadPromise=null,this.loadTile(e).then(u.resolve).catch(u.reject)}}abortTile(e){return a._(this,void 0,void 0,(function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.actor&&(yield e.actor.sendAsync({type:"AT",data:{uid:e.uid,type:this.type,source:this.id}}))}))}unloadTile(e){return a._(this,void 0,void 0,(function*(){e.unloadVectorData(),e.actor&&(yield e.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class Ya extends a.E{constructor(e,n,u,m){super(),this.id=e,this.dispatcher=u,this.setEventedParent(m),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},n),a.e(this,a.U(n,["url","scheme","tileSize"]))}load(){return a._(this,arguments,void 0,(function*(e=!1){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let n=yield yn(this._options,this.map._requestManager,this._tileJSONRequest,this.map._ownerWindow);this._tileJSONRequest=null,this._loaded=!0,n&&(a.e(this,n),n.bounds&&(this.tileBounds=new _n(n.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:e})))}catch(n){this._tileJSONRequest=null,this._loaded=!0,a.Z(n)||this.fire(new a.k(n))}}))}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(e){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),e(),this.load(!0)}setTiles(e){return this.setSourceProperty((()=>{this._options.tiles=e})),this}setUrl(e){return this.setSourceProperty((()=>{this.url=e,this._options.url=e})),this}serialize(){return a.e({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(e){return a._(this,void 0,void 0,(function*(){let n=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);e.abortController=new AbortController;try{let u=yield Pt.getImage(this.map._requestManager.transformRequest(n,"Tile"),e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(u&&u.data){this.map._refreshExpiredTiles&&(u.cacheControl||u.expires)&&e.setExpiryData({cacheControl:u.cacheControl,expires:u.expires});let m=this.map.painter.context,b=m.gl,w=u.data;e.texture=this.map.painter.getTileTexture(w.width),e.texture?e.texture.update(w,{useMipmap:!0}):(e.texture=new a.T(m,w,b.RGBA,{useMipmap:!0}),e.texture.bind(b.LINEAR,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST)),e.state="loaded"}}catch(u){if(delete e.abortController,e.aborted)e.state="unloaded";else if(u)throw e.state="errored",u}}))}abortTile(e){return a._(this,void 0,void 0,(function*(){e.abortController&&(e.abortController.abort(),delete e.abortController)}))}unloadTile(e){return a._(this,void 0,void 0,(function*(){e.texture&&this.map.painter.saveTileTexture(e.texture)}))}hasTransition(){return!1}}class vn extends Ya{constructor(e,n,u,m){super(e,n,u,m),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},n),this.encoding=n.encoding||"mapbox",this.redFactor=n.redFactor,this.greenFactor=n.greenFactor,this.blueFactor=n.blueFactor,this.baseShift=n.baseShift}loadTile(e){return a._(this,void 0,void 0,(function*(){let n=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),u=this.map._requestManager.transformRequest(n,"Tile");e.neighboringTiles=this._getNeighboringTiles(e.tileID),e.abortController=new AbortController;try{let m=yield Pt.getImage(u,e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(m&&m.data){let b=m.data;this.map._refreshExpiredTiles&&(m.cacheControl||m.expires)&&e.setExpiryData({cacheControl:m.cacheControl,expires:m.expires});let w=a.b(b)&&a.$()?b:yield this.readImageNow(b),k={type:this.type,uid:e.uid,source:this.id,rawImageData:w,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!e.actor||e.state==="expired"){e.actor=this.dispatcher.getActor();let E=yield e.actor.sendAsync({type:"LDT",data:k});e.dem=E,e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0,e.state="loaded"}}}catch(m){if(delete e.abortController,e.aborted)e.state="unloaded";else if(m)throw e.state="errored",m}}))}readImageNow(e){return a._(this,void 0,void 0,(function*(){if(typeof VideoFrame!="undefined"&&a.a0()){let n=e.width+2,u=e.height+2;try{return new a.R({width:n,height:u},yield a.a1(e,-1,-1,n,u))}catch(m){}}return ne.getImageData(e,1)}))}_getNeighboringTiles(e){let n=e.canonical,u=Math.pow(2,n.z),m=(n.x-1+u)%u,b=n.x===0?e.wrap-1:e.wrap,w=(n.x+1+u)%u,k=n.x+1===u?e.wrap+1:e.wrap,E={};return E[new a.a2(e.overscaledZ,b,n.z,m,n.y).key]={backfilled:!1},E[new a.a2(e.overscaledZ,k,n.z,w,n.y).key]={backfilled:!1},n.y>0&&(E[new a.a2(e.overscaledZ,b,n.z,m,n.y-1).key]={backfilled:!1},E[new a.a2(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},E[new a.a2(e.overscaledZ,k,n.z,w,n.y-1).key]={backfilled:!1}),n.y+1<u&&(E[new a.a2(e.overscaledZ,b,n.z,m,n.y+1).key]={backfilled:!1},E[new a.a2(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},E[new a.a2(e.overscaledZ,k,n.z,w,n.y+1).key]={backfilled:!1}),E}unloadTile(e){return a._(this,void 0,void 0,(function*(){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",e.actor&&(yield e.actor.sendAsync({type:"RDT",data:{type:this.type,uid:e.uid,source:this.id}}))}))}}function Vn(_){return _.type==="GeometryCollection"?_.geometries.map((e=>e.coordinates)).flat(1/0):_.coordinates.flat(1/0)}function Ea(_){let e=new zi,n;switch(_.type){case"FeatureCollection":n=_.features.map((u=>Vn(u.geometry))).flat(1/0);break;case"Feature":n=Vn(_.geometry);break;default:n=Vn(_)}if(n.length==0)return e;for(let u=0;u<n.length-1;u+=2)e.extend([n[u],n[u+1]]);return e}class ws extends a.E{constructor(e,n,u,m){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:n.data},this.actor=u.getActor(),this.setEventedParent(m),this._data=typeof n.data=="string"?{url:n.data}:{geojson:n.data},this._options=a.e({},n),this._collectResourceTiming=n.collectResourceTiming,n.maxzoom!==void 0&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution),this.promoteId=n.promoteId,n.clusterMaxZoom!==void 0&&this.maxzoom<=n.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${n.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(n.buffer!==void 0?n.buffer:128),tolerance:this._pixelsToTileUnits(n.tolerance!==void 0?n.tolerance:.375),extent:a.a5,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(n.clusterMaxZoom),minPoints:Math.max(2,n.clusterMinPoints||2),extent:a.a5,radius:this._pixelsToTileUnits(n.clusterRadius||50),log:!1,generateId:n.generateId||!1},clusterProperties:n.clusterProperties,filter:n.filter},n.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_hasPendingWorkerUpdate(){return this._pendingWorkerUpdate.data!==void 0||this._pendingWorkerUpdate.diff!==void 0||this._pendingWorkerUpdate.optionsChanged}_pixelsToTileUnits(e){return e*(a.a5/this.tileSize)}_getClusterMaxZoom(e){let n=e?Math.round(e):this.maxzoom-1;return Number.isInteger(e)||e===void 0||a.w(`Integer expected for option 'clusterMaxZoom': provided value "${e}" rounded to "${n}"`),n}load(){return a._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(e){this.map=e,this.load()}setData(e,n){this._data=typeof e=="string"?{url:e}:{geojson:e},this._pendingWorkerUpdate={data:e};let u=this._updateWorkerData();return n?u:this}updateData(e,n){this._pendingWorkerUpdate.diff=a.a6(this._pendingWorkerUpdate.diff,e);let u=this._updateWorkerData();return n?u:this}getData(){return a._(this,void 0,void 0,(function*(){let e=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:e})}))}getBounds(){return a._(this,void 0,void 0,(function*(){return Ea(yield this.getData())}))}setClusterOptions(e){return this.workerOptions.cluster=e.cluster,e.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(e.clusterRadius)),e.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(e.clusterMaxZoom)),this._pendingWorkerUpdate.optionsChanged=!0,this._updateWorkerData(),this}getClusterExpansionZoom(e){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:e,source:this.id}})}getClusterChildren(e){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:e,source:this.id}})}getClusterLeaves(e,n,u){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:e,limit:n,offset:u}})}_updateWorkerData(){return a._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;if(!this._hasPendingWorkerUpdate())return void a.w(`No pending worker updates for GeoJSONSource ${this.id}.`);let{data:e,diff:n}=this._pendingWorkerUpdate,u=this._getLoadGeoJSONParameters(e,n);e!==void 0?this._pendingWorkerUpdate.data=void 0:n&&(this._pendingWorkerUpdate.diff=void 0),this._pendingWorkerUpdate.optionsChanged=void 0,yield this._dispatchWorkerUpdate(u)}))}_getLoadGeoJSONParameters(e,n){let u=a.e({type:this.type},this.workerOptions);return typeof e=="string"?(u.request=this.map._requestManager.transformRequest(ne.resolveURL(e),"Source"),u.request.collectResourceTiming=this._collectResourceTiming,u):e!==void 0?(u.data=e,u):(n&&(u.dataDiff=n),u)}_dispatchWorkerUpdate(e){return a._(this,void 0,void 0,(function*(){this._isUpdatingWorker=!0,this.fire(new a.l("dataloading",{dataType:"source"}));try{let n=yield this.actor.sendAsync({type:"LD",data:e});if(this._isUpdatingWorker=!1,this._removed||n.abandoned)return void this.fire(new a.l("dataabort",{dataType:"source"}));n.data&&(this._data={geojson:n.data});let u=this._applyDiffToSource(e.dataDiff),m=this._getShouldReloadTileOptions(u),b={dataType:"source"};this._applyResourceTiming(b,n),this.fire(new a.l("data",Object.assign(Object.assign({},b),{sourceDataType:"metadata"}))),this.fire(new a.l("data",Object.assign(Object.assign({},b),{sourceDataType:"content",shouldReloadTileOptions:m})))}catch(n){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new a.l("dataabort",{dataType:"source"}));this.fire(new a.k(n))}finally{this._hasPendingWorkerUpdate()&&this._updateWorkerData()}}))}_applyResourceTiming(e,n){var u;if(!this._collectResourceTiming)return;let m=(u=n.resourceTiming)===null||u===void 0?void 0:u[this.id];if(!m)return;let b=m.slice(0);b!=null&&b.length&&a.e(e,{resourceTiming:b})}_applyDiffToSource(e){if(!e)return;let n=typeof this.promoteId=="string"?this.promoteId:void 0;if(!this._data.url&&!this._data.updateable){let m=a.a7(this._data.geojson,n);if(!m)throw new Error(`GeoJSONSource "${this.id}": GeoJSON data is not compatible with updateData`);this._data={updateable:m}}if(!this._data.updateable)return;let u=a.a8(this._data.updateable,e,n);return e.removeAll||this._options.cluster?void 0:u}_getShouldReloadTileOptions(e){if(e)return{affectedBounds:e.filter(Boolean).map((n=>Ea(n)))}}shouldReloadTile(e,{affectedBounds:n}){if(e.state==="loading")return!0;if(e.state==="unloaded")return!1;let{buffer:u,extent:m}=this.workerOptions.geojsonVtOptions,b=(function({x:w,y:k,z:E},z=0){let O=a.a3((w-z)/Math.pow(2,E)),N=a.a4((k+1+z)/Math.pow(2,E)),j=a.a3((w+1+z)/Math.pow(2,E)),Z=a.a4((k-z)/Math.pow(2,E));return new zi([O,N],[j,Z])})(e.tileID.canonical,u/m);for(let w of n)if(b.intersects(w))return!0;return!1}loaded(){return!this._isUpdatingWorker&&!this._hasPendingWorkerUpdate()}loadTile(e){return a._(this,void 0,void 0,(function*(){let n=e.actor?"RT":"LT";e.actor=this.actor;let u={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};e.abortController=new AbortController;let m=yield this.actor.sendAsync({type:n,data:u},e.abortController);delete e.abortController,e.unloadVectorData(),e.aborted||e.loadVectorData(m,this.map.painter,n==="RT")}))}abortTile(e){return a._(this,void 0,void 0,(function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.aborted=!0}))}unloadTile(e){return a._(this,void 0,void 0,(function*(){e.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data.updateable?{type:"FeatureCollection",features:Array.from(this._data.updateable.values())}:this._data.url||this._data.geojson})}hasTransition(){return!1}}class on extends a.E{constructor(e,n,u,m){super(),this.flippedWindingOrder=!1,this.id=e,this.dispatcher=u,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(m),this.options=n}load(e){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{let n=yield Pt.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,n&&n.data&&(this.image=n.data,e&&(this.coordinates=e),this._finishLoading())}catch(n){this._request=null,this._loaded=!0,a.Z(n)||this.fire(new a.k(n))}}))}loaded(){return this._loaded}updateImage(e){return e.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=e.url,this.load(e.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(e){this.coordinates=e;let n=e.map(a.a9.fromLngLat);var u;return this.tileID=(function(m){let b=a.aa.fromPoints(m),w=b.width(),k=b.height(),E=Math.max(w,k),z=Math.max(0,Math.floor(-Math.log(E)/Math.LN2)),O=Math.pow(2,z);return new a.ac(z,Math.floor((b.minX+b.maxX)/2*O),Math.floor((b.minY+b.maxY)/2*O))})(n),this.terrainTileRanges=this._getOverlappingTileRanges(n),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=n.map((m=>this.tileID.getTilePoint(m)._round())),this.flippedWindingOrder=((u=this.tileCoords)[1].x-u[0].x)*(u[2].y-u[0].y)-(u[1].y-u[0].y)*(u[2].x-u[0].x)<0,this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;let e=this.map.painter.context,n=e.gl;this.texture||(this.texture=new a.T(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));let u=!1;for(let m in this.tiles){let b=this.tiles[m];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,u=!0)}u&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(e){return a._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={}):e.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(e){let{minX:n,minY:u,maxX:m,maxY:b}=a.aa.fromPoints(e),w={};for(let k=0;k<=a.ab;k++){let E=Math.pow(2,k),z=Math.floor(n*E),O=Math.floor(u*E),N=Math.floor(m*E),j=Math.floor(b*E),Z=(z%E+E)%E,J=N%E,se=Math.floor(z/E),le=Math.floor(N/E);w[k]={minWrap:se,maxWrap:le,minTileXWrapped:Z,maxTileXWrapped:J,minTileY:O,maxTileY:j}}return w}}class Wn extends on{constructor(e,n,u,m){super(e,n,u,m),this.roundZoom=!0,this.type="video",this.options=n}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1;let e=this.options;this.urls=[];for(let n of e.urls)this.urls.push(this.map._requestManager.transformRequest(n,"Source").url);try{let n=yield a.ad(this.urls);if(this._loaded=!0,!n)return;this.video=n,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(n){this.fire(new a.k(n))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){let n=this.video.seekable;e<n.start(0)||e>n.end(0)?this.fire(new a.k(new a.ae(`sources.${this.id}`,null,`Playback for this video can be set only between the ${n.start(0)} and ${n.end(0)}-second mark.`))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;let e=this.map.painter.context,n=e.gl;this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new a.T(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));let u=!1;for(let m in this.tiles){let b=this.tiles[m];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,u=!0)}u&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Ss extends on{constructor(e,n,u,m){super(e,n,u,m),n.coordinates?Array.isArray(n.coordinates)&&n.coordinates.length===4&&!n.coordinates.some((b=>!Array.isArray(b)||b.length!==2||b.some((w=>typeof w!="number"))))||this.fire(new a.k(new a.ae(`sources.${e}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.k(new a.ae(`sources.${e}`,null,'missing required property "coordinates"'))),n.animate&&typeof n.animate!="boolean"&&this.fire(new a.k(new a.ae(`sources.${e}`,null,'optional "animate" property must be a boolean value'))),n.canvas?typeof n.canvas=="string"||n.canvas instanceof HTMLCanvasElement||this.fire(new a.k(new a.ae(`sources.${e}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.k(new a.ae(`sources.${e}`,null,'missing required property "canvas"'))),this.options=n,this.animate=n.animate===void 0||n.animate}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;let n=this.map.painter.context,u=n.gl;this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):(this.texture=new a.T(n,this.canvas,u.RGBA,{premultiply:!0}),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let m=!1;for(let b in this.tiles){let w=this.tiles[b];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,m=!0)}m&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",animate:this.animate,canvas:this.options.canvas,coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(let e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}}let Xa={},Ts=_=>{switch(_){case"geojson":return ws;case"image":return on;case"raster":return Ya;case"raster-dem":return vn;case"vector":return xs;case"video":return Wn;case"canvas":return Ss}return Xa[_]},ke="RTLPluginLoaded";class $ extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=br()}_syncState(e){return this.status=e,this.dispatcher.broadcast("SRPS",{pluginStatus:e,pluginURL:this.url}).catch((n=>{throw this.status="error",n}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(e){return a._(this,arguments,void 0,(function*(n,u=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=ne.resolveURL(n),!this.url)throw new Error(`requested url ${n} is invalid`);if(this.status==="unavailable"){if(!u)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return a._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.l(ke))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let X=null;function Q(){return X||(X=new $),X}var pe,xe;(function(_){_[_.Base=0]="Base",_[_.Parent=1]="Parent"})(pe||(pe={})),(function(_){_[_.Departing=0]="Departing",_[_.Incoming=1]="Incoming"})(xe||(xe={}));class Me{constructor(e,n){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=e,this.uid=a.af(),this.uses=0,this.tileSize=n,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(e){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(e||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:e,fadingDirection:n,fadingParentID:u,fadeEndTime:m}){this.resetFadeLogic(),this.fadingRole=e,this.fadingDirection=n,this.fadingParentID=u,this.fadeEndTime=m}setSelfFadeLogic(e){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=e}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=ie(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(e){this.demTexture&&e.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(e,n,u){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData,this.latestFeatureIndex.encoding=e.encoding):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData,this.latestFeatureIndex.encoding=this.latestEncoding)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=(function(m,b){let w={};if(!b)return w;for(let k of m){let E=k.layerIds.map((z=>b.getLayer(z))).filter(Boolean);if(E.length!==0){k.layers=E,k.stateDependentLayerIds&&(k.stateDependentLayers=k.stateDependentLayerIds.map((z=>E.filter((O=>O.id===z))[0])));for(let z of E)w[z.id]=k}}return w})(e.buckets,n==null?void 0:n.style),this.hasSymbolBuckets=!1;for(let m in this.buckets){let b=this.buckets[m];if(b instanceof a.ah){if(this.hasSymbolBuckets=!0,!u)break;b.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(let m in this.buckets){let b=this.buckets[m];if(b instanceof a.ah&&b.hasRTLText){this.hasRTLText=!0,Q().lazyLoad();break}}this.queryPadding=0;for(let m in this.buckets){let b=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,n.style.getLayer(m).queryRadius(b))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),this.dashPositions=e.dashPositions}else this.collisionBoxArray=new a.ag}unloadVectorData(){for(let e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(e){return this.buckets[e.id]}upload(e){for(let u in this.buckets){let m=this.buckets[u];m.uploadPending()&&m.upload(e)}let n=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new a.T(e,this.imageAtlas.image,n.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new a.T(e,this.glyphAtlasImage,n.ALPHA),this.glyphAtlasImage=null)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,n,u,m,b,w,k,E,z,O,N){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:m,cameraQueryGeometry:b,scale:w,tileSize:this.tileSize,pixelPosMatrix:O,transform:E,params:k,queryPadding:this.queryPadding*z,getElevation:N},e,n,u):{}}querySourceFeatures(e,n){let u=this.latestFeatureIndex;if(!u||!u.rawTileData)return;let m=u.loadVTLayers(),b=n&&n.sourceLayer?n.sourceLayer:"",w=m[a.ai]||m[b];if(!w)return;let k=a.aj(n==null?void 0:n.filter,n==null?void 0:n.globalState),{z:E,x:z,y:O}=this.tileID.canonical,N={z:E,x:z,y:O};for(let j=0;j<w.length;j++){let Z=w.feature(j);if(k.needGeometry){let le=a.ak(Z,!0);if(!k.filter(new a.H(this.tileID.overscaledZ),le,this.tileID.canonical))continue}else if(!k.filter(new a.H(this.tileID.overscaledZ),Z))continue;let J=u.getId(Z,b),se=new a.al(Z,E,z,O,J);se.tile=N,e.push(se)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){let n=this.expirationTime;if(e.cacheControl){let u=a.am(e.cacheControl);u["max-age"]&&(this.expirationTime=Date.now()+1e3*u["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){let u=Date.now(),m=!1;if(this.expirationTime>u)m=!1;else if(n)if(this.expirationTime<n)m=!0;else{let b=this.expirationTime-n;b?this.expirationTime=u+Math.max(b,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(e,n){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(e).length===0)return;let u=this.latestFeatureIndex.loadVTLayers();for(let m in this.buckets){if(!n.style.hasLayer(m))continue;let b=this.buckets[m],w=b.layers[0].sourceLayer||a.ai,k=u[w],E=e[w];if(!k||!E||Object.keys(E).length===0)continue;b.update(E,k,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});let z=n&&n.style&&n.style.getLayer(m);z&&(this.queryPadding=Math.max(this.queryPadding,z.queryRadius(b)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ie()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(e){this.symbolFadeHoldUntil=ie()+e}setDependencies(e,n){let u={};for(let m of n)u[m]=!0;this.dependencies[e]=u}hasDependency(e,n){for(let u of e){let m=this.dependencies[u];if(m){for(let b of n)if(m[b])return!0}}return!1}}class Le{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,n,u){let m=String(n);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][m]=this.stateChanges[e][m]||{},a.e(this.stateChanges[e][m],u),this.deletedStates[e]===null){this.deletedStates[e]={};for(let b in this.state[e])b!==m&&(this.deletedStates[e][b]=null)}else if(this.deletedStates[e]&&this.deletedStates[e][m]===null){this.deletedStates[e][m]={};for(let b in this.state[e][m])u[b]||(this.deletedStates[e][m][b]=null)}else for(let b in u)this.deletedStates[e]&&this.deletedStates[e][m]&&this.deletedStates[e][m][b]===null&&delete this.deletedStates[e][m][b]}removeFeatureState(e,n,u){if(this.deletedStates[e]===null)return;let m=String(n);if(this.deletedStates[e]=this.deletedStates[e]||{},u&&n!==void 0)this.deletedStates[e][m]!==null&&(this.deletedStates[e][m]=this.deletedStates[e][m]||{},this.deletedStates[e][m][u]=null);else if(n!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][m])for(u in this.deletedStates[e][m]={},this.stateChanges[e][m])this.deletedStates[e][m][u]=null;else this.deletedStates[e][m]=null;else this.deletedStates[e]=null}getState(e,n){let u=String(n),m=a.e({},(this.state[e]||{})[u],(this.stateChanges[e]||{})[u]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){let b=this.deletedStates[e][n];if(b===null)return{};for(let w in b)delete m[w]}return m}initializeTileState(e,n){e.setFeatureState(this.state,n)}coalesceChanges(e,n){let u={};for(let m in this.stateChanges){this.state[m]=this.state[m]||{};let b={};for(let w in this.stateChanges[m])this.state[m][w]||(this.state[m][w]={}),a.e(this.state[m][w],this.stateChanges[m][w]),b[w]=this.state[m][w];u[m]=b}for(let m in this.deletedStates){this.state[m]=this.state[m]||{};let b={};if(this.deletedStates[m]===null)for(let w in this.state[m])b[w]={},this.state[m][w]={};else for(let w in this.deletedStates[m]){if(this.deletedStates[m][w]===null)this.state[m][w]={};else for(let k of Object.keys(this.deletedStates[m][w]))delete this.state[m][w][k];b[w]=this.state[m][w]}u[m]=u[m]||{},a.e(u[m],b)}this.stateChanges={},this.deletedStates={},Object.keys(u).length!==0&&e.setFeatureState(u,n)}}let we=89.25;function Ee(_,e){let n=a.an(e.lat,-a.ao,a.ao);return new a.P(a.Y(e.lng)*_,a.X(n)*_)}function Ze(_,e){return new a.a9(e.x/_,e.y/_).toLngLat()}function Ne(_){return _.cameraToCenterDistance*Math.min(.85*Math.tan(a.ap(90-_.pitch)),Math.tan(a.ap(we-_.pitch)))}function Xe(_,e){let n=_.canonical,u=e/a.aq(n.z),m=n.x+Math.pow(2,n.z)*_.wrap,b=a.ar(new Float64Array(16));return a.O(b,b,[m*u,n.y*u,0]),a.Q(b,b,[u/a.a5,u/a.a5,1]),b}function Ce(_,e,n,u,m){let b=a.a9.fromLngLat(_,e),w=m*a.as(1,_.lat),{x:k,y:E,z}=Mt(n,u);return new a.a9(b.x+w*-k,b.y+w*-E,b.z+w*-z)}function Mt(_,e){let n=a.ap(_),u=a.ap(e),m=Math.cos(-n),b=Math.sin(n);return{x:b*Math.sin(u),y:-b*Math.cos(u),z:m}}function wi(_,e,n){let u=e.intersectsFrustum(_);if(!n||u===0)return u;let m=e.intersectsPlane(n);return m===0?0:u===2&&m===2?2:1}function pt(_,e,n){let u=0,m=(n-e)/10;for(let b=0;b<10;b++)u+=m*Math.pow(Math.cos(e+(b+.5)/10*(n-e)),_);return u}function yt(_,e){return function(n,u,m,b,w){let k=2*((_-1)/a.at(Math.cos(a.ap(we-w))/Math.cos(a.ap(we)))-1),E=Math.acos(m/b),z=2*pt(k-1,0,a.ap(w/2)),O=Math.min(a.ap(we),E+a.ap(w/2)),N=pt(k-1,Math.min(O,E-a.ap(w/2)),O),j=Math.atan(u/m),Z=Math.hypot(u,m),J=n;return J+=a.at(b/Z/Math.max(.5,Math.cos(a.ap(w/2)))),J+=k*a.at(Math.cos(j))/2,J-=a.at(Math.max(1,N/z/e))/2,J}}let Lt=yt(9.314,3);function pi(_,e){let n=(e.roundZoom?Math.round:Math.floor)(_.zoom+a.at(_.tileSize/e.tileSize));return Math.max(0,n)}function Ei(_,e){let n=_.getCameraFrustum(),u=_.getClippingPlane(),m=_.screenPointToMercatorCoordinate(_.getCameraPoint()),b=a.a9.fromLngLat(_.center,_.elevation);m.z=b.z+Math.cos(_.pitchInRadians)*_.cameraToCenterDistance/_.worldSize;let w=_.getCoveringTilesDetailsProvider(),k=w.allowVariableZoom(_,e),E=pi(_,e),z=e.minzoom||0,O=e.maxzoom!==void 0?e.maxzoom:_.maxZoom,N=Math.min(Math.max(0,E),O),j=Math.pow(2,N),Z=[j*m.x,j*m.y,0],J=[j*b.x,j*b.y,0],se=Math.hypot(b.x-m.x,b.y-m.y),le=Math.abs(b.z-m.z),oe=Math.hypot(se,le),de=me=>({zoom:0,x:0,y:0,wrap:me,fullyVisible:!1}),ye=[],ue=[];if(_.renderWorldCopies&&w.allowWorldCopies())for(let me=1;me<=3;me++)ye.push(de(-me)),ye.push(de(me));for(ye.push(de(0));ye.length>0;){let me=ye.pop(),be=me.x,fe=me.y,Te=me.fullyVisible,Fe={x:be,y:fe,z:me.zoom},Oe=w.getTileBoundingVolume(Fe,me.wrap,_.elevation,e);if(!Te){let et=wi(n,Oe,u);if(et===0)continue;Te=et===2}let Re=w.distanceToTile2d(m.x,m.y,Fe,Oe),Be=E;k&&(Be=(e.calculateTileZoom||Lt)(_.zoom+a.at(_.tileSize/e.tileSize),Re,le,oe,_.fov)),Be=(e.roundZoom?Math.round:Math.floor)(Be),Be=Math.max(0,Be);let Je=Math.min(Be,O);if(me.wrap=w.getWrap(b,Fe,me.wrap),me.zoom>=Je){if(me.zoom<z)continue;let et=N-me.zoom,$e=Z[0]-.5-(be<<et),ot=Z[1]-.5-(fe<<et),Rt=e.reparseOverscaled?Math.max(me.zoom,Be):me.zoom;ue.push({tileID:new a.a2(me.zoom===O?Rt:me.zoom,me.wrap,me.zoom,be,fe),distanceSq:a.au([J[0]-.5-be,J[1]-.5-fe]),tileDistanceToCamera:Math.sqrt($e*$e+ot*ot)})}else for(let et=0;et<4;et++)ye.push({zoom:me.zoom+1,x:(be<<1)+et%2,y:(fe<<1)+(et>>1),wrap:me.wrap,fullyVisible:Te})}return ue.sort(((me,be)=>me.distanceSq-be.distanceSq)).map((me=>me.tileID))}let mr=a.aa.fromPoints([new a.P(0,0),new a.P(a.a5,a.a5)]);function gr(_){return _==="raster"||_==="image"||_==="video"}function Vi(_,e,n,u,m,b,w){if(!e.hasData())return!1;let{tileID:k,fadingRole:E,fadingDirection:z,fadingParentID:O}=e;if(E===pe.Base&&z===xe.Incoming&&O)return n[O.key]=O,!0;let N=Math.max(k.overscaledZ-m,b);for(let j=k.overscaledZ-1;j>=N;j--){let Z=k.scaledTo(j),J=_.getLoadedTile(Z);if(J)return e.setCrossFadeLogic({fadingRole:pe.Base,fadingDirection:xe.Incoming,fadingParentID:J.tileID,fadeEndTime:u+w}),J.setCrossFadeLogic({fadingRole:pe.Parent,fadingDirection:xe.Departing,fadeEndTime:u+w}),n[Z.key]=Z,!0}return!1}function Si(_,e,n,u,m,b){if(!e.hasData())return!1;let w=e.tileID.children(m),k=Ae(_,e,w,n,u,m,b);if(k)return!0;for(let E of w)Ae(_,e,E.children(m),n,u,m,b)&&(k=!0);return k}function Ae(_,e,n,u,m,b,w){if(n[0].overscaledZ>=b)return!1;let k=!1;for(let E of n){let z=_.getLoadedTile(E);if(!z)continue;let{fadingRole:O,fadingDirection:N,fadingParentID:j}=z;O===pe.Base&&N===xe.Departing&&j||(z.setCrossFadeLogic({fadingRole:pe.Base,fadingDirection:xe.Departing,fadingParentID:e.tileID,fadeEndTime:m+w}),e.setCrossFadeLogic({fadingRole:pe.Parent,fadingDirection:xe.Incoming,fadeEndTime:m+w})),u[E.key]=E,k=!0}return k}function Xi(_,e,n,u){let m=_.tileID;return!!_.selfFading||!_.hasData()&&!!e.has(m)&&(_.setSelfFadeLogic(n+u),!0)}function qr(_,e){var n;_.needsHillshadePrepare=!0,_.needsTerrainPrepare=!0;let u=e.tileID.canonical.x-_.tileID.canonical.x,m=e.tileID.canonical.y-_.tileID.canonical.y,b=Math.pow(2,_.tileID.canonical.z),w=e.tileID.key;u===0&&m===0||Math.abs(m)>1||(Math.abs(u)>1&&(Math.abs(u+b)===1?u+=b:Math.abs(u-b)===1&&(u-=b)),e.dem&&_.dem&&(_.dem.backfillBorder(e.dem,u,m),!((n=_.neighboringTiles)===null||n===void 0)&&n[w]&&(_.neighboringTiles[w].backfilled=!0)))}class Aa{constructor(){this._tiles={}}handleWrapJump(e){let n={};for(let u in this._tiles){let m=this._tiles[u];m.tileID=m.tileID.unwrapTo(m.tileID.wrap+e),n[m.tileID.key]=m}this._tiles=n}setFeatureState(e,n){for(let u in this._tiles)this._tiles[u].setFeatureState(e,n)}getAllTiles(){return Object.values(this._tiles)}getAllIds(e=!1){return e?Object.values(this._tiles).map((n=>n.tileID)).sort(a.aw).map((n=>n.key)):Object.keys(this._tiles)}getTileById(e){return this._tiles[e]}setTile(e,n){this._tiles[e]=n}deleteTileById(e){delete this._tiles[e]}getLoadedTile(e){let n=this.getTileById(e.key);return n!=null&&n.hasData()?n:null}isIdRenderable(e,n=!1){var u;return(u=this.getTileById(e))===null||u===void 0?void 0:u.isRenderable(n)}getRenderableIds(e=0,n){let u=[];for(let m of this.getAllIds())this.isIdRenderable(m,n)&&u.push(this.getTileById(m));return n?u.sort(((m,b)=>{let w=m.tileID,k=b.tileID,E=new a.P(w.canonical.x,w.canonical.y)._rotate(-e),z=new a.P(k.canonical.x,k.canonical.y)._rotate(-e);return w.overscaledZ-k.overscaledZ||z.y-E.y||z.x-E.x})).map((m=>m.tileID.key)):u.map((m=>m.tileID)).sort(a.aw).map((m=>m.key))}}class Wi extends a.E{constructor(e,n,u){super(),this.id=e,this.dispatcher=u,this.on("data",(m=>this._dataHandler(m))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((m,b,w,k)=>{let E=new(Ts(b.type))(m,b,w,k);if(E.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${E.id}`);return E})(e,n,u,this),this._inViewTiles=new Aa,this._outOfViewCache=new a.ax(0,(m=>this._unloadTile(m))),this._timers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new Le,this._didEmitContent=!1,this._updated=!1}onAdd(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._maxTileCacheZoomLevels=e?e._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(e)}onRemove(e){for(let n of this._inViewTiles.getAllTiles())n.unloadVectorData();this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(e),this._inViewTiles=new Aa}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(let e of this._inViewTiles.getAllTiles())if(e.state!=="loaded"&&e.state!=="errored")return!1;return!0}getSource(){return this._source}getState(){return this._state}pause(){this._paused=!0}resume(){if(!this._paused)return;let e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(e,n,u){return a._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(e),this._tileLoaded(e,n,u)}catch(m){e.state="errored",m.status!==404?this._source.fire(new a.k(m,{tile:e})):this.update(this.transform,this.terrain)}}))}_unloadTile(e){this._source.unloadTile&&this._source.unloadTile(e)}_abortTile(e){this._source.abortTile&&this._source.abortTile(e),this._source.fire(new a.l("dataabort",{tile:e,coord:e.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._inViewTiles,this.map?this.map.painter:null);for(let n of this._inViewTiles.getAllTiles())n.upload(e),n.prepare(this.map.style.imageManager)}getIds(){return this._inViewTiles.getAllIds(!0)}getRenderableIds(e){var n;return this._inViewTiles.getRenderableIds((n=this.transform)===null||n===void 0?void 0:n.bearingInRadians,e)}hasRenderableParent(e){let n=e.overscaledZ-1;if(n>=this._source.minzoom){let u=this.getLoadedTile(e.scaledTo(n));if(u)return this._inViewTiles.isIdRenderable(u.tileID.key)}return!1}reload(e,n=void 0){if(this._paused)this._shouldReloadOnResume=!0;else{this._outOfViewCache.reset();for(let u of this._inViewTiles.getAllIds()){let m=this._inViewTiles.getTileById(u);n&&!this._source.shouldReloadTile(m,n)||(e?this._reloadTile(u,"expired"):m.state!=="errored"&&this._reloadTile(u,"reloading"))}}}_reloadTile(e,n){return a._(this,void 0,void 0,(function*(){let u=this._inViewTiles.getTileById(e);u&&(u.state!=="loading"&&(u.state=n),yield this._loadTile(u,e,n))}))}_tileLoaded(e,n,u){e.timeAdded=ie(),e.selfFading&&(e.fadeEndTime=e.timeAdded+this._rasterFadeDuration),u==="expired"&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(n,e),this.getSource().type==="raster-dem"&&e.dem&&(function(m,b){var w,k;let E=b.getRenderableIds();for(let z of E){if(!m.neighboringTiles||!m.neighboringTiles[z])continue;let O=b.getTileById(z);m.neighboringTiles[z].backfilled||qr(m,O),!((k=(w=O.neighboringTiles)===null||w===void 0?void 0:w[m.tileID.key])===null||k===void 0)&&k.backfilled||qr(O,m)}})(e,this._inViewTiles),this._state.initializeTileState(e,this.map?this.map.painter:null),e.aborted||this._source.fire(new a.l("data",{dataType:"source",tile:e,coord:e.tileID}))}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._inViewTiles.getTileById(e)}_retainLoadedChildren(e,n){let u=this._getLoadedDescendents(n),m=new Set;for(let b of n){let w=u[b.key];if(!(w!=null&&w.length)){m.add(b);continue}let k=b.overscaledZ+Wi.maxOverzooming,E=w.filter((N=>N.tileID.overscaledZ<=k));if(!E.length){m.add(b);continue}let z=Math.min(...E.map((N=>N.tileID.overscaledZ))),O=E.filter((N=>N.tileID.overscaledZ===z)).map((N=>N.tileID));for(let N of O)e[N.key]=N;this._areDescendentsComplete(O,z,b.overscaledZ)||m.add(b)}return m}_getLoadedDescendents(e){var n;let u={};for(let m of this._inViewTiles.getAllTiles().filter((b=>b.hasData())))for(let b of e)m.tileID.isChildOf(b)&&(u[n=b.key]||(u[n]=[])).push(m);return u}_areDescendentsComplete(e,n,u){return e.length===1&&e[0].isOverscaled()?e[0].overscaledZ===n:Math.pow(4,n-u)===e.length}getLoadedTile(e){return this._inViewTiles.getLoadedTile(e)}updateCacheSize(e){let n=Math.ceil(e.width/this._source.tileSize)+1,u=Math.ceil(e.height/this._source.tileSize)+1,m=Math.floor(n*u*(this._maxTileCacheZoomLevels===null?a.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,m):m;this._outOfViewCache.setMaxSize(b)}handleWrapJump(e){let n=Math.round((e-(this._prevLng===void 0?e:this._prevLng))/360);this._prevLng=e,n&&(this._inViewTiles.handleWrapJump(n),this._resetTileReloadTimers())}update(e,n){if(!this._sourceLoaded||this._paused)return;let u;this.transform=e,this.terrain=n,this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?u=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((E=>new a.a2(E.canonical.z,E.wrap,E.canonical.z,E.canonical.x,E.canonical.y))):(u=Ei(e,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.type==="vector"&&this.map._zoomLevelsToOverscale!==void 0?e.maxZoom-this.map._zoomLevelsToOverscale:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:n,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(u=u.filter((E=>this._source.hasTile(E))))):u=[],this.usedForTerrain&&(u=this._addTerrainIdealTiles(u));let m=u.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,m&&this.fire(new a.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));let b=pi(e,this._source),w=this._updateRetainedTiles(u,b),k=gr(this._source.type);k&&this._rasterFadeDuration>0&&!n&&(function(E,z,O,N,j,Z,J){let se=ie(),le=a.av(z);for(let oe of z){let de=E.getTileById(oe.key);de.fadingDirection!==xe.Departing&&de.fadeOpacity!==0||de.resetFadeLogic(),Vi(E,de,O,se,N,j,J)||Si(E,de,O,se,Z,J)||Xi(de,le,se,J)||de.resetFadeLogic()}})(this._inViewTiles,u,w,this._maxFadingAncestorLevels,this._source.minzoom,this._source.maxzoom,this._rasterFadeDuration),k?this._cleanUpRasterTiles(w):this._cleanUpVectorTiles(w)}_cleanUpRasterTiles(e){for(let n of this._inViewTiles.getAllIds())e[n]||this._removeTile(n)}_cleanUpVectorTiles(e){for(let n of this._inViewTiles.getAllIds()){let u=this._inViewTiles.getTileById(n);e[n]?u.clearSymbolFadeHold():u.hasSymbolBuckets?u.holdingForSymbolFade()?u.symbolFadeFinished()&&this._removeTile(n):u.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(n)}}_addTerrainIdealTiles(e){let n=[];for(let u of e)if(u.canonical.z>this._source.minzoom){let m=u.scaledTo(u.canonical.z-1);n.push(m);let b=u.scaledTo(Math.max(this._source.minzoom,Math.min(u.canonical.z,5)));n.push(b)}return e.concat(n)}releaseSymbolFadeTiles(){for(let e of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(e).holdingForSymbolFade()&&this._removeTile(e)}_updateRetainedTiles(e,n){var u;let m=new Set;for(let z of e)this._addTile(z).hasData()||m.add(z);let b=e.reduce(((z,O)=>(z[O.key]=O,z)),{}),w=this._retainLoadedChildren(b,m),k={},E=Math.max(n-Wi.maxUnderzooming,this._source.minzoom);for(let z of w){let O=this._inViewTiles.getTileById(z.key),N=O==null?void 0:O.wasRequested();for(let j=z.overscaledZ-1;j>=E;--j){let Z=z.scaledTo(j);if(k[Z.key])break;if(k[Z.key]=!0,O=this.getTile(Z),!O&&N&&(O=this._addTile(Z)),O){let J=O.hasData();if((J||!(!((u=this.map)===null||u===void 0)&&u.cancelPendingTileRequestsWhileZooming)||N)&&(b[Z.key]=Z),N=O.wasRequested(),J)break}}}return b}_addTile(e){let n=this._inViewTiles.getTileById(e.key);if(n)return n;n=this._outOfViewCache.getAndRemove(e),n&&(n.resetFadeLogic(),this._setTileReloadTimer(e.key,n),n.tileID=e,this._state.initializeTileState(n,this.map?this.map.painter:null));let u=n;return n||(n=new Me(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(n,e.key,n.state)),n.uses++,this._inViewTiles.setTile(e.key,n),u||this._source.fire(new a.l("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n}_setTileReloadTimer(e,n){this._clearTileReloadTimer(e);let u=n.getExpiryTimeout();u&&(this._timers[e]=setTimeout((()=>{this._reloadTile(e,"expired"),delete this._timers[e]}),u))}_clearTileReloadTimer(e){let n=this._timers[e];n&&(clearTimeout(n),delete this._timers[e])}_resetTileReloadTimers(){for(let e in this._timers)clearTimeout(this._timers[e]),delete this._timers[e];for(let e of this._inViewTiles.getAllIds()){let n=this._inViewTiles.getTileById(e);this._setTileReloadTimer(e,n)}}refreshTiles(e){for(let n of this._inViewTiles.getAllIds()){let u=this._inViewTiles.getTileById(n);(this._inViewTiles.isIdRenderable(n)||u.state=="errored")&&e.some((m=>m.equals(u.tileID.canonical)))&&this._reloadTile(n,"expired")}}_removeTile(e){let n=this._inViewTiles.getTileById(e);n&&(n.uses--,this._inViewTiles.deleteTileById(e),this._clearTileReloadTimer(e),n.uses>0||(n.hasData()&&n.state!=="reloading"?this._outOfViewCache.add(n.tileID,n,n.getExpiryTimeout()):(n.aborted=!0,this._abortTile(n),this._unloadTile(n))))}_dataHandler(e){e.dataType==="source"&&(e.sourceDataType!=="metadata"?e.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(e.sourceDataChanged,e.shouldReloadTileOptions),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(let e of this._inViewTiles.getAllIds())this._removeTile(e);this._outOfViewCache.reset()}tilesIn(e,n,u){let m=[],b=this.transform;if(!b)return m;let w=b.getCoveringTilesDetailsProvider().allowWorldCopies(),k=u?b.getCameraQueryGeometry(e):e,E=Z=>b.screenPointToMercatorCoordinate(Z,this.terrain),z=this.transformBbox(e,E,!w),O=this.transformBbox(k,E,!w),N=this.getIds(),j=a.aa.fromPoints(O);for(let Z=0;Z<N.length;Z++){let J=this._inViewTiles.getTileById(N[Z]);if(J.holdingForSymbolFade())continue;let se=w?[J.tileID]:[J.tileID.unwrapTo(-1),J.tileID.unwrapTo(0)],le=Math.pow(2,b.zoom-J.tileID.overscaledZ),oe=n*J.queryPadding*a.a5/J.tileSize/le;for(let de of se){let ye=j.map((ue=>de.getTilePoint(new a.a9(ue.x,ue.y))));if(ye.expandBy(oe),ye.intersects(mr)){let ue=z.map((be=>de.getTilePoint(be))),me=O.map((be=>de.getTilePoint(be)));m.push({tile:J,tileID:w?de:de.unwrapTo(0),queryGeometry:ue,cameraQueryGeometry:me,scale:le})}}}return m}transformBbox(e,n,u){let m=e.map(n);if(u){let b=a.aa.fromPoints(e);b.shrinkBy(.001*Math.min(b.width(),b.height()));let w=b.map(n);a.aa.fromPoints(m).covers(w)||(m=m.map((k=>k.x>.5?new a.a9(k.x-1,k.y,k.z):k)))}return m}getVisibleCoordinates(e){let n=this.getRenderableIds(e).map((u=>this._inViewTiles.getTileById(u).tileID));return this.transform&&this.transform.populateCache(n),n}hasTransition(){return!!this._source.hasTransition()||!(!gr(this._source.type)||!(function(e,n){if(n<=0)return!1;let u=ie();for(let m of e.getAllTiles())if(m.fadeEndTime>=u)return!0;return!1})(this._inViewTiles,this._rasterFadeDuration))}setRasterFadeDuration(e){this._rasterFadeDuration=e}setFeatureState(e,n,u){this._state.updateState(e=e||a.ai,n,u)}removeFeatureState(e,n,u){this._state.removeFeatureState(e=e||a.ai,n,u)}getFeatureState(e,n){return this._state.getState(e=e||a.ai,n)}setDependencies(e,n,u){let m=this._inViewTiles.getTileById(e);m&&m.setDependencies(n,u)}reloadTilesForDependencies(e,n){for(let u of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(u).hasDependency(e,n)&&this._reloadTile(u,"reloading");this._outOfViewCache.filter((u=>!u.hasDependency(e,n)))}areTilesLoaded(){for(let e of this._inViewTiles.getAllTiles())if(e.state!=="loaded"&&e.state!=="errored")return!1;return!0}}Wi.maxUnderzooming=10,Wi.maxOverzooming=3;class nt{constructor(e,n){this.reset(e,n)}reset(e,n){this.points=e||[],this._distances=[0];for(let u=1;u<this.points.length;u++)this._distances[u]=this._distances[u-1]+this.points[u].dist(this.points[u-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(n||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(this.points.length===1)return this.points[0];e=a.an(e,0,1);let n=1,u=this._distances[n],m=e*this.paddedLength+this.padding;for(;u<m&&n<this._distances.length;)u=this._distances[++n];let b=n-1,w=this._distances[b],k=u-w,E=k>0?(m-w)/k:0;return this.points[b].mult(1-E).add(this.points[n].mult(E))}}function Dt(_,e){let n=!0;return _==="always"||_!=="never"&&e!=="never"||(n=!1),n}class Ot{constructor(e,n,u){let m=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(e/u),this.yCellCount=Math.ceil(n/u);for(let w=0;w<this.xCellCount*this.yCellCount;w++)m.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=n,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/n,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,n,u,m,b){this._forEachCell(n,u,m,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(n),this.bboxes.push(u),this.bboxes.push(m),this.bboxes.push(b)}insertCircle(e,n,u,m){this._forEachCell(n-m,u-m,n+m,u+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(n),this.circles.push(u),this.circles.push(m)}_insertBoxCell(e,n,u,m,b,w){this.boxCells[b].push(w)}_insertCircleCell(e,n,u,m,b,w){this.circleCells[b].push(w)}_query(e,n,u,m,b,w,k){if(u<0||e>this.width||m<0||n>this.height)return[];let E=[];if(e<=0&&n<=0&&this.width<=u&&this.height<=m){if(b)return[{key:null,x1:e,y1:n,x2:u,y2:m}];for(let z=0;z<this.boxKeys.length;z++)E.push({key:this.boxKeys[z],x1:this.bboxes[4*z],y1:this.bboxes[4*z+1],x2:this.bboxes[4*z+2],y2:this.bboxes[4*z+3]});for(let z=0;z<this.circleKeys.length;z++){let O=this.circles[3*z],N=this.circles[3*z+1],j=this.circles[3*z+2];E.push({key:this.circleKeys[z],x1:O-j,y1:N-j,x2:O+j,y2:N+j})}}else this._forEachCell(e,n,u,m,this._queryCell,E,{hitTest:b,overlapMode:w,seenUids:{box:{},circle:{}}},k);return E}query(e,n,u,m){return this._query(e,n,u,m,!1,null)}hitTest(e,n,u,m,b,w){return this._query(e,n,u,m,!0,b,w).length>0}hitTestCircle(e,n,u,m,b){let w=e-u,k=e+u,E=n-u,z=n+u;if(k<0||w>this.width||z<0||E>this.height)return!1;let O=[];return this._forEachCell(w,E,k,z,this._queryCellCircle,O,{hitTest:!0,overlapMode:m,circle:{x:e,y:n,radius:u},seenUids:{box:{},circle:{}}},b),O.length>0}_queryCell(e,n,u,m,b,w,k,E){let{seenUids:z,hitTest:O,overlapMode:N}=k,j=this.boxCells[b];if(j!==null){let J=this.bboxes;for(let se of j)if(!z.box[se]){z.box[se]=!0;let le=4*se,oe=this.boxKeys[se];if(e<=J[le+2]&&n<=J[le+3]&&u>=J[le+0]&&m>=J[le+1]&&(!E||E(oe))&&(!O||!Dt(N,oe.overlapMode))&&(w.push({key:oe,x1:J[le],y1:J[le+1],x2:J[le+2],y2:J[le+3]}),O))return!0}}let Z=this.circleCells[b];if(Z!==null){let J=this.circles;for(let se of Z)if(!z.circle[se]){z.circle[se]=!0;let le=3*se,oe=this.circleKeys[se];if(this._circleAndRectCollide(J[le],J[le+1],J[le+2],e,n,u,m)&&(!E||E(oe))&&(!O||!Dt(N,oe.overlapMode))){let de=J[le],ye=J[le+1],ue=J[le+2];if(w.push({key:oe,x1:de-ue,y1:ye-ue,x2:de+ue,y2:ye+ue}),O)return!0}}}return!1}_queryCellCircle(e,n,u,m,b,w,k,E){let{circle:z,seenUids:O,overlapMode:N}=k,j=this.boxCells[b];if(j!==null){let J=this.bboxes;for(let se of j)if(!O.box[se]){O.box[se]=!0;let le=4*se,oe=this.boxKeys[se];if(this._circleAndRectCollide(z.x,z.y,z.radius,J[le+0],J[le+1],J[le+2],J[le+3])&&(!E||E(oe))&&!Dt(N,oe.overlapMode))return w.push(!0),!0}}let Z=this.circleCells[b];if(Z!==null){let J=this.circles;for(let se of Z)if(!O.circle[se]){O.circle[se]=!0;let le=3*se,oe=this.circleKeys[se];if(this._circlesCollide(J[le],J[le+1],J[le+2],z.x,z.y,z.radius)&&(!E||E(oe))&&!Dt(N,oe.overlapMode))return w.push(!0),!0}}}_forEachCell(e,n,u,m,b,w,k,E){let z=this._convertToXCellCoord(e),O=this._convertToYCellCoord(n),N=this._convertToXCellCoord(u),j=this._convertToYCellCoord(m);for(let Z=z;Z<=N;Z++)for(let J=O;J<=j;J++)if(b.call(this,e,n,u,m,this.xCellCount*J+Z,w,k,E))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,n,u,m,b,w){let k=m-e,E=b-n,z=u+w;return z*z>k*k+E*E}_circleAndRectCollide(e,n,u,m,b,w,k){let E=(w-m)/2,z=Math.abs(e-(m+E));if(z>E+u)return!1;let O=(k-b)/2,N=Math.abs(n-(b+O));if(N>O+u)return!1;if(z<=E||N<=O)return!0;let j=z-E,Z=N-O;return j*j+Z*Z<=u*u}}function Yr(_,e,n){let u=a.N();if(!_){let{vecSouth:N,vecEast:j}=na(e),Z=M();Z[0]=j[0],Z[1]=j[1],Z[2]=N[0],Z[3]=N[1],m=Z,(O=(w=(b=Z)[0])*(z=b[3])-(E=b[2])*(k=b[1]))&&(m[0]=z*(O=1/O),m[1]=-k*O,m[2]=-E*O,m[3]=w*O),u[0]=Z[0],u[1]=Z[1],u[4]=Z[2],u[5]=Z[3]}var m,b,w,k,E,z,O;return a.Q(u,u,[1/n,1/n,1]),u}function Uo(_,e,n,u){if(_){let m=a.N();if(!e){let{vecSouth:b,vecEast:w}=na(n);m[0]=w[0],m[1]=w[1],m[4]=b[0],m[5]=b[1]}return a.Q(m,m,[u,u,1]),m}return n.pixelsToClipSpaceMatrix}function na(_){let e=Math.cos(_.rollInRadians),n=Math.sin(_.rollInRadians),u=Math.cos(_.pitchInRadians),m=Math.cos(_.bearingInRadians),b=Math.sin(_.bearingInRadians),w=a.aC();w[0]=-m*u*n-b*e,w[1]=-b*u*n+m*e;let k=a.aD(w);k<1e-9?a.aE(w):a.aF(w,w,1/k);let E=a.aC();E[0]=m*u*e-b*n,E[1]=b*u*e+m*n;let z=a.aD(E);return z<1e-9?a.aE(E):a.aF(E,E,1/z),{vecEast:E,vecSouth:w}}function jt(_,e,n,u){let m;u?(m=[_,e,u(_,e),1],a.aH(m,m,n)):(m=[_,e,0,1],Ka(m,m,n));let b=m[3];return{point:new a.P(m[0]/b,m[1]/b),signedDistanceFromCamera:b,isOccluded:!1}}function oo(_,e){return .5+_/e*.5}function Cs(_,e){return _.x>=-e[0]&&_.x<=e[0]&&_.y>=-e[1]&&_.y<=e[1]}function Zo(_,e,n,u,m,b,w,k,E,z,O,N,j){let Z=n?_.textSizeData:_.iconSizeData,J=a.ay(Z,e.transform.zoom),se=[256/e.width*2+1,256/e.height*2+1],le=n?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;le.clear();let oe=_.lineVertexArray,de=n?_.text.placedSymbolArray:_.icon.placedSymbolArray,ye=e.transform.width/e.transform.height,ue=!1;for(let me=0;me<de.length;me++){let be=de.get(me);if(be.hidden||be.writingMode===a.az.vertical&&!ue){_i(be.numGlyphs,le);continue}ue=!1;let fe=new a.P(be.anchorX,be.anchorY),Te={getElevation:j,pitchedLabelPlaneMatrix:u,lineVertexArray:oe,pitchWithMap:b,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:e.transform,tileAnchorPoint:fe,unwrappedTileID:E,width:z,height:O,translation:N},Fe=Gn(be.anchorX,be.anchorY,Te);if(!Cs(Fe.point,se)){_i(be.numGlyphs,le);continue}let Oe=oo(e.transform.cameraToCenterDistance,Fe.signedDistanceFromCamera),Re=a.aA(Z,J,be),Be=b?Re*e.transform.getPitchedTextCorrection(be.anchorX,be.anchorY,E)/Oe:Re*Oe,Je=ks({projectionContext:Te,pitchedLabelPlaneMatrixInverse:m,symbol:be,fontSize:Be,flip:!1,keepUpright:w,glyphOffsetArray:_.glyphOffsetArray,dynamicLayoutVertexArray:le,aspectRatio:ye,rotateToLine:k});ue=Je.useVertical,(Je.notEnoughRoom||ue||Je.needsFlipping&&ks({projectionContext:Te,pitchedLabelPlaneMatrixInverse:m,symbol:be,fontSize:Be,flip:!0,keepUpright:w,glyphOffsetArray:_.glyphOffsetArray,dynamicLayoutVertexArray:le,aspectRatio:ye,rotateToLine:k}).notEnoughRoom)&&_i(be.numGlyphs,le)}n?_.text.dynamicLayoutVertexBuffer.updateData(le):_.icon.dynamicLayoutVertexBuffer.updateData(le)}function aa(_,e,n,u,m,b,w,k){let E=b.glyphStartIndex+b.numGlyphs,z=b.lineStartIndex,O=b.lineStartIndex+b.lineLength,N=e.getoffsetX(b.glyphStartIndex),j=e.getoffsetX(E-1),Z=Wr(_*N,n,u,m,b.segment,z,O,k,w);if(!Z)return null;let J=Wr(_*j,n,u,m,b.segment,z,O,k,w);return J?k.projectionCache.anyProjectionOccluded?null:{first:Z,last:J}:null}function lo(_,e,n,u){return _===a.az.horizontal&&Math.abs(n.y-e.y)>Math.abs(n.x-e.x)*u?{useVertical:!0}:(_===a.az.vertical?e.y<n.y:e.x>n.x)?{needsFlipping:!0}:null}function ks(_){let{projectionContext:e,pitchedLabelPlaneMatrixInverse:n,symbol:u,fontSize:m,flip:b,keepUpright:w,glyphOffsetArray:k,dynamicLayoutVertexArray:E,aspectRatio:z,rotateToLine:O}=_,N=m/24,j=u.lineOffsetX*N,Z=u.lineOffsetY*N,J;if(u.numGlyphs>1){let se=u.glyphStartIndex+u.numGlyphs,le=u.lineStartIndex,oe=u.lineStartIndex+u.lineLength,de=aa(N,k,j,Z,b,u,O,e);if(!de)return{notEnoughRoom:!0};let ye=Ps(de.first.point.x,de.first.point.y,e,n),ue=Ps(de.last.point.x,de.last.point.y,e,n);if(w&&!b){let me=lo(u.writingMode,ye,ue,z);if(me)return me}J=[de.first];for(let me=u.glyphStartIndex+1;me<se-1;me++){let be=Wr(N*k.getoffsetX(me),j,Z,b,u.segment,le,oe,e,O);if(!be)return{notEnoughRoom:!0};J.push(be)}J.push(de.last)}else{if(w&&!b){let le=mi(e.tileAnchorPoint.x,e.tileAnchorPoint.y,e).point,oe=u.lineStartIndex+u.segment+1,de=new a.P(e.lineVertexArray.getx(oe),e.lineVertexArray.gety(oe)),ye=mi(de.x,de.y,e),ue=ye.signedDistanceFromCamera>0?ye.point:co(e.tileAnchorPoint,de,le,1,e),me=Ps(le.x,le.y,e,n),be=Ps(ue.x,ue.y,e,n),fe=lo(u.writingMode,me,be,z);if(fe)return fe}let se=Wr(N*k.getoffsetX(u.glyphStartIndex),j,Z,b,u.segment,u.lineStartIndex,u.lineStartIndex+u.lineLength,e,O);if(!se||e.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};J=[se]}for(let se of J)a.aG(E,se.point,se.angle);return{}}function co(_,e,n,u,m){let b=_.add(_.sub(e)._unit()),w=mi(b.x,b.y,m).point,k=n.sub(w);return n.add(k._mult(u/k.mag()))}function Vr(_,e,n){let u=e.projectionCache;if(u.projections[_])return u.projections[_];let m=new a.P(e.lineVertexArray.getx(_),e.lineVertexArray.gety(_)),b=mi(m.x,m.y,e);if(b.signedDistanceFromCamera>0)return u.projections[_]=b.point,u.anyProjectionOccluded=u.anyProjectionOccluded||b.isOccluded,b.point;let w=_-n.direction;return co(n.distanceFromAnchor===0?e.tileAnchorPoint:new a.P(e.lineVertexArray.getx(w),e.lineVertexArray.gety(w)),m,n.previousVertex,n.absOffsetX-n.distanceFromAnchor+1,e)}function mi(_,e,n){let u=_+n.translation[0],m=e+n.translation[1],b;return n.pitchWithMap?(b=jt(u,m,n.pitchedLabelPlaneMatrix,n.getElevation),b.isOccluded=!1):(b=n.transform.projectTileCoordinates(u,m,n.unwrappedTileID,n.getElevation),b.point.x=(.5*b.point.x+.5)*n.width,b.point.y=(.5*-b.point.y+.5)*n.height),b}function Ps(_,e,n,u){if(n.pitchWithMap){let m=[_,e,0,1];return a.aH(m,m,u),n.transform.projectTileCoordinates(m[0]/m[3],m[1]/m[3],n.unwrappedTileID,n.getElevation).point}return{x:_/n.width*2-1,y:1-e/n.height*2}}function Gn(_,e,n){return n.transform.projectTileCoordinates(_,e,n.unwrappedTileID,n.getElevation)}function Es(_,e,n){return _._unit()._perp()._mult(e*n)}function Ma(_,e,n,u,m,b,w,k,E){if(k.projectionCache.offsets[_])return k.projectionCache.offsets[_];let z=n.add(e);if(_+E.direction<u||_+E.direction>=m)return k.projectionCache.offsets[_]=z,z;let O=Vr(_+E.direction,k,E),N=Es(O.sub(n),w,E.direction),j=n.add(N),Z=O.add(N);return k.projectionCache.offsets[_]=a.aI(b,z,j,Z)||z,k.projectionCache.offsets[_]}function Wr(_,e,n,u,m,b,w,k,E){let z=u?_-e:_+e,O=z>0?1:-1,N=0;u&&(O*=-1,N=Math.PI),O<0&&(N+=Math.PI);let j,Z=O>0?b+m:b+m+1;k.projectionCache.cachedAnchorPoint?j=k.projectionCache.cachedAnchorPoint:(j=mi(k.tileAnchorPoint.x,k.tileAnchorPoint.y,k).point,k.projectionCache.cachedAnchorPoint=j);let J,se,le=j,oe=j,de=0,ye=0,ue=Math.abs(z),me=[],be;for(;de+ye<=ue;){if(Z+=O,Z<b||Z>=w)return null;de+=ye,oe=le,se=J;let Fe={absOffsetX:ue,direction:O,distanceFromAnchor:de,previousVertex:oe};if(le=Vr(Z,k,Fe),n===0)me.push(oe),be=le.sub(oe);else{let Oe,Re=le.sub(oe);Oe=Re.mag()===0?Es(Vr(Z+O,k,Fe).sub(le),n,O):Es(Re,n,O),se||(se=oe.add(Oe)),J=Ma(Z,Oe,le,b,w,se,n,k,Fe),me.push(se),be=J.sub(se)}ye=be.mag()}let fe=be._mult((ue-de)/ye)._add(se||oe),Te=N+Math.atan2(le.y-oe.y,le.x-oe.x);return me.push(fe),{point:fe,angle:E?Te:0,path:me}}let li=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function _i(_,e){for(let n=0;n<_;n++){let u=e.length;e.resize(u+4),e.float32.set(li,3*u)}}function Ka(_,e,n){let u=e[0],m=e[1];return _[0]=n[0]*u+n[4]*m+n[12],_[1]=n[1]*u+n[5]*m+n[13],_[3]=n[3]*u+n[7]*m+n[15],_}let Ti=100;class Ja{constructor(e,n=new Ot(e.width+200,e.height+200,25),u=new Ot(e.width+200,e.height+200,25)){this.transform=e,this.grid=n,this.ignoredGrid=u,this.pitchFactor=Math.cos(e.pitch*Math.PI/180)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+Ti,this.screenBottomBoundary=e.height+Ti,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(e,n,u,m,b,w,k,E,z,O,N,j){let Z=this.projectAndGetPerspectiveRatio(e.anchorPointX+E[0],e.anchorPointY+E[1],b,O,j),J=u*Z.perspectiveRatio,se;if(w||k)se=this._projectCollisionBox(e,J,m,b,w,k,E,Z,O,N,j);else{let be=Z.x+(N?N.x*J:0),fe=Z.y+(N?N.y*J:0);se={allPointsOccluded:!1,box:[be+e.x1*J,fe+e.y1*J,be+e.x2*J,fe+e.y2*J]}}let[le,oe,de,ye]=se.box,ue=w?se.allPointsOccluded:Z.isOccluded,me=ue;return me||(me=Z.perspectiveRatio<this.perspectiveRatioCutoff),me||(me=!this.isInsideGrid(le,oe,de,ye)),me||n!=="always"&&this.grid.hitTest(le,oe,de,ye,n,z)?{box:[le,oe,de,ye],placeable:!1,offscreen:!1,occluded:ue}:{box:[le,oe,de,ye],placeable:!0,offscreen:this.isOffscreen(le,oe,de,ye),occluded:ue}}placeCollisionCircles(e,n,u,m,b,w,k,E,z,O,N,j,Z,J){let se=[],le=new a.P(n.anchorX,n.anchorY),oe=this.getPerspectiveRatio(le.x,le.y,w,J),de=(z?b*this.transform.getPitchedTextCorrection(n.anchorX,n.anchorY,w)/oe:b*oe)/a.aM,ye={getElevation:J,pitchedLabelPlaneMatrix:k,lineVertexArray:u,pitchWithMap:z,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:le,unwrappedTileID:w,width:this.transform.width,height:this.transform.height,translation:Z},ue=aa(de,m,n.lineOffsetX*de,n.lineOffsetY*de,!1,n,!1,ye),me=!1,be=!1,fe=!0;if(ue){let Te=.5*N*oe+j,Fe=new a.P(-100,-100),Oe=new a.P(this.screenRightBoundary,this.screenBottomBoundary),Re=new nt,Be=ue.first,Je=ue.last,et=[];for(let Rt=Be.path.length-1;Rt>=1;Rt--)et.push(Be.path[Rt]);for(let Rt=1;Rt<Je.path.length;Rt++)et.push(Je.path[Rt]);let $e=2.5*Te;if(z){let Rt=this.projectPathToScreenSpace(et,ye);et=Rt.some((bi=>bi.signedDistanceFromCamera<=0))?[]:Rt.map((bi=>bi.point))}let ot=[];if(et.length>0){let Rt=et[0].clone(),bi=et[0].clone();for(let ji=1;ji<et.length;ji++)Rt.x=Math.min(Rt.x,et[ji].x),Rt.y=Math.min(Rt.y,et[ji].y),bi.x=Math.max(bi.x,et[ji].x),bi.y=Math.max(bi.y,et[ji].y);ot=Rt.x>=Fe.x&&bi.x<=Oe.x&&Rt.y>=Fe.y&&bi.y<=Oe.y?[et]:bi.x<Fe.x||Rt.x>Oe.x||bi.y<Fe.y||Rt.y>Oe.y?[]:a.aJ([et],Fe.x,Fe.y,Oe.x,Oe.y)}for(let Rt of ot){Re.reset(Rt,.25*Te);let bi=0;bi=Re.length<=.5*Te?1:Math.ceil(Re.paddedLength/$e)+1;for(let ji=0;ji<bi;ji++){let Li=ji/Math.max(bi-1,1),Zi=Re.lerp(Li),Di=Zi.x+Ti,sr=Zi.y+Ti;se.push(Di,sr,Te,0);let Hi=Di-Te,Dr=sr-Te,_r=Di+Te,dr=sr+Te;if(fe=fe&&this.isOffscreen(Hi,Dr,_r,dr),be=be||this.isInsideGrid(Hi,Dr,_r,dr),e!=="always"&&this.grid.hitTestCircle(Di,sr,Te,e,O)&&(me=!0,!E))return{circles:[],offscreen:!1,collisionDetected:me}}}}return{circles:!E&&me||!be||oe<this.perspectiveRatioCutoff?[]:se,offscreen:fe,collisionDetected:me}}projectPathToScreenSpace(e,n){let u=(function(m,b){let w=a.N();return a.aB(w,b.pitchedLabelPlaneMatrix),m.map((k=>{let E=jt(k.x,k.y,w,b.getElevation),z=b.transform.projectTileCoordinates(E.point.x,E.point.y,b.unwrappedTileID,b.getElevation);return z.point.x=(.5*z.point.x+.5)*b.width,z.point.y=(.5*-z.point.y+.5)*b.height,z}))})(e,n);return(function(m){let b=0,w=0,k=0,E=0;for(let z=0;z<m.length;z++)m[z].isOccluded?(k=z+1,E=0):(E++,E>w&&(w=E,b=k));return m.slice(b,b+w)})(u)}queryRenderedSymbols(e){if(e.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};let n=[],u=new a.aa;for(let N of e){let j=new a.P(N.x+Ti,N.y+Ti);u.extend(j),n.push(j)}let{minX:m,minY:b,maxX:w,maxY:k}=u,E=this.grid.query(m,b,w,k).concat(this.ignoredGrid.query(m,b,w,k)),z={},O={};for(let N of E){let j=N.key;if(z[j.bucketInstanceId]===void 0&&(z[j.bucketInstanceId]={}),z[j.bucketInstanceId][j.featureIndex])continue;let Z=[new a.P(N.x1,N.y1),new a.P(N.x2,N.y1),new a.P(N.x2,N.y2),new a.P(N.x1,N.y2)];a.aK(n,Z)&&(z[j.bucketInstanceId][j.featureIndex]=!0,O[j.bucketInstanceId]===void 0&&(O[j.bucketInstanceId]=[]),O[j.bucketInstanceId].push(j.featureIndex))}return O}insertCollisionBox(e,n,u,m,b,w){(u?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:b,collisionGroupID:w,overlapMode:n},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,n,u,m,b,w){let k=u?this.ignoredGrid:this.grid,E={bucketInstanceId:m,featureIndex:b,collisionGroupID:w,overlapMode:n};for(let z=0;z<e.length;z+=4)k.insertCircle(E,e[z],e[z+1],e[z+2])}projectAndGetPerspectiveRatio(e,n,u,m,b){if(b){let w;m?(w=[e,n,m(e,n),1],a.aH(w,w,b)):(w=[e,n,0,1],Ka(w,w,b));let k=w[3];return{x:(w[0]/k+1)/2*this.transform.width+Ti,y:(-w[1]/k+1)/2*this.transform.height+Ti,perspectiveRatio:.5+this.transform.cameraToCenterDistance/k*.5,isOccluded:!1,signedDistanceFromCamera:k}}{let w=this.transform.projectTileCoordinates(e,n,u,m);return{x:(w.point.x+1)/2*this.transform.width+Ti,y:(1-w.point.y)/2*this.transform.height+Ti,perspectiveRatio:.5+this.transform.cameraToCenterDistance/w.signedDistanceFromCamera*.5,isOccluded:w.isOccluded,signedDistanceFromCamera:w.signedDistanceFromCamera}}}getPerspectiveRatio(e,n,u,m){let b=this.transform.projectTileCoordinates(e,n,u,m);return .5+this.transform.cameraToCenterDistance/b.signedDistanceFromCamera*.5}isOffscreen(e,n,u,m){return u<Ti||e>=this.screenRightBoundary||m<Ti||n>this.screenBottomBoundary}isInsideGrid(e,n,u,m){return u>=0&&e<this.gridRightBoundary&&m>=0&&n<this.gridBottomBoundary}getViewportMatrix(){let e=a.ar([]);return a.O(e,e,[-100,-100,0]),e}_projectCollisionBox(e,n,u,m,b,w,k,E,z,O,N){let j=1,Z=0,J=0,se=1,le=e.anchorPointX+k[0],oe=e.anchorPointY+k[1];if(w&&!b){let et=this.projectAndGetPerspectiveRatio(le+1,oe,m,z,N),$e=et.x-E.x,ot=Math.atan((et.y-E.y)/$e)+($e<0?Math.PI:0),Rt=Math.sin(ot),bi=Math.cos(ot);j=bi,Z=Rt,J=-Rt,se=bi}else if(!w&&b){let et=na(this.transform);j=et.vecEast[0],Z=et.vecEast[1],J=et.vecSouth[0],se=et.vecSouth[1]}let de=E.x,ye=E.y,ue=n;b&&(de=le,ye=oe,ue=Math.pow(2,-(this.transform.zoom-u.overscaledZ)),ue*=this.transform.getPitchedTextCorrection(le,oe,m),O||(ue*=a.an(.5+E.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),O&&(de+=j*O.x*ue+J*O.y*ue,ye+=Z*O.x*ue+se*O.y*ue);let me=e.x1*ue,be=e.x2*ue,fe=(me+be)/2,Te=e.y1*ue,Fe=e.y2*ue,Oe=(Te+Fe)/2,Re=[{offsetX:me,offsetY:Te},{offsetX:fe,offsetY:Te},{offsetX:be,offsetY:Te},{offsetX:be,offsetY:Oe},{offsetX:be,offsetY:Fe},{offsetX:fe,offsetY:Fe},{offsetX:me,offsetY:Fe},{offsetX:me,offsetY:Oe}],Be=[];for(let{offsetX:et,offsetY:$e}of Re)Be.push(new a.P(de+j*et+J*$e,ye+Z*et+se*$e));let Je=!1;if(b){let et=Be.map(($e=>this.projectAndGetPerspectiveRatio($e.x,$e.y,m,z,N)));Je=et.some(($e=>!$e.isOccluded)),Be=et.map(($e=>new a.P($e.x,$e.y)))}else Je=!0;return{box:a.aL(Be),allPointsOccluded:!Je}}}class Ho{constructor(e,n,u,m){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?n:-n))):m&&u?1:0,this.placed=u}isHidden(){return this.opacity===0&&!this.placed}}class Vt{constructor(e,n,u,m,b){this.text=new Ho(e?e.text:null,n,u,b),this.icon=new Ho(e?e.icon:null,n,m,b)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ki{constructor(e,n,u){this.text=e,this.icon=n,this.skipFade=u}}class $o{constructor(e,n,u,m,b){this.bucketInstanceId=e,this.featureIndex=n,this.sourceLayerIndex=u,this.bucketIndex=m,this.tileID=b}}class uo{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){let n=++this.maxGroupID;this.collisionGroups[e]={ID:n,predicate:u=>u.collisionGroupID===n}}return this.collisionGroups[e]}}function Gr(_,e,n,u,m){let{horizontalAlign:b,verticalAlign:w}=a.aS(_);return new a.P(-(b-.5)*e+u[0]*m,-(w-.5)*n+u[1]*m)}class Ol{constructor(e,n,u,m,b){this.transform=e.clone(),this.terrain=n,this.collisionIndex=new Ja(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=u,this.retainedQueryData={},this.collisionGroups=new uo(m),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=b,b&&(b.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(e){let n=this.terrain;return n?(u,m)=>n.getElevation(e,u,m):null}getBucketParts(e,n,u,m){let b=u.getBucket(n),w=u.latestFeatureIndex;if(!b||!w||n.id!==b.layerIds[0])return;let k=u.collisionBoxArray,E=b.layers[0].layout,z=b.layers[0].paint,O=Math.pow(2,this.transform.zoom-u.tileID.overscaledZ),N=u.tileSize/a.a5,j=u.tileID.toUnwrapped(),Z=E.get("text-rotation-alignment")==="map",J=a.aN(u,1,this.transform.zoom),se=a.aO(this.collisionIndex.transform,u,z.get("text-translate"),z.get("text-translate-anchor")),le=a.aO(this.collisionIndex.transform,u,z.get("icon-translate"),z.get("icon-translate-anchor")),oe=Yr(Z,this.transform,J);this.retainedQueryData[b.bucketInstanceId]=new $o(b.bucketInstanceId,w,b.sourceLayerIndex,b.index,u.tileID);let de={bucket:b,layout:E,translationText:se,translationIcon:le,unwrappedTileID:j,pitchedLabelPlaneMatrix:oe,scale:O,textPixelRatio:N,holdingForFade:u.holdingForSymbolFade(),collisionBoxArray:k,partiallyEvaluatedTextSize:a.ay(b.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(m)for(let ye of b.sortKeyRanges){let{sortKey:ue,symbolInstanceStart:me,symbolInstanceEnd:be}=ye;e.push({sortKey:ue,symbolInstanceStart:me,symbolInstanceEnd:be,parameters:de})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:de})}attemptAnchorPlacement(e,n,u,m,b,w,k,E,z,O,N,j,Z,J,se,le,oe,de,ye,ue){let me=a.aP[e.textAnchor],be=[e.textOffset0,e.textOffset1],fe=Gr(me,u,m,be,b),Te=this.collisionIndex.placeCollisionBox(n,j,E,z,O,k,w,le,N.predicate,ye,fe,ue);if((!de||this.collisionIndex.placeCollisionBox(de,j,E,z,O,k,w,oe,N.predicate,ye,fe,ue).placeable)&&Te.placeable){let Fe;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Z.crossTileID]&&this.prevPlacement.placements[Z.crossTileID]&&this.prevPlacement.placements[Z.crossTileID].text&&(Fe=this.prevPlacement.variableOffsets[Z.crossTileID].anchor),Z.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Z.crossTileID]={textOffset:be,width:u,height:m,anchor:me,textBoxScale:b,prevAnchor:Fe},this.markUsedJustification(J,me,Z,se),J.allowVerticalPlacement&&(this.markUsedOrientation(J,se,Z),this.placedOrientations[Z.crossTileID]=se),{shift:fe,placedGlyphBoxes:Te}}}placeLayerBucketPart(e,n,u){let{bucket:m,layout:b,translationText:w,translationIcon:k,unwrappedTileID:E,pitchedLabelPlaneMatrix:z,textPixelRatio:O,holdingForFade:N,collisionBoxArray:j,partiallyEvaluatedTextSize:Z,collisionGroup:J}=e.parameters,se=b.get("text-optional"),le=b.get("icon-optional"),oe=a.aQ(b,"text-overlap","text-allow-overlap"),de=oe==="always",ye=a.aQ(b,"icon-overlap","icon-allow-overlap"),ue=ye==="always",me=b.get("text-rotation-alignment")==="map",be=b.get("text-pitch-alignment")==="map",fe=b.get("icon-text-fit")!=="none",Te=b.get("symbol-z-order")==="viewport-y",Fe=de&&(ue||!m.hasIconData()||le),Oe=ue&&(de||!m.hasTextData()||se);!m.collisionArrays&&j&&m.deserializeCollisionBoxes(j);let Re=this.retainedQueryData[m.bucketInstanceId].tileID,Be=this._getTerrainElevationFunc(Re),Je=this.transform.getFastPathSimpleProjectionMatrix(Re),et=($e,ot,Rt)=>{var bi,ji;if(n[$e.crossTileID])return;if(N)return void(this.placements[$e.crossTileID]=new Ki(!1,!1,!1));let Li=!1,Zi=!1,Di=!0,sr=null,Hi={box:null,placeable:!1,offscreen:null,occluded:!1},Dr={placeable:!1},_r=null,dr=null,Hr=null,Ks=0,hs=0,qa=0;ot.textFeatureIndex?Ks=ot.textFeatureIndex:$e.useRuntimeCollisionCircles&&(Ks=$e.featureIndex),ot.verticalTextFeatureIndex&&(hs=ot.verticalTextFeatureIndex);let Sn=ot.textBox;if(Sn){let ea=Ri=>{let Oi=a.az.horizontal;if(m.allowVerticalPlacement&&!Ri&&this.prevPlacement){let Pr=this.prevPlacement.placedOrientations[$e.crossTileID];Pr&&(this.placedOrientations[$e.crossTileID]=Pr,Oi=Pr,this.markUsedOrientation(m,Oi,$e))}return Oi},Va=(Ri,Oi)=>{if(m.allowVerticalPlacement&&$e.numVerticalGlyphVertices>0&&ot.verticalTextBox){for(let Pr of m.writingModes)if(Pr===a.az.vertical?(Hi=Oi(),Dr=Hi):Hi=Ri(),Hi&&Hi.placeable)break}else Hi=Ri()},xa=$e.textAnchorOffsetStartIndex,wa=$e.textAnchorOffsetEndIndex;if(wa===xa){let Ri=(Oi,Pr)=>{let Er=this.collisionIndex.placeCollisionBox(Oi,oe,O,Re,E,be,me,w,J.predicate,Be,void 0,Je);return Er&&Er.placeable&&(this.markUsedOrientation(m,Pr,$e),this.placedOrientations[$e.crossTileID]=Pr),Er};Va((()=>Ri(Sn,a.az.horizontal)),(()=>{let Oi=ot.verticalTextBox;return m.allowVerticalPlacement&&$e.numVerticalGlyphVertices>0&&Oi?Ri(Oi,a.az.vertical):{box:null,offscreen:null}})),ea(Hi&&Hi.placeable)}else{let Ri=a.aP[(ji=(bi=this.prevPlacement)===null||bi===void 0?void 0:bi.variableOffsets[$e.crossTileID])===null||ji===void 0?void 0:ji.anchor],Oi=(Er,Zh,Hh)=>{let Mo=Er.x2-Er.x1,am=Er.y2-Er.y1,$h=$e.textBoxScale,Cd=fe&&ye==="never"?Zh:null,Js=null,Qs=oe==="never"?1:2,eo="never";Ri&&Qs++;for(let kd=0;kd<Qs;kd++){for(let Pd=xa;Pd<wa;Pd++){let ru=m.textAnchorOffsets.get(Pd);if(Ri&&ru.textAnchor!==Ri)continue;let nu=this.attemptAnchorPlacement(ru,Er,Mo,am,$h,me,be,O,Re,E,J,eo,$e,m,Hh,w,k,Cd,Be);if(nu&&(Js=nu.placedGlyphBoxes,Js&&Js.placeable))return Li=!0,sr=nu.shift,Js}Ri?Ri=null:eo=oe}return u&&!Js&&(Js={box:this.collisionIndex.placeCollisionBox(Sn,"always",O,Re,E,be,me,w,J.predicate,Be,void 0,Je).box,offscreen:!1,placeable:!1,occluded:!1}),Js};Va((()=>Oi(Sn,ot.iconBox,a.az.horizontal)),(()=>{let Er=ot.verticalTextBox;return m.allowVerticalPlacement&&(!Hi||!Hi.placeable)&&$e.numVerticalGlyphVertices>0&&Er?Oi(Er,ot.verticalIconBox,a.az.vertical):{box:null,occluded:!0,offscreen:null}})),Hi&&(Li=Hi.placeable,Di=Hi.offscreen);let Pr=ea(Hi&&Hi.placeable);if(!Li&&this.prevPlacement){let Er=this.prevPlacement.variableOffsets[$e.crossTileID];Er&&(this.variableOffsets[$e.crossTileID]=Er,this.markUsedJustification(m,Er.anchor,$e,Pr))}}}if(_r=Hi,Li=_r&&_r.placeable,Di=_r&&_r.offscreen,$e.useRuntimeCollisionCircles&&$e.centerJustifiedTextSymbolIndex>=0){let ea=m.text.placedSymbolArray.get($e.centerJustifiedTextSymbolIndex),Va=a.aA(m.textSizeData,Z,ea),xa=b.get("text-padding");dr=this.collisionIndex.placeCollisionCircles(oe,ea,m.lineVertexArray,m.glyphOffsetArray,Va,E,z,u,be,J.predicate,$e.collisionCircleDiameter,xa,w,Be),dr.circles.length&&dr.collisionDetected&&!u&&a.w("Collisions detected, but collision boxes are not shown"),Li=de||dr.circles.length>0&&!dr.collisionDetected,Di=Di&&dr.offscreen}if(ot.iconFeatureIndex&&(qa=ot.iconFeatureIndex),ot.iconBox){let ea=Va=>this.collisionIndex.placeCollisionBox(Va,ye,O,Re,E,be,me,k,J.predicate,Be,fe&&sr?sr:void 0,Je);Dr&&Dr.placeable&&ot.verticalIconBox?(Hr=ea(ot.verticalIconBox),Zi=Hr.placeable):(Hr=ea(ot.iconBox),Zi=Hr.placeable),Di=Di&&Hr.offscreen}let Eo=se||$e.numHorizontalGlyphVertices===0&&$e.numVerticalGlyphVertices===0,ac=le||$e.numIconVertices===0;Eo||ac?ac?Eo||(Zi=Zi&&Li):Li=Zi&&Li:Zi=Li=Zi&&Li;let Ao=Zi&&Hr.placeable;if(Li&&_r.placeable&&this.collisionIndex.insertCollisionBox(_r.box,oe,b.get("text-ignore-placement"),m.bucketInstanceId,Dr&&Dr.placeable&&hs?hs:Ks,J.ID),Ao&&this.collisionIndex.insertCollisionBox(Hr.box,ye,b.get("icon-ignore-placement"),m.bucketInstanceId,qa,J.ID),dr&&Li&&this.collisionIndex.insertCollisionCircles(dr.circles,oe,b.get("text-ignore-placement"),m.bucketInstanceId,Ks,J.ID),u&&this.storeCollisionData(m.bucketInstanceId,Rt,ot,_r,Hr,dr),$e.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(m.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[$e.crossTileID]=new Ki((Li||Fe)&&!(_r!=null&&_r.occluded),(Zi||Oe)&&!(Hr!=null&&Hr.occluded),Di||m.justReloaded),n[$e.crossTileID]=!0};if(Te){if(e.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");let $e=m.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let ot=$e.length-1;ot>=0;--ot){let Rt=$e[ot];et(m.symbolInstances.get(Rt),m.collisionArrays[Rt],Rt)}}else for(let $e=e.symbolInstanceStart;$e<e.symbolInstanceEnd;$e++)et(m.symbolInstances.get($e),m.collisionArrays[$e],$e);m.justReloaded=!1}storeCollisionData(e,n,u,m,b,w){if(u.textBox||u.iconBox){let k,E;this.collisionBoxArrays.has(e)?k=this.collisionBoxArrays.get(e):(k=new Map,this.collisionBoxArrays.set(e,k)),k.has(n)?E=k.get(n):(E={text:null,icon:null},k.set(n,E)),u.textBox&&(E.text=m.box),u.iconBox&&(E.icon=b.box)}if(w){let k=this.collisionCircleArrays[e];k===void 0&&(k=this.collisionCircleArrays[e]=[]);for(let E=0;E<w.circles.length;E+=4)k.push(w.circles[E+0]-Ti),k.push(w.circles[E+1]-Ti),k.push(w.circles[E+2]),k.push(w.collisionDetected?1:0)}}markUsedJustification(e,n,u,m){let b;b=m===a.az.vertical?u.verticalPlacedTextSymbolIndex:{left:u.leftJustifiedTextSymbolIndex,center:u.centerJustifiedTextSymbolIndex,right:u.rightJustifiedTextSymbolIndex}[a.aR(n)];let w=[u.leftJustifiedTextSymbolIndex,u.centerJustifiedTextSymbolIndex,u.rightJustifiedTextSymbolIndex,u.verticalPlacedTextSymbolIndex];for(let k of w)k>=0&&(e.text.placedSymbolArray.get(k).crossTileID=b>=0&&k!==b?0:u.crossTileID)}markUsedOrientation(e,n,u){let m=n===a.az.horizontal||n===a.az.horizontalOnly?n:0,b=n===a.az.vertical?n:0,w=[u.leftJustifiedTextSymbolIndex,u.centerJustifiedTextSymbolIndex,u.rightJustifiedTextSymbolIndex];for(let k of w)e.text.placedSymbolArray.get(k).placedOrientation=m;u.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(u.verticalPlacedTextSymbolIndex).placedOrientation=b)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;let n=this.prevPlacement,u=!1;this.prevZoomAdjustment=n?n.zoomAdjustment(this.transform.zoom):0;let m=n?n.symbolFadeChange(e):1,b=n?n.opacities:{},w=n?n.variableOffsets:{},k=n?n.placedOrientations:{};for(let E in this.placements){let z=this.placements[E],O=b[E];O?(this.opacities[E]=new Vt(O,m,z.text,z.icon),u=u||z.text!==O.text.placed||z.icon!==O.icon.placed):(this.opacities[E]=new Vt(null,m,z.text,z.icon,z.skipFade),u=u||z.text||z.icon)}for(let E in b){let z=b[E];if(!this.opacities[E]){let O=new Vt(z,m,!1,!1);O.isHidden()||(this.opacities[E]=O,u=u||z.text.placed||z.icon.placed)}}for(let E in w)this.variableOffsets[E]||!this.opacities[E]||this.opacities[E].isHidden()||(this.variableOffsets[E]=w[E]);for(let E in k)this.placedOrientations[E]||!this.opacities[E]||this.opacities[E].isHidden()||(this.placedOrientations[E]=k[E]);if(n&&n.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");u?this.lastPlacementChangeTime=e:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=n?n.lastPlacementChangeTime:e)}updateLayerOpacities(e,n){let u={};for(let m of n){let b=m.getBucket(e);b&&m.latestFeatureIndex&&e.id===b.layerIds[0]&&this.updateBucketOpacities(b,m.tileID,u,m.collisionBoxArray)}}updateBucketOpacities(e,n,u,m){e.hasTextData()&&(e.text.opacityVertexArray.clear(),e.text.hasVisibleVertices=!1),e.hasIconData()&&(e.icon.opacityVertexArray.clear(),e.icon.hasVisibleVertices=!1),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();let b=e.layers[0],w=b.layout,k=new Vt(null,0,!1,!1,!0),E=w.get("text-allow-overlap"),z=w.get("icon-allow-overlap"),O=b._unevaluatedLayout.hasValue("text-variable-anchor")||b._unevaluatedLayout.hasValue("text-variable-anchor-offset"),N=w.get("text-rotation-alignment")==="map",j=w.get("text-pitch-alignment")==="map",Z=w.get("icon-text-fit")!=="none",J=new Vt(null,0,E&&(z||!e.hasIconData()||w.get("icon-optional")),z&&(E||!e.hasTextData()||w.get("text-optional")),!0);!e.collisionArrays&&m&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(m);let se=(oe,de,ye)=>{for(let ue=0;ue<de/4;ue++)oe.opacityVertexArray.emplaceBack(ye);oe.hasVisibleVertices=oe.hasVisibleVertices||ye!==es},le=this.collisionBoxArrays.get(e.bucketInstanceId);for(let oe=0;oe<e.symbolInstances.length;oe++){let de=e.symbolInstances.get(oe),{numHorizontalGlyphVertices:ye,numVerticalGlyphVertices:ue,crossTileID:me}=de,be=this.opacities[me];u[me]?be=k:be||(be=J,this.opacities[me]=be),u[me]=!0;let fe=de.numIconVertices>0,Te=this.placedOrientations[de.crossTileID],Fe=Te===a.az.vertical,Oe=Te===a.az.horizontal||Te===a.az.horizontalOnly;if(ye>0||ue>0){let Be=ho(be.text);se(e.text,ye,Fe?es:Be),se(e.text,ue,Oe?es:Be);let Je=be.text.isHidden();[de.rightJustifiedTextSymbolIndex,de.centerJustifiedTextSymbolIndex,de.leftJustifiedTextSymbolIndex].forEach((ot=>{ot>=0&&(e.text.placedSymbolArray.get(ot).hidden=Je||Fe?1:0)})),de.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(de.verticalPlacedTextSymbolIndex).hidden=Je||Oe?1:0);let et=this.variableOffsets[de.crossTileID];et&&this.markUsedJustification(e,et.anchor,de,Te);let $e=this.placedOrientations[de.crossTileID];$e&&(this.markUsedJustification(e,"left",de,$e),this.markUsedOrientation(e,$e,de))}if(fe){let Be=ho(be.icon),Je=!(Z&&de.verticalPlacedIconSymbolIndex&&Fe);de.placedIconSymbolIndex>=0&&(se(e.icon,de.numIconVertices,Je?Be:es),e.icon.placedSymbolArray.get(de.placedIconSymbolIndex).hidden=be.icon.isHidden()),de.verticalPlacedIconSymbolIndex>=0&&(se(e.icon,de.numVerticalIconVertices,Je?es:Be),e.icon.placedSymbolArray.get(de.verticalPlacedIconSymbolIndex).hidden=be.icon.isHidden())}let Re=le&&le.has(oe)?le.get(oe):{text:null,icon:null};if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){let Be=e.collisionArrays[oe];if(Be){let Je=new a.P(0,0);if(Be.textBox||Be.verticalTextBox){let et=!0;if(O){let $e=this.variableOffsets[me];$e?(Je=Gr($e.anchor,$e.width,$e.height,$e.textOffset,$e.textBoxScale),N&&Je._rotate(j?-this.transform.bearingInRadians:this.transform.bearingInRadians)):et=!1}if(Be.textBox||Be.verticalTextBox){let $e;Be.textBox&&($e=Fe),Be.verticalTextBox&&($e=Oe),As(e.textCollisionBox.collisionVertexArray,be.text.placed,!et||$e,Re.text,Je.x,Je.y)}}if(Be.iconBox||Be.verticalIconBox){let et=!!(!Oe&&Be.verticalIconBox),$e;Be.iconBox&&($e=et),Be.verticalIconBox&&($e=!et),As(e.iconCollisionBox.collisionVertexArray,be.icon.placed,$e,Re.icon,Z?Je.x:0,Z?Je.y:0)}}}}if(e.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.text.opacityVertexArray.length!==e.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${e.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${e.text.layoutVertexArray.length}) / 4`);if(e.icon.opacityVertexArray.length!==e.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${e.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${e.icon.layoutVertexArray.length}) / 4`);e.bucketInstanceId in this.collisionCircleArrays&&(e.collisionCircleArray=this.collisionCircleArrays[e.bucketInstanceId],delete this.collisionCircleArrays[e.bucketInstanceId])}symbolFadeChange(e){return this.fadeDuration===0?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,n){let u=this.zoomAtLastRecencyCheck===n?1-this.zoomAdjustment(n):1;return this.zoomAtLastRecencyCheck=n,this.commitTime+this.fadeDuration*u>e}setStale(){this.stale=!0}}function As(_,e,n,u,m,b){u&&u.length!==0||(u=[0,0,0,0]);let w=u[0]-Ti,k=u[1]-Ti,E=u[2]-Ti,z=u[3]-Ti;_.emplaceBack(e?1:0,n?1:0,m||0,b||0,w,k),_.emplaceBack(e?1:0,n?1:0,m||0,b||0,E,k),_.emplaceBack(e?1:0,n?1:0,m||0,b||0,E,z),_.emplaceBack(e?1:0,n?1:0,m||0,b||0,w,z)}let sa=Math.pow(2,25),Ji=Math.pow(2,24),Qa=Math.pow(2,17),oa=Math.pow(2,16),za=Math.pow(2,9),Yo=Math.pow(2,8),Un=Math.pow(2,1);function ho(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;let e=_.placed?1:0,n=Math.floor(127*_.opacity);return n*sa+e*Ji+n*Qa+e*oa+n*za+e*Yo+n*Un+e}let es=0;class zn{constructor(e){this._sortAcrossTiles=e.layout.get("symbol-z-order")!=="viewport-y"&&!e.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(e,n,u,m,b){let w=this._bucketParts;for(;this._currentTileIndex<e.length;)if(n.getBucketParts(w,m,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,w.sort(((k,E)=>k.sortKey-E.sortKey)));this._currentPartIndex<w.length;)if(n.placeLayerBucketPart(w[this._currentPartIndex],this._seenCrossTileIDs,u),this._currentPartIndex++,b())return!0;return!1}}class Ia{constructor(e,n,u,m,b,w,k,E){this.placement=new Ol(e,n,w,k,E),this._currentPlacementIndex=u.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=b,this._done=!1}isDone(){return this._done}continuePlacement(e,n,u){let m=ie(),b=()=>!this._forceFullPlacement&&ie()-m>2;for(;this._currentPlacementIndex>=0;){let w=n[e[this._currentPlacementIndex]],k=this.placement.collisionIndex.transform.zoom;if(w.type==="symbol"&&(!w.minzoom||w.minzoom<=k)&&(!w.maxzoom||w.maxzoom>k)){if(this._inProgressLayer||(this._inProgressLayer=new zn(w)),this._inProgressLayer.continuePlacement(u[w.source],this.placement,this._showCollisionBoxes,w,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}let Nt=512/a.a5/2;class Ms{constructor(e,n,u){this.tileID=e,this.bucketInstanceId=u,this._symbolsByKey={};let m=new Map;for(let b=0;b<n.length;b++){let w=n.get(b),k=w.key,E=m.get(k);E?E.push(w):m.set(k,[w])}for(let[b,w]of m){let k={positions:w.map((E=>({x:Math.floor(E.anchorX*Nt),y:Math.floor(E.anchorY*Nt)}))),crossTileIDs:w.map((E=>E.crossTileID))};if(k.positions.length>128){let E=new a.aT(k.positions.length,16,Uint16Array);for(let{x:z,y:O}of k.positions)E.add(z,O);E.finish(),delete k.positions,k.index=E}this._symbolsByKey[b]=k}}getScaledCoordinates(e,n){let{x:u,y:m,z:b}=this.tileID.canonical,{x:w,y:k,z:E}=n.canonical,z=Nt/Math.pow(2,E-b),O=(k*a.a5+e.anchorY)*z,N=m*a.a5*Nt;return{x:Math.floor((w*a.a5+e.anchorX)*z-u*a.a5*Nt),y:Math.floor(O-N)}}findMatches(e,n,u){let m=this.tileID.canonical.z<n.canonical.z?1:Math.pow(2,this.tileID.canonical.z-n.canonical.z);for(let b=0;b<e.length;b++){let w=e.get(b);if(w.crossTileID)continue;let k=this._symbolsByKey[w.key];if(!k)continue;let E=this.getScaledCoordinates(w,n);if(k.index){let z=k.index.range(E.x-m,E.y-m,E.x+m,E.y+m).sort();for(let O of z){let N=k.crossTileIDs[O];if(!u[N]){u[N]=!0,w.crossTileID=N;break}}}else if(k.positions)for(let z=0;z<k.positions.length;z++){let O=k.positions[z],N=k.crossTileIDs[z];if(Math.abs(O.x-E.x)<=m&&Math.abs(O.y-E.y)<=m&&!u[N]){u[N]=!0,w.crossTileID=N;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:e})=>e))}}class wc{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class po{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){let n=Math.round((e-this.lng)/360);if(n!==0)for(let u in this.indexes){let m=this.indexes[u],b={};for(let w in m){let k=m[w];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+n),b[k.tileID.key]=k}this.indexes[u]=b}this.lng=e}addBucket(e,n,u){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===n.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let b=0;b<n.symbolInstances.length;b++)n.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});let m=this.usedCrossTileIDs[e.overscaledZ];for(let b in this.indexes){let w=this.indexes[b];if(Number(b)>e.overscaledZ)for(let k in w){let E=w[k];E.tileID.isChildOf(e)&&E.findMatches(n.symbolInstances,e,m)}else{let k=w[e.scaledTo(Number(b)).key];k&&k.findMatches(n.symbolInstances,e,m)}}for(let b=0;b<n.symbolInstances.length;b++){let w=n.symbolInstances.get(b);w.crossTileID||(w.crossTileID=u.generate(),m[w.crossTileID]=!0)}return this.indexes[e.overscaledZ]===void 0&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new Ms(e,n.symbolInstances,n.bucketInstanceId),!0}removeBucketCrossTileIDs(e,n){for(let u of n.getCrossTileIDsLists())for(let m of u)delete this.usedCrossTileIDs[e][m]}removeStaleBuckets(e){let n=!1;for(let u in this.indexes){let m=this.indexes[u];for(let b in m)e[m[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(u,m[b]),delete m[b],n=!0)}return n}}class Xr{constructor(){this.layerIndexes={},this.crossTileIDs=new wc,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,n,u){let m=this.layerIndexes[e.id];m===void 0&&(m=this.layerIndexes[e.id]=new po);let b=!1,w={};m.handleWrapJump(u);for(let k of n){let E=k.getBucket(e);E&&e.id===E.layerIds[0]&&(E.bucketInstanceId||(E.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(k.tileID,E,this.crossTileIDs)&&(b=!0),w[E.bucketInstanceId]=!0)}return m.removeStaleBuckets(w)&&(b=!0),b}pruneUnusedLayers(e){let n={};e.forEach((u=>{n[u]=!0}));for(let u in this.layerIndexes)n[u]||delete this.layerIndexes[u]}}var wt="void main() {fragColor=vec4(1.0);}";let ci={prelude:ct(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:ct("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:ct("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:ct(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:ct(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:ct(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:ct(wt,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:ct(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:ct(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:ct("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:ct("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:ct(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:ct("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:ct(wt,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:ct(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:ct(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:ct(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:ct(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:ct(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:ct(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:ct(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ct(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:ct(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:ct(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:ct(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:ct(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0/u_device_pixel_ratio)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:ct(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:ct(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:ct(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:ct(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:ct(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:ct("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:ct("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:ct("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:ct("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:ct(`#ifdef GL_ES
precision highp float;
#endif
in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:ct("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function ct(_,e){let n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,u=e.match(/in ([\w]+) ([\w]+)/g),m=_.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=b?b.concat(m):m,k={};return{fragmentSource:_=_.replace(n,((E,z,O,N,j)=>(k[j]=!0,z==="define"?`
#ifndef HAS_UNIFORM_u_${j}
in ${O} ${N} ${j};
#else
uniform ${O} ${N} u_${j};
#endif
`:`
#ifdef HAS_UNIFORM_u_${j}
    ${O} ${N} ${j} = u_${j};
#endif
`))),vertexSource:e=e.replace(n,((E,z,O,N,j)=>{let Z=N==="float"?"vec2":"vec4",J=j.match(/color/)?"color":Z;return k[j]?z==="define"?`
#ifndef HAS_UNIFORM_u_${j}
uniform lowp float u_${j}_t;
in ${O} ${Z} a_${j};
out ${O} ${N} ${j};
#else
uniform ${O} ${N} u_${j};
#endif
`:J==="vec4"?`
#ifndef HAS_UNIFORM_u_${j}
    ${j} = a_${j};
#else
    ${O} ${N} ${j} = u_${j};
#endif
`:`
#ifndef HAS_UNIFORM_u_${j}
    ${j} = unpack_mix_${J}(a_${j}, u_${j}_t);
#else
    ${O} ${N} ${j} = u_${j};
#endif
`:z==="define"?`
#ifndef HAS_UNIFORM_u_${j}
uniform lowp float u_${j}_t;
in ${O} ${Z} a_${j};
#else
uniform ${O} ${N} u_${j};
#endif
`:J==="vec4"?`
#ifndef HAS_UNIFORM_u_${j}
    ${O} ${N} ${j} = a_${j};
#else
    ${O} ${N} ${j} = u_${j};
#endif
`:`
#ifndef HAS_UNIFORM_u_${j}
    ${O} ${N} ${j} = unpack_mix_${J}(a_${j}, u_${j}_t);
#else
    ${O} ${N} ${j} = u_${j};
#endif
`})),staticAttributes:u,staticUniforms:w}}class vi{constructor(e,n,u){this.vertexBuffer=e,this.indexBuffer=n,this.segments=u}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Zn=a.aU([{name:"a_pos",type:"Int16",components:2}]);let Cr="#define PROJECTION_MERCATOR",Ur="mercator";class rr{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Ur}get shaderDefine(){return Cr}get shaderPreludeCode(){return ci.projectionMercator}get vertexShaderPreludeCode(){return ci.projectionMercator.vertexSource}get subdivisionGranularity(){return a.aV.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(e){}getMeshFromTileID(e,n,u,m,b){if(this._cachedMesh)return this._cachedMesh;let w=new a.aW;w.emplaceBack(0,0),w.emplaceBack(a.a5,0),w.emplaceBack(0,a.a5),w.emplaceBack(a.a5,a.a5);let k=e.createVertexBuffer(w,Zn.members),E=a.aX.simpleSegment(0,0,4,2),z=new a.aY;z.emplaceBack(1,0,2),z.emplaceBack(1,2,3);let O=e.createIndexBuffer(z);return this._cachedMesh=new vi(k,O,E),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(e){}}class La{constructor(e=0,n=0,u=0,m=0){if(isNaN(e)||e<0||isNaN(n)||n<0||isNaN(u)||u<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=n,this.left=u,this.right=m}interpolate(e,n,u){return n.top!=null&&e.top!=null&&(this.top=a.G.number(e.top,n.top,u)),n.bottom!=null&&e.bottom!=null&&(this.bottom=a.G.number(e.bottom,n.bottom,u)),n.left!=null&&e.left!=null&&(this.left=a.G.number(e.left,n.left,u)),n.right!=null&&e.right!=null&&(this.right=a.G.number(e.right,n.right,u)),this}getCenter(e,n){let u=a.an((this.left+e-this.right)/2,0,e),m=a.an((this.top+n-this.bottom)/2,0,n);return new a.P(u,m)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new La(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function bn(_,e){if(!_.renderWorldCopies||_.lngRange)return;let n=e.lng-_.center.lng;e.lng+=n>180?-360:n<-180?360:0}function ei(_){return Math.max(0,Math.floor(_))}class ln{constructor(e,n){var u;this.applyConstrain=(m,b)=>this._constrainOverride!==null?this._constrainOverride(m,b):this._callbacks.defaultConstrain(m,b),this._callbacks=e,this._tileSize=512,this._renderWorldCopies=(n==null?void 0:n.renderWorldCopies)===void 0||!!(n!=null&&n.renderWorldCopies),this._minZoom=(n==null?void 0:n.minZoom)||0,this._maxZoom=(n==null?void 0:n.maxZoom)||22,this._minPitch=(n==null?void 0:n.minPitch)==null?0:n==null?void 0:n.minPitch,this._maxPitch=(n==null?void 0:n.maxPitch)==null?60:n==null?void 0:n.maxPitch,this._constrainOverride=(u=n==null?void 0:n.constrainOverride)!==null&&u!==void 0?u:null,this.setMaxBounds(),this._width=0,this._height=0,this._center=new a.V(0,0),this._elevation=0,this._zoom=0,this._tileZoom=ei(this._zoom),this._scale=a.aq(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new La,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(e,n,u){this._constrainOverride=e.constrainOverride,this._latRange=e.latRange,this._lngRange=e.lngRange,this._width=e.width,this._height=e.height,this._center=e.center,this._elevation=e.elevation,this._minElevationForCurrentTile=e.minElevationForCurrentTile,this._zoom=e.zoom,this._tileZoom=ei(this._zoom),this._scale=a.aq(this._zoom),this._bearingInRadians=e.bearingInRadians,this._fovInRadians=e.fovInRadians,this._pitchInRadians=e.pitchInRadians,this._rollInRadians=e.rollInRadians,this._unmodified=e.unmodified,this._edgeInsets=new La(e.padding.top,e.padding.bottom,e.padding.left,e.padding.right),this._minZoom=e.minZoom,this._maxZoom=e.maxZoom,this._minPitch=e.minPitch,this._maxPitch=e.maxPitch,this._renderWorldCopies=e.renderWorldCopies,this._cameraToCenterDistance=e.cameraToCenterDistance,this._nearZ=e.nearZ,this._farZ=e.farZ,this._autoCalculateNearFarZ=!u&&e.autoCalculateNearFarZ,n&&this.constrainInternal(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(e){this._minElevationForCurrentTile=e}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(e){this._minZoom!==e&&(this._minZoom=e,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(e){this._minPitch!==e&&(this._minPitch=e,this.setPitch(Math.max(this.pitch,e)))}get maxPitch(){return this._maxPitch}setMaxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.setPitch(Math.min(this.pitch,e)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(e){e===void 0?e=!0:e===null&&(e=!1),this._renderWorldCopies=e}get constrainOverride(){return this._constrainOverride}setConstrainOverride(e){e===void 0&&(e=null),this._constrainOverride!==e&&(this._constrainOverride=e,this.constrainInternal(),this._calcMatrices())}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(e){let n=a.W(e,-180,180)*Math.PI/180;var u,m,b,w,k,E,z,O,N;this._bearingInRadians!==n&&(this._unmodified=!1,this._bearingInRadians=n,this._calcMatrices(),this._rotationMatrix=M(),u=this._rotationMatrix,b=-this._bearingInRadians,w=(m=this._rotationMatrix)[0],k=m[1],E=m[2],z=m[3],O=Math.sin(b),N=Math.cos(b),u[0]=w*N+E*O,u[1]=k*N+z*O,u[2]=w*-O+E*N,u[3]=k*-O+z*N)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(e){let n=a.an(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==n&&(this._unmodified=!1,this._pitchInRadians=n,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(e){let n=e/180*Math.PI;this._rollInRadians!==n&&(this._unmodified=!1,this._rollInRadians=n,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return a.aZ(this._fovInRadians)}setFov(e){e=a.an(e,.1,150),this.fov!==e&&(this._unmodified=!1,this._fovInRadians=a.ap(e),this._calcMatrices())}get zoom(){return this._zoom}setZoom(e){let n=this.applyConstrain(this._center,e).zoom;this._zoom!==n&&(this._unmodified=!1,this._zoom=n,this._tileZoom=Math.max(0,Math.floor(n)),this._scale=a.aq(n),this.constrainInternal(),this._calcMatrices())}get center(){return this._center}setCenter(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this.constrainInternal(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(e){e!==this._elevation&&(this._elevation=e,this.constrainInternal(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(e,n){this._autoCalculateNearFarZ=!1,this._nearZ=e,this._farZ=n,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,n,u){this._unmodified=!1,this._edgeInsets.interpolate(e,n,u),this.constrainInternal(),this._calcMatrices()}resize(e,n,u=!0){this._width=e,this._height=n,u&&this.constrainInternal(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new zi([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(e){e?(this._lngRange=[e.getWest(),e.getEast()],this._latRange=[e.getSouth(),e.getNorth()],this.constrainInternal()):(this._lngRange=null,this._latRange=[-a.ao,a.ao])}getCameraQueryGeometry(e,n){if(n.length===1)return[n[0],e];{let{minX:u,minY:m,maxX:b,maxY:w}=a.aa.fromPoints(n).extend(e);return[new a.P(u,m),new a.P(b,m),new a.P(b,w),new a.P(u,w),new a.P(u,m)]}}constrainInternal(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;let e=this._unmodified,{center:n,zoom:u}=this.applyConstrain(this.center,this.zoom);this.setCenter(n),this.setZoom(u),this._unmodified=e,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let e=a.ar(new Float64Array(16));a.Q(e,e,[this._width/2,-this._height/2,1]),a.O(e,e,[1,-1,0]),this._clipSpaceToPixelsMatrix=e,e=a.ar(new Float64Array(16)),a.Q(e,e,[1,-1,1]),a.O(e,e,[-1,-1,0]),a.Q(e,e,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=e,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(e,n,u,m){let b=u!==void 0?u:this.bearing,w=m=m!==void 0?m:this.pitch,{distanceToCenter:k,clampedElevation:E}=this._distanceToCenterFromAltElevationPitch(n,this.elevation,w),{x:z,y:O}=Mt(w,b),N=a.a9.fromLngLat(e,n),j,Z,J=a.a_(1,N.y),se=0;do{if(se+=1,se>10)break;Z=k/J,j=new a.a9(N.x+z*Z,N.y+O*Z),J=1/j.meterInMercatorCoordinateUnits()}while(Math.abs(k-Z*J)>1e-12);return{center:j.toLngLat(),elevation:E,zoom:a.at(this.height/2/Math.tan(this.fovInRadians/2)/Z/this.tileSize)}}recalculateZoomAndCenter(e){if(this.elevation-e==0)return;let n=1/this.worldSize,u=a.as(1,this.center.lat)*this.worldSize,m=a.a9.fromLngLat(this.center,this.elevation),b=m.x/n,w=m.y/n,k=m.z/n,E=this.pitch,z=this.bearing,{x:O,y:N,z:j}=Mt(E,z),Z=this.cameraToCenterDistance,J=b+Z*-O,se=w+Z*-N,le=k+Z*j,{distanceToCenter:oe,clampedElevation:de}=this._distanceToCenterFromAltElevationPitch(le/u,e,E),ye=oe*u,ue=new a.a9((J+O*ye)*n,(se+N*ye)*n,0).toLngLat(),me=a.as(1,ue.lat),be=a.at(this.height/2/Math.tan(this.fovInRadians/2)/oe/me/this.tileSize);this._elevation=de,this._center=ue,this.setZoom(be)}_distanceToCenterFromAltElevationPitch(e,n,u){let m=-Math.cos(a.ap(u)),b=e-n,w,k=n;return m*b>=0||Math.abs(m)<.1?(w=1e4,k=e+w*m):w=-b/m,{distanceToCenter:w,clampedElevation:k}}getCameraPoint(){let e=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(e*Math.sin(this.rollInRadians),e*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){let e=a.as(1,this.center.lat)*this.worldSize;return Ce(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/e).toLngLat()}getMercatorTileCoordinates(e){if(!e)return[0,0,1,1];let n=e.canonical.z>=0?1<<e.canonical.z:Math.pow(2,e.canonical.z);return[e.canonical.x/n,e.canonical.y/n,1/n/a.a5,1/n/a.a5]}}class In{constructor(e,n){this.min=e,this.max=n,this.center=a.a$([],a.b0([],this.min,this.max),.5)}quadrant(e){let n=[e%2==0,e<2],u=a.b1(this.min),m=a.b1(this.max);for(let b=0;b<n.length;b++)u[b]=n[b]?this.min[b]:this.center[b],m[b]=n[b]?this.center[b]:this.max[b];return m[2]=this.max[2],new In(u,m)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}intersectsFrustum(e){let n=!0;for(let u=0;u<e.planes.length;u++){let m=this.intersectsPlane(e.planes[u]);if(m===0)return 0;m===1&&(n=!1)}return n?2:e.aabb.min[0]>this.max[0]||e.aabb.min[1]>this.max[1]||e.aabb.min[2]>this.max[2]||e.aabb.max[0]<this.min[0]||e.aabb.max[1]<this.min[1]||e.aabb.max[2]<this.min[2]?0:1}intersectsPlane(e){let n=e[3],u=e[3];for(let m=0;m<3;m++)e[m]>0?(n+=e[m]*this.min[m],u+=e[m]*this.max[m]):(u+=e[m]*this.min[m],n+=e[m]*this.max[m]);return n>=0?2:u<0?0:1}}class fo{distanceToTile2d(e,n,u,m){let b=m.distanceX([e,n]),w=m.distanceY([e,n]);return Math.hypot(b,w)}getWrap(e,n,u){return u}getTileBoundingVolume(e,n,u,m){var b,w;let k=0,E=0;if(m!=null&&m.terrain){let O=new a.a2(e.z,n,e.z,e.x,e.y),N=m.terrain.getMinMaxElevation(O);k=(b=N.minElevation)!==null&&b!==void 0?b:Math.min(0,u),E=(w=N.maxElevation)!==null&&w!==void 0?w:Math.max(0,u)}let z=1<<e.z;return new In([n+e.x/z,e.y/z,k],[n+(e.x+1)/z,(e.y+1)/z,E])}allowVariableZoom(e,n){let u=e.fov*(Math.abs(Math.cos(e.rollInRadians))*e.height+Math.abs(Math.sin(e.rollInRadians))*e.width)/e.height,m=a.an(78.5-u/2,0,60);return!!n.terrain||e.pitch>m}allowWorldCopies(){return!0}prepareNextFrame(){}}class Kr{constructor(e,n,u){this.points=e,this.planes=n,this.aabb=u}static fromInvProjectionMatrix(e,n=1,u=0,m,b){let w=b?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],k=Math.pow(2,u),E=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((j=>(function(Z,J,se,le){let oe=a.aH([],Z,J),de=1/oe[3]/se*le;return a.b6(oe,oe,[de,de,1/oe[3],de])})(j,e,n,k)));m&&(function(j,Z,J,se){let le=se?4:0,oe=se?0:4,de=0,ye=[],ue=[];for(let fe=0;fe<4;fe++){let Te=a.b2([],j[fe+oe],j[fe+le]),Fe=a.b7(Te);a.a$(Te,Te,1/Fe),ye.push(Fe),ue.push(Te)}for(let fe=0;fe<4;fe++){let Te=a.b8(j[fe+le],ue[fe],J);de=Te!==null&&Te>=0?Math.max(de,Te):Math.max(de,ye[fe])}let me=(function(fe,Te){let Fe=a.b2([],fe[Te[0]],fe[Te[1]]),Oe=a.b2([],fe[Te[2]],fe[Te[1]]),Re=[0,0,0,0];return a.b3(Re,a.b4([],Fe,Oe)),Re[3]=-a.b5(Re,fe[Te[0]]),Re})(j,Z),be=(function(fe,Te){let Fe=a.b9(fe),Oe=a.ba([],fe,1/Fe),Re=a.b2([],Te,a.a$([],Oe,a.b5(Te,Oe))),Be=a.b9(Re);if(Be>0){let Je=Math.sqrt(1-Oe[3]*Oe[3]),et=a.a$([],Oe,-Oe[3]),$e=a.b0([],et,a.a$([],Re,Je/Be));return a.bb(Te,$e)}return null})(J,me);if(be!==null){let fe=be/a.b5(ue[0],me);de=Math.min(de,fe)}for(let fe=0;fe<4;fe++){let Te=Math.min(de,ye[fe]);j[fe+oe]=[j[fe+le][0]+ue[fe][0]*Te,j[fe+le][1]+ue[fe][1]*Te,j[fe+le][2]+ue[fe][2]*Te,1]}})(E,w[0],m,b);let z=w.map((j=>{let Z=a.b2([],E[j[0]],E[j[1]]),J=a.b2([],E[j[2]],E[j[1]]),se=a.b3([],a.b4([],Z,J)),le=-a.b5(se,E[j[1]]);return se.concat(le)})),O=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],N=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(let j of E)for(let Z=0;Z<3;Z++)O[Z]=Math.min(O[Z],j[Z]),N[Z]=Math.max(N[Z],j[Z]);return new Kr(E,z,new In(O,N))}}class Da{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(e){this._helper.setMinZoom(e)}setMaxZoom(e){this._helper.setMaxZoom(e)}setMinPitch(e){this._helper.setMinPitch(e)}setMaxPitch(e){this._helper.setMaxPitch(e)}setRenderWorldCopies(e){this._helper.setRenderWorldCopies(e)}setBearing(e){this._helper.setBearing(e)}setPitch(e){this._helper.setPitch(e)}setRoll(e){this._helper.setRoll(e)}setFov(e){this._helper.setFov(e)}setZoom(e){this._helper.setZoom(e)}setCenter(e){this._helper.setCenter(e)}setElevation(e){this._helper.setElevation(e)}setMinElevationForCurrentTile(e){this._helper.setMinElevationForCurrentTile(e)}setPadding(e){this._helper.setPadding(e)}interpolatePadding(e,n,u){return this._helper.interpolatePadding(e,n,u)}isPaddingEqual(e){return this._helper.isPaddingEqual(e)}resize(e,n,u=!0){this._helper.resize(e,n,u)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(e){this._helper.setMaxBounds(e)}setConstrainOverride(e){this._helper.setConstrainOverride(e)}overrideNearFarZ(e,n){this._helper.overrideNearFarZ(e,n)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(e){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),e)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(e,n){}constructor(e){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this.defaultConstrain=(n,u)=>{u=a.an(+u,this.minZoom,this.maxZoom);let m={center:new a.V(n.lng,n.lat),zoom:u},b=this._helper._lngRange;if(!this._helper._renderWorldCopies&&b===null){let ue=179.9999999999;b=[-ue,ue]}let w=this.tileSize*a.aq(m.zoom),k=0,E=w,z=0,O=w,N=0,j=0,{x:Z,y:J}=this.size;if(this._helper._latRange){let ue=this._helper._latRange;k=a.X(ue[1])*w,E=a.X(ue[0])*w,E-k<J&&(N=J/(E-k))}b&&(z=a.W(a.Y(b[0])*w,0,w),O=a.W(a.Y(b[1])*w,0,w),O<z&&(O+=w),O-z<Z&&(j=Z/(O-z)));let{x:se,y:le}=Ee(w,n),oe,de,ye=Math.max(j||0,N||0);if(ye){let ue=new a.P(j?(O+z)/2:se,N?(E+k)/2:le);return m.center=Ze(w,ue).wrap(),m.zoom+=a.at(ye),m}if(this._helper._latRange){let ue=J/2;le-ue<k&&(de=k+ue),le+ue>E&&(de=E-ue)}if(b){let ue=(z+O)/2,me=se;this._helper._renderWorldCopies&&(me=a.W(se,ue-w/2,ue+w/2));let be=Z/2;me-be<z&&(oe=z+be),me+be>O&&(oe=O-be)}if(oe!==void 0||de!==void 0){let ue=new a.P(oe!=null?oe:se,de!=null?de:le);m.center=Ze(w,ue).wrap()}return m},this.applyConstrain=(n,u)=>this._helper.applyConstrain(n,u),this._helper=new ln({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(n,u)=>this.defaultConstrain(n,u)},e),this._coveringTilesDetailsProvider=new fo}clone(){let e=new Da;return e.apply(this,!1),e}apply(e,n,u){this._helper.apply(e,n,u)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(e){let n=[new a.bc(0,e)];if(this._helper._renderWorldCopies){let u=this.screenPointToMercatorCoordinate(new a.P(0,0)),m=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,0)),b=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,this._helper._height)),w=this.screenPointToMercatorCoordinate(new a.P(0,this._helper._height)),k=Math.floor(Math.min(u.x,m.x,b.x,w.x)),E=Math.floor(Math.max(u.x,m.x,b.x,w.x)),z=1;for(let O=k-z;O<=E+z;O++)O!==0&&n.push(new a.bc(O,e))}return n}getCameraFrustum(){return Kr.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(e){let n=this.screenPointToLocation(this.centerPoint,e),u=e?e.getElevationForLngLatZoom(n,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(u)}setLocationAtPoint(e,n){let u=a.as(this.elevation,this.center.lat),m=this.screenPointToMercatorCoordinateAtZ(n,u),b=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,u),w=a.a9.fromLngLat(e),k=new a.a9(w.x-(m.x-b.x),w.y-(m.y-b.y));this.setCenter(k==null?void 0:k.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(e,n){return n?this.coordinatePoint(a.a9.fromLngLat(e),n.getElevationForLngLat(e,this),this._pixelMatrix3D):this.coordinatePoint(a.a9.fromLngLat(e))}screenPointToLocation(e,n){var u;return(u=this.screenPointToMercatorCoordinate(e,n))===null||u===void 0?void 0:u.toLngLat()}screenPointToMercatorCoordinate(e,n){if(n){let u=n.pointCoordinate(e);if(u!=null)return u}return this.screenPointToMercatorCoordinateAtZ(e)}screenPointToMercatorCoordinateAtZ(e,n){let u=n||0,m=[e.x,e.y,0,1],b=[e.x,e.y,1,1];a.aH(m,m,this._pixelMatrixInverse),a.aH(b,b,this._pixelMatrixInverse);let w=m[3],k=b[3],E=m[1]/w,z=b[1]/k,O=m[2]/w,N=b[2]/k,j=O===N?0:(u-O)/(N-O);return new a.a9(a.G.number(m[0]/w,b[0]/k,j)/this.worldSize,a.G.number(E,z,j)/this.worldSize,u)}coordinatePoint(e,n=0,u=this._pixelMatrix){let m=[e.x*this.worldSize,e.y*this.worldSize,n,1];return a.aH(m,m,u),new a.P(m[0]/m[3],m[1]/m[3])}getBounds(){let e=Math.max(0,this._helper._height/2-Ne(this));return new zi().extend(this.screenPointToLocation(new a.P(0,e))).extend(this.screenPointToLocation(new a.P(this._helper._width,e))).extend(this.screenPointToLocation(new a.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new a.P(0,this._helper._height)))}isPointOnMapSurface(e,n){return n?n.pointCoordinate(e)!=null:e.y>this.height/2-Ne(this)}calculatePosMatrix(e,n=!1,u){var m;let b=(m=e.key)!==null&&m!==void 0?m:a.bd(e.wrap,e.canonical.z,e.canonical.z,e.canonical.x,e.canonical.y),w=n?this._alignedPosMatrixCache:this._posMatrixCache;if(w.has(b)){let z=w.get(b);return u?z.f32:z.f64}let k=Xe(e,this.worldSize);a.S(k,n?this._alignedProjMatrix:this._viewProjMatrix,k);let E={f64:k,f32:new Float32Array(k)};return w.set(b,E),u?E.f32:E.f64}calculateFogMatrix(e){let n=e.key,u=this._fogMatrixCacheF32;if(u.has(n))return u.get(n);let m=Xe(e,this.worldSize);return a.S(m,this._fogMatrix,m),u.set(n,new Float32Array(m)),u.get(n)}calculateCenterFromCameraLngLatAlt(e,n,u,m){return this._helper.calculateCenterFromCameraLngLatAlt(e,n,u,m)}_calculateNearFarZIfNeeded(e,n,u){if(!this._helper.autoCalculateNearFarZ)return;let m=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),b=e-m*this._helper._pixelPerMeter/Math.cos(n),w=m<0?b:e,k=Math.PI/2+this.pitchInRadians,E=a.ap(this.fov)*(Math.abs(Math.cos(a.ap(this.roll)))*this.height+Math.abs(Math.sin(a.ap(this.roll)))*this.width)/this.height*(.5+u.y/this.height),z=Math.sin(E)*w/Math.sin(a.an(Math.PI-k-E,.01,Math.PI-.01)),O=Ne(this),N=Math.atan(O/this._helper.cameraToCenterDistance),j=a.ap(.75),Z=N>j?2*N*(.5+u.y/(2*O)):j,J=Math.sin(Z)*w/Math.sin(a.an(Math.PI-k-Z,.01,Math.PI-.01)),se=Math.min(z,J);this._helper._farZ=1.01*(Math.cos(Math.PI/2-n)*se+w),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;let e=this.centerOffset,n=Ee(this.worldSize,this.center),u=n.x,m=n.y;this._helper._pixelPerMeter=a.as(1,this.center.lat)*this.worldSize;let b=a.ap(Math.min(this.pitch,we)),w=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(b)),k;this._calculateNearFarZIfNeeded(w,b,e),k=new Float64Array(16),a.be(k,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),a.aB(this._invProjMatrix,k),k[8]=2*-e.x/this._helper._width,k[9]=2*e.y/this._helper._height,this._projectionMatrix=a.bf(k),a.Q(k,k,[1,-1,1]),a.O(k,k,[0,0,-this._helper.cameraToCenterDistance]),a.bg(k,k,-this.rollInRadians),a.bh(k,k,this.pitchInRadians),a.bg(k,k,-this.bearingInRadians),a.O(k,k,[-u,-m,0]),this._mercatorMatrix=a.Q([],k,[this.worldSize,this.worldSize,this.worldSize]),a.Q(k,k,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=a.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,k),a.O(k,k,[0,0,-this.elevation]),this._viewProjMatrix=k,this._invViewProjMatrix=a.aB([],k);let E=[0,0,-1,1];a.aH(E,E,this._invViewProjMatrix),this._cameraPosition=[E[0]/E[3],E[1]/E[3],E[2]/E[3]],this._fogMatrix=new Float64Array(16),a.be(this._fogMatrix,this.fovInRadians,this.width/this.height,w,this._helper._farZ),this._fogMatrix[8]=2*-e.x/this.width,this._fogMatrix[9]=2*e.y/this.height,a.Q(this._fogMatrix,this._fogMatrix,[1,-1,1]),a.O(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),a.bg(this._fogMatrix,this._fogMatrix,-this.rollInRadians),a.bh(this._fogMatrix,this._fogMatrix,this.pitchInRadians),a.bg(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),a.O(this._fogMatrix,this._fogMatrix,[-u,-m,0]),a.Q(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),a.O(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=a.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,k);let z=this._helper._width%2/2,O=this._helper._height%2/2,N=Math.cos(this.bearingInRadians),j=Math.sin(-this.bearingInRadians),Z=u-Math.round(u)+N*z+j*O,J=m-Math.round(m)+N*O+j*z,se=new Float64Array(k);if(a.O(se,se,[Z>.5?Z-1:Z,J>.5?J-1:J,0]),this._alignedProjMatrix=se,k=a.aB(new Float64Array(16),this._pixelMatrix),!k)throw new Error("failed to invert matrix");this._pixelMatrixInverse=k,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;let e=this.screenPointToMercatorCoordinate(new a.P(0,0)),n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return a.aH(n,n,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){let e=a.as(1,this.center.lat)*this.worldSize;return Ce(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/e).toLngLat()}lngLatToCameraDepth(e,n){let u=a.a9.fromLngLat(e),m=[u.x*this.worldSize,u.y*this.worldSize,n,1];return a.aH(m,m,this._viewProjMatrix),m[2]/m[3]}getProjectionData(e){let{overscaledTileID:n,aligned:u,applyTerrainMatrix:m}=e,b=this._helper.getMercatorTileCoordinates(n),w=n?this.calculatePosMatrix(n,u,!0):null,k;return k=n&&n.terrainRttPosMatrix32f&&m?n.terrainRttPosMatrix32f:w||a.bi(),{mainMatrix:k,tileMercatorCoords:b,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:k}}isLocationOccluded(e){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(e,n,u){return 1}transformLightDirection(e){return a.b1(e)}getRayDirectionFromPixel(e){throw new Error("Not implemented.")}projectTileCoordinates(e,n,u,m){let b=this.calculatePosMatrix(u),w;m?(w=[e,n,m(e,n),1],a.aH(w,w,b)):(w=[e,n,0,1],Ka(w,w,b));let k=w[3];return{point:new a.P(w[0]/k,w[1]/k),signedDistanceFromCamera:k,isOccluded:!1}}populateCache(e){for(let n of e)this.calculatePosMatrix(n)}getMatrixForModel(e,n){let u=a.a9.fromLngLat(e,n),m=u.meterInMercatorCoordinateUnits(),b=a.bj();return a.O(b,b,[u.x,u.y,u.z]),a.bg(b,b,Math.PI),a.bh(b,b,Math.PI/2),a.Q(b,b,[-m,m,m]),b}getProjectionDataForCustomLayer(e=!0){let n=new a.a2(0,0,0,0,0),u=this.getProjectionData({overscaledTileID:n,applyGlobeMatrix:e}),m=Xe(n,this.worldSize);a.S(m,this._viewProjMatrix,m),u.tileMercatorCoords=[0,0,1,1];let b=[a.a5,a.a5,this.worldSize/this._helper.pixelsPerMeter],w=a.bk();return a.Q(w,m,b),u.fallbackMatrix=w,u.mainMatrix=w,u}getFastPathSimpleProjectionMatrix(e){return this.calculatePosMatrix(e)}}function Ln(){a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Sc(_){if(_.useSlerp)if(_.k<1){let e=a.bl(_.startEulerAngles.roll,_.startEulerAngles.pitch,_.startEulerAngles.bearing),n=a.bl(_.endEulerAngles.roll,_.endEulerAngles.pitch,_.endEulerAngles.bearing),u=new Float64Array(4);a.bm(u,e,n,_.k);let m=a.bn(u);_.tr.setRoll(m.roll),_.tr.setPitch(m.pitch),_.tr.setBearing(m.bearing)}else _.tr.setRoll(_.endEulerAngles.roll),_.tr.setPitch(_.endEulerAngles.pitch),_.tr.setBearing(_.endEulerAngles.bearing);else _.tr.setRoll(a.G.number(_.startEulerAngles.roll,_.endEulerAngles.roll,_.k)),_.tr.setPitch(a.G.number(_.startEulerAngles.pitch,_.endEulerAngles.pitch,_.k)),_.tr.setBearing(a.G.number(_.startEulerAngles.bearing,_.endEulerAngles.bearing,_.k))}function Xo(_,e,n,u,m){let b=m.padding,w=Ee(m.worldSize,n.getNorthWest()),k=Ee(m.worldSize,n.getNorthEast()),E=Ee(m.worldSize,n.getSouthEast()),z=Ee(m.worldSize,n.getSouthWest()),O=a.ap(-u),N=w.rotate(O),j=k.rotate(O),Z=E.rotate(O),J=z.rotate(O),se=new a.P(Math.max(N.x,j.x,J.x,Z.x),Math.max(N.y,j.y,J.y,Z.y)),le=new a.P(Math.min(N.x,j.x,J.x,Z.x),Math.min(N.y,j.y,J.y,Z.y)),oe=se.sub(le),de=(m.width-(b.left+b.right+e.left+e.right))/oe.x,ye=(m.height-(b.top+b.bottom+e.top+e.bottom))/oe.y;if(ye<0||de<0)return void Ln();let ue=Math.min(a.at(m.scale*Math.min(de,ye)),_.maxZoom),me=a.P.convert(_.offset),be=new a.P((e.left-e.right)/2,(e.top-e.bottom)/2).rotate(a.ap(u)),fe=me.add(be).mult(m.scale/a.aq(ue));return{center:Ze(m.worldSize,w.add(E).div(2).sub(fe)),zoom:ue,bearing:u}}class Xt{get useGlobeControls(){return!1}handlePanInertia(e,n){let u=e.mag(),m=Math.abs(Ne(n));return{easingOffset:e.mult(Math.min(.75*m/u,1)),easingCenter:n.center}}handleMapControlsRollPitchBearingZoom(e,n){e.bearingDelta&&n.setBearing(n.bearing+e.bearingDelta),e.pitchDelta&&n.setPitch(n.pitch+e.pitchDelta),e.rollDelta&&n.setRoll(n.roll+e.rollDelta),e.zoomDelta&&n.setZoom(n.zoom+e.zoomDelta)}handleMapControlsPan(e,n,u){e.around.distSqr(n.centerPoint)<.01||n.setLocationAtPoint(u,e.around)}cameraForBoxAndBearing(e,n,u,m,b){return Xo(e,n,u,m,b)}handleJumpToCenterZoom(e,n){e.zoom!==(n.zoom!==void 0?+n.zoom:e.zoom)&&e.setZoom(+n.zoom),n.center!==void 0&&e.setCenter(a.V.convert(n.center))}handleEaseTo(e,n){let u=e.zoom,m=e.padding,b={roll:e.roll,pitch:e.pitch,bearing:e.bearing},w={roll:n.roll===void 0?e.roll:n.roll,pitch:n.pitch===void 0?e.pitch:n.pitch,bearing:n.bearing===void 0?e.bearing:n.bearing},k=n.zoom!==void 0,E=!e.isPaddingEqual(n.padding),z=!1,O=k?+n.zoom:e.zoom,N=e.centerPoint.add(n.offsetAsPoint),j=e.screenPointToLocation(N),{center:Z,zoom:J}=e.applyConstrain(a.V.convert(n.center||j),O!=null?O:u);bn(e,Z);let se=Ee(e.worldSize,j),le=Ee(e.worldSize,Z).sub(se),oe=a.aq(J-u);return z=J!==u,{easeFunc:de=>{if(z&&e.setZoom(a.G.number(u,J,de)),a.bo(b,w)||Sc({startEulerAngles:b,endEulerAngles:w,tr:e,k:de,useSlerp:b.roll!=w.roll}),E&&(e.interpolatePadding(m,n.padding,de),N=e.centerPoint.add(n.offsetAsPoint)),n.around)e.setLocationAtPoint(n.around,n.aroundPoint);else{let ye=a.aq(e.zoom-u),ue=J>u?Math.min(2,oe):Math.max(.5,oe),me=Math.pow(ue,1-de),be=Ze(e.worldSize,se.add(le.mult(de*me)).mult(ye));e.setLocationAtPoint(e.renderWorldCopies?be.wrap():be,N)}},isZooming:z,elevationCenter:Z}}handleFlyTo(e,n){let u=n.zoom!==void 0,m=e.zoom,b=e.applyConstrain(a.V.convert(n.center||n.locationAtOffset),u?+n.zoom:m),w=b.center,k=b.zoom;bn(e,w);let E=Ee(e.worldSize,n.locationAtOffset),z=Ee(e.worldSize,w).sub(E),O=z.mag(),N=a.aq(k-m),j;if(n.minZoom!==void 0){let Z=Math.min(+n.minZoom,m,k),J=e.applyConstrain(w,Z).zoom;j=a.aq(J-m)}return{easeFunc:(Z,J,se,le)=>{e.setZoom(Z===1?k:m+a.at(J));let oe=Z===1?w:Ze(e.worldSize,E.add(z.mult(se)).mult(J));e.setLocationAtPoint(e.renderWorldCopies?oe.wrap():oe,le)},scaleOfZoom:N,targetCenter:w,scaleOfMinZoom:j,pixelPathLength:O}}}class Ci{constructor(e,n,u){this.blendFunction=e,this.blendColor=n,this.mask=u}}Ci.Replace=[1,0],Ci.disabled=new Ci(Ci.Replace,a.bp.transparent,[!1,!1,!1,!1]),Ci.unblended=new Ci(Ci.Replace,a.bp.transparent,[!0,!0,!0,!0]),Ci.alphaBlended=new Ci([1,771],a.bp.transparent,[!0,!0,!0,!0]);let zr=2305;class $t{constructor(e,n,u){this.enable=e,this.mode=n,this.frontFace=u}}$t.disabled=new $t(!1,1029,zr),$t.backCCW=new $t(!0,1029,zr),$t.frontCCW=new $t(!0,1028,zr);class Ft{constructor(e,n,u){this.func=e,this.mask=n,this.range=u}}Ft.ReadOnly=!1,Ft.ReadWrite=!0,Ft.disabled=new Ft(519,Ft.ReadOnly,[0,1]);let zs=7680;class ti{constructor(e,n,u,m,b,w){this.test=e,this.ref=n,this.mask=u,this.fail=m,this.depthFail=b,this.pass=w}}ti.disabled=new ti({func:519,mask:0},0,0,zs,zs,zs);let mo=new WeakMap;function cn(_){var e;if(mo.has(_))return mo.get(_);{let n=(e=_.getParameter(_.VERSION))===null||e===void 0?void 0:e.startsWith("WebGL 2.0");return mo.set(_,n),n}}class Is{get awaitingQuery(){return!!this._readbackQueue}constructor(e){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=e;let n=e.context,u=n.gl;this._texFormat=u.RGBA,this._texType=u.UNSIGNED_BYTE;let m=new a.aW;m.emplaceBack(-1,-1),m.emplaceBack(2,-1),m.emplaceBack(-1,2);let b=new a.aY;b.emplaceBack(0,1,2),this._fullscreenTriangle=new vi(n.createVertexBuffer(m,Zn.members),n.createIndexBuffer(b),a.aX.simpleSegment(0,0,m.length,b.length)),this._resultBuffer=new Uint8Array(4),n.activeTexture.set(u.TEXTURE1);let w=u.createTexture();u.bindTexture(u.TEXTURE_2D,w),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.NEAREST),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.NEAREST),u.texImage2D(u.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=n.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(w),cn(u)&&(this._pbo=u.createBuffer(),u.bindBuffer(u.PIXEL_PACK_BUFFER,this._pbo),u.bufferData(u.PIXEL_PACK_BUFFER,4,u.STREAM_READ),u.bindBuffer(u.PIXEL_PACK_BUFFER,null))}destroy(){let e=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),e.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(e,n){let u=this._updateCount;return this._readbackQueue?u>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():u>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(e,n),this._updateCount++,this._measuredError}_bindFramebuffer(){let e=this._cachedRenderContext.context,n=e.gl;e.activeTexture.set(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,this._fbo.colorAttachment.get()),e.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(e,n){let u=this._cachedRenderContext.context,m=u.gl;if(this._bindFramebuffer(),u.viewport.set([0,0,this._texWidth,this._texHeight]),u.clear({color:a.bp.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(u,m.TRIANGLES,Ft.disabled,ti.disabled,Ci.unblended,$t.disabled,((b,w)=>({u_input:b,u_output_expected:w}))(e,n),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&cn(m)){m.bindBuffer(m.PIXEL_PACK_BUFFER,this._pbo),m.readBuffer(m.COLOR_ATTACHMENT0),m.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),m.bindBuffer(m.PIXEL_PACK_BUFFER,null);let b=m.fenceSync(m.SYNC_GPU_COMMANDS_COMPLETE,0);m.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:b}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){let e=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&cn(e)){let n=e.clientWaitSync(this._readbackQueue.sync,0,0);if(n===e.WAIT_FAILED)return a.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(n===e.TIMEOUT_EXPIRED)return;e.bindBuffer(e.PIXEL_PACK_BUFFER,this._pbo),e.getBufferSubData(e.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),e.bindBuffer(e.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),e.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Is._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(e){let n=0;return n+=e[0]/256,n+=e[1]/65536,n+=e[2]/16777216,e[3]<127&&(n=-n),n/128}}let Oa=a.a5/128;function Ko(_,e){let n=_.granularity!==void 0?Math.max(_.granularity,1):1,u=n+(_.generateBorders?2:0),m=n+(_.extendToNorthPole||_.generateBorders?1:0)+(_.extendToSouthPole||_.generateBorders?1:0),b=u+1,w=m+1,k=_.generateBorders?-1:0,E=_.generateBorders||_.extendToNorthPole?-1:0,z=n+(_.generateBorders?1:0),O=n+(_.generateBorders||_.extendToSouthPole?1:0),N=b*w,j=u*m*6,Z=b*w>65536;if(Z&&e==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");let J=Z||e==="32bit",se=new Int16Array(2*N),le=0;for(let ye=E;ye<=O;ye++)for(let ue=k;ue<=z;ue++){let me=ue/n*a.a5;ue===-1&&(me=-Oa),ue===n+1&&(me=a.a5+Oa);let be=ye/n*a.a5;ye===-1&&(be=_.extendToNorthPole?a.br:-Oa),ye===n+1&&(be=_.extendToSouthPole?a.bs:a.a5+Oa),se[le++]=me,se[le++]=be}let oe=J?new Uint32Array(j):new Uint16Array(j),de=0;for(let ye=0;ye<m;ye++)for(let ue=0;ue<u;ue++){let me=ue+1+ye*b,be=ue+(ye+1)*b,fe=ue+1+(ye+1)*b;oe[de++]=ue+ye*b,oe[de++]=be,oe[de++]=me,oe[de++]=me,oe[de++]=be,oe[de++]=fe}return{vertices:se.buffer.slice(0),indices:oe.buffer.slice(0),uses32bitIndices:J}}let go=new a.aV({fill:new a.bt(128,2),line:new a.bt(512,0),tile:new a.bt(128,32),stencil:new a.bt(128,1),circle:3});class xn{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return ci.projectionGlobe}get vertexShaderPreludeCode(){return ci.projectionMercator.vertexSource}get subdivisionGranularity(){return go}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(e){this._errorMeasurement||(this._errorMeasurement=new Is(e));let n=a.X(this._errorQueryLatitudeDegrees),u=2*Math.atan(Math.exp(Math.PI-n*Math.PI*2))-.5*Math.PI,m=this._errorMeasurement.updateErrorLoop(n,u),b=ie();m!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=m,this._errorMeasurementLastChangeTime=b);let w=Math.min(Math.max((b-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=a.bu(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,a.bv(w))}_getMeshKey(e){return`${e.granularity.toString(36)}_${e.generateBorders?"b":""}${e.extendToNorthPole?"n":""}${e.extendToSouthPole?"s":""}`}getMeshFromTileID(e,n,u,m,b){let w=(b==="stencil"?go.stencil:go.tile).getGranularityForZoomLevel(n.z);return this._getMesh(e,{granularity:w,generateBorders:u,extendToNorthPole:n.y===0&&m,extendToSouthPole:n.y===(1<<n.z)-1&&m})}_getMesh(e,n){let u=this._getMeshKey(n);if(u in this._tileMeshCache)return this._tileMeshCache[u];let m=(function(b,w){let k=Ko(w,"16bit"),E=a.aW.deserialize({arrayBuffer:k.vertices,length:k.vertices.byteLength/2/2}),z=a.aY.deserialize({arrayBuffer:k.indices,length:k.indices.byteLength/2/3});return new vi(b.createVertexBuffer(E,Zn.members),b.createIndexBuffer(z),a.aX.simpleSegment(0,0,E.length,z.length))})(e,n);return this._tileMeshCache[u]=m,m}recalculate(e){}hasTransition(){let e=ie(),n=!1;return n=n||(e-this._errorMeasurementLastChangeTime)/1e3<.7,n=n||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,n}setErrorQueryLatitudeDegrees(e){this._errorQueryLatitudeDegrees=e}}let Qu=new a.t({type:new a.D(a.u.projection.type)});class Rl extends a.E{constructor(e){super(),this._transitionable=new a.x(Qu,void 0),this.setProjection(e),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.H(0)),this._mercatorProjection=new rr,this._verticalPerspectiveProjection=new xn}get transitionState(){let e=this.properties.get("type");if(typeof e=="string"&&e==="mercator")return 0;if(typeof e=="string"&&e==="vertical-perspective")return 1;if(e instanceof a.bw){if(e.from==="vertical-perspective"&&e.to==="mercator")return 1-e.transition;if(e.from==="mercator"&&e.to==="vertical-perspective")return e.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(e){this._mercatorProjection.updateGPUdependent(e),this._verticalPerspectiveProjection.updateGPUdependent(e)}getMeshFromTileID(e,n,u,m,b){return this.currentProjection.getMeshFromTileID(e,n,u,m,b)}setProjection(e){this._transitionable.setValue("type",(e==null?void 0:e.type)||"mercator")}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}setErrorQueryLatitudeDegrees(e){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(e),this._mercatorProjection.setErrorQueryLatitudeDegrees(e)}}function Qi(_){let e=la(_.worldSize,_.center.lat);return 2*Math.PI*e}function Dn(_,e,n,u,m){let b=1/(1<<m),w=e/a.a5*b+u*b,k=a.bz((_/a.a5*b+n*b)*Math.PI*2+Math.PI,2*Math.PI),E=2*Math.atan(Math.exp(Math.PI-w*Math.PI*2))-.5*Math.PI,z=Math.cos(E),O=new Float64Array(3);return O[0]=Math.sin(k)*z,O[1]=Math.sin(E),O[2]=Math.cos(k)*z,O}function Ii(_){return(function(e,n){let u=Math.cos(n),m=new Float64Array(3);return m[0]=Math.sin(e)*u,m[1]=Math.sin(n),m[2]=Math.cos(e)*u,m})(_.lng*Math.PI/180,_.lat*Math.PI/180)}function la(_,e){return _/(2*Math.PI)/Math.cos(e*Math.PI/180)}function Bl(_){let e=Math.asin(_[1])/Math.PI*180,n=Math.sqrt(_[0]*_[0]+_[2]*_[2]);if(n>1e-6){let u=_[0]/n,m=Math.acos(_[2]/n),b=(u>0?m:-m)/Math.PI*180;return new a.V(a.W(b,-180,180),e)}return new a.V(0,e)}function Ls(_){return Math.cos(_*Math.PI/180)}function Fi(_,e){let n=Ls(_),u=Ls(e);return a.at(u/n)}function Tc(_,e){let n=_.rotate(e.bearingInRadians),u=e.zoom+Fi(e.center.lat,0),m=a.bu(1/Ls(e.center.lat),1/Ls(Math.min(Math.abs(e.center.lat),60)),a.bx(u,7,3,0,1)),b=360/Qi({worldSize:e.worldSize,center:{lat:e.center.lat}});return new a.V(e.center.lng-n.x*b*m,a.an(e.center.lat+n.y*b,-a.ao,a.ao))}function Fl(_){let e=.5*_,n=Math.sin(e),u=Math.cos(e);return Math.log(n+u)-Math.log(u-n)}function Jo(_,e,n,u){let m=_.lat+n*u;if(Math.abs(n)>1){let b=(Math.sign(_.lat+n)!==Math.sign(_.lat)?-Math.abs(_.lat):Math.abs(_.lat))*Math.PI/180,w=Math.abs(_.lat+n)*Math.PI/180,k=Fl(b+u*(w-b)),E=Fl(b),z=Fl(w);return new a.V(_.lng+e*((k-E)/(z-E)),m)}return new a.V(_.lng+e*u,m)}class ed{constructor(e){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=e}swapBuffers(){if(!this._hadAnyChanges)return;let e=this._cachePrevious;this._cachePrevious=this._cache,this._cache=e,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(e,n,u,m){let b=`${e.z}_${e.x}_${e.y}_${m!=null&&m.terrain?"t":""}`,w=this._cache.get(b);if(w)return w;let k=this._cachePrevious.get(b);if(k)return this._cache.set(b,k),k;let E=this._boundingVolumeFactory(e,n,u,m);return this._cache.set(b,E),this._hadAnyChanges=!0,E}}class ts{constructor(e,n,u,m){this.min=u,this.max=m,this.points=e,this.planes=n}static fromAabb(e,n){let u=[];for(let m=0;m<8;m++)u.push([1&~m?e[0]:n[0],(m>>1&1)==1?n[1]:e[1],(m>>2&1)==1?n[2]:e[2]]);return new ts(u,[[-1,0,0,n[0]],[1,0,0,-e[0]],[0,-1,0,n[1]],[0,1,0,-e[1]],[0,0,-1,n[2]],[0,0,1,-e[2]]],e,n)}static fromCenterSizeAngles(e,n,u){let m=a.bB([],u[0],u[1],u[2]),b=a.bC([],[n[0],0,0],m),w=a.bC([],[0,n[1],0],m),k=a.bC([],[0,0,n[2]],m),E=[...e],z=[...e];for(let N=0;N<8;N++)for(let j=0;j<3;j++){let Z=e[j]+b[j]*(1&~N?-1:1)+w[j]*((N>>1&1)==1?1:-1)+k[j]*((N>>2&1)==1?1:-1);E[j]=Math.min(E[j],Z),z[j]=Math.max(z[j],Z)}let O=[];for(let N=0;N<8;N++){let j=[...e];a.b0(j,j,a.a$([],b,1&~N?-1:1)),a.b0(j,j,a.a$([],w,(N>>1&1)==1?1:-1)),a.b0(j,j,a.a$([],k,(N>>2&1)==1?1:-1)),O.push(j)}return new ts(O,[[...b,-a.b5(b,O[0])],[...w,-a.b5(w,O[0])],[...k,-a.b5(k,O[0])],[-b[0],-b[1],-b[2],-a.b5(b,O[7])],[-w[0],-w[1],-w[2],-a.b5(w,O[7])],[-k[0],-k[1],-k[2],-a.b5(k,O[7])]],E,z)}intersectsFrustum(e){let n=!0,u=this.points.length,m=this.planes.length,b=e.planes.length,w=e.points.length;for(let k=0;k<b;k++){let E=e.planes[k],z=0;for(let O=0;O<u;O++){let N=this.points[O];E[0]*N[0]+E[1]*N[1]+E[2]*N[2]+E[3]>=0&&z++}if(z===0)return 0;z<u&&(n=!1)}if(n)return 2;for(let k=0;k<m;k++){let E=this.planes[k],z=0;for(let O=0;O<w;O++){let N=e.points[O];E[0]*N[0]+E[1]*N[1]+E[2]*N[2]+E[3]>=0&&z++}if(z===0)return 0}return 1}intersectsPlane(e){let n=this.points.length,u=0;for(let m=0;m<n;m++){let b=this.points[m];e[0]*b[0]+e[1]*b[1]+e[2]*b[2]+e[3]>=0&&u++}return u===n?2:u===0?0:1}}function yo(_,e,n){let u=_-e;return u<0?-u:Math.max(0,u-n)}function ca(_,e,n,u,m){let b=_-n,w;return w=b<0?Math.min(-b,1+b-m):b>1?Math.min(Math.max(b-m,0),1-b):0,Math.max(w,yo(e,u,m))}class ua{constructor(){this._boundingVolumeCache=new ed(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(e,n,u,m){let b=1<<u.z,w=1/b,k=u.x/b,E=u.y/b,z=2;return z=Math.min(z,ca(e,n,k,E,w)),z=Math.min(z,ca(e,n,k+.5,-E-w,w)),z=Math.min(z,ca(e,n,k+.5,2-E-w,w)),z}getWrap(e,n,u){let m=1<<n.z,b=1/m,w=n.x/m,k=yo(e.x,w,b),E=yo(e.x,w-1,b),z=yo(e.x,w+1,b),O=Math.min(k,E,z);return O===z?1:O===E?-1:0}allowVariableZoom(e,n){return pi(e,n)>4}allowWorldCopies(){return!1}getTileBoundingVolume(e,n,u,m){return this._boundingVolumeCache.getTileBoundingVolume(e,n,u,m)}_computeTileBoundingVolume(e,n,u,m){var b,w;let k=0,E=0;if(m!=null&&m.terrain){let z=new a.a2(e.z,n,e.z,e.x,e.y),O=m.terrain.getMinMaxElevation(z);k=(b=O.minElevation)!==null&&b!==void 0?b:Math.min(0,u),E=(w=O.maxElevation)!==null&&w!==void 0?w:Math.max(0,u)}if(k/=a.bE,E/=a.bE,k+=1,E+=1,e.z<=0)return ts.fromAabb([-E,-E,-E],[E,E,E]);if(e.z===1)return ts.fromAabb([e.x===0?-E:0,e.y===0?0:-E,-E],[e.x===0?0:E,e.y===0?E:0,E]);{let z=[Dn(0,0,e.x,e.y,e.z),Dn(a.a5,0,e.x,e.y,e.z),Dn(a.a5,a.a5,e.x,e.y,e.z),Dn(0,a.a5,e.x,e.y,e.z)],O=[];for(let Re of z)O.push(a.a$([],Re,E));if(E!==k)for(let Re of z)O.push(a.a$([],Re,k));e.y===0&&O.push([0,1,0]),e.y===(1<<e.z)-1&&O.push([0,-1,0]);let N=[1,1,1],j=[-1,-1,-1];for(let Re of O)for(let Be=0;Be<3;Be++)N[Be]=Math.min(N[Be],Re[Be]),j[Be]=Math.max(j[Be],Re[Be]);let Z=Dn(a.a5/2,a.a5/2,e.x,e.y,e.z),J=a.b4([],[0,1,0],Z);a.b3(J,J);let se=a.b4([],Z,J);a.b3(se,se);let le=a.b4([],z[2],z[1]);a.b3(le,le);let oe=a.b4([],z[0],z[3]);a.b3(oe,oe),O.push(a.a$([],Z,E)),e.y>=(1<<e.z)/2&&O.push(a.a$([],Dn(a.a5/2,0,e.x,e.y,e.z),E)),e.y<(1<<e.z)/2&&O.push(a.a$([],Dn(a.a5/2,a.a5,e.x,e.y,e.z),E));let de=_o(Z,O),ye=_o(se,O),ue=[-Z[0],-Z[1],-Z[2],de.max],me=[Z[0],Z[1],Z[2],-de.min],be=[-se[0],-se[1],-se[2],ye.max],fe=[se[0],se[1],se[2],-ye.min],Te=[...le,0],Fe=[...oe,0],Oe=[];return e.y===0?Oe.push(a.bD(Fe,Te,ue),a.bD(Fe,Te,me)):Oe.push(a.bD(be,Te,ue),a.bD(be,Te,me),a.bD(be,Fe,ue),a.bD(be,Fe,me)),e.y===(1<<e.z)-1?Oe.push(a.bD(Fe,Te,ue),a.bD(Fe,Te,me)):Oe.push(a.bD(fe,Te,ue),a.bD(fe,Te,me),a.bD(fe,Fe,ue),a.bD(fe,Fe,me)),new ts(Oe,[ue,me,be,fe,Te,Fe],N,j)}}}function _o(_,e){let n=1/0,u=-1/0;for(let m of e){let b=a.b5(_,m);n=Math.min(n,b),u=Math.max(u,b)}return{min:n,max:u}}class Hn{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(e){this._helper.setMinZoom(e)}setMaxZoom(e){this._helper.setMaxZoom(e)}setMinPitch(e){this._helper.setMinPitch(e)}setMaxPitch(e){this._helper.setMaxPitch(e)}setRenderWorldCopies(e){this._helper.setRenderWorldCopies(e)}setBearing(e){this._helper.setBearing(e)}setPitch(e){this._helper.setPitch(e)}setRoll(e){this._helper.setRoll(e)}setFov(e){this._helper.setFov(e)}setZoom(e){this._helper.setZoom(e)}setCenter(e){this._helper.setCenter(e)}setElevation(e){this._helper.setElevation(e)}setMinElevationForCurrentTile(e){this._helper.setMinElevationForCurrentTile(e)}setPadding(e){this._helper.setPadding(e)}interpolatePadding(e,n,u){return this._helper.interpolatePadding(e,n,u)}isPaddingEqual(e){return this._helper.isPaddingEqual(e)}resize(e,n){this._helper.resize(e,n)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(e){this._helper.setMaxBounds(e)}setConstrainOverride(e){this._helper.setConstrainOverride(e)}overrideNearFarZ(e,n){this._helper.overrideNearFarZ(e,n)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(e){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),e)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(e){}constructor(e){this._cachedClippingPlane=a.bF(),this._projectionMatrix=a.bj(),this._globeViewProjMatrix32f=a.bi(),this._globeViewProjMatrixNoCorrection=a.bj(),this._globeViewProjMatrixNoCorrectionInverted=a.bj(),this._globeProjMatrixInverted=a.bj(),this._cameraPosition=a.bA(),this._globeLatitudeErrorCorrectionRadians=0,this.defaultConstrain=(n,u)=>{let m=a.an(n.lat,-a.ao,a.ao),b=a.an(+u,this.minZoom+Fi(0,m),this.maxZoom);return{center:new a.V(n.lng,m),zoom:b}},this.applyConstrain=(n,u)=>this._helper.applyConstrain(n,u),this._helper=new ln({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(n,u)=>this.defaultConstrain(n,u)},e),this._coveringTilesDetailsProvider=new ua}clone(){let e=new Hn;return e.apply(this,!1),e}apply(e,n,u){this._globeLatitudeErrorCorrectionRadians=u||0,this._helper.apply(e,n)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){let e=a.bA();return e[0]=this._cameraPosition[0],e[1]=this._cameraPosition[1],e[2]=this._cameraPosition[2],e}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(e){let{overscaledTileID:n,applyGlobeMatrix:u}=e,m=this._helper.getMercatorTileCoordinates(n);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:m,clippingPlane:this._cachedClippingPlane,projectionTransition:u?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(e){let n=this.pitchInRadians,u=this.cameraToCenterDistance/e,m=Math.sin(n)*u,b=Math.cos(n)*u+1,w=1/Math.sqrt(m*m+b*b)*1,k=-m,E=b,z=Math.sqrt(k*k+E*E);k/=z,E/=z;let O=[0,k,E];a.bG(O,O,[0,0,0],-this.bearingInRadians),a.bH(O,O,[0,0,0],-1*this.center.lat*Math.PI/180),a.bI(O,O,[0,0,0],this.center.lng*Math.PI/180);let N=1/a.b7(O);return a.a$(O,O,N),[...O,-w*N]}isLocationOccluded(e){return!this.isSurfacePointVisible(Ii(e))}transformLightDirection(e){let n=this._helper._center.lng*Math.PI/180,u=this._helper._center.lat*Math.PI/180,m=Math.cos(u),b=[Math.sin(n)*m,Math.sin(u),Math.cos(n)*m],w=[b[2],0,-b[0]],k=[0,0,0];a.b4(k,w,b),a.b3(w,w),a.b3(k,k);let E=[0,0,0];return a.b3(E,[w[0]*e[0]+k[0]*e[1]+b[0]*e[2],w[1]*e[0]+k[1]*e[1]+b[1]*e[2],w[2]*e[0]+k[2]*e[1]+b[2]*e[2]]),E}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(e,n,u){let m=(function(k,E,z){let O=1/(1<<z.z);return new a.a9(k/a.a5*O+z.x*O,E/a.a5*O+z.y*O)})(e,n,u.canonical),b=(w=m.y,[a.bz(m.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-w*Math.PI*2))-.5*Math.PI]);var w;return this.getCircleRadiusCorrection()/Math.cos(b[1])}projectTileCoordinates(e,n,u,m){let b=u.canonical,w=Dn(e,n,b.x,b.y,b.z),k=1+(m?m(e,n):0)/a.bE,E=[w[0]*k,w[1]*k,w[2]*k,1];a.aH(E,E,this._globeViewProjMatrixNoCorrection);let z=this._cachedClippingPlane,O=z[0]*w[0]+z[1]*w[1]+z[2]*w[2]+z[3]<0;return{point:new a.P(E[0]/E[3],E[1]/E[3]),signedDistanceFromCamera:E[3],isOccluded:O}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;let e=la(this.worldSize,this.center.lat),n=a.bk(),u=a.bk();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*e),a.be(n,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);let m=this.centerOffset;n[8]=2*-m.x/this._helper._width,n[9]=2*m.y/this._helper._height,this._projectionMatrix=a.bf(n),this._globeProjMatrixInverted=a.bk(),a.aB(this._globeProjMatrixInverted,n),a.O(n,n,[0,0,-this.cameraToCenterDistance]),a.bg(n,n,this.rollInRadians),a.bh(n,n,-this.pitchInRadians),a.bg(n,n,this.bearingInRadians),a.O(n,n,[0,0,-e]);let b=a.bA();b[0]=e,b[1]=e,b[2]=e,a.bh(u,n,this.center.lat*Math.PI/180),a.bJ(u,u,-this.center.lng*Math.PI/180),a.Q(u,u,b),this._globeViewProjMatrixNoCorrection=u,a.bh(n,n,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),a.bJ(n,n,-this.center.lng*Math.PI/180),a.Q(n,n,b),this._globeViewProjMatrix32f=new Float32Array(n),this._globeViewProjMatrixNoCorrectionInverted=a.bk(),a.aB(this._globeViewProjMatrixNoCorrectionInverted,u);let w=a.bA();this._cameraPosition=a.bA(),this._cameraPosition[2]=this.cameraToCenterDistance/e,a.bG(this._cameraPosition,this._cameraPosition,w,-this.rollInRadians),a.bH(this._cameraPosition,this._cameraPosition,w,this.pitchInRadians),a.bG(this._cameraPosition,this._cameraPosition,w,-this.bearingInRadians),a.b0(this._cameraPosition,this._cameraPosition,[0,0,1]),a.bH(this._cameraPosition,this._cameraPosition,w,-this.center.lat*Math.PI/180),a.bI(this._cameraPosition,this._cameraPosition,w,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(e);let k=a.bf(this._globeViewProjMatrixNoCorrectionInverted);a.Q(k,k,[1,1,-1]),this._cachedFrustum=Kr.fromInvProjectionMatrix(k,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(e){a.w("calculateFogMatrix is not supported on globe projection.");let n=a.bk();return a.ar(n),n}getVisibleUnwrappedCoordinates(e){return[new a.bc(0,e)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(e){e&&a.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(e,n){if(!this._globeViewProjMatrixNoCorrection)return 1;let u=Ii(e);a.a$(u,u,1+n/a.bE);let m=a.bF();return a.aH(m,[u[0],u[1],u[2],1],this._globeViewProjMatrixNoCorrection),m[2]/m[3]}populateCache(e){}getBounds(){let e=.5*this.width,n=.5*this.height,u=[new a.P(0,0),new a.P(e,0),new a.P(this.width,0),new a.P(this.width,n),new a.P(this.width,this.height),new a.P(e,this.height),new a.P(0,this.height),new a.P(0,n)],m=[];for(let N of u)m.push(this.unprojectScreenPoint(N));let b=0,w=0,k=0,E=0,z=this.center;for(let N of m){let j=a.bK(z.lng,N.lng),Z=a.bK(z.lat,N.lat);j<w&&(w=j),j>b&&(b=j),Z<E&&(E=Z),Z>k&&(k=Z)}let O=[z.lng+w,z.lat+E,z.lng+b,z.lat+k];return this.isSurfacePointOnScreen([0,1,0])&&(O[3]=90,O[0]=-180,O[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(O[1]=-90,O[0]=-180,O[2]=180),new zi(O)}calculateCenterFromCameraLngLatAlt(e,n,u,m){return this._helper.calculateCenterFromCameraLngLatAlt(e,n,u,m)}setLocationAtPoint(e,n){let u=Ii(this.unprojectScreenPoint(n)),m=Ii(e),b=a.bA();a.bL(b);let w=a.bA();a.bI(w,u,b,-this.center.lng*Math.PI/180),a.bH(w,w,b,this.center.lat*Math.PI/180);let k=m[0]*m[0]+m[2]*m[2],E=w[0]*w[0];if(k<E)return;let z=Math.sqrt(k-E),O=-z,N=a.bM(m[0],m[2],w[0],z),j=a.bM(m[0],m[2],w[0],O),Z=a.bA();a.bI(Z,m,b,-N);let J=a.bM(Z[1],Z[2],w[1],w[2]),se=a.bA();a.bI(se,m,b,-j);let le=a.bM(se[1],se[2],w[1],w[2]),oe=.5*Math.PI,de=J>=-oe&&J<=oe,ye=le>=-oe&&le<=oe,ue,me;if(de&&ye){let Fe=this.center.lng*Math.PI/180,Oe=this.center.lat*Math.PI/180;a.bN(N,Fe)+a.bN(J,Oe)<a.bN(j,Fe)+a.bN(le,Oe)?(ue=N,me=J):(ue=j,me=le)}else if(de)ue=N,me=J;else{if(!ye)return;ue=j,me=le}let be=ue/Math.PI*180,fe=me/Math.PI*180,Te=this.center.lat;this.setCenter(new a.V(be,a.an(fe,-90,90))),this.setZoom(this.zoom+Fi(Te,this.center.lat))}locationToScreenPoint(e,n){let u=Ii(e);if(n){let m=n.getElevationForLngLatZoom(e,this._helper._tileZoom);a.a$(u,u,1+m/a.bE)}return this._projectSurfacePointToScreen(u)}_projectSurfacePointToScreen(e){let n=a.bF();return a.aH(n,[...e,1],this._globeViewProjMatrixNoCorrection),n[0]/=n[3],n[1]/=n[3],new a.P((.5*n[0]+.5)*this.width,(.5*-n[1]+.5)*this.height)}screenPointToMercatorCoordinate(e,n){if(n){let u=n.pointCoordinate(e);if(u)return u}return a.a9.fromLngLat(this.unprojectScreenPoint(e))}screenPointToLocation(e,n){var u;return(u=this.screenPointToMercatorCoordinate(e,n))===null||u===void 0?void 0:u.toLngLat()}isPointOnMapSurface(e,n){let u=this._cameraPosition,m=this.getRayDirectionFromPixel(e);return!!this.rayPlanetIntersection(u,m)}getRayDirectionFromPixel(e){let n=a.bF();n[0]=e.x/this.width*2-1,n[1]=-1*(e.y/this.height*2-1),n[2]=1,n[3]=1,a.aH(n,n,this._globeViewProjMatrixNoCorrectionInverted),n[0]/=n[3],n[1]/=n[3],n[2]/=n[3];let u=a.bA();u[0]=n[0]-this._cameraPosition[0],u[1]=n[1]-this._cameraPosition[1],u[2]=n[2]-this._cameraPosition[2];let m=a.bA();return a.b3(m,u),m}isSurfacePointVisible(e){let n=this._cachedClippingPlane;return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]+n[3]>=0}isSurfacePointOnScreen(e){if(!this.isSurfacePointVisible(e))return!1;let n=a.bF();return a.aH(n,[...e,1],this._globeViewProjMatrixNoCorrection),n[0]/=n[3],n[1]/=n[3],n[2]/=n[3],n[0]>-1&&n[0]<1&&n[1]>-1&&n[1]<1&&n[2]>-1&&n[2]<1}rayPlanetIntersection(e,n){let u=a.b5(e,n),m=a.bA(),b=a.bA();a.a$(b,n,u),a.b2(m,e,b);let w=1-a.b5(m,m);if(w<0)return null;let k=a.b5(e,e)-1,E=-u+(u<0?1:-1)*Math.sqrt(w),z=k/E,O=E;return{tMin:Math.min(z,O),tMax:Math.max(z,O)}}unprojectScreenPoint(e){let n=this._cameraPosition,u=this.getRayDirectionFromPixel(e),m=this.rayPlanetIntersection(n,u);if(m){let O=a.bA();a.b0(O,n,[u[0]*m.tMin,u[1]*m.tMin,u[2]*m.tMin]);let N=a.bA();return a.b3(N,O),Bl(N)}let b=this._cachedClippingPlane,w=b[0]*u[0]+b[1]*u[1]+b[2]*u[2],k=-a.bb(b,n)/w,E=a.bA();if(k>0)a.b0(E,n,[u[0]*k,u[1]*k,u[2]*k]);else{let O=a.bA();a.b0(O,n,[2*u[0],2*u[1],2*u[2]]);let N=a.bb(this._cachedClippingPlane,O);a.b2(E,O,[this._cachedClippingPlane[0]*N,this._cachedClippingPlane[1]*N,this._cachedClippingPlane[2]*N])}let z=(function(O){let N=a.bA();return N[0]=O[0]*-O[3],N[1]=O[1]*-O[3],N[2]=O[2]*-O[3],{center:N,radius:Math.sqrt(1-O[3]*O[3])}})(b);return Bl((function(O,N,j){let Z=a.bA();a.b2(Z,j,O);let J=a.bA();return a.by(J,O,Z,N/a.b9(Z)),J})(z.center,z.radius,E))}getMatrixForModel(e,n){let u=a.V.convert(e),m=1/a.bE,b=a.bj();return a.bJ(b,b,u.lng/180*Math.PI),a.bh(b,b,-u.lat/180*Math.PI),a.O(b,b,[0,0,1+n/a.bE]),a.bh(b,b,.5*Math.PI),a.Q(b,b,[m,m,m]),b}getProjectionDataForCustomLayer(e=!0){let n=this.getProjectionData({overscaledTileID:new a.a2(0,0,0,0,0),applyGlobeMatrix:e});return n.tileMercatorCoords=[0,0,1,1],n}getFastPathSimpleProjectionMatrix(e){}}class kr{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(e){this._helper.setMinZoom(e)}setMaxZoom(e){this._helper.setMaxZoom(e)}setMinPitch(e){this._helper.setMinPitch(e)}setMaxPitch(e){this._helper.setMaxPitch(e)}setRenderWorldCopies(e){this._helper.setRenderWorldCopies(e)}setBearing(e){this._helper.setBearing(e)}setPitch(e){this._helper.setPitch(e)}setRoll(e){this._helper.setRoll(e)}setFov(e){this._helper.setFov(e)}setZoom(e){this._helper.setZoom(e)}setCenter(e){this._helper.setCenter(e)}setElevation(e){this._helper.setElevation(e)}setMinElevationForCurrentTile(e){this._helper.setMinElevationForCurrentTile(e)}setPadding(e){this._helper.setPadding(e)}interpolatePadding(e,n,u){return this._helper.interpolatePadding(e,n,u)}isPaddingEqual(e){return this._helper.isPaddingEqual(e)}resize(e,n,u=!0){this._helper.resize(e,n,u)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(e){this._helper.setMaxBounds(e)}setConstrainOverride(e){this._helper.setConstrainOverride(e)}overrideNearFarZ(e,n){this._helper.overrideNearFarZ(e,n)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(e){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),e)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(e,n){this._globeness=e,this._globeLatitudeErrorCorrectionRadians=n,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(e){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this.defaultConstrain=(n,u)=>this.currentTransform.defaultConstrain(n,u),this.applyConstrain=(n,u)=>this._helper.applyConstrain(n,u),this._helper=new ln({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(n,u)=>this.defaultConstrain(n,u)},e),this._globeness=1,this._mercatorTransform=new Da,this._verticalPerspectiveTransform=new Hn}clone(){let e=new kr;return e._globeness=this._globeness,e._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,e.apply(this,!1),e}apply(e,n){this._helper.apply(e,n),this._mercatorTransform.apply(this,!1),this._verticalPerspectiveTransform.apply(this,!1,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(e){let n=this._mercatorTransform.getProjectionData(e),u=this._verticalPerspectiveTransform.getProjectionData(e);return{mainMatrix:this.isGlobeRendering?u.mainMatrix:n.mainMatrix,clippingPlane:u.clippingPlane,tileMercatorCoords:u.tileMercatorCoords,projectionTransition:e.applyGlobeMatrix?this._globeness:0,fallbackMatrix:n.fallbackMatrix}}isLocationOccluded(e){return this.currentTransform.isLocationOccluded(e)}transformLightDirection(e){return this.currentTransform.transformLightDirection(e)}getPixelScale(){return a.bu(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return a.bu(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(e,n,u){let m=this._mercatorTransform.getPitchedTextCorrection(e,n,u),b=this._verticalPerspectiveTransform.getPitchedTextCorrection(e,n,u);return a.bu(m,b,this._globeness)}projectTileCoordinates(e,n,u,m){return this.currentTransform.projectTileCoordinates(e,n,u,m)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,!1,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(e){return this.currentTransform.calculateFogMatrix(e)}getVisibleUnwrappedCoordinates(e){return this.currentTransform.getVisibleUnwrappedCoordinates(e)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(e){this._mercatorTransform.recalculateZoomAndCenter(e),this._verticalPerspectiveTransform.recalculateZoomAndCenter(e)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(e,n){return this.currentTransform.lngLatToCameraDepth(e,n)}populateCache(e){this._mercatorTransform.populateCache(e),this._verticalPerspectiveTransform.populateCache(e)}getBounds(){return this.currentTransform.getBounds()}calculateCenterFromCameraLngLatAlt(e,n,u,m){return this._helper.calculateCenterFromCameraLngLatAlt(e,n,u,m)}setLocationAtPoint(e,n){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(e,n),void this.apply(this._mercatorTransform,!1);this._verticalPerspectiveTransform.setLocationAtPoint(e,n),this.apply(this._verticalPerspectiveTransform,!1)}locationToScreenPoint(e,n){return this.currentTransform.locationToScreenPoint(e,n)}screenPointToMercatorCoordinate(e,n){return this.currentTransform.screenPointToMercatorCoordinate(e,n)}screenPointToLocation(e,n){return this.currentTransform.screenPointToLocation(e,n)}isPointOnMapSurface(e,n){return this.currentTransform.isPointOnMapSurface(e,n)}getRayDirectionFromPixel(e){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(e)}getMatrixForModel(e,n){return this.currentTransform.getMatrixForModel(e,n)}getProjectionDataForCustomLayer(e=!0){let n=this._mercatorTransform.getProjectionDataForCustomLayer(e);if(!this.isGlobeRendering)return n;let u=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(e);return u.fallbackMatrix=n.mainMatrix,u}getFastPathSimpleProjectionMatrix(e){return this.currentTransform.getFastPathSimpleProjectionMatrix(e)}}class nr{get useGlobeControls(){return!0}handlePanInertia(e,n){let u=Tc(e,n);return Math.abs(u.lng-n.center.lng)>180&&(u.lng=n.center.lng+179.5*Math.sign(u.lng-n.center.lng)),{easingCenter:u,easingOffset:new a.P(0,0)}}handleMapControlsRollPitchBearingZoom(e,n){let u=e.around,m=n.screenPointToLocation(u);e.bearingDelta&&n.setBearing(n.bearing+e.bearingDelta),e.pitchDelta&&n.setPitch(n.pitch+e.pitchDelta),e.rollDelta&&n.setRoll(n.roll+e.rollDelta);let b=n.zoom;e.zoomDelta&&n.setZoom(n.zoom+e.zoomDelta);let w=n.zoom-b;if(w===0)return;let k=a.bK(n.center.lng,m.lng),E=k/(Math.abs(k/180)+1),z=a.bK(n.center.lat,m.lat),O=n.getRayDirectionFromPixel(u),N=n.cameraPosition,j=-1*a.b5(N,O),Z=a.bA();a.b0(Z,N,[O[0]*j,O[1]*j,O[2]*j]);let J=a.b7(Z)-1,se=Math.exp(.5*-Math.max(J-.3,0)),le=la(n.worldSize,n.center.lat)/Math.min(n.width,n.height),oe=a.bx(le,.9,.5,1,.25),de=(1-a.aq(-w))*Math.min(se,oe),ye=n.center.lat,ue=n.zoom,me=new a.V(n.center.lng+E*de,a.an(n.center.lat+z*de,-a.ao,a.ao));n.setLocationAtPoint(m,u);let be=n.center,fe=a.bx(Math.abs(k),45,85,0,1),Te=a.bx(le,.75,.35,0,1),Fe=Math.pow(Math.max(fe,Te),.25),Oe=a.bK(be.lng,me.lng),Re=a.bK(be.lat,me.lat);n.setCenter(new a.V(be.lng+Oe*Fe,be.lat+Re*Fe).wrap()),n.setZoom(ue+Fi(ye,n.center.lat))}handleMapControlsPan(e,n,u){if(!e.panDelta)return;let m=n.center.lat,b=n.zoom;n.setCenter(Tc(e.panDelta,n).wrap()),n.setZoom(b+Fi(m,n.center.lat))}cameraForBoxAndBearing(e,n,u,m,b){let w=Xo(e,n,u,m,b),k=n.left/b.width*2-1,E=(b.width-n.right)/b.width*2-1,z=n.top/b.height*-2+1,O=(b.height-n.bottom)/b.height*-2+1,N=a.bK(u.getWest(),u.getEast())<0,j=N?u.getEast():u.getWest(),Z=N?u.getWest():u.getEast(),J=Math.max(u.getNorth(),u.getSouth()),se=Math.min(u.getNorth(),u.getSouth()),le=j+.5*a.bK(j,Z),oe=J+.5*a.bK(J,se),de=b.clone();de.setCenter(w.center),de.setBearing(w.bearing),de.setPitch(0),de.setRoll(0),de.setZoom(w.zoom);let ye=de.modelViewProjectionMatrix,ue=[Ii(u.getNorthWest()),Ii(u.getNorthEast()),Ii(u.getSouthWest()),Ii(u.getSouthEast()),Ii(new a.V(Z,oe)),Ii(new a.V(j,oe)),Ii(new a.V(le,J)),Ii(new a.V(le,se))],me=Ii(w.center),be=Number.POSITIVE_INFINITY;for(let fe of ue)k<0&&(be=nr.getLesserNonNegativeNonNull(be,nr.solveVectorScale(fe,me,ye,"x",k))),E>0&&(be=nr.getLesserNonNegativeNonNull(be,nr.solveVectorScale(fe,me,ye,"x",E))),z>0&&(be=nr.getLesserNonNegativeNonNull(be,nr.solveVectorScale(fe,me,ye,"y",z))),O<0&&(be=nr.getLesserNonNegativeNonNull(be,nr.solveVectorScale(fe,me,ye,"y",O)));if(Number.isFinite(be)&&be!==0)return w.zoom=de.zoom+a.at(be),w;Ln()}handleJumpToCenterZoom(e,n){let u=e.center.lat,m=e.applyConstrain(n.center?a.V.convert(n.center):e.center,e.zoom).center;e.setCenter(m.wrap());let b=n.zoom!==void 0?+n.zoom:e.zoom+Fi(u,m.lat);e.zoom!==b&&e.setZoom(b)}handleEaseTo(e,n){let u=e.zoom,m=e.center,b=e.padding,w={roll:e.roll,pitch:e.pitch,bearing:e.bearing},k={roll:n.roll===void 0?e.roll:n.roll,pitch:n.pitch===void 0?e.pitch:n.pitch,bearing:n.bearing===void 0?e.bearing:n.bearing},E=n.zoom!==void 0,z=!e.isPaddingEqual(n.padding),O=!1,N=n.center?a.V.convert(n.center):m,j=e.applyConstrain(N,u).center;bn(e,j);let Z=e.clone();Z.setCenter(j),Z.setZoom(E?+n.zoom:u+Fi(m.lat,N.lat)),Z.setBearing(n.bearing);let J=new a.P(a.an(e.centerPoint.x+n.offsetAsPoint.x,0,e.width),a.an(e.centerPoint.y+n.offsetAsPoint.y,0,e.height));Z.setLocationAtPoint(j,J);let se=(n.offset&&n.offsetAsPoint.mag())>0?Z.center:j,le=E?+n.zoom:u+Fi(m.lat,se.lat),oe=u+Fi(m.lat,0),de=le+Fi(se.lat,0),ye=a.bK(m.lng,se.lng),ue=a.bK(m.lat,se.lat),me=a.aq(de-oe);return O=le!==u,{easeFunc:be=>{if(a.bo(w,k)||Sc({startEulerAngles:w,endEulerAngles:k,tr:e,k:be,useSlerp:w.roll!=k.roll}),z&&e.interpolatePadding(b,n.padding,be),n.around)a.w("Easing around a point is not supported under globe projection."),e.setLocationAtPoint(n.around,n.aroundPoint);else{let fe=de>oe?Math.min(2,me):Math.max(.5,me),Te=Math.pow(fe,1-be),Fe=Jo(m,ye,ue,be*Te);e.setCenter(Fe.wrap())}if(O){let fe=a.G.number(oe,de,be)+Fi(0,e.center.lat);e.setZoom(fe)}},isZooming:O,elevationCenter:se}}handleFlyTo(e,n){let u=n.zoom!==void 0,m=e.center,b=e.zoom,w=e.padding,k=!e.isPaddingEqual(n.padding),E=e.applyConstrain(a.V.convert(n.center||n.locationAtOffset),b).center,z=u?+n.zoom:e.zoom+Fi(e.center.lat,E.lat),O=e.clone();O.setCenter(E),O.setZoom(z),O.setBearing(n.bearing);let N=new a.P(a.an(e.centerPoint.x+n.offsetAsPoint.x,0,e.width),a.an(e.centerPoint.y+n.offsetAsPoint.y,0,e.height));O.setLocationAtPoint(E,N);let j=O.center;bn(e,j);let Z=(function(ue,me,be){let fe=Ii(me),Te=Ii(be),Fe=a.b5(fe,Te),Oe=Math.acos(Fe),Re=Qi(ue);return Oe/(2*Math.PI)*Re})(e,m,j),J=b+Fi(m.lat,0),se=z+Fi(j.lat,0),le=a.aq(se-J),oe;if(typeof n.minZoom=="number"){let ue=+n.minZoom+Fi(j.lat,0),me=Math.min(ue,J,se)+Fi(0,j.lat),be=e.applyConstrain(j,me).zoom+Fi(j.lat,0);oe=a.aq(be-J)}let de=a.bK(m.lng,j.lng),ye=a.bK(m.lat,j.lat);return{easeFunc:(ue,me,be,fe)=>{let Te=Jo(m,de,ye,be);k&&e.interpolatePadding(w,n.padding,ue);let Fe=ue===1?j:Te;e.setCenter(Fe.wrap());let Oe=J+a.at(me);e.setZoom(ue===1?z:Oe+Fi(0,Fe.lat))},scaleOfZoom:le,targetCenter:j,scaleOfMinZoom:oe,pixelPathLength:Z}}static solveVectorScale(e,n,u,m,b){let w=m==="x"?[u[0],u[4],u[8],u[12]]:[u[1],u[5],u[9],u[13]],k=[u[3],u[7],u[11],u[15]],E=e[0]*w[0]+e[1]*w[1]+e[2]*w[2],z=e[0]*k[0]+e[1]*k[1]+e[2]*k[2],O=n[0]*w[0]+n[1]*w[1]+n[2]*w[2],N=n[0]*k[0]+n[1]*k[1]+n[2]*k[2];return O+b*z===E+b*N||k[3]*(E-O)+w[3]*(N-z)+E*N==O*z?null:(O+w[3]-b*N-b*k[3])/(O-E-b*N+b*z)}static getLesserNonNegativeNonNull(e,n){return n!==null&&n>=0&&n<e?n:e}}class jl{constructor(e){this._globe=e,this._mercatorCameraHelper=new Xt,this._verticalPerspectiveCameraHelper=new nr}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(e,n){return this.currentHelper.handlePanInertia(e,n)}handleMapControlsRollPitchBearingZoom(e,n){return this.currentHelper.handleMapControlsRollPitchBearingZoom(e,n)}handleMapControlsPan(e,n,u){this.currentHelper.handleMapControlsPan(e,n,u)}cameraForBoxAndBearing(e,n,u,m,b){return this.currentHelper.cameraForBoxAndBearing(e,n,u,m,b)}handleJumpToCenterZoom(e,n){this.currentHelper.handleJumpToCenterZoom(e,n)}handleEaseTo(e,n){return this.currentHelper.handleEaseTo(e,n)}handleFlyTo(e,n){return this.currentHelper.handleFlyTo(e,n)}}let Ds=(_,e)=>a.B(_,e&&e.filter((n=>n.identifier!=="source.canvas"))),is=a.bO();class da extends a.E{constructor(e,n={}){var u,m;super(),this._rtlPluginLoaded=()=>{for(let w in this.tileManagers){let k=this.tileManagers[w].getSource().type;k!=="vector"&&k!=="geojson"||this.tileManagers[w].reload()}},this.map=e,this.dispatcher=new sn(gn(),e._getMapId()),this.dispatcher.registerMessageHandler("GG",((w,k)=>this.getGlyphs(w,k))),this.dispatcher.registerMessageHandler("GI",((w,k)=>this.getImages(w,k))),this.dispatcher.registerMessageHandler("GDA",((w,k)=>this.getDashes(w,k))),this.imageManager=new Et,this.imageManager.setEventedParent(this);let b=((u=e._container)===null||u===void 0?void 0:u.lang)||typeof document!="undefined"&&((m=document.documentElement)===null||m===void 0?void 0:m.lang)||void 0;this.glyphManager=new Ct(e._requestManager,n.localIdeographFontFamily,b),this.lineAtlas=new xi(256,512),this.crossTileSymbolIndex=new Xr,this._setInitialValues(),this._resetUpdates(),this.dispatcher.broadcast("SR",a.bP()),Q().on(ke,this._rtlPluginLoaded),this.on("data",(w=>{if(w.dataType!=="source"||w.sourceDataType!=="metadata")return;let k=this.tileManagers[w.sourceId];if(!k)return;let E=k.getSource();if(E&&E.vectorLayerIds)for(let z in this._layers){let O=this._layers[z];O.source===E.id&&this._validateLayer(O)}}))}_setInitialValues(){var e;this._spritesImagesIds={},this._layers={},this._order=[],this.tileManagers={},this.zoomHistory=new a.bQ,this._availableImages=[],this._globalState={},this._serializedLayers={},this.stylesheet=null,this.light=null,this.sky=null,this.projection&&(this.projection.destroy(),delete this.projection),this._loaded=!1,this._changed=!1,this._updatedLayers={},this._updatedSources={},this._changedImages={},this._glyphsDidChange=!1,this._updatedPaintProps={},this._layerOrderChanged=!1,this.crossTileSymbolIndex=new(((e=this.crossTileSymbolIndex)===null||e===void 0?void 0:e.constructor)||Object),this.pauseablePlacement=void 0,this.placement=void 0,this.z=0}setGlobalStateProperty(e,n){var u,m,b;this._checkLoaded();let w=n===null?(b=(m=(u=this.stylesheet.state)===null||u===void 0?void 0:u[e])===null||m===void 0?void 0:m.default)!==null&&b!==void 0?b:null:n;if(a.bR(w,this._globalState[e]))return this;this._globalState[e]=w,this._applyGlobalStateChanges([e])}getGlobalState(){return this._globalState}setGlobalState(e){this._checkLoaded();let n=[];for(let u in e)!a.bR(this._globalState[u],e[u].default)&&(n.push(u),this._globalState[u]=e[u].default);this._applyGlobalStateChanges(n)}_applyGlobalStateChanges(e){if(e.length===0)return;let n=new Set,u={};for(let m of e){u[m]=this._globalState[m];for(let b in this._layers){let w=this._layers[b],k=w.getLayoutAffectingGlobalStateRefs(),E=w.getPaintAffectingGlobalStateRefs(),z=w.getVisibilityAffectingGlobalStateRefs();if(k.has(m)&&n.add(w.source),E.has(m))for(let{name:O,value:N}of E.get(m))this._updatePaintProperty(w,O,N);z!=null&&z.has(m)&&(w.recalculateVisibility(),this._updateLayer(w))}}this.dispatcher.broadcast("UGS",u);for(let m in this.tileManagers)n.has(m)&&(this._reloadSource(m),this._changed=!0)}loadURL(e,n={},u){this.fire(new a.l("dataloading",{dataType:"style"})),n.validate=typeof n.validate!="boolean"||n.validate;let m=this.map._requestManager.transformRequest(e,"Style");this._loadStyleRequest=new AbortController;let b=this._loadStyleRequest;a.j(m,this._loadStyleRequest).then((w=>{this._loadStyleRequest=null,this._load(w.data,n,u)})).catch((w=>{this._loadStyleRequest=null,w&&!b.signal.aborted&&this.fire(new a.k(w))}))}loadJSON(e,n={},u){this.fire(new a.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,ne.frameAsync(this._frameRequest,this.map._ownerWindow).then((()=>{this._frameRequest=null,n.validate=n.validate!==!1,this._load(e,n,u)})).catch((()=>{}))}loadEmpty(){this.fire(new a.l("dataloading",{dataType:"style"})),this._load(is,{validate:!1})}_load(e,n,u){var m,b;let w=n.transformStyle?n.transformStyle(u,e):e;if(!n.validate||!Ds(this,a.C(w))){w=Object.assign({},w),this._loaded=!0,this.stylesheet=w;for(let k in w.sources)this.addSource(k,w.sources[k],{validate:!1});w.sprite?this._loadSprite(w.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(w.glyphs),this._createLayers(),this.light=new bt(this.stylesheet.light),this._setProjectionInternal(((m=this.stylesheet.projection)===null||m===void 0?void 0:m.type)||"mercator"),this.sky=new Pi(this.stylesheet.sky),this.map.setTerrain((b=this.stylesheet.terrain)!==null&&b!==void 0?b:null),this.fire(new a.l("data",{dataType:"style"})),this.fire(new a.l("style.load"))}}_createLayers(){var e,n,u;let m=a.bS(this.stylesheet.layers);this.setGlobalState((e=this.stylesheet.state)!==null&&e!==void 0?e:null),this.dispatcher.broadcast("SL",m),this._order=m.map((b=>b.id)),this._layers={},this._serializedLayers=null;for(let b of m){let w=a.bT(b,this._globalState);if(w.setEventedParent(this,{layer:{id:b.id}}),this._layers[b.id]=w,a.bU(w)&&this.tileManagers[w.source]){let k=(u=(n=b.paint)===null||n===void 0?void 0:n["raster-fade-duration"])!==null&&u!==void 0?u:w.paint.get("raster-fade-duration");this.tileManagers[w.source].setRasterFadeDuration(k)}}}_loadSprite(e,n=!1,u=void 0){this.imageManager.setLoaded(!1);let m=new AbortController,b;this._spriteRequest=m,(function(w,k,E,z){return a._(this,void 0,void 0,(function*(){let O=Ut(w),N=E>1?"@2x":"",j={},Z={};for(let{id:J,url:se}of O){let le=k.transformRequest(Ht(se,N,".json"),"SpriteJSON");j[J]=a.j(le,z);let oe=k.transformRequest(Ht(se,N,".png"),"SpriteImage");Z[J]=Pt.getImage(oe,z)}return yield Promise.all([...Object.values(j),...Object.values(Z)]),(function(J,se){return a._(this,void 0,void 0,(function*(){let le={};for(let oe in J){le[oe]={};let de=ne.getImageCanvasContext((yield se[oe]).data),ye=(yield J[oe]).data;for(let ue in ye){let{width:me,height:be,x:fe,y:Te,sdf:Fe,pixelRatio:Oe,stretchX:Re,stretchY:Be,content:Je,textFitWidth:et,textFitHeight:$e}=ye[ue];le[oe][ue]={data:null,pixelRatio:Oe,sdf:Fe,stretchX:Re,stretchY:Be,content:Je,textFitWidth:et,textFitHeight:$e,spriteData:{width:me,height:be,x:fe,y:Te,context:de}}}}return le}))})(j,Z)}))})(e,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((w=>{if(this._spriteRequest=null,w)for(let k in w){this._spritesImagesIds[k]=[];let E=this._spritesImagesIds[k]?this._spritesImagesIds[k].filter((z=>!(z in w))):[];for(let z of E)this.imageManager.removeImage(z),this._changedImages[z]=!0;for(let z in w[k]){let O=k==="default"?z:`${k}:${z}`;this._spritesImagesIds[k].push(O),O in this.imageManager.images?this.imageManager.updateImage(O,w[k][z],!1):this.imageManager.addImage(O,w[k][z]),n&&(this._changedImages[O]=!0)}}})).catch((w=>{this._spriteRequest=null,b=w,m.signal.aborted||this.fire(new a.k(b))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),n&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"})),u&&u(b)}))}_unloadSprite(){for(let e of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(e),this._changedImages[e]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}_validateLayer(e){let n=this.tileManagers[e.source];if(!n)return;let u=e.sourceLayer;if(!u)return;let m=n.getSource();(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(u)===-1)&&this.fire(new a.k(new Error(`Source layer "${u}" does not exist on source "${m.id}" as specified by style layer "${e.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(let e in this.tileManagers)if(!this.tileManagers[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(e,n=!1){let u=this._serializedAllLayers();if(!e||e.length===0)return Object.values(n?a.bV(u):u);let m=[];for(let b of e)if(u[b]){let w=n?a.bV(u[b]):u[b];m.push(w)}return m}_serializedAllLayers(){let e=this._serializedLayers;if(e)return e;e=this._serializedLayers={};let n=Object.keys(this._layers);for(let u of n){let m=this._layers[u];m.type!=="custom"&&(e[u]=m.serialize())}return e}hasTransitions(){var e,n,u;if(!((e=this.light)===null||e===void 0)&&e.hasTransition()||!((n=this.sky)===null||n===void 0)&&n.hasTransition()||!((u=this.projection)===null||u===void 0)&&u.hasTransition())return!0;for(let m in this.tileManagers)if(this.tileManagers[m].hasTransition())return!0;for(let m in this._layers)if(this._layers[m].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(e){if(!this._loaded)return;let n=this._changed;if(n){let m=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);(m.length||b.length)&&this._updateWorkerLayers(m,b);for(let w in this._updatedSources){let k=this._updatedSources[w];if(k==="reload")this._reloadSource(w);else{if(k!=="clear")throw new Error(`Invalid action ${k}`);this._clearSource(w)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(let w in this._updatedPaintProps)this._layers[w].updateTransitions(e);this.light.updateTransitions(e),this.sky.updateTransitions(e),this._resetUpdates()}let u={};for(let m in this.tileManagers){let b=this.tileManagers[m];u[m]=b.used,b.used=!1}for(let m of this._order){let b=this._layers[m];b.recalculate(e,this._availableImages),!b.isHidden(e.zoom)&&b.source&&(this.tileManagers[b.source].used=!0)}for(let m in u){let b=this.tileManagers[m];!!u[m]!=!!b.used&&b.fire(new a.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:m}))}this.light.recalculate(e),this.sky.recalculate(e),this.projection.recalculate(e),this.z=e.zoom,n&&this.fire(new a.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){let e=Object.keys(this._changedImages);if(e.length){for(let n in this.tileManagers)this.tileManagers[n].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(let e in this.tileManagers)this.tileManagers[e].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(e,n){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(e,!1),removedIds:n})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(e,n={}){var u;this._checkLoaded();let m=this.serialize();if(e=n.transformStyle?n.transformStyle(m,e):e,((u=n.validate)===null||u===void 0||u)&&Ds(this,a.C(e)))return!1;(e=a.bV(e)).layers=a.bS(e.layers);let b=a.bW(m,e),w=this._getOperationsToPerform(b);if(w.unimplemented.length>0)throw new Error(`Unimplemented: ${w.unimplemented.join(", ")}.`);if(w.operations.length===0)return!1;for(let k of w.operations)k();return this.stylesheet=e,this._serializedLayers=null,this.fire(new a.l("style.load",{style:this})),!0}_getOperationsToPerform(e){let n=[],u=[];for(let m of e)switch(m.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":n.push((()=>this.addLayer.apply(this,m.args)));break;case"removeLayer":n.push((()=>this.removeLayer.apply(this,m.args)));break;case"setPaintProperty":n.push((()=>this.setPaintProperty.apply(this,m.args)));break;case"setLayoutProperty":n.push((()=>this.setLayoutProperty.apply(this,m.args)));break;case"setFilter":n.push((()=>this.setFilter.apply(this,m.args)));break;case"addSource":n.push((()=>this.addSource.apply(this,m.args)));break;case"removeSource":n.push((()=>this.removeSource.apply(this,m.args)));break;case"setLayerZoomRange":n.push((()=>this.setLayerZoomRange.apply(this,m.args)));break;case"setLight":n.push((()=>this.setLight.apply(this,m.args)));break;case"setGeoJSONSourceData":n.push((()=>this.setGeoJSONSourceData.apply(this,m.args)));break;case"setGlyphs":n.push((()=>this.setGlyphs.apply(this,m.args)));break;case"setSprite":n.push((()=>this.setSprite.apply(this,m.args)));break;case"setTerrain":n.push((()=>this.map.setTerrain.apply(this,m.args)));break;case"setSky":n.push((()=>this.setSky.apply(this,m.args)));break;case"setProjection":this.setProjection.apply(this,m.args);break;case"setGlobalState":n.push((()=>this.setGlobalState.apply(this,m.args)));break;case"setTransition":n.push((()=>{}));break;default:u.push(m.command)}return{operations:n,unimplemented:u}}addImage(e,n){if(this.getImage(e))return this.fire(new a.k(new Error(`An image named "${e}" already exists.`)));this.imageManager.addImage(e,n),this._afterImageUpdated(e)}updateImage(e,n){this.imageManager.updateImage(e,n)}getImage(e){return this.imageManager.getImage(e)}removeImage(e){if(!this.getImage(e))return this.fire(new a.k(new Error(`An image named "${e}" does not exist.`)));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(e,n,u={}){if(this._checkLoaded(),this.tileManagers[e]!==void 0)throw new Error(`Source "${e}" already exists.`);if(!n.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(n).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(a.C.source,`sources.${e}`,n,null,u))return;this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);let m=this.tileManagers[e]=new Wi(e,n,this.dispatcher);m.style=this,m.setEventedParent(this,(()=>({isSourceLoaded:m.loaded(),source:m.serialize(),sourceId:e}))),m.onAdd(this.map),this._changed=!0}removeSource(e){if(this._checkLoaded(),this.tileManagers[e]===void 0)throw new Error("There is no source with this ID");for(let u in this._layers)if(this._layers[u].source===e)return this.fire(new a.k(new Error(`Source "${e}" cannot be removed while layer "${u}" is using it.`)));let n=this.tileManagers[e];delete this.tileManagers[e],delete this._updatedSources[e],n.fire(new a.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),n.setEventedParent(null),n.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(e,n){if(this._checkLoaded(),this.tileManagers[e]===void 0)throw new Error(`There is no source with this ID=${e}`);let u=this.tileManagers[e].getSource();if(u.type!=="geojson")throw new Error(`geojsonSource.type is ${u.type}, which is !== 'geojson`);u.setData(n),this._changed=!0}getSource(e){return this.tileManagers[e]&&this.tileManagers[e].getSource()}addLayer(e,n,u={}){this._checkLoaded();let m=e.id;if(this.getLayer(m))return void this.fire(new a.k(new Error(`Layer "${m}" already exists on this map.`)));let b;if(e.type==="custom"){if(Ds(this,a.bX(e)))return;b=a.bT(e,this._globalState)}else{if("source"in e&&typeof e.source=="object"&&(this.addSource(m,e.source),e=a.bV(e),e=a.e(e,{source:m})),this._validate(a.C.layer,`layers.${m}`,e,{arrayIndex:-1},u))return;b=a.bT(e,this._globalState),this._validateLayer(b),b.setEventedParent(this,{layer:{id:m}})}let w=n?this._order.indexOf(n):this._order.length;if(n&&w===-1)this.fire(new a.k(new Error(`Cannot add layer "${m}" before non-existing layer "${n}".`)));else{if(this._order.splice(w,0,m),this._layerOrderChanged=!0,this._layers[m]=b,this._removedLayers[m]&&b.source&&b.type!=="custom"){let k=this._removedLayers[m];delete this._removedLayers[m],k.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",this.tileManagers[b.source].pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map)}}moveLayer(e,n){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new a.k(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)));if(e===n)return;let u=this._order.indexOf(e);this._order.splice(u,1);let m=n?this._order.indexOf(n):this._order.length;n&&m===-1?this.fire(new a.k(new Error(`Cannot move layer "${e}" before non-existing layer "${n}".`))):(this._order.splice(m,0,e),this._layerOrderChanged=!0)}removeLayer(e){this._checkLoaded();let n=this._layers[e];if(!n)return void this.fire(new a.k(new Error(`Cannot remove non-existing layer "${e}".`)));n.setEventedParent(null);let u=this._order.indexOf(e);this._order.splice(u,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],this._serializedLayers&&delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],n.onRemove&&n.onRemove(this.map)}getLayer(e){return this._layers[e]}getLayersOrder(){return[...this._order]}hasLayer(e){return e in this._layers}setLayerZoomRange(e,n,u){this._checkLoaded();let m=this.getLayer(e);m?m.minzoom===n&&m.maxzoom===u||(n!=null&&(m.minzoom=n),u!=null&&(m.maxzoom=u),this._updateLayer(m)):this.fire(new a.k(new Error(`Cannot set the zoom range of non-existing layer "${e}".`)))}setFilter(e,n,u={}){this._checkLoaded();let m=this.getLayer(e);if(m){if(!a.bR(m.filter,n))return n==null?(m.setFilter(void 0),void this._updateLayer(m)):void(this._validate(a.C.filter,`layers.${m.id}.filter`,n,null,u)||(m.setFilter(a.bV(n)),this._updateLayer(m)))}else this.fire(new a.k(new Error(`Cannot filter non-existing layer "${e}".`)))}getFilter(e){return a.bV(this.getLayer(e).filter)}setLayoutProperty(e,n,u,m={}){this._checkLoaded();let b=this.getLayer(e);b?a.bR(b.getLayoutProperty(n),u)||(b.setLayoutProperty(n,u,m),this._updateLayer(b)):this.fire(new a.k(new Error(`Cannot style non-existing layer "${e}".`)))}getLayoutProperty(e,n){let u=this.getLayer(e);if(u)return u.getLayoutProperty(n);this.fire(new a.k(new Error(`Cannot get style of non-existing layer "${e}".`)))}setPaintProperty(e,n,u,m={}){this._checkLoaded();let b=this.getLayer(e);b?a.bR(b.getPaintProperty(n),u)||this._updatePaintProperty(b,n,u,m):this.fire(new a.k(new Error(`Cannot style non-existing layer "${e}".`)))}_updatePaintProperty(e,n,u,m={}){e.setPaintProperty(n,u,m)&&this._updateLayer(e),a.bU(e)&&n==="raster-fade-duration"&&this.tileManagers[e.source].setRasterFadeDuration(u),this._changed=!0,this._updatedPaintProps[e.id]=!0,this._serializedLayers=null}getPaintProperty(e,n){return this.getLayer(e).getPaintProperty(n)}setFeatureState(e,n){this._checkLoaded();let u=e.source,m=e.sourceLayer,b=this.tileManagers[u];if(b===void 0)return void this.fire(new a.k(new Error(`The source '${u}' does not exist in the map's style.`)));let w=b.getSource().type;w==="geojson"&&m?this.fire(new a.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):w!=="vector"||m?(e.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),b.setFeatureState(m,e.id,n)):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(e,n){this._checkLoaded();let u=e.source,m=this.tileManagers[u];if(m===void 0)return void this.fire(new a.k(new Error(`The source '${u}' does not exist in the map's style.`)));let b=m.getSource().type,w=b==="vector"?e.sourceLayer:void 0;b!=="vector"||w?n&&typeof e.id!="string"&&typeof e.id!="number"?this.fire(new a.k(new Error("A feature id is required to remove its specific state property."))):m.removeFeatureState(w,e.id,n):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(e){this._checkLoaded();let n=e.source,u=e.sourceLayer,m=this.tileManagers[n];if(m!==void 0)return m.getSource().type!=="vector"||u?(e.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),m.getFeatureState(u,e.id)):void this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.k(new Error(`The source '${n}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;let e=a.bY(this.tileManagers,(b=>b.serialize())),n=this._serializeByIds(this._order,!0),u=this.map.getTerrain()||void 0,m=this.stylesheet;return a.bZ({version:m.version,name:m.name,metadata:m.metadata,light:m.light,sky:m.sky,center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,sprite:m.sprite,glyphs:m.glyphs,transition:m.transition,projection:m.projection,sources:e,layers:n,terrain:u},(b=>b!==void 0))}_updateLayer(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&this.tileManagers[e.source].getSource().type!=="raster"&&(this._updatedSources[e.source]="reload",this.tileManagers[e.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(e){let n=w=>this._layers[w].type==="fill-extrusion",u={},m=[];for(let w=this._order.length-1;w>=0;w--){let k=this._order[w];if(n(k)){u[k]=w;for(let E of e){let z=E[k];if(z)for(let O of z)m.push(O)}}}m.sort(((w,k)=>k.intersectionZ-w.intersectionZ));let b=[];for(let w=this._order.length-1;w>=0;w--){let k=this._order[w];if(n(k))for(let E=m.length-1;E>=0;E--){let z=m[E].feature;if(u[z.layer.id]<w)break;b.push(z),m.pop()}else for(let E of e){let z=E[k];if(z)for(let O of z)b.push(O.feature)}}return b}queryRenderedFeatures(e,n,u){n&&n.filter&&this._validate(a.C.filter,"queryRenderedFeatures.filter",n.filter,null,n);let m={};if(n&&n.layers){if(!(Array.isArray(n.layers)||n.layers instanceof Set))return this.fire(new a.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(let z of n.layers){let O=this._layers[z];if(!O)return this.fire(new a.k(new Error(`The layer '${z}' does not exist in the map's style and cannot be queried for features.`))),[];m[O.source]=!0}}let b=[];n.availableImages=this._availableImages;let w=this._serializedAllLayers(),k=n.layers instanceof Set?n.layers:Array.isArray(n.layers)?new Set(n.layers):null,E=Object.assign(Object.assign({},n),{layers:k,globalState:this._globalState});for(let z in this.tileManagers)n.layers&&!m[z]||b.push(Mn(this.tileManagers[z],this._layers,w,e,E,u,this.map.terrain?(O,N,j)=>this.map.terrain.getElevation(O,N,j):void 0));return this.placement&&b.push((function(z,O,N,j,Z,J,se){let le={},oe=J.queryRenderedSymbols(j),de=[];for(let ye of Object.keys(oe).map(Number))de.push(se[ye]);de.sort(fr);for(let ye of de){let ue=ye.featureIndex.lookupSymbolFeatures(oe[ye.bucketInstanceId],O,ye.bucketIndex,ye.sourceLayerIndex,{filterSpec:Z.filter,globalState:Z.globalState},Z.layers,Z.availableImages,z);for(let me in ue){let be=le[me]=le[me]||[],fe=ue[me];fe.sort(((Te,Fe)=>{let Oe=ye.featureSortOrder;if(Oe){let Re=Oe.indexOf(Te.featureIndex);return Oe.indexOf(Fe.featureIndex)-Re}return Fe.featureIndex-Te.featureIndex}));for(let Te of fe)be.push(Te)}}return(function(ye,ue,me){for(let be in ye)for(let fe of ye[be])xr(fe,me[ue[be].source]);return ye})(le,z,N)})(this._layers,w,this.tileManagers,e,E,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(b)}querySourceFeatures(e,n){n!=null&&n.filter&&this._validate(a.C.filter,"querySourceFeatures.filter",n.filter,null,n);let u=this.tileManagers[e];return u?(function(m,b){let w=m.getRenderableIds().map((z=>m.getTileByID(z))),k=[],E={};for(let z=0;z<w.length;z++){let O=w[z],N=O.tileID.canonical.key;E[N]||(E[N]=!0,O.querySourceFeatures(k,b))}return k})(u,n?Object.assign(Object.assign({},n),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(e,n={}){this._checkLoaded();let u=this.light.getLight(),m=!1;for(let w in e)if(!a.bR(e[w],u[w])){m=!0;break}if(!m)return;let b={now:ie(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,n),this.light.updateTransitions(b)}getProjection(){var e;return(e=this.stylesheet)===null||e===void 0?void 0:e.projection}setProjection(e){if(this._checkLoaded(),this.projection){if(this.projection.name===e.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=e,this._setProjectionInternal(e.type)}getSky(){var e;return(e=this.stylesheet)===null||e===void 0?void 0:e.sky}setSky(e,n={}){this._checkLoaded();let u=this.getSky(),m=!1;if(!e&&!u)return;if(e&&!u)m=!0;else if(!e&&u)m=!0;else for(let w in e)if(!a.bR(e[w],u[w])){m=!0;break}if(!m)return;let b={now:ie(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=e,this.sky.setSky(e,n),this.sky.updateTransitions(b)}_setProjectionInternal(e){let n=(function(u,m){let b={constrainOverride:m};if(Array.isArray(u)){let w=new Rl({type:u});return{projection:w,transform:new kr(b),cameraHelper:new jl(w)}}switch(u){case"mercator":return{projection:new rr,transform:new Da(b),cameraHelper:new Xt};case"globe":{let w=new Rl({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:w,transform:new kr(b),cameraHelper:new jl(w)}}case"vertical-perspective":return{projection:new xn,transform:new Hn(b),cameraHelper:new nr};default:return a.w(`Unknown projection name: ${u}. Falling back to mercator projection.`),{projection:new rr,transform:new Da(b),cameraHelper:new Xt}}})(e,this.map.transformConstrain);this.projection=n.projection,this.map.migrateProjection(n.transform,n.cameraHelper);for(let u in this.tileManagers)this.tileManagers[u].reload()}_validate(e,n,u,m,b={}){return(!b||b.validate!==!1)&&Ds(this,e.call(a.C,a.e({key:n,style:this.serialize(),value:u,styleSpec:a.u},m)))}_remove(e=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Q().off(ke,this._rtlPluginLoaded);for(let n in this._layers)this._layers[n].setEventedParent(null);for(let n in this.tileManagers){let u=this.tileManagers[n];u.setEventedParent(null),u.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),e&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(e)}_clearSource(e){this.tileManagers[e].clearTiles()}_reloadSource(e){this.tileManagers[e].resume(),this.tileManagers[e].reload()}_updateSources(e){for(let n in this.tileManagers)this.tileManagers[n].update(e,this.map.terrain)}_generateCollisionBoxes(){for(let e in this.tileManagers)this._reloadSource(e)}_updatePlacement(e,n,u,m,b=!1){let w=!1,k=!1,E={};for(let z of this._order){let O=this._layers[z];if(O.type!=="symbol")continue;if(!E[O.source]){let j=this.tileManagers[O.source];E[O.source]=j.getRenderableIds(!0).map((Z=>j.getTileByID(Z))).sort(((Z,J)=>J.tileID.overscaledZ-Z.tileID.overscaledZ||(Z.tileID.isLessThan(J.tileID)?-1:1)))}let N=this.crossTileSymbolIndex.addLayer(O,E[O.source],e.center.lng);w=w||N}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((b=b||this._layerOrderChanged||u===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(ie(),e.zoom))&&(this.pauseablePlacement=new Ia(e,this.map.terrain,this._order,b,n,u,m,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,E),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(ie()),k=!0),w&&this.pauseablePlacement.placement.setStale()),k||w)for(let z of this._order){let O=this._layers[z];O.type==="symbol"&&this.placement.updateLayerOpacities(O,E[O.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(ie())}_releaseSymbolFadeTiles(){for(let e in this.tileManagers)this.tileManagers[e].releaseSymbolFadeTiles()}getImages(e,n){return a._(this,void 0,void 0,(function*(){let u=yield this.imageManager.getImages(n.icons);this._updateTilesForChangedImages();let m=this.tileManagers[n.source];return m&&m.setDependencies(n.tileID.key,n.type,n.icons),u}))}getGlyphs(e,n){return a._(this,void 0,void 0,(function*(){let u=yield this.glyphManager.getGlyphs(n.stacks),m=this.tileManagers[n.source];return m&&m.setDependencies(n.tileID.key,n.type,[""]),u}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(e,n={}){this._checkLoaded(),e&&this._validate(a.C.glyphs,"glyphs",e,null,n)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=e,this.glyphManager.entries={},this.glyphManager.setURL(e))}getDashes(e,n){return a._(this,void 0,void 0,(function*(){let u={};for(let[m,b]of Object.entries(n.dashes))u[m]=this.lineAtlas.getDash(b.dasharray,b.round);return u}))}addSprite(e,n,u={},m){this._checkLoaded();let b=[{id:e,url:n}],w=[...Ut(this.stylesheet.sprite),...b];this._validate(a.C.sprite,"sprite",w,null,u)||(this.stylesheet.sprite=w,this._loadSprite(b,!0,m))}removeSprite(e){this._checkLoaded();let n=Ut(this.stylesheet.sprite);if(n.find((u=>u.id===e))){if(this._spritesImagesIds[e])for(let u of this._spritesImagesIds[e])this.imageManager.removeImage(u),this._changedImages[u]=!0;n.splice(n.findIndex((u=>u.id===e)),1),this.stylesheet.sprite=n.length>0?n:void 0,delete this._spritesImagesIds[e],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}else this.fire(new a.k(new Error(`Sprite "${e}" doesn't exists on this map.`)))}getSprite(){return Ut(this.stylesheet.sprite)}setSprite(e,n={},u){this._checkLoaded(),e&&this._validate(a.C.sprite,"sprite",e,null,n)||(this.stylesheet.sprite=e,e?this._loadSprite(e,!0,u):(this._unloadSprite(),u&&u(null)))}destroy(){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null);for(let e in this.tileManagers){let n=this.tileManagers[e];n.setEventedParent(null),n.onRemove(this.map)}this.tileManagers={},this.imageManager&&(this.imageManager.setEventedParent(null),this.imageManager.destroy(),this._availableImages=[],this._spritesImagesIds={}),this.glyphManager&&this.glyphManager.destroy();for(let e in this._layers){let n=this._layers[e];n.setEventedParent(null),n.onRemove&&n.onRemove(this.map)}this._setInitialValues(),this.setEventedParent(null),this.dispatcher.unregisterMessageHandler("GG"),this.dispatcher.unregisterMessageHandler("GI"),this.dispatcher.unregisterMessageHandler("GDA"),this.dispatcher.remove(!0),this._listeners={},this._oneTimeListeners={}}}var td=a.aU([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Qo{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(e,n,u,m,b,w,k,E,z){this.context=e;let O=this.boundPaintVertexBuffers.length!==m.length;for(let N=0;!O&&N<m.length;N++)this.boundPaintVertexBuffers[N]!==m[N]&&(O=!0);!this.vao||this.boundProgram!==n||this.boundLayoutVertexBuffer!==u||O||this.boundIndexBuffer!==b||this.boundVertexOffset!==w||this.boundDynamicVertexBuffer!==k||this.boundDynamicVertexBuffer2!==E||this.boundDynamicVertexBuffer3!==z?this.freshBind(n,u,m,b,w,k,E,z):(e.bindVertexArray.set(this.vao),k&&k.bind(),b&&b.dynamicDraw&&b.bind(),E&&E.bind(),z&&z.bind())}freshBind(e,n,u,m,b,w,k,E){let z=e.numAttributes,O=this.context,N=O.gl;this.vao&&this.destroy(),this.vao=O.createVertexArray(),O.bindVertexArray.set(this.vao),this.boundProgram=e,this.boundLayoutVertexBuffer=n,this.boundPaintVertexBuffers=u,this.boundIndexBuffer=m,this.boundVertexOffset=b,this.boundDynamicVertexBuffer=w,this.boundDynamicVertexBuffer2=k,this.boundDynamicVertexBuffer3=E,n.enableAttributes(N,e);for(let j of u)j.enableAttributes(N,e);w&&w.enableAttributes(N,e),k&&k.enableAttributes(N,e),E&&E.enableAttributes(N,e),n.bind(),n.setVertexAttribPointers(N,e,b);for(let j of u)j.bind(),j.setVertexAttribPointers(N,e,b);w&&(w.bind(),w.setVertexAttribPointers(N,e,b)),m&&m.bind(),k&&(k.bind(),k.setVertexAttribPointers(N,e,b)),E&&(E.bind(),E.setVertexAttribPointers(N,e,b)),O.currentNumAttributes=z}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}let Cc=(_,e,n,u,m)=>({u_texture:0,u_ele_delta:_,u_fog_matrix:e,u_fog_color:n?n.properties.get("fog-color"):a.bp.white,u_fog_ground_blend:n?n.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:m?0:n?n.calculateFogBlendOpacity(u):0,u_horizon_color:n?n.properties.get("horizon-color"):a.bp.white,u_horizon_fog_blend:n?n.properties.get("horizon-fog-blend"):1,u_is_globe_mode:m?1:0}),Os={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Jr(_){let e=[];for(let n=0;n<_.length;n++){if(_[n]===null)continue;let u=_[n].split(" ");e.push(u.pop())}return e}class rs{constructor(e,n,u,m,b,w,k,E,z=[]){let O=e.gl;this.program=O.createProgram();let N=Jr(n.staticAttributes),j=u?u.getBinderAttributes():[],Z=N.concat(j),J=ci.prelude.staticUniforms?Jr(ci.prelude.staticUniforms):[],se=k.staticUniforms?Jr(k.staticUniforms):[],le=n.staticUniforms?Jr(n.staticUniforms):[],oe=u?u.getBinderUniforms():[],de=J.concat(se).concat(le).concat(oe),ye=[];for(let Oe of de)ye.indexOf(Oe)<0&&ye.push(Oe);let ue=u?u.defines():[];cn(O)&&ue.unshift("#version 300 es"),b&&ue.push("#define OVERDRAW_INSPECTOR;"),w&&ue.push("#define TERRAIN3D;"),E&&ue.push(E),z&&ue.push(...z);let me=ue.concat(ci.prelude.fragmentSource,k.fragmentSource,n.fragmentSource).join(`
`),be=ue.concat(ci.prelude.vertexSource,k.vertexSource,n.vertexSource).join(`
`);cn(O)||(me=(function(Oe){return Oe.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(me),be=(function(Oe){return Oe.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(be));let fe=O.createShader(O.FRAGMENT_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);if(O.shaderSource(fe,me),O.compileShader(fe),!O.getShaderParameter(fe,O.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${O.getShaderInfoLog(fe)}`);O.attachShader(this.program,fe);let Te=O.createShader(O.VERTEX_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);if(O.shaderSource(Te,be),O.compileShader(Te),!O.getShaderParameter(Te,O.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${O.getShaderInfoLog(Te)}`);O.attachShader(this.program,Te),this.attributes={};let Fe={};this.numAttributes=Z.length;for(let Oe=0;Oe<this.numAttributes;Oe++)Z[Oe]&&(O.bindAttribLocation(this.program,Oe,Z[Oe]),this.attributes[Z[Oe]]=Oe);if(O.linkProgram(this.program),!O.getProgramParameter(this.program,O.LINK_STATUS))throw new Error(`Program failed to link: ${O.getProgramInfoLog(this.program)}`);O.deleteShader(Te),O.deleteShader(fe);for(let Oe=0;Oe<ye.length;Oe++){let Re=ye[Oe];if(Re&&!Fe[Re]){let Be=O.getUniformLocation(this.program,Re);Be&&(Fe[Re]=Be)}}this.fixedUniforms=m(e,Fe),this.terrainUniforms=((Oe,Re)=>({u_depth:new a.b_(Oe,Re.u_depth),u_terrain:new a.b_(Oe,Re.u_terrain),u_terrain_dim:new a.bq(Oe,Re.u_terrain_dim),u_terrain_matrix:new a.c0(Oe,Re.u_terrain_matrix),u_terrain_unpack:new a.c1(Oe,Re.u_terrain_unpack),u_terrain_exaggeration:new a.bq(Oe,Re.u_terrain_exaggeration)}))(e,Fe),this.projectionUniforms=((Oe,Re)=>({u_projection_matrix:new a.c0(Oe,Re.u_projection_matrix),u_projection_tile_mercator_coords:new a.c1(Oe,Re.u_projection_tile_mercator_coords),u_projection_clipping_plane:new a.c1(Oe,Re.u_projection_clipping_plane),u_projection_transition:new a.bq(Oe,Re.u_projection_transition),u_projection_fallback_matrix:new a.c0(Oe,Re.u_projection_fallback_matrix)}))(e,Fe),this.binderUniforms=u?u.getUniforms(e,Fe):[]}draw(e,n,u,m,b,w,k,E,z,O,N,j,Z,J,se,le,oe,de,ye){let ue=e.gl;if(this.failedToCreate)return;if(e.program.set(this.program),e.setDepthMode(u),e.setStencilMode(m),e.setColorMode(b),e.setCullFace(w),E){e.activeTexture.set(ue.TEXTURE2),ue.bindTexture(ue.TEXTURE_2D,E.depthTexture),e.activeTexture.set(ue.TEXTURE3),ue.bindTexture(ue.TEXTURE_2D,E.texture);for(let be in this.terrainUniforms)this.terrainUniforms[be].set(E[be])}if(z)for(let be in z)this.projectionUniforms[Os[be]].set(z[be]);if(k)for(let be in this.fixedUniforms)this.fixedUniforms[be].set(k[be]);le&&le.setUniforms(e,this.binderUniforms,J,{zoom:se});let me=0;switch(n){case ue.LINES:me=2;break;case ue.TRIANGLES:me=3;break;case ue.LINE_STRIP:me=1}for(let be of Z.get()){let fe=be.vaos||(be.vaos={});(fe[O]||(fe[O]=new Qo)).bind(e,this,N,le?le.getPaintVertexBuffers():[],j,be.vertexOffset,oe,de,ye),ue.drawElements(n,be.primitiveLength*me,ue.UNSIGNED_SHORT,be.primitiveOffset*me*2)}}}function kc(_,e,n){let u=1/a.aN(n,1,e.transform.tileZoom),m=Math.pow(2,n.tileID.overscaledZ),b=n.tileSize*Math.pow(2,e.transform.tileZoom)/m,w=b*(n.tileID.canonical.x+n.tileID.wrap*m),k=b*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[u,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[w>>16,k>>16],u_pixel_coord_lower:[65535&w,65535&k]}}let On=(_,e,n,u)=>{let m=_.style.light,b=m.properties.get("position"),w=[b.x,b.y,b.z],k=a.c4();m.properties.get("anchor")==="viewport"&&a.c5(k,_.transform.bearingInRadians),a.c6(w,w,k);let E=_.transform.transformLightDirection(w),z=m.properties.get("color");return{u_lightpos:w,u_lightpos_globe:E,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[z.r,z.g,z.b],u_vertical_gradient:+e,u_opacity:n,u_fill_translate:u}},Nl=(_,e,n,u,m,b,w)=>a.e(On(_,e,n,u),kc(b,_,w),{u_height_factor:-Math.pow(2,m.overscaledZ)/w.tileSize/8}),Ra=(_,e,n,u)=>a.e(kc(e,_,n),{u_fill_translate:u}),Pc=(_,e)=>({u_world:_,u_fill_translate:e}),Rs=(_,e,n,u,m)=>a.e(Ra(_,e,n,m),{u_world:u}),ql=(_,e,n,u,m)=>{let b=_.transform,w,k,E=0;if(n.paint.get("circle-pitch-alignment")==="map"){let z=a.aN(e,1,b.zoom);w=!0,k=[z,z],E=z/(a.a5*Math.pow(2,e.tileID.overscaledZ))*2*Math.PI*m}else w=!1,k=b.pixelsToGLUnits;return{u_camera_to_center_distance:b.cameraToCenterDistance,u_scale_with_map:+(n.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+w,u_device_pixel_ratio:_.pixelRatio,u_extrude_scale:k,u_globe_extrude_scale:E,u_translate:u}},$n=_=>({u_pixel_extrude_scale:[1/_.width,1/_.height]}),Ec=_=>({u_viewport_size:[_.width,_.height]}),Yn=(_,e=1)=>({u_color:_,u_overlay:0,u_overlay_scale:e}),ha=(_,e,n,u)=>{let m=a.aN(_,1,e)/(a.a5*Math.pow(2,_.tileID.overscaledZ))*2*Math.PI*u;return{u_extrude_scale:a.aN(_,1,e),u_intensity:n,u_globe_extrude_scale:m}},Ac=(_,e,n,u)=>{let m=a.N();a.c7(m,0,_.width,_.height,0,0,1);let b=_.context.gl;return{u_matrix:m,u_world:[b.drawingBufferWidth,b.drawingBufferHeight],u_image:n,u_color_ramp:u,u_opacity:e.paint.get("heatmap-opacity")}},Bs=(_,e,n)=>{let u=n.paint.get("hillshade-accent-color"),m;switch(n.paint.get("hillshade-method")){case"basic":m=4;break;case"combined":m=1;break;case"igor":m=2;break;case"multidirectional":m=3;break;default:m=0}let b=n.getIlluminationProperties();for(let w=0;w<b.directionRadians.length;w++)n.paint.get("hillshade-illumination-anchor")==="viewport"&&(b.directionRadians[w]+=_.transform.bearingInRadians);return{u_image:0,u_latrange:pa(0,e.tileID),u_exaggeration:n.paint.get("hillshade-exaggeration"),u_altitudes:b.altitudeRadians,u_azimuths:b.directionRadians,u_accent:u,u_method:m,u_highlights:b.highlightColor,u_shadows:b.shadowColor}},id=(_,e)=>{let n=e.stride,u=a.N();return a.c7(u,0,a.a5,-a.a5,0,0,1),a.O(u,u,[0,-a.a5,0]),{u_matrix:u,u_image:1,u_dimension:[n,n],u_zoom:_.overscaledZ,u_unpack:e.getUnpackVector()}};function pa(_,e){let n=Math.pow(2,e.canonical.z),u=e.canonical.y;return[new a.a9(0,u/n).toLngLat().lat,new a.a9(0,(u+1)/n).toLngLat().lat]}let Mc=(_,e,n=0)=>({u_image:0,u_unpack:e.getUnpackVector(),u_dimension:[e.stride,e.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:n,u_opacity:_.paint.get("color-relief-opacity")}),Xn=(_,e,n,u)=>{let m=_.transform;return{u_translation:ns(_,e,n),u_ratio:u/a.aN(e,1,m.zoom),u_device_pixel_ratio:_.pixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},zc=(_,e,n,u,m)=>a.e(Xn(_,e,n,u),{u_image:0,u_image_height:m}),Rn=(_,e,n,u,m)=>{let b=_.transform,w=un(e,b);return{u_translation:ns(_,e,n),u_texsize:e.imageAtlasTexture.size,u_ratio:u/a.aN(e,1,b.zoom),u_device_pixel_ratio:_.pixelRatio,u_image:0,u_scale:[w,m.fromScale,m.toScale],u_fade:m.t,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},vo=(_,e,n,u,m)=>{let b=un(e,_.transform);return a.e(Xn(_,e,n,u),{u_tileratio:b,u_crossfade_from:m.fromScale,u_crossfade_to:m.toScale,u_image:0,u_mix:m.t,u_lineatlas_width:_.lineAtlas.width,u_lineatlas_height:_.lineAtlas.height})},bo=(_,e,n,u,m,b)=>{let w=un(e,_.transform);return a.e(Xn(_,e,n,u),{u_image:0,u_image_height:b,u_tileratio:w,u_crossfade_from:m.fromScale,u_crossfade_to:m.toScale,u_image_dash:1,u_mix:m.t,u_lineatlas_width:_.lineAtlas.width,u_lineatlas_height:_.lineAtlas.height})};function un(_,e){return 1/a.aN(_,1,e.tileZoom)}function ns(_,e,n){return a.aO(_.transform,e,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}let xo=(_,e,n,u,m)=>{return{u_tl_parent:_,u_scale_parent:e,u_buffer_scale:1,u_fade_t:n.mix,u_opacity:n.opacity*u.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:u.paint.get("raster-brightness-min"),u_brightness_high:u.paint.get("raster-brightness-max"),u_saturation_factor:(w=u.paint.get("raster-saturation"),w>0?1-1/(1.001-w):-w),u_contrast_factor:(b=u.paint.get("raster-contrast"),b>0?1/(1-b):1+b),u_spin_weights:Fs(u.paint.get("raster-hue-rotate")),u_coords_top:[m[0].x,m[0].y,m[1].x,m[1].y],u_coords_bottom:[m[3].x,m[3].y,m[2].x,m[2].y]};var b,w};function Fs(_){_*=Math.PI/180;let e=Math.sin(_),n=Math.cos(_);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}let Ba=(_,e,n,u,m,b,w,k,E,z,O,N,j)=>{let Z=w.transform;return{u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:Z.cameraToCenterDistance,u_pitch:Z.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:Z.width/Z.height,u_fade_change:w.options.fadeDuration?w.symbolFadeChange:1,u_label_plane_matrix:k,u_coord_matrix:E,u_is_text:+O,u_pitch_with_map:+u,u_is_along_line:m,u_is_variable_anchor:b,u_texsize:N,u_texture:0,u_translation:z,u_pitched_scale:j}},as=(_,e,n,u,m,b,w,k,E,z,O,N,j,Z)=>{let J=w.transform;return a.e(Ba(_,e,n,u,m,b,w,k,E,z,O,N,Z),{u_gamma_scale:u?Math.cos(J.pitch*Math.PI/180)*J.cameraToCenterDistance:1,u_device_pixel_ratio:w.pixelRatio,u_is_halo:1})},fa=(_,e,n,u,m,b,w,k,E,z,O,N,j)=>a.e(as(_,e,n,u,m,b,w,k,E,z,!0,O,0,j),{u_texsize_icon:N,u_texture_icon:1}),el=(_,e)=>({u_opacity:_,u_color:e}),rd=(_,e,n,u,m)=>a.e((function(b,w,k,E){let z=k.imageManager.getPattern(b.from.toString()),O=k.imageManager.getPattern(b.to.toString()),{width:N,height:j}=k.imageManager.getPixelSize(),Z=Math.pow(2,E.tileID.overscaledZ),J=E.tileSize*Math.pow(2,k.transform.tileZoom)/Z,se=J*(E.tileID.canonical.x+E.tileID.wrap*Z),le=J*E.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:z.tl,u_pattern_br_a:z.br,u_pattern_tl_b:O.tl,u_pattern_br_b:O.br,u_texsize:[N,j],u_mix:w.t,u_pattern_size_a:z.displaySize,u_pattern_size_b:O.displaySize,u_scale_a:w.fromScale,u_scale_b:w.toScale,u_tile_units_to_pixels:1/a.aN(E,1,k.transform.tileZoom),u_pixel_coord_upper:[se>>16,le>>16],u_pixel_coord_lower:[65535&se,65535&le]}})(n,m,e,u),{u_opacity:_}),wo=(_,e)=>{},nd={fillExtrusion:(_,e)=>({u_lightpos:new a.c2(_,e.u_lightpos),u_lightpos_globe:new a.c2(_,e.u_lightpos_globe),u_lightintensity:new a.bq(_,e.u_lightintensity),u_lightcolor:new a.c2(_,e.u_lightcolor),u_vertical_gradient:new a.bq(_,e.u_vertical_gradient),u_opacity:new a.bq(_,e.u_opacity),u_fill_translate:new a.c3(_,e.u_fill_translate)}),fillExtrusionPattern:(_,e)=>({u_lightpos:new a.c2(_,e.u_lightpos),u_lightpos_globe:new a.c2(_,e.u_lightpos_globe),u_lightintensity:new a.bq(_,e.u_lightintensity),u_lightcolor:new a.c2(_,e.u_lightcolor),u_vertical_gradient:new a.bq(_,e.u_vertical_gradient),u_height_factor:new a.bq(_,e.u_height_factor),u_opacity:new a.bq(_,e.u_opacity),u_fill_translate:new a.c3(_,e.u_fill_translate),u_image:new a.b_(_,e.u_image),u_texsize:new a.c3(_,e.u_texsize),u_pixel_coord_upper:new a.c3(_,e.u_pixel_coord_upper),u_pixel_coord_lower:new a.c3(_,e.u_pixel_coord_lower),u_scale:new a.c2(_,e.u_scale),u_fade:new a.bq(_,e.u_fade)}),fill:(_,e)=>({u_fill_translate:new a.c3(_,e.u_fill_translate)}),fillPattern:(_,e)=>({u_image:new a.b_(_,e.u_image),u_texsize:new a.c3(_,e.u_texsize),u_pixel_coord_upper:new a.c3(_,e.u_pixel_coord_upper),u_pixel_coord_lower:new a.c3(_,e.u_pixel_coord_lower),u_scale:new a.c2(_,e.u_scale),u_fade:new a.bq(_,e.u_fade),u_fill_translate:new a.c3(_,e.u_fill_translate)}),fillOutline:(_,e)=>({u_world:new a.c3(_,e.u_world),u_fill_translate:new a.c3(_,e.u_fill_translate)}),fillOutlinePattern:(_,e)=>({u_world:new a.c3(_,e.u_world),u_image:new a.b_(_,e.u_image),u_texsize:new a.c3(_,e.u_texsize),u_pixel_coord_upper:new a.c3(_,e.u_pixel_coord_upper),u_pixel_coord_lower:new a.c3(_,e.u_pixel_coord_lower),u_scale:new a.c2(_,e.u_scale),u_fade:new a.bq(_,e.u_fade),u_fill_translate:new a.c3(_,e.u_fill_translate)}),circle:(_,e)=>({u_camera_to_center_distance:new a.bq(_,e.u_camera_to_center_distance),u_scale_with_map:new a.b_(_,e.u_scale_with_map),u_pitch_with_map:new a.b_(_,e.u_pitch_with_map),u_extrude_scale:new a.c3(_,e.u_extrude_scale),u_device_pixel_ratio:new a.bq(_,e.u_device_pixel_ratio),u_globe_extrude_scale:new a.bq(_,e.u_globe_extrude_scale),u_translate:new a.c3(_,e.u_translate)}),collisionBox:(_,e)=>({u_pixel_extrude_scale:new a.c3(_,e.u_pixel_extrude_scale)}),collisionCircle:(_,e)=>({u_viewport_size:new a.c3(_,e.u_viewport_size)}),debug:(_,e)=>({u_color:new a.b$(_,e.u_color),u_overlay:new a.b_(_,e.u_overlay),u_overlay_scale:new a.bq(_,e.u_overlay_scale)}),depth:wo,clippingMask:wo,heatmap:(_,e)=>({u_extrude_scale:new a.bq(_,e.u_extrude_scale),u_intensity:new a.bq(_,e.u_intensity),u_globe_extrude_scale:new a.bq(_,e.u_globe_extrude_scale)}),heatmapTexture:(_,e)=>({u_matrix:new a.c0(_,e.u_matrix),u_world:new a.c3(_,e.u_world),u_image:new a.b_(_,e.u_image),u_color_ramp:new a.b_(_,e.u_color_ramp),u_opacity:new a.bq(_,e.u_opacity)}),hillshade:(_,e)=>({u_image:new a.b_(_,e.u_image),u_latrange:new a.c3(_,e.u_latrange),u_exaggeration:new a.bq(_,e.u_exaggeration),u_altitudes:new a.c9(_,e.u_altitudes),u_azimuths:new a.c9(_,e.u_azimuths),u_accent:new a.b$(_,e.u_accent),u_method:new a.b_(_,e.u_method),u_shadows:new a.c8(_,e.u_shadows),u_highlights:new a.c8(_,e.u_highlights)}),hillshadePrepare:(_,e)=>({u_matrix:new a.c0(_,e.u_matrix),u_image:new a.b_(_,e.u_image),u_dimension:new a.c3(_,e.u_dimension),u_zoom:new a.bq(_,e.u_zoom),u_unpack:new a.c1(_,e.u_unpack)}),colorRelief:(_,e)=>({u_image:new a.b_(_,e.u_image),u_unpack:new a.c1(_,e.u_unpack),u_dimension:new a.c3(_,e.u_dimension),u_elevation_stops:new a.b_(_,e.u_elevation_stops),u_color_stops:new a.b_(_,e.u_color_stops),u_color_ramp_size:new a.b_(_,e.u_color_ramp_size),u_opacity:new a.bq(_,e.u_opacity)}),line:(_,e)=>({u_translation:new a.c3(_,e.u_translation),u_ratio:new a.bq(_,e.u_ratio),u_device_pixel_ratio:new a.bq(_,e.u_device_pixel_ratio),u_units_to_pixels:new a.c3(_,e.u_units_to_pixels)}),lineGradient:(_,e)=>({u_translation:new a.c3(_,e.u_translation),u_ratio:new a.bq(_,e.u_ratio),u_device_pixel_ratio:new a.bq(_,e.u_device_pixel_ratio),u_units_to_pixels:new a.c3(_,e.u_units_to_pixels),u_image:new a.b_(_,e.u_image),u_image_height:new a.bq(_,e.u_image_height)}),linePattern:(_,e)=>({u_translation:new a.c3(_,e.u_translation),u_texsize:new a.c3(_,e.u_texsize),u_ratio:new a.bq(_,e.u_ratio),u_device_pixel_ratio:new a.bq(_,e.u_device_pixel_ratio),u_image:new a.b_(_,e.u_image),u_units_to_pixels:new a.c3(_,e.u_units_to_pixels),u_scale:new a.c2(_,e.u_scale),u_fade:new a.bq(_,e.u_fade)}),lineSDF:(_,e)=>({u_translation:new a.c3(_,e.u_translation),u_ratio:new a.bq(_,e.u_ratio),u_device_pixel_ratio:new a.bq(_,e.u_device_pixel_ratio),u_units_to_pixels:new a.c3(_,e.u_units_to_pixels),u_image:new a.b_(_,e.u_image),u_mix:new a.bq(_,e.u_mix),u_tileratio:new a.bq(_,e.u_tileratio),u_crossfade_from:new a.bq(_,e.u_crossfade_from),u_crossfade_to:new a.bq(_,e.u_crossfade_to),u_lineatlas_width:new a.bq(_,e.u_lineatlas_width),u_lineatlas_height:new a.bq(_,e.u_lineatlas_height)}),lineGradientSDF:(_,e)=>({u_translation:new a.c3(_,e.u_translation),u_ratio:new a.bq(_,e.u_ratio),u_device_pixel_ratio:new a.bq(_,e.u_device_pixel_ratio),u_units_to_pixels:new a.c3(_,e.u_units_to_pixels),u_image:new a.b_(_,e.u_image),u_image_height:new a.bq(_,e.u_image_height),u_tileratio:new a.bq(_,e.u_tileratio),u_crossfade_from:new a.bq(_,e.u_crossfade_from),u_crossfade_to:new a.bq(_,e.u_crossfade_to),u_image_dash:new a.b_(_,e.u_image_dash),u_mix:new a.bq(_,e.u_mix),u_lineatlas_width:new a.bq(_,e.u_lineatlas_width),u_lineatlas_height:new a.bq(_,e.u_lineatlas_height)}),raster:(_,e)=>({u_tl_parent:new a.c3(_,e.u_tl_parent),u_scale_parent:new a.bq(_,e.u_scale_parent),u_buffer_scale:new a.bq(_,e.u_buffer_scale),u_fade_t:new a.bq(_,e.u_fade_t),u_opacity:new a.bq(_,e.u_opacity),u_image0:new a.b_(_,e.u_image0),u_image1:new a.b_(_,e.u_image1),u_brightness_low:new a.bq(_,e.u_brightness_low),u_brightness_high:new a.bq(_,e.u_brightness_high),u_saturation_factor:new a.bq(_,e.u_saturation_factor),u_contrast_factor:new a.bq(_,e.u_contrast_factor),u_spin_weights:new a.c2(_,e.u_spin_weights),u_coords_top:new a.c1(_,e.u_coords_top),u_coords_bottom:new a.c1(_,e.u_coords_bottom)}),symbolIcon:(_,e)=>({u_is_size_zoom_constant:new a.b_(_,e.u_is_size_zoom_constant),u_is_size_feature_constant:new a.b_(_,e.u_is_size_feature_constant),u_size_t:new a.bq(_,e.u_size_t),u_size:new a.bq(_,e.u_size),u_camera_to_center_distance:new a.bq(_,e.u_camera_to_center_distance),u_pitch:new a.bq(_,e.u_pitch),u_rotate_symbol:new a.b_(_,e.u_rotate_symbol),u_aspect_ratio:new a.bq(_,e.u_aspect_ratio),u_fade_change:new a.bq(_,e.u_fade_change),u_label_plane_matrix:new a.c0(_,e.u_label_plane_matrix),u_coord_matrix:new a.c0(_,e.u_coord_matrix),u_is_text:new a.b_(_,e.u_is_text),u_pitch_with_map:new a.b_(_,e.u_pitch_with_map),u_is_along_line:new a.b_(_,e.u_is_along_line),u_is_variable_anchor:new a.b_(_,e.u_is_variable_anchor),u_texsize:new a.c3(_,e.u_texsize),u_texture:new a.b_(_,e.u_texture),u_translation:new a.c3(_,e.u_translation),u_pitched_scale:new a.bq(_,e.u_pitched_scale)}),symbolSDF:(_,e)=>({u_is_size_zoom_constant:new a.b_(_,e.u_is_size_zoom_constant),u_is_size_feature_constant:new a.b_(_,e.u_is_size_feature_constant),u_size_t:new a.bq(_,e.u_size_t),u_size:new a.bq(_,e.u_size),u_camera_to_center_distance:new a.bq(_,e.u_camera_to_center_distance),u_pitch:new a.bq(_,e.u_pitch),u_rotate_symbol:new a.b_(_,e.u_rotate_symbol),u_aspect_ratio:new a.bq(_,e.u_aspect_ratio),u_fade_change:new a.bq(_,e.u_fade_change),u_label_plane_matrix:new a.c0(_,e.u_label_plane_matrix),u_coord_matrix:new a.c0(_,e.u_coord_matrix),u_is_text:new a.b_(_,e.u_is_text),u_pitch_with_map:new a.b_(_,e.u_pitch_with_map),u_is_along_line:new a.b_(_,e.u_is_along_line),u_is_variable_anchor:new a.b_(_,e.u_is_variable_anchor),u_texsize:new a.c3(_,e.u_texsize),u_texture:new a.b_(_,e.u_texture),u_gamma_scale:new a.bq(_,e.u_gamma_scale),u_device_pixel_ratio:new a.bq(_,e.u_device_pixel_ratio),u_is_halo:new a.b_(_,e.u_is_halo),u_translation:new a.c3(_,e.u_translation),u_pitched_scale:new a.bq(_,e.u_pitched_scale)}),symbolTextAndIcon:(_,e)=>({u_is_size_zoom_constant:new a.b_(_,e.u_is_size_zoom_constant),u_is_size_feature_constant:new a.b_(_,e.u_is_size_feature_constant),u_size_t:new a.bq(_,e.u_size_t),u_size:new a.bq(_,e.u_size),u_camera_to_center_distance:new a.bq(_,e.u_camera_to_center_distance),u_pitch:new a.bq(_,e.u_pitch),u_rotate_symbol:new a.b_(_,e.u_rotate_symbol),u_aspect_ratio:new a.bq(_,e.u_aspect_ratio),u_fade_change:new a.bq(_,e.u_fade_change),u_label_plane_matrix:new a.c0(_,e.u_label_plane_matrix),u_coord_matrix:new a.c0(_,e.u_coord_matrix),u_is_text:new a.b_(_,e.u_is_text),u_pitch_with_map:new a.b_(_,e.u_pitch_with_map),u_is_along_line:new a.b_(_,e.u_is_along_line),u_is_variable_anchor:new a.b_(_,e.u_is_variable_anchor),u_texsize:new a.c3(_,e.u_texsize),u_texsize_icon:new a.c3(_,e.u_texsize_icon),u_texture:new a.b_(_,e.u_texture),u_texture_icon:new a.b_(_,e.u_texture_icon),u_gamma_scale:new a.bq(_,e.u_gamma_scale),u_device_pixel_ratio:new a.bq(_,e.u_device_pixel_ratio),u_is_halo:new a.b_(_,e.u_is_halo),u_translation:new a.c3(_,e.u_translation),u_pitched_scale:new a.bq(_,e.u_pitched_scale)}),background:(_,e)=>({u_opacity:new a.bq(_,e.u_opacity),u_color:new a.b$(_,e.u_color)}),backgroundPattern:(_,e)=>({u_opacity:new a.bq(_,e.u_opacity),u_image:new a.b_(_,e.u_image),u_pattern_tl_a:new a.c3(_,e.u_pattern_tl_a),u_pattern_br_a:new a.c3(_,e.u_pattern_br_a),u_pattern_tl_b:new a.c3(_,e.u_pattern_tl_b),u_pattern_br_b:new a.c3(_,e.u_pattern_br_b),u_texsize:new a.c3(_,e.u_texsize),u_mix:new a.bq(_,e.u_mix),u_pattern_size_a:new a.c3(_,e.u_pattern_size_a),u_pattern_size_b:new a.c3(_,e.u_pattern_size_b),u_scale_a:new a.bq(_,e.u_scale_a),u_scale_b:new a.bq(_,e.u_scale_b),u_pixel_coord_upper:new a.c3(_,e.u_pixel_coord_upper),u_pixel_coord_lower:new a.c3(_,e.u_pixel_coord_lower),u_tile_units_to_pixels:new a.bq(_,e.u_tile_units_to_pixels)}),terrain:(_,e)=>({u_texture:new a.b_(_,e.u_texture),u_ele_delta:new a.bq(_,e.u_ele_delta),u_fog_matrix:new a.c0(_,e.u_fog_matrix),u_fog_color:new a.b$(_,e.u_fog_color),u_fog_ground_blend:new a.bq(_,e.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.bq(_,e.u_fog_ground_blend_opacity),u_horizon_color:new a.b$(_,e.u_horizon_color),u_horizon_fog_blend:new a.bq(_,e.u_horizon_fog_blend),u_is_globe_mode:new a.bq(_,e.u_is_globe_mode)}),terrainDepth:(_,e)=>({u_ele_delta:new a.bq(_,e.u_ele_delta)}),terrainCoords:(_,e)=>({u_texture:new a.b_(_,e.u_texture),u_terrain_coords_id:new a.bq(_,e.u_terrain_coords_id),u_ele_delta:new a.bq(_,e.u_ele_delta)}),projectionErrorMeasurement:(_,e)=>({u_input:new a.bq(_,e.u_input),u_output_expected:new a.bq(_,e.u_output_expected)}),atmosphere:(_,e)=>({u_sun_pos:new a.c2(_,e.u_sun_pos),u_atmosphere_blend:new a.bq(_,e.u_atmosphere_blend),u_globe_position:new a.c2(_,e.u_globe_position),u_globe_radius:new a.bq(_,e.u_globe_radius),u_inv_proj_matrix:new a.c0(_,e.u_inv_proj_matrix)}),sky:(_,e)=>({u_sky_color:new a.b$(_,e.u_sky_color),u_horizon_color:new a.b$(_,e.u_horizon_color),u_horizon:new a.c3(_,e.u_horizon),u_horizon_normal:new a.c3(_,e.u_horizon_normal),u_sky_horizon_blend:new a.bq(_,e.u_sky_horizon_blend),u_sky_blend:new a.bq(_,e.u_sky_blend)})};class Ic{constructor(e,n,u){this.context=e;let m=e.gl;this.buffer=m.createBuffer(),this.dynamicDraw=!!u,this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,n.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete n.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){let n=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),n.bufferSubData(n.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let Lc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Dc{constructor(e,n,u,m){this.length=n.length,this.attributes=u,this.itemSize=n.bytesPerElement,this.dynamicDraw=m,this.context=e;let b=e.gl;this.buffer=b.createBuffer(),e.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,n.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete n.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){if(e.length!==this.length)throw new Error(`Length of new data is ${e.length}, which doesn't match current length of ${this.length}`);let n=this.context.gl;this.bind(),n.bufferSubData(n.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,n){for(let u=0;u<this.attributes.length;u++){let m=n.attributes[this.attributes[u].name];m!==void 0&&e.enableVertexAttribArray(m)}}setVertexAttribPointers(e,n,u){for(let m=0;m<this.attributes.length;m++){let b=this.attributes[m],w=n.attributes[b.name];w!==void 0&&e.vertexAttribPointer(w,b.components,e[Lc[b.type]],!1,this.itemSize,b.offset+this.itemSize*(u||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class ui{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class dn extends ui{getDefault(){return a.bp.transparent}set(e){let n=this.current;(e.r!==n.r||e.g!==n.g||e.b!==n.b||e.a!==n.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class ss extends ui{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class tl extends ui{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class js extends ui{getDefault(){return[!0,!0,!0,!0]}set(e){let n=this.current;(e[0]!==n[0]||e[1]!==n[1]||e[2]!==n[2]||e[3]!==n[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class os extends ui{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class Ns extends ui{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class qs extends ui{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){let n=this.current;(e.func!==n.func||e.ref!==n.ref||e.mask!==n.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class Ir extends ui{getDefault(){let e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){let n=this.current;(e[0]!==n[0]||e[1]!==n[1]||e[2]!==n[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class Oc extends ui{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;let n=this.gl;e?n.enable(n.STENCIL_TEST):n.disable(n.STENCIL_TEST),this.current=e,this.dirty=!1}}class ls extends ui{getDefault(){return[0,1]}set(e){let n=this.current;(e[0]!==n[0]||e[1]!==n[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class il extends ui{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;let n=this.gl;e?n.enable(n.DEPTH_TEST):n.disable(n.DEPTH_TEST),this.current=e,this.dirty=!1}}class Fa extends ui{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class rl extends ui{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;let n=this.gl;e?n.enable(n.BLEND):n.disable(n.BLEND),this.current=e,this.dirty=!1}}class wn extends ui{getDefault(){let e=this.gl;return[e.ONE,e.ZERO]}set(e){let n=this.current;(e[0]!==n[0]||e[1]!==n[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class Vs extends ui{getDefault(){return a.bp.transparent}set(e){let n=this.current;(e.r!==n.r||e.g!==n.g||e.b!==n.b||e.a!==n.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class So extends ui{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class Ws extends ui{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;let n=this.gl;e?n.enable(n.CULL_FACE):n.disable(n.CULL_FACE),this.current=e,this.dirty=!1}}class Gs extends ui{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class ma extends ui{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}class Us extends ui{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}class nl extends ui{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class Gt extends ui{getDefault(){let e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){let n=this.current;(e[0]!==n[0]||e[1]!==n[1]||e[2]!==n[2]||e[3]!==n[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class al extends ui{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;let n=this.gl;n.bindFramebuffer(n.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class Rc extends ui{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;let n=this.gl;n.bindRenderbuffer(n.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Vl extends ui{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;let n=this.gl;n.bindTexture(n.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class Zs extends ui{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;let n=this.gl;n.bindBuffer(n.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class Bc extends ui{getDefault(){return null}set(e){let n=this.gl;n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class Fc extends ui{getDefault(){return null}set(e){var n;if(e===this.current&&!this.dirty)return;let u=this.gl;cn(u)?u.bindVertexArray(e):(n=u.getExtension("OES_vertex_array_object"))===null||n===void 0||n.bindVertexArrayOES(e),this.current=e,this.dirty=!1}}class jc extends ui{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;let n=this.gl;n.pixelStorei(n.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class Nc extends ui{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;let n=this.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class sl extends ui{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;let n=this.gl;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class Hs extends ui{constructor(e,n){super(e),this.context=e,this.parent=n}getDefault(){return null}}class c extends Hs{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let n=this.gl;n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class v extends Hs{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let n=this.gl;n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class C extends Hs{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let n=this.gl;n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,e),this.current=e,this.dirty=!1}}let I="Framebuffer is not complete";class q{constructor(e,n,u,m,b){this.context=e,this.width=n,this.height=u;let w=e.gl,k=this.framebuffer=w.createFramebuffer();if(this.colorAttachment=new c(e,k),m)this.depthAttachment=b?new C(e,k):new v(e,k);else if(b)throw new Error("Stencil cannot be set without depth");if(w.checkFramebufferStatus(w.FRAMEBUFFER)!==w.FRAMEBUFFER_COMPLETE)throw new Error(I)}destroy(){let e=this.context.gl,n=this.colorAttachment.get();if(n&&e.deleteTexture(n),this.depthAttachment){let u=this.depthAttachment.get();u&&e.deleteRenderbuffer(u)}e.deleteFramebuffer(this.framebuffer)}}class re{constructor(e){var n,u;if(this.gl=e,this.clearColor=new dn(this),this.clearDepth=new ss(this),this.clearStencil=new tl(this),this.colorMask=new js(this),this.depthMask=new os(this),this.stencilMask=new Ns(this),this.stencilFunc=new qs(this),this.stencilOp=new Ir(this),this.stencilTest=new Oc(this),this.depthRange=new ls(this),this.depthTest=new il(this),this.depthFunc=new Fa(this),this.blend=new rl(this),this.blendFunc=new wn(this),this.blendColor=new Vs(this),this.blendEquation=new So(this),this.cullFace=new Ws(this),this.cullFaceSide=new Gs(this),this.frontFace=new ma(this),this.program=new Us(this),this.activeTexture=new nl(this),this.viewport=new Gt(this),this.bindFramebuffer=new al(this),this.bindRenderbuffer=new Rc(this),this.bindTexture=new Vl(this),this.bindVertexBuffer=new Zs(this),this.bindElementBuffer=new Bc(this),this.bindVertexArray=new Fc(this),this.pixelStoreUnpack=new jc(this),this.pixelStoreUnpackPremultiplyAlpha=new Nc(this),this.pixelStoreUnpackFlipY=new sl(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),cn(e)){this.HALF_FLOAT=e.HALF_FLOAT;let m=e.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(n=e.RGBA16F)!==null&&n!==void 0?n:m==null?void 0:m.RGBA16F_EXT,this.RGB16F=(u=e.RGB16F)!==null&&u!==void 0?u:m==null?void 0:m.RGB16F_EXT,e.getExtension("EXT_color_buffer_float")}else{e.getExtension("EXT_color_buffer_half_float"),e.getExtension("OES_texture_half_float_linear");let m=e.getExtension("OES_texture_half_float");this.HALF_FLOAT=m==null?void 0:m.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,n){return new Ic(this,e,n)}createVertexBuffer(e,n,u){return new Dc(this,e,n,u)}createRenderbuffer(e,n,u){let m=this.gl,b=m.createRenderbuffer();return this.bindRenderbuffer.set(b),m.renderbufferStorage(m.RENDERBUFFER,e,n,u),this.bindRenderbuffer.set(null),b}createFramebuffer(e,n,u,m){return new q(this,e,n,u,m)}clear({color:e,depth:n,stencil:u}){let m=this.gl,b=0;e&&(b|=m.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),n!==void 0&&(b|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),u!==void 0&&(b|=m.STENCIL_BUFFER_BIT,this.clearStencil.set(u),this.stencilMask.set(255)),m.clear(b)}setCullFace(e){e.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(e){a.bR(e.blendFunction,Ci.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}createVertexArray(){var e;return cn(this.gl)?this.gl.createVertexArray():(e=this.gl.getExtension("OES_vertex_array_object"))===null||e===void 0?void 0:e.createVertexArrayOES()}deleteVertexArray(e){var n;return cn(this.gl)?this.gl.deleteVertexArray(e):(n=this.gl.getExtension("OES_vertex_array_object"))===null||n===void 0?void 0:n.deleteVertexArrayOES(e)}unbindVAO(){this.bindVertexArray.set(null)}}let ve;function De(_,e,n,u,m){let b=_.context,w=_.transform,k=b.gl,E=_.useProgram("collisionBox"),z=[],O=0,N=0;for(let oe=0;oe<u.length;oe++){let de=u[oe],ye=e.getTile(de).getBucket(n);if(!ye)continue;let ue=m?ye.textCollisionBox:ye.iconCollisionBox,me=ye.collisionCircleArray;me.length>0&&(z.push({circleArray:me,circleOffset:N,coord:de}),O+=me.length/4,N=O),ue&&E.draw(b,k.LINES,Ft.disabled,ti.disabled,_.colorModeForRenderPass(),$t.disabled,$n(_.transform),_.style.map.terrain&&_.style.map.terrain.getTerrainData(de),w.getProjectionData({overscaledTileID:de,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),n.id,ue.layoutVertexBuffer,ue.indexBuffer,ue.segments,null,_.transform.zoom,null,null,ue.collisionVertexBuffer)}if(!m||!z.length)return;let j=_.useProgram("collisionCircle"),Z=new a.ca;Z.resize(4*O),Z._trim();let J=0;for(let oe of z)for(let de=0;de<oe.circleArray.length/4;de++){let ye=4*de,ue=oe.circleArray[ye+0],me=oe.circleArray[ye+1],be=oe.circleArray[ye+2],fe=oe.circleArray[ye+3];Z.emplace(J++,ue,me,be,fe,0),Z.emplace(J++,ue,me,be,fe,1),Z.emplace(J++,ue,me,be,fe,2),Z.emplace(J++,ue,me,be,fe,3)}(!ve||ve.length<2*O)&&(ve=(function(oe){let de=2*oe,ye=new a.cc;ye.resize(de),ye._trim();for(let ue=0;ue<de;ue++){let me=6*ue;ye.uint16[me+0]=4*ue+0,ye.uint16[me+1]=4*ue+1,ye.uint16[me+2]=4*ue+2,ye.uint16[me+3]=4*ue+2,ye.uint16[me+4]=4*ue+3,ye.uint16[me+5]=4*ue+0}return ye})(O));let se=b.createIndexBuffer(ve,!0),le=b.createVertexBuffer(Z,a.cb.members,!0);for(let oe of z){let de=Ec(_.transform);j.draw(b,k.TRIANGLES,Ft.disabled,ti.disabled,_.colorModeForRenderPass(),$t.disabled,de,_.style.map.terrain&&_.style.map.terrain.getTerrainData(oe.coord),null,n.id,le,se,a.aX.simpleSegment(0,2*oe.circleOffset,oe.circleArray.length,oe.circleArray.length/2),null,_.transform.zoom,null,null,null)}le.destroy(),se.destroy()}let Ve=a.ar(new Float32Array(16));function Ke(_,e,n,u,m,b){let{horizontalAlign:w,verticalAlign:k}=a.aS(_);return new a.P((-(w-.5)*e/m+u[0])*b,(-(k-.5)*n/m+u[1])*b)}function ht(_,e,n,u,m,b){let w=e.tileAnchorPoint.add(new a.P(e.translation[0],e.translation[1]));if(e.pitchWithMap){let k=u.mult(b);n||(k=k.rotate(-m));let E=w.add(k);return jt(E.x,E.y,e.pitchedLabelPlaneMatrix,e.getElevation).point}if(n){let k=mi(e.tileAnchorPoint.x+1,e.tileAnchorPoint.y,e).point.sub(_),E=Math.atan(k.y/k.x)+(k.x<0?Math.PI:0);return _.add(u.rotate(E))}return _.add(u)}function It(_,e,n,u,m,b,w,k,E,z,O,N){let j=_.text.placedSymbolArray,Z=_.text.dynamicLayoutVertexArray,J=_.icon.dynamicLayoutVertexArray,se={};Z.clear();for(let le=0;le<j.length;le++){let oe=j.get(le),de=oe.hidden||!oe.crossTileID||_.allowVerticalPlacement&&!oe.placedOrientation?null:u[oe.crossTileID];if(de){let ye=new a.P(oe.anchorX,oe.anchorY),ue={getElevation:N,width:m.width,height:m.height,pitchedLabelPlaneMatrix:b,pitchWithMap:n,transform:m,tileAnchorPoint:ye,translation:z,unwrappedTileID:O},me=n?Gn(ye.x,ye.y,ue):mi(ye.x,ye.y,ue),be=oo(m.cameraToCenterDistance,me.signedDistanceFromCamera),fe=a.aA(_.textSizeData,k,oe)*be/a.aM;n&&(fe*=_.tilePixelRatio/w);let{width:Te,height:Fe,anchor:Oe,textOffset:Re,textBoxScale:Be}=de,Je=Ke(Oe,Te,Fe,Re,Be,fe),et=m.getPitchedTextCorrection(ye.x+z[0],ye.y+z[1],O),$e=ht(me.point,ue,e,Je,-m.bearingInRadians,et),ot=_.allowVerticalPlacement&&oe.placedOrientation===a.az.vertical?Math.PI/2:0;for(let Rt=0;Rt<oe.numGlyphs;Rt++)a.aG(Z,$e,ot);E&&oe.associatedIconIndex>=0&&(se[oe.associatedIconIndex]={shiftedAnchor:$e,angle:ot})}else _i(oe.numGlyphs,Z)}if(E){J.clear();let le=_.icon.placedSymbolArray;for(let oe=0;oe<le.length;oe++){let de=le.get(oe);if(de.hidden)_i(de.numGlyphs,J);else{let ye=se[oe];if(ye)for(let ue=0;ue<de.numGlyphs;ue++)a.aG(J,ye.shiftedAnchor,ye.angle);else _i(de.numGlyphs,J)}}_.icon.dynamicLayoutVertexBuffer.updateData(J)}_.text.dynamicLayoutVertexBuffer.updateData(Z)}function Jt(_,e,n){return n.iconsInText&&e?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function yr(_,e,n,u,m,b,w,k,E,z,O,N,j){let Z=_.context,J=Z.gl,se=_.transform,le=k==="map",oe=E==="map",de=k!=="viewport"&&n.layout.get("symbol-placement")!=="point",ye=le&&!oe&&!de,ue=!n.layout.get("symbol-sort-key").isConstant(),me=!1,be=_.getDepthModeForSublayer(0,Ft.ReadOnly),fe=n._unevaluatedLayout.hasValue("text-variable-anchor")||n._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Te=[],Fe=se.getCircleRadiusCorrection();for(let Oe of u){let Re=e.getTile(Oe),Be=Re.getBucket(n);if(!Be)continue;let Je=m?Be.text:Be.icon;if(!Je||!Je.segments.get().length||!Je.hasVisibleVertices)continue;let et=Je.programConfigurations.get(n.id),$e=m||Be.sdfIcons,ot=m?Be.textSizeData:Be.iconSizeData,Rt=oe||se.pitch!==0,bi=_.useProgram(Jt($e,m,Be),et),ji=a.ay(ot,se.zoom),Li=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Oe),Zi,Di,sr,Hi,Dr=[0,0],_r=null;if(m)Di=Re.glyphAtlasTexture,sr=J.LINEAR,Zi=Re.glyphAtlasTexture.size,Be.iconsInText&&(Dr=Re.imageAtlasTexture.size,_r=Re.imageAtlasTexture,Hi=Rt||_.options.rotating||_.options.zooming||ot.kind==="composite"||ot.kind==="camera"?J.LINEAR:J.NEAREST);else{let Ri=n.layout.get("icon-size").constantOr(0)!==1||Be.iconsNeedLinear;Di=Re.imageAtlasTexture,sr=$e||_.options.rotating||_.options.zooming||Ri||Rt?J.LINEAR:J.NEAREST,Zi=Re.imageAtlasTexture.size}let dr=a.aN(Re,1,_.transform.zoom),Hr=Yr(le,_.transform,dr),Ks=a.N();a.aB(Ks,Hr);let hs=Uo(oe,le,_.transform,dr),qa=a.aO(se,Re,b,w),Sn=se.getProjectionData({overscaledTileID:Oe,applyGlobeMatrix:!j,applyTerrainMatrix:!0}),Eo=fe&&Be.hasTextData(),ac=n.layout.get("icon-text-fit")!=="none"&&Eo&&Be.hasIconData();if(de){let Ri=_.style.map.terrain?(Pr,Er)=>_.style.map.terrain.getElevation(Oe,Pr,Er):null,Oi=n.layout.get("text-rotation-alignment")==="map";Zo(Be,_,m,Hr,Ks,oe,z,Oi,Oe.toUnwrapped(),se.width,se.height,qa,Ri)}let Ao=m&&fe||ac,ea=de||Ao?Ve:oe?Hr:_.transform.clipSpaceToPixelsMatrix,Va=$e&&n.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0,xa;xa=$e?Be.iconsInText?fa(ot.kind,ji,ye,oe,de,Ao,_,ea,hs,qa,Zi,Dr,Fe):as(ot.kind,ji,ye,oe,de,Ao,_,ea,hs,qa,m,Zi,0,Fe):Ba(ot.kind,ji,ye,oe,de,Ao,_,ea,hs,qa,m,Zi,Fe);let wa={program:bi,buffers:Je,uniformValues:xa,projectionData:Sn,atlasTexture:Di,atlasTextureIcon:_r,atlasInterpolation:sr,atlasInterpolationIcon:Hi,isSDF:$e,hasHalo:Va};if(ue&&Be.canOverlap){me=!0;let Ri=Je.segments.get();for(let Oi of Ri)Te.push({segments:new a.aX([Oi]),sortKey:Oi.sortKey,state:wa,terrainData:Li})}else Te.push({segments:Je.segments,sortKey:0,state:wa,terrainData:Li})}me&&Te.sort(((Oe,Re)=>Oe.sortKey-Re.sortKey));for(let Oe of Te){let Re=Oe.state;if(Z.activeTexture.set(J.TEXTURE0),Re.atlasTexture.bind(Re.atlasInterpolation,J.CLAMP_TO_EDGE),Re.atlasTextureIcon&&(Z.activeTexture.set(J.TEXTURE1),Re.atlasTextureIcon&&Re.atlasTextureIcon.bind(Re.atlasInterpolationIcon,J.CLAMP_TO_EDGE)),Re.isSDF){let Be=Re.uniformValues;Re.hasHalo&&(Be.u_is_halo=1,ar(Re.buffers,Oe.segments,n,_,Re.program,be,O,N,Be,Re.projectionData,Oe.terrainData)),Be.u_is_halo=0}ar(Re.buffers,Oe.segments,n,_,Re.program,be,O,N,Re.uniformValues,Re.projectionData,Oe.terrainData)}}function ar(_,e,n,u,m,b,w,k,E,z,O){let N=u.context;m.draw(N,N.gl.TRIANGLES,b,w,k,$t.backCCW,E,O,z,n.id,_.layoutVertexBuffer,_.indexBuffer,e,n.paint,u.transform.zoom,_.programConfigurations.get(n.id),_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer)}function hn(_,e,n,u,m){let b=_.context,w=b.gl,k=ti.disabled,E=new Ci([w.ONE,w.ONE],a.bp.transparent,[!0,!0,!0,!0]),z=e.getBucket(n);if(!z)return;let O=u.key,N=n.heatmapFbos.get(O);N||(N=Kn(b,e.tileSize,e.tileSize),n.heatmapFbos.set(O,N)),b.bindFramebuffer.set(N.framebuffer),b.viewport.set([0,0,e.tileSize,e.tileSize]),b.clear({color:a.bp.transparent});let j=z.programConfigurations.get(n.id),Z=_.useProgram("heatmap",j,!m),J=_.transform.getProjectionData({overscaledTileID:e.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),se=_.style.map.terrain.getTerrainData(u);Z.draw(b,w.TRIANGLES,Ft.disabled,k,E,$t.disabled,ha(e,_.transform.zoom,n.paint.get("heatmap-intensity"),1),se,J,n.id,z.layoutVertexBuffer,z.indexBuffer,z.segments,n.paint,_.transform.zoom,j)}function Zr(_,e,n,u,m){let b=_.context,w=b.gl,k=_.transform;b.setColorMode(_.colorModeForRenderPass());let E=ol(b,e),z=n.key,O=e.heatmapFbos.get(z);if(!O)return;b.activeTexture.set(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,O.colorAttachment.get()),b.activeTexture.set(w.TEXTURE1),E.bind(w.LINEAR,w.CLAMP_TO_EDGE);let N=k.getProjectionData({overscaledTileID:n,applyTerrainMatrix:m,applyGlobeMatrix:!u});_.useProgram("heatmapTexture").draw(b,w.TRIANGLES,Ft.disabled,ti.disabled,_.colorModeForRenderPass(),$t.disabled,Ac(_,e,0,1),null,N,e.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments,e.paint,k.zoom),O.destroy(),e.heatmapFbos.delete(z)}function Kn(_,e,n){var u,m;let b=_.gl,w=b.createTexture();b.bindTexture(b.TEXTURE_2D,w),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);let k=(u=_.HALF_FLOAT)!==null&&u!==void 0?u:b.UNSIGNED_BYTE,E=(m=_.RGBA16F)!==null&&m!==void 0?m:b.RGBA;b.texImage2D(b.TEXTURE_2D,0,E,e,n,0,b.RGBA,k,null);let z=_.createFramebuffer(e,n,!1,!1);return z.colorAttachment.set(w),z}function ol(_,e){return e.colorRampTexture||(e.colorRampTexture=new a.T(_,e.colorRamp,_.gl.RGBA)),e.colorRampTexture}function qc(_,e,n,u,m,b,w,k){let E=256;if(m.stepInterpolant){let z=e.getSource().maxzoom,O=w.canonical.z===z?Math.ceil(1<<_.transform.maxZoom-w.canonical.z):1;E=a.an(a.ce(b.maxLineLength/a.a5*1024*O),256,n.maxTextureSize)}return k.gradient=a.cf({expression:m.gradientExpression(),evaluationKey:"lineProgress",resolution:E,image:k.gradient||void 0,clips:b.lineClipsArray}),k.texture?k.texture.update(k.gradient):k.texture=new a.T(n,k.gradient,u.RGBA),k.version=m.gradientVersion,k.texture}function Vc(_,e,n,u,m){_.activeTexture.set(e.TEXTURE0),n.imageAtlasTexture.bind(e.LINEAR,e.CLAMP_TO_EDGE),u.updatePaintBuffers(m)}function Gi(_,e,n,u,m,b){(m||_.lineAtlas.dirty)&&(e.activeTexture.set(n.TEXTURE0),_.lineAtlas.bind(e)),u.updatePaintBuffers(b)}function cs(_,e,n,u,m,b,w){let k=b.gradients[m.id],E=k.texture;m.gradientVersion!==k.version&&(E=qc(_,e,n,u,m,b,w,k)),n.activeTexture.set(u.TEXTURE0),E.bind(m.stepInterpolant?u.NEAREST:u.LINEAR,u.CLAMP_TO_EDGE)}function Qr(_,e,n,u,m,b,w,k,E){let z=b.gradients[m.id],O=z.texture;m.gradientVersion!==z.version&&(O=qc(_,e,n,u,m,b,w,z)),n.activeTexture.set(u.TEXTURE0),O.bind(m.stepInterpolant?u.NEAREST:u.LINEAR,u.CLAMP_TO_EDGE),n.activeTexture.set(u.TEXTURE1),_.lineAtlas.bind(n),k.updatePaintBuffers(E)}function Ui(_,e,n,u,m){if(!n||!u||!u.imageAtlas)return;let b=u.imageAtlas.patternPositions,w=b[n.to.toString()],k=b[n.from.toString()];if(!w&&k&&(w=k),!k&&w&&(k=w),!w||!k){let E=m.getPaintProperty(e);w=b[E],k=b[E]}w&&k&&_.setConstantPatternPositions(w,k)}function ja(_,e,n,u,m,b,w,k){let E=_.context.gl,z="fill-pattern",O=n.paint.get(z),N=O&&O.constantOr(1),j=n.getCrossfadeParameters(),Z,J,se,le,oe,de=_.transform,ye=n.paint.get("fill-translate"),ue=n.paint.get("fill-translate-anchor");w?(J=N&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Z=E.LINES):(J=N?"fillPattern":"fill",Z=E.TRIANGLES);let me=O.constantOr(null);for(let be of u){let fe=e.getTile(be);if(N&&!fe.patternsLoaded())continue;let Te=fe.getBucket(n);if(!Te)continue;let Fe=Te.programConfigurations.get(n.id),Oe=_.useProgram(J,Fe),Re=_.style.map.terrain&&_.style.map.terrain.getTerrainData(be);N&&(_.context.activeTexture.set(E.TEXTURE0),fe.imageAtlasTexture.bind(E.LINEAR,E.CLAMP_TO_EDGE),Fe.updatePaintBuffers(j)),Ui(Fe,z,me,fe,n);let Be=de.getProjectionData({overscaledTileID:be,applyGlobeMatrix:!k,applyTerrainMatrix:!0}),Je=a.aO(de,fe,ye,ue);if(w){le=Te.indexBuffer2,oe=Te.segments2;let $e=[E.drawingBufferWidth,E.drawingBufferHeight];se=J==="fillOutlinePattern"&&N?Rs(_,j,fe,$e,Je):Pc($e,Je)}else le=Te.indexBuffer,oe=Te.segments,se=N?Ra(_,j,fe,Je):{u_fill_translate:Je};let et=_.stencilModeForClipping(be);Oe.draw(_.context,Z,m,et,b,$t.backCCW,se,Re,Be,n.id,Te.layoutVertexBuffer,le,oe,n.paint,_.transform.zoom,Fe)}}function ll(_,e,n,u,m,b,w,k){let E=_.context,z=E.gl,O="fill-extrusion-pattern",N=n.paint.get(O),j=N.constantOr(1),Z=n.getCrossfadeParameters(),J=n.paint.get("fill-extrusion-opacity"),se=N.constantOr(null),le=_.transform;for(let oe of u){let de=e.getTile(oe),ye=de.getBucket(n);if(!ye)continue;let ue=_.style.map.terrain&&_.style.map.terrain.getTerrainData(oe),me=ye.programConfigurations.get(n.id),be=_.useProgram(j?"fillExtrusionPattern":"fillExtrusion",me);j&&(_.context.activeTexture.set(z.TEXTURE0),de.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),me.updatePaintBuffers(Z));let fe=le.getProjectionData({overscaledTileID:oe,applyGlobeMatrix:!k,applyTerrainMatrix:!0});Ui(me,O,se,de,n);let Te=a.aO(le,de,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),Fe=n.paint.get("fill-extrusion-vertical-gradient"),Oe=j?Nl(_,Fe,J,Te,oe,Z,de):On(_,Fe,J,Te);be.draw(E,E.gl.TRIANGLES,m,b,w,$t.backCCW,Oe,ue,fe,n.id,ye.layoutVertexBuffer,ye.indexBuffer,ye.segments,n.paint,_.transform.zoom,me,_.style.map.terrain&&ye.centroidVertexBuffer)}}function Na(_,e,n,u,m,b,w,k,E){var z;let O=_.style.projection,N=_.context,j=_.transform,Z=N.gl,J=[`#define NUM_ILLUMINATION_SOURCES ${n.paint.get("hillshade-highlight-color").values.length}`],se=_.useProgram("hillshade",null,!1,J),le=!_.options.moving;for(let oe of u){let de=e.getTile(oe),ye=de.fbo;if(!ye)continue;let ue=O.getMeshFromTileID(N,oe.canonical,k,!0,"raster"),me=(z=_.style.map.terrain)===null||z===void 0?void 0:z.getTerrainData(oe);N.activeTexture.set(Z.TEXTURE0),Z.bindTexture(Z.TEXTURE_2D,ye.colorAttachment.get());let be=j.getProjectionData({overscaledTileID:oe,aligned:le,applyGlobeMatrix:!E,applyTerrainMatrix:!0});se.draw(N,Z.TRIANGLES,b,m[oe.overscaledZ],w,$t.backCCW,Bs(_,de,n),me,be,n.id,ue.vertexBuffer,ue.indexBuffer,ue.segments)}}function To(_,e,n,u,m,b,w,k,E){var z;let O=_.style.projection,N=_.context,j=_.transform,Z=N.gl,J=_.useProgram("colorRelief"),se=!_.options.moving,le=!0,oe=0;for(let de of u){let ye=e.getTile(de),ue=ye.dem;if(le){let Oe=Z.getParameter(Z.MAX_TEXTURE_SIZE),{elevationTexture:Re,colorTexture:Be}=n.getColorRampTextures(N,Oe,ue.getUnpackVector());N.activeTexture.set(Z.TEXTURE1),Re.bind(Z.NEAREST,Z.CLAMP_TO_EDGE),N.activeTexture.set(Z.TEXTURE4),Be.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),le=!1,oe=Re.size[0]}if(!ue||!ue.data)continue;let me=ue.stride,be=ue.getPixels();if(N.activeTexture.set(Z.TEXTURE0),N.pixelStoreUnpackPremultiplyAlpha.set(!1),ye.demTexture=ye.demTexture||_.getTileTexture(me),ye.demTexture){let Oe=ye.demTexture;Oe.update(be,{premultiply:!1}),Oe.bind(Z.LINEAR,Z.CLAMP_TO_EDGE)}else ye.demTexture=new a.T(N,be,Z.RGBA,{premultiply:!1}),ye.demTexture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE);let fe=O.getMeshFromTileID(N,de.canonical,k,!0,"raster"),Te=(z=_.style.map.terrain)===null||z===void 0?void 0:z.getTerrainData(de),Fe=j.getProjectionData({overscaledTileID:de,aligned:se,applyGlobeMatrix:!E,applyTerrainMatrix:!0});J.draw(N,Z.TRIANGLES,b,m[de.overscaledZ],w,$t.backCCW,Mc(n,ye.dem,oe),Te,Fe,n.id,fe.vertexBuffer,fe.indexBuffer,fe.segments)}}let ga=[new a.P(0,0),new a.P(a.a5,0),new a.P(a.a5,a.a5),new a.P(0,a.a5)];function us(_,e,n,u,m,b,w,k,E=!1,z=!1){let O=u[u.length-1].overscaledZ,N=_.context,j=N.gl,Z=_.useProgram("raster"),J=_.transform,se=_.style.projection,le=_.colorModeForRenderPass(),oe=!_.options.moving,de=n.paint.get("raster-opacity"),ye=n.paint.get("raster-resampling"),ue=n.paint.get("raster-fade-duration"),me=!!_.style.map.terrain;for(let be of u){let fe=_.getDepthModeForSublayer(be.overscaledZ-O,de===1?Ft.ReadWrite:Ft.ReadOnly,j.LESS),Te=e.getTile(be),Fe=ye==="nearest"?j.NEAREST:j.LINEAR;N.activeTexture.set(j.TEXTURE0),Te.texture.bind(Fe,j.CLAMP_TO_EDGE,j.LINEAR_MIPMAP_NEAREST),N.activeTexture.set(j.TEXTURE1);let{parentTile:Oe,parentScaleBy:Re,parentTopLeft:Be,fadeValues:Je}=Wc(Te,e,ue,me);Te.fadeOpacity=Je.tileOpacity,Oe?(Oe.fadeOpacity=Je.parentTileOpacity,Oe.texture.bind(Fe,j.CLAMP_TO_EDGE,j.LINEAR_MIPMAP_NEAREST)):Te.texture.bind(Fe,j.CLAMP_TO_EDGE,j.LINEAR_MIPMAP_NEAREST),Te.texture.useMipmap&&N.extTextureFilterAnisotropic&&_.transform.pitch>20&&j.texParameterf(j.TEXTURE_2D,N.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,N.extTextureFilterAnisotropicMax);let et=_.style.map.terrain&&_.style.map.terrain.getTerrainData(be),$e=J.getProjectionData({overscaledTileID:be,aligned:oe,applyGlobeMatrix:!z,applyTerrainMatrix:!0}),ot=xo(Be,Re,Je.fadeMix,n,k),Rt=se.getMeshFromTileID(N,be.canonical,b,w,"raster");Z.draw(N,j.TRIANGLES,fe,m?m[be.overscaledZ]:ti.disabled,le,E?$t.frontCCW:$t.backCCW,ot,et,$e,n.id,Rt.vertexBuffer,Rt.indexBuffer,Rt.segments)}}function Wc(_,e,n,u){let m={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(n===0||u)return m;if(_.fadingParentID){let b=e.getLoadedTile(_.fadingParentID);if(!b)return m;let w=Math.pow(2,b.tileID.overscaledZ-_.tileID.overscaledZ),k=[_.tileID.canonical.x*w%1,_.tileID.canonical.y*w%1],E=(function(z,O,N){let j=ie(),Z=(j-O.timeAdded)/N,J=z.fadingDirection===xe.Incoming,se=a.an((j-z.timeAdded)/N,0,1),le=a.an(1-Z,0,1),oe=J?se:le;return{tileOpacity:oe,parentTileOpacity:J?le:se,fadeMix:{opacity:1,mix:1-oe}}})(_,b,n);return{parentTile:b,parentScaleBy:w,parentTopLeft:k,fadeValues:E}}if(_.selfFading){let b=(function(w,k){let E=(ie()-w.timeAdded)/k,z=a.an(E,0,1);return{tileOpacity:z,fadeMix:{opacity:z,mix:0}}})(_,n);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:b}}return m}let Ah=new a.bp(1,0,0,1),Mh=new a.bp(0,1,0,1),zh=new a.bp(0,0,1,1),Ih=new a.bp(1,0,1,1),$s=new a.bp(0,1,1,1);function ad(_,e,n,u){Wl(_,0,e+n/2,_.transform.width,n,u)}function sd(_,e,n,u){Wl(_,e-n/2,0,n,_.transform.height,u)}function Wl(_,e,n,u,m,b){let w=_.context,k=w.gl;k.enable(k.SCISSOR_TEST),k.scissor(e*_.pixelRatio,n*_.pixelRatio,u*_.pixelRatio,m*_.pixelRatio),w.clear({color:b}),k.disable(k.SCISSOR_TEST)}function Lh(_,e,n){let u=_.context,m=u.gl,b=_.useProgram("debug"),w=Ft.disabled,k=ti.disabled,E=_.colorModeForRenderPass(),z="$debug",O=_.style.map.terrain&&_.style.map.terrain.getTerrainData(n);u.activeTexture.set(m.TEXTURE0);let N=e.getTileByID(n.key).latestRawTileData,j=Math.floor((N&&N.byteLength||0)/1024),Z=e.getTile(n).tileSize,J=512/Math.min(Z,512)*(n.overscaledZ/_.transform.zoom)*.5,se=n.canonical.toString();n.overscaledZ!==n.canonical.z&&(se+=` => ${n.overscaledZ}`),(function(oe,de){oe.initDebugOverlayCanvas();let ye=oe.debugOverlayCanvas,ue=oe.context.gl,me=oe.debugOverlayCanvas.getContext("2d");me.clearRect(0,0,ye.width,ye.height),me.shadowColor="white",me.shadowBlur=2,me.lineWidth=1.5,me.strokeStyle="white",me.textBaseline="top",me.font="bold 36px Open Sans, sans-serif",me.fillText(de,5,5),me.strokeText(de,5,5),oe.debugOverlayTexture.update(ye),oe.debugOverlayTexture.bind(ue.LINEAR,ue.CLAMP_TO_EDGE)})(_,`${se} ${j}kB`);let le=_.transform.getProjectionData({overscaledTileID:n,applyGlobeMatrix:!0,applyTerrainMatrix:!0});b.draw(u,m.TRIANGLES,w,k,Ci.alphaBlended,$t.disabled,Yn(a.bp.transparent,J),null,le,z,_.debugBuffer,_.quadTriangleIndexBuffer,_.debugSegments),b.draw(u,m.LINE_STRIP,w,k,E,$t.disabled,Yn(a.bp.red),O,le,z,_.debugBuffer,_.tileBorderIndexBuffer,_.debugSegments)}function od(_,e,n,u){let{isRenderingGlobe:m}=u,b=_.context,w=b.gl,k=_.transform,E=_.colorModeForRenderPass(),z=_.getDepthModeFor3D(),O=_.useProgram("terrain");b.bindFramebuffer.set(null),b.viewport.set([0,0,_.width,_.height]);for(let N of n){let j=e.getTerrainMesh(N.tileID),Z=_.renderToTexture.getTexture(N),J=e.getTerrainData(N.tileID);b.activeTexture.set(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,Z.texture);let se=e.getMeshFrameDelta(k.zoom),le=k.calculateFogMatrix(N.tileID.toUnwrapped()),oe=Cc(se,le,_.style.sky,k.pitch,m),de=k.getProjectionData({overscaledTileID:N.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});O.draw(b,w.TRIANGLES,z,ti.disabled,E,$t.backCCW,oe,J,de,"terrain",j.vertexBuffer,j.indexBuffer,j.segments)}}function ld(_,e){if(!e.mesh){let n=new a.aW;n.emplaceBack(-1,-1),n.emplaceBack(1,-1),n.emplaceBack(1,1),n.emplaceBack(-1,1);let u=new a.aY;u.emplaceBack(0,1,2),u.emplaceBack(0,2,3),e.mesh=new vi(_.createVertexBuffer(n,Zn.members),_.createIndexBuffer(u),a.aX.simpleSegment(0,0,n.length,u.length))}return e.mesh}class Dh{constructor(e,n){this.context=new re(e),this.transform=n,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.ar(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Wi.maxOverzooming+Wi.maxUnderzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Xr}resize(e,n,u){if(this.width=Math.floor(e*u),this.height=Math.floor(n*u),this.pixelRatio=u,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(let m of this.style._order)this.style._layers[m].resize()}setup(){let e=this.context,n=new a.aW;n.emplaceBack(0,0),n.emplaceBack(a.a5,0),n.emplaceBack(0,a.a5),n.emplaceBack(a.a5,a.a5),this.tileExtentBuffer=e.createVertexBuffer(n,Zn.members),this.tileExtentSegments=a.aX.simpleSegment(0,0,4,2);let u=new a.aW;u.emplaceBack(0,0),u.emplaceBack(a.a5,0),u.emplaceBack(0,a.a5),u.emplaceBack(a.a5,a.a5),this.debugBuffer=e.createVertexBuffer(u,Zn.members),this.debugSegments=a.aX.simpleSegment(0,0,4,5);let m=new a.ch;m.emplaceBack(0,0,0,0),m.emplaceBack(a.a5,0,a.a5,0),m.emplaceBack(0,a.a5,0,a.a5),m.emplaceBack(a.a5,a.a5,a.a5,a.a5),this.rasterBoundsBuffer=e.createVertexBuffer(m,td.members),this.rasterBoundsSegments=a.aX.simpleSegment(0,0,4,2);let b=new a.aW;b.emplaceBack(0,0),b.emplaceBack(a.a5,0),b.emplaceBack(0,a.a5),b.emplaceBack(a.a5,a.a5),this.rasterBoundsBufferPosOnly=e.createVertexBuffer(b,Zn.members),this.rasterBoundsSegmentsPosOnly=a.aX.simpleSegment(0,0,4,5);let w=new a.aW;w.emplaceBack(0,0),w.emplaceBack(1,0),w.emplaceBack(0,1),w.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(w,Zn.members),this.viewportSegments=a.aX.simpleSegment(0,0,4,2);let k=new a.ci;k.emplaceBack(0),k.emplaceBack(1),k.emplaceBack(3),k.emplaceBack(2),k.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(k);let E=new a.aY;E.emplaceBack(1,0,2),E.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(E);let z=this.context.gl;this.stencilClearMode=new ti({func:z.ALWAYS,mask:0},0,255,z.ZERO,z.ZERO,z.ZERO),this.tileExtentMesh=new vi(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){let e=this.context,n=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;let u=a.N();a.c7(u,0,this.width,this.height,0,0,1),a.Q(u,u,[n.drawingBufferWidth,n.drawingBufferHeight,0]);let m={mainMatrix:u,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:u};this.useProgram("clippingMask",null,!0).draw(e,n.TRIANGLES,Ft.disabled,this.stencilClearMode,Ci.disabled,$t.disabled,null,null,m,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(e,n,u){if(this.currentStencilSource===e.source||!e.isTileClipped()||!n||!n.length)return;this.currentStencilSource=e.source,this.nextStencilID+n.length>256&&this.clearStencil();let m=this.context;m.setColorMode(Ci.disabled),m.setDepthMode(Ft.disabled);let b={};for(let w of n)b[w.key]=this.nextStencilID++;this._renderTileMasks(b,n,u,!0),this._renderTileMasks(b,n,u,!1),this._tileClippingMaskIDs=b}_renderTileMasks(e,n,u,m){let b=this.context,w=b.gl,k=this.style.projection,E=this.transform,z=this.useProgram("clippingMask");for(let O of n){let N=e[O.key],j=this.style.map.terrain&&this.style.map.terrain.getTerrainData(O),Z=k.getMeshFromTileID(this.context,O.canonical,m,!0,"stencil"),J=E.getProjectionData({overscaledTileID:O,applyGlobeMatrix:!u,applyTerrainMatrix:!0});z.draw(b,w.TRIANGLES,Ft.disabled,new ti({func:w.ALWAYS,mask:0},N,255,w.KEEP,w.KEEP,w.REPLACE),Ci.disabled,u?$t.disabled:$t.backCCW,null,j,J,"$clipping",Z.vertexBuffer,Z.indexBuffer,Z.segments)}}_renderTilesDepthBuffer(){let e=this.context,n=e.gl,u=this.style.projection,m=this.transform,b=this.useProgram("depth"),w=this.getDepthModeFor3D(),k=Ei(m,{tileSize:m.tileSize});for(let E of k){let z=this.style.map.terrain&&this.style.map.terrain.getTerrainData(E),O=u.getMeshFromTileID(this.context,E.canonical,!0,!0,"raster"),N=m.getProjectionData({overscaledTileID:E,applyGlobeMatrix:!0,applyTerrainMatrix:!0});b.draw(e,n.TRIANGLES,w,ti.disabled,Ci.disabled,$t.backCCW,null,z,N,"$clipping",O.vertexBuffer,O.indexBuffer,O.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();let e=this.nextStencilID++,n=this.context.gl;return new ti({func:n.NOTEQUAL,mask:255},e,255,n.KEEP,n.KEEP,n.REPLACE)}stencilModeForClipping(e){let n=this.context.gl;return new ti({func:n.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,n.KEEP,n.KEEP,n.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(e){let n=this.context.gl,u=e.sort(((w,k)=>k.overscaledZ-w.overscaledZ)),m=u[u.length-1].overscaledZ,b=u[0].overscaledZ-m+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();let w={};for(let k=0;k<b;k++)w[k+m]=new ti({func:n.GEQUAL,mask:255},k+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=b,[w,u]}return[{[m]:ti.disabled},u]}stencilConfigForOverlapTwoPass(e){let n=this.context.gl,u=e.sort(((w,k)=>k.overscaledZ-w.overscaledZ)),m=u[u.length-1].overscaledZ,b=u[0].overscaledZ-m+1;if(this.clearStencil(),b>1){let w={},k={};for(let E=0;E<b;E++)w[E+m]=new ti({func:n.GREATER,mask:255},b+1+E,255,n.KEEP,n.KEEP,n.REPLACE),k[E+m]=new ti({func:n.GREATER,mask:255},1+E,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID=2*b+1,[w,k,u]}return this.nextStencilID=3,[{[m]:new ti({func:n.GREATER,mask:255},2,255,n.KEEP,n.KEEP,n.REPLACE)},{[m]:new ti({func:n.GREATER,mask:255},1,255,n.KEEP,n.KEEP,n.REPLACE)},u]}colorModeForRenderPass(){let e=this.context.gl;return this._showOverdrawInspector?new Ci([e.CONSTANT_COLOR,e.ONE],new a.bp(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Ci.unblended:Ci.alphaBlended}getDepthModeForSublayer(e,n,u){if(!this.opaquePassEnabledForLayer())return Ft.disabled;let m=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new Ft(u||this.context.gl.LEQUAL,n,[m,m])}getDepthModeFor3D(){return new Ft(this.context.gl.LEQUAL,Ft.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,n){var u,m;this.style=e,this.options=n,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(ie()),this.imageManager.beginFrame();let b=this.style._order,w=this.style.tileManagers,k={},E={},z={},O={isRenderingToTexture:!1,isRenderingGlobe:((u=e.projection)===null||u===void 0?void 0:u.transitionState)>0};for(let j in w){let Z=w[j];Z.used&&Z.prepare(this.context),k[j]=Z.getVisibleCoordinates(!1),E[j]=k[j].slice().reverse(),z[j]=Z.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let j=0;j<b.length;j++)if(this.style._layers[b[j]].is3D()){this.opaquePassCutoff=j;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(let j of b){let Z=this.style._layers[j];if(!Z.hasOffscreenPass()||Z.isHidden(this.transform.zoom))continue;let J=E[Z.source];(Z.type==="custom"||J.length)&&this.renderLayer(this,w[Z.source],Z,J,O)}if((m=this.style.projection)===null||m===void 0||m.updateGPUdependent({context:this.context,useProgram:j=>this.useProgram(j)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?a.bp.black:a.bp.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(j,Z){let J=j.context,se=J.gl,le=((be,fe,Te)=>{let Fe=Math.cos(fe.rollInRadians),Oe=Math.sin(fe.rollInRadians),Re=Ne(fe),Be=fe.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:be.properties.get("sky-color"),u_horizon_color:be.properties.get("horizon-color"),u_horizon:[(fe.width/2-Re*Oe)*Te,(fe.height/2+Re*Fe)*Te],u_horizon_normal:[-Oe,Fe],u_sky_horizon_blend:be.properties.get("sky-horizon-blend")*fe.height/2*Te,u_sky_blend:Be}})(Z,j.style.map.transform,j.pixelRatio),oe=new Ft(se.LEQUAL,Ft.ReadWrite,[0,1]),de=ti.disabled,ye=j.colorModeForRenderPass(),ue=j.useProgram("sky"),me=ld(J,Z);ue.draw(J,se.TRIANGLES,oe,de,ye,$t.disabled,le,null,void 0,"sky",me.vertexBuffer,me.indexBuffer,me.segments)})(this,this.style.sky),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=b.length-1;this.currentLayer>=0;this.currentLayer--){let j=this.style._layers[b[this.currentLayer]],Z=w[j.source],J=k[j.source];this._renderTileClippingMasks(j,J,!1),this.renderLayer(this,Z,j,J,O)}this.renderPass="translucent";let N=!1;for(this.currentLayer=0;this.currentLayer<b.length;this.currentLayer++){let j=this.style._layers[b[this.currentLayer]],Z=w[j.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(j,O))continue;this.opaquePassEnabledForLayer()||N||(N=!0,O.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());let J=(j.type==="symbol"?z:E)[j.source];this._renderTileClippingMasks(j,k[j.source],!!this.renderToTexture),this.renderLayer(this,Z,j,J,O)}if(O.isRenderingGlobe&&(function(j,Z,J){let se=j.context,le=se.gl,oe=j.useProgram("atmosphere"),de=new Ft(le.LEQUAL,Ft.ReadOnly,[0,1]),ye=j.transform,ue=(function(Be,Je){let et=Be.properties.get("position"),$e=[-et.x,-et.y,-et.z],ot=a.ar(new Float64Array(16));return Be.properties.get("anchor")==="map"&&(a.bg(ot,ot,Je.rollInRadians),a.bh(ot,ot,-Je.pitchInRadians),a.bg(ot,ot,Je.bearingInRadians),a.bh(ot,ot,Je.center.lat*Math.PI/180),a.bJ(ot,ot,-Je.center.lng*Math.PI/180)),a.cg($e,$e,ot),$e})(J,j.transform),me=ye.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),be=Z.properties.get("atmosphere-blend")*me.projectionTransition;if(be===0)return;let fe=la(ye.worldSize,ye.center.lat),Te=ye.inverseProjectionMatrix,Fe=new Float64Array(4);Fe[3]=1,a.aH(Fe,Fe,ye.modelViewProjectionMatrix),Fe[0]/=Fe[3],Fe[1]/=Fe[3],Fe[2]/=Fe[3],Fe[3]=1,a.aH(Fe,Fe,Te),Fe[0]/=Fe[3],Fe[1]/=Fe[3],Fe[2]/=Fe[3],Fe[3]=1;let Oe=((Be,Je,et,$e,ot)=>({u_sun_pos:Be,u_atmosphere_blend:Je,u_globe_position:et,u_globe_radius:$e,u_inv_proj_matrix:ot}))(ue,be,[Fe[0],Fe[1],Fe[2]],fe,Te),Re=ld(se,Z);oe.draw(se,le.TRIANGLES,de,ti.disabled,Ci.alphaBlended,$t.disabled,Oe,null,null,"atmosphere",Re.vertexBuffer,Re.indexBuffer,Re.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){let j=(function(Z,J){let se=null,le=Object.values(Z._layers).flatMap((ue=>ue.source&&!ue.isHidden(J)?[Z.tileManagers[ue.source]]:[])),oe=le.filter((ue=>ue.getSource().type==="vector")),de=le.filter((ue=>ue.getSource().type!=="vector")),ye=ue=>{(!se||se.getSource().maxzoom<ue.getSource().maxzoom)&&(se=ue)};return oe.forEach((ue=>ye(ue))),se||de.forEach((ue=>ye(ue))),se})(this.style,this.transform.zoom);j&&(function(Z,J,se){for(let le=0;le<se.length;le++)Lh(Z,J,se[le])})(this,j,j.getVisibleCoordinates())}this.options.showPadding&&(function(j){let Z=j.transform.padding;ad(j,j.transform.height-(Z.top||0),3,Ah),ad(j,Z.bottom||0,3,Mh),sd(j,Z.left||0,3,zh),sd(j,j.transform.width-(Z.right||0),3,Ih);let J=j.transform.centerPoint;(function(se,le,oe,de){Wl(se,le-1,oe-10,2,20,de),Wl(se,le-10,oe-1,20,2,de)})(j,J.x,j.transform.height-J.y,$s)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(e){if(!this.style||!this.style.map||!this.style.map.terrain)return;let n=this.terrainFacilitator.matrix,u=this.transform.modelViewProjectionMatrix,m=this.terrainFacilitator.dirty;m||(m=e?!a.cj(n,u):!a.ck(n,u)),m||(m=this.style.map.terrain.tileManager.anyTilesAfterTime(this.terrainFacilitator.renderTime)),m&&(a.cl(n,u),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(b,w){let k=b.context,E=k.gl,z=b.transform,O=Ci.unblended,N=new Ft(E.LEQUAL,Ft.ReadWrite,[0,1]),j=w.tileManager.getRenderableTiles(),Z=b.useProgram("terrainDepth");k.bindFramebuffer.set(w.getFramebuffer("depth").framebuffer),k.viewport.set([0,0,b.width/devicePixelRatio,b.height/devicePixelRatio]),k.clear({color:a.bp.transparent,depth:1});for(let J of j){let se=w.getTerrainMesh(J.tileID),le=w.getTerrainData(J.tileID),oe=z.getProjectionData({overscaledTileID:J.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),de={u_ele_delta:w.getMeshFrameDelta(z.zoom)};Z.draw(k,E.TRIANGLES,N,ti.disabled,O,$t.backCCW,de,le,oe,"terrain",se.vertexBuffer,se.indexBuffer,se.segments)}k.bindFramebuffer.set(null),k.viewport.set([0,0,b.width,b.height])})(this,this.style.map.terrain),(function(b,w){let k=b.context,E=k.gl,z=b.transform,O=Ci.unblended,N=new Ft(E.LEQUAL,Ft.ReadWrite,[0,1]),j=w.getCoordsTexture(),Z=w.tileManager.getRenderableTiles(),J=b.useProgram("terrainCoords");k.bindFramebuffer.set(w.getFramebuffer("coords").framebuffer),k.viewport.set([0,0,b.width/devicePixelRatio,b.height/devicePixelRatio]),k.clear({color:a.bp.transparent,depth:1}),w.coordsIndex=[];for(let se of Z){let le=w.getTerrainMesh(se.tileID),oe=w.getTerrainData(se.tileID);k.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,j.texture);let de={u_terrain_coords_id:(255-w.coordsIndex.length)/255,u_texture:0,u_ele_delta:w.getMeshFrameDelta(z.zoom)},ye=z.getProjectionData({overscaledTileID:se.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});J.draw(k,E.TRIANGLES,N,ti.disabled,O,$t.backCCW,de,oe,ye,"terrain",le.vertexBuffer,le.indexBuffer,le.segments),w.coordsIndex.push(se.tileID.key)}k.bindFramebuffer.set(null),k.viewport.set([0,0,b.width,b.height])})(this,this.style.map.terrain))}renderLayer(e,n,u,m,b){u.isHidden(this.transform.zoom)||(u.type==="background"||u.type==="custom"||(m||[]).length)&&(this.id=u.id,a.cm(u)?(function(w,k,E,z,O,N){if(w.renderPass!=="translucent")return;let{isRenderingToTexture:j}=N,Z=ti.disabled,J=w.colorModeForRenderPass();(E._unevaluatedLayout.hasValue("text-variable-anchor")||E._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(se,le,oe,de,ye,ue,me,be,fe){let Te=le.transform,Fe=le.style.map.terrain,Oe=ye==="map",Re=ue==="map";for(let Be of se){let Je=de.getTile(Be),et=Je.getBucket(oe);if(!et||!et.text||!et.text.segments.get().length)continue;let $e=a.ay(et.textSizeData,Te.zoom),ot=a.aN(Je,1,le.transform.zoom),Rt=Yr(Oe,le.transform,ot),bi=oe.layout.get("icon-text-fit")!=="none"&&et.hasIconData();if($e){let ji=Math.pow(2,Te.zoom-Je.tileID.overscaledZ),Li=Fe?(Zi,Di)=>Fe.getElevation(Be,Zi,Di):null;It(et,Oe,Re,fe,Te,Rt,ji,$e,bi,a.aO(Te,Je,me,be),Be.toUnwrapped(),Li)}}})(z,w,E,k,E.layout.get("text-rotation-alignment"),E.layout.get("text-pitch-alignment"),E.paint.get("text-translate"),E.paint.get("text-translate-anchor"),O),E.paint.get("icon-opacity").constantOr(1)!==0&&yr(w,k,E,z,!1,E.paint.get("icon-translate"),E.paint.get("icon-translate-anchor"),E.layout.get("icon-rotation-alignment"),E.layout.get("icon-pitch-alignment"),E.layout.get("icon-keep-upright"),Z,J,j),E.paint.get("text-opacity").constantOr(1)!==0&&yr(w,k,E,z,!0,E.paint.get("text-translate"),E.paint.get("text-translate-anchor"),E.layout.get("text-rotation-alignment"),E.layout.get("text-pitch-alignment"),E.layout.get("text-keep-upright"),Z,J,j),k.map.showCollisionBoxes&&(De(w,k,E,z,!0),De(w,k,E,z,!1))})(e,n,u,m,this.style.placement.variableOffsets,b):a.cn(u)?(function(w,k,E,z,O){if(w.renderPass!=="translucent")return;let{isRenderingToTexture:N}=O,j=E.paint.get("circle-opacity"),Z=E.paint.get("circle-stroke-width"),J=E.paint.get("circle-stroke-opacity"),se=!E.layout.get("circle-sort-key").isConstant();if(j.constantOr(1)===0&&(Z.constantOr(1)===0||J.constantOr(1)===0))return;let le=w.context,oe=le.gl,de=w.transform,ye=w.getDepthModeForSublayer(0,Ft.ReadOnly),ue=ti.disabled,me=w.colorModeForRenderPass(),be=[],fe=de.getCircleRadiusCorrection();for(let Te=0;Te<z.length;Te++){let Fe=z[Te],Oe=k.getTile(Fe),Re=Oe.getBucket(E);if(!Re)continue;let Be=E.paint.get("circle-translate"),Je=E.paint.get("circle-translate-anchor"),et=a.aO(de,Oe,Be,Je),$e=Re.programConfigurations.get(E.id),ot=w.useProgram("circle",$e),Rt=Re.layoutVertexBuffer,bi=Re.indexBuffer,ji=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Fe),Li={programConfiguration:$e,program:ot,layoutVertexBuffer:Rt,indexBuffer:bi,uniformValues:ql(w,Oe,E,et,fe),terrainData:ji,projectionData:de.getProjectionData({overscaledTileID:Fe,applyGlobeMatrix:!N,applyTerrainMatrix:!0})};if(se){let Zi=Re.segments.get();for(let Di of Zi)be.push({segments:new a.aX([Di]),sortKey:Di.sortKey,state:Li})}else be.push({segments:Re.segments,sortKey:0,state:Li})}se&&be.sort(((Te,Fe)=>Te.sortKey-Fe.sortKey));for(let Te of be){let{programConfiguration:Fe,program:Oe,layoutVertexBuffer:Re,indexBuffer:Be,uniformValues:Je,terrainData:et,projectionData:$e}=Te.state;Oe.draw(le,oe.TRIANGLES,ye,ue,me,$t.backCCW,Je,et,$e,E.id,Re,Be,Te.segments,E.paint,w.transform.zoom,Fe)}})(e,n,u,m,b):a.co(u)?(function(w,k,E,z,O){if(E.paint.get("heatmap-opacity")===0)return;let N=w.context,{isRenderingToTexture:j,isRenderingGlobe:Z}=O;if(w.style.map.terrain){for(let J of z){let se=k.getTile(J);k.hasRenderableParent(J)||(w.renderPass==="offscreen"?hn(w,se,E,J,Z):w.renderPass==="translucent"&&Zr(w,E,J,j,Z))}N.viewport.set([0,0,w.width,w.height])}else w.renderPass==="offscreen"?(function(J,se,le,oe){let de=J.context,ye=de.gl,ue=J.transform,me=ti.disabled,be=new Ci([ye.ONE,ye.ONE],a.bp.transparent,[!0,!0,!0,!0]);(function(fe,Te,Fe){let Oe=fe.gl;fe.activeTexture.set(Oe.TEXTURE1),fe.viewport.set([0,0,Te.width/4,Te.height/4]);let Re=Fe.heatmapFbos.get(a.cd);Re?(Oe.bindTexture(Oe.TEXTURE_2D,Re.colorAttachment.get()),fe.bindFramebuffer.set(Re.framebuffer)):(Re=Kn(fe,Te.width/4,Te.height/4),Fe.heatmapFbos.set(a.cd,Re))})(de,J,le),de.clear({color:a.bp.transparent});for(let fe=0;fe<oe.length;fe++){let Te=oe[fe];if(se.hasRenderableParent(Te))continue;let Fe=se.getTile(Te),Oe=Fe.getBucket(le);if(!Oe)continue;let Re=Oe.programConfigurations.get(le.id),Be=J.useProgram("heatmap",Re),Je=ue.getProjectionData({overscaledTileID:Te,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),et=ue.getCircleRadiusCorrection();Be.draw(de,ye.TRIANGLES,Ft.disabled,me,be,$t.backCCW,ha(Fe,ue.zoom,le.paint.get("heatmap-intensity"),et),null,Je,le.id,Oe.layoutVertexBuffer,Oe.indexBuffer,Oe.segments,le.paint,ue.zoom,Re)}de.viewport.set([0,0,J.width,J.height])})(w,k,E,z):w.renderPass==="translucent"&&(function(J,se){let le=J.context,oe=le.gl;le.setColorMode(J.colorModeForRenderPass());let de=se.heatmapFbos.get(a.cd);de&&(le.activeTexture.set(oe.TEXTURE0),oe.bindTexture(oe.TEXTURE_2D,de.colorAttachment.get()),le.activeTexture.set(oe.TEXTURE1),ol(le,se).bind(oe.LINEAR,oe.CLAMP_TO_EDGE),J.useProgram("heatmapTexture").draw(le,oe.TRIANGLES,Ft.disabled,ti.disabled,J.colorModeForRenderPass(),$t.disabled,Ac(J,se,0,1),null,null,se.id,J.viewportBuffer,J.quadTriangleIndexBuffer,J.viewportSegments,se.paint,J.transform.zoom))})(w,E)})(e,n,u,m,b):a.cp(u)?(function(w,k,E,z,O){if(w.renderPass!=="translucent")return;let{isRenderingToTexture:N}=O,j=E.paint.get("line-opacity"),Z=E.paint.get("line-width");if(j.constantOr(1)===0||Z.constantOr(1)===0)return;let J=w.getDepthModeForSublayer(0,Ft.ReadOnly),se=w.colorModeForRenderPass(),le=E.paint.get("line-dasharray"),oe=le.constantOr(1),de=E.paint.get("line-pattern"),ye=de.constantOr(1),ue=E.paint.get("line-gradient"),me=E.getCrossfadeParameters(),be;be=ye?"linePattern":oe&&ue?"lineGradientSDF":oe?"lineSDF":ue?"lineGradient":"line";let fe=w.context,Te=fe.gl,Fe=w.transform,Oe=!0;for(let Re of z){let Be=k.getTile(Re);if(ye&&!Be.patternsLoaded())continue;let Je=Be.getBucket(E);if(!Je)continue;let et=Je.programConfigurations.get(E.id),$e=w.context.program.get(),ot=w.useProgram(be,et),Rt=Oe||ot.program!==$e,bi=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Re),ji=de.constantOr(null),Li=le&&le.constantOr(null);if(ji&&Be.imageAtlas){let Dr=Be.imageAtlas,_r=Dr.patternPositions[ji.to.toString()],dr=Dr.patternPositions[ji.from.toString()];_r&&dr&&et.setConstantPatternPositions(_r,dr)}else if(Li){let Dr=E.layout.get("line-cap")==="round",_r=w.lineAtlas.getDash(Li.to,Dr),dr=w.lineAtlas.getDash(Li.from,Dr);et.setConstantDashPositions(_r,dr)}let Zi=Fe.getProjectionData({overscaledTileID:Re,applyGlobeMatrix:!N,applyTerrainMatrix:!0}),Di=Fe.getPixelScale(),sr;ye?(sr=Rn(w,Be,E,Di,me),Vc(fe,Te,Be,et,me)):oe&&ue?(sr=bo(w,Be,E,Di,me,Je.lineClipsArray.length),Qr(w,k,fe,Te,E,Je,Re,et,me)):oe?(sr=vo(w,Be,E,Di,me),Gi(w,fe,Te,et,Rt,me)):ue?(sr=zc(w,Be,E,Di,Je.lineClipsArray.length),cs(w,k,fe,Te,E,Je,Re)):sr=Xn(w,Be,E,Di);let Hi=w.stencilModeForClipping(Re);ot.draw(fe,Te.TRIANGLES,J,Hi,se,$t.disabled,sr,bi,Zi,E.id,Je.layoutVertexBuffer,Je.indexBuffer,Je.segments,E.paint,w.transform.zoom,et,Je.layoutVertexBuffer2),Oe=!1}})(e,n,u,m,b):a.cq(u)?(function(w,k,E,z,O){let N=E.paint.get("fill-color"),j=E.paint.get("fill-opacity");if(j.constantOr(1)===0)return;let{isRenderingToTexture:Z}=O,J=w.colorModeForRenderPass(),se=E.paint.get("fill-pattern"),le=w.opaquePassEnabledForLayer()&&!se.constantOr(1)&&N.constantOr(a.bp.transparent).a===1&&j.constantOr(0)===1?"opaque":"translucent";if(w.renderPass===le){let oe=w.getDepthModeForSublayer(1,w.renderPass==="opaque"?Ft.ReadWrite:Ft.ReadOnly);ja(w,k,E,z,oe,J,!1,Z)}if(w.renderPass==="translucent"&&E.paint.get("fill-antialias")){let oe=w.getDepthModeForSublayer(E.getPaintProperty("fill-outline-color")?2:0,Ft.ReadOnly);ja(w,k,E,z,oe,J,!0,Z)}})(e,n,u,m,b):a.cr(u)?(function(w,k,E,z,O){let N=E.paint.get("fill-extrusion-opacity");if(N===0)return;let{isRenderingToTexture:j}=O;if(w.renderPass==="translucent"){let Z=new Ft(w.context.gl.LEQUAL,Ft.ReadWrite,w.depthRangeFor3D);if(N!==1||E.paint.get("fill-extrusion-pattern").constantOr(1))ll(w,k,E,z,Z,ti.disabled,Ci.disabled,j),ll(w,k,E,z,Z,w.stencilModeFor3D(),w.colorModeForRenderPass(),j);else{let J=w.colorModeForRenderPass();ll(w,k,E,z,Z,ti.disabled,J,j)}}})(e,n,u,m,b):a.cs(u)?(function(w,k,E,z,O){if(w.renderPass!=="offscreen"&&w.renderPass!=="translucent")return;let{isRenderingToTexture:N}=O,j=w.context,Z=w.style.projection.useSubdivision,J=w.getDepthModeForSublayer(0,Ft.ReadOnly),se=w.colorModeForRenderPass();if(w.renderPass==="offscreen")(function(le,oe,de,ye,ue,me,be){let fe=le.context,Te=fe.gl;for(let Fe of de){let Oe=oe.getTile(Fe),Re=Oe.dem;if(!Re||!Re.data||!Oe.needsHillshadePrepare)continue;let Be=Re.dim,Je=Re.stride,et=Re.getPixels();if(fe.activeTexture.set(Te.TEXTURE1),fe.pixelStoreUnpackPremultiplyAlpha.set(!1),Oe.demTexture=Oe.demTexture||le.getTileTexture(Je),Oe.demTexture){let ot=Oe.demTexture;ot.update(et,{premultiply:!1}),ot.bind(Te.NEAREST,Te.CLAMP_TO_EDGE)}else Oe.demTexture=new a.T(fe,et,Te.RGBA,{premultiply:!1}),Oe.demTexture.bind(Te.NEAREST,Te.CLAMP_TO_EDGE);fe.activeTexture.set(Te.TEXTURE0);let $e=Oe.fbo;if(!$e){let ot=new a.T(fe,{width:Be,height:Be,data:null},Te.RGBA);ot.bind(Te.LINEAR,Te.CLAMP_TO_EDGE),$e=Oe.fbo=fe.createFramebuffer(Be,Be,!0,!1),$e.colorAttachment.set(ot.texture)}fe.bindFramebuffer.set($e.framebuffer),fe.viewport.set([0,0,Be,Be]),le.useProgram("hillshadePrepare").draw(fe,Te.TRIANGLES,ue,me,be,$t.disabled,id(Oe.tileID,Re),null,null,ye.id,le.rasterBoundsBuffer,le.quadTriangleIndexBuffer,le.rasterBoundsSegments),Oe.needsHillshadePrepare=!1}})(w,k,z,E,J,ti.disabled,se),j.viewport.set([0,0,w.width,w.height]);else if(w.renderPass==="translucent")if(Z){let[le,oe,de]=w.stencilConfigForOverlapTwoPass(z);Na(w,k,E,de,le,J,se,!1,N),Na(w,k,E,de,oe,J,se,!0,N)}else{let[le,oe]=w.getStencilConfigForOverlapAndUpdateStencilID(z);Na(w,k,E,oe,le,J,se,!1,N)}})(e,n,u,m,b):a.ct(u)?(function(w,k,E,z,O){if(w.renderPass!=="translucent"||!z.length)return;let{isRenderingToTexture:N}=O,j=w.style.projection.useSubdivision,Z=w.getDepthModeForSublayer(0,Ft.ReadOnly),J=w.colorModeForRenderPass();if(j){let[se,le,oe]=w.stencilConfigForOverlapTwoPass(z);To(w,k,E,oe,se,Z,J,!1,N),To(w,k,E,oe,le,Z,J,!0,N)}else{let[se,le]=w.getStencilConfigForOverlapAndUpdateStencilID(z);To(w,k,E,le,se,Z,J,!1,N)}})(e,n,u,m,b):a.bU(u)?(function(w,k,E,z,O){if(w.renderPass!=="translucent"||E.paint.get("raster-opacity")===0||!z.length)return;let{isRenderingToTexture:N}=O,j=k.getSource(),Z=w.style.projection.useSubdivision;if(j instanceof on)us(w,k,E,z,null,!1,!1,j.tileCoords,j.flippedWindingOrder,N);else if(Z){let[J,se,le]=w.stencilConfigForOverlapTwoPass(z);us(w,k,E,le,J,!1,!0,ga,!1,N),us(w,k,E,le,se,!0,!0,ga,!1,N)}else{let[J,se]=w.getStencilConfigForOverlapAndUpdateStencilID(z);us(w,k,E,se,J,!1,!0,ga,!1,N)}})(e,n,u,m,b):a.cu(u)?(function(w,k,E,z,O){let N=E.paint.get("background-color"),j=E.paint.get("background-opacity");if(j===0)return;let{isRenderingToTexture:Z}=O,J=w.context,se=J.gl,le=w.style.projection,oe=w.transform,de=oe.tileSize,ye=E.paint.get("background-pattern");if(w.isPatternMissing(ye))return;let ue=!ye&&N.a===1&&j===1&&w.opaquePassEnabledForLayer()?"opaque":"translucent";if(w.renderPass!==ue)return;let me=ti.disabled,be=w.getDepthModeForSublayer(0,ue==="opaque"?Ft.ReadWrite:Ft.ReadOnly),fe=w.colorModeForRenderPass(),Te=w.useProgram(ye?"backgroundPattern":"background"),Fe=z||Ei(oe,{tileSize:de,terrain:w.style.map.terrain});ye&&(J.activeTexture.set(se.TEXTURE0),w.imageManager.bind(w.context));let Oe=E.getCrossfadeParameters();for(let Re of Fe){let Be=oe.getProjectionData({overscaledTileID:Re,applyGlobeMatrix:!Z,applyTerrainMatrix:!0}),Je=ye?rd(j,w,ye,{tileID:Re,tileSize:de},Oe):el(j,N),et=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Re),$e=le.getMeshFromTileID(J,Re.canonical,!1,!0,"raster");Te.draw(J,se.TRIANGLES,be,me,fe,$t.backCCW,Je,et,Be,E.id,$e.vertexBuffer,$e.indexBuffer,$e.segments)}})(e,0,u,m,b):a.cv(u)&&(function(w,k,E,z){let{isRenderingGlobe:O}=z,N=w.context,j=E.implementation,Z=w.style.projection,J=w.transform,se=J.getProjectionDataForCustomLayer(O),le={farZ:J.farZ,nearZ:J.nearZ,fov:J.fov*Math.PI/180,modelViewProjectionMatrix:J.modelViewProjectionMatrix,projectionMatrix:J.projectionMatrix,shaderData:{variantName:Z.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${Z.shaderPreludeCode.vertexSource}`,define:Z.shaderDefine},defaultProjectionData:se},oe=j.renderingMode?j.renderingMode:"2d";if(w.renderPass==="offscreen"){let de=j.prerender;de&&(w.setCustomLayerDefaults(),N.setColorMode(w.colorModeForRenderPass()),de.call(j,N.gl,le),N.setDirty(),w.setBaseState())}else if(w.renderPass==="translucent"){w.setCustomLayerDefaults(),N.setColorMode(w.colorModeForRenderPass()),N.setStencilMode(ti.disabled);let de=oe==="3d"?w.getDepthModeFor3D():w.getDepthModeForSublayer(0,Ft.ReadOnly);N.setDepthMode(de),j.render(N.gl,le),N.setDirty(),w.setBaseState(),N.bindFramebuffer.set(null)}})(e,0,u,b))}saveTileTexture(e){let n=this._tileTextures[e.size[0]];n?n.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){let n=this._tileTextures[e];return n&&n.length>0?n.pop():null}isPatternMissing(e){if(!e)return!1;if(!e.from||!e.to)return!0;let n=this.imageManager.getPattern(e.from.toString()),u=this.imageManager.getPattern(e.to.toString());return!n||!u}useProgram(e,n,u=!1,m=[]){this.cache=this.cache||{};let b=!!this.style.map.terrain,w=this.style.projection,k=u?ci.projectionMercator:w.shaderPreludeCode,E=u?Cr:w.shaderDefine,z=e+(n?n.cacheKey:"")+`/${u?Ur:w.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(b?"/terrain":"")+(m?`/${m.join("/")}`:"");return this.cache[z]||(this.cache[z]=new rs(this.context,ci[e],n,nd[e],this._showOverdrawInspector,b,k,E,m)),this.cache[z]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){let e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){var e,n;if(this._tileTextures){for(let u in this._tileTextures){let m=this._tileTextures[u];if(m)for(let b of m)b.destroy()}this._tileTextures={}}if(this.tileExtentBuffer&&this.tileExtentBuffer.destroy(),this.debugBuffer&&this.debugBuffer.destroy(),this.rasterBoundsBuffer&&this.rasterBoundsBuffer.destroy(),this.rasterBoundsBufferPosOnly&&this.rasterBoundsBufferPosOnly.destroy(),this.viewportBuffer&&this.viewportBuffer.destroy(),this.tileBorderIndexBuffer&&this.tileBorderIndexBuffer.destroy(),this.quadTriangleIndexBuffer&&this.quadTriangleIndexBuffer.destroy(),this.tileExtentMesh&&((e=this.tileExtentMesh.vertexBuffer)===null||e===void 0||e.destroy()),this.tileExtentMesh&&((n=this.tileExtentMesh.indexBuffer)===null||n===void 0||n.destroy()),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.cache){for(let u in this.cache){let m=this.cache[u];m&&m.program&&this.context.gl.deleteProgram(m.program)}this.cache={}}this.context&&this.context.setDefault()}overLimit(){let{drawingBufferWidth:e,drawingBufferHeight:n}=this.context.gl;return this.width!==e||this.height!==n}}function cd(_,e){let n,u=!1,m=null,b=null,w=()=>{m=null,u&&(_.apply(b,n),m=setTimeout(w,e),u=!1)};return(...k)=>(u=!0,b=this,n=k,m||w(),m)}class ud{constructor(e){this._getCurrentHash=()=>{let n=window.location.hash.replace("#","");if(this._hashName){let u;return n.split("&").map((m=>m.split("="))).forEach((m=>{m[0]===this._hashName&&(u=m)})),(u&&u[1]||"").split("/")}return n.split("/")},this._onHashChange=()=>{let n=this._getCurrentHash();if(!this._isValidHash(n))return!1;let u=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(n[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+n[2],+n[1]],zoom:+n[0],bearing:u,pitch:+(n[4]||0)}),!0},this._updateHashUnthrottled=()=>{let n=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,n)},this._removeHash=()=>{let n=this._getCurrentHash();if(n.length===0)return;let u=n.join("/"),m=u;m.split("&").length>0&&(m=m.split("&")[0]),this._hashName&&(m=`${this._hashName}=${u}`);let b=window.location.hash.replace(m,"");b.startsWith("#&")?b=b.slice(0,1)+b.slice(2):b==="#"&&(b="");let w=window.location.href.replace(/(#.+)?$/,b);w=w.replace("&&","&"),window.history.replaceState(window.history.state,null,w)},this._updateHash=cd(this._updateHashUnthrottled,300),this._hashName=e&&encodeURIComponent(e)}addTo(e){return this._map=e,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(e){let n=this._map.getCenter(),u=Math.round(100*this._map.getZoom())/100,m=Math.ceil((u*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,m),w=Math.round(n.lng*b)/b,k=Math.round(n.lat*b)/b,E=this._map.getBearing(),z=this._map.getPitch(),O="";if(O+=e?`/${w}/${k}/${u}`:`${u}/${k}/${w}`,(E||z)&&(O+="/"+Math.round(10*E)/10),z&&(O+=`/${Math.round(z)}`),this._hashName){let N=this._hashName,j=!1,Z=window.location.hash.slice(1).split("&").map((J=>{let se=J.split("=")[0];return se===N?(j=!0,`${se}=${O}`):J})).filter((J=>J));return j||Z.push(`${N}=${O}`),`#${Z.join("&")}`}return`#${O}`}_isValidHash(e){if(e.length<3||e.some(isNaN))return!1;try{new a.V(+e[2],+e[1])}catch(b){return!1}let n=+e[0],u=+(e[3]||0),m=+(e[4]||0);return n>=this._map.getMinZoom()&&n<=this._map.getMaxZoom()&&u>=-180&&u<=180&&m>=this._map.getMinPitch()&&m<=this._map.getMaxPitch()}}let Ys={linearity:.3,easing:a.cw(0,0,.3,1)},Oh=a.e({deceleration:2500,maxSpeed:1400},Ys),Jn=a.e({deceleration:20,maxSpeed:1400},Ys),ya=a.e({deceleration:1e3,maxSpeed:360},Ys),Rh=a.e({deceleration:1e3,maxSpeed:90},Ys),_a=a.e({deceleration:1e3,maxSpeed:360},Ys);class Jf{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:ie(),settings:e})}_drainInertiaBuffer(){let e=this._inertiaBuffer,n=ie();for(;e.length>0&&n-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;let n={zoom:0,bearing:0,pitch:0,roll:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(let{settings:b}of this._inertiaBuffer)n.zoom+=b.zoomDelta||0,n.bearing+=b.bearingDelta||0,n.pitch+=b.pitchDelta||0,n.roll+=b.rollDelta||0,b.panDelta&&n.pan._add(b.panDelta),b.around&&(n.around=b.around),b.pinchAround&&(n.pinchAround=b.pinchAround);let u=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,m={};if(n.pan.mag()){let b=Ul(n.pan.mag(),u,a.e({},Oh,e||{})),w=n.pan.mult(b.amount/n.pan.mag()),k=this._map.cameraHelper.handlePanInertia(w,this._map.transform);m.center=k.easingCenter,m.offset=k.easingOffset,Gl(m,b)}if(n.zoom){let b=Ul(n.zoom,u,Jn),w=a.cx(this._map.transform.zoom+b.amount,this._map.getZoomSnap(),b.amount);m.zoom=w,Gl(m,b)}if(n.bearing){let b=Ul(n.bearing,u,ya);m.bearing=this._map.transform.bearing+a.an(b.amount,-179,179),Gl(m,b)}if(n.pitch){let b=Ul(n.pitch,u,Rh);m.pitch=this._map.transform.pitch+b.amount,Gl(m,b)}if(n.roll){let b=Ul(n.roll,u,_a);m.roll=this._map.transform.roll+a.an(b.amount,-179,179),Gl(m,b)}if(m.zoom||m.bearing){let b=n.pinchAround===void 0?n.around:n.pinchAround;m.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),a.e(m,{noMoveStart:!0})}}function Gl(_,e){(!_.duration||_.duration<e.duration)&&(_.duration=e.duration,_.easing=e.easing)}function Ul(_,e,n){let{maxSpeed:u,linearity:m,deceleration:b}=n,w=a.an(_*m/(e/1e3),-u,u),k=Math.abs(w)/(b*m);return{easing:n.easing,duration:1e3*k,amount:w*(k/2)}}class Lr extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,u,m={}){u=u instanceof MouseEvent?u:new MouseEvent(e,u);let b=Y.mousePos(n.getCanvas(),u),w=n.unproject(b);super(e,a.e({point:b,lngLat:w,originalEvent:u},m)),this._defaultPrevented=!1,this.target=n}}class Zl extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,u){let m=e==="touchend"?u.changedTouches:u.touches,b=Y.touchPos(n.getCanvasContainer(),m),w=b.map((E=>n.unproject(E))),k=b.reduce(((E,z,O,N)=>E.add(z.div(N.length))),new a.P(0,0));super(e,{points:b,point:k,lngLats:w,lngLat:n.unproject(k),originalEvent:u}),this._defaultPrevented=!1}}class Bh extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,u){super(e,{originalEvent:u}),this._defaultPrevented=!1}}class Qf{constructor(e,n){this._map=e,this._clickTolerance=n.clickTolerance}reset(){delete this._mousedownPos}wheel(e){return this._firePreventable(new Bh(e.type,this._map,e))}mousedown(e,n){return this._mousedownPos=n,this._firePreventable(new Lr(e.type,this._map,e))}mouseup(e){this._map.fire(new Lr(e.type,this._map,e))}click(e,n){this._mousedownPos&&this._mousedownPos.dist(n)>=this._clickTolerance||this._map.fire(new Lr(e.type,this._map,e))}dblclick(e){return this._firePreventable(new Lr(e.type,this._map,e))}mouseover(e){this._map.fire(new Lr(e.type,this._map,e))}mouseout(e){this._map.fire(new Lr(e.type,this._map,e))}touchstart(e){return this._firePreventable(new Zl(e.type,this._map,e))}touchmove(e){this._map.fire(new Zl(e.type,this._map,e))}touchend(e){this._map.fire(new Zl(e.type,this._map,e))}touchcancel(e){this._map.fire(new Zl(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class em{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(e){this._map.fire(new Lr(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Lr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._ignoreContextMenu||this._map.fire(new Lr(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class cl{constructor(e){this._map=e}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(e){return this.transform.screenPointToLocation(a.P.convert(e),this._map.terrain)}}class ul{constructor(e,n){this._map=e,this._tr=new cl(e),this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=n.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,n){this.isEnabled()&&e.shiftKey&&e.button===0&&(Y.disableDrag(),this._startPos=this._lastPos=n,this._active=!0)}mousemoveWindow(e,n){if(!this._active)return;let u=n;if(this._lastPos.equals(u)||!this._box&&u.dist(this._startPos)<this._clickTolerance)return;let m=this._startPos;this._lastPos=u,this._box||(this._box=Y.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",e));let b=Math.min(m.x,u.x),w=Math.max(m.x,u.x),k=Math.min(m.y,u.y),E=Math.max(m.y,u.y);Y.setTransform(this._box,`translate(${b}px,${k}px)`),this._box.style.width=w-b+"px",this._box.style.height=E-k+"px"}mouseupWindow(e,n){if(!this._active||e.button!==0)return;let u=this._startPos,m=n;if(this.reset(),Y.suppressClick(),u.x!==m.x||u.y!==m.y)return this._map.fire(new a.l("boxzoomend",{originalEvent:e})),{cameraAnimation:b=>b.fitScreenCoordinates(u,m,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",e)}keydown(e){this._active&&e.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",e))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(Y.remove(this._box),this._box=null),Y.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,n){return this._map.fire(new a.l(e,{originalEvent:n}))}}function va(_,e){if(_.length!==e.length)throw new Error(`The number of touches and points are not equal - touches ${_.length}, points ${e.length}`);let n={};for(let u=0;u<_.length;u++)n[_[u].identifier]=e[u];return n}class ut{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,n,u){(this.centroid||u.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=e.timeStamp),u.length===this.numTouches&&(this.centroid=(function(m){let b=new a.P(0,0);for(let w of m)b._add(w);return b.div(m.length)})(n),this.touches=va(u,n)))}touchmove(e,n,u){if(this.aborted||!this.centroid)return;let m=va(u,n);for(let b in this.touches){let w=m[b];(!w||w.dist(this.touches[b])>30)&&(this.aborted=!0)}}touchend(e,n,u){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),u.length===0){let m=!this.aborted&&this.centroid;if(this.reset(),m)return m}}}class Gc{constructor(e){this.singleTap=new ut(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(e,n,u){this.singleTap.touchstart(e,n,u)}touchmove(e,n,u){this.singleTap.touchmove(e,n,u)}touchend(e,n,u){let m=this.singleTap.touchend(e,n,u);if(m){let b=e.timeStamp-this.lastTime<500,w=!this.lastTap||this.lastTap.dist(m)<30;if(b&&w||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}}}class dd{constructor(e){this._tr=new cl(e),this._zoomIn=new Gc({numTouches:1,numTaps:2}),this._zoomOut=new Gc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,n,u){this._zoomIn.touchstart(e,n,u),this._zoomOut.touchstart(e,n,u)}touchmove(e,n,u){this._zoomIn.touchmove(e,n,u),this._zoomOut.touchmove(e,n,u)}touchend(e,n,u){let m=this._zoomIn.touchend(e,n,u),b=this._zoomOut.touchend(e,n,u),w=this._tr;return m?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:a.cx(w.zoom+1,k.getZoomSnap()),around:w.unproject(m)},{originalEvent:e})}):b?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:a.cx(w.zoom-1,k.getZoomSnap()),around:w.unproject(b)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class dl{constructor(e){this._enabled=!!e.enable,this._moveStateManager=e.moveStateManager,this._clickTolerance=e.clickTolerance||1,this._moveFunction=e.move,this._activateOnStart=!!e.activateOnStart,e.assignEvents(this),this.reset()}reset(e){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(e)}_move(...e){let n=this._moveFunction(...e);if(n.bearingDelta||n.pitchDelta||n.rollDelta||n.around||n.panDelta)return this._active=!0,n}dragStart(e,n){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(e)&&(this._moveStateManager.startMove(e),this._lastPoint=Array.isArray(n)?n[0]:n,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(e,n){if(!this.isEnabled())return;let u=this._lastPoint;if(!u)return;if(e.preventDefault(),!this._moveStateManager.isValidMoveEvent(e))return void this.reset(e);let m=Array.isArray(n)?n[0]:n;return!this._moved&&m.dist(u)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=m,this._move(u,m))}dragEnd(e){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(e)&&(this._moved&&Y.suppressClick(),this.reset(e))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}let Hl=0,$l=2,hd={[Hl]:1,[$l]:2};class Yl{constructor(e){this._correctEvent=e.checkCorrectEvent}startMove(e){let n=Y.mouseButton(e);this._eventButton=n}endMove(e){delete this._eventButton}isValidStartEvent(e){return this._correctEvent(e)}isValidMoveEvent(e){return!(function(n,u){let m=hd[u];return n.buttons===void 0||(n.buttons&m)!==m})(e,this._eventButton)}isValidEndEvent(e){return Y.mouseButton(e)===this._eventButton}}class pd{constructor(){this._firstTouch=void 0}_isOneFingerTouch(e){return e.targetTouches.length===1}_isSameTouchEvent(e){return e.targetTouches[0].identifier===this._firstTouch}startMove(e){this._firstTouch=e.targetTouches[0].identifier}endMove(e){delete this._firstTouch}isValidStartEvent(e){return this._isOneFingerTouch(e)}isValidMoveEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}isValidEndEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}}class Fh{constructor(e=new Yl({checkCorrectEvent:()=>!0}),n=new pd){this.mouseMoveStateManager=e,this.oneFingerTouchMoveStateManager=n}_executeRelevantHandler(e,n,u){return e instanceof MouseEvent?n(e):typeof TouchEvent!="undefined"&&e instanceof TouchEvent?u(e):void 0}startMove(e){this._executeRelevantHandler(e,(n=>this.mouseMoveStateManager.startMove(n)),(n=>this.oneFingerTouchMoveStateManager.startMove(n)))}endMove(e){this._executeRelevantHandler(e,(n=>this.mouseMoveStateManager.endMove(n)),(n=>this.oneFingerTouchMoveStateManager.endMove(n)))}isValidStartEvent(e){return this._executeRelevantHandler(e,(n=>this.mouseMoveStateManager.isValidStartEvent(n)),(n=>this.oneFingerTouchMoveStateManager.isValidStartEvent(n)))}isValidMoveEvent(e){return this._executeRelevantHandler(e,(n=>this.mouseMoveStateManager.isValidMoveEvent(n)),(n=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(n)))}isValidEndEvent(e){return this._executeRelevantHandler(e,(n=>this.mouseMoveStateManager.isValidEndEvent(n)),(n=>this.oneFingerTouchMoveStateManager.isValidEndEvent(n)))}}let hl=_=>{_.mousedown=_.dragStart,_.mousemoveWindow=_.dragMove,_.mouseup=_.dragEnd,_.contextmenu=e=>{e.preventDefault()}};class tm{constructor(e,n){this._clickTolerance=e.clickTolerance||1,this._map=n,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(e){return e<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(e,n,u){return this._calculateTransform(e,n,u)}touchmove(e,n,u){if(this._active){if(!this._shouldBePrevented(u.length))return e.preventDefault(),this._calculateTransform(e,n,u);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",e)}}touchend(e,n,u){this._calculateTransform(e,n,u),this._active&&this._shouldBePrevented(u.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,n,u){u.length>0&&(this._active=!0);let m=va(u,n),b=new a.P(0,0),w=new a.P(0,0),k=0;for(let z in m){let O=m[z],N=this._touches[z];N&&(b._add(O),w._add(O.sub(N)),k++,m[z]=O)}if(this._touches=m,this._shouldBePrevented(k)||!w.mag())return;let E=w.div(k);return this._sum._add(E),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(k),panDelta:E}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Uc{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(e,n,u){this._firstTwoTouches||u.length<2||(this._firstTwoTouches=[u[0].identifier,u[1].identifier],this._start([n[0],n[1]]))}touchmove(e,n,u){if(!this._firstTwoTouches)return;e.preventDefault();let[m,b]=this._firstTwoTouches,w=Zc(u,n,m),k=Zc(u,n,b);if(!w||!k)return;let E=this._aroundCenter?null:w.add(k).div(2);return this._move([w,k],E,e)}touchend(e,n,u){if(!this._firstTwoTouches)return;let[m,b]=this._firstTwoTouches,w=Zc(u,n,m),k=Zc(u,n,b);w&&k||(this._active&&Y.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&e.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Zc(_,e,n){for(let u=0;u<_.length;u++)if(_[u].identifier===n)return e[u]}function jh(_,e){return Math.log(_/e)/Math.LN2}class fd extends Uc{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,n){let u=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(jh(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:jh(this._distance,u),pinchAround:n}}}function Nh(_,e){return 180*_.angleWith(e)/Math.PI}class md extends Uc{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,n,u){let m=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Nh(this._vector,m),pinchAround:n}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());let n=25/(Math.PI*this._minDiameter)*360,u=Nh(e,this._startVector);return Math.abs(u)<n}}function gd(_){return Math.abs(_.y)>Math.abs(_.x)}class qh extends Uc{constructor(e){super(),this._currentTouchCount=0,this._map=e}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(e,n,u){super.touchstart(e,n,u),this._currentTouchCount=u.length}_start(e){this._lastPoints=e,gd(e[0].sub(e[1]))&&(this._valid=!1)}_move(e,n,u){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;let m=e[0].sub(this._lastPoints[0]),b=e[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(m,b,u.timeStamp),this._valid?(this._lastPoints=e,this._active=!0,{pitchDelta:(m.y+b.y)/2*-.5}):void 0}gestureBeginsVertically(e,n,u){if(this._valid!==void 0)return this._valid;let m=e.mag()>=2,b=n.mag()>=2;if(!m&&!b)return;if(!m||!b)return this._firstMove===void 0&&(this._firstMove=u),u-this._firstMove<100&&void 0;let w=e.y>0==n.y>0;return gd(e)&&gd(n)&&w}}let Xs={panStep:100,bearingStep:15,pitchStep:10};class Ai{constructor(e){this._tr=new cl(e);let n=Xs;this._panStep=n.panStep,this._bearingStep=n.bearingStep,this._pitchStep=n.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let n=0,u=0,m=0,b=0,w=0;switch(e.keyCode){case 61:case 107:case 171:case 187:n=1;break;case 189:case 109:case 173:n=-1;break;case 37:e.shiftKey?u=-1:(e.preventDefault(),b=-1);break;case 39:e.shiftKey?u=1:(e.preventDefault(),b=1);break;case 38:e.shiftKey?m=1:(e.preventDefault(),w=-1);break;case 40:e.shiftKey?m=-1:(e.preventDefault(),w=1);break;default:return}return this._rotationDisabled&&(u=0,m=0),{cameraAnimation:k=>{let E=this._tr;k.easeTo({duration:300,easeId:"keyboardHandler",easing:im,zoom:n?a.cx(E.zoom+n*(e.shiftKey?2:1),k.getZoomSnap()):E.zoom,bearing:E.bearing+u*this._bearingStep,pitch:E.pitch+m*this._pitchStep,offset:[-b*this._panStep,-w*this._panStep],center:E.center},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function im(_){return _*(2-_)}let Xl=4.000244140625,Hc=1/450;class $c{constructor(e,n){this._onTimeout=u=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(u)},this._map=e,this._tr=new cl(e),this._triggerRenderFrame=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Hc}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&e.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(e){return!!this._map.cooperativeGestures.isEnabled()&&!(e.ctrlKey||this._map.cooperativeGestures.isBypassed(e))}wheel(e){if(!this.isEnabled())return;if(this._shouldBePrevented(e))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",e);let n=e.deltaMode===WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,u=ie(),m=u-(this._lastWheelEventTime||0);this._lastWheelEventTime=u,n!==0&&n%Xl==0?this._type="wheel":n!==0&&Math.abs(n)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(m*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),e.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=e,this._delta-=n,this._active||this._start(e)),e.preventDefault()}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);let n=Y.mousePos(this._map.getCanvas(),e),u=this._tr;this._aroundPoint=this._aroundCenter?u.transform.locationToScreenPoint(a.V.convert(u.center)):n,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;let e=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){let k=e.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=k),typeof this._targetZoom=="number"&&(this._targetZoom+=k)}if(this._delta!==0){let k=this._type==="wheel"&&Math.abs(this._delta)>Xl?this._wheelZoomRate:this._defaultZoomRate,E=2/(1+Math.exp(-Math.abs(this._delta*k)));this._delta<0&&E!==0&&(E=1/E);let z=typeof this._targetZoom!="number"?e.scale:a.aq(this._targetZoom),O=e.applyConstrain(e.getCameraLngLat(),a.at(z*E)).zoom,N=this._map.getZoomSnap();if(this._type==="wheel"&&N>0){let j=a.cx(e.zoom,N);this._targetZoom=a.cx(O,N,O-j)}else this._targetZoom=O;this._type==="wheel"&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}let n=typeof this._targetZoom!="number"?e.zoom:this._targetZoom,u=this._startZoom,m=this._easing,b,w=!1;if(this._type==="wheel"&&u&&m){let k=ie()-this._lastWheelEventTime,E=Math.min((k+5)/200,1),z=m(E);b=a.G.number(u,n,z),E<1?this._frameId||(this._frameId=!0):w=!0}else b=n,w=!0;return this._active=!0,w&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=b,{noInertia:!0,needsRenderFrame:!w,zoomDelta:b-e.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let n=a.cz;if(this._prevEase){let u=this._prevEase,m=(ie()-u.start)/u.duration,b=u.easing(m+.01)-u.easing(m),w=.27/Math.sqrt(b*b+1e-4)*.01,k=Math.sqrt(.0729-w*w);n=a.cw(w,k,.25,1)}return this._prevEase={start:ie(),duration:e,easing:n},n}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class yd{constructor(e,n){this._clickZoom=e,this._tapZoom=n}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Vh{constructor(e){this._tr=new cl(e),this.reset()}reset(){this._active=!1}dblclick(e,n){return e.preventDefault(),{cameraAnimation:u=>{u.easeTo({duration:300,zoom:a.cx(this._tr.zoom+(e.shiftKey?-1:1),u.getZoomSnap()),around:this._tr.unproject(n)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Wh{constructor(){this._tap=new Gc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(e,n,u){if(!this._swipePoint)if(this._tapTime){let m=n[0],b=e.timeStamp-this._tapTime<500,w=this._tapPoint.dist(m)<30;b&&w?u.length>0&&(this._swipePoint=m,this._swipeTouch=u[0].identifier):this.reset()}else this._tap.touchstart(e,n,u)}touchmove(e,n,u){if(this._tapTime){if(this._swipePoint){if(u[0].identifier!==this._swipeTouch)return;let m=n[0],b=m.y-this._swipePoint.y;return this._swipePoint=m,e.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(e,n,u)}touchend(e,n,u){if(this._tapTime)this._swipePoint&&u.length===0&&this.reset();else{let m=this._tap.touchend(e,n,u);m&&(this._tapTime=e.timeStamp,this._tapPoint=m)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Gh{constructor(e,n,u){this._el=e,this._mousePan=n,this._touchPan=u}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ba{constructor(e,n,u,m){this._pitchWithRotate=e.pitchWithRotate,this._rollEnabled=e.rollEnabled,this._mouseRotate=n,this._mousePitch=u,this._mouseRoll=m}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Kl{constructor(e,n,u,m){this._el=e,this._touchZoom=n,this._touchRotate=u,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class ft{constructor(e,n){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=e,this._options=n,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;let e=this._map.getCanvasContainer();e.classList.add("maplibregl-cooperative-gestures"),this._container=Y.create("div","maplibregl-cooperative-gesture-screen",e);let n=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(n=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));let u=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),m=document.createElement("div");m.className="maplibregl-desktop-message",m.textContent=n,this._container.appendChild(m);let b=document.createElement("div");b.className="maplibregl-mobile-message",b.textContent=u,this._container.appendChild(b),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(Y.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(e){return e[this._bypassKey]}notifyGestureBlocked(e,n){this._enabled&&(this._map.fire(new a.l("cooperativegestureprevented",{gestureType:e,originalEvent:n})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}let xt=_=>_.zoom||_.drag||_.roll||_.pitch||_.rotate;class Jl extends a.l{}function Yc(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta||_.rollDelta}class Xc{get _ownerDocument(){var e;return((e=this._el)===null||e===void 0?void 0:e.ownerDocument)||document}get _ownerWindow(){var e,n;return((n=(e=this._el)===null||e===void 0?void 0:e.ownerDocument)===null||n===void 0?void 0:n.defaultView)||window}constructor(e,n){this.handleWindowEvent=m=>{this.handleEvent(m,`${m.type}Window`)},this.handleEvent=(m,b)=>{if(m.type==="blur")return void this.stop(!0);this._updatingCamera=!0;let w=m.type==="renderFrame"?void 0:m,k={needsRenderFrame:!1},E={},z={};for(let{handlerName:j,handler:Z,allowed:J}of this._handlers){if(!Z.isEnabled())continue;let se;if(this._blockedByActive(z,J,j))Z.reset();else if(Z[b||m.type]){if(a.cA(m,b||m.type)){let le=Y.mousePos(this._map.getCanvas(),m);se=Z[b||m.type](m,le)}else if(a.cB(m,b||m.type)){let le=this._getMapTouches(m.touches),oe=Y.touchPos(this._map.getCanvas(),le);se=Z[b||m.type](m,oe,le)}else a.cC(b||m.type)||(se=Z[b||m.type](m));this.mergeHandlerResult(k,E,se,j,w),se&&se.needsRenderFrame&&this._triggerRenderFrame()}(se||Z.isActive())&&(z[j]=Z)}let O={};for(let j in this._previousActiveHandlers)z[j]||(O[j]=w);this._previousActiveHandlers=z,(Object.keys(O).length||Yc(k))&&(this._changes.push([k,E,O]),this._triggerRenderFrame()),(Object.keys(z).length||Yc(k))&&this._map._stop(!0),this._updatingCamera=!1;let{cameraAnimation:N}=k;N&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],N(this._map))},this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Jf(e),this._bearingSnap=n.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(n);let u=this._el;this._listeners=[[u,"touchstart",{passive:!0}],[u,"touchmove",{passive:!1}],[u,"touchend",void 0],[u,"touchcancel",void 0],[u,"mousedown",void 0],[u,"mousemove",void 0],[u,"mouseup",void 0],[this._ownerDocument,"mousemove",{capture:!0}],[this._ownerDocument,"mouseup",void 0],[u,"mouseover",void 0],[u,"mouseout",void 0],[u,"dblclick",void 0],[u,"click",void 0],[u,"keydown",{capture:!1}],[u,"keyup",void 0],[u,"wheel",{passive:!1}],[u,"contextmenu",void 0],[this._ownerWindow,"blur",void 0]];for(let[m,b,w]of this._listeners)Y.addEventListener(m,b,m===this._ownerDocument?this.handleWindowEvent:this.handleEvent,w)}destroy(){for(let[e,n,u]of this._listeners)Y.removeEventListener(e,n,e===this._ownerDocument?this.handleWindowEvent:this.handleEvent,u)}_addDefaultHandlers(e){let n=this._map,u=n.getCanvasContainer();this._add("mapEvent",new Qf(n,e));let m=n.boxZoom=new ul(n,e);this._add("boxZoom",m),e.interactive&&e.boxZoom&&m.enable();let b=n.cooperativeGestures=new ft(n,e.cooperativeGestures);this._add("cooperativeGestures",b),e.cooperativeGestures&&b.enable();let w=new dd(n),k=new Vh(n);n.doubleClickZoom=new yd(k,w),this._add("tapZoom",w),this._add("clickZoom",k),e.interactive&&e.doubleClickZoom&&n.doubleClickZoom.enable();let E=new Wh;this._add("tapDragZoom",E);let z=n.touchPitch=new qh(n);this._add("touchPitch",z),e.interactive&&e.touchPitch&&n.touchPitch.enable(e.touchPitch);let O=()=>n.project(n.getCenter()),N=(function({enable:ue,clickTolerance:me,aroundCenter:be=!0,minPixelCenterThreshold:fe=100,rotateDegreesPerPixelMoved:Te=.8},Fe){let Oe=new Yl({checkCorrectEvent:Re=>Y.mouseButton(Re)===0&&Re.ctrlKey||Y.mouseButton(Re)===2&&!Re.ctrlKey});return new dl({clickTolerance:me,move:(Re,Be)=>{let Je=Fe();if(be&&Math.abs(Je.y-Re.y)>fe)return{bearingDelta:a.cy(new a.P(Re.x,Be.y),Be,Je)};let et=(Be.x-Re.x)*Te;return be&&Be.y<Je.y&&(et=-et),{bearingDelta:et}},moveStateManager:Oe,enable:ue,assignEvents:hl})})(e,O),j=(function({enable:ue,clickTolerance:me,pitchDegreesPerPixelMoved:be=-.5}){let fe=new Yl({checkCorrectEvent:Te=>Y.mouseButton(Te)===0&&Te.ctrlKey||Y.mouseButton(Te)===2});return new dl({clickTolerance:me,move:(Te,Fe)=>({pitchDelta:(Fe.y-Te.y)*be}),moveStateManager:fe,enable:ue,assignEvents:hl})})(e),Z=(function({enable:ue,clickTolerance:me,rollDegreesPerPixelMoved:be=.3},fe){let Te=new Yl({checkCorrectEvent:Fe=>Y.mouseButton(Fe)===2&&Fe.ctrlKey});return new dl({clickTolerance:me,move:(Fe,Oe)=>{let Re=fe(),Be=(Oe.x-Fe.x)*be;return Oe.y<Re.y&&(Be=-Be),{rollDelta:Be}},moveStateManager:Te,enable:ue,assignEvents:hl})})(e,O);n.dragRotate=new ba(e,N,j,Z),this._add("mouseRotate",N,["mousePitch"]),this._add("mousePitch",j,["mouseRotate","mouseRoll"]),this._add("mouseRoll",Z,["mousePitch"]),e.interactive&&e.dragRotate&&n.dragRotate.enable();let J=(function({enable:ue,clickTolerance:me}){let be=new Yl({checkCorrectEvent:fe=>Y.mouseButton(fe)===0&&!fe.ctrlKey});return new dl({clickTolerance:me,move:(fe,Te)=>({around:Te,panDelta:Te.sub(fe)}),activateOnStart:!0,moveStateManager:be,enable:ue,assignEvents:hl})})(e),se=new tm(e,n);n.dragPan=new Gh(u,J,se),this._add("mousePan",J),this._add("touchPan",se,["touchZoom","touchRotate"]),e.interactive&&e.dragPan&&n.dragPan.enable(e.dragPan);let le=new md,oe=new fd;n.touchZoomRotate=new Kl(u,oe,le,E),this._add("touchRotate",le,["touchPan","touchZoom"]),this._add("touchZoom",oe,["touchPan","touchRotate"]),e.interactive&&e.touchZoomRotate&&n.touchZoomRotate.enable(e.touchZoomRotate),this._add("blockableMapEvent",new em(n));let de=n.scrollZoom=new $c(n,(()=>this._triggerRenderFrame()));this._add("scrollZoom",de,["mousePan"]),e.interactive&&e.scrollZoom&&n.scrollZoom.enable(e.scrollZoom);let ye=n.keyboard=new Ai(n);this._add("keyboard",ye),e.interactive&&e.keyboard&&n.keyboard.enable()}_add(e,n,u){this._handlers.push({handlerName:e,handler:n,allowed:u}),this._handlersById[e]=n}stop(e){if(!this._updatingCamera){for(let{handler:n}of this._handlers)n.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(let{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!xt(this._eventsInProgress)||this.isZooming()}_blockedByActive(e,n,u){for(let m in e)if(m!==u&&(!n||n.indexOf(m)<0))return!0;return!1}_getMapTouches(e){let n=[];for(let u of e)this._el.contains(u.target)&&n.push(u);return n}mergeHandlerResult(e,n,u,m,b){if(!u)return;a.e(e,u);let w={handlerName:m,originalEvent:u.originalEvent||b};u.zoomDelta!==void 0&&(n.zoom=w),u.panDelta!==void 0&&(n.drag=w),u.rollDelta!==void 0&&(n.roll=w),u.pitchDelta!==void 0&&(n.pitch=w),u.bearingDelta!==void 0&&(n.rotate=w)}_applyChanges(){let e={},n={},u={};for(let[m,b,w]of this._changes)m.panDelta&&(e.panDelta=(e.panDelta||new a.P(0,0))._add(m.panDelta)),m.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+m.zoomDelta),m.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+m.bearingDelta),m.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+m.pitchDelta),m.rollDelta&&(e.rollDelta=(e.rollDelta||0)+m.rollDelta),m.around!==void 0&&(e.around=m.around),m.pinchAround!==void 0&&(e.pinchAround=m.pinchAround),m.noInertia&&(e.noInertia=m.noInertia),a.e(n,b),a.e(u,w);this._updateMapTransform(e,n,u),this._changes=[]}_updateMapTransform(e,n,u){let m=this._map,b=m._getTransformForUpdate(),w=m.terrain;if(!(Yc(e)||w&&this._terrainMovement))return this._fireEvents(n,u,!0);m._stop(!0);let{panDelta:k,zoomDelta:E,bearingDelta:z,pitchDelta:O,rollDelta:N,around:j,pinchAround:Z}=e;Z!==void 0&&(j=Z),j=j||m.transform.centerPoint,w&&!b.isPointOnMapSurface(j)&&(j=b.centerPoint);let J={panDelta:k,zoomDelta:E,rollDelta:N,pitchDelta:O,bearingDelta:z,around:j};this._map.cameraHelper.useGlobeControls&&!b.isPointOnMapSurface(j)&&(j=b.centerPoint);let se=j.distSqr(b.centerPoint)<.01?b.center:b.screenPointToLocation(k?j.sub(k):j);this._handleMapControls({terrain:w,tr:b,deltasForHelper:J,preZoomAroundLoc:se,combinedEventsInProgress:n,panDelta:k}),m._applyUpdatedTransform(b),this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(n,u,!0)}_handleMapControls({terrain:e,tr:n,deltasForHelper:u,preZoomAroundLoc:m,combinedEventsInProgress:b,panDelta:w}){let k=this._map.cameraHelper;if(k.handleMapControlsRollPitchBearingZoom(u,n),e)return k.useGlobeControls?(this._terrainMovement||!b.drag&&!b.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void k.handleMapControlsPan(u,n,m)):this._terrainMovement||!b.drag&&!b.zoom?void(b.drag&&this._terrainMovement&&w?n.setCenter(n.screenPointToLocation(n.centerPoint.sub(w))):k.handleMapControlsPan(u,n,m)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void k.handleMapControlsPan(u,n,m));k.handleMapControlsPan(u,n,m)}_fireEvents(e,n,u){let m=xt(this._eventsInProgress),b=xt(e),w={};for(let N in e){let{originalEvent:j}=e[N];this._eventsInProgress[N]||(w[`${N}start`]=j),this._eventsInProgress[N]=e[N]}!m&&b&&this._fireEvent("movestart",b.originalEvent);for(let N in w)this._fireEvent(N,w[N]);b&&this._fireEvent("move",b.originalEvent);for(let N in e){let{originalEvent:j}=e[N];this._fireEvent(N,j)}let k={},E;for(let N in this._eventsInProgress){let{handlerName:j,originalEvent:Z}=this._eventsInProgress[N];this._handlersById[j].isActive()||(delete this._eventsInProgress[N],E=n[j]||Z,k[`${N}end`]=E)}for(let N in k)this._fireEvent(N,k[N]);let z=xt(this._eventsInProgress),O=(m||b)&&!z;if(O&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;let N=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&N.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(N)}if(u&&O){this._updatingCamera=!0;let N=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),j=Z=>Z!==0&&-this._bearingSnap<Z&&Z<this._bearingSnap;!N||!N.essential&&ne.prefersReducedMotion?(this._map.fire(new a.l("moveend",{originalEvent:E})),j(this._map.getBearing())&&this._map.resetNorth()):(j(N.bearing||this._map.getBearing())&&(N.bearing=0),N.freezeElevation=!0,this._map.easeTo(N,{originalEvent:E})),this._updatingCamera=!1}}_fireEvent(e,n){this._map.fire(new a.l(e,n?{originalEvent:n}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((e=>{delete this._frameId,this.handleEvent(new Jl("renderFrame",{timeStamp:e})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class pn extends a.E{constructor(e,n,u){super(),this._renderFrameCallback=()=>{let m=Math.min((ie()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(m)),m<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=u.bearingSnap,this._zoomSnap=u.zoomSnap,this.cameraHelper=n,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(e,n){e.apply(this.transform,!0),this.transform=e,this.cameraHelper=n}getCenter(){return new a.V(this.transform.center.lng,this.transform.center.lat)}setCenter(e,n){return this.jumpTo({center:e},n)}getCenterElevation(){return this.transform.elevation}setCenterElevation(e,n){return this.jumpTo({elevation:e},n),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(e){this._centerClampedToGround=e}panBy(e,n,u){return e=a.P.convert(e).mult(-1),this.panTo(this.transform.center,a.e({offset:e},n),u)}panTo(e,n,u){return this.easeTo(a.e({center:e},n),u)}getZoom(){return this.transform.zoom}setZoom(e,n){return this.jumpTo({zoom:e},n),this}zoomTo(e,n,u){return this.easeTo(a.e({zoom:e},n),u)}zoomIn(e,n){return this.zoomTo(a.cx(this.getZoom()+1,this._zoomSnap),e,n),this}zoomOut(e,n){return this.zoomTo(a.cx(this.getZoom()-1,this._zoomSnap),e,n),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(e,n){return e!=this.transform.fov&&(this.transform.setFov(e),this.fire(new a.l("movestart",n)).fire(new a.l("move",n)).fire(new a.l("moveend",n))),this}getBearing(){return this.transform.bearing}setZoomSnap(e){return this._zoomSnap=e,this}getZoomSnap(){return this._zoomSnap}setBearing(e,n){return this.jumpTo({bearing:e},n),this}getPadding(){return this.transform.padding}setPadding(e,n){return this.jumpTo({padding:e},n),this}rotateTo(e,n,u){return this.easeTo(a.e({bearing:e},n),u)}resetNorth(e,n){return this.rotateTo(0,a.e({duration:1e3},e),n),this}resetNorthPitch(e,n){return this.easeTo(a.e({bearing:0,pitch:0,roll:0,duration:1e3},e),n),this}snapToNorth(e,n){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,n):this}getPitch(){return this.transform.pitch}setPitch(e,n){return this.jumpTo({pitch:e},n),this}getRoll(){return this.transform.roll}setRoll(e,n){return this.jumpTo({roll:e},n),this}cameraForBounds(e,n){e=zi.convert(e).adjustAntiMeridian();let u=n&&n.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),u,n)}_cameraForBoxAndBearing(e,n,u,m){let b={top:0,bottom:0,right:0,left:0};if(typeof(m=a.e({padding:b,offset:[0,0],maxZoom:this.transform.maxZoom},m)).padding=="number"){let z=m.padding;m.padding={top:z,bottom:z,right:z,left:z}}let w=a.e(b,m.padding);m.padding=w;let k=this.transform,E=new zi(e,n);return this.cameraHelper.cameraForBoxAndBearing(m,w,E,u,k)}fitBounds(e,n,u){return this._fitInternal(this.cameraForBounds(e,n),n,u)}fitScreenCoordinates(e,n,u,m,b){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(a.P.convert(e)),this.transform.screenPointToLocation(a.P.convert(n)),u,m),m,b)}_fitInternal(e,n,u){return e?(delete(n=a.e(e,n)).padding,n.linear?this.easeTo(n,u):this.flyTo(n,u)):this}jumpTo(e,n){this.stop();let u=this._getTransformForUpdate(),m=!1,b=!1,w=!1,k=u.zoom;this.cameraHelper.handleJumpToCenterZoom(u,e);let E=u.zoom!==k;return"elevation"in e&&u.elevation!==+e.elevation&&u.setElevation(+e.elevation),"bearing"in e&&u.bearing!==+e.bearing&&(m=!0,u.setBearing(+e.bearing)),"pitch"in e&&u.pitch!==+e.pitch&&(b=!0,u.setPitch(+e.pitch)),"roll"in e&&u.roll!==+e.roll&&(w=!0,u.setRoll(+e.roll)),e.padding==null||u.isPaddingEqual(e.padding)||u.setPadding(e.padding),this._applyUpdatedTransform(u),this.fire(new a.l("movestart",n)).fire(new a.l("move",n)),E&&this.fire(new a.l("zoomstart",n)).fire(new a.l("zoom",n)).fire(new a.l("zoomend",n)),m&&this.fire(new a.l("rotatestart",n)).fire(new a.l("rotate",n)).fire(new a.l("rotateend",n)),b&&this.fire(new a.l("pitchstart",n)).fire(new a.l("pitch",n)).fire(new a.l("pitchend",n)),w&&this.fire(new a.l("rollstart",n)).fire(new a.l("roll",n)).fire(new a.l("rollend",n)),this.fire(new a.l("moveend",n))}calculateCameraOptionsFromTo(e,n,u,m=0){let b=a.a9.fromLngLat(e,n),w=a.a9.fromLngLat(u,m),k=w.x-b.x,E=w.y-b.y,z=w.z-b.z,O=Math.hypot(k,E,z);if(O===0)throw new Error("Can't calculate camera options with same From and To");let N=Math.hypot(k,E),j=a.at(this.transform.cameraToCenterDistance/O/this.transform.tileSize),Z=180*Math.atan2(k,-E)/Math.PI,J=180*Math.acos(N/O)/Math.PI;return J=z<0?90-J:90+J,{center:w.toLngLat(),elevation:m,zoom:j,pitch:J,bearing:Z}}calculateCameraOptionsFromCameraLngLatAltRotation(e,n,u,m,b){let w=this.transform.calculateCenterFromCameraLngLatAlt(e,n,u,m);return{center:w.center,elevation:w.elevation,zoom:w.zoom,bearing:u,pitch:m,roll:b}}easeTo(e,n){this._stop(!1,e.easeId),((e=a.e({offset:[0,0],duration:500,easing:a.cz},e)).animate===!1||!e.essential&&ne.prefersReducedMotion)&&(e.duration=0);let u=this._getTransformForUpdate(),m=this.getBearing(),b=u.pitch,w=u.roll,k="bearing"in e?this._normalizeBearing(e.bearing,m):m,E="pitch"in e?+e.pitch:b,z="roll"in e?this._normalizeBearing(e.roll,w):w,O="padding"in e?e.padding:u.padding,N=a.P.convert(e.offset),j,Z;e.around&&(j=a.V.convert(e.around),Z=u.locationToScreenPoint(j));let J={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},se=this.cameraHelper.handleEaseTo(u,{bearing:k,pitch:E,roll:z,padding:O,around:j,aroundPoint:Z,offsetAsPoint:N,offset:e.offset,zoom:e.zoom,center:e.center});return this._rotating=this._rotating||m!==k,this._pitching=this._pitching||E!==b,this._rolling=this._rolling||z!==w,this._padding=!u.isPaddingEqual(O),this._zooming=this._zooming||se.isZooming,this._easeId=e.easeId,this._prepareEase(n,e.noMoveStart,J),this.terrain&&this._prepareElevation(se.elevationCenter),this._ease((le=>{se.easeFunc(le),this.terrain&&!e.freezeElevation&&this._updateElevation(le),this._applyUpdatedTransform(u),this._fireMoveEvents(n)}),(le=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(n,le)}),e),this}_prepareEase(e,n,u={}){this._moving=!0,n||u.moving||this.fire(new a.l("movestart",e)),this._zooming&&!u.zooming&&this.fire(new a.l("zoomstart",e)),this._rotating&&!u.rotating&&this.fire(new a.l("rotatestart",e)),this._pitching&&!u.pitching&&this.fire(new a.l("pitchstart",e)),this._rolling&&!u.rolling&&this.fire(new a.l("rollstart",e))}_prepareElevation(e){this._elevationCenter=e,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(e,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(e){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));let n=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(e<1&&n!==this._elevationTarget){let u=this._elevationTarget-this._elevationStart;this._elevationStart+=e*(u-(n-(u*e+this._elevationStart))/(1-e)),this._elevationTarget=n}this.transform.setElevation(a.G.number(this._elevationStart,this._elevationTarget,e))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(e){if(!this.terrain&&e.elevation>=0&&e.pitch<=90)return{};let n=e.getCameraLngLat(),u=e.getCameraAltitude(),m=this.terrain?this.terrain.getElevationForLngLatZoom(n,e.zoom):0;if(u<m){let b=this.calculateCameraOptionsFromTo(n,m,e.center,e.elevation);return{pitch:b.pitch,zoom:b.zoom}}return{}}_applyUpdatedTransform(e){let n=[];if(n.push((m=>this._elevateCameraIfInsideTerrain(m))),this.transformCameraUpdate&&n.push((m=>this.transformCameraUpdate(m))),!n.length)return;let u=e.clone();for(let m of n){let b=u.clone(),{center:w,zoom:k,roll:E,pitch:z,bearing:O,elevation:N}=m(b);w&&b.setCenter(w),N!==void 0&&b.setElevation(N),k!==void 0&&b.setZoom(k),E!==void 0&&b.setRoll(E),z!==void 0&&b.setPitch(z),O!==void 0&&b.setBearing(O),u.apply(b,!1)}this.transform.apply(u,!1)}_fireMoveEvents(e){this.fire(new a.l("move",e)),this._zooming&&this.fire(new a.l("zoom",e)),this._rotating&&this.fire(new a.l("rotate",e)),this._pitching&&this.fire(new a.l("pitch",e)),this._rolling&&this.fire(new a.l("roll",e))}_afterEase(e,n){if(this._easeId&&n&&this._easeId===n)return;delete this._easeId;let u=this._zooming,m=this._rotating,b=this._pitching,w=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,u&&this.fire(new a.l("zoomend",e)),m&&this.fire(new a.l("rotateend",e)),b&&this.fire(new a.l("pitchend",e)),w&&this.fire(new a.l("rollend",e)),this.fire(new a.l("moveend",e))}flyTo(e,n){if(!e.essential&&ne.prefersReducedMotion){let Be=a.U(e,["center","zoom","bearing","pitch","roll","elevation","padding"]);return this.jumpTo(Be,n)}this.stop(),e=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.cz},e);let u=this._getTransformForUpdate(),m=u.bearing,b=u.pitch,w=u.roll,k=u.padding,E="bearing"in e?this._normalizeBearing(e.bearing,m):m,z="pitch"in e?+e.pitch:b,O="roll"in e?this._normalizeBearing(e.roll,w):w,N="padding"in e?e.padding:u.padding,j=a.P.convert(e.offset),Z=u.centerPoint.add(j),J=u.screenPointToLocation(Z),se=this.cameraHelper.handleFlyTo(u,{bearing:E,pitch:z,roll:O,padding:N,locationAtOffset:J,offsetAsPoint:j,center:e.center,minZoom:e.minZoom,zoom:e.zoom}),le=e.curve,oe=Math.max(u.width,u.height),de=oe/se.scaleOfZoom,ye=se.pixelPathLength;typeof se.scaleOfMinZoom=="number"&&(le=Math.sqrt(oe/se.scaleOfMinZoom/ye*2));let ue=le*le;function me(Be){let Je=(de*de-oe*oe+(Be?-1:1)*ue*ue*ye*ye)/(2*(Be?de:oe)*ue*ye);return Math.log(Math.sqrt(Je*Je+1)-Je)}function be(Be){return(Math.exp(Be)-Math.exp(-Be))/2}function fe(Be){return(Math.exp(Be)+Math.exp(-Be))/2}let Te=me(!1),Fe=function(Be){return fe(Te)/fe(Te+le*Be)},Oe=function(Be){return oe*((fe(Te)*(be(Je=Te+le*Be)/fe(Je))-be(Te))/ue)/ye;var Je},Re=(me(!0)-Te)/le;if(Math.abs(ye)<2e-6||!isFinite(Re)){if(Math.abs(oe-de)<1e-6)return this.easeTo(e,n);let Be=de<oe?-1:1;Re=Math.abs(Math.log(de/oe))/le,Oe=()=>0,Fe=Je=>Math.exp(Be*le*Je)}return e.duration="duration"in e?+e.duration:1e3*Re/("screenSpeed"in e?+e.screenSpeed/le:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=m!==E,this._pitching=z!==b,this._rolling=O!==w,this._padding=!u.isPaddingEqual(N),this._prepareEase(n,!1),this.terrain&&this._prepareElevation(se.targetCenter),this._ease((Be=>{let Je=Be*Re,et=1/Fe(Je),$e=Oe(Je);this._rotating&&u.setBearing(a.G.number(m,E,Be)),this._pitching&&u.setPitch(a.G.number(b,z,Be)),this._rolling&&u.setRoll(a.G.number(w,O,Be)),this._padding&&(u.interpolatePadding(k,N,Be),Z=u.centerPoint.add(j)),se.easeFunc(Be,et,$e,Z),this.terrain&&!e.freezeElevation&&this._updateElevation(Be),this._applyUpdatedTransform(u),this._fireMoveEvents(n)}),(()=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(n)}),e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,n){var u;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){let m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,n)}return e||(u=this.handlers)===null||u===void 0||u.stop(!1),this}_ease(e,n,u){u.animate===!1||u.duration===0?(e(1),n()):(this._easeStart=ie(),this._easeOptions=u,this._onEaseFrame=e,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(e,n){e=a.W(e,-180,180);let u=Math.abs(e-n);return Math.abs(e-360-n)<u&&(e-=360),Math.abs(e+360-n)<u&&(e+=360),e}queryTerrainElevation(e){return this.terrain?this.terrain.getElevationForLngLat(a.V.convert(e),this.transform):null}}let Qn={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class _d{constructor(e=Qn){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=n=>{!n||n.sourceDataType!=="metadata"&&n.sourceDataType!=="visibility"&&n.dataType!=="style"&&n.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=e}getDefaultPosition(){return"bottom-right"}onAdd(e){return this._map=e,this._compact=this.options.compact,this._container=Y.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=Y.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=Y.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){Y.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(e,n){let u=this._map._getUIString(`AttributionControl.${n}`);e.title=u,e.setAttribute("aria-label",u)}_updateAttributions(){if(!this._map.style)return;let e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map((m=>typeof m!="string"?"":m))):typeof this.options.customAttribution=="string"&&e.push(this.options.customAttribution)),this._map.style.stylesheet){let m=this._map.style.stylesheet;this.styleOwner=m.owner,this.styleId=m.id}let n=this._map.style.tileManagers;for(let m in n){let b=n[m];if(b.used||b.usedForTerrain){let w=b.getSource();w.attribution&&e.indexOf(w.attribution)<0&&e.push(w.attribution)}}e=e.filter((m=>String(m).trim())),e.sort(((m,b)=>m.length-b.length)),e=e.filter(((m,b)=>{for(let w=b+1;w<e.length;w++)if(e[w].indexOf(m)>=0)return!1;return!0}));let u=e.join(" | ");u!==this._attribHTML&&(this._attribHTML=u,e.length?(this._innerContainer.innerHTML=Y.sanitize(u),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Uh{constructor(e={}){this._updateCompact=()=>{let n=this._container.children;if(n.length){let u=n[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&u.classList.add("maplibregl-compact"):u.classList.remove("maplibregl-compact")}},this.options=e}getDefaultPosition(){return"bottom-left"}onAdd(e){this._map=e,this._compact=this.options&&this.options.compact,this._container=Y.create("div","maplibregl-ctrl");let n=Y.create("a","maplibregl-ctrl-logo");return n.target="_blank",n.rel="noopener nofollow",n.href="https://maplibre.org/",n.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),n.setAttribute("rel","noopener nofollow"),this._container.appendChild(n),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){Y.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class rm{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){let n=++this._id;return this._queue.push({callback:e,id:n,cancelled:!1}),n}remove(e){let n=this._currentlyRunning,u=n?this._queue.concat(n):this._queue;for(let m of u)if(m.id===e)return void(m.cancelled=!0)}run(e=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");let n=this._currentlyRunning=this._queue;this._queue=[];for(let u of n)if(!u.cancelled&&(u.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var nm=a.aU([{name:"a_pos3d",type:"Int16",components:3}]);class Ql extends a.E{constructor(e){super(),this._lastTilesetChange=ie(),this.tileManager=e,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=e._source.tileSize*2**this.deltaZoom,e.usedForTerrain=!0,e.tileSize=this.tileSize}destruct(){this.tileManager.usedForTerrain=!1,this.tileManager.tileSize=null}getSource(){return this.tileManager._source}update(e,n){this.tileManager.update(e,n),this._renderableTilesKeys=[];let u={};for(let m of Ei(e,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:n,calculateTileZoom:this.tileManager._source.calculateTileZoom}))u[m.key]=!0,this._renderableTilesKeys.push(m.key),this._tiles[m.key]||(m.terrainRttPosMatrix32f=new Float64Array(16),a.c7(m.terrainRttPosMatrix32f,0,a.a5,a.a5,0,0,1),this._tiles[m.key]=new Me(m,this.tileSize),this._lastTilesetChange=ie());for(let m in this._tiles)u[m]||delete this._tiles[m]}freeRtt(e){for(let n in this._tiles){let u=this._tiles[n];(!e||u.tileID.equals(e)||u.tileID.isChildOf(e)||e.isChildOf(u.tileID))&&(u.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((e=>this.getTileByID(e)))}getTileByID(e){return this._tiles[e]}getTerrainCoords(e,n){return n?this._getTerrainCoordsForTileRanges(e,n):this._getTerrainCoordsForRegularTile(e)}_getTerrainCoordsForRegularTile(e){let n={};for(let u of this._renderableTilesKeys){let m=this._tiles[u].tileID,b=e.clone(),w=a.bk();if(m.canonical.equals(e.canonical))a.c7(w,0,a.a5,a.a5,0,0,1);else if(m.canonical.isChildOf(e.canonical)){let k=m.canonical.z-e.canonical.z,E=m.canonical.x-(m.canonical.x>>k<<k),z=m.canonical.y-(m.canonical.y>>k<<k),O=a.a5>>k;a.c7(w,0,O,O,0,0,1),a.O(w,w,[-E*O,-z*O,0])}else{if(!e.canonical.isChildOf(m.canonical))continue;{let k=e.canonical.z-m.canonical.z,E=e.canonical.x-(e.canonical.x>>k<<k),z=e.canonical.y-(e.canonical.y>>k<<k),O=a.a5>>k;a.c7(w,0,a.a5,a.a5,0,0,1),a.O(w,w,[E*O,z*O,0]),a.Q(w,w,[1/2**k,1/2**k,0])}}b.terrainRttPosMatrix32f=new Float32Array(w),n[u]=b}return n}_getTerrainCoordsForTileRanges(e,n){let u={};for(let m of this._renderableTilesKeys){let b=this._tiles[m].tileID;if(!this._isWithinTileRanges(b,n))continue;let w=e.clone(),k=a.bk();if(b.canonical.z===e.canonical.z){let E=e.canonical.x-b.canonical.x+e.wrap*(1<<e.canonical.z),z=e.canonical.y-b.canonical.y;a.c7(k,0,a.a5,a.a5,0,0,1),a.O(k,k,[E*a.a5,z*a.a5,0])}else if(b.canonical.z>e.canonical.z){let E=b.canonical.z-e.canonical.z,z=b.canonical.x-(b.canonical.x>>E<<E)+e.wrap*(1<<b.canonical.z),O=b.canonical.y-(b.canonical.y>>E<<E),N=e.canonical.x-(b.canonical.x>>E),j=e.canonical.y-(b.canonical.y>>E),Z=a.a5>>E;a.c7(k,0,Z,Z,0,0,1),a.O(k,k,[-z*Z+N*a.a5,-O*Z+j*a.a5,0])}else{let E=e.canonical.z-b.canonical.z,z=e.canonical.x-(e.canonical.x>>E<<E)+e.wrap*(1<<e.canonical.z),O=e.canonical.y-(e.canonical.y>>E<<E),N=(e.canonical.x>>E)-b.canonical.x,j=(e.canonical.y>>E)-b.canonical.y,Z=a.a5<<E;a.c7(k,0,Z,Z,0,0,1),a.O(k,k,[z*a.a5+N*Z,O*a.a5+j*Z,0])}w.terrainRttPosMatrix32f=new Float32Array(k),u[m]=w}return u}getSourceTile(e,n){let u=this.tileManager._source,m=e.overscaledZ-this.deltaZoom;if(m>u.maxzoom&&(m=u.maxzoom),m<u.minzoom)return;this._sourceTileCache[e.key]||(this._sourceTileCache[e.key]=e.scaledTo(m).key);let b=this.findTileInCaches(this._sourceTileCache[e.key]);if(!(b!=null&&b.dem)&&n)for(;m>=u.minzoom&&!(b!=null&&b.dem);)b=this.findTileInCaches(e.scaledTo(m--).key);return b}findTileInCaches(e){let n=this.tileManager.getTileByID(e);return n||(n=this.tileManager._outOfViewCache.getByKey(e),n)}anyTilesAfterTime(e=Date.now()){return this._lastTilesetChange>=e}_isWithinTileRanges(e,n){let u=n[e.canonical.z];return!!u&&(e.wrap>u.minWrap||e.wrap<u.maxWrap||e.canonical.x>=u.minTileXWrapped&&e.canonical.x<=u.maxTileXWrapped&&e.canonical.y>=u.minTileY&&e.canonical.y<=u.maxTileY)}}class er{constructor(e,n,u){this._meshCache={},this.painter=e,this.tileManager=new Ql(n),this.options=u,this.exaggeration=typeof u.exaggeration=="number"?u.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(e,n,u,m=a.a5){var b;if(!(n>=0&&n<m&&u>=0&&u<m))return 0;let w=this.getTerrainData(e),k=(b=w.tile)===null||b===void 0?void 0:b.dem;if(!k)return 0;let E=a.cD([],[n/m*a.a5,u/m*a.a5],w.u_terrain_matrix),z=[E[0]*k.dim,E[1]*k.dim],O=Math.floor(z[0]),N=Math.floor(z[1]),j=z[0]-O,Z=z[1]-N;return k.get(O,N)*(1-j)*(1-Z)+k.get(O+1,N)*j*(1-Z)+k.get(O,N+1)*(1-j)*Z+k.get(O+1,N+1)*j*Z}getElevationForLngLatZoom(e,n){if(!a.cE(n,e.wrap()))return 0;let{tileID:u,mercatorX:m,mercatorY:b}=this._getOverscaledTileIDFromLngLatZoom(e,n);return this.getElevation(u,m%a.a5,b%a.a5,a.a5)}getElevationForLngLat(e,n){let u=Ei(n,{maxzoom:this.tileManager.maxzoom,minzoom:this.tileManager.minzoom,tileSize:512,terrain:this}),m=0;for(let b of u)b.canonical.z>m&&(m=Math.min(b.canonical.z,this.tileManager.maxzoom));return this.getElevationForLngLatZoom(e,m)}getElevation(e,n,u,m=a.a5){return this.getDEMElevation(e,n,u,m)*this.exaggeration}getTerrainData(e){if(!this._emptyDemTexture){let m=this.painter.context,b=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new a.T(m,b,m.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new a.T(m,new a.R({width:1,height:1}),m.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.ar([])}let n=this.tileManager.getSourceTile(e,!0);if(n&&n.dem&&(!n.demTexture||n.needsTerrainPrepare)){let m=this.painter.context;n.demTexture=this.painter.getTileTexture(n.dem.stride),n.demTexture?n.demTexture.update(n.dem.getPixels(),{premultiply:!1}):n.demTexture=new a.T(m,n.dem.getPixels(),m.gl.RGBA,{premultiply:!1}),n.demTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),n.needsTerrainPrepare=!1}let u=n&&n.toString()+n.tileID.key+e.key;if(u&&!this._demMatrixCache[u]){let m=this.tileManager.getSource().maxzoom,b=e.canonical.z-n.tileID.canonical.z;e.overscaledZ>e.canonical.z&&(e.canonical.z>=m?b=e.canonical.z-m:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));let w=e.canonical.x-(e.canonical.x>>b<<b),k=e.canonical.y-(e.canonical.y>>b<<b),E=a.cF(new Float64Array(16),[1/(a.a5<<b),1/(a.a5<<b),0]);a.O(E,E,[w*a.a5,k*a.a5,0]),this._demMatrixCache[e.key]={matrix:E,coord:e}}return{u_depth:2,u_terrain:3,u_terrain_dim:n&&n.dem&&n.dem.dim||1,u_terrain_matrix:u?this._demMatrixCache[e.key].matrix:this._emptyDemMatrix,u_terrain_unpack:n&&n.dem&&n.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(n&&n.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:n}}getFramebuffer(e){let n=this.painter,u=n.width/devicePixelRatio,m=n.height/devicePixelRatio;return!this._fbo||this._fbo.width===u&&this._fbo.height===m||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new a.T(n.context,{width:u,height:m,data:null},n.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(n.context.gl.NEAREST,n.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new a.T(n.context,{width:u,height:m,data:null},n.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(n.context.gl.NEAREST,n.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=n.context.createFramebuffer(u,m,!0,!1),this._fbo.depthAttachment.set(n.context.createRenderbuffer(n.context.gl.DEPTH_COMPONENT16,u,m))),this._fbo.colorAttachment.set(e==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){let e=this.painter.context;if(this._coordsTexture)return this._coordsTexture;let n=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let b=0,w=0;b<this._coordsTextureSize;b++)for(let k=0;k<this._coordsTextureSize;k++,w+=4)n[w+0]=255&k,n[w+1]=255&b,n[w+2]=k>>8<<4|b>>8,n[w+3]=0;let u=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(n.buffer)),m=new a.T(e,u,e.gl.RGBA,{premultiply:!1});return m.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._coordsTexture=m,m}pointCoordinate(e){this.painter.maybeDrawDepthAndCoords(!0);let n=new Uint8Array(4),u=this.painter.context,m=u.gl,b=Math.round(e.x*this.painter.pixelRatio/devicePixelRatio),w=Math.round(e.y*this.painter.pixelRatio/devicePixelRatio),k=Math.round(this.painter.height/devicePixelRatio);u.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),m.readPixels(b,k-w-1,1,1,m.RGBA,m.UNSIGNED_BYTE,n),u.bindFramebuffer.set(null);let E=n[0]+(n[2]>>4<<8),z=n[1]+((15&n[2])<<8),O=this.coordsIndex[255-n[3]],N=O&&this.tileManager.getTileByID(O);if(!N)return null;let j=this._coordsTextureSize,Z=(1<<N.tileID.canonical.z)*j;return new a.a9((N.tileID.canonical.x*j+E)/Z+N.tileID.wrap,(N.tileID.canonical.y*j+z)/Z,this.getElevation(N.tileID,E,z,j))}depthAtPoint(e){let n=new Uint8Array(4),u=this.painter.context,m=u.gl;return u.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),m.readPixels(e.x,this.painter.height/devicePixelRatio-e.y-1,1,1,m.RGBA,m.UNSIGNED_BYTE,n),u.bindFramebuffer.set(null),(n[0]/16777216+n[1]/65536+n[2]/256+n[3])/256}getTerrainMesh(e){var n;let u=((n=this.painter.style.projection)===null||n===void 0?void 0:n.transitionState)>0,m=u&&e.canonical.y===0,b=u&&e.canonical.y===(1<<e.canonical.z)-1,w=`m_${m?"n":""}_${b?"s":""}`;if(this._meshCache[w])return this._meshCache[w];let k=this.painter.context,E=new a.cG,z=new a.aY,O=this.meshSize,N=a.a5/O,j=O*O;for(let fe=0;fe<=O;fe++)for(let Te=0;Te<=O;Te++)E.emplaceBack(Te*N,fe*N,0);for(let fe=0;fe<j;fe+=O+1)for(let Te=0;Te<O;Te++)z.emplaceBack(Te+fe,O+Te+fe+1,O+Te+fe+2),z.emplaceBack(Te+fe,O+Te+fe+2,Te+fe+1);let Z=E.length,J=Z+(O+1),se=(O+1)*O,le=m?a.br:0,oe=m?0:1,de=b?a.bs:a.a5,ye=b?0:1;for(let fe=0;fe<=O;fe++)E.emplaceBack(fe*N,le,oe);for(let fe=0;fe<=O;fe++)E.emplaceBack(fe*N,de,ye);for(let fe=0;fe<O;fe++)z.emplaceBack(se+fe,J+fe,J+fe+1),z.emplaceBack(se+fe,J+fe+1,se+fe+1),z.emplaceBack(0+fe,Z+fe+1,Z+fe),z.emplaceBack(0+fe,0+fe+1,Z+fe+1);let ue=E.length,me=ue+2*(O+1);for(let fe of[0,1])for(let Te=0;Te<=O;Te++)for(let Fe of[0,1])E.emplaceBack(fe*a.a5,Te*N,Fe);for(let fe=0;fe<2*O;fe+=2)z.emplaceBack(ue+fe,ue+fe+1,ue+fe+3),z.emplaceBack(ue+fe,ue+fe+3,ue+fe+2),z.emplaceBack(me+fe,me+fe+3,me+fe+1),z.emplaceBack(me+fe,me+fe+2,me+fe+3);let be=new vi(k.createVertexBuffer(E,nm.members),k.createIndexBuffer(z),a.aX.simpleSegment(0,0,E.length,z.length));return this._meshCache[w]=be,be}getMeshFrameDelta(e){return 2*Math.PI*a.bE/Math.pow(2,Math.max(e,0))/5}getMinTileElevationForLngLatZoom(e,n){var u;if(!a.cE(n,e.wrap()))return 0;let{tileID:m}=this._getOverscaledTileIDFromLngLatZoom(e,n);return(u=this.getMinMaxElevation(m).minElevation)!==null&&u!==void 0?u:0}getMinMaxElevation(e){let n=this.getTerrainData(e).tile,u={minElevation:null,maxElevation:null};return n&&n.dem&&(u.minElevation=n.dem.min*this.exaggeration,u.maxElevation=n.dem.max*this.exaggeration),u}_getOverscaledTileIDFromLngLatZoom(e,n){let u=a.a9.fromLngLat(e.wrap()),m=(1<<n)*a.a5,b=u.x*m,w=u.y*m,k=Math.floor(b/a.a5),E=Math.floor(w/a.a5);return{tileID:new a.a2(n,0,n,k,E),mercatorX:b,mercatorY:w}}}class ur{constructor(e,n,u){this._context=e,this._size=n,this._tileSize=u,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(let e of this._objects)e.texture.destroy(),e.fbo.destroy()}_createObject(e){let n=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),u=new a.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return u.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),n.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),n.colorAttachment.set(u.texture),{id:e,fbo:n,texture:u,stamp:-1,inUse:!1}}getObjectForId(e){return this._objects[e]}useObject(e){e.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((n=>e.id!==n)),this._recentlyUsed.push(e.id)}stampObject(e){e.stamp=++this._stamp}getOrCreateFreeObject(){for(let n of this._recentlyUsed)if(!this._objects[n].inUse)return this._objects[n];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");let e=this._createObject(this._objects.length);return this._objects.push(e),e}freeObject(e){e.inUse=!1}freeAllObjects(){for(let e of this._objects)this.freeObject(e)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((e=>!e.inUse))===!1}}let Co={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class ec{constructor(e,n){this.painter=e,this.terrain=n,this.pool=new ur(e.context,30,n.tileManager.tileSize*n.qualityFactor)}destruct(){this.pool.destruct()}getTexture(e){return this.pool.getObjectForId(e.rtt[this._stacks.length-1].id).texture}prepareForRender(e,n){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.tileManager.getRenderableTiles(),this._renderableLayerIds=e._order.filter((u=>!e._layers[u].isHidden(n))),this._coordsAscending={};for(let u in e.tileManagers){this._coordsAscending[u]={};let m=e.tileManagers[u].getVisibleCoordinates(),b=e.tileManagers[u].getSource(),w=b instanceof on?b.terrainTileRanges:null;for(let k of m){let E=this.terrain.tileManager.getTerrainCoords(k,w);for(let z in E)this._coordsAscending[u][z]||(this._coordsAscending[u][z]=[]),this._coordsAscending[u][z].push(E[z])}}this._coordsAscendingStr={};for(let u of e._order){let m=e._layers[u],b=m.source;if(Co[m.type]&&!this._coordsAscendingStr[b]){this._coordsAscendingStr[b]={};for(let w in this._coordsAscending[b])this._coordsAscendingStr[b][w]=this._coordsAscending[b][w].map((k=>k.key)).sort().join()}}for(let u of this._renderableTiles)for(let m in this._coordsAscendingStr){let b=this._coordsAscendingStr[m][u.tileID.key];b&&b!==u.rttCoords[m]&&(u.rtt=[])}}renderLayer(e,n){if(e.isHidden(this.painter.transform.zoom))return!1;let u=Object.assign(Object.assign({},n),{isRenderingToTexture:!0}),m=e.type,b=this.painter,w=this._renderableLayerIds[this._renderableLayerIds.length-1]===e.id;if(Co[m]&&(this._prevType&&Co[this._prevType]||this._stacks.push([]),this._prevType=m,this._stacks[this._stacks.length-1].push(e.id),!w))return!0;if(Co[this._prevType]||Co[m]&&w){this._prevType=m;let k=this._stacks.length-1,E=this._stacks[k]||[];for(let z of this._renderableTiles){if(this.pool.isFull()&&(od(this.painter,this.terrain,this._rttTiles,u),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(z),z.rtt[k]){let N=this.pool.getObjectForId(z.rtt[k].id);if(N.stamp===z.rtt[k].stamp){this.pool.useObject(N);continue}}let O=this.pool.getOrCreateFreeObject();this.pool.useObject(O),this.pool.stampObject(O),z.rtt[k]={id:O.id,stamp:O.stamp},b.context.bindFramebuffer.set(O.fbo.framebuffer),b.context.clear({color:a.bp.transparent,stencil:0}),b.currentStencilSource=void 0;for(let N=0;N<E.length;N++){let j=b.style._layers[E[N]],Z=j.source?this._coordsAscending[j.source][z.tileID.key]:[z.tileID];b.context.viewport.set([0,0,O.fbo.width,O.fbo.height]),b._renderTileClippingMasks(j,Z,!0),b.renderLayer(b,b.style.tileManagers[j.source],j,Z,u),j.source&&(z.rttCoords[j.source]=this._coordsAscendingStr[j.source][z.tileID.key])}}return od(this.painter,this.terrain,this._rttTiles,u),this._rttTiles=[],this.pool.freeAllObjects(),Co[m]}return!1}}let Kc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},vd=T,Jc={hash:!1,interactive:!0,bearingSnap:7,zoomSnap:0,attributionControl:Qn,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.c.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,transformConstrain:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,reduceMotion:void 0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0,experimentalZoomLevelsToOverscale:void 0},bd={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class tc{constructor(e,n,u=!1){this.mousedown=b=>{this.startMove(b,Y.mousePos(this.element,b)),Y.addEventListener(window,"mousemove",this.mousemove),Y.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=b=>{this.move(b,Y.mousePos(this.element,b))},this.mouseup=b=>{this._rotatePitchHandler.dragEnd(b),this.offTemp()},this.touchstart=b=>{b.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Y.touchPos(this.element,b.targetTouches)[0],this.startMove(b,this._startPos),Y.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),Y.addEventListener(window,"touchend",this.touchend))},this.touchmove=b=>{b.targetTouches.length!==1?this.reset():(this._lastPos=Y.touchPos(this.element,b.targetTouches)[0],this.move(b,this._lastPos))},this.touchend=b=>{b.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=n;let m=new Fh;this._rotatePitchHandler=new dl({clickTolerance:3,move:(b,w)=>{let k=n.getBoundingClientRect(),E=new a.P((k.bottom-k.top)/2,(k.right-k.left)/2);return{bearingDelta:a.cy(new a.P(b.x,w.y),w,E),pitchDelta:u?-.5*(w.y-b.y):void 0}},moveStateManager:m,enable:!0,assignEvents:()=>{}}),this.map=e,Y.addEventListener(n,"mousedown",this.mousedown),Y.addEventListener(n,"touchstart",this.touchstart,{passive:!1}),Y.addEventListener(n,"touchcancel",this.reset)}startMove(e,n){this._rotatePitchHandler.dragStart(e,n),Y.disableDrag()}move(e,n){let u=this.map,{bearingDelta:m,pitchDelta:b}=this._rotatePitchHandler.dragMove(e,n)||{};m&&u.setBearing(u.getBearing()+m),b&&u.setPitch(u.getPitch()+b)}off(){let e=this.element;Y.removeEventListener(e,"mousedown",this.mousedown),Y.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),Y.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),Y.removeEventListener(window,"touchend",this.touchend),Y.removeEventListener(e,"touchcancel",this.reset),this.offTemp()}offTemp(){Y.enableDrag(),Y.removeEventListener(window,"mousemove",this.mousemove),Y.removeEventListener(window,"mouseup",this.mouseup),Y.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),Y.removeEventListener(window,"touchend",this.touchend)}}let ds;function Qc(_,e,n,u=!1){if(u||!n.getCoveringTilesDetailsProvider().allowWorldCopies())return _==null?void 0:_.wrap();let m=new a.V(_.lng,_.lat);if(_=new a.V(_.lng,_.lat),e){let b=new a.V(_.lng-360,_.lat),w=new a.V(_.lng+360,_.lat),k=n.locationToScreenPoint(_).distSqr(e);n.locationToScreenPoint(b).distSqr(e)<k?_=b:n.locationToScreenPoint(w).distSqr(e)<k&&(_=w)}for(;Math.abs(_.lng-n.center.lng)>180;){let b=n.locationToScreenPoint(_);if(b.x>=0&&b.y>=0&&b.x<=n.width&&b.y<=n.height)break;_.lng>n.center.lng?_.lng-=360:_.lng+=360}return _.lng!==m.lng&&n.isPointOnMapSurface(n.locationToScreenPoint(_))?_:m}let ic={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function eu(_,e,n){let u=_.classList;for(let m in ic)u.remove(`maplibregl-${n}-anchor-${m}`);u.add(`maplibregl-${n}-anchor-${e}`)}class rc extends a.E{constructor(e){if(super(),this._onKeyPress=n=>{let u=n.code,m=n.charCode||n.keyCode;u!=="Space"&&u!=="Enter"&&m!==32&&m!==13||this.togglePopup()},this._onMapClick=n=>{let u=n.originalEvent.target,m=this._element;this._popup&&(u===m||m.contains(u))&&this.togglePopup()},this._update=n=>{if(!this._map)return;let u=this._map.loaded()&&!this._map.isMoving();((n==null?void 0:n.type)==="terrain"||(n==null?void 0:n.type)==="render"&&!u)&&this._map.once("render",this._update),this._lngLat=Qc(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let m="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?m=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(m=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let b="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?b="rotateX(0deg)":this._pitchAlignment==="map"&&(b=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||n&&n.type!=="moveend"||(this._pos=this._pos.round()),Y.setTransform(this._element,`${ic[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${b} ${m}`),ne.frameAsync(new AbortController,this._map._ownerWindow).then((()=>{this._updateOpacity(n&&n.type==="moveend")})).catch((()=>{}))},this._onMove=n=>{if(!this._isDragging){let u=this._clickTolerance||this._map._clickTolerance;this._isDragging=n.point.dist(this._pointerdownPos)>=u}this._isDragging&&(this._pos=n.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.l("dragstart"))),this.fire(new a.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.l("dragend")),this._state="inactive"},this._addDragHandler=n=>{this._element.contains(n.originalEvent.target)&&(n.preventDefault(),this._positionDelta=n.point.sub(this._pos).add(this._offset),this._pointerdownPos=n.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._subpixelPositioning=e&&e.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&e.pitchAlignment!=="auto"?e.pitchAlignment:this._rotationAlignment,this.setOpacity(e==null?void 0:e.opacity,e==null?void 0:e.opacityWhenCovered),e&&e.element)this._element=e.element,this._offset=a.P.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=Y.create("div");let n=Y.createNS("http://www.w3.org/2000/svg","svg"),u=41,m=27;n.setAttributeNS(null,"display","block"),n.setAttributeNS(null,"height",`${u}px`),n.setAttributeNS(null,"width",`${m}px`),n.setAttributeNS(null,"viewBox",`0 0 ${m} ${u}`);let b=Y.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"stroke","none"),b.setAttributeNS(null,"stroke-width","1"),b.setAttributeNS(null,"fill","none"),b.setAttributeNS(null,"fill-rule","evenodd");let w=Y.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"fill-rule","nonzero");let k=Y.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"transform","translate(3.0, 29.0)"),k.setAttributeNS(null,"fill","#000000");let E=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(let oe of E){let de=Y.createNS("http://www.w3.org/2000/svg","ellipse");de.setAttributeNS(null,"opacity","0.04"),de.setAttributeNS(null,"cx","10.5"),de.setAttributeNS(null,"cy","5.80029008"),de.setAttributeNS(null,"rx",oe.rx),de.setAttributeNS(null,"ry",oe.ry),k.appendChild(de)}let z=Y.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill",this._color);let O=Y.createNS("http://www.w3.org/2000/svg","path");O.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),z.appendChild(O);let N=Y.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"opacity","0.25"),N.setAttributeNS(null,"fill","#000000");let j=Y.createNS("http://www.w3.org/2000/svg","path");j.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),N.appendChild(j);let Z=Y.createNS("http://www.w3.org/2000/svg","g");Z.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Z.setAttributeNS(null,"fill","#FFFFFF");let J=Y.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"transform","translate(8.0, 8.0)");let se=Y.createNS("http://www.w3.org/2000/svg","circle");se.setAttributeNS(null,"fill","#000000"),se.setAttributeNS(null,"opacity","0.25"),se.setAttributeNS(null,"cx","5.5"),se.setAttributeNS(null,"cy","5.5"),se.setAttributeNS(null,"r","5.4999962");let le=Y.createNS("http://www.w3.org/2000/svg","circle");le.setAttributeNS(null,"fill","#FFFFFF"),le.setAttributeNS(null,"cx","5.5"),le.setAttributeNS(null,"cy","5.5"),le.setAttributeNS(null,"r","5.4999962"),J.appendChild(se),J.appendChild(le),w.appendChild(k),w.appendChild(z),w.appendChild(N),w.appendChild(Z),w.appendChild(J),n.appendChild(w),n.setAttributeNS(null,"height",u*this._scale+"px"),n.setAttributeNS(null,"width",m*this._scale+"px"),this._element.appendChild(n),this._offset=a.P.convert(e&&e.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(n=>{n.preventDefault()})),this._element.addEventListener("mousedown",(n=>{n.preventDefault()})),eu(this._element,this._anchor,"marker"),e&&e.className)for(let n of e.className.split(" "))this._element.classList.add(n);this._popup=null}addTo(e){return this.remove(),this._map=e,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",e._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),e.on("terrain",this._update),e.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),Y.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=a.V.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){let m=Math.abs(13.5)/Math.SQRT2;e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(38.1-13.5+m)],"bottom-right":[-m,-1*(38.1-13.5+m)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=e,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(e){return this._subpixelPositioning=e,this}getPopup(){return this._popup}togglePopup(){let e=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:e?(e.isOpen()?e.remove():(e.setLngLat(this._lngLat),e.addTo(this._map)),this):this}_updateOpacity(e=!1){var n,u;let m=(n=this._map)===null||n===void 0?void 0:n.terrain,b=this._map.transform.isLocationOccluded(this._lngLat);if(!m||b){let Z=b?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==Z&&(this._element.style.opacity=Z))}if(e)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}let w=this._map,k=w.terrain.depthAtPoint(this._pos),E=w.terrain.getElevationForLngLat(this._lngLat,w.transform);if(w.transform.lngLatToCameraDepth(this._lngLat,E)-k<.006)return void(this._element.style.opacity=this._opacity);let z=-this._offset.y/w.transform.pixelsPerMeter,O=Math.sin(w.getPitch()*Math.PI/180)*z,N=w.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),j=w.transform.lngLatToCameraDepth(this._lngLat,E+O)-N>.006;!((u=this._popup)===null||u===void 0)&&u.isOpen()&&j&&this._popup.remove(),this._element.style.opacity=j?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(e){return this._offset=a.P.convert(e),this._update(),this}addClassName(e){this._element.classList.add(e)}removeClassName(e){this._element.classList.remove(e)}toggleClassName(e){return this._element.classList.toggle(e)}setDraggable(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e&&e!=="auto"?e:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(e,n){return(this._opacity===void 0||e===void 0&&n===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),e!==void 0&&(this._opacity=e),n!==void 0&&(this._opacityWhenCovered=n),this._map&&this._updateOpacity(!0),this}}let xd={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},pl=0,ko=!1,wd={maxWidth:100,unit:"metric"};function nc(_,e,n){let u=n&&n.maxWidth||100,m=_._container.clientHeight/2,b=_._container.clientWidth/2,w=_.unproject([b-u/2,m]),k=_.unproject([b+u/2,m]),E=Math.round(_.project(k).x-_.project(w).x),z=Math.min(u,E,_._container.clientWidth),O=w.distanceTo(k);if(n&&n.unit==="imperial"){let N=3.2808*O;N>5280?Po(e,z,N/5280,_._getUIString("ScaleControl.Miles")):Po(e,z,N,_._getUIString("ScaleControl.Feet"))}else n&&n.unit==="nautical"?Po(e,z,O/1852,_._getUIString("ScaleControl.NauticalMiles")):O>=1e3?Po(e,z,O/1e3,_._getUIString("ScaleControl.Kilometers")):Po(e,z,O,_._getUIString("ScaleControl.Meters"))}function Po(_,e,n,u){let m=(function(b){let w=Math.pow(10,`${Math.floor(b)}`.length-1),k=b/w;return k=k>=10?10:k>=5?5:k>=3?3:k>=2?2:k>=1?1:(function(E){let z=Math.pow(10,Math.ceil(-Math.log(E)/Math.LN10));return Math.round(E*z)/z})(k),w*k})(n);_.style.width=e*(m/n)+"px",_.innerHTML=`${m}&nbsp;${u}`}let Sd={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0,padding:void 0},tu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function iu(_){if(_){if(typeof _=="number"){let e=Math.round(Math.abs(_)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,_),"top-left":new a.P(e,e),"top-right":new a.P(-e,e),bottom:new a.P(0,-_),"bottom-left":new a.P(e,-e),"bottom-right":new a.P(-e,-e),left:new a.P(_,0),right:new a.P(-_,0)}}if(_ instanceof a.P||Array.isArray(_)){let e=a.P.convert(_);return{center:e,top:e,"top-left":e,"top-right":e,bottom:e,"bottom-left":e,"bottom-right":e,left:e,right:e}}return{center:a.P.convert(_.center||[0,0]),top:a.P.convert(_.top||[0,0]),"top-left":a.P.convert(_["top-left"]||[0,0]),"top-right":a.P.convert(_["top-right"]||[0,0]),bottom:a.P.convert(_.bottom||[0,0]),"bottom-left":a.P.convert(_["bottom-left"]||[0,0]),"bottom-right":a.P.convert(_["bottom-right"]||[0,0]),left:a.P.convert(_.left||[0,0]),right:a.P.convert(_.right||[0,0])}}return iu(new a.P(0,0))}let Td=T;f.AJAXError=a.cJ,f.Event=a.l,f.Evented=a.E,f.LngLat=a.V,f.MercatorCoordinate=a.a9,f.Point=a.P,f.addProtocol=a.cK,f.config=a.c,f.removeProtocol=a.cL,f.AttributionControl=_d,f.BoxZoomHandler=ul,f.CanvasSource=Ss,f.CooperativeGesturesHandler=ft,f.DoubleClickZoomHandler=yd,f.DragPanHandler=Gh,f.DragRotateHandler=ba,f.EdgeInsets=La,f.FullscreenControl=class extends a.E{constructor(_={}){super(),this._onFullscreenChange=()=>{var e;let n=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((e=n==null?void 0:n.shadowRoot)===null||e===void 0)&&e.fullscreenElement;)n=n.shadowRoot.fullscreenElement;n===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,_&&_.container&&(_.container instanceof HTMLElement?this._container=_.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=Y.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){Y.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){let _=this._fullscreenButton=Y.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);Y.create("span","maplibregl-ctrl-icon",_).setAttribute("aria-hidden","true"),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){let _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.title=_}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},f.GeoJSONSource=ws,f.GeolocateControl=class extends a.E{constructor(_){super(),this._onSuccess=e=>{if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new a.l("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(e),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.l("geolocate",e)),this._finish()}},this._updateCamera=e=>{let n=new a.V(e.coords.longitude,e.coords.latitude),u=e.coords.accuracy,m=this._map.getBearing(),b=a.e({bearing:m},this.options.fitBoundsOptions),w=zi.fromLngLat(n,u);this._map.fitBounds(w,b,{geolocateSource:!0})},this._updateMarker=e=>{if(e){let n=new a.V(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=e.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=e=>{if(this._map){if(e.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;let n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(e.code===3&&ko)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.l("error",e)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this._geolocateButton=Y.create("button","maplibregl-ctrl-geolocate",this._container),Y.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=e=>{if(this._map){if(e===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");let n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}else{let n=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Y.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new rc({element:this._dotElement}),this._circleElement=Y.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new rc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(n=>{let u=(n==null?void 0:n[0])instanceof ResizeObserverEntry;n.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.l("trackuserlocationend")),this.fire(new a.l("userlocationlostfocus")))}))}},this.options=a.e({},xd,_)}onAdd(_){return this._map=_,this._container=Y.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return a._(this,arguments,void 0,(function*(e=!1){if(ds!==void 0&&!e)return ds;if(window.navigator.permissions===void 0)return ds=!!window.navigator.geolocation,ds;try{ds=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch(n){ds=!!window.navigator.geolocation}return ds}))})().then((e=>this._finishSetupUI(e))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),Y.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,pl=0,ko=!1}_isOutOfMapMaxBounds(_){let e=this._map.getMaxBounds(),n=_.coords;return e&&(n.longitude<e.getWest()||n.longitude>e.getEast()||n.latitude<e.getSouth()||n.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){let _=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&_))return;let e=this._map.project(_),n=this._map.unproject([e.x+100,e.y]),u=_.distanceTo(n)/100,m=2*this._accuracy/u;this._circleElement.style.width=`${m.toFixed(2)}px`,this._circleElement.style.height=`${m.toFixed(2)}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":pl--,ko=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.l("trackuserlocationstart")),this.fire(new a.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let _;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),pl++,pl>1?(_={maximumAge:6e5,timeout:0},ko=!0):(_=this.options.positionOptions,ko=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,_)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},f.GlobeControl=class{constructor(){this._toggleProjection=()=>{var _;let e=(_=this._map.getProjection())===null||_===void 0?void 0:_.type;this._map.setProjection(e!=="mercator"&&e?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var _;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((_=this._map.getProjection())===null||_===void 0?void 0:_.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(_){return this._map=_,this._container=Y.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=Y.create("button","maplibregl-ctrl-globe",this._container),Y.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){Y.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},f.Hash=ud,f.ImageSource=on,f.KeyboardHandler=Ai,f.LngLatBounds=zi,f.LogoControl=Uh,f.Map=class extends pn{get _ownerWindow(){var _,e;return((e=(_=this._container)===null||_===void 0?void 0:_.ownerDocument)===null||e===void 0?void 0:e.defaultView)||window}constructor(_){var e,n;a.cH.mark(a.cI.create);let u=Object.assign(Object.assign(Object.assign({},Jc),_),{canvasContextAttributes:Object.assign(Object.assign({},Jc.canvasContextAttributes),_.canvasContextAttributes)});if(u.minZoom!=null&&u.maxZoom!=null&&u.minZoom>u.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(u.minPitch!=null&&u.maxPitch!=null&&u.minPitch>u.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(u.minPitch!=null&&u.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(u.maxPitch!=null&&u.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");let m=new Da,b=new Xt;u.minZoom!==void 0&&m.setMinZoom(u.minZoom),u.maxZoom!==void 0&&m.setMaxZoom(u.maxZoom),u.minPitch!==void 0&&m.setMinPitch(u.minPitch),u.maxPitch!==void 0&&m.setMaxPitch(u.maxPitch),u.renderWorldCopies!==void 0&&m.setRenderWorldCopies(u.renderWorldCopies),u.transformConstrain!==null&&m.setConstrainOverride(u.transformConstrain),super(m,b,{bearingSnap:u.bearingSnap,zoomSnap:u.zoomSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new rm,this._controls=[],this._mapId=a.af(),this._lostContextStyle={style:null,images:null},this._contextLost=k=>{k.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.painter.destroy();for(let E of Object.values(this.style._layers))if(E.type==="custom"&&console.warn(`Custom layer with id '${E.id}' cannot be restored after WebGL context loss. You will need to re-add it manually after context restoration.`),E._listeners)for(let[z]of Object.entries(E._listeners))console.warn(`Custom layer with id '${E.id}' had event listeners for event '${z}' which cannot be restored after WebGL context loss. You will need to re-add them manually after context restoration.`);this._lostContextStyle=this._getStyleAndImages(),this.style.destroy(),this.style=null,this.fire(new a.l("webglcontextlost",{originalEvent:k}))},this._contextRestored=k=>{this._lostContextStyle.style&&this.setStyle(this._lostContextStyle.style,{diff:!1}),this._lostContextStyle.images&&(this.style.imageManager.images=this._lostContextStyle.images),this._lostContextStyle={style:null,images:null},this._setupPainter(),this.resize(),this._update(),this._resizeInternal(),this.fire(new a.l("webglcontextrestored",{originalEvent:k}))},this._onMapScroll=k=>{if(k.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=u.interactive,this._maxTileCacheSize=u.maxTileCacheSize,this._maxTileCacheZoomLevels=u.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},u.canvasContextAttributes),this._trackResize=u.trackResize===!0,this._bearingSnap=u.bearingSnap,this._zoomSnap=u.zoomSnap,this._centerClampedToGround=u.centerClampedToGround,this._refreshExpiredTiles=u.refreshExpiredTiles===!0,this._fadeDuration=u.fadeDuration,this._crossSourceCollisions=u.crossSourceCollisions===!0,this._collectResourceTiming=u.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Kc),u.locale),this._clickTolerance=u.clickTolerance,this._overridePixelRatio=u.pixelRatio,this._maxCanvasSize=u.maxCanvasSize,this._zoomLevelsToOverscale=u.experimentalZoomLevelsToOverscale,this.transformCameraUpdate=u.transformCameraUpdate,this.transformConstrain=u.transformConstrain,this.cancelPendingTileRequestsWhileZooming=u.cancelPendingTileRequestsWhileZooming===!0,u.reduceMotion!==void 0&&(ne.prefersReducedMotion=u.reduceMotion),this._imageQueueHandle=Pt.addThrottleControl((()=>this.isMoving())),this._requestManager=new _t(u.transformRequest),this._container=this._resolveContainer(u.container),u.maxBounds&&this.setMaxBounds(u.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window!="undefined"&&(this._ownerWindow.addEventListener("online",this._onWindowOnline,!1),this._setupResizeObserver()),this.handlers=new Xc(this,u),this._hash=u.hash&&new ud(typeof u.hash=="string"&&u.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:u.center,elevation:u.elevation,zoom:u.zoom,bearing:u.bearing,pitch:u.pitch,roll:u.roll}),u.bounds&&(this.resize(),this.fitBounds(u.bounds,a.e({},u.fitBoundsOptions,{duration:0}))));let w=typeof u.style=="string"||((n=(e=u.style)===null||e===void 0?void 0:e.projection)===null||n===void 0?void 0:n.type)!=="globe";this.resize(null,w),this._localIdeographFontFamily=u.localIdeographFontFamily,this._validateStyle=u.validateStyle,u.style&&this.setStyle(u.style,{localIdeographFontFamily:u.localIdeographFontFamily}),u.attributionControl&&this.addControl(new _d(typeof u.attributionControl=="boolean"?void 0:u.attributionControl)),u.maplibreLogo&&this.addControl(new Uh,u.logoPosition),this.on("style.load",(()=>{if(w||this._resizeTransform(),this.transform.unmodified){let k=a.U(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(k)}})),this.on("data",(k=>{this._update(k.dataType==="style"),this.fire(new a.l(`${k.dataType}data`,k))})),this.on("dataloading",(k=>{this.fire(new a.l(`${k.dataType}dataloading`,k))})),this.on("dataabort",(k=>{this.fire(new a.l("sourcedataabort",k))}))}_getMapId(){return this._mapId}setGlobalStateProperty(_,e){return this.style.setGlobalStateProperty(_,e),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(_,e){if(e===void 0&&(e=_.getDefaultPosition?_.getDefaultPosition():"top-right"),!_||!_.onAdd)return this.fire(new a.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));let n=_.onAdd(this);this._controls.push(_);let u=this._controlPositions[e];return e.indexOf("bottom")!==-1?u.insertBefore(n,u.firstChild):u.appendChild(n),this}removeControl(_){if(!_||!_.onRemove)return this.fire(new a.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));let e=this._controls.indexOf(_);return e>-1&&this._controls.splice(e,1),_.onRemove(this),this}hasControl(_){return this._controls.indexOf(_)>-1}coveringTiles(_){return Ei(this.transform,_)}calculateCameraOptionsFromTo(_,e,n,u){return u==null&&this.terrain&&(u=this.terrain.getElevationForLngLat(n,this.transform)),super.calculateCameraOptionsFromTo(_,e,n,u)}resize(_,e=!0){if(this._lostContextStyle.style!==null)return this;this._resizeInternal(e);let n=!this._moving;return n&&(this.stop(),this.fire(new a.l("movestart",_)).fire(new a.l("move",_))),this.fire(new a.l("resize",_)),n&&this.fire(new a.l("moveend",_)),this}_resizeInternal(_=!0){let[e,n]=this._containerDimensions(),u=this._getClampedPixelRatio(e,n);if(this._resizeCanvas(e,n,u),this.painter.resize(e,n,u),this.painter.overLimit()){let m=this.painter.context.gl;this._maxCanvasSize=[m.drawingBufferWidth,m.drawingBufferHeight];let b=this._getClampedPixelRatio(e,n);this._resizeCanvas(e,n,b),this.painter.resize(e,n,b)}this._resizeTransform(_)}_resizeTransform(_=!0){var e;let[n,u]=this._containerDimensions();this.transform.resize(n,u,_),(e=this._requestedCameraState)===null||e===void 0||e.resize(n,u,_)}_getClampedPixelRatio(_,e){let{0:n,1:u}=this._maxCanvasSize,m=this.getPixelRatio(),b=_*m,w=e*m;return Math.min(b>n?n/b:1,w>u?u/w:1)*m}getPixelRatio(){var _;return(_=this._overridePixelRatio)!==null&&_!==void 0?_:devicePixelRatio}setPixelRatio(_){this._overridePixelRatio=_,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(_){return this.transform.setMaxBounds(zi.convert(_)),this._update()}setMinZoom(_){if((_=_==null?-2:_)>=-2&&_<=this.transform.maxZoom){let e=this.transform.zoom,n=this._getTransformForUpdate();return n.setMinZoom(_),this._applyUpdatedTransform(n),this._update(),e!==this.transform.zoom&&this.fire(new a.l("zoomstart")).fire(new a.l("zoom")).fire(new a.l("zoomend")).fire(new a.l("movestart")).fire(new a.l("move")).fire(new a.l("moveend")),this}throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_){if((_=_==null?22:_)>=this.transform.minZoom){let e=this.transform.zoom,n=this._getTransformForUpdate();return n.setMaxZoom(_),this._applyUpdatedTransform(n),this._update(),e!==this.transform.zoom&&this.fire(new a.l("zoomstart")).fire(new a.l("zoom")).fire(new a.l("zoomend")).fire(new a.l("movestart")).fire(new a.l("move")).fire(new a.l("moveend")),this}throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_){if((_=_==null?0:_)<0)throw new Error("minPitch must be greater than or equal to 0");if(_>=0&&_<=this.transform.maxPitch){let e=this.transform.pitch,n=this._getTransformForUpdate();return n.setMinPitch(_),this._applyUpdatedTransform(n),this._update(),e!==this.transform.pitch&&this.fire(new a.l("pitchstart")).fire(new a.l("pitch")).fire(new a.l("pitchend")).fire(new a.l("movestart")).fire(new a.l("move")).fire(new a.l("moveend")),this}throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_){if((_=_==null?60:_)>180)throw new Error("maxPitch must be less than or equal to 180");if(_>=this.transform.minPitch){let e=this.transform.pitch,n=this._getTransformForUpdate();return n.setMaxPitch(_),this._applyUpdatedTransform(n),this._update(),e!==this.transform.pitch&&this.fire(new a.l("pitchstart")).fire(new a.l("pitch")).fire(new a.l("pitchend")).fire(new a.l("movestart")).fire(new a.l("move")).fire(new a.l("moveend")),this}throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_){return this.transform.setRenderWorldCopies(_),this._update()}setTransformConstrain(_){return this.transform.setConstrainOverride(_),this._update()}project(_){return this.transform.locationToScreenPoint(a.V.convert(_),this.style&&this.terrain)}unproject(_){return this.transform.screenPointToLocation(a.P.convert(_),this.terrain)}isMoving(){var _;return this._moving||((_=this.handlers)===null||_===void 0?void 0:_.isMoving())}isZooming(){var _;return this._zooming||((_=this.handlers)===null||_===void 0?void 0:_.isZooming())}isRotating(){var _;return this._rotating||((_=this.handlers)===null||_===void 0?void 0:_.isRotating())}_createDelegatedListener(_,e,n){if(_==="mouseenter"||_==="mouseover"){let u=!1;return{layers:e,listener:n,delegates:{mousemove:b=>{let w=e.filter((E=>this.getLayer(E))),k=w.length!==0?this.queryRenderedFeatures(b.point,{layers:w}):[];k.length?u||(u=!0,n.call(this,new Lr(_,this,b.originalEvent,{features:k}))):u=!1},mouseout:()=>{u=!1}}}}if(_==="mouseleave"||_==="mouseout"){let u=!1;return{layers:e,listener:n,delegates:{mousemove:w=>{let k=e.filter((E=>this.getLayer(E)));(k.length!==0?this.queryRenderedFeatures(w.point,{layers:k}):[]).length?u=!0:u&&(u=!1,n.call(this,new Lr(_,this,w.originalEvent)))},mouseout:w=>{u&&(u=!1,n.call(this,new Lr(_,this,w.originalEvent)))}}}}{let u=m=>{let b=e.filter((k=>this.getLayer(k))),w=b.length!==0?this.queryRenderedFeatures(m.point,{layers:b}):[];w.length&&(m.features=w,n.call(this,m),delete m.features)};return{layers:e,listener:n,delegates:{[_]:u}}}}_saveDelegatedListener(_,e){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_]=this._delegatedListeners[_]||[],this._delegatedListeners[_].push(e)}_removeDelegatedListener(_,e,n){if(!this._delegatedListeners||!this._delegatedListeners[_])return;let u=this._delegatedListeners[_];for(let m=0;m<u.length;m++){let b=u[m];if(b.listener===n&&b.layers.length===e.length&&b.layers.every((w=>e.includes(w)))){for(let w in b.delegates)this.off(w,b.delegates[w]);return void u.splice(m,1)}}}on(_,e,n){if(n===void 0)return super.on(_,e);let u=typeof e=="string"?[e]:e,m=this._createDelegatedListener(_,u,n);this._saveDelegatedListener(_,m);for(let b in m.delegates)this.on(b,m.delegates[b]);return{unsubscribe:()=>{this._removeDelegatedListener(_,u,n)}}}once(_,e,n){if(n===void 0)return super.once(_,e);let u=typeof e=="string"?[e]:e,m=this._createDelegatedListener(_,u,n);for(let b in m.delegates){let w=m.delegates[b];m.delegates[b]=(...k)=>{this._removeDelegatedListener(_,u,n),w(...k)}}this._saveDelegatedListener(_,m);for(let b in m.delegates)this.once(b,m.delegates[b]);return this}off(_,e,n){return n===void 0?super.off(_,e):(this._removeDelegatedListener(_,typeof e=="string"?[e]:e,n),this)}queryRenderedFeatures(_,e){if(!this.style)return[];let n,u=_ instanceof a.P||Array.isArray(_),m=u?_:[[0,0],[this.transform.width,this.transform.height]];if(e=e||(u?{}:_)||{},m instanceof a.P||typeof m[0]=="number")n=[a.P.convert(m)];else{let b=a.P.convert(m[0]),w=a.P.convert(m[1]);n=[b,new a.P(w.x,b.y),w,new a.P(b.x,w.y),b]}return this.style.queryRenderedFeatures(n,e,this.transform)}querySourceFeatures(_,e){return this.style.querySourceFeatures(_,e)}setStyle(_,e){return(e=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},e)).diff!==!1&&e.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&_?(this._diffStyle(_,e),this):(this._localIdeographFontFamily=e.localIdeographFontFamily,this._updateStyle(_,e))}setTransformRequest(_){return this._requestManager.setTransformRequest(_),this}_getUIString(_){let e=this._locale[_];if(e==null)throw new Error(`Missing UI string '${_}'`);return e}_updateStyle(_,e){var n,u;if(e.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(_,e)));let m=this.style&&e.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!_)),_?(this.style=new da(this,e||{}),this.style.setEventedParent(this,{style:this.style}),typeof _=="string"?this.style.loadURL(_,e,m):this.style.loadJSON(_,e,m),this):((u=(n=this.style)===null||n===void 0?void 0:n.projection)===null||u===void 0||u.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new da(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(_,e){if(typeof _=="string"){let n=this._requestManager.transformRequest(_,"Style");a.j(n,new AbortController).then((u=>{this._updateDiff(u.data,e)})).catch((u=>{u&&this.fire(new a.k(u))}))}else typeof _=="object"&&this._updateDiff(_,e)}_updateDiff(_,e){try{this.style.setState(_,e)&&this._update(!0)}catch(n){a.w(`Unable to perform style diff: ${n.message||n.error||n}.  Rebuilding the style from scratch.`),this._updateStyle(_,e)}}getStyle(){if(this.style)return this.style.serialize()}_getStyleAndImages(){return this.style?{style:this.style.serialize(),images:this.style.imageManager.cloneImages()}:{style:null,images:{}}}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(_,e){return this._lazyInitEmptyStyle(),this.style.addSource(_,e),this._update(!0)}isSourceLoaded(_){let e=this.style&&this.style.tileManagers[_];if(e!==void 0)return e.loaded();this.fire(new a.k(new Error(`There is no tile manager with ID '${_}'`)))}setTerrain(_){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),_){let e=this.style.tileManagers[_.source];if(!e)throw new Error(`cannot load terrain, because there exists no source with ID: ${_.source}`);this.terrain===null&&e.reload();for(let n in this.style._layers){let u=this.style._layers[n];u.type==="hillshade"&&u.source===_.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),u.type==="color-relief"&&u.source===_.source&&a.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new er(this.painter,e,_),this.painter.renderToTexture=new ec(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=n=>{var u;n.dataType==="style"?this.terrain.tileManager.freeRtt():n.dataType==="source"&&n.tile&&(n.sourceId!==_.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((u=n.source)===null||u===void 0?void 0:u.type)==="image"?this.terrain.tileManager.freeRtt():this.terrain.tileManager.freeRtt(n.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.tileManager.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new a.l("terrain",{terrain:_})),this}getTerrain(){var _,e;return(e=(_=this.terrain)===null||_===void 0?void 0:_.options)!==null&&e!==void 0?e:null}areTilesLoaded(){let _=this.style&&this.style.tileManagers;for(let e of Object.values(_))if(!e.areTilesLoaded())return!1;return!0}removeSource(_){return this.style.removeSource(_),this._update(!0)}getSource(_){return this.style.getSource(_)}setSourceTileLodParams(_,e,n){if(n){let u=this.getSource(n);if(!u)throw new Error(`There is no source with ID "${n}", cannot set LOD parameters`);u.calculateTileZoom=yt(Math.max(1,_),Math.max(1,e))}else for(let u in this.style.tileManagers)this.style.tileManagers[u].getSource().calculateTileZoom=yt(Math.max(1,_),Math.max(1,e));return this._update(!0),this}refreshTiles(_,e){let n=this.style.tileManagers[_];if(!n)throw new Error(`There is no tile manager with ID "${_}", cannot refresh tile`);e===void 0?n.reload(!0):n.refreshTiles(e.map((u=>new a.ac(u.z,u.x,u.y))))}addImage(_,e,n={}){let{pixelRatio:u=1,sdf:m=!1,stretchX:b,stretchY:w,content:k,textFitWidth:E,textFitHeight:z}=n;if(this._lazyInitEmptyStyle(),!(e instanceof HTMLImageElement||a.b(e))){if(e.width===void 0||e.height===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{let{width:O,height:N,data:j}=e,Z=e;return this.style.addImage(_,{data:new a.R({width:O,height:N},new Uint8Array(j)),pixelRatio:u,stretchX:b,stretchY:w,content:k,textFitWidth:E,textFitHeight:z,sdf:m,version:0,userImage:Z}),Z.onAdd&&Z.onAdd(this,_),this}}{let{width:O,height:N,data:j}=ne.getImageData(e);this.style.addImage(_,{data:new a.R({width:O,height:N},j),pixelRatio:u,stretchX:b,stretchY:w,content:k,textFitWidth:E,textFitHeight:z,sdf:m,version:0})}}updateImage(_,e){let n=this.style.getImage(_);if(!n)return this.fire(new a.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));let u=e instanceof HTMLImageElement||a.b(e)?ne.getImageData(e):e,{width:m,height:b,data:w}=u;if(m===void 0||b===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(m!==n.data.width||b!==n.data.height)return this.fire(new a.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));let k=!(e instanceof HTMLImageElement||a.b(e));return n.data.replace(w,k),this.style.updateImage(_,n),this}getImage(_){return this.style.getImage(_)}hasImage(_){return _?!!this.style.getImage(_):(this.fire(new a.k(new Error("Missing required image id"))),!1)}removeImage(_){this.style.removeImage(_)}loadImage(_){return Pt.getImage(this._requestManager.transformRequest(_,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(_,e){return this._lazyInitEmptyStyle(),this.style.addLayer(_,e),this._update(!0)}moveLayer(_,e){return this.style.moveLayer(_,e),this._update(!0)}removeLayer(_){return this.style.removeLayer(_),this._update(!0)}getLayer(_){return this.style.getLayer(_)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(_,e,n){return this.style.setLayerZoomRange(_,e,n),this._update(!0)}setFilter(_,e,n={}){return this.style.setFilter(_,e,n),this._update(!0)}getFilter(_){return this.style.getFilter(_)}setPaintProperty(_,e,n,u={}){return this.style.setPaintProperty(_,e,n,u),this._update(!0)}getPaintProperty(_,e){return this.style.getPaintProperty(_,e)}setLayoutProperty(_,e,n,u={}){return this.style.setLayoutProperty(_,e,n,u),this._update(!0)}getLayoutProperty(_,e){return this.style.getLayoutProperty(_,e)}setGlyphs(_,e={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(_,e),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(_,e,n={}){return this._lazyInitEmptyStyle(),this.style.addSprite(_,e,n,(u=>{u||this._update(!0)})),this}removeSprite(_){return this._lazyInitEmptyStyle(),this.style.removeSprite(_),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(_,e={}){return this._lazyInitEmptyStyle(),this.style.setSprite(_,e,(n=>{n||this._update(!0)})),this}setLight(_,e={}){return this._lazyInitEmptyStyle(),this.style.setLight(_,e),this._update(!0)}getLight(){return this.style.getLight()}setSky(_,e={}){return this._lazyInitEmptyStyle(),this.style.setSky(_,e),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(_,e){return this.style.setFeatureState(_,e),this._update()}removeFeatureState(_,e){return this.style.removeFeatureState(_,e),this._update()}getFeatureState(_){return this.style.getFeatureState(_)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let _=0,e=0;return this._container&&(_=this._container.clientWidth||400,e=this._container.clientHeight||300),[_,e]}_setupResizeObserver(){var _;let e=!1,n=cd((m=>{this._trackResize&&!this._removed&&(this.resize(m),this.redraw())}),50),u=(_=this._ownerWindow.ResizeObserver)!==null&&_!==void 0?_:ResizeObserver;this._resizeObserver=new u((m=>{e?n(m):e=!0})),this._resizeObserver.observe(this._container)}_resolveContainer(_){if(typeof _=="string"){let e=document.getElementById(_);if(!e)throw new Error(`Container '${_}' not found.`);return e}if(_ instanceof HTMLElement||_&&typeof _=="object"&&_.nodeType===1)return _;throw new Error("Invalid type: 'container' must be a String or HTMLElement.")}_setupContainer(){let _=this._container;_.classList.add("maplibregl-map");let e=this._canvasContainer=Y.create("div","maplibregl-canvas-container",_);this._interactive&&e.classList.add("maplibregl-interactive"),this._canvas=Y.create("canvas","maplibregl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");let n=this._containerDimensions(),u=this._getClampedPixelRatio(n[0],n[1]);this._resizeCanvas(n[0],n[1],u);let m=this._controlContainer=Y.create("div","maplibregl-control-container",_),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((w=>{b[w]=Y.create("div",`maplibregl-ctrl-${w} `,m)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(_,e,n){this._canvas.width=Math.floor(n*_),this._canvas.height=Math.floor(n*e),this._canvas.style.width=`${_}px`,this._canvas.style.height=`${e}px`}_setupPainter(){let _=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0}),e=null;this._canvas.addEventListener("webglcontextcreationerror",(u=>{e={requestedAttributes:_},u&&(e.statusMessage=u.statusMessage,e.type=u.type)}),{once:!0});let n=null;if(n=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,_):this._canvas.getContext("webgl2",_)||this._canvas.getContext("webgl",_),!n){let u="Failed to initialize WebGL";throw e?(e.message=u,new Error(JSON.stringify(e))):new Error(u)}this.painter=new Dh(n,this.transform),Se.testSupport(n)}migrateProjection(_,e){super.migrateProjection(_,e),this.painter.transform=_,this.fire(new a.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(_){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||_,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_){return this._update(),this._renderTaskQueue.add(_)}_cancelRenderFrame(_){this._renderTaskQueue.remove(_)}_render(_){var e,n,u,m,b;let w=this._idleTriggered?this._fadeDuration:0,k=((e=this.style.projection)===null||e===void 0?void 0:e.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(_),this._removed)return;let E=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;let N=this.transform.zoom,j=ie();this.style.zoomHistory.update(N,j);let Z=new a.H(N,{now:j,fadeDuration:w,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),J=Z.crossFadingFactor();J===1&&J===this._crossFadingFactor||(E=!0,this._crossFadingFactor=J),this.style.update(Z)}let z=((n=this.style.projection)===null||n===void 0?void 0:n.transitionState)>0!==k;(u=this.style.projection)===null||u===void 0||u.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((m=this.style.projection)===null||m===void 0?void 0:m.transitionState,(b=this.style.projection)===null||b===void 0?void 0:b.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||z)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.tileManager.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,w,this._crossSourceCollisions,z),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:w,showPadding:this.showPadding}),this.fire(new a.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.cH.mark(a.cI.load),this.fire(new a.l("load"))),this.style&&(this.style.hasTransitions()||E)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();let O=this._sourcesDirty||this._styleDirty||this._placementDirty;return O||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.l("idle")),!this._loaded||this._fullyLoaded||O||(this._fullyLoaded=!0,a.cH.mark(a.cI.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var _;this._hash&&this._hash.remove();for(let n of this._controls)n.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&this._ownerWindow.removeEventListener("online",this._onWindowOnline,!1),Pt.removeThrottleControl(this._imageQueueHandle),(_=this._resizeObserver)===null||_===void 0||_.disconnect();let e=this.painter.context.gl.getExtension("WEBGL_lose_context");e!=null&&e.loseContext&&e.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),Y.remove(this._canvasContainer),Y.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),a.cH.clearMetrics(),this._removed=!0,this.fire(new a.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,ne.frame(this._frameRequest,(_=>{a.cH.frame(_),this._frameRequest=null;try{this._render(_)}catch(e){if(!a.Z(e)&&!(function(n){return n.message===I})(e))throw e}}),(()=>{}),this._ownerWindow))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_){this._showPadding!==_&&(this._showPadding=_,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,_?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())}get repaint(){return!!this._repaint}set repaint(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_){this._vertices=_,this._update()}get version(){return vd}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(_){return this._lazyInitEmptyStyle(),this.style.setProjection(_),this._update(!0)}},f.MapMouseEvent=Lr,f.MapTouchEvent=Zl,f.MapWheelEvent=Bh,f.Marker=rc,f.NavigationControl=class{constructor(_){this._updateZoomButtons=()=>{let e=this._map.getZoom(),n=e===this._map.getMaxZoom(),u=e===this._map.getMinZoom();this._zoomInButton.disabled=n,this._zoomOutButton.disabled=u,this._zoomInButton.setAttribute("aria-disabled",n.toString()),this._zoomOutButton.setAttribute("aria-disabled",u.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(e,n)=>{let u=this._map._getUIString(`NavigationControl.${n}`);e.title=u,e.setAttribute("aria-label",u)},this.options=a.e({},bd,_),this._container=Y.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(e=>this._map.zoomIn({},{originalEvent:e}))),Y.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(e=>this._map.zoomOut({},{originalEvent:e}))),Y.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(e=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:e}):this._map.resetNorth({},{originalEvent:e})})),this._compassIcon=Y.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new tc(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){Y.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(_,e){let n=Y.create("button",_,this._container);return n.type="button",n.addEventListener("click",e),n}},f.Popup=class extends a.E{constructor(_){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&Y.remove(this._content),this._container&&(Y.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.l("close"))),this),this._onMouseUp=e=>{this._update(e.point)},this._onMouseMove=e=>{this._update(e.point)},this._onDrag=e=>{this._update(e.point)},this._update=e=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=Y.create("div","maplibregl-popup",this._map.getContainer()),this._tip=Y.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(let w of this.options.className.split(" "))this._container.classList.add(w);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Qc(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!e)return;let n=this._flatPos=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&e?e:this._map.transform.locationToScreenPoint(this._lngLat));let u=this.options.anchor,m=iu(this.options.offset);if(!u){let w=this._container.offsetWidth,k=this._container.offsetHeight,E=(function(O){var N,j,Z,J;return O?{top:(N=O.top)!==null&&N!==void 0?N:0,right:(j=O.right)!==null&&j!==void 0?j:0,bottom:(Z=O.bottom)!==null&&Z!==void 0?Z:0,left:(J=O.left)!==null&&J!==void 0?J:0}:{top:0,right:0,bottom:0,left:0}})(this.options.padding),z;z=n.y+m.bottom.y<k+E.top?["top"]:n.y>this._map.transform.height-k-E.bottom?["bottom"]:[],n.x<w/2+E.left?z.push("left"):n.x>this._map.transform.width-w/2-E.right&&z.push("right"),u=z.length===0?"bottom":z.join("-")}let b=n.add(m[u]);this.options.subpixelPositioning||(b=b.round()),Y.setTransform(this._container,`${ic[u]} translate(${b.x}px,${b.y}px)`),eu(this._container,u,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(Sd),_)}addTo(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(_){return this._lngLat=a.V.convert(_),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(_){return this.setDOMContent(document.createTextNode(_))}setHTML(_){let e=document.createDocumentFragment(),n=document.createElement("body"),u;for(n.innerHTML=_;u=n.firstChild,u;)e.appendChild(u);return this.setDOMContent(e)}getMaxWidth(){var _;return(_=this._container)===null||_===void 0?void 0:_.style.maxWidth}setMaxWidth(_){return this.options.maxWidth=_,this._update(),this}setDOMContent(_){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=Y.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(_),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(_){return this._container&&this._container.classList.add(_),this}removeClassName(_){return this._container&&this._container.classList.remove(_),this}setOffset(_){return this.options.offset=_,this._update(),this}toggleClassName(_){if(this._container)return this._container.classList.toggle(_)}setSubpixelPositioning(_){this.options.subpixelPositioning=_}setPadding(_){this.options.padding=_,this._update()}_createCloseButton(){this.options.closeButton&&(this._closeButton=Y.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;let _=this._container.querySelector(tu);_&&_.focus()}},f.RasterDEMTileSource=vn,f.RasterTileSource=Ya,f.ScaleControl=class{constructor(_){this._onMove=()=>{nc(this._map,this._container,this.options)},this.setUnit=e=>{this.options.unit=e,nc(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},wd),_)}getDefaultPosition(){return"bottom-left"}onAdd(_){return this._map=_,this._container=Y.create("div","maplibregl-ctrl maplibregl-ctrl-scale",_.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){Y.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},f.ScrollZoomHandler=$c,f.Style=da,f.TerrainControl=class{constructor(_){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=_}onAdd(_){return this._map=_,this._container=Y.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=Y.create("button","maplibregl-ctrl-terrain",this._container),Y.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){Y.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},f.TwoFingersTouchPitchHandler=qh,f.TwoFingersTouchRotateHandler=md,f.TwoFingersTouchZoomHandler=fd,f.TwoFingersTouchZoomRotateHandler=Kl,f.VectorTileSource=xs,f.VideoSource=Wn,f.addSourceType=(_,e)=>a._(void 0,void 0,void 0,(function*(){if(Ts(_))throw new Error(`A source type called "${_}" already exists.`);((n,u)=>{Xa[n]=u})(_,e)})),f.clearPrewarmedResources=function(){let _=pr;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(hi),pr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},f.createTileMesh=Ko,f.getMaxParallelImageRequests=function(){return a.c.MAX_PARALLEL_IMAGE_REQUESTS},f.getRTLTextPluginStatus=function(){return Q().getRTLTextPluginStatus()},f.getVersion=function(){return Td},f.getWorkerCount=function(){return Zt.workerCount},f.getWorkerUrl=function(){return a.c.WORKER_URL},f.importScriptInWorkers=function(_){return br().broadcast("IS",_)},f.isTimeFrozen=function(){return G.isFrozen()},f.now=ie,f.prewarm=function(){gn().acquire(hi)},f.restoreNow=function(){G.restoreNow()},f.setMaxParallelImageRequests=function(_){a.c.MAX_PARALLEL_IMAGE_REQUESTS=_},f.setNow=function(_){G.setNow(_)},f.setRTLTextPlugin=function(_,e){return Q().setRTLTextPlugin(_,e)},f.setWorkerCount=function(_){Zt.workerCount=_},f.setWorkerUrl=function(_){a.c.WORKER_URL=_}}));var d=s;return d}))});var xE=ze((j_,bE)=>{(function(s,o){typeof define=="function"&&define.amd?define(["leaflet","maplibre-gl"],o):typeof j_=="object"?bE.exports=o(Ml(),vE()):s.returnExports=o(s.L,s.maplibregl)})(typeof globalThis!="undefined"?globalThis:j_||self,function(s,o){s.MaplibreGL=s.Layer.extend({options:{updateInterval:32,padding:.1,interactive:!1,pane:"tilePane"},initialize:function(p){s.setOptions(this,p),this._throttledUpdate=s.Util.throttle(this._update,this.options.updateInterval,this)},onAdd:function(p){this._container||this._initContainer();var d=this.getPaneName();p.getPane(d).appendChild(this._container),this._initGL(),this._offset=this._map.containerPointToLayerPoint([0,0]),p.options.zoomAnimation&&s.DomEvent.on(p._proxy,s.DomUtil.TRANSITION_END,this._transitionEnd,this)},onRemove:function(p){this._map._proxy&&this._map.options.zoomAnimation&&s.DomEvent.off(this._map._proxy,s.DomUtil.TRANSITION_END,this._transitionEnd,this);var d=this.getPaneName();p.getPane(d).removeChild(this._container),this._glMap.remove(),this._glMap=null},getEvents:function(){return{move:this._throttledUpdate,zoomanim:this._animateZoom,zoom:this._pinchZoom,zoomstart:this._zoomStart,zoomend:this._zoomEnd,resize:this._resize}},getAttribution:function(){if(this.options.attributionControl)return this.options.attributionControl.customAttribution;var p=this._glMap;if(p&&this.options.attributionControl!==!1){var d=p.getStyle();if(d&&d.sources)return Object.keys(d.sources).map(function(f){var a=p.getSource(f);return a&&typeof a.attribution=="string"?a.attribution.trim():null}).filter(Boolean).join(", ")}return""},getMaplibreMap:function(){return this._glMap},getCanvas:function(){return this._glMap.getCanvas()},getSize:function(){return this._map.getSize().multiplyBy(1+this.options.padding*2)},getBounds:function(){var p=this.getSize().multiplyBy(.5),d=this._map.latLngToContainerPoint(this._map.getCenter());return s.latLngBounds(this._map.containerPointToLatLng(d.subtract(p)),this._map.containerPointToLatLng(d.add(p)))},getContainer:function(){return this._container},getPaneName:function(){return this._map.getPane(this.options.pane)?this.options.pane:"tilePane"},_roundPoint:function(p){return{x:Math.round(p.x),y:Math.round(p.y)}},_initContainer:function(){var p=this._container=s.DomUtil.create("div","leaflet-gl-layer");this._resizeContainer();var d=this._map.getSize().multiplyBy(this.options.padding),f=this._map.containerPointToLayerPoint([0,0]).subtract(d);s.DomUtil.setPosition(p,this._roundPoint(f))},_resizeContainer:function(){var p=this.getSize();this._container.style.width=p.x+"px",this._container.style.height=p.y+"px"},_initGL:function(){var p=this._map.getCenter(),d=s.extend({},this.options,{container:this._container,center:[p.lng,p.lat],zoom:this._map.getZoom()-1,attributionControl:!1});this._glMap=new o.Map(d);var f=this._map,a=this.getAttribution(),T=this.getAttribution.bind(this);this._glMap.on("load",function(){f&&f.attributionControl&&(f.attributionControl.removeAttribution(a),f.attributionControl.addAttribution(T()))});var M=Object.getPrototypeOf(this._glMap.transform),R=Object.getOwnPropertyDescriptor(M,"latRange");(!R||R.set||R.writable)&&(this._glMap.transform.latRange=null);var V=Object.getOwnPropertyDescriptor(M,"maxValidLatitude");(!V||V.set||V.writable)&&(this._glMap.transform.maxValidLatitude=1/0),this._glMap.transform._helper&&this._glMap.transform._helper._latRange&&(this._glMap.transform._helper._latRange=[-1/0,1/0]),this._transformGL(this._glMap),this._glMap._canvas.canvas?this._glMap._actualCanvas=this._glMap._canvas.canvas:this._glMap._actualCanvas=this._glMap._canvas;var K=this._glMap._actualCanvas;s.DomUtil.addClass(K,"leaflet-image-layer"),s.DomUtil.addClass(K,"leaflet-zoom-animated"),this.options.interactive&&s.DomUtil.addClass(K,"leaflet-interactive"),this.options.className&&s.DomUtil.addClass(K,this.options.className)},_update:function(p){if(this._map&&(this._offset=this._map.containerPointToLayerPoint([0,0]),!this._zooming)){var d=this._container,f=this._glMap,a=this._map.getSize().multiplyBy(this.options.padding),T=this._map.containerPointToLayerPoint([0,0]).subtract(a);s.DomUtil.setPosition(d,this._roundPoint(T)),this._transformGL(f)}},_transformGL:function(p){var d=this._map.getCenter(),f=p._getTransformForUpdate();f.setCenter?(f.setCenter(o.LngLat.convert([d.lng,d.lat])),f.setZoom(this._map.getZoom()-1),p.transform.apply(f)):(f=p.transform,f.center=o.LngLat.convert([d.lng,d.lat]),f.zoom=this._map.getZoom()-1),p._fireMoveEvents()},_pinchZoom:function(p){this._glMap.jumpTo({zoom:this._map.getZoom()-1,center:this._map.getCenter()})},_animateZoom:function(p){var d=this._map.getZoomScale(p.zoom),f=this._map.getSize().multiplyBy(this.options.padding*d),a=this.getSize()._divideBy(2),T=this._map.project(p.center,p.zoom)._subtract(a)._add(this._map._getMapPanePos().add(f))._round(),M=this._map.project(this._map.getBounds().getNorthWest(),p.zoom)._subtract(T);s.DomUtil.setTransform(this._glMap._actualCanvas,M.subtract(this._offset),d)},_zoomStart:function(p){this._zooming=!0},_zoomEnd:function(){var p=this._map.getZoomScale(this._map.getZoom());s.DomUtil.setTransform(this._glMap._actualCanvas,null,p),this._zooming=!1,this._update()},_transitionEnd:function(p){s.Util.requestAnimFrame(function(){var d=this._map.getZoom(),f=this._map.getCenter(),a=this._map.latLngToContainerPoint(this._map.getBounds().getNorthWest());this._resizeContainer(),s.DomUtil.setTransform(this._glMap._actualCanvas,a,1),this._glMap.once("moveend",s.Util.bind(function(){this._zoomEnd()},this)),this._glMap.jumpTo({center:f,zoom:d-1})},this)},_resize:function(p){this._transitionEnd(p)}}),s.maplibreGL=function(p){return new s.MaplibreGL(p)}})});function wp(s){if(!s)return;let o;if(typeof s.getBoundingClientRect!="undefined")o=s.getBoundingClientRect();else{let p=document.createRange();p.selectNode(s),o=p.getBoundingClientRect()}return o}function tx(s){if(!s)return;let o;if(typeof s.getClientRects!="undefined")o=s.getClientRects();else{let p=document.createRange();p.selectNode(s),o=p.getClientRects()}return o}function Nn(){var s=new Date().getTime();return typeof performance!="undefined"&&typeof performance.now=="function"&&(s+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){var p=(s+Math.random()*16)%16|0;return s=Math.floor(s/16),(o==="x"?p:p&3|8).toString(16)})}function Sp(s,o){for(var p=0;p<o.length;p++)if(s.hasAttribute(o[p]))return s.getAttribute(o[p])}function Tp(s){if(arguments.length==0)throw new TypeError("`CSS.escape` requires an argument.");for(var o=String(s),p=o.length,d=-1,f,a="",T=o.charCodeAt(0);++d<p;){if(f=o.charCodeAt(d),f==0){a+="\uFFFD";continue}if(f>=1&&f<=31||f==127||d==0&&f>=48&&f<=57||d==1&&f>=48&&f<=57&&T==45){a+="\\"+f.toString(16)+" ";continue}if(d==0&&p==1&&f==45){a+="\\"+o.charAt(d);continue}if(f==46&&o.charAt(0)=="#"){a+="\\.";continue}if(f>=128||f==45||f==95||f==35||f==46||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122){a+=o.charAt(d);continue}a+="\\"+o.charAt(d)}return a}function Cp(){this.resolve=null,this.reject=null,this.id=Nn(),this.promise=new Promise((s,o)=>{this.resolve=s,this.reject=o}),Object.freeze(this)}var ix=typeof window!="undefined"&&("requestIdleCallback"in window?window.requestIdleCallback:window.requestAnimationFrame);function St(s){return s.value+(s.unit||"")}function an(s){return s&&s.nodeType===1}function Oo(s){return s&&s.nodeType===3}function*Hd(s,o){let p=s;for(;p;)if(yield p,p.childNodes.length)p=p.firstChild;else if(p.nextSibling){if(o&&p===o){p=void 0;break}p=p.nextSibling}else for(;p;){if(p=p.parentNode,o&&p===o){p=void 0;break}if(p&&p.nextSibling){p=p.nextSibling;break}}}function bl(s,o){if(o&&s===o)return;let p=Pp(s);if(p)return p;if(s.parentNode)for(;s=s.parentNode;){if(o&&s===o)return;if(p=Pp(s),p)return p}}function Zd(s,o){if(o&&s===o)return;let p=kp(s);if(p)return p;if(s.parentNode)for(;s=s.parentNode;){if(o&&s===o)return;if(p=kp(s),p)return p}}function rx(s,o){let p=bl(s,o);for(;p&&p.nodeType!==1;)p=bl(p,o);return p}function nx(s,o){let p=Zd(s,o);for(;p&&p.nodeType!==1;)p=Zd(p,o);return p}function ng(s,o){let p=rx(s,o);for(;p&&p.dataset.undisplayed;)p=rx(p,o);return p}function sx(s,o){let p=nx(s,o);for(;p&&p.dataset.undisplayed;)p=nx(p,o);return p}function Ep(s){let o,p,d=[],f=[],a=document.createDocumentFragment();if(s.nodeName==="TR"){let R=s.previousElementSibling,V=1;for(;R;){if(R.childElementCount>s.childElementCount){let K=Array.from(s.children);for(;s.firstChild;)s.firstChild.remove();let ne=0;for(let G=0;G<R.children.length;G++){let ie=R.children[G];if(ie.rowSpan&&ie.rowSpan>V){let Y=ie.cloneNode(!0);Y.rowSpan=ie.rowSpan-V,s.appendChild(Y)}else{let Y=K[ne++];Y&&s.appendChild(Y)}}}R=R.previousElementSibling,V++}}let T=s;for(;T.parentNode&&T.parentNode.nodeType===1;)d.unshift(T.parentNode),T=T.parentNode;for(var M=0;M<d.length;M++){if(p=d[M],o=p.cloneNode(!1),o.setAttribute("data-split-from",o.getAttribute("data-ref")),o.hasAttribute("id")){let R=o.getAttribute("id");o.setAttribute("data-id",R),o.removeAttribute("id")}if(o.hasAttribute("data-break-before")&&o.removeAttribute("data-break-before"),o.hasAttribute("data-previous-break-after")&&o.removeAttribute("data-previous-break-after"),f.length?f[f.length-1].appendChild(o):a.appendChild(o),f.push(o),o.nodeName==="TD"&&p.parentElement.contains(p)){let R=p,V=o;for(;R=R.previousElementSibling;){let K=R.cloneNode(!1);o.parentElement.insertBefore(K,V),V=K}}}return f=void 0,a}function Ap(s){return typeof s!="undefined"&&typeof s.dataset!="undefined"&&typeof s.dataset.breakBefore!="undefined"&&(s.dataset.breakBefore==="always"||s.dataset.breakBefore==="page"||s.dataset.breakBefore==="left"||s.dataset.breakBefore==="right"||s.dataset.breakBefore==="recto"||s.dataset.breakBefore==="verso")}function ox(s){return typeof s!="undefined"&&typeof s.dataset!="undefined"&&typeof s.dataset.previousBreakAfter!="undefined"&&(s.dataset.previousBreakAfter==="always"||s.dataset.previousBreakAfter==="page"||s.dataset.previousBreakAfter==="left"||s.dataset.previousBreakAfter==="right"||s.dataset.previousBreakAfter==="recto"||s.dataset.previousBreakAfter==="verso")}function Mp(s,o){if(typeof s=="undefined"||!o||Yd(s)||s.dataset&&s.dataset.undisplayed)return!1;let p=o.dataset?o.dataset.page:void 0;if(typeof p=="undefined"){let f=ax(o);f&&(p=f.dataset.page)}let d=s.dataset?s.dataset.page:void 0;if(typeof d=="undefined"){let f=ax(s,o);f&&(d=f.dataset.page)}return d!==p}function*lx(s){let o=s.nodeValue,p=o.length,d=0,f,a,T=s.parentElement&&s.parentElement.nodeName==="PRE";for(;d<p;)f=o[d],/^[\S\u202F\u00A0]$/.test(f)||T?a||(a=document.createRange(),a.setStart(s,d)):a&&(a.setEnd(s,d),yield a,a=void 0),d+=1;a&&(a.setEnd(s,d),yield a)}function*cx(s){let o=s.startContainer,p=o.length,d=s.startOffset,f;for(;d<p;)f=document.createRange(),f.setStart(o,d),f.setEnd(o,d+1),yield f,d+=1}function zp(s){let o;if(typeof s.tagName=="undefined")return!0;if(s.style&&s.style.display==="none")return!1;switch(s.tagName){case"A":case"ABBR":case"ACRONYM":case"B":case"BDO":case"BIG":case"BR":case"BUTTON":case"CITE":case"CODE":case"DFN":case"EM":case"I":case"IMG":case"INPUT":case"KBD":case"LABEL":case"MAP":case"OBJECT":case"Q":case"SAMP":case"SCRIPT":case"SELECT":case"SMALL":case"SPAN":case"STRONG":case"SUB":case"SUP":case"TEXTAREA":case"TIME":case"TT":case"VAR":case"P":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"FIGCAPTION":case"BLOCKQUOTE":case"PRE":case"LI":case"TD":case"DT":case"DD":case"VIDEO":case"CANVAS":o=!1;break;default:o=!0}return o}function ux(s,o=!1){return s.cloneNode(o)}function mn(s,o,p){let d=s.getAttribute("data-ref");return gz(d,o,p)}function gz(s,o,p){return!p&&o.indexOfRefs&&o.indexOfRefs[s]?o.indexOfRefs[s]:o.querySelector(`[data-ref='${s}']`)}function Ip(s){return!!(Oo(s)||an(s)&&s.dataset.ref)}function $d(s){for(;!Ip(s)&&(s.previousSibling?s=s.previousSibling:s=s.parentNode,!!s););return s}function dx(s){let o=s.parentNode;return o?Array.prototype.indexOf.call(o.childNodes,s):0}function Lp(s,o){return s.childNodes[o]}function hx(s){return an(s)?!0:!!(Oo(s)&&s.textContent.trim().length)}function ag(s,o){if(!Oo(s))return-1;let p=s.textContent,d,f=-1;for(var a=0;a<o.childNodes.length;a++)if(d=o.childNodes[a],d.nodeType===3&&o.childNodes[a].textContent.includes(p)){f=a;break}return f}function Yd(s){return s.nodeType===8||s.nodeType===3&&yz(s)}function yz(s){return!/[^\t\n\r ]/.test(s.textContent)}function kp(s){for(;s=s.previousSibling;)if(!Yd(s))return s;return null}function ax(s,o){if(s&&s.dataset&&s.dataset.page)return s;if(s.parentNode)for(;s=s.parentNode;){if(o&&s===o)return;if(s.dataset&&s.dataset.page)return s}return null}function px(s){for(;s=s.parentNode;)if(s&&s.dataset&&s.dataset.breakInside==="avoid")return s;return null}function Dp(s,o,p){if(!(p&&s===p)&&s.parentNode)for(;s=s.parentNode;){if(p&&s===p)return;if(s.nodeName===o)return s}}function Pp(s){for(;s=s.nextSibling;)if(!Yd(s))return s;return null}function Op(s,o,p){let d=document.createTreeWalker(s||this.dom,p||NodeFilter.SHOW_ALL,o?{acceptNode:o}:null,!1),f,a;for(f=d.nextNode();f;)a=f,f=d.nextNode(),a.parentNode.removeChild(a)}var sg=class{constructor(o,p){this.node=o,this.offset=p}equals(o){return!(!o||this.node&&o.node&&this.node!==o.node||this.offset&&o.offset&&this.offset!==o.offset)}toJSON(o){let p,d=0;return this.node?(an(this.node)&&this.node.dataset.ref?p=this.node.dataset.ref:o&&(p=this.node.parentElement.dataset.ref),this.node.parentElement&&(d=Array.from(this.node.parentElement.childNodes).indexOf(this.node)),JSON.stringify({node:p,index:d,offset:this.offset})):{}}},wu=sg;var og=class{constructor(o,p){this.breakToken=o,this.error=p}},xl=class extends Error{constructor(o,p){super(o),this.items=p}},Su=og;var r0=ki(wl(),1);var bg=class{constructor(o){this.context=o||this,this.hooks=[]}register(){for(var o=0;o<arguments.length;++o)if(typeof arguments[o]=="function")this.hooks.push(arguments[o]);else for(var p=0;p<arguments[o].length;++p)this.hooks.push(arguments[o][p])}trigger(){var o=arguments,p=this.context,d=[];return this.hooks.forEach(function(f){var a=f.apply(p,o);a&&typeof a.then=="function"?d.push(a):d.push(new Promise((T,M)=>{T(a)}))}),Promise.all(d)}triggerSync(){var o=arguments,p=this.context,d=[];return this.hooks.forEach(function(f){var a=f.apply(p,o);d.push(a)}),d}list(){return this.hooks}clear(){return this.hooks=[]}},At=bg;var Nz=1500,qp=class{constructor(o,p,d){this.element=o,this.bounds=this.element.getBoundingClientRect(),this.parentBounds=this.element.offsetParent.getBoundingClientRect();let f=parseFloat(window.getComputedStyle(this.element).columnGap);if(f){let a=this.bounds.left-this.parentBounds.left;this.gap=f-a}else this.gap=0;p?this.hooks=p:(this.hooks={},this.hooks.onPageLayout=new At,this.hooks.layout=new At,this.hooks.renderNode=new At,this.hooks.layoutNode=new At,this.hooks.beforeOverflow=new At,this.hooks.onOverflow=new At,this.hooks.afterOverflowRemoved=new At,this.hooks.onBreakToken=new At,this.hooks.beforeRenderResult=new At),this.settings=d||{},this.maxChars=this.settings.maxChars||Nz,this.forceRenderBreak=!1}async renderTo(o,p,d,f=this.bounds){let a=this.getStart(p,d),T=Hd(a,p),M,R,V,K,ne=!1,G,ie=0,Y=d||new wu(a);for(this.hooks&&this.hooks.onPageLayout.trigger(o,Y,this);!V&&!G;){if(K=T.next(),R=M,M=K.value,V=K.done,!M){this.hooks&&this.hooks.layout.trigger(o,this);let _e=o.querySelectorAll("img");return _e.length&&await this.waitForImages(_e),G=this.findBreakToken(o,p,f,Y),G&&G.equals(Y)?(console.warn("Unable to layout item: ",R),this.hooks&&this.hooks.beforeRenderResult.trigger(void 0,o,this),new Su(void 0,new xl("Unable to layout item",[R]))):(this.rebuildTableFromBreakToken(G,o),this.hooks&&this.hooks.beforeRenderResult.trigger(G,o,this),new Su(G))}if(this.hooks&&this.hooks.layoutNode.trigger(M),ne&&this.shouldBreak(M,a)){this.hooks&&this.hooks.layout.trigger(o,this);let _e=o.querySelectorAll("img");if(_e.length&&await this.waitForImages(_e),G=this.findBreakToken(o,p,f,Y),G?this.rebuildTableFromBreakToken(G,o):G=this.breakAt(M),G&&G.equals(Y)){console.warn("Unable to layout item: ",M);let Pe=G.node&&bl(G.node);if(Pe)G=new wu(Pe);else return new Su(void 0,new xl("Unable to layout item",[M]))}ie=0;break}if(M.dataset&&M.dataset.page){let _e=M.dataset.page,Pe=this.element.closest(".pagedjs_page");Pe.classList.add("pagedjs_named_page"),Pe.classList.add("pagedjs_"+_e+"_page"),M.dataset.splitFrom||Pe.classList.add("pagedjs_"+_e+"_first_page")}let Se=zp(M),je=this.append(M,o,d,Se);if(ie+=je.textContent.length,ne||(ne=hx(M)),Se||(T=Hd(bl(M,p),p)),this.forceRenderBreak){this.hooks&&this.hooks.layout.trigger(o,this),G=this.findBreakToken(o,p,f,Y),G?this.rebuildTableFromBreakToken(G,o):G=this.breakAt(M),ie=0,this.forceRenderBreak=!1;break}if(ie>=this.maxChars){this.hooks&&this.hooks.layout.trigger(o,this);let _e=o.querySelectorAll("img");if(_e.length&&await this.waitForImages(_e),G=this.findBreakToken(o,p,f,Y),G&&(ie=0,this.rebuildTableFromBreakToken(G,o)),G&&G.equals(Y)){console.warn("Unable to layout item: ",M);let Pe=G.node&&bl(G.node);if(Pe)G=new wu(Pe);else return this.hooks&&this.hooks.beforeRenderResult.trigger(void 0,o,this),new Su(void 0,new xl("Unable to layout item",[M]))}}}return this.hooks&&this.hooks.beforeRenderResult.trigger(G,o,this),new Su(G)}breakAt(o,p=0){let d=new wu(o,p);return this.hooks.onBreakToken.triggerSync(d,void 0,o,this).forEach(a=>{typeof a!="undefined"&&(d=a)}),d}shouldBreak(o,p){let d=Zd(o,p),f=o.parentNode,a=Ap(o)&&f&&!d&&Ap(f),T;return a&&(T=o.dataset.breakBefore===f.dataset.breakBefore),!T&&Ap(o)||ox(o)||Mp(o,d)}forceBreak(){this.forceRenderBreak=!0}getStart(o,p){let d,f=p&&p.node;return f?d=f:d=o.firstChild,d}append(o,p,d,f=!0,a=!0){let T=ux(o,!f);if(o.parentNode&&an(o.parentNode)){let R=mn(o.parentNode,p);if(R)R.appendChild(T);else if(a){let V=Ep(o);R=mn(o.parentNode,V),R?(d&&Oo(d.node)&&d.offset>0&&(T.textContent=T.textContent.substring(d.offset)),R.appendChild(T)):p.appendChild(T),p.appendChild(V)}else p.appendChild(T)}else p.appendChild(T);return T.dataset&&T.dataset.ref&&(p.indexOfRefs||(p.indexOfRefs={}),p.indexOfRefs[T.dataset.ref]=T),this.hooks.renderNode.triggerSync(T,o,this).forEach(R=>{typeof R!="undefined"&&(T=R)}),T}rebuildTableFromBreakToken(o,p){if(!o||!o.node)return;let d=o.node,f=an(d)?d.closest("td"):d.parentElement.closest("td");if(f){if(!mn(f,p,!0))return;for(;f=f.nextElementSibling;)this.append(f,p,null,!0)}}async waitForImages(o){let p=Array.from(o).map(async d=>this.awaitImageLoaded(d));await Promise.all(p)}async awaitImageLoaded(o){return new Promise(p=>{if(o.complete!==!0)o.onload=function(){let{width:d,height:f}=window.getComputedStyle(o);p(d,f)},o.onerror=function(d){let{width:f,height:a}=window.getComputedStyle(o);p(f,a,d)};else{let{width:d,height:f}=window.getComputedStyle(o);p(d,f)}})}avoidBreakInside(o,p){let d;if(o!==p){for(;o.parentNode&&(o=o.parentNode,o!==p);)if(window.getComputedStyle(o)["break-inside"]==="avoid"){d=o;break}return d}}createBreakToken(o,p,d){let f=o.startContainer,a=o.startOffset,T,M,R,V,K;if(an(f))if(K=Lp(f,a),an(K))if(M=mn(K,p),M)T=mn(M,d),a=0;else{let ne=$d(K);if(an(ne)||(ne=ne.parentElement),M=mn(ne,p),!K.nextSibling){let G=mn(M,d),Y=document.createTreeWalker(G,NodeFilter.SHOW_ELEMENT).lastChild();if(!mn(Y,p))return}T=mn(M,d).nextSibling,a=0}else M=mn(f,p),M||(M=mn($d(f),p)),R=mn(M,d),V=ag(K,R),V===0?(T=R,a=0):(T=Lp(R,V),a=0);else{if(M=mn(f.parentNode,p),M||(M=mn($d(f.parentNode),p)),R=mn(M,d),V=ag(f,R),V===-1)return;T=Lp(R,V),a+=T.textContent.indexOf(f.textContent)}if(T)return new wu(T,a)}findBreakToken(o,p,d=this.bounds,f,a=!0){let T=this.findOverflow(o,d),M,R;if(this.hooks.onOverflow.triggerSync(T,o,d,this).forEach(K=>{typeof K!="undefined"&&(T=K)}),T){if(M=this.createBreakToken(T,o,p),this.hooks.onBreakToken.triggerSync(M,T,o,this).forEach(ne=>{typeof ne!="undefined"&&(M=ne)}),M&&M.equals(f))return M;if(M&&M.node&&M.offset&&M.node.textContent?R=M.node.textContent.charAt(M.offset):R=void 0,M&&M.node&&a){let ne=this.removeOverflow(T,R);this.hooks&&this.hooks.afterOverflowRemoved.trigger(ne,o,this)}}return M}hasOverflow(o,p=this.bounds){let d=o&&o.parentNode,{width:f,height:a}=o.getBoundingClientRect(),T=d?d.scrollWidth:0,M=d?d.scrollHeight:0;return Math.max(Math.floor(f),T)>Math.round(p.width)||Math.max(Math.floor(a),M)>Math.round(p.height)}findOverflow(o,p=this.bounds,d=this.gap){if(!this.hasOverflow(o,p))return;let f=Math.floor(p.left),a=Math.round(p.right+d),T=Math.round(p.top),M=Math.round(p.bottom),R,V=Hd(o.firstChild,o),K,ne,G,ie,Y,Se,je,_e;for(;!ne;)if(K=V.next(),ne=K.done,G=K.value,Y=!1,Se=!1,je=void 0,_e=void 0,G){let Ye=wp(G),st=Math.round(Ye.left),Pt=Math.floor(Ye.right),_t=Math.round(Ye.top),Ut=Math.floor(Ye.bottom);if(!R&&(st>=a||_t>=M)){let Ht=!1,Tt=Dp(G,"TD",o);if(Tt&&window.getComputedStyle(Tt)["break-inside"]==="avoid")je=Tt.parentElement;else if(an(G)){let oi=window.getComputedStyle(G);Ht=oi.getPropertyValue("float")!=="none",Y=oi.getPropertyValue("break-inside")==="avoid",Se=G.dataset.breakBefore==="avoid"||G.dataset.previousBreakAfter==="avoid",je=Se&&Zd(G,o),_e=G.tagName==="BR"||G.tagName==="WBR"}let Et;if(G.nodeName==="TR"?Et=G:Et=Dp(G,"TR",o),Et){let oi=Et.parentElement;["TBODY","THEAD"].includes(oi.nodeName)&&window.getComputedStyle(oi).getPropertyValue("break-inside")==="avoid"&&(je=oi);let ni=Dp(Et,"TABLE",o),di=ni.querySelector("[colspan]");if(ni&&di){let ai=0;for(let Ct of Array.from(ni.rows[0].cells))ai+=parseInt(Ct.getAttribute("colspan")||"1");if(Et.cells.length!==ai){let Ct=Et.previousElementSibling,dt;for(;Ct!==null;){dt=0;for(let qt of Array.from(Ct.cells))dt+=parseInt(qt.getAttribute("colspan")||"1");if(dt===ai)break;Ct=Ct.previousElementSibling}dt===ai&&(je=Ct)}}}if(je){R=document.createRange(),R.selectNode(je);break}if(!_e&&!Ht&&an(G)){R=document.createRange(),R.selectNode(G);break}if(Oo(G)&&G.textContent.trim().length){R=document.createRange(),R.selectNode(G);break}}if(!R&&Oo(G)&&G.textContent.trim().length&&!px(G.parentNode)){let Ht=tx(G),Tt;st=0,_t=0;for(var Pe=0;Pe!=Ht.length;Pe++)Tt=Ht[Pe],Tt.width>0&&(!st||Tt.left>st)&&(st=Tt.left),Tt.height>0&&(!_t||Tt.top>_t)&&(_t=Tt.top);if(st>=a||_t>=M){R=document.createRange(),ie=this.textBreak(G,f,a,T,M),ie?R.setStart(G,ie):R=void 0;break}}(Y||Pt<=a&&Ut<=M)&&(K=bl(G,o),K&&(V=Hd(K,o)))}if(R)return R.setEndAfter(o.lastChild),R}findEndToken(o,p){if(o.childNodes.length===0)return;let d=o.lastChild,f;for(;d&&d.lastChild;)if(!Ip(d))d=d.previousSibling;else if(Ip(d.lastChild))d=d.lastChild;else{d=$d(d.lastChild);break}Oo(d)&&(d.parentNode.dataset.ref?(f=dx(d),d=d.parentNode):d=d.previousSibling);let a=mn(d,p);f&&(a=a.childNodes[f]);let T=bl(a);return this.breakAt(T)}textBreak(o,p,d,f,a){let T=lx(o),M=0,R=0,V=0,K=0,ne,G,ie,Y,Se;for(;!ie&&(G=T.next(),ne=G.value,ie=G.done,!!ne);){if(Y=wp(ne),M=Math.floor(Y.left),R=Math.floor(Y.right),V=Math.floor(Y.top),K=Math.floor(Y.bottom),M>=d||V>=a){Se=ne.startOffset;break}if(R>d||K>a){let je=cx(ne),_e,Pe,Ye;for(;!Ye&&(Pe=je.next(),_e=Pe.value,Ye=Pe.done,!!_e);)if(Y=wp(_e),M=Math.floor(Y.left),V=Math.floor(Y.top),M>=d||V>=a){Se=_e.startOffset,ie=!0;break}}}return Se}removeOverflow(o,p){let{startContainer:d}=o,f=o.extractContents();return this.hyphenateAtBreak(d,p),f}hyphenateAtBreak(o,p){if(Oo(o)){let d=o.textContent,f=d[d.length-1];(p&&/^\w|\u00AD$/.test(f)&&/^\w|\u00AD$/.test(p)||!p&&/^\w|\u00AD$/.test(f))&&(o.parentNode.classList.add("pagedjs_hyphen"),o.textContent+=this.settings.hyphenGlyph||"\u2011")}}equalTokens(o,p){return!(!o||!p||o.node&&p.node&&o.node!==p.node||o.offset&&p.offset&&o.offset!==p.offset)}};(0,r0.default)(qp.prototype);var Vp=qp;var n0=ki(wl(),1),Wp=class{constructor(o,p,d,f,a){this.pagesArea=o,this.pageTemplate=p,this.blank=d,this.width=void 0,this.height=void 0,this.hooks=f,this.settings=a||{}}create(o,p){let d=document.importNode(this.pageTemplate.content,!0),f,a;p?(this.pagesArea.insertBefore(d,p.nextElementSibling),a=Array.prototype.indexOf.call(this.pagesArea.children,p.nextElementSibling),f=this.pagesArea.children[a]):(this.pagesArea.appendChild(d),f=this.pagesArea.lastChild);let T=f.querySelector(".pagedjs_pagebox"),M=f.querySelector(".pagedjs_page_content"),R=f.querySelector(".pagedjs_footnote_area"),V=M.getBoundingClientRect();return M.style.columnWidth=Math.round(V.width)+"px",M.style.columnGap="calc(var(--pagedjs-margin-right) + var(--pagedjs-margin-left) + var(--pagedjs-bleed-right) + var(--pagedjs-bleed-left) + var(--pagedjs-column-gap-offset))",this.width=Math.round(V.width),this.height=Math.round(V.height),this.element=f,this.pagebox=T,this.area=M,this.footnotesArea=R,f}createWrapper(){let o=document.createElement("div");return this.area.appendChild(o),this.wrapper=o,o}index(o){this.position=o;let p=this.element,d=o+1,f=`page-${d}`;this.id=f,p.dataset.pageNumber=d,p.setAttribute("id",f),this.name&&p.classList.add("pagedjs_"+this.name+"_page"),this.blank&&p.classList.add("pagedjs_blank_page"),o===0&&p.classList.add("pagedjs_first_page"),o%2!==1?(p.classList.remove("pagedjs_left_page"),p.classList.add("pagedjs_right_page")):(p.classList.remove("pagedjs_right_page"),p.classList.add("pagedjs_left_page"))}async layout(o,p,d){this.clear(),this.startToken=p;let f=this.settings;!f.maxChars&&d&&(f.maxChars=d),this.layoutMethod=new Vp(this.area,this.hooks,f);let T=(await this.layoutMethod.renderTo(this.wrapper,o,p)).breakToken;return this.addListeners(o),this.endToken=T,T}async append(o,p){if(!this.layoutMethod)return this.layout(o,p);let f=(await this.layoutMethod.renderTo(this.wrapper,o,p)).breakToken;return this.endToken=f,f}getByParent(o,p){let d;for(var f=0;f<p.length;f++)if(d=p[f],d.dataset.ref===o)return d}onOverflow(o){this._onOverflow=o}onUnderflow(o){this._onUnderflow=o}clear(){this.removeListeners(),this.wrapper&&this.wrapper.remove(),this.createWrapper()}addListeners(o){return typeof ResizeObserver!="undefined"?this.addResizeObserver(o):(this._checkOverflowAfterResize=this.checkOverflowAfterResize.bind(this,o),this.element.addEventListener("overflow",this._checkOverflowAfterResize,!1),this.element.addEventListener("underflow",this._checkOverflowAfterResize,!1)),this._onScroll=function(){this.listening&&(this.element.scrollLeft=0)}.bind(this),this.element.addEventListener("scroll",this._onScroll),this.listening=!0,!0}removeListeners(){this.listening=!1,typeof ResizeObserver!="undefined"&&this.ro?this.ro.disconnect():this.element&&(this.element.removeEventListener("overflow",this._checkOverflowAfterResize,!1),this.element.removeEventListener("underflow",this._checkOverflowAfterResize,!1)),this.element&&this.element.removeEventListener("scroll",this._onScroll)}addResizeObserver(o){let p=this.wrapper,d=p.getBoundingClientRect().height;this.ro=new ResizeObserver(f=>{this.listening&&requestAnimationFrame(()=>{for(let a of f){let T=a.contentRect;T.height>d?(this.checkOverflowAfterResize(o),d=p.getBoundingClientRect().height):T.height<d&&(this.checkUnderflowAfterResize(o),d=T.height)}})}),this.ro.observe(p)}checkOverflowAfterResize(o){if(!this.listening||!this.layoutMethod)return;let p=this.layoutMethod.findBreakToken(this.wrapper,o,this.startToken);p&&(this.endToken=p,this._onOverflow&&this._onOverflow(p))}checkUnderflowAfterResize(o){if(!this.listening||!this.layoutMethod)return;let p=this.layoutMethod.findEndToken(this.wrapper,o);p&&this._onUnderflow&&this._onUnderflow(p)}destroy(){this.removeListeners(),this.element.remove(),this.element=void 0,this.wrapper=void 0}};(0,n0.default)(Wp.prototype);var xg=Wp;var wg=class{constructor(o,p){return o&&o.nodeType?this.dom=this.add(o):typeof o=="string"&&(this.dom=this.parse(o)),this.dom}parse(o,p){let f=document.createRange().createContextualFragment(o);return this.addRefs(f),f}add(o){return this.addRefs(o),o}addRefs(o){var p=document.createTreeWalker(o,NodeFilter.SHOW_ELEMENT,null,!1);let d=p.nextNode();for(;d;){if(!d.hasAttribute("data-ref")){let f=Nn();d.setAttribute("data-ref",f)}d.id&&d.setAttribute("data-id",d.id),d=p.nextNode()}}find(o){return this.refs[o]}destroy(){this.refs=void 0,this.dom=void 0}},a0=wg;var c0=ki(wl(),1);var Sg=class{constructor(o){this._q=[],this.context=o,this.tick=requestAnimationFrame,this.running=!1,this.paused=!1}enqueue(){var o,p,d,f=[].shift.call(arguments),a=arguments;if(!f)throw new Error("No Task Provided");return typeof f=="function"?(o=new Cp,p=o.promise,d={task:f,args:a,deferred:o,promise:p}):d={promise:f},this._q.push(d),this.paused==!1&&!this.running&&this.run(),d.promise}dequeue(){var o,p,d;if(this._q.length&&!this.paused){if(o=this._q.shift(),p=o.task,p)return d=p.apply(this.context,o.args),d&&typeof d.then=="function"?d.then(function(){o.deferred.resolve.apply(this.context,arguments)}.bind(this),function(){o.deferred.reject.apply(this.context,arguments)}.bind(this)):(o.deferred.resolve.apply(this.context,d),o.promise);if(o.promise)return o.promise}else return o=new Cp,o.deferred.resolve(),o.promise}dump(){for(;this._q.length;)this.dequeue()}run(){return this.running||(this.running=!0,this.defered=new Cp),this.tick.call(window,()=>{this._q.length?this.dequeue().then(function(){this.run()}.bind(this)):(this.defered.resolve(),this.running=void 0)}),this.paused==!0&&(this.paused=!1),this.defered.promise}flush(){if(this.running)return this.running;if(this._q.length)return this.running=this.dequeue().then(function(){return this.running=void 0,this.flush()}.bind(this)),this.running}clear(){this._q=[]}length(){return this._q.length}pause(){this.paused=!0}stop(){this._q=[],this.running=!1,this.paused=!0}};var s0=Sg;var o0=!1,l0=!1,qz=`
<div class="pagedjs_page">
	<div class="pagedjs_sheet">
		<div class="pagedjs_bleed pagedjs_bleed-top">
			<div class="pagedjs_marks-crop"></div>
			<div class="pagedjs_marks-middle">
				<div class="pagedjs_marks-cross"></div>
			</div>
			<div class="pagedjs_marks-crop"></div>
		</div>
		<div class="pagedjs_bleed pagedjs_bleed-bottom">
			<div class="pagedjs_marks-crop"></div>
			<div class="pagedjs_marks-middle">
				<div class="pagedjs_marks-cross"></div>
			</div>		<div class="pagedjs_marks-crop"></div>
		</div>
		<div class="pagedjs_bleed pagedjs_bleed-left">
			<div class="pagedjs_marks-crop"></div>
			<div class="pagedjs_marks-middle">
				<div class="pagedjs_marks-cross"></div>
			</div>		<div class="pagedjs_marks-crop"></div>
		</div>
		<div class="pagedjs_bleed pagedjs_bleed-right">
			<div class="pagedjs_marks-crop"></div>
			<div class="pagedjs_marks-middle">
				<div class="pagedjs_marks-cross"></div>
			</div>
			<div class="pagedjs_marks-crop"></div>
		</div>
		<div class="pagedjs_pagebox">
			<div class="pagedjs_margin-top-left-corner-holder">
				<div class="pagedjs_margin pagedjs_margin-top-left-corner"><div class="pagedjs_margin-content"></div></div>
			</div>
			<div class="pagedjs_margin-top">
				<div class="pagedjs_margin pagedjs_margin-top-left"><div class="pagedjs_margin-content"></div></div>
				<div class="pagedjs_margin pagedjs_margin-top-center"><div class="pagedjs_margin-content"></div></div>
				<div class="pagedjs_margin pagedjs_margin-top-right"><div class="pagedjs_margin-content"></div></div>
			</div>
			<div class="pagedjs_margin-top-right-corner-holder">
				<div class="pagedjs_margin pagedjs_margin-top-right-corner"><div class="pagedjs_margin-content"></div></div>
			</div>
			<div class="pagedjs_margin-right">
				<div class="pagedjs_margin pagedjs_margin-right-top"><div class="pagedjs_margin-content"></div></div>
				<div class="pagedjs_margin pagedjs_margin-right-middle"><div class="pagedjs_margin-content"></div></div>
				<div class="pagedjs_margin pagedjs_margin-right-bottom"><div class="pagedjs_margin-content"></div></div>
			</div>
			<div class="pagedjs_margin-left">
				<div class="pagedjs_margin pagedjs_margin-left-top"><div class="pagedjs_margin-content"></div></div>
				<div class="pagedjs_margin pagedjs_margin-left-middle"><div class="pagedjs_margin-content"></div></div>
				<div class="pagedjs_margin pagedjs_margin-left-bottom"><div class="pagedjs_margin-content"></div></div>
			</div>
			<div class="pagedjs_margin-bottom-left-corner-holder">
				<div class="pagedjs_margin pagedjs_margin-bottom-left-corner"><div class="pagedjs_margin-content"></div></div>
			</div>
			<div class="pagedjs_margin-bottom">
				<div class="pagedjs_margin pagedjs_margin-bottom-left"><div class="pagedjs_margin-content"></div></div>
				<div class="pagedjs_margin pagedjs_margin-bottom-center"><div class="pagedjs_margin-content"></div></div>
				<div class="pagedjs_margin pagedjs_margin-bottom-right"><div class="pagedjs_margin-content"></div></div>
			</div>
			<div class="pagedjs_margin-bottom-right-corner-holder">
				<div class="pagedjs_margin pagedjs_margin-bottom-right-corner"><div class="pagedjs_margin-content"></div></div>
			</div>
			<div class="pagedjs_area">
				<div class="pagedjs_page_content"></div>
				<div class="pagedjs_footnote_area">
					<div class="pagedjs_footnote_content pagedjs_footnote_empty">
						<div class="pagedjs_footnote_inner_content"></div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>`,Gp=class{constructor(o,p,d){this.settings=d||{},this.hooks={},this.hooks.beforeParsed=new At(this),this.hooks.filter=new At(this),this.hooks.afterParsed=new At(this),this.hooks.beforePageLayout=new At(this),this.hooks.onPageLayout=new At(this),this.hooks.layout=new At(this),this.hooks.renderNode=new At(this),this.hooks.layoutNode=new At(this),this.hooks.onOverflow=new At(this),this.hooks.afterOverflowRemoved=new At(this),this.hooks.onBreakToken=new At,this.hooks.beforeRenderResult=new At(this),this.hooks.afterPageLayout=new At(this),this.hooks.finalizePage=new At(this),this.hooks.afterRendered=new At(this),this.pages=[],this.total=0,this.q=new s0(this),this.stopped=!1,this.rendered=!1,this.content=o,this.charsPerBreak=[],this.maxChars,o&&this.flow(o,p)}setup(o){this.pagesArea=document.createElement("div"),this.pagesArea.classList.add("pagedjs_pages"),o?o.appendChild(this.pagesArea):document.querySelector("body").appendChild(this.pagesArea),this.pageTemplate=document.createElement("template"),this.pageTemplate.innerHTML=qz}async flow(o,p){let d;await this.hooks.beforeParsed.trigger(o,this),d=new a0(o),this.hooks.filter.triggerSync(d),this.source=d,this.breakToken=void 0,this.pagesArea&&this.pageTemplate?(this.q.clear(),this.removePages()):this.setup(p),this.emit("rendering",d),await this.hooks.afterParsed.trigger(d,this),await this.loadFonts();let f=await this.render(d,this.breakToken);for(;f.canceled;)this.start(),f=await this.render(d,this.breakToken);return this.rendered=!0,this.pagesArea.style.setProperty("--pagedjs-page-count",this.total),await this.hooks.afterRendered.trigger(this.pages,this),this.emit("rendered",this.pages),this}async render(o,p){let d=this.layout(o,p),f=!1,a,T=0;for(;!f;)if(a=await this.q.enqueue(()=>this.renderAsync(d)),f=a.done,l0&&(T+=1,T>=l0)){this.stop();break}return a}start(){this.rendered=!1,this.stopped=!1}stop(){this.stopped=!0}renderOnIdle(o){return new Promise(p=>{ix(async()=>{if(this.stopped)return p({done:!0,canceled:!0});let d=await o.next();this.stopped?p({done:!0,canceled:!0}):p(d)})})}async renderAsync(o){if(this.stopped)return{done:!0,canceled:!0};let p=await o.next();return this.stopped?{done:!0,canceled:!0}:p}async handleBreaks(o,p){let d=this.total+1,f=d%2===0?"left":"right",a=d%2===0?"verso":"recto",T,M,R;d!==1&&(o&&typeof o.dataset!="undefined"&&typeof o.dataset.previousBreakAfter!="undefined"&&(T=o.dataset.previousBreakAfter),o&&typeof o.dataset!="undefined"&&typeof o.dataset.breakBefore!="undefined"&&(M=o.dataset.breakBefore),p?R=this.addPage(!0):T&&(T==="left"||T==="right")&&T!==f?R=this.addPage(!0):T&&(T==="verso"||T==="recto")&&T!==a?R=this.addPage(!0):M&&(M==="left"||M==="right")&&M!==f?R=this.addPage(!0):M&&(M==="verso"||M==="recto")&&M!==a&&(R=this.addPage(!0)),R&&(await this.hooks.beforePageLayout.trigger(R,void 0,void 0,this),this.emit("page",R),await this.hooks.afterPageLayout.trigger(R.element,R,void 0,this),await this.hooks.finalizePage.trigger(R.element,R,void 0,this),this.emit("renderedPage",R)))}async*layout(o,p){let d=p||!1,f=[];for(;d!==void 0&&(!o0||this.total<o0);){d&&d.node?await this.handleBreaks(d.node):await this.handleBreaks(o.firstChild);let a=this.addPage();if(await this.hooks.beforePageLayout.trigger(a,o,d,this),this.emit("page",a),d=await a.layout(o,d,this.maxChars),d){let T=d.toJSON(!0);if(f.lastIndexOf(T)>-1){let M=new xl("Layout repeated",[d.node]);return console.error("Layout repeated at: ",d.node),M}else f.push(T)}await this.hooks.afterPageLayout.trigger(a.element,a,d,this),await this.hooks.finalizePage.trigger(a.element,a,void 0,this),this.emit("renderedPage",a),this.recoredCharLength(a.wrapper.textContent.length),yield d}}recoredCharLength(o){o!==0&&(this.charsPerBreak.push(o),this.charsPerBreak.length>4&&this.charsPerBreak.shift(),this.maxChars=this.charsPerBreak.reduce((p,d)=>p+d,0)/this.charsPerBreak.length)}removePages(o=0){if(!(o>=this.pages.length)){for(let p=o;p<this.pages.length;p++)this.pages[p].destroy();o>0?this.pages.splice(o):this.pages=[],this.total=this.pages.length}}addPage(o){let p=this.pages[this.pages.length-1],d=new xg(this.pagesArea,this.pageTemplate,o,this.hooks,this.settings);return this.pages.push(d),d.create(void 0,p&&p.element),d.index(this.total),o||(d.onOverflow(f=>{if(console.warn("overflow on",d.id,f),this.rendered)return;let a=this.pages.indexOf(d)+1;this.stop(),this.breakToken=f,this.removePages(a),this.rendered===!0&&(this.rendered=!1,this.q.enqueue(async()=>{this.start(),await this.render(this.source,this.breakToken),this.rendered=!0}))}),d.onUnderflow(f=>{})),this.total=this.pages.length,d}async clonePage(o){let p=this.pages[this.pages.length-1],d=new xg(this.pagesArea,this.pageTemplate,!1,this.hooks);this.pages.push(d),d.create(void 0,p&&p.element),d.index(this.total),await this.hooks.beforePageLayout.trigger(d,void 0,void 0,this),this.emit("page",d);for(let f of o.element.classList)f!=="pagedjs_left_page"&&f!=="pagedjs_right_page"&&d.element.classList.add(f);await this.hooks.afterPageLayout.trigger(d.element,d,void 0,this),await this.hooks.finalizePage.trigger(d.element,d,void 0,this),this.emit("renderedPage",d)}loadFonts(){let o=[];return(document.fonts||[]).forEach(p=>{if(p.status!=="loaded"){let d=p.load().then(f=>p.family,f=>(console.warn("Failed to preload font-family:",p.family),p.family));o.push(d)}}),Promise.all(o).catch(p=>{console.warn(p)})}destroy(){this.pagesArea.remove(),this.pageTemplate.remove()}};(0,c0.default)(Gp.prototype);var Tg=Gp;var Mr=ki(En(),1);var Hy=class{constructor(o,p){p?this.hooks=p:(this.hooks={},this.hooks.onUrl=new At(this),this.hooks.onAtPage=new At(this),this.hooks.onAtMedia=new At(this),this.hooks.onRule=new At(this),this.hooks.onDeclaration=new At(this),this.hooks.onSelector=new At(this),this.hooks.onPseudoSelector=new At(this),this.hooks.onContent=new At(this),this.hooks.onImport=new At(this),this.hooks.beforeTreeParse=new At(this),this.hooks.beforeTreeWalk=new At(this),this.hooks.afterTreeWalk=new At(this));try{this.url=new URL(o,window.location.href)}catch(d){this.url=new URL(window.location.href)}}async parse(o){return this.text=o,await this.hooks.beforeTreeParse.trigger(this.text,this),this.ast=Mr.default.parse(this._text),await this.hooks.beforeTreeWalk.trigger(this.ast),this.replaceUrls(this.ast),this.id=Nn(),this.replaceIds(this.ast),this.imported=[],this.urls(this.ast),this.rules(this.ast),this.atrules(this.ast),await this.hooks.afterTreeWalk.trigger(this.ast,this),this.ast}insertRule(o){let p=this.ast.children.appendData(o);return this.declarations(o),p}urls(o){Mr.default.walk(o,{visit:"Url",enter:(p,d,f)=>{this.hooks.onUrl.trigger(p,d,f)}})}atrules(o){Mr.default.walk(o,{visit:"Atrule",enter:(p,d,f)=>{let a=Mr.default.keyword(p.name).basename;a==="page"&&(this.hooks.onAtPage.trigger(p,d,f),this.declarations(p,d,f)),a==="media"&&(this.hooks.onAtMedia.trigger(p,d,f),this.declarations(p,d,f)),a==="import"&&(this.hooks.onImport.trigger(p,d,f),this.imports(p,d,f))}})}rules(o){Mr.default.walk(o,{visit:"Rule",enter:(p,d,f)=>{this.hooks.onRule.trigger(p,d,f),this.declarations(p,d,f),this.onSelector(p,d,f)}})}declarations(o,p,d){Mr.default.walk(o,{visit:"Declaration",enter:(f,a,T)=>{this.hooks.onDeclaration.trigger(f,a,T,{ruleNode:o,ruleItem:p,rulelist:d}),f.property==="content"&&Mr.default.walk(f,{visit:"Function",enter:(M,R,V)=>{this.hooks.onContent.trigger(M,R,V,{declarationNode:f,dItem:a,dList:T},{ruleNode:o,ruleItem:p,rulelist:d})}})}})}onSelector(o,p,d){Mr.default.walk(o,{visit:"Selector",enter:(f,a,T)=>{this.hooks.onSelector.trigger(f,a,T,{ruleNode:o,ruleItem:p,rulelist:d}),f.children.forEach(M=>{M.type==="PseudoElementSelector"&&Mr.default.walk(M,{visit:"PseudoElementSelector",enter:(R,V,K)=>{this.hooks.onPseudoSelector.trigger(R,V,K,{selectNode:f,selectItem:a,selectList:T},{ruleNode:o,ruleItem:p,rulelist:d})}})})}})}replaceUrls(o){Mr.default.walk(o,{visit:"Url",enter:(p,d,f)=>{let a=p.value.value;if(!(p.value.type==="Raw"&&a.startsWith("data:")||p.value.type==="String"&&(a.startsWith('"data:')||a.startsWith("'data:")))){let T=a.replace(/["']/g,""),M=new URL(T,this.url);p.value.value=M.toString()}}})}addScope(o,p){Mr.default.walk(o,{visit:"Selector",enter:(d,f,a)=>{let T=d.children;T.prepend(T.createItem({type:"WhiteSpace",value:" "})),T.prepend(T.createItem({type:"IdSelector",name:p,loc:null,children:null}))}})}getNamedPageSelectors(o){let p={};return Mr.default.walk(o,{visit:"Rule",enter:(d,f,a)=>{Mr.default.walk(d,{visit:"Declaration",enter:(T,M,R)=>{if(T.property==="page"){let V=T.value.children.first(),K=V.name,ne=Mr.default.generate(d.prelude);p[K]={name:K,selector:ne},T.property="break-before",V.type="Identifier",V.name="always"}}})}}),p}replaceIds(o){Mr.default.walk(o,{visit:"Rule",enter:(p,d,f)=>{Mr.default.walk(p,{visit:"IdSelector",enter:(a,T,M)=>{let R=a.name;a.flags=null,a.matcher="=",a.name={type:"Identifier",loc:null,name:"data-id"},a.type="AttributeSelector",a.value={type:"String",loc:null,value:`"${R}"`}}})}})}imports(o,p,d){let f=[];Mr.default.walk(o,{visit:"MediaQuery",enter:(T,M,R)=>{Mr.default.walk(T,{visit:"Identifier",enter:(V,K,ne)=>{f.push(V.name)}})}}),!f.some((T,M)=>{let R=T;return R==="not"?(R=f[M+1],!(R==="screen"||R==="speech")):R==="screen"||R==="speech"})&&Mr.default.walk(o,{visit:"String",enter:(T,M,R)=>{let V=T.value.replace(/["']/g,""),ne=new URL(V,this.url).toString();this.imported.push(ne),d.remove(p)}})}set text(o){this._text=o}get text(){return this._text}toString(o){return Mr.default.generate(o||this.ast)}},KC=Hy;var JC=`
:root {
	--pagedjs-width: 8.5in;
	--pagedjs-height: 11in;
	--pagedjs-width-right: 8.5in;
	--pagedjs-height-right: 11in;
	--pagedjs-width-left: 8.5in;
	--pagedjs-height-left: 11in;
	--pagedjs-pagebox-width: 8.5in;
	--pagedjs-pagebox-height: 11in;
	--pagedjs-footnotes-height: 0mm;
	--pagedjs-margin-top: 1in;
	--pagedjs-margin-right: 1in;
	--pagedjs-margin-bottom: 1in;
	--pagedjs-margin-left: 1in;
	--pagedjs-padding-top: 0mm;
	--pagedjs-padding-right: 0mm;
	--pagedjs-padding-bottom: 0mm;
	--pagedjs-padding-left: 0mm;
	--pagedjs-border-top: 0mm;
	--pagedjs-border-right: 0mm;
	--pagedjs-border-bottom: 0mm;
	--pagedjs-border-left: 0mm;
	--pagedjs-bleed-top: 0mm;
	--pagedjs-bleed-right: 0mm;
	--pagedjs-bleed-bottom: 0mm;
	--pagedjs-bleed-left: 0mm;
	--pagedjs-bleed-right-top: 0mm;
	--pagedjs-bleed-right-right: 0mm;
	--pagedjs-bleed-right-bottom: 0mm;
	--pagedjs-bleed-right-left: 0mm;
	--pagedjs-bleed-left-top: 0mm;
	--pagedjs-bleed-left-right: 0mm;
	--pagedjs-bleed-left-bottom: 0mm;
	--pagedjs-bleed-left-left: 0mm;
	--pagedjs-crop-color: black;
	--pagedjs-crop-shadow: white;
	--pagedjs-crop-offset: 2mm;
	--pagedjs-crop-stroke: 1px;
	--pagedjs-cross-size: 5mm;
	--pagedjs-mark-cross-display: none;
	--pagedjs-mark-crop-display: none;
	--pagedjs-page-count: 0;
	--pagedjs-page-counter-increment: 1;
	--pagedjs-footnotes-count: 0;
	--pagedjs-column-gap-offset: 1000px;
}

@page {
	size: letter;
	margin: 0;
}

.pagedjs_sheet {
	box-sizing: border-box;
	width: var(--pagedjs-width);
	height: var(--pagedjs-height);
	overflow: hidden;
	position: relative;
	display: grid;
	grid-template-columns: [bleed-left] var(--pagedjs-bleed-left) [sheet-center] calc(var(--pagedjs-width) - var(--pagedjs-bleed-left) - var(--pagedjs-bleed-right)) [bleed-right] var(--pagedjs-bleed-right);
	grid-template-rows: [bleed-top] var(--pagedjs-bleed-top) [sheet-middle] calc(var(--pagedjs-height) - var(--pagedjs-bleed-top) - var(--pagedjs-bleed-bottom)) [bleed-bottom] var(--pagedjs-bleed-bottom);
}

.pagedjs_right_page .pagedjs_sheet {
	width: var(--pagedjs-width-right);
	height: var(--pagedjs-height-right);
	grid-template-columns: [bleed-left] var(--pagedjs-bleed-right-left) [sheet-center] calc(var(--pagedjs-width) - var(--pagedjs-bleed-right-left) - var(--pagedjs-bleed-right-right)) [bleed-right] var(--pagedjs-bleed-right-right);
	grid-template-rows: [bleed-top] var(--pagedjs-bleed-right-top) [sheet-middle] calc(var(--pagedjs-height) - var(--pagedjs-bleed-right-top) - var(--pagedjs-bleed-right-bottom)) [bleed-bottom] var(--pagedjs-bleed-right-bottom);
}

.pagedjs_left_page .pagedjs_sheet {
	width: var(--pagedjs-width-left);
	height: var(--pagedjs-height-left);
	grid-template-columns: [bleed-left] var(--pagedjs-bleed-left-left) [sheet-center] calc(var(--pagedjs-width) - var(--pagedjs-bleed-left-left) - var(--pagedjs-bleed-left-right)) [bleed-right] var(--pagedjs-bleed-left-right);
	grid-template-rows: [bleed-top] var(--pagedjs-bleed-left-top) [sheet-middle] calc(var(--pagedjs-height) - var(--pagedjs-bleed-left-top) - var(--pagedjs-bleed-left-bottom)) [bleed-bottom] var(--pagedjs-bleed-left-bottom);
}

.pagedjs_bleed {
	display: flex;
	align-items: center;
	justify-content: center;
	flex-wrap: nowrap;
	overflow: hidden;
}

.pagedjs_bleed-top {
	grid-column: bleed-left / -1;
	grid-row: bleed-top;
	flex-direction: row;
}

.pagedjs_bleed-bottom {
	grid-column: bleed-left / -1;
	grid-row: bleed-bottom;
	flex-direction: row;
}

.pagedjs_bleed-left {
	grid-column: bleed-left;
	grid-row: bleed-top / -1;
	flex-direction: column;
}

.pagedjs_bleed-right {
	grid-column: bleed-right;
	grid-row: bleed-top / -1;
	flex-direction: column;
}

.pagedjs_marks-crop {
	display: var(--pagedjs-mark-crop-display);
	flex-grow: 0;
	flex-shrink: 0;
	z-index: 9999999999;
}

.pagedjs_bleed-top .pagedjs_marks-crop:nth-child(1),
.pagedjs_bleed-bottom .pagedjs_marks-crop:nth-child(1) {
	width: calc(var(--pagedjs-bleed-left) - var(--pagedjs-crop-stroke));
	border-right: var(--pagedjs-crop-stroke) solid var(--pagedjs-crop-color);
	box-shadow: 1px 0px 0px 0px var(--pagedjs-crop-shadow);
}

.pagedjs_right_page .pagedjs_bleed-top .pagedjs_marks-crop:nth-child(1),
.pagedjs_right_page .pagedjs_bleed-bottom .pagedjs_marks-crop:nth-child(1) {
	width: calc(var(--pagedjs-bleed-right-left) - var(--pagedjs-crop-stroke));
}

.pagedjs_left_page .pagedjs_bleed-top .pagedjs_marks-crop:nth-child(1),
.pagedjs_left_page .pagedjs_bleed-bottom .pagedjs_marks-crop:nth-child(1) {
	width: calc(var(--pagedjs-bleed-left-left) - var(--pagedjs-crop-stroke));
}

.pagedjs_bleed-top .pagedjs_marks-crop:nth-child(3),
.pagedjs_bleed-bottom .pagedjs_marks-crop:nth-child(3) {
	width: calc(var(--pagedjs-bleed-right) - var(--pagedjs-crop-stroke));
	border-left: var(--pagedjs-crop-stroke) solid var(--pagedjs-crop-color);
	box-shadow: -1px 0px 0px 0px var(--pagedjs-crop-shadow);
}

.pagedjs_right_page .pagedjs_bleed-top .pagedjs_marks-crop:nth-child(3),
.pagedjs_right_page .pagedjs_bleed-bottom .pagedjs_marks-crop:nth-child(3) {
	width: calc(var(--pagedjs-bleed-right-right) - var(--pagedjs-crop-stroke));
}

.pagedjs_left_page .pagedjs_bleed-top .pagedjs_marks-crop:nth-child(3),
.pagedjs_left_page .pagedjs_bleed-bottom .pagedjs_marks-crop:nth-child(3) {
	width: calc(var(--pagedjs-bleed-left-right) - var(--pagedjs-crop-stroke));
}

.pagedjs_bleed-top .pagedjs_marks-crop {
	align-self: flex-start;
	height: calc(var(--pagedjs-bleed-top) - var(--pagedjs-crop-offset));
}

.pagedjs_right_page .pagedjs_bleed-top .pagedjs_marks-crop {
	height: calc(var(--pagedjs-bleed-right-top) - var(--pagedjs-crop-offset));
}

.pagedjs_left_page .pagedjs_bleed-top .pagedjs_marks-crop {
	height: calc(var(--pagedjs-bleed-left-top) - var(--pagedjs-crop-offset));
}

.pagedjs_bleed-bottom .pagedjs_marks-crop {
	align-self: flex-end;
	height: calc(var(--pagedjs-bleed-bottom) - var(--pagedjs-crop-offset));
}

.pagedjs_right_page .pagedjs_bleed-bottom .pagedjs_marks-crop {
	height: calc(var(--pagedjs-bleed-right-bottom) - var(--pagedjs-crop-offset));
}

.pagedjs_left_page .pagedjs_bleed-bottom .pagedjs_marks-crop {
	height: calc(var(--pagedjs-bleed-left-bottom) - var(--pagedjs-crop-offset));
}

.pagedjs_bleed-left .pagedjs_marks-crop:nth-child(1),
.pagedjs_bleed-right .pagedjs_marks-crop:nth-child(1) {
	height: calc(var(--pagedjs-bleed-top) - var(--pagedjs-crop-stroke));
	border-bottom: var(--pagedjs-crop-stroke) solid var(--pagedjs-crop-color);
	box-shadow: 0px 1px 0px 0px var(--pagedjs-crop-shadow);
}

.pagedjs_right_page .pagedjs_bleed-left .pagedjs_marks-crop:nth-child(1),
.pagedjs_right_page .pagedjs_bleed-right .pagedjs_marks-crop:nth-child(1) {
	height: calc(var(--pagedjs-bleed-right-top) - var(--pagedjs-crop-stroke));
}

.pagedjs_left_page .pagedjs_bleed-left .pagedjs_marks-crop:nth-child(1),
.pagedjs_left_page .pagedjs_bleed-right .pagedjs_marks-crop:nth-child(1) {
	height: calc(var(--pagedjs-bleed-left-top) - var(--pagedjs-crop-stroke));
}

.pagedjs_bleed-left .pagedjs_marks-crop:nth-child(3),
.pagedjs_bleed-right .pagedjs_marks-crop:nth-child(3) {
	height: calc(var(--pagedjs-bleed-bottom) - var(--pagedjs-crop-stroke));
	border-top: var(--pagedjs-crop-stroke) solid var(--pagedjs-crop-color);
	box-shadow: 0px -1px 0px 0px var(--pagedjs-crop-shadow);
}

.pagedjs_right_page .pagedjs_bleed-left .pagedjs_marks-crop:nth-child(3),
.pagedjs_right_page .pagedjs_bleed-right .pagedjs_marks-crop:nth-child(3) {
	height: calc(var(--pagedjs-bleed-right-bottom) - var(--pagedjs-crop-stroke));
}

.pagedjs_left_page .pagedjs_bleed-left .pagedjs_marks-crop:nth-child(3),
.pagedjs_left_page .pagedjs_bleed-right .pagedjs_marks-crop:nth-child(3) {
	height: calc(var(--pagedjs-bleed-left-bottom) - var(--pagedjs-crop-stroke));
}

.pagedjs_bleed-left .pagedjs_marks-crop {
	width: calc(var(--pagedjs-bleed-left) - var(--pagedjs-crop-offset));
	align-self: flex-start;
}

.pagedjs_right_page .pagedjs_bleed-left .pagedjs_marks-crop {
	width: calc(var(--pagedjs-bleed-right-left) - var(--pagedjs-crop-offset));
}

.pagedjs_left_page .pagedjs_bleed-left .pagedjs_marks-crop {
	width: calc(var(--pagedjs-bleed-left-left) - var(--pagedjs-crop-offset));
}

.pagedjs_bleed-right .pagedjs_marks-crop {
	width: calc(var(--pagedjs-bleed-right) - var(--pagedjs-crop-offset));
	align-self: flex-end;
}

.pagedjs_right_page .pagedjs_bleed-right .pagedjs_marks-crop {
	width: calc(var(--pagedjs-bleed-right-right) - var(--pagedjs-crop-offset));
}

.pagedjs_left_page .pagedjs_bleed-right .pagedjs_marks-crop {
	width: calc(var(--pagedjs-bleed-left-right) - var(--pagedjs-crop-offset));
}

.pagedjs_marks-middle {
	display: flex;
	flex-grow: 1;
	flex-shrink: 0;
	align-items: center;
	justify-content: center;
}

.pagedjs_marks-cross {
	display: var(--pagedjs-mark-cross-display);
	background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIzMi41MzdweCIgaGVpZ2h0PSIzMi41MzdweCIgdmlld0JveD0iMC4xMDQgMC4xMDQgMzIuNTM3IDMyLjUzNyIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwLjEwNCAwLjEwNCAzMi41MzcgMzIuNTM3IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNGRkZGRkYiIHN0cm9rZS13aWR0aD0iMy4zODkzIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0yOS45MzEsMTYuMzczYzAsNy40ODktNi4wNjgsMTMuNTYtMTMuNTU4LDEzLjU2Yy03LjQ4MywwLTEzLjU1Ny02LjA3Mi0xMy41NTctMTMuNTZjMC03LjQ4Niw2LjA3NC0xMy41NTQsMTMuNTU3LTEzLjU1NEMyMy44NjIsMi44MTksMjkuOTMxLDguODg3LDI5LjkzMSwxNi4zNzN6Ii8+PGxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjRkZGRkZGIiBzdHJva2Utd2lkdGg9IjMuMzg5MyIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiB4MT0iMC4xMDQiIHkxPSIxNi4zNzMiIHgyPSIzMi42NDIiIHkyPSIxNi4zNzMiLz48bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiNGRkZGRkYiIHN0cm9rZS13aWR0aD0iMy4zODkzIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHgxPSIxNi4zNzMiIHkxPSIwLjEwNCIgeDI9IjE2LjM3MyIgeTI9IjMyLjY0MiIvPjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0ZGRkZGRiIgc3Ryb2tlLXdpZHRoPSIzLjM4OTMiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTI0LjUwOCwxNi4zNzNjMCw0LjQ5Ni0zLjYzOCw4LjEzNS04LjEzNSw4LjEzNWMtNC40OTEsMC04LjEzNS0zLjYzOC04LjEzNS04LjEzNWMwLTQuNDg5LDMuNjQ0LTguMTM1LDguMTM1LTguMTM1QzIwLjg2OSw4LjIzOSwyNC41MDgsMTEuODg0LDI0LjUwOCwxNi4zNzN6Ii8+PHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjAuNjc3OCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMjkuOTMxLDE2LjM3M2MwLDcuNDg5LTYuMDY4LDEzLjU2LTEzLjU1OCwxMy41NmMtNy40ODMsMC0xMy41NTctNi4wNzItMTMuNTU3LTEzLjU2YzAtNy40ODYsNi4wNzQtMTMuNTU0LDEzLjU1Ny0xMy41NTRDMjMuODYyLDIuODE5LDI5LjkzMSw4Ljg4NywyOS45MzEsMTYuMzczeiIvPjxsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIwLjY3NzgiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgeDE9IjAuMTA0IiB5MT0iMTYuMzczIiB4Mj0iMzIuNjQyIiB5Mj0iMTYuMzczIi8+PGxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjAuNjc3OCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiB4MT0iMTYuMzczIiB5MT0iMC4xMDQiIHgyPSIxNi4zNzMiIHkyPSIzMi42NDIiLz48cGF0aCBkPSJNMjQuNTA4LDE2LjM3M2MwLDQuNDk2LTMuNjM4LDguMTM1LTguMTM1LDguMTM1Yy00LjQ5MSwwLTguMTM1LTMuNjM4LTguMTM1LTguMTM1YzAtNC40ODksMy42NDQtOC4xMzUsOC4xMzUtOC4xMzVDMjAuODY5LDguMjM5LDI0LjUwOCwxMS44ODQsMjQuNTA4LDE2LjM3MyIvPjxsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0ZGRkZGRiIgc3Ryb2tlLXdpZHRoPSIwLjY3NzgiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgeDE9IjguMjM5IiB5MT0iMTYuMzczIiB4Mj0iMjQuNTA4IiB5Mj0iMTYuMzczIi8+PGxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjRkZGRkZGIiBzdHJva2Utd2lkdGg9IjAuNjc3OCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiB4MT0iMTYuMzczIiB5MT0iOC4yMzkiIHgyPSIxNi4zNzMiIHkyPSIyNC41MDgiLz48L3N2Zz4=);
  background-repeat: no-repeat;
  background-position: 50% 50%;
  background-size: var(--pagedjs-cross-size);

  z-index: 2147483647;
	width: var(--pagedjs-cross-size);
	height: var(--pagedjs-cross-size);
}

.pagedjs_pagebox {
	box-sizing: border-box;
	width: var(--pagedjs-pagebox-width);
	height: var(--pagedjs-pagebox-height);
	position: relative;
	display: grid;
	grid-template-columns: [left] var(--pagedjs-margin-left) [center] calc(var(--pagedjs-pagebox-width) - var(--pagedjs-margin-left) - var(--pagedjs-margin-right)) [right] var(--pagedjs-margin-right);
	grid-template-rows: [header] var(--pagedjs-margin-top) [page] calc(var(--pagedjs-pagebox-height) - var(--pagedjs-margin-top) - var(--pagedjs-margin-bottom)) [footer] var(--pagedjs-margin-bottom);
	grid-column: sheet-center;
	grid-row: sheet-middle;
}

.pagedjs_pagebox * {
	box-sizing: border-box;
}

.pagedjs_margin-top {
	width: calc(var(--pagedjs-pagebox-width) - var(--pagedjs-margin-left) - var(--pagedjs-margin-right));
	height: var(--pagedjs-margin-top);
	grid-column: center;
	grid-row: header;
	flex-wrap: nowrap;
	display: grid;
	grid-template-columns: repeat(3, 1fr);
	grid-template-rows: 100%;
}

.pagedjs_margin-top-left-corner-holder {
	width: var(--pagedjs-margin-left);
	height: var(--pagedjs-margin-top);
	display: flex;
	grid-column: left;
	grid-row: header;
}

.pagedjs_margin-top-right-corner-holder {
	width: var(--pagedjs-margin-right);
	height: var(--pagedjs-margin-top);
	display: flex;
	grid-column: right;
	grid-row: header;
}

.pagedjs_margin-top-left-corner {
	width: var(--pagedjs-margin-left);
}

.pagedjs_margin-top-right-corner {
	width: var(--pagedjs-margin-right);
}

.pagedjs_margin-right {
	height: calc(var(--pagedjs-pagebox-height) - var(--pagedjs-margin-top) - var(--pagedjs-margin-bottom));
	width: var(--pagedjs-margin-right);
	right: 0;
	grid-column: right;
	grid-row: page;
	display: grid;
	grid-template-rows: repeat(3, 33.3333%);
	grid-template-columns: 100%;
}

.pagedjs_margin-bottom {
	width: calc(var(--pagedjs-pagebox-width) - var(--pagedjs-margin-left) - var(--pagedjs-margin-right));
	height: var(--pagedjs-margin-bottom);
	grid-column: center;
	grid-row: footer;
	display: grid;
	grid-template-columns: repeat(3, 1fr);
	grid-template-rows: 100%;
}

.pagedjs_margin-bottom-left-corner-holder {
	width: var(--pagedjs-margin-left);
	height: var(--pagedjs-margin-bottom);
	display: flex;
	grid-column: left;
	grid-row: footer;
}

.pagedjs_margin-bottom-right-corner-holder {
	width: var(--pagedjs-margin-right);
	height: var(--pagedjs-margin-bottom);
	display: flex;
	grid-column: right;
	grid-row: footer;
}

.pagedjs_margin-bottom-left-corner {
	width: var(--pagedjs-margin-left);
}

.pagedjs_margin-bottom-right-corner {
	width: var(--pagedjs-margin-right);
}



.pagedjs_margin-left {
	height: calc(var(--pagedjs-pagebox-height) - var(--pagedjs-margin-top) - var(--pagedjs-margin-bottom));
	width: var(--pagedjs-margin-left);
	grid-column: left;
	grid-row: page;
	display: grid;
	grid-template-rows: repeat(3, 33.33333%);
	grid-template-columns: 100%;
}

.pagedjs_pages .pagedjs_pagebox .pagedjs_margin:not(.hasContent) {
	visibility: hidden;
}

.pagedjs_pagebox > .pagedjs_area {
	grid-column: center;
	grid-row: page;
	width: 100%;
	height: 100%;
	padding: var(--pagedjs-padding-top) var(--pagedjs-padding-right) var(--pagedjs-padding-bottom) var(--pagedjs-padding-left);
	border-top: var(--pagedjs-border-top);
	border-right: var(--pagedjs-border-right);
	border-bottom: var(--pagedjs-border-bottom);
	border-left: var(--pagedjs-border-left);
}

.pagedjs_pagebox > .pagedjs_area > .pagedjs_page_content {
	width: 100%;
	height: calc(100% - var(--pagedjs-footnotes-height));
	position: relative;
	column-fill: auto;
}

.pagedjs_pagebox > .pagedjs_area > .pagedjs_page_content > div {
	height: inherit;
}

.pagedjs_pagebox > .pagedjs_area > .pagedjs_footnote_area {
	position: relative;
	overflow: hidden;
	height: var(--pagedjs-footnotes-height);
	display: flex;
    justify-content: flex-end;
    flex-flow: column;
}

.pagedjs_pagebox > .pagedjs_area > .pagedjs_footnote_area > .pagedjs_footnote_content {
	overflow: hidden;
}

.pagedjs_pagebox > .pagedjs_area > .pagedjs_footnote_area > .pagedjs_footnote_inner_content {
	overflow: hidden;
}

.pagedjs_area [data-footnote-call] {
	all: unset;
	counter-increment: footnote;
}

.pagedjs_area [data-split-from] {
	counter-increment: unset;
	counter-reset: unset;
}

[data-footnote-call]::after {
	vertical-align: super;
	font-size: 65%;
	line-height: normal;
	content: counter(footnote);
}

@supports ( font-variant-position: super ) {
	[data-footnote-call]::after {
		vertical-align: baseline;
		font-size: 100%;
		line-height: inherit;
		font-variant-position: super;
	}
}

.pagedjs_footnote_empty {
	display: none;
}

.pagedjs_area [data-split-from] {
	counter-increment: unset;
	counter-reset: unset;
}

[data-footnote-marker] {
	text-indent: 0;
	display: list-item;
	list-style-position: inside;
}

[data-footnote-marker][data-split-from] {
	list-style: none;
}

[data-footnote-marker]:not([data-split-from]) {
	counter-increment: footnote-marker;
}

[data-footnote-marker]::marker {
	content: counter(footnote-marker) ". ";
}

[data-footnote-marker][data-split-from]::marker {
	content: unset;
}

.pagedjs_area .pagedjs_footnote_inner_content [data-note-display="inline"] {
 	display: inline;
}

.pagedjs_page {
	counter-increment: page var(--pagedjs-page-counter-increment);
	width: var(--pagedjs-width);
	height: var(--pagedjs-height);
}

.pagedjs_page.pagedjs_right_page {
	width: var(--pagedjs-width-right);
	height: var(--pagedjs-height-right);
}

.pagedjs_page.pagedjs_left_page {
	width: var(--pagedjs-width-left);
	height: var(--pagedjs-height-left);
}

.pagedjs_pages {
	counter-reset: pages var(--pagedjs-page-count) footnote var(--pagedjs-footnotes-count) footnote-marker var(--pagedjs-footnotes-count);
}

.pagedjs_pagebox .pagedjs_margin-top-left-corner,
.pagedjs_pagebox .pagedjs_margin-top-right-corner,
.pagedjs_pagebox .pagedjs_margin-bottom-left-corner,
.pagedjs_pagebox .pagedjs_margin-bottom-right-corner,
.pagedjs_pagebox .pagedjs_margin-top-left,
.pagedjs_pagebox .pagedjs_margin-top-right,
.pagedjs_pagebox .pagedjs_margin-bottom-left,
.pagedjs_pagebox .pagedjs_margin-bottom-right,
.pagedjs_pagebox .pagedjs_margin-top-center,
.pagedjs_pagebox .pagedjs_margin-bottom-center,
.pagedjs_pagebox .pagedjs_margin-top-center,
.pagedjs_pagebox .pagedjs_margin-bottom-center,
.pagedjs_margin-right-middle,
.pagedjs_margin-left-middle  {
	display: flex;
	align-items: center;
}

.pagedjs_margin-right-top,
.pagedjs_margin-left-top  {
	display: flex;
	align-items: flex-top;
}


.pagedjs_margin-right-bottom,
.pagedjs_margin-left-bottom  {
	display: flex;
	align-items: flex-end;
}



/*
.pagedjs_pagebox .pagedjs_margin-top-center,
.pagedjs_pagebox .pagedjs_margin-bottom-center {
	height: 100%;
	display: none;
	align-items: center;
	flex: 1 0 33%;
	margin: 0 auto;
}

.pagedjs_pagebox .pagedjs_margin-top-left-corner,
.pagedjs_pagebox .pagedjs_margin-top-right-corner,
.pagedjs_pagebox .pagedjs_margin-bottom-right-corner,
.pagedjs_pagebox .pagedjs_margin-bottom-left-corner {
	display: none;
	align-items: center;
}

.pagedjs_pagebox .pagedjs_margin-left-top,
.pagedjs_pagebox .pagedjs_margin-right-top {
	display: none;
	align-items: flex-start;
}

.pagedjs_pagebox .pagedjs_margin-right-middle,
.pagedjs_pagebox .pagedjs_margin-left-middle {
	display: none;
	align-items: center;
}

.pagedjs_pagebox .pagedjs_margin-left-bottom,
.pagedjs_pagebox .pagedjs_margin-right-bottom {
	display: none;
	align-items: flex-end;
}
*/

.pagedjs_pagebox .pagedjs_margin-top-left,
.pagedjs_pagebox .pagedjs_margin-top-right-corner,
.pagedjs_pagebox .pagedjs_margin-bottom-left,
.pagedjs_pagebox .pagedjs_margin-bottom-right-corner { text-align: left; }

.pagedjs_pagebox .pagedjs_margin-top-left-corner,
.pagedjs_pagebox .pagedjs_margin-top-right,
.pagedjs_pagebox .pagedjs_margin-bottom-left-corner,
.pagedjs_pagebox .pagedjs_margin-bottom-right { text-align: right; }

.pagedjs_pagebox .pagedjs_margin-top-center,
.pagedjs_pagebox .pagedjs_margin-bottom-center,
.pagedjs_pagebox .pagedjs_margin-left-top,
.pagedjs_pagebox .pagedjs_margin-left-middle,
.pagedjs_pagebox .pagedjs_margin-left-bottom,
.pagedjs_pagebox .pagedjs_margin-right-top,
.pagedjs_pagebox .pagedjs_margin-right-middle,
.pagedjs_pagebox .pagedjs_margin-right-bottom { text-align: center; }

.pagedjs_pages .pagedjs_margin .pagedjs_margin-content {
	width: 100%;
}

.pagedjs_pages .pagedjs_margin-left .pagedjs_margin-content::after,
.pagedjs_pages .pagedjs_margin-top .pagedjs_margin-content::after,
.pagedjs_pages .pagedjs_margin-right .pagedjs_margin-content::after,
.pagedjs_pages .pagedjs_margin-bottom .pagedjs_margin-content::after {
	display: block;
}

.pagedjs_pages > .pagedjs_page > .pagedjs_sheet > .pagedjs_pagebox > .pagedjs_area > div [data-split-to] {
	margin-bottom: unset;
	padding-bottom: unset;
}

.pagedjs_pages > .pagedjs_page > .pagedjs_sheet > .pagedjs_pagebox > .pagedjs_area > div [data-split-from] {
	text-indent: unset;
	margin-top: unset;
	padding-top: unset;
	initial-letter: unset;
}

.pagedjs_pages > .pagedjs_page > .pagedjs_sheet > .pagedjs_pagebox > .pagedjs_area > div [data-split-from] > *::first-letter,
.pagedjs_pages > .pagedjs_page > .pagedjs_sheet > .pagedjs_pagebox > .pagedjs_area > div [data-split-from]::first-letter {
	color: unset;
	font-size: unset;
	font-weight: unset;
	font-family: unset;
	color: unset;
	line-height: unset;
	float: unset;
	padding: unset;
	margin: unset;
}

.pagedjs_pages > .pagedjs_page > .pagedjs_sheet > .pagedjs_pagebox > .pagedjs_area > div [data-split-to]:not([data-footnote-call]):after,
.pagedjs_pages > .pagedjs_page > .pagedjs_sheet > .pagedjs_pagebox > .pagedjs_area > div [data-split-to]:not([data-footnote-call])::after {
	content: unset;
}

.pagedjs_pages > .pagedjs_page > .pagedjs_sheet > .pagedjs_pagebox > .pagedjs_area > div [data-split-from]:not([data-footnote-call]):before,
.pagedjs_pages > .pagedjs_page > .pagedjs_sheet > .pagedjs_pagebox > .pagedjs_area > div [data-split-from]:not([data-footnote-call])::before {
	content: unset;
}

.pagedjs_pages > .pagedjs_page > .pagedjs_sheet > .pagedjs_pagebox > .pagedjs_area > div li[data-split-from]:first-of-type {
	list-style: none;
}

/*
[data-page]:not([data-split-from]),
[data-break-before="page"]:not([data-split-from]),
[data-break-before="always"]:not([data-split-from]),
[data-break-before="left"]:not([data-split-from]),
[data-break-before="right"]:not([data-split-from]),
[data-break-before="recto"]:not([data-split-from]),
[data-break-before="verso"]:not([data-split-from])
{
	break-before: column;
}

[data-page]:not([data-split-to]),
[data-break-after="page"]:not([data-split-to]),
[data-break-after="always"]:not([data-split-to]),
[data-break-after="left"]:not([data-split-to]),
[data-break-after="right"]:not([data-split-to]),
[data-break-after="recto"]:not([data-split-to]),
[data-break-after="verso"]:not([data-split-to])
{
	break-after: column;
}
*/

.pagedjs_clear-after::after {
	content: none !important;
}

[data-align-last-split-element='justify'] {
	text-align-last: justify;
}


@media print {
	html {
		width: 100%;
		height: 100%;
		-webkit-print-color-adjust: exact;
		print-color-adjust: exact;
	}
	body {
		margin: 0;
		padding: 0;
		width: 100% !important;
		height: 100% !important;
		min-width: 100%;
		max-width: 100%;
		min-height: 100%;
		max-height: 100%;
	}
	.pagedjs_pages {
		width: auto;
		display: block !important;
		transform: none !important;
		height: 100% !important;
		min-height: 100%;
		max-height: 100%;
		overflow: visible;
	}
	.pagedjs_page {
		margin: 0;
		padding: 0;
		max-height: 100%;
		min-height: 100%;
		height: 100% !important;
		page-break-after: always;
		break-after: page;
	}
	.pagedjs_sheet {
		margin: 0;
		padding: 0;
		max-height: 100%;
		min-height: 100%;
		height: 100% !important;
	}
}
`;async function Df(s,o={}){return new Promise(function(p,d){let f=new XMLHttpRequest;f.open(o.method||"get",s,!0);for(let a in o.headers)f.setRequestHeader(a,o.headers[a]);f.withCredentials=o.credentials==="include",f.onload=()=>{let a=f.status===0&&s.startsWith("file://")?200:f.status;p(new Response(f.responseText,{status:a}))},f.onerror=d,f.send(o.body||null)})}var $y=class{constructor(o){this.sheets=[],this.inserted=[],this.hooks={},this.hooks.onUrl=new At(this),this.hooks.onAtPage=new At(this),this.hooks.onAtMedia=new At(this),this.hooks.onRule=new At(this),this.hooks.onDeclaration=new At(this),this.hooks.onContent=new At(this),this.hooks.onSelector=new At(this),this.hooks.onPseudoSelector=new At(this),this.hooks.onImport=new At(this),this.hooks.beforeTreeParse=new At(this),this.hooks.beforeTreeWalk=new At(this),this.hooks.afterTreeWalk=new At(this),o!==!1&&this.setup()}setup(){return this.base=this.insert(JC),this.styleEl=document.createElement("style"),document.head.appendChild(this.styleEl),this.styleSheet=this.styleEl.sheet,this.styleSheet}async add(){let o=[],p=[];for(var d=0;d<arguments.length;d++){let f;if(typeof arguments[d]=="object")for(let a in arguments[d]){let T=arguments[d];f=new Promise(function(M,R){p.push(a),M(T[a])})}else p.push(arguments[d]),f=Df(arguments[d]).then(a=>a.text());o.push(f)}return await Promise.all(o).then(async f=>{let a="";for(let T=0;T<f.length;T++)a=await this.convertViaSheet(f[T],p[T]),this.insert(a);return a})}async convertViaSheet(o,p){let d=new KC(p,this.hooks);await d.parse(o);for(let f of d.imported){let a=await Df(f).then(M=>M.text()),T=await this.convertViaSheet(a,f);this.insert(T)}return this.sheets.push(d),typeof d.width!="undefined"&&(this.width=d.width),typeof d.height!="undefined"&&(this.height=d.height),typeof d.orientation!="undefined"&&(this.orientation=d.orientation),d.toString()}insert(o){let p=document.querySelector("head"),d=document.createElement("style");return d.setAttribute("data-pagedjs-inserted-styles","true"),d.appendChild(document.createTextNode(o)),p.appendChild(d),this.inserted.push(d),d}destroy(){this.styleEl.remove(),this.inserted.forEach(o=>{o.remove()}),this.sheets=[]}},Yy=$y;var QP=ki(wl(),1);var QC=ki(wl(),1),Of=class{constructor(o,p,d){let f=Object.assign({},o&&o.hooks,p&&p.hooks,d&&d.hooks);this.chunker=o,this.polisher=p,this.caller=d;for(let a in f)a in this&&f[a].register(this[a].bind(this))}};(0,QC.default)(Of.prototype);var si=Of;var kt=ki(En(),1);var Xy={A0:{width:{value:841,unit:"mm"},height:{value:1189,unit:"mm"}},A1:{width:{value:594,unit:"mm"},height:{value:841,unit:"mm"}},A2:{width:{value:420,unit:"mm"},height:{value:594,unit:"mm"}},A3:{width:{value:297,unit:"mm"},height:{value:420,unit:"mm"}},A4:{width:{value:210,unit:"mm"},height:{value:297,unit:"mm"}},A5:{width:{value:148,unit:"mm"},height:{value:210,unit:"mm"}},A6:{width:{value:105,unit:"mm"},height:{value:148,unit:"mm"}},A7:{width:{value:74,unit:"mm"},height:{value:105,unit:"mm"}},A8:{width:{value:52,unit:"mm"},height:{value:74,unit:"mm"}},A9:{width:{value:37,unit:"mm"},height:{value:52,unit:"mm"}},A10:{width:{value:26,unit:"mm"},height:{value:37,unit:"mm"}},B4:{width:{value:250,unit:"mm"},height:{value:353,unit:"mm"}},B5:{width:{value:176,unit:"mm"},height:{value:250,unit:"mm"}},letter:{width:{value:8.5,unit:"in"},height:{value:11,unit:"in"}},legal:{width:{value:8.5,unit:"in"},height:{value:14,unit:"in"}},ledger:{width:{value:11,unit:"in"},height:{value:17,unit:"in"}}};var Ky=class extends si{constructor(o,p,d){super(o,p,d),this.pages={},this.width=void 0,this.height=void 0,this.orientation=void 0,this.marginalia={}}pageModel(o){return{selector:o,name:void 0,psuedo:void 0,nth:void 0,marginalia:{},width:void 0,height:void 0,orientation:void 0,margin:{top:{},right:{},left:{},bottom:{}},padding:{top:{},right:{},left:{},bottom:{}},border:{top:{},right:{},left:{},bottom:{}},backgroundOrigin:void 0,block:{},marks:void 0,notes:void 0,added:!1}}onAtPage(o,p,d){let f,a,T="",M,R,V,K=!1;o.prelude?(M=this.getTypeSelector(o),R=this.getPsuedoSelector(o),V=this.getNthSelector(o),T=kt.default.generate(o.prelude)):T="*",T in this.pages?(f=this.pages[T],a=this.replaceMarginalia(o),K=!0,f.added=!1):(f=this.pageModel(T),a=this.replaceMarginalia(o),this.pages[T]=f),f.name=M,f.psuedo=R,f.nth=V,K?f.marginalia=Object.assign(f.marginalia,a):f.marginalia=a;let ne=this.replaceNotes(o);f.notes=ne;let G=this.replaceDeclarations(o);if(G.size&&(f.size=G.size,f.width=G.size.width,f.height=G.size.height,f.orientation=G.size.orientation,f.format=G.size.format),G.bleed&&G.bleed[0]!="auto")switch(G.bleed.length){case 4:f.bleed={top:G.bleed[0],right:G.bleed[1],bottom:G.bleed[2],left:G.bleed[3]};break;case 3:f.bleed={top:G.bleed[0],right:G.bleed[1],bottom:G.bleed[2],left:G.bleed[1]};break;case 2:f.bleed={top:G.bleed[0],right:G.bleed[1],bottom:G.bleed[0],left:G.bleed[1]};break;default:f.bleed={top:G.bleed[0],right:G.bleed[0],bottom:G.bleed[0],left:G.bleed[0]}}G.marks&&((!G.bleed||G.bleed&&G.bleed[0]==="auto")&&(f.bleed={top:{value:6,unit:"mm"},right:{value:6,unit:"mm"},bottom:{value:6,unit:"mm"},left:{value:6,unit:"mm"}}),f.marks=G.marks),G.margin&&(f.margin=G.margin),G.padding&&(f.padding=G.padding),G.border&&(f.border=G.border),G.marks&&(f.marks=G.marks),K?f.block.children.appendList(o.block.children):f.block=o.block,d.remove(p)}afterTreeWalk(o,p){let d="*"in this.pages&&this.pages["*"].added===!1;if(this.addPageClasses(this.pages,o,p),d){let f=this.pages["*"].width,a=this.pages["*"].height,T=this.pages["*"].format,M=this.pages["*"].orientation,R=this.pages["*"].bleed,V=this.pages["*"].marks,K,ne;":left"in this.pages&&(K=this.pages[":left"].bleed),":right"in this.pages&&(ne=this.pages[":right"].bleed),f&&a&&(this.width!==f||this.height!==a)&&(this.width=f,this.height=a,this.format=T,this.orientation=M,this.addRootVars(o,f,a,M,R,ne,K,V),this.addRootPage(o,this.pages["*"].size,R,ne,K),this.emit("size",{width:f,height:a,orientation:M,format:T,bleed:R}),this.emit("atpages",this.pages))}}getTypeSelector(o){let p;return kt.default.walk(o,{visit:"TypeSelector",enter:(d,f,a)=>{p=d.name}}),p}getPsuedoSelector(o){let p;return kt.default.walk(o,{visit:"PseudoClassSelector",enter:(d,f,a)=>{d.name!=="nth"&&(p=d.name)}}),p}getNthSelector(o){let p;return kt.default.walk(o,{visit:"PseudoClassSelector",enter:(d,f,a)=>{d.name==="nth"&&d.children&&(p=d.children.first().value)}}),p}replaceMarginalia(o){let p={},d=["top-left-corner","top-left","top","top-center","top-right","top-right-corner","bottom-left-corner","bottom-left","bottom","bottom-center","bottom-right","bottom-right-corner","left-top","left-middle","left","left-bottom","top-right-corner","right-top","right-middle","right","right-bottom","right-right-corner"];return kt.default.walk(o.block,{visit:"Atrule",enter:(f,a,T)=>{let M=f.name;d.includes(M)&&(M==="top"&&(M="top-center"),M==="right"&&(M="right-middle"),M==="left"&&(M="left-middle"),M==="bottom"&&(M="bottom-center"),p[M]=f.block,T.remove(a))}}),p}replaceNotes(o){let p={};return kt.default.walk(o.block,{visit:"Atrule",enter:(d,f,a)=>{let T=d.name;T==="footnote"&&(p[T]=d.block,a.remove(f))}}),p}replaceDeclarations(o){let p={};return kt.default.walk(o.block,{visit:"Declaration",enter:(d,f,a)=>{let T=kt.default.property(d.property).name;if(T==="marks")p.marks=[],kt.default.walk(d,{visit:"Identifier",enter:M=>{p.marks.push(M.name)}}),a.remove(f);else if(T==="margin")p.margin=this.getMargins(d),a.remove(f);else if(T.indexOf("margin-")===0){let M=T.substring(7);p.margin||(p.margin={top:{},right:{},left:{},bottom:{}}),p.margin[M]=d.value.children.first(),a.remove(f)}else if(T==="padding")p.padding=this.getPaddings(d.value),a.remove(f);else if(T.indexOf("padding-")===0){let M=T.substring(8);p.padding||(p.padding={top:{},right:{},left:{},bottom:{}}),p.padding[M]=d.value.children.first(),a.remove(f)}else if(T==="border")p.border||(p.border={top:{},right:{},left:{},bottom:{}}),p.border.top=kt.default.generate(d.value),p.border.right=kt.default.generate(d.value),p.border.left=kt.default.generate(d.value),p.border.bottom=kt.default.generate(d.value),a.remove(f);else if(T.indexOf("border-")===0){p.border||(p.border={top:{},right:{},left:{},bottom:{}});let M=T.substring(7);p.border[M]=kt.default.generate(d.value),a.remove(f)}else T==="size"?(p.size=this.getSize(d),a.remove(f)):T==="bleed"&&(p.bleed=[],kt.default.walk(d,{enter:M=>{switch(M.type){case"String":M.value.indexOf("auto")>-1&&p.bleed.push("auto");break;case"Dimension":p.bleed.push({value:M.value,unit:M.unit});break;case"Number":p.bleed.push({value:M.value,unit:"px"});break;default:}}}),a.remove(f))}}),p}getSize(o){let p,d,f,a;return kt.default.walk(o,{visit:"Dimension",enter:(T,M,R)=>{let{value:V,unit:K}=T;typeof p=="undefined"?p={value:V,unit:K}:typeof d=="undefined"&&(d={value:V,unit:K})}}),kt.default.walk(o,{visit:"String",enter:(T,M,R)=>{let V=T.value.replace(/["|']/g,""),K=Xy[V];K&&(p=K.width,d=K.height)}}),kt.default.walk(o,{visit:"Identifier",enter:(T,M,R)=>{let V=T.name;if(V==="landscape"||V==="portrait")f=T.name;else if(V!=="auto"){let K=Xy[V];K&&(p=K.width,d=K.height),a=V}}}),{width:p,height:d,orientation:f,format:a}}getMargins(o){let p=[],d={top:{},right:{},left:{},bottom:{}};if(kt.default.walk(o,{enter:f=>{switch(f.type){case"Dimension":p.push(f);break;case"Number":p.push({value:f.value,unit:"px"});break;default:}}}),p.length===1)for(let f in d)d[f]=p[0];else p.length===2?(d.top=p[0],d.right=p[1],d.bottom=p[0],d.left=p[1]):p.length===3?(d.top=p[0],d.right=p[1],d.bottom=p[2],d.left=p[1]):p.length===4&&(d.top=p[0],d.right=p[1],d.bottom=p[2],d.left=p[3]);return d}getPaddings(o){let p=[],d={top:{},right:{},left:{},bottom:{}};if(kt.default.walk(o,{enter:f=>{switch(f.type){case"Dimension":p.push(f);break;case"Number":p.push({value:f.value,unit:"px"});break;default:}}}),p.length===1)for(let f in d)d[f]=p[0];else p.length===2?(d.top=p[0],d.right=p[1],d.bottom=p[0],d.left=p[1]):p.length===3?(d.top=p[0],d.right=p[1],d.bottom=p[2],d.left=p[1]):p.length===4&&(d.top=p[0],d.right=p[1],d.bottom=p[2],d.left=p[3]);return d}getBorders(o){let p={top:{},right:{},left:{},bottom:{}};return o.prop=="border"?(p.top=kt.default.generate(o.value),p.right=kt.default.generate(o.value),p.bottom=kt.default.generate(o.value),p.left=kt.default.generate(o.value)):o.prop=="border-top"?p.top=kt.default.generate(o.value):o.prop=="border-right"?p.right=kt.default.generate(o.value):o.prop=="border-bottom"?p.bottom=kt.default.generate(o.value):o.prop=="border-left"&&(p.left=kt.default.generate(o.value)),p}addPageClasses(o,p,d){if("*"in o&&o["*"].added===!1){let f=this.createPage(o["*"],p.children,d);d.insertRule(f),o["*"].added=!0}if(":left"in o&&o[":left"].added===!1){let f=this.createPage(o[":left"],p.children,d);d.insertRule(f),o[":left"].added=!0}if(":right"in o&&o[":right"].added===!1){let f=this.createPage(o[":right"],p.children,d);d.insertRule(f),o[":right"].added=!0}if(":first"in o&&o[":first"].added===!1){let f=this.createPage(o[":first"],p.children,d);d.insertRule(f),o[":first"].added=!0}if(":blank"in o&&o[":blank"].added===!1){let f=this.createPage(o[":blank"],p.children,d);d.insertRule(f),o[":blank"].added=!0}for(let f in o)if(o[f].nth&&o[f].added===!1){let a=this.createPage(o[f],p.children,d);d.insertRule(a),o[f].added=!0}for(let f in o)if(o[f].name&&o[f].added===!1){let a=this.createPage(o[f],p.children,d);d.insertRule(a),o[f].added=!0}}createPage(o,p,d){let f=this.selectorsForPage(o),a=o.block.children.copy(),T={type:"Block",loc:0,children:a},M=this.createRule(f,T);return this.addMarginVars(o.margin,a,a.first()),this.addPaddingVars(o.padding,a,a.first()),this.addBorderVars(o.border,a,a.first()),o.width&&this.addDimensions(o.width,o.height,o.orientation,a,a.first()),o.marginalia&&(this.addMarginaliaStyles(o,p,M,d),this.addMarginaliaContent(o,p,M,d)),o.notes&&this.addNotesStyles(o.notes,o,p,M,d),M}addMarginVars(o,p,d){for(let f in o)if(typeof o[f].value!="undefined"){let a=o[f].value+(o[f].unit||""),T=p.createItem({type:"Declaration",property:"--pagedjs-margin-"+f,value:{type:"Raw",value:a}});p.append(T,d)}}addPaddingVars(o,p,d){for(let f in o)if(typeof o[f].value!="undefined"){let a=o[f].value+(o[f].unit||""),T=p.createItem({type:"Declaration",property:"--pagedjs-padding-"+f,value:{type:"Raw",value:a}});p.append(T,d)}}addBorderVars(o,p,d){for(let f of Object.keys(o)){let a=o[f];if(typeof a=="string"){let T=p.createItem({type:"Declaration",property:"--pagedjs-border-"+f,value:{type:"Raw",value:a}});p.append(T,d)}}}addDimensions(o,p,d,f,a){let T,M;T=St(o),M=St(p),d&&d!=="portrait"&&([T,M]=[M,T]);let R=this.createVariable("--pagedjs-pagebox-width",T);f.appendData(R);let V=this.createVariable("--pagedjs-pagebox-height",M);f.appendData(V)}addMarginaliaStyles(o,p,d,f){for(let a in o.marginalia){let T=kt.default.clone(o.marginalia[a]),M=!1;if(T.children.isEmpty())continue;kt.default.walk(T,{visit:"Declaration",enter:(ne,G,ie)=>{if(ne.property==="content"&&(ne.value.children&&ne.value.children.first().name==="none"?M=!1:M=!0,ie.remove(G)),ne.property==="vertical-align"&&(kt.default.walk(ne,{visit:"Identifier",enter:(Y,Se,je)=>{let _e=Y.name;_e==="top"?Y.name="flex-start":_e==="middle"?Y.name="center":_e==="bottom"&&(Y.name="flex-end")}}),ne.property="align-items"),ne.property==="width"&&(a==="top-left"||a==="top-center"||a==="top-right"||a==="bottom-left"||a==="bottom-center"||a==="bottom-right")){let Y=kt.default.clone(ne);Y.property="max-width",ie.appendData(Y)}if(ne.property==="height"&&(a==="left-top"||a==="left-middle"||a==="left-bottom"||a==="right-top"||a==="right-middle"||a==="right-bottom")){let Y=kt.default.clone(ne);Y.property="max-height",ie.appendData(Y)}}});let R=this.selectorsForPageMargin(o,a),V=this.createRule(R,T);p.appendData(V);let K=kt.default.generate({type:"Selector",children:R});this.marginalia[K]={page:o,selector:K,block:o.marginalia[a],hasContent:M}}}addMarginaliaContent(o,p,d,f){let a;for(let T in o.marginalia){let M=kt.default.clone(o.marginalia[T]);if(kt.default.walk(M,{visit:"Declaration",enter:(ie,Y,Se)=>{ie.property!=="content"&&Se.remove(Y),ie.value.children&&ie.value.children.first().name==="none"&&(a=!0)}}),M.children.isEmpty())continue;let R=this.selectorsForPageMargin(o,T),V;R.insertData({type:"Combinator",name:">"}),R.insertData({type:"ClassSelector",name:"pagedjs_margin-content"}),R.insertData({type:"Combinator",name:">"}),R.insertData({type:"TypeSelector",name:"*"}),a?V=this.createDeclaration("display","none"):V=this.createDeclaration("display","block");let K=this.createRule(R,[V]);f.insertRule(K);let ne=this.selectorsForPageMargin(o,T);ne.insertData({type:"Combinator",name:">"}),ne.insertData({type:"ClassSelector",name:"pagedjs_margin-content"}),ne.insertData({type:"PseudoElementSelector",name:"after",children:null});let G=this.createRule(ne,M);f.insertRule(G)}}addRootVars(o,p,d,f,a,T,M,R){let V=[],K=new kt.default.List;K.insertData({type:"PseudoClassSelector",name:"root",children:null});let ne,G,ie,Y,Se,je;if(!a)ne=St(p),G=St(d),ie=St(p),Y=St(d),Se=St(p),je=St(d);else{ne=`calc( ${St(p)} + ${St(a.left)} + ${St(a.right)} )`,G=`calc( ${St(d)} + ${St(a.top)} + ${St(a.bottom)} )`,ie=`calc( ${St(p)} + ${St(a.left)} + ${St(a.right)} )`,Y=`calc( ${St(d)} + ${St(a.top)} + ${St(a.bottom)} )`,Se=`calc( ${St(p)} + ${St(a.left)} + ${St(a.right)} )`,je=`calc( ${St(d)} + ${St(a.top)} + ${St(a.bottom)} )`;let Ht=this.createVariable("--pagedjs-bleed-top",St(a.top)),Tt=this.createVariable("--pagedjs-bleed-right",St(a.right)),Et=this.createVariable("--pagedjs-bleed-bottom",St(a.bottom)),oi=this.createVariable("--pagedjs-bleed-left",St(a.left)),ni=this.createVariable("--pagedjs-bleed-right-top",St(a.top)),di=this.createVariable("--pagedjs-bleed-right-right",St(a.right)),ai=this.createVariable("--pagedjs-bleed-right-bottom",St(a.bottom)),Ct=this.createVariable("--pagedjs-bleed-right-left",St(a.left)),dt=this.createVariable("--pagedjs-bleed-left-top",St(a.top)),qt=this.createVariable("--pagedjs-bleed-left-right",St(a.right)),bt=this.createVariable("--pagedjs-bleed-left-bottom",St(a.bottom)),Qt=this.createVariable("--pagedjs-bleed-left-left",St(a.left));T&&(ni=this.createVariable("--pagedjs-bleed-right-top",St(T.top)),di=this.createVariable("--pagedjs-bleed-right-right",St(T.right)),ai=this.createVariable("--pagedjs-bleed-right-bottom",St(T.bottom)),Ct=this.createVariable("--pagedjs-bleed-right-left",St(T.left)),ie=`calc( ${St(p)} + ${St(T.left)} + ${St(T.right)} )`,Y=`calc( ${St(d)} + ${St(T.top)} + ${St(T.bottom)} )`),M&&(dt=this.createVariable("--pagedjs-bleed-left-top",St(M.top)),qt=this.createVariable("--pagedjs-bleed-left-right",St(M.right)),bt=this.createVariable("--pagedjs-bleed-left-bottom",St(M.bottom)),Qt=this.createVariable("--pagedjs-bleed-left-left",St(M.left)),Se=`calc( ${St(p)} + ${St(M.left)} + ${St(M.right)} )`,je=`calc( ${St(d)} + ${St(M.top)} + ${St(M.bottom)} )`);let Pi=this.createVariable("--pagedjs-width",St(p)),xi=this.createVariable("--pagedjs-height",St(d));V.push(Ht,Tt,Et,oi,ni,di,ai,Ct,dt,qt,bt,Qt,Pi,xi)}if(R&&R.forEach(Ht=>{let Tt=this.createVariable("--pagedjs-mark-"+Ht+"-display","block");V.push(Tt)}),f){let Ht=this.createVariable("--pagedjs-orientation",f);V.push(Ht),f!=="portrait"&&([ne,G]=[G,ne],[ie,Y]=[Y,ie],[Se,je]=[je,Se])}let _e=this.createVariable("--pagedjs-width",ne),Pe=this.createVariable("--pagedjs-height",G),Ye=this.createVariable("--pagedjs-width-right",ie),st=this.createVariable("--pagedjs-height-right",Y),Pt=this.createVariable("--pagedjs-width-left",Se),_t=this.createVariable("--pagedjs-height-left",je);V.push(_e,Pe,Ye,st,Pt,_t);let Ut=this.createRule(K,V);o.children.appendData(Ut)}addNotesStyles(o,p,d,f,a){for(let T in o){let M=this.selectorsForPage(p);M.insertData({type:"Combinator",name:" "}),M.insertData({type:"ClassSelector",name:"pagedjs_"+T+"_content"});let R=this.createRule(M,o[T]);d.appendData(R)}}addRootPage(o,p,d,f,a){let{width:T,height:M,orientation:R,format:V}=p,K=new kt.default.List,ne=new kt.default.List,G=new kt.default.List,ie=new kt.default.List,Y=new kt.default.List,Se=new kt.default.List;if(d){let _e=new kt.default.List,Pe=new kt.default.List;_e.appendData({type:"Dimension",unit:T.unit,value:T.value}),_e.appendData({type:"WhiteSpace",value:" "}),_e.appendData({type:"Operator",value:"+"}),_e.appendData({type:"WhiteSpace",value:" "}),_e.appendData({type:"Dimension",unit:d.left.unit,value:d.left.value}),_e.appendData({type:"WhiteSpace",value:" "}),_e.appendData({type:"Operator",value:"+"}),_e.appendData({type:"WhiteSpace",value:" "}),_e.appendData({type:"Dimension",unit:d.right.unit,value:d.right.value}),Pe.appendData({type:"Dimension",unit:M.unit,value:M.value}),Pe.appendData({type:"WhiteSpace",value:" "}),Pe.appendData({type:"Operator",value:"+"}),Pe.appendData({type:"WhiteSpace",value:" "}),Pe.appendData({type:"Dimension",unit:d.top.unit,value:d.top.value}),Pe.appendData({type:"WhiteSpace",value:" "}),Pe.appendData({type:"Operator",value:"+"}),Pe.appendData({type:"WhiteSpace",value:" "}),Pe.appendData({type:"Dimension",unit:d.bottom.unit,value:d.bottom.value}),ie.appendData({type:"Function",name:"calc",children:_e}),ie.appendData({type:"WhiteSpace",value:" "}),ie.appendData({type:"Function",name:"calc",children:Pe})}else V?(ie.appendData({type:"Identifier",name:V}),R&&(ie.appendData({type:"WhiteSpace",value:" "}),ie.appendData({type:"Identifier",name:R}))):(ie.appendData({type:"Dimension",unit:T.unit,value:T.value}),ie.appendData({type:"WhiteSpace",value:" "}),ie.appendData({type:"Dimension",unit:M.unit,value:M.value}));K.appendData({type:"Declaration",property:"size",loc:null,value:{type:"Value",children:ie}}),K.appendData({type:"Declaration",property:"margin",loc:null,value:{type:"Value",children:[{type:"Dimension",unit:"px",value:0}]}}),K.appendData({type:"Declaration",property:"padding",loc:null,value:{type:"Value",children:[{type:"Dimension",unit:"px",value:0}]}}),K.appendData({type:"Declaration",property:"padding",loc:null,value:{type:"Value",children:[{type:"Dimension",unit:"px",value:0}]}});let je=o.children.createItem({type:"Atrule",prelude:null,name:"page",block:{type:"Block",loc:null,children:K}});if(o.children.append(je),a){let _e=new kt.default.List,Pe=new kt.default.List;_e.appendData({type:"Dimension",unit:T.unit,value:T.value}),_e.appendData({type:"WhiteSpace",value:" "}),_e.appendData({type:"Operator",value:"+"}),_e.appendData({type:"WhiteSpace",value:" "}),_e.appendData({type:"Dimension",unit:a.left.unit,value:a.left.value}),_e.appendData({type:"WhiteSpace",value:" "}),_e.appendData({type:"Operator",value:"+"}),_e.appendData({type:"WhiteSpace",value:" "}),_e.appendData({type:"Dimension",unit:a.right.unit,value:a.right.value}),Pe.appendData({type:"Dimension",unit:M.unit,value:M.value}),Pe.appendData({type:"WhiteSpace",value:" "}),Pe.appendData({type:"Operator",value:"+"}),Pe.appendData({type:"WhiteSpace",value:" "}),Pe.appendData({type:"Dimension",unit:a.top.unit,value:a.top.value}),Pe.appendData({type:"WhiteSpace",value:" "}),Pe.appendData({type:"Operator",value:"+"}),Pe.appendData({type:"WhiteSpace",value:" "}),Pe.appendData({type:"Dimension",unit:a.bottom.unit,value:a.bottom.value}),Y.appendData({type:"Function",name:"calc",children:_e}),Y.appendData({type:"WhiteSpace",value:" "}),Y.appendData({type:"Function",name:"calc",children:Pe}),ne.appendData({type:"Declaration",property:"size",loc:null,value:{type:"Value",children:Y}});let Ye=o.children.createItem({type:"Atrule",prelude:null,name:"page :left",block:{type:"Block",loc:null,children:ne}});o.children.append(Ye)}if(f){let _e=new kt.default.List,Pe=new kt.default.List;_e.appendData({type:"Dimension",unit:T.unit,value:T.value}),_e.appendData({type:"WhiteSpace",value:" "}),_e.appendData({type:"Operator",value:"+"}),_e.appendData({type:"WhiteSpace",value:" "}),_e.appendData({type:"Dimension",unit:f.left.unit,value:f.left.value}),_e.appendData({type:"WhiteSpace",value:" "}),_e.appendData({type:"Operator",value:"+"}),_e.appendData({type:"WhiteSpace",value:" "}),_e.appendData({type:"Dimension",unit:f.right.unit,value:f.right.value}),Pe.appendData({type:"Dimension",unit:M.unit,value:M.value}),Pe.appendData({type:"WhiteSpace",value:" "}),Pe.appendData({type:"Operator",value:"+"}),Pe.appendData({type:"WhiteSpace",value:" "}),Pe.appendData({type:"Dimension",unit:f.top.unit,value:f.top.value}),Pe.appendData({type:"WhiteSpace",value:" "}),Pe.appendData({type:"Operator",value:"+"}),Pe.appendData({type:"WhiteSpace",value:" "}),Pe.appendData({type:"Dimension",unit:f.bottom.unit,value:f.bottom.value}),Se.appendData({type:"Function",name:"calc",children:_e}),Se.appendData({type:"WhiteSpace",value:" "}),Se.appendData({type:"Function",name:"calc",children:Pe}),G.appendData({type:"Declaration",property:"size",loc:null,value:{type:"Value",children:Se}});let Ye=o.children.createItem({type:"Atrule",prelude:null,name:"page :right",block:{type:"Block",loc:null,children:G}});o.children.append(Ye)}}getNth(o){let p=o.indexOf("n"),d=o.indexOf("+"),f=o.split("n"),a=o.split("+"),T=null,M=null;return p>-1?(T=f[0],d>-1&&(M=a[1])):M=o,{type:"Nth",loc:null,selector:null,nth:{type:"AnPlusB",loc:null,a:T,b:M}}}addPageAttributes(o,p,d){let f=[p.dataset.page];if(f&&f.length)for(let a of f)a&&(o.name=a,o.element.classList.add("pagedjs_named_page"),o.element.classList.add("pagedjs_"+a+"_page"),p.dataset.splitFrom||o.element.classList.add("pagedjs_"+a+"_first_page"))}getStartElement(o,p){let d=p&&p.node;if(!o&&!p)return;if(!d)return o.children[0];if(d.nodeType===1&&d.parentNode.nodeType===11||d.nodeType===1&&d.dataset.page)return d;let f=Ep(d),a=f.querySelectorAll("[data-page]");return a.length?a[a.length-1]:f.children[0]}beforePageLayout(o,p,d,f){let a=this.getStartElement(p,d);a&&this.addPageAttributes(o,a,f.pages)}finalizePage(o,p,d,f){for(let a in this.marginalia){let T=this.marginalia[a],M=a.split(" "),R;p.element.matches(M[0])&&T.hasContent&&(R=p.element.querySelector(M[1]),R.classList.add("hasContent"))}["top","bottom"].forEach(a=>{let T=p.element.querySelector(".pagedjs_margin-"+a),M=p.element.querySelector(".pagedjs_margin-"+a+"-center"),R=p.element.querySelector(".pagedjs_margin-"+a+"-left"),V=p.element.querySelector(".pagedjs_margin-"+a+"-right"),K=M.classList.contains("hasContent"),ne=R.classList.contains("hasContent"),G=V.classList.contains("hasContent"),ie,Y,Se;if(ne&&(Y=window.getComputedStyle(R)["max-width"]),G&&(Se=window.getComputedStyle(V)["max-width"]),K)if(ie=window.getComputedStyle(M)["max-width"],ie==="none"||ie==="auto")if(!ne&&!G)T.style["grid-template-columns"]="0 1fr 0";else if(ne)if(G)if(Y!=="none"&&Y!=="auto")Se!=="none"&&Se!=="auto"?T.style["grid-template-columns"]=Y+" 1fr "+Se:T.style["grid-template-columns"]=Y+" 1fr "+Y;else if(Se!=="none"&&Se!=="auto")T.style["grid-template-columns"]=Se+" 1fr "+Se;else{T.style["grid-template-columns"]="auto auto 1fr",R.style["white-space"]="nowrap",M.style["white-space"]="nowrap",V.style["white-space"]="nowrap";let je=R.offsetWidth,_e=M.offsetWidth,Pe=V.offsetWidth,Ye=je+_e+Pe,st=_e*100/Ye;st>40?T.style["grid-template-columns"]="minmax(16.66%, 1fr) minmax(33%, "+st+"%) minmax(16.66%, 1fr)":T.style["grid-template-columns"]="repeat(3, 1fr)",R.style["white-space"]="normal",M.style["white-space"]="normal",V.style["white-space"]="normal"}else if(Y!=="none"&&Y!=="auto")T.style["grid-template-columns"]=Y+" 1fr "+Y;else{T.style["grid-template-columns"]="auto auto 1fr",R.style["white-space"]="nowrap",M.style["white-space"]="nowrap";let je=R.offsetWidth,_e=M.offsetWidth,Pe=je+_e,Ye=_e*100/Pe;T.style["grid-template-columns"]="minmax(16.66%, 1fr) minmax(33%, "+Ye+"%) minmax(16.66%, 1fr)",R.style["white-space"]="normal",M.style["white-space"]="normal"}else if(Se!=="none"&&Se!=="auto")T.style["grid-template-columns"]=Se+" 1fr "+Se;else{T.style["grid-template-columns"]="auto auto 1fr",V.style["white-space"]="nowrap",M.style["white-space"]="nowrap";let je=V.offsetWidth,_e=M.offsetWidth,Pe=je+_e,Ye=_e*100/Pe;T.style["grid-template-columns"]="minmax(16.66%, 1fr) minmax(33%, "+Ye+"%) minmax(16.66%, 1fr)",V.style["white-space"]="normal",M.style["white-space"]="normal"}else ie!=="none"&&ie!=="auto"&&(ne&&Y!=="none"&&Y!=="auto"?T.style["grid-template-columns"]=Y+" "+ie+" 1fr":G&&Se!=="none"&&Se!=="auto"?T.style["grid-template-columns"]="1fr "+ie+" "+Se:T.style["grid-template-columns"]="1fr "+ie+" 1fr");else if(ne)if(!G)T.style["grid-template-columns"]="1fr 0 0";else if(Y!=="none"&&Y!=="auto")Se!=="none"&&Se!=="auto"?T.style["grid-template-columns"]=Y+" 1fr "+Se:T.style["grid-template-columns"]=Y+" 0 1fr";else if(Se!=="none"&&Se!=="auto")T.style["grid-template-columns"]="1fr 0 "+Se;else{T.style["grid-template-columns"]="auto 1fr auto",R.style["white-space"]="nowrap",V.style["white-space"]="nowrap";let je=R.offsetWidth,_e=V.offsetWidth,Pe=je+_e,Ye=je*100/Pe;T.style["grid-template-columns"]="minmax(16.66%, "+Ye+"%) 0 1fr",R.style["white-space"]="normal",V.style["white-space"]="normal"}else Se!=="none"&&Se!=="auto"?T.style["grid-template-columns"]="1fr 0 "+Se:T.style["grid-template-columns"]="0 0 1fr"}),["left","right"].forEach(a=>{let T=p.element.querySelector(".pagedjs_margin-"+a+"-middle.hasContent"),M=p.element.querySelector(".pagedjs_margin-"+a),R=p.element.querySelector(".pagedjs_margin-"+a+"-top"),V=p.element.querySelector(".pagedjs_margin-"+a+"-bottom"),K=R.classList.contains("hasContent"),ne=V.classList.contains("hasContent"),G,ie,Y;K&&(ie=window.getComputedStyle(R)["max-height"]),ne&&(Y=window.getComputedStyle(V)["max-height"]),T?(G=window.getComputedStyle(T)["max-height"],G==="none"||G==="auto"?!K&&!ne?M.style["grid-template-rows"]="0 1fr 0":K?ne?ie!=="none"&&ie!=="auto"?Y!=="none"&&Y!=="auto"?M.style["grid-template-rows"]=ie+" calc(100% - "+ie+" - "+Y+") "+Y:M.style["grid-template-rows"]=ie+" calc(100% - "+ie+"*2) "+ie:Y!=="none"&&Y!=="auto"&&(M.style["grid-template-rows"]=Y+" calc(100% - "+Y+"*2) "+Y):ie!=="none"&&ie!=="auto"&&(M.style["grid-template-rows"]=ie+" calc(100% - "+ie+"*2) "+ie):Y!=="none"&&Y!=="auto"&&(M.style["grid-template-rows"]=Y+" calc(100% - "+Y+"*2) "+Y):K&&ie!=="none"&&ie!=="auto"?M.style["grid-template-rows"]=ie+" "+G+" calc(100% - ("+ie+" + "+G+"))":ne&&Y!=="none"&&Y!=="auto"?M.style["grid-template-rows"]="1fr "+G+" "+Y:M.style["grid-template-rows"]="calc((100% - "+G+")/2) "+G+" calc((100% - "+G+")/2)"):K?ne?ie!=="none"&&ie!=="auto"?Y!=="none"&&Y!=="auto"?M.style["grid-template-rows"]=ie+" 1fr "+Y:M.style["grid-template-rows"]=ie+" 0 1fr":Y!=="none"&&Y!=="auto"?M.style["grid-template-rows"]="1fr 0 "+Y:M.style["grid-template-rows"]="1fr 0 1fr":M.style["grid-template-rows"]="1fr 0 0":Y!=="none"&&Y!=="auto"?M.style["grid-template-rows"]="1fr 0 "+Y:M.style["grid-template-rows"]="0 0 1fr"})}selectorsForPage(o){let p,d,f=new kt.default.List;return f.insertData({type:"ClassSelector",name:"pagedjs_page"}),o.name&&(f.insertData({type:"ClassSelector",name:"pagedjs_named_page"}),f.insertData({type:"ClassSelector",name:"pagedjs_"+o.name+"_page"})),o.psuedo&&!(o.name&&o.psuedo==="first")&&f.insertData({type:"ClassSelector",name:"pagedjs_"+o.psuedo+"_page"}),o.name&&o.psuedo==="first"&&f.insertData({type:"ClassSelector",name:"pagedjs_"+o.name+"_"+o.psuedo+"_page"}),o.nth&&(p=new kt.default.List,d=this.getNth(o.nth),p.insertData(d),f.insertData({type:"PseudoClassSelector",name:"nth-of-type",children:p})),f}selectorsForPageMargin(o,p){let d=this.selectorsForPage(o);return d.insertData({type:"Combinator",name:" "}),d.insertData({type:"ClassSelector",name:"pagedjs_margin-"+p}),d}createDeclaration(o,p,d){let f=new kt.default.List;return f.insertData({type:"Identifier",loc:null,name:p}),{type:"Declaration",loc:null,important:d,property:o,value:{type:"Value",loc:null,children:f}}}createVariable(o,p){return{type:"Declaration",loc:null,property:o,value:{type:"Raw",value:p}}}createCalculatedDimension(o,p,d,f="+"){let a=new kt.default.List,T=new kt.default.List;return p.forEach((M,R)=>{T.appendData({type:"Dimension",unit:M.unit,value:M.value}),T.appendData({type:"WhiteSpace",value:" "}),R+1<p.length&&(T.appendData({type:"Operator",value:f}),T.appendData({type:"WhiteSpace",value:" "}))}),a.insertData({type:"Function",loc:null,name:"calc",children:T}),{type:"Declaration",loc:null,important:d,property:o,value:{type:"Value",loc:null,children:a}}}createDimension(o,p,d){let f=new kt.default.List;return f.insertData({type:"Dimension",loc:null,value:p.value,unit:p.unit}),{type:"Declaration",loc:null,important:d,property:o,value:{type:"Value",loc:null,children:f}}}createBlock(o){let p=new kt.default.List;return o.forEach(d=>{p.insertData(d)}),{type:"Block",loc:null,children:p}}createRule(o,p){let d=new kt.default.List;return d.insertData({type:"Selector",children:o}),Array.isArray(p)&&(p=this.createBlock(p)),{type:"Rule",prelude:{type:"SelectorList",children:d},block:p}}},ek=Ky;var Jy=ki(En(),1);var Qy=class extends si{constructor(o,p,d){super(o,p,d),this.breaks={}}onDeclaration(o,p,d,f){let a=o.property;if(a==="page"){let M=o.value.children.first().name,R=Jy.default.generate(f.ruleNode.prelude),K={property:a,value:M,selector:R,name:M};R.split(",").forEach(ne=>{this.breaks[ne]?this.breaks[ne].push(K):this.breaks[ne]=[K]}),d.remove(p)}if(a==="break-before"||a==="break-after"||a==="page-break-before"||a==="page-break-after"){let M=o.value.children.first().name,R=Jy.default.generate(f.ruleNode.prelude);a==="page-break-before"?a="break-before":a==="page-break-after"&&(a="break-after");let V={property:a,value:M,selector:R};R.split(",").forEach(K=>{this.breaks[K]?this.breaks[K].push(V):this.breaks[K]=[V]}),d.remove(p)}}afterParsed(o){this.processBreaks(o,this.breaks)}processBreaks(o,p){for(let f in p){let a=o.querySelectorAll(f);for(var d=0;d<a.length;d++)for(let T of p[f])if(T.property==="break-after"){let M=ng(a[d],o);a[d].setAttribute("data-break-after",T.value),M&&M.setAttribute("data-previous-break-after",T.value)}else if(T.property==="break-before"){let M=sx(a[d],o);if(M){if(T.value==="page"&&Mp(a[d],M))continue;a[d].setAttribute("data-break-before",T.value),M.setAttribute("data-next-break-before",T.value)}}else if(T.property==="page"){a[d].setAttribute("data-page",T.value);let M=ng(a[d],o);M&&M.setAttribute("data-after-page",T.value)}else a[d].setAttribute("data-"+T.property,T.value)}}mergeBreaks(o,p){for(let d in p)d in o?o[d]=o[d].concat(p[d]):o[d]=p[d];return o}addBreakAttributes(o,p){let d=o.querySelector("[data-break-before]"),f=o.querySelector("[data-break-after]"),a=o.querySelector("[data-previous-break-after]");d&&(d.dataset.splitFrom?(p.splitFrom=d.dataset.splitFrom,o.setAttribute("data-split-from",d.dataset.splitFrom)):d.dataset.breakBefore&&d.dataset.breakBefore!=="avoid"&&(p.breakBefore=d.dataset.breakBefore,o.setAttribute("data-break-before",d.dataset.breakBefore))),f&&f.dataset&&(f.dataset.splitTo?(p.splitTo=f.dataset.splitTo,o.setAttribute("data-split-to",f.dataset.splitTo)):f.dataset.breakAfter&&f.dataset.breakAfter!=="avoid"&&(p.breakAfter=f.dataset.breakAfter,o.setAttribute("data-break-after",f.dataset.breakAfter))),a&&a.dataset&&a.dataset.previousBreakAfter&&a.dataset.previousBreakAfter!=="avoid"&&(p.previousBreakAfter=a.dataset.previousBreakAfter)}afterPageLayout(o,p){this.addBreakAttributes(o,p)}},tk=Qy;var ik=ki(En(),1),e_=class extends si{constructor(o,p,d){super(o,p,d)}onAtMedia(o,p,d){let f=this.getMediaName(o),a;f.includes("print")?(a=o.block.children,d.appendList(a),d.remove(p)):!f.includes("all")&&!f.includes("pagedjs-ignore")&&d.remove(p)}getMediaName(o){let p=[];if(!(typeof o.prelude=="undefined"||o.prelude.type!=="AtrulePrelude"))return ik.default.walk(o.prelude,{visit:"Identifier",enter:(d,f,a)=>{p.push(d.name)}}),p}},rk=e_;var t_=class extends si{constructor(o,p,d){super(o,p,d)}afterPageLayout(o,p,d,f){let a=Array.from(o.querySelectorAll("[data-split-from]")),T=o.parentNode,M=Array.prototype.indexOf.call(T.children,o),R;if(M===0)return;R=T.children[M-1];let V;a.forEach(K=>{let ne=K.dataset.ref;V=R.querySelector("[data-ref='"+ne+"']:not([data-split-to])"),V&&(V.dataset.splitTo=ne,V.dataset.splitFrom||(V.dataset.splitOriginal=!0))}),V&&this.handleAlignment(V)}handleAlignment(o){let p=window.getComputedStyle(o),d=p["text-align"],f=p["text-align-last"];o.dataset.lastSplitElement="true",d==="justify"&&f==="auto"?o.dataset.alignLastSplitElement="justify":o.dataset.alignLastSplitElement=f}},nk=t_;var Rf=ki(En(),1),i_=class extends si{constructor(o,p,d){super(o,p,d),this.styleSheet=p.styleSheet,this.counters={},this.resetCountersMap=new Map}onDeclaration(o,p,d,f){let a=o.property;if(a==="counter-increment"){this.handleIncrement(o,f);let T=!1;o.value.children.forEach(M=>{M.type&&M.type!=="WhiteSpace"&&(T=!0)}),T||d.remove(p)}else if(a==="counter-reset"){this.handleReset(o,f);let T=!1;o.value.children.forEach(M=>{M.type&&M.type!=="WhiteSpace"&&(T=!0)}),T||d.remove(p)}}afterParsed(o){this.processCounters(o,this.counters),this.scopeCounters(this.counters)}addCounter(o){return o in this.counters?this.counters[o]:(this.counters[o]={name:o,increments:{},resets:{}},this.counters[o])}handleIncrement(o,p){let d=[],f=o.value.children;return f.forEach((a,T)=>{if(a.type&&a.type==="Identifier"){let M=a.name;if(M==="page"||M.indexOf("target-counter-")===0)return;let R,V,K;T.next&&T.next.data.type==="WhiteSpace"&&(R=T.next),R&&R.next&&R.next.data.type==="Number"&&(V=R.next,K=parseInt(V.data.value));let ne=Rf.default.generate(p.ruleNode.prelude),G;M in this.counters?G=this.counters[M]:G=this.addCounter(M);let ie={selector:ne,number:K||1};G.increments[ne]=ie,d.push(ie),f.remove(T),R&&f.remove(R),V&&f.remove(V)}}),d}handleReset(o,p){let d=o.value.children;d.forEach((f,a)=>{if(f.type&&f.type==="Identifier"){let T=f.name,M,R,V;a.next&&a.next.data.type==="WhiteSpace"&&(M=a.next),M&&M.next&&(M.next.data.type==="Number"?(R=M.next,V=parseInt(R.data.value)):M.next.data.type==="Function"&&M.next.data.name==="var"&&(R=M.next,V=M.next.data.children.head.data.name));let K,ne,G=p.ruleNode.prelude;p.ruleNode.type==="Atrule"&&p.ruleNode.name==="page"?ne=".pagedjs_page":ne=Rf.default.generate(G||p.ruleNode),T==="footnote"&&this.addFootnoteMarkerCounter(o.value.children),T in this.counters?K=this.counters[T]:K=this.addCounter(T);let ie={selector:ne,number:V||0};K.resets[ne]=ie,ne!==".pagedjs_page"&&(d.remove(a),M&&d.remove(M),R&&d.remove(R))}})}processCounters(o,p){let d;for(let f in p)d=this.counters[f],this.processCounterIncrements(o,d),this.processCounterResets(o,d),f!=="page"&&this.addCounterValues(o,d)}scopeCounters(o){let p=[];for(let d in o)d!=="page"&&p.push(`${o[d].name} 0`);this.insertRule(`.pagedjs_pages { counter-reset: ${p.join(" ")} page 0 pages var(--pagedjs-page-count) footnote var(--pagedjs-footnotes-count) footnote-marker var(--pagedjs-footnotes-count)}`)}insertRule(o){this.styleSheet.insertRule(o,this.styleSheet.cssRules.length)}processCounterIncrements(o,p){let d;for(let f in p.increments){d=p.increments[f];let a=o.querySelectorAll(d.selector);for(let T=0;T<a.length;T++)a[T].setAttribute("data-counter-"+p.name+"-increment",d.number),a[T].getAttribute("data-counter-increment")?a[T].setAttribute("data-counter-increment",a[T].getAttribute("data-counter-increment")+" "+p.name):a[T].setAttribute("data-counter-increment",p.name)}}processCounterResets(o,p){let d;for(let a in p.resets){d=p.resets[a];let T=o.querySelectorAll(d.selector);for(var f=0;f<T.length;f++){let M=d.number;typeof M=="string"&&M.startsWith("--")&&(M=T[f].style.getPropertyValue(M)||0),T[f].setAttribute("data-counter-"+p.name+"-reset",M),T[f].getAttribute("data-counter-reset")?T[f].setAttribute("data-counter-reset",T[f].getAttribute("data-counter-reset")+" "+p.name):T[f].setAttribute("data-counter-reset",p.name)}}}addCounterValues(o,p){let d=p.name;if(d==="page"||d==="footnote")return;let f=o.querySelectorAll("[data-counter-"+d+"-reset], [data-counter-"+d+"-increment]"),a=0,T,M,R,V,K,ne,G;for(let ie=0;ie<f.length;ie++)T=f[ie],ne=0,G=[],T.hasAttribute("data-counter-"+d+"-reset")&&(R=T.getAttribute("data-counter-"+d+"-reset"),V=parseInt(R),ne=V-a,G.push(`${d} ${ne}`),a=V),T.hasAttribute("data-counter-"+d+"-increment")&&(M=T.getAttribute("data-counter-"+d+"-increment"),K=parseInt(M),a+=K,T.setAttribute("data-counter-"+d+"-value",a),G.push(`${d} ${K}`)),G.length>0&&this.incrementCounterForElement(T,G)}addFootnoteMarkerCounter(o){let p=[];Rf.default.walk(o,{visit:"Identifier",enter:(d,f,a)=>{p.push(d.name)}}),!p.includes("footnote-maker")&&(o.insertData({type:"WhiteSpace",value:" "}),o.insertData({type:"Identifier",name:"footnote-marker"}),o.insertData({type:"WhiteSpace",value:" "}),o.insertData({type:"Number",value:0}))}incrementCounterForElement(o,p){if(!o||!p||p.length===0)return;let d=o.dataset.ref,f=Array.from(this.styleSheet.cssRules).filter(T=>T.selectorText===`[data-ref="${o.dataset.ref}"]:not([data-split-from])`&&T.style[0]==="counter-increment").map(T=>T.style.counterIncrement);f.push(this.mergeIncrements(p,(T,M)=>(parseInt(T)||0)+(parseInt(M)||0)));let a=this.mergeIncrements(f,(T,M)=>M);this.insertRule(`[data-ref="${d}"]:not([data-split-from]) { counter-increment: ${a} }`)}mergeIncrements(o,p){let d={};return o.forEach(f=>{let a=f.split(" ");for(let T=0;T<a.length;T+=2)d[a[T]]=p(d[a[T]],a[T+1])}),Object.entries(d).map(([f,a])=>`${f} ${a}`).join(" ")}afterPageLayout(o,p){let d=[];o.querySelectorAll("[data-counter-page-reset]:not([data-split-from])").forEach(T=>{let M=T.dataset&&T.dataset.ref;if(!(M&&this.resetCountersMap.has(M))){M&&this.resetCountersMap.set(M,"");let R=T.dataset.counterPageReset;d.push(`page ${R}`)}}),o.querySelectorAll("[data-counter-footnote-reset]:not([data-split-from])").forEach(T=>{let M=T.dataset.counterFootnoteReset;d.push(`footnote ${M}`),d.push(`footnote-marker ${M}`)}),d.length&&this.styleSheet.insertRule(`[data-page-number="${o.dataset.pageNumber}"] { counter-increment: none; counter-reset: ${d.join(" ")} }`,this.styleSheet.cssRules.length)}},ak=i_;var r_=class extends si{constructor(o,p,d){super(o,p,d)}afterParsed(o){let p=o.querySelectorAll("ol");for(var d of p)this.addDataNumbers(d)}afterPageLayout(o,p,d,f){var a=o.getElementsByTagName("ol");for(var T of a)T.firstElementChild&&(T.start=T.firstElementChild.dataset.itemNum)}addDataNumbers(o){let p=1;o.hasAttribute("start")&&(p=parseInt(o.getAttribute("start"),10),isNaN(p)&&(p=1));let d=o.children;for(var f=0;f<d.length;f++)d[f].setAttribute("data-item-num",f+p)}},sk=r_;var ok=ki(En(),1),n_=class extends si{constructor(o,p,d){super(o,p,d),this.styleSheet=p.styleSheet,this.fixedElementsSelector=[],this.fixedElements=[]}onDeclaration(o,p,d,f){if(o.property==="position"&&o.value.children.first().name==="fixed"){let a=ok.default.generate(f.ruleNode.prelude);this.fixedElementsSelector.push(a),d.remove(p)}}afterParsed(o){this.fixedElementsSelector.forEach(p=>{o.querySelectorAll(`${p}`).forEach(d=>{d.style.setProperty("position","absolute"),this.fixedElements.push(d),d.remove()})})}afterPageLayout(o,p,d){this.fixedElements.forEach(f=>{let a=f.cloneNode(!0);o.querySelector(".pagedjs_pagebox").insertAdjacentElement("afterbegin",a)})}},lk=n_;var ck=ki(En(),1),a_=class extends si{constructor(o,p,d){super(o,p,d),this.styleSheet=p.styleSheet,this.pageCounter={name:"page",increments:{},resets:{}}}onDeclaration(o,p,d,f){o.property==="counter-increment"&&this.handleIncrement(o,f)&&d.remove(p)}afterParsed(o){for(let p in this.pageCounter.increments){let d=this.pageCounter.increments[p];this.insertRule(`${d.selector} { --pagedjs-page-counter-increment: ${d.number} }`)}}handleIncrement(o,p){let d=o.value.children.first(),f=o.value.children.getSize()>1?o.value.children.last().value:1,a=d&&d.name;if(a&&a.indexOf("target-counter-")===0||a!=="page"||p.ruleNode.name==="page"&&p.ruleNode.type==="Atrule")return;let T=ck.default.generate(p.ruleNode.prelude);return this.pageCounter.increments[T]={selector:T,number:f}}insertRule(o){this.styleSheet.insertRule(o,this.styleSheet.cssRules.length)}},uk=a_;var s_=ki(En(),1);var o_=class extends si{constructor(o,p,d){super(o,p,d),this.styleSheet=p.styleSheet,this.selectors={}}onRule(o,p,d){let f=s_.default.generate(o.prelude);if(f.match(/:(first|last|nth)-of-type/)){let a=s_.default.generate(o.block);a=a.replace(/[{}]/g,"");let T="nth-of-type-"+Nn();f.split(",").forEach(M=>{this.selectors[M]?this.selectors[M][1]=`${this.selectors[M][1]};${a}`:this.selectors[M]=[T,a]}),d.remove(p)}}afterParsed(o){this.processSelectors(o,this.selectors)}processSelectors(o,p){for(let f in p){let a=o.querySelectorAll(f);for(var d=0;d<a.length;d++){let M=a[d].getAttribute("data-nth-of-type");M&&M!=""?(M=`${M},${p[f][0]}`,a[d].setAttribute("data-nth-of-type",M)):a[d].setAttribute("data-nth-of-type",p[f][0])}let T=`*[data-nth-of-type*='${p[f][0]}'] { ${p[f][1]}; }`;this.styleSheet.insertRule(T,this.styleSheet.cssRules.length)}}},dk=o_;var l_=ki(En(),1);var c_=class extends si{constructor(o,p,d){super(o,p,d),this.styleSheet=p.styleSheet,this.selectors={}}onRule(o,p,d){let f=l_.default.generate(o.prelude);if(f.match(/\+/)){let a=l_.default.generate(o.block);a=a.replace(/[{}]/g,"");let T="following-"+Nn();f.split(",").forEach(M=>{this.selectors[M]?this.selectors[M][1]=`${this.selectors[M][1]};${a}`:this.selectors[M]=[T,a]}),d.remove(p)}}afterParsed(o){this.processSelectors(o,this.selectors)}processSelectors(o,p){for(let f in p){let a=o.querySelectorAll(f);for(var d=0;d<a.length;d++){let M=a[d].getAttribute("data-following");M&&M!=""?(M=`${M},${p[f][0]}`,a[d].setAttribute("data-following",M)):a[d].setAttribute("data-following",p[f][0])}let T=`*[data-following*='${p[f][0]}'] { ${p[f][1]}; }`;this.styleSheet.insertRule(T,this.styleSheet.cssRules.length)}}},hk=c_;var Uu=ki(En(),1),u_=class extends si{constructor(o,p,d){super(o,p,d),this.footnotes={},this.needsLayout=[]}onDeclaration(o,p,d,f){let a=o.property;if(a==="float"){let T=o.value.children&&o.value.children.first();if((T&&T.name)==="footnote"){let R=Uu.default.generate(f.ruleNode.prelude);this.footnotes[R]={selector:R,policy:"auto",display:"block"},d.remove(p)}}if(a==="footnote-policy"){let T=o.value.children&&o.value.children.first(),M=T&&T.name;if(M){let R=Uu.default.generate(f.ruleNode.prelude),V=this.footnotes[R];V&&(V.policy=M)}}if(a==="footnote-display"){let T=o.value.children&&o.value.children.first(),M=T&&T.name,R=Uu.default.generate(f.ruleNode.prelude);if(M&&this.footnotes[R]){let V=this.footnotes[R];V&&(V.display=M)}}}onPseudoSelector(o,p,d,f,a){let T=o.name;if(T==="footnote-marker"){let M=a.ruleNode.prelude,R=new Uu.default.List;M.children.first().children.each(V=>{V.type!=="PseudoElementSelector"&&R.appendData(V)}),R.appendData({type:"AttributeSelector",name:{type:"Identifier",name:"data-footnote-marker"},flags:null,loc:null,matcher:null,value:null}),R.appendData({type:"PseudoElementSelector",name:"marker",loc:null,children:null}),M.children.first().children=R}if(T==="footnote-call"){let M=a.ruleNode.prelude,R=new Uu.default.List;M.children.first().children.each(V=>{V.type!=="PseudoElementSelector"&&R.appendData(V)}),R.appendData({type:"AttributeSelector",name:{type:"Identifier",name:"data-footnote-call"},flags:null,loc:null,matcher:null,value:null}),R.appendData({type:"PseudoElementSelector",name:"after",loc:null,children:null}),M.children.first().children=R}}afterParsed(o){this.processFootnotes(o,this.footnotes)}processFootnotes(o,p){for(let f in p){let a=o.querySelectorAll(f),T,M=p[f];for(var d=0;d<a.length;d++)T=a[d],T.setAttribute("data-note","footnote"),T.setAttribute("data-break-before","avoid"),T.setAttribute("data-note-policy",M.policy||"auto"),T.setAttribute("data-note-display",M.display||"block"),this.processFootnoteContainer(T)}}processFootnoteContainer(o){let p=o.parentElement,d=p;for(;p;){if(zp(p)){d.setAttribute("data-has-notes","true");break}d=p,p=p.parentElement,p||d.setAttribute("data-has-notes","true")}}renderNode(o){if(o.nodeType==1){let p;if(!o.dataset)return;o.dataset.note==="footnote"?p=[o]:(o.dataset.hasNotes||o.querySelectorAll("[data-note='footnote']"))&&(p=o.querySelectorAll("[data-note='footnote']")),p&&p.length&&this.findVisibleFootnotes(p,o)}}findVisibleFootnotes(o,p){let d,f,a;d=p.closest(".pagedjs_page_content"),f=d.getBoundingClientRect(),a=f.left+f.width;for(let T=0;T<o.length;++T){let M=o[T];M.getBoundingClientRect().left<a&&this.moveFootnote(M,p.closest(".pagedjs_area"),!0)}}moveFootnote(o,p,d){let f=p.querySelector(".pagedjs_footnote_area"),a=f.querySelector(".pagedjs_footnote_content"),T=a.querySelector(".pagedjs_footnote_inner_content");if(!an(o))return;let M;if(d&&(M=this.createFootnoteCall(o)),o.removeAttribute("data-break-before"),T.querySelector(`[data-ref="${o.dataset.ref}"]`)){o.remove();return}T.appendChild(o),a.classList.contains("pagedjs_footnote_empty")&&a.classList.remove("pagedjs_footnote_empty"),o.dataset.footnoteMarker=o.dataset.ref,o.id=`note-${o.dataset.ref}`;let V=a.scrollHeight,ne=p.querySelector(".pagedjs_page_content").getBoundingClientRect(),G=ne.left+ne.width,ie=M&&M.getBoundingClientRect(),Y=f.getBoundingClientRect(),Se=this.marginsHeight(a),je=this.paddingHeight(a),_e=this.borderHeight(a),Pe=Se+je+_e,Ye=Math.floor(Y.top);Y.height===0&&(Ye-=this.marginsHeight(a,!1),Ye-=this.paddingHeight(a,!1),Ye-=this.borderHeight(a,!1));let st=o.dataset.notePolicy,Pt=0,_t=0;if(M){let oi=M.previousSibling,ni=new Range;oi?ni.setStartBefore(oi):ni.setStartBefore(M),ni.setEndAfter(M);let di=ni.getBoundingClientRect();if(Pt=di.bottom,!st||st==="auto")_t=Math.ceil(di.bottom);else if(st==="line")_t=Math.ceil(di.top);else if(st==="block"){let ai=M.closest("p").previousElementSibling;ai?_t=Math.ceil(ai.getBoundingClientRect().bottom):_t=Math.ceil(di.bottom)}}let Ut=V+Pe-Y.height,Ht=Pt?Ye-Pt:0,Tt=Pt?Math.floor(Y.top)-_t:0,Et=f.querySelector("[data-note='footnote']");if(d&&ie.left>G)o.remove();else if(!Et&&d&&Pe>Ht){p.style.setProperty("--pagedjs-footnotes-height","0px");let oi=document.createElement("div");oi.appendChild(o),this.needsLayout.push(oi)}else d?Pt<Y.top-Ut?p.style.setProperty("--pagedjs-footnotes-height",`${V+Se+_e}px`):(p.style.setProperty("--pagedjs-footnotes-height",`${Y.height+Tt}px`),T.style.height=Y.height+Tt-Pe+"px"):p.style.setProperty("--pagedjs-footnotes-height",`${V+Pe}px`)}createFootnoteCall(o){let p=o.parentElement,d=document.createElement("a");for(let f of o.classList)d.classList.add(`${f}`);return d.dataset.footnoteCall=o.dataset.ref,d.dataset.ref=o.dataset.ref,d.dataset.dataCounterFootnoteIncrement=1,d.href=`#note-${o.dataset.ref}`,p.insertBefore(d,o),d}afterPageLayout(o,p,d,f){let a=o.querySelector(".pagedjs_area"),T=p.footnotesArea,M=T.querySelector(".pagedjs_footnote_content"),R=T.querySelector(".pagedjs_footnote_inner_content"),V=M.getBoundingClientRect(),{width:K}=V;R.style.columnWidth=Math.round(K)+"px",R.style.columnGap="calc(var(--pagedjs-margin-right) + var(--pagedjs-margin-left))";let G=new Vp(T,void 0,f.settings).findOverflow(R,V);if(G){let{startContainer:ie,startOffset:Y}=G,Se;if(an(ie)){let _t=ie.childNodes[Y];Se=an(_t)&&_t.hasAttribute("data-footnote-marker")}let je=G.extractContents();if(!Se){let _t=je.firstElementChild;_t.dataset.splitFrom=_t.dataset.ref,this.handleAlignment(R.lastElementChild)}this.needsLayout.push(je),M.style.removeProperty("height"),R.style.removeProperty("height");let _e=R.getBoundingClientRect(),{height:Pe}=_e,Ye=this.marginsHeight(M),st=this.paddingHeight(M),Pt=this.borderHeight(M);if(a.style.setProperty("--pagedjs-footnotes-height",`${Pe+Ye+Pt+st}px`),R.childNodes.length===0&&M.classList.add("pagedjs_footnote_empty"),!d)f.clonePage(p);else{let _t,Ut;d.node&&typeof d.node.dataset!="undefined"&&typeof d.node.dataset.previousBreakAfter!="undefined"&&(Ut=d.node.dataset.previousBreakAfter),d.node&&typeof d.node.dataset!="undefined"&&typeof d.node.dataset.breakBefore!="undefined"&&(_t=d.node.dataset.breakBefore),(_t||Ut)&&f.clonePage(p)}}R.style.height="auto"}handleAlignment(o){let d=window.getComputedStyle(o)["text-align-last"];o.dataset.lastSplitElement="true",d==="auto"?o.dataset.alignLastSplitElement="justify":o.dataset.alignLastSplitElement=d}beforePageLayout(o){for(;this.needsLayout.length;){let p=this.needsLayout.shift();Array.from(p.childNodes).forEach(d=>{this.moveFootnote(d,o.element.querySelector(".pagedjs_area"),!1)})}}afterOverflowRemoved(o,p){let d=p.closest(".pagedjs_area"),f=d.querySelectorAll(".pagedjs_footnote_area [data-note='footnote']");for(let T=0;T<f.length;T++){let M=f[T];o.querySelector(`[data-footnote-call="${M.dataset.ref}"]`)&&M.remove()}let a=d.querySelector(".pagedjs_footnote_inner_content");a&&a.childNodes.length===0&&a.parentElement.classList.add("pagedjs_footnote_empty")}marginsHeight(o,p=!0){let d=window.getComputedStyle(o),f=parseInt(d.marginTop),a=parseInt(d.marginBottom),T=0;return f&&(T+=f),a&&p&&(T+=a),T}paddingHeight(o,p=!0){let d=window.getComputedStyle(o),f=parseInt(d.paddingTop),a=parseInt(d.paddingBottom),T=0;return f&&(T+=f),a&&p&&(T+=a),T}borderHeight(o,p=!0){let d=window.getComputedStyle(o),f=parseInt(d.borderTop),a=parseInt(d.borderBottom),T=0;return f&&(T+=f),a&&p&&(T+=a),T}},pk=u_;var fk=[rk,ek,tk,nk,ak,sk,lk,uk,dk,hk,pk];var wh=ki(En(),1),d_=class extends si{constructor(o,p,d){super(o,p,d),this.runningSelectors={},this.elements={}}onDeclaration(o,p,d,f){if(o.property==="position"){let a=wh.default.generate(f.ruleNode.prelude),T=o.value.children.first().name;if(T==="running"){let M;wh.default.walk(o,{visit:"Function",enter:(R,V,K)=>{M=R.children.first().name}}),this.runningSelectors[M]={identifier:T,value:M,selector:a}}}o.property==="content"&&wh.default.walk(o,{visit:"Function",enter:(a,T,M)=>{if(a.name.indexOf("element")>-1){let R=wh.default.generate(f.ruleNode.prelude),V=a.name,K=a.children.first().name,ne=[K],G="first";R.split(",").forEach(ie=>{ie=ie.replace(/::after|::before/,""),this.elements[ie]={func:V,args:ne,value:K,style:G||"first",selector:ie,fullSelector:R}})}}})}afterParsed(o){for(let p of Object.keys(this.runningSelectors)){let d=this.runningSelectors[p],f=Array.from(o.querySelectorAll(d.selector));if(d.identifier==="running")for(let a of f)a.style.display="none"}}afterPageLayout(o){for(let p of Object.keys(this.runningSelectors)){let d=this.runningSelectors[p],f=o.querySelector(d.selector);f&&(d.identifier==="running"?d.first=f:console.warn(d.value+"needs css replacement"))}this.orderedSelectors||(this.orderedSelectors=this.orderSelectors(this.elements));for(let p of this.orderedSelectors)if(p){let d=this.elements[p],f=o.querySelector(p);if(f){let a=this.runningSelectors[d.args[0]];if(a&&a.first){f.innerHTML="";let T=a.first.cloneNode(!0);T.style.display=null,f.appendChild(T)}}}}pageWeight(o){let p=1,d=o.split(" "),f=d.length&&d[0].split(".");switch(f.shift(),f.length){case 4:/^pagedjs_[\w-]+_first_page$/.test(f[3])?p=7:(f[3]==="pagedjs_left_page"||f[3]==="pagedjs_right_page")&&(p=6);break;case 3:f[1]==="pagedjs_named_page"&&(f[2].indexOf(":nth-of-type")>-1?p=7:p=5);break;case 2:f[1]==="pagedjs_first_page"?p=4:f[1]==="pagedjs_blank_page"?p=3:(f[1]==="pagedjs_left_page"||f[1]==="pagedjs_right_page")&&(p=2);break;default:f[0].indexOf(":nth-of-type")>-1?p=4:p=1}return p}orderSelectors(o){let p=Object.keys(o),d={1:[],2:[],3:[],4:[],5:[],6:[],7:[]},f=[];for(let T of p){let M=this.pageWeight(T);d[M].unshift(T)}for(var a=1;a<=7;a++)f=f.concat(d[a]);return f}beforeTreeParse(o,p){p.text=o.replace(/element[\s]*\(([^|^#)]*)\)/g,"element-ident($1)")}},mk=d_;var h_=ki(En(),1);function Al(s,o=`"' `){if(s!=null)return s.replace(new RegExp(`^[${o}]+`),"").replace(new RegExp(`[${o}]+$`),"").replace(/["']/g,p=>"\\"+p).replace(/[\n]/g,p=>"\\00000A")}function gk(s){if(s!=null)return s.replace(new RegExp("::footnote-call","g"),"").replace(new RegExp("::footnote-marker","g"),"")}var p_=class extends si{constructor(o,p,d){super(o,p,d),this.stringSetSelectors={},this.type,this.pageLastString}onDeclaration(o,p,d,f){if(o.property==="string-set"){let a=h_.default.generate(f.ruleNode.prelude),T=[],M=[],R=[];o.value.children.forEach(V=>{V.type==="Identifier"&&T.push(V.name),V.type==="Function"&&(M.push(V.name),V.children.forEach(K=>{K.type==="Identifier"&&R.push(K.name)}))}),T.forEach((V,K)=>{let ne=M[K],G=R[K];this.stringSetSelectors[V]={identifier:V,func:ne,value:G,selector:a}})}}onContent(o,p,d,f,a){if(o.name==="string"){let T=o.children&&o.children.first().name;this.type=o.children.last().name,o.name="var",o.children=new h_.default.List,this.type==="first"||this.type==="last"||this.type==="start"||this.type==="first-except"?o.children.append(o.children.createItem({type:"Identifier",loc:null,name:"--pagedjs-string-"+this.type+"-"+T})):o.children.append(o.children.createItem({type:"Identifier",loc:null,name:"--pagedjs-string-first-"+T}))}}afterPageLayout(o){this.pageLastString===void 0&&(this.pageLastString={});for(let p of Object.keys(this.stringSetSelectors)){let d=this.stringSetSelectors[p],f=d.value,a=d.func,T=o.querySelectorAll(d.selector),M=p in this.pageLastString?this.pageLastString[p]:"",R,V,K,ne;if(T.length==0)R=M,V=M,K=M,ne=M;else{T.forEach(Se=>{a==="content"&&(this.pageLastString[p]=T[T.length-1].textContent),a==="attr"&&(this.pageLastString[p]=T[T.length-1].getAttribute(f)||"")}),a==="content"&&(R=T[0].textContent),a==="attr"&&(R=T[0].getAttribute(f)||""),a==="content"&&(V=T[T.length-1].textContent),a==="attr"&&(V=T[T.length-1].getAttribute(f)||"");let G=T[0].getBoundingClientRect().top,Y=T[0].closest(".pagedjs_page_content").getBoundingClientRect().top;G==Y?K=R:K=M,ne=""}o.style.setProperty(`--pagedjs-string-first-${p}`,`"${Al(R)}`),o.style.setProperty(`--pagedjs-string-last-${p}`,`"${Al(V)}`),o.style.setProperty(`--pagedjs-string-start-${p}`,`"${Al(K)}`),o.style.setProperty(`--pagedjs-string-first-except-${p}`,`"${Al(ne)}`)}}},yk=p_;var Sh=ki(En(),1),f_=class extends si{constructor(o,p,d){super(o,p,d),this.styleSheet=p.styleSheet,this.counterTargets={}}onContent(o,p,d,f,a){if(o.name==="target-counter"){let T=Sh.default.generate(a.ruleNode.prelude),M=o.children.first(),R=M.name,V=Sh.default.generate(o),K=[];M.children.forEach(Se=>{Se.type==="Identifier"&&K.push(Se.name)});let ne,G,ie;o.children.forEach(Se=>{Se.type==="Identifier"&&(ne?G||(ie=Sh.default.clone(Se),G=Se.name):ne=Se.name)});let Y="target-counter-"+Nn();T.split(",").forEach(Se=>{this.counterTargets[Se]={func:R,args:K,value:V,counter:ne,style:G,selector:Se,fullSelector:T,variable:Y}}),o.name="counter",o.children=new Sh.default.List,o.children.appendData({type:"Identifier",loc:0,name:Y}),ie&&(o.children.appendData({type:"Operator",loc:null,value:","}),o.children.appendData(ie))}}afterPageLayout(o,p,d,f){Object.keys(this.counterTargets).forEach(a=>{let T=this.counterTargets[a],M=T.selector.split(/::?/g),R=M[0];f.pagesArea.querySelectorAll(R+":not([data-"+T.variable+"])").forEach((K,ne)=>{if(T.func!=="attr")return;let G=Sp(K,T.args),ie=f.pagesArea.querySelector(Tp(G));if(ie){let Y=Nn();K.setAttribute("data-"+T.variable,Y);let Se="";if(M.length>1&&(Se+="::"+M[1]),T.counter==="page"){let _e=f.pagesArea.querySelectorAll(".pagedjs_page"),Pe=0;for(let Ye=0;Ye<_e.length;Ye++){let st=_e[Ye],Pt=window.getComputedStyle(st),_t=Pt["counter-reset"].replace("page","").trim(),Ut=Pt["counter-increment"].replace("page","").trim();if(_t!=="none"&&(Pe=parseInt(_t)),Ut!=="none"&&(Pe+=parseInt(Ut)),st.contains(ie))break}this.styleSheet.insertRule(`[data-${T.variable}="${Y}"]${Se} { counter-reset: ${T.variable} ${Pe}; }`,this.styleSheet.cssRules.length)}else{let _e=ie.getAttribute(`data-counter-${T.counter}-value`);_e&&this.styleSheet.insertRule(`[data-${T.variable}="${Y}"]${Se} { counter-reset: ${T.variable} ${T.variable} ${parseInt(_e)}; }`,this.styleSheet.cssRules.length)}let je=document.querySelector(`[data-${T.variable}="${Y}"]`);je&&(je.style.display="none",je.clientHeight,je.style.removeProperty("display"))}})})}},_k=f_;var Bf=ki(En(),1),m_=class extends si{constructor(o,p,d){super(o,p,d),this.styleSheet=p.styleSheet,this.textTargets={},this.beforeContent="",this.afterContent="",this.selector={}}onContent(o,p,d,f,a){if(o.name==="target-text"){this.selector=Bf.default.generate(a.ruleNode.prelude);let T=o.children.first(),M=o.children.last(),R=T.name,V=Bf.default.generate(o),K=[];T.children.forEach(ie=>{ie.type==="Identifier"&&K.push(ie.name)});let ne;M!==T&&(ne=M.name);let G="--pagedjs-"+Nn();this.selector.split(",").forEach(ie=>{this.textTargets[ie]={func:R,args:K,value:V,style:ne||"content",selector:ie,fullSelector:this.selector,variable:G}}),o.name="var",o.children=new Bf.default.List,o.children.appendData({type:"Identifier",loc:0,name:G})}}onPseudoSelector(o,p,d,f,a){a.ruleNode.block.children.forEach(T=>{o.name==="before"&&T.property==="content"?T.value.children.forEach(R=>{R.type==="String"&&(this.beforeContent=R.value)}):o.name==="after"&&T.property==="content"&&T.value.children.forEach(M=>{M.type==="String"&&(this.afterContent=M.value)})})}afterParsed(o){Object.keys(this.textTargets).forEach(p=>{let d=this.textTargets[p],f=d.selector.split("::"),a=f[0],T=o.querySelectorAll(a),M;T.forEach((R,V)=>{let K=Sp(R,d.args),ne=o.querySelector(Tp(K));if(ne)if(d.style){this.selector=Nn(),R.setAttribute("data-target-text",this.selector);let G="";if(f.length>1&&(G+="::"+f[1]),d.style==="before"||d.style==="after"){let ie=`${d.style}Content`;M=Al(this[ie])}else M=Al(ne.textContent," ");M=d.style==="first-letter"?M.charAt(0):M,this.styleSheet.insertRule(`[data-target-text="${this.selector}"]${G} { ${d.variable}: "${M}" }`)}else console.warn("missed target",K)})})}},vk=m_;var bk=[mk,yk,_k,vk];var g_=class extends si{constructor(o,p,d){super(o,p,d)}filter(o){Op(o,p=>this.filterEmpty(p),NodeFilter.SHOW_TEXT)}filterEmpty(o){if(o.textContent.length>1&&Yd(o)){let p=o.parentNode;if(an(p)&&p.closest("pre"))return NodeFilter.FILTER_REJECT;let f=kp(o),a=Pp(o);return a===null&&f===null?(o.textContent=" ",NodeFilter.FILTER_REJECT):a===null||f===null?NodeFilter.FILTER_ACCEPT:(o.textContent=" ",NodeFilter.FILTER_REJECT)}else return NodeFilter.FILTER_REJECT}},xk=g_;var y_=class extends si{constructor(o,p,d){super(o,p,d)}filter(o){Op(o,null,NodeFilter.SHOW_COMMENT)}},wk=y_;var __=class extends si{constructor(o,p,d){super(o,p,d)}filter(o){o.querySelectorAll("script").forEach(p=>{p.remove()})}},Sk=__;var Pk=ki(En(),1),Ek=ki(kk(),1);var b_=class extends si{constructor(o,p,d){super(o,p,d),this.displayRules={}}onDeclaration(o,p,d,f){if(o.property==="display"){let a=Pk.default.generate(f.ruleNode.prelude),T=o.value.children.first().name;a.split(",").forEach(M=>{this.displayRules[M]={value:T,selector:M,specificity:(0,Ek.calculateSpecificity)(M),important:o.important}})}}filter(o){let{matches:p,selectors:d}=this.sortDisplayedSelectors(o,this.displayRules);for(let a=0;a<p.length;a++){let T=p[a],M=d[a],R=M[M.length-1].value;this.removable(T)&&R==="none"&&(T.dataset.undisplayed="undisplayed")}let f=o.querySelectorAll("[style]");for(let a=0;a<f.length;a++){let T=f[a];this.removable(T)&&(T.dataset.undisplayed="undisplayed")}}sorter(o,p){return o.important&&!p.important?1:p.important&&!o.important?-1:o.specificity-p.specificity}sortDisplayedSelectors(o,p=[]){let d=[],f=[];for(let a in p){let T=p[a],M=T.selector,R=[];try{try{R=o.querySelectorAll(M)}catch(K){R=o.querySelectorAll(gk(M))}}catch(K){R=[]}let V=Array.from(R);for(let K of V)if(d.includes(K)){let ne=d.indexOf(K);f[ne].push(T),f[ne]=f[ne].sort(this.sorter)}else d.push(K),f.push([T])}return{matches:d,selectors:f}}removable(o){return!(o.style&&o.style.display!==""&&o.style.display!=="none")}},Ak=b_;var Mk=[xk,wk,Sk,Ak];var KP=ki(wl(),1),JP=ki(XP(),1),E_=[...fk,...bk,...Mk],Nf=class{constructor(o,p,d){let f=[];E_.forEach(a=>{let T=new a(o,p,d);f.push(T),(0,JP.default)(T,this)})}};(0,KP.default)(Nf.prototype);function qf(){for(var s=0;s<arguments.length;s++)E_.push(arguments[s])}function A_(s,o,p){return new Nf(s,o,p)}var Vf=class{constructor(o){this.settings=o||{},this.polisher=new Yy(!1),this.chunker=new Tg(void 0,void 0,this.settings),this.hooks={},this.hooks.beforePreview=new At(this),this.hooks.afterPreview=new At(this),this.size={width:{value:8.5,unit:"in"},height:{value:11,unit:"in"},format:void 0,orientation:void 0},this.chunker.on("page",p=>{this.emit("page",p)}),this.chunker.on("rendering",()=>{this.emit("rendering",this.chunker)})}initializeHandlers(){let o=A_(this.chunker,this.polisher,this);return o.on("size",p=>{this.size=p,this.emit("size",p)}),o.on("atpages",p=>{this.atpages=p,this.emit("atpages",p)}),o}registerHandlers(){return qf.apply(qf,arguments)}getParams(o){let p,d=new URL(window.location),f=new URLSearchParams(d.search);for(var a of f.entries())a[0]===o&&(p=a[1]);return p}wrapContent(){let o=document.querySelector("body"),p;return p=o.querySelector(":scope > template[data-ref='pagedjs-content']"),p||(p=document.createElement("template"),p.dataset.ref="pagedjs-content",p.innerHTML=o.innerHTML,o.innerHTML="",o.appendChild(p)),p.content}removeStyles(o=document){let p=Array.from(o.querySelectorAll("link[rel='stylesheet']:not([data-pagedjs-ignore], [media~='screen'])")),d=Array.from(o.querySelectorAll("style:not([data-pagedjs-inserted-styles], [data-pagedjs-ignore], [media~='screen'])"));return[...p,...d].sort(function(a,T){let M=a.compareDocumentPosition(T);return M===Node.DOCUMENT_POSITION_PRECEDING?1:M===Node.DOCUMENT_POSITION_FOLLOWING?-1:0}).map(a=>{if(a.nodeName==="STYLE"){let T={};return T[window.location.href]=a.textContent,a.remove(),T}if(a.nodeName==="LINK")return a.remove(),a.href;console.warn(`Unable to process: ${a}, ignoring.`)})}async preview(o,p,d){await this.hooks.beforePreview.trigger(o,d),o||(o=this.wrapContent()),p||(p=this.removeStyles()),this.polisher.setup(),this.handlers=this.initializeHandlers(),await this.polisher.add(...p);let f=performance.now(),a=await this.chunker.flow(o,d),T=performance.now();return a.performance=T-f,a.size=this.size,this.emit("rendered",a),await this.hooks.afterPreview.trigger(a.pages),a}};(0,QP.default)(Vf.prototype);var M_=Vf;addEventListener("DOMContentLoaded",s=>{let o=new M_,p=window.location,d=new URLSearchParams(p.search);(d.has("print")||d.has("p"))&&o.preview().then(f=>{console.log("Rendered",f.total,"pages.")})});var Go=ki(Ml()),sV=ki(iE());var z_=ki(Ml()),rE=Object.freeze(function(o,p){let d={},f=p.getTileSize(),a=z_.SVG.create("svg"),T=z_.SVG.create("g"),M=[];a.setAttribute("viewBox",`0 0 ${f.x} ${f.y}`),a.appendChild(T);function R(V,K,ne){let G=p.getFeatureStyle(V,K,o.z);if(!G)return;let ie=p.featureToLayer(V,K,ne,G);T.appendChild(ie.graphics),M.push(ie),p.addFeatureLayer(ie)}return d.addVectorTile=function(K){return p.getOrderedLayers(Object.keys(K.layers),o.z).forEach(function(ne){if(!K.layers[ne])return;let G=K.layers[ne],ie=f.divideBy(G.extent),Y=0;for(;Y!==G.length;)R(G.feature(Y),ne,ie),Y+=1}),d},d.global=V=>o.scaleBy(f).add(V),d.eachFeatureLayer=V=>M.forEach((...K)=>V(...K,d)),d.domElement=()=>a,d.coords=()=>o,d});var qi=ki(Ml());function so(s,o){this.x=s,this.y=o}so.prototype={clone(){return new so(this.x,this.y)},add(s){return this.clone()._add(s)},sub(s){return this.clone()._sub(s)},multByPoint(s){return this.clone()._multByPoint(s)},divByPoint(s){return this.clone()._divByPoint(s)},mult(s){return this.clone()._mult(s)},div(s){return this.clone()._div(s)},rotate(s){return this.clone()._rotate(s)},rotateAround(s,o){return this.clone()._rotateAround(s,o)},matMult(s){return this.clone()._matMult(s)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(s){return this.x===s.x&&this.y===s.y},dist(s){return Math.sqrt(this.distSqr(s))},distSqr(s){let o=s.x-this.x,p=s.y-this.y;return o*o+p*p},angle(){return Math.atan2(this.y,this.x)},angleTo(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith(s){return this.angleWithSep(s.x,s.y)},angleWithSep(s,o){return Math.atan2(this.x*o-this.y*s,this.x*s+this.y*o)},_matMult(s){let o=s[0]*this.x+s[1]*this.y,p=s[2]*this.x+s[3]*this.y;return this.x=o,this.y=p,this},_add(s){return this.x+=s.x,this.y+=s.y,this},_sub(s){return this.x-=s.x,this.y-=s.y,this},_mult(s){return this.x*=s,this.y*=s,this},_div(s){return this.x/=s,this.y/=s,this},_multByPoint(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint(s){return this.x/=s.x,this.y/=s.y,this},_unit(){return this._div(this.mag()),this},_perp(){let s=this.y;return this.y=this.x,this.x=-s,this},_rotate(s){let o=Math.cos(s),p=Math.sin(s),d=o*this.x-p*this.y,f=p*this.x+o*this.y;return this.x=d,this.y=f,this},_rotateAround(s,o){let p=Math.cos(s),d=Math.sin(s),f=o.x+p*(this.x-o.x)-d*(this.y-o.y),a=o.y+d*(this.x-o.x)+p*(this.y-o.y);return this.x=f,this.y=a,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:so};so.convert=function(s){if(s instanceof so)return s;if(Array.isArray(s))return new so(+s[0],+s[1]);if(s.x!==void 0&&s.y!==void 0)return new so(+s.x,+s.y);throw new Error("Expected [x, y] or {x, y} point format")};var xc=class{constructor(o,p,d,f,a){this.properties={},this.extent=d,this.type=0,this.id=void 0,this._pbf=o,this._geometry=-1,this._keys=f,this._values=a,o.readFields(L5,this,p)}loadGeometry(){let o=this._pbf;o.pos=this._geometry;let p=o.readVarint()+o.pos,d=[],f,a=1,T=0,M=0,R=0;for(;o.pos<p;){if(T<=0){let V=o.readVarint();a=V&7,T=V>>3}if(T--,a===1||a===2)M+=o.readSVarint(),R+=o.readSVarint(),a===1&&(f&&d.push(f),f=[]),f&&f.push(new so(M,R));else if(a===7)f&&f.push(f[0].clone());else throw new Error(`unknown command ${a}`)}return f&&d.push(f),d}bbox(){let o=this._pbf;o.pos=this._geometry;let p=o.readVarint()+o.pos,d=1,f=0,a=0,T=0,M=1/0,R=-1/0,V=1/0,K=-1/0;for(;o.pos<p;){if(f<=0){let ne=o.readVarint();d=ne&7,f=ne>>3}if(f--,d===1||d===2)a+=o.readSVarint(),T+=o.readSVarint(),a<M&&(M=a),a>R&&(R=a),T<V&&(V=T),T>K&&(K=T);else if(d!==7)throw new Error(`unknown command ${d}`)}return[M,V,R,K]}toGeoJSON(o,p,d){let f=this.extent*Math.pow(2,d),a=this.extent*o,T=this.extent*p,M=this.loadGeometry();function R(G){return[(G.x+a)*360/f-180,360/Math.PI*Math.atan(Math.exp((1-(G.y+T)*2/f)*Math.PI))-90]}function V(G){return G.map(R)}let K;if(this.type===1){let G=[];for(let Y of M)G.push(Y[0]);let ie=V(G);K=G.length===1?{type:"Point",coordinates:ie[0]}:{type:"MultiPoint",coordinates:ie}}else if(this.type===2){let G=M.map(V);K=G.length===1?{type:"LineString",coordinates:G[0]}:{type:"MultiLineString",coordinates:G}}else if(this.type===3){let G=O5(M),ie=[];for(let Y of G)ie.push(Y.map(V));K=ie.length===1?{type:"Polygon",coordinates:ie[0]}:{type:"MultiPolygon",coordinates:ie}}else throw new Error("unknown feature type");let ne={type:"Feature",geometry:K,properties:this.properties};return this.id!=null&&(ne.id=this.id),ne}};xc.types=["Unknown","Point","LineString","Polygon"];function L5(s,o,p){s===1?o.id=p.readVarint():s===2?D5(p,o):s===3?o.type=p.readVarint():s===4&&(o._geometry=p.pos)}function D5(s,o){let p=s.readVarint()+s.pos;for(;s.pos<p;){let d=o._keys[s.readVarint()],f=o._values[s.readVarint()];o.properties[d]=f}}function O5(s){let o=s.length;if(o<=1)return[s];let p=[],d,f;for(let a=0;a<o;a++){let T=R5(s[a]);T!==0&&(f===void 0&&(f=T<0),f===T<0?(d&&p.push(d),d=[s[a]]):d&&d.push(s[a]))}return d&&p.push(d),p}function R5(s){let o=0;for(let p=0,d=s.length,f=d-1,a,T;p<d;f=p++)a=s[p],T=s[f],o+=(T.x-a.x)*(a.y+T.y);return o}var I_=class{constructor(o,p){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(B5,this,p),this.length=this._features.length}feature(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];let p=this._pbf.readVarint()+this._pbf.pos;return new xc(this._pbf,p,this.extent,this._keys,this._values)}};function B5(s,o,p){s===15?o.version=p.readVarint():s===1?o.name=p.readString():s===5?o.extent=p.readVarint():s===2?o._features.push(p.pos):s===3?o._keys.push(p.readString()):s===4&&o._values.push(F5(p))}function F5(s){let o=null,p=s.readVarint()+s.pos;for(;s.pos<p;){let d=s.readVarint()>>3;o=d===1?s.readString():d===2?s.readFloat():d===3?s.readDouble():d===4?s.readVarint64():d===5?s.readVarint():d===6?s.readSVarint():d===7?s.readBoolean():null}if(o==null)throw new Error("unknown feature value");return o}var Uf=class{constructor(o,p){this.layers=o.readFields(j5,{},p)}};function j5(s,o,p){if(s===3){let d=new I_(p,p.readVarint()+p.pos);d.length&&(o[d.name]=d)}}function Zf(s,o,p,d){let f=new qi.Layer(d);return f.feature=s,f.layerName=o,f.properties=s.properties,f.addTo=function(T){f._map=T,f.addInteractiveTarget(f.graphics)},f.removeFrom=function(){f.removeInteractiveTarget(f.graphics),delete f._map},f.scalePoint=function(T){return(0,qi.point)(T).scaleBy(p)},f.bbox=function(){let[T,M,R,V]=s.bbox();return(0,qi.bounds)(f.scalePoint([T,M]),f.scalePoint([R,V]))},f.applyOptions=function(T){T.className&&qi.DomUtil.addClass(f.graphics,T.className),f.setStyle({})},f}function Hf(s,o){o.interactive?(s.setAttribute("pointer-events","auto"),qi.DomUtil.addClass(s,"leaflet-interactive")):(qi.DomUtil.removeClass(s,"leaflet-interactive"),s.removeAttribute("pointer-events")),o.hidden?s.setAttribute("visibility","hidden"):s.removeAttribute("visibility")}function L_(s,o){return o.stroke?(s.setAttribute("stroke",o.color),s.setAttribute("stroke-opacity",o.opacity),s.setAttribute("stroke-width",o.weight),s.setAttribute("stroke-linecap",o.lineCap),s.setAttribute("stroke-linejoin",o.lineJoin),o.dashArray?s.setAttribute("stroke-dasharray",o.dashArray):s.removeAttribute("stroke-dasharray"),o.dashOffset?s.setAttribute("stroke-dashoffset",o.dashOffset):s.removeAttribute("stroke-dashoffset")):s.setAttribute("stroke","none"),o.fill?(s.setAttribute("fill",o.fillColor||o.color),s.setAttribute("fill-opacity",o.fillOpacity),s.setAttribute("fill-rule",o.fillRule||"evenodd")):s.setAttribute("fill","none"),s}function nE(s,o){if(o.icon&&o.icon.options.iconUrl){let p=qi.SVG.create("image");p.setAttribute("width",o.icon.options.iconSize[0]),p.setAttribute("height",o.icon.options.iconSize[1]),p.setAttribute("href",o.icon.options.iconUrl),s.appendChild(p)}else o.icon&&o.icon.options.svg&&s.appendChild(o.icon.options.svg)}function aE(s,o,p,d){d=(0,qi.extend)({},qi.CircleMarker.prototype.options,d);let f=Zf(s,o,p,d),a=f.scalePoint(s.loadGeometry()[0][0]);return f.graphics=qi.SVG.create("circle"),f.graphics.setAttribute("cx",a.x),f.graphics.setAttribute("cy",a.y),f.setStyle=function(M){M=(0,qi.extend)({},d,M),Hf(f.graphics,M),L_(f.graphics,M),f.graphics.setAttribute("r",M.radius)},f.applyOptions(d),f}function sE(s,o,p,d){let f=xc.types[s.type];d=(0,qi.extend)({},f==="Polygon"?qi.Polygon.prototype.options:qi.Path.prototype.options,d);let a=Zf(s,o,p,d),T=s.loadGeometry();return a.graphics=qi.SVG.create("path"),a.graphics.setAttribute("d",qi.SVG.pointsToPath(T.map(M=>M.map(a.scalePoint)),f==="Polygon")),a.setStyle=function(R){R=(0,qi.extend)({},d,R),Hf(a.graphics,R),L_(a.graphics,R)},a.applyOptions(d),a}function oE(s,o,p,d){let f=Zf(s,o,p,d);f.setStyle=function(R){R=(0,qi.extend)({},d,R),Hf(f.graphics,R),nE(f.graphics,R)},f.graphics=qi.SVG.create("g");let a=f.scalePoint(s.loadGeometry()[0][0]),T=d.icon.options.iconAnchor||[0,0];return f.graphics.setAttribute("transform",`translate(${a.x-T[0]}, ${a.y-T[1]})`),f.applyOptions(d),f}function lE(s,o,p,d){switch(xc.types[s.type]){case"Point":return d.icon?oE(s,o,p,d):aE(s,o,p,d);case"Polygon":case"LineString":return sE(s,o,p,d);default:throw new Error("Unknown feature type")}}var zl=ki(Ml()),yE=ki(mE());function rF(...s){return new Error(s.join(": "))}function nF(s,o){return fetch(s,o).then(function(p){if(p.ok)return p.arrayBuffer();if(p.status!==404)throw rF(s,p.status,p.statusText)})}function gE(s){return`${s.x}|${s.y}|${s.z}`}var aF={featureToLayer:lE,filter:void 0,layerOrder:void 0,layers:void 0,minZoom:0,maxZoom:18,maxDetailZoom:void 0,minDetailZoom:void 0,subdomains:"abc",zoomOffset:0,zoomReverse:!1},R_=Object.freeze(function(o,p){let d=new zl.GridLayer(p),f=Object.getPrototypeOf(d),a={};function T(ie,Y,Se){let{getFeatureId:je,vectorTileLayerStyles:_e}=p,Pe=_e[Y];if(je){let Ye=je(ie);a[Ye]&&(Pe=a[Ye])}if(typeof Pe=="function"&&(Pe=Pe(ie.properties,Se,ie.type)),Array.isArray(Pe)){if(!Pe.length)return;Pe=Pe[0]}return Pe}p=zl.Util.extend({},aF,p),typeof p.subdomains=="string"&&(p.subdomains=p.subdomains.split("")),p.vectorTileLayerStyles&&!p.style&&(p.style=T);let M={};d.on("tileunload",function(ie){let Y=gE(ie.coords),Se=M[Y];Se&&(Se.eachFeatureLayer(d.removeFeatureLayer),delete M[Y])});let R;d.onAdd=function(Y,...Se){return R=Y,f.onAdd.call(d,Y,...Se)},d.onRemove=function(...Y){return R=void 0,f.onRemove.call(d,...Y)},d.createTile=function(Y,Se){let je=gE(Y),_e=rE(Y,d);return M[je]=_e,nF(d.getTileUrl(Y),p.fetchOptions).then(function(Pe){_e.addVectorTile(new Uf(new yE.default(Pe))),Se(null,_e)},function(Pe){Se(Pe,_e)}),_e.domElement()};function V(ie){let Y=Math.abs(ie.x+ie.y)%p.subdomains.length;return p.subdomains[Y]}function K(ie){let{minDetailZoom:Y,maxDetailZoom:Se}=p;return Y!==void 0&&ie<Y?Y:Se!==void 0&&Se<ie?Se:ie}function ne(ie){let{maxZoom:Y,zoomReverse:Se,zoomOffset:je}=p;return Se&&(ie=Y-ie),K(ie+je)}d.getTileUrl=function(Y){let Se={s:V(Y),x:Y.x,y:Y.y,z:ne(Y.z)};return R.options.crs.infinite||(Se["-y"]=d._globalTileRange.max.y-Y.y),zl.Util.template(o,zl.Util.extend(Se,p))};function G(ie){Object.keys(M).forEach(Y=>M[Y].eachFeatureLayer(ie))}return d.setStyle=function(Y){return p.style=Y,G(function(Se,je,_e,Pe){let{feature:Ye,layerName:st}=Se,Pt=d.getFeatureStyle(Ye,st,Pe.coords().z);Se.setStyle(Pt)}),d},d.setFeatureStyle=function(Y,Se){return a[Y]=Se,d.setStyle(p.style),d},d.resetFeatureStyle=function(Y){return delete a[Y],d.setStyle(p.style),d},d.getTileSize=function(){let Y=f.getTileSize.call(d),Se=d._tileZoom;return Se===void 0?Y:Y.divideBy(R.getZoomScale(K(Se),Se)).round()},d.getFeatureStyle=function(Y,Se,je){if(p.filter&&!p.filter(Y,Se,je))return;let _e=p.style;return typeof _e=="function"?_e(Y,Se,je):_e},d.getOrderedLayers=function(Y,Se){Y=p.layers||Y;let je=p.layerOrder;return je!==void 0?je(Y,Se):Y},d.featureToLayer=p.featureToLayer,d.addFeatureLayer=function(Y){return Y.addTo(R),Y.addEventParent(d),d},d.removeFeatureLayer=function(Y){return Y.removeEventParent(d),Y.removeFrom(R),d},d.getBounds=function(){let Y;return G(function(Se,je,_e,Pe){let Ye=_t=>R.unproject(Pe.global(_t),Pe.coords().z),st=Se.bbox(),Pt=(0,zl.latLngBounds)(Ye(st.min),Ye(st.max));Y?Y.extend(Pt):Y=Pt}),Y},d});var lV=ki(xE());var Xf=ki(Ml()),Il=ki(Ml()),sF=Xf.default.Icon.extend({options:{svgElement:null},createIcon:function(s){let o=s&&s.tagName==="DIV"?s:document.createElement("div"),p=this.options,d=Il.SVG.create("svg");return d.setAttribute("width",p.iconSize[0]),d.setAttribute("height",p.iconSize[1]),d.appendChild(p.svgElement),o.appendChild(d),o}});function SE(s){let o=s.src,p=s.scale||1,d=s.anchor||[.5,.5];return o?new Promise(f=>{let a=new Image;a.onload=()=>{let T=a.naturalWidth,M=a.naturalHeight,R=T*p,V=M*p,K=d[0],ne=d[1];(s.anchorXUnits==="fraction"||K<=1)&&(K=R*K),(s.anchorYUnits==="fraction"||ne<=1)&&(ne=V*ne);let G=Xf.default.icon({iconUrl:o,iconSize:[R,V],iconAnchor:[K,ne],popupAnchor:[K,ne]});f(G)},a.onerror=()=>{f(null)},a.src=o}):Promise.resolve(null)}function N_(s){return s?(o,p)=>{let d=s[0];switch(d){case"==":case"!=":case">":case">=":case"<":case"<=":{let f=s[1],a=s[2],T=Array.isArray(f)?fi(f,p,o):o[f];return d==="=="?T==a:d==="!="?T!=a:d===">"?T>a:d===">="?T>=a:d==="<"?T<a:d==="<="?T<=a:!1}case"in":case"!in":{let f=s[1],a=Array.isArray(f)?fi(f,p,o):o[f],M=s.slice(2).includes(a);return d==="in"?M:!M}case"has":return o.hasOwnProperty(s[1]);case"!has":return!o.hasOwnProperty(s[1]);case"all":return s.slice(1).every(f=>N_(f)(o,p));default:return console.warn(`Unsupported filter operator: ${d}`),!0}}:()=>!0}function fi(s,o,p){if(typeof s=="string"&&(s.startsWith("rgba")||s.startsWith("hsla"))){let d=s.split(",");if(d.length===4){let f=parseFloat(d[3]);return{color:(d.slice(0,3).join(",")+")").replace("rgba","rgb").replace("hsla","hsl"),opacity:f}}}if(typeof s!="object"||s===null)return s;if(Array.isArray(s)){let d=["get","match"];if(typeof s[0]!="string"||!d.includes(s[0]))return s;let[f,...a]=s;switch(f){case"get":return p[a[0]];case"match":{let T=fi(a[0],o,p),M=a.slice(1);for(let R=0;R<M.length-1;R+=2){let V=M[R],K=M[R+1];if(Array.isArray(V)){if(V.includes(T))return fi(K,o,p)}else if(T===V)return fi(K,o,p)}return fi(M[M.length-1],o,p)}default:return console.warn(`Unsupported expression operator: ${f}`),s}}if(s.stops){let d=s.stops,f=d[0],a=d[d.length-1];if(o<=f[0])return fi(f[1],o,p);if(o>=a[0])return fi(a[1],o,p);for(let Y=0;Y<d.length-1;Y++)if(o>=d[Y][0]&&o<d[Y+1][0]){f=d[Y],a=d[Y+1];break}let T=f[0],M=a[0],R=f[1],V=a[1];if(typeof R!="number"||typeof V!="number")return fi(R,o,p);let K=M-T,ne=V-R,G=(o-T)/K;return R+G*ne}return console.warn("Unsupported expression type:",s),s}function TE(s,o,p=!0){let d=o.options.lang,f={};if(!s||!s.layers)return f;let a={};s.layers.forEach(T=>{if(T.type==="background")return;let M=T["source-layer"];M&&(a[M]||(a[M]=[]),a[M].push(T))});for(let T in a){let M=a[T];f[T]=function(R,V,K){var ie,Y;let ne=(ie=f["*"])==null?void 0:ie.cache,G=[];for(let Se=0;Se<s.layers.length;Se++){let je=s.layers[Se];if(je["source-layer"]!==T)continue;let _e=N_(je.filter);if(!(je.minzoom&&V<je.minzoom)&&!(je.maxzoom&&V>=je.maxzoom)&&_e(R,V)){let Pe={},Ye=je.paint||{},st=je.layout||{};if(fi(st.visibility,V,R)==="none")continue;switch(je.type){case"fill":Pe.fill=!0;let _t=fi(Ye["fill-color"],V,R);typeof _t=="object"&&_t.color?(Pe.fillColor=_t.color,Pe.fillOpacity=_t.opacity):(Pe.fillColor=_t,Pe.fillOpacity=(Y=fi(Ye["fill-opacity"],V,R))!=null?Y:1),Ye["fill-outline-color"]?(Pe.color=fi(Ye["fill-outline-color"],V,R),Pe.weight=1):Pe.stroke=!1;break;case"line":let Ut=fi(Ye["line-color"],V,R);if(typeof Ut=="object"&&Ut.color?(Pe.color=Ut.color,Pe.opacity=Ut.opacity):(Pe.color=Ut,Pe.opacity=fi(Ye["line-opacity"],V,R)),Pe.weight=fi(Ye["line-width"],V,R),Pe.weight<=0)continue;let Ht=fi(Ye["line-dasharray"],V,R);Array.isArray(Ht)&&(Pe.dashArray=Ht.join(" ")),Pe.lineCap=fi(st["line-cap"],V,R),Pe.lineJoin=fi(st["line-join"],V,R);break;case"circle":Pe.radius=fi(Ye["circle-radius"],V,R),Pe.color=fi(Ye["circle-stroke-color"],V,R),Pe.weight=fi(Ye["circle-stroke-width"],V,R),Pe.opacity=fi(Ye["circle-stroke-opacity"],V,R),Pe.fillColor=fi(Ye["circle-color"],V,R),Pe.fillOpacity=fi(Ye["circle-opacity"],V,R),Pe.fill=!0;break;case"symbol":let Tt=fi(st["icon-image"],V,R);if(!Tt||Tt===""){if(p)return{stroke:!1,fill:!1};let Et=R["name"+d];Et===void 0&&(Et=R.name);let oi=s["ol:webfonts"],ni=Array.isArray(oi)?oi.join(", "):"sans-serif",di=fi(st["text-size"],V,R)||0,ai=fi(Ye["text-color"],V,R),Ct=fi(Ye["text-halo-color"],V,R),dt=fi(Ye["text-halo-width"],V,R);if(di<=0)return{stroke:!1,fill:!1};if(ne&&K){let gt=R.name.length,pr=di*gt*.7,yi=di+10,gn=o.latLngToContainerPoint([K[1],K[0]]),sn=pr/2,br={minX:gn.x-sn,maxX:gn.x+sn,minY:gn.y-yi,maxY:gn.y},cr=10,Mn={minX:br.minX-cr,maxX:br.maxX+cr,minY:br.minY-cr,maxY:br.maxY+cr};if(ne.some(xr=>Mn.maxX>xr.minX&&Mn.minX<xr.maxX&&Mn.maxY>xr.minY&&Mn.minY<xr.maxY))return{stroke:!1,fill:!1};ne.push(br)}let qt=di*(Et?Et.length:0)*.8,bt=di+10,Qt=di,Pi=Il.SVG.create("g"),xi=Il.SVG.create("text"),hi={"paint-order":"stroke fill",fill:ai,stroke:Ct,"stroke-width":dt,x:qt/2,y:di,"font-size":`${di}px`,"font-family":ni,"text-anchor":"middle"};for(let gt in hi)xi.setAttribute(gt,hi[gt]);xi.textContent=Et,Pi.appendChild(xi);let Zt=new sF({svgElement:Pi,iconSize:[qt,bt],iconAnchor:[qt/2,Qt]})}else if(p)return{stroke:!1,fill:!1};default:console.warn(`Unsupported layer type: ${je.type}`);continue}G.push(Pe)}}return G.length>0?G.reverse():{stroke:!1,fill:!1}}}return f}var oF=typeof OffscreenCanvas!="undefined"?new OffscreenCanvas(0,0):document.createElement("canvas"),wE=oF.getContext("2d",{alpha:!1});function CE(s,o){return function(p,d,f,a){var ai,Ct;let T=p.properties,M=(ai=this["*"])==null?void 0:ai.cache,R=s.layers.find(dt=>dt["source-layer"]===d&&dt.type==="symbol"&&N_(dt.filter)(T,f));if(!R||R.minzoom&&f<R.minzoom||R.maxzoom&&f>=R.maxzoom||fi((Ct=R.layout)==null?void 0:Ct.visibility,f,T)==="none")return null;let K=R.paint||{},ne=R.layout||{},G=o.options.lang,ie=T["name_"+G]||T.name,Y=fi(ne["text-size"],f,T)||0;if(!ie||Y<=0)return null;let Se=s["ol:webfonts"]||s.metadata["ol:webfonts"]||"sans-serif";wE.font=`${Y}px ${Se}`;let je=wE.measureText(ie).width;if(M&&p.type===1){let dt=a.x+":"+a.y+":"+a.z;M[dt]||(M[dt]=[]);let qt=Y*1.5,bt=qt/2,Qt=p.loadGeometry()[0][0],Pi=256/4096,xi=Qt.x*Pi,hi=Qt.y*Pi,Zt=10,gt={minX:xi-je/2-Zt,maxX:xi+je/2+Zt,minY:hi-bt-Zt,maxY:hi+(qt-bt)+Zt};if(M[dt].some(yi=>gt.maxX>yi.minX&&gt.minX<yi.maxX&&gt.maxY>yi.minY&&gt.minY<yi.maxY))return null;M[dt].push(gt)}let _e=Y*1.5,Pe=_e/2,Ye=fi(K["text-color"],f,T),st=fi(K["text-halo-color"],f,T),Pt=fi(K["text-halo-width"],f,T),_t=Il.SVG.create("text"),Ut={"paint-order":"stroke fill","stroke-width":Pt,"font-size":`${Y}px`,"font-family":Se,"text-anchor":"middle",x:je/2,y:Y};Ut.fill=typeof Ye=="object"&&Ye.color?Ye.color:Ye,Ut["fill-opacity"]=typeof Ye=="object"&&Ye.opacity?Ye.opacity:1,Ut.stroke=typeof st=="object"&&st.color?st.color:st,Ut["stroke-opacity"]=typeof st=="object"&&st.opacity?st.opacity:1;for(let dt in Ut)_t.setAttribute(dt,Ut[dt]);_t.textContent=ie;let Ht=Il.SVG.create("g");Ht.appendChild(_t);let Tt=Il.SVG.create("svg");Tt.setAttribute("width",je),Tt.setAttribute("height",_e),Tt.setAttribute("viewBox",`0 0 ${je} ${_e}`);let Et=Il.SVG.create("style");Et.textContent=`@font-face { font-family: "${Se}"; src: local('${Se}'), url("/fonts/space-grotesk-latin-ext-wght-normal.woff2") format("woff2-variations"); }`,Tt.appendChild(Et),Tt.appendChild(Ht);let oi=new XMLSerializer().serializeToString(Tt),ni="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(oi))),di=Xf.default.icon({iconUrl:ni,iconSize:[je,_e],iconAnchor:[je/2,Pe]});return lF(Ht,je,_e,je/2,Pe)}}function lF(s,o,p,d,f){return{icon:{options:{svg:s,iconSize:[o,p],iconAnchor:[d,f]}}}}var{slice:cF,forEach:uF}=[];function dF(s){return uF.call(cF.call(arguments,1),o=>{if(o)for(let p in o)s[p]===void 0&&(s[p]=o[p])}),s}function hF(s){return typeof s!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(p=>p.test(s))}var kE=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,pF=function(s,o){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},f=encodeURIComponent(o),a=`${s}=${f}`;if(d.maxAge>0){let T=d.maxAge-0;if(Number.isNaN(T))throw new Error("maxAge should be a Number");a+=`; Max-Age=${Math.floor(T)}`}if(d.domain){if(!kE.test(d.domain))throw new TypeError("option domain is invalid");a+=`; Domain=${d.domain}`}if(d.path){if(!kE.test(d.path))throw new TypeError("option path is invalid");a+=`; Path=${d.path}`}if(d.expires){if(typeof d.expires.toUTCString!="function")throw new TypeError("option expires is invalid");a+=`; Expires=${d.expires.toUTCString()}`}if(d.httpOnly&&(a+="; HttpOnly"),d.secure&&(a+="; Secure"),d.sameSite)switch(typeof d.sameSite=="string"?d.sameSite.toLowerCase():d.sameSite){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return d.partitioned&&(a+="; Partitioned"),a},PE={create(s,o,p,d){let f=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};p&&(f.expires=new Date,f.expires.setTime(f.expires.getTime()+p*60*1e3)),d&&(f.domain=d),document.cookie=pF(s,o,f)},read(s){let o=`${s}=`,p=document.cookie.split(";");for(let d=0;d<p.length;d++){let f=p[d];for(;f.charAt(0)===" ";)f=f.substring(1,f.length);if(f.indexOf(o)===0)return f.substring(o.length,f.length)}return null},remove(s,o){this.create(s,"",-1,o)}},fF={name:"cookie",lookup(s){let{lookupCookie:o}=s;if(o&&typeof document!="undefined")return PE.read(o)||void 0},cacheUserLanguage(s,o){let{lookupCookie:p,cookieMinutes:d,cookieDomain:f,cookieOptions:a}=o;p&&typeof document!="undefined"&&PE.create(p,s,d,f,a)}},mF={name:"querystring",lookup(s){var d;let{lookupQuerystring:o}=s,p;if(typeof window!="undefined"){let{search:f}=window.location;!window.location.search&&((d=window.location.hash)==null?void 0:d.indexOf("?"))>-1&&(f=window.location.hash.substring(window.location.hash.indexOf("?")));let T=f.substring(1).split("&");for(let M=0;M<T.length;M++){let R=T[M].indexOf("=");R>0&&T[M].substring(0,R)===o&&(p=T[M].substring(R+1))}}return p}},gF={name:"hash",lookup(s){var f;let{lookupHash:o,lookupFromHashIndex:p}=s,d;if(typeof window!="undefined"){let{hash:a}=window.location;if(a&&a.length>2){let T=a.substring(1);if(o){let M=T.split("&");for(let R=0;R<M.length;R++){let V=M[R].indexOf("=");V>0&&M[R].substring(0,V)===o&&(d=M[R].substring(V+1))}}if(d)return d;if(!d&&p>-1){let M=a.match(/\/([a-zA-Z-]*)/g);return Array.isArray(M)?(f=M[typeof p=="number"?p:0])==null?void 0:f.replace("/",""):void 0}}}return d}},Xu=null,EE=()=>{if(Xu!==null)return Xu;try{if(Xu=typeof window!="undefined"&&window.localStorage!==null,!Xu)return!1;let s="i18next.translate.boo";window.localStorage.setItem(s,"foo"),window.localStorage.removeItem(s)}catch(s){Xu=!1}return Xu},yF={name:"localStorage",lookup(s){let{lookupLocalStorage:o}=s;if(o&&EE())return window.localStorage.getItem(o)||void 0},cacheUserLanguage(s,o){let{lookupLocalStorage:p}=o;p&&EE()&&window.localStorage.setItem(p,s)}},Ku=null,AE=()=>{if(Ku!==null)return Ku;try{if(Ku=typeof window!="undefined"&&window.sessionStorage!==null,!Ku)return!1;let s="i18next.translate.boo";window.sessionStorage.setItem(s,"foo"),window.sessionStorage.removeItem(s)}catch(s){Ku=!1}return Ku},_F={name:"sessionStorage",lookup(s){let{lookupSessionStorage:o}=s;if(o&&AE())return window.sessionStorage.getItem(o)||void 0},cacheUserLanguage(s,o){let{lookupSessionStorage:p}=o;p&&AE()&&window.sessionStorage.setItem(p,s)}},vF={name:"navigator",lookup(s){let o=[];if(typeof navigator!="undefined"){let{languages:p,userLanguage:d,language:f}=navigator;if(p)for(let a=0;a<p.length;a++)o.push(p[a]);d&&o.push(d),f&&o.push(f)}return o.length>0?o:void 0}},bF={name:"htmlTag",lookup(s){let{htmlTag:o}=s,p,d=o||(typeof document!="undefined"?document.documentElement:null);return d&&typeof d.getAttribute=="function"&&(p=d.getAttribute("lang")),p}},xF={name:"path",lookup(s){var f;let{lookupFromPathIndex:o}=s;if(typeof window=="undefined")return;let p=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(p)?(f=p[typeof o=="number"?o:0])==null?void 0:f.replace("/",""):void 0}},wF={name:"subdomain",lookup(s){var f,a;let{lookupFromSubdomainIndex:o}=s,p=typeof o=="number"?o+1:1,d=typeof window!="undefined"&&((a=(f=window.location)==null?void 0:f.hostname)==null?void 0:a.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(d)return d[p]}},ME=!1;try{document.cookie,ME=!0}catch(s){}var zE=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];ME||zE.splice(1,1);var SF=()=>({order:zE,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:s=>s}),Ph=class{constructor(o){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(o,p)}init(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=o,this.options=dF(p,this.options||{},SF()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=f=>f.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=d,this.addDetector(fF),this.addDetector(mF),this.addDetector(yF),this.addDetector(_F),this.addDetector(vF),this.addDetector(bF),this.addDetector(xF),this.addDetector(wF),this.addDetector(gF)}addDetector(o){return this.detectors[o.name]=o,this}detect(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,p=[];return o.forEach(d=>{if(this.detectors[d]){let f=this.detectors[d].lookup(this.options);f&&typeof f=="string"&&(f=[f]),f&&(p=p.concat(f))}}),p=p.filter(d=>d!=null&&!hF(d)).map(d=>this.options.convertDetectedLanguage(d)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?p:p.length>0?p[0]:null}cacheUserLanguage(o){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;p&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(o)>-1||p.forEach(d=>{this.detectors[d]&&this.detectors[d].cacheUserLanguage(o,this.options)}))}};Ph.type="languageDetector";var Eh={};fz(Eh,{default:()=>MF,glyphs:()=>PF,layers:()=>q_,metadata:()=>kF,name:()=>CF,sources:()=>AF,sprite:()=>EF,version:()=>TF});var TF=8,CF="versatiles-colorful",kF={license:"https://creativecommons.org/publicdomain/zero/1.0/"},PF="https://tiles.versatiles.org/assets/glyphs/{fontstack}/{range}.pbf",EF=[{id:"basics",url:"https://tiles.versatiles.org/assets/sprites/basics/sprites"}],AF={"versatiles-shortbread":{attribution:'\xA9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',tiles:["https://tiles.versatiles.org/tiles/osm/{z}/{x}/{y}"],type:"vector",scheme:"xyz",bounds:[-180,-85.0511287798066,180,85.0511287798066],minzoom:0,maxzoom:14}},q_=[{id:"background",type:"background",paint:{"background-color":"rgb(249,244,238)"}},{source:"versatiles-shortbread",id:"water-ocean",type:"fill","source-layer":"ocean",paint:{"fill-color":"rgb(190,221,243)"}},{source:"versatiles-shortbread",id:"land-glacier",type:"fill","source-layer":"water_polygons",filter:["all",["==","kind","glacier"]],paint:{"fill-color":"rgb(255,255,255)"}},{source:"versatiles-shortbread",id:"land-commercial",type:"fill","source-layer":"land",filter:["all",["in","kind","commercial","retail"]],paint:{"fill-color":"rgb(215,215,215)","fill-opacity":{stops:[[5,0],[6,1]]}}},{source:"versatiles-shortbread",id:"land-industrial",type:"fill","source-layer":"land",filter:["all",["in","kind","industrial","quarry","railway"]],paint:{"fill-color":"rgba(235,232,218,0.333)","fill-opacity":{stops:[[5,0],[6,1]]}}},{source:"versatiles-shortbread",id:"land-residential",type:"fill","source-layer":"land",filter:["all",["in","kind","garages","residential"]],paint:{"fill-color":"rgb(215,215,215)","fill-opacity":{stops:[[5,0],[6,1]]}}},{source:"versatiles-shortbread",id:"land-agriculture",type:"fill","source-layer":"land",filter:["all",["in","kind","brownfield","farmland","farmyard","greenfield","greenhouse_horticulture","orchard","plant_nursery","vineyard"]],paint:{"fill-color":"rgb(224,228,222)","fill-opacity":{stops:[[5,0],[6,1]]}}},{source:"versatiles-shortbread",id:"land-waste",type:"fill","source-layer":"land",filter:["all",["in","kind","landfill"]],paint:{"fill-color":"rgb(221,219,212)","fill-opacity":{stops:[[5,0],[6,1]]}}},{source:"versatiles-shortbread",id:"land-park",type:"fill","source-layer":"land",filter:["all",["in","kind","park","village_green","recreation_ground"]],paint:{"fill-color":"rgb(221,221,204)","fill-opacity":{stops:[[5,0],[6,1]]}}},{source:"versatiles-shortbread",id:"land-garden",type:"fill","source-layer":"land",filter:["all",["in","kind","allotments","garden"]],paint:{"fill-color":"rgb(221,221,204)","fill-opacity":{stops:[[5,0],[6,1]]}}},{source:"versatiles-shortbread",id:"land-burial",type:"fill","source-layer":"land",filter:["all",["in","kind","cemetery","grave_yard"]],paint:{"fill-color":"rgb(221,221,216)","fill-opacity":{stops:[[5,0],[6,1]]}}},{source:"versatiles-shortbread",id:"land-leisure",type:"fill","source-layer":"land",filter:["all",["in","kind","miniature_golf","playground","golf_course"]],paint:{"fill-color":"rgb(228,232,226)","fill-opacity":{stops:[[5,0],[6,1]]}}},{source:"versatiles-shortbread",id:"land-rock",type:"fill","source-layer":"land",filter:["all",["in","kind","bare_rock","scree","shingle"]],paint:{"fill-color":"rgb(224,228,229)"}},{source:"versatiles-shortbread",id:"land-forest",type:"fill","source-layer":"land",filter:["all",["in","kind","forest"]],paint:{"fill-color":"rgb(210,220,205)","fill-opacity":{stops:[[5,0],[6,.2]]}}},{source:"versatiles-shortbread",id:"land-grass",type:"fill","source-layer":"land",filter:["all",["in","kind","grass","grassland","meadow","wet_meadow","scrub"]],paint:{"fill-color":"rgb(224,232,221)","fill-opacity":{stops:[[5,0],[6,1]]}}},{source:"versatiles-shortbread",id:"land-vegetation",type:"fill","source-layer":"land",filter:["all",["in","kind","heath","scrub"]],paint:{"fill-color":"rgb(221,221,204)","fill-opacity":{stops:[[5,0],[6,1]]}}},{source:"versatiles-shortbread",id:"land-sand",type:"fill","source-layer":"land",filter:["all",["in","kind","beach","sand"]],paint:{"fill-color":"rgb(250,250,237)"}},{source:"versatiles-shortbread",id:"land-wetland",type:"fill","source-layer":"land",filter:["all",["in","kind","bog","marsh","string_bog","swamp"]],paint:{"fill-color":"rgb(211,230,219)"}},{source:"versatiles-shortbread",id:"water-river",type:"line","source-layer":"water_lines",minzoom:10,filter:["all",["in","kind","river"],["!=","tunnel",!0],["!=","bridge",!0]],paint:{"line-color":"rgb(190,221,243)","line-width":{stops:[[9,0],[10,3],[15,5],[17,9],[18,20],[20,60]]}},layout:{"line-cap":"round","line-join":"round"}},{source:"versatiles-shortbread",id:"water-canal",type:"line","source-layer":"water_lines",filter:["all",["in","kind","canal"],["!=","tunnel",!0],["!=","bridge",!0]],paint:{"line-color":"rgb(190,221,243)","line-width":{stops:[[9,0],[10,2],[15,4],[17,8],[18,17],[20,50]]}},layout:{"line-cap":"round","line-join":"round"}},{source:"versatiles-shortbread",id:"water-stream",type:"line","source-layer":"water_lines",filter:["all",["in","kind","stream"],["!=","tunnel",!0],["!=","bridge",!0]],paint:{"line-color":"rgb(190,221,243)","line-width":{stops:[[13,0],[14,1],[15,2],[17,6],[18,12],[20,30]]}},layout:{"line-cap":"round","line-join":"round"}},{source:"versatiles-shortbread",id:"water-ditch",type:"line","source-layer":"water_lines",filter:["all",["in","kind","ditch","drain"],["!=","tunnel",!0],["!=","bridge",!0]],paint:{"line-color":"rgb(190,221,243)","line-width":{stops:[[14,0],[15,1],[17,4],[18,8],[20,20]]}},layout:{"line-cap":"round","line-join":"round"}},{source:"versatiles-shortbread",id:"water-covered",type:"line","source-layer":"water_lines",filter:["in","tunnel",!0,"culvert"],paint:{visibility:"none"},minzoom:15},{source:"versatiles-shortbread",id:"water-area",type:"fill","source-layer":"water_polygons",filter:["==","kind","water"],paint:{"fill-color":"rgb(190,221,243)","fill-opacity":{stops:[[8,0],[10,1]]}}},{source:"versatiles-shortbread",id:"water-area-river",type:"fill","source-layer":"water_polygons",filter:["==","kind","river"],paint:{"fill-color":"rgb(190,221,243)","fill-opacity":{stops:[[8,0],[10,1]]}}},{source:"versatiles-shortbread",id:"water-area-small",type:"fill","source-layer":"water_polygons",filter:["in","kind","reservoir","basin","dock"],paint:{"fill-color":"rgb(190,221,243)","fill-opacity":{stops:[[6,0],[8,1]]}}},{source:"versatiles-shortbread",id:"water-dam-area",type:"fill","source-layer":"dam_polygons",filter:["==","kind","dam"],paint:{"fill-color":"rgb(249,244,238)","fill-opacity":{stops:[[8,0],[10,1]]}}},{source:"versatiles-shortbread",id:"water-dam",type:"line","source-layer":"dam_lines",filter:["==","kind","dam"],paint:{"line-color":"rgb(190,221,243)","line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-cap":"round","line-join":"round"}},{source:"versatiles-shortbread",id:"water-pier-area",type:"fill","source-layer":"pier_polygons",filter:["in","kind","pier","breakwater","groyne"],paint:{"fill-color":"rgb(249,244,238)","fill-opacity":{stops:[[12,0],[13,1]]}}},{source:"versatiles-shortbread",id:"water-pier",type:"line","source-layer":"pier_lines",filter:["in","kind","pier","breakwater","groyne"],paint:{"line-color":"rgb(249,244,238)"},layout:{"line-cap":"round","line-join":"round"}},{source:"versatiles-shortbread",id:"site-dangerarea",type:"fill","source-layer":"sites",filter:["in","kind","danger_area"],paint:{"fill-color":"rgb(255,0,0)","fill-outline-color":"rgb(255,0,0)","fill-opacity":.3,"fill-pattern":"basics:pattern-warning"}},{source:"versatiles-shortbread",id:"site-university",type:"fill","source-layer":"sites",filter:["in","kind","university"],paint:{"fill-color":"rgb(255,255,128)","fill-opacity":.1}},{source:"versatiles-shortbread",id:"site-college",type:"fill","source-layer":"sites",filter:["in","kind","college"],paint:{"fill-color":"rgb(255,255,128)","fill-opacity":.1}},{source:"versatiles-shortbread",id:"site-school",type:"fill","source-layer":"sites",filter:["in","kind","school"],paint:{"fill-color":"rgb(255,255,128)","fill-opacity":.1}},{source:"versatiles-shortbread",id:"site-hospital",type:"fill","source-layer":"sites",filter:["in","kind","hospital"],paint:{"fill-color":"rgb(255,102,102)","fill-opacity":.1}},{source:"versatiles-shortbread",id:"site-prison",type:"fill","source-layer":"sites",filter:["in","kind","prison"],paint:{"fill-color":"rgb(253,242,252)","fill-pattern":"basics:pattern-striped","fill-opacity":.1}},{source:"versatiles-shortbread",id:"site-parking",type:"fill","source-layer":"sites",filter:["in","kind","parking"],paint:{"fill-color":"rgb(235,232,230)"}},{source:"versatiles-shortbread",id:"site-bicycleparking",type:"fill","source-layer":"sites",filter:["in","kind","bicycle_parking"],paint:{"fill-color":"rgb(235,232,230)"}},{source:"versatiles-shortbread",id:"site-construction",type:"fill","source-layer":"sites",filter:["in","kind","construction"],paint:{"fill-color":"rgb(169,169,169)","fill-pattern":"basics:pattern-hatched_thin","fill-opacity":.1}},{source:"versatiles-shortbread",id:"airport-area",type:"fill","source-layer":"street_polygons",filter:["in","kind","runway","taxiway"],paint:{"fill-color":"rgb(255,255,255)","fill-opacity":.5}},{source:"versatiles-shortbread",id:"airport-taxiway:outline",type:"line","source-layer":"streets",filter:["==","kind","taxiway"],paint:{"line-color":"rgb(207,205,202)","line-width":{stops:[[13,0],[14,2],[15,10],[16,14],[18,20],[20,40]]}},layout:{"line-join":"round"}},{source:"versatiles-shortbread",id:"airport-runway:outline",type:"line","source-layer":"streets",filter:["==","kind","runway"],paint:{"line-color":"rgb(207,205,202)","line-width":{stops:[[11,0],[12,6],[13,9],[14,16],[15,24],[16,40],[17,100],[18,160],[20,300]]}},layout:{"line-join":"round"}},{source:"versatiles-shortbread",id:"airport-taxiway",type:"line","source-layer":"streets",filter:["==","kind","taxiway"],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[13,0],[14,1],[15,8],[16,12],[18,18],[20,36]]},"line-opacity":{stops:[[13,0],[14,1]]}},layout:{"line-join":"round"}},{source:"versatiles-shortbread",id:"airport-runway",type:"line","source-layer":"streets",filter:["==","kind","runway"],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[11,0],[12,5],[13,8],[14,14],[15,22],[16,38],[17,98],[18,158],[20,298]]},"line-opacity":{stops:[[11,0],[12,1]]}},layout:{"line-join":"round"}},{source:"versatiles-shortbread",id:"building:outline",type:"fill","source-layer":"buildings",paint:{"fill-color":"rgb(223,219,215)","fill-opacity":{stops:[[14,0],[15,1]]}}},{source:"versatiles-shortbread",id:"building",type:"fill","source-layer":"buildings",paint:{"fill-color":"rgb(242,234,226)","fill-opacity":{stops:[[14,0],[15,1]]},"fill-translate":[-2,-2]}},{source:"versatiles-shortbread",id:"tunnel-street-pedestrian-zone",type:"fill","source-layer":"street_polygons",filter:["all",["==","tunnel",!0],["==","kind","pedestrian"]],paint:{"fill-color":"rgb(247,247,247)","fill-opacity":{stops:[[12,0],[13,1]]}}},{source:"versatiles-shortbread",id:"tunnel-way-footway:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","footway"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,5],[18,7],[19,12],[20,22]]},"line-color":"hsl(288,13%,86%)"},minzoom:15},{source:"versatiles-shortbread",id:"tunnel-way-steps:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","steps"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,5],[18,7],[19,12],[20,22]]},"line-color":"hsl(288,13%,86%)"},minzoom:15},{source:"versatiles-shortbread",id:"tunnel-way-path:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","path"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,5],[18,7],[19,12],[20,22]]},"line-color":"hsl(288,13%,86%)"},minzoom:15},{source:"versatiles-shortbread",id:"tunnel-way-cycleway:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","cycleway"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,5],[18,7],[19,12],[20,22]]},"line-color":"hsl(203,11%,87%)"},minzoom:15},{source:"versatiles-shortbread",id:"tunnel-street-track:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","track"],["==","tunnel",!0]],paint:{"line-color":"rgb(222,222,222)","line-width":{stops:[[14,2],[16,4],[18,18],[19,48],[20,96]]},"line-opacity":{stops:[[14,0],[15,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-pedestrian:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","pedestrian"],["==","tunnel",!0]],paint:{"line-color":"rgb(222,222,222)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-service:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","service"],["==","tunnel",!0]],paint:{"line-color":"rgb(221,220,218)","line-width":{stops:[[14,1],[16,3],[18,12],[19,32],[20,48]]},"line-opacity":{stops:[[15,0],[16,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-livingstreet:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","living_street"],["==","tunnel",!0]],paint:{"line-color":"rgb(222,222,222)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-residential:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","residential"],["==","tunnel",!0]],paint:{"line-color":"rgb(222,222,222)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-unclassified:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","unclassified"],["==","tunnel",!0]],paint:{"line-color":"rgb(222,222,222)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-tertiary-link:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","tertiary"],["==","link",!0]],paint:{"line-color":"rgb(222,222,222)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-secondary-link:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","secondary"],["==","link",!0]],paint:{"line-color":"rgb(221,220,218)","line-dasharray":[1,.3],"line-width":{stops:[[12,2],[14,3],[16,7],[18,14],[20,40]]}},layout:{"line-join":"round","line-cap":"round"},minzoom:13},{source:"versatiles-shortbread",id:"tunnel-street-primary-link:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","primary"],["==","link",!0]],paint:{"line-color":"rgb(221,220,218)","line-dasharray":[1,.3],"line-width":{stops:[[12,2],[14,3],[16,7],[18,14],[20,40]]}},layout:{"line-join":"round","line-cap":"round"},minzoom:13},{source:"versatiles-shortbread",id:"tunnel-street-trunk-link:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","trunk"],["==","link",!0]],paint:{"line-color":"rgb(221,220,218)","line-dasharray":[1,.3],"line-width":{stops:[[12,2],[14,3],[16,7],[18,14],[20,40]]}},layout:{"line-join":"round","line-cap":"round"},minzoom:13},{source:"versatiles-shortbread",id:"tunnel-street-motorway-link:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","motorway"],["==","link",!0]],paint:{"line-color":"rgb(221,220,218)","line-dasharray":[1,.3],"line-width":{stops:[[12,2],[14,3],[16,7],[18,14],[20,40]]}},layout:{"line-join":"round","line-cap":"round"},minzoom:12},{source:"versatiles-shortbread",id:"tunnel-street-tertiary:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","tertiary"],["!=","link",!0]],paint:{"line-color":"rgb(222,222,222)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-secondary:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","secondary"],["!=","link",!0]],paint:{"line-color":"rgb(215,215,215)","line-dasharray":[1,.3],"line-width":{stops:[[11,2],[14,5],[16,8],[18,30],[19,68],[20,138]]},"line-opacity":{stops:[[11,0],[12,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-primary:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","primary"],["!=","link",!0]],paint:{"line-color":"rgb(220,220,220)","line-dasharray":[1,.3],"line-width":{stops:[[8,0],[9,1],[10,4],[14,6],[16,12],[18,36],[19,74],[20,144]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-trunk:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","trunk"],["!=","link",!0]],paint:{"line-color":"rgb(220,220,220)","line-dasharray":[1,.3],"line-width":{stops:[[7,0],[8,2],[10,4],[14,6],[16,12],[18,36],[19,74],[20,144]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-motorway:outline",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","motorway"],["!=","link",!0]],paint:{"line-color":"rgb(220,220,220)","line-dasharray":[1,.3],"line-width":{stops:[[5,0],[6,2],[10,5],[14,5],[16,14],[18,38],[19,84],[20,168]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-way-footway",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","footway"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,4],[18,6],[19,10],[20,20]]},"line-color":"hsl(288,33%,94%)","line-dasharray":[1,.2]},minzoom:15},{source:"versatiles-shortbread",id:"tunnel-way-steps",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","steps"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,4],[18,6],[19,10],[20,20]]},"line-color":"hsl(288,33%,94%)","line-dasharray":[1,.2]},minzoom:15},{source:"versatiles-shortbread",id:"tunnel-way-path",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","path"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,4],[18,6],[19,10],[20,20]]},"line-color":"hsl(288,33%,94%)","line-dasharray":[1,.2]},minzoom:15},{source:"versatiles-shortbread",id:"tunnel-way-cycleway",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","cycleway"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,4],[18,6],[19,10],[20,20]]},"line-color":"hsl(203,30%,95%)","line-dasharray":[1,.2]},minzoom:15},{source:"versatiles-shortbread",id:"tunnel-street-track",type:"line","source-layer":"streets",filter:["all",["==","kind","track"],["==","tunnel",!0]],paint:{"line-color":"rgb(247,247,247)","line-width":{stops:[[14,1],[16,3],[18,16],[19,44],[20,88]]},"line-opacity":{stops:[[14,0],[15,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-pedestrian",type:"line","source-layer":"streets",filter:["all",["==","kind","pedestrian"],["==","tunnel",!0]],paint:{"line-color":"rgb(247,247,247)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-service",type:"line","source-layer":"streets",filter:["all",["==","kind","service"],["==","tunnel",!0]],paint:{"line-color":"rgb(247,247,247)","line-width":{stops:[[14,1],[16,2],[18,10],[19,28],[20,40]]},"line-opacity":{stops:[[15,0],[16,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-livingstreet",type:"line","source-layer":"streets",filter:["all",["==","kind","living_street"],["==","tunnel",!0]],paint:{"line-color":"rgb(247,247,247)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-residential",type:"line","source-layer":"streets",filter:["all",["==","kind","residential"],["==","tunnel",!0]],paint:{"line-color":"rgb(247,247,247)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-unclassified",type:"line","source-layer":"streets",filter:["all",["==","kind","unclassified"],["==","tunnel",!0]],paint:{"line-color":"rgb(247,247,247)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-track-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","track"],["==","bicycle","designated"],["==","tunnel",!0]],paint:{"line-color":"rgb(247,247,247)"},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-pedestrian-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","pedestrian"],["==","bicycle","designated"],["==","tunnel",!0]],paint:{"line-color":"rgb(239,249,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-service-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","service"],["==","bicycle","designated"],["==","tunnel",!0]],paint:{"line-color":"rgb(247,247,247)"},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-livingstreet-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","living_street"],["==","bicycle","designated"],["==","tunnel",!0]],paint:{"line-color":"rgb(239,249,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-residential-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","residential"],["==","bicycle","designated"],["==","tunnel",!0]],paint:{"line-color":"rgb(239,249,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-unclassified-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","unclassified"],["==","bicycle","designated"],["==","tunnel",!0]],paint:{"line-color":"rgb(239,249,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-tertiary-link",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","tertiary"],["==","link",!0]],paint:{"line-color":"rgb(247,247,247)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-secondary-link",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","secondary"],["==","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[12,1],[14,2],[16,5],[18,12],[20,38]]}},layout:{"line-join":"round","line-cap":"butt"},minzoom:13},{source:"versatiles-shortbread",id:"tunnel-street-primary-link",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","primary"],["==","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[12,1],[14,2],[16,5],[18,12],[20,38]]}},layout:{"line-join":"round","line-cap":"butt"},minzoom:13},{source:"versatiles-shortbread",id:"tunnel-street-trunk-link",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","trunk"],["==","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[12,1],[14,2],[16,5],[18,12],[20,38]]}},layout:{"line-join":"round","line-cap":"butt"},minzoom:13},{source:"versatiles-shortbread",id:"tunnel-street-motorway-link",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","motorway"],["==","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[12,1],[14,2],[16,5],[18,12],[20,38]]}},layout:{"line-join":"round","line-cap":"butt"},minzoom:12},{source:"versatiles-shortbread",id:"tunnel-street-tertiary",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","tertiary"],["!=","link",!0]],paint:{"line-color":"rgb(247,247,247)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"tunnel-street-secondary",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","secondary"],["!=","link",!0]],paint:{"line-color":"rgb(240,240,240)","line-width":{stops:[[11,1],[14,4],[16,6],[18,28],[19,64],[20,130]]},"line-opacity":{stops:[[11,0],[12,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"tunnel-street-primary",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","primary"],["!=","link",!0]],paint:{"line-color":"rgb(240,240,240)","line-width":{stops:[[8,0],[9,2],[10,3],[14,5],[16,10],[18,34],[19,70],[20,140]]},"line-opacity":{stops:[[8,0],[9,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"tunnel-street-trunk",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","trunk"],["!=","link",!0]],paint:{"line-color":"rgb(240,240,240)","line-width":{stops:[[7,0],[8,1],[10,3],[14,5],[16,10],[18,34],[19,70],[20,140]]},"line-opacity":{stops:[[7,0],[8,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"tunnel-street-motorway",type:"line","source-layer":"streets",filter:["all",["==","tunnel",!0],["in","kind","motorway"],["!=","link",!0]],paint:{"line-color":"rgb(240,240,240)","line-width":{stops:[[5,0],[6,1],[10,4],[14,4],[16,12],[18,36],[19,80],[20,160]]},"line-opacity":{stops:[[5,0],[6,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"tunnel-transport-tram:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","tram"],["!has","service"],["==","tunnel",!0]],minzoom:15,paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[15,0],[16,5],[18,7],[20,20]]},"line-dasharray":[.1,.5]}},{source:"versatiles-shortbread",id:"tunnel-transport-narrowgauge:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","narrow_gauge"],["!has","service"],["==","tunnel",!0]],minzoom:15,paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[15,0],[16,5],[18,7],[20,20]]},"line-dasharray":[.1,.5]}},{source:"versatiles-shortbread",id:"tunnel-transport-subway:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","subway"],["!has","service"],["==","tunnel",!0]],paint:{"line-color":"rgb(166,184,199)","line-width":{stops:[[11,0],[12,1],[15,3],[16,3],[18,6],[19,8],[20,10]]},"line-opacity":{stops:[[11,0],[12,.5]]}}},{source:"versatiles-shortbread",id:"tunnel-transport-lightrail:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","light_rail"],["!has","service"],["==","tunnel",!0]],paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[8,1],[13,1],[15,1],[20,14]]},"line-opacity":{stops:[[11,0],[12,.5]]}},minzoom:8},{source:"versatiles-shortbread",id:"tunnel-transport-lightrail-service:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","light_rail"],["has","service"],["==","tunnel",!0]],paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[14,0],[15,1],[16,1],[20,14]]}},minzoom:14},{source:"versatiles-shortbread",id:"tunnel-transport-rail:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","rail"],["!has","service"],["==","tunnel",!0]],paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[8,1],[13,1],[15,1],[20,14]]},"line-opacity":{stops:[[8,0],[9,.3]]}},minzoom:8},{source:"versatiles-shortbread",id:"tunnel-transport-rail-service:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","rail"],["has","service"],["==","tunnel",!0]],paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[14,0],[15,1],[16,1],[20,14]]}},minzoom:14},{source:"versatiles-shortbread",id:"tunnel-transport-monorail:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","monorail"],["==","tunnel",!0]],minzoom:15,paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[15,0],[16,5],[18,7],[20,20]]},"line-dasharray":[.1,.5]}},{source:"versatiles-shortbread",id:"tunnel-transport-funicular:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","funicular"],["==","tunnel",!0]],minzoom:15,paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[15,0],[16,5],[18,7],[20,20]]},"line-dasharray":[.1,.5]}},{source:"versatiles-shortbread",id:"tunnel-transport-tram",type:"line","source-layer":"streets",filter:["all",["in","kind","tram"],["!has","service"],["==","tunnel",!0]],minzoom:13,paint:{"line-width":{stops:[[13,0],[16,1],[17,2],[18,3],[20,5]]},"line-color":"rgb(177,187,196)"}},{source:"versatiles-shortbread",id:"tunnel-transport-narrowgauge",type:"line","source-layer":"streets",filter:["all",["in","kind","narrow_gauge"],["!has","service"],["==","tunnel",!0]],minzoom:13,paint:{"line-width":{stops:[[13,0],[16,1],[17,2],[18,3],[20,5]]},"line-color":"rgb(177,187,196)"}},{source:"versatiles-shortbread",id:"tunnel-transport-subway",type:"line","source-layer":"streets",filter:["all",["in","kind","subway"],["!has","service"],["==","tunnel",!0]],paint:{"line-color":"rgb(188,202,213)","line-width":{stops:[[11,0],[12,1],[15,2],[16,2],[18,5],[19,6],[20,8]]},"line-dasharray":[2,2],"line-opacity":{stops:[[14,0],[15,1]]}}},{source:"versatiles-shortbread",id:"tunnel-transport-lightrail",type:"line","source-layer":"streets",filter:["all",["in","kind","light_rail"],["!has","service"],["==","tunnel",!0]],paint:{"line-color":"rgb(197,204,211)","line-width":{stops:[[14,0],[15,1],[20,10]]},"line-dasharray":[2,2],"line-opacity":{stops:[[14,0],[15,1]]}},minzoom:14},{source:"versatiles-shortbread",id:"tunnel-transport-lightrail-service",type:"line","source-layer":"streets",filter:["all",["in","kind","light_rail"],["has","service"],["==","tunnel",!0]],paint:{"line-color":"rgb(197,204,211)","line-width":{stops:[[15,0],[16,1],[20,10]]},"line-dasharray":[2,2]},minzoom:15},{source:"versatiles-shortbread",id:"tunnel-transport-rail",type:"line","source-layer":"streets",filter:["all",["in","kind","rail"],["!has","service"],["==","tunnel",!0]],paint:{"line-color":"rgb(197,204,211)","line-width":{stops:[[14,0],[15,1],[20,10]]},"line-dasharray":[2,2],"line-opacity":{stops:[[14,0],[15,.3]]}},minzoom:14},{source:"versatiles-shortbread",id:"tunnel-transport-rail-service",type:"line","source-layer":"streets",filter:["all",["in","kind","rail"],["has","service"],["==","tunnel",!0]],paint:{"line-color":"rgb(197,204,211)","line-width":{stops:[[15,0],[16,1],[20,10]]},"line-dasharray":[2,2]},minzoom:15},{source:"versatiles-shortbread",id:"tunnel-transport-monorail",type:"line","source-layer":"streets",filter:["all",["in","kind","monorail"],["==","tunnel",!0]],minzoom:13,paint:{"line-width":{stops:[[13,0],[16,1],[17,2],[18,3],[20,5]]},"line-color":"rgb(177,187,196)"}},{source:"versatiles-shortbread",id:"tunnel-transport-funicular",type:"line","source-layer":"streets",filter:["all",["in","kind","funicular"],["==","tunnel",!0]],minzoom:13,paint:{"line-width":{stops:[[13,0],[16,1],[17,2],[18,3],[20,5]]},"line-color":"rgb(177,187,196)"}},{source:"versatiles-shortbread",id:"bridge",type:"fill","source-layer":"bridges",paint:{"fill-color":"rgb(244,239,233)","fill-antialias":!0,"fill-opacity":.8}},{source:"versatiles-shortbread",id:"street-pedestrian-zone",type:"fill","source-layer":"street_polygons",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["==","kind","pedestrian"]],paint:{"fill-color":"rgba(251,235,255,0.25)","fill-opacity":{stops:[[12,0],[13,1],[14,0],[15,1]]}}},{source:"versatiles-shortbread",id:"way-footway:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","footway"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,5],[18,7],[19,12],[20,22]]},"line-color":"rgb(226,212,230)"},minzoom:15},{source:"versatiles-shortbread",id:"way-steps:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","steps"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,5],[18,7],[19,12],[20,22]]},"line-color":"rgb(226,212,230)"},minzoom:15},{source:"versatiles-shortbread",id:"way-path:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","path"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,5],[18,7],[19,12],[20,22]]},"line-color":"rgb(226,212,230)"},minzoom:15},{source:"versatiles-shortbread",id:"way-cycleway:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","cycleway"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,5],[18,7],[19,12],[20,22]]},"line-color":"rgb(215,224,230)"},minzoom:15},{source:"versatiles-shortbread",id:"street-track:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","track"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(207,205,202)","line-width":{stops:[[14,2],[16,4],[18,18],[19,48],[20,96]]},"line-opacity":{stops:[[14,0],[15,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-pedestrian:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","pedestrian"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(207,205,202)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-service:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","service"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(221,220,218)","line-width":{stops:[[14,1],[16,3],[18,12],[19,32],[20,48]]},"line-opacity":{stops:[[15,0],[16,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-livingstreet:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","living_street"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(207,205,202)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-residential:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","residential"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(207,205,202)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-unclassified:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","unclassified"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(207,205,202)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-tertiary-link:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","tertiary"],["==","link",!0]],paint:{"line-color":"rgb(207,205,202)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-secondary-link:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","secondary"],["==","link",!0]],paint:{"line-color":"rgb(221,220,218)","line-width":{stops:[[12,2],[14,3],[16,7],[18,14],[20,40]]}},layout:{"line-join":"round","line-cap":"round"},minzoom:13},{source:"versatiles-shortbread",id:"street-primary-link:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","primary"],["==","link",!0]],paint:{"line-color":"rgb(221,220,218)","line-width":{stops:[[12,2],[14,3],[16,7],[18,14],[20,40]]}},layout:{"line-join":"round","line-cap":"round"},minzoom:13},{source:"versatiles-shortbread",id:"street-trunk-link:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","trunk"],["==","link",!0]],paint:{"line-color":"rgb(221,220,218)","line-width":{stops:[[12,2],[14,3],[16,7],[18,14],[20,40]]}},layout:{"line-join":"round","line-cap":"round"},minzoom:13},{source:"versatiles-shortbread",id:"street-motorway-link:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","motorway"],["==","link",!0]],paint:{"line-color":"rgb(221,220,218)","line-width":{stops:[[12,2],[14,3],[16,7],[18,14],[20,40]]}},layout:{"line-join":"round","line-cap":"round"},minzoom:12},{source:"versatiles-shortbread",id:"street-tertiary:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","tertiary"],["!=","link",!0]],paint:{"line-color":"rgb(207,205,202)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-secondary:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","secondary"],["!=","link",!0]],paint:{"line-color":"rgb(220,220,220)","line-width":{stops:[[7,0],[8,1],[10,4],[14,4],[16,12],[18,36],[19,80],[20,160]]},"line-opacity":{stops:[[5,0],[6,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-primary:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","primary"],["!=","link",!0]],paint:{"line-color":"rgb(220,220,220)","line-width":{stops:[[8,0],[9,1],[10,4],[14,6],[16,12],[18,36],[19,74],[20,144]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-trunk:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","trunk"],["!=","link",!0]],paint:{"line-color":"rgb(220,220,220)","line-width":{stops:[[7,0],[8,2],[10,4],[14,6],[16,12],[18,36],[19,74],[20,144]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"boundary-state:outline",type:"line","source-layer":"boundaries",filter:["all",["==","admin_level",4],["!=","maritime",!0],["!=","disputed",!0],["!=","coastline",!0]],paint:{"line-color":"rgb(250,245,240)","line-blur":2,"line-width":{stops:[[5,0],[6,2],[10,4]]},"line-opacity":.75},layout:{"line-cap":"round","line-join":"round"}},{source:"versatiles-shortbread",id:"boundary-state",type:"line","source-layer":"boundaries",filter:["all",["==","admin_level",4],["!=","maritime",!0],["!=","disputed",!0],["!=","coastline",!0]],paint:{"line-color":"rgb(150,150,150)","line-width":{stops:[[5,0],[6,1],[10,2]]},"line-dasharray":[2,2]},layout:{"line-cap":"round","line-join":"round"}},{source:"versatiles-shortbread",id:"street-motorway:outline",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","motorway"],["!=","link",!0]],paint:{"line-color":"rgb(220,220,220)","line-width":{stops:[[7,0],[8,1],[10,4],[14,4],[16,12],[18,36],[19,80],[20,160]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"way-footway",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","footway"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,4],[18,6],[19,10],[20,20]]},"line-color":"rgb(251,235,255)"},minzoom:15},{source:"versatiles-shortbread",id:"way-steps",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","steps"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,4],[18,6],[19,10],[20,20]]},"line-color":"rgb(251,235,255)"},minzoom:15},{source:"versatiles-shortbread",id:"way-path",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","path"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,4],[18,6],[19,10],[20,20]]},"line-color":"rgb(251,235,255)"},minzoom:15},{source:"versatiles-shortbread",id:"way-cycleway",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","cycleway"]],layout:{"line-cap":"round"},paint:{"line-width":{stops:[[15,0],[16,4],[18,6],[19,10],[20,20]]},"line-color":"rgb(239,249,255)"},minzoom:15},{source:"versatiles-shortbread",id:"street-track",type:"line","source-layer":"streets",filter:["all",["==","kind","track"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[14,1],[16,3],[18,16],[19,44],[20,88]]},"line-opacity":{stops:[[14,0],[15,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-pedestrian",type:"line","source-layer":"streets",filter:["all",["==","kind","pedestrian"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(251,235,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,0],[14,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-service",type:"line","source-layer":"streets",filter:["all",["==","kind","service"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(247,247,247)","line-width":{stops:[[14,1],[16,2],[18,10],[19,28],[20,40]]},"line-opacity":{stops:[[15,0],[16,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-livingstreet",type:"line","source-layer":"streets",filter:["all",["==","kind","living_street"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-residential",type:"line","source-layer":"streets",filter:["all",["==","kind","residential"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-unclassified",type:"line","source-layer":"streets",filter:["all",["==","kind","unclassified"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-track-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","track"],["==","bicycle","designated"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(255,255,255)"},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-pedestrian-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","pedestrian"],["==","bicycle","designated"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(239,249,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-service-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","service"],["==","bicycle","designated"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(255,255,255)"},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-livingstreet-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","living_street"],["==","bicycle","designated"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(239,249,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-residential-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","residential"],["==","bicycle","designated"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(239,249,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-unclassified-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","unclassified"],["==","bicycle","designated"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(239,249,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-tertiary-link",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","tertiary"],["==","link",!0]],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-secondary-link",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","secondary"],["==","link",!0]],paint:{"line-color":"rgb(255,238,170)","line-width":{stops:[[12,1],[14,2],[16,5],[18,12],[20,38]]}},layout:{"line-join":"round","line-cap":"round"},minzoom:13},{source:"versatiles-shortbread",id:"street-primary-link",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","primary"],["==","link",!0]],paint:{"line-color":"rgb(255,238,170)","line-width":{stops:[[12,1],[14,2],[16,5],[18,12],[20,38]]}},layout:{"line-join":"round","line-cap":"round"},minzoom:13},{source:"versatiles-shortbread",id:"street-trunk-link",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","trunk"],["==","link",!0]],paint:{"line-color":"rgb(255,238,170)","line-width":{stops:[[12,1],[14,2],[16,5],[18,12],[20,38]]}},layout:{"line-join":"round","line-cap":"round"},minzoom:13},{source:"versatiles-shortbread",id:"street-motorway-link",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","motorway"],["==","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[12,1],[14,2],[16,5],[18,12],[20,38]]}},layout:{"line-join":"round","line-cap":"round"},minzoom:12},{source:"versatiles-shortbread",id:"street-tertiary",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","tertiary"],["!=","link",!0]],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-secondary",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","secondary"],["!=","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[7,0],[8,0],[10,3],[14,3],[16,10],[18,34],[19,78],[20,158]]},"line-opacity":{stops:[[5,0],[6,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-primary",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","primary"],["!=","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[8,0],[9,2],[10,3],[14,5],[16,10],[18,34],[19,70],[20,140]]},"line-opacity":{stops:[[8,0],[9,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-trunk",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","trunk"],["!=","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[7,0],[8,1],[10,3],[14,5],[16,10],[18,34],[19,70],[20,140]]},"line-opacity":{stops:[[7,0],[8,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"street-motorway",type:"line","source-layer":"streets",filter:["all",["!=","bridge",!0],["!=","tunnel",!0],["in","kind","motorway"],["!=","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[7,0],[8,0],[10,3],[14,3],[16,10],[18,34],[19,78],[20,158]]},"line-opacity":{stops:[[5,0],[6,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"transport-tram:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","tram"],["!has","service"],["!=","bridge",!0],["!=","tunnel",!0]],minzoom:15,paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[15,0],[16,5],[18,7],[20,20]]},"line-dasharray":[.1,.5]}},{source:"versatiles-shortbread",id:"transport-narrowgauge:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","narrow_gauge"],["!has","service"],["!=","bridge",!0],["!=","tunnel",!0]],minzoom:15,paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[15,0],[16,5],[18,7],[20,20]]},"line-dasharray":[.1,.5]}},{source:"versatiles-shortbread",id:"transport-subway:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","subway"],["!has","service"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(166,184,199)","line-width":{stops:[[11,0],[12,1],[15,3],[16,3],[18,6],[19,8],[20,10]]},"line-opacity":{stops:[[11,0],[12,1]]}}},{source:"versatiles-shortbread",id:"transport-lightrail:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","light_rail"],["!has","service"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[8,1],[13,1],[15,1],[20,14]]},"line-opacity":{stops:[[11,0],[12,1]]}},minzoom:8},{source:"versatiles-shortbread",id:"transport-lightrail-service:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","light_rail"],["has","service"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[14,0],[15,1],[16,1],[20,14]]}},minzoom:14},{source:"versatiles-shortbread",id:"transport-rail:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","rail"],["!has","service"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[8,1],[13,1],[15,1],[20,14]]},"line-opacity":{stops:[[8,0],[9,1]]}},minzoom:8},{source:"versatiles-shortbread",id:"transport-rail-service:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","rail"],["has","service"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[14,0],[15,1],[16,1],[20,14]]}},minzoom:14},{source:"versatiles-shortbread",id:"transport-monorail:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","monorail"],["!=","bridge",!0],["!=","tunnel",!0]],minzoom:15,paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[15,0],[16,5],[18,7],[20,20]]},"line-dasharray":[.1,.5]}},{source:"versatiles-shortbread",id:"transport-funicular:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","funicular"],["!=","bridge",!0],["!=","tunnel",!0]],minzoom:15,paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[15,0],[16,5],[18,7],[20,20]]},"line-dasharray":[.1,.5]}},{source:"versatiles-shortbread",id:"transport-tram",type:"line","source-layer":"streets",filter:["all",["in","kind","tram"],["!has","service"],["!=","bridge",!0],["!=","tunnel",!0]],minzoom:13,paint:{"line-width":{stops:[[13,0],[16,1],[17,2],[18,3],[20,5]]},"line-color":"rgb(177,187,196)"}},{source:"versatiles-shortbread",id:"transport-narrowgauge",type:"line","source-layer":"streets",filter:["all",["in","kind","narrow_gauge"],["!has","service"],["!=","bridge",!0],["!=","tunnel",!0]],minzoom:13,paint:{"line-width":{stops:[[13,0],[16,1],[17,2],[18,3],[20,5]]},"line-color":"rgb(177,187,196)"}},{source:"versatiles-shortbread",id:"transport-subway",type:"line","source-layer":"streets",filter:["all",["in","kind","subway"],["!has","service"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(188,202,213)","line-width":{stops:[[11,0],[12,1],[15,2],[16,2],[18,5],[19,6],[20,8]]},"line-dasharray":[2,2],"line-opacity":{stops:[[14,0],[15,1]]}}},{source:"versatiles-shortbread",id:"transport-lightrail",type:"line","source-layer":"streets",filter:["all",["in","kind","light_rail"],["!has","service"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(197,204,211)","line-width":{stops:[[14,0],[15,1],[20,10]]},"line-dasharray":[2,2],"line-opacity":{stops:[[14,0],[15,1]]}},minzoom:14},{source:"versatiles-shortbread",id:"transport-lightrail-service",type:"line","source-layer":"streets",filter:["all",["in","kind","light_rail"],["has","service"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(197,204,211)","line-width":{stops:[[15,0],[16,1],[20,10]]},"line-dasharray":[2,2]},minzoom:15},{source:"versatiles-shortbread",id:"transport-rail",type:"line","source-layer":"streets",filter:["all",["in","kind","rail"],["!has","service"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(197,204,211)","line-width":{stops:[[14,0],[15,1],[20,10]]},"line-dasharray":[2,2],"line-opacity":{stops:[[14,0],[15,1]]}},minzoom:14},{source:"versatiles-shortbread",id:"transport-rail-service",type:"line","source-layer":"streets",filter:["all",["in","kind","rail"],["has","service"],["!=","bridge",!0],["!=","tunnel",!0]],paint:{"line-color":"rgb(197,204,211)","line-width":{stops:[[15,0],[16,1],[20,10]]},"line-dasharray":[2,2]},minzoom:15},{source:"versatiles-shortbread",id:"transport-monorail",type:"line","source-layer":"streets",filter:["all",["in","kind","monorail"],["!=","bridge",!0],["!=","tunnel",!0]],minzoom:13,paint:{"line-width":{stops:[[13,0],[16,1],[17,2],[18,3],[20,5]]},"line-color":"rgb(177,187,196)"}},{source:"versatiles-shortbread",id:"transport-funicular",type:"line","source-layer":"streets",filter:["all",["in","kind","funicular"],["!=","bridge",!0],["!=","tunnel",!0]],minzoom:13,paint:{"line-width":{stops:[[13,0],[16,1],[17,2],[18,3],[20,5]]},"line-color":"rgb(177,187,196)"}},{source:"versatiles-shortbread",id:"transport-ferry",type:"line","source-layer":"ferries",minzoom:10,paint:{"line-color":"rgb(171,199,219)","line-width":{stops:[[10,1],[13,2],[14,3],[16,4],[17,6]]},"line-opacity":{stops:[[10,0],[11,1]]},"line-dasharray":[1,1]}},{source:"versatiles-shortbread",id:"bridge-way-footway:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","footway"]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":.5,"line-width":{stops:[[15,0],[16,7],[18,10],[19,17],[20,31]]}},minzoom:15},{source:"versatiles-shortbread",id:"bridge-way-steps:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","steps"]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":.5,"line-width":{stops:[[15,0],[16,7],[18,10],[19,17],[20,31]]}},minzoom:15},{source:"versatiles-shortbread",id:"bridge-way-path:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","path"]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":.5,"line-width":{stops:[[15,0],[16,7],[18,10],[19,17],[20,31]]}},minzoom:15},{source:"versatiles-shortbread",id:"bridge-way-cycleway:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","cycleway"]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":.5,"line-width":{stops:[[15,0],[16,7],[18,10],[19,17],[20,31]]}},minzoom:15},{source:"versatiles-shortbread",id:"bridge-street-track:bridge",type:"line","source-layer":"streets",filter:["all",["==","kind","track"],["==","bridge",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":{stops:[[14,0],[15,1]]},"line-width":{stops:[[14,3],[16,6],[18,25],[19,67],[20,134]]}}},{source:"versatiles-shortbread",id:"bridge-street-pedestrian:bridge",type:"line","source-layer":"streets",filter:["all",["==","kind","pedestrian"],["==","bridge",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":{stops:[[12,0],[13,1]]},"line-width":{stops:[[12,3],[14,4],[16,8],[18,36],[19,90],[20,179]]}}},{source:"versatiles-shortbread",id:"bridge-street-service:bridge",type:"line","source-layer":"streets",filter:["all",["==","kind","service"],["==","bridge",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":{stops:[[14,0],[15,1]]},"line-width":{stops:[[14,3],[16,6],[18,25],[19,67],[20,134]]}}},{source:"versatiles-shortbread",id:"bridge-street-livingstreet:bridge",type:"line","source-layer":"streets",filter:["all",["==","kind","living_street"],["==","bridge",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":{stops:[[12,0],[13,1]]},"line-width":{stops:[[12,3],[14,4],[16,8],[18,36],[19,90],[20,179]]}}},{source:"versatiles-shortbread",id:"bridge-street-residential:bridge",type:"line","source-layer":"streets",filter:["all",["==","kind","residential"],["==","bridge",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":{stops:[[12,0],[13,1]]},"line-width":{stops:[[12,3],[14,4],[16,8],[18,36],[19,90],[20,179]]}}},{source:"versatiles-shortbread",id:"bridge-street-unclassified:bridge",type:"line","source-layer":"streets",filter:["all",["==","kind","unclassified"],["==","bridge",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":{stops:[[12,0],[13,1]]},"line-width":{stops:[[12,3],[14,4],[16,8],[18,36],[19,90],[20,179]]}}},{source:"versatiles-shortbread",id:"bridge-street-tertiary-link:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","tertiary"],["==","link",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":{stops:[[12,0],[13,1]]},"line-width":{stops:[[12,3],[14,4],[16,8],[18,36],[19,90],[20,179]]}}},{source:"versatiles-shortbread",id:"bridge-street-secondary-link:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","secondary"],["==","link",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":.5,"line-width":{stops:[[12,3],[14,4],[16,10],[18,20],[20,56]]}},minzoom:13},{source:"versatiles-shortbread",id:"bridge-street-primary-link:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","primary"],["==","link",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":.5,"line-width":{stops:[[12,3],[14,4],[16,10],[18,20],[20,56]]}},minzoom:13},{source:"versatiles-shortbread",id:"bridge-street-trunk-link:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","trunk"],["==","link",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":.5,"line-width":{stops:[[12,3],[14,4],[16,10],[18,20],[20,56]]}},minzoom:13},{source:"versatiles-shortbread",id:"bridge-street-motorway-link:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","motorway"],["==","link",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":.5,"line-width":{stops:[[12,3],[14,4],[16,10],[18,20],[20,56]]}},minzoom:12},{source:"versatiles-shortbread",id:"bridge-street-tertiary:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","tertiary"],["!=","link",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":{stops:[[12,0],[13,1]]},"line-width":{stops:[[12,3],[14,4],[16,8],[18,36],[19,90],[20,179]]}}},{source:"versatiles-shortbread",id:"bridge-street-secondary:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","secondary"],["!=","link",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":{stops:[[11,0],[12,1]]},"line-width":{stops:[[11,3],[14,7],[16,11],[18,42],[19,95],[20,193]]}}},{source:"versatiles-shortbread",id:"bridge-street-primary:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","primary"],["!=","link",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":.5,"line-width":{stops:[[8,0],[9,1],[10,6],[14,8],[16,17],[18,50],[19,104],[20,202]]}}},{source:"versatiles-shortbread",id:"bridge-street-trunk:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","trunk"],["!=","link",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":.5,"line-width":{stops:[[7,0],[8,3],[10,6],[14,8],[16,17],[18,50],[19,104],[20,202]]}}},{source:"versatiles-shortbread",id:"bridge-street-motorway:bridge",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","motorway"],["!=","link",!0]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgb(244,239,233)","line-opacity":.5,"line-width":{stops:[[5,0],[6,3],[10,7],[14,7],[16,20],[18,53],[19,118],[20,235]]}}},{source:"versatiles-shortbread",id:"bridge-street-pedestrian-zone",type:"fill","source-layer":"street_polygons",filter:["all",["==","bridge",!0],["==","kind","pedestrian"]],paint:{"fill-color":"rgb(255,255,255)","fill-opacity":{stops:[[12,0],[13,1]]}}},{source:"versatiles-shortbread",id:"bridge-way-footway:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","footway"]],layout:{"line-cap":"butt"},paint:{"line-width":{stops:[[15,0],[16,5],[18,7],[19,12],[20,22]]},"line-color":"rgb(226,212,230)"},minzoom:15},{source:"versatiles-shortbread",id:"bridge-way-steps:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","steps"]],layout:{"line-cap":"butt"},paint:{"line-width":{stops:[[15,0],[16,5],[18,7],[19,12],[20,22]]},"line-color":"rgb(226,212,230)"},minzoom:15},{source:"versatiles-shortbread",id:"bridge-way-path:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","path"]],layout:{"line-cap":"butt"},paint:{"line-width":{stops:[[15,0],[16,5],[18,7],[19,12],[20,22]]},"line-color":"rgb(226,212,230)"},minzoom:15},{source:"versatiles-shortbread",id:"bridge-way-cycleway:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","cycleway"]],layout:{"line-cap":"butt"},paint:{"line-width":{stops:[[15,0],[16,5],[18,7],[19,12],[20,22]]},"line-color":"rgb(215,224,230)"},minzoom:15},{source:"versatiles-shortbread",id:"bridge-street-track:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","track"],["==","bridge",!0]],paint:{"line-color":"rgb(217,217,217)","line-width":{stops:[[14,2],[16,4],[18,18],[19,48],[20,96]]},"line-opacity":{stops:[[14,0],[15,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-pedestrian:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","pedestrian"],["==","bridge",!0]],paint:{"line-color":"rgb(217,217,217)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-service:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","service"],["==","bridge",!0]],paint:{"line-color":"rgb(221,220,218)","line-width":{stops:[[14,1],[16,3],[18,12],[19,32],[20,48]]},"line-opacity":{stops:[[15,0],[16,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-livingstreet:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","living_street"],["==","bridge",!0]],paint:{"line-color":"rgb(217,217,217)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-residential:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","residential"],["==","bridge",!0]],paint:{"line-color":"rgb(217,217,217)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-unclassified:outline",type:"line","source-layer":"streets",filter:["all",["==","kind","unclassified"],["==","bridge",!0]],paint:{"line-color":"rgb(217,217,217)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-tertiary-link:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","tertiary"],["==","link",!0]],paint:{"line-color":"rgb(217,217,217)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-secondary-link:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","secondary"],["==","link",!0]],paint:{"line-color":"rgb(233,172,119)","line-width":{stops:[[12,2],[14,3],[16,7],[18,14],[20,40]]}},layout:{"line-join":"round","line-cap":"butt"},minzoom:13},{source:"versatiles-shortbread",id:"bridge-street-primary-link:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","primary"],["==","link",!0]],paint:{"line-color":"rgb(233,172,119)","line-width":{stops:[[12,2],[14,3],[16,7],[18,14],[20,40]]}},layout:{"line-join":"round","line-cap":"butt"},minzoom:13},{source:"versatiles-shortbread",id:"bridge-street-trunk-link:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","trunk"],["==","link",!0]],paint:{"line-color":"rgb(233,172,119)","line-width":{stops:[[12,2],[14,3],[16,7],[18,14],[20,40]]}},layout:{"line-join":"round","line-cap":"butt"},minzoom:13},{source:"versatiles-shortbread",id:"bridge-street-motorway-link:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","motorway"],["==","link",!0]],paint:{"line-color":"rgb(233,172,119)","line-width":{stops:[[12,2],[14,3],[16,7],[18,14],[20,40]]}},layout:{"line-join":"round","line-cap":"butt"},minzoom:12},{source:"versatiles-shortbread",id:"bridge-street-tertiary:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","tertiary"],["!=","link",!0]],paint:{"line-color":"rgb(217,217,217)","line-width":{stops:[[12,2],[14,3],[16,6],[18,26],[19,64],[20,128]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-secondary:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","secondary"],["!=","link",!0]],paint:{"line-color":"rgb(233,172,119)","line-width":{stops:[[11,2],[14,5],[16,8],[18,30],[19,68],[20,138]]},"line-opacity":{stops:[[11,0],[12,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-primary:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","primary"],["!=","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[8,0],[9,1],[10,4],[14,6],[16,12],[18,36],[19,74],[20,144]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-trunk:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","trunk"],["!=","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[7,0],[8,2],[10,4],[14,6],[16,12],[18,36],[19,74],[20,144]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-motorway:outline",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","motorway"],["!=","link",!0]],paint:{"line-color":"rgb(233,172,119)","line-width":{stops:[[5,0],[6,2],[10,5],[14,5],[16,14],[18,38],[19,84],[20,168]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-way-footway",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","footway"]],layout:{"line-cap":"butt"},paint:{"line-width":{stops:[[15,0],[16,4],[18,6],[19,10],[20,20]]},"line-color":"rgb(251,235,255)"},minzoom:15},{source:"versatiles-shortbread",id:"bridge-way-steps",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","steps"]],layout:{"line-cap":"butt"},paint:{"line-width":{stops:[[15,0],[16,4],[18,6],[19,10],[20,20]]},"line-color":"rgb(251,235,255)"},minzoom:15},{source:"versatiles-shortbread",id:"bridge-way-path",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","path"]],layout:{"line-cap":"butt"},paint:{"line-width":{stops:[[15,0],[16,4],[18,6],[19,10],[20,20]]},"line-color":"rgb(251,235,255)"},minzoom:15},{source:"versatiles-shortbread",id:"bridge-way-cycleway",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","cycleway"]],layout:{"line-cap":"butt"},paint:{"line-width":{stops:[[15,0],[16,4],[18,6],[19,10],[20,20]]},"line-color":"rgb(239,249,255)"},minzoom:15},{source:"versatiles-shortbread",id:"bridge-street-track",type:"line","source-layer":"streets",filter:["all",["==","kind","track"],["==","bridge",!0]],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[14,1],[16,3],[18,16],[19,44],[20,88]]},"line-opacity":{stops:[[14,0],[15,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-pedestrian",type:"line","source-layer":"streets",filter:["all",["==","kind","pedestrian"],["==","bridge",!0]],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-service",type:"line","source-layer":"streets",filter:["all",["==","kind","service"],["==","bridge",!0]],paint:{"line-color":"rgb(247,247,247)","line-width":{stops:[[14,1],[16,2],[18,10],[19,28],[20,40]]},"line-opacity":{stops:[[15,0],[16,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-livingstreet",type:"line","source-layer":"streets",filter:["all",["==","kind","living_street"],["==","bridge",!0]],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-residential",type:"line","source-layer":"streets",filter:["all",["==","kind","residential"],["==","bridge",!0]],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-unclassified",type:"line","source-layer":"streets",filter:["all",["==","kind","unclassified"],["==","bridge",!0]],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-track-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","track"],["==","bicycle","designated"],["==","bridge",!0]],paint:{"line-color":"rgb(255,255,255)"},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-pedestrian-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","pedestrian"],["==","bicycle","designated"],["==","bridge",!0]],paint:{"line-color":"rgb(239,249,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"bridge-street-service-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","service"],["==","bicycle","designated"],["==","bridge",!0]],paint:{"line-color":"rgb(255,255,255)"},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-livingstreet-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","living_street"],["==","bicycle","designated"],["==","bridge",!0]],paint:{"line-color":"rgb(239,249,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"bridge-street-residential-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","residential"],["==","bicycle","designated"],["==","bridge",!0]],paint:{"line-color":"rgb(239,249,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"bridge-street-unclassified-bicycle",type:"line","source-layer":"streets",filter:["all",["==","kind","unclassified"],["==","bicycle","designated"],["==","bridge",!0]],paint:{"line-color":"rgb(239,249,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"round"}},{source:"versatiles-shortbread",id:"bridge-street-tertiary-link",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","tertiary"],["==","link",!0]],paint:{"line-color":"rgb(255,255,255)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-secondary-link",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","secondary"],["==","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[12,1],[14,2],[16,5],[18,12],[20,38]]}},layout:{"line-join":"round","line-cap":"butt"},minzoom:13},{source:"versatiles-shortbread",id:"bridge-street-primary-link",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","primary"],["==","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[12,1],[14,2],[16,5],[18,12],[20,38]]}},layout:{"line-join":"round","line-cap":"butt"},minzoom:13},{source:"versatiles-shortbread",id:"bridge-street-trunk-link",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","trunk"],["==","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[12,1],[14,2],[16,5],[18,12],[20,38]]}},layout:{"line-join":"round","line-cap":"butt"},minzoom:13},{source:"versatiles-shortbread",id:"bridge-street-motorway-link",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","motorway"],["==","link",!0]],paint:{"line-color":"rgb(215,215,215)","line-width":{stops:[[12,1],[14,2],[16,5],[18,12],[20,38]]}},layout:{"line-join":"round","line-cap":"butt"},minzoom:12},{source:"versatiles-shortbread",id:"bridge-street-tertiary",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","tertiary"],["!=","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[12,1],[14,2],[16,5],[18,24],[19,60],[20,120]]},"line-opacity":{stops:[[12,0],[13,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-secondary",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","secondary"],["!=","link",!0]],paint:{"line-color":"rgb(215,215,215)","line-width":{stops:[[11,1],[14,4],[16,6],[18,28],[19,64],[20,130]]},"line-opacity":{stops:[[11,0],[12,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-primary",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","primary"],["!=","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[8,0],[9,2],[10,3],[14,5],[16,10],[18,34],[19,70],[20,140]]},"line-opacity":{stops:[[8,0],[9,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-trunk",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","trunk"],["!=","link",!0]],paint:{"line-color":"rgb(215,215,215)","line-width":{stops:[[7,0],[8,1],[10,3],[14,5],[16,10],[18,34],[19,70],[20,140]]},"line-opacity":{stops:[[7,0],[8,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-street-motorway",type:"line","source-layer":"streets",filter:["all",["==","bridge",!0],["in","kind","motorway"],["!=","link",!0]],paint:{"line-color":"rgb(235,235,235)","line-width":{stops:[[7,0],[8,0],[10,3],[14,3],[16,10],[18,34],[19,78],[20,158]]},"line-opacity":{stops:[[5,0],[6,1]]}},layout:{"line-join":"round","line-cap":"butt"}},{source:"versatiles-shortbread",id:"bridge-transport-tram:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","tram"],["!has","service"],["==","bridge",!0]],minzoom:15,paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[15,0],[16,5],[18,7],[20,20]]},"line-dasharray":[.1,.5]}},{source:"versatiles-shortbread",id:"bridge-transport-narrowgauge:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","narrow_gauge"],["!has","service"],["==","bridge",!0]],minzoom:15,paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[15,0],[16,5],[18,7],[20,20]]},"line-dasharray":[.1,.5]}},{source:"versatiles-shortbread",id:"bridge-transport-subway:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","subway"],["!has","service"],["==","bridge",!0]],paint:{"line-color":"rgb(166,184,199)","line-width":{stops:[[11,0],[12,1],[15,3],[16,3],[18,6],[19,8],[20,10]]},"line-opacity":{stops:[[11,0],[12,1]]}}},{source:"versatiles-shortbread",id:"bridge-transport-lightrail:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","light_rail"],["!has","service"],["==","bridge",!0]],paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[8,1],[13,1],[15,1],[20,14]]},"line-opacity":{stops:[[11,0],[12,1]]}},minzoom:8},{source:"versatiles-shortbread",id:"bridge-transport-lightrail-service:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","light_rail"],["has","service"],["==","bridge",!0]],paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[14,0],[15,1],[16,1],[20,14]]}},minzoom:14},{source:"versatiles-shortbread",id:"bridge-transport-rail:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","rail"],["!has","service"],["==","bridge",!0]],paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[8,1],[13,1],[15,1],[20,14]]},"line-opacity":{stops:[[8,0],[9,1]]}},minzoom:8},{source:"versatiles-shortbread",id:"bridge-transport-rail-service:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","rail"],["has","service"],["==","bridge",!0]],paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[14,0],[15,1],[16,1],[20,14]]}},minzoom:14},{source:"versatiles-shortbread",id:"bridge-transport-monorail:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","monorail"],["==","bridge",!0]],minzoom:15,paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[15,0],[16,5],[18,7],[20,20]]},"line-dasharray":[.1,.5]}},{source:"versatiles-shortbread",id:"bridge-transport-funicular:outline",type:"line","source-layer":"streets",filter:["all",["in","kind","funicular"],["==","bridge",!0]],minzoom:15,paint:{"line-color":"rgb(177,187,196)","line-width":{stops:[[15,0],[16,5],[18,7],[20,20]]},"line-dasharray":[.1,.5]}},{source:"versatiles-shortbread",id:"bridge-transport-tram",type:"line","source-layer":"streets",filter:["all",["in","kind","tram"],["!has","service"],["==","bridge",!0]],minzoom:13,paint:{"line-width":{stops:[[13,0],[16,1],[17,2],[18,3],[20,5]]},"line-color":"rgb(177,187,196)"}},{source:"versatiles-shortbread",id:"bridge-transport-narrowgauge",type:"line","source-layer":"streets",filter:["all",["in","kind","narrow_gauge"],["!has","service"],["==","bridge",!0]],minzoom:13,paint:{"line-width":{stops:[[13,0],[16,1],[17,2],[18,3],[20,5]]},"line-color":"rgb(177,187,196)"}},{source:"versatiles-shortbread",id:"bridge-transport-subway",type:"line","source-layer":"streets",filter:["all",["in","kind","subway"],["!has","service"],["==","bridge",!0]],paint:{"line-color":"rgb(188,202,213)","line-width":{stops:[[11,0],[12,1],[15,2],[16,2],[18,5],[19,6],[20,8]]},"line-dasharray":[2,2],"line-opacity":{stops:[[14,0],[15,1]]}}},{source:"versatiles-shortbread",id:"bridge-transport-lightrail",type:"line","source-layer":"streets",filter:["all",["in","kind","light_rail"],["!has","service"],["==","bridge",!0]],paint:{"line-color":"rgb(197,204,211)","line-width":{stops:[[14,0],[15,1],[20,10]]},"line-dasharray":[2,2],"line-opacity":{stops:[[14,0],[15,1]]}},minzoom:14},{source:"versatiles-shortbread",id:"bridge-transport-lightrail-service",type:"line","source-layer":"streets",filter:["all",["in","kind","light_rail"],["has","service"],["==","bridge",!0]],paint:{"line-color":"rgb(197,204,211)","line-width":{stops:[[15,0],[16,1],[20,10]]},"line-dasharray":[2,2]},minzoom:15},{source:"versatiles-shortbread",id:"bridge-transport-rail",type:"line","source-layer":"streets",filter:["all",["in","kind","rail"],["!has","service"],["==","bridge",!0]],paint:{"line-color":"rgb(197,204,211)","line-width":{stops:[[14,0],[15,1],[20,10]]},"line-dasharray":[2,2],"line-opacity":{stops:[[14,0],[15,1]]}},minzoom:14},{source:"versatiles-shortbread",id:"bridge-transport-rail-service",type:"line","source-layer":"streets",filter:["all",["in","kind","rail"],["has","service"],["==","bridge",!0]],paint:{"line-color":"rgb(197,204,211)","line-width":{stops:[[15,0],[16,1],[20,10]]},"line-dasharray":[2,2]},minzoom:15},{source:"versatiles-shortbread",id:"bridge-transport-monorail",type:"line","source-layer":"streets",filter:["all",["in","kind","monorail"],["==","bridge",!0]],minzoom:13,paint:{"line-width":{stops:[[13,0],[16,1],[17,2],[18,3],[20,5]]},"line-color":"rgb(177,187,196)"}},{source:"versatiles-shortbread",id:"bridge-transport-funicular",type:"line","source-layer":"streets",filter:["all",["in","kind","funicular"],["==","bridge",!0]],minzoom:13,paint:{"line-width":{stops:[[13,0],[16,1],[17,2],[18,3],[20,5]]},"line-color":"rgb(177,187,196)"}},{source:"versatiles-shortbread",id:"poi-amenity",type:"symbol","source-layer":"pois",filter:["to-boolean",["get","amenity"]],minzoom:16,layout:{"icon-size":{stops:[[16,.5],[19,.5],[20,1]]},"symbol-placement":"point","icon-optional":!0,"text-font":["noto_sans_regular"],"icon-image":["match",["get","amenity"],"arts_centre","basics:icon-art_gallery","atm","basics:icon-atm","bank","basics:icon-bank","bar","basics:icon-bar","bench","basics:icon-bench","bicycle_rental","basics:icon-bicycle_share","biergarten","basics:icon-beergarden","cafe","basics:icon-cafe","car_rental","basics:icon-car_rental","car_sharing","basics:icon-car_rental","car_wash","basics:icon-car_wash","cinema","basics:icon-cinema","college","basics:icon-college","community_centre","basics:icon-community","dentist","basics:icon-dentist","doctors","basics:icon-doctor","dog_park","basics:icon-dog_park","drinking_water","basics:icon-drinking_water","embassy","basics:icon-embassy","fast_food","basics:icon-fast_food","fire_station","basics:icon-fire_station","fountain","basics:icon-fountain","grave_yard","basics:icon-cemetery","hospital","basics:icon-hospital","hunting_stand","basics:icon-huntingstand","library","basics:icon-library","marketplace","basics:icon-marketplace","nightclub","basics:icon-nightclub","nursing_home","basics:icon-nursinghome","pharmacy","basics:icon-pharmacy","place_of_worship","basics:icon-place_of_worship","playground","basics:icon-playground","police","basics:icon-police","post_box","basics:icon-postbox","post_office","basics:icon-post","prison","basics:icon-prison","pub","basics:icon-beer","recycling","basics:icon-recycling","restaurant","basics:icon-restaurant","school","basics:icon-school","shelter","basics:icon-shelter","telephone","basics:icon-telephone","theatre","basics:icon-theatre","toilets","basics:icon-toilet","townhall","basics:icon-town_hall","vending_machine","basics:icon-vendingmachine","veterinary","basics:icon-veterinary","waste_basket","basics:icon-waste_basket",""],visibility:"none"},paint:{"icon-opacity":{stops:[[16,0],[17,.4]]},"text-opacity":{stops:[[16,0],[17,.4]]},"icon-color":"rgb(85,85,85)","text-color":"rgb(85,85,85)"}},{source:"versatiles-shortbread",id:"poi-leisure",type:"symbol","source-layer":"pois",filter:["to-boolean",["get","leisure"]],minzoom:16,layout:{"icon-size":{stops:[[16,.5],[19,.5],[20,1]]},"symbol-placement":"point","icon-optional":!0,"text-font":["noto_sans_regular"],"icon-image":["match",["get","leisure"],"golf_course","basics:icon-golf","ice_rink","basics:icon-icerink","pitch","basics:icon-pitch","stadium","basics:icon-stadium","swimming_pool","basics:icon-swimming","water_park","basics:icon-waterpark","basics:icon-sports"],visibility:"none"},paint:{"icon-opacity":{stops:[[16,0],[17,.4]]},"text-opacity":{stops:[[16,0],[17,.4]]},"icon-color":"rgb(85,85,85)","text-color":"rgb(85,85,85)"}},{source:"versatiles-shortbread",id:"poi-tourism",type:"symbol","source-layer":"pois",filter:["to-boolean",["get","tourism"]],minzoom:16,layout:{"icon-size":{stops:[[16,.5],[19,.5],[20,1]]},"symbol-placement":"point","icon-optional":!0,"text-font":["noto_sans_regular"],"icon-image":["match",["get","tourism"],"chalet","basics:icon-chalet","information","basics:transport-information","picnic_site","basics:icon-picnic_site","viewpoint","basics:icon-viewpoint","zoo","basics:icon-zoo",""],visibility:"none"},paint:{"icon-opacity":{stops:[[16,0],[17,.4]]},"text-opacity":{stops:[[16,0],[17,.4]]},"icon-color":"rgb(85,85,85)","text-color":"rgb(85,85,85)"}},{source:"versatiles-shortbread",id:"poi-shop",type:"symbol","source-layer":"pois",filter:["to-boolean",["get","shop"]],minzoom:16,layout:{"icon-size":{stops:[[16,.5],[19,.5],[20,1]]},"symbol-placement":"point","icon-optional":!0,"text-font":["noto_sans_regular"],"icon-image":["match",["get","shop"],"alcohol","basics:icon-alcohol_shop","bakery","basics:icon-bakery","beauty","basics:icon-beauty","beverages","basics:icon-beverages","books","basics:icon-books","butcher","basics:icon-butcher","chemist","basics:icon-chemist","clothes","basics:icon-clothes","doityourself","basics:icon-doityourself","dry_cleaning","basics:icon-drycleaning","florist","basics:icon-florist","furniture","basics:icon-furniture","garden_centre","basics:icon-garden_centre","general","basics:icon-shop","gift","basics:icon-gift","greengrocer","basics:icon-greengrocer","hairdresser","basics:icon-hairdresser","hardware","basics:icon-hardware","jewelry","basics:icon-jewelry_store","kiosk","basics:icon-kiosk","laundry","basics:icon-laundry","newsagent","basics:icon-newsagent","optican","basics:icon-optician","outdoor","basics:icon-outdoor","shoes","basics:icon-shoes","sports","basics:icon-sports","stationery","basics:icon-stationery","toys","basics:icon-toys","travel_agency","basics:icon-travel_agent","video","basics:icon-video","basics:icon-shop"],visibility:"none"},paint:{"icon-opacity":{stops:[[16,0],[17,.4]]},"text-opacity":{stops:[[16,0],[17,.4]]},"icon-color":"rgb(85,85,85)","text-color":"rgb(85,85,85)"}},{source:"versatiles-shortbread",id:"poi-man_made",type:"symbol","source-layer":"pois",filter:["to-boolean",["get","man_made"]],minzoom:16,layout:{"icon-size":{stops:[[16,.5],[19,.5],[20,1]]},"symbol-placement":"point","icon-optional":!0,"text-font":["noto_sans_regular"],"icon-image":["match",["get","man_made"],"lighthouse","basics:icon-lighthouse","surveillance","basics:icon-surveillance","tower","basics:icon-observation_tower","watermill","basics:icon-watermill","windmill","basics:icon-windmill",""],visibility:"none"},paint:{"icon-opacity":{stops:[[16,0],[17,.4]]},"text-opacity":{stops:[[16,0],[17,.4]]},"icon-color":"rgb(85,85,85)","text-color":"rgb(85,85,85)"}},{source:"versatiles-shortbread",id:"poi-historic",type:"symbol","source-layer":"pois",filter:["to-boolean",["get","historic"]],minzoom:16,layout:{"icon-size":{stops:[[16,.5],[19,.5],[20,1]]},"symbol-placement":"point","icon-optional":!0,"text-font":["noto_sans_regular"],"icon-image":["match",["get","historic"],"artwork","basics:icon-artwork","castle","basics:icon-castle","monument","basics:icon-monument","wayside_shrine","basics:icon-shrine","basics:icon-historic"],visibility:"none"},paint:{"icon-opacity":{stops:[[16,0],[17,.4]]},"text-opacity":{stops:[[16,0],[17,.4]]},"icon-color":"rgb(85,85,85)","text-color":"rgb(85,85,85)"}},{source:"versatiles-shortbread",id:"poi-emergency",type:"symbol","source-layer":"pois",filter:["to-boolean",["get","emergency"]],minzoom:16,layout:{"icon-size":{stops:[[16,.5],[19,.5],[20,1]]},"symbol-placement":"point","icon-optional":!0,"text-font":["noto_sans_regular"],"icon-image":["match",["get","emergency"],"defibrillator","basics:icon-defibrillator","fire_hydrant","basics:icon-hydrant","phone","basics:icon-emergency_phone",""],visibility:"none"},paint:{"icon-opacity":{stops:[[16,0],[17,.4]]},"text-opacity":{stops:[[16,0],[17,.4]]},"icon-color":"rgb(85,85,85)","text-color":"rgb(85,85,85)"}},{source:"versatiles-shortbread",id:"poi-highway",type:"symbol","source-layer":"pois",filter:["to-boolean",["get","highway"]],minzoom:16,layout:{"icon-size":{stops:[[16,.5],[19,.5],[20,1]]},"symbol-placement":"point","icon-optional":!0,"text-font":["noto_sans_regular"],visibility:"none"},paint:{"icon-opacity":{stops:[[16,0],[17,.4]]},"text-opacity":{stops:[[16,0],[17,.4]]},"icon-color":"rgb(85,85,85)","text-color":"rgb(85,85,85)"}},{source:"versatiles-shortbread",id:"poi-office",type:"symbol","source-layer":"pois",filter:["to-boolean",["get","office"]],minzoom:16,layout:{"icon-size":{stops:[[16,.5],[19,.5],[20,1]]},"symbol-placement":"point","icon-optional":!0,"text-font":["noto_sans_regular"],visibility:"none"},paint:{"icon-opacity":{stops:[[16,0],[17,.4]]},"text-opacity":{stops:[[16,0],[17,.4]]},"icon-color":"rgb(85,85,85)","text-color":"rgb(85,85,85)"}},{source:"versatiles-shortbread",id:"boundary-country:outline",type:"line","source-layer":"boundaries",filter:["all",["==","admin_level",2],["!=","maritime",!0],["!=","disputed",!0],["!=","coastline",!0]],paint:{"line-color":"rgb(249,245,239)","line-blur":2,"line-width":{stops:[[2,0],[3,2],[10,8]]},"line-opacity":.75},layout:{"line-cap":"round","line-join":"round"}},{source:"versatiles-shortbread",id:"boundary-country-disputed:outline",type:"line","source-layer":"boundaries",filter:["all",["==","admin_level",2],["==","disputed",!0],["!=","maritime",!0],["!=","coastline",!0]],paint:{"line-width":{stops:[[2,0],[3,2],[10,8]]},"line-opacity":.75,"line-color":"rgb(249,245,239)"}},{source:"versatiles-shortbread",id:"boundary-country",type:"line","source-layer":"boundaries",filter:["all",["==","admin_level",2],["!=","maritime",!0],["!=","disputed",!0],["!=","coastline",!0]],paint:{"line-color":"rgb(100,100,100)","line-width":{stops:[[2,0],[3,1],[10,4]]}},layout:{"line-cap":"round","line-join":"round"}},{source:"versatiles-shortbread",id:"boundary-country-disputed",type:"line","source-layer":"boundaries",filter:["all",["==","admin_level",2],["==","disputed",!0],["!=","maritime",!0],["!=","coastline",!0]],paint:{"line-width":{stops:[[2,0],[3,1],[10,4]]},"line-color":"rgb(150,150,150)","line-dasharray":[2,1]},layout:{"line-cap":"square"}},{source:"versatiles-shortbread",id:"label-address-housenumber",type:"symbol","source-layer":"addresses",filter:["has","housenumber"],layout:{"text-field":"{housenumber}","text-font":["noto_sans_regular"],"symbol-placement":"point","text-anchor":"center","text-size":{stops:[[17,8],[19,10]]},visibility:"none"},paint:{"text-halo-color":"rgb(243,235,227)","text-halo-width":2,"text-halo-blur":1,"icon-color":"rgb(169,164,158)","text-color":"rgb(169,164,158)"},minzoom:17},{source:"versatiles-shortbread",id:"label-motorway-shield",type:"symbol","source-layer":"street_labels",filter:["==","kind","motorway"],layout:{"text-field":"{ref}","text-font":["noto_sans_bold"],"symbol-placement":"line","text-anchor":"center","text-size":{stops:[[14,10],[18,12],[20,16]]}},paint:{"icon-color":"rgb(255,255,255)","text-color":"rgb(255,255,255)","text-halo-color":"rgb(255,204,136)","text-halo-width":.1,"text-halo-blur":1},minzoom:14},{source:"versatiles-shortbread",id:"label-street-pedestrian",type:"symbol","source-layer":"street_labels",filter:["==","kind","pedestrian"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"symbol-placement":"line","text-anchor":"center","text-size":{stops:[[12,10],[15,13]]}},paint:{"icon-color":"rgb(51,51,68)","text-color":"rgb(51,51,68)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:14},{source:"versatiles-shortbread",id:"label-street-livingstreet",type:"symbol","source-layer":"street_labels",filter:["==","kind","living_street"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"symbol-placement":"line","text-anchor":"center","text-size":{stops:[[12,10],[15,13]]}},paint:{"icon-color":"rgb(51,51,68)","text-color":"rgb(51,51,68)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:14},{source:"versatiles-shortbread",id:"label-street-residential",type:"symbol","source-layer":"street_labels",filter:["==","kind","residential"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"symbol-placement":"line","text-anchor":"center","text-size":{stops:[[12,10],[15,13]]}},paint:{"icon-color":"rgb(51,51,68)","text-color":"rgb(51,51,68)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:14},{source:"versatiles-shortbread",id:"label-street-unclassified",type:"symbol","source-layer":"street_labels",filter:["==","kind","unclassified"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"symbol-placement":"line","text-anchor":"center","text-size":{stops:[[12,10],[15,13]]}},paint:{"icon-color":"rgb(51,51,68)","text-color":"rgb(51,51,68)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:14},{source:"versatiles-shortbread",id:"label-street-tertiary",type:"symbol","source-layer":"street_labels",filter:["==","kind","tertiary"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"symbol-placement":"line","text-anchor":"center","text-size":{stops:[[12,10],[15,13]]}},paint:{"icon-color":"rgb(51,51,68)","text-color":"rgb(51,51,68)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:14},{source:"versatiles-shortbread",id:"label-street-secondary",type:"symbol","source-layer":"street_labels",filter:["==","kind","secondary"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"symbol-placement":"line","text-anchor":"center","text-size":{stops:[[12,10],[15,13]]}},paint:{"icon-color":"rgb(51,51,68)","text-color":"rgb(51,51,68)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:14},{source:"versatiles-shortbread",id:"label-street-primary",type:"symbol","source-layer":"street_labels",filter:["==","kind","primary"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"symbol-placement":"line","text-anchor":"center","text-size":{stops:[[12,10],[15,13]]}},paint:{"icon-color":"rgb(51,51,68)","text-color":"rgb(51,51,68)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:14},{source:"versatiles-shortbread",id:"label-street-trunk",type:"symbol","source-layer":"street_labels",filter:["==","kind","trunk"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"symbol-placement":"line","text-anchor":"center","text-size":{stops:[[12,10],[15,13]]}},paint:{"icon-color":"rgb(51,51,68)","text-color":"rgb(51,51,68)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:14},{source:"versatiles-shortbread",id:"label-place-neighbourhood",type:"symbol","source-layer":"place_labels",filter:["==","kind","neighbourhood"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"text-size":{stops:[[14,12]]},"text-transform":"uppercase"},paint:{"icon-color":"rgb(40,67,73)","text-color":"rgb(40,67,73)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:14},{source:"versatiles-shortbread",id:"label-place-quarter",type:"symbol","source-layer":"place_labels",filter:["==","kind","quarter"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"text-size":{stops:[[13,13]]},"text-transform":"uppercase"},paint:{"icon-color":"rgb(40,62,73)","text-color":"rgb(40,62,73)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:13},{source:"versatiles-shortbread",id:"label-place-suburb",type:"symbol","source-layer":"place_labels",filter:["==","kind","suburb"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"text-size":{stops:[[11,11],[13,14]]},"text-transform":"uppercase"},paint:{"icon-color":"rgb(40,57,73)","text-color":"rgb(40,57,73)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:12},{source:"versatiles-shortbread",id:"label-place-hamlet",type:"symbol","source-layer":"place_labels",filter:["==","kind","hamlet"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"text-size":{stops:[[10,11],[12,14]]}},paint:{"icon-color":"rgb(40,48,73)","text-color":"rgb(40,48,73)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:13},{source:"versatiles-shortbread",id:"label-place-village",type:"symbol","source-layer":"place_labels",filter:["==","kind","village"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"text-size":{stops:[[9,11],[12,14]]}},paint:{"icon-color":"rgb(40,48,73)","text-color":"rgb(40,48,73)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:13},{source:"versatiles-shortbread",id:"label-place-town",type:"symbol","source-layer":"place_labels",filter:["==","kind","town"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"text-size":{stops:[[9,11],[12,14]]}},paint:{"icon-color":"rgb(40,48,73)","text-color":"rgb(40,48,73)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:10},{source:"versatiles-shortbread",id:"label-boundary-state",type:"symbol","source-layer":"boundary_labels",filter:["in","admin_level",4,"4"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"text-transform":"uppercase","text-anchor":"top","text-offset":[0,.2],"text-padding":0,"text-optional":!0,"text-size":{stops:[[7,9],[10,12]]}},paint:{"icon-color":"rgb(61,61,77)","text-color":"rgb(61,61,77)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:7,maxzoom:10},{source:"versatiles-shortbread",id:"label-place-city",type:"symbol","source-layer":"place_labels",filter:["==","kind","city"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"text-size":{stops:[[8,11],[11,14]]}},paint:{"icon-color":"rgb(40,48,73)","text-color":"rgb(40,48,73)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:7},{source:"versatiles-shortbread",id:"label-place-statecapital",type:"symbol","source-layer":"place_labels",filter:["==","kind","state_capital"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"text-size":{stops:[[6,11],[10,15]]}},paint:{"icon-color":"rgb(40,48,73)","text-color":"rgb(40,48,73)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:7},{source:"versatiles-shortbread",id:"label-place-capital",type:"symbol","source-layer":"place_labels",filter:["==","kind","capital"],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"text-size":{stops:[[5,12],[10,16]]}},paint:{"icon-color":"rgb(40,48,73)","text-color":"rgb(40,48,73)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:6},{source:"versatiles-shortbread",id:"label-boundary-country-small",type:"symbol","source-layer":"boundary_labels",filter:["all",["in","admin_level",2,"2"],["<=","way_area",1e7]],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"text-transform":"uppercase","text-anchor":"top","text-offset":[0,.2],"text-padding":0,"text-optional":!0,"text-size":{stops:[[4,12],[5,14]]}},paint:{"icon-color":"rgb(51,51,68)","text-color":"rgb(51,51,68)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:4,maxzoom:9},{source:"versatiles-shortbread",id:"label-boundary-country-medium",type:"symbol","source-layer":"boundary_labels",filter:["all",["in","admin_level",2,"2"],["<","way_area",9e7],[">","way_area",1e7]],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"text-transform":"uppercase","text-anchor":"top","text-offset":[0,.2],"text-padding":0,"text-optional":!0,"text-size":{stops:[[3,13],[5,14]]}},paint:{"icon-color":"rgb(51,51,68)","text-color":"rgb(51,51,68)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:3,maxzoom:8},{source:"versatiles-shortbread",id:"label-boundary-country-large",type:"symbol","source-layer":"boundary_labels",filter:["all",["in","admin_level",2,"2"],[">=","way_area",9e7]],layout:{"text-field":"{name}","text-font":["noto_sans_regular"],"text-transform":"uppercase","text-anchor":"top","text-offset":[0,.2],"text-padding":0,"text-optional":!0,"text-size":{stops:[[2,14],[5,16]]}},paint:{"icon-color":"rgb(51,51,68)","text-color":"rgb(51,51,68)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:2,maxzoom:7},{source:"versatiles-shortbread",id:"marking-oneway",type:"symbol","source-layer":"streets",filter:["all",["==","oneway",!0],["in","kind","trunk","primary","secondary","tertiary","unclassified","residential","living_street"]],layout:{"symbol-placement":"line","symbol-spacing":175,"icon-rotate":90,"icon-rotation-alignment":"map","icon-padding":5,"symbol-avoid-edges":!0,"icon-image":"basics:marking-arrow",visibility:"none","text-font":["noto_sans_regular"]},minzoom:16,paint:{"icon-opacity":{stops:[[16,0],[17,.4],[20,.4]]},"text-opacity":{stops:[[16,0],[17,.4],[20,.4]]}}},{source:"versatiles-shortbread",id:"marking-oneway-reverse",type:"symbol","source-layer":"streets",filter:["all",["==","oneway_reverse",!0],["in","kind","trunk","primary","secondary","tertiary","unclassified","residential","living_street"]],layout:{"symbol-placement":"line","symbol-spacing":75,"icon-rotate":-90,"icon-rotation-alignment":"map","icon-padding":5,"symbol-avoid-edges":!0,"icon-image":"basics:marking-arrow",visibility:"none","text-font":["noto_sans_regular"]},minzoom:16,paint:{"icon-opacity":{stops:[[16,0],[17,.4],[20,.4]]},"text-opacity":{stops:[[16,0],[17,.4],[20,.4]]}}},{source:"versatiles-shortbread",id:"symbol-transit-bus",type:"symbol","source-layer":"public_transport",filter:["==","kind","bus_stop"],layout:{"text-field":"{name}","icon-size":{stops:[[16,.5],[18,1]]},"symbol-placement":"point","icon-keep-upright":!0,"text-font":["noto_sans_regular"],"text-size":10,"icon-anchor":"bottom","text-anchor":"top","icon-image":"basics:icon-bus",visibility:"none"},paint:{"icon-opacity":.7,"icon-color":"rgb(102,98,106)","text-color":"rgb(102,98,106)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:16},{source:"versatiles-shortbread",id:"symbol-transit-tram",type:"symbol","source-layer":"public_transport",filter:["==","kind","tram_stop"],layout:{"text-field":"{name}","icon-size":{stops:[[15,.5],[17,1]]},"symbol-placement":"point","icon-keep-upright":!0,"text-font":["noto_sans_regular"],"text-size":10,"icon-anchor":"bottom","text-anchor":"top","icon-image":"basics:transport-tram",visibility:"none"},paint:{"icon-opacity":.7,"icon-color":"rgb(102,98,106)","text-color":"rgb(102,98,106)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:15},{source:"versatiles-shortbread",id:"symbol-transit-subway",type:"symbol","source-layer":"public_transport",filter:["all",["in","kind","station","halt"],["==","station","subway"]],layout:{"text-field":"{name}","icon-size":{stops:[[14,.5],[16,1]]},"symbol-placement":"point","icon-keep-upright":!0,"text-font":["noto_sans_regular"],"text-size":10,"icon-anchor":"bottom","text-anchor":"top","icon-image":"basics:icon-rail_metro",visibility:"none"},paint:{"icon-opacity":.7,"icon-color":"rgb(102,98,106)","text-color":"rgb(102,98,106)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:14},{source:"versatiles-shortbread",id:"symbol-transit-lightrail",type:"symbol","source-layer":"public_transport",filter:["all",["in","kind","station","halt"],["==","station","light_rail"]],layout:{"text-field":"{name}","icon-size":{stops:[[14,.5],[16,1]]},"symbol-placement":"point","icon-keep-upright":!0,"text-font":["noto_sans_regular"],"text-size":10,"icon-anchor":"bottom","text-anchor":"top","icon-image":"basics:icon-rail_light",visibility:"none"},paint:{"icon-opacity":.7,"icon-color":"rgb(102,98,106)","text-color":"rgb(102,98,106)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:14},{source:"versatiles-shortbread",id:"symbol-transit-station",type:"symbol","source-layer":"public_transport",filter:["all",["in","kind","station","halt"],["!in","station","light_rail","subway"]],layout:{"text-field":"{name}","icon-size":{stops:[[13,.5],[15,1]]},"symbol-placement":"point","icon-keep-upright":!0,"text-font":["noto_sans_regular"],"text-size":10,"icon-anchor":"bottom","text-anchor":"top","icon-image":"basics:icon-rail",visibility:"none"},paint:{"icon-opacity":.7,"icon-color":"rgb(102,98,106)","text-color":"rgb(102,98,106)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:13},{source:"versatiles-shortbread",id:"symbol-transit-airfield",type:"symbol","source-layer":"public_transport",filter:["all",["==","kind","aerodrome"],["!has","iata"]],layout:{"text-field":"{name}","icon-size":{stops:[[13,.5],[15,1]]},"symbol-placement":"point","icon-keep-upright":!0,"text-font":["noto_sans_regular"],"text-size":10,"icon-anchor":"bottom","text-anchor":"top","icon-image":"basics:icon-airfield",visibility:"none"},paint:{"icon-opacity":.7,"icon-color":"rgb(102,98,106)","text-color":"rgb(102,98,106)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:13},{source:"versatiles-shortbread",id:"symbol-transit-airport",type:"symbol","source-layer":"public_transport",filter:["all",["==","kind","aerodrome"],["has","iata"]],layout:{"text-field":"{name}","icon-size":{stops:[[12,.5],[14,1]]},"symbol-placement":"point","icon-keep-upright":!0,"text-font":["noto_sans_regular"],"text-size":10,"icon-anchor":"bottom","text-anchor":"top","icon-image":"basics:icon-airport",visibility:"none"},paint:{"icon-opacity":.7,"icon-color":"rgb(102,98,106)","text-color":"rgb(102,98,106)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":2,"text-halo-blur":1},minzoom:12}],MF={version:TF,name:CF,metadata:kF,glyphs:PF,sprite:EF,sources:AF,layers:q_};var V_=`/* required styles */\r
\r
.leaflet-pane,\r
.leaflet-tile,\r
.leaflet-marker-icon,\r
.leaflet-marker-shadow,\r
.leaflet-tile-container,\r
.leaflet-pane > svg,\r
.leaflet-pane > canvas,\r
.leaflet-zoom-box,\r
.leaflet-image-layer,\r
.leaflet-layer {\r
	position: absolute;\r
	left: 0;\r
	top: 0;\r
	}\r
.leaflet-container {\r
	overflow: hidden;\r
	}\r
.leaflet-tile,\r
.leaflet-marker-icon,\r
.leaflet-marker-shadow {\r
	-webkit-user-select: none;\r
	   -moz-user-select: none;\r
	        user-select: none;\r
	  -webkit-user-drag: none;\r
	}\r
/* Prevents IE11 from highlighting tiles in blue */\r
.leaflet-tile::selection {\r
	background: transparent;\r
}\r
/* Safari renders non-retina tile on retina better with this, but Chrome is worse */\r
.leaflet-safari .leaflet-tile {\r
	image-rendering: -webkit-optimize-contrast;\r
	}\r
/* hack that prevents hw layers "stretching" when loading new tiles */\r
.leaflet-safari .leaflet-tile-container {\r
	width: 1600px;\r
	height: 1600px;\r
	-webkit-transform-origin: 0 0;\r
	}\r
.leaflet-marker-icon,\r
.leaflet-marker-shadow {\r
	display: block;\r
	}\r
/* .leaflet-container svg: reset svg max-width decleration shipped in Joomla! (joomla.org) 3.x */\r
/* .leaflet-container img: map is broken in FF if you have max-width: 100% on tiles */\r
.leaflet-container .leaflet-overlay-pane svg {\r
	max-width: none !important;\r
	max-height: none !important;\r
	}\r
.leaflet-container .leaflet-marker-pane img,\r
.leaflet-container .leaflet-shadow-pane img,\r
.leaflet-container .leaflet-tile-pane img,\r
.leaflet-container img.leaflet-image-layer,\r
.leaflet-container .leaflet-tile {\r
	max-width: none !important;\r
	max-height: none !important;\r
	width: auto;\r
	padding: 0;\r
	}\r
\r
.leaflet-container img.leaflet-tile {\r
	/* See: https://bugs.chromium.org/p/chromium/issues/detail?id=600120 */\r
	mix-blend-mode: plus-lighter;\r
}\r
\r
.leaflet-container.leaflet-touch-zoom {\r
	-ms-touch-action: pan-x pan-y;\r
	touch-action: pan-x pan-y;\r
	}\r
.leaflet-container.leaflet-touch-drag {\r
	-ms-touch-action: pinch-zoom;\r
	/* Fallback for FF which doesn't support pinch-zoom */\r
	touch-action: none;\r
	touch-action: pinch-zoom;\r
}\r
.leaflet-container.leaflet-touch-drag.leaflet-touch-zoom {\r
	-ms-touch-action: none;\r
	touch-action: none;\r
}\r
.leaflet-container {\r
	-webkit-tap-highlight-color: transparent;\r
}\r
.leaflet-container a {\r
	-webkit-tap-highlight-color: rgba(51, 181, 229, 0.4);\r
}\r
.leaflet-tile {\r
	filter: inherit;\r
	visibility: hidden;\r
	}\r
.leaflet-tile-loaded {\r
	visibility: inherit;\r
	}\r
.leaflet-zoom-box {\r
	width: 0;\r
	height: 0;\r
	-moz-box-sizing: border-box;\r
	     box-sizing: border-box;\r
	z-index: 800;\r
	}\r
/* workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=888319 */\r
.leaflet-overlay-pane svg {\r
	-moz-user-select: none;\r
	}\r
\r
.leaflet-pane         { z-index: 400; }\r
\r
.leaflet-tile-pane    { z-index: 200; }\r
.leaflet-overlay-pane { z-index: 400; }\r
.leaflet-shadow-pane  { z-index: 500; }\r
.leaflet-marker-pane  { z-index: 600; }\r
.leaflet-tooltip-pane   { z-index: 650; }\r
.leaflet-popup-pane   { z-index: 700; }\r
\r
.leaflet-map-pane canvas { z-index: 100; }\r
.leaflet-map-pane svg    { z-index: 200; }\r
\r
.leaflet-vml-shape {\r
	width: 1px;\r
	height: 1px;\r
	}\r
.lvml {\r
	behavior: url(#default#VML);\r
	display: inline-block;\r
	position: absolute;\r
	}\r
\r
\r
/* control positioning */\r
\r
.leaflet-control {\r
	position: relative;\r
	z-index: 800;\r
	pointer-events: visiblePainted; /* IE 9-10 doesn't have auto */\r
	pointer-events: auto;\r
	}\r
.leaflet-top,\r
.leaflet-bottom {\r
	position: absolute;\r
	z-index: 1000;\r
	pointer-events: none;\r
	}\r
.leaflet-top {\r
	top: 0;\r
	}\r
.leaflet-right {\r
	right: 0;\r
	}\r
.leaflet-bottom {\r
	bottom: 0;\r
	}\r
.leaflet-left {\r
	left: 0;\r
	}\r
.leaflet-control {\r
	float: left;\r
	clear: both;\r
	}\r
.leaflet-right .leaflet-control {\r
	float: right;\r
	}\r
.leaflet-top .leaflet-control {\r
	margin-top: 10px;\r
	}\r
.leaflet-bottom .leaflet-control {\r
	margin-bottom: 10px;\r
	}\r
.leaflet-left .leaflet-control {\r
	margin-left: 10px;\r
	}\r
.leaflet-right .leaflet-control {\r
	margin-right: 10px;\r
	}\r
\r
\r
/* zoom and fade animations */\r
\r
.leaflet-fade-anim .leaflet-popup {\r
	opacity: 0;\r
	-webkit-transition: opacity 0.2s linear;\r
	   -moz-transition: opacity 0.2s linear;\r
	        transition: opacity 0.2s linear;\r
	}\r
.leaflet-fade-anim .leaflet-map-pane .leaflet-popup {\r
	opacity: 1;\r
	}\r
.leaflet-zoom-animated {\r
	-webkit-transform-origin: 0 0;\r
	    -ms-transform-origin: 0 0;\r
	        transform-origin: 0 0;\r
	}\r
svg.leaflet-zoom-animated {\r
	will-change: transform;\r
}\r
\r
.leaflet-zoom-anim .leaflet-zoom-animated {\r
	-webkit-transition: -webkit-transform 0.25s cubic-bezier(0,0,0.25,1);\r
	   -moz-transition:    -moz-transform 0.25s cubic-bezier(0,0,0.25,1);\r
	        transition:         transform 0.25s cubic-bezier(0,0,0.25,1);\r
	}\r
.leaflet-zoom-anim .leaflet-tile,\r
.leaflet-pan-anim .leaflet-tile {\r
	-webkit-transition: none;\r
	   -moz-transition: none;\r
	        transition: none;\r
	}\r
\r
.leaflet-zoom-anim .leaflet-zoom-hide {\r
	visibility: hidden;\r
	}\r
\r
\r
/* cursors */\r
\r
.leaflet-interactive {\r
	cursor: pointer;\r
	}\r
.leaflet-grab {\r
	cursor: -webkit-grab;\r
	cursor:    -moz-grab;\r
	cursor:         grab;\r
	}\r
.leaflet-crosshair,\r
.leaflet-crosshair .leaflet-interactive {\r
	cursor: crosshair;\r
	}\r
.leaflet-popup-pane,\r
.leaflet-control {\r
	cursor: auto;\r
	}\r
.leaflet-dragging .leaflet-grab,\r
.leaflet-dragging .leaflet-grab .leaflet-interactive,\r
.leaflet-dragging .leaflet-marker-draggable {\r
	cursor: move;\r
	cursor: -webkit-grabbing;\r
	cursor:    -moz-grabbing;\r
	cursor:         grabbing;\r
	}\r
\r
/* marker & overlays interactivity */\r
.leaflet-marker-icon,\r
.leaflet-marker-shadow,\r
.leaflet-image-layer,\r
.leaflet-pane > svg path,\r
.leaflet-tile-container {\r
	pointer-events: none;\r
	}\r
\r
.leaflet-marker-icon.leaflet-interactive,\r
.leaflet-image-layer.leaflet-interactive,\r
.leaflet-pane > svg path.leaflet-interactive,\r
svg.leaflet-image-layer.leaflet-interactive path {\r
	pointer-events: visiblePainted; /* IE 9-10 doesn't have auto */\r
	pointer-events: auto;\r
	}\r
\r
/* visual tweaks */\r
\r
.leaflet-container {\r
	background: #ddd;\r
	outline-offset: 1px;\r
	}\r
.leaflet-container a {\r
	color: #0078A8;\r
	}\r
.leaflet-zoom-box {\r
	border: 2px dotted #38f;\r
	background: rgba(255,255,255,0.5);\r
	}\r
\r
\r
/* general typography */\r
.leaflet-container {\r
	font-family: "Helvetica Neue", Arial, Helvetica, sans-serif;\r
	font-size: 12px;\r
	font-size: 0.75rem;\r
	line-height: 1.5;\r
	}\r
\r
\r
/* general toolbar styles */\r
\r
.leaflet-bar {\r
	box-shadow: 0 1px 5px rgba(0,0,0,0.65);\r
	border-radius: 4px;\r
	}\r
.leaflet-bar a {\r
	background-color: #fff;\r
	border-bottom: 1px solid #ccc;\r
	width: 26px;\r
	height: 26px;\r
	line-height: 26px;\r
	display: block;\r
	text-align: center;\r
	text-decoration: none;\r
	color: black;\r
	}\r
.leaflet-bar a,\r
.leaflet-control-layers-toggle {\r
	background-position: 50% 50%;\r
	background-repeat: no-repeat;\r
	display: block;\r
	}\r
.leaflet-bar a:hover,\r
.leaflet-bar a:focus {\r
	background-color: #f4f4f4;\r
	}\r
.leaflet-bar a:first-child {\r
	border-top-left-radius: 4px;\r
	border-top-right-radius: 4px;\r
	}\r
.leaflet-bar a:last-child {\r
	border-bottom-left-radius: 4px;\r
	border-bottom-right-radius: 4px;\r
	border-bottom: none;\r
	}\r
.leaflet-bar a.leaflet-disabled {\r
	cursor: default;\r
	background-color: #f4f4f4;\r
	color: #bbb;\r
	}\r
\r
.leaflet-touch .leaflet-bar a {\r
	width: 30px;\r
	height: 30px;\r
	line-height: 30px;\r
	}\r
.leaflet-touch .leaflet-bar a:first-child {\r
	border-top-left-radius: 2px;\r
	border-top-right-radius: 2px;\r
	}\r
.leaflet-touch .leaflet-bar a:last-child {\r
	border-bottom-left-radius: 2px;\r
	border-bottom-right-radius: 2px;\r
	}\r
\r
/* zoom control */\r
\r
.leaflet-control-zoom-in,\r
.leaflet-control-zoom-out {\r
	font: bold 18px 'Lucida Console', Monaco, monospace;\r
	text-indent: 1px;\r
	}\r
\r
.leaflet-touch .leaflet-control-zoom-in, .leaflet-touch .leaflet-control-zoom-out  {\r
	font-size: 22px;\r
	}\r
\r
\r
/* layers control */\r
\r
.leaflet-control-layers {\r
	box-shadow: 0 1px 5px rgba(0,0,0,0.4);\r
	background: #fff;\r
	border-radius: 5px;\r
	}\r
.leaflet-control-layers-toggle {\r
	background-image: url(images/layers.png);\r
	width: 36px;\r
	height: 36px;\r
	}\r
.leaflet-retina .leaflet-control-layers-toggle {\r
	background-image: url(images/layers-2x.png);\r
	background-size: 26px 26px;\r
	}\r
.leaflet-touch .leaflet-control-layers-toggle {\r
	width: 44px;\r
	height: 44px;\r
	}\r
.leaflet-control-layers .leaflet-control-layers-list,\r
.leaflet-control-layers-expanded .leaflet-control-layers-toggle {\r
	display: none;\r
	}\r
.leaflet-control-layers-expanded .leaflet-control-layers-list {\r
	display: block;\r
	position: relative;\r
	}\r
.leaflet-control-layers-expanded {\r
	padding: 6px 10px 6px 6px;\r
	color: #333;\r
	background: #fff;\r
	}\r
.leaflet-control-layers-scrollbar {\r
	overflow-y: scroll;\r
	overflow-x: hidden;\r
	padding-right: 5px;\r
	}\r
.leaflet-control-layers-selector {\r
	margin-top: 2px;\r
	position: relative;\r
	top: 1px;\r
	}\r
.leaflet-control-layers label {\r
	display: block;\r
	font-size: 13px;\r
	font-size: 1.08333em;\r
	}\r
.leaflet-control-layers-separator {\r
	height: 0;\r
	border-top: 1px solid #ddd;\r
	margin: 5px -10px 5px -6px;\r
	}\r
\r
/* Default icon URLs */\r
.leaflet-default-icon-path { /* used only in path-guessing heuristic, see L.Icon.Default */\r
	background-image: url(images/marker-icon.png);\r
	}\r
\r
\r
/* attribution and scale controls */\r
\r
.leaflet-container .leaflet-control-attribution {\r
	background: #fff;\r
	background: rgba(255, 255, 255, 0.8);\r
	margin: 0;\r
	}\r
.leaflet-control-attribution,\r
.leaflet-control-scale-line {\r
	padding: 0 5px;\r
	color: #333;\r
	line-height: 1.4;\r
	}\r
.leaflet-control-attribution a {\r
	text-decoration: none;\r
	}\r
.leaflet-control-attribution a:hover,\r
.leaflet-control-attribution a:focus {\r
	text-decoration: underline;\r
	}\r
.leaflet-attribution-flag {\r
	display: inline !important;\r
	vertical-align: baseline !important;\r
	width: 1em;\r
	height: 0.6669em;\r
	}\r
.leaflet-left .leaflet-control-scale {\r
	margin-left: 5px;\r
	}\r
.leaflet-bottom .leaflet-control-scale {\r
	margin-bottom: 5px;\r
	}\r
.leaflet-control-scale-line {\r
	border: 2px solid #777;\r
	border-top: none;\r
	line-height: 1.1;\r
	padding: 2px 5px 1px;\r
	white-space: nowrap;\r
	-moz-box-sizing: border-box;\r
	     box-sizing: border-box;\r
	background: rgba(255, 255, 255, 0.8);\r
	text-shadow: 1px 1px #fff;\r
	}\r
.leaflet-control-scale-line:not(:first-child) {\r
	border-top: 2px solid #777;\r
	border-bottom: none;\r
	margin-top: -2px;\r
	}\r
.leaflet-control-scale-line:not(:first-child):not(:last-child) {\r
	border-bottom: 2px solid #777;\r
	}\r
\r
.leaflet-touch .leaflet-control-attribution,\r
.leaflet-touch .leaflet-control-layers,\r
.leaflet-touch .leaflet-bar {\r
	box-shadow: none;\r
	}\r
.leaflet-touch .leaflet-control-layers,\r
.leaflet-touch .leaflet-bar {\r
	border: 2px solid rgba(0,0,0,0.2);\r
	background-clip: padding-box;\r
	}\r
\r
\r
/* popup */\r
\r
.leaflet-popup {\r
	position: absolute;\r
	text-align: center;\r
	margin-bottom: 20px;\r
	}\r
.leaflet-popup-content-wrapper {\r
	padding: 1px;\r
	text-align: left;\r
	border-radius: 12px;\r
	}\r
.leaflet-popup-content {\r
	margin: 13px 24px 13px 20px;\r
	line-height: 1.3;\r
	font-size: 13px;\r
	font-size: 1.08333em;\r
	min-height: 1px;\r
	}\r
.leaflet-popup-content p {\r
	margin: 17px 0;\r
	margin: 1.3em 0;\r
	}\r
.leaflet-popup-tip-container {\r
	width: 40px;\r
	height: 20px;\r
	position: absolute;\r
	left: 50%;\r
	margin-top: -1px;\r
	margin-left: -20px;\r
	overflow: hidden;\r
	pointer-events: none;\r
	}\r
.leaflet-popup-tip {\r
	width: 17px;\r
	height: 17px;\r
	padding: 1px;\r
\r
	margin: -10px auto 0;\r
	pointer-events: auto;\r
\r
	-webkit-transform: rotate(45deg);\r
	   -moz-transform: rotate(45deg);\r
	    -ms-transform: rotate(45deg);\r
	        transform: rotate(45deg);\r
	}\r
.leaflet-popup-content-wrapper,\r
.leaflet-popup-tip {\r
	background: white;\r
	color: #333;\r
	box-shadow: 0 3px 14px rgba(0,0,0,0.4);\r
	}\r
.leaflet-container a.leaflet-popup-close-button {\r
	position: absolute;\r
	top: 0;\r
	right: 0;\r
	border: none;\r
	text-align: center;\r
	width: 24px;\r
	height: 24px;\r
	font: 16px/24px Tahoma, Verdana, sans-serif;\r
	color: #757575;\r
	text-decoration: none;\r
	background: transparent;\r
	}\r
.leaflet-container a.leaflet-popup-close-button:hover,\r
.leaflet-container a.leaflet-popup-close-button:focus {\r
	color: #585858;\r
	}\r
.leaflet-popup-scrolled {\r
	overflow: auto;\r
	}\r
\r
.leaflet-oldie .leaflet-popup-content-wrapper {\r
	-ms-zoom: 1;\r
	}\r
.leaflet-oldie .leaflet-popup-tip {\r
	width: 24px;\r
	margin: 0 auto;\r
\r
	-ms-filter: "progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)";\r
	filter: progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678);\r
	}\r
\r
.leaflet-oldie .leaflet-control-zoom,\r
.leaflet-oldie .leaflet-control-layers,\r
.leaflet-oldie .leaflet-popup-content-wrapper,\r
.leaflet-oldie .leaflet-popup-tip {\r
	border: 1px solid #999;\r
	}\r
\r
\r
/* div icon */\r
\r
.leaflet-div-icon {\r
	background: #fff;\r
	border: 1px solid #666;\r
	}\r
\r
\r
/* Tooltip */\r
/* Base styles for the element that has a tooltip */\r
.leaflet-tooltip {\r
	position: absolute;\r
	padding: 6px;\r
	background-color: #fff;\r
	border: 1px solid #fff;\r
	border-radius: 3px;\r
	color: #222;\r
	white-space: nowrap;\r
	-webkit-user-select: none;\r
	-moz-user-select: none;\r
	-ms-user-select: none;\r
	user-select: none;\r
	pointer-events: none;\r
	box-shadow: 0 1px 3px rgba(0,0,0,0.4);\r
	}\r
.leaflet-tooltip.leaflet-interactive {\r
	cursor: pointer;\r
	pointer-events: auto;\r
	}\r
.leaflet-tooltip-top:before,\r
.leaflet-tooltip-bottom:before,\r
.leaflet-tooltip-left:before,\r
.leaflet-tooltip-right:before {\r
	position: absolute;\r
	pointer-events: none;\r
	border: 6px solid transparent;\r
	background: transparent;\r
	content: "";\r
	}\r
\r
/* Directions */\r
\r
.leaflet-tooltip-bottom {\r
	margin-top: 6px;\r
}\r
.leaflet-tooltip-top {\r
	margin-top: -6px;\r
}\r
.leaflet-tooltip-bottom:before,\r
.leaflet-tooltip-top:before {\r
	left: 50%;\r
	margin-left: -6px;\r
	}\r
.leaflet-tooltip-top:before {\r
	bottom: 0;\r
	margin-bottom: -12px;\r
	border-top-color: #fff;\r
	}\r
.leaflet-tooltip-bottom:before {\r
	top: 0;\r
	margin-top: -12px;\r
	margin-left: -6px;\r
	border-bottom-color: #fff;\r
	}\r
.leaflet-tooltip-left {\r
	margin-left: -6px;\r
}\r
.leaflet-tooltip-right {\r
	margin-left: 6px;\r
}\r
.leaflet-tooltip-left:before,\r
.leaflet-tooltip-right:before {\r
	top: 50%;\r
	margin-top: -6px;\r
	}\r
.leaflet-tooltip-left:before {\r
	right: 0;\r
	margin-right: -12px;\r
	border-left-color: #fff;\r
	}\r
.leaflet-tooltip-right:before {\r
	left: 0;\r
	margin-left: -12px;\r
	border-right-color: #fff;\r
	}\r
\r
/* Printing */\r
\r
@media print {\r
	/* Prevent printers from removing background-images of controls. */\r
	.leaflet-control {\r
		-webkit-print-color-adjust: exact;\r
		print-color-adjust: exact;\r
		}\r
	}\r
`;var IE=`.leaflet-custom-marker-cluster .cluster-count {
    width: 30px;
    height: 30px;
    text-align: center;
    border-radius: 50%;
    position: relative;
    top: -40px;
    left: 2px;
    color: white;
    font-weight: bold;
    text-shadow: 
        -1px -1px 0 #000,  
        1px -1px 0 #000,
        -1px  1px 0 #000,
        1px  1px 0 #000;
}

.leaflet-custom-marker-cluster .cluster-count:before {
    content: '';
    position: absolute;
    top: 0;
    left: -50%;
    width: 16px;
    height: 16px;
    background-color: white;
    opacity: 0.3;
    border-radius: 50%;
    z-index: -1;
}

.leaflet-custom-marker-cluster .cluster-count:after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 32px;
    height: 32px;
    transform: translate(-50%, -50%);
    background-color: white;
    opacity: 0.7;
    border-radius: 50%;
    z-index: -1;
}
`;var LE=`.leaflet-tile {
  overflow: visible;
}
`;var W_=void 0,DE="'Space Grotesk', sans-serif",RE=new Ph(null,{order:["querystring","navigator","htmlTag","path"],lookupQuerystring:"lang",htmlTag:document.documentElement});RE.detect();var DF=RE.detect(),Dl={shortbread:Eh};W_!==void 0?(Dl.shortbread["ol:webfonts"]=W_,Dl.shortbread.metadata["ol:webfonts"]=W_):(Dl.shortbread["ol:webfonts"]=DE,Dl.shortbread.metadata["ol:webfonts"]=DE);var Kf=[30,30],OE="vectorgrid";async function BE(s,o,p,d,f,a,T){var je;if(!a in Dl)throw new Error(`'${a}' is not a valid style.`);let M={};if(f){let _e=await SE(f);M.icon=_e}let R,V;o!==void 0&&(o=JSON.parse(o),R=Go.default.geoJson(o,{pointToLayer:function(_e,Pe){return Go.default.marker(Pe,M)},onEachFeature:function(_e,Pe){if(_e.properties&&(_e.properties.name||_e.properties.popupContent)){let Ye="";_e.properties.name&&(Ye+="<h1>"+_e.properties.name+"</h1>"),_e.properties.popupContent&&(Ye+=_e.properties.popupContent),Pe.bindPopup(Ye)}}}),V=R.getBounds().getCenter());let K,ne=[[180,-1/0],[-180,1/0]];T&&T.length===4&&(K=[[T[3],T[2]],[T[1],T[0]]],ne=K);let G,ie;ie=document.querySelector(s),G=Go.default.map(ie,{maxBounds:ne,zoomControl:!1,renderer:Go.default.svg(),minZoom:1,maxZoom:15,center:V,zoom:3,zoomSnap:.1,preferCanvas:!1,lang:DF}),T&&T.length===4&&G.fitBounds(K,{padding:Kf});var Y;if(OE==="maplibre")Y=Go.default.maplibreGL({style:Dl[a]}).addTo(G);else if(OE==="vectorgrid"){let _e=Dl[a].sources["versatiles-"+a].tiles[0],Pe=Dl[a].sources["versatiles-"+a].attribution,Ye=q_.find(Et=>Et.type==="background");Ye&&((je=Ye.paint)!=null&&je["background-color"])&&(ie.style.backgroundColor=Ye.paint["background-color"]),G.createPane("labels"),G.getPane("labels").style.zIndex=500,G.getPane("labels").style.pointerEvents="none",G.createPane("clusters"),G.getPane("clusters").style.zIndex=650;let st=TE(Eh,G,!1);Y=R_(_e,{attribution:Pe,vectorTileLayerStyles:st,minDetailZoom:4,maxDetailZoom:14,maxZoom:20,reuseTiles:!0,layers:["ocean","water_polygons","land","water_lines","dam_polygons","dam_lines","pier_polygons","pier_lines","sites","street_polygons","streets","buildings","bridges","boundaries"]}).addTo(G);let _t=CE(Eh,G),Ut={},Tt=R_(_e,{style:_t,minDetailZoom:7,maxDetailZoom:14,maxZoom:20,pane:"labels",reuseTiles:!0,layers:["place_labels","boundary_labels","street_labels"],"*":{cache:Ut}});Tt.addTo(G),Tt.on("tileload",Et=>{let oi=Et.tile.x+":"+Et.tile.y+":"+Et.tile.z;Ut[oi]=[]})}if(d!==void 0&&d){let _e=Go.default.markerClusterGroup({maxClusterRadius:40,pane:"clusters",iconCreateFunction:function(Pe){let Ye=Pe.getChildCount(),st=M.icon;if(!st)return Go.default.divIcon({html:"<b>"+Ye+"</b>",className:"marker-cluster"});let Pt=st.options.iconUrl,_t=st.options.iconSize,Ut=`transform: scale(${1+Ye/20});transform-origin: center center;`;return Go.default.divIcon({html:`<img src="${Pt}" style="width:${_t[0]}px;height:${_t[1]}px;${Ut}"><span class="cluster-count">${Ye}</span>`,className:"leaflet-custom-marker-cluster",iconSize:_t})}});_e.addLayer(R),G.addLayer(_e)}else G.addLayer(R);K!==void 0?G.fitBounds(K,{padding:Kf}):G.fitBounds(R.getBounds(),{padding:Kf});let Se=new ResizeObserver(()=>{ie.querySelectorAll(".leaflet-control-container").forEach(Pt=>{Pt.remove()}),console.log(V_);let _e=Ju.cleanCss(V_)+`
`+Ju.cleanCss(LE)+`
`+Ju.cleanCss(IE);console.log("Full print style:",_e);let Pe=Ju.filterStylesByPrefix(_e,".leaflet");console.log("Applying",Pe," to ",ie);let Ye=ie.id+"-leaflet-inline-style";document.getElementById(Ye)&&document.getElementById(Ye).remove();let st=document.createElement("style");st.id=Ye,st.setAttribute("type","text/css"),st.textContent=Pe,document.head.appendChild(st),G.invalidateSize(),K!==void 0&&(G.fitBounds(K,{padding:Kf}),console.log("Resized map and fit to bounds: ",G.getBounds()," expected: ",K,ie.clientWidth,ie.clientHeight))});return ie!==null?Se.observe(ie):console.error("Couldn't set up resize observer for",ie),G}var Ju=class s{static inlineStyle(o,p){let d=/([^{]+)\{([\s\S]+?)\}/g,f;for(;(f=d.exec(p))!==null;){let a=f[1].trim(),T=f[2].trim();if(a)try{let M=o.querySelectorAll(a),R={};T.split(";").forEach(V=>{let K=V.split(":").map(ne=>ne.trim());if(K.length===2&&K[0]){let ne=K[0].replace(/-([a-z])/g,G=>G[1].toUpperCase());R[ne]=K[1]}}),M.forEach(V=>{for(let K in R)V.style[K]=R[K]})}catch(M){console.error(`Error processing selector "${a}"!`,M)}}}static filterStylesByPrefix(o,p){if(p!==""){let d=[],f=/([^{]+)\{([^}]+)\}/g,a;for(;(a=f.exec(o))!==null;){let T=a[1].trim(),M=a[2].trim();T.split(",").map(K=>K.trim()).some(K=>K.startsWith(p))&&d.push(`${T} { ${M} }`)}return d.join(`
`)}return o}static async getStyles(o="",p){p!==void 0?typeof p=="string"&&(p=[p]):p=[],document.querySelectorAll('link[rel="stylesheet"], link[rel="print-stylesheet"]').forEach(M=>{M.href&&p.push(M.href)});let d=document.querySelectorAll("style");if(p.length===0&&d.length===0)return console.warn("No stylesheets!"),"";console.log("Using URLs: ",p);let f=String(o||"").trim(),a=p.map(async M=>{if(!M)return;let R;try{let V=await fetch(M);if(!V.ok){console.error(`HTTP error fetching ${M}: status ${V.status}`);return}R=await V.text()}catch(V){console.error(`Failed to fetch stylesheet from ${M}:`,V);return}return R}),T=await Promise.all(a);return d.forEach(M=>{T.push(M.textContent+`
`||"")}),s.filterStylesByPrefix(T.join(`
`),f)}static cleanCss(o){let p=/\/\*[\s\S]*?\*\//g,d=o.replace(p,""),f="",a=0;for(;a<d.length;){let T=d[a];if(T==="@"){let M=a,R=d.indexOf("{",M);if(R===-1){if(R=d.indexOf(";",M),R!==-1){a=R+1;continue}}else{let V=1,K=R+1;for(;K<d.length;){let ne=d[K];if(ne==="{"?V++:ne==="}"&&V--,V===0){a=K+1;break}K++}V!==0&&(a=d.length)}}else f+=T,a++}return f.trim().replace(/(\r?\n){2,}/g,`
`)}};window.initMap=BE;})();
/*! Bundled license information:

leaflet/dist/leaflet-src.js:
  (* @preserve
   * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
   * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
   *)

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

maplibre-gl/dist/maplibre-gl.js:
  (**
   * MapLibre GL JS
   * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.17.0/LICENSE.txt
   *)
*/
