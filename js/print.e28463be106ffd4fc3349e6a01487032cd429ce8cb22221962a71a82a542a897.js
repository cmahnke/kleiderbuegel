(()=>{var dR=Object.create;var rb=Object.defineProperty;var uR=Object.getOwnPropertyDescriptor;var cR=Object.getOwnPropertyNames;var hR=Object.getPrototypeOf,pR=Object.prototype.hasOwnProperty;var D=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports);var mR=(a,n,l,d)=>{if(n&&typeof n=="object"||typeof n=="function")for(let h of cR(n))!pR.call(a,h)&&h!==l&&rb(a,h,{get:()=>n[h],enumerable:!(d=uR(n,h))||d.enumerable});return a};var ot=(a,n,l)=>(l=a!=null?dR(hR(a)):{},mR(n||!a||!a.__esModule?rb(l,"default",{value:a,enumerable:!0}):l,a));var Ru=D((J3,bb)=>{"use strict";var bR=void 0;bb.exports=function(a){return a!==bR&&a!==null}});var vb=D((eW,yb)=>{"use strict";var yR=Ru(),vR={object:!0,function:!0,undefined:!0};yb.exports=function(a){return yR(a)?hasOwnProperty.call(vR,typeof a):!1}});var xb=D((tW,Sb)=>{"use strict";var SR=vb();Sb.exports=function(a){if(!SR(a))return!1;try{return a.constructor?a.constructor.prototype===a:!1}catch{return!1}}});var Cb=D((iW,wb)=>{"use strict";var xR=xb();wb.exports=function(a){if(typeof a!="function"||!hasOwnProperty.call(a,"length"))return!1;try{if(typeof a.length!="number"||typeof a.call!="function"||typeof a.apply!="function")return!1}catch{return!1}return!xR(a)}});var Eb=D((rW,kb)=>{"use strict";var wR=Cb(),CR=/^\s*class[\s{/}]/,kR=Function.prototype.toString;kb.exports=function(a){return!(!wR(a)||CR.test(kR.call(a)))}});var Pb=D((nW,Tb)=>{"use strict";Tb.exports=function(){var a=Object.assign,n;return typeof a!="function"?!1:(n={foo:"raz"},a(n,{bar:"dwa"},{trzy:"trzy"}),n.foo+n.bar+n.trzy==="razdwatrzy")}});var Nb=D((sW,Ab)=>{"use strict";Ab.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}});var Ob=D((aW,Ib)=>{"use strict";Ib.exports=function(){}});var En=D((oW,Rb)=>{"use strict";var ER=Ob()();Rb.exports=function(a){return a!==ER&&a!==null}});var _b=D((lW,Lb)=>{"use strict";var TR=En(),PR=Object.keys;Lb.exports=function(a){return PR(TR(a)?Object(a):a)}});var Fb=D((dW,Bb)=>{"use strict";Bb.exports=Nb()()?Object.keys:_b()});var Ao=D((uW,zb)=>{"use strict";var AR=En();zb.exports=function(a){if(!AR(a))throw new TypeError("Cannot use null or undefined");return a}});var Db=D((cW,Mb)=>{"use strict";var NR=Fb(),IR=Ao(),OR=Math.max;Mb.exports=function(a,n){var l,d,h=OR(arguments.length,2),g;for(a=Object(IR(a)),g=function(b){try{a[b]=n[b]}catch(x){l||(l=x)}},d=1;d<h;++d)n=arguments[d],NR(n).forEach(g);if(l!==void 0)throw l;return a}});var jb=D((hW,Wb)=>{"use strict";Wb.exports=Pb()()?Object.assign:Db()});var Vb=D((pW,qb)=>{"use strict";var RR=En(),LR=Array.prototype.forEach,_R=Object.create,BR=function(a,n){var l;for(l in a)n[l]=a[l]};qb.exports=function(a){var n=_R(null);return LR.call(arguments,function(l){RR(l)&&BR(Object(l),n)}),n}});var Ub=D((mW,Hb)=>{"use strict";var Lu="razdwatrzy";Hb.exports=function(){return typeof Lu.contains!="function"?!1:Lu.contains("dwa")===!0&&Lu.contains("foo")===!1}});var $b=D((gW,Gb)=>{"use strict";var FR=String.prototype.indexOf;Gb.exports=function(a){return FR.call(this,a,arguments[1])>-1}});var Xb=D((fW,Yb)=>{"use strict";Yb.exports=Ub()()?String.prototype.contains:$b()});var zr=D((bW,Jb)=>{"use strict";var No=Ru(),Kb=Eb(),Zb=jb(),Qb=Vb(),Hs=Xb(),zR=Jb.exports=function(a,n){var l,d,h,g,b;return arguments.length<2||typeof a!="string"?(g=n,n=a,a=null):g=arguments[2],No(a)?(l=Hs.call(a,"c"),d=Hs.call(a,"e"),h=Hs.call(a,"w")):(l=h=!0,d=!1),b={value:n,configurable:l,enumerable:d,writable:h},g?Zb(Qb(g),b):b};zR.gs=function(a,n,l){var d,h,g,b;return typeof a!="string"?(g=l,l=n,n=a,a=null):g=arguments[3],No(n)?Kb(n)?No(l)?Kb(l)||(g=l,l=void 0):l=void 0:(g=n,n=l=void 0):n=void 0,No(a)?(d=Hs.call(a,"c"),h=Hs.call(a,"e")):(d=!0,h=!1),b={get:n,set:l,configurable:d,enumerable:h},g?Zb(Qb(g),b):b}});var _u=D((yW,ey)=>{"use strict";ey.exports=function(a){if(typeof a!="function")throw new TypeError(a+" is not a function");return a}});var fr=D((Vu,sy)=>{"use strict";var Io=zr(),Mu=_u(),zu=Function.prototype.apply,Bu=Function.prototype.call,ty=Object.create,MR=Object.defineProperty,iy=Object.defineProperties,Du=Object.prototype.hasOwnProperty,Fu={configurable:!0,enumerable:!1,writable:!0},Oo,Wu,Ro,ju,ry,qu,ny;Oo=function(a,n){var l;return Mu(n),Du.call(this,"__ee__")?l=this.__ee__:(l=Fu.value=ty(null),MR(this,"__ee__",Fu),Fu.value=null),l[a]?typeof l[a]=="object"?l[a].push(n):l[a]=[l[a],n]:l[a]=n,this};Wu=function(a,n){var l,d;return Mu(n),d=this,Oo.call(this,a,l=function(){Ro.call(d,a,l),zu.call(n,this,arguments)}),l.__eeOnceListener__=n,this};Ro=function(a,n){var l,d,h,g;if(Mu(n),!Du.call(this,"__ee__"))return this;if(l=this.__ee__,!l[a])return this;if(d=l[a],typeof d=="object")for(g=0;h=d[g];++g)(h===n||h.__eeOnceListener__===n)&&(d.length===2?l[a]=d[g?0:1]:d.splice(g,1));else(d===n||d.__eeOnceListener__===n)&&delete l[a];return this};ju=function(a){var n,l,d,h,g;if(Du.call(this,"__ee__")&&(h=this.__ee__[a],!!h))if(typeof h=="object"){for(l=arguments.length,g=new Array(l-1),n=1;n<l;++n)g[n-1]=arguments[n];for(h=h.slice(),n=0;d=h[n];++n)zu.call(d,this,g)}else switch(arguments.length){case 1:Bu.call(h,this);break;case 2:Bu.call(h,this,arguments[1]);break;case 3:Bu.call(h,this,arguments[1],arguments[2]);break;default:for(l=arguments.length,g=new Array(l-1),n=1;n<l;++n)g[n-1]=arguments[n];zu.call(h,this,g)}};ry={on:Oo,once:Wu,off:Ro,emit:ju};qu={on:Io(Oo),once:Io(Wu),off:Io(Ro),emit:Io(ju)};ny=iy({},qu);sy.exports=Vu=function(a){return a==null?ty(ny):iy(Object(a),qu)};Vu.methods=ry});var Mr=D((DW,py)=>{function Ki(a){return{prev:null,next:null,data:a}}function Pn(a,n,l){var d;return Tn!==null?(d=Tn,Tn=Tn.cursor,d.prev=n,d.next=l,d.cursor=a.cursor):d={prev:n,next:l,cursor:a.cursor},a.cursor=d,d}function An(a){var n=a.cursor;a.cursor=n.cursor,n.prev=null,n.next=null,n.cursor=Tn,Tn=n}var Tn=null,ye=function(){this.cursor=null,this.head=null,this.tail=null};ye.createItem=Ki;ye.prototype.createItem=Ki;ye.prototype.updateCursors=function(a,n,l,d){for(var h=this.cursor;h!==null;)h.prev===a&&(h.prev=n),h.next===l&&(h.next=d),h=h.cursor};ye.prototype.getSize=function(){for(var a=0,n=this.head;n;)a++,n=n.next;return a};ye.prototype.fromArray=function(a){var n=null;this.head=null;for(var l=0;l<a.length;l++){var d=Ki(a[l]);n!==null?n.next=d:this.head=d,d.prev=n,n=d}return this.tail=n,this};ye.prototype.toArray=function(){for(var a=this.head,n=[];a;)n.push(a.data),a=a.next;return n};ye.prototype.toJSON=ye.prototype.toArray;ye.prototype.isEmpty=function(){return this.head===null};ye.prototype.first=function(){return this.head&&this.head.data};ye.prototype.last=function(){return this.tail&&this.tail.data};ye.prototype.each=function(a,n){var l;n===void 0&&(n=this);for(var d=Pn(this,null,this.head);d.next!==null;)l=d.next,d.next=l.next,a.call(n,l.data,l,this);An(this)};ye.prototype.forEach=ye.prototype.each;ye.prototype.eachRight=function(a,n){var l;n===void 0&&(n=this);for(var d=Pn(this,this.tail,null);d.prev!==null;)l=d.prev,d.prev=l.prev,a.call(n,l.data,l,this);An(this)};ye.prototype.forEachRight=ye.prototype.eachRight;ye.prototype.reduce=function(a,n,l){var d;l===void 0&&(l=this);for(var h=Pn(this,null,this.head),g=n;h.next!==null;)d=h.next,h.next=d.next,g=a.call(l,g,d.data,d,this);return An(this),g};ye.prototype.reduceRight=function(a,n,l){var d;l===void 0&&(l=this);for(var h=Pn(this,this.tail,null),g=n;h.prev!==null;)d=h.prev,h.prev=d.prev,g=a.call(l,g,d.data,d,this);return An(this),g};ye.prototype.nextUntil=function(a,n,l){if(a!==null){var d;l===void 0&&(l=this);for(var h=Pn(this,null,a);h.next!==null&&(d=h.next,h.next=d.next,!n.call(l,d.data,d,this)););An(this)}};ye.prototype.prevUntil=function(a,n,l){if(a!==null){var d;l===void 0&&(l=this);for(var h=Pn(this,a,null);h.prev!==null&&(d=h.prev,h.prev=d.prev,!n.call(l,d.data,d,this)););An(this)}};ye.prototype.some=function(a,n){var l=this.head;for(n===void 0&&(n=this);l!==null;){if(a.call(n,l.data,l,this))return!0;l=l.next}return!1};ye.prototype.map=function(a,n){var l=new ye,d=this.head;for(n===void 0&&(n=this);d!==null;)l.appendData(a.call(n,d.data,d,this)),d=d.next;return l};ye.prototype.filter=function(a,n){var l=new ye,d=this.head;for(n===void 0&&(n=this);d!==null;)a.call(n,d.data,d,this)&&l.appendData(d.data),d=d.next;return l};ye.prototype.clear=function(){this.head=null,this.tail=null};ye.prototype.copy=function(){for(var a=new ye,n=this.head;n!==null;)a.insert(Ki(n.data)),n=n.next;return a};ye.prototype.prepend=function(a){return this.updateCursors(null,a,this.head,a),this.head!==null?(this.head.prev=a,a.next=this.head):this.tail=a,this.head=a,this};ye.prototype.prependData=function(a){return this.prepend(Ki(a))};ye.prototype.append=function(a){return this.insert(a)};ye.prototype.appendData=function(a){return this.insert(Ki(a))};ye.prototype.insert=function(a,n){if(n!=null)if(this.updateCursors(n.prev,a,n,a),n.prev===null){if(this.head!==n)throw new Error("before doesn't belong to list");this.head=a,n.prev=a,a.next=n,this.updateCursors(null,a)}else n.prev.next=a,a.prev=n.prev,n.prev=a,a.next=n;else this.updateCursors(this.tail,a,null,a),this.tail!==null?(this.tail.next=a,a.prev=this.tail):this.head=a,this.tail=a;return this};ye.prototype.insertData=function(a,n){return this.insert(Ki(a),n)};ye.prototype.remove=function(a){if(this.updateCursors(a,a.prev,a,a.next),a.prev!==null)a.prev.next=a.next;else{if(this.head!==a)throw new Error("item doesn't belong to list");this.head=a.next}if(a.next!==null)a.next.prev=a.prev;else{if(this.tail!==a)throw new Error("item doesn't belong to list");this.tail=a.prev}return a.prev=null,a.next=null,a};ye.prototype.push=function(a){this.insert(Ki(a))};ye.prototype.pop=function(){if(this.tail!==null)return this.remove(this.tail)};ye.prototype.unshift=function(a){this.prepend(Ki(a))};ye.prototype.shift=function(){if(this.head!==null)return this.remove(this.head)};ye.prototype.prependList=function(a){return this.insertList(a,this.head)};ye.prototype.appendList=function(a){return this.insertList(a)};ye.prototype.insertList=function(a,n){return a.head===null?this:(n!=null?(this.updateCursors(n.prev,a.tail,n,a.head),n.prev!==null?(n.prev.next=a.head,a.head.prev=n.prev):this.head=a.head,n.prev=a.tail,a.tail.next=n):(this.updateCursors(this.tail,a.tail,null,a.head),this.tail!==null?(this.tail.next=a.head,a.head.prev=this.tail):this.head=a.head,this.tail=a.tail),a.head=null,a.tail=null,this)};ye.prototype.replace=function(a,n){"head"in n?this.insertList(n,a):this.insert(n,a),this.remove(a)};py.exports=ye});var zo=D((WW,my)=>{my.exports=function(n,l){var d=Object.create(SyntaxError.prototype),h=new Error;return d.name=n,d.message=l,Object.defineProperty(d,"stack",{get:function(){return(h.stack||"").replace(/^(.+\n){1,3}/,n+": "+l+`
`)}}),d}});var Ku=D((jW,yy)=>{var jR=zo(),Xu=100,gy=60,fy="    ";function by(a,n){function l(z,k){return d.slice(z,k).map(function(M,f){for(var Y=String(z+f+1);Y.length<C;)Y=" "+Y;return Y+" |"+M}).join(`
`)}var d=a.source.split(/\r\n?|\n|\f/),h=a.line,g=a.column,b=Math.max(1,h-n)-1,x=Math.min(h+n,d.length+1),C=Math.max(4,String(x).length)+1,I=0;g+=(fy.length-1)*(d[h-1].substr(0,g-1).match(/\t/g)||[]).length,g>Xu&&(I=g-gy+3,g=gy-2);for(var B=b;B<=x;B++)B>=0&&B<d.length&&(d[B]=d[B].replace(/\t/g,fy),d[B]=(I>0&&d[B].length>I?"\u2026":"")+d[B].substr(I,Xu-2)+(d[B].length>I+Xu-1?"\u2026":""));return[l(b,h),new Array(g+C+2).join("-")+"^",l(h,x)].filter(Boolean).join(`
`)}var qR=function(a,n,l,d,h){var g=jR("SyntaxError",a);return g.source=n,g.offset=l,g.line=d,g.column=h,g.sourceFragment=function(b){return by(g,isNaN(b)?0:b)},Object.defineProperty(g,"formattedMessage",{get:function(){return"Parse error: "+g.message+`
`+by(g,2)}}),g.parseError={offset:l,line:d,column:h},g};yy.exports=qR});var Us=D((qW,vy)=>{var Zu={EOF:0,Ident:1,Function:2,AtKeyword:3,Hash:4,String:5,BadString:6,Url:7,BadUrl:8,Delim:9,Number:10,Percentage:11,Dimension:12,WhiteSpace:13,CDO:14,CDC:15,Colon:16,Semicolon:17,Comma:18,LeftSquareBracket:19,RightSquareBracket:20,LeftParenthesis:21,RightParenthesis:22,LeftCurlyBracket:23,RightCurlyBracket:24,Comment:25},VR=Object.keys(Zu).reduce(function(a,n){return a[Zu[n]]=n,a},{});vy.exports={TYPE:Zu,NAME:VR}});var ec=D((VW,Ty)=>{var HR=0;function br(a){return a>=48&&a<=57}function UR(a){return br(a)||a>=65&&a<=70||a>=97&&a<=102}function Sy(a){return a>=65&&a<=90}function xy(a){return a>=97&&a<=122}function wy(a){return Sy(a)||xy(a)}function Cy(a){return a>=128}function Gs(a){return wy(a)||Cy(a)||a===95}function GR(a){return Gs(a)||br(a)||a===45}function ky(a){return a>=0&&a<=8||a===11||a>=14&&a<=31||a===127}function Ju(a){return a===10||a===13||a===12}function Ey(a){return Ju(a)||a===32||a===9}function Qu(a,n){return!(a!==92||Ju(n)||n===HR)}function $R(a,n,l){return a===45?Gs(n)||n===45||Qu(n,l):Gs(a)?!0:a===92?Qu(a,n):!1}function YR(a,n,l){return a===43||a===45?br(n)?2:n===46&&br(l)?3:0:a===46?br(n)?2:0:br(a)?1:0}function XR(a){return a===65279||a===65534?1:0}var Dr=new Array(128);vi.Eof=128;vi.WhiteSpace=130;vi.Digit=131;vi.NameStart=132;vi.NonPrintable=133;for(ui=0;ui<Dr.length;ui++)switch(!0){case Ey(ui):Dr[ui]=vi.WhiteSpace;break;case br(ui):Dr[ui]=vi.Digit;break;case Gs(ui):Dr[ui]=vi.NameStart;break;case ky(ui):Dr[ui]=vi.NonPrintable;break;default:Dr[ui]=ui||vi.Eof}var ui;function vi(a){return a<128?Dr[a]:vi.NameStart}Ty.exports={isDigit:br,isHexDigit:UR,isUppercaseLetter:Sy,isLowercaseLetter:xy,isLetter:wy,isNonAscii:Cy,isNameStart:Gs,isName:GR,isNonPrintable:ky,isNewline:Ju,isWhiteSpace:Ey,isValidEscape:Qu,isIdentifierStart:$R,isNumberStart:YR,isBOM:XR,charCodeCategory:vi}});var On=D((HW,Ry)=>{var In=ec(),Mo=In.isDigit,Py=In.isHexDigit,Ay=In.isUppercaseLetter,KR=In.isName,ic=In.isWhiteSpace,Ny=In.isValidEscape;function Nn(a,n){return n<a.length?a.charCodeAt(n):0}function Iy(a,n,l){return l===13&&Nn(a,n+1)===10?2:1}function Oy(a,n,l){var d=a.charCodeAt(n);return Ay(d)&&(d=d|32),d===l}function ZR(a,n,l,d){if(l-n!==d.length||n<0||l>a.length)return!1;for(var h=n;h<l;h++){var g=a.charCodeAt(h),b=d.charCodeAt(h-n);if(Ay(g)&&(g=g|32),g!==b)return!1}return!0}function QR(a,n){for(;n>=0&&ic(a.charCodeAt(n));n--);return n+1}function JR(a,n){for(;n<a.length&&ic(a.charCodeAt(n));n++);return n}function tc(a,n){for(;n<a.length&&Mo(a.charCodeAt(n));n++);return n}function rc(a,n){if(n+=2,Py(Nn(a,n-1))){for(var l=Math.min(a.length,n+5);n<l&&Py(Nn(a,n));n++);var d=Nn(a,n);ic(d)&&(n+=Iy(a,n,d))}return n}function eL(a,n){for(;n<a.length;n++){var l=a.charCodeAt(n);if(!KR(l)){if(Ny(l,Nn(a,n+1))){n=rc(a,n)-1;continue}break}}return n}function tL(a,n){var l=a.charCodeAt(n);if((l===43||l===45)&&(l=a.charCodeAt(n+=1)),Mo(l)&&(n=tc(a,n+1),l=a.charCodeAt(n)),l===46&&Mo(a.charCodeAt(n+1))&&(l=a.charCodeAt(n+=2),n=tc(a,n)),Oy(a,n,101)){var d=0;l=a.charCodeAt(n+1),(l===45||l===43)&&(d=1,l=a.charCodeAt(n+2)),Mo(l)&&(n=tc(a,n+1+d+1))}return n}function iL(a,n){for(;n<a.length;n++){var l=a.charCodeAt(n);if(l===41){n++;break}Ny(l,Nn(a,n+1))&&(n=rc(a,n))}return n}Ry.exports={consumeEscaped:rc,consumeName:eL,consumeNumber:tL,consumeBadUrlRemnants:iL,cmpChar:Oy,cmpStr:ZR,getNewlineLength:Iy,findWhiteSpaceStart:QR,findWhiteSpaceEnd:JR}});var Ys=D((UW,zy)=>{var By=Us(),$s=By.TYPE,rL=By.NAME,nL=On(),sL=nL.cmpStr,Ly=$s.EOF,_y=$s.WhiteSpace,aL=$s.Comment,Ti=16777215,Rn=24,Fy=function(){this.offsetAndType=null,this.balance=null,this.reset()};Fy.prototype={reset:function(){this.eof=!1,this.tokenIndex=-1,this.tokenType=0,this.tokenStart=this.firstCharOffset,this.tokenEnd=this.firstCharOffset},lookupType:function(a){return a+=this.tokenIndex,a<this.tokenCount?this.offsetAndType[a]>>Rn:Ly},lookupOffset:function(a){return a+=this.tokenIndex,a<this.tokenCount?this.offsetAndType[a-1]&Ti:this.source.length},lookupValue:function(a,n){return a+=this.tokenIndex,a<this.tokenCount?sL(this.source,this.offsetAndType[a-1]&Ti,this.offsetAndType[a]&Ti,n):!1},getTokenStart:function(a){return a===this.tokenIndex?this.tokenStart:a>0?a<this.tokenCount?this.offsetAndType[a-1]&Ti:this.offsetAndType[this.tokenCount]&Ti:this.firstCharOffset},getRawLength:function(a,n){var l=a,d,h=this.offsetAndType[Math.max(l-1,0)]&Ti,g;e:for(;l<this.tokenCount;l++){if(d=this.balance[l],d<a)break e;switch(g=this.offsetAndType[l]>>Rn,n(g,this.source,h)){case 1:break e;case 2:l++;break e;default:this.balance[d]===l&&(l=d),h=this.offsetAndType[l]&Ti}}return l-this.tokenIndex},isBalanceEdge:function(a){return this.balance[this.tokenIndex]<a},isDelim:function(a,n){return n?this.lookupType(n)===$s.Delim&&this.source.charCodeAt(this.lookupOffset(n))===a:this.tokenType===$s.Delim&&this.source.charCodeAt(this.tokenStart)===a},getTokenValue:function(){return this.source.substring(this.tokenStart,this.tokenEnd)},getTokenLength:function(){return this.tokenEnd-this.tokenStart},substrToCursor:function(a){return this.source.substring(a,this.tokenStart)},skipWS:function(){for(var a=this.tokenIndex,n=0;a<this.tokenCount&&this.offsetAndType[a]>>Rn===_y;a++,n++);n>0&&this.skip(n)},skipSC:function(){for(;this.tokenType===_y||this.tokenType===aL;)this.next()},skip:function(a){var n=this.tokenIndex+a;n<this.tokenCount?(this.tokenIndex=n,this.tokenStart=this.offsetAndType[n-1]&Ti,n=this.offsetAndType[n],this.tokenType=n>>Rn,this.tokenEnd=n&Ti):(this.tokenIndex=this.tokenCount,this.next())},next:function(){var a=this.tokenIndex+1;a<this.tokenCount?(this.tokenIndex=a,this.tokenStart=this.tokenEnd,a=this.offsetAndType[a],this.tokenType=a>>Rn,this.tokenEnd=a&Ti):(this.tokenIndex=this.tokenCount,this.eof=!0,this.tokenType=Ly,this.tokenStart=this.tokenEnd=this.source.length)},forEachToken(a){for(var n=0,l=this.firstCharOffset;n<this.tokenCount;n++){var d=l,h=this.offsetAndType[n],g=h&Ti,b=h>>Rn;l=g,a(b,d,g,n)}},dump(){var a=new Array(this.tokenCount);return this.forEachToken((n,l,d,h)=>{a[h]={idx:h,type:rL[n],chunk:this.source.substring(l,d),balance:this.balance[h]}}),a}};zy.exports=Fy});var Do=D((GW,My)=>{function oL(a){return a}function lL(a){return a.min===0&&a.max===0?"*":a.min===0&&a.max===1?"?":a.min===1&&a.max===0?a.comma?"#":"+":a.min===1&&a.max===1?"":(a.comma?"#":"")+(a.min===a.max?"{"+a.min+"}":"{"+a.min+","+(a.max!==0?a.max:"")+"}")}function dL(a){switch(a.type){case"Range":return" ["+(a.min===null?"-\u221E":a.min)+","+(a.max===null?"\u221E":a.max)+"]";default:throw new Error("Unknown node type `"+a.type+"`")}}function uL(a,n,l,d){var h=a.combinator===" "||d?a.combinator:" "+a.combinator+" ",g=a.terms.map(function(b){return nc(b,n,l,d)}).join(h);return(a.explicit||l)&&(g=(d||g[0]===","?"[":"[ ")+g+(d?"]":" ]")),g}function nc(a,n,l,d){var h;switch(a.type){case"Group":h=uL(a,n,l,d)+(a.disallowEmpty?"!":"");break;case"Multiplier":return nc(a.term,n,l,d)+n(lL(a),a);case"Type":h="<"+a.name+(a.opts?n(dL(a.opts),a.opts):"")+">";break;case"Property":h="<'"+a.name+"'>";break;case"Keyword":h=a.name;break;case"AtKeyword":h="@"+a.name;break;case"Function":h=a.name+"(";break;case"String":case"Token":h=a.value;break;case"Comma":h=",";break;default:throw new Error("Unknown node type `"+a.type+"`")}return n(h,a)}My.exports=function(a,n){var l=oL,d=!1,h=!1;return typeof n=="function"?l=n:n&&(d=!!n.forceBraces,h=!!n.compact,typeof n.decorate=="function"&&(l=n.decorate)),nc(a,l,d,h)}});var sc=D(($W,jy)=>{var Wy=zo(),cL=Do(),Dy={offset:0,line:1,column:1};function hL(a,n){let l=a.tokens,d=a.longestMatch,h=d<l.length&&l[d].node||null,g=h!==n?h:null,b=0,x=0,C=0,I="",B,z;for(let k=0;k<l.length;k++){let M=l[k].value;k===d&&(x=M.length,b=I.length),g!==null&&l[k].node===g&&(k<=d?C++:C=0),I+=M}return d===l.length||C>1?(B=Wo(g||n,"end")||Xs(Dy,I),z=Xs(B)):(B=Wo(g,"start")||Xs(Wo(n,"start")||Dy,I.slice(0,b)),z=Wo(g,"end")||Xs(B,I.substr(b,x))),{css:I,mismatchOffset:b,mismatchLength:x,start:B,end:z}}function Wo(a,n){let l=a&&a.loc&&a.loc[n];return l?"line"in l?Xs(l):l:null}function Xs({offset:a,line:n,column:l},d){let h={offset:a,line:n,column:l};if(d){let g=d.split(/\n|\r\n?|\f/);h.offset+=d.length,h.line+=g.length-1,h.column=g.length===1?h.column+d.length:g.pop().length+1}return h}var pL=function(a,n){let l=Wy("SyntaxReferenceError",a+(n?" `"+n+"`":""));return l.reference=n,l},mL=function(a,n,l,d){let h=Wy("SyntaxMatchError",a),{css:g,mismatchOffset:b,mismatchLength:x,start:C,end:I}=hL(d,l);return h.rawMessage=a,h.syntax=n?cL(n):"<generic>",h.css=g,h.mismatchOffset=b,h.mismatchLength=x,h.message=a+`
  syntax: `+h.syntax+`
   value: `+(g||"<empty string>")+`
  --------`+new Array(h.mismatchOffset+1).join("-")+"^",Object.assign(h,C),h.loc={source:l&&l.loc&&l.loc.source||"<unknown>",start:C,end:I},h};jy.exports={SyntaxReferenceError:pL,SyntaxMatchError:mL}});var Vo=D((YW,qy)=>{var jo=Object.prototype.hasOwnProperty,Ln=Object.create(null),_n=Object.create(null),qo=45;function ac(a,n){return n=n||0,a.length-n>=2&&a.charCodeAt(n)===qo&&a.charCodeAt(n+1)===qo}function oc(a,n){if(n=n||0,a.length-n>=3&&a.charCodeAt(n)===qo&&a.charCodeAt(n+1)!==qo){var l=a.indexOf("-",n+2);if(l!==-1)return a.substring(n,l+1)}return""}function gL(a){if(jo.call(Ln,a))return Ln[a];var n=a.toLowerCase();if(jo.call(Ln,n))return Ln[a]=Ln[n];var l=ac(n,0),d=l?"":oc(n,0);return Ln[a]=Object.freeze({basename:n.substr(d.length),name:n,vendor:d,prefix:d,custom:l})}function fL(a){if(jo.call(_n,a))return _n[a];var n=a,l=a[0];l==="/"?l=a[1]==="/"?"//":"/":l!=="_"&&l!=="*"&&l!=="$"&&l!=="#"&&l!=="+"&&l!=="&"&&(l="");var d=ac(n,l.length);if(!d&&(n=n.toLowerCase(),jo.call(_n,n)))return _n[a]=_n[n];var h=d?"":oc(n,l.length),g=n.substr(0,l.length+h.length);return _n[a]=Object.freeze({basename:n.substr(g.length),name:n.substr(l.length),hack:l,vendor:h,prefix:g,custom:d})}qy.exports={keyword:gL,property:fL,isCustomProperty:ac,vendorPrefix:oc}});var lc=D((XW,Vy)=>{var bL=16384,yL=typeof Uint32Array<"u"?Uint32Array:Array;Vy.exports=function(n,l){return n===null||n.length<l?new yL(Math.max(l+1024,bL)):n}});var oe=D((KW,Xy)=>{var vL=Ys(),Hy=lc(),hc=Us(),Se=hc.TYPE,Zi=ec(),Uy=Zi.isNewline,SL=Zi.isName,Ho=Zi.isValidEscape,dc=Zi.isNumberStart,uc=Zi.isIdentifierStart,Si=Zi.charCodeCategory,xL=Zi.isBOM,Qi=On(),wL=Qi.cmpStr,Gy=Qi.getNewlineLength,Uo=Qi.findWhiteSpaceEnd,$y=Qi.consumeEscaped,Go=Qi.consumeName,CL=Qi.consumeNumber,cc=Qi.consumeBadUrlRemnants,Yy=16777215,Bn=24;function $o(a,n){function l(K){return K<x?a.charCodeAt(K):0}function d(){if(k=CL(a,k),uc(l(k),l(k+1),l(k+2))){V=Se.Dimension,k=Go(a,k);return}if(l(k)===37){V=Se.Percentage,k++;return}V=Se.Number}function h(){let K=k;if(k=Go(a,k),wL(a,K,k,"url")&&l(k)===40){if(k=Uo(a,k+1),l(k)===34||l(k)===39){V=Se.Function,k=K+4;return}b();return}if(l(k)===40){V=Se.Function,k++;return}V=Se.Ident}function g(K){for(K||(K=l(k++)),V=Se.String;k<a.length;k++){var fe=a.charCodeAt(k);switch(Si(fe)){case K:k++;return;case Si.Eof:return;case Si.WhiteSpace:if(Uy(fe)){k+=Gy(a,k,fe),V=Se.BadString;return}break;case 92:if(k===a.length-1)break;var me=l(k+1);Uy(me)?k+=Gy(a,k+1,me):Ho(fe,me)&&(k=$y(a,k)-1);break}}}function b(){for(V=Se.Url,k=Uo(a,k);k<a.length;k++){var K=a.charCodeAt(k);switch(Si(K)){case 41:k++;return;case Si.Eof:return;case Si.WhiteSpace:if(k=Uo(a,k),l(k)===41||k>=a.length){k<a.length&&k++;return}k=cc(a,k),V=Se.BadUrl;return;case 34:case 39:case 40:case Si.NonPrintable:k=cc(a,k),V=Se.BadUrl;return;case 92:if(Ho(K,l(k+1))){k=$y(a,k)-1;break}k=cc(a,k),V=Se.BadUrl;return}}}n||(n=new vL),a=String(a||"");for(var x=a.length,C=Hy(n.offsetAndType,x+1),I=Hy(n.balance,x+1),B=0,z=xL(l(0)),k=z,M=0,f=0,Y=0;k<x;){var se=a.charCodeAt(k),V=0;switch(I[B]=x,Si(se)){case Si.WhiteSpace:V=Se.WhiteSpace,k=Uo(a,k+1);break;case 34:g();break;case 35:SL(l(k+1))||Ho(l(k+1),l(k+2))?(V=Se.Hash,k=Go(a,k+1)):(V=Se.Delim,k++);break;case 39:g();break;case 40:V=Se.LeftParenthesis,k++;break;case 41:V=Se.RightParenthesis,k++;break;case 43:dc(se,l(k+1),l(k+2))?d():(V=Se.Delim,k++);break;case 44:V=Se.Comma,k++;break;case 45:dc(se,l(k+1),l(k+2))?d():l(k+1)===45&&l(k+2)===62?(V=Se.CDC,k=k+3):uc(se,l(k+1),l(k+2))?h():(V=Se.Delim,k++);break;case 46:dc(se,l(k+1),l(k+2))?d():(V=Se.Delim,k++);break;case 47:l(k+1)===42?(V=Se.Comment,k=a.indexOf("*/",k+2)+2,k===1&&(k=a.length)):(V=Se.Delim,k++);break;case 58:V=Se.Colon,k++;break;case 59:V=Se.Semicolon,k++;break;case 60:l(k+1)===33&&l(k+2)===45&&l(k+3)===45?(V=Se.CDO,k=k+4):(V=Se.Delim,k++);break;case 64:uc(l(k+1),l(k+2),l(k+3))?(V=Se.AtKeyword,k=Go(a,k+1)):(V=Se.Delim,k++);break;case 91:V=Se.LeftSquareBracket,k++;break;case 92:Ho(se,l(k+1))?h():(V=Se.Delim,k++);break;case 93:V=Se.RightSquareBracket,k++;break;case 123:V=Se.LeftCurlyBracket,k++;break;case 125:V=Se.RightCurlyBracket,k++;break;case Si.Digit:d();break;case Si.NameStart:h();break;case Si.Eof:break;default:V=Se.Delim,k++}switch(V){case M:for(Y=f&Yy,f=I[Y],M=f>>Bn,I[B]=Y,I[Y++]=B;Y<B;Y++)I[Y]===x&&(I[Y]=B);break;case Se.LeftParenthesis:case Se.Function:I[B]=f,M=Se.RightParenthesis,f=M<<Bn|B;break;case Se.LeftSquareBracket:I[B]=f,M=Se.RightSquareBracket,f=M<<Bn|B;break;case Se.LeftCurlyBracket:I[B]=f,M=Se.RightCurlyBracket,f=M<<Bn|B;break}C[B++]=V<<Bn|k}for(C[B]=Se.EOF<<Bn|k,I[B]=x,I[x]=x;f!==0;)Y=f&Yy,f=I[Y],I[Y]=x;return n.source=a,n.firstCharOffset=z,n.offsetAndType=C,n.tokenCount=B,n.balance=I,n.reset(),n.next(),n}Object.keys(hc).forEach(function(a){$o[a]=hc[a]});Object.keys(Zi).forEach(function(a){$o[a]=Zi[a]});Object.keys(Qi).forEach(function(a){$o[a]=Qi[a]});Xy.exports=$o});var Qy=D((ZW,Zy)=>{var Ky=oe().isDigit,pc=oe().cmpChar,zn=oe().TYPE,kL=zn.Delim,EL=zn.WhiteSpace,TL=zn.Comment,Yo=zn.Ident,fc=zn.Number,PL=zn.Dimension,Zs=43,Ri=45,mc=110,Fn=!0,AL=!1;function bc(a,n){return a!==null&&a.type===kL&&a.value.charCodeAt(0)===n}function Ks(a,n,l){for(;a!==null&&(a.type===EL||a.type===TL);)a=l(++n);return n}function yr(a,n,l,d){if(!a)return 0;var h=a.value.charCodeAt(n);if(h===Zs||h===Ri){if(l)return 0;n++}for(;n<a.value.length;n++)if(!Ky(a.value.charCodeAt(n)))return 0;return d+1}function gc(a,n,l){var d=!1,h=Ks(a,n,l);if(a=l(h),a===null)return n;if(a.type!==fc)if(bc(a,Zs)||bc(a,Ri)){if(d=!0,h=Ks(l(++h),h,l),a=l(h),a===null&&a.type!==fc)return 0}else return n;if(!d){var g=a.value.charCodeAt(0);if(g!==Zs&&g!==Ri)return 0}return yr(a,d?0:1,d,h)}Zy.exports=function(n,l){var d=0;if(!n)return 0;if(n.type===fc)return yr(n,0,AL,d);if(n.type===Yo&&n.value.charCodeAt(0)===Ri){if(!pc(n.value,1,mc))return 0;switch(n.value.length){case 2:return gc(l(++d),d,l);case 3:return n.value.charCodeAt(2)!==Ri?0:(d=Ks(l(++d),d,l),n=l(d),yr(n,0,Fn,d));default:return n.value.charCodeAt(2)!==Ri?0:yr(n,3,Fn,d)}}else if(n.type===Yo||bc(n,Zs)&&l(d+1).type===Yo){if(n.type!==Yo&&(n=l(++d)),n===null||!pc(n.value,0,mc))return 0;switch(n.value.length){case 1:return gc(l(++d),d,l);case 2:return n.value.charCodeAt(1)!==Ri?0:(d=Ks(l(++d),d,l),n=l(d),yr(n,0,Fn,d));default:return n.value.charCodeAt(1)!==Ri?0:yr(n,2,Fn,d)}}else if(n.type===PL){for(var h=n.value.charCodeAt(0),g=h===Zs||h===Ri?1:0,b=g;b<n.value.length&&Ky(n.value.charCodeAt(b));b++);return b===g||!pc(n.value,b,mc)?0:b+1===n.value.length?gc(l(++d),d,l):n.value.charCodeAt(b+1)!==Ri?0:b+2===n.value.length?(d=Ks(l(++d),d,l),n=l(d),yr(n,0,Fn,d)):yr(n,b+2,Fn,d)}return 0}});var sv=D((QW,nv)=>{var NL=oe().isHexDigit,IL=oe().cmpChar,Ko=oe().TYPE,Jy=Ko.Ident,OL=Ko.Delim,ev=Ko.Number,tv=Ko.Dimension,yc=43,iv=45,rv=63,RL=117;function Sc(a,n){return a!==null&&a.type===OL&&a.value.charCodeAt(0)===n}function vc(a,n){return a.value.charCodeAt(0)===n}function Qs(a,n,l){for(var d=n,h=0;d<a.value.length;d++){var g=a.value.charCodeAt(d);if(g===iv&&l&&h!==0)return Qs(a,n+h+1,!1)>0?6:0;if(!NL(g)||++h>6)return 0}return h}function Xo(a,n,l){if(!a)return 0;for(;Sc(l(n),rv);){if(++a>6)return 0;n++}return n}nv.exports=function(n,l){var d=0;if(n===null||n.type!==Jy||!IL(n.value,0,RL)||(n=l(++d),n===null))return 0;if(Sc(n,yc))return n=l(++d),n===null?0:n.type===Jy?Xo(Qs(n,0,!0),++d,l):Sc(n,rv)?Xo(1,++d,l):0;if(n.type===ev){if(!vc(n,yc))return 0;var h=Qs(n,1,!0);return h===0?0:(n=l(++d),n===null?d:n.type===tv||n.type===ev?!vc(n,iv)||!Qs(n,1,!1)?0:d+1:Xo(h,d,l))}return n.type===tv&&vc(n,yc)?Xo(Qs(n,1,!0),++d,l):0}});var pv=D((JW,hv)=>{var Mn=oe(),LL=Mn.isIdentifierStart,_L=Mn.isHexDigit,ov=Mn.isDigit,BL=Mn.cmpStr,lv=Mn.consumeNumber,be=Mn.TYPE,FL=Qy(),zL=sv(),ML=["unset","initial","inherit"],DL=["calc(","-moz-calc(","-webkit-calc("],WL={px:!0,mm:!0,cm:!0,in:!0,pt:!0,pc:!0,q:!0,em:!0,ex:!0,ch:!0,rem:!0,vh:!0,vw:!0,vmin:!0,vmax:!0,vm:!0},jL={deg:!0,grad:!0,rad:!0,turn:!0},qL={s:!0,ms:!0},VL={hz:!0,khz:!0},HL={dpi:!0,dpcm:!0,dppx:!0,x:!0},UL={fr:!0},GL={db:!0},$L={st:!0};function Js(a,n){return n<a.length?a.charCodeAt(n):0}function xc(a,n){return BL(a,0,a.length,n)}function dv(a,n){for(var l=0;l<n.length;l++)if(xc(a,n[l]))return!0;return!1}function uv(a,n){return n!==a.length-2?!1:a.charCodeAt(n)===92&&ov(a.charCodeAt(n+1))}function Zo(a,n,l){if(a&&a.type==="Range"){var d=Number(l!==void 0&&l!==n.length?n.substr(0,l):n);if(isNaN(d)||a.min!==null&&d<a.min||a.max!==null&&d>a.max)return!0}return!1}function cv(a,n){var l=a.index,d=0;do if(d++,a.balance<=l)break;while(a=n(d));return d}function xi(a){return function(n,l,d){return n===null?0:n.type===be.Function&&dv(n.value,DL)?cv(n,l):a(n,l,d)}}function Xe(a){return function(n){return n===null||n.type!==a?0:1}}function YL(a){return a=a+"(",function(n,l){return n!==null&&xc(n.value,a)?cv(n,l):0}}function XL(a){if(a===null||a.type!==be.Ident)return 0;var n=a.value.toLowerCase();return dv(n,ML)||xc(n,"default")?0:1}function KL(a){return a===null||a.type!==be.Ident||Js(a.value,0)!==45||Js(a.value,1)!==45?0:1}function ZL(a){if(a===null||a.type!==be.Hash)return 0;var n=a.value.length;if(n!==4&&n!==5&&n!==7&&n!==9)return 0;for(var l=1;l<n;l++)if(!_L(a.value.charCodeAt(l)))return 0;return 1}function QL(a){return a===null||a.type!==be.Hash||!LL(Js(a.value,1),Js(a.value,2),Js(a.value,3))?0:1}function JL(a,n){if(!a)return 0;var l=0,d=0,h=a.index;e:do{switch(a.type){case be.BadString:case be.BadUrl:break e;case be.RightCurlyBracket:case be.RightParenthesis:case be.RightSquareBracket:if(a.balance>a.index||a.balance<h)break e;d--;break;case be.Semicolon:if(d===0)break e;break;case be.Delim:if(a.value==="!"&&d===0)break e;break;case be.Function:case be.LeftParenthesis:case be.LeftSquareBracket:case be.LeftCurlyBracket:d++;break}if(l++,a.balance<=h)break}while(a=n(l));return l}function e_(a,n){if(!a)return 0;var l=a.index,d=0;e:do{switch(a.type){case be.BadString:case be.BadUrl:break e;case be.RightCurlyBracket:case be.RightParenthesis:case be.RightSquareBracket:if(a.balance>a.index||a.balance<l)break e;break}if(d++,a.balance<=l)break}while(a=n(d));return d}function Ji(a){return function(n,l,d){if(n===null||n.type!==be.Dimension)return 0;var h=lv(n.value,0);if(a!==null){var g=n.value.indexOf("\\",h),b=g===-1||!uv(n.value,g)?n.value.substr(h):n.value.substring(h,g);if(a.hasOwnProperty(b.toLowerCase())===!1)return 0}return Zo(d,n.value,h)?0:1}}function t_(a,n,l){return a===null||a.type!==be.Percentage||Zo(l,a.value,a.value.length-1)?0:1}function av(a){return typeof a!="function"&&(a=function(){return 0}),function(n,l,d){return n!==null&&n.type===be.Number&&Number(n.value)===0?1:a(n,l,d)}}function i_(a,n,l){if(a===null)return 0;var d=lv(a.value,0),h=d===a.value.length;return!h&&!uv(a.value,d)||Zo(l,a.value,d)?0:1}function r_(a,n,l){if(a===null||a.type!==be.Number)return 0;for(var d=a.value.charCodeAt(0)===43||a.value.charCodeAt(0)===45?1:0;d<a.value.length;d++)if(!ov(a.value.charCodeAt(d)))return 0;return Zo(l,a.value,d)?0:1}hv.exports={"ident-token":Xe(be.Ident),"function-token":Xe(be.Function),"at-keyword-token":Xe(be.AtKeyword),"hash-token":Xe(be.Hash),"string-token":Xe(be.String),"bad-string-token":Xe(be.BadString),"url-token":Xe(be.Url),"bad-url-token":Xe(be.BadUrl),"delim-token":Xe(be.Delim),"number-token":Xe(be.Number),"percentage-token":Xe(be.Percentage),"dimension-token":Xe(be.Dimension),"whitespace-token":Xe(be.WhiteSpace),"CDO-token":Xe(be.CDO),"CDC-token":Xe(be.CDC),"colon-token":Xe(be.Colon),"semicolon-token":Xe(be.Semicolon),"comma-token":Xe(be.Comma),"[-token":Xe(be.LeftSquareBracket),"]-token":Xe(be.RightSquareBracket),"(-token":Xe(be.LeftParenthesis),")-token":Xe(be.RightParenthesis),"{-token":Xe(be.LeftCurlyBracket),"}-token":Xe(be.RightCurlyBracket),string:Xe(be.String),ident:Xe(be.Ident),"custom-ident":XL,"custom-property-name":KL,"hex-color":ZL,"id-selector":QL,"an-plus-b":FL,urange:zL,"declaration-value":JL,"any-value":e_,dimension:xi(Ji(null)),angle:xi(Ji(jL)),decibel:xi(Ji(GL)),frequency:xi(Ji(VL)),flex:xi(Ji(UL)),length:xi(av(Ji(WL))),resolution:xi(Ji(HL)),semitones:xi(Ji($L)),time:xi(Ji(qL)),percentage:xi(t_),zero:av(),number:xi(i_),integer:xi(r_),"-ms-legacy-expression":YL("expression")}});var wc=D((ej,mv)=>{var n_=zo();mv.exports=function(n,l,d){var h=n_("SyntaxError",n);return h.input=l,h.offset=d,h.rawMessage=n,h.message=h.rawMessage+`
  `+h.input+`
--`+new Array((h.offset||h.input.length)+1).join("-")+"^",h}});var bv=D((tj,fv)=>{var s_=wc(),a_=9,o_=10,l_=12,d_=13,u_=32,gv=function(a){this.str=a,this.pos=0};gv.prototype={charCodeAt:function(a){return a<this.str.length?this.str.charCodeAt(a):0},charCode:function(){return this.charCodeAt(this.pos)},nextCharCode:function(){return this.charCodeAt(this.pos+1)},nextNonWsCode:function(a){return this.charCodeAt(this.findWsEnd(a))},findWsEnd:function(a){for(;a<this.str.length;a++){var n=this.str.charCodeAt(a);if(n!==d_&&n!==o_&&n!==l_&&n!==u_&&n!==a_)break}return a},substringToPos:function(a){return this.str.substring(this.pos,this.pos=a)},eat:function(a){this.charCode()!==a&&this.error("Expect `"+String.fromCharCode(a)+"`"),this.pos++},peek:function(){return this.pos<this.str.length?this.str.charAt(this.pos++):""},error:function(a){throw new s_(a,this.str,this.pos)}};fv.exports=gv});var nl=D((ij,_v)=>{var c_=bv(),h_=9,p_=10,m_=12,g_=13,f_=32,Ev=33,Tv=35,yv=38,Qo=39,Pv=40,b_=41,Av=42,Nv=43,Ec=44,vv=45,Tc=60,Iv=62,Ov=63,y_=64,il=91,Pc=93,Jo=123,Sv=124,xv=125,wv=8734,kc=v_(function(a){return/[a-zA-Z0-9\-]/.test(a)}),Cv={" ":1,"&&":2,"||":3,"|":4};function v_(a){for(var n=typeof Uint32Array=="function"?new Uint32Array(128):new Array(128),l=0;l<128;l++)n[l]=a(String.fromCharCode(l))?1:0;return n}function el(a){return a.substringToPos(a.findWsEnd(a.pos))}function rl(a){for(var n=a.pos;n<a.str.length;n++){var l=a.str.charCodeAt(n);if(l>=128||kc[l]===0)break}return a.pos===n&&a.error("Expect a keyword"),a.substringToPos(n)}function tl(a){for(var n=a.pos;n<a.str.length;n++){var l=a.str.charCodeAt(n);if(l<48||l>57)break}return a.pos===n&&a.error("Expect a number"),a.substringToPos(n)}function S_(a){var n=a.str.indexOf("'",a.pos+1);return n===-1&&(a.pos=a.str.length,a.error("Expect an apostrophe")),a.substringToPos(n+1)}function kv(a){var n=null,l=null;return a.eat(Jo),n=tl(a),a.charCode()===Ec?(a.pos++,a.charCode()!==xv&&(l=tl(a))):l=n,a.eat(xv),{min:Number(n),max:l?Number(l):0}}function x_(a){var n=null,l=!1;switch(a.charCode()){case Av:a.pos++,n={min:0,max:0};break;case Nv:a.pos++,n={min:1,max:0};break;case Ov:a.pos++,n={min:0,max:1};break;case Tv:a.pos++,l=!0,a.charCode()===Jo?n=kv(a):n={min:1,max:0};break;case Jo:n=kv(a);break;default:return null}return{type:"Multiplier",comma:l,min:n.min,max:n.max,term:null}}function ea(a,n){var l=x_(a);return l!==null?(l.term=n,l):n}function Cc(a){var n=a.peek();return n===""?null:{type:"Token",value:n}}function w_(a){var n;return a.eat(Tc),a.eat(Qo),n=rl(a),a.eat(Qo),a.eat(Iv),ea(a,{type:"Property",name:n})}function C_(a){var n=null,l=null,d=1;return a.eat(il),a.charCode()===vv&&(a.peek(),d=-1),d==-1&&a.charCode()===wv?a.peek():n=d*Number(tl(a)),el(a),a.eat(Ec),el(a),a.charCode()===wv?a.peek():(d=1,a.charCode()===vv&&(a.peek(),d=-1),l=d*Number(tl(a))),a.eat(Pc),n===null&&l===null?null:{type:"Range",min:n,max:l}}function k_(a){var n,l=null;return a.eat(Tc),n=rl(a),a.charCode()===Pv&&a.nextCharCode()===b_&&(a.pos+=2,n+="()"),a.charCodeAt(a.findWsEnd(a.pos))===il&&(el(a),l=C_(a)),a.eat(Iv),ea(a,{type:"Type",name:n,opts:l})}function E_(a){var n;return n=rl(a),a.charCode()===Pv?(a.pos++,{type:"Function",name:n}):ea(a,{type:"Keyword",name:n})}function T_(a,n){function l(x,C){return{type:"Group",terms:x,combinator:C,disallowEmpty:!1,explicit:!1}}for(n=Object.keys(n).sort(function(x,C){return Cv[x]-Cv[C]});n.length>0;){for(var d=n.shift(),h=0,g=0;h<a.length;h++){var b=a[h];b.type==="Combinator"&&(b.value===d?(g===-1&&(g=h-1),a.splice(h,1),h--):(g!==-1&&h-g>1&&(a.splice(g,h-g,l(a.slice(g,h),d)),h=g+1),g=-1))}g!==-1&&n.length&&a.splice(g,h-g,l(a.slice(g,h),d))}return d}function Rv(a){for(var n=[],l={},d,h=null,g=a.pos;d=A_(a);)d.type!=="Spaces"&&(d.type==="Combinator"?((h===null||h.type==="Combinator")&&(a.pos=g,a.error("Unexpected combinator")),l[d.value]=!0):h!==null&&h.type!=="Combinator"&&(l[" "]=!0,n.push({type:"Combinator",value:" "})),n.push(d),h=d,g=a.pos);return h!==null&&h.type==="Combinator"&&(a.pos-=g,a.error("Unexpected combinator")),{type:"Group",terms:n,combinator:T_(n,l)||" ",disallowEmpty:!1,explicit:!1}}function P_(a){var n;return a.eat(il),n=Rv(a),a.eat(Pc),n.explicit=!0,a.charCode()===Ev&&(a.pos++,n.disallowEmpty=!0),n}function A_(a){var n=a.charCode();if(n<128&&kc[n]===1)return E_(a);switch(n){case Pc:break;case il:return ea(a,P_(a));case Tc:return a.nextCharCode()===Qo?w_(a):k_(a);case Sv:return{type:"Combinator",value:a.substringToPos(a.nextCharCode()===Sv?a.pos+2:a.pos+1)};case yv:return a.pos++,a.eat(yv),{type:"Combinator",value:"&&"};case Ec:return a.pos++,{type:"Comma"};case Qo:return ea(a,{type:"String",value:S_(a)});case f_:case h_:case p_:case g_:case m_:return{type:"Spaces",value:el(a)};case y_:return n=a.nextCharCode(),n<128&&kc[n]===1?(a.pos++,{type:"AtKeyword",name:rl(a)}):Cc(a);case Av:case Nv:case Ov:case Tv:case Ev:break;case Jo:if(n=a.nextCharCode(),n<48||n>57)return Cc(a);break;default:return Cc(a)}}function Lv(a){var n=new c_(a),l=Rv(n);return n.pos!==a.length&&n.error("Unexpected input"),l.terms.length===1&&l.terms[0].type==="Group"&&(l=l.terms[0]),l}Lv("[a&&<b>#|<'c'>*||e() f{2} /,(% g#{1,2} h{2,})]!");_v.exports=Lv});var Ac=D((rj,Fv)=>{var ta=function(){};function Bv(a){return typeof a=="function"?a:ta}Fv.exports=function(a,n,l){function d(b){switch(h.call(l,b),b.type){case"Group":b.terms.forEach(d);break;case"Multiplier":d(b.term);break;case"Type":case"Property":case"Keyword":case"AtKeyword":case"Function":case"String":case"Token":case"Comma":break;default:throw new Error("Unknown type: "+b.type)}g.call(l,b)}var h=ta,g=ta;if(typeof n=="function"?h=n:n&&(h=Bv(n.enter),g=Bv(n.leave)),h===ta&&g===ta)throw new Error("Neither `enter` nor `leave` walker handler is set or both aren't a function");d(a,l)}});var Dv=D((nj,Mv)=>{var N_=oe(),I_=Ys(),er=new I_,O_={decorator:function(a){var n=null,l={len:0,node:null},d=[l],h="";return{children:a.children,node:function(g){var b=n;n=g,a.node.call(this,g),n=b},chunk:function(g){h+=g,l.node!==n?d.push({len:g.length,node:n}):l.len+=g.length},result:function(){return zv(h,d)}}}};function zv(a,n){var l=[],d=0,h=0,g=n?n[h].node:null;for(N_(a,er);!er.eof;){if(n)for(;h<n.length&&d+n[h].len<=er.tokenStart;)d+=n[h++].len,g=n[h].node;l.push({type:er.tokenType,value:er.getTokenValue(),index:er.tokenIndex,balance:er.balance[er.tokenIndex],node:g}),er.next()}return l}Mv.exports=function(a,n){return typeof a=="string"?zv(a,null):n.generate(a,O_)}});var Rc=D((sj,qv)=>{var R_=nl(),xt={type:"Match"},Zt={type:"Mismatch"},Ic={type:"DisallowEmpty"},L_=40,__=41;function Ht(a,n,l){return n===xt&&l===Zt||a===xt&&n===xt&&l===xt?a:(a.type==="If"&&a.else===Zt&&n===xt&&(n=a.then,a=a.match),{type:"If",match:a,then:n,else:l})}function jv(a){return a.length>2&&a.charCodeAt(a.length-2)===L_&&a.charCodeAt(a.length-1)===__}function Wv(a){return a.type==="Keyword"||a.type==="AtKeyword"||a.type==="Function"||a.type==="Type"&&jv(a.name)}function Nc(a,n,l){switch(a){case" ":for(var C=xt,d=n.length-1;d>=0;d--){var h=n[d];C=Ht(h,C,Zt)}return C;case"|":for(var C=Zt,g=null,d=n.length-1;d>=0;d--){var h=n[d];if(Wv(h)&&(g===null&&d>0&&Wv(n[d-1])&&(g=Object.create(null),C=Ht({type:"Enum",map:g},xt,C)),g!==null)){var b=(jv(h.name)?h.name.slice(0,-1):h.name).toLowerCase();if(!(b in g)){g[b]=h;continue}}g=null,C=Ht(h,xt,C)}return C;case"&&":if(n.length>5)return{type:"MatchOnce",terms:n,all:!0};for(var C=Zt,d=n.length-1;d>=0;d--){var h=n[d],x;n.length>1?x=Nc(a,n.filter(function(z){return z!==h}),!1):x=xt,C=Ht(h,x,C)}return C;case"||":if(n.length>5)return{type:"MatchOnce",terms:n,all:!1};for(var C=l?xt:Zt,d=n.length-1;d>=0;d--){var h=n[d],x;n.length>1?x=Nc(a,n.filter(function(k){return k!==h}),!0):x=xt,C=Ht(h,x,C)}return C}}function B_(a){var n=xt,l=Oc(a.term);if(a.max===0)l=Ht(l,Ic,Zt),n=Ht(l,null,Zt),n.then=Ht(xt,xt,n),a.comma&&(n.then.else=Ht({type:"Comma",syntax:a},n,Zt));else for(var d=a.min||1;d<=a.max;d++)a.comma&&n!==xt&&(n=Ht({type:"Comma",syntax:a},n,Zt)),n=Ht(l,Ht(xt,xt,n),Zt);if(a.min===0)n=Ht(xt,xt,n);else for(var d=0;d<a.min-1;d++)a.comma&&n!==xt&&(n=Ht({type:"Comma",syntax:a},n,Zt)),n=Ht(l,n,Zt);return n}function Oc(a){if(typeof a=="function")return{type:"Generic",fn:a};switch(a.type){case"Group":var n=Nc(a.combinator,a.terms.map(Oc),!1);return a.disallowEmpty&&(n=Ht(n,Ic,Zt)),n;case"Multiplier":return B_(a);case"Type":case"Property":return{type:a.type,name:a.name,syntax:a};case"Keyword":return{type:a.type,name:a.name.toLowerCase(),syntax:a};case"AtKeyword":return{type:a.type,name:"@"+a.name.toLowerCase(),syntax:a};case"Function":return{type:a.type,name:a.name.toLowerCase()+"(",syntax:a};case"String":return a.value.length===3?{type:"Token",value:a.value.charAt(1),syntax:a}:{type:a.type,value:a.value.substr(1,a.value.length-2).replace(/\\'/g,"'"),syntax:a};case"Token":return{type:a.type,value:a.value,syntax:a};case"Comma":return{type:a.type,syntax:a};default:throw new Error("Unknown node type:",a.type)}}qv.exports={MATCH:xt,MISMATCH:Zt,DISALLOW_EMPTY:Ic,buildMatchGraph:function(a,n){return typeof a=="string"&&(a=R_(a)),{type:"MatchGraph",match:Oc(a),syntax:n||null,source:a}}}});var Jv=D((aj,Qv)=>{var Vv=Object.prototype.hasOwnProperty,_c=Rc(),Pi=_c.MATCH,si=_c.MISMATCH,F_=_c.DISALLOW_EMPTY,ai=Us().TYPE,Yv=0,z_=1,sl=2,Bc=3,Hv="Match",M_="Mismatch",D_="Maximum iteration number exceeded (please fill an issue on https://github.com/csstree/csstree/issues)",Uv=15e3,Xv=0;function Kv(a){for(var n=null,l=null,d=a;d!==null;)l=d.prev,d.prev=n,n=d,d=l;return n}function Lc(a,n){if(a.length!==n.length)return!1;for(var l=0;l<a.length;l++){var d=a.charCodeAt(l),h=n.charCodeAt(l);if(d>=65&&d<=90&&(d=d|32),d!==h)return!1}return!0}function W_(a){return a.type!==ai.Delim?!1:a.value!=="?"}function Gv(a){return a===null?!0:a.type===ai.Comma||a.type===ai.Function||a.type===ai.LeftParenthesis||a.type===ai.LeftSquareBracket||a.type===ai.LeftCurlyBracket||W_(a)}function $v(a){return a===null?!0:a.type===ai.RightParenthesis||a.type===ai.RightSquareBracket||a.type===ai.RightCurlyBracket||a.type===ai.Delim}function Zv(a,n,l){function d(){do K++,V=K<a.length?a[K]:null;while(V!==null&&(V.type===ai.WhiteSpace||V.type===ai.Comment))}function h(gt){var Je=K+gt;return Je<a.length?a[Je]:null}function g(gt,Je){return{nextState:gt,matchStack:me,syntaxStack:z,thenStack:k,tokenIndex:K,prev:Je}}function b(gt){k={nextState:gt,matchStack:me,syntaxStack:z,prev:k}}function x(gt){M=g(gt,M)}function C(){me={type:z_,syntax:n.syntax,token:V,prev:me},d(),f=null,K>fe&&(fe=K)}function I(){z={syntax:n.syntax,opts:n.syntax.opts||z!==null&&z.opts||null,prev:z},me={type:sl,syntax:n.syntax,token:me.token,prev:me}}function B(){me.type===sl?me=me.prev:me={type:Bc,syntax:z.syntax,token:me.token,prev:me},z=z.prev}var z=null,k=null,M=null,f=null,Y=0,se=null,V=null,K=-1,fe=0,me={type:Yv,syntax:null,token:null,prev:null};for(d();se===null&&++Y<Uv;)switch(n.type){case"Match":if(k===null){if(V!==null&&(K!==a.length-1||V.value!=="\\0"&&V.value!=="\\9")){n=si;break}se=Hv;break}if(n=k.nextState,n===F_)if(k.matchStack===me){n=si;break}else n=Pi;for(;k.syntaxStack!==z;)B();k=k.prev;break;case"Mismatch":if(f!==null&&f!==!1)(M===null||K>M.tokenIndex)&&(M=f,f=!1);else if(M===null){se=M_;break}n=M.nextState,k=M.thenStack,z=M.syntaxStack,me=M.matchStack,K=M.tokenIndex,V=K<a.length?a[K]:null,M=M.prev;break;case"MatchGraph":n=n.match;break;case"If":n.else!==si&&x(n.else),n.then!==Pi&&b(n.then),n=n.match;break;case"MatchOnce":n={type:"MatchOnceBuffer",syntax:n,index:0,mask:0};break;case"MatchOnceBuffer":var He=n.syntax.terms;if(n.index===He.length){if(n.mask===0||n.syntax.all){n=si;break}n=Pi;break}if(n.mask===(1<<He.length)-1){n=Pi;break}for(;n.index<He.length;n.index++){var Ae=1<<n.index;if((n.mask&Ae)===0){x(n),b({type:"AddMatchOnce",syntax:n.syntax,mask:n.mask|Ae}),n=He[n.index++];break}}break;case"AddMatchOnce":n={type:"MatchOnceBuffer",syntax:n.syntax,index:0,mask:n.mask};break;case"Enum":if(V!==null){var Qe=V.value.toLowerCase();if(Qe.indexOf("\\")!==-1&&(Qe=Qe.replace(/\\[09].*$/,"")),Vv.call(n.map,Qe)){n=n.map[Qe];break}}n=si;break;case"Generic":var zt=z!==null?z.opts:null,Ze=K+Math.floor(n.fn(V,h,zt));if(!isNaN(Ze)&&Ze>K){for(;K<Ze;)C();n=Pi}else n=si;break;case"Type":case"Property":var Ge=n.type==="Type"?"types":"properties",Ct=Vv.call(l,Ge)?l[Ge][n.name]:null;if(!Ct||!Ct.match)throw new Error("Bad syntax reference: "+(n.type==="Type"?"<"+n.name+">":"<'"+n.name+"'>"));if(f!==!1&&V!==null&&n.type==="Type"){var ee=n.name==="custom-ident"&&V.type===ai.Ident||n.name==="length"&&V.value==="0";if(ee){f===null&&(f=g(n,M)),n=si;break}}I(),n=Ct.match;break;case"Keyword":var Qe=n.name;if(V!==null){var At=V.value;if(At.indexOf("\\")!==-1&&(At=At.replace(/\\[09].*$/,"")),Lc(At,Qe)){C(),n=Pi;break}}n=si;break;case"AtKeyword":case"Function":if(V!==null&&Lc(V.value,n.name)){C(),n=Pi;break}n=si;break;case"Token":if(V!==null&&V.value===n.value){C(),n=Pi;break}n=si;break;case"Comma":V!==null&&V.type===ai.Comma?Gv(me.token)?n=si:(C(),n=$v(V)?si:Pi):n=Gv(me.token)||$v(V)?Pi:si;break;case"String":for(var De="",Ze=K;Ze<a.length&&De.length<n.value.length;Ze++)De+=a[Ze].value;if(Lc(De,n.value)){for(;K<Ze;)C();n=Pi}else n=si;break;default:throw new Error("Unknown node type: "+n.type)}switch(Xv+=Y,se){case null:console.warn("[csstree-match] BREAK after "+Uv+" iterations"),se=D_,me=null;break;case Hv:for(;z!==null;)B();break;default:me=null}return{tokens:a,reason:se,iterations:Y,match:me,longestMatch:fe}}function j_(a,n,l){var d=Zv(a,n,l||{});if(d.match!==null){var h=Kv(d.match).prev;for(d.match=[];h!==null;){switch(h.type){case Yv:break;case sl:case Bc:d.match.push({type:h.type,syntax:h.syntax});break;default:d.match.push({token:h.token.value,node:h.token.node});break}h=h.prev}}return d}function q_(a,n,l){var d=Zv(a,n,l||{});if(d.match===null)return d;var h=d.match,g=d.match={syntax:n.syntax||null,match:[]},b=[g];for(h=Kv(h).prev;h!==null;){switch(h.type){case sl:g.match.push(g={syntax:h.syntax,match:[]}),b.push(g);break;case Bc:b.pop(),g=b[b.length-1];break;default:g.match.push({syntax:h.syntax||null,token:h.token.value,node:h.token.node})}h=h.prev}return d}Qv.exports={matchAsList:j_,matchAsTree:q_,getTotalIterationCount:function(){return Xv}}});var iS=D((oj,tS)=>{function eS(a){function n(h){return h===null?!1:h.type==="Type"||h.type==="Property"||h.type==="Keyword"}function l(h){if(Array.isArray(h.match)){for(var g=0;g<h.match.length;g++)if(l(h.match[g]))return n(h.syntax)&&d.unshift(h.syntax),!0}else if(h.node===a)return d=n(h.syntax)?[h.syntax]:[],!0;return!1}var d=null;return this.matched!==null&&l(this.matched),d}function Fc(a,n,l){var d=eS.call(a,n);return d===null?!1:d.some(l)}function V_(a,n){return Fc(this,a,function(l){return l.type==="Type"&&l.name===n})}function H_(a,n){return Fc(this,a,function(l){return l.type==="Property"&&l.name===n})}function U_(a){return Fc(this,a,function(n){return n.type==="Keyword"})}tS.exports={getTrace:eS,isType:V_,isProperty:H_,isKeyword:U_}});var aS=D((lj,sS)=>{var G_=Mr();function rS(a){return"node"in a?a.node:rS(a.match[0])}function nS(a){return"node"in a?a.node:nS(a.match[a.match.length-1])}function $_(a,n,l,d,h){function g(x){if(x.syntax!==null&&x.syntax.type===d&&x.syntax.name===h){var C=rS(x),I=nS(x);a.syntax.walk(n,function(B,z,k){if(B===C){var M=new G_;do{if(M.appendData(z.data),z.data===I)break;z=z.next}while(z!==null);b.push({parent:k,nodes:M})}})}Array.isArray(x.match)&&x.match.forEach(g)}var b=[];return l.matched!==null&&g(l.matched),b}sS.exports={matchFragments:$_}});var dS=D((dj,lS)=>{var Y_=Mr(),ia=Object.prototype.hasOwnProperty;function zc(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a&&a>=0}function oS(a){return!!a&&zc(a.offset)&&zc(a.line)&&zc(a.column)}function X_(a,n){return function(d,h){if(!d||d.constructor!==Object)return h(d,"Type of node should be an Object");for(var g in d){var b=!0;if(ia.call(d,g)!==!1){if(g==="type")d.type!==a&&h(d,"Wrong node type `"+d.type+"`, expected `"+a+"`");else if(g==="loc"){if(d.loc===null)continue;if(d.loc&&d.loc.constructor===Object)if(typeof d.loc.source!="string")g+=".source";else if(!oS(d.loc.start))g+=".start";else if(!oS(d.loc.end))g+=".end";else continue;b=!1}else if(n.hasOwnProperty(g))for(var x=0,b=!1;!b&&x<n[g].length;x++){var C=n[g][x];switch(C){case String:b=typeof d[g]=="string";break;case Boolean:b=typeof d[g]=="boolean";break;case null:b=d[g]===null;break;default:typeof C=="string"?b=d[g]&&d[g].type===C:Array.isArray(C)&&(b=d[g]instanceof Y_)}}else h(d,"Unknown field `"+g+"` for "+a+" node type");b||h(d,"Bad value for `"+a+"."+g+"`")}}for(var g in n)ia.call(n,g)&&ia.call(d,g)===!1&&h(d,"Field `"+a+"."+g+"` is missed")}}function K_(a,n){var l=n.structure,d={type:String,loc:!0},h={type:'"'+a+'"'};for(var g in l)if(ia.call(l,g)!==!1){for(var b=[],x=d[g]=Array.isArray(l[g])?l[g].slice():[l[g]],C=0;C<x.length;C++){var I=x[C];if(I===String||I===Boolean)b.push(I.name);else if(I===null)b.push("null");else if(typeof I=="string")b.push("<"+I+">");else if(Array.isArray(I))b.push("List");else throw new Error("Wrong value `"+I+"` in `"+a+"."+g+"` structure definition")}h[g]=b.join(" | ")}return{docs:h,check:X_(a,d)}}lS.exports={getStructureFromConfig:function(a){var n={};if(a.node){for(var l in a.node)if(ia.call(a.node,l)){var d=a.node[l];if(d.structure)n[l]=K_(l,d);else throw new Error("Missed `structure` field in `"+l+"` node type definition")}}return n}}});var gS=D((uj,mS)=>{var ra=sc().SyntaxReferenceError,Z_=sc().SyntaxMatchError,na=Vo(),Mc=pv(),Q_=nl(),hS=Do(),J_=Ac(),eB=Dv(),ol=Rc().buildMatchGraph,uS=Jv().matchAsTree,al=iS(),cS=aS(),tB=dS().getStructureFromConfig,iB=ol("inherit | initial | unset"),rB=ol("inherit | initial | unset | <-ms-legacy-expression>");function Dc(a,n,l){var d={};for(var h in a)a[h].syntax&&(d[h]=l?a[h].syntax:hS(a[h].syntax,{compact:n}));return d}function nB(a,n,l){let d={};for(let[h,g]of Object.entries(a))d[h]={prelude:g.prelude&&(l?g.prelude.syntax:hS(g.prelude.syntax,{compact:n})),descriptors:g.descriptors&&Dc(g.descriptors,n,l)};return d}function sB(a){for(var n=0;n<a.length;n++)if(a[n].value.toLowerCase()==="var(")return!0;return!1}function Li(a,n,l){return{matched:a,iterations:l,error:n,getTrace:al.getTrace,isType:al.isType,isProperty:al.isProperty,isKeyword:al.isKeyword}}function sa(a,n,l,d){var h=eB(l,a.syntax),g;return sB(h)?Li(null,new Error("Matching for a tree with var() is not supported")):(d&&(g=uS(h,a.valueCommonSyntax,a)),(!d||!g.match)&&(g=uS(h,n.match,a),!g.match)?Li(null,new Z_(g.reason,n.syntax,l,g),g.iterations):Li(g.match,null,g.iterations))}var pS=function(a,n,l){if(this.valueCommonSyntax=iB,this.syntax=n,this.generic=!1,this.atrules={},this.properties={},this.types={},this.structure=l||tB(a),a){if(a.types)for(var d in a.types)this.addType_(d,a.types[d]);if(a.generic){this.generic=!0;for(var d in Mc)this.addType_(d,Mc[d])}if(a.atrules)for(var d in a.atrules)this.addAtrule_(d,a.atrules[d]);if(a.properties)for(var d in a.properties)this.addProperty_(d,a.properties[d])}};pS.prototype={structure:{},checkStructure:function(a){function n(h,g){d.push({node:h,message:g})}var l=this.structure,d=[];return this.syntax.walk(a,function(h){l.hasOwnProperty(h.type)?l[h.type].check(h,n):n(h,"Unknown node type `"+h.type+"`")}),d.length?d:!1},createDescriptor:function(a,n,l,d=null){var h={type:n,name:l},g={type:n,name:l,parent:d,syntax:null,match:null};return typeof a=="function"?g.match=ol(a,h):(typeof a=="string"?Object.defineProperty(g,"syntax",{get:function(){return Object.defineProperty(g,"syntax",{value:Q_(a)}),g.syntax}}):g.syntax=a,Object.defineProperty(g,"match",{get:function(){return Object.defineProperty(g,"match",{value:ol(g.syntax,h)}),g.match}})),g},addAtrule_:function(a,n){n&&(this.atrules[a]={type:"Atrule",name:a,prelude:n.prelude?this.createDescriptor(n.prelude,"AtrulePrelude",a):null,descriptors:n.descriptors?Object.keys(n.descriptors).reduce((l,d)=>(l[d]=this.createDescriptor(n.descriptors[d],"AtruleDescriptor",d,a),l),{}):null})},addProperty_:function(a,n){n&&(this.properties[a]=this.createDescriptor(n,"Property",a))},addType_:function(a,n){n&&(this.types[a]=this.createDescriptor(n,"Type",a),n===Mc["-ms-legacy-expression"]&&(this.valueCommonSyntax=rB))},checkAtruleName:function(a){if(!this.getAtrule(a))return new ra("Unknown at-rule","@"+a)},checkAtrulePrelude:function(a,n){let l=this.checkAtruleName(a);if(l)return l;var d=this.getAtrule(a);if(!d.prelude&&n)return new SyntaxError("At-rule `@"+a+"` should not contain a prelude");if(d.prelude&&!n)return new SyntaxError("At-rule `@"+a+"` should contain a prelude")},checkAtruleDescriptorName:function(a,n){let l=this.checkAtruleName(a);if(l)return l;var d=this.getAtrule(a),h=na.keyword(n);if(!d.descriptors)return new SyntaxError("At-rule `@"+a+"` has no known descriptors");if(!d.descriptors[h.name]&&!d.descriptors[h.basename])return new ra("Unknown at-rule descriptor",n)},checkPropertyName:function(a){var n=na.property(a);if(n.custom)return new Error("Lexer matching doesn't applicable for custom properties");if(!this.getProperty(a))return new ra("Unknown property",a)},matchAtrulePrelude:function(a,n){var l=this.checkAtrulePrelude(a,n);return l?Li(null,l):n?sa(this,this.getAtrule(a).prelude,n,!1):Li(null,null)},matchAtruleDescriptor:function(a,n,l){var d=this.checkAtruleDescriptorName(a,n);if(d)return Li(null,d);var h=this.getAtrule(a),g=na.keyword(n);return sa(this,h.descriptors[g.name]||h.descriptors[g.basename],l,!1)},matchDeclaration:function(a){return a.type!=="Declaration"?Li(null,new Error("Not a Declaration node")):this.matchProperty(a.property,a.value)},matchProperty:function(a,n){var l=this.checkPropertyName(a);return l?Li(null,l):sa(this,this.getProperty(a),n,!0)},matchType:function(a,n){var l=this.getType(a);return l?sa(this,l,n,!1):Li(null,new ra("Unknown type",a))},match:function(a,n){return typeof a!="string"&&(!a||!a.type)?Li(null,new ra("Bad syntax")):((typeof a=="string"||!a.match)&&(a=this.createDescriptor(a,"Type","anonymous")),sa(this,a,n,!1))},findValueFragments:function(a,n,l,d){return cS.matchFragments(this,n,this.matchProperty(a,n),l,d)},findDeclarationValueFragments:function(a,n,l){return cS.matchFragments(this,a.value,this.matchDeclaration(a),n,l)},findAllFragments:function(a,n,l){var d=[];return this.syntax.walk(a,{visit:"Declaration",enter:function(h){d.push.apply(d,this.findDeclarationValueFragments(h,n,l))}.bind(this)}),d},getAtrule:function(a,n=!0){var l=na.keyword(a),d=l.vendor&&n?this.atrules[l.name]||this.atrules[l.basename]:this.atrules[l.name];return d||null},getAtrulePrelude:function(a,n=!0){let l=this.getAtrule(a,n);return l&&l.prelude||null},getAtruleDescriptor:function(a,n){return this.atrules.hasOwnProperty(a)&&this.atrules.declarators&&this.atrules[a].declarators[n]||null},getProperty:function(a,n=!0){var l=na.property(a),d=l.vendor&&n?this.properties[l.name]||this.properties[l.basename]:this.properties[l.name];return d||null},getType:function(a){return this.types.hasOwnProperty(a)?this.types[a]:null},validate:function(){function a(h,g,b,x){if(b.hasOwnProperty(g))return b[g];b[g]=!1,x.syntax!==null&&J_(x.syntax,function(C){if(!(C.type!=="Type"&&C.type!=="Property")){var I=C.type==="Type"?h.types:h.properties,B=C.type==="Type"?n:l;(!I.hasOwnProperty(C.name)||a(h,C.name,B,I[C.name]))&&(b[g]=!0)}},this)}var n={},l={};for(var d in this.types)a(this,d,n,this.types[d]);for(var d in this.properties)a(this,d,l,this.properties[d]);return n=Object.keys(n).filter(function(h){return n[h]}),l=Object.keys(l).filter(function(h){return l[h]}),n.length||l.length?{types:n,properties:l}:null},dump:function(a,n){return{generic:this.generic,types:Dc(this.types,!n,a),properties:Dc(this.properties,!n,a),atrules:nB(this.atrules,!n,a)}},toString:function(){return JSON.stringify(this.dump())}};mS.exports=pS});var bS=D((cj,fS)=>{fS.exports={SyntaxError:wc(),parse:nl(),generate:Do(),walk:Ac()}});var CS=D((hj,wS)=>{var yS=lc(),aB=oe().isBOM,vS=10,oB=12,SS=13;function lB(a,n){for(var l=n.length,d=yS(a.lines,l),h=a.startLine,g=yS(a.columns,l),b=a.startColumn,x=n.length>0?aB(n.charCodeAt(0)):0,C=x;C<l;C++){var I=n.charCodeAt(C);d[C]=h,g[C]=b++,(I===vS||I===SS||I===oB)&&(I===SS&&C+1<l&&n.charCodeAt(C+1)===vS&&(C++,d[C]=h,g[C]=b),h++,b=1)}d[C]=h,g[C]=b,a.lines=d,a.columns=g}var xS=function(){this.lines=null,this.columns=null,this.linesAndColumnsComputed=!1};xS.prototype={setSource:function(a,n,l,d){this.source=a,this.startOffset=typeof n>"u"?0:n,this.startLine=typeof l>"u"?1:l,this.startColumn=typeof d>"u"?1:d,this.linesAndColumnsComputed=!1},ensureLinesAndColumnsComputed:function(){this.linesAndColumnsComputed||(lB(this,this.source),this.linesAndColumnsComputed=!0)},getLocation:function(a,n){return this.ensureLinesAndColumnsComputed(),{source:n,offset:this.startOffset+a,line:this.lines[a],column:this.columns[a]}},getLocationRange:function(a,n,l){return this.ensureLinesAndColumnsComputed(),{source:l,start:{offset:this.startOffset+a,line:this.lines[a],column:this.columns[a]},end:{offset:this.startOffset+n,line:this.lines[n],column:this.columns[n]}}}};wS.exports=xS});var TS=D((pj,ES)=>{var kS=oe().TYPE,dB=kS.WhiteSpace,uB=kS.Comment;ES.exports=function(n){var l=this.createList(),d=null,h={recognizer:n,space:null,ignoreWS:!1,ignoreWSAfter:!1};for(this.scanner.skipSC();!this.scanner.eof;){switch(this.scanner.tokenType){case uB:this.scanner.next();continue;case dB:h.ignoreWS?this.scanner.next():h.space=this.WhiteSpace();continue}if(d=n.getNode.call(this,h),d===void 0)break;h.space!==null&&(l.push(h.space),h.space=null),l.push(d),h.ignoreWSAfter?(h.ignoreWSAfter=!1,h.ignoreWS=!0):h.ignoreWS=!1}return l}});var LS=D((mj,RS)=>{var cB=CS(),hB=Ku(),pB=Ys(),PS=Mr(),mB=oe(),OS=Us(),{findWhiteSpaceStart:gB,cmpStr:fB}=On(),bB=TS(),AS=function(){},vr=OS.TYPE,yB=OS.NAME,vB=vr.WhiteSpace,SB=vr.Comment,xB=vr.Ident,NS=vr.Function,wB=vr.Url,CB=vr.Hash,kB=vr.Percentage,EB=vr.Number,TB=35,IS=0;function PB(a){return function(){return this[a]()}}function AB(a){var n={context:{},scope:{},atrule:{},pseudo:{}};if(a.parseContext)for(var l in a.parseContext)switch(typeof a.parseContext[l]){case"function":n.context[l]=a.parseContext[l];break;case"string":n.context[l]=PB(a.parseContext[l]);break}if(a.scope)for(var l in a.scope)n.scope[l]=a.scope[l];if(a.atrule)for(var l in a.atrule){var d=a.atrule[l];d.parse&&(n.atrule[l]=d.parse)}if(a.pseudo)for(var l in a.pseudo){var h=a.pseudo[l];h.parse&&(n.pseudo[l]=h.parse)}if(a.node)for(var l in a.node)n[l]=a.node[l].parse;return n}RS.exports=function(n){var l={scanner:new pB,locationMap:new cB,filename:"<unknown>",needPositions:!1,onParseError:AS,onParseErrorThrow:!1,parseAtrulePrelude:!0,parseRulePrelude:!0,parseValue:!0,parseCustomProperty:!1,readSequence:bB,createList:function(){return new PS},createSingleNodeList:function(h){return new PS().appendData(h)},getFirstListNode:function(h){return h&&h.first()},getLastListNode:function(h){return h.last()},parseWithFallback:function(h,g){var b=this.scanner.tokenIndex;try{return h.call(this)}catch(C){if(this.onParseErrorThrow)throw C;var x=g.call(this,b);return this.onParseErrorThrow=!0,this.onParseError(C,x),this.onParseErrorThrow=!1,x}},lookupNonWSType:function(h){do{var g=this.scanner.lookupType(h++);if(g!==vB)return g}while(g!==IS);return IS},eat:function(h){if(this.scanner.tokenType!==h){var g=this.scanner.tokenStart,b=yB[h]+" is expected";switch(h){case xB:this.scanner.tokenType===NS||this.scanner.tokenType===wB?(g=this.scanner.tokenEnd-1,b="Identifier is expected but function found"):b="Identifier is expected";break;case CB:this.scanner.isDelim(TB)&&(this.scanner.next(),g++,b="Name is expected");break;case kB:this.scanner.tokenType===EB&&(g=this.scanner.tokenEnd,b="Percent sign is expected");break;default:this.scanner.source.charCodeAt(this.scanner.tokenStart)===h&&(g=g+1)}this.error(b,g)}this.scanner.next()},consume:function(h){var g=this.scanner.getTokenValue();return this.eat(h),g},consumeFunctionName:function(){var h=this.scanner.source.substring(this.scanner.tokenStart,this.scanner.tokenEnd-1);return this.eat(NS),h},getLocation:function(h,g){return this.needPositions?this.locationMap.getLocationRange(h,g,this.filename):null},getLocationFromList:function(h){if(this.needPositions){var g=this.getFirstListNode(h),b=this.getLastListNode(h);return this.locationMap.getLocationRange(g!==null?g.loc.start.offset-this.locationMap.startOffset:this.scanner.tokenStart,b!==null?b.loc.end.offset-this.locationMap.startOffset:this.scanner.tokenStart,this.filename)}return null},error:function(h,g){var b=typeof g<"u"&&g<this.scanner.source.length?this.locationMap.getLocation(g):this.scanner.eof?this.locationMap.getLocation(gB(this.scanner.source,this.scanner.source.length-1)):this.locationMap.getLocation(this.scanner.tokenStart);throw new hB(h||"Unexpected input",this.scanner.source,b.offset,b.line,b.column)}};n=AB(n||{});for(var d in n)l[d]=n[d];return function(h,g){g=g||{};var b=g.context||"default",x=g.onComment,C;if(mB(h,l.scanner),l.locationMap.setSource(h,g.offset,g.line,g.column),l.filename=g.filename||"<unknown>",l.needPositions=!!g.positions,l.onParseError=typeof g.onParseError=="function"?g.onParseError:AS,l.onParseErrorThrow=!1,l.parseAtrulePrelude="parseAtrulePrelude"in g?!!g.parseAtrulePrelude:!0,l.parseRulePrelude="parseRulePrelude"in g?!!g.parseRulePrelude:!0,l.parseValue="parseValue"in g?!!g.parseValue:!0,l.parseCustomProperty="parseCustomProperty"in g?!!g.parseCustomProperty:!1,!l.context.hasOwnProperty(b))throw new Error("Unknown context `"+b+"`");return typeof x=="function"&&l.scanner.forEachToken((I,B,z)=>{if(I===SB){let k=l.getLocation(B,z),M=fB(h,z-2,z,"*/")?h.slice(B+2,z-2):h.slice(B+2,z);x(M,k)}}),C=l.context[b].call(l,g),l.scanner.eof||l.error(),C}}});var BS=D(Wc=>{var _S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");Wc.encode=function(a){if(0<=a&&a<_S.length)return _S[a];throw new TypeError("Must be between 0 and 63: "+a)};Wc.decode=function(a){var n=65,l=90,d=97,h=122,g=48,b=57,x=43,C=47,I=26,B=52;return n<=a&&a<=l?a-n:d<=a&&a<=h?a-d+I:g<=a&&a<=b?a-g+B:a==x?62:a==C?63:-1}});var WS=D(qc=>{var FS=BS(),jc=5,zS=1<<jc,MS=zS-1,DS=zS;function NB(a){return a<0?(-a<<1)+1:(a<<1)+0}function IB(a){var n=(a&1)===1,l=a>>1;return n?-l:l}qc.encode=function(n){var l="",d,h=NB(n);do d=h&MS,h>>>=jc,h>0&&(d|=DS),l+=FS.encode(d);while(h>0);return l};qc.decode=function(n,l,d){var h=n.length,g=0,b=0,x,C;do{if(l>=h)throw new Error("Expected more digits in base 64 VLQ value.");if(C=FS.decode(n.charCodeAt(l++)),C===-1)throw new Error("Invalid base64 digit: "+n.charAt(l-1));x=!!(C&DS),C&=MS,g=g+(C<<b),b+=jc}while(x);d.value=IB(g),d.rest=l}});var ll=D(Ut=>{function OB(a,n,l){if(n in a)return a[n];if(arguments.length===3)return l;throw new Error('"'+n+'" is a required argument.')}Ut.getArg=OB;var jS=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,RB=/^data:.+\,.+$/;function aa(a){var n=a.match(jS);return n?{scheme:n[1],auth:n[2],host:n[3],port:n[4],path:n[5]}:null}Ut.urlParse=aa;function Dn(a){var n="";return a.scheme&&(n+=a.scheme+":"),n+="//",a.auth&&(n+=a.auth+"@"),a.host&&(n+=a.host),a.port&&(n+=":"+a.port),a.path&&(n+=a.path),n}Ut.urlGenerate=Dn;function Vc(a){var n=a,l=aa(a);if(l){if(!l.path)return a;n=l.path}for(var d=Ut.isAbsolute(n),h=n.split(/\/+/),g,b=0,x=h.length-1;x>=0;x--)g=h[x],g==="."?h.splice(x,1):g===".."?b++:b>0&&(g===""?(h.splice(x+1,b),b=0):(h.splice(x,2),b--));return n=h.join("/"),n===""&&(n=d?"/":"."),l?(l.path=n,Dn(l)):n}Ut.normalize=Vc;function qS(a,n){a===""&&(a="."),n===""&&(n=".");var l=aa(n),d=aa(a);if(d&&(a=d.path||"/"),l&&!l.scheme)return d&&(l.scheme=d.scheme),Dn(l);if(l||n.match(RB))return n;if(d&&!d.host&&!d.path)return d.host=n,Dn(d);var h=n.charAt(0)==="/"?n:Vc(a.replace(/\/+$/,"")+"/"+n);return d?(d.path=h,Dn(d)):h}Ut.join=qS;Ut.isAbsolute=function(a){return a.charAt(0)==="/"||jS.test(a)};function LB(a,n){a===""&&(a="."),a=a.replace(/\/$/,"");for(var l=0;n.indexOf(a+"/")!==0;){var d=a.lastIndexOf("/");if(d<0||(a=a.slice(0,d),a.match(/^([^\/]+:\/)?\/*$/)))return n;++l}return Array(l+1).join("../")+n.substr(a.length+1)}Ut.relative=LB;var VS=(function(){var a=Object.create(null);return!("__proto__"in a)})();function HS(a){return a}function _B(a){return US(a)?"$"+a:a}Ut.toSetString=VS?HS:_B;function BB(a){return US(a)?a.slice(1):a}Ut.fromSetString=VS?HS:BB;function US(a){if(!a)return!1;var n=a.length;if(n<9||a.charCodeAt(n-1)!==95||a.charCodeAt(n-2)!==95||a.charCodeAt(n-3)!==111||a.charCodeAt(n-4)!==116||a.charCodeAt(n-5)!==111||a.charCodeAt(n-6)!==114||a.charCodeAt(n-7)!==112||a.charCodeAt(n-8)!==95||a.charCodeAt(n-9)!==95)return!1;for(var l=n-10;l>=0;l--)if(a.charCodeAt(l)!==36)return!1;return!0}function FB(a,n,l){var d=Wn(a.source,n.source);return d!==0||(d=a.originalLine-n.originalLine,d!==0)||(d=a.originalColumn-n.originalColumn,d!==0||l)||(d=a.generatedColumn-n.generatedColumn,d!==0)||(d=a.generatedLine-n.generatedLine,d!==0)?d:Wn(a.name,n.name)}Ut.compareByOriginalPositions=FB;function zB(a,n,l){var d=a.generatedLine-n.generatedLine;return d!==0||(d=a.generatedColumn-n.generatedColumn,d!==0||l)||(d=Wn(a.source,n.source),d!==0)||(d=a.originalLine-n.originalLine,d!==0)||(d=a.originalColumn-n.originalColumn,d!==0)?d:Wn(a.name,n.name)}Ut.compareByGeneratedPositionsDeflated=zB;function Wn(a,n){return a===n?0:a===null?1:n===null?-1:a>n?1:-1}function MB(a,n){var l=a.generatedLine-n.generatedLine;return l!==0||(l=a.generatedColumn-n.generatedColumn,l!==0)||(l=Wn(a.source,n.source),l!==0)||(l=a.originalLine-n.originalLine,l!==0)||(l=a.originalColumn-n.originalColumn,l!==0)?l:Wn(a.name,n.name)}Ut.compareByGeneratedPositionsInflated=MB;function DB(a){return JSON.parse(a.replace(/^\)]}'[^\n]*\n/,""))}Ut.parseSourceMapInput=DB;function WB(a,n,l){if(n=n||"",a&&(a[a.length-1]!=="/"&&n[0]!=="/"&&(a+="/"),n=a+n),l){var d=aa(l);if(!d)throw new Error("sourceMapURL could not be parsed");if(d.path){var h=d.path.lastIndexOf("/");h>=0&&(d.path=d.path.substring(0,h+1))}n=qS(Dn(d),n)}return Vc(n)}Ut.computeSourceURL=WB});var $S=D(GS=>{var Hc=ll(),Uc=Object.prototype.hasOwnProperty,Wr=typeof Map<"u";function tr(){this._array=[],this._set=Wr?new Map:Object.create(null)}tr.fromArray=function(n,l){for(var d=new tr,h=0,g=n.length;h<g;h++)d.add(n[h],l);return d};tr.prototype.size=function(){return Wr?this._set.size:Object.getOwnPropertyNames(this._set).length};tr.prototype.add=function(n,l){var d=Wr?n:Hc.toSetString(n),h=Wr?this.has(n):Uc.call(this._set,d),g=this._array.length;(!h||l)&&this._array.push(n),h||(Wr?this._set.set(n,g):this._set[d]=g)};tr.prototype.has=function(n){if(Wr)return this._set.has(n);var l=Hc.toSetString(n);return Uc.call(this._set,l)};tr.prototype.indexOf=function(n){if(Wr){var l=this._set.get(n);if(l>=0)return l}else{var d=Hc.toSetString(n);if(Uc.call(this._set,d))return this._set[d]}throw new Error('"'+n+'" is not in the set.')};tr.prototype.at=function(n){if(n>=0&&n<this._array.length)return this._array[n];throw new Error("No element indexed by "+n)};tr.prototype.toArray=function(){return this._array.slice()};GS.ArraySet=tr});var KS=D(XS=>{var YS=ll();function jB(a,n){var l=a.generatedLine,d=n.generatedLine,h=a.generatedColumn,g=n.generatedColumn;return d>l||d==l&&g>=h||YS.compareByGeneratedPositionsInflated(a,n)<=0}function dl(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}dl.prototype.unsortedForEach=function(n,l){this._array.forEach(n,l)};dl.prototype.add=function(n){jB(this._last,n)?(this._last=n,this._array.push(n)):(this._sorted=!1,this._array.push(n))};dl.prototype.toArray=function(){return this._sorted||(this._array.sort(YS.compareByGeneratedPositionsInflated),this._sorted=!0),this._array};XS.MappingList=dl});var QS=D(ZS=>{var oa=WS(),Pt=ll(),ul=$S().ArraySet,qB=KS().MappingList;function wi(a){a||(a={}),this._file=Pt.getArg(a,"file",null),this._sourceRoot=Pt.getArg(a,"sourceRoot",null),this._skipValidation=Pt.getArg(a,"skipValidation",!1),this._sources=new ul,this._names=new ul,this._mappings=new qB,this._sourcesContents=null}wi.prototype._version=3;wi.fromSourceMap=function(n){var l=n.sourceRoot,d=new wi({file:n.file,sourceRoot:l});return n.eachMapping(function(h){var g={generated:{line:h.generatedLine,column:h.generatedColumn}};h.source!=null&&(g.source=h.source,l!=null&&(g.source=Pt.relative(l,g.source)),g.original={line:h.originalLine,column:h.originalColumn},h.name!=null&&(g.name=h.name)),d.addMapping(g)}),n.sources.forEach(function(h){var g=h;l!==null&&(g=Pt.relative(l,h)),d._sources.has(g)||d._sources.add(g);var b=n.sourceContentFor(h);b!=null&&d.setSourceContent(h,b)}),d};wi.prototype.addMapping=function(n){var l=Pt.getArg(n,"generated"),d=Pt.getArg(n,"original",null),h=Pt.getArg(n,"source",null),g=Pt.getArg(n,"name",null);this._skipValidation||this._validateMapping(l,d,h,g),h!=null&&(h=String(h),this._sources.has(h)||this._sources.add(h)),g!=null&&(g=String(g),this._names.has(g)||this._names.add(g)),this._mappings.add({generatedLine:l.line,generatedColumn:l.column,originalLine:d!=null&&d.line,originalColumn:d!=null&&d.column,source:h,name:g})};wi.prototype.setSourceContent=function(n,l){var d=n;this._sourceRoot!=null&&(d=Pt.relative(this._sourceRoot,d)),l!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[Pt.toSetString(d)]=l):this._sourcesContents&&(delete this._sourcesContents[Pt.toSetString(d)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))};wi.prototype.applySourceMap=function(n,l,d){var h=l;if(l==null){if(n.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);h=n.file}var g=this._sourceRoot;g!=null&&(h=Pt.relative(g,h));var b=new ul,x=new ul;this._mappings.unsortedForEach(function(C){if(C.source===h&&C.originalLine!=null){var I=n.originalPositionFor({line:C.originalLine,column:C.originalColumn});I.source!=null&&(C.source=I.source,d!=null&&(C.source=Pt.join(d,C.source)),g!=null&&(C.source=Pt.relative(g,C.source)),C.originalLine=I.line,C.originalColumn=I.column,I.name!=null&&(C.name=I.name))}var B=C.source;B!=null&&!b.has(B)&&b.add(B);var z=C.name;z!=null&&!x.has(z)&&x.add(z)},this),this._sources=b,this._names=x,n.sources.forEach(function(C){var I=n.sourceContentFor(C);I!=null&&(d!=null&&(C=Pt.join(d,C)),g!=null&&(C=Pt.relative(g,C)),this.setSourceContent(C,I))},this)};wi.prototype._validateMapping=function(n,l,d,h){if(l&&typeof l.line!="number"&&typeof l.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(n&&"line"in n&&"column"in n&&n.line>0&&n.column>=0&&!l&&!d&&!h)){if(n&&"line"in n&&"column"in n&&l&&"line"in l&&"column"in l&&n.line>0&&n.column>=0&&l.line>0&&l.column>=0&&d)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:n,source:d,original:l,name:h}))}};wi.prototype._serializeMappings=function(){for(var n=0,l=1,d=0,h=0,g=0,b=0,x="",C,I,B,z,k=this._mappings.toArray(),M=0,f=k.length;M<f;M++){if(I=k[M],C="",I.generatedLine!==l)for(n=0;I.generatedLine!==l;)C+=";",l++;else if(M>0){if(!Pt.compareByGeneratedPositionsInflated(I,k[M-1]))continue;C+=","}C+=oa.encode(I.generatedColumn-n),n=I.generatedColumn,I.source!=null&&(z=this._sources.indexOf(I.source),C+=oa.encode(z-b),b=z,C+=oa.encode(I.originalLine-1-h),h=I.originalLine-1,C+=oa.encode(I.originalColumn-d),d=I.originalColumn,I.name!=null&&(B=this._names.indexOf(I.name),C+=oa.encode(B-g),g=B)),x+=C}return x};wi.prototype._generateSourcesContent=function(n,l){return n.map(function(d){if(!this._sourcesContents)return null;l!=null&&(d=Pt.relative(l,d));var h=Pt.toSetString(d);return Object.prototype.hasOwnProperty.call(this._sourcesContents,h)?this._sourcesContents[h]:null},this)};wi.prototype.toJSON=function(){var n={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(n.file=this._file),this._sourceRoot!=null&&(n.sourceRoot=this._sourceRoot),this._sourcesContents&&(n.sourcesContent=this._generateSourcesContent(n.sources,n.sourceRoot)),n};wi.prototype.toString=function(){return JSON.stringify(this.toJSON())};ZS.SourceMapGenerator=wi});var tx=D((xj,ex)=>{var VB=QS().SourceMapGenerator,JS={Atrule:!0,Selector:!0,Declaration:!0};ex.exports=function(n){var l=new VB,d=1,h=0,g={line:1,column:0},b={line:0,column:0},x=!1,C={line:1,column:0},I={generated:C},B=n.node;n.node=function(M){if(M.loc&&M.loc.start&&JS.hasOwnProperty(M.type)){var f=M.loc.start.line,Y=M.loc.start.column-1;(b.line!==f||b.column!==Y)&&(b.line=f,b.column=Y,g.line=d,g.column=h,x&&(x=!1,(g.line!==C.line||g.column!==C.column)&&l.addMapping(I)),x=!0,l.addMapping({source:M.loc.source,original:b,generated:g}))}B.call(this,M),x&&JS.hasOwnProperty(M.type)&&(C.line=d,C.column=h)};var z=n.chunk;n.chunk=function(M){for(var f=0;f<M.length;f++)M.charCodeAt(f)===10?(d++,h=0):h++;z(M)};var k=n.result;return n.result=function(){return x&&l.addMapping(I),{css:k(),map:l}},n}});var rx=D((wj,ix)=>{var HB=tx(),UB=Object.prototype.hasOwnProperty;function GB(a,n){var l=a.children,d=null;typeof n!="function"?l.forEach(this.node,this):l.forEach(function(h){d!==null&&n.call(this,d),this.node(h),d=h},this)}ix.exports=function(n){function l(g){if(UB.call(d,g.type))d[g.type].call(this,g);else throw new Error("Unknown node type: "+g.type)}var d={};if(n.node)for(var h in n.node)d[h]=n.node[h].generate;return function(g,b){var x="",C={children:GB,node:l,chunk:function(I){x+=I},result:function(){return x}};return b&&(typeof b.decorator=="function"&&(C=b.decorator(C)),b.sourceMap&&(C=HB(C))),C.node(g),C.result()}}});var sx=D((Cj,nx)=>{var Gc=Mr();nx.exports=function(n){return{fromPlainObject:function(l){return n(l,{enter:function(d){d.children&&!(d.children instanceof Gc)&&(d.children=new Gc().fromArray(d.children))}}),l},toPlainObject:function(l){return n(l,{leave:function(d){d.children&&d.children instanceof Gc&&(d.children=d.children.toArray())}}),l}}}});var cx=D((kj,ux)=>{var $c=Object.prototype.hasOwnProperty,la=function(){};function ax(a){return typeof a=="function"?a:la}function ox(a,n){return function(l,d,h){l.type===n&&a.call(this,l,d,h)}}function $B(a,n){var l=n.structure,d=[];for(var h in l)if($c.call(l,h)!==!1){var g=l[h],b={name:h,type:!1,nullable:!1};Array.isArray(l[h])||(g=[l[h]]);for(var x=0;x<g.length;x++){var C=g[x];C===null?b.nullable=!0:typeof C=="string"?b.type="node":Array.isArray(C)&&(b.type="list")}b.type&&d.push(b)}return d.length?{context:n.walkContext,fields:d}:null}function YB(a){var n={};for(var l in a.node)if($c.call(a.node,l)){var d=a.node[l];if(!d.structure)throw new Error("Missed `structure` field in `"+l+"` node type definition");n[l]=$B(l,d)}return n}function lx(a,n){var l=a.fields.slice(),d=a.context,h=typeof d=="string";return n&&l.reverse(),function(g,b,x,C){var I;h&&(I=b[d],b[d]=g);for(var B=0;B<l.length;B++){var z=l[B],k=g[z.name];if(!z.nullable||k){if(z.type==="list"){var M=n?k.reduceRight(C,!1):k.reduce(C,!1);if(M)return!0}else if(x(k))return!0}}h&&(b[d]=I)}}function dx(a){return{Atrule:{StyleSheet:a.StyleSheet,Atrule:a.Atrule,Rule:a.Rule,Block:a.Block},Rule:{StyleSheet:a.StyleSheet,Atrule:a.Atrule,Rule:a.Rule,Block:a.Block},Declaration:{StyleSheet:a.StyleSheet,Atrule:a.Atrule,Rule:a.Rule,Block:a.Block,DeclarationList:a.DeclarationList}}}ux.exports=function(n){var l=YB(n),d={},h={},g=Symbol("break-walk"),b=Symbol("skip-node");for(var x in l)$c.call(l,x)&&l[x]!==null&&(d[x]=lx(l[x],!1),h[x]=lx(l[x],!0));var C=dx(d),I=dx(h),B=function(z,k){function M(fe,me,He){var Ae=Y.call(K,fe,me,He);if(Ae===g){debugger;return!0}return Ae===b?!1:!!(V.hasOwnProperty(fe.type)&&V[fe.type](fe,K,M,f)||se.call(K,fe,me,He)===g)}var f=(fe,me,He,Ae)=>fe||M(me,He,Ae),Y=la,se=la,V=d,K={break:g,skip:b,root:z,stylesheet:null,atrule:null,atrulePrelude:null,rule:null,selector:null,block:null,declaration:null,function:null};if(typeof k=="function")Y=k;else if(k&&(Y=ax(k.enter),se=ax(k.leave),k.reverse&&(V=h),k.visit)){if(C.hasOwnProperty(k.visit))V=k.reverse?I[k.visit]:C[k.visit];else if(!l.hasOwnProperty(k.visit))throw new Error("Bad value `"+k.visit+"` for `visit` option (should be: "+Object.keys(l).join(", ")+")");Y=ox(Y,k.visit),se=ox(se,k.visit)}if(Y===la&&se===la)throw new Error("Neither `enter` nor `leave` walker handler is set or both aren't a function");M(z)};return B.break=g,B.skip=b,B.find=function(z,k){var M=null;return B(z,function(f,Y,se){if(k.call(this,f,Y,se))return M=f,g}),M},B.findLast=function(z,k){var M=null;return B(z,{reverse:!0,enter:function(f,Y,se){if(k.call(this,f,Y,se))return M=f,g}}),M},B.findAll=function(z,k){var M=[];return B(z,function(f,Y,se){k.call(this,f,Y,se)&&M.push(f)}),M},B}});var px=D((Ej,hx)=>{var XB=Mr();hx.exports=function a(n){var l={};for(var d in n){var h=n[d];h&&(Array.isArray(h)||h instanceof XB?h=h.map(a):h.constructor===Object&&(h=a(h))),l[d]=h}return l}});var yx=D((Tj,bx)=>{var jn=Object.prototype.hasOwnProperty,KB={generic:!0,types:Xc,atrules:{prelude:gx,descriptors:gx},properties:Xc,parseContext:ZB,scope:fx,atrule:["parse"],pseudo:["parse"],node:["name","structure","parse","generate","walkContext"]};function cl(a){return a&&a.constructor===Object}function Yc(a){return cl(a)?Object.assign({},a):a}function ZB(a,n){return Object.assign(a,n)}function fx(a,n){for(let l in n)jn.call(n,l)&&(cl(a[l])?fx(a[l],Yc(n[l])):a[l]=Yc(n[l]));return a}function mx(a,n){return typeof n=="string"&&/^\s*\|/.test(n)?typeof a=="string"?a+n:n.replace(/^\s*\|\s*/,""):n||null}function Xc(a,n){if(typeof n=="string")return mx(a,n);let l=Object.assign({},a);for(let d in n)jn.call(n,d)&&(l[d]=mx(jn.call(a,d)?a[d]:void 0,n[d]));return l}function gx(a,n){let l=Xc(a,n);return!cl(l)||Object.keys(l).length?l:null}function da(a,n,l){for(let d in l)if(jn.call(l,d)!==!1){if(l[d]===!0)d in n&&jn.call(n,d)&&(a[d]=Yc(n[d]));else if(l[d]){if(typeof l[d]=="function"){let h=l[d];a[d]=h({},a[d]),a[d]=h(a[d]||{},n[d])}else if(cl(l[d])){let h={};for(let g in a[d])h[g]=da({},a[d][g],l[d]);for(let g in n[d])h[g]=da(h[g]||{},n[d][g],l[d]);a[d]=h}else if(Array.isArray(l[d])){let h={},g=l[d].reduce(function(b,x){return b[x]=!0,b},{});for(let[b,x]of Object.entries(a[d]||{}))h[b]={},x&&da(h[b],x,g);for(let b in n[d])jn.call(n[d],b)&&(h[b]||(h[b]={}),n[d]&&n[d][b]&&da(h[b],n[d][b],g));a[d]=h}}}return a}bx.exports=(a,n)=>da(a,n,KB)});var Sx=D(vx=>{var QB=Mr(),JB=Ku(),eF=Ys(),Kc=gS(),tF=bS(),iF=oe(),rF=LS(),nF=rx(),sF=sx(),aF=cx(),oF=px(),hl=Vo(),pl=yx();function Zc(a){var n=rF(a),l=aF(a),d=nF(a),h=sF(l),g={List:QB,SyntaxError:JB,TokenStream:eF,Lexer:Kc,vendorPrefix:hl.vendorPrefix,keyword:hl.keyword,property:hl.property,isCustomProperty:hl.isCustomProperty,definitionSyntax:tF,lexer:null,createLexer:function(b){return new Kc(b,g,g.lexer.structure)},tokenize:iF,parse:n,walk:l,generate:d,find:l.find,findLast:l.findLast,findAll:l.findAll,clone:oF,fromPlainObject:h.fromPlainObject,toPlainObject:h.toPlainObject,createSyntax:function(b){return Zc(pl({},b))},fork:function(b){var x=pl({},a);return Zc(typeof b=="function"?b(x,Object.assign):pl(x,b))}};return g.lexer=new Kc({generic:!0,types:a.types,atrules:a.atrules,properties:a.properties,node:a.node},g),g}vx.create=function(a){return Zc(pl({},a))}});var xx=D((Aj,lF)=>{lF.exports={"@charset":{syntax:'@charset "<charset>";',groups:["CSS Charsets"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@charset"},"@counter-style":{syntax:`@counter-style <counter-style-name> {
  [ system: <counter-system>; ] ||
  [ symbols: <counter-symbols>; ] ||
  [ additive-symbols: <additive-symbols>; ] ||
  [ negative: <negative-symbol>; ] ||
  [ prefix: <prefix>; ] ||
  [ suffix: <suffix>; ] ||
  [ range: <range>; ] ||
  [ pad: <padding>; ] ||
  [ speak-as: <speak-as>; ] ||
  [ fallback: <counter-style-name>; ]
}`,interfaces:["CSSCounterStyleRule"],groups:["CSS Counter Styles"],descriptors:{"additive-symbols":{syntax:"[ <integer> && <symbol> ]#",media:"all",initial:"n/a (required)",percentages:"no",computed:"asSpecified",order:"orderOfAppearance",status:"standard"},fallback:{syntax:"<counter-style-name>",media:"all",initial:"decimal",percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},negative:{syntax:"<symbol> <symbol>?",media:"all",initial:'"-" hyphen-minus',percentages:"no",computed:"asSpecified",order:"orderOfAppearance",status:"standard"},pad:{syntax:"<integer> && <symbol>",media:"all",initial:'0 ""',percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},prefix:{syntax:"<symbol>",media:"all",initial:'""',percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},range:{syntax:"[ [ <integer> | infinite ]{2} ]# | auto",media:"all",initial:"auto",percentages:"no",computed:"asSpecified",order:"orderOfAppearance",status:"standard"},"speak-as":{syntax:"auto | bullets | numbers | words | spell-out | <counter-style-name>",media:"all",initial:"auto",percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},suffix:{syntax:"<symbol>",media:"all",initial:'". "',percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},symbols:{syntax:"<symbol>+",media:"all",initial:"n/a (required)",percentages:"no",computed:"asSpecified",order:"orderOfAppearance",status:"standard"},system:{syntax:"cyclic | numeric | alphabetic | symbolic | additive | [ fixed <integer>? ] | [ extends <counter-style-name> ]",media:"all",initial:"symbolic",percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"}},status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@counter-style"},"@document":{syntax:`@document [ <url> | url-prefix(<string>) | domain(<string>) | media-document(<string>) | regexp(<string>) ]# {
  <group-rule-body>
}`,interfaces:["CSSGroupingRule","CSSConditionRule"],groups:["CSS Conditional Rules"],status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@document"},"@font-face":{syntax:`@font-face {
  [ font-family: <family-name>; ] ||
  [ src: <src>; ] ||
  [ unicode-range: <unicode-range>; ] ||
  [ font-variant: <font-variant>; ] ||
  [ font-feature-settings: <font-feature-settings>; ] ||
  [ font-variation-settings: <font-variation-settings>; ] ||
  [ font-stretch: <font-stretch>; ] ||
  [ font-weight: <font-weight>; ] ||
  [ font-style: <font-style>; ]
}`,interfaces:["CSSFontFaceRule"],groups:["CSS Fonts"],descriptors:{"font-display":{syntax:"[ auto | block | swap | fallback | optional ]",media:"visual",percentages:"no",initial:"auto",computed:"asSpecified",order:"uniqueOrder",status:"experimental"},"font-family":{syntax:"<family-name>",media:"all",initial:"n/a (required)",percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},"font-feature-settings":{syntax:"normal | <feature-tag-value>#",media:"all",initial:"normal",percentages:"no",computed:"asSpecified",order:"orderOfAppearance",status:"standard"},"font-variation-settings":{syntax:"normal | [ <string> <number> ]#",media:"all",initial:"normal",percentages:"no",computed:"asSpecified",order:"orderOfAppearance",status:"standard"},"font-stretch":{syntax:"<font-stretch-absolute>{1,2}",media:"all",initial:"normal",percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},"font-style":{syntax:"normal | italic | oblique <angle>{0,2}",media:"all",initial:"normal",percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},"font-weight":{syntax:"<font-weight-absolute>{1,2}",media:"all",initial:"normal",percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},"font-variant":{syntax:"normal | none | [ <common-lig-values> || <discretionary-lig-values> || <historical-lig-values> || <contextual-alt-values> || stylistic(<feature-value-name>) || historical-forms || styleset(<feature-value-name>#) || character-variant(<feature-value-name>#) || swash(<feature-value-name>) || ornaments(<feature-value-name>) || annotation(<feature-value-name>) || [ small-caps | all-small-caps | petite-caps | all-petite-caps | unicase | titling-caps ] || <numeric-figure-values> || <numeric-spacing-values> || <numeric-fraction-values> || ordinal || slashed-zero || <east-asian-variant-values> || <east-asian-width-values> || ruby ]",media:"all",initial:"normal",percentages:"no",computed:"asSpecified",order:"orderOfAppearance",status:"standard"},src:{syntax:"[ <url> [ format( <string># ) ]? | local( <family-name> ) ]#",media:"all",initial:"n/a (required)",percentages:"no",computed:"asSpecified",order:"orderOfAppearance",status:"standard"},"unicode-range":{syntax:"<unicode-range>#",media:"all",initial:"U+0-10FFFF",percentages:"no",computed:"asSpecified",order:"orderOfAppearance",status:"standard"}},status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@font-face"},"@font-feature-values":{syntax:`@font-feature-values <family-name># {
  <feature-value-block-list>
}`,interfaces:["CSSFontFeatureValuesRule"],groups:["CSS Fonts"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@font-feature-values"},"@import":{syntax:"@import [ <string> | <url> ] [ <media-query-list> ]?;",groups:["Media Queries"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@import"},"@keyframes":{syntax:`@keyframes <keyframes-name> {
  <keyframe-block-list>
}`,interfaces:["CSSKeyframeRule","CSSKeyframesRule"],groups:["CSS Animations"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@keyframes"},"@media":{syntax:`@media <media-query-list> {
  <group-rule-body>
}`,interfaces:["CSSGroupingRule","CSSConditionRule","CSSMediaRule","CSSCustomMediaRule"],groups:["CSS Conditional Rules","Media Queries"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@media"},"@namespace":{syntax:"@namespace <namespace-prefix>? [ <string> | <url> ];",groups:["CSS Namespaces"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@namespace"},"@page":{syntax:`@page <page-selector-list> {
  <page-body>
}`,interfaces:["CSSPageRule"],groups:["CSS Pages"],descriptors:{bleed:{syntax:"auto | <length>",media:["visual","paged"],initial:"auto",percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},marks:{syntax:"none | [ crop || cross ]",media:["visual","paged"],initial:"none",percentages:"no",computed:"asSpecified",order:"orderOfAppearance",status:"standard"},size:{syntax:"<length>{1,2} | auto | [ <page-size> || [ portrait | landscape ] ]",media:["visual","paged"],initial:"auto",percentages:"no",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"orderOfAppearance",status:"standard"}},status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@page"},"@property":{syntax:`@property <custom-property-name> {
  <declaration-list>
}`,interfaces:["CSS","CSSPropertyRule"],groups:["CSS Houdini"],descriptors:{syntax:{syntax:"<string>",media:"all",percentages:"no",initial:"n/a (required)",computed:"asSpecified",order:"uniqueOrder",status:"experimental"},inherits:{syntax:"true | false",media:"all",percentages:"no",initial:"auto",computed:"asSpecified",order:"uniqueOrder",status:"experimental"},"initial-value":{syntax:"<string>",media:"all",initial:"n/a (required)",percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"experimental"}},status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@property"},"@supports":{syntax:`@supports <supports-condition> {
  <group-rule-body>
}`,interfaces:["CSSGroupingRule","CSSConditionRule","CSSSupportsRule"],groups:["CSS Conditional Rules"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@supports"},"@viewport":{syntax:`@viewport {
  <group-rule-body>
}`,interfaces:["CSSViewportRule"],groups:["CSS Device Adaptation"],descriptors:{height:{syntax:"<viewport-length>{1,2}",media:["visual","continuous"],initial:["min-height","max-height"],percentages:["min-height","max-height"],computed:["min-height","max-height"],order:"orderOfAppearance",status:"standard"},"max-height":{syntax:"<viewport-length>",media:["visual","continuous"],initial:"auto",percentages:"referToHeightOfInitialViewport",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard"},"max-width":{syntax:"<viewport-length>",media:["visual","continuous"],initial:"auto",percentages:"referToWidthOfInitialViewport",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard"},"max-zoom":{syntax:"auto | <number> | <percentage>",media:["visual","continuous"],initial:"auto",percentages:"the zoom factor itself",computed:"autoNonNegativeOrPercentage",order:"uniqueOrder",status:"standard"},"min-height":{syntax:"<viewport-length>",media:["visual","continuous"],initial:"auto",percentages:"referToHeightOfInitialViewport",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard"},"min-width":{syntax:"<viewport-length>",media:["visual","continuous"],initial:"auto",percentages:"referToWidthOfInitialViewport",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard"},"min-zoom":{syntax:"auto | <number> | <percentage>",media:["visual","continuous"],initial:"auto",percentages:"the zoom factor itself",computed:"autoNonNegativeOrPercentage",order:"uniqueOrder",status:"standard"},orientation:{syntax:"auto | portrait | landscape",media:["visual","continuous"],initial:"auto",percentages:"referToSizeOfBoundingBox",computed:"asSpecified",order:"uniqueOrder",status:"standard"},"user-zoom":{syntax:"zoom | fixed",media:["visual","continuous"],initial:"zoom",percentages:"referToSizeOfBoundingBox",computed:"asSpecified",order:"uniqueOrder",status:"standard"},"viewport-fit":{syntax:"auto | contain | cover",media:["visual","continuous"],initial:"auto",percentages:"no",computed:"asSpecified",order:"uniqueOrder",status:"standard"},width:{syntax:"<viewport-length>{1,2}",media:["visual","continuous"],initial:["min-width","max-width"],percentages:["min-width","max-width"],computed:["min-width","max-width"],order:"orderOfAppearance",status:"standard"},zoom:{syntax:"auto | <number> | <percentage>",media:["visual","continuous"],initial:"auto",percentages:"the zoom factor itself",computed:"autoNonNegativeOrPercentage",order:"uniqueOrder",status:"standard"}},status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/@viewport"}}});var wx=D((Nj,dF)=>{dF.exports={"--*":{syntax:"<declaration-value>",media:"all",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Variables"],initial:"seeProse",appliesto:"allElements",computed:"asSpecifiedWithVarsSubstituted",order:"perGrammar",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/--*"},"-ms-accelerator":{syntax:"false | true",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"false",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-accelerator"},"-ms-block-progression":{syntax:"tb | rl | bt | lr",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"tb",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-block-progression"},"-ms-content-zoom-chaining":{syntax:"none | chained",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"none",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-content-zoom-chaining"},"-ms-content-zooming":{syntax:"none | zoom",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"zoomForTheTopLevelNoneForTheRest",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-content-zooming"},"-ms-content-zoom-limit":{syntax:"<'-ms-content-zoom-limit-min'> <'-ms-content-zoom-limit-max'>",media:"interactive",inherited:!1,animationType:"discrete",percentages:["-ms-content-zoom-limit-max","-ms-content-zoom-limit-min"],groups:["Microsoft Extensions"],initial:["-ms-content-zoom-limit-max","-ms-content-zoom-limit-min"],appliesto:"nonReplacedBlockAndInlineBlockElements",computed:["-ms-content-zoom-limit-max","-ms-content-zoom-limit-min"],order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-content-zoom-limit"},"-ms-content-zoom-limit-max":{syntax:"<percentage>",media:"interactive",inherited:!1,animationType:"discrete",percentages:"maxZoomFactor",groups:["Microsoft Extensions"],initial:"400%",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-content-zoom-limit-max"},"-ms-content-zoom-limit-min":{syntax:"<percentage>",media:"interactive",inherited:!1,animationType:"discrete",percentages:"minZoomFactor",groups:["Microsoft Extensions"],initial:"100%",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-content-zoom-limit-min"},"-ms-content-zoom-snap":{syntax:"<'-ms-content-zoom-snap-type'> || <'-ms-content-zoom-snap-points'>",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:["-ms-content-zoom-snap-type","-ms-content-zoom-snap-points"],appliesto:"nonReplacedBlockAndInlineBlockElements",computed:["-ms-content-zoom-snap-type","-ms-content-zoom-snap-points"],order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-content-zoom-snap"},"-ms-content-zoom-snap-points":{syntax:"snapInterval( <percentage>, <percentage> ) | snapList( <percentage># )",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"snapInterval(0%, 100%)",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-content-zoom-snap-points"},"-ms-content-zoom-snap-type":{syntax:"none | proximity | mandatory",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"none",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-content-zoom-snap-type"},"-ms-filter":{syntax:"<string>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:'""',appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-filter"},"-ms-flow-from":{syntax:"[ none | <custom-ident> ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"none",appliesto:"nonReplacedElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-flow-from"},"-ms-flow-into":{syntax:"[ none | <custom-ident> ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"none",appliesto:"iframeElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-flow-into"},"-ms-grid-columns":{syntax:"none | <track-list> | <auto-track-list>",media:"visual",inherited:!1,animationType:"simpleListOfLpcDifferenceLpc",percentages:"referToDimensionOfContentArea",groups:["CSS Grid Layout"],initial:"none",appliesto:"gridContainers",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-grid-columns"},"-ms-grid-rows":{syntax:"none | <track-list> | <auto-track-list>",media:"visual",inherited:!1,animationType:"simpleListOfLpcDifferenceLpc",percentages:"referToDimensionOfContentArea",groups:["CSS Grid Layout"],initial:"none",appliesto:"gridContainers",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-grid-rows"},"-ms-high-contrast-adjust":{syntax:"auto | none",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-high-contrast-adjust"},"-ms-hyphenate-limit-chars":{syntax:"auto | <integer>{1,3}",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-hyphenate-limit-chars"},"-ms-hyphenate-limit-lines":{syntax:"no-limit | <integer>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"no-limit",appliesto:"blockContainerElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-hyphenate-limit-lines"},"-ms-hyphenate-limit-zone":{syntax:"<percentage> | <length>",media:"visual",inherited:!0,animationType:"discrete",percentages:"referToLineBoxWidth",groups:["Microsoft Extensions"],initial:"0",appliesto:"blockContainerElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-hyphenate-limit-zone"},"-ms-ime-align":{syntax:"auto | after",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-ime-align"},"-ms-overflow-style":{syntax:"auto | none | scrollbar | -ms-autohiding-scrollbar",media:"interactive",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"auto",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-overflow-style"},"-ms-scrollbar-3dlight-color":{syntax:"<color>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"dependsOnUserAgent",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scrollbar-3dlight-color"},"-ms-scrollbar-arrow-color":{syntax:"<color>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"ButtonText",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scrollbar-arrow-color"},"-ms-scrollbar-base-color":{syntax:"<color>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"dependsOnUserAgent",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scrollbar-base-color"},"-ms-scrollbar-darkshadow-color":{syntax:"<color>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"ThreeDDarkShadow",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scrollbar-darkshadow-color"},"-ms-scrollbar-face-color":{syntax:"<color>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"ThreeDFace",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scrollbar-face-color"},"-ms-scrollbar-highlight-color":{syntax:"<color>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"ThreeDHighlight",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scrollbar-highlight-color"},"-ms-scrollbar-shadow-color":{syntax:"<color>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"ThreeDDarkShadow",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scrollbar-shadow-color"},"-ms-scrollbar-track-color":{syntax:"<color>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"Scrollbar",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scrollbar-track-color"},"-ms-scroll-chaining":{syntax:"chained | none",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"chained",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-chaining"},"-ms-scroll-limit":{syntax:"<'-ms-scroll-limit-x-min'> <'-ms-scroll-limit-y-min'> <'-ms-scroll-limit-x-max'> <'-ms-scroll-limit-y-max'>",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:["-ms-scroll-limit-x-min","-ms-scroll-limit-y-min","-ms-scroll-limit-x-max","-ms-scroll-limit-y-max"],appliesto:"nonReplacedBlockAndInlineBlockElements",computed:["-ms-scroll-limit-x-min","-ms-scroll-limit-y-min","-ms-scroll-limit-x-max","-ms-scroll-limit-y-max"],order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-limit"},"-ms-scroll-limit-x-max":{syntax:"auto | <length>",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"auto",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-limit-x-max"},"-ms-scroll-limit-x-min":{syntax:"<length>",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"0",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-limit-x-min"},"-ms-scroll-limit-y-max":{syntax:"auto | <length>",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"auto",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-limit-y-max"},"-ms-scroll-limit-y-min":{syntax:"<length>",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"0",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-limit-y-min"},"-ms-scroll-rails":{syntax:"none | railed",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"railed",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-rails"},"-ms-scroll-snap-points-x":{syntax:"snapInterval( <length-percentage>, <length-percentage> ) | snapList( <length-percentage># )",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"snapInterval(0px, 100%)",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-snap-points-x"},"-ms-scroll-snap-points-y":{syntax:"snapInterval( <length-percentage>, <length-percentage> ) | snapList( <length-percentage># )",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"snapInterval(0px, 100%)",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-snap-points-y"},"-ms-scroll-snap-type":{syntax:"none | proximity | mandatory",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"none",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-snap-type"},"-ms-scroll-snap-x":{syntax:"<'-ms-scroll-snap-type'> <'-ms-scroll-snap-points-x'>",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:["-ms-scroll-snap-type","-ms-scroll-snap-points-x"],appliesto:"nonReplacedBlockAndInlineBlockElements",computed:["-ms-scroll-snap-type","-ms-scroll-snap-points-x"],order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-snap-x"},"-ms-scroll-snap-y":{syntax:"<'-ms-scroll-snap-type'> <'-ms-scroll-snap-points-y'>",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:["-ms-scroll-snap-type","-ms-scroll-snap-points-y"],appliesto:"nonReplacedBlockAndInlineBlockElements",computed:["-ms-scroll-snap-type","-ms-scroll-snap-points-y"],order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-snap-y"},"-ms-scroll-translation":{syntax:"none | vertical-to-horizontal",media:"interactive",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-scroll-translation"},"-ms-text-autospace":{syntax:"none | ideograph-alpha | ideograph-numeric | ideograph-parenthesis | ideograph-space",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-text-autospace"},"-ms-touch-select":{syntax:"grippers | none",media:"interactive",inherited:!0,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"grippers",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-touch-select"},"-ms-user-select":{syntax:"none | element | text",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"text",appliesto:"nonReplacedElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-user-select"},"-ms-wrap-flow":{syntax:"auto | both | start | end | maximum | clear",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"auto",appliesto:"blockLevelElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-wrap-flow"},"-ms-wrap-margin":{syntax:"<length>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"0",appliesto:"exclusionElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-wrap-margin"},"-ms-wrap-through":{syntax:"wrap | none",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Microsoft Extensions"],initial:"wrap",appliesto:"blockLevelElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-ms-wrap-through"},"-moz-appearance":{syntax:"none | button | button-arrow-down | button-arrow-next | button-arrow-previous | button-arrow-up | button-bevel | button-focus | caret | checkbox | checkbox-container | checkbox-label | checkmenuitem | dualbutton | groupbox | listbox | listitem | menuarrow | menubar | menucheckbox | menuimage | menuitem | menuitemtext | menulist | menulist-button | menulist-text | menulist-textfield | menupopup | menuradio | menuseparator | meterbar | meterchunk | progressbar | progressbar-vertical | progresschunk | progresschunk-vertical | radio | radio-container | radio-label | radiomenuitem | range | range-thumb | resizer | resizerpanel | scale-horizontal | scalethumbend | scalethumb-horizontal | scalethumbstart | scalethumbtick | scalethumb-vertical | scale-vertical | scrollbarbutton-down | scrollbarbutton-left | scrollbarbutton-right | scrollbarbutton-up | scrollbarthumb-horizontal | scrollbarthumb-vertical | scrollbartrack-horizontal | scrollbartrack-vertical | searchfield | separator | sheet | spinner | spinner-downbutton | spinner-textfield | spinner-upbutton | splitter | statusbar | statusbarpanel | tab | tabpanel | tabpanels | tab-scroll-arrow-back | tab-scroll-arrow-forward | textfield | textfield-multiline | toolbar | toolbarbutton | toolbarbutton-dropdown | toolbargripper | toolbox | tooltip | treeheader | treeheadercell | treeheadersortarrow | treeitem | treeline | treetwisty | treetwistyopen | treeview | -moz-mac-unified-toolbar | -moz-win-borderless-glass | -moz-win-browsertabbar-toolbox | -moz-win-communicationstext | -moz-win-communications-toolbox | -moz-win-exclude-glass | -moz-win-glass | -moz-win-mediatext | -moz-win-media-toolbox | -moz-window-button-box | -moz-window-button-box-maximized | -moz-window-button-close | -moz-window-button-maximize | -moz-window-button-minimize | -moz-window-button-restore | -moz-window-frame-bottom | -moz-window-frame-left | -moz-window-frame-right | -moz-window-titlebar | -moz-window-titlebar-maximized",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions","WebKit Extensions"],initial:"noneButOverriddenInUserAgentCSS",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/appearance"},"-moz-binding":{syntax:"<url> | none",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"none",appliesto:"allElementsExceptGeneratedContentOrPseudoElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-binding"},"-moz-border-bottom-colors":{syntax:"<color>+ | none",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-border-bottom-colors"},"-moz-border-left-colors":{syntax:"<color>+ | none",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-border-left-colors"},"-moz-border-right-colors":{syntax:"<color>+ | none",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-border-right-colors"},"-moz-border-top-colors":{syntax:"<color>+ | none",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-border-top-colors"},"-moz-context-properties":{syntax:"none | [ fill | fill-opacity | stroke | stroke-opacity ]#",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"none",appliesto:"allElementsThatCanReferenceImages",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-context-properties"},"-moz-float-edge":{syntax:"border-box | content-box | margin-box | padding-box",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"content-box",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-float-edge"},"-moz-force-broken-image-icon":{syntax:"<integer [0,1]>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"0",appliesto:"images",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-force-broken-image-icon"},"-moz-image-region":{syntax:"<shape> | auto",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"auto",appliesto:"xulImageElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-image-region"},"-moz-orient":{syntax:"inline | block | horizontal | vertical",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"inline",appliesto:"anyElementEffectOnProgressAndMeter",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-orient"},"-moz-outline-radius":{syntax:"<outline-radius>{1,4} [ / <outline-radius>{1,4} ]?",media:"visual",inherited:!1,animationType:["-moz-outline-radius-topleft","-moz-outline-radius-topright","-moz-outline-radius-bottomright","-moz-outline-radius-bottomleft"],percentages:["-moz-outline-radius-topleft","-moz-outline-radius-topright","-moz-outline-radius-bottomright","-moz-outline-radius-bottomleft"],groups:["Mozilla Extensions"],initial:["-moz-outline-radius-topleft","-moz-outline-radius-topright","-moz-outline-radius-bottomright","-moz-outline-radius-bottomleft"],appliesto:"allElements",computed:["-moz-outline-radius-topleft","-moz-outline-radius-topright","-moz-outline-radius-bottomright","-moz-outline-radius-bottomleft"],order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-outline-radius"},"-moz-outline-radius-bottomleft":{syntax:"<outline-radius>",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["Mozilla Extensions"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-outline-radius-bottomleft"},"-moz-outline-radius-bottomright":{syntax:"<outline-radius>",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["Mozilla Extensions"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-outline-radius-bottomright"},"-moz-outline-radius-topleft":{syntax:"<outline-radius>",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["Mozilla Extensions"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-outline-radius-topleft"},"-moz-outline-radius-topright":{syntax:"<outline-radius>",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["Mozilla Extensions"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-outline-radius-topright"},"-moz-stack-sizing":{syntax:"ignore | stretch-to-fit",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"stretch-to-fit",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-stack-sizing"},"-moz-text-blink":{syntax:"none | blink",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-text-blink"},"-moz-user-focus":{syntax:"ignore | normal | select-after | select-before | select-menu | select-same | select-all | none",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-user-focus"},"-moz-user-input":{syntax:"auto | none | enabled | disabled",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-user-input"},"-moz-user-modify":{syntax:"read-only | read-write | write-only",media:"interactive",inherited:!0,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"read-only",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-user-modify"},"-moz-window-dragging":{syntax:"drag | no-drag",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"drag",appliesto:"allElementsCreatingNativeWindows",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-window-dragging"},"-moz-window-shadow":{syntax:"default | menu | tooltip | sheet | none",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"default",appliesto:"allElementsCreatingNativeWindows",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-moz-window-shadow"},"-webkit-appearance":{syntax:"none | button | button-bevel | caret | checkbox | default-button | inner-spin-button | listbox | listitem | media-controls-background | media-controls-fullscreen-background | media-current-time-display | media-enter-fullscreen-button | media-exit-fullscreen-button | media-fullscreen-button | media-mute-button | media-overlay-play-button | media-play-button | media-seek-back-button | media-seek-forward-button | media-slider | media-sliderthumb | media-time-remaining-display | media-toggle-closed-captions-button | media-volume-slider | media-volume-slider-container | media-volume-sliderthumb | menulist | menulist-button | menulist-text | menulist-textfield | meter | progress-bar | progress-bar-value | push-button | radio | searchfield | searchfield-cancel-button | searchfield-decoration | searchfield-results-button | searchfield-results-decoration | slider-horizontal | slider-vertical | sliderthumb-horizontal | sliderthumb-vertical | square-button | textarea | textfield | -apple-pay-button",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"noneButOverriddenInUserAgentCSS",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/appearance"},"-webkit-border-before":{syntax:"<'border-width'> || <'border-style'> || <'color'>",media:"visual",inherited:!0,animationType:"discrete",percentages:["-webkit-border-before-width"],groups:["WebKit Extensions"],initial:["border-width","border-style","color"],appliesto:"allElements",computed:["border-width","border-style","color"],order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-border-before"},"-webkit-border-before-color":{syntax:"<'color'>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",status:"nonstandard"},"-webkit-border-before-style":{syntax:"<'border-style'>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard"},"-webkit-border-before-width":{syntax:"<'border-width'>",media:"visual",inherited:!0,animationType:"discrete",percentages:"logicalWidthOfContainingBlock",groups:["WebKit Extensions"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthZeroIfBorderStyleNoneOrHidden",order:"uniqueOrder",status:"nonstandard"},"-webkit-box-reflect":{syntax:"[ above | below | right | left ]? <length>? <image>?",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-box-reflect"},"-webkit-line-clamp":{syntax:"none | <integer>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["WebKit Extensions","CSS Overflow"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-line-clamp"},"-webkit-mask":{syntax:"[ <mask-reference> || <position> [ / <bg-size> ]? || <repeat-style> || [ <box> | border | padding | content | text ] || [ <box> | border | padding | content ] ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:["-webkit-mask-image","-webkit-mask-repeat","-webkit-mask-attachment","-webkit-mask-position","-webkit-mask-origin","-webkit-mask-clip"],appliesto:"allElements",computed:["-webkit-mask-image","-webkit-mask-repeat","-webkit-mask-attachment","-webkit-mask-position","-webkit-mask-origin","-webkit-mask-clip"],order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask"},"-webkit-mask-attachment":{syntax:"<attachment>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"scroll",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-mask-attachment"},"-webkit-mask-clip":{syntax:"[ <box> | border | padding | content | text ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"border",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-clip"},"-webkit-mask-composite":{syntax:"<composite-style>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"source-over",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-mask-composite"},"-webkit-mask-image":{syntax:"<mask-reference>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"none",appliesto:"allElements",computed:"absoluteURIOrNone",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-image"},"-webkit-mask-origin":{syntax:"[ <box> | border | padding | content ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"padding",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-origin"},"-webkit-mask-position":{syntax:"<position>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"referToSizeOfElement",groups:["WebKit Extensions"],initial:"0% 0%",appliesto:"allElements",computed:"absoluteLengthOrPercentage",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-position"},"-webkit-mask-position-x":{syntax:"[ <length-percentage> | left | center | right ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"referToSizeOfElement",groups:["WebKit Extensions"],initial:"0%",appliesto:"allElements",computed:"absoluteLengthOrPercentage",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-mask-position-x"},"-webkit-mask-position-y":{syntax:"[ <length-percentage> | top | center | bottom ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"referToSizeOfElement",groups:["WebKit Extensions"],initial:"0%",appliesto:"allElements",computed:"absoluteLengthOrPercentage",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-mask-position-y"},"-webkit-mask-repeat":{syntax:"<repeat-style>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"repeat",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-repeat"},"-webkit-mask-repeat-x":{syntax:"repeat | no-repeat | space | round",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"repeat",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-mask-repeat-x"},"-webkit-mask-repeat-y":{syntax:"repeat | no-repeat | space | round",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"repeat",appliesto:"allElements",computed:"absoluteLengthOrPercentage",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-mask-repeat-y"},"-webkit-mask-size":{syntax:"<bg-size>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"relativeToBackgroundPositioningArea",groups:["WebKit Extensions"],initial:"auto auto",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-size"},"-webkit-overflow-scrolling":{syntax:"auto | touch",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"auto",appliesto:"scrollingBoxes",computed:"asSpecified",order:"orderOfAppearance",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-overflow-scrolling"},"-webkit-tap-highlight-color":{syntax:"<color>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"black",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-tap-highlight-color"},"-webkit-text-fill-color":{syntax:"<color>",media:"visual",inherited:!0,animationType:"color",percentages:"no",groups:["WebKit Extensions"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-text-fill-color"},"-webkit-text-stroke":{syntax:"<length> || <color>",media:"visual",inherited:!0,animationType:["-webkit-text-stroke-width","-webkit-text-stroke-color"],percentages:"no",groups:["WebKit Extensions"],initial:["-webkit-text-stroke-width","-webkit-text-stroke-color"],appliesto:"allElements",computed:["-webkit-text-stroke-width","-webkit-text-stroke-color"],order:"canonicalOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-text-stroke"},"-webkit-text-stroke-color":{syntax:"<color>",media:"visual",inherited:!0,animationType:"color",percentages:"no",groups:["WebKit Extensions"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-text-stroke-color"},"-webkit-text-stroke-width":{syntax:"<length>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"0",appliesto:"allElements",computed:"absoluteLength",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-text-stroke-width"},"-webkit-touch-callout":{syntax:"default | none",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"default",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/-webkit-touch-callout"},"-webkit-user-modify":{syntax:"read-only | read-write | read-write-plaintext-only",media:"interactive",inherited:!0,animationType:"discrete",percentages:"no",groups:["WebKit Extensions"],initial:"read-only",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard"},"align-content":{syntax:"normal | <baseline-position> | <content-distribution> | <overflow-position>? <content-position>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Alignment"],initial:"normal",appliesto:"multilineFlexContainers",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/align-content"},"align-items":{syntax:"normal | stretch | <baseline-position> | [ <overflow-position>? <self-position> ]",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Alignment"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/align-items"},"align-self":{syntax:"auto | normal | stretch | <baseline-position> | <overflow-position>? <self-position>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Alignment"],initial:"auto",appliesto:"flexItemsGridItemsAndAbsolutelyPositionedBoxes",computed:"autoOnAbsolutelyPositionedElementsValueOfAlignItemsOnParent",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/align-self"},"align-tracks":{syntax:"[ normal | <baseline-position> | <content-distribution> | <overflow-position>? <content-position> ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:"normal",appliesto:"gridContainersWithMasonryLayoutInTheirBlockAxis",computed:"asSpecified",order:"uniqueOrder",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/align-tracks"},all:{syntax:"initial | inherit | unset | revert",media:"noPracticalMedia",inherited:!1,animationType:"eachOfShorthandPropertiesExceptUnicodeBiDiAndDirection",percentages:"no",groups:["CSS Miscellaneous"],initial:"noPracticalInitialValue",appliesto:"allElements",computed:"asSpecifiedAppliesToEachProperty",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/all"},animation:{syntax:"<single-animation>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Animations"],initial:["animation-name","animation-duration","animation-timing-function","animation-delay","animation-iteration-count","animation-direction","animation-fill-mode","animation-play-state"],appliesto:"allElementsAndPseudos",computed:["animation-name","animation-duration","animation-timing-function","animation-delay","animation-direction","animation-iteration-count","animation-fill-mode","animation-play-state"],order:"orderOfAppearance",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/animation"},"animation-delay":{syntax:"<time>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Animations"],initial:"0s",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/animation-delay"},"animation-direction":{syntax:"<single-animation-direction>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Animations"],initial:"normal",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/animation-direction"},"animation-duration":{syntax:"<time>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Animations"],initial:"0s",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/animation-duration"},"animation-fill-mode":{syntax:"<single-animation-fill-mode>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Animations"],initial:"none",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/animation-fill-mode"},"animation-iteration-count":{syntax:"<single-animation-iteration-count>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Animations"],initial:"1",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/animation-iteration-count"},"animation-name":{syntax:"[ none | <keyframes-name> ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Animations"],initial:"none",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/animation-name"},"animation-play-state":{syntax:"<single-animation-play-state>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Animations"],initial:"running",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/animation-play-state"},"animation-timing-function":{syntax:"<timing-function>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Animations"],initial:"ease",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/animation-timing-function"},appearance:{syntax:"none | auto | textfield | menulist-button | <compat-auto>",media:"all",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Basic User Interface"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/appearance"},"aspect-ratio":{syntax:"auto | <ratio>",media:"all",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Basic User Interface"],initial:"auto",appliesto:"allElementsExceptInlineBoxesAndInternalRubyOrTableBoxes",computed:"asSpecified",order:"perGrammar",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/aspect-ratio"},azimuth:{syntax:"<angle> | [ [ left-side | far-left | left | center-left | center | center-right | right | far-right | right-side ] || behind ] | leftwards | rightwards",media:"aural",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Speech"],initial:"center",appliesto:"allElements",computed:"normalizedAngle",order:"orderOfAppearance",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/azimuth"},"backdrop-filter":{syntax:"none | <filter-function-list>",media:"visual",inherited:!1,animationType:"filterList",percentages:"no",groups:["Filter Effects"],initial:"none",appliesto:"allElementsSVGContainerElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/backdrop-filter"},"backface-visibility":{syntax:"visible | hidden",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Transforms"],initial:"visible",appliesto:"transformableElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/backface-visibility"},background:{syntax:"[ <bg-layer> , ]* <final-bg-layer>",media:"visual",inherited:!1,animationType:["background-color","background-image","background-clip","background-position","background-size","background-repeat","background-attachment"],percentages:["background-position","background-size"],groups:["CSS Backgrounds and Borders"],initial:["background-image","background-position","background-size","background-repeat","background-origin","background-clip","background-attachment","background-color"],appliesto:"allElements",computed:["background-image","background-position","background-size","background-repeat","background-origin","background-clip","background-attachment","background-color"],order:"orderOfAppearance",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background"},"background-attachment":{syntax:"<attachment>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"scroll",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-attachment"},"background-blend-mode":{syntax:"<blend-mode>#",media:"none",inherited:!1,animationType:"discrete",percentages:"no",groups:["Compositing and Blending"],initial:"normal",appliesto:"allElementsSVGContainerGraphicsAndGraphicsReferencingElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-blend-mode"},"background-clip":{syntax:"<box>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"border-box",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-clip"},"background-color":{syntax:"<color>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"transparent",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-color"},"background-image":{syntax:"<bg-image>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"none",appliesto:"allElements",computed:"asSpecifiedURLsAbsolute",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-image"},"background-origin":{syntax:"<box>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"padding-box",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-origin"},"background-position":{syntax:"<bg-position>#",media:"visual",inherited:!1,animationType:"repeatableListOfSimpleListOfLpc",percentages:"referToSizeOfBackgroundPositioningAreaMinusBackgroundImageSize",groups:["CSS Backgrounds and Borders"],initial:"0% 0%",appliesto:"allElements",computed:"listEachItemTwoKeywordsOriginOffsets",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-position"},"background-position-x":{syntax:"[ center | [ [ left | right | x-start | x-end ]? <length-percentage>? ]! ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"referToWidthOfBackgroundPositioningAreaMinusBackgroundImageHeight",groups:["CSS Backgrounds and Borders"],initial:"left",appliesto:"allElements",computed:"listEachItemConsistingOfAbsoluteLengthPercentageAndOrigin",order:"uniqueOrder",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-position-x"},"background-position-y":{syntax:"[ center | [ [ top | bottom | y-start | y-end ]? <length-percentage>? ]! ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"referToHeightOfBackgroundPositioningAreaMinusBackgroundImageHeight",groups:["CSS Backgrounds and Borders"],initial:"top",appliesto:"allElements",computed:"listEachItemConsistingOfAbsoluteLengthPercentageAndOrigin",order:"uniqueOrder",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-position-y"},"background-repeat":{syntax:"<repeat-style>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"repeat",appliesto:"allElements",computed:"listEachItemHasTwoKeywordsOnePerDimension",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-repeat"},"background-size":{syntax:"<bg-size>#",media:"visual",inherited:!1,animationType:"repeatableListOfSimpleListOfLpc",percentages:"relativeToBackgroundPositioningArea",groups:["CSS Backgrounds and Borders"],initial:"auto auto",appliesto:"allElements",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/background-size"},"block-overflow":{syntax:"clip | ellipsis | <string>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Overflow"],initial:"clip",appliesto:"blockContainers",computed:"asSpecified",order:"perGrammar",status:"experimental"},"block-size":{syntax:"<'width'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"blockSizeOfContainingBlock",groups:["CSS Logical Properties"],initial:"auto",appliesto:"sameAsWidthAndHeight",computed:"sameAsWidthAndHeight",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/block-size"},border:{syntax:"<line-width> || <line-style> || <color>",media:"visual",inherited:!1,animationType:["border-color","border-style","border-width"],percentages:"no",groups:["CSS Backgrounds and Borders"],initial:["border-width","border-style","border-color"],appliesto:"allElements",computed:["border-width","border-style","border-color"],order:"orderOfAppearance",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border"},"border-block":{syntax:"<'border-top-width'> || <'border-top-style'> || <'color'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Logical Properties"],initial:["border-top-width","border-top-style","border-top-color"],appliesto:"allElements",computed:["border-top-width","border-top-style","border-top-color"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block"},"border-block-color":{syntax:"<'border-top-color'>{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Logical Properties"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-color"},"border-block-style":{syntax:"<'border-top-style'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Logical Properties"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-style"},"border-block-width":{syntax:"<'border-top-width'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthZeroIfBorderStyleNoneOrHidden",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-width"},"border-block-end":{syntax:"<'border-top-width'> || <'border-top-style'> || <'color'>",media:"visual",inherited:!1,animationType:["border-block-end-color","border-block-end-style","border-block-end-width"],percentages:"no",groups:["CSS Logical Properties"],initial:["border-top-width","border-top-style","border-top-color"],appliesto:"allElements",computed:["border-top-width","border-top-style","border-top-color"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-end"},"border-block-end-color":{syntax:"<'border-top-color'>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Logical Properties"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-end-color"},"border-block-end-style":{syntax:"<'border-top-style'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Logical Properties"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-end-style"},"border-block-end-width":{syntax:"<'border-top-width'>",media:"visual",inherited:!1,animationType:"length",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthZeroIfBorderStyleNoneOrHidden",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-end-width"},"border-block-start":{syntax:"<'border-top-width'> || <'border-top-style'> || <'color'>",media:"visual",inherited:!1,animationType:["border-block-start-color","border-block-start-style","border-block-start-width"],percentages:"no",groups:["CSS Logical Properties"],initial:["border-width","border-style","color"],appliesto:"allElements",computed:["border-width","border-style","border-block-start-color"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-start"},"border-block-start-color":{syntax:"<'border-top-color'>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Logical Properties"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-start-color"},"border-block-start-style":{syntax:"<'border-top-style'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Logical Properties"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-start-style"},"border-block-start-width":{syntax:"<'border-top-width'>",media:"visual",inherited:!1,animationType:"length",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthZeroIfBorderStyleNoneOrHidden",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-block-start-width"},"border-bottom":{syntax:"<line-width> || <line-style> || <color>",media:"visual",inherited:!1,animationType:["border-bottom-color","border-bottom-style","border-bottom-width"],percentages:"no",groups:["CSS Backgrounds and Borders"],initial:["border-bottom-width","border-bottom-style","border-bottom-color"],appliesto:"allElements",computed:["border-bottom-width","border-bottom-style","border-bottom-color"],order:"orderOfAppearance",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-bottom"},"border-bottom-color":{syntax:"<'border-top-color'>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-bottom-color"},"border-bottom-left-radius":{syntax:"<length-percentage>{1,2}",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["CSS Backgrounds and Borders"],initial:"0",appliesto:"allElementsUAsNotRequiredWhenCollapse",computed:"twoAbsoluteLengthOrPercentages",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-bottom-left-radius"},"border-bottom-right-radius":{syntax:"<length-percentage>{1,2}",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["CSS Backgrounds and Borders"],initial:"0",appliesto:"allElementsUAsNotRequiredWhenCollapse",computed:"twoAbsoluteLengthOrPercentages",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-bottom-right-radius"},"border-bottom-style":{syntax:"<line-style>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-bottom-style"},"border-bottom-width":{syntax:"<line-width>",media:"visual",inherited:!1,animationType:"length",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthOr0IfBorderBottomStyleNoneOrHidden",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-bottom-width"},"border-collapse":{syntax:"collapse | separate",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Table"],initial:"separate",appliesto:"tableElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-collapse"},"border-color":{syntax:"<color>{1,4}",media:"visual",inherited:!1,animationType:["border-bottom-color","border-left-color","border-right-color","border-top-color"],percentages:"no",groups:["CSS Backgrounds and Borders"],initial:["border-top-color","border-right-color","border-bottom-color","border-left-color"],appliesto:"allElements",computed:["border-bottom-color","border-left-color","border-right-color","border-top-color"],order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-color"},"border-end-end-radius":{syntax:"<length-percentage>{1,2}",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["CSS Logical Properties"],initial:"0",appliesto:"allElementsUAsNotRequiredWhenCollapse",computed:"twoAbsoluteLengthOrPercentages",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-end-end-radius"},"border-end-start-radius":{syntax:"<length-percentage>{1,2}",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["CSS Logical Properties"],initial:"0",appliesto:"allElementsUAsNotRequiredWhenCollapse",computed:"twoAbsoluteLengthOrPercentages",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-end-start-radius"},"border-image":{syntax:"<'border-image-source'> || <'border-image-slice'> [ / <'border-image-width'> | / <'border-image-width'>? / <'border-image-outset'> ]? || <'border-image-repeat'>",media:"visual",inherited:!1,animationType:"discrete",percentages:["border-image-slice","border-image-width"],groups:["CSS Backgrounds and Borders"],initial:["border-image-source","border-image-slice","border-image-width","border-image-outset","border-image-repeat"],appliesto:"allElementsExceptTableElementsWhenCollapse",computed:["border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width"],order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-image"},"border-image-outset":{syntax:"[ <length> | <number> ]{1,4}",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"0",appliesto:"allElementsExceptTableElementsWhenCollapse",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-image-outset"},"border-image-repeat":{syntax:"[ stretch | repeat | round | space ]{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"stretch",appliesto:"allElementsExceptTableElementsWhenCollapse",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-image-repeat"},"border-image-slice":{syntax:"<number-percentage>{1,4} && fill?",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"referToSizeOfBorderImage",groups:["CSS Backgrounds and Borders"],initial:"100%",appliesto:"allElementsExceptTableElementsWhenCollapse",computed:"oneToFourPercentagesOrAbsoluteLengthsPlusFill",order:"percentagesOrLengthsFollowedByFill",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-image-slice"},"border-image-source":{syntax:"none | <image>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"none",appliesto:"allElementsExceptTableElementsWhenCollapse",computed:"noneOrImageWithAbsoluteURI",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-image-source"},"border-image-width":{syntax:"[ <length-percentage> | <number> | auto ]{1,4}",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"referToWidthOrHeightOfBorderImageArea",groups:["CSS Backgrounds and Borders"],initial:"1",appliesto:"allElementsExceptTableElementsWhenCollapse",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-image-width"},"border-inline":{syntax:"<'border-top-width'> || <'border-top-style'> || <'color'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Logical Properties"],initial:["border-top-width","border-top-style","border-top-color"],appliesto:"allElements",computed:["border-top-width","border-top-style","border-top-color"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline"},"border-inline-end":{syntax:"<'border-top-width'> || <'border-top-style'> || <'color'>",media:"visual",inherited:!1,animationType:["border-inline-end-color","border-inline-end-style","border-inline-end-width"],percentages:"no",groups:["CSS Logical Properties"],initial:["border-width","border-style","color"],appliesto:"allElements",computed:["border-width","border-style","border-inline-end-color"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-end"},"border-inline-color":{syntax:"<'border-top-color'>{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Logical Properties"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-color"},"border-inline-style":{syntax:"<'border-top-style'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Logical Properties"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-style"},"border-inline-width":{syntax:"<'border-top-width'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthZeroIfBorderStyleNoneOrHidden",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-width"},"border-inline-end-color":{syntax:"<'border-top-color'>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Logical Properties"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-end-color"},"border-inline-end-style":{syntax:"<'border-top-style'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Logical Properties"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-end-style"},"border-inline-end-width":{syntax:"<'border-top-width'>",media:"visual",inherited:!1,animationType:"length",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthZeroIfBorderStyleNoneOrHidden",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-end-width"},"border-inline-start":{syntax:"<'border-top-width'> || <'border-top-style'> || <'color'>",media:"visual",inherited:!1,animationType:["border-inline-start-color","border-inline-start-style","border-inline-start-width"],percentages:"no",groups:["CSS Logical Properties"],initial:["border-width","border-style","color"],appliesto:"allElements",computed:["border-width","border-style","border-inline-start-color"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-start"},"border-inline-start-color":{syntax:"<'border-top-color'>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Logical Properties"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-start-color"},"border-inline-start-style":{syntax:"<'border-top-style'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Logical Properties"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-start-style"},"border-inline-start-width":{syntax:"<'border-top-width'>",media:"visual",inherited:!1,animationType:"length",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthZeroIfBorderStyleNoneOrHidden",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-inline-start-width"},"border-left":{syntax:"<line-width> || <line-style> || <color>",media:"visual",inherited:!1,animationType:["border-left-color","border-left-style","border-left-width"],percentages:"no",groups:["CSS Backgrounds and Borders"],initial:["border-left-width","border-left-style","border-left-color"],appliesto:"allElements",computed:["border-left-width","border-left-style","border-left-color"],order:"orderOfAppearance",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-left"},"border-left-color":{syntax:"<color>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-left-color"},"border-left-style":{syntax:"<line-style>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-left-style"},"border-left-width":{syntax:"<line-width>",media:"visual",inherited:!1,animationType:"length",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthOr0IfBorderLeftStyleNoneOrHidden",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-left-width"},"border-radius":{syntax:"<length-percentage>{1,4} [ / <length-percentage>{1,4} ]?",media:"visual",inherited:!1,animationType:["border-top-left-radius","border-top-right-radius","border-bottom-right-radius","border-bottom-left-radius"],percentages:"referToDimensionOfBorderBox",groups:["CSS Backgrounds and Borders"],initial:["border-top-left-radius","border-top-right-radius","border-bottom-right-radius","border-bottom-left-radius"],appliesto:"allElementsUAsNotRequiredWhenCollapse",computed:["border-bottom-left-radius","border-bottom-right-radius","border-top-left-radius","border-top-right-radius"],order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-radius"},"border-right":{syntax:"<line-width> || <line-style> || <color>",media:"visual",inherited:!1,animationType:["border-right-color","border-right-style","border-right-width"],percentages:"no",groups:["CSS Backgrounds and Borders"],initial:["border-right-width","border-right-style","border-right-color"],appliesto:"allElements",computed:["border-right-width","border-right-style","border-right-color"],order:"orderOfAppearance",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-right"},"border-right-color":{syntax:"<color>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-right-color"},"border-right-style":{syntax:"<line-style>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-right-style"},"border-right-width":{syntax:"<line-width>",media:"visual",inherited:!1,animationType:"length",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthOr0IfBorderRightStyleNoneOrHidden",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-right-width"},"border-spacing":{syntax:"<length> <length>?",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Table"],initial:"0",appliesto:"tableElements",computed:"twoAbsoluteLengths",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-spacing"},"border-start-end-radius":{syntax:"<length-percentage>{1,2}",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["CSS Logical Properties"],initial:"0",appliesto:"allElementsUAsNotRequiredWhenCollapse",computed:"twoAbsoluteLengthOrPercentages",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-start-end-radius"},"border-start-start-radius":{syntax:"<length-percentage>{1,2}",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["CSS Logical Properties"],initial:"0",appliesto:"allElementsUAsNotRequiredWhenCollapse",computed:"twoAbsoluteLengthOrPercentages",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-start-start-radius"},"border-style":{syntax:"<line-style>{1,4}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:["border-top-style","border-right-style","border-bottom-style","border-left-style"],appliesto:"allElements",computed:["border-bottom-style","border-left-style","border-right-style","border-top-style"],order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-style"},"border-top":{syntax:"<line-width> || <line-style> || <color>",media:"visual",inherited:!1,animationType:["border-top-color","border-top-style","border-top-width"],percentages:"no",groups:["CSS Backgrounds and Borders"],initial:["border-top-width","border-top-style","border-top-color"],appliesto:"allElements",computed:["border-top-width","border-top-style","border-top-color"],order:"orderOfAppearance",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-top"},"border-top-color":{syntax:"<color>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-top-color"},"border-top-left-radius":{syntax:"<length-percentage>{1,2}",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["CSS Backgrounds and Borders"],initial:"0",appliesto:"allElementsUAsNotRequiredWhenCollapse",computed:"twoAbsoluteLengthOrPercentages",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-top-left-radius"},"border-top-right-radius":{syntax:"<length-percentage>{1,2}",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfBorderBox",groups:["CSS Backgrounds and Borders"],initial:"0",appliesto:"allElementsUAsNotRequiredWhenCollapse",computed:"twoAbsoluteLengthOrPercentages",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-top-right-radius"},"border-top-style":{syntax:"<line-style>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-top-style"},"border-top-width":{syntax:"<line-width>",media:"visual",inherited:!1,animationType:"length",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"medium",appliesto:"allElements",computed:"absoluteLengthOr0IfBorderTopStyleNoneOrHidden",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-top-width"},"border-width":{syntax:"<line-width>{1,4}",media:"visual",inherited:!1,animationType:["border-bottom-width","border-left-width","border-right-width","border-top-width"],percentages:"no",groups:["CSS Backgrounds and Borders"],initial:["border-top-width","border-right-width","border-bottom-width","border-left-width"],appliesto:"allElements",computed:["border-bottom-width","border-left-width","border-right-width","border-top-width"],order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/border-width"},bottom:{syntax:"<length> | <percentage> | auto",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToContainingBlockHeight",groups:["CSS Positioning"],initial:"auto",appliesto:"positionedElements",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/bottom"},"box-align":{syntax:"start | center | end | baseline | stretch",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions","WebKit Extensions"],initial:"stretch",appliesto:"elementsWithDisplayBoxOrInlineBox",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-align"},"box-decoration-break":{syntax:"slice | clone",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Fragmentation"],initial:"slice",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-decoration-break"},"box-direction":{syntax:"normal | reverse | inherit",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions","WebKit Extensions"],initial:"normal",appliesto:"elementsWithDisplayBoxOrInlineBox",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-direction"},"box-flex":{syntax:"<number>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions","WebKit Extensions"],initial:"0",appliesto:"directChildrenOfElementsWithDisplayMozBoxMozInlineBox",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-flex"},"box-flex-group":{syntax:"<integer>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions","WebKit Extensions"],initial:"1",appliesto:"inFlowChildrenOfBoxElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-flex-group"},"box-lines":{syntax:"single | multiple",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions","WebKit Extensions"],initial:"single",appliesto:"boxElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-lines"},"box-ordinal-group":{syntax:"<integer>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions","WebKit Extensions"],initial:"1",appliesto:"childrenOfBoxElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-ordinal-group"},"box-orient":{syntax:"horizontal | vertical | inline-axis | block-axis | inherit",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions","WebKit Extensions"],initial:"inlineAxisHorizontalInXUL",appliesto:"elementsWithDisplayBoxOrInlineBox",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-orient"},"box-pack":{syntax:"start | center | end | justify",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions","WebKit Extensions"],initial:"start",appliesto:"elementsWithDisplayMozBoxMozInlineBox",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-pack"},"box-shadow":{syntax:"none | <shadow>#",media:"visual",inherited:!1,animationType:"shadowList",percentages:"no",groups:["CSS Backgrounds and Borders"],initial:"none",appliesto:"allElements",computed:"absoluteLengthsSpecifiedColorAsSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-shadow"},"box-sizing":{syntax:"content-box | border-box",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Basic User Interface"],initial:"content-box",appliesto:"allElementsAcceptingWidthOrHeight",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/box-sizing"},"break-after":{syntax:"auto | avoid | always | all | avoid-page | page | left | right | recto | verso | avoid-column | column | avoid-region | region",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Fragmentation"],initial:"auto",appliesto:"blockLevelElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/break-after"},"break-before":{syntax:"auto | avoid | always | all | avoid-page | page | left | right | recto | verso | avoid-column | column | avoid-region | region",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Fragmentation"],initial:"auto",appliesto:"blockLevelElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/break-before"},"break-inside":{syntax:"auto | avoid | avoid-page | avoid-column | avoid-region",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Fragmentation"],initial:"auto",appliesto:"blockLevelElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/break-inside"},"caption-side":{syntax:"top | bottom | block-start | block-end | inline-start | inline-end",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Table"],initial:"top",appliesto:"tableCaptionElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/caption-side"},"caret-color":{syntax:"auto | <color>",media:"interactive",inherited:!0,animationType:"color",percentages:"no",groups:["CSS Basic User Interface"],initial:"auto",appliesto:"allElements",computed:"asAutoOrColor",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/caret-color"},clear:{syntax:"none | left | right | both | inline-start | inline-end",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Positioning"],initial:"none",appliesto:"blockLevelElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/clear"},clip:{syntax:"<shape> | auto",media:"visual",inherited:!1,animationType:"rectangle",percentages:"no",groups:["CSS Masking"],initial:"auto",appliesto:"absolutelyPositionedElements",computed:"autoOrRectangle",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/clip"},"clip-path":{syntax:"<clip-source> | [ <basic-shape> || <geometry-box> ] | none",media:"visual",inherited:!1,animationType:"basicShapeOtherwiseNo",percentages:"referToReferenceBoxWhenSpecifiedOtherwiseBorderBox",groups:["CSS Masking"],initial:"none",appliesto:"allElementsSVGContainerElements",computed:"asSpecifiedURLsAbsolute",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/clip-path"},color:{syntax:"<color>",media:"visual",inherited:!0,animationType:"color",percentages:"no",groups:["CSS Color"],initial:"variesFromBrowserToBrowser",appliesto:"allElements",computed:"translucentValuesRGBAOtherwiseRGB",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/color"},"color-adjust":{syntax:"economy | exact",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Color"],initial:"economy",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/color-adjust"},"column-count":{syntax:"<integer> | auto",media:"visual",inherited:!1,animationType:"integer",percentages:"no",groups:["CSS Columns"],initial:"auto",appliesto:"blockContainersExceptTableWrappers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/column-count"},"column-fill":{syntax:"auto | balance | balance-all",media:"visualInContinuousMediaNoEffectInOverflowColumns",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Columns"],initial:"balance",appliesto:"multicolElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/column-fill"},"column-gap":{syntax:"normal | <length-percentage>",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfContentArea",groups:["CSS Box Alignment"],initial:"normal",appliesto:"multiColumnElementsFlexContainersGridContainers",computed:"asSpecifiedWithLengthsAbsoluteAndNormalComputingToZeroExceptMultiColumn",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/column-gap"},"column-rule":{syntax:"<'column-rule-width'> || <'column-rule-style'> || <'column-rule-color'>",media:"visual",inherited:!1,animationType:["column-rule-color","column-rule-style","column-rule-width"],percentages:"no",groups:["CSS Columns"],initial:["column-rule-width","column-rule-style","column-rule-color"],appliesto:"multicolElements",computed:["column-rule-color","column-rule-style","column-rule-width"],order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/column-rule"},"column-rule-color":{syntax:"<color>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Columns"],initial:"currentcolor",appliesto:"multicolElements",computed:"computedColor",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/column-rule-color"},"column-rule-style":{syntax:"<'border-style'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Columns"],initial:"none",appliesto:"multicolElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/column-rule-style"},"column-rule-width":{syntax:"<'border-width'>",media:"visual",inherited:!1,animationType:"length",percentages:"no",groups:["CSS Columns"],initial:"medium",appliesto:"multicolElements",computed:"absoluteLength0IfColumnRuleStyleNoneOrHidden",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/column-rule-width"},"column-span":{syntax:"none | all",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Columns"],initial:"none",appliesto:"inFlowBlockLevelElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/column-span"},"column-width":{syntax:"<length> | auto",media:"visual",inherited:!1,animationType:"length",percentages:"no",groups:["CSS Columns"],initial:"auto",appliesto:"blockContainersExceptTableWrappers",computed:"absoluteLengthZeroOrLarger",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/column-width"},columns:{syntax:"<'column-width'> || <'column-count'>",media:"visual",inherited:!1,animationType:["column-width","column-count"],percentages:"no",groups:["CSS Columns"],initial:["column-width","column-count"],appliesto:"blockContainersExceptTableWrappers",computed:["column-width","column-count"],order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/columns"},contain:{syntax:"none | strict | content | [ size || layout || style || paint ]",media:"all",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Containment"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/contain"},content:{syntax:"normal | none | [ <content-replacement> | <content-list> ] [/ <string> ]?",media:"all",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Generated Content"],initial:"normal",appliesto:"beforeAndAfterPseudos",computed:"normalOnElementsForPseudosNoneAbsoluteURIStringOrAsSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/content"},"counter-increment":{syntax:"[ <custom-ident> <integer>? ]+ | none",media:"all",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Counter Styles"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/counter-increment"},"counter-reset":{syntax:"[ <custom-ident> <integer>? ]+ | none",media:"all",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Counter Styles"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/counter-reset"},"counter-set":{syntax:"[ <custom-ident> <integer>? ]+ | none",media:"all",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Counter Styles"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/counter-set"},cursor:{syntax:"[ [ <url> [ <x> <y> ]? , ]* [ auto | default | none | context-menu | help | pointer | progress | wait | cell | crosshair | text | vertical-text | alias | copy | move | no-drop | not-allowed | e-resize | n-resize | ne-resize | nw-resize | s-resize | se-resize | sw-resize | w-resize | ew-resize | ns-resize | nesw-resize | nwse-resize | col-resize | row-resize | all-scroll | zoom-in | zoom-out | grab | grabbing ] ]",media:["visual","interactive"],inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Basic User Interface"],initial:"auto",appliesto:"allElements",computed:"asSpecifiedURLsAbsolute",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/cursor"},direction:{syntax:"ltr | rtl",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Writing Modes"],initial:"ltr",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/direction"},display:{syntax:"[ <display-outside> || <display-inside> ] | <display-listitem> | <display-internal> | <display-box> | <display-legacy>",media:"all",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Display"],initial:"inline",appliesto:"allElements",computed:"asSpecifiedExceptPositionedFloatingAndRootElementsKeywordMaybeDifferent",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/display"},"empty-cells":{syntax:"show | hide",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Table"],initial:"show",appliesto:"tableCellElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/empty-cells"},filter:{syntax:"none | <filter-function-list>",media:"visual",inherited:!1,animationType:"filterList",percentages:"no",groups:["Filter Effects"],initial:"none",appliesto:"allElementsSVGContainerElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/filter"},flex:{syntax:"none | [ <'flex-grow'> <'flex-shrink'>? || <'flex-basis'> ]",media:"visual",inherited:!1,animationType:["flex-grow","flex-shrink","flex-basis"],percentages:"no",groups:["CSS Flexible Box Layout"],initial:["flex-grow","flex-shrink","flex-basis"],appliesto:"flexItemsAndInFlowPseudos",computed:["flex-grow","flex-shrink","flex-basis"],order:"orderOfAppearance",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/flex"},"flex-basis":{syntax:"content | <'width'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToFlexContainersInnerMainSize",groups:["CSS Flexible Box Layout"],initial:"auto",appliesto:"flexItemsAndInFlowPseudos",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"lengthOrPercentageBeforeKeywordIfBothPresent",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/flex-basis"},"flex-direction":{syntax:"row | row-reverse | column | column-reverse",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Flexible Box Layout"],initial:"row",appliesto:"flexContainers",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/flex-direction"},"flex-flow":{syntax:"<'flex-direction'> || <'flex-wrap'>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Flexible Box Layout"],initial:["flex-direction","flex-wrap"],appliesto:"flexContainers",computed:["flex-direction","flex-wrap"],order:"orderOfAppearance",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/flex-flow"},"flex-grow":{syntax:"<number>",media:"visual",inherited:!1,animationType:"number",percentages:"no",groups:["CSS Flexible Box Layout"],initial:"0",appliesto:"flexItemsAndInFlowPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/flex-grow"},"flex-shrink":{syntax:"<number>",media:"visual",inherited:!1,animationType:"number",percentages:"no",groups:["CSS Flexible Box Layout"],initial:"1",appliesto:"flexItemsAndInFlowPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/flex-shrink"},"flex-wrap":{syntax:"nowrap | wrap | wrap-reverse",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Flexible Box Layout"],initial:"nowrap",appliesto:"flexContainers",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/flex-wrap"},float:{syntax:"left | right | none | inline-start | inline-end",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Positioning"],initial:"none",appliesto:"allElementsNoEffectIfDisplayNone",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/float"},font:{syntax:"[ [ <'font-style'> || <font-variant-css21> || <'font-weight'> || <'font-stretch'> ]? <'font-size'> [ / <'line-height'> ]? <'font-family'> ] | caption | icon | menu | message-box | small-caption | status-bar",media:"visual",inherited:!0,animationType:["font-style","font-variant","font-weight","font-stretch","font-size","line-height","font-family"],percentages:["font-size","line-height"],groups:["CSS Fonts"],initial:["font-style","font-variant","font-weight","font-stretch","font-size","line-height","font-family"],appliesto:"allElements",computed:["font-style","font-variant","font-weight","font-stretch","font-size","line-height","font-family"],order:"orderOfAppearance",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font"},"font-family":{syntax:"[ <family-name> | <generic-family> ]#",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"dependsOnUserAgent",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-family"},"font-feature-settings":{syntax:"normal | <feature-tag-value>#",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-feature-settings"},"font-kerning":{syntax:"auto | normal | none",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-kerning"},"font-language-override":{syntax:"normal | <string>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-language-override"},"font-optical-sizing":{syntax:"auto | none",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-optical-sizing"},"font-variation-settings":{syntax:"normal | [ <string> <number> ]#",media:"visual",inherited:!0,animationType:"transform",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-variation-settings"},"font-size":{syntax:"<absolute-size> | <relative-size> | <length-percentage>",media:"visual",inherited:!0,animationType:"length",percentages:"referToParentElementsFontSize",groups:["CSS Fonts"],initial:"medium",appliesto:"allElements",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-size"},"font-size-adjust":{syntax:"none | <number>",media:"visual",inherited:!0,animationType:"number",percentages:"no",groups:["CSS Fonts"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-size-adjust"},"font-smooth":{syntax:"auto | never | always | <absolute-size> | <length>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-smooth"},"font-stretch":{syntax:"<font-stretch-absolute>",media:"visual",inherited:!0,animationType:"fontStretch",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-stretch"},"font-style":{syntax:"normal | italic | oblique <angle>?",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-style"},"font-synthesis":{syntax:"none | [ weight || style ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"weight style",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-synthesis"},"font-variant":{syntax:"normal | none | [ <common-lig-values> || <discretionary-lig-values> || <historical-lig-values> || <contextual-alt-values> || stylistic( <feature-value-name> ) || historical-forms || styleset( <feature-value-name># ) || character-variant( <feature-value-name># ) || swash( <feature-value-name> ) || ornaments( <feature-value-name> ) || annotation( <feature-value-name> ) || [ small-caps | all-small-caps | petite-caps | all-petite-caps | unicase | titling-caps ] || <numeric-figure-values> || <numeric-spacing-values> || <numeric-fraction-values> || ordinal || slashed-zero || <east-asian-variant-values> || <east-asian-width-values> || ruby ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-variant"},"font-variant-alternates":{syntax:"normal | [ stylistic( <feature-value-name> ) || historical-forms || styleset( <feature-value-name># ) || character-variant( <feature-value-name># ) || swash( <feature-value-name> ) || ornaments( <feature-value-name> ) || annotation( <feature-value-name> ) ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-variant-alternates"},"font-variant-caps":{syntax:"normal | small-caps | all-small-caps | petite-caps | all-petite-caps | unicase | titling-caps",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-variant-caps"},"font-variant-east-asian":{syntax:"normal | [ <east-asian-variant-values> || <east-asian-width-values> || ruby ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-variant-east-asian"},"font-variant-ligatures":{syntax:"normal | none | [ <common-lig-values> || <discretionary-lig-values> || <historical-lig-values> || <contextual-alt-values> ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-variant-ligatures"},"font-variant-numeric":{syntax:"normal | [ <numeric-figure-values> || <numeric-spacing-values> || <numeric-fraction-values> || ordinal || slashed-zero ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-variant-numeric"},"font-variant-position":{syntax:"normal | sub | super",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-variant-position"},"font-weight":{syntax:"<font-weight-absolute> | bolder | lighter",media:"visual",inherited:!0,animationType:"fontWeight",percentages:"no",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"keywordOrNumericalValueBolderLighterTransformedToRealValue",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/font-weight"},gap:{syntax:"<'row-gap'> <'column-gap'>?",media:"visual",inherited:!1,animationType:["row-gap","column-gap"],percentages:"no",groups:["CSS Box Alignment"],initial:["row-gap","column-gap"],appliesto:"multiColumnElementsFlexContainersGridContainers",computed:["row-gap","column-gap"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/gap"},grid:{syntax:"<'grid-template'> | <'grid-template-rows'> / [ auto-flow && dense? ] <'grid-auto-columns'>? | [ auto-flow && dense? ] <'grid-auto-rows'>? / <'grid-template-columns'>",media:"visual",inherited:!1,animationType:"discrete",percentages:["grid-template-rows","grid-template-columns","grid-auto-rows","grid-auto-columns"],groups:["CSS Grid Layout"],initial:["grid-template-rows","grid-template-columns","grid-template-areas","grid-auto-rows","grid-auto-columns","grid-auto-flow","grid-column-gap","grid-row-gap","column-gap","row-gap"],appliesto:"gridContainers",computed:["grid-template-rows","grid-template-columns","grid-template-areas","grid-auto-rows","grid-auto-columns","grid-auto-flow","grid-column-gap","grid-row-gap","column-gap","row-gap"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid"},"grid-area":{syntax:"<grid-line> [ / <grid-line> ]{0,3}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:["grid-row-start","grid-column-start","grid-row-end","grid-column-end"],appliesto:"gridItemsAndBoxesWithinGridContainer",computed:["grid-row-start","grid-column-start","grid-row-end","grid-column-end"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-area"},"grid-auto-columns":{syntax:"<track-size>+",media:"visual",inherited:!1,animationType:"discrete",percentages:"referToDimensionOfContentArea",groups:["CSS Grid Layout"],initial:"auto",appliesto:"gridContainers",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-auto-columns"},"grid-auto-flow":{syntax:"[ row | column ] || dense",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:"row",appliesto:"gridContainers",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-auto-flow"},"grid-auto-rows":{syntax:"<track-size>+",media:"visual",inherited:!1,animationType:"discrete",percentages:"referToDimensionOfContentArea",groups:["CSS Grid Layout"],initial:"auto",appliesto:"gridContainers",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-auto-rows"},"grid-column":{syntax:"<grid-line> [ / <grid-line> ]?",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:["grid-column-start","grid-column-end"],appliesto:"gridItemsAndBoxesWithinGridContainer",computed:["grid-column-start","grid-column-end"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-column"},"grid-column-end":{syntax:"<grid-line>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:"auto",appliesto:"gridItemsAndBoxesWithinGridContainer",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-column-end"},"grid-column-gap":{syntax:"<length-percentage>",media:"visual",inherited:!1,animationType:"length",percentages:"referToDimensionOfContentArea",groups:["CSS Grid Layout"],initial:"0",appliesto:"gridContainers",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/column-gap"},"grid-column-start":{syntax:"<grid-line>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:"auto",appliesto:"gridItemsAndBoxesWithinGridContainer",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-column-start"},"grid-gap":{syntax:"<'grid-row-gap'> <'grid-column-gap'>?",media:"visual",inherited:!1,animationType:["grid-row-gap","grid-column-gap"],percentages:"no",groups:["CSS Grid Layout"],initial:["grid-row-gap","grid-column-gap"],appliesto:"gridContainers",computed:["grid-row-gap","grid-column-gap"],order:"uniqueOrder",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/gap"},"grid-row":{syntax:"<grid-line> [ / <grid-line> ]?",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:["grid-row-start","grid-row-end"],appliesto:"gridItemsAndBoxesWithinGridContainer",computed:["grid-row-start","grid-row-end"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-row"},"grid-row-end":{syntax:"<grid-line>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:"auto",appliesto:"gridItemsAndBoxesWithinGridContainer",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-row-end"},"grid-row-gap":{syntax:"<length-percentage>",media:"visual",inherited:!1,animationType:"length",percentages:"referToDimensionOfContentArea",groups:["CSS Grid Layout"],initial:"0",appliesto:"gridContainers",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/row-gap"},"grid-row-start":{syntax:"<grid-line>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:"auto",appliesto:"gridItemsAndBoxesWithinGridContainer",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-row-start"},"grid-template":{syntax:"none | [ <'grid-template-rows'> / <'grid-template-columns'> ] | [ <line-names>? <string> <track-size>? <line-names>? ]+ [ / <explicit-track-list> ]?",media:"visual",inherited:!1,animationType:"discrete",percentages:["grid-template-columns","grid-template-rows"],groups:["CSS Grid Layout"],initial:["grid-template-columns","grid-template-rows","grid-template-areas"],appliesto:"gridContainers",computed:["grid-template-columns","grid-template-rows","grid-template-areas"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-template"},"grid-template-areas":{syntax:"none | <string>+",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:"none",appliesto:"gridContainers",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-template-areas"},"grid-template-columns":{syntax:"none | <track-list> | <auto-track-list> | subgrid <line-name-list>?",media:"visual",inherited:!1,animationType:"simpleListOfLpcDifferenceLpc",percentages:"referToDimensionOfContentArea",groups:["CSS Grid Layout"],initial:"none",appliesto:"gridContainers",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-template-columns"},"grid-template-rows":{syntax:"none | <track-list> | <auto-track-list> | subgrid <line-name-list>?",media:"visual",inherited:!1,animationType:"simpleListOfLpcDifferenceLpc",percentages:"referToDimensionOfContentArea",groups:["CSS Grid Layout"],initial:"none",appliesto:"gridContainers",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/grid-template-rows"},"hanging-punctuation":{syntax:"none | [ first || [ force-end | allow-end ] || last ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/hanging-punctuation"},height:{syntax:"auto | <length> | <percentage> | min-content | max-content | fit-content(<length-percentage>)",media:"visual",inherited:!1,animationType:"lpc",percentages:"regardingHeightOfGeneratedBoxContainingBlockPercentagesRelativeToContainingBlock",groups:["CSS Box Model"],initial:"auto",appliesto:"allElementsButNonReplacedAndTableColumns",computed:"percentageAutoOrAbsoluteLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/height"},hyphens:{syntax:"none | manual | auto",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"manual",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/hyphens"},"image-orientation":{syntax:"from-image | <angle> | [ <angle>? flip ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Images"],initial:"from-image",appliesto:"allElements",computed:"angleRoundedToNextQuarter",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/image-orientation"},"image-rendering":{syntax:"auto | crisp-edges | pixelated",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Images"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/image-rendering"},"image-resolution":{syntax:"[ from-image || <resolution> ] && snap?",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Images"],initial:"1dppx",appliesto:"allElements",computed:"asSpecifiedWithExceptionOfResolution",order:"uniqueOrder",status:"experimental"},"ime-mode":{syntax:"auto | normal | active | inactive | disabled",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Basic User Interface"],initial:"auto",appliesto:"textFields",computed:"asSpecified",order:"uniqueOrder",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/ime-mode"},"initial-letter":{syntax:"normal | [ <number> <integer>? ]",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Inline"],initial:"normal",appliesto:"firstLetterPseudoElementsAndInlineLevelFirstChildren",computed:"asSpecified",order:"uniqueOrder",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/initial-letter"},"initial-letter-align":{syntax:"[ auto | alphabetic | hanging | ideographic ]",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Inline"],initial:"auto",appliesto:"firstLetterPseudoElementsAndInlineLevelFirstChildren",computed:"asSpecified",order:"uniqueOrder",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/initial-letter-align"},"inline-size":{syntax:"<'width'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"inlineSizeOfContainingBlock",groups:["CSS Logical Properties"],initial:"auto",appliesto:"sameAsWidthAndHeight",computed:"sameAsWidthAndHeight",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/inline-size"},inset:{syntax:"<'top'>{1,4}",media:"visual",inherited:!1,animationType:"lpc",percentages:"logicalHeightOfContainingBlock",groups:["CSS Logical Properties"],initial:"auto",appliesto:"positionedElements",computed:"sameAsBoxOffsets",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/inset"},"inset-block":{syntax:"<'top'>{1,2}",media:"visual",inherited:!1,animationType:"lpc",percentages:"logicalHeightOfContainingBlock",groups:["CSS Logical Properties"],initial:"auto",appliesto:"positionedElements",computed:"sameAsBoxOffsets",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/inset-block"},"inset-block-end":{syntax:"<'top'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"logicalHeightOfContainingBlock",groups:["CSS Logical Properties"],initial:"auto",appliesto:"positionedElements",computed:"sameAsBoxOffsets",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/inset-block-end"},"inset-block-start":{syntax:"<'top'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"logicalHeightOfContainingBlock",groups:["CSS Logical Properties"],initial:"auto",appliesto:"positionedElements",computed:"sameAsBoxOffsets",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/inset-block-start"},"inset-inline":{syntax:"<'top'>{1,2}",media:"visual",inherited:!1,animationType:"lpc",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"auto",appliesto:"positionedElements",computed:"sameAsBoxOffsets",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/inset-inline"},"inset-inline-end":{syntax:"<'top'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"auto",appliesto:"positionedElements",computed:"sameAsBoxOffsets",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/inset-inline-end"},"inset-inline-start":{syntax:"<'top'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"auto",appliesto:"positionedElements",computed:"sameAsBoxOffsets",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/inset-inline-start"},isolation:{syntax:"auto | isolate",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Compositing and Blending"],initial:"auto",appliesto:"allElementsSVGContainerGraphicsAndGraphicsReferencingElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/isolation"},"justify-content":{syntax:"normal | <content-distribution> | <overflow-position>? [ <content-position> | left | right ]",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Alignment"],initial:"normal",appliesto:"flexContainers",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/justify-content"},"justify-items":{syntax:"normal | stretch | <baseline-position> | <overflow-position>? [ <self-position> | left | right ] | legacy | legacy && [ left | right | center ]",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Alignment"],initial:"legacy",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/justify-items"},"justify-self":{syntax:"auto | normal | stretch | <baseline-position> | <overflow-position>? [ <self-position> | left | right ]",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Alignment"],initial:"auto",appliesto:"blockLevelBoxesAndAbsolutelyPositionedBoxesAndGridItems",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/justify-self"},"justify-tracks":{syntax:"[ normal | <content-distribution> | <overflow-position>? [ <content-position> | left | right ] ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:"normal",appliesto:"gridContainersWithMasonryLayoutInTheirInlineAxis",computed:"asSpecified",order:"uniqueOrder",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/justify-tracks"},left:{syntax:"<length> | <percentage> | auto",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToWidthOfContainingBlock",groups:["CSS Positioning"],initial:"auto",appliesto:"positionedElements",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/left"},"letter-spacing":{syntax:"normal | <length>",media:"visual",inherited:!0,animationType:"length",percentages:"no",groups:["CSS Text"],initial:"normal",appliesto:"allElements",computed:"optimumValueOfAbsoluteLengthOrNormal",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/letter-spacing"},"line-break":{syntax:"auto | loose | normal | strict | anywhere",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/line-break"},"line-clamp":{syntax:"none | <integer>",media:"visual",inherited:!1,animationType:"integer",percentages:"no",groups:["CSS Overflow"],initial:"none",appliesto:"blockContainersExceptMultiColumnContainers",computed:"asSpecified",order:"perGrammar",status:"experimental"},"line-height":{syntax:"normal | <number> | <length> | <percentage>",media:"visual",inherited:!0,animationType:"numberOrLength",percentages:"referToElementFontSize",groups:["CSS Fonts"],initial:"normal",appliesto:"allElements",computed:"absoluteLengthOrAsSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/line-height"},"line-height-step":{syntax:"<length>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fonts"],initial:"0",appliesto:"blockContainers",computed:"absoluteLength",order:"perGrammar",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/line-height-step"},"list-style":{syntax:"<'list-style-type'> || <'list-style-position'> || <'list-style-image'>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Lists and Counters"],initial:["list-style-type","list-style-position","list-style-image"],appliesto:"listItems",computed:["list-style-image","list-style-position","list-style-type"],order:"orderOfAppearance",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/list-style"},"list-style-image":{syntax:"<url> | none",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Lists and Counters"],initial:"none",appliesto:"listItems",computed:"noneOrImageWithAbsoluteURI",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/list-style-image"},"list-style-position":{syntax:"inside | outside",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Lists and Counters"],initial:"outside",appliesto:"listItems",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/list-style-position"},"list-style-type":{syntax:"<counter-style> | <string> | none",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Lists and Counters"],initial:"disc",appliesto:"listItems",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/list-style-type"},margin:{syntax:"[ <length> | <percentage> | auto ]{1,4}",media:"visual",inherited:!1,animationType:"length",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:["margin-bottom","margin-left","margin-right","margin-top"],appliesto:"allElementsExceptTableDisplayTypes",computed:["margin-bottom","margin-left","margin-right","margin-top"],order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin"},"margin-block":{syntax:"<'margin-left'>{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"dependsOnLayoutModel",groups:["CSS Logical Properties"],initial:"0",appliesto:"sameAsMargin",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-block"},"margin-block-end":{syntax:"<'margin-left'>",media:"visual",inherited:!1,animationType:"length",percentages:"dependsOnLayoutModel",groups:["CSS Logical Properties"],initial:"0",appliesto:"sameAsMargin",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-block-end"},"margin-block-start":{syntax:"<'margin-left'>",media:"visual",inherited:!1,animationType:"length",percentages:"dependsOnLayoutModel",groups:["CSS Logical Properties"],initial:"0",appliesto:"sameAsMargin",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-block-start"},"margin-bottom":{syntax:"<length> | <percentage> | auto",media:"visual",inherited:!1,animationType:"length",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"0",appliesto:"allElementsExceptTableDisplayTypes",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-bottom"},"margin-inline":{syntax:"<'margin-left'>{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"dependsOnLayoutModel",groups:["CSS Logical Properties"],initial:"0",appliesto:"sameAsMargin",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-inline"},"margin-inline-end":{syntax:"<'margin-left'>",media:"visual",inherited:!1,animationType:"length",percentages:"dependsOnLayoutModel",groups:["CSS Logical Properties"],initial:"0",appliesto:"sameAsMargin",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-inline-end"},"margin-inline-start":{syntax:"<'margin-left'>",media:"visual",inherited:!1,animationType:"length",percentages:"dependsOnLayoutModel",groups:["CSS Logical Properties"],initial:"0",appliesto:"sameAsMargin",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-inline-start"},"margin-left":{syntax:"<length> | <percentage> | auto",media:"visual",inherited:!1,animationType:"length",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"0",appliesto:"allElementsExceptTableDisplayTypes",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-left"},"margin-right":{syntax:"<length> | <percentage> | auto",media:"visual",inherited:!1,animationType:"length",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"0",appliesto:"allElementsExceptTableDisplayTypes",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-right"},"margin-top":{syntax:"<length> | <percentage> | auto",media:"visual",inherited:!1,animationType:"length",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"0",appliesto:"allElementsExceptTableDisplayTypes",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-top"},"margin-trim":{syntax:"none | in-flow | all",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Model"],initial:"none",appliesto:"blockContainersAndMultiColumnContainers",computed:"asSpecified",order:"perGrammar",alsoAppliesTo:["::first-letter","::first-line"],status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/margin-trim"},mask:{syntax:"<mask-layer>#",media:"visual",inherited:!1,animationType:["mask-image","mask-mode","mask-repeat","mask-position","mask-clip","mask-origin","mask-size","mask-composite"],percentages:["mask-position"],groups:["CSS Masking"],initial:["mask-image","mask-mode","mask-repeat","mask-position","mask-clip","mask-origin","mask-size","mask-composite"],appliesto:"allElementsSVGContainerElements",computed:["mask-image","mask-mode","mask-repeat","mask-position","mask-clip","mask-origin","mask-size","mask-composite"],order:"perGrammar",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask"},"mask-border":{syntax:"<'mask-border-source'> || <'mask-border-slice'> [ / <'mask-border-width'>? [ / <'mask-border-outset'> ]? ]? || <'mask-border-repeat'> || <'mask-border-mode'>",media:"visual",inherited:!1,animationType:["mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width"],percentages:["mask-border-slice","mask-border-width"],groups:["CSS Masking"],initial:["mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width"],appliesto:"allElementsSVGContainerElements",computed:["mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width"],order:"perGrammar",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-border"},"mask-border-mode":{syntax:"luminance | alpha",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"alpha",appliesto:"allElementsSVGContainerElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-border-mode"},"mask-border-outset":{syntax:"[ <length> | <number> ]{1,4}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"0",appliesto:"allElementsSVGContainerElements",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-border-outset"},"mask-border-repeat":{syntax:"[ stretch | repeat | round | space ]{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"stretch",appliesto:"allElementsSVGContainerElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-border-repeat"},"mask-border-slice":{syntax:"<number-percentage>{1,4} fill?",media:"visual",inherited:!1,animationType:"discrete",percentages:"referToSizeOfMaskBorderImage",groups:["CSS Masking"],initial:"0",appliesto:"allElementsSVGContainerElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-border-slice"},"mask-border-source":{syntax:"none | <image>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"none",appliesto:"allElementsSVGContainerElements",computed:"asSpecifiedURLsAbsolute",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-border-source"},"mask-border-width":{syntax:"[ <length-percentage> | <number> | auto ]{1,4}",media:"visual",inherited:!1,animationType:"discrete",percentages:"relativeToMaskBorderImageArea",groups:["CSS Masking"],initial:"auto",appliesto:"allElementsSVGContainerElements",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-border-width"},"mask-clip":{syntax:"[ <geometry-box> | no-clip ]#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"border-box",appliesto:"allElementsSVGContainerElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-clip"},"mask-composite":{syntax:"<compositing-operator>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"add",appliesto:"allElementsSVGContainerElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-composite"},"mask-image":{syntax:"<mask-reference>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"none",appliesto:"allElementsSVGContainerElements",computed:"asSpecifiedURLsAbsolute",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-image"},"mask-mode":{syntax:"<masking-mode>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"match-source",appliesto:"allElementsSVGContainerElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-mode"},"mask-origin":{syntax:"<geometry-box>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"border-box",appliesto:"allElementsSVGContainerElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-origin"},"mask-position":{syntax:"<position>#",media:"visual",inherited:!1,animationType:"repeatableListOfSimpleListOfLpc",percentages:"referToSizeOfMaskPaintingArea",groups:["CSS Masking"],initial:"center",appliesto:"allElementsSVGContainerElements",computed:"consistsOfTwoKeywordsForOriginAndOffsets",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-position"},"mask-repeat":{syntax:"<repeat-style>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"no-repeat",appliesto:"allElementsSVGContainerElements",computed:"consistsOfTwoDimensionKeywords",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-repeat"},"mask-size":{syntax:"<bg-size>#",media:"visual",inherited:!1,animationType:"repeatableListOfSimpleListOfLpc",percentages:"no",groups:["CSS Masking"],initial:"auto",appliesto:"allElementsSVGContainerElements",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-size"},"mask-type":{syntax:"luminance | alpha",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Masking"],initial:"luminance",appliesto:"maskElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mask-type"},"masonry-auto-flow":{syntax:"[ pack | next ] || [ definite-first | ordered ]",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Grid Layout"],initial:"pack",appliesto:"gridContainersWithMasonryLayout",computed:"asSpecified",order:"uniqueOrder",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/masonry-auto-flow"},"math-style":{syntax:"normal | compact",media:"visual",inherited:!0,animationType:"notAnimatable",percentages:"no",groups:["MathML"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/math-style"},"max-block-size":{syntax:"<'max-width'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"blockSizeOfContainingBlock",groups:["CSS Logical Properties"],initial:"0",appliesto:"sameAsWidthAndHeight",computed:"sameAsMaxWidthAndMaxHeight",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/max-block-size"},"max-height":{syntax:"none | <length-percentage> | min-content | max-content | fit-content(<length-percentage>)",media:"visual",inherited:!1,animationType:"lpc",percentages:"regardingHeightOfGeneratedBoxContainingBlockPercentagesNone",groups:["CSS Box Model"],initial:"none",appliesto:"allElementsButNonReplacedAndTableColumns",computed:"percentageAsSpecifiedAbsoluteLengthOrNone",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/max-height"},"max-inline-size":{syntax:"<'max-width'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"inlineSizeOfContainingBlock",groups:["CSS Logical Properties"],initial:"0",appliesto:"sameAsWidthAndHeight",computed:"sameAsMaxWidthAndMaxHeight",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/max-inline-size"},"max-lines":{syntax:"none | <integer>",media:"visual",inherited:!1,animationType:"integer",percentages:"no",groups:["CSS Overflow"],initial:"none",appliesto:"blockContainersExceptMultiColumnContainers",computed:"asSpecified",order:"perGrammar",status:"experimental"},"max-width":{syntax:"none | <length-percentage> | min-content | max-content | fit-content(<length-percentage>)",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"none",appliesto:"allElementsButNonReplacedAndTableRows",computed:"percentageAsSpecifiedAbsoluteLengthOrNone",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/max-width"},"min-block-size":{syntax:"<'min-width'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"blockSizeOfContainingBlock",groups:["CSS Logical Properties"],initial:"0",appliesto:"sameAsWidthAndHeight",computed:"sameAsMinWidthAndMinHeight",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/min-block-size"},"min-height":{syntax:"auto | <length> | <percentage> | min-content | max-content | fit-content(<length-percentage>)",media:"visual",inherited:!1,animationType:"lpc",percentages:"regardingHeightOfGeneratedBoxContainingBlockPercentages0",groups:["CSS Box Model"],initial:"auto",appliesto:"allElementsButNonReplacedAndTableColumns",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/min-height"},"min-inline-size":{syntax:"<'min-width'>",media:"visual",inherited:!1,animationType:"lpc",percentages:"inlineSizeOfContainingBlock",groups:["CSS Logical Properties"],initial:"0",appliesto:"sameAsWidthAndHeight",computed:"sameAsMinWidthAndMinHeight",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/min-inline-size"},"min-width":{syntax:"auto | <length> | <percentage> | min-content | max-content | fit-content(<length-percentage>)",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"auto",appliesto:"allElementsButNonReplacedAndTableRows",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/min-width"},"mix-blend-mode":{syntax:"<blend-mode>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Compositing and Blending"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/mix-blend-mode"},"object-fit":{syntax:"fill | contain | cover | none | scale-down",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Images"],initial:"fill",appliesto:"replacedElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/object-fit"},"object-position":{syntax:"<position>",media:"visual",inherited:!0,animationType:"repeatableListOfSimpleListOfLpc",percentages:"referToWidthAndHeightOfElement",groups:["CSS Images"],initial:"50% 50%",appliesto:"replacedElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/object-position"},offset:{syntax:"[ <'offset-position'>? [ <'offset-path'> [ <'offset-distance'> || <'offset-rotate'> ]? ]? ]! [ / <'offset-anchor'> ]?",media:"visual",inherited:!1,animationType:["offset-position","offset-path","offset-distance","offset-anchor","offset-rotate"],percentages:["offset-position","offset-distance","offset-anchor"],groups:["CSS Motion Path"],initial:["offset-position","offset-path","offset-distance","offset-anchor","offset-rotate"],appliesto:"transformableElements",computed:["offset-position","offset-path","offset-distance","offset-anchor","offset-rotate"],order:"perGrammar",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/offset"},"offset-anchor":{syntax:"auto | <position>",media:"visual",inherited:!1,animationType:"position",percentages:"relativeToWidthAndHeight",groups:["CSS Motion Path"],initial:"auto",appliesto:"transformableElements",computed:"forLengthAbsoluteValueOtherwisePercentage",order:"perGrammar",status:"standard"},"offset-distance":{syntax:"<length-percentage>",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToTotalPathLength",groups:["CSS Motion Path"],initial:"0",appliesto:"transformableElements",computed:"forLengthAbsoluteValueOtherwisePercentage",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/offset-distance"},"offset-path":{syntax:"none | ray( [ <angle> && <size> && contain? ] ) | <path()> | <url> | [ <basic-shape> || <geometry-box> ]",media:"visual",inherited:!1,animationType:"angleOrBasicShapeOrPath",percentages:"no",groups:["CSS Motion Path"],initial:"none",appliesto:"transformableElements",computed:"asSpecified",order:"perGrammar",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/offset-path"},"offset-position":{syntax:"auto | <position>",media:"visual",inherited:!1,animationType:"position",percentages:"referToSizeOfContainingBlock",groups:["CSS Motion Path"],initial:"auto",appliesto:"transformableElements",computed:"forLengthAbsoluteValueOtherwisePercentage",order:"perGrammar",status:"experimental"},"offset-rotate":{syntax:"[ auto | reverse ] || <angle>",media:"visual",inherited:!1,animationType:"angleOrBasicShapeOrPath",percentages:"no",groups:["CSS Motion Path"],initial:"auto",appliesto:"transformableElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/offset-rotate"},opacity:{syntax:"<alpha-value>",media:"visual",inherited:!1,animationType:"number",percentages:"no",groups:["CSS Color"],initial:"1.0",appliesto:"allElements",computed:"specifiedValueClipped0To1",order:"uniqueOrder",alsoAppliesTo:["::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/opacity"},order:{syntax:"<integer>",media:"visual",inherited:!1,animationType:"integer",percentages:"no",groups:["CSS Flexible Box Layout"],initial:"0",appliesto:"flexItemsGridItemsAbsolutelyPositionedContainerChildren",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/order"},orphans:{syntax:"<integer>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fragmentation"],initial:"2",appliesto:"blockContainerElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/orphans"},outline:{syntax:"[ <'outline-color'> || <'outline-style'> || <'outline-width'> ]",media:["visual","interactive"],inherited:!1,animationType:["outline-color","outline-width","outline-style"],percentages:"no",groups:["CSS Basic User Interface"],initial:["outline-color","outline-style","outline-width"],appliesto:"allElements",computed:["outline-color","outline-width","outline-style"],order:"orderOfAppearance",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/outline"},"outline-color":{syntax:"<color> | invert",media:["visual","interactive"],inherited:!1,animationType:"color",percentages:"no",groups:["CSS Basic User Interface"],initial:"invertOrCurrentColor",appliesto:"allElements",computed:"invertForTranslucentColorRGBAOtherwiseRGB",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/outline-color"},"outline-offset":{syntax:"<length>",media:["visual","interactive"],inherited:!1,animationType:"length",percentages:"no",groups:["CSS Basic User Interface"],initial:"0",appliesto:"allElements",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/outline-offset"},"outline-style":{syntax:"auto | <'border-style'>",media:["visual","interactive"],inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Basic User Interface"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/outline-style"},"outline-width":{syntax:"<line-width>",media:["visual","interactive"],inherited:!1,animationType:"length",percentages:"no",groups:["CSS Basic User Interface"],initial:"medium",appliesto:"allElements",computed:"absoluteLength0ForNone",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/outline-width"},overflow:{syntax:"[ visible | hidden | clip | scroll | auto ]{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Overflow"],initial:"visible",appliesto:"blockContainersFlexContainersGridContainers",computed:["overflow-x","overflow-y"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/overflow"},"overflow-anchor":{syntax:"auto | none",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Scroll Anchoring"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard"},"overflow-block":{syntax:"visible | hidden | clip | scroll | auto",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Overflow"],initial:"auto",appliesto:"blockContainersFlexContainersGridContainers",computed:"asSpecifiedButVisibleOrClipReplacedToAutoOrHiddenIfOtherValueDifferent",order:"perGrammar",status:"standard"},"overflow-clip-box":{syntax:"padding-box | content-box",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Mozilla Extensions"],initial:"padding-box",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Mozilla/CSS/overflow-clip-box"},"overflow-inline":{syntax:"visible | hidden | clip | scroll | auto",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Overflow"],initial:"auto",appliesto:"blockContainersFlexContainersGridContainers",computed:"asSpecifiedButVisibleOrClipReplacedToAutoOrHiddenIfOtherValueDifferent",order:"perGrammar",status:"standard"},"overflow-wrap":{syntax:"normal | break-word | anywhere",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"normal",appliesto:"nonReplacedInlineElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/overflow-wrap"},"overflow-x":{syntax:"visible | hidden | clip | scroll | auto",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Overflow"],initial:"visible",appliesto:"blockContainersFlexContainersGridContainers",computed:"asSpecifiedButVisibleOrClipReplacedToAutoOrHiddenIfOtherValueDifferent",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/overflow-x"},"overflow-y":{syntax:"visible | hidden | clip | scroll | auto",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Overflow"],initial:"visible",appliesto:"blockContainersFlexContainersGridContainers",computed:"asSpecifiedButVisibleOrClipReplacedToAutoOrHiddenIfOtherValueDifferent",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/overflow-y"},"overscroll-behavior":{syntax:"[ contain | none | auto ]{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Model"],initial:"auto",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/overscroll-behavior"},"overscroll-behavior-block":{syntax:"contain | none | auto",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Model"],initial:"auto",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/overscroll-behavior-block"},"overscroll-behavior-inline":{syntax:"contain | none | auto",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Model"],initial:"auto",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/overscroll-behavior-inline"},"overscroll-behavior-x":{syntax:"contain | none | auto",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Model"],initial:"auto",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/overscroll-behavior-x"},"overscroll-behavior-y":{syntax:"contain | none | auto",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Model"],initial:"auto",appliesto:"nonReplacedBlockAndInlineBlockElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/overscroll-behavior-y"},padding:{syntax:"[ <length> | <percentage> ]{1,4}",media:"visual",inherited:!1,animationType:"length",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:["padding-bottom","padding-left","padding-right","padding-top"],appliesto:"allElementsExceptInternalTableDisplayTypes",computed:["padding-bottom","padding-left","padding-right","padding-top"],order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding"},"padding-block":{syntax:"<'padding-left'>{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"0",appliesto:"allElements",computed:"asLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding-block"},"padding-block-end":{syntax:"<'padding-left'>",media:"visual",inherited:!1,animationType:"length",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"0",appliesto:"allElements",computed:"asLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding-block-end"},"padding-block-start":{syntax:"<'padding-left'>",media:"visual",inherited:!1,animationType:"length",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"0",appliesto:"allElements",computed:"asLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding-block-start"},"padding-bottom":{syntax:"<length> | <percentage>",media:"visual",inherited:!1,animationType:"length",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"0",appliesto:"allElementsExceptInternalTableDisplayTypes",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding-bottom"},"padding-inline":{syntax:"<'padding-left'>{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"0",appliesto:"allElements",computed:"asLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding-inline"},"padding-inline-end":{syntax:"<'padding-left'>",media:"visual",inherited:!1,animationType:"length",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"0",appliesto:"allElements",computed:"asLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding-inline-end"},"padding-inline-start":{syntax:"<'padding-left'>",media:"visual",inherited:!1,animationType:"length",percentages:"logicalWidthOfContainingBlock",groups:["CSS Logical Properties"],initial:"0",appliesto:"allElements",computed:"asLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding-inline-start"},"padding-left":{syntax:"<length> | <percentage>",media:"visual",inherited:!1,animationType:"length",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"0",appliesto:"allElementsExceptInternalTableDisplayTypes",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding-left"},"padding-right":{syntax:"<length> | <percentage>",media:"visual",inherited:!1,animationType:"length",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"0",appliesto:"allElementsExceptInternalTableDisplayTypes",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding-right"},"padding-top":{syntax:"<length> | <percentage>",media:"visual",inherited:!1,animationType:"length",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"0",appliesto:"allElementsExceptInternalTableDisplayTypes",computed:"percentageAsSpecifiedOrAbsoluteLength",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/padding-top"},"page-break-after":{syntax:"auto | always | avoid | left | right | recto | verso",media:["visual","paged"],inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Pages"],initial:"auto",appliesto:"blockElementsInNormalFlow",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/page-break-after"},"page-break-before":{syntax:"auto | always | avoid | left | right | recto | verso",media:["visual","paged"],inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Pages"],initial:"auto",appliesto:"blockElementsInNormalFlow",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/page-break-before"},"page-break-inside":{syntax:"auto | avoid",media:["visual","paged"],inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Pages"],initial:"auto",appliesto:"blockElementsInNormalFlow",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/page-break-inside"},"paint-order":{syntax:"normal | [ fill || stroke || markers ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"normal",appliesto:"textElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/paint-order"},perspective:{syntax:"none | <length>",media:"visual",inherited:!1,animationType:"length",percentages:"no",groups:["CSS Transforms"],initial:"none",appliesto:"transformableElements",computed:"absoluteLengthOrNone",order:"uniqueOrder",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/perspective"},"perspective-origin":{syntax:"<position>",media:"visual",inherited:!1,animationType:"simpleListOfLpc",percentages:"referToSizeOfBoundingBox",groups:["CSS Transforms"],initial:"50% 50%",appliesto:"transformableElements",computed:"forLengthAbsoluteValueOtherwisePercentage",order:"oneOrTwoValuesLengthAbsoluteKeywordsPercentages",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/perspective-origin"},"place-content":{syntax:"<'align-content'> <'justify-content'>?",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Alignment"],initial:"normal",appliesto:"multilineFlexContainers",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/place-content"},"place-items":{syntax:"<'align-items'> <'justify-items'>?",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Alignment"],initial:["align-items","justify-items"],appliesto:"allElements",computed:["align-items","justify-items"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/place-items"},"place-self":{syntax:"<'align-self'> <'justify-self'>?",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Box Alignment"],initial:["align-self","justify-self"],appliesto:"blockLevelBoxesAndAbsolutelyPositionedBoxesAndGridItems",computed:["align-self","justify-self"],order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/place-self"},"pointer-events":{syntax:"auto | none | visiblePainted | visibleFill | visibleStroke | visible | painted | fill | stroke | all | inherit",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["Pointer Events"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/pointer-events"},position:{syntax:"static | relative | absolute | sticky | fixed",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Positioning"],initial:"static",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/position"},quotes:{syntax:"none | auto | [ <string> <string> ]+",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Generated Content"],initial:"dependsOnUserAgent",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/quotes"},resize:{syntax:"none | both | horizontal | vertical | block | inline",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Basic User Interface"],initial:"none",appliesto:"elementsWithOverflowNotVisibleAndReplacedElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/resize"},right:{syntax:"<length> | <percentage> | auto",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToWidthOfContainingBlock",groups:["CSS Positioning"],initial:"auto",appliesto:"positionedElements",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/right"},rotate:{syntax:"none | <angle> | [ x | y | z | <number>{3} ] && <angle>",media:"visual",inherited:!1,animationType:"transform",percentages:"no",groups:["CSS Transforms"],initial:"none",appliesto:"transformableElements",computed:"asSpecified",order:"perGrammar",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/rotate"},"row-gap":{syntax:"normal | <length-percentage>",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToDimensionOfContentArea",groups:["CSS Box Alignment"],initial:"normal",appliesto:"multiColumnElementsFlexContainersGridContainers",computed:"asSpecifiedWithLengthsAbsoluteAndNormalComputingToZeroExceptMultiColumn",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/row-gap"},"ruby-align":{syntax:"start | center | space-between | space-around",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Ruby"],initial:"space-around",appliesto:"rubyBasesAnnotationsBaseAnnotationContainers",computed:"asSpecified",order:"uniqueOrder",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/ruby-align"},"ruby-merge":{syntax:"separate | collapse | auto",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Ruby"],initial:"separate",appliesto:"rubyAnnotationsContainers",computed:"asSpecified",order:"uniqueOrder",status:"experimental"},"ruby-position":{syntax:"over | under | inter-character",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Ruby"],initial:"over",appliesto:"rubyAnnotationsContainers",computed:"asSpecified",order:"uniqueOrder",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/ruby-position"},scale:{syntax:"none | <number>{1,3}",media:"visual",inherited:!1,animationType:"transform",percentages:"no",groups:["CSS Transforms"],initial:"none",appliesto:"transformableElements",computed:"asSpecified",order:"perGrammar",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scale"},"scrollbar-color":{syntax:"auto | dark | light | <color>{2}",media:"visual",inherited:!0,animationType:"color",percentages:"no",groups:["CSS Scrollbars"],initial:"auto",appliesto:"scrollingBoxes",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scrollbar-color"},"scrollbar-gutter":{syntax:"auto | [ stable | always ] && both? && force?",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Overflow"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scrollbar-gutter"},"scrollbar-width":{syntax:"auto | thin | none",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Scrollbars"],initial:"auto",appliesto:"scrollingBoxes",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scrollbar-width"},"scroll-behavior":{syntax:"auto | smooth",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSSOM View"],initial:"auto",appliesto:"scrollingBoxes",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-behavior"},"scroll-margin":{syntax:"<length>{1,4}",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin"},"scroll-margin-block":{syntax:"<length>{1,2}",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin-block"},"scroll-margin-block-start":{syntax:"<length>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin-block-start"},"scroll-margin-block-end":{syntax:"<length>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin-block-end"},"scroll-margin-bottom":{syntax:"<length>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin-bottom"},"scroll-margin-inline":{syntax:"<length>{1,2}",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin-inline"},"scroll-margin-inline-start":{syntax:"<length>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin-inline-start"},"scroll-margin-inline-end":{syntax:"<length>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin-inline-end"},"scroll-margin-left":{syntax:"<length>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin-left"},"scroll-margin-right":{syntax:"<length>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin-right"},"scroll-margin-top":{syntax:"<length>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"no",groups:["CSS Scroll Snap"],initial:"0",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-margin-top"},"scroll-padding":{syntax:"[ auto | <length-percentage> ]{1,4}",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding"},"scroll-padding-block":{syntax:"[ auto | <length-percentage> ]{1,2}",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding-block"},"scroll-padding-block-start":{syntax:"auto | <length-percentage>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding-block-start"},"scroll-padding-block-end":{syntax:"auto | <length-percentage>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding-block-end"},"scroll-padding-bottom":{syntax:"auto | <length-percentage>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding-bottom"},"scroll-padding-inline":{syntax:"[ auto | <length-percentage> ]{1,2}",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding-inline"},"scroll-padding-inline-start":{syntax:"auto | <length-percentage>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding-inline-start"},"scroll-padding-inline-end":{syntax:"auto | <length-percentage>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding-inline-end"},"scroll-padding-left":{syntax:"auto | <length-percentage>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding-left"},"scroll-padding-right":{syntax:"auto | <length-percentage>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding-right"},"scroll-padding-top":{syntax:"auto | <length-percentage>",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"relativeToTheScrollContainersScrollport",groups:["CSS Scroll Snap"],initial:"auto",appliesto:"scrollContainers",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-padding-top"},"scroll-snap-align":{syntax:"[ none | start | end | center ]{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Scroll Snap"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-snap-align"},"scroll-snap-coordinate":{syntax:"none | <position>#",media:"interactive",inherited:!1,animationType:"position",percentages:"referToBorderBox",groups:["CSS Scroll Snap"],initial:"none",appliesto:"allElements",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-snap-coordinate"},"scroll-snap-destination":{syntax:"<position>",media:"interactive",inherited:!1,animationType:"position",percentages:"relativeToScrollContainerPaddingBoxAxis",groups:["CSS Scroll Snap"],initial:"0px 0px",appliesto:"scrollContainers",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-snap-destination"},"scroll-snap-points-x":{syntax:"none | repeat( <length-percentage> )",media:"interactive",inherited:!1,animationType:"discrete",percentages:"relativeToScrollContainerPaddingBoxAxis",groups:["CSS Scroll Snap"],initial:"none",appliesto:"scrollContainers",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-snap-points-x"},"scroll-snap-points-y":{syntax:"none | repeat( <length-percentage> )",media:"interactive",inherited:!1,animationType:"discrete",percentages:"relativeToScrollContainerPaddingBoxAxis",groups:["CSS Scroll Snap"],initial:"none",appliesto:"scrollContainers",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-snap-points-y"},"scroll-snap-stop":{syntax:"normal | always",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Scroll Snap"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-snap-stop"},"scroll-snap-type":{syntax:"none | [ x | y | block | inline | both ] [ mandatory | proximity ]?",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Scroll Snap"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-snap-type"},"scroll-snap-type-x":{syntax:"none | mandatory | proximity",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Scroll Snap"],initial:"none",appliesto:"scrollContainers",computed:"asSpecified",order:"uniqueOrder",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-snap-type-x"},"scroll-snap-type-y":{syntax:"none | mandatory | proximity",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Scroll Snap"],initial:"none",appliesto:"scrollContainers",computed:"asSpecified",order:"uniqueOrder",status:"obsolete",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/scroll-snap-type-y"},"shape-image-threshold":{syntax:"<alpha-value>",media:"visual",inherited:!1,animationType:"number",percentages:"no",groups:["CSS Shapes"],initial:"0.0",appliesto:"floats",computed:"specifiedValueNumberClipped0To1",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/shape-image-threshold"},"shape-margin":{syntax:"<length-percentage>",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToWidthOfContainingBlock",groups:["CSS Shapes"],initial:"0",appliesto:"floats",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/shape-margin"},"shape-outside":{syntax:"none | <shape-box> || <basic-shape> | <image>",media:"visual",inherited:!1,animationType:"basicShapeOtherwiseNo",percentages:"no",groups:["CSS Shapes"],initial:"none",appliesto:"floats",computed:"asDefinedForBasicShapeWithAbsoluteURIOtherwiseAsSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/shape-outside"},"tab-size":{syntax:"<integer> | <length>",media:"visual",inherited:!0,animationType:"length",percentages:"no",groups:["CSS Text"],initial:"8",appliesto:"blockContainers",computed:"specifiedIntegerOrAbsoluteLength",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/tab-size"},"table-layout":{syntax:"auto | fixed",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Table"],initial:"auto",appliesto:"tableElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/table-layout"},"text-align":{syntax:"start | end | left | right | center | justify | match-parent",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"startOrNamelessValueIfLTRRightIfRTL",appliesto:"blockContainers",computed:"asSpecifiedExceptMatchParent",order:"orderOfAppearance",alsoAppliesTo:["::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-align"},"text-align-last":{syntax:"auto | start | end | left | right | center | justify",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"auto",appliesto:"blockContainers",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-align-last"},"text-combine-upright":{syntax:"none | all | [ digits <integer>? ]",media:"visual",inherited:!0,animationType:"notAnimatable",percentages:"no",groups:["CSS Writing Modes"],initial:"none",appliesto:"nonReplacedInlineElements",computed:"keywordPlusIntegerIfDigits",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-combine-upright"},"text-decoration":{syntax:"<'text-decoration-line'> || <'text-decoration-style'> || <'text-decoration-color'> || <'text-decoration-thickness'>",media:"visual",inherited:!1,animationType:["text-decoration-color","text-decoration-style","text-decoration-line","text-decoration-thickness"],percentages:"no",groups:["CSS Text Decoration"],initial:["text-decoration-color","text-decoration-style","text-decoration-line"],appliesto:"allElements",computed:["text-decoration-line","text-decoration-style","text-decoration-color","text-decoration-thickness"],order:"orderOfAppearance",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-decoration"},"text-decoration-color":{syntax:"<color>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Text Decoration"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-decoration-color"},"text-decoration-line":{syntax:"none | [ underline || overline || line-through || blink ] | spelling-error | grammar-error",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Text Decoration"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-decoration-line"},"text-decoration-skip":{syntax:"none | [ objects || [ spaces | [ leading-spaces || trailing-spaces ] ] || edges || box-decoration ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text Decoration"],initial:"objects",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-decoration-skip"},"text-decoration-skip-ink":{syntax:"auto | all | none",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text Decoration"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-decoration-skip-ink"},"text-decoration-style":{syntax:"solid | double | dotted | dashed | wavy",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Text Decoration"],initial:"solid",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-decoration-style"},"text-decoration-thickness":{syntax:"auto | from-font | <length> | <percentage> ",media:"visual",inherited:!1,animationType:"byComputedValueType",percentages:"referToElementFontSize",groups:["CSS Text Decoration"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-decoration-thickness"},"text-emphasis":{syntax:"<'text-emphasis-style'> || <'text-emphasis-color'>",media:"visual",inherited:!1,animationType:["text-emphasis-color","text-emphasis-style"],percentages:"no",groups:["CSS Text Decoration"],initial:["text-emphasis-style","text-emphasis-color"],appliesto:"allElements",computed:["text-emphasis-style","text-emphasis-color"],order:"orderOfAppearance",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-emphasis"},"text-emphasis-color":{syntax:"<color>",media:"visual",inherited:!1,animationType:"color",percentages:"no",groups:["CSS Text Decoration"],initial:"currentcolor",appliesto:"allElements",computed:"computedColor",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-emphasis-color"},"text-emphasis-position":{syntax:"[ over | under ] && [ right | left ]",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Text Decoration"],initial:"over right",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-emphasis-position"},"text-emphasis-style":{syntax:"none | [ [ filled | open ] || [ dot | circle | double-circle | triangle | sesame ] ] | <string>",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Text Decoration"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-emphasis-style"},"text-indent":{syntax:"<length-percentage> && hanging? && each-line?",media:"visual",inherited:!0,animationType:"lpc",percentages:"referToWidthOfContainingBlock",groups:["CSS Text"],initial:"0",appliesto:"blockContainers",computed:"percentageOrAbsoluteLengthPlusKeywords",order:"lengthOrPercentageBeforeKeywords",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-indent"},"text-justify":{syntax:"auto | inter-character | inter-word | none",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"auto",appliesto:"inlineLevelAndTableCellElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-justify"},"text-orientation":{syntax:"mixed | upright | sideways",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Writing Modes"],initial:"mixed",appliesto:"allElementsExceptTableRowGroupsRowsColumnGroupsAndColumns",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-orientation"},"text-overflow":{syntax:"[ clip | ellipsis | <string> ]{1,2}",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Basic User Interface"],initial:"clip",appliesto:"blockContainerElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-overflow"},"text-rendering":{syntax:"auto | optimizeSpeed | optimizeLegibility | geometricPrecision",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Miscellaneous"],initial:"auto",appliesto:"textElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-rendering"},"text-shadow":{syntax:"none | <shadow-t>#",media:"visual",inherited:!0,animationType:"shadowList",percentages:"no",groups:["CSS Text Decoration"],initial:"none",appliesto:"allElements",computed:"colorPlusThreeAbsoluteLengths",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-shadow"},"text-size-adjust":{syntax:"none | auto | <percentage>",media:"visual",inherited:!0,animationType:"discrete",percentages:"referToSizeOfFont",groups:["CSS Text"],initial:"autoForSmartphoneBrowsersSupportingInflation",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"experimental",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-size-adjust"},"text-transform":{syntax:"none | capitalize | uppercase | lowercase | full-width | full-size-kana",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"none",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-transform"},"text-underline-offset":{syntax:"auto | <length> | <percentage> ",media:"visual",inherited:!0,animationType:"byComputedValueType",percentages:"referToElementFontSize",groups:["CSS Text Decoration"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-underline-offset"},"text-underline-position":{syntax:"auto | from-font | [ under || [ left | right ] ]",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text Decoration"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"orderOfAppearance",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/text-underline-position"},top:{syntax:"<length> | <percentage> | auto",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToContainingBlockHeight",groups:["CSS Positioning"],initial:"auto",appliesto:"positionedElements",computed:"lengthAbsolutePercentageAsSpecifiedOtherwiseAuto",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/top"},"touch-action":{syntax:"auto | none | [ [ pan-x | pan-left | pan-right ] || [ pan-y | pan-up | pan-down ] || pinch-zoom ] | manipulation",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["Pointer Events"],initial:"auto",appliesto:"allElementsExceptNonReplacedInlineElementsTableRowsColumnsRowColumnGroups",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/touch-action"},transform:{syntax:"none | <transform-list>",media:"visual",inherited:!1,animationType:"transform",percentages:"referToSizeOfBoundingBox",groups:["CSS Transforms"],initial:"none",appliesto:"transformableElements",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"uniqueOrder",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/transform"},"transform-box":{syntax:"content-box | border-box | fill-box | stroke-box | view-box",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Transforms"],initial:"view-box",appliesto:"transformableElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/transform-box"},"transform-origin":{syntax:"[ <length-percentage> | left | center | right | top | bottom ] | [ [ <length-percentage> | left | center | right ] && [ <length-percentage> | top | center | bottom ] ] <length>?",media:"visual",inherited:!1,animationType:"simpleListOfLpc",percentages:"referToSizeOfBoundingBox",groups:["CSS Transforms"],initial:"50% 50% 0",appliesto:"transformableElements",computed:"forLengthAbsoluteValueOtherwisePercentage",order:"oneOrTwoValuesLengthAbsoluteKeywordsPercentages",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/transform-origin"},"transform-style":{syntax:"flat | preserve-3d",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Transforms"],initial:"flat",appliesto:"transformableElements",computed:"asSpecified",order:"uniqueOrder",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/transform-style"},transition:{syntax:"<single-transition>#",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Transitions"],initial:["transition-delay","transition-duration","transition-property","transition-timing-function"],appliesto:"allElementsAndPseudos",computed:["transition-delay","transition-duration","transition-property","transition-timing-function"],order:"orderOfAppearance",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/transition"},"transition-delay":{syntax:"<time>#",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Transitions"],initial:"0s",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/transition-delay"},"transition-duration":{syntax:"<time>#",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Transitions"],initial:"0s",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/transition-duration"},"transition-property":{syntax:"none | <single-transition-property>#",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Transitions"],initial:"all",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/transition-property"},"transition-timing-function":{syntax:"<timing-function>#",media:"interactive",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Transitions"],initial:"ease",appliesto:"allElementsAndPseudos",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/transition-timing-function"},translate:{syntax:"none | <length-percentage> [ <length-percentage> <length>? ]?",media:"visual",inherited:!1,animationType:"transform",percentages:"referToSizeOfBoundingBox",groups:["CSS Transforms"],initial:"none",appliesto:"transformableElements",computed:"asSpecifiedRelativeToAbsoluteLengths",order:"perGrammar",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/translate"},"unicode-bidi":{syntax:"normal | embed | isolate | bidi-override | isolate-override | plaintext",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Writing Modes"],initial:"normal",appliesto:"allElementsSomeValuesNoEffectOnNonInlineElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/unicode-bidi"},"user-select":{syntax:"auto | text | none | contain | all",media:"visual",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Basic User Interface"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/user-select"},"vertical-align":{syntax:"baseline | sub | super | text-top | text-bottom | middle | top | bottom | <percentage> | <length>",media:"visual",inherited:!1,animationType:"length",percentages:"referToLineHeight",groups:["CSS Table"],initial:"baseline",appliesto:"inlineLevelAndTableCellElements",computed:"absoluteLengthOrKeyword",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/vertical-align"},visibility:{syntax:"visible | hidden | collapse",media:"visual",inherited:!0,animationType:"visibility",percentages:"no",groups:["CSS Box Model"],initial:"visible",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/visibility"},"white-space":{syntax:"normal | pre | nowrap | pre-wrap | pre-line | break-spaces",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/white-space"},widows:{syntax:"<integer>",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Fragmentation"],initial:"2",appliesto:"blockContainerElements",computed:"asSpecified",order:"perGrammar",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/widows"},width:{syntax:"auto | <length> | <percentage> | min-content | max-content | fit-content(<length-percentage>)",media:"visual",inherited:!1,animationType:"lpc",percentages:"referToWidthOfContainingBlock",groups:["CSS Box Model"],initial:"auto",appliesto:"allElementsButNonReplacedAndTableRows",computed:"percentageAutoOrAbsoluteLength",order:"lengthOrPercentageBeforeKeywordIfBothPresent",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/width"},"will-change":{syntax:"auto | <animateable-feature>#",media:"all",inherited:!1,animationType:"discrete",percentages:"no",groups:["CSS Will Change"],initial:"auto",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/will-change"},"word-break":{syntax:"normal | break-all | keep-all | break-word",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/word-break"},"word-spacing":{syntax:"normal | <length-percentage>",media:"visual",inherited:!0,animationType:"length",percentages:"referToWidthOfAffectedGlyph",groups:["CSS Text"],initial:"normal",appliesto:"allElements",computed:"optimumMinAndMaxValueOfAbsoluteLengthPercentageOrNormal",order:"uniqueOrder",alsoAppliesTo:["::first-letter","::first-line","::placeholder"],status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/word-spacing"},"word-wrap":{syntax:"normal | break-word",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Text"],initial:"normal",appliesto:"nonReplacedInlineElements",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/overflow-wrap"},"writing-mode":{syntax:"horizontal-tb | vertical-rl | vertical-lr | sideways-rl | sideways-lr",media:"visual",inherited:!0,animationType:"discrete",percentages:"no",groups:["CSS Writing Modes"],initial:"horizontal-tb",appliesto:"allElementsExceptTableRowColumnGroupsTableRowsColumns",computed:"asSpecified",order:"uniqueOrder",status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/writing-mode"},"z-index":{syntax:"auto | <integer>",media:"visual",inherited:!1,animationType:"integer",percentages:"no",groups:["CSS Positioning"],initial:"auto",appliesto:"positionedElements",computed:"asSpecified",order:"uniqueOrder",stacking:!0,status:"standard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/z-index"},zoom:{syntax:"normal | reset | <number> | <percentage>",media:"visual",inherited:!1,animationType:"integer",percentages:"no",groups:["Microsoft Extensions"],initial:"normal",appliesto:"allElements",computed:"asSpecified",order:"uniqueOrder",status:"nonstandard",mdn_url:"https://developer.mozilla.org/docs/Web/CSS/zoom"}}});var Cx=D((Ij,uF)=>{uF.exports={"absolute-size":{syntax:"xx-small | x-small | small | medium | large | x-large | xx-large | xxx-large"},"alpha-value":{syntax:"<number> | <percentage>"},"angle-percentage":{syntax:"<angle> | <percentage>"},"angular-color-hint":{syntax:"<angle-percentage>"},"angular-color-stop":{syntax:"<color> && <color-stop-angle>?"},"angular-color-stop-list":{syntax:"[ <angular-color-stop> [, <angular-color-hint>]? ]# , <angular-color-stop>"},"animateable-feature":{syntax:"scroll-position | contents | <custom-ident>"},attachment:{syntax:"scroll | fixed | local"},"attr()":{syntax:"attr( <attr-name> <type-or-unit>? [, <attr-fallback> ]? )"},"attr-matcher":{syntax:"[ '~' | '|' | '^' | '$' | '*' ]? '='"},"attr-modifier":{syntax:"i | s"},"attribute-selector":{syntax:"'[' <wq-name> ']' | '[' <wq-name> <attr-matcher> [ <string-token> | <ident-token> ] <attr-modifier>? ']'"},"auto-repeat":{syntax:"repeat( [ auto-fill | auto-fit ] , [ <line-names>? <fixed-size> ]+ <line-names>? )"},"auto-track-list":{syntax:`[ <line-names>? [ <fixed-size> | <fixed-repeat> ] ]* <line-names>? <auto-repeat>
[ <line-names>? [ <fixed-size> | <fixed-repeat> ] ]* <line-names>?`},"baseline-position":{syntax:"[ first | last ]? baseline"},"basic-shape":{syntax:"<inset()> | <circle()> | <ellipse()> | <polygon()> | <path()>"},"bg-image":{syntax:"none | <image>"},"bg-layer":{syntax:"<bg-image> || <bg-position> [ / <bg-size> ]? || <repeat-style> || <attachment> || <box> || <box>"},"bg-position":{syntax:"[ [ left | center | right | top | bottom | <length-percentage> ] | [ left | center | right | <length-percentage> ] [ top | center | bottom | <length-percentage> ] | [ center | [ left | right ] <length-percentage>? ] && [ center | [ top | bottom ] <length-percentage>? ] ]"},"bg-size":{syntax:"[ <length-percentage> | auto ]{1,2} | cover | contain"},"blur()":{syntax:"blur( <length> )"},"blend-mode":{syntax:"normal | multiply | screen | overlay | darken | lighten | color-dodge | color-burn | hard-light | soft-light | difference | exclusion | hue | saturation | color | luminosity"},box:{syntax:"border-box | padding-box | content-box"},"brightness()":{syntax:"brightness( <number-percentage> )"},"calc()":{syntax:"calc( <calc-sum> )"},"calc-sum":{syntax:"<calc-product> [ [ '+' | '-' ] <calc-product> ]*"},"calc-product":{syntax:"<calc-value> [ '*' <calc-value> | '/' <number> ]*"},"calc-value":{syntax:"<number> | <dimension> | <percentage> | ( <calc-sum> )"},"cf-final-image":{syntax:"<image> | <color>"},"cf-mixing-image":{syntax:"<percentage>? && <image>"},"circle()":{syntax:"circle( [ <shape-radius> ]? [ at <position> ]? )"},"clamp()":{syntax:"clamp( <calc-sum>#{3} )"},"class-selector":{syntax:"'.' <ident-token>"},"clip-source":{syntax:"<url>"},color:{syntax:"<rgb()> | <rgba()> | <hsl()> | <hsla()> | <hex-color> | <named-color> | currentcolor | <deprecated-system-color>"},"color-stop":{syntax:"<color-stop-length> | <color-stop-angle>"},"color-stop-angle":{syntax:"<angle-percentage>{1,2}"},"color-stop-length":{syntax:"<length-percentage>{1,2}"},"color-stop-list":{syntax:"[ <linear-color-stop> [, <linear-color-hint>]? ]# , <linear-color-stop>"},combinator:{syntax:"'>' | '+' | '~' | [ '||' ]"},"common-lig-values":{syntax:"[ common-ligatures | no-common-ligatures ]"},"compat-auto":{syntax:"searchfield | textarea | push-button | slider-horizontal | checkbox | radio | square-button | menulist | listbox | meter | progress-bar | button"},"composite-style":{syntax:"clear | copy | source-over | source-in | source-out | source-atop | destination-over | destination-in | destination-out | destination-atop | xor"},"compositing-operator":{syntax:"add | subtract | intersect | exclude"},"compound-selector":{syntax:"[ <type-selector>? <subclass-selector>* [ <pseudo-element-selector> <pseudo-class-selector>* ]* ]!"},"compound-selector-list":{syntax:"<compound-selector>#"},"complex-selector":{syntax:"<compound-selector> [ <combinator>? <compound-selector> ]*"},"complex-selector-list":{syntax:"<complex-selector>#"},"conic-gradient()":{syntax:"conic-gradient( [ from <angle> ]? [ at <position> ]?, <angular-color-stop-list> )"},"contextual-alt-values":{syntax:"[ contextual | no-contextual ]"},"content-distribution":{syntax:"space-between | space-around | space-evenly | stretch"},"content-list":{syntax:"[ <string> | contents | <image> | <quote> | <target> | <leader()> ]+"},"content-position":{syntax:"center | start | end | flex-start | flex-end"},"content-replacement":{syntax:"<image>"},"contrast()":{syntax:"contrast( [ <number-percentage> ] )"},"counter()":{syntax:"counter( <custom-ident>, <counter-style>? )"},"counter-style":{syntax:"<counter-style-name> | symbols()"},"counter-style-name":{syntax:"<custom-ident>"},"counters()":{syntax:"counters( <custom-ident>, <string>, <counter-style>? )"},"cross-fade()":{syntax:"cross-fade( <cf-mixing-image> , <cf-final-image>? )"},"cubic-bezier-timing-function":{syntax:"ease | ease-in | ease-out | ease-in-out | cubic-bezier(<number [0,1]>, <number>, <number [0,1]>, <number>)"},"deprecated-system-color":{syntax:"ActiveBorder | ActiveCaption | AppWorkspace | Background | ButtonFace | ButtonHighlight | ButtonShadow | ButtonText | CaptionText | GrayText | Highlight | HighlightText | InactiveBorder | InactiveCaption | InactiveCaptionText | InfoBackground | InfoText | Menu | MenuText | Scrollbar | ThreeDDarkShadow | ThreeDFace | ThreeDHighlight | ThreeDLightShadow | ThreeDShadow | Window | WindowFrame | WindowText"},"discretionary-lig-values":{syntax:"[ discretionary-ligatures | no-discretionary-ligatures ]"},"display-box":{syntax:"contents | none"},"display-inside":{syntax:"flow | flow-root | table | flex | grid | ruby"},"display-internal":{syntax:"table-row-group | table-header-group | table-footer-group | table-row | table-cell | table-column-group | table-column | table-caption | ruby-base | ruby-text | ruby-base-container | ruby-text-container"},"display-legacy":{syntax:"inline-block | inline-list-item | inline-table | inline-flex | inline-grid"},"display-listitem":{syntax:"<display-outside>? && [ flow | flow-root ]? && list-item"},"display-outside":{syntax:"block | inline | run-in"},"drop-shadow()":{syntax:"drop-shadow( <length>{2,3} <color>? )"},"east-asian-variant-values":{syntax:"[ jis78 | jis83 | jis90 | jis04 | simplified | traditional ]"},"east-asian-width-values":{syntax:"[ full-width | proportional-width ]"},"element()":{syntax:"element( <id-selector> )"},"ellipse()":{syntax:"ellipse( [ <shape-radius>{2} ]? [ at <position> ]? )"},"ending-shape":{syntax:"circle | ellipse"},"env()":{syntax:"env( <custom-ident> , <declaration-value>? )"},"explicit-track-list":{syntax:"[ <line-names>? <track-size> ]+ <line-names>?"},"family-name":{syntax:"<string> | <custom-ident>+"},"feature-tag-value":{syntax:"<string> [ <integer> | on | off ]?"},"feature-type":{syntax:"@stylistic | @historical-forms | @styleset | @character-variant | @swash | @ornaments | @annotation"},"feature-value-block":{syntax:"<feature-type> '{' <feature-value-declaration-list> '}'"},"feature-value-block-list":{syntax:"<feature-value-block>+"},"feature-value-declaration":{syntax:"<custom-ident>: <integer>+;"},"feature-value-declaration-list":{syntax:"<feature-value-declaration>"},"feature-value-name":{syntax:"<custom-ident>"},"fill-rule":{syntax:"nonzero | evenodd"},"filter-function":{syntax:"<blur()> | <brightness()> | <contrast()> | <drop-shadow()> | <grayscale()> | <hue-rotate()> | <invert()> | <opacity()> | <saturate()> | <sepia()>"},"filter-function-list":{syntax:"[ <filter-function> | <url> ]+"},"final-bg-layer":{syntax:"<'background-color'> || <bg-image> || <bg-position> [ / <bg-size> ]? || <repeat-style> || <attachment> || <box> || <box>"},"fit-content()":{syntax:"fit-content( [ <length> | <percentage> ] )"},"fixed-breadth":{syntax:"<length-percentage>"},"fixed-repeat":{syntax:"repeat( [ <positive-integer> ] , [ <line-names>? <fixed-size> ]+ <line-names>? )"},"fixed-size":{syntax:"<fixed-breadth> | minmax( <fixed-breadth> , <track-breadth> ) | minmax( <inflexible-breadth> , <fixed-breadth> )"},"font-stretch-absolute":{syntax:"normal | ultra-condensed | extra-condensed | condensed | semi-condensed | semi-expanded | expanded | extra-expanded | ultra-expanded | <percentage>"},"font-variant-css21":{syntax:"[ normal | small-caps ]"},"font-weight-absolute":{syntax:"normal | bold | <number [1,1000]>"},"frequency-percentage":{syntax:"<frequency> | <percentage>"},"general-enclosed":{syntax:"[ <function-token> <any-value> ) ] | ( <ident> <any-value> )"},"generic-family":{syntax:"serif | sans-serif | cursive | fantasy | monospace"},"generic-name":{syntax:"serif | sans-serif | cursive | fantasy | monospace"},"geometry-box":{syntax:"<shape-box> | fill-box | stroke-box | view-box"},gradient:{syntax:"<linear-gradient()> | <repeating-linear-gradient()> | <radial-gradient()> | <repeating-radial-gradient()> | <conic-gradient()>"},"grayscale()":{syntax:"grayscale( <number-percentage> )"},"grid-line":{syntax:"auto | <custom-ident> | [ <integer> && <custom-ident>? ] | [ span && [ <integer> || <custom-ident> ] ]"},"historical-lig-values":{syntax:"[ historical-ligatures | no-historical-ligatures ]"},"hsl()":{syntax:"hsl( <hue> <percentage> <percentage> [ / <alpha-value> ]? ) | hsl( <hue>, <percentage>, <percentage>, <alpha-value>? )"},"hsla()":{syntax:"hsla( <hue> <percentage> <percentage> [ / <alpha-value> ]? ) | hsla( <hue>, <percentage>, <percentage>, <alpha-value>? )"},hue:{syntax:"<number> | <angle>"},"hue-rotate()":{syntax:"hue-rotate( <angle> )"},"id-selector":{syntax:"<hash-token>"},image:{syntax:"<url> | <image()> | <image-set()> | <element()> | <paint()> | <cross-fade()> | <gradient>"},"image()":{syntax:"image( <image-tags>? [ <image-src>? , <color>? ]! )"},"image-set()":{syntax:"image-set( <image-set-option># )"},"image-set-option":{syntax:"[ <image> | <string> ] <resolution>"},"image-src":{syntax:"<url> | <string>"},"image-tags":{syntax:"ltr | rtl"},"inflexible-breadth":{syntax:"<length> | <percentage> | min-content | max-content | auto"},"inset()":{syntax:"inset( <length-percentage>{1,4} [ round <'border-radius'> ]? )"},"invert()":{syntax:"invert( <number-percentage> )"},"keyframes-name":{syntax:"<custom-ident> | <string>"},"keyframe-block":{syntax:`<keyframe-selector># {
  <declaration-list>
}`},"keyframe-block-list":{syntax:"<keyframe-block>+"},"keyframe-selector":{syntax:"from | to | <percentage>"},"leader()":{syntax:"leader( <leader-type> )"},"leader-type":{syntax:"dotted | solid | space | <string>"},"length-percentage":{syntax:"<length> | <percentage>"},"line-names":{syntax:"'[' <custom-ident>* ']'"},"line-name-list":{syntax:"[ <line-names> | <name-repeat> ]+"},"line-style":{syntax:"none | hidden | dotted | dashed | solid | double | groove | ridge | inset | outset"},"line-width":{syntax:"<length> | thin | medium | thick"},"linear-color-hint":{syntax:"<length-percentage>"},"linear-color-stop":{syntax:"<color> <color-stop-length>?"},"linear-gradient()":{syntax:"linear-gradient( [ <angle> | to <side-or-corner> ]? , <color-stop-list> )"},"mask-layer":{syntax:"<mask-reference> || <position> [ / <bg-size> ]? || <repeat-style> || <geometry-box> || [ <geometry-box> | no-clip ] || <compositing-operator> || <masking-mode>"},"mask-position":{syntax:"[ <length-percentage> | left | center | right ] [ <length-percentage> | top | center | bottom ]?"},"mask-reference":{syntax:"none | <image> | <mask-source>"},"mask-source":{syntax:"<url>"},"masking-mode":{syntax:"alpha | luminance | match-source"},"matrix()":{syntax:"matrix( <number>#{6} )"},"matrix3d()":{syntax:"matrix3d( <number>#{16} )"},"max()":{syntax:"max( <calc-sum># )"},"media-and":{syntax:"<media-in-parens> [ and <media-in-parens> ]+"},"media-condition":{syntax:"<media-not> | <media-and> | <media-or> | <media-in-parens>"},"media-condition-without-or":{syntax:"<media-not> | <media-and> | <media-in-parens>"},"media-feature":{syntax:"( [ <mf-plain> | <mf-boolean> | <mf-range> ] )"},"media-in-parens":{syntax:"( <media-condition> ) | <media-feature> | <general-enclosed>"},"media-not":{syntax:"not <media-in-parens>"},"media-or":{syntax:"<media-in-parens> [ or <media-in-parens> ]+"},"media-query":{syntax:"<media-condition> | [ not | only ]? <media-type> [ and <media-condition-without-or> ]?"},"media-query-list":{syntax:"<media-query>#"},"media-type":{syntax:"<ident>"},"mf-boolean":{syntax:"<mf-name>"},"mf-name":{syntax:"<ident>"},"mf-plain":{syntax:"<mf-name> : <mf-value>"},"mf-range":{syntax:`<mf-name> [ '<' | '>' ]? '='? <mf-value>
| <mf-value> [ '<' | '>' ]? '='? <mf-name>
| <mf-value> '<' '='? <mf-name> '<' '='? <mf-value>
| <mf-value> '>' '='? <mf-name> '>' '='? <mf-value>`},"mf-value":{syntax:"<number> | <dimension> | <ident> | <ratio>"},"min()":{syntax:"min( <calc-sum># )"},"minmax()":{syntax:"minmax( [ <length> | <percentage> | min-content | max-content | auto ] , [ <length> | <percentage> | <flex> | min-content | max-content | auto ] )"},"named-color":{syntax:"transparent | aliceblue | antiquewhite | aqua | aquamarine | azure | beige | bisque | black | blanchedalmond | blue | blueviolet | brown | burlywood | cadetblue | chartreuse | chocolate | coral | cornflowerblue | cornsilk | crimson | cyan | darkblue | darkcyan | darkgoldenrod | darkgray | darkgreen | darkgrey | darkkhaki | darkmagenta | darkolivegreen | darkorange | darkorchid | darkred | darksalmon | darkseagreen | darkslateblue | darkslategray | darkslategrey | darkturquoise | darkviolet | deeppink | deepskyblue | dimgray | dimgrey | dodgerblue | firebrick | floralwhite | forestgreen | fuchsia | gainsboro | ghostwhite | gold | goldenrod | gray | green | greenyellow | grey | honeydew | hotpink | indianred | indigo | ivory | khaki | lavender | lavenderblush | lawngreen | lemonchiffon | lightblue | lightcoral | lightcyan | lightgoldenrodyellow | lightgray | lightgreen | lightgrey | lightpink | lightsalmon | lightseagreen | lightskyblue | lightslategray | lightslategrey | lightsteelblue | lightyellow | lime | limegreen | linen | magenta | maroon | mediumaquamarine | mediumblue | mediumorchid | mediumpurple | mediumseagreen | mediumslateblue | mediumspringgreen | mediumturquoise | mediumvioletred | midnightblue | mintcream | mistyrose | moccasin | navajowhite | navy | oldlace | olive | olivedrab | orange | orangered | orchid | palegoldenrod | palegreen | paleturquoise | palevioletred | papayawhip | peachpuff | peru | pink | plum | powderblue | purple | rebeccapurple | red | rosybrown | royalblue | saddlebrown | salmon | sandybrown | seagreen | seashell | sienna | silver | skyblue | slateblue | slategray | slategrey | snow | springgreen | steelblue | tan | teal | thistle | tomato | turquoise | violet | wheat | white | whitesmoke | yellow | yellowgreen"},"namespace-prefix":{syntax:"<ident>"},"ns-prefix":{syntax:"[ <ident-token> | '*' ]? '|'"},"number-percentage":{syntax:"<number> | <percentage>"},"numeric-figure-values":{syntax:"[ lining-nums | oldstyle-nums ]"},"numeric-fraction-values":{syntax:"[ diagonal-fractions | stacked-fractions ]"},"numeric-spacing-values":{syntax:"[ proportional-nums | tabular-nums ]"},nth:{syntax:"<an-plus-b> | even | odd"},"opacity()":{syntax:"opacity( [ <number-percentage> ] )"},"overflow-position":{syntax:"unsafe | safe"},"outline-radius":{syntax:"<length> | <percentage>"},"page-body":{syntax:"<declaration>? [ ; <page-body> ]? | <page-margin-box> <page-body>"},"page-margin-box":{syntax:"<page-margin-box-type> '{' <declaration-list> '}'"},"page-margin-box-type":{syntax:"@top-left-corner | @top-left | @top-center | @top-right | @top-right-corner | @bottom-left-corner | @bottom-left | @bottom-center | @bottom-right | @bottom-right-corner | @left-top | @left-middle | @left-bottom | @right-top | @right-middle | @right-bottom"},"page-selector-list":{syntax:"[ <page-selector># ]?"},"page-selector":{syntax:"<pseudo-page>+ | <ident> <pseudo-page>*"},"path()":{syntax:"path( [ <fill-rule>, ]? <string> )"},"paint()":{syntax:"paint( <ident>, <declaration-value>? )"},"perspective()":{syntax:"perspective( <length> )"},"polygon()":{syntax:"polygon( <fill-rule>? , [ <length-percentage> <length-percentage> ]# )"},position:{syntax:"[ [ left | center | right ] || [ top | center | bottom ] | [ left | center | right | <length-percentage> ] [ top | center | bottom | <length-percentage> ]? | [ [ left | right ] <length-percentage> ] && [ [ top | bottom ] <length-percentage> ] ]"},"pseudo-class-selector":{syntax:"':' <ident-token> | ':' <function-token> <any-value> ')'"},"pseudo-element-selector":{syntax:"':' <pseudo-class-selector>"},"pseudo-page":{syntax:": [ left | right | first | blank ]"},quote:{syntax:"open-quote | close-quote | no-open-quote | no-close-quote"},"radial-gradient()":{syntax:"radial-gradient( [ <ending-shape> || <size> ]? [ at <position> ]? , <color-stop-list> )"},"relative-selector":{syntax:"<combinator>? <complex-selector>"},"relative-selector-list":{syntax:"<relative-selector>#"},"relative-size":{syntax:"larger | smaller"},"repeat-style":{syntax:"repeat-x | repeat-y | [ repeat | space | round | no-repeat ]{1,2}"},"repeating-linear-gradient()":{syntax:"repeating-linear-gradient( [ <angle> | to <side-or-corner> ]? , <color-stop-list> )"},"repeating-radial-gradient()":{syntax:"repeating-radial-gradient( [ <ending-shape> || <size> ]? [ at <position> ]? , <color-stop-list> )"},"rgb()":{syntax:"rgb( <percentage>{3} [ / <alpha-value> ]? ) | rgb( <number>{3} [ / <alpha-value> ]? ) | rgb( <percentage>#{3} , <alpha-value>? ) | rgb( <number>#{3} , <alpha-value>? )"},"rgba()":{syntax:"rgba( <percentage>{3} [ / <alpha-value> ]? ) | rgba( <number>{3} [ / <alpha-value> ]? ) | rgba( <percentage>#{3} , <alpha-value>? ) | rgba( <number>#{3} , <alpha-value>? )"},"rotate()":{syntax:"rotate( [ <angle> | <zero> ] )"},"rotate3d()":{syntax:"rotate3d( <number> , <number> , <number> , [ <angle> | <zero> ] )"},"rotateX()":{syntax:"rotateX( [ <angle> | <zero> ] )"},"rotateY()":{syntax:"rotateY( [ <angle> | <zero> ] )"},"rotateZ()":{syntax:"rotateZ( [ <angle> | <zero> ] )"},"saturate()":{syntax:"saturate( <number-percentage> )"},"scale()":{syntax:"scale( <number> , <number>? )"},"scale3d()":{syntax:"scale3d( <number> , <number> , <number> )"},"scaleX()":{syntax:"scaleX( <number> )"},"scaleY()":{syntax:"scaleY( <number> )"},"scaleZ()":{syntax:"scaleZ( <number> )"},"self-position":{syntax:"center | start | end | self-start | self-end | flex-start | flex-end"},"shape-radius":{syntax:"<length-percentage> | closest-side | farthest-side"},"skew()":{syntax:"skew( [ <angle> | <zero> ] , [ <angle> | <zero> ]? )"},"skewX()":{syntax:"skewX( [ <angle> | <zero> ] )"},"skewY()":{syntax:"skewY( [ <angle> | <zero> ] )"},"sepia()":{syntax:"sepia( <number-percentage> )"},shadow:{syntax:"inset? && <length>{2,4} && <color>?"},"shadow-t":{syntax:"[ <length>{2,3} && <color>? ]"},shape:{syntax:"rect(<top>, <right>, <bottom>, <left>)"},"shape-box":{syntax:"<box> | margin-box"},"side-or-corner":{syntax:"[ left | right ] || [ top | bottom ]"},"single-animation":{syntax:"<time> || <timing-function> || <time> || <single-animation-iteration-count> || <single-animation-direction> || <single-animation-fill-mode> || <single-animation-play-state> || [ none | <keyframes-name> ]"},"single-animation-direction":{syntax:"normal | reverse | alternate | alternate-reverse"},"single-animation-fill-mode":{syntax:"none | forwards | backwards | both"},"single-animation-iteration-count":{syntax:"infinite | <number>"},"single-animation-play-state":{syntax:"running | paused"},"single-transition":{syntax:"[ none | <single-transition-property> ] || <time> || <timing-function> || <time>"},"single-transition-property":{syntax:"all | <custom-ident>"},size:{syntax:"closest-side | farthest-side | closest-corner | farthest-corner | <length> | <length-percentage>{2}"},"step-position":{syntax:"jump-start | jump-end | jump-none | jump-both | start | end"},"step-timing-function":{syntax:"step-start | step-end | steps(<integer>[, <step-position>]?)"},"subclass-selector":{syntax:"<id-selector> | <class-selector> | <attribute-selector> | <pseudo-class-selector>"},"supports-condition":{syntax:"not <supports-in-parens> | <supports-in-parens> [ and <supports-in-parens> ]* | <supports-in-parens> [ or <supports-in-parens> ]*"},"supports-in-parens":{syntax:"( <supports-condition> ) | <supports-feature> | <general-enclosed>"},"supports-feature":{syntax:"<supports-decl> | <supports-selector-fn>"},"supports-decl":{syntax:"( <declaration> )"},"supports-selector-fn":{syntax:"selector( <complex-selector> )"},symbol:{syntax:"<string> | <image> | <custom-ident>"},target:{syntax:"<target-counter()> | <target-counters()> | <target-text()>"},"target-counter()":{syntax:"target-counter( [ <string> | <url> ] , <custom-ident> , <counter-style>? )"},"target-counters()":{syntax:"target-counters( [ <string> | <url> ] , <custom-ident> , <string> , <counter-style>? )"},"target-text()":{syntax:"target-text( [ <string> | <url> ] , [ content | before | after | first-letter ]? )"},"time-percentage":{syntax:"<time> | <percentage>"},"timing-function":{syntax:"linear | <cubic-bezier-timing-function> | <step-timing-function>"},"track-breadth":{syntax:"<length-percentage> | <flex> | min-content | max-content | auto"},"track-list":{syntax:"[ <line-names>? [ <track-size> | <track-repeat> ] ]+ <line-names>?"},"track-repeat":{syntax:"repeat( [ <positive-integer> ] , [ <line-names>? <track-size> ]+ <line-names>? )"},"track-size":{syntax:"<track-breadth> | minmax( <inflexible-breadth> , <track-breadth> ) | fit-content( [ <length> | <percentage> ] )"},"transform-function":{syntax:"<matrix()> | <translate()> | <translateX()> | <translateY()> | <scale()> | <scaleX()> | <scaleY()> | <rotate()> | <skew()> | <skewX()> | <skewY()> | <matrix3d()> | <translate3d()> | <translateZ()> | <scale3d()> | <scaleZ()> | <rotate3d()> | <rotateX()> | <rotateY()> | <rotateZ()> | <perspective()>"},"transform-list":{syntax:"<transform-function>+"},"translate()":{syntax:"translate( <length-percentage> , <length-percentage>? )"},"translate3d()":{syntax:"translate3d( <length-percentage> , <length-percentage> , <length> )"},"translateX()":{syntax:"translateX( <length-percentage> )"},"translateY()":{syntax:"translateY( <length-percentage> )"},"translateZ()":{syntax:"translateZ( <length> )"},"type-or-unit":{syntax:"string | color | url | integer | number | length | angle | time | frequency | cap | ch | em | ex | ic | lh | rlh | rem | vb | vi | vw | vh | vmin | vmax | mm | Q | cm | in | pt | pc | px | deg | grad | rad | turn | ms | s | Hz | kHz | %"},"type-selector":{syntax:"<wq-name> | <ns-prefix>? '*'"},"var()":{syntax:"var( <custom-property-name> , <declaration-value>? )"},"viewport-length":{syntax:"auto | <length-percentage>"},"wq-name":{syntax:"<ns-prefix>? <ident-token>"}}});var kx=D((Oj,cF)=>{cF.exports={atrules:{charset:{prelude:"<string>"},"font-face":{descriptors:{"unicode-range":{comment:"replaces <unicode-range>, an old production name",syntax:"<urange>#"}}}},properties:{"-moz-background-clip":{comment:"deprecated syntax in old Firefox, https://developer.mozilla.org/en/docs/Web/CSS/background-clip",syntax:"padding | border"},"-moz-border-radius-bottomleft":{comment:"https://developer.mozilla.org/en-US/docs/Web/CSS/border-bottom-left-radius",syntax:"<'border-bottom-left-radius'>"},"-moz-border-radius-bottomright":{comment:"https://developer.mozilla.org/en-US/docs/Web/CSS/border-bottom-right-radius",syntax:"<'border-bottom-right-radius'>"},"-moz-border-radius-topleft":{comment:"https://developer.mozilla.org/en-US/docs/Web/CSS/border-top-left-radius",syntax:"<'border-top-left-radius'>"},"-moz-border-radius-topright":{comment:"https://developer.mozilla.org/en-US/docs/Web/CSS/border-bottom-right-radius",syntax:"<'border-bottom-right-radius'>"},"-moz-control-character-visibility":{comment:"firefox specific keywords, https://bugzilla.mozilla.org/show_bug.cgi?id=947588",syntax:"visible | hidden"},"-moz-osx-font-smoothing":{comment:"misssed old syntax https://developer.mozilla.org/en-US/docs/Web/CSS/font-smooth",syntax:"auto | grayscale"},"-moz-user-select":{comment:"https://developer.mozilla.org/en-US/docs/Web/CSS/user-select",syntax:"none | text | all | -moz-none"},"-ms-flex-align":{comment:"misssed old syntax implemented in IE, https://www.w3.org/TR/2012/WD-css3-flexbox-20120322/#flex-align",syntax:"start | end | center | baseline | stretch"},"-ms-flex-item-align":{comment:"misssed old syntax implemented in IE, https://www.w3.org/TR/2012/WD-css3-flexbox-20120322/#flex-align",syntax:"auto | start | end | center | baseline | stretch"},"-ms-flex-line-pack":{comment:"misssed old syntax implemented in IE, https://www.w3.org/TR/2012/WD-css3-flexbox-20120322/#flex-line-pack",syntax:"start | end | center | justify | distribute | stretch"},"-ms-flex-negative":{comment:"misssed old syntax implemented in IE; TODO: find references for comfirmation",syntax:"<'flex-shrink'>"},"-ms-flex-pack":{comment:"misssed old syntax implemented in IE, https://www.w3.org/TR/2012/WD-css3-flexbox-20120322/#flex-pack",syntax:"start | end | center | justify | distribute"},"-ms-flex-order":{comment:"misssed old syntax implemented in IE; https://msdn.microsoft.com/en-us/library/jj127303(v=vs.85).aspx",syntax:"<integer>"},"-ms-flex-positive":{comment:"misssed old syntax implemented in IE; TODO: find references for comfirmation",syntax:"<'flex-grow'>"},"-ms-flex-preferred-size":{comment:"misssed old syntax implemented in IE; TODO: find references for comfirmation",syntax:"<'flex-basis'>"},"-ms-interpolation-mode":{comment:"https://msdn.microsoft.com/en-us/library/ff521095(v=vs.85).aspx",syntax:"nearest-neighbor | bicubic"},"-ms-grid-column-align":{comment:"add this property first since it uses as fallback for flexbox, https://msdn.microsoft.com/en-us/library/windows/apps/hh466338.aspx",syntax:"start | end | center | stretch"},"-ms-grid-row-align":{comment:"add this property first since it uses as fallback for flexbox, https://msdn.microsoft.com/en-us/library/windows/apps/hh466348.aspx",syntax:"start | end | center | stretch"},"-ms-hyphenate-limit-last":{comment:"misssed old syntax implemented in IE; https://www.w3.org/TR/css-text-4/#hyphenate-line-limits",syntax:"none | always | column | page | spread"},"-webkit-appearance":{comment:"webkit specific keywords",references:["http://css-infos.net/property/-webkit-appearance"],syntax:"none | button | button-bevel | caps-lock-indicator | caret | checkbox | default-button | inner-spin-button | listbox | listitem | media-controls-background | media-controls-fullscreen-background | media-current-time-display | media-enter-fullscreen-button | media-exit-fullscreen-button | media-fullscreen-button | media-mute-button | media-overlay-play-button | media-play-button | media-seek-back-button | media-seek-forward-button | media-slider | media-sliderthumb | media-time-remaining-display | media-toggle-closed-captions-button | media-volume-slider | media-volume-slider-container | media-volume-sliderthumb | menulist | menulist-button | menulist-text | menulist-textfield | meter | progress-bar | progress-bar-value | push-button | radio | scrollbarbutton-down | scrollbarbutton-left | scrollbarbutton-right | scrollbarbutton-up | scrollbargripper-horizontal | scrollbargripper-vertical | scrollbarthumb-horizontal | scrollbarthumb-vertical | scrollbartrack-horizontal | scrollbartrack-vertical | searchfield | searchfield-cancel-button | searchfield-decoration | searchfield-results-button | searchfield-results-decoration | slider-horizontal | slider-vertical | sliderthumb-horizontal | sliderthumb-vertical | square-button | textarea | textfield | -apple-pay-button"},"-webkit-background-clip":{comment:"https://developer.mozilla.org/en/docs/Web/CSS/background-clip",syntax:"[ <box> | border | padding | content | text ]#"},"-webkit-column-break-after":{comment:"added, http://help.dottoro.com/lcrthhhv.php",syntax:"always | auto | avoid"},"-webkit-column-break-before":{comment:"added, http://help.dottoro.com/lcxquvkf.php",syntax:"always | auto | avoid"},"-webkit-column-break-inside":{comment:"added, http://help.dottoro.com/lclhnthl.php",syntax:"always | auto | avoid"},"-webkit-font-smoothing":{comment:"https://developer.mozilla.org/en-US/docs/Web/CSS/font-smooth",syntax:"auto | none | antialiased | subpixel-antialiased"},"-webkit-mask-box-image":{comment:"missed; https://developer.mozilla.org/en-US/docs/Web/CSS/-webkit-mask-box-image",syntax:"[ <url> | <gradient> | none ] [ <length-percentage>{4} <-webkit-mask-box-repeat>{2} ]?"},"-webkit-print-color-adjust":{comment:"missed",references:["https://developer.mozilla.org/en/docs/Web/CSS/-webkit-print-color-adjust"],syntax:"economy | exact"},"-webkit-text-security":{comment:"missed; http://help.dottoro.com/lcbkewgt.php",syntax:"none | circle | disc | square"},"-webkit-user-drag":{comment:"missed; http://help.dottoro.com/lcbixvwm.php",syntax:"none | element | auto"},"-webkit-user-select":{comment:"auto is supported by old webkit, https://developer.mozilla.org/en-US/docs/Web/CSS/user-select",syntax:"auto | none | text | all"},"alignment-baseline":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/text.html#AlignmentBaselineProperty"],syntax:"auto | baseline | before-edge | text-before-edge | middle | central | after-edge | text-after-edge | ideographic | alphabetic | hanging | mathematical"},"baseline-shift":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/text.html#BaselineShiftProperty"],syntax:"baseline | sub | super | <svg-length>"},behavior:{comment:"added old IE property https://msdn.microsoft.com/en-us/library/ms530723(v=vs.85).aspx",syntax:"<url>+"},"clip-rule":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/masking.html#ClipRuleProperty"],syntax:"nonzero | evenodd"},cue:{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<'cue-before'> <'cue-after'>?"},"cue-after":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<url> <decibel>? | none"},"cue-before":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<url> <decibel>? | none"},cursor:{comment:"added legacy keywords: hand, -webkit-grab. -webkit-grabbing, -webkit-zoom-in, -webkit-zoom-out, -moz-grab, -moz-grabbing, -moz-zoom-in, -moz-zoom-out",references:["https://www.sitepoint.com/css3-cursor-styles/"],syntax:"[ [ <url> [ <x> <y> ]? , ]* [ auto | default | none | context-menu | help | pointer | progress | wait | cell | crosshair | text | vertical-text | alias | copy | move | no-drop | not-allowed | e-resize | n-resize | ne-resize | nw-resize | s-resize | se-resize | sw-resize | w-resize | ew-resize | ns-resize | nesw-resize | nwse-resize | col-resize | row-resize | all-scroll | zoom-in | zoom-out | grab | grabbing | hand | -webkit-grab | -webkit-grabbing | -webkit-zoom-in | -webkit-zoom-out | -moz-grab | -moz-grabbing | -moz-zoom-in | -moz-zoom-out ] ]"},display:{comment:"extended with -ms-flexbox",syntax:"| <-non-standard-display>"},position:{comment:"extended with -webkit-sticky",syntax:"| -webkit-sticky"},"dominant-baseline":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/text.html#DominantBaselineProperty"],syntax:"auto | use-script | no-change | reset-size | ideographic | alphabetic | hanging | mathematical | central | middle | text-after-edge | text-before-edge"},"image-rendering":{comment:"extended with <-non-standard-image-rendering>, added SVG keywords optimizeSpeed and optimizeQuality",references:["https://developer.mozilla.org/en/docs/Web/CSS/image-rendering","https://www.w3.org/TR/SVG/painting.html#ImageRenderingProperty"],syntax:"| optimizeSpeed | optimizeQuality | <-non-standard-image-rendering>"},fill:{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#FillProperty"],syntax:"<paint>"},"fill-opacity":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#FillProperty"],syntax:"<number-zero-one>"},"fill-rule":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#FillProperty"],syntax:"nonzero | evenodd"},filter:{comment:"extend with IE legacy syntaxes",syntax:"| <-ms-filter-function-list>"},"glyph-orientation-horizontal":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/text.html#GlyphOrientationHorizontalProperty"],syntax:"<angle>"},"glyph-orientation-vertical":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/text.html#GlyphOrientationVerticalProperty"],syntax:"<angle>"},kerning:{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/text.html#KerningProperty"],syntax:"auto | <svg-length>"},"letter-spacing":{comment:"fix syntax <length> -> <length-percentage>",references:["https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/letter-spacing"],syntax:"normal | <length-percentage>"},marker:{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#MarkerProperties"],syntax:"none | <url>"},"marker-end":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#MarkerProperties"],syntax:"none | <url>"},"marker-mid":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#MarkerProperties"],syntax:"none | <url>"},"marker-start":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#MarkerProperties"],syntax:"none | <url>"},"max-width":{comment:"fix auto -> none (https://github.com/mdn/data/pull/431); extend by non-standard width keywords https://developer.mozilla.org/en-US/docs/Web/CSS/max-width",syntax:"none | <length-percentage> | min-content | max-content | fit-content(<length-percentage>) | <-non-standard-width>"},width:{comment:"per spec fit-content should be a function, however browsers are supporting it as a keyword (https://github.com/csstree/stylelint-validator/issues/29)",syntax:"| fit-content | -moz-fit-content | -webkit-fit-content"},"min-width":{comment:"extend by non-standard width keywords https://developer.mozilla.org/en-US/docs/Web/CSS/width",syntax:"auto | <length-percentage> | min-content | max-content | fit-content(<length-percentage>) | <-non-standard-width>"},overflow:{comment:"extend by vendor keywords https://developer.mozilla.org/en-US/docs/Web/CSS/overflow",syntax:"| <-non-standard-overflow>"},pause:{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<'pause-before'> <'pause-after'>?"},"pause-after":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<time> | none | x-weak | weak | medium | strong | x-strong"},"pause-before":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<time> | none | x-weak | weak | medium | strong | x-strong"},rest:{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<'rest-before'> <'rest-after'>?"},"rest-after":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<time> | none | x-weak | weak | medium | strong | x-strong"},"rest-before":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<time> | none | x-weak | weak | medium | strong | x-strong"},"shape-rendering":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#ShapeRenderingPropert"],syntax:"auto | optimizeSpeed | crispEdges | geometricPrecision"},src:{comment:"added @font-face's src property https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/src",syntax:"[ <url> [ format( <string># ) ]? | local( <family-name> ) ]#"},speak:{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"auto | none | normal"},"speak-as":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"normal | spell-out || digits || [ literal-punctuation | no-punctuation ]"},stroke:{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#StrokeProperties"],syntax:"<paint>"},"stroke-dasharray":{comment:"added SVG property; a list of comma and/or white space separated <length>s and <percentage>s",references:["https://www.w3.org/TR/SVG/painting.html#StrokeProperties"],syntax:"none | [ <svg-length>+ ]#"},"stroke-dashoffset":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#StrokeProperties"],syntax:"<svg-length>"},"stroke-linecap":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#StrokeProperties"],syntax:"butt | round | square"},"stroke-linejoin":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#StrokeProperties"],syntax:"miter | round | bevel"},"stroke-miterlimit":{comment:"added SVG property (<miterlimit> = <number-one-or-greater>) ",references:["https://www.w3.org/TR/SVG/painting.html#StrokeProperties"],syntax:"<number-one-or-greater>"},"stroke-opacity":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#StrokeProperties"],syntax:"<number-zero-one>"},"stroke-width":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/painting.html#StrokeProperties"],syntax:"<svg-length>"},"text-anchor":{comment:"added SVG property",references:["https://www.w3.org/TR/SVG/text.html#TextAlignmentProperties"],syntax:"start | middle | end"},"unicode-bidi":{comment:"added prefixed keywords https://developer.mozilla.org/en-US/docs/Web/CSS/unicode-bidi",syntax:"| -moz-isolate | -moz-isolate-override | -moz-plaintext | -webkit-isolate | -webkit-isolate-override | -webkit-plaintext"},"unicode-range":{comment:"added missed property https://developer.mozilla.org/en-US/docs/Web/CSS/%40font-face/unicode-range",syntax:"<urange>#"},"voice-balance":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<number> | left | center | right | leftwards | rightwards"},"voice-duration":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"auto | <time>"},"voice-family":{comment:"<name> -> <family-name>, https://www.w3.org/TR/css3-speech/#property-index",syntax:"[ [ <family-name> | <generic-voice> ] , ]* [ <family-name> | <generic-voice> ] | preserve"},"voice-pitch":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<frequency> && absolute | [ [ x-low | low | medium | high | x-high ] || [ <frequency> | <semitones> | <percentage> ] ]"},"voice-range":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"<frequency> && absolute | [ [ x-low | low | medium | high | x-high ] || [ <frequency> | <semitones> | <percentage> ] ]"},"voice-rate":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"[ normal | x-slow | slow | medium | fast | x-fast ] || <percentage>"},"voice-stress":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"normal | strong | moderate | none | reduced"},"voice-volume":{comment:"https://www.w3.org/TR/css3-speech/#property-index",syntax:"silent | [ [ x-soft | soft | medium | loud | x-loud ] || <decibel> ]"},"writing-mode":{comment:"extend with SVG keywords",syntax:"| <svg-writing-mode>"}},syntaxes:{"-legacy-gradient":{comment:"added collection of legacy gradient syntaxes",syntax:"<-webkit-gradient()> | <-legacy-linear-gradient> | <-legacy-repeating-linear-gradient> | <-legacy-radial-gradient> | <-legacy-repeating-radial-gradient>"},"-legacy-linear-gradient":{comment:"like standard syntax but w/o `to` keyword https://developer.mozilla.org/en-US/docs/Web/CSS/linear-gradient",syntax:"-moz-linear-gradient( <-legacy-linear-gradient-arguments> ) | -webkit-linear-gradient( <-legacy-linear-gradient-arguments> ) | -o-linear-gradient( <-legacy-linear-gradient-arguments> )"},"-legacy-repeating-linear-gradient":{comment:"like standard syntax but w/o `to` keyword https://developer.mozilla.org/en-US/docs/Web/CSS/linear-gradient",syntax:"-moz-repeating-linear-gradient( <-legacy-linear-gradient-arguments> ) | -webkit-repeating-linear-gradient( <-legacy-linear-gradient-arguments> ) | -o-repeating-linear-gradient( <-legacy-linear-gradient-arguments> )"},"-legacy-linear-gradient-arguments":{comment:"like standard syntax but w/o `to` keyword https://developer.mozilla.org/en-US/docs/Web/CSS/linear-gradient",syntax:"[ <angle> | <side-or-corner> ]? , <color-stop-list>"},"-legacy-radial-gradient":{comment:"deprecated syntax that implemented by some browsers https://www.w3.org/TR/2011/WD-css3-images-20110908/#radial-gradients",syntax:"-moz-radial-gradient( <-legacy-radial-gradient-arguments> ) | -webkit-radial-gradient( <-legacy-radial-gradient-arguments> ) | -o-radial-gradient( <-legacy-radial-gradient-arguments> )"},"-legacy-repeating-radial-gradient":{comment:"deprecated syntax that implemented by some browsers https://www.w3.org/TR/2011/WD-css3-images-20110908/#radial-gradients",syntax:"-moz-repeating-radial-gradient( <-legacy-radial-gradient-arguments> ) | -webkit-repeating-radial-gradient( <-legacy-radial-gradient-arguments> ) | -o-repeating-radial-gradient( <-legacy-radial-gradient-arguments> )"},"-legacy-radial-gradient-arguments":{comment:"deprecated syntax that implemented by some browsers https://www.w3.org/TR/2011/WD-css3-images-20110908/#radial-gradients",syntax:"[ <position> , ]? [ [ [ <-legacy-radial-gradient-shape> || <-legacy-radial-gradient-size> ] | [ <length> | <percentage> ]{2} ] , ]? <color-stop-list>"},"-legacy-radial-gradient-size":{comment:"before a standard it contains 2 extra keywords (`contain` and `cover`) https://www.w3.org/TR/2011/WD-css3-images-20110908/#ltsize",syntax:"closest-side | closest-corner | farthest-side | farthest-corner | contain | cover"},"-legacy-radial-gradient-shape":{comment:"define to double sure it doesn't extends in future https://www.w3.org/TR/2011/WD-css3-images-20110908/#ltshape",syntax:"circle | ellipse"},"-non-standard-font":{comment:"non standard fonts",references:["https://webkit.org/blog/3709/using-the-system-font-in-web-content/"],syntax:"-apple-system-body | -apple-system-headline | -apple-system-subheadline | -apple-system-caption1 | -apple-system-caption2 | -apple-system-footnote | -apple-system-short-body | -apple-system-short-headline | -apple-system-short-subheadline | -apple-system-short-caption1 | -apple-system-short-footnote | -apple-system-tall-body"},"-non-standard-color":{comment:"non standard colors",references:["http://cssdot.ru/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B8%D0%BA_CSS/color-i305.html","https://developer.mozilla.org/en-US/docs/Web/CSS/color_value#Mozilla_Color_Preference_Extensions"],syntax:"-moz-ButtonDefault | -moz-ButtonHoverFace | -moz-ButtonHoverText | -moz-CellHighlight | -moz-CellHighlightText | -moz-Combobox | -moz-ComboboxText | -moz-Dialog | -moz-DialogText | -moz-dragtargetzone | -moz-EvenTreeRow | -moz-Field | -moz-FieldText | -moz-html-CellHighlight | -moz-html-CellHighlightText | -moz-mac-accentdarkestshadow | -moz-mac-accentdarkshadow | -moz-mac-accentface | -moz-mac-accentlightesthighlight | -moz-mac-accentlightshadow | -moz-mac-accentregularhighlight | -moz-mac-accentregularshadow | -moz-mac-chrome-active | -moz-mac-chrome-inactive | -moz-mac-focusring | -moz-mac-menuselect | -moz-mac-menushadow | -moz-mac-menutextselect | -moz-MenuHover | -moz-MenuHoverText | -moz-MenuBarText | -moz-MenuBarHoverText | -moz-nativehyperlinktext | -moz-OddTreeRow | -moz-win-communicationstext | -moz-win-mediatext | -moz-activehyperlinktext | -moz-default-background-color | -moz-default-color | -moz-hyperlinktext | -moz-visitedhyperlinktext | -webkit-activelink | -webkit-focus-ring-color | -webkit-link | -webkit-text"},"-non-standard-image-rendering":{comment:"non-standard keywords http://phrogz.net/tmp/canvas_image_zoom.html",syntax:"optimize-contrast | -moz-crisp-edges | -o-crisp-edges | -webkit-optimize-contrast"},"-non-standard-overflow":{comment:"non-standard keywords https://developer.mozilla.org/en-US/docs/Web/CSS/overflow",syntax:"-moz-scrollbars-none | -moz-scrollbars-horizontal | -moz-scrollbars-vertical | -moz-hidden-unscrollable"},"-non-standard-width":{comment:"non-standard keywords https://developer.mozilla.org/en-US/docs/Web/CSS/width",syntax:"fill-available | min-intrinsic | intrinsic | -moz-available | -moz-fit-content | -moz-min-content | -moz-max-content | -webkit-min-content | -webkit-max-content"},"-webkit-gradient()":{comment:"first Apple proposal gradient syntax https://webkit.org/blog/175/introducing-css-gradients/ - TODO: simplify when after match algorithm improvement ( [, point, radius | , point] -> [, radius]? , point )",syntax:"-webkit-gradient( <-webkit-gradient-type>, <-webkit-gradient-point> [, <-webkit-gradient-point> | , <-webkit-gradient-radius>, <-webkit-gradient-point> ] [, <-webkit-gradient-radius>]? [, <-webkit-gradient-color-stop>]* )"},"-webkit-gradient-color-stop":{comment:"first Apple proposal gradient syntax https://webkit.org/blog/175/introducing-css-gradients/",syntax:"from( <color> ) | color-stop( [ <number-zero-one> | <percentage> ] , <color> ) | to( <color> )"},"-webkit-gradient-point":{comment:"first Apple proposal gradient syntax https://webkit.org/blog/175/introducing-css-gradients/",syntax:"[ left | center | right | <length-percentage> ] [ top | center | bottom | <length-percentage> ]"},"-webkit-gradient-radius":{comment:"first Apple proposal gradient syntax https://webkit.org/blog/175/introducing-css-gradients/",syntax:"<length> | <percentage>"},"-webkit-gradient-type":{comment:"first Apple proposal gradient syntax https://webkit.org/blog/175/introducing-css-gradients/",syntax:"linear | radial"},"-webkit-mask-box-repeat":{comment:"missed; https://developer.mozilla.org/en-US/docs/Web/CSS/-webkit-mask-box-image",syntax:"repeat | stretch | round"},"-webkit-mask-clip-style":{comment:"missed; there is no enough information about `-webkit-mask-clip` property, but looks like all those keywords are working",syntax:"border | border-box | padding | padding-box | content | content-box | text"},"-ms-filter-function-list":{comment:"https://developer.mozilla.org/en-US/docs/Web/CSS/-ms-filter",syntax:"<-ms-filter-function>+"},"-ms-filter-function":{comment:"https://developer.mozilla.org/en-US/docs/Web/CSS/-ms-filter",syntax:"<-ms-filter-function-progid> | <-ms-filter-function-legacy>"},"-ms-filter-function-progid":{comment:"https://developer.mozilla.org/en-US/docs/Web/CSS/-ms-filter",syntax:"'progid:' [ <ident-token> '.' ]* [ <ident-token> | <function-token> <any-value>? ) ]"},"-ms-filter-function-legacy":{comment:"https://developer.mozilla.org/en-US/docs/Web/CSS/-ms-filter",syntax:"<ident-token> | <function-token> <any-value>? )"},"-ms-filter":{syntax:"<string>"},age:{comment:"https://www.w3.org/TR/css3-speech/#voice-family",syntax:"child | young | old"},"attr-name":{syntax:"<wq-name>"},"attr-fallback":{syntax:"<any-value>"},"border-radius":{comment:"missed, https://drafts.csswg.org/css-backgrounds-3/#the-border-radius",syntax:"<length-percentage>{1,2}"},bottom:{comment:"missed; not sure we should add it, but no others except `shape` is using it so it's ok for now; https://drafts.fxtf.org/css-masking-1/#funcdef-clip-rect",syntax:"<length> | auto"},"content-list":{comment:"missed -> https://drafts.csswg.org/css-content/#typedef-content-list (document-url, <target> and leader() is omitted util stabilization)",syntax:"[ <string> | contents | <image> | <quote> | <target> | <leader()> | <attr()> | counter( <ident>, <'list-style-type'>? ) ]+"},"element()":{comment:"https://drafts.csswg.org/css-gcpm/#element-syntax & https://drafts.csswg.org/css-images-4/#element-notation",syntax:"element( <custom-ident> , [ first | start | last | first-except ]? ) | element( <id-selector> )"},"generic-voice":{comment:"https://www.w3.org/TR/css3-speech/#voice-family",syntax:"[ <age>? <gender> <integer>? ]"},gender:{comment:"https://www.w3.org/TR/css3-speech/#voice-family",syntax:"male | female | neutral"},"generic-family":{comment:"added -apple-system",references:["https://webkit.org/blog/3709/using-the-system-font-in-web-content/"],syntax:"| -apple-system"},gradient:{comment:"added legacy syntaxes support",syntax:"| <-legacy-gradient>"},left:{comment:"missed; not sure we should add it, but no others except `shape` is using it so it's ok for now; https://drafts.fxtf.org/css-masking-1/#funcdef-clip-rect",syntax:"<length> | auto"},"mask-image":{comment:"missed; https://drafts.fxtf.org/css-masking-1/#the-mask-image",syntax:"<mask-reference>#"},"name-repeat":{comment:"missed, and looks like obsolete, keep it as is since other property syntaxes should be changed too; https://www.w3.org/TR/2015/WD-css-grid-1-20150917/#typedef-name-repeat",syntax:"repeat( [ <positive-integer> | auto-fill ], <line-names>+)"},"named-color":{comment:"added non standard color names",syntax:"| <-non-standard-color>"},paint:{comment:"used by SVG https://www.w3.org/TR/SVG/painting.html#SpecifyingPaint",syntax:"none | <color> | <url> [ none | <color> ]? | context-fill | context-stroke"},"page-size":{comment:"https://www.w3.org/TR/css-page-3/#typedef-page-size-page-size",syntax:"A5 | A4 | A3 | B5 | B4 | JIS-B5 | JIS-B4 | letter | legal | ledger"},ratio:{comment:"missed, https://drafts.csswg.org/mediaqueries-4/#typedef-ratio",syntax:"<integer> / <integer>"},right:{comment:"missed; not sure we should add it, but no others except `shape` is using it so it's ok for now; https://drafts.fxtf.org/css-masking-1/#funcdef-clip-rect",syntax:"<length> | auto"},shape:{comment:"missed spaces in function body and add backwards compatible syntax",syntax:"rect( <top>, <right>, <bottom>, <left> ) | rect( <top> <right> <bottom> <left> )"},"svg-length":{comment:"All coordinates and lengths in SVG can be specified with or without a unit identifier",references:["https://www.w3.org/TR/SVG11/coords.html#Units"],syntax:"<percentage> | <length> | <number>"},"svg-writing-mode":{comment:"SVG specific keywords (deprecated for CSS)",references:["https://developer.mozilla.org/en/docs/Web/CSS/writing-mode","https://www.w3.org/TR/SVG/text.html#WritingModeProperty"],syntax:"lr-tb | rl-tb | tb-rl | lr | rl | tb"},top:{comment:"missed; not sure we should add it, but no others except `shape` is using it so it's ok for now; https://drafts.fxtf.org/css-masking-1/#funcdef-clip-rect",syntax:"<length> | auto"},"track-group":{comment:"used by old grid-columns and grid-rows syntax v0",syntax:"'(' [ <string>* <track-minmax> <string>* ]+ ')' [ '[' <positive-integer> ']' ]? | <track-minmax>"},"track-list-v0":{comment:"used by old grid-columns and grid-rows syntax v0",syntax:"[ <string>* <track-group> <string>* ]+ | none"},"track-minmax":{comment:"used by old grid-columns and grid-rows syntax v0",syntax:"minmax( <track-breadth> , <track-breadth> ) | auto | <track-breadth> | fit-content"},x:{comment:"missed; not sure we should add it, but no others except `cursor` is using it so it's ok for now; https://drafts.csswg.org/css-ui-3/#cursor",syntax:"<number>"},y:{comment:"missed; not sure we should add it, but no others except `cursor` is using so it's ok for now; https://drafts.csswg.org/css-ui-3/#cursor",syntax:"<number>"},declaration:{comment:"missed, restored by https://drafts.csswg.org/css-syntax",syntax:"<ident-token> : <declaration-value>? [ '!' important ]?"},"declaration-list":{comment:"missed, restored by https://drafts.csswg.org/css-syntax",syntax:"[ <declaration>? ';' ]* <declaration>?"},url:{comment:"https://drafts.csswg.org/css-values-4/#urls",syntax:"url( <string> <url-modifier>* ) | <url-token>"},"url-modifier":{comment:"https://drafts.csswg.org/css-values-4/#typedef-url-modifier",syntax:"<ident> | <function-token> <any-value> )"},"number-zero-one":{syntax:"<number [0,1]>"},"number-one-or-greater":{syntax:"<number [1,\u221E]>"},"positive-integer":{syntax:"<integer [0,\u221E]>"},"-non-standard-display":{syntax:"-ms-inline-flexbox | -ms-grid | -ms-inline-grid | -webkit-flex | -webkit-inline-flex | -webkit-box | -webkit-inline-box | -moz-inline-stack | -moz-box | -moz-inline-box"}}}});var Ax=D((Rj,Px)=>{var hF=xx(),pF=wx(),mF=Cx(),Qc=kx(),Ex=/^\s*\|\s*/;function gF(a){let n=Object.create(null);for(let l in a){let d=a[l],h=null;if(d.descriptors){h=Object.create(null);for(let g in d.descriptors)h[g]=d.descriptors[g].syntax}n[l.substr(1)]={prelude:d.syntax.trim().match(/^@\S+\s+([^;\{]*)/)[1].trim()||null,descriptors:h}}return n}function Jc(a,n){let l={};for(let d in a)l[d]=a[d].syntax||a[d];for(let d in n)d in a?n[d].syntax?l[d]=Ex.test(n[d].syntax)?l[d]+" "+n[d].syntax.trim():n[d].syntax:delete l[d]:n[d].syntax&&(l[d]=n[d].syntax.replace(Ex,""));return l}function Tx(a){let n={};for(let l in a)n[l]=a[l].syntax;return n}function fF(a,n){let l={};for(let d in a){let h=n[d]&&n[d].descriptors||null;l[d]={prelude:d in n&&"prelude"in n[d]?n[d].prelude:a[d].prelude||null,descriptors:a[d].descriptors?Jc(a[d].descriptors,h||{}):h&&Tx(h)}}for(let d in n)hasOwnProperty.call(a,d)||(l[d]={prelude:n[d].prelude||null,descriptors:n[d].descriptors&&Tx(n[d].descriptors)});return l}Px.exports={types:Jc(mF,Qc.syntaxes),atrules:fF(gF(hF),Qc.atrules),properties:Jc(pF,Qc.properties)}});var _x=D((Lj,Lx)=>{var Ox=oe().cmpChar,Rx=oe().isDigit,ua=oe().TYPE,Nx=ua.WhiteSpace,Ix=ua.Comment,eh=ua.Ident,ir=ua.Number,bF=ua.Dimension,_i=43,ci=45,ml=110,jr=!0,yF=!1;function gl(a,n){var l=this.scanner.tokenStart+a,d=this.scanner.source.charCodeAt(l);for((d===_i||d===ci)&&(n&&this.error("Number sign is not allowed"),l++);l<this.scanner.tokenEnd;l++)Rx(this.scanner.source.charCodeAt(l))||this.error("Integer is expected",l)}function qn(a){return gl.call(this,0,a)}function Sr(a,n){if(!Ox(this.scanner.source,this.scanner.tokenStart+a,n)){var l="";switch(n){case ml:l="N is expected";break;case ci:l="HyphenMinus is expected";break}this.error(l,this.scanner.tokenStart+a)}}function th(){for(var a=0,n=0,l=this.scanner.tokenType;l===Nx||l===Ix;)l=this.scanner.lookupType(++a);if(l!==ir)if(this.scanner.isDelim(_i,a)||this.scanner.isDelim(ci,a)){n=this.scanner.isDelim(_i,a)?_i:ci;do l=this.scanner.lookupType(++a);while(l===Nx||l===Ix);l!==ir&&(this.scanner.skip(a),qn.call(this,jr))}else return null;return a>0&&this.scanner.skip(a),n===0&&(l=this.scanner.source.charCodeAt(this.scanner.tokenStart),l!==_i&&l!==ci&&this.error("Number sign is expected")),qn.call(this,n!==0),n===ci?"-"+this.consume(ir):this.consume(ir)}Lx.exports={name:"AnPlusB",structure:{a:[String,null],b:[String,null]},parse:function(){var a=this.scanner.tokenStart,n=null,l=null;if(this.scanner.tokenType===ir)qn.call(this,yF),l=this.consume(ir);else if(this.scanner.tokenType===eh&&Ox(this.scanner.source,this.scanner.tokenStart,ci))switch(n="-1",Sr.call(this,1,ml),this.scanner.getTokenLength()){case 2:this.scanner.next(),l=th.call(this);break;case 3:Sr.call(this,2,ci),this.scanner.next(),this.scanner.skipSC(),qn.call(this,jr),l="-"+this.consume(ir);break;default:Sr.call(this,2,ci),gl.call(this,3,jr),this.scanner.next(),l=this.scanner.substrToCursor(a+2)}else if(this.scanner.tokenType===eh||this.scanner.isDelim(_i)&&this.scanner.lookupType(1)===eh){var d=0;switch(n="1",this.scanner.isDelim(_i)&&(d=1,this.scanner.next()),Sr.call(this,0,ml),this.scanner.getTokenLength()){case 1:this.scanner.next(),l=th.call(this);break;case 2:Sr.call(this,1,ci),this.scanner.next(),this.scanner.skipSC(),qn.call(this,jr),l="-"+this.consume(ir);break;default:Sr.call(this,1,ci),gl.call(this,2,jr),this.scanner.next(),l=this.scanner.substrToCursor(a+d+1)}}else if(this.scanner.tokenType===bF){for(var h=this.scanner.source.charCodeAt(this.scanner.tokenStart),d=h===_i||h===ci,g=this.scanner.tokenStart+d;g<this.scanner.tokenEnd&&Rx(this.scanner.source.charCodeAt(g));g++);g===this.scanner.tokenStart+d&&this.error("Integer is expected",this.scanner.tokenStart+d),Sr.call(this,g-this.scanner.tokenStart,ml),n=this.scanner.source.substring(a,g),g+1===this.scanner.tokenEnd?(this.scanner.next(),l=th.call(this)):(Sr.call(this,g-this.scanner.tokenStart+1,ci),g+2===this.scanner.tokenEnd?(this.scanner.next(),this.scanner.skipSC(),qn.call(this,jr),l="-"+this.consume(ir)):(gl.call(this,g-this.scanner.tokenStart+2,jr),this.scanner.next(),l=this.scanner.substrToCursor(g+1)))}else this.error();return n!==null&&n.charCodeAt(0)===_i&&(n=n.substr(1)),l!==null&&l.charCodeAt(0)===_i&&(l=l.substr(1)),{type:"AnPlusB",loc:this.getLocation(a,this.scanner.tokenStart),a:n,b:l}},generate:function(a){var n=a.a!==null&&a.a!==void 0,l=a.b!==null&&a.b!==void 0;n?(this.chunk(a.a==="+1"?"+n":a.a==="1"?"n":a.a==="-1"?"-n":a.a+"n"),l&&(l=String(a.b),l.charAt(0)==="-"||l.charAt(0)==="+"?(this.chunk(l.charAt(0)),this.chunk(l.substr(1))):(this.chunk("+"),this.chunk(l)))):this.chunk(String(a.b))}}});var xr=D((_j,zx)=>{var vF=oe(),fl=vF.TYPE,SF=fl.WhiteSpace,ih=fl.Semicolon,Fx=fl.LeftCurlyBracket,xF=fl.Delim,wF=33;function CF(){return this.scanner.tokenIndex>0&&this.scanner.lookupType(-1)===SF?this.scanner.tokenIndex>1?this.scanner.getTokenStart(this.scanner.tokenIndex-1):this.scanner.firstCharOffset:this.scanner.tokenStart}function Bx(){return 0}function kF(a){return a===Fx?1:0}function EF(a){return a===Fx||a===ih?1:0}function TF(a,n,l){return a===xF&&n.charCodeAt(l)===wF||a===ih?1:0}function PF(a){return a===ih?2:0}zx.exports={name:"Raw",structure:{value:String},parse:function(a,n,l){var d=this.scanner.getTokenStart(a),h;return this.scanner.skip(this.scanner.getRawLength(a,n||Bx)),l&&this.scanner.tokenStart>d?h=CF.call(this):h=this.scanner.tokenStart,{type:"Raw",loc:this.getLocation(d,h),value:this.scanner.source.substring(d,h)}},generate:function(a){this.chunk(a.value)},mode:{default:Bx,leftCurlyBracket:kF,leftCurlyBracketOrSemicolon:EF,exclamationMarkOrSemicolon:TF,semicolonIncluded:PF}}});var qx=D((Bj,jx)=>{var bl=oe().TYPE,AF=xr().mode,Wx=bl.AtKeyword,Mx=bl.Semicolon,rh=bl.LeftCurlyBracket,NF=bl.RightCurlyBracket;function Dx(a){return this.Raw(a,AF.leftCurlyBracketOrSemicolon,!0)}function IF(){for(var a=1,n;n=this.scanner.lookupType(a);a++){if(n===NF)return!0;if(n===rh||n===Wx)return!1}return!1}jx.exports={name:"Atrule",structure:{name:String,prelude:["AtrulePrelude","Raw",null],block:["Block",null]},parse:function(){var a=this.scanner.tokenStart,n,l,d=null,h=null;switch(this.eat(Wx),n=this.scanner.substrToCursor(a+1),l=n.toLowerCase(),this.scanner.skipSC(),this.scanner.eof===!1&&this.scanner.tokenType!==rh&&this.scanner.tokenType!==Mx&&(this.parseAtrulePrelude?(d=this.parseWithFallback(this.AtrulePrelude.bind(this,n),Dx),d.type==="AtrulePrelude"&&d.children.head===null&&(d=null)):d=Dx.call(this,this.scanner.tokenIndex),this.scanner.skipSC()),this.scanner.tokenType){case Mx:this.scanner.next();break;case rh:this.atrule.hasOwnProperty(l)&&typeof this.atrule[l].block=="function"?h=this.atrule[l].block.call(this):h=this.Block(IF.call(this));break}return{type:"Atrule",loc:this.getLocation(a,this.scanner.tokenStart),name:n,prelude:d,block:h}},generate:function(a){this.chunk("@"),this.chunk(a.name),a.prelude!==null&&(this.chunk(" "),this.node(a.prelude)),a.block?this.node(a.block):this.chunk(";")},walkContext:"atrule"}});var Ux=D((Fj,Hx)=>{var Vx=oe().TYPE,OF=Vx.Semicolon,RF=Vx.LeftCurlyBracket;Hx.exports={name:"AtrulePrelude",structure:{children:[[]]},parse:function(a){var n=null;return a!==null&&(a=a.toLowerCase()),this.scanner.skipSC(),this.atrule.hasOwnProperty(a)&&typeof this.atrule[a].prelude=="function"?n=this.atrule[a].prelude.call(this):n=this.readSequence(this.scope.AtrulePrelude),this.scanner.skipSC(),this.scanner.eof!==!0&&this.scanner.tokenType!==RF&&this.scanner.tokenType!==OF&&this.error("Semicolon or block is expected"),n===null&&(n=this.createList()),{type:"AtrulePrelude",loc:this.getLocationFromList(n),children:n}},generate:function(a){this.children(a)},walkContext:"atrulePrelude"}});var Xx=D((zj,Yx)=>{var ha=oe().TYPE,ca=ha.Ident,LF=ha.String,_F=ha.Colon,BF=ha.LeftSquareBracket,Gx=ha.RightSquareBracket,FF=36,$x=42,yl=61,zF=94,nh=124,MF=126;function DF(){this.scanner.eof&&this.error("Unexpected end of input");var a=this.scanner.tokenStart,n=!1,l=!0;return this.scanner.isDelim($x)?(n=!0,l=!1,this.scanner.next()):this.scanner.isDelim(nh)||this.eat(ca),this.scanner.isDelim(nh)?this.scanner.source.charCodeAt(this.scanner.tokenStart+1)!==yl?(this.scanner.next(),this.eat(ca)):n&&this.error("Identifier is expected",this.scanner.tokenEnd):n&&this.error("Vertical line is expected"),l&&this.scanner.tokenType===_F&&(this.scanner.next(),this.eat(ca)),{type:"Identifier",loc:this.getLocation(a,this.scanner.tokenStart),name:this.scanner.substrToCursor(a)}}function WF(){var a=this.scanner.tokenStart,n=this.scanner.source.charCodeAt(a);return n!==yl&&n!==MF&&n!==zF&&n!==FF&&n!==$x&&n!==nh&&this.error("Attribute selector (=, ~=, ^=, $=, *=, |=) is expected"),this.scanner.next(),n!==yl&&(this.scanner.isDelim(yl)||this.error("Equal sign is expected"),this.scanner.next()),this.scanner.substrToCursor(a)}Yx.exports={name:"AttributeSelector",structure:{name:"Identifier",matcher:[String,null],value:["String","Identifier",null],flags:[String,null]},parse:function(){var a=this.scanner.tokenStart,n,l=null,d=null,h=null;return this.eat(BF),this.scanner.skipSC(),n=DF.call(this),this.scanner.skipSC(),this.scanner.tokenType!==Gx&&(this.scanner.tokenType!==ca&&(l=WF.call(this),this.scanner.skipSC(),d=this.scanner.tokenType===LF?this.String():this.Identifier(),this.scanner.skipSC()),this.scanner.tokenType===ca&&(h=this.scanner.getTokenValue(),this.scanner.next(),this.scanner.skipSC())),this.eat(Gx),{type:"AttributeSelector",loc:this.getLocation(a,this.scanner.tokenStart),name:n,matcher:l,value:d,flags:h}},generate:function(a){var n=" ";this.chunk("["),this.node(a.name),a.matcher!==null&&(this.chunk(a.matcher),a.value!==null&&(this.node(a.value),a.value.type==="String"&&(n=""))),a.flags!==null&&(this.chunk(n),this.chunk(a.flags)),this.chunk("]")}}});var tw=D((Mj,ew)=>{var Vn=oe().TYPE,jF=xr().mode,qF=Vn.WhiteSpace,VF=Vn.Comment,Kx=Vn.Semicolon,HF=Vn.AtKeyword,UF=Vn.LeftCurlyBracket,Zx=Vn.RightCurlyBracket;function Jx(a){return this.Raw(a,null,!0)}function GF(){return this.parseWithFallback(this.Rule,Jx)}function Qx(a){return this.Raw(a,jF.semicolonIncluded,!0)}function $F(){if(this.scanner.tokenType===Kx)return Qx.call(this,this.scanner.tokenIndex);var a=this.parseWithFallback(this.Declaration,Qx);return this.scanner.tokenType===Kx&&this.scanner.next(),a}ew.exports={name:"Block",structure:{children:[["Atrule","Rule","Declaration"]]},parse:function(a){var n=a?$F:GF,l=this.scanner.tokenStart,d=this.createList();this.eat(UF);e:for(;!this.scanner.eof;)switch(this.scanner.tokenType){case Zx:break e;case qF:case VF:this.scanner.next();break;case HF:d.push(this.parseWithFallback(this.Atrule,Jx));break;default:d.push(n.call(this))}return this.scanner.eof||this.eat(Zx),{type:"Block",loc:this.getLocation(l,this.scanner.tokenStart),children:d}},generate:function(a){this.chunk("{"),this.children(a,function(n){n.type==="Declaration"&&this.chunk(";")}),this.chunk("}")},walkContext:"block"}});var nw=D((Dj,rw)=>{var iw=oe().TYPE,YF=iw.LeftSquareBracket,XF=iw.RightSquareBracket;rw.exports={name:"Brackets",structure:{children:[[]]},parse:function(a,n){var l=this.scanner.tokenStart,d=null;return this.eat(YF),d=a.call(this,n),this.scanner.eof||this.eat(XF),{type:"Brackets",loc:this.getLocation(l,this.scanner.tokenStart),children:d}},generate:function(a){this.chunk("["),this.children(a),this.chunk("]")}}});var aw=D((Wj,sw)=>{var KF=oe().TYPE.CDC;sw.exports={name:"CDC",structure:[],parse:function(){var a=this.scanner.tokenStart;return this.eat(KF),{type:"CDC",loc:this.getLocation(a,this.scanner.tokenStart)}},generate:function(){this.chunk("-->")}}});var lw=D((jj,ow)=>{var ZF=oe().TYPE.CDO;ow.exports={name:"CDO",structure:[],parse:function(){var a=this.scanner.tokenStart;return this.eat(ZF),{type:"CDO",loc:this.getLocation(a,this.scanner.tokenStart)}},generate:function(){this.chunk("<!--")}}});var uw=D((qj,dw)=>{var QF=oe().TYPE,JF=QF.Ident,ez=46;dw.exports={name:"ClassSelector",structure:{name:String},parse:function(){return this.scanner.isDelim(ez)||this.error("Full stop is expected"),this.scanner.next(),{type:"ClassSelector",loc:this.getLocation(this.scanner.tokenStart-1,this.scanner.tokenEnd),name:this.consume(JF)}},generate:function(a){this.chunk("."),this.chunk(a.name)}}});var pw=D((Vj,hw)=>{var tz=oe().TYPE,iz=tz.Ident,rz=43,cw=47,nz=62,sz=126;hw.exports={name:"Combinator",structure:{name:String},parse:function(){var a=this.scanner.tokenStart,n=this.scanner.source.charCodeAt(this.scanner.tokenStart);switch(n){case nz:case rz:case sz:this.scanner.next();break;case cw:this.scanner.next(),(this.scanner.tokenType!==iz||this.scanner.lookupValue(0,"deep")===!1)&&this.error("Identifier `deep` is expected"),this.scanner.next(),this.scanner.isDelim(cw)||this.error("Solidus is expected"),this.scanner.next();break;default:this.error("Combinator is expected")}return{type:"Combinator",loc:this.getLocation(a,this.scanner.tokenStart),name:this.scanner.substrToCursor(a)}},generate:function(a){this.chunk(a.name)}}});var gw=D((Hj,mw)=>{var az=oe().TYPE,oz=az.Comment,lz=42,dz=47;mw.exports={name:"Comment",structure:{value:String},parse:function(){var a=this.scanner.tokenStart,n=this.scanner.tokenEnd;return this.eat(oz),n-a+2>=2&&this.scanner.source.charCodeAt(n-2)===lz&&this.scanner.source.charCodeAt(n-1)===dz&&(n-=2),{type:"Comment",loc:this.getLocation(a,this.scanner.tokenStart),value:this.scanner.source.substring(a+2,n)}},generate:function(a){this.chunk("/*"),this.chunk(a.value),this.chunk("*/")}}});var kw=D((Uj,Cw)=>{var uz=Vo().isCustomProperty,Hn=oe().TYPE,yw=xr().mode,vw=Hn.Ident,fw=Hn.Hash,cz=Hn.Colon,Sw=Hn.Semicolon,xw=Hn.Delim,hz=Hn.WhiteSpace,ww=33,pz=35,mz=36,gz=38,fz=42,bz=43,bw=47;function yz(a){return this.Raw(a,yw.exclamationMarkOrSemicolon,!0)}function vz(a){return this.Raw(a,yw.exclamationMarkOrSemicolon,!1)}function Sz(){var a=this.scanner.tokenIndex,n=this.Value();return n.type!=="Raw"&&this.scanner.eof===!1&&this.scanner.tokenType!==Sw&&this.scanner.isDelim(ww)===!1&&this.scanner.isBalanceEdge(a)===!1&&this.error(),n}Cw.exports={name:"Declaration",structure:{important:[Boolean,String],property:String,value:["Value","Raw"]},parse:function(){var a=this.scanner.tokenStart,n=this.scanner.tokenIndex,l=xz.call(this),d=uz(l),h=d?this.parseCustomProperty:this.parseValue,g=d?vz:yz,b=!1,x;this.scanner.skipSC(),this.eat(cz);let C=this.scanner.tokenIndex;if(d||this.scanner.skipSC(),h?x=this.parseWithFallback(Sz,g):x=g.call(this,this.scanner.tokenIndex),d&&x.type==="Value"&&x.children.isEmpty()){for(let I=C-this.scanner.tokenIndex;I<=0;I++)if(this.scanner.lookupType(I)===hz){x.children.appendData({type:"WhiteSpace",loc:null,value:" "});break}}return this.scanner.isDelim(ww)&&(b=wz.call(this),this.scanner.skipSC()),this.scanner.eof===!1&&this.scanner.tokenType!==Sw&&this.scanner.isBalanceEdge(n)===!1&&this.error(),{type:"Declaration",loc:this.getLocation(a,this.scanner.tokenStart),important:b,property:l,value:x}},generate:function(a){this.chunk(a.property),this.chunk(":"),this.node(a.value),a.important&&this.chunk(a.important===!0?"!important":"!"+a.important)},walkContext:"declaration"};function xz(){var a=this.scanner.tokenStart,n=0;if(this.scanner.tokenType===xw)switch(this.scanner.source.charCodeAt(this.scanner.tokenStart)){case fz:case mz:case bz:case pz:case gz:this.scanner.next();break;case bw:this.scanner.next(),this.scanner.isDelim(bw)&&this.scanner.next();break}return n&&this.scanner.skip(n),this.scanner.tokenType===fw?this.eat(fw):this.eat(vw),this.scanner.substrToCursor(a)}function wz(){this.eat(xw),this.scanner.skipSC();var a=this.consume(vw);return a==="important"?!0:a}});var Tw=D((Gj,Ew)=>{var sh=oe().TYPE,Cz=xr().mode,kz=sh.WhiteSpace,Ez=sh.Comment,Tz=sh.Semicolon;function Pz(a){return this.Raw(a,Cz.semicolonIncluded,!0)}Ew.exports={name:"DeclarationList",structure:{children:[["Declaration"]]},parse:function(){for(var a=this.createList();!this.scanner.eof;)switch(this.scanner.tokenType){case kz:case Ez:case Tz:this.scanner.next();break;default:a.push(this.parseWithFallback(this.Declaration,Pz))}return{type:"DeclarationList",loc:this.getLocationFromList(a),children:a}},generate:function(a){this.children(a,function(n){n.type==="Declaration"&&this.chunk(";")})}}});var Aw=D(($j,Pw)=>{var Az=On().consumeNumber,Nz=oe().TYPE,Iz=Nz.Dimension;Pw.exports={name:"Dimension",structure:{value:String,unit:String},parse:function(){var a=this.scanner.tokenStart,n=Az(this.scanner.source,a);return this.eat(Iz),{type:"Dimension",loc:this.getLocation(a,this.scanner.tokenStart),value:this.scanner.source.substring(a,n),unit:this.scanner.source.substring(n,this.scanner.tokenStart)}},generate:function(a){this.chunk(a.value),this.chunk(a.unit)}}});var Iw=D((Yj,Nw)=>{var Oz=oe().TYPE,Rz=Oz.RightParenthesis;Nw.exports={name:"Function",structure:{name:String,children:[[]]},parse:function(a,n){var l=this.scanner.tokenStart,d=this.consumeFunctionName(),h=d.toLowerCase(),g;return g=n.hasOwnProperty(h)?n[h].call(this,n):a.call(this,n),this.scanner.eof||this.eat(Rz),{type:"Function",loc:this.getLocation(l,this.scanner.tokenStart),name:d,children:g}},generate:function(a){this.chunk(a.name),this.chunk("("),this.children(a),this.chunk(")")},walkContext:"function"}});var Rw=D((Xj,Ow)=>{var Lz=oe().TYPE,_z=Lz.Hash;Ow.exports={name:"Hash",structure:{value:String},parse:function(){var a=this.scanner.tokenStart;return this.eat(_z),{type:"Hash",loc:this.getLocation(a,this.scanner.tokenStart),value:this.scanner.substrToCursor(a+1)}},generate:function(a){this.chunk("#"),this.chunk(a.value)}}});var _w=D((Kj,Lw)=>{var Bz=oe().TYPE,Fz=Bz.Ident;Lw.exports={name:"Identifier",structure:{name:String},parse:function(){return{type:"Identifier",loc:this.getLocation(this.scanner.tokenStart,this.scanner.tokenEnd),name:this.consume(Fz)}},generate:function(a){this.chunk(a.name)}}});var Fw=D((Zj,Bw)=>{var zz=oe().TYPE,Mz=zz.Hash;Bw.exports={name:"IdSelector",structure:{name:String},parse:function(){var a=this.scanner.tokenStart;return this.eat(Mz),{type:"IdSelector",loc:this.getLocation(a,this.scanner.tokenStart),name:this.scanner.substrToCursor(a+1)}},generate:function(a){this.chunk("#"),this.chunk(a.name)}}});var Ww=D((Qj,Dw)=>{var qr=oe().TYPE,zw=qr.Ident,Dz=qr.Number,Wz=qr.Dimension,jz=qr.LeftParenthesis,Mw=qr.RightParenthesis,qz=qr.Colon,Vz=qr.Delim;Dw.exports={name:"MediaFeature",structure:{name:String,value:["Identifier","Number","Dimension","Ratio",null]},parse:function(){var a=this.scanner.tokenStart,n,l=null;if(this.eat(jz),this.scanner.skipSC(),n=this.consume(zw),this.scanner.skipSC(),this.scanner.tokenType!==Mw){switch(this.eat(qz),this.scanner.skipSC(),this.scanner.tokenType){case Dz:this.lookupNonWSType(1)===Vz?l=this.Ratio():l=this.Number();break;case Wz:l=this.Dimension();break;case zw:l=this.Identifier();break;default:this.error("Number, dimension, ratio or identifier is expected")}this.scanner.skipSC()}return this.eat(Mw),{type:"MediaFeature",loc:this.getLocation(a,this.scanner.tokenStart),name:n,value:l}},generate:function(a){this.chunk("("),this.chunk(a.name),a.value!==null&&(this.chunk(":"),this.node(a.value)),this.chunk(")")}}});var qw=D((Jj,jw)=>{var vl=oe().TYPE,Hz=vl.WhiteSpace,Uz=vl.Comment,Gz=vl.Ident,$z=vl.LeftParenthesis;jw.exports={name:"MediaQuery",structure:{children:[["Identifier","MediaFeature","WhiteSpace"]]},parse:function(){this.scanner.skipSC();var a=this.createList(),n=null,l=null;e:for(;!this.scanner.eof;){switch(this.scanner.tokenType){case Uz:this.scanner.next();continue;case Hz:l=this.WhiteSpace();continue;case Gz:n=this.Identifier();break;case $z:n=this.MediaFeature();break;default:break e}l!==null&&(a.push(l),l=null),a.push(n)}return n===null&&this.error("Identifier or parenthesis is expected"),{type:"MediaQuery",loc:this.getLocationFromList(a),children:a}},generate:function(a){this.children(a)}}});var Hw=D((e2,Vw)=>{var Yz=oe().TYPE.Comma;Vw.exports={name:"MediaQueryList",structure:{children:[["MediaQuery"]]},parse:function(a){var n=this.createList();for(this.scanner.skipSC();!this.scanner.eof&&(n.push(this.MediaQuery(a)),this.scanner.tokenType===Yz);)this.scanner.next();return{type:"MediaQueryList",loc:this.getLocationFromList(n),children:n}},generate:function(a){this.children(a,function(){this.chunk(",")})}}});var Gw=D((t2,Uw)=>{Uw.exports={name:"Nth",structure:{nth:["AnPlusB","Identifier"],selector:["SelectorList",null]},parse:function(a){this.scanner.skipSC();var n=this.scanner.tokenStart,l=n,d=null,h;return this.scanner.lookupValue(0,"odd")||this.scanner.lookupValue(0,"even")?h=this.Identifier():h=this.AnPlusB(),this.scanner.skipSC(),a&&this.scanner.lookupValue(0,"of")?(this.scanner.next(),d=this.SelectorList(),this.needPositions&&(l=this.getLastListNode(d.children).loc.end.offset)):this.needPositions&&(l=h.loc.end.offset),{type:"Nth",loc:this.getLocation(n,l),nth:h,selector:d}},generate:function(a){this.node(a.nth),a.selector!==null&&(this.chunk(" of "),this.node(a.selector))}}});var Yw=D((i2,$w)=>{var Xz=oe().TYPE.Number;$w.exports={name:"Number",structure:{value:String},parse:function(){return{type:"Number",loc:this.getLocation(this.scanner.tokenStart,this.scanner.tokenEnd),value:this.consume(Xz)}},generate:function(a){this.chunk(a.value)}}});var Kw=D((r2,Xw)=>{Xw.exports={name:"Operator",structure:{value:String},parse:function(){var a=this.scanner.tokenStart;return this.scanner.next(),{type:"Operator",loc:this.getLocation(a,this.scanner.tokenStart),value:this.scanner.substrToCursor(a)}},generate:function(a){this.chunk(a.value)}}});var Jw=D((n2,Qw)=>{var Zw=oe().TYPE,Kz=Zw.LeftParenthesis,Zz=Zw.RightParenthesis;Qw.exports={name:"Parentheses",structure:{children:[[]]},parse:function(a,n){var l=this.scanner.tokenStart,d=null;return this.eat(Kz),d=a.call(this,n),this.scanner.eof||this.eat(Zz),{type:"Parentheses",loc:this.getLocation(l,this.scanner.tokenStart),children:d}},generate:function(a){this.chunk("("),this.children(a),this.chunk(")")}}});var t0=D((s2,e0)=>{var Qz=On().consumeNumber,Jz=oe().TYPE,eM=Jz.Percentage;e0.exports={name:"Percentage",structure:{value:String},parse:function(){var a=this.scanner.tokenStart,n=Qz(this.scanner.source,a);return this.eat(eM),{type:"Percentage",loc:this.getLocation(a,this.scanner.tokenStart),value:this.scanner.source.substring(a,n)}},generate:function(a){this.chunk(a.value),this.chunk("%")}}});var r0=D((a2,i0)=>{var Sl=oe().TYPE,tM=Sl.Ident,iM=Sl.Function,rM=Sl.Colon,nM=Sl.RightParenthesis;i0.exports={name:"PseudoClassSelector",structure:{name:String,children:[["Raw"],null]},parse:function(){var a=this.scanner.tokenStart,n=null,l,d;return this.eat(rM),this.scanner.tokenType===iM?(l=this.consumeFunctionName(),d=l.toLowerCase(),this.pseudo.hasOwnProperty(d)?(this.scanner.skipSC(),n=this.pseudo[d].call(this),this.scanner.skipSC()):(n=this.createList(),n.push(this.Raw(this.scanner.tokenIndex,null,!1))),this.eat(nM)):l=this.consume(tM),{type:"PseudoClassSelector",loc:this.getLocation(a,this.scanner.tokenStart),name:l,children:n}},generate:function(a){this.chunk(":"),this.chunk(a.name),a.children!==null&&(this.chunk("("),this.children(a),this.chunk(")"))},walkContext:"function"}});var a0=D((o2,s0)=>{var xl=oe().TYPE,sM=xl.Ident,aM=xl.Function,n0=xl.Colon,oM=xl.RightParenthesis;s0.exports={name:"PseudoElementSelector",structure:{name:String,children:[["Raw"],null]},parse:function(){var a=this.scanner.tokenStart,n=null,l,d;return this.eat(n0),this.eat(n0),this.scanner.tokenType===aM?(l=this.consumeFunctionName(),d=l.toLowerCase(),this.pseudo.hasOwnProperty(d)?(this.scanner.skipSC(),n=this.pseudo[d].call(this),this.scanner.skipSC()):(n=this.createList(),n.push(this.Raw(this.scanner.tokenIndex,null,!1))),this.eat(oM)):l=this.consume(sM),{type:"PseudoElementSelector",loc:this.getLocation(a,this.scanner.tokenStart),name:l,children:n}},generate:function(a){this.chunk("::"),this.chunk(a.name),a.children!==null&&(this.chunk("("),this.children(a),this.chunk(")"))},walkContext:"function"}});var u0=D((l2,d0)=>{var lM=oe().isDigit,l0=oe().TYPE,dM=l0.Number,uM=l0.Delim,cM=47,hM=46;function o0(){this.scanner.skipWS();for(var a=this.consume(dM),n=0;n<a.length;n++){var l=a.charCodeAt(n);!lM(l)&&l!==hM&&this.error("Unsigned number is expected",this.scanner.tokenStart-a.length+n)}return Number(a)===0&&this.error("Zero number is not allowed",this.scanner.tokenStart-a.length),a}d0.exports={name:"Ratio",structure:{left:String,right:String},parse:function(){var a=this.scanner.tokenStart,n=o0.call(this),l;return this.scanner.skipWS(),this.scanner.isDelim(cM)||this.error("Solidus is expected"),this.eat(uM),l=o0.call(this),{type:"Ratio",loc:this.getLocation(a,this.scanner.tokenStart),left:n,right:l}},generate:function(a){this.chunk(a.left),this.chunk("/"),this.chunk(a.right)}}});var p0=D((d2,h0)=>{var pM=oe().TYPE,mM=xr().mode,gM=pM.LeftCurlyBracket;function c0(a){return this.Raw(a,mM.leftCurlyBracket,!0)}function fM(){var a=this.SelectorList();return a.type!=="Raw"&&this.scanner.eof===!1&&this.scanner.tokenType!==gM&&this.error(),a}h0.exports={name:"Rule",structure:{prelude:["SelectorList","Raw"],block:["Block"]},parse:function(){var a=this.scanner.tokenIndex,n=this.scanner.tokenStart,l,d;return this.parseRulePrelude?l=this.parseWithFallback(fM,c0):l=c0.call(this,a),d=this.Block(!0),{type:"Rule",loc:this.getLocation(n,this.scanner.tokenStart),prelude:l,block:d}},generate:function(a){this.node(a.prelude),this.node(a.block)},walkContext:"rule"}});var g0=D((u2,m0)=>{m0.exports={name:"Selector",structure:{children:[["TypeSelector","IdSelector","ClassSelector","AttributeSelector","PseudoClassSelector","PseudoElementSelector","Combinator","WhiteSpace"]]},parse:function(){var a=this.readSequence(this.scope.Selector);return this.getFirstListNode(a)===null&&this.error("Selector is expected"),{type:"Selector",loc:this.getLocationFromList(a),children:a}},generate:function(a){this.children(a)}}});var b0=D((c2,f0)=>{var bM=oe().TYPE,yM=bM.Comma;f0.exports={name:"SelectorList",structure:{children:[["Selector","Raw"]]},parse:function(){for(var a=this.createList();!this.scanner.eof;){if(a.push(this.Selector()),this.scanner.tokenType===yM){this.scanner.next();continue}break}return{type:"SelectorList",loc:this.getLocationFromList(a),children:a}},generate:function(a){this.children(a,function(){this.chunk(",")})},walkContext:"selector"}});var v0=D((h2,y0)=>{var vM=oe().TYPE.String;y0.exports={name:"String",structure:{value:String},parse:function(){return{type:"String",loc:this.getLocation(this.scanner.tokenStart,this.scanner.tokenEnd),value:this.consume(vM)}},generate:function(a){this.chunk(a.value)}}});var w0=D((p2,x0)=>{var pa=oe().TYPE,SM=pa.WhiteSpace,xM=pa.Comment,wM=pa.AtKeyword,CM=pa.CDO,kM=pa.CDC,EM=33;function S0(a){return this.Raw(a,null,!1)}x0.exports={name:"StyleSheet",structure:{children:[["Comment","CDO","CDC","Atrule","Rule","Raw"]]},parse:function(){for(var a=this.scanner.tokenStart,n=this.createList(),l;!this.scanner.eof;){switch(this.scanner.tokenType){case SM:this.scanner.next();continue;case xM:if(this.scanner.source.charCodeAt(this.scanner.tokenStart+2)!==EM){this.scanner.next();continue}l=this.Comment();break;case CM:l=this.CDO();break;case kM:l=this.CDC();break;case wM:l=this.parseWithFallback(this.Atrule,S0);break;default:l=this.parseWithFallback(this.Rule,S0)}n.push(l)}return{type:"StyleSheet",loc:this.getLocation(a,this.scanner.tokenStart),children:n}},generate:function(a){this.children(a)},walkContext:"stylesheet"}});var E0=D((m2,k0)=>{var TM=oe().TYPE,PM=TM.Ident,AM=42,C0=124;function ah(){this.scanner.tokenType!==PM&&this.scanner.isDelim(AM)===!1&&this.error("Identifier or asterisk is expected"),this.scanner.next()}k0.exports={name:"TypeSelector",structure:{name:String},parse:function(){var a=this.scanner.tokenStart;return this.scanner.isDelim(C0)?(this.scanner.next(),ah.call(this)):(ah.call(this),this.scanner.isDelim(C0)&&(this.scanner.next(),ah.call(this))),{type:"TypeSelector",loc:this.getLocation(a,this.scanner.tokenStart),name:this.scanner.substrToCursor(a)}},generate:function(a){this.chunk(a.name)}}});var O0=D((g2,I0)=>{var NM=oe().isHexDigit,T0=oe().cmpChar,dh=oe().TYPE,IM=oe().NAME,OM=dh.Ident,P0=dh.Number,A0=dh.Dimension,Cl=43,N0=45,lh=63,RM=117;function ma(a,n){for(var l=this.scanner.tokenStart+a,d=0;l<this.scanner.tokenEnd;l++){var h=this.scanner.source.charCodeAt(l);if(h===N0&&n&&d!==0)return ma.call(this,a+d+1,!1)===0&&this.error(),-1;NM(h)||this.error(n&&d!==0?"HyphenMinus"+(d<6?" or hex digit":"")+" is expected":d<6?"Hex digit is expected":"Unexpected input",l),++d>6&&this.error("Too many hex digits",l)}return this.scanner.next(),d}function wl(a){for(var n=0;this.scanner.isDelim(lh);)++n>a&&this.error("Too many question marks"),this.scanner.next()}function oh(a){this.scanner.source.charCodeAt(this.scanner.tokenStart)!==a&&this.error(IM[a]+" is expected")}function LM(){var a=0;if(this.scanner.isDelim(Cl)){if(this.scanner.next(),this.scanner.tokenType===OM){a=ma.call(this,0,!0),a>0&&wl.call(this,6-a);return}if(this.scanner.isDelim(lh)){this.scanner.next(),wl.call(this,5);return}this.error("Hex digit or question mark is expected");return}if(this.scanner.tokenType===P0){if(oh.call(this,Cl),a=ma.call(this,1,!0),this.scanner.isDelim(lh)){wl.call(this,6-a);return}if(this.scanner.tokenType===A0||this.scanner.tokenType===P0){oh.call(this,N0),ma.call(this,1,!1);return}return}if(this.scanner.tokenType===A0){oh.call(this,Cl),a=ma.call(this,1,!0),a>0&&wl.call(this,6-a);return}this.error()}I0.exports={name:"UnicodeRange",structure:{value:String},parse:function(){var a=this.scanner.tokenStart;return T0(this.scanner.source,a,RM)||this.error("U is expected"),T0(this.scanner.source,a+1,Cl)||this.error("Plus sign is expected"),this.scanner.next(),LM.call(this),{type:"UnicodeRange",loc:this.getLocation(a,this.scanner.tokenStart),value:this.scanner.substrToCursor(a)}},generate:function(a){this.chunk(a.value)}}});var F0=D((f2,B0)=>{var R0=oe().isWhiteSpace,_M=oe().cmpStr,uh=oe().TYPE,L0=uh.Function,_0=uh.Url,BM=uh.RightParenthesis;B0.exports={name:"Url",structure:{value:["String","Raw"]},parse:function(){var a=this.scanner.tokenStart,n;switch(this.scanner.tokenType){case _0:for(var l=a+4,d=this.scanner.tokenEnd-1;l<d&&R0(this.scanner.source.charCodeAt(l));)l++;for(;l<d&&R0(this.scanner.source.charCodeAt(d-1));)d--;n={type:"Raw",loc:this.getLocation(l,d),value:this.scanner.source.substring(l,d)},this.eat(_0);break;case L0:_M(this.scanner.source,this.scanner.tokenStart,this.scanner.tokenEnd,"url(")||this.error("Function name must be `url`"),this.eat(L0),this.scanner.skipSC(),n=this.String(),this.scanner.skipSC(),this.eat(BM);break;default:this.error("Url or Function is expected")}return{type:"Url",loc:this.getLocation(a,this.scanner.tokenStart),value:n}},generate:function(a){this.chunk("url"),this.chunk("("),this.node(a.value),this.chunk(")")}}});var M0=D((b2,z0)=>{z0.exports={name:"Value",structure:{children:[[]]},parse:function(){var a=this.scanner.tokenStart,n=this.readSequence(this.scope.Value);return{type:"Value",loc:this.getLocation(a,this.scanner.tokenStart),children:n}},generate:function(a){this.children(a)}}});var W0=D((y2,D0)=>{var FM=oe().TYPE.WhiteSpace,zM=Object.freeze({type:"WhiteSpace",loc:null,value:" "});D0.exports={name:"WhiteSpace",structure:{value:String},parse:function(){return this.eat(FM),zM},generate:function(a){this.chunk(a.value)}}});var kl=D((v2,j0)=>{j0.exports={AnPlusB:_x(),Atrule:qx(),AtrulePrelude:Ux(),AttributeSelector:Xx(),Block:tw(),Brackets:nw(),CDC:aw(),CDO:lw(),ClassSelector:uw(),Combinator:pw(),Comment:gw(),Declaration:kw(),DeclarationList:Tw(),Dimension:Aw(),Function:Iw(),Hash:Rw(),Identifier:_w(),IdSelector:Fw(),MediaFeature:Ww(),MediaQuery:qw(),MediaQueryList:Hw(),Nth:Gw(),Number:Yw(),Operator:Kw(),Parentheses:Jw(),Percentage:t0(),PseudoClassSelector:r0(),PseudoElementSelector:a0(),Ratio:u0(),Raw:xr(),Rule:p0(),Selector:g0(),SelectorList:b0(),String:v0(),StyleSheet:w0(),TypeSelector:E0(),UnicodeRange:O0(),Url:F0(),Value:M0(),WhiteSpace:W0()}});var V0=D((S2,q0)=>{var ch=Ax();q0.exports={generic:!0,types:ch.types,atrules:ch.atrules,properties:ch.properties,node:kl()}});var hh=D((x2,G0)=>{var H0=oe().cmpChar,MM=oe().cmpStr,Ci=oe().TYPE,DM=Ci.Ident,WM=Ci.String,jM=Ci.Number,qM=Ci.Function,VM=Ci.Url,HM=Ci.Hash,UM=Ci.Dimension,GM=Ci.Percentage,$M=Ci.LeftParenthesis,YM=Ci.LeftSquareBracket,XM=Ci.Comma,KM=Ci.Delim,ZM=35,QM=42,U0=43,JM=45,eD=47,tD=117;G0.exports=function(n){switch(this.scanner.tokenType){case HM:return this.Hash();case XM:return n.space=null,n.ignoreWSAfter=!0,this.Operator();case $M:return this.Parentheses(this.readSequence,n.recognizer);case YM:return this.Brackets(this.readSequence,n.recognizer);case WM:return this.String();case UM:return this.Dimension();case GM:return this.Percentage();case jM:return this.Number();case qM:return MM(this.scanner.source,this.scanner.tokenStart,this.scanner.tokenEnd,"url(")?this.Url():this.Function(this.readSequence,n.recognizer);case VM:return this.Url();case DM:return H0(this.scanner.source,this.scanner.tokenStart,tD)&&H0(this.scanner.source,this.scanner.tokenStart+1,U0)?this.UnicodeRange():this.Identifier();case KM:var l=this.scanner.source.charCodeAt(this.scanner.tokenStart);if(l===eD||l===QM||l===U0||l===JM)return this.Operator();l===ZM&&this.error("Hex or identifier is expected",this.scanner.tokenStart+1);break}}});var Y0=D((w2,$0)=>{$0.exports={getNode:hh()}});var Q0=D((C2,Z0)=>{var wr=oe().TYPE,iD=wr.Delim,rD=wr.Ident,nD=wr.Dimension,sD=wr.Percentage,aD=wr.Number,oD=wr.Hash,X0=wr.Colon,lD=wr.LeftSquareBracket,dD=35,uD=42,cD=43,hD=47,K0=46,pD=62,mD=124,gD=126;function fD(a){switch(this.scanner.tokenType){case lD:return this.AttributeSelector();case oD:return this.IdSelector();case X0:return this.scanner.lookupType(1)===X0?this.PseudoElementSelector():this.PseudoClassSelector();case rD:return this.TypeSelector();case aD:case sD:return this.Percentage();case nD:this.scanner.source.charCodeAt(this.scanner.tokenStart)===K0&&this.error("Identifier is expected",this.scanner.tokenStart+1);break;case iD:var n=this.scanner.source.charCodeAt(this.scanner.tokenStart);switch(n){case cD:case pD:case gD:return a.space=null,a.ignoreWSAfter=!0,this.Combinator();case hD:return this.Combinator();case K0:return this.ClassSelector();case uD:case mD:return this.TypeSelector();case dD:return this.IdSelector()}break}}Z0.exports={getNode:fD}});var eC=D((k2,J0)=>{J0.exports=function(){return this.createSingleNodeList(this.Raw(this.scanner.tokenIndex,null,!1))}});var rC=D((E2,iC)=>{var tC=oe().TYPE,bD=xr().mode,yD=tC.Comma,vD=tC.WhiteSpace;iC.exports=function(){var a=this.createList();if(this.scanner.skipSC(),a.push(this.Identifier()),this.scanner.skipSC(),this.scanner.tokenType===yD){a.push(this.Operator());let n=this.scanner.tokenIndex,l=this.parseCustomProperty?this.Value(null):this.Raw(this.scanner.tokenIndex,bD.exclamationMarkOrSemicolon,!1);if(l.type==="Value"&&l.children.isEmpty()){for(let d=n-this.scanner.tokenIndex;d<=0;d++)if(this.scanner.lookupType(d)===vD){l.children.appendData({type:"WhiteSpace",loc:null,value:" "});break}}a.push(l)}return a}});var sC=D((T2,nC)=>{nC.exports={getNode:hh(),expression:eC(),var:rC()}});var oC=D((P2,aC)=>{aC.exports={AtrulePrelude:Y0(),Selector:Q0(),Value:sC()}});var dC=D((A2,lC)=>{lC.exports={parse:{prelude:null,block:function(){return this.Block(!0)}}}});var cC=D((N2,uC)=>{var ga=oe().TYPE,SD=ga.String,xD=ga.Ident,wD=ga.Url,CD=ga.Function,kD=ga.LeftParenthesis;uC.exports={parse:{prelude:function(){var a=this.createList();switch(this.scanner.skipSC(),this.scanner.tokenType){case SD:a.push(this.String());break;case wD:case CD:a.push(this.Url());break;default:this.error("String or url() is expected")}return(this.lookupNonWSType(0)===xD||this.lookupNonWSType(0)===kD)&&(a.push(this.WhiteSpace()),a.push(this.MediaQueryList())),a},block:null}}});var pC=D((I2,hC)=>{hC.exports={parse:{prelude:function(){return this.createSingleNodeList(this.MediaQueryList())},block:function(){return this.Block(!1)}}}});var gC=D((O2,mC)=>{mC.exports={parse:{prelude:function(){return this.createSingleNodeList(this.SelectorList())},block:function(){return this.Block(!0)}}}});var vC=D((R2,yC)=>{var Un=oe().TYPE,ED=Un.WhiteSpace,TD=Un.Comment,fC=Un.Ident,PD=Un.Function,AD=Un.Colon,ND=Un.LeftParenthesis;function ID(){return this.createSingleNodeList(this.Raw(this.scanner.tokenIndex,null,!1))}function OD(){return this.scanner.skipSC(),this.scanner.tokenType===fC&&this.lookupNonWSType(1)===AD?this.createSingleNodeList(this.Declaration()):bC.call(this)}function bC(){var a=this.createList(),n=null,l;this.scanner.skipSC();e:for(;!this.scanner.eof;){switch(this.scanner.tokenType){case ED:n=this.WhiteSpace();continue;case TD:this.scanner.next();continue;case PD:l=this.Function(ID,this.scope.AtrulePrelude);break;case fC:l=this.Identifier();break;case ND:l=this.Parentheses(OD,this.scope.AtrulePrelude);break;default:break e}n!==null&&(a.push(n),n=null),a.push(l)}return a}yC.exports={parse:{prelude:function(){var a=bC.call(this);return this.getFirstListNode(a)===null&&this.error("Condition is expected"),a},block:function(){return this.Block(!1)}}}});var xC=D((L2,SC)=>{SC.exports={"font-face":dC(),import:cC(),media:pC(),page:gC(),supports:vC()}});var CC=D((_2,wC)=>{wC.exports={parse:function(){return this.createSingleNodeList(this.Identifier())}}});var EC=D((B2,kC)=>{kC.exports={parse:function(){return this.createSingleNodeList(this.SelectorList())}}});var PC=D((F2,TC)=>{TC.exports={parse:function(){return this.createSingleNodeList(this.Identifier())}}});var ph=D((z2,AC)=>{AC.exports={parse:function(){return this.createSingleNodeList(this.SelectorList())}}});var IC=D((M2,NC)=>{NC.exports=ph()});var RC=D((D2,OC)=>{OC.exports=ph()});var mh=D((W2,LC)=>{var RD=!0;LC.exports={parse:function(){return this.createSingleNodeList(this.Nth(RD))}}});var BC=D((j2,_C)=>{_C.exports=mh()});var zC=D((q2,FC)=>{FC.exports=mh()});var gh=D((V2,MC)=>{var LD=!1;MC.exports={parse:function(){return this.createSingleNodeList(this.Nth(LD))}}});var WC=D((H2,DC)=>{DC.exports=gh()});var qC=D((U2,jC)=>{jC.exports=gh()});var HC=D((G2,VC)=>{VC.exports={parse:function(){return this.createSingleNodeList(this.Selector())}}});var GC=D(($2,UC)=>{UC.exports={dir:CC(),has:EC(),lang:PC(),matches:IC(),not:RC(),"nth-child":BC(),"nth-last-child":zC(),"nth-last-of-type":WC(),"nth-of-type":qC(),slotted:HC()}});var YC=D((Y2,$C)=>{$C.exports={parseContext:{default:"StyleSheet",stylesheet:"StyleSheet",atrule:"Atrule",atrulePrelude:function(a){return this.AtrulePrelude(a.atrule?String(a.atrule):null)},mediaQueryList:"MediaQueryList",mediaQuery:"MediaQuery",rule:"Rule",selectorList:"SelectorList",selector:"Selector",block:function(){return this.Block(!0)},declarationList:"DeclarationList",declaration:"Declaration",value:"Value"},scope:oC(),atrule:xC(),pseudo:GC(),node:kl()}});var KC=D((X2,XC)=>{XC.exports={node:kl()}});var ZC=D((K2,_D)=>{_D.exports={name:"css-tree",version:"1.1.3",description:"A tool set for CSS: fast detailed parser (CSS \u2192 AST), walker (AST traversal), generator (AST \u2192 CSS) and lexer (validation and matching) based on specs and browser implementations",author:"Roman Dvornov <rdvornov@gmail.com> (https://github.com/lahmatiy)",license:"MIT",repository:"csstree/csstree",keywords:["css","ast","tokenizer","parser","walker","lexer","generator","utils","syntax","validation"],main:"lib/index.js",unpkg:"dist/csstree.min.js",jsdelivr:"dist/csstree.min.js",scripts:{build:"rollup --config",lint:"eslint data lib scripts test && node scripts/review-syntax-patch --lint && node scripts/update-docs --lint","lint-and-test":"npm run lint && npm test","update:docs":"node scripts/update-docs","review:syntax-patch":"node scripts/review-syntax-patch",test:"mocha --reporter progress",coverage:"nyc npm test",travis:"nyc npm run lint-and-test && npm run coveralls",coveralls:"nyc report --reporter=text-lcov | coveralls",prepublishOnly:"npm run build",hydrogen:"node --trace-hydrogen --trace-phase=Z --trace-deopt --code-comments --hydrogen-track-positions --redirect-code-traces --redirect-code-traces-to=code.asm --trace_hydrogen_file=code.cfg --print-opt-code bin/parse --stat -o /dev/null"},dependencies:{"mdn-data":"2.0.14","source-map":"^0.6.1"},devDependencies:{"@rollup/plugin-commonjs":"^11.0.2","@rollup/plugin-json":"^4.0.2","@rollup/plugin-node-resolve":"^7.1.1",coveralls:"^3.0.9",eslint:"^6.8.0","json-to-ast":"^2.1.0",mocha:"^6.2.3",nyc:"^14.1.1",rollup:"^1.32.1","rollup-plugin-terser":"^5.3.0"},engines:{node:">=8.0.0"},files:["data","dist","lib"]}});var QC=D((Z2,fh)=>{function BD(){for(var a={},n=0;n<arguments.length;n++){var l=arguments[n];for(var d in l)a[d]=l[d]}return a}fh.exports=Sx().create(BD(V0(),YC(),KC()));fh.exports.version=ZC().version});var Gt=D((Q2,JC)=>{JC.exports=QC()});var Nk=D(ya=>{var FD=/(\[[^\]]+\])/g,zD=/(#[^\s\+>~\.\[:]+)/g,MD=/(\.[^\s\+>~\.\[:]+)/g,DD=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/g,WD=/(:[^\s\+>~\.\[:]+)/g,jD=/([^\s\+>~\.\[:]+)/g,qD=/:not\(([^\)]*)\)/g,VD=/\{[^]*/gm,HD=/[\*\s\+>~]/g,UD=/[#\.]/g,$n=function(a,n,l,d){var h=d.match(a);if(h)for(var g=0;g<h.length;g++)l[n]++,d=d.replace(h[g]," ");return d},GD=function(a){var n=a.indexOf(",");n!==-1&&(a=a.substring(0,n));var l={a:0,b:0,c:0};return a=a.replace(qD," $1 "),a=a.replace(VD," "),a=$n(FD,"b",l,a),a=$n(zD,"a",l,a),a=$n(MD,"b",l,a),a=$n(DD,"c",l,a),a=$n(WD,"b",l,a),a=a.replace(HD," "),a=a.replace(UD," "),$n(jD,"c",l,a),l.a*100+l.b*10+l.c*1},Pk={};ya.calculateSpecificity=function(a){var n=Pk[a];return n===void 0&&(n=GD(a),Pk[a]=n),n};var Ak={},Vh=null;ya.isSelectorValid=function(a){var n=Ak[a];if(n===void 0){Vh==null&&(Vh=document.createElement("div"));try{Vh.querySelector(a),n=!0}catch{n=!1}Ak[a]=n}return n};ya.validateSelector=function(a){if(!ya.isSelectorValid(a)){var n=new SyntaxError(a+" is not a valid selector");throw n.code="EBADSELECTOR",n}}});var Bk=D((_V,_k)=>{"use strict";_k.exports=function(){var a=Array.from,n,l;return typeof a!="function"?!1:(n=["raz","dwa"],l=a(n),!!(l&&l!==n&&l[1]==="dwa"))}});var zk=D((BV,Fk)=>{"use strict";Fk.exports=function(){return typeof globalThis!="object"||!globalThis?!1:globalThis.Array===Array}});var Wk=D((FV,Dk)=>{var Mk=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};Dk.exports=(function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return Mk()}try{return __global__||Mk()}finally{delete Object.prototype.__global__}})()});var va=D((zV,jk)=>{"use strict";jk.exports=zk()()?globalThis:Wk()});var Vk=D((MV,qk)=>{"use strict";var $D=va(),Uh={object:!0,symbol:!0};qk.exports=function(){var a=$D.Symbol,n;if(typeof a!="function")return!1;n=a("test symbol");try{String(n)}catch{return!1}return!(!Uh[typeof a.iterator]||!Uh[typeof a.toPrimitive]||!Uh[typeof a.toStringTag])}});var Uk=D((DV,Hk)=>{"use strict";Hk.exports=function(a){return a?typeof a=="symbol"?!0:!a.constructor||a.constructor.name!=="Symbol"?!1:a[a.constructor.toStringTag]==="Symbol":!1}});var Gh=D((WV,Gk)=>{"use strict";var YD=Uk();Gk.exports=function(a){if(!YD(a))throw new TypeError(a+" is not a symbol");return a}});var Zk=D((jV,Kk)=>{"use strict";var $k=zr(),XD=Object.create,Yk=Object.defineProperty,KD=Object.prototype,Xk=XD(null);Kk.exports=function(a){for(var n=0,l,d;Xk[a+(n||"")];)++n;return a+=n||"",Xk[a]=!0,l="@@"+a,Yk(KD,l,$k.gs(null,function(h){d||(d=!0,Yk(this,l,$k(h)),d=!1)})),l}});var Jk=D((qV,Qk)=>{"use strict";var Ai=zr(),mt=va().Symbol;Qk.exports=function(a){return Object.defineProperties(a,{hasInstance:Ai("",mt&&mt.hasInstance||a("hasInstance")),isConcatSpreadable:Ai("",mt&&mt.isConcatSpreadable||a("isConcatSpreadable")),iterator:Ai("",mt&&mt.iterator||a("iterator")),match:Ai("",mt&&mt.match||a("match")),replace:Ai("",mt&&mt.replace||a("replace")),search:Ai("",mt&&mt.search||a("search")),species:Ai("",mt&&mt.species||a("species")),split:Ai("",mt&&mt.split||a("split")),toPrimitive:Ai("",mt&&mt.toPrimitive||a("toPrimitive")),toStringTag:Ai("",mt&&mt.toStringTag||a("toStringTag")),unscopables:Ai("",mt&&mt.unscopables||a("unscopables"))})}});var iE=D((VV,tE)=>{"use strict";var eE=zr(),ZD=Gh(),Sa=Object.create(null);tE.exports=function(a){return Object.defineProperties(a,{for:eE(function(n){return Sa[n]?Sa[n]:Sa[n]=a(String(n))}),keyFor:eE(function(n){var l;ZD(n);for(l in Sa)if(Sa[l]===n)return l})})}});var sE=D((HV,nE)=>{"use strict";var Bi=zr(),$h=Gh(),Nl=va().Symbol,QD=Zk(),JD=Jk(),e3=iE(),t3=Object.create,Yh=Object.defineProperties,Il=Object.defineProperty,$t,Yn,rE;if(typeof Nl=="function")try{String(Nl()),rE=!0}catch{}else Nl=null;Yn=function(n){if(this instanceof Yn)throw new TypeError("Symbol is not a constructor");return $t(n)};nE.exports=$t=function a(n){var l;if(this instanceof a)throw new TypeError("Symbol is not a constructor");return rE?Nl(n):(l=t3(Yn.prototype),n=n===void 0?"":String(n),Yh(l,{__description__:Bi("",n),__name__:Bi("",QD(n))}))};JD($t);e3($t);Yh(Yn.prototype,{constructor:Bi($t),toString:Bi("",function(){return this.__name__})});Yh($t.prototype,{toString:Bi(function(){return"Symbol ("+$h(this).__description__+")"}),valueOf:Bi(function(){return $h(this)})});Il($t.prototype,$t.toPrimitive,Bi("",function(){var a=$h(this);return typeof a=="symbol"?a:a.toString()}));Il($t.prototype,$t.toStringTag,Bi("c","Symbol"));Il(Yn.prototype,$t.toStringTag,Bi("c",$t.prototype[$t.toStringTag]));Il(Yn.prototype,$t.toPrimitive,Bi("c",$t.prototype[$t.toPrimitive]))});var oE=D((UV,aE)=>{"use strict";aE.exports=Vk()()?va().Symbol:sE()});var uE=D((GV,dE)=>{"use strict";var lE=Object.prototype.toString,i3=lE.call((function(){return arguments})());dE.exports=function(a){return lE.call(a)===i3}});var hE=D(($V,cE)=>{"use strict";var r3=Object.prototype.toString,n3=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);cE.exports=function(a){return typeof a=="function"&&n3(r3.call(a))}});var mE=D((YV,pE)=>{"use strict";pE.exports=function(){var a=Math.sign;return typeof a!="function"?!1:a(10)===1&&a(-20)===-1}});var fE=D((XV,gE)=>{"use strict";gE.exports=function(a){return a=Number(a),isNaN(a)||a===0?a:a>0?1:-1}});var yE=D((KV,bE)=>{"use strict";bE.exports=mE()()?Math.sign:fE()});var SE=D((ZV,vE)=>{"use strict";var s3=yE(),a3=Math.abs,o3=Math.floor;vE.exports=function(a){return isNaN(a)?0:(a=Number(a),a===0||!isFinite(a)?a:s3(a)*o3(a3(a)))}});var Xh=D((QV,xE)=>{"use strict";var l3=SE(),d3=Math.max;xE.exports=function(a){return d3(0,l3(a))}});var kE=D((JV,CE)=>{"use strict";var wE=Object.prototype.toString,u3=wE.call("");CE.exports=function(a){return typeof a=="string"||a&&typeof a=="object"&&(a instanceof String||wE.call(a)===u3)||!1}});var AE=D((eH,PE)=>{"use strict";var c3=oE().iterator,h3=uE(),p3=hE(),m3=Xh(),EE=_u(),g3=Ao(),f3=En(),b3=kE(),TE=Array.isArray,Kh=Function.prototype.call,Vr={configurable:!0,enumerable:!0,writable:!0,value:null},Zh=Object.defineProperty;PE.exports=function(a){var n=arguments[1],l=arguments[2],d,h,g,b,x,C,I,B,z,k;if(a=Object(g3(a)),f3(n)&&EE(n),!this||this===Array||!p3(this)){if(!n){if(h3(a))return x=a.length,x!==1?Array.apply(null,a):(b=new Array(1),b[0]=a[0],b);if(TE(a)){for(b=new Array(x=a.length),h=0;h<x;++h)b[h]=a[h];return b}}b=[]}else d=this;if(!TE(a)){if((z=a[c3])!==void 0){for(I=EE(z).call(a),d&&(b=new d),B=I.next(),h=0;!B.done;)k=n?Kh.call(n,l,B.value,h):B.value,d?(Vr.value=k,Zh(b,h,Vr)):b[h]=k,B=I.next(),++h;x=h}else if(b3(a)){for(x=a.length,d&&(b=new d),h=0,g=0;h<x;++h)k=a[h],h+1<x&&(C=k.charCodeAt(0),C>=55296&&C<=56319&&(k+=a[++h])),k=n?Kh.call(n,l,k,g):k,d?(Vr.value=k,Zh(b,g,Vr)):b[g]=k,++g;x=g}}if(x===void 0)for(x=m3(a.length),d&&(b=new d(x)),h=0;h<x;++h)k=n?Kh.call(n,l,a[h],h):a[h],d?(Vr.value=k,Zh(b,h,Vr)):b[h]=k;return d&&(Vr.value=null,b.length=x),b}});var IE=D((tH,NE)=>{"use strict";NE.exports=Bk()()?Array.from:AE()});var RE=D((iH,OE)=>{"use strict";OE.exports=function(){var a=Number.isNaN;return typeof a!="function"?!1:!a({})&&a(NaN)&&!a(34)}});var _E=D((rH,LE)=>{"use strict";LE.exports=function(a){return a!==a}});var FE=D((nH,BE)=>{"use strict";BE.exports=RE()()?Number.isNaN:_E()});var jE=D((sH,WE)=>{"use strict";var zE=FE(),ME=Xh(),y3=Ao(),v3=Array.prototype.indexOf,S3=Object.prototype.hasOwnProperty,x3=Math.abs,DE=Math.floor;WE.exports=function(a){var n,l,d,h;if(!zE(a))return v3.apply(this,arguments);for(l=ME(y3(this).length),d=arguments[1],isNaN(d)?d=0:d>=0?d=DE(d):d=ME(this.length)-DE(x3(d)),n=d;n<l;++n)if(S3.call(this,n)&&(h=this[n],zE(h)))return n;return-1}});var VE=D((aH,qE)=>{"use strict";var w3=jE(),C3=Array.prototype.forEach,k3=Array.prototype.splice;qE.exports=function(a){C3.call(arguments,function(n){var l=w3.call(this,n);l!==-1&&k3.call(this,l,1)},this)}});var UE=D((oH,HE)=>{"use strict";var E3=En(),T3={function:!0,object:!0};HE.exports=function(a){return E3(a)&&T3[typeof a]||!1}});var $E=D((lH,GE)=>{"use strict";var P3=UE();GE.exports=function(a){if(!P3(a))throw new TypeError(a+" is not an Object");return a}});var JE=D((dH,QE)=>{"use strict";var A3=IE(),N3=VE(),YE=$E(),XE=zr(),KE=fr().methods.emit,ZE=Object.defineProperty,I3=Object.prototype.hasOwnProperty,O3=Object.getOwnPropertyDescriptor;QE.exports=function(a,n){var l,d,h,g;return YE(a)&&YE(n),g=arguments[2],g===void 0&&(g="emit"),d={close:function(){N3.call(l,n)}},I3.call(a,"__eePipes__")?((l=a.__eePipes__).push(n),d):(ZE(a,"__eePipes__",XE("c",l=[n])),h=O3(a,g),h?(delete h.get,delete h.set):h=XE("c",void 0),h.value=function(){var b,x,C=A3(l);for(KE.apply(this,arguments),b=0;x=C[b];++b)KE.apply(x,arguments)},ZE(a,g,h),d)}});function mo(a){if(!a)return;let n;if(typeof a.getBoundingClientRect<"u")n=a.getBoundingClientRect();else{let l=document.createRange();l.selectNode(a),n=l.getBoundingClientRect()}return n}function nb(a){if(!a)return;let n;if(typeof a.getClientRects<"u")n=a.getClientRects();else{let l=document.createRange();l.selectNode(a),n=l.getClientRects()}return n}function Kt(){var a=new Date().getTime();return typeof performance<"u"&&typeof performance.now=="function"&&(a+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var l=(a+Math.random()*16)%16|0;return a=Math.floor(a/16),(n==="x"?l:l&3|8).toString(16)})}function go(a,n){for(var l=0;l<n.length;l++)if(a.hasAttribute(n[l]))return a.getAttribute(n[l])}function fo(a){if(arguments.length==0)throw new TypeError("`CSS.escape` requires an argument.");for(var n=String(a),l=n.length,d=-1,h,g="",b=n.charCodeAt(0);++d<l;){if(h=n.charCodeAt(d),h==0){g+="\uFFFD";continue}if(h>=1&&h<=31||h==127||d==0&&h>=48&&h<=57||d==1&&h>=48&&h<=57&&b==45){g+="\\"+h.toString(16)+" ";continue}if(d==0&&l==1&&h==45){g+="\\"+n.charAt(d);continue}if(h==46&&n.charAt(0)=="#"){g+="\\.";continue}if(h>=128||h==45||h==95||h==35||h==46||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122){g+=n.charAt(d);continue}g+="\\"+n.charAt(d)}return g}function bo(){this.resolve=null,this.reject=null,this.id=Kt(),this.promise=new Promise((a,n)=>{this.resolve=a,this.reject=n}),Object.freeze(this)}var sb=typeof window<"u"&&("requestIdleCallback"in window?window.requestIdleCallback:window.requestAnimationFrame);function de(a){return a.value+(a.unit||"")}function _t(a){return a&&a.nodeType===1}function Xi(a){return a&&a.nodeType===3}function*js(a,n){let l=a;for(;l;)if(yield l,l.childNodes.length)l=l.firstChild;else if(l.nextSibling){if(n&&l===n){l=void 0;break}l=l.nextSibling}else for(;l;){if(l=l.parentNode,n&&l===n){l=void 0;break}if(l&&l.nextSibling){l=l.nextSibling;break}}}function mr(a,n){if(n&&a===n)return;let l=vo(a);if(l)return l;if(a.parentNode)for(;a=a.parentNode;){if(n&&a===n)return;if(l=vo(a),l)return l}}function Ws(a,n){if(n&&a===n)return;let l=yo(a);if(l)return l;if(a.parentNode)for(;a=a.parentNode;){if(n&&a===n)return;if(l=yo(a),l)return l}}function ab(a,n){let l=mr(a,n);for(;l&&l.nodeType!==1;)l=mr(l,n);return l}function ob(a,n){let l=Ws(a,n);for(;l&&l.nodeType!==1;)l=Ws(l,n);return l}function Au(a,n){let l=ab(a,n);for(;l&&l.dataset.undisplayed;)l=ab(l,n);return l}function db(a,n){let l=ob(a,n);for(;l&&l.dataset.undisplayed;)l=ob(l,n);return l}function So(a){let n,l,d=[],h=[],g=document.createDocumentFragment();if(a.nodeName==="TR"){let C=a.previousElementSibling,I=1;for(;C;){if(C.childElementCount>a.childElementCount){let B=Array.from(a.children);for(;a.firstChild;)a.firstChild.remove();let z=0;for(let k=0;k<C.children.length;k++){let M=C.children[k];if(M.rowSpan&&M.rowSpan>I){let f=M.cloneNode(!0);f.rowSpan=M.rowSpan-I,a.appendChild(f)}else{let f=B[z++];f&&a.appendChild(f)}}}C=C.previousElementSibling,I++}}let b=a;for(;b.parentNode&&b.parentNode.nodeType===1;)d.unshift(b.parentNode),b=b.parentNode;for(var x=0;x<d.length;x++){if(l=d[x],n=l.cloneNode(!1),n.setAttribute("data-split-from",n.getAttribute("data-ref")),n.hasAttribute("id")){let C=n.getAttribute("id");n.setAttribute("data-id",C),n.removeAttribute("id")}if(n.hasAttribute("data-break-before")&&n.removeAttribute("data-break-before"),n.hasAttribute("data-previous-break-after")&&n.removeAttribute("data-previous-break-after"),h.length?h[h.length-1].appendChild(n):g.appendChild(n),h.push(n),n.nodeName==="TD"&&l.parentElement.contains(l)){let C=l,I=n;for(;C=C.previousElementSibling;){let B=C.cloneNode(!1);n.parentElement.insertBefore(B,I),I=B}}}return h=void 0,g}function xo(a){return typeof a<"u"&&typeof a.dataset<"u"&&typeof a.dataset.breakBefore<"u"&&(a.dataset.breakBefore==="always"||a.dataset.breakBefore==="page"||a.dataset.breakBefore==="left"||a.dataset.breakBefore==="right"||a.dataset.breakBefore==="recto"||a.dataset.breakBefore==="verso")}function ub(a){return typeof a<"u"&&typeof a.dataset<"u"&&typeof a.dataset.previousBreakAfter<"u"&&(a.dataset.previousBreakAfter==="always"||a.dataset.previousBreakAfter==="page"||a.dataset.previousBreakAfter==="left"||a.dataset.previousBreakAfter==="right"||a.dataset.previousBreakAfter==="recto"||a.dataset.previousBreakAfter==="verso")}function wo(a,n){if(typeof a>"u"||!n||Vs(a)||a.dataset&&a.dataset.undisplayed)return!1;let l=n.dataset?n.dataset.page:void 0;if(typeof l>"u"){let h=lb(n);h&&(l=h.dataset.page)}let d=a.dataset?a.dataset.page:void 0;if(typeof d>"u"){let h=lb(a,n);h&&(d=h.dataset.page)}return d!==l}function*cb(a){let n=a.nodeValue,l=n.length,d=0,h,g,b=a.parentElement&&a.parentElement.nodeName==="PRE";for(;d<l;)h=n[d],/^[\S\u202F\u00A0]$/.test(h)||b?g||(g=document.createRange(),g.setStart(a,d)):g&&(g.setEnd(a,d),yield g,g=void 0),d+=1;g&&(g.setEnd(a,d),yield g)}function*hb(a){let n=a.startContainer,l=n.length,d=a.startOffset,h;for(;d<l;)h=document.createRange(),h.setStart(n,d),h.setEnd(n,d+1),yield h,d+=1}function Co(a){let n;if(typeof a.tagName>"u")return!0;if(a.style&&a.style.display==="none")return!1;switch(a.tagName){case"A":case"ABBR":case"ACRONYM":case"B":case"BDO":case"BIG":case"BR":case"BUTTON":case"CITE":case"CODE":case"DFN":case"EM":case"I":case"IMG":case"INPUT":case"KBD":case"LABEL":case"MAP":case"OBJECT":case"Q":case"SAMP":case"SCRIPT":case"SELECT":case"SMALL":case"SPAN":case"STRONG":case"SUB":case"SUP":case"TEXTAREA":case"TIME":case"TT":case"VAR":case"P":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"FIGCAPTION":case"BLOCKQUOTE":case"PRE":case"LI":case"TD":case"DT":case"DD":case"VIDEO":case"CANVAS":n=!1;break;default:n=!0}return n}function pb(a,n=!1){return a.cloneNode(n)}function Ft(a,n,l){let d=a.getAttribute("data-ref");return gR(d,n,l)}function gR(a,n,l){return!l&&n.indexOfRefs&&n.indexOfRefs[a]?n.indexOfRefs[a]:n.querySelector(`[data-ref='${a}']`)}function ko(a){return!!(Xi(a)||_t(a)&&a.dataset.ref)}function qs(a){for(;!ko(a)&&(a.previousSibling?a=a.previousSibling:a=a.parentNode,!!a););return a}function mb(a){let n=a.parentNode;return n?Array.prototype.indexOf.call(n.childNodes,a):0}function Eo(a,n){return a.childNodes[n]}function gb(a){return _t(a)?!0:!!(Xi(a)&&a.textContent.trim().length)}function Nu(a,n){if(!Xi(a))return-1;let l=a.textContent,d,h=-1;for(var g=0;g<n.childNodes.length;g++)if(d=n.childNodes[g],d.nodeType===3&&n.childNodes[g].textContent.includes(l)){h=g;break}return h}function Vs(a){return a.nodeType===8||a.nodeType===3&&fR(a)}function fR(a){return!/[^\t\n\r ]/.test(a.textContent)}function yo(a){for(;a=a.previousSibling;)if(!Vs(a))return a;return null}function lb(a,n){if(a&&a.dataset&&a.dataset.page)return a;if(a.parentNode)for(;a=a.parentNode;){if(n&&a===n)return;if(a.dataset&&a.dataset.page)return a}return null}function fb(a){for(;a=a.parentNode;)if(a&&a.dataset&&a.dataset.breakInside==="avoid")return a;return null}function To(a,n,l){if(!(l&&a===l)&&a.parentNode)for(;a=a.parentNode;){if(l&&a===l)return;if(a.nodeName===n)return a}}function vo(a){for(;a=a.nextSibling;)if(!Vs(a))return a;return null}function Po(a,n,l){let d=document.createTreeWalker(a||this.dom,l||NodeFilter.SHOW_ALL,n?{acceptNode:n}:null,!1),h,g;for(h=d.nextNode();h;)g=h,h=d.nextNode(),g.parentNode.removeChild(g)}var Iu=class{constructor(n,l){this.node=n,this.offset=l}equals(n){return!(!n||this.node&&n.node&&this.node!==n.node||this.offset&&n.offset&&this.offset!==n.offset)}toJSON(n){let l,d=0;return this.node?(_t(this.node)&&this.node.dataset.ref?l=this.node.dataset.ref:n&&(l=this.node.parentElement.dataset.ref),this.node.parentElement&&(d=Array.from(this.node.parentElement.childNodes).indexOf(this.node)),JSON.stringify({node:l,index:d,offset:this.offset})):{}}},Cn=Iu;var Ou=class{constructor(n,l){this.breakToken=n,this.error=l}},gr=class extends Error{constructor(n,l){super(n),this.items=l}},kn=Ou;var ay=ot(fr(),1);var Hu=class{constructor(n){this.context=n||this,this.hooks=[]}register(){for(var n=0;n<arguments.length;++n)if(typeof arguments[n]=="function")this.hooks.push(arguments[n]);else for(var l=0;l<arguments[n].length;++l)this.hooks.push(arguments[n][l])}trigger(){var n=arguments,l=this.context,d=[];return this.hooks.forEach(function(h){var g=h.apply(l,n);g&&typeof g.then=="function"?d.push(g):d.push(new Promise((b,x)=>{b(g)}))}),Promise.all(d)}triggerSync(){var n=arguments,l=this.context,d=[];return this.hooks.forEach(function(h){var g=h.apply(l,n);d.push(g)}),d}list(){return this.hooks}clear(){return this.hooks=[]}},pe=Hu;var DR=1500,Lo=class{constructor(n,l,d){this.element=n,this.bounds=this.element.getBoundingClientRect(),this.parentBounds=this.element.offsetParent.getBoundingClientRect();let h=parseFloat(window.getComputedStyle(this.element).columnGap);if(h){let g=this.bounds.left-this.parentBounds.left;this.gap=h-g}else this.gap=0;l?this.hooks=l:(this.hooks={},this.hooks.onPageLayout=new pe,this.hooks.layout=new pe,this.hooks.renderNode=new pe,this.hooks.layoutNode=new pe,this.hooks.beforeOverflow=new pe,this.hooks.onOverflow=new pe,this.hooks.afterOverflowRemoved=new pe,this.hooks.onBreakToken=new pe,this.hooks.beforeRenderResult=new pe),this.settings=d||{},this.maxChars=this.settings.maxChars||DR,this.forceRenderBreak=!1}async renderTo(n,l,d,h=this.bounds){let g=this.getStart(l,d),b=js(g,l),x,C,I,B,z=!1,k,M=0,f=d||new Cn(g);for(this.hooks&&this.hooks.onPageLayout.trigger(n,f,this);!I&&!k;){if(B=b.next(),C=x,x=B.value,I=B.done,!x){this.hooks&&this.hooks.layout.trigger(n,this);let V=n.querySelectorAll("img");return V.length&&await this.waitForImages(V),k=this.findBreakToken(n,l,h,f),k&&k.equals(f)?(console.warn("Unable to layout item: ",C),this.hooks&&this.hooks.beforeRenderResult.trigger(void 0,n,this),new kn(void 0,new gr("Unable to layout item",[C]))):(this.rebuildTableFromBreakToken(k,n),this.hooks&&this.hooks.beforeRenderResult.trigger(k,n,this),new kn(k))}if(this.hooks&&this.hooks.layoutNode.trigger(x),z&&this.shouldBreak(x,g)){this.hooks&&this.hooks.layout.trigger(n,this);let V=n.querySelectorAll("img");if(V.length&&await this.waitForImages(V),k=this.findBreakToken(n,l,h,f),k?this.rebuildTableFromBreakToken(k,n):k=this.breakAt(x),k&&k.equals(f)){console.warn("Unable to layout item: ",x);let K=k.node&&mr(k.node);if(K)k=new Cn(K);else return new kn(void 0,new gr("Unable to layout item",[x]))}M=0;break}if(x.dataset&&x.dataset.page){let V=x.dataset.page,K=this.element.closest(".pagedjs_page");K.classList.add("pagedjs_named_page"),K.classList.add("pagedjs_"+V+"_page"),x.dataset.splitFrom||K.classList.add("pagedjs_"+V+"_first_page")}let Y=Co(x),se=this.append(x,n,d,Y);if(M+=se.textContent.length,z||(z=gb(x)),Y||(b=js(mr(x,l),l)),this.forceRenderBreak){this.hooks&&this.hooks.layout.trigger(n,this),k=this.findBreakToken(n,l,h,f),k?this.rebuildTableFromBreakToken(k,n):k=this.breakAt(x),M=0,this.forceRenderBreak=!1;break}if(M>=this.maxChars){this.hooks&&this.hooks.layout.trigger(n,this);let V=n.querySelectorAll("img");if(V.length&&await this.waitForImages(V),k=this.findBreakToken(n,l,h,f),k&&(M=0,this.rebuildTableFromBreakToken(k,n)),k&&k.equals(f)){console.warn("Unable to layout item: ",x);let K=k.node&&mr(k.node);if(K)k=new Cn(K);else return this.hooks&&this.hooks.beforeRenderResult.trigger(void 0,n,this),new kn(void 0,new gr("Unable to layout item",[x]))}}}return this.hooks&&this.hooks.beforeRenderResult.trigger(k,n,this),new kn(k)}breakAt(n,l=0){let d=new Cn(n,l);return this.hooks.onBreakToken.triggerSync(d,void 0,n,this).forEach(g=>{typeof g<"u"&&(d=g)}),d}shouldBreak(n,l){let d=Ws(n,l),h=n.parentNode,g=xo(n)&&h&&!d&&xo(h),b;return g&&(b=n.dataset.breakBefore===h.dataset.breakBefore),!b&&xo(n)||ub(n)||wo(n,d)}forceBreak(){this.forceRenderBreak=!0}getStart(n,l){let d,h=l&&l.node;return h?d=h:d=n.firstChild,d}append(n,l,d,h=!0,g=!0){let b=pb(n,!h);if(n.parentNode&&_t(n.parentNode)){let C=Ft(n.parentNode,l);if(C)C.appendChild(b);else if(g){let I=So(n);C=Ft(n.parentNode,I),C?(d&&Xi(d.node)&&d.offset>0&&(b.textContent=b.textContent.substring(d.offset)),C.appendChild(b)):l.appendChild(b),l.appendChild(I)}else l.appendChild(b)}else l.appendChild(b);return b.dataset&&b.dataset.ref&&(l.indexOfRefs||(l.indexOfRefs={}),l.indexOfRefs[b.dataset.ref]=b),this.hooks.renderNode.triggerSync(b,n,this).forEach(C=>{typeof C<"u"&&(b=C)}),b}rebuildTableFromBreakToken(n,l){if(!n||!n.node)return;let d=n.node,h=_t(d)?d.closest("td"):d.parentElement.closest("td");if(h){if(!Ft(h,l,!0))return;for(;h=h.nextElementSibling;)this.append(h,l,null,!0)}}async waitForImages(n){let l=Array.from(n).map(async d=>this.awaitImageLoaded(d));await Promise.all(l)}async awaitImageLoaded(n){return new Promise(l=>{if(n.complete!==!0)n.onload=function(){let{width:d,height:h}=window.getComputedStyle(n);l(d,h)},n.onerror=function(d){let{width:h,height:g}=window.getComputedStyle(n);l(h,g,d)};else{let{width:d,height:h}=window.getComputedStyle(n);l(d,h)}})}avoidBreakInside(n,l){let d;if(n!==l){for(;n.parentNode&&(n=n.parentNode,n!==l);)if(window.getComputedStyle(n)["break-inside"]==="avoid"){d=n;break}return d}}createBreakToken(n,l,d){let h=n.startContainer,g=n.startOffset,b,x,C,I,B;if(_t(h))if(B=Eo(h,g),_t(B))if(x=Ft(B,l),x)b=Ft(x,d),g=0;else{let z=qs(B);if(_t(z)||(z=z.parentElement),x=Ft(z,l),!B.nextSibling){let k=Ft(x,d),f=document.createTreeWalker(k,NodeFilter.SHOW_ELEMENT).lastChild();if(!Ft(f,l))return}b=Ft(x,d).nextSibling,g=0}else x=Ft(h,l),x||(x=Ft(qs(h),l)),C=Ft(x,d),I=Nu(B,C),I===0?(b=C,g=0):(b=Eo(C,I),g=0);else{if(x=Ft(h.parentNode,l),x||(x=Ft(qs(h.parentNode),l)),C=Ft(x,d),I=Nu(h,C),I===-1)return;b=Eo(C,I),g+=b.textContent.indexOf(h.textContent)}if(b)return new Cn(b,g)}findBreakToken(n,l,d=this.bounds,h,g=!0){let b=this.findOverflow(n,d),x,C;if(this.hooks.onOverflow.triggerSync(b,n,d,this).forEach(B=>{typeof B<"u"&&(b=B)}),b){if(x=this.createBreakToken(b,n,l),this.hooks.onBreakToken.triggerSync(x,b,n,this).forEach(z=>{typeof z<"u"&&(x=z)}),x&&x.equals(h))return x;if(x&&x.node&&x.offset&&x.node.textContent?C=x.node.textContent.charAt(x.offset):C=void 0,x&&x.node&&g){let z=this.removeOverflow(b,C);this.hooks&&this.hooks.afterOverflowRemoved.trigger(z,n,this)}}return x}hasOverflow(n,l=this.bounds){let d=n&&n.parentNode,{width:h,height:g}=n.getBoundingClientRect(),b=d?d.scrollWidth:0,x=d?d.scrollHeight:0;return Math.max(Math.floor(h),b)>Math.round(l.width)||Math.max(Math.floor(g),x)>Math.round(l.height)}findOverflow(n,l=this.bounds,d=this.gap){if(!this.hasOverflow(n,l))return;let h=Math.floor(l.left),g=Math.round(l.right+d),b=Math.round(l.top),x=Math.round(l.bottom),C,I=js(n.firstChild,n),B,z,k,M,f,Y,se,V;for(;!z;)if(B=I.next(),z=B.done,k=B.value,f=!1,Y=!1,se=void 0,V=void 0,k){let fe=mo(k),me=Math.round(fe.left),He=Math.floor(fe.right),Ae=Math.round(fe.top),zt=Math.floor(fe.bottom);if(!C&&(me>=g||Ae>=x)){let Ze=!1,Ge=To(k,"TD",n);if(Ge&&window.getComputedStyle(Ge)["break-inside"]==="avoid")se=Ge.parentElement;else if(_t(k)){let ee=window.getComputedStyle(k);Ze=ee.getPropertyValue("float")!=="none",f=ee.getPropertyValue("break-inside")==="avoid",Y=k.dataset.breakBefore==="avoid"||k.dataset.previousBreakAfter==="avoid",se=Y&&Ws(k,n),V=k.tagName==="BR"||k.tagName==="WBR"}let Ct;if(k.nodeName==="TR"?Ct=k:Ct=To(k,"TR",n),Ct){let ee=Ct.parentElement;["TBODY","THEAD"].includes(ee.nodeName)&&window.getComputedStyle(ee).getPropertyValue("break-inside")==="avoid"&&(se=ee);let Qe=To(Ct,"TABLE",n),At=Qe.querySelector("[colspan]");if(Qe&&At){let De=0;for(let gt of Array.from(Qe.rows[0].cells))De+=parseInt(gt.getAttribute("colspan")||"1");if(Ct.cells.length!==De){let gt=Ct.previousElementSibling,Je;for(;gt!==null;){Je=0;for(let Hr of Array.from(gt.cells))Je+=parseInt(Hr.getAttribute("colspan")||"1");if(Je===De)break;gt=gt.previousElementSibling}Je===De&&(se=gt)}}}if(se){C=document.createRange(),C.selectNode(se);break}if(!V&&!Ze&&_t(k)){C=document.createRange(),C.selectNode(k);break}if(Xi(k)&&k.textContent.trim().length){C=document.createRange(),C.selectNode(k);break}}if(!C&&Xi(k)&&k.textContent.trim().length&&!fb(k.parentNode)){let Ze=nb(k),Ge;me=0,Ae=0;for(var K=0;K!=Ze.length;K++)Ge=Ze[K],Ge.width>0&&(!me||Ge.left>me)&&(me=Ge.left),Ge.height>0&&(!Ae||Ge.top>Ae)&&(Ae=Ge.top);if(me>=g||Ae>=x){C=document.createRange(),M=this.textBreak(k,h,g,b,x),M?C.setStart(k,M):C=void 0;break}}(f||He<=g&&zt<=x)&&(B=mr(k,n),B&&(I=js(B,n)))}if(C)return C.setEndAfter(n.lastChild),C}findEndToken(n,l){if(n.childNodes.length===0)return;let d=n.lastChild,h;for(;d&&d.lastChild;)if(!ko(d))d=d.previousSibling;else if(ko(d.lastChild))d=d.lastChild;else{d=qs(d.lastChild);break}Xi(d)&&(d.parentNode.dataset.ref?(h=mb(d),d=d.parentNode):d=d.previousSibling);let g=Ft(d,l);h&&(g=g.childNodes[h]);let b=mr(g);return this.breakAt(b)}textBreak(n,l,d,h,g){let b=cb(n),x=0,C=0,I=0,B=0,z,k,M,f,Y;for(;!M&&(k=b.next(),z=k.value,M=k.done,!!z);){if(f=mo(z),x=Math.floor(f.left),C=Math.floor(f.right),I=Math.floor(f.top),B=Math.floor(f.bottom),x>=d||I>=g){Y=z.startOffset;break}if(C>d||B>g){let se=hb(z),V,K,fe;for(;!fe&&(K=se.next(),V=K.value,fe=K.done,!!V);)if(f=mo(V),x=Math.floor(f.left),I=Math.floor(f.top),x>=d||I>=g){Y=V.startOffset,M=!0;break}}}return Y}removeOverflow(n,l){let{startContainer:d}=n,h=n.extractContents();return this.hyphenateAtBreak(d,l),h}hyphenateAtBreak(n,l){if(Xi(n)){let d=n.textContent,h=d[d.length-1];(l&&/^\w|\u00AD$/.test(h)&&/^\w|\u00AD$/.test(l)||!l&&/^\w|\u00AD$/.test(h))&&(n.parentNode.classList.add("pagedjs_hyphen"),n.textContent+=this.settings.hyphenGlyph||"\u2011")}}equalTokens(n,l){return!(!n||!l||n.node&&l.node&&n.node!==l.node||n.offset&&l.offset&&n.offset!==l.offset)}};(0,ay.default)(Lo.prototype);var _o=Lo;var oy=ot(fr(),1),Bo=class{constructor(n,l,d,h,g){this.pagesArea=n,this.pageTemplate=l,this.blank=d,this.width=void 0,this.height=void 0,this.hooks=h,this.settings=g||{}}create(n,l){let d=document.importNode(this.pageTemplate.content,!0),h,g;l?(this.pagesArea.insertBefore(d,l.nextElementSibling),g=Array.prototype.indexOf.call(this.pagesArea.children,l.nextElementSibling),h=this.pagesArea.children[g]):(this.pagesArea.appendChild(d),h=this.pagesArea.lastChild);let b=h.querySelector(".pagedjs_pagebox"),x=h.querySelector(".pagedjs_page_content"),C=h.querySelector(".pagedjs_footnote_area"),I=x.getBoundingClientRect();return x.style.columnWidth=Math.round(I.width)+"px",x.style.columnGap="calc(var(--pagedjs-margin-right) + var(--pagedjs-margin-left) + var(--pagedjs-bleed-right) + var(--pagedjs-bleed-left) + var(--pagedjs-column-gap-offset))",this.width=Math.round(I.width),this.height=Math.round(I.height),this.element=h,this.pagebox=b,this.area=x,this.footnotesArea=C,h}createWrapper(){let n=document.createElement("div");return this.area.appendChild(n),this.wrapper=n,n}index(n){this.position=n;let l=this.element,d=n+1,h=`page-${d}`;this.id=h,l.dataset.pageNumber=d,l.setAttribute("id",h),this.name&&l.classList.add("pagedjs_"+this.name+"_page"),this.blank&&l.classList.add("pagedjs_blank_page"),n===0&&l.classList.add("pagedjs_first_page"),n%2!==1?(l.classList.remove("pagedjs_left_page"),l.classList.add("pagedjs_right_page")):(l.classList.remove("pagedjs_right_page"),l.classList.add("pagedjs_left_page"))}async layout(n,l,d){this.clear(),this.startToken=l;let h=this.settings;!h.maxChars&&d&&(h.maxChars=d),this.layoutMethod=new _o(this.area,this.hooks,h);let b=(await this.layoutMethod.renderTo(this.wrapper,n,l)).breakToken;return this.addListeners(n),this.endToken=b,b}async append(n,l){if(!this.layoutMethod)return this.layout(n,l);let h=(await this.layoutMethod.renderTo(this.wrapper,n,l)).breakToken;return this.endToken=h,h}getByParent(n,l){let d;for(var h=0;h<l.length;h++)if(d=l[h],d.dataset.ref===n)return d}onOverflow(n){this._onOverflow=n}onUnderflow(n){this._onUnderflow=n}clear(){this.removeListeners(),this.wrapper&&this.wrapper.remove(),this.createWrapper()}addListeners(n){return typeof ResizeObserver<"u"?this.addResizeObserver(n):(this._checkOverflowAfterResize=this.checkOverflowAfterResize.bind(this,n),this.element.addEventListener("overflow",this._checkOverflowAfterResize,!1),this.element.addEventListener("underflow",this._checkOverflowAfterResize,!1)),this._onScroll=function(){this.listening&&(this.element.scrollLeft=0)}.bind(this),this.element.addEventListener("scroll",this._onScroll),this.listening=!0,!0}removeListeners(){this.listening=!1,typeof ResizeObserver<"u"&&this.ro?this.ro.disconnect():this.element&&(this.element.removeEventListener("overflow",this._checkOverflowAfterResize,!1),this.element.removeEventListener("underflow",this._checkOverflowAfterResize,!1)),this.element&&this.element.removeEventListener("scroll",this._onScroll)}addResizeObserver(n){let l=this.wrapper,d=l.getBoundingClientRect().height;this.ro=new ResizeObserver(h=>{this.listening&&requestAnimationFrame(()=>{for(let g of h){let b=g.contentRect;b.height>d?(this.checkOverflowAfterResize(n),d=l.getBoundingClientRect().height):b.height<d&&(this.checkUnderflowAfterResize(n),d=b.height)}})}),this.ro.observe(l)}checkOverflowAfterResize(n){if(!this.listening||!this.layoutMethod)return;let l=this.layoutMethod.findBreakToken(this.wrapper,n,this.startToken);l&&(this.endToken=l,this._onOverflow&&this._onOverflow(l))}checkUnderflowAfterResize(n){if(!this.listening||!this.layoutMethod)return;let l=this.layoutMethod.findEndToken(this.wrapper,n);l&&this._onUnderflow&&this._onUnderflow(l)}destroy(){this.removeListeners(),this.element.remove(),this.element=void 0,this.wrapper=void 0}};(0,oy.default)(Bo.prototype);var Uu=Bo;var Gu=class{constructor(n,l){return n&&n.nodeType?this.dom=this.add(n):typeof n=="string"&&(this.dom=this.parse(n)),this.dom}parse(n,l){let h=document.createRange().createContextualFragment(n);return this.addRefs(h),h}add(n){return this.addRefs(n),n}addRefs(n){var l=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,null,!1);let d=l.nextNode();for(;d;){if(!d.hasAttribute("data-ref")){let h=Kt();d.setAttribute("data-ref",h)}d.id&&d.setAttribute("data-id",d.id),d=l.nextNode()}}find(n){return this.refs[n]}destroy(){this.refs=void 0,this.dom=void 0}},ly=Gu;var hy=ot(fr(),1);var $u=class{constructor(n){this._q=[],this.context=n,this.tick=requestAnimationFrame,this.running=!1,this.paused=!1}enqueue(){var n,l,d,h=[].shift.call(arguments),g=arguments;if(!h)throw new Error("No Task Provided");return typeof h=="function"?(n=new bo,l=n.promise,d={task:h,args:g,deferred:n,promise:l}):d={promise:h},this._q.push(d),this.paused==!1&&!this.running&&this.run(),d.promise}dequeue(){var n,l,d;if(this._q.length&&!this.paused){if(n=this._q.shift(),l=n.task,l)return d=l.apply(this.context,n.args),d&&typeof d.then=="function"?d.then(function(){n.deferred.resolve.apply(this.context,arguments)}.bind(this),function(){n.deferred.reject.apply(this.context,arguments)}.bind(this)):(n.deferred.resolve.apply(this.context,d),n.promise);if(n.promise)return n.promise}else return n=new bo,n.deferred.resolve(),n.promise}dump(){for(;this._q.length;)this.dequeue()}run(){return this.running||(this.running=!0,this.defered=new bo),this.tick.call(window,()=>{this._q.length?this.dequeue().then(function(){this.run()}.bind(this)):(this.defered.resolve(),this.running=void 0)}),this.paused==!0&&(this.paused=!1),this.defered.promise}flush(){if(this.running)return this.running;if(this._q.length)return this.running=this.dequeue().then(function(){return this.running=void 0,this.flush()}.bind(this)),this.running}clear(){this._q=[]}length(){return this._q.length}pause(){this.paused=!0}stop(){this._q=[],this.running=!1,this.paused=!0}};var dy=$u;var uy=!1,cy=!1,WR=`
<div class="pagedjs_page">
	<div class="pagedjs_sheet">
		<div class="pagedjs_bleed pagedjs_bleed-top">
			<div class="pagedjs_marks-crop"></div>
			<div class="pagedjs_marks-middle">
				<div class="pagedjs_marks-cross"></div>
			</div>
			<div class="pagedjs_marks-crop"></div>
		</div>
		<div class="pagedjs_bleed pagedjs_bleed-bottom">
			<div class="pagedjs_marks-crop"></div>
			<div class="pagedjs_marks-middle">
				<div class="pagedjs_marks-cross"></div>
			</div>		<div class="pagedjs_marks-crop"></div>
		</div>
		<div class="pagedjs_bleed pagedjs_bleed-left">
			<div class="pagedjs_marks-crop"></div>
			<div class="pagedjs_marks-middle">
				<div class="pagedjs_marks-cross"></div>
			</div>		<div class="pagedjs_marks-crop"></div>
		</div>
		<div class="pagedjs_bleed pagedjs_bleed-right">
			<div class="pagedjs_marks-crop"></div>
			<div class="pagedjs_marks-middle">
				<div class="pagedjs_marks-cross"></div>
			</div>
			<div class="pagedjs_marks-crop"></div>
		</div>
		<div class="pagedjs_pagebox">
			<div class="pagedjs_margin-top-left-corner-holder">
				<div class="pagedjs_margin pagedjs_margin-top-left-corner"><div class="pagedjs_margin-content"></div></div>
			</div>
			<div class="pagedjs_margin-top">
				<div class="pagedjs_margin pagedjs_margin-top-left"><div class="pagedjs_margin-content"></div></div>
				<div class="pagedjs_margin pagedjs_margin-top-center"><div class="pagedjs_margin-content"></div></div>
				<div class="pagedjs_margin pagedjs_margin-top-right"><div class="pagedjs_margin-content"></div></div>
			</div>
			<div class="pagedjs_margin-top-right-corner-holder">
				<div class="pagedjs_margin pagedjs_margin-top-right-corner"><div class="pagedjs_margin-content"></div></div>
			</div>
			<div class="pagedjs_margin-right">
				<div class="pagedjs_margin pagedjs_margin-right-top"><div class="pagedjs_margin-content"></div></div>
				<div class="pagedjs_margin pagedjs_margin-right-middle"><div class="pagedjs_margin-content"></div></div>
				<div class="pagedjs_margin pagedjs_margin-right-bottom"><div class="pagedjs_margin-content"></div></div>
			</div>
			<div class="pagedjs_margin-left">
				<div class="pagedjs_margin pagedjs_margin-left-top"><div class="pagedjs_margin-content"></div></div>
				<div class="pagedjs_margin pagedjs_margin-left-middle"><div class="pagedjs_margin-content"></div></div>
				<div class="pagedjs_margin pagedjs_margin-left-bottom"><div class="pagedjs_margin-content"></div></div>
			</div>
			<div class="pagedjs_margin-bottom-left-corner-holder">
				<div class="pagedjs_margin pagedjs_margin-bottom-left-corner"><div class="pagedjs_margin-content"></div></div>
			</div>
			<div class="pagedjs_margin-bottom">
				<div class="pagedjs_margin pagedjs_margin-bottom-left"><div class="pagedjs_margin-content"></div></div>
				<div class="pagedjs_margin pagedjs_margin-bottom-center"><div class="pagedjs_margin-content"></div></div>
				<div class="pagedjs_margin pagedjs_margin-bottom-right"><div class="pagedjs_margin-content"></div></div>
			</div>
			<div class="pagedjs_margin-bottom-right-corner-holder">
				<div class="pagedjs_margin pagedjs_margin-bottom-right-corner"><div class="pagedjs_margin-content"></div></div>
			</div>
			<div class="pagedjs_area">
				<div class="pagedjs_page_content"></div>
				<div class="pagedjs_footnote_area">
					<div class="pagedjs_footnote_content pagedjs_footnote_empty">
						<div class="pagedjs_footnote_inner_content"></div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>`,Fo=class{constructor(n,l,d){this.settings=d||{},this.hooks={},this.hooks.beforeParsed=new pe(this),this.hooks.filter=new pe(this),this.hooks.afterParsed=new pe(this),this.hooks.beforePageLayout=new pe(this),this.hooks.onPageLayout=new pe(this),this.hooks.layout=new pe(this),this.hooks.renderNode=new pe(this),this.hooks.layoutNode=new pe(this),this.hooks.onOverflow=new pe(this),this.hooks.afterOverflowRemoved=new pe(this),this.hooks.onBreakToken=new pe,this.hooks.beforeRenderResult=new pe(this),this.hooks.afterPageLayout=new pe(this),this.hooks.finalizePage=new pe(this),this.hooks.afterRendered=new pe(this),this.pages=[],this.total=0,this.q=new dy(this),this.stopped=!1,this.rendered=!1,this.content=n,this.charsPerBreak=[],this.maxChars,n&&this.flow(n,l)}setup(n){this.pagesArea=document.createElement("div"),this.pagesArea.classList.add("pagedjs_pages"),n?n.appendChild(this.pagesArea):document.querySelector("body").appendChild(this.pagesArea),this.pageTemplate=document.createElement("template"),this.pageTemplate.innerHTML=WR}async flow(n,l){let d;await this.hooks.beforeParsed.trigger(n,this),d=new ly(n),this.hooks.filter.triggerSync(d),this.source=d,this.breakToken=void 0,this.pagesArea&&this.pageTemplate?(this.q.clear(),this.removePages()):this.setup(l),this.emit("rendering",d),await this.hooks.afterParsed.trigger(d,this),await this.loadFonts();let h=await this.render(d,this.breakToken);for(;h.canceled;)this.start(),h=await this.render(d,this.breakToken);return this.rendered=!0,this.pagesArea.style.setProperty("--pagedjs-page-count",this.total),await this.hooks.afterRendered.trigger(this.pages,this),this.emit("rendered",this.pages),this}async render(n,l){let d=this.layout(n,l),h=!1,g,b=0;for(;!h;)if(g=await this.q.enqueue(()=>this.renderAsync(d)),h=g.done,cy&&(b+=1,b>=cy)){this.stop();break}return g}start(){this.rendered=!1,this.stopped=!1}stop(){this.stopped=!0}renderOnIdle(n){return new Promise(l=>{sb(async()=>{if(this.stopped)return l({done:!0,canceled:!0});let d=await n.next();this.stopped?l({done:!0,canceled:!0}):l(d)})})}async renderAsync(n){if(this.stopped)return{done:!0,canceled:!0};let l=await n.next();return this.stopped?{done:!0,canceled:!0}:l}async handleBreaks(n,l){let d=this.total+1,h=d%2===0?"left":"right",g=d%2===0?"verso":"recto",b,x,C;d!==1&&(n&&typeof n.dataset<"u"&&typeof n.dataset.previousBreakAfter<"u"&&(b=n.dataset.previousBreakAfter),n&&typeof n.dataset<"u"&&typeof n.dataset.breakBefore<"u"&&(x=n.dataset.breakBefore),l?C=this.addPage(!0):b&&(b==="left"||b==="right")&&b!==h?C=this.addPage(!0):b&&(b==="verso"||b==="recto")&&b!==g?C=this.addPage(!0):x&&(x==="left"||x==="right")&&x!==h?C=this.addPage(!0):x&&(x==="verso"||x==="recto")&&x!==g&&(C=this.addPage(!0)),C&&(await this.hooks.beforePageLayout.trigger(C,void 0,void 0,this),this.emit("page",C),await this.hooks.afterPageLayout.trigger(C.element,C,void 0,this),await this.hooks.finalizePage.trigger(C.element,C,void 0,this),this.emit("renderedPage",C)))}async*layout(n,l){let d=l||!1,h=[];for(;d!==void 0&&(!uy||this.total<uy);){d&&d.node?await this.handleBreaks(d.node):await this.handleBreaks(n.firstChild);let g=this.addPage();if(await this.hooks.beforePageLayout.trigger(g,n,d,this),this.emit("page",g),d=await g.layout(n,d,this.maxChars),d){let b=d.toJSON(!0);if(h.lastIndexOf(b)>-1){let x=new gr("Layout repeated",[d.node]);return console.error("Layout repeated at: ",d.node),x}else h.push(b)}await this.hooks.afterPageLayout.trigger(g.element,g,d,this),await this.hooks.finalizePage.trigger(g.element,g,void 0,this),this.emit("renderedPage",g),this.recoredCharLength(g.wrapper.textContent.length),yield d}}recoredCharLength(n){n!==0&&(this.charsPerBreak.push(n),this.charsPerBreak.length>4&&this.charsPerBreak.shift(),this.maxChars=this.charsPerBreak.reduce((l,d)=>l+d,0)/this.charsPerBreak.length)}removePages(n=0){if(!(n>=this.pages.length)){for(let l=n;l<this.pages.length;l++)this.pages[l].destroy();n>0?this.pages.splice(n):this.pages=[],this.total=this.pages.length}}addPage(n){let l=this.pages[this.pages.length-1],d=new Uu(this.pagesArea,this.pageTemplate,n,this.hooks,this.settings);return this.pages.push(d),d.create(void 0,l&&l.element),d.index(this.total),n||(d.onOverflow(h=>{if(console.warn("overflow on",d.id,h),this.rendered)return;let g=this.pages.indexOf(d)+1;this.stop(),this.breakToken=h,this.removePages(g),this.rendered===!0&&(this.rendered=!1,this.q.enqueue(async()=>{this.start(),await this.render(this.source,this.breakToken),this.rendered=!0}))}),d.onUnderflow(h=>{})),this.total=this.pages.length,d}async clonePage(n){let l=this.pages[this.pages.length-1],d=new Uu(this.pagesArea,this.pageTemplate,!1,this.hooks);this.pages.push(d),d.create(void 0,l&&l.element),d.index(this.total),await this.hooks.beforePageLayout.trigger(d,void 0,void 0,this),this.emit("page",d);for(let h of n.element.classList)h!=="pagedjs_left_page"&&h!=="pagedjs_right_page"&&d.element.classList.add(h);await this.hooks.afterPageLayout.trigger(d.element,d,void 0,this),await this.hooks.finalizePage.trigger(d.element,d,void 0,this),this.emit("renderedPage",d)}loadFonts(){let n=[];return(document.fonts||[]).forEach(l=>{if(l.status!=="loaded"){let d=l.load().then(h=>l.family,h=>(console.warn("Failed to preload font-family:",l.family),l.family));n.push(d)}}),Promise.all(n).catch(l=>{console.warn(l)})}destroy(){this.pagesArea.remove(),this.pageTemplate.remove()}};(0,hy.default)(Fo.prototype);var Yu=Fo;var wt=ot(Gt(),1);var bh=class{constructor(n,l){l?this.hooks=l:(this.hooks={},this.hooks.onUrl=new pe(this),this.hooks.onAtPage=new pe(this),this.hooks.onAtMedia=new pe(this),this.hooks.onRule=new pe(this),this.hooks.onDeclaration=new pe(this),this.hooks.onSelector=new pe(this),this.hooks.onPseudoSelector=new pe(this),this.hooks.onContent=new pe(this),this.hooks.onImport=new pe(this),this.hooks.beforeTreeParse=new pe(this),this.hooks.beforeTreeWalk=new pe(this),this.hooks.afterTreeWalk=new pe(this));try{this.url=new URL(n,window.location.href)}catch{this.url=new URL(window.location.href)}}async parse(n){return this.text=n,await this.hooks.beforeTreeParse.trigger(this.text,this),this.ast=wt.default.parse(this._text),await this.hooks.beforeTreeWalk.trigger(this.ast),this.replaceUrls(this.ast),this.id=Kt(),this.replaceIds(this.ast),this.imported=[],this.urls(this.ast),this.rules(this.ast),this.atrules(this.ast),await this.hooks.afterTreeWalk.trigger(this.ast,this),this.ast}insertRule(n){let l=this.ast.children.appendData(n);return this.declarations(n),l}urls(n){wt.default.walk(n,{visit:"Url",enter:(l,d,h)=>{this.hooks.onUrl.trigger(l,d,h)}})}atrules(n){wt.default.walk(n,{visit:"Atrule",enter:(l,d,h)=>{let g=wt.default.keyword(l.name).basename;g==="page"&&(this.hooks.onAtPage.trigger(l,d,h),this.declarations(l,d,h)),g==="media"&&(this.hooks.onAtMedia.trigger(l,d,h),this.declarations(l,d,h)),g==="import"&&(this.hooks.onImport.trigger(l,d,h),this.imports(l,d,h))}})}rules(n){wt.default.walk(n,{visit:"Rule",enter:(l,d,h)=>{this.hooks.onRule.trigger(l,d,h),this.declarations(l,d,h),this.onSelector(l,d,h)}})}declarations(n,l,d){wt.default.walk(n,{visit:"Declaration",enter:(h,g,b)=>{this.hooks.onDeclaration.trigger(h,g,b,{ruleNode:n,ruleItem:l,rulelist:d}),h.property==="content"&&wt.default.walk(h,{visit:"Function",enter:(x,C,I)=>{this.hooks.onContent.trigger(x,C,I,{declarationNode:h,dItem:g,dList:b},{ruleNode:n,ruleItem:l,rulelist:d})}})}})}onSelector(n,l,d){wt.default.walk(n,{visit:"Selector",enter:(h,g,b)=>{this.hooks.onSelector.trigger(h,g,b,{ruleNode:n,ruleItem:l,rulelist:d}),h.children.forEach(x=>{x.type==="PseudoElementSelector"&&wt.default.walk(x,{visit:"PseudoElementSelector",enter:(C,I,B)=>{this.hooks.onPseudoSelector.trigger(C,I,B,{selectNode:h,selectItem:g,selectList:b},{ruleNode:n,ruleItem:l,rulelist:d})}})})}})}replaceUrls(n){wt.default.walk(n,{visit:"Url",enter:(l,d,h)=>{let g=l.value.value;if(!(l.value.type==="Raw"&&g.startsWith("data:")||l.value.type==="String"&&(g.startsWith('"data:')||g.startsWith("'data:")))){let b=g.replace(/["']/g,""),x=new URL(b,this.url);l.value.value=x.toString()}}})}addScope(n,l){wt.default.walk(n,{visit:"Selector",enter:(d,h,g)=>{let b=d.children;b.prepend(b.createItem({type:"WhiteSpace",value:" "})),b.prepend(b.createItem({type:"IdSelector",name:l,loc:null,children:null}))}})}getNamedPageSelectors(n){let l={};return wt.default.walk(n,{visit:"Rule",enter:(d,h,g)=>{wt.default.walk(d,{visit:"Declaration",enter:(b,x,C)=>{if(b.property==="page"){let I=b.value.children.first(),B=I.name,z=wt.default.generate(d.prelude);l[B]={name:B,selector:z},b.property="break-before",I.type="Identifier",I.name="always"}}})}}),l}replaceIds(n){wt.default.walk(n,{visit:"Rule",enter:(l,d,h)=>{wt.default.walk(l,{visit:"IdSelector",enter:(g,b,x)=>{let C=g.name;g.flags=null,g.matcher="=",g.name={type:"Identifier",loc:null,name:"data-id"},g.type="AttributeSelector",g.value={type:"String",loc:null,value:`"${C}"`}}})}})}imports(n,l,d){let h=[];wt.default.walk(n,{visit:"MediaQuery",enter:(b,x,C)=>{wt.default.walk(b,{visit:"Identifier",enter:(I,B,z)=>{h.push(I.name)}})}}),!h.some((b,x)=>{let C=b;return C==="not"?(C=h[x+1],!(C==="screen"||C==="speech")):C==="screen"||C==="speech"})&&wt.default.walk(n,{visit:"String",enter:(b,x,C)=>{let I=b.value.replace(/["']/g,""),z=new URL(I,this.url).toString();this.imported.push(z),d.remove(l)}})}set text(n){this._text=n}get text(){return this._text}toString(n){return wt.default.generate(n||this.ast)}},ek=bh;var tk=`
:root {
	--pagedjs-width: 8.5in;
	--pagedjs-height: 11in;
	--pagedjs-width-right: 8.5in;
	--pagedjs-height-right: 11in;
	--pagedjs-width-left: 8.5in;
	--pagedjs-height-left: 11in;
	--pagedjs-pagebox-width: 8.5in;
	--pagedjs-pagebox-height: 11in;
	--pagedjs-footnotes-height: 0mm;
	--pagedjs-margin-top: 1in;
	--pagedjs-margin-right: 1in;
	--pagedjs-margin-bottom: 1in;
	--pagedjs-margin-left: 1in;
	--pagedjs-padding-top: 0mm;
	--pagedjs-padding-right: 0mm;
	--pagedjs-padding-bottom: 0mm;
	--pagedjs-padding-left: 0mm;
	--pagedjs-border-top: 0mm;
	--pagedjs-border-right: 0mm;
	--pagedjs-border-bottom: 0mm;
	--pagedjs-border-left: 0mm;
	--pagedjs-bleed-top: 0mm;
	--pagedjs-bleed-right: 0mm;
	--pagedjs-bleed-bottom: 0mm;
	--pagedjs-bleed-left: 0mm;
	--pagedjs-bleed-right-top: 0mm;
	--pagedjs-bleed-right-right: 0mm;
	--pagedjs-bleed-right-bottom: 0mm;
	--pagedjs-bleed-right-left: 0mm;
	--pagedjs-bleed-left-top: 0mm;
	--pagedjs-bleed-left-right: 0mm;
	--pagedjs-bleed-left-bottom: 0mm;
	--pagedjs-bleed-left-left: 0mm;
	--pagedjs-crop-color: black;
	--pagedjs-crop-shadow: white;
	--pagedjs-crop-offset: 2mm;
	--pagedjs-crop-stroke: 1px;
	--pagedjs-cross-size: 5mm;
	--pagedjs-mark-cross-display: none;
	--pagedjs-mark-crop-display: none;
	--pagedjs-page-count: 0;
	--pagedjs-page-counter-increment: 1;
	--pagedjs-footnotes-count: 0;
	--pagedjs-column-gap-offset: 1000px;
}

@page {
	size: letter;
	margin: 0;
}

.pagedjs_sheet {
	box-sizing: border-box;
	width: var(--pagedjs-width);
	height: var(--pagedjs-height);
	overflow: hidden;
	position: relative;
	display: grid;
	grid-template-columns: [bleed-left] var(--pagedjs-bleed-left) [sheet-center] calc(var(--pagedjs-width) - var(--pagedjs-bleed-left) - var(--pagedjs-bleed-right)) [bleed-right] var(--pagedjs-bleed-right);
	grid-template-rows: [bleed-top] var(--pagedjs-bleed-top) [sheet-middle] calc(var(--pagedjs-height) - var(--pagedjs-bleed-top) - var(--pagedjs-bleed-bottom)) [bleed-bottom] var(--pagedjs-bleed-bottom);
}

.pagedjs_right_page .pagedjs_sheet {
	width: var(--pagedjs-width-right);
	height: var(--pagedjs-height-right);
	grid-template-columns: [bleed-left] var(--pagedjs-bleed-right-left) [sheet-center] calc(var(--pagedjs-width) - var(--pagedjs-bleed-right-left) - var(--pagedjs-bleed-right-right)) [bleed-right] var(--pagedjs-bleed-right-right);
	grid-template-rows: [bleed-top] var(--pagedjs-bleed-right-top) [sheet-middle] calc(var(--pagedjs-height) - var(--pagedjs-bleed-right-top) - var(--pagedjs-bleed-right-bottom)) [bleed-bottom] var(--pagedjs-bleed-right-bottom);
}

.pagedjs_left_page .pagedjs_sheet {
	width: var(--pagedjs-width-left);
	height: var(--pagedjs-height-left);
	grid-template-columns: [bleed-left] var(--pagedjs-bleed-left-left) [sheet-center] calc(var(--pagedjs-width) - var(--pagedjs-bleed-left-left) - var(--pagedjs-bleed-left-right)) [bleed-right] var(--pagedjs-bleed-left-right);
	grid-template-rows: [bleed-top] var(--pagedjs-bleed-left-top) [sheet-middle] calc(var(--pagedjs-height) - var(--pagedjs-bleed-left-top) - var(--pagedjs-bleed-left-bottom)) [bleed-bottom] var(--pagedjs-bleed-left-bottom);
}

.pagedjs_bleed {
	display: flex;
	align-items: center;
	justify-content: center;
	flex-wrap: nowrap;
	overflow: hidden;
}

.pagedjs_bleed-top {
	grid-column: bleed-left / -1;
	grid-row: bleed-top;
	flex-direction: row;
}

.pagedjs_bleed-bottom {
	grid-column: bleed-left / -1;
	grid-row: bleed-bottom;
	flex-direction: row;
}

.pagedjs_bleed-left {
	grid-column: bleed-left;
	grid-row: bleed-top / -1;
	flex-direction: column;
}

.pagedjs_bleed-right {
	grid-column: bleed-right;
	grid-row: bleed-top / -1;
	flex-direction: column;
}

.pagedjs_marks-crop {
	display: var(--pagedjs-mark-crop-display);
	flex-grow: 0;
	flex-shrink: 0;
	z-index: 9999999999;
}

.pagedjs_bleed-top .pagedjs_marks-crop:nth-child(1),
.pagedjs_bleed-bottom .pagedjs_marks-crop:nth-child(1) {
	width: calc(var(--pagedjs-bleed-left) - var(--pagedjs-crop-stroke));
	border-right: var(--pagedjs-crop-stroke) solid var(--pagedjs-crop-color);
	box-shadow: 1px 0px 0px 0px var(--pagedjs-crop-shadow);
}

.pagedjs_right_page .pagedjs_bleed-top .pagedjs_marks-crop:nth-child(1),
.pagedjs_right_page .pagedjs_bleed-bottom .pagedjs_marks-crop:nth-child(1) {
	width: calc(var(--pagedjs-bleed-right-left) - var(--pagedjs-crop-stroke));
}

.pagedjs_left_page .pagedjs_bleed-top .pagedjs_marks-crop:nth-child(1),
.pagedjs_left_page .pagedjs_bleed-bottom .pagedjs_marks-crop:nth-child(1) {
	width: calc(var(--pagedjs-bleed-left-left) - var(--pagedjs-crop-stroke));
}

.pagedjs_bleed-top .pagedjs_marks-crop:nth-child(3),
.pagedjs_bleed-bottom .pagedjs_marks-crop:nth-child(3) {
	width: calc(var(--pagedjs-bleed-right) - var(--pagedjs-crop-stroke));
	border-left: var(--pagedjs-crop-stroke) solid var(--pagedjs-crop-color);
	box-shadow: -1px 0px 0px 0px var(--pagedjs-crop-shadow);
}

.pagedjs_right_page .pagedjs_bleed-top .pagedjs_marks-crop:nth-child(3),
.pagedjs_right_page .pagedjs_bleed-bottom .pagedjs_marks-crop:nth-child(3) {
	width: calc(var(--pagedjs-bleed-right-right) - var(--pagedjs-crop-stroke));
}

.pagedjs_left_page .pagedjs_bleed-top .pagedjs_marks-crop:nth-child(3),
.pagedjs_left_page .pagedjs_bleed-bottom .pagedjs_marks-crop:nth-child(3) {
	width: calc(var(--pagedjs-bleed-left-right) - var(--pagedjs-crop-stroke));
}

.pagedjs_bleed-top .pagedjs_marks-crop {
	align-self: flex-start;
	height: calc(var(--pagedjs-bleed-top) - var(--pagedjs-crop-offset));
}

.pagedjs_right_page .pagedjs_bleed-top .pagedjs_marks-crop {
	height: calc(var(--pagedjs-bleed-right-top) - var(--pagedjs-crop-offset));
}

.pagedjs_left_page .pagedjs_bleed-top .pagedjs_marks-crop {
	height: calc(var(--pagedjs-bleed-left-top) - var(--pagedjs-crop-offset));
}

.pagedjs_bleed-bottom .pagedjs_marks-crop {
	align-self: flex-end;
	height: calc(var(--pagedjs-bleed-bottom) - var(--pagedjs-crop-offset));
}

.pagedjs_right_page .pagedjs_bleed-bottom .pagedjs_marks-crop {
	height: calc(var(--pagedjs-bleed-right-bottom) - var(--pagedjs-crop-offset));
}

.pagedjs_left_page .pagedjs_bleed-bottom .pagedjs_marks-crop {
	height: calc(var(--pagedjs-bleed-left-bottom) - var(--pagedjs-crop-offset));
}

.pagedjs_bleed-left .pagedjs_marks-crop:nth-child(1),
.pagedjs_bleed-right .pagedjs_marks-crop:nth-child(1) {
	height: calc(var(--pagedjs-bleed-top) - var(--pagedjs-crop-stroke));
	border-bottom: var(--pagedjs-crop-stroke) solid var(--pagedjs-crop-color);
	box-shadow: 0px 1px 0px 0px var(--pagedjs-crop-shadow);
}

.pagedjs_right_page .pagedjs_bleed-left .pagedjs_marks-crop:nth-child(1),
.pagedjs_right_page .pagedjs_bleed-right .pagedjs_marks-crop:nth-child(1) {
	height: calc(var(--pagedjs-bleed-right-top) - var(--pagedjs-crop-stroke));
}

.pagedjs_left_page .pagedjs_bleed-left .pagedjs_marks-crop:nth-child(1),
.pagedjs_left_page .pagedjs_bleed-right .pagedjs_marks-crop:nth-child(1) {
	height: calc(var(--pagedjs-bleed-left-top) - var(--pagedjs-crop-stroke));
}

.pagedjs_bleed-left .pagedjs_marks-crop:nth-child(3),
.pagedjs_bleed-right .pagedjs_marks-crop:nth-child(3) {
	height: calc(var(--pagedjs-bleed-bottom) - var(--pagedjs-crop-stroke));
	border-top: var(--pagedjs-crop-stroke) solid var(--pagedjs-crop-color);
	box-shadow: 0px -1px 0px 0px var(--pagedjs-crop-shadow);
}

.pagedjs_right_page .pagedjs_bleed-left .pagedjs_marks-crop:nth-child(3),
.pagedjs_right_page .pagedjs_bleed-right .pagedjs_marks-crop:nth-child(3) {
	height: calc(var(--pagedjs-bleed-right-bottom) - var(--pagedjs-crop-stroke));
}

.pagedjs_left_page .pagedjs_bleed-left .pagedjs_marks-crop:nth-child(3),
.pagedjs_left_page .pagedjs_bleed-right .pagedjs_marks-crop:nth-child(3) {
	height: calc(var(--pagedjs-bleed-left-bottom) - var(--pagedjs-crop-stroke));
}

.pagedjs_bleed-left .pagedjs_marks-crop {
	width: calc(var(--pagedjs-bleed-left) - var(--pagedjs-crop-offset));
	align-self: flex-start;
}

.pagedjs_right_page .pagedjs_bleed-left .pagedjs_marks-crop {
	width: calc(var(--pagedjs-bleed-right-left) - var(--pagedjs-crop-offset));
}

.pagedjs_left_page .pagedjs_bleed-left .pagedjs_marks-crop {
	width: calc(var(--pagedjs-bleed-left-left) - var(--pagedjs-crop-offset));
}

.pagedjs_bleed-right .pagedjs_marks-crop {
	width: calc(var(--pagedjs-bleed-right) - var(--pagedjs-crop-offset));
	align-self: flex-end;
}

.pagedjs_right_page .pagedjs_bleed-right .pagedjs_marks-crop {
	width: calc(var(--pagedjs-bleed-right-right) - var(--pagedjs-crop-offset));
}

.pagedjs_left_page .pagedjs_bleed-right .pagedjs_marks-crop {
	width: calc(var(--pagedjs-bleed-left-right) - var(--pagedjs-crop-offset));
}

.pagedjs_marks-middle {
	display: flex;
	flex-grow: 1;
	flex-shrink: 0;
	align-items: center;
	justify-content: center;
}

.pagedjs_marks-cross {
	display: var(--pagedjs-mark-cross-display);
	background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIzMi41MzdweCIgaGVpZ2h0PSIzMi41MzdweCIgdmlld0JveD0iMC4xMDQgMC4xMDQgMzIuNTM3IDMyLjUzNyIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwLjEwNCAwLjEwNCAzMi41MzcgMzIuNTM3IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNGRkZGRkYiIHN0cm9rZS13aWR0aD0iMy4zODkzIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0yOS45MzEsMTYuMzczYzAsNy40ODktNi4wNjgsMTMuNTYtMTMuNTU4LDEzLjU2Yy03LjQ4MywwLTEzLjU1Ny02LjA3Mi0xMy41NTctMTMuNTZjMC03LjQ4Niw2LjA3NC0xMy41NTQsMTMuNTU3LTEzLjU1NEMyMy44NjIsMi44MTksMjkuOTMxLDguODg3LDI5LjkzMSwxNi4zNzN6Ii8+PGxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjRkZGRkZGIiBzdHJva2Utd2lkdGg9IjMuMzg5MyIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiB4MT0iMC4xMDQiIHkxPSIxNi4zNzMiIHgyPSIzMi42NDIiIHkyPSIxNi4zNzMiLz48bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiNGRkZGRkYiIHN0cm9rZS13aWR0aD0iMy4zODkzIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHgxPSIxNi4zNzMiIHkxPSIwLjEwNCIgeDI9IjE2LjM3MyIgeTI9IjMyLjY0MiIvPjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0ZGRkZGRiIgc3Ryb2tlLXdpZHRoPSIzLjM4OTMiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTI0LjUwOCwxNi4zNzNjMCw0LjQ5Ni0zLjYzOCw4LjEzNS04LjEzNSw4LjEzNWMtNC40OTEsMC04LjEzNS0zLjYzOC04LjEzNS04LjEzNWMwLTQuNDg5LDMuNjQ0LTguMTM1LDguMTM1LTguMTM1QzIwLjg2OSw4LjIzOSwyNC41MDgsMTEuODg0LDI0LjUwOCwxNi4zNzN6Ii8+PHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjAuNjc3OCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMjkuOTMxLDE2LjM3M2MwLDcuNDg5LTYuMDY4LDEzLjU2LTEzLjU1OCwxMy41NmMtNy40ODMsMC0xMy41NTctNi4wNzItMTMuNTU3LTEzLjU2YzAtNy40ODYsNi4wNzQtMTMuNTU0LDEzLjU1Ny0xMy41NTRDMjMuODYyLDIuODE5LDI5LjkzMSw4Ljg4NywyOS45MzEsMTYuMzczeiIvPjxsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIwLjY3NzgiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgeDE9IjAuMTA0IiB5MT0iMTYuMzczIiB4Mj0iMzIuNjQyIiB5Mj0iMTYuMzczIi8+PGxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjAuNjc3OCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiB4MT0iMTYuMzczIiB5MT0iMC4xMDQiIHgyPSIxNi4zNzMiIHkyPSIzMi42NDIiLz48cGF0aCBkPSJNMjQuNTA4LDE2LjM3M2MwLDQuNDk2LTMuNjM4LDguMTM1LTguMTM1LDguMTM1Yy00LjQ5MSwwLTguMTM1LTMuNjM4LTguMTM1LTguMTM1YzAtNC40ODksMy42NDQtOC4xMzUsOC4xMzUtOC4xMzVDMjAuODY5LDguMjM5LDI0LjUwOCwxMS44ODQsMjQuNTA4LDE2LjM3MyIvPjxsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0ZGRkZGRiIgc3Ryb2tlLXdpZHRoPSIwLjY3NzgiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgeDE9IjguMjM5IiB5MT0iMTYuMzczIiB4Mj0iMjQuNTA4IiB5Mj0iMTYuMzczIi8+PGxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjRkZGRkZGIiBzdHJva2Utd2lkdGg9IjAuNjc3OCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiB4MT0iMTYuMzczIiB5MT0iOC4yMzkiIHgyPSIxNi4zNzMiIHkyPSIyNC41MDgiLz48L3N2Zz4=);
  background-repeat: no-repeat;
  background-position: 50% 50%;
  background-size: var(--pagedjs-cross-size);

  z-index: 2147483647;
	width: var(--pagedjs-cross-size);
	height: var(--pagedjs-cross-size);
}

.pagedjs_pagebox {
	box-sizing: border-box;
	width: var(--pagedjs-pagebox-width);
	height: var(--pagedjs-pagebox-height);
	position: relative;
	display: grid;
	grid-template-columns: [left] var(--pagedjs-margin-left) [center] calc(var(--pagedjs-pagebox-width) - var(--pagedjs-margin-left) - var(--pagedjs-margin-right)) [right] var(--pagedjs-margin-right);
	grid-template-rows: [header] var(--pagedjs-margin-top) [page] calc(var(--pagedjs-pagebox-height) - var(--pagedjs-margin-top) - var(--pagedjs-margin-bottom)) [footer] var(--pagedjs-margin-bottom);
	grid-column: sheet-center;
	grid-row: sheet-middle;
}

.pagedjs_pagebox * {
	box-sizing: border-box;
}

.pagedjs_margin-top {
	width: calc(var(--pagedjs-pagebox-width) - var(--pagedjs-margin-left) - var(--pagedjs-margin-right));
	height: var(--pagedjs-margin-top);
	grid-column: center;
	grid-row: header;
	flex-wrap: nowrap;
	display: grid;
	grid-template-columns: repeat(3, 1fr);
	grid-template-rows: 100%;
}

.pagedjs_margin-top-left-corner-holder {
	width: var(--pagedjs-margin-left);
	height: var(--pagedjs-margin-top);
	display: flex;
	grid-column: left;
	grid-row: header;
}

.pagedjs_margin-top-right-corner-holder {
	width: var(--pagedjs-margin-right);
	height: var(--pagedjs-margin-top);
	display: flex;
	grid-column: right;
	grid-row: header;
}

.pagedjs_margin-top-left-corner {
	width: var(--pagedjs-margin-left);
}

.pagedjs_margin-top-right-corner {
	width: var(--pagedjs-margin-right);
}

.pagedjs_margin-right {
	height: calc(var(--pagedjs-pagebox-height) - var(--pagedjs-margin-top) - var(--pagedjs-margin-bottom));
	width: var(--pagedjs-margin-right);
	right: 0;
	grid-column: right;
	grid-row: page;
	display: grid;
	grid-template-rows: repeat(3, 33.3333%);
	grid-template-columns: 100%;
}

.pagedjs_margin-bottom {
	width: calc(var(--pagedjs-pagebox-width) - var(--pagedjs-margin-left) - var(--pagedjs-margin-right));
	height: var(--pagedjs-margin-bottom);
	grid-column: center;
	grid-row: footer;
	display: grid;
	grid-template-columns: repeat(3, 1fr);
	grid-template-rows: 100%;
}

.pagedjs_margin-bottom-left-corner-holder {
	width: var(--pagedjs-margin-left);
	height: var(--pagedjs-margin-bottom);
	display: flex;
	grid-column: left;
	grid-row: footer;
}

.pagedjs_margin-bottom-right-corner-holder {
	width: var(--pagedjs-margin-right);
	height: var(--pagedjs-margin-bottom);
	display: flex;
	grid-column: right;
	grid-row: footer;
}

.pagedjs_margin-bottom-left-corner {
	width: var(--pagedjs-margin-left);
}

.pagedjs_margin-bottom-right-corner {
	width: var(--pagedjs-margin-right);
}



.pagedjs_margin-left {
	height: calc(var(--pagedjs-pagebox-height) - var(--pagedjs-margin-top) - var(--pagedjs-margin-bottom));
	width: var(--pagedjs-margin-left);
	grid-column: left;
	grid-row: page;
	display: grid;
	grid-template-rows: repeat(3, 33.33333%);
	grid-template-columns: 100%;
}

.pagedjs_pages .pagedjs_pagebox .pagedjs_margin:not(.hasContent) {
	visibility: hidden;
}

.pagedjs_pagebox > .pagedjs_area {
	grid-column: center;
	grid-row: page;
	width: 100%;
	height: 100%;
	padding: var(--pagedjs-padding-top) var(--pagedjs-padding-right) var(--pagedjs-padding-bottom) var(--pagedjs-padding-left);
	border-top: var(--pagedjs-border-top);
	border-right: var(--pagedjs-border-right);
	border-bottom: var(--pagedjs-border-bottom);
	border-left: var(--pagedjs-border-left);
}

.pagedjs_pagebox > .pagedjs_area > .pagedjs_page_content {
	width: 100%;
	height: calc(100% - var(--pagedjs-footnotes-height));
	position: relative;
	column-fill: auto;
}

.pagedjs_pagebox > .pagedjs_area > .pagedjs_page_content > div {
	height: inherit;
}

.pagedjs_pagebox > .pagedjs_area > .pagedjs_footnote_area {
	position: relative;
	overflow: hidden;
	height: var(--pagedjs-footnotes-height);
	display: flex;
    justify-content: flex-end;
    flex-flow: column;
}

.pagedjs_pagebox > .pagedjs_area > .pagedjs_footnote_area > .pagedjs_footnote_content {
	overflow: hidden;
}

.pagedjs_pagebox > .pagedjs_area > .pagedjs_footnote_area > .pagedjs_footnote_inner_content {
	overflow: hidden;
}

.pagedjs_area [data-footnote-call] {
	all: unset;
	counter-increment: footnote;
}

.pagedjs_area [data-split-from] {
	counter-increment: unset;
	counter-reset: unset;
}

[data-footnote-call]::after {
	vertical-align: super;
	font-size: 65%;
	line-height: normal;
	content: counter(footnote);
}

@supports ( font-variant-position: super ) {
	[data-footnote-call]::after {
		vertical-align: baseline;
		font-size: 100%;
		line-height: inherit;
		font-variant-position: super;
	}
}

.pagedjs_footnote_empty {
	display: none;
}

.pagedjs_area [data-split-from] {
	counter-increment: unset;
	counter-reset: unset;
}

[data-footnote-marker] {
	text-indent: 0;
	display: list-item;
	list-style-position: inside;
}

[data-footnote-marker][data-split-from] {
	list-style: none;
}

[data-footnote-marker]:not([data-split-from]) {
	counter-increment: footnote-marker;
}

[data-footnote-marker]::marker {
	content: counter(footnote-marker) ". ";
}

[data-footnote-marker][data-split-from]::marker {
	content: unset;
}

.pagedjs_area .pagedjs_footnote_inner_content [data-note-display="inline"] {
 	display: inline;
}

.pagedjs_page {
	counter-increment: page var(--pagedjs-page-counter-increment);
	width: var(--pagedjs-width);
	height: var(--pagedjs-height);
}

.pagedjs_page.pagedjs_right_page {
	width: var(--pagedjs-width-right);
	height: var(--pagedjs-height-right);
}

.pagedjs_page.pagedjs_left_page {
	width: var(--pagedjs-width-left);
	height: var(--pagedjs-height-left);
}

.pagedjs_pages {
	counter-reset: pages var(--pagedjs-page-count) footnote var(--pagedjs-footnotes-count) footnote-marker var(--pagedjs-footnotes-count);
}

.pagedjs_pagebox .pagedjs_margin-top-left-corner,
.pagedjs_pagebox .pagedjs_margin-top-right-corner,
.pagedjs_pagebox .pagedjs_margin-bottom-left-corner,
.pagedjs_pagebox .pagedjs_margin-bottom-right-corner,
.pagedjs_pagebox .pagedjs_margin-top-left,
.pagedjs_pagebox .pagedjs_margin-top-right,
.pagedjs_pagebox .pagedjs_margin-bottom-left,
.pagedjs_pagebox .pagedjs_margin-bottom-right,
.pagedjs_pagebox .pagedjs_margin-top-center,
.pagedjs_pagebox .pagedjs_margin-bottom-center,
.pagedjs_pagebox .pagedjs_margin-top-center,
.pagedjs_pagebox .pagedjs_margin-bottom-center,
.pagedjs_margin-right-middle,
.pagedjs_margin-left-middle  {
	display: flex;
	align-items: center;
}

.pagedjs_margin-right-top,
.pagedjs_margin-left-top  {
	display: flex;
	align-items: flex-top;
}


.pagedjs_margin-right-bottom,
.pagedjs_margin-left-bottom  {
	display: flex;
	align-items: flex-end;
}



/*
.pagedjs_pagebox .pagedjs_margin-top-center,
.pagedjs_pagebox .pagedjs_margin-bottom-center {
	height: 100%;
	display: none;
	align-items: center;
	flex: 1 0 33%;
	margin: 0 auto;
}

.pagedjs_pagebox .pagedjs_margin-top-left-corner,
.pagedjs_pagebox .pagedjs_margin-top-right-corner,
.pagedjs_pagebox .pagedjs_margin-bottom-right-corner,
.pagedjs_pagebox .pagedjs_margin-bottom-left-corner {
	display: none;
	align-items: center;
}

.pagedjs_pagebox .pagedjs_margin-left-top,
.pagedjs_pagebox .pagedjs_margin-right-top {
	display: none;
	align-items: flex-start;
}

.pagedjs_pagebox .pagedjs_margin-right-middle,
.pagedjs_pagebox .pagedjs_margin-left-middle {
	display: none;
	align-items: center;
}

.pagedjs_pagebox .pagedjs_margin-left-bottom,
.pagedjs_pagebox .pagedjs_margin-right-bottom {
	display: none;
	align-items: flex-end;
}
*/

.pagedjs_pagebox .pagedjs_margin-top-left,
.pagedjs_pagebox .pagedjs_margin-top-right-corner,
.pagedjs_pagebox .pagedjs_margin-bottom-left,
.pagedjs_pagebox .pagedjs_margin-bottom-right-corner { text-align: left; }

.pagedjs_pagebox .pagedjs_margin-top-left-corner,
.pagedjs_pagebox .pagedjs_margin-top-right,
.pagedjs_pagebox .pagedjs_margin-bottom-left-corner,
.pagedjs_pagebox .pagedjs_margin-bottom-right { text-align: right; }

.pagedjs_pagebox .pagedjs_margin-top-center,
.pagedjs_pagebox .pagedjs_margin-bottom-center,
.pagedjs_pagebox .pagedjs_margin-left-top,
.pagedjs_pagebox .pagedjs_margin-left-middle,
.pagedjs_pagebox .pagedjs_margin-left-bottom,
.pagedjs_pagebox .pagedjs_margin-right-top,
.pagedjs_pagebox .pagedjs_margin-right-middle,
.pagedjs_pagebox .pagedjs_margin-right-bottom { text-align: center; }

.pagedjs_pages .pagedjs_margin .pagedjs_margin-content {
	width: 100%;
}

.pagedjs_pages .pagedjs_margin-left .pagedjs_margin-content::after,
.pagedjs_pages .pagedjs_margin-top .pagedjs_margin-content::after,
.pagedjs_pages .pagedjs_margin-right .pagedjs_margin-content::after,
.pagedjs_pages .pagedjs_margin-bottom .pagedjs_margin-content::after {
	display: block;
}

.pagedjs_pages > .pagedjs_page > .pagedjs_sheet > .pagedjs_pagebox > .pagedjs_area > div [data-split-to] {
	margin-bottom: unset;
	padding-bottom: unset;
}

.pagedjs_pages > .pagedjs_page > .pagedjs_sheet > .pagedjs_pagebox > .pagedjs_area > div [data-split-from] {
	text-indent: unset;
	margin-top: unset;
	padding-top: unset;
	initial-letter: unset;
}

.pagedjs_pages > .pagedjs_page > .pagedjs_sheet > .pagedjs_pagebox > .pagedjs_area > div [data-split-from] > *::first-letter,
.pagedjs_pages > .pagedjs_page > .pagedjs_sheet > .pagedjs_pagebox > .pagedjs_area > div [data-split-from]::first-letter {
	color: unset;
	font-size: unset;
	font-weight: unset;
	font-family: unset;
	color: unset;
	line-height: unset;
	float: unset;
	padding: unset;
	margin: unset;
}

.pagedjs_pages > .pagedjs_page > .pagedjs_sheet > .pagedjs_pagebox > .pagedjs_area > div [data-split-to]:not([data-footnote-call]):after,
.pagedjs_pages > .pagedjs_page > .pagedjs_sheet > .pagedjs_pagebox > .pagedjs_area > div [data-split-to]:not([data-footnote-call])::after {
	content: unset;
}

.pagedjs_pages > .pagedjs_page > .pagedjs_sheet > .pagedjs_pagebox > .pagedjs_area > div [data-split-from]:not([data-footnote-call]):before,
.pagedjs_pages > .pagedjs_page > .pagedjs_sheet > .pagedjs_pagebox > .pagedjs_area > div [data-split-from]:not([data-footnote-call])::before {
	content: unset;
}

.pagedjs_pages > .pagedjs_page > .pagedjs_sheet > .pagedjs_pagebox > .pagedjs_area > div li[data-split-from]:first-of-type {
	list-style: none;
}

/*
[data-page]:not([data-split-from]),
[data-break-before="page"]:not([data-split-from]),
[data-break-before="always"]:not([data-split-from]),
[data-break-before="left"]:not([data-split-from]),
[data-break-before="right"]:not([data-split-from]),
[data-break-before="recto"]:not([data-split-from]),
[data-break-before="verso"]:not([data-split-from])
{
	break-before: column;
}

[data-page]:not([data-split-to]),
[data-break-after="page"]:not([data-split-to]),
[data-break-after="always"]:not([data-split-to]),
[data-break-after="left"]:not([data-split-to]),
[data-break-after="right"]:not([data-split-to]),
[data-break-after="recto"]:not([data-split-to]),
[data-break-after="verso"]:not([data-split-to])
{
	break-after: column;
}
*/

.pagedjs_clear-after::after {
	content: none !important;
}

[data-align-last-split-element='justify'] {
	text-align-last: justify;
}


@media print {
	html {
		width: 100%;
		height: 100%;
		-webkit-print-color-adjust: exact;
		print-color-adjust: exact;
	}
	body {
		margin: 0;
		padding: 0;
		width: 100% !important;
		height: 100% !important;
		min-width: 100%;
		max-width: 100%;
		min-height: 100%;
		max-height: 100%;
	}
	.pagedjs_pages {
		width: auto;
		display: block !important;
		transform: none !important;
		height: 100% !important;
		min-height: 100%;
		max-height: 100%;
		overflow: visible;
	}
	.pagedjs_page {
		margin: 0;
		padding: 0;
		max-height: 100%;
		min-height: 100%;
		height: 100% !important;
		page-break-after: always;
		break-after: page;
	}
	.pagedjs_sheet {
		margin: 0;
		padding: 0;
		max-height: 100%;
		min-height: 100%;
		height: 100% !important;
	}
}
`;async function El(a,n={}){return new Promise(function(l,d){let h=new XMLHttpRequest;h.open(n.method||"get",a,!0);for(let g in n.headers)h.setRequestHeader(g,n.headers[g]);h.withCredentials=n.credentials==="include",h.onload=()=>{let g=h.status===0&&a.startsWith("file://")?200:h.status;l(new Response(h.responseText,{status:g}))},h.onerror=d,h.send(n.body||null)})}var yh=class{constructor(n){this.sheets=[],this.inserted=[],this.hooks={},this.hooks.onUrl=new pe(this),this.hooks.onAtPage=new pe(this),this.hooks.onAtMedia=new pe(this),this.hooks.onRule=new pe(this),this.hooks.onDeclaration=new pe(this),this.hooks.onContent=new pe(this),this.hooks.onSelector=new pe(this),this.hooks.onPseudoSelector=new pe(this),this.hooks.onImport=new pe(this),this.hooks.beforeTreeParse=new pe(this),this.hooks.beforeTreeWalk=new pe(this),this.hooks.afterTreeWalk=new pe(this),n!==!1&&this.setup()}setup(){return this.base=this.insert(tk),this.styleEl=document.createElement("style"),document.head.appendChild(this.styleEl),this.styleSheet=this.styleEl.sheet,this.styleSheet}async add(){let n=[],l=[];for(var d=0;d<arguments.length;d++){let h;if(typeof arguments[d]=="object")for(let g in arguments[d]){let b=arguments[d];h=new Promise(function(x,C){l.push(g),x(b[g])})}else l.push(arguments[d]),h=El(arguments[d]).then(g=>g.text());n.push(h)}return await Promise.all(n).then(async h=>{let g="";for(let b=0;b<h.length;b++)g=await this.convertViaSheet(h[b],l[b]),this.insert(g);return g})}async convertViaSheet(n,l){let d=new ek(l,this.hooks);await d.parse(n);for(let h of d.imported){let g=await El(h).then(x=>x.text()),b=await this.convertViaSheet(g,h);this.insert(b)}return this.sheets.push(d),typeof d.width<"u"&&(this.width=d.width),typeof d.height<"u"&&(this.height=d.height),typeof d.orientation<"u"&&(this.orientation=d.orientation),d.toString()}insert(n){let l=document.querySelector("head"),d=document.createElement("style");return d.setAttribute("data-pagedjs-inserted-styles","true"),d.appendChild(document.createTextNode(n)),l.appendChild(d),this.inserted.push(d),d}destroy(){this.styleEl.remove(),this.inserted.forEach(n=>{n.remove()}),this.sheets=[]}},vh=yh;var iT=ot(fr(),1);var ik=ot(fr(),1),Tl=class{constructor(n,l,d){let h=Object.assign({},n&&n.hooks,l&&l.hooks,d&&d.hooks);this.chunker=n,this.polisher=l,this.caller=d;for(let g in h)g in this&&h[g].register(this[g].bind(this))}};(0,ik.default)(Tl.prototype);var Pe=Tl;var ce=ot(Gt(),1);var Sh={A0:{width:{value:841,unit:"mm"},height:{value:1189,unit:"mm"}},A1:{width:{value:594,unit:"mm"},height:{value:841,unit:"mm"}},A2:{width:{value:420,unit:"mm"},height:{value:594,unit:"mm"}},A3:{width:{value:297,unit:"mm"},height:{value:420,unit:"mm"}},A4:{width:{value:210,unit:"mm"},height:{value:297,unit:"mm"}},A5:{width:{value:148,unit:"mm"},height:{value:210,unit:"mm"}},A6:{width:{value:105,unit:"mm"},height:{value:148,unit:"mm"}},A7:{width:{value:74,unit:"mm"},height:{value:105,unit:"mm"}},A8:{width:{value:52,unit:"mm"},height:{value:74,unit:"mm"}},A9:{width:{value:37,unit:"mm"},height:{value:52,unit:"mm"}},A10:{width:{value:26,unit:"mm"},height:{value:37,unit:"mm"}},B4:{width:{value:250,unit:"mm"},height:{value:353,unit:"mm"}},B5:{width:{value:176,unit:"mm"},height:{value:250,unit:"mm"}},letter:{width:{value:8.5,unit:"in"},height:{value:11,unit:"in"}},legal:{width:{value:8.5,unit:"in"},height:{value:14,unit:"in"}},ledger:{width:{value:11,unit:"in"},height:{value:17,unit:"in"}}};var xh=class extends Pe{constructor(n,l,d){super(n,l,d),this.pages={},this.width=void 0,this.height=void 0,this.orientation=void 0,this.marginalia={}}pageModel(n){return{selector:n,name:void 0,psuedo:void 0,nth:void 0,marginalia:{},width:void 0,height:void 0,orientation:void 0,margin:{top:{},right:{},left:{},bottom:{}},padding:{top:{},right:{},left:{},bottom:{}},border:{top:{},right:{},left:{},bottom:{}},backgroundOrigin:void 0,block:{},marks:void 0,notes:void 0,added:!1}}onAtPage(n,l,d){let h,g,b="",x,C,I,B=!1;n.prelude?(x=this.getTypeSelector(n),C=this.getPsuedoSelector(n),I=this.getNthSelector(n),b=ce.default.generate(n.prelude)):b="*",b in this.pages?(h=this.pages[b],g=this.replaceMarginalia(n),B=!0,h.added=!1):(h=this.pageModel(b),g=this.replaceMarginalia(n),this.pages[b]=h),h.name=x,h.psuedo=C,h.nth=I,B?h.marginalia=Object.assign(h.marginalia,g):h.marginalia=g;let z=this.replaceNotes(n);h.notes=z;let k=this.replaceDeclarations(n);if(k.size&&(h.size=k.size,h.width=k.size.width,h.height=k.size.height,h.orientation=k.size.orientation,h.format=k.size.format),k.bleed&&k.bleed[0]!="auto")switch(k.bleed.length){case 4:h.bleed={top:k.bleed[0],right:k.bleed[1],bottom:k.bleed[2],left:k.bleed[3]};break;case 3:h.bleed={top:k.bleed[0],right:k.bleed[1],bottom:k.bleed[2],left:k.bleed[1]};break;case 2:h.bleed={top:k.bleed[0],right:k.bleed[1],bottom:k.bleed[0],left:k.bleed[1]};break;default:h.bleed={top:k.bleed[0],right:k.bleed[0],bottom:k.bleed[0],left:k.bleed[0]}}k.marks&&((!k.bleed||k.bleed&&k.bleed[0]==="auto")&&(h.bleed={top:{value:6,unit:"mm"},right:{value:6,unit:"mm"},bottom:{value:6,unit:"mm"},left:{value:6,unit:"mm"}}),h.marks=k.marks),k.margin&&(h.margin=k.margin),k.padding&&(h.padding=k.padding),k.border&&(h.border=k.border),k.marks&&(h.marks=k.marks),B?h.block.children.appendList(n.block.children):h.block=n.block,d.remove(l)}afterTreeWalk(n,l){let d="*"in this.pages&&this.pages["*"].added===!1;if(this.addPageClasses(this.pages,n,l),d){let h=this.pages["*"].width,g=this.pages["*"].height,b=this.pages["*"].format,x=this.pages["*"].orientation,C=this.pages["*"].bleed,I=this.pages["*"].marks,B,z;":left"in this.pages&&(B=this.pages[":left"].bleed),":right"in this.pages&&(z=this.pages[":right"].bleed),h&&g&&(this.width!==h||this.height!==g)&&(this.width=h,this.height=g,this.format=b,this.orientation=x,this.addRootVars(n,h,g,x,C,z,B,I),this.addRootPage(n,this.pages["*"].size,C,z,B),this.emit("size",{width:h,height:g,orientation:x,format:b,bleed:C}),this.emit("atpages",this.pages))}}getTypeSelector(n){let l;return ce.default.walk(n,{visit:"TypeSelector",enter:(d,h,g)=>{l=d.name}}),l}getPsuedoSelector(n){let l;return ce.default.walk(n,{visit:"PseudoClassSelector",enter:(d,h,g)=>{d.name!=="nth"&&(l=d.name)}}),l}getNthSelector(n){let l;return ce.default.walk(n,{visit:"PseudoClassSelector",enter:(d,h,g)=>{d.name==="nth"&&d.children&&(l=d.children.first().value)}}),l}replaceMarginalia(n){let l={},d=["top-left-corner","top-left","top","top-center","top-right","top-right-corner","bottom-left-corner","bottom-left","bottom","bottom-center","bottom-right","bottom-right-corner","left-top","left-middle","left","left-bottom","top-right-corner","right-top","right-middle","right","right-bottom","right-right-corner"];return ce.default.walk(n.block,{visit:"Atrule",enter:(h,g,b)=>{let x=h.name;d.includes(x)&&(x==="top"&&(x="top-center"),x==="right"&&(x="right-middle"),x==="left"&&(x="left-middle"),x==="bottom"&&(x="bottom-center"),l[x]=h.block,b.remove(g))}}),l}replaceNotes(n){let l={};return ce.default.walk(n.block,{visit:"Atrule",enter:(d,h,g)=>{let b=d.name;b==="footnote"&&(l[b]=d.block,g.remove(h))}}),l}replaceDeclarations(n){let l={};return ce.default.walk(n.block,{visit:"Declaration",enter:(d,h,g)=>{let b=ce.default.property(d.property).name;if(b==="marks")l.marks=[],ce.default.walk(d,{visit:"Identifier",enter:x=>{l.marks.push(x.name)}}),g.remove(h);else if(b==="margin")l.margin=this.getMargins(d),g.remove(h);else if(b.indexOf("margin-")===0){let x=b.substring(7);l.margin||(l.margin={top:{},right:{},left:{},bottom:{}}),l.margin[x]=d.value.children.first(),g.remove(h)}else if(b==="padding")l.padding=this.getPaddings(d.value),g.remove(h);else if(b.indexOf("padding-")===0){let x=b.substring(8);l.padding||(l.padding={top:{},right:{},left:{},bottom:{}}),l.padding[x]=d.value.children.first(),g.remove(h)}else if(b==="border")l.border||(l.border={top:{},right:{},left:{},bottom:{}}),l.border.top=ce.default.generate(d.value),l.border.right=ce.default.generate(d.value),l.border.left=ce.default.generate(d.value),l.border.bottom=ce.default.generate(d.value),g.remove(h);else if(b.indexOf("border-")===0){l.border||(l.border={top:{},right:{},left:{},bottom:{}});let x=b.substring(7);l.border[x]=ce.default.generate(d.value),g.remove(h)}else b==="size"?(l.size=this.getSize(d),g.remove(h)):b==="bleed"&&(l.bleed=[],ce.default.walk(d,{enter:x=>{switch(x.type){case"String":x.value.indexOf("auto")>-1&&l.bleed.push("auto");break;case"Dimension":l.bleed.push({value:x.value,unit:x.unit});break;case"Number":l.bleed.push({value:x.value,unit:"px"});break;default:}}}),g.remove(h))}}),l}getSize(n){let l,d,h,g;return ce.default.walk(n,{visit:"Dimension",enter:(b,x,C)=>{let{value:I,unit:B}=b;typeof l>"u"?l={value:I,unit:B}:typeof d>"u"&&(d={value:I,unit:B})}}),ce.default.walk(n,{visit:"String",enter:(b,x,C)=>{let I=b.value.replace(/["|']/g,""),B=Sh[I];B&&(l=B.width,d=B.height)}}),ce.default.walk(n,{visit:"Identifier",enter:(b,x,C)=>{let I=b.name;if(I==="landscape"||I==="portrait")h=b.name;else if(I!=="auto"){let B=Sh[I];B&&(l=B.width,d=B.height),g=I}}}),{width:l,height:d,orientation:h,format:g}}getMargins(n){let l=[],d={top:{},right:{},left:{},bottom:{}};if(ce.default.walk(n,{enter:h=>{switch(h.type){case"Dimension":l.push(h);break;case"Number":l.push({value:h.value,unit:"px"});break;default:}}}),l.length===1)for(let h in d)d[h]=l[0];else l.length===2?(d.top=l[0],d.right=l[1],d.bottom=l[0],d.left=l[1]):l.length===3?(d.top=l[0],d.right=l[1],d.bottom=l[2],d.left=l[1]):l.length===4&&(d.top=l[0],d.right=l[1],d.bottom=l[2],d.left=l[3]);return d}getPaddings(n){let l=[],d={top:{},right:{},left:{},bottom:{}};if(ce.default.walk(n,{enter:h=>{switch(h.type){case"Dimension":l.push(h);break;case"Number":l.push({value:h.value,unit:"px"});break;default:}}}),l.length===1)for(let h in d)d[h]=l[0];else l.length===2?(d.top=l[0],d.right=l[1],d.bottom=l[0],d.left=l[1]):l.length===3?(d.top=l[0],d.right=l[1],d.bottom=l[2],d.left=l[1]):l.length===4&&(d.top=l[0],d.right=l[1],d.bottom=l[2],d.left=l[3]);return d}getBorders(n){let l={top:{},right:{},left:{},bottom:{}};return n.prop=="border"?(l.top=ce.default.generate(n.value),l.right=ce.default.generate(n.value),l.bottom=ce.default.generate(n.value),l.left=ce.default.generate(n.value)):n.prop=="border-top"?l.top=ce.default.generate(n.value):n.prop=="border-right"?l.right=ce.default.generate(n.value):n.prop=="border-bottom"?l.bottom=ce.default.generate(n.value):n.prop=="border-left"&&(l.left=ce.default.generate(n.value)),l}addPageClasses(n,l,d){if("*"in n&&n["*"].added===!1){let h=this.createPage(n["*"],l.children,d);d.insertRule(h),n["*"].added=!0}if(":left"in n&&n[":left"].added===!1){let h=this.createPage(n[":left"],l.children,d);d.insertRule(h),n[":left"].added=!0}if(":right"in n&&n[":right"].added===!1){let h=this.createPage(n[":right"],l.children,d);d.insertRule(h),n[":right"].added=!0}if(":first"in n&&n[":first"].added===!1){let h=this.createPage(n[":first"],l.children,d);d.insertRule(h),n[":first"].added=!0}if(":blank"in n&&n[":blank"].added===!1){let h=this.createPage(n[":blank"],l.children,d);d.insertRule(h),n[":blank"].added=!0}for(let h in n)if(n[h].nth&&n[h].added===!1){let g=this.createPage(n[h],l.children,d);d.insertRule(g),n[h].added=!0}for(let h in n)if(n[h].name&&n[h].added===!1){let g=this.createPage(n[h],l.children,d);d.insertRule(g),n[h].added=!0}}createPage(n,l,d){let h=this.selectorsForPage(n),g=n.block.children.copy(),b={type:"Block",loc:0,children:g},x=this.createRule(h,b);return this.addMarginVars(n.margin,g,g.first()),this.addPaddingVars(n.padding,g,g.first()),this.addBorderVars(n.border,g,g.first()),n.width&&this.addDimensions(n.width,n.height,n.orientation,g,g.first()),n.marginalia&&(this.addMarginaliaStyles(n,l,x,d),this.addMarginaliaContent(n,l,x,d)),n.notes&&this.addNotesStyles(n.notes,n,l,x,d),x}addMarginVars(n,l,d){for(let h in n)if(typeof n[h].value<"u"){let g=n[h].value+(n[h].unit||""),b=l.createItem({type:"Declaration",property:"--pagedjs-margin-"+h,value:{type:"Raw",value:g}});l.append(b,d)}}addPaddingVars(n,l,d){for(let h in n)if(typeof n[h].value<"u"){let g=n[h].value+(n[h].unit||""),b=l.createItem({type:"Declaration",property:"--pagedjs-padding-"+h,value:{type:"Raw",value:g}});l.append(b,d)}}addBorderVars(n,l,d){for(let h of Object.keys(n)){let g=n[h];if(typeof g=="string"){let b=l.createItem({type:"Declaration",property:"--pagedjs-border-"+h,value:{type:"Raw",value:g}});l.append(b,d)}}}addDimensions(n,l,d,h,g){let b,x;b=de(n),x=de(l),d&&d!=="portrait"&&([b,x]=[x,b]);let C=this.createVariable("--pagedjs-pagebox-width",b);h.appendData(C);let I=this.createVariable("--pagedjs-pagebox-height",x);h.appendData(I)}addMarginaliaStyles(n,l,d,h){for(let g in n.marginalia){let b=ce.default.clone(n.marginalia[g]),x=!1;if(b.children.isEmpty())continue;ce.default.walk(b,{visit:"Declaration",enter:(z,k,M)=>{if(z.property==="content"&&(z.value.children&&z.value.children.first().name==="none"?x=!1:x=!0,M.remove(k)),z.property==="vertical-align"&&(ce.default.walk(z,{visit:"Identifier",enter:(f,Y,se)=>{let V=f.name;V==="top"?f.name="flex-start":V==="middle"?f.name="center":V==="bottom"&&(f.name="flex-end")}}),z.property="align-items"),z.property==="width"&&(g==="top-left"||g==="top-center"||g==="top-right"||g==="bottom-left"||g==="bottom-center"||g==="bottom-right")){let f=ce.default.clone(z);f.property="max-width",M.appendData(f)}if(z.property==="height"&&(g==="left-top"||g==="left-middle"||g==="left-bottom"||g==="right-top"||g==="right-middle"||g==="right-bottom")){let f=ce.default.clone(z);f.property="max-height",M.appendData(f)}}});let C=this.selectorsForPageMargin(n,g),I=this.createRule(C,b);l.appendData(I);let B=ce.default.generate({type:"Selector",children:C});this.marginalia[B]={page:n,selector:B,block:n.marginalia[g],hasContent:x}}}addMarginaliaContent(n,l,d,h){let g;for(let b in n.marginalia){let x=ce.default.clone(n.marginalia[b]);if(ce.default.walk(x,{visit:"Declaration",enter:(M,f,Y)=>{M.property!=="content"&&Y.remove(f),M.value.children&&M.value.children.first().name==="none"&&(g=!0)}}),x.children.isEmpty())continue;let C=this.selectorsForPageMargin(n,b),I;C.insertData({type:"Combinator",name:">"}),C.insertData({type:"ClassSelector",name:"pagedjs_margin-content"}),C.insertData({type:"Combinator",name:">"}),C.insertData({type:"TypeSelector",name:"*"}),g?I=this.createDeclaration("display","none"):I=this.createDeclaration("display","block");let B=this.createRule(C,[I]);h.insertRule(B);let z=this.selectorsForPageMargin(n,b);z.insertData({type:"Combinator",name:">"}),z.insertData({type:"ClassSelector",name:"pagedjs_margin-content"}),z.insertData({type:"PseudoElementSelector",name:"after",children:null});let k=this.createRule(z,x);h.insertRule(k)}}addRootVars(n,l,d,h,g,b,x,C){let I=[],B=new ce.default.List;B.insertData({type:"PseudoClassSelector",name:"root",children:null});let z,k,M,f,Y,se;if(!g)z=de(l),k=de(d),M=de(l),f=de(d),Y=de(l),se=de(d);else{z=`calc( ${de(l)} + ${de(g.left)} + ${de(g.right)} )`,k=`calc( ${de(d)} + ${de(g.top)} + ${de(g.bottom)} )`,M=`calc( ${de(l)} + ${de(g.left)} + ${de(g.right)} )`,f=`calc( ${de(d)} + ${de(g.top)} + ${de(g.bottom)} )`,Y=`calc( ${de(l)} + ${de(g.left)} + ${de(g.right)} )`,se=`calc( ${de(d)} + ${de(g.top)} + ${de(g.bottom)} )`;let Ze=this.createVariable("--pagedjs-bleed-top",de(g.top)),Ge=this.createVariable("--pagedjs-bleed-right",de(g.right)),Ct=this.createVariable("--pagedjs-bleed-bottom",de(g.bottom)),ee=this.createVariable("--pagedjs-bleed-left",de(g.left)),Qe=this.createVariable("--pagedjs-bleed-right-top",de(g.top)),At=this.createVariable("--pagedjs-bleed-right-right",de(g.right)),De=this.createVariable("--pagedjs-bleed-right-bottom",de(g.bottom)),gt=this.createVariable("--pagedjs-bleed-right-left",de(g.left)),Je=this.createVariable("--pagedjs-bleed-left-top",de(g.top)),Hr=this.createVariable("--pagedjs-bleed-left-right",de(g.right)),Xn=this.createVariable("--pagedjs-bleed-left-bottom",de(g.bottom)),Fi=this.createVariable("--pagedjs-bleed-left-left",de(g.left));b&&(Qe=this.createVariable("--pagedjs-bleed-right-top",de(b.top)),At=this.createVariable("--pagedjs-bleed-right-right",de(b.right)),De=this.createVariable("--pagedjs-bleed-right-bottom",de(b.bottom)),gt=this.createVariable("--pagedjs-bleed-right-left",de(b.left)),M=`calc( ${de(l)} + ${de(b.left)} + ${de(b.right)} )`,f=`calc( ${de(d)} + ${de(b.top)} + ${de(b.bottom)} )`),x&&(Je=this.createVariable("--pagedjs-bleed-left-top",de(x.top)),Hr=this.createVariable("--pagedjs-bleed-left-right",de(x.right)),Xn=this.createVariable("--pagedjs-bleed-left-bottom",de(x.bottom)),Fi=this.createVariable("--pagedjs-bleed-left-left",de(x.left)),Y=`calc( ${de(l)} + ${de(x.left)} + ${de(x.right)} )`,se=`calc( ${de(d)} + ${de(x.top)} + ${de(x.bottom)} )`);let Kn=this.createVariable("--pagedjs-width",de(l)),wa=this.createVariable("--pagedjs-height",de(d));I.push(Ze,Ge,Ct,ee,Qe,At,De,gt,Je,Hr,Xn,Fi,Kn,wa)}if(C&&C.forEach(Ze=>{let Ge=this.createVariable("--pagedjs-mark-"+Ze+"-display","block");I.push(Ge)}),h){let Ze=this.createVariable("--pagedjs-orientation",h);I.push(Ze),h!=="portrait"&&([z,k]=[k,z],[M,f]=[f,M],[Y,se]=[se,Y])}let V=this.createVariable("--pagedjs-width",z),K=this.createVariable("--pagedjs-height",k),fe=this.createVariable("--pagedjs-width-right",M),me=this.createVariable("--pagedjs-height-right",f),He=this.createVariable("--pagedjs-width-left",Y),Ae=this.createVariable("--pagedjs-height-left",se);I.push(V,K,fe,me,He,Ae);let zt=this.createRule(B,I);n.children.appendData(zt)}addNotesStyles(n,l,d,h,g){for(let b in n){let x=this.selectorsForPage(l);x.insertData({type:"Combinator",name:" "}),x.insertData({type:"ClassSelector",name:"pagedjs_"+b+"_content"});let C=this.createRule(x,n[b]);d.appendData(C)}}addRootPage(n,l,d,h,g){let{width:b,height:x,orientation:C,format:I}=l,B=new ce.default.List,z=new ce.default.List,k=new ce.default.List,M=new ce.default.List,f=new ce.default.List,Y=new ce.default.List;if(d){let V=new ce.default.List,K=new ce.default.List;V.appendData({type:"Dimension",unit:b.unit,value:b.value}),V.appendData({type:"WhiteSpace",value:" "}),V.appendData({type:"Operator",value:"+"}),V.appendData({type:"WhiteSpace",value:" "}),V.appendData({type:"Dimension",unit:d.left.unit,value:d.left.value}),V.appendData({type:"WhiteSpace",value:" "}),V.appendData({type:"Operator",value:"+"}),V.appendData({type:"WhiteSpace",value:" "}),V.appendData({type:"Dimension",unit:d.right.unit,value:d.right.value}),K.appendData({type:"Dimension",unit:x.unit,value:x.value}),K.appendData({type:"WhiteSpace",value:" "}),K.appendData({type:"Operator",value:"+"}),K.appendData({type:"WhiteSpace",value:" "}),K.appendData({type:"Dimension",unit:d.top.unit,value:d.top.value}),K.appendData({type:"WhiteSpace",value:" "}),K.appendData({type:"Operator",value:"+"}),K.appendData({type:"WhiteSpace",value:" "}),K.appendData({type:"Dimension",unit:d.bottom.unit,value:d.bottom.value}),M.appendData({type:"Function",name:"calc",children:V}),M.appendData({type:"WhiteSpace",value:" "}),M.appendData({type:"Function",name:"calc",children:K})}else I?(M.appendData({type:"Identifier",name:I}),C&&(M.appendData({type:"WhiteSpace",value:" "}),M.appendData({type:"Identifier",name:C}))):(M.appendData({type:"Dimension",unit:b.unit,value:b.value}),M.appendData({type:"WhiteSpace",value:" "}),M.appendData({type:"Dimension",unit:x.unit,value:x.value}));B.appendData({type:"Declaration",property:"size",loc:null,value:{type:"Value",children:M}}),B.appendData({type:"Declaration",property:"margin",loc:null,value:{type:"Value",children:[{type:"Dimension",unit:"px",value:0}]}}),B.appendData({type:"Declaration",property:"padding",loc:null,value:{type:"Value",children:[{type:"Dimension",unit:"px",value:0}]}}),B.appendData({type:"Declaration",property:"padding",loc:null,value:{type:"Value",children:[{type:"Dimension",unit:"px",value:0}]}});let se=n.children.createItem({type:"Atrule",prelude:null,name:"page",block:{type:"Block",loc:null,children:B}});if(n.children.append(se),g){let V=new ce.default.List,K=new ce.default.List;V.appendData({type:"Dimension",unit:b.unit,value:b.value}),V.appendData({type:"WhiteSpace",value:" "}),V.appendData({type:"Operator",value:"+"}),V.appendData({type:"WhiteSpace",value:" "}),V.appendData({type:"Dimension",unit:g.left.unit,value:g.left.value}),V.appendData({type:"WhiteSpace",value:" "}),V.appendData({type:"Operator",value:"+"}),V.appendData({type:"WhiteSpace",value:" "}),V.appendData({type:"Dimension",unit:g.right.unit,value:g.right.value}),K.appendData({type:"Dimension",unit:x.unit,value:x.value}),K.appendData({type:"WhiteSpace",value:" "}),K.appendData({type:"Operator",value:"+"}),K.appendData({type:"WhiteSpace",value:" "}),K.appendData({type:"Dimension",unit:g.top.unit,value:g.top.value}),K.appendData({type:"WhiteSpace",value:" "}),K.appendData({type:"Operator",value:"+"}),K.appendData({type:"WhiteSpace",value:" "}),K.appendData({type:"Dimension",unit:g.bottom.unit,value:g.bottom.value}),f.appendData({type:"Function",name:"calc",children:V}),f.appendData({type:"WhiteSpace",value:" "}),f.appendData({type:"Function",name:"calc",children:K}),z.appendData({type:"Declaration",property:"size",loc:null,value:{type:"Value",children:f}});let fe=n.children.createItem({type:"Atrule",prelude:null,name:"page :left",block:{type:"Block",loc:null,children:z}});n.children.append(fe)}if(h){let V=new ce.default.List,K=new ce.default.List;V.appendData({type:"Dimension",unit:b.unit,value:b.value}),V.appendData({type:"WhiteSpace",value:" "}),V.appendData({type:"Operator",value:"+"}),V.appendData({type:"WhiteSpace",value:" "}),V.appendData({type:"Dimension",unit:h.left.unit,value:h.left.value}),V.appendData({type:"WhiteSpace",value:" "}),V.appendData({type:"Operator",value:"+"}),V.appendData({type:"WhiteSpace",value:" "}),V.appendData({type:"Dimension",unit:h.right.unit,value:h.right.value}),K.appendData({type:"Dimension",unit:x.unit,value:x.value}),K.appendData({type:"WhiteSpace",value:" "}),K.appendData({type:"Operator",value:"+"}),K.appendData({type:"WhiteSpace",value:" "}),K.appendData({type:"Dimension",unit:h.top.unit,value:h.top.value}),K.appendData({type:"WhiteSpace",value:" "}),K.appendData({type:"Operator",value:"+"}),K.appendData({type:"WhiteSpace",value:" "}),K.appendData({type:"Dimension",unit:h.bottom.unit,value:h.bottom.value}),Y.appendData({type:"Function",name:"calc",children:V}),Y.appendData({type:"WhiteSpace",value:" "}),Y.appendData({type:"Function",name:"calc",children:K}),k.appendData({type:"Declaration",property:"size",loc:null,value:{type:"Value",children:Y}});let fe=n.children.createItem({type:"Atrule",prelude:null,name:"page :right",block:{type:"Block",loc:null,children:k}});n.children.append(fe)}}getNth(n){let l=n.indexOf("n"),d=n.indexOf("+"),h=n.split("n"),g=n.split("+"),b=null,x=null;return l>-1?(b=h[0],d>-1&&(x=g[1])):x=n,{type:"Nth",loc:null,selector:null,nth:{type:"AnPlusB",loc:null,a:b,b:x}}}addPageAttributes(n,l,d){let h=[l.dataset.page];if(h&&h.length)for(let g of h)g&&(n.name=g,n.element.classList.add("pagedjs_named_page"),n.element.classList.add("pagedjs_"+g+"_page"),l.dataset.splitFrom||n.element.classList.add("pagedjs_"+g+"_first_page"))}getStartElement(n,l){let d=l&&l.node;if(!n&&!l)return;if(!d)return n.children[0];if(d.nodeType===1&&d.parentNode.nodeType===11||d.nodeType===1&&d.dataset.page)return d;let h=So(d),g=h.querySelectorAll("[data-page]");return g.length?g[g.length-1]:h.children[0]}beforePageLayout(n,l,d,h){let g=this.getStartElement(l,d);g&&this.addPageAttributes(n,g,h.pages)}finalizePage(n,l,d,h){for(let g in this.marginalia){let b=this.marginalia[g],x=g.split(" "),C;l.element.matches(x[0])&&b.hasContent&&(C=l.element.querySelector(x[1]),C.classList.add("hasContent"))}["top","bottom"].forEach(g=>{let b=l.element.querySelector(".pagedjs_margin-"+g),x=l.element.querySelector(".pagedjs_margin-"+g+"-center"),C=l.element.querySelector(".pagedjs_margin-"+g+"-left"),I=l.element.querySelector(".pagedjs_margin-"+g+"-right"),B=x.classList.contains("hasContent"),z=C.classList.contains("hasContent"),k=I.classList.contains("hasContent"),M,f,Y;if(z&&(f=window.getComputedStyle(C)["max-width"]),k&&(Y=window.getComputedStyle(I)["max-width"]),B)if(M=window.getComputedStyle(x)["max-width"],M==="none"||M==="auto")if(!z&&!k)b.style["grid-template-columns"]="0 1fr 0";else if(z)if(k)if(f!=="none"&&f!=="auto")Y!=="none"&&Y!=="auto"?b.style["grid-template-columns"]=f+" 1fr "+Y:b.style["grid-template-columns"]=f+" 1fr "+f;else if(Y!=="none"&&Y!=="auto")b.style["grid-template-columns"]=Y+" 1fr "+Y;else{b.style["grid-template-columns"]="auto auto 1fr",C.style["white-space"]="nowrap",x.style["white-space"]="nowrap",I.style["white-space"]="nowrap";let se=C.offsetWidth,V=x.offsetWidth,K=I.offsetWidth,fe=se+V+K,me=V*100/fe;me>40?b.style["grid-template-columns"]="minmax(16.66%, 1fr) minmax(33%, "+me+"%) minmax(16.66%, 1fr)":b.style["grid-template-columns"]="repeat(3, 1fr)",C.style["white-space"]="normal",x.style["white-space"]="normal",I.style["white-space"]="normal"}else if(f!=="none"&&f!=="auto")b.style["grid-template-columns"]=f+" 1fr "+f;else{b.style["grid-template-columns"]="auto auto 1fr",C.style["white-space"]="nowrap",x.style["white-space"]="nowrap";let se=C.offsetWidth,V=x.offsetWidth,K=se+V,fe=V*100/K;b.style["grid-template-columns"]="minmax(16.66%, 1fr) minmax(33%, "+fe+"%) minmax(16.66%, 1fr)",C.style["white-space"]="normal",x.style["white-space"]="normal"}else if(Y!=="none"&&Y!=="auto")b.style["grid-template-columns"]=Y+" 1fr "+Y;else{b.style["grid-template-columns"]="auto auto 1fr",I.style["white-space"]="nowrap",x.style["white-space"]="nowrap";let se=I.offsetWidth,V=x.offsetWidth,K=se+V,fe=V*100/K;b.style["grid-template-columns"]="minmax(16.66%, 1fr) minmax(33%, "+fe+"%) minmax(16.66%, 1fr)",I.style["white-space"]="normal",x.style["white-space"]="normal"}else M!=="none"&&M!=="auto"&&(z&&f!=="none"&&f!=="auto"?b.style["grid-template-columns"]=f+" "+M+" 1fr":k&&Y!=="none"&&Y!=="auto"?b.style["grid-template-columns"]="1fr "+M+" "+Y:b.style["grid-template-columns"]="1fr "+M+" 1fr");else if(z)if(!k)b.style["grid-template-columns"]="1fr 0 0";else if(f!=="none"&&f!=="auto")Y!=="none"&&Y!=="auto"?b.style["grid-template-columns"]=f+" 1fr "+Y:b.style["grid-template-columns"]=f+" 0 1fr";else if(Y!=="none"&&Y!=="auto")b.style["grid-template-columns"]="1fr 0 "+Y;else{b.style["grid-template-columns"]="auto 1fr auto",C.style["white-space"]="nowrap",I.style["white-space"]="nowrap";let se=C.offsetWidth,V=I.offsetWidth,K=se+V,fe=se*100/K;b.style["grid-template-columns"]="minmax(16.66%, "+fe+"%) 0 1fr",C.style["white-space"]="normal",I.style["white-space"]="normal"}else Y!=="none"&&Y!=="auto"?b.style["grid-template-columns"]="1fr 0 "+Y:b.style["grid-template-columns"]="0 0 1fr"}),["left","right"].forEach(g=>{let b=l.element.querySelector(".pagedjs_margin-"+g+"-middle.hasContent"),x=l.element.querySelector(".pagedjs_margin-"+g),C=l.element.querySelector(".pagedjs_margin-"+g+"-top"),I=l.element.querySelector(".pagedjs_margin-"+g+"-bottom"),B=C.classList.contains("hasContent"),z=I.classList.contains("hasContent"),k,M,f;B&&(M=window.getComputedStyle(C)["max-height"]),z&&(f=window.getComputedStyle(I)["max-height"]),b?(k=window.getComputedStyle(b)["max-height"],k==="none"||k==="auto"?!B&&!z?x.style["grid-template-rows"]="0 1fr 0":B?z?M!=="none"&&M!=="auto"?f!=="none"&&f!=="auto"?x.style["grid-template-rows"]=M+" calc(100% - "+M+" - "+f+") "+f:x.style["grid-template-rows"]=M+" calc(100% - "+M+"*2) "+M:f!=="none"&&f!=="auto"&&(x.style["grid-template-rows"]=f+" calc(100% - "+f+"*2) "+f):M!=="none"&&M!=="auto"&&(x.style["grid-template-rows"]=M+" calc(100% - "+M+"*2) "+M):f!=="none"&&f!=="auto"&&(x.style["grid-template-rows"]=f+" calc(100% - "+f+"*2) "+f):B&&M!=="none"&&M!=="auto"?x.style["grid-template-rows"]=M+" "+k+" calc(100% - ("+M+" + "+k+"))":z&&f!=="none"&&f!=="auto"?x.style["grid-template-rows"]="1fr "+k+" "+f:x.style["grid-template-rows"]="calc((100% - "+k+")/2) "+k+" calc((100% - "+k+")/2)"):B?z?M!=="none"&&M!=="auto"?f!=="none"&&f!=="auto"?x.style["grid-template-rows"]=M+" 1fr "+f:x.style["grid-template-rows"]=M+" 0 1fr":f!=="none"&&f!=="auto"?x.style["grid-template-rows"]="1fr 0 "+f:x.style["grid-template-rows"]="1fr 0 1fr":x.style["grid-template-rows"]="1fr 0 0":f!=="none"&&f!=="auto"?x.style["grid-template-rows"]="1fr 0 "+f:x.style["grid-template-rows"]="0 0 1fr"})}selectorsForPage(n){let l,d,h=new ce.default.List;return h.insertData({type:"ClassSelector",name:"pagedjs_page"}),n.name&&(h.insertData({type:"ClassSelector",name:"pagedjs_named_page"}),h.insertData({type:"ClassSelector",name:"pagedjs_"+n.name+"_page"})),n.psuedo&&!(n.name&&n.psuedo==="first")&&h.insertData({type:"ClassSelector",name:"pagedjs_"+n.psuedo+"_page"}),n.name&&n.psuedo==="first"&&h.insertData({type:"ClassSelector",name:"pagedjs_"+n.name+"_"+n.psuedo+"_page"}),n.nth&&(l=new ce.default.List,d=this.getNth(n.nth),l.insertData(d),h.insertData({type:"PseudoClassSelector",name:"nth-of-type",children:l})),h}selectorsForPageMargin(n,l){let d=this.selectorsForPage(n);return d.insertData({type:"Combinator",name:" "}),d.insertData({type:"ClassSelector",name:"pagedjs_margin-"+l}),d}createDeclaration(n,l,d){let h=new ce.default.List;return h.insertData({type:"Identifier",loc:null,name:l}),{type:"Declaration",loc:null,important:d,property:n,value:{type:"Value",loc:null,children:h}}}createVariable(n,l){return{type:"Declaration",loc:null,property:n,value:{type:"Raw",value:l}}}createCalculatedDimension(n,l,d,h="+"){let g=new ce.default.List,b=new ce.default.List;return l.forEach((x,C)=>{b.appendData({type:"Dimension",unit:x.unit,value:x.value}),b.appendData({type:"WhiteSpace",value:" "}),C+1<l.length&&(b.appendData({type:"Operator",value:h}),b.appendData({type:"WhiteSpace",value:" "}))}),g.insertData({type:"Function",loc:null,name:"calc",children:b}),{type:"Declaration",loc:null,important:d,property:n,value:{type:"Value",loc:null,children:g}}}createDimension(n,l,d){let h=new ce.default.List;return h.insertData({type:"Dimension",loc:null,value:l.value,unit:l.unit}),{type:"Declaration",loc:null,important:d,property:n,value:{type:"Value",loc:null,children:h}}}createBlock(n){let l=new ce.default.List;return n.forEach(d=>{l.insertData(d)}),{type:"Block",loc:null,children:l}}createRule(n,l){let d=new ce.default.List;return d.insertData({type:"Selector",children:n}),Array.isArray(l)&&(l=this.createBlock(l)),{type:"Rule",prelude:{type:"SelectorList",children:d},block:l}}},rk=xh;var wh=ot(Gt(),1);var Ch=class extends Pe{constructor(n,l,d){super(n,l,d),this.breaks={}}onDeclaration(n,l,d,h){let g=n.property;if(g==="page"){let x=n.value.children.first().name,C=wh.default.generate(h.ruleNode.prelude),B={property:g,value:x,selector:C,name:x};C.split(",").forEach(z=>{this.breaks[z]?this.breaks[z].push(B):this.breaks[z]=[B]}),d.remove(l)}if(g==="break-before"||g==="break-after"||g==="page-break-before"||g==="page-break-after"){let x=n.value.children.first().name,C=wh.default.generate(h.ruleNode.prelude);g==="page-break-before"?g="break-before":g==="page-break-after"&&(g="break-after");let I={property:g,value:x,selector:C};C.split(",").forEach(B=>{this.breaks[B]?this.breaks[B].push(I):this.breaks[B]=[I]}),d.remove(l)}}afterParsed(n){this.processBreaks(n,this.breaks)}processBreaks(n,l){for(let h in l){let g=n.querySelectorAll(h);for(var d=0;d<g.length;d++)for(let b of l[h])if(b.property==="break-after"){let x=Au(g[d],n);g[d].setAttribute("data-break-after",b.value),x&&x.setAttribute("data-previous-break-after",b.value)}else if(b.property==="break-before"){let x=db(g[d],n);if(x){if(b.value==="page"&&wo(g[d],x))continue;g[d].setAttribute("data-break-before",b.value),x.setAttribute("data-next-break-before",b.value)}}else if(b.property==="page"){g[d].setAttribute("data-page",b.value);let x=Au(g[d],n);x&&x.setAttribute("data-after-page",b.value)}else g[d].setAttribute("data-"+b.property,b.value)}}mergeBreaks(n,l){for(let d in l)d in n?n[d]=n[d].concat(l[d]):n[d]=l[d];return n}addBreakAttributes(n,l){let d=n.querySelector("[data-break-before]"),h=n.querySelector("[data-break-after]"),g=n.querySelector("[data-previous-break-after]");d&&(d.dataset.splitFrom?(l.splitFrom=d.dataset.splitFrom,n.setAttribute("data-split-from",d.dataset.splitFrom)):d.dataset.breakBefore&&d.dataset.breakBefore!=="avoid"&&(l.breakBefore=d.dataset.breakBefore,n.setAttribute("data-break-before",d.dataset.breakBefore))),h&&h.dataset&&(h.dataset.splitTo?(l.splitTo=h.dataset.splitTo,n.setAttribute("data-split-to",h.dataset.splitTo)):h.dataset.breakAfter&&h.dataset.breakAfter!=="avoid"&&(l.breakAfter=h.dataset.breakAfter,n.setAttribute("data-break-after",h.dataset.breakAfter))),g&&g.dataset&&g.dataset.previousBreakAfter&&g.dataset.previousBreakAfter!=="avoid"&&(l.previousBreakAfter=g.dataset.previousBreakAfter)}afterPageLayout(n,l){this.addBreakAttributes(n,l)}},nk=Ch;var sk=ot(Gt(),1),kh=class extends Pe{constructor(n,l,d){super(n,l,d)}onAtMedia(n,l,d){let h=this.getMediaName(n),g;h.includes("print")?(g=n.block.children,d.appendList(g),d.remove(l)):!h.includes("all")&&!h.includes("pagedjs-ignore")&&d.remove(l)}getMediaName(n){let l=[];if(!(typeof n.prelude>"u"||n.prelude.type!=="AtrulePrelude"))return sk.default.walk(n.prelude,{visit:"Identifier",enter:(d,h,g)=>{l.push(d.name)}}),l}},ak=kh;var Eh=class extends Pe{constructor(n,l,d){super(n,l,d)}afterPageLayout(n,l,d,h){let g=Array.from(n.querySelectorAll("[data-split-from]")),b=n.parentNode,x=Array.prototype.indexOf.call(b.children,n),C;if(x===0)return;C=b.children[x-1];let I;g.forEach(B=>{let z=B.dataset.ref;I=C.querySelector("[data-ref='"+z+"']:not([data-split-to])"),I&&(I.dataset.splitTo=z,I.dataset.splitFrom||(I.dataset.splitOriginal=!0))}),I&&this.handleAlignment(I)}handleAlignment(n){let l=window.getComputedStyle(n),d=l["text-align"],h=l["text-align-last"];n.dataset.lastSplitElement="true",d==="justify"&&h==="auto"?n.dataset.alignLastSplitElement="justify":n.dataset.alignLastSplitElement=h}},ok=Eh;var Pl=ot(Gt(),1),Th=class extends Pe{constructor(n,l,d){super(n,l,d),this.styleSheet=l.styleSheet,this.counters={},this.resetCountersMap=new Map}onDeclaration(n,l,d,h){let g=n.property;if(g==="counter-increment"){this.handleIncrement(n,h);let b=!1;n.value.children.forEach(x=>{x.type&&x.type!=="WhiteSpace"&&(b=!0)}),b||d.remove(l)}else if(g==="counter-reset"){this.handleReset(n,h);let b=!1;n.value.children.forEach(x=>{x.type&&x.type!=="WhiteSpace"&&(b=!0)}),b||d.remove(l)}}afterParsed(n){this.processCounters(n,this.counters),this.scopeCounters(this.counters)}addCounter(n){return n in this.counters?this.counters[n]:(this.counters[n]={name:n,increments:{},resets:{}},this.counters[n])}handleIncrement(n,l){let d=[],h=n.value.children;return h.forEach((g,b)=>{if(g.type&&g.type==="Identifier"){let x=g.name;if(x==="page"||x.indexOf("target-counter-")===0)return;let C,I,B;b.next&&b.next.data.type==="WhiteSpace"&&(C=b.next),C&&C.next&&C.next.data.type==="Number"&&(I=C.next,B=parseInt(I.data.value));let z=Pl.default.generate(l.ruleNode.prelude),k;x in this.counters?k=this.counters[x]:k=this.addCounter(x);let M={selector:z,number:B||1};k.increments[z]=M,d.push(M),h.remove(b),C&&h.remove(C),I&&h.remove(I)}}),d}handleReset(n,l){let d=n.value.children;d.forEach((h,g)=>{if(h.type&&h.type==="Identifier"){let b=h.name,x,C,I;g.next&&g.next.data.type==="WhiteSpace"&&(x=g.next),x&&x.next&&(x.next.data.type==="Number"?(C=x.next,I=parseInt(C.data.value)):x.next.data.type==="Function"&&x.next.data.name==="var"&&(C=x.next,I=x.next.data.children.head.data.name));let B,z,k=l.ruleNode.prelude;l.ruleNode.type==="Atrule"&&l.ruleNode.name==="page"?z=".pagedjs_page":z=Pl.default.generate(k||l.ruleNode),b==="footnote"&&this.addFootnoteMarkerCounter(n.value.children),b in this.counters?B=this.counters[b]:B=this.addCounter(b);let M={selector:z,number:I||0};B.resets[z]=M,z!==".pagedjs_page"&&(d.remove(g),x&&d.remove(x),C&&d.remove(C))}})}processCounters(n,l){let d;for(let h in l)d=this.counters[h],this.processCounterIncrements(n,d),this.processCounterResets(n,d),h!=="page"&&this.addCounterValues(n,d)}scopeCounters(n){let l=[];for(let d in n)d!=="page"&&l.push(`${n[d].name} 0`);this.insertRule(`.pagedjs_pages { counter-reset: ${l.join(" ")} page 0 pages var(--pagedjs-page-count) footnote var(--pagedjs-footnotes-count) footnote-marker var(--pagedjs-footnotes-count)}`)}insertRule(n){this.styleSheet.insertRule(n,this.styleSheet.cssRules.length)}processCounterIncrements(n,l){let d;for(let h in l.increments){d=l.increments[h];let g=n.querySelectorAll(d.selector);for(let b=0;b<g.length;b++)g[b].setAttribute("data-counter-"+l.name+"-increment",d.number),g[b].getAttribute("data-counter-increment")?g[b].setAttribute("data-counter-increment",g[b].getAttribute("data-counter-increment")+" "+l.name):g[b].setAttribute("data-counter-increment",l.name)}}processCounterResets(n,l){let d;for(let g in l.resets){d=l.resets[g];let b=n.querySelectorAll(d.selector);for(var h=0;h<b.length;h++){let x=d.number;typeof x=="string"&&x.startsWith("--")&&(x=b[h].style.getPropertyValue(x)||0),b[h].setAttribute("data-counter-"+l.name+"-reset",x),b[h].getAttribute("data-counter-reset")?b[h].setAttribute("data-counter-reset",b[h].getAttribute("data-counter-reset")+" "+l.name):b[h].setAttribute("data-counter-reset",l.name)}}}addCounterValues(n,l){let d=l.name;if(d==="page"||d==="footnote")return;let h=n.querySelectorAll("[data-counter-"+d+"-reset], [data-counter-"+d+"-increment]"),g=0,b,x,C,I,B,z,k;for(let M=0;M<h.length;M++)b=h[M],z=0,k=[],b.hasAttribute("data-counter-"+d+"-reset")&&(C=b.getAttribute("data-counter-"+d+"-reset"),I=parseInt(C),z=I-g,k.push(`${d} ${z}`),g=I),b.hasAttribute("data-counter-"+d+"-increment")&&(x=b.getAttribute("data-counter-"+d+"-increment"),B=parseInt(x),g+=B,b.setAttribute("data-counter-"+d+"-value",g),k.push(`${d} ${B}`)),k.length>0&&this.incrementCounterForElement(b,k)}addFootnoteMarkerCounter(n){let l=[];Pl.default.walk(n,{visit:"Identifier",enter:(d,h,g)=>{l.push(d.name)}}),!l.includes("footnote-maker")&&(n.insertData({type:"WhiteSpace",value:" "}),n.insertData({type:"Identifier",name:"footnote-marker"}),n.insertData({type:"WhiteSpace",value:" "}),n.insertData({type:"Number",value:0}))}incrementCounterForElement(n,l){if(!n||!l||l.length===0)return;let d=n.dataset.ref,h=Array.from(this.styleSheet.cssRules).filter(b=>b.selectorText===`[data-ref="${n.dataset.ref}"]:not([data-split-from])`&&b.style[0]==="counter-increment").map(b=>b.style.counterIncrement);h.push(this.mergeIncrements(l,(b,x)=>(parseInt(b)||0)+(parseInt(x)||0)));let g=this.mergeIncrements(h,(b,x)=>x);this.insertRule(`[data-ref="${d}"]:not([data-split-from]) { counter-increment: ${g} }`)}mergeIncrements(n,l){let d={};return n.forEach(h=>{let g=h.split(" ");for(let b=0;b<g.length;b+=2)d[g[b]]=l(d[g[b]],g[b+1])}),Object.entries(d).map(([h,g])=>`${h} ${g}`).join(" ")}afterPageLayout(n,l){let d=[];n.querySelectorAll("[data-counter-page-reset]:not([data-split-from])").forEach(b=>{let x=b.dataset&&b.dataset.ref;if(!(x&&this.resetCountersMap.has(x))){x&&this.resetCountersMap.set(x,"");let C=b.dataset.counterPageReset;d.push(`page ${C}`)}}),n.querySelectorAll("[data-counter-footnote-reset]:not([data-split-from])").forEach(b=>{let x=b.dataset.counterFootnoteReset;d.push(`footnote ${x}`),d.push(`footnote-marker ${x}`)}),d.length&&this.styleSheet.insertRule(`[data-page-number="${n.dataset.pageNumber}"] { counter-increment: none; counter-reset: ${d.join(" ")} }`,this.styleSheet.cssRules.length)}},lk=Th;var Ph=class extends Pe{constructor(n,l,d){super(n,l,d)}afterParsed(n){let l=n.querySelectorAll("ol");for(var d of l)this.addDataNumbers(d)}afterPageLayout(n,l,d,h){var g=n.getElementsByTagName("ol");for(var b of g)b.firstElementChild&&(b.start=b.firstElementChild.dataset.itemNum)}addDataNumbers(n){let l=1;n.hasAttribute("start")&&(l=parseInt(n.getAttribute("start"),10),isNaN(l)&&(l=1));let d=n.children;for(var h=0;h<d.length;h++)d[h].setAttribute("data-item-num",h+l)}},dk=Ph;var uk=ot(Gt(),1),Ah=class extends Pe{constructor(n,l,d){super(n,l,d),this.styleSheet=l.styleSheet,this.fixedElementsSelector=[],this.fixedElements=[]}onDeclaration(n,l,d,h){if(n.property==="position"&&n.value.children.first().name==="fixed"){let g=uk.default.generate(h.ruleNode.prelude);this.fixedElementsSelector.push(g),d.remove(l)}}afterParsed(n){this.fixedElementsSelector.forEach(l=>{n.querySelectorAll(`${l}`).forEach(d=>{d.style.setProperty("position","absolute"),this.fixedElements.push(d),d.remove()})})}afterPageLayout(n,l,d){this.fixedElements.forEach(h=>{let g=h.cloneNode(!0);n.querySelector(".pagedjs_pagebox").insertAdjacentElement("afterbegin",g)})}},ck=Ah;var hk=ot(Gt(),1),Nh=class extends Pe{constructor(n,l,d){super(n,l,d),this.styleSheet=l.styleSheet,this.pageCounter={name:"page",increments:{},resets:{}}}onDeclaration(n,l,d,h){n.property==="counter-increment"&&this.handleIncrement(n,h)&&d.remove(l)}afterParsed(n){for(let l in this.pageCounter.increments){let d=this.pageCounter.increments[l];this.insertRule(`${d.selector} { --pagedjs-page-counter-increment: ${d.number} }`)}}handleIncrement(n,l){let d=n.value.children.first(),h=n.value.children.getSize()>1?n.value.children.last().value:1,g=d&&d.name;if(g&&g.indexOf("target-counter-")===0||g!=="page"||l.ruleNode.name==="page"&&l.ruleNode.type==="Atrule")return;let b=hk.default.generate(l.ruleNode.prelude);return this.pageCounter.increments[b]={selector:b,number:h}}insertRule(n){this.styleSheet.insertRule(n,this.styleSheet.cssRules.length)}},pk=Nh;var Ih=ot(Gt(),1);var Oh=class extends Pe{constructor(n,l,d){super(n,l,d),this.styleSheet=l.styleSheet,this.selectors={}}onRule(n,l,d){let h=Ih.default.generate(n.prelude);if(h.match(/:(first|last|nth)-of-type/)){let g=Ih.default.generate(n.block);g=g.replace(/[{}]/g,"");let b="nth-of-type-"+Kt();h.split(",").forEach(x=>{this.selectors[x]?this.selectors[x][1]=`${this.selectors[x][1]};${g}`:this.selectors[x]=[b,g]}),d.remove(l)}}afterParsed(n){this.processSelectors(n,this.selectors)}processSelectors(n,l){for(let h in l){let g=n.querySelectorAll(h);for(var d=0;d<g.length;d++){let x=g[d].getAttribute("data-nth-of-type");x&&x!=""?(x=`${x},${l[h][0]}`,g[d].setAttribute("data-nth-of-type",x)):g[d].setAttribute("data-nth-of-type",l[h][0])}let b=`*[data-nth-of-type*='${l[h][0]}'] { ${l[h][1]}; }`;this.styleSheet.insertRule(b,this.styleSheet.cssRules.length)}}},mk=Oh;var Rh=ot(Gt(),1);var Lh=class extends Pe{constructor(n,l,d){super(n,l,d),this.styleSheet=l.styleSheet,this.selectors={}}onRule(n,l,d){let h=Rh.default.generate(n.prelude);if(h.match(/\+/)){let g=Rh.default.generate(n.block);g=g.replace(/[{}]/g,"");let b="following-"+Kt();h.split(",").forEach(x=>{this.selectors[x]?this.selectors[x][1]=`${this.selectors[x][1]};${g}`:this.selectors[x]=[b,g]}),d.remove(l)}}afterParsed(n){this.processSelectors(n,this.selectors)}processSelectors(n,l){for(let h in l){let g=n.querySelectorAll(h);for(var d=0;d<g.length;d++){let x=g[d].getAttribute("data-following");x&&x!=""?(x=`${x},${l[h][0]}`,g[d].setAttribute("data-following",x)):g[d].setAttribute("data-following",l[h][0])}let b=`*[data-following*='${l[h][0]}'] { ${l[h][1]}; }`;this.styleSheet.insertRule(b,this.styleSheet.cssRules.length)}}},gk=Lh;var Gn=ot(Gt(),1),_h=class extends Pe{constructor(n,l,d){super(n,l,d),this.footnotes={},this.needsLayout=[]}onDeclaration(n,l,d,h){let g=n.property;if(g==="float"){let b=n.value.children&&n.value.children.first();if((b&&b.name)==="footnote"){let C=Gn.default.generate(h.ruleNode.prelude);this.footnotes[C]={selector:C,policy:"auto",display:"block"},d.remove(l)}}if(g==="footnote-policy"){let b=n.value.children&&n.value.children.first(),x=b&&b.name;if(x){let C=Gn.default.generate(h.ruleNode.prelude),I=this.footnotes[C];I&&(I.policy=x)}}if(g==="footnote-display"){let b=n.value.children&&n.value.children.first(),x=b&&b.name,C=Gn.default.generate(h.ruleNode.prelude);if(x&&this.footnotes[C]){let I=this.footnotes[C];I&&(I.display=x)}}}onPseudoSelector(n,l,d,h,g){let b=n.name;if(b==="footnote-marker"){let x=g.ruleNode.prelude,C=new Gn.default.List;x.children.first().children.each(I=>{I.type!=="PseudoElementSelector"&&C.appendData(I)}),C.appendData({type:"AttributeSelector",name:{type:"Identifier",name:"data-footnote-marker"},flags:null,loc:null,matcher:null,value:null}),C.appendData({type:"PseudoElementSelector",name:"marker",loc:null,children:null}),x.children.first().children=C}if(b==="footnote-call"){let x=g.ruleNode.prelude,C=new Gn.default.List;x.children.first().children.each(I=>{I.type!=="PseudoElementSelector"&&C.appendData(I)}),C.appendData({type:"AttributeSelector",name:{type:"Identifier",name:"data-footnote-call"},flags:null,loc:null,matcher:null,value:null}),C.appendData({type:"PseudoElementSelector",name:"after",loc:null,children:null}),x.children.first().children=C}}afterParsed(n){this.processFootnotes(n,this.footnotes)}processFootnotes(n,l){for(let h in l){let g=n.querySelectorAll(h),b,x=l[h];for(var d=0;d<g.length;d++)b=g[d],b.setAttribute("data-note","footnote"),b.setAttribute("data-break-before","avoid"),b.setAttribute("data-note-policy",x.policy||"auto"),b.setAttribute("data-note-display",x.display||"block"),this.processFootnoteContainer(b)}}processFootnoteContainer(n){let l=n.parentElement,d=l;for(;l;){if(Co(l)){d.setAttribute("data-has-notes","true");break}d=l,l=l.parentElement,l||d.setAttribute("data-has-notes","true")}}renderNode(n){if(n.nodeType==1){let l;if(!n.dataset)return;n.dataset.note==="footnote"?l=[n]:(n.dataset.hasNotes||n.querySelectorAll("[data-note='footnote']"))&&(l=n.querySelectorAll("[data-note='footnote']")),l&&l.length&&this.findVisibleFootnotes(l,n)}}findVisibleFootnotes(n,l){let d,h,g;d=l.closest(".pagedjs_page_content"),h=d.getBoundingClientRect(),g=h.left+h.width;for(let b=0;b<n.length;++b){let x=n[b];x.getBoundingClientRect().left<g&&this.moveFootnote(x,l.closest(".pagedjs_area"),!0)}}moveFootnote(n,l,d){let h=l.querySelector(".pagedjs_footnote_area"),g=h.querySelector(".pagedjs_footnote_content"),b=g.querySelector(".pagedjs_footnote_inner_content");if(!_t(n))return;let x;if(d&&(x=this.createFootnoteCall(n)),n.removeAttribute("data-break-before"),b.querySelector(`[data-ref="${n.dataset.ref}"]`)){n.remove();return}b.appendChild(n),g.classList.contains("pagedjs_footnote_empty")&&g.classList.remove("pagedjs_footnote_empty"),n.dataset.footnoteMarker=n.dataset.ref,n.id=`note-${n.dataset.ref}`;let I=g.scrollHeight,z=l.querySelector(".pagedjs_page_content").getBoundingClientRect(),k=z.left+z.width,M=x&&x.getBoundingClientRect(),f=h.getBoundingClientRect(),Y=this.marginsHeight(g),se=this.paddingHeight(g),V=this.borderHeight(g),K=Y+se+V,fe=Math.floor(f.top);f.height===0&&(fe-=this.marginsHeight(g,!1),fe-=this.paddingHeight(g,!1),fe-=this.borderHeight(g,!1));let me=n.dataset.notePolicy,He=0,Ae=0;if(x){let ee=x.previousSibling,Qe=new Range;ee?Qe.setStartBefore(ee):Qe.setStartBefore(x),Qe.setEndAfter(x);let At=Qe.getBoundingClientRect();if(He=At.bottom,!me||me==="auto")Ae=Math.ceil(At.bottom);else if(me==="line")Ae=Math.ceil(At.top);else if(me==="block"){let De=x.closest("p").previousElementSibling;De?Ae=Math.ceil(De.getBoundingClientRect().bottom):Ae=Math.ceil(At.bottom)}}let zt=I+K-f.height,Ze=He?fe-He:0,Ge=He?Math.floor(f.top)-Ae:0,Ct=h.querySelector("[data-note='footnote']");if(d&&M.left>k)n.remove();else if(!Ct&&d&&K>Ze){l.style.setProperty("--pagedjs-footnotes-height","0px");let ee=document.createElement("div");ee.appendChild(n),this.needsLayout.push(ee)}else d?He<f.top-zt?l.style.setProperty("--pagedjs-footnotes-height",`${I+Y+V}px`):(l.style.setProperty("--pagedjs-footnotes-height",`${f.height+Ge}px`),b.style.height=f.height+Ge-K+"px"):l.style.setProperty("--pagedjs-footnotes-height",`${I+K}px`)}createFootnoteCall(n){let l=n.parentElement,d=document.createElement("a");for(let h of n.classList)d.classList.add(`${h}`);return d.dataset.footnoteCall=n.dataset.ref,d.dataset.ref=n.dataset.ref,d.dataset.dataCounterFootnoteIncrement=1,d.href=`#note-${n.dataset.ref}`,l.insertBefore(d,n),d}afterPageLayout(n,l,d,h){let g=n.querySelector(".pagedjs_area"),b=l.footnotesArea,x=b.querySelector(".pagedjs_footnote_content"),C=b.querySelector(".pagedjs_footnote_inner_content"),I=x.getBoundingClientRect(),{width:B}=I;C.style.columnWidth=Math.round(B)+"px",C.style.columnGap="calc(var(--pagedjs-margin-right) + var(--pagedjs-margin-left))";let k=new _o(b,void 0,h.settings).findOverflow(C,I);if(k){let{startContainer:M,startOffset:f}=k,Y;if(_t(M)){let Ae=M.childNodes[f];Y=_t(Ae)&&Ae.hasAttribute("data-footnote-marker")}let se=k.extractContents();if(!Y){let Ae=se.firstElementChild;Ae.dataset.splitFrom=Ae.dataset.ref,this.handleAlignment(C.lastElementChild)}this.needsLayout.push(se),x.style.removeProperty("height"),C.style.removeProperty("height");let V=C.getBoundingClientRect(),{height:K}=V,fe=this.marginsHeight(x),me=this.paddingHeight(x),He=this.borderHeight(x);if(g.style.setProperty("--pagedjs-footnotes-height",`${K+fe+He+me}px`),C.childNodes.length===0&&x.classList.add("pagedjs_footnote_empty"),!d)h.clonePage(l);else{let Ae,zt;d.node&&typeof d.node.dataset<"u"&&typeof d.node.dataset.previousBreakAfter<"u"&&(zt=d.node.dataset.previousBreakAfter),d.node&&typeof d.node.dataset<"u"&&typeof d.node.dataset.breakBefore<"u"&&(Ae=d.node.dataset.breakBefore),(Ae||zt)&&h.clonePage(l)}}C.style.height="auto"}handleAlignment(n){let d=window.getComputedStyle(n)["text-align-last"];n.dataset.lastSplitElement="true",d==="auto"?n.dataset.alignLastSplitElement="justify":n.dataset.alignLastSplitElement=d}beforePageLayout(n){for(;this.needsLayout.length;){let l=this.needsLayout.shift();Array.from(l.childNodes).forEach(d=>{this.moveFootnote(d,n.element.querySelector(".pagedjs_area"),!1)})}}afterOverflowRemoved(n,l){let d=l.closest(".pagedjs_area"),h=d.querySelectorAll(".pagedjs_footnote_area [data-note='footnote']");for(let b=0;b<h.length;b++){let x=h[b];n.querySelector(`[data-footnote-call="${x.dataset.ref}"]`)&&x.remove()}let g=d.querySelector(".pagedjs_footnote_inner_content");g&&g.childNodes.length===0&&g.parentElement.classList.add("pagedjs_footnote_empty")}marginsHeight(n,l=!0){let d=window.getComputedStyle(n),h=parseInt(d.marginTop),g=parseInt(d.marginBottom),b=0;return h&&(b+=h),g&&l&&(b+=g),b}paddingHeight(n,l=!0){let d=window.getComputedStyle(n),h=parseInt(d.paddingTop),g=parseInt(d.paddingBottom),b=0;return h&&(b+=h),g&&l&&(b+=g),b}borderHeight(n,l=!0){let d=window.getComputedStyle(n),h=parseInt(d.borderTop),g=parseInt(d.borderBottom),b=0;return h&&(b+=h),g&&l&&(b+=g),b}},fk=_h;var bk=[ak,rk,nk,ok,lk,dk,ck,pk,mk,gk,fk];var fa=ot(Gt(),1),Bh=class extends Pe{constructor(n,l,d){super(n,l,d),this.runningSelectors={},this.elements={}}onDeclaration(n,l,d,h){if(n.property==="position"){let g=fa.default.generate(h.ruleNode.prelude),b=n.value.children.first().name;if(b==="running"){let x;fa.default.walk(n,{visit:"Function",enter:(C,I,B)=>{x=C.children.first().name}}),this.runningSelectors[x]={identifier:b,value:x,selector:g}}}n.property==="content"&&fa.default.walk(n,{visit:"Function",enter:(g,b,x)=>{if(g.name.indexOf("element")>-1){let C=fa.default.generate(h.ruleNode.prelude),I=g.name,B=g.children.first().name,z=[B],k="first";C.split(",").forEach(M=>{M=M.replace(/::after|::before/,""),this.elements[M]={func:I,args:z,value:B,style:k||"first",selector:M,fullSelector:C}})}}})}afterParsed(n){for(let l of Object.keys(this.runningSelectors)){let d=this.runningSelectors[l],h=Array.from(n.querySelectorAll(d.selector));if(d.identifier==="running")for(let g of h)g.style.display="none"}}afterPageLayout(n){for(let l of Object.keys(this.runningSelectors)){let d=this.runningSelectors[l],h=n.querySelector(d.selector);h&&(d.identifier==="running"?d.first=h:console.warn(d.value+"needs css replacement"))}this.orderedSelectors||(this.orderedSelectors=this.orderSelectors(this.elements));for(let l of this.orderedSelectors)if(l){let d=this.elements[l],h=n.querySelector(l);if(h){let g=this.runningSelectors[d.args[0]];if(g&&g.first){h.innerHTML="";let b=g.first.cloneNode(!0);b.style.display=null,h.appendChild(b)}}}}pageWeight(n){let l=1,d=n.split(" "),h=d.length&&d[0].split(".");switch(h.shift(),h.length){case 4:/^pagedjs_[\w-]+_first_page$/.test(h[3])?l=7:(h[3]==="pagedjs_left_page"||h[3]==="pagedjs_right_page")&&(l=6);break;case 3:h[1]==="pagedjs_named_page"&&(h[2].indexOf(":nth-of-type")>-1?l=7:l=5);break;case 2:h[1]==="pagedjs_first_page"?l=4:h[1]==="pagedjs_blank_page"?l=3:(h[1]==="pagedjs_left_page"||h[1]==="pagedjs_right_page")&&(l=2);break;default:h[0].indexOf(":nth-of-type")>-1?l=4:l=1}return l}orderSelectors(n){let l=Object.keys(n),d={1:[],2:[],3:[],4:[],5:[],6:[],7:[]},h=[];for(let b of l){let x=this.pageWeight(b);d[x].unshift(b)}for(var g=1;g<=7;g++)h=h.concat(d[g]);return h}beforeTreeParse(n,l){l.text=n.replace(/element[\s]*\(([^|^#)]*)\)/g,"element-ident($1)")}},yk=Bh;var Fh=ot(Gt(),1);function Cr(a,n=`"' `){if(a!=null)return a.replace(new RegExp(`^[${n}]+`),"").replace(new RegExp(`[${n}]+$`),"").replace(/["']/g,l=>"\\"+l).replace(/[\n]/g,l=>"\\00000A")}function vk(a){if(a!=null)return a.replace(new RegExp("::footnote-call","g"),"").replace(new RegExp("::footnote-marker","g"),"")}var zh=class extends Pe{constructor(n,l,d){super(n,l,d),this.stringSetSelectors={},this.type,this.pageLastString}onDeclaration(n,l,d,h){if(n.property==="string-set"){let g=Fh.default.generate(h.ruleNode.prelude),b=[],x=[],C=[];n.value.children.forEach(I=>{I.type==="Identifier"&&b.push(I.name),I.type==="Function"&&(x.push(I.name),I.children.forEach(B=>{B.type==="Identifier"&&C.push(B.name)}))}),b.forEach((I,B)=>{let z=x[B],k=C[B];this.stringSetSelectors[I]={identifier:I,func:z,value:k,selector:g}})}}onContent(n,l,d,h,g){if(n.name==="string"){let b=n.children&&n.children.first().name;this.type=n.children.last().name,n.name="var",n.children=new Fh.default.List,this.type==="first"||this.type==="last"||this.type==="start"||this.type==="first-except"?n.children.append(n.children.createItem({type:"Identifier",loc:null,name:"--pagedjs-string-"+this.type+"-"+b})):n.children.append(n.children.createItem({type:"Identifier",loc:null,name:"--pagedjs-string-first-"+b}))}}afterPageLayout(n){this.pageLastString===void 0&&(this.pageLastString={});for(let l of Object.keys(this.stringSetSelectors)){let d=this.stringSetSelectors[l],h=d.value,g=d.func,b=n.querySelectorAll(d.selector),x=l in this.pageLastString?this.pageLastString[l]:"",C,I,B,z;if(b.length==0)C=x,I=x,B=x,z=x;else{b.forEach(Y=>{g==="content"&&(this.pageLastString[l]=b[b.length-1].textContent),g==="attr"&&(this.pageLastString[l]=b[b.length-1].getAttribute(h)||"")}),g==="content"&&(C=b[0].textContent),g==="attr"&&(C=b[0].getAttribute(h)||""),g==="content"&&(I=b[b.length-1].textContent),g==="attr"&&(I=b[b.length-1].getAttribute(h)||"");let k=b[0].getBoundingClientRect().top,f=b[0].closest(".pagedjs_page_content").getBoundingClientRect().top;k==f?B=C:B=x,z=""}n.style.setProperty(`--pagedjs-string-first-${l}`,`"${Cr(C)}`),n.style.setProperty(`--pagedjs-string-last-${l}`,`"${Cr(I)}`),n.style.setProperty(`--pagedjs-string-start-${l}`,`"${Cr(B)}`),n.style.setProperty(`--pagedjs-string-first-except-${l}`,`"${Cr(z)}`)}}},Sk=zh;var ba=ot(Gt(),1),Mh=class extends Pe{constructor(n,l,d){super(n,l,d),this.styleSheet=l.styleSheet,this.counterTargets={}}onContent(n,l,d,h,g){if(n.name==="target-counter"){let b=ba.default.generate(g.ruleNode.prelude),x=n.children.first(),C=x.name,I=ba.default.generate(n),B=[];x.children.forEach(Y=>{Y.type==="Identifier"&&B.push(Y.name)});let z,k,M;n.children.forEach(Y=>{Y.type==="Identifier"&&(z?k||(M=ba.default.clone(Y),k=Y.name):z=Y.name)});let f="target-counter-"+Kt();b.split(",").forEach(Y=>{this.counterTargets[Y]={func:C,args:B,value:I,counter:z,style:k,selector:Y,fullSelector:b,variable:f}}),n.name="counter",n.children=new ba.default.List,n.children.appendData({type:"Identifier",loc:0,name:f}),M&&(n.children.appendData({type:"Operator",loc:null,value:","}),n.children.appendData(M))}}afterPageLayout(n,l,d,h){Object.keys(this.counterTargets).forEach(g=>{let b=this.counterTargets[g],x=b.selector.split(/::?/g),C=x[0];h.pagesArea.querySelectorAll(C+":not([data-"+b.variable+"])").forEach((B,z)=>{if(b.func!=="attr")return;let k=go(B,b.args),M=h.pagesArea.querySelector(fo(k));if(M){let f=Kt();B.setAttribute("data-"+b.variable,f);let Y="";if(x.length>1&&(Y+="::"+x[1]),b.counter==="page"){let V=h.pagesArea.querySelectorAll(".pagedjs_page"),K=0;for(let fe=0;fe<V.length;fe++){let me=V[fe],He=window.getComputedStyle(me),Ae=He["counter-reset"].replace("page","").trim(),zt=He["counter-increment"].replace("page","").trim();if(Ae!=="none"&&(K=parseInt(Ae)),zt!=="none"&&(K+=parseInt(zt)),me.contains(M))break}this.styleSheet.insertRule(`[data-${b.variable}="${f}"]${Y} { counter-reset: ${b.variable} ${K}; }`,this.styleSheet.cssRules.length)}else{let V=M.getAttribute(`data-counter-${b.counter}-value`);V&&this.styleSheet.insertRule(`[data-${b.variable}="${f}"]${Y} { counter-reset: ${b.variable} ${b.variable} ${parseInt(V)}; }`,this.styleSheet.cssRules.length)}let se=document.querySelector(`[data-${b.variable}="${f}"]`);se&&(se.style.display="none",se.clientHeight,se.style.removeProperty("display"))}})})}},xk=Mh;var Al=ot(Gt(),1),Dh=class extends Pe{constructor(n,l,d){super(n,l,d),this.styleSheet=l.styleSheet,this.textTargets={},this.beforeContent="",this.afterContent="",this.selector={}}onContent(n,l,d,h,g){if(n.name==="target-text"){this.selector=Al.default.generate(g.ruleNode.prelude);let b=n.children.first(),x=n.children.last(),C=b.name,I=Al.default.generate(n),B=[];b.children.forEach(M=>{M.type==="Identifier"&&B.push(M.name)});let z;x!==b&&(z=x.name);let k="--pagedjs-"+Kt();this.selector.split(",").forEach(M=>{this.textTargets[M]={func:C,args:B,value:I,style:z||"content",selector:M,fullSelector:this.selector,variable:k}}),n.name="var",n.children=new Al.default.List,n.children.appendData({type:"Identifier",loc:0,name:k})}}onPseudoSelector(n,l,d,h,g){g.ruleNode.block.children.forEach(b=>{n.name==="before"&&b.property==="content"?b.value.children.forEach(C=>{C.type==="String"&&(this.beforeContent=C.value)}):n.name==="after"&&b.property==="content"&&b.value.children.forEach(x=>{x.type==="String"&&(this.afterContent=x.value)})})}afterParsed(n){Object.keys(this.textTargets).forEach(l=>{let d=this.textTargets[l],h=d.selector.split("::"),g=h[0],b=n.querySelectorAll(g),x;b.forEach((C,I)=>{let B=go(C,d.args),z=n.querySelector(fo(B));if(z)if(d.style){this.selector=Kt(),C.setAttribute("data-target-text",this.selector);let k="";if(h.length>1&&(k+="::"+h[1]),d.style==="before"||d.style==="after"){let M=`${d.style}Content`;x=Cr(this[M])}else x=Cr(z.textContent," ");x=d.style==="first-letter"?x.charAt(0):x,this.styleSheet.insertRule(`[data-target-text="${this.selector}"]${k} { ${d.variable}: "${x}" }`)}else console.warn("missed target",B)})})}},wk=Dh;var Ck=[yk,Sk,xk,wk];var Wh=class extends Pe{constructor(n,l,d){super(n,l,d)}filter(n){Po(n,l=>this.filterEmpty(l),NodeFilter.SHOW_TEXT)}filterEmpty(n){if(n.textContent.length>1&&Vs(n)){let l=n.parentNode;if(_t(l)&&l.closest("pre"))return NodeFilter.FILTER_REJECT;let h=yo(n),g=vo(n);return g===null&&h===null?(n.textContent=" ",NodeFilter.FILTER_REJECT):g===null||h===null?NodeFilter.FILTER_ACCEPT:(n.textContent=" ",NodeFilter.FILTER_REJECT)}else return NodeFilter.FILTER_REJECT}},kk=Wh;var jh=class extends Pe{constructor(n,l,d){super(n,l,d)}filter(n){Po(n,null,NodeFilter.SHOW_COMMENT)}},Ek=jh;var qh=class extends Pe{constructor(n,l,d){super(n,l,d)}filter(n){n.querySelectorAll("script").forEach(l=>{l.remove()})}},Tk=qh;var Ik=ot(Gt(),1),Ok=ot(Nk(),1);var Hh=class extends Pe{constructor(n,l,d){super(n,l,d),this.displayRules={}}onDeclaration(n,l,d,h){if(n.property==="display"){let g=Ik.default.generate(h.ruleNode.prelude),b=n.value.children.first().name;g.split(",").forEach(x=>{this.displayRules[x]={value:b,selector:x,specificity:(0,Ok.calculateSpecificity)(x),important:n.important}})}}filter(n){let{matches:l,selectors:d}=this.sortDisplayedSelectors(n,this.displayRules);for(let g=0;g<l.length;g++){let b=l[g],x=d[g],C=x[x.length-1].value;this.removable(b)&&C==="none"&&(b.dataset.undisplayed="undisplayed")}let h=n.querySelectorAll("[style]");for(let g=0;g<h.length;g++){let b=h[g];this.removable(b)&&(b.dataset.undisplayed="undisplayed")}}sorter(n,l){return n.important&&!l.important?1:l.important&&!n.important?-1:n.specificity-l.specificity}sortDisplayedSelectors(n,l=[]){let d=[],h=[];for(let g in l){let b=l[g],x=b.selector,C=[];try{try{C=n.querySelectorAll(x)}catch{C=n.querySelectorAll(vk(x))}}catch{C=[]}let I=Array.from(C);for(let B of I)if(d.includes(B)){let z=d.indexOf(B);h[z].push(b),h[z]=h[z].sort(this.sorter)}else d.push(B),h.push([b])}return{matches:d,selectors:h}}removable(n){return!(n.style&&n.style.display!==""&&n.style.display!=="none")}},Rk=Hh;var Lk=[kk,Ek,Tk,Rk];var eT=ot(fr(),1),tT=ot(JE(),1),Qh=[...bk,...Ck,...Lk],Ol=class{constructor(n,l,d){let h=[];Qh.forEach(g=>{let b=new g(n,l,d);h.push(b),(0,tT.default)(b,this)})}};(0,eT.default)(Ol.prototype);function Rl(){for(var a=0;a<arguments.length;a++)Qh.push(arguments[a])}function Jh(a,n,l){return new Ol(a,n,l)}var Ll=class{constructor(n){this.settings=n||{},this.polisher=new vh(!1),this.chunker=new Yu(void 0,void 0,this.settings),this.hooks={},this.hooks.beforePreview=new pe(this),this.hooks.afterPreview=new pe(this),this.size={width:{value:8.5,unit:"in"},height:{value:11,unit:"in"},format:void 0,orientation:void 0},this.chunker.on("page",l=>{this.emit("page",l)}),this.chunker.on("rendering",()=>{this.emit("rendering",this.chunker)})}initializeHandlers(){let n=Jh(this.chunker,this.polisher,this);return n.on("size",l=>{this.size=l,this.emit("size",l)}),n.on("atpages",l=>{this.atpages=l,this.emit("atpages",l)}),n}registerHandlers(){return Rl.apply(Rl,arguments)}getParams(n){let l,d=new URL(window.location),h=new URLSearchParams(d.search);for(var g of h.entries())g[0]===n&&(l=g[1]);return l}wrapContent(){let n=document.querySelector("body"),l;return l=n.querySelector(":scope > template[data-ref='pagedjs-content']"),l||(l=document.createElement("template"),l.dataset.ref="pagedjs-content",l.innerHTML=n.innerHTML,n.innerHTML="",n.appendChild(l)),l.content}removeStyles(n=document){let l=Array.from(n.querySelectorAll("link[rel='stylesheet']:not([data-pagedjs-ignore], [media~='screen'])")),d=Array.from(n.querySelectorAll("style:not([data-pagedjs-inserted-styles], [data-pagedjs-ignore], [media~='screen'])"));return[...l,...d].sort(function(g,b){let x=g.compareDocumentPosition(b);return x===Node.DOCUMENT_POSITION_PRECEDING?1:x===Node.DOCUMENT_POSITION_FOLLOWING?-1:0}).map(g=>{if(g.nodeName==="STYLE"){let b={};return b[window.location.href]=g.textContent,g.remove(),b}if(g.nodeName==="LINK")return g.remove(),g.href;console.warn(`Unable to process: ${g}, ignoring.`)})}async preview(n,l,d){await this.hooks.beforePreview.trigger(n,d),n||(n=this.wrapContent()),l||(l=this.removeStyles()),this.polisher.setup(),this.handlers=this.initializeHandlers(),await this.polisher.add(...l);let h=performance.now(),g=await this.chunker.flow(n,d),b=performance.now();return g.performance=b-h,g.size=this.size,this.emit("rendered",g),await this.hooks.afterPreview.trigger(g.pages),g}};(0,iT.default)(Ll.prototype);var ep=Ll;addEventListener("DOMContentLoaded",a=>{let n=new ep,l=window.location,d=new URLSearchParams(l.search);(d.has("print")||d.has("p"))&&n.preview().then(h=>{console.log("Rendered",h.total,"pages.")})});var R3=Object.create,rT=Object.defineProperty,L3=Object.getOwnPropertyDescriptor,_3=Object.getOwnPropertyNames,B3=Object.getPrototypeOf,F3=Object.prototype.hasOwnProperty,z3=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports),M3=(a,n,l,d)=>{if(n&&typeof n=="object"||typeof n=="function")for(let h of _3(n))!F3.call(a,h)&&h!==l&&rT(a,h,{get:()=>n[h],enumerable:!(d=L3(n,h))||d.enumerable});return a},D3=(a,n,l)=>(l=a!=null?R3(B3(a)):{},M3(n||!a||!a.__esModule?rT(l,"default",{value:a,enumerable:!0}):l,a)),W3=z3((a,n)=>{"use strict";var l=Object.create,d=Object.defineProperty,h=Object.getOwnPropertyDescriptor,g=Object.getOwnPropertyNames,b=Object.getPrototypeOf,x=Object.prototype.hasOwnProperty,C=(e,t,i)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,I=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),B=(e,t)=>{for(var i in t)d(e,i,{get:t[i],enumerable:!0})},z=(e,t,i,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of g(t))!x.call(e,s)&&s!==i&&d(e,s,{get:()=>t[s],enumerable:!(r=h(t,s))||r.enumerable});return e},k=(e,t,i)=>(i=e!=null?l(b(e)):{},z(t||!e||!e.__esModule?d(i,"default",{value:e,enumerable:!0}):i,e)),M=e=>z(d({},"__esModule",{value:!0}),e),f=(e,t,i)=>C(e,typeof t!="symbol"?t+"":t,i),Y=I((e,t)=>{var i=-1,r=1,s=0;function o(_,Q,R,W,F){if(_===Q)return _?[[s,_]]:[];if(R!=null){var $=Bt(_,Q,R);if($)return $}var X=p(_,Q),ie=_.substring(0,X);_=_.substring(X),Q=Q.substring(X),X=S(_,Q);var le=_.substring(_.length-X);_=_.substring(0,_.length-X),Q=Q.substring(0,Q.length-X);var Ce=u(_,Q);return ie&&Ce.unshift([s,ie]),le&&Ce.push([s,le]),H(Ce,F),W&&w(Ce),Ce}function u(_,Q){var R;if(!_)return[[r,Q]];if(!Q)return[[i,_]];var W=_.length>Q.length?_:Q,F=_.length>Q.length?Q:_,$=W.indexOf(F);if($!==-1)return R=[[r,W.substring(0,$)],[s,F],[r,W.substring($+F.length)]],_.length>Q.length&&(R[0][0]=R[2][0]=i),R;if(F.length===1)return[[i,_],[r,Q]];var X=v(_,Q);if(X){var ie=X[0],le=X[1],Ce=X[2],Te=X[3],ke=X[4],qe=o(ie,Ce),Oe=o(le,Te);return qe.concat([[s,ke]],Oe)}return c(_,Q)}function c(_,Q){for(var R=_.length,W=Q.length,F=Math.ceil((R+W)/2),$=F,X=2*F,ie=new Array(X),le=new Array(X),Ce=0;Ce<X;Ce++)ie[Ce]=-1,le[Ce]=-1;ie[$+1]=0,le[$+1]=0;for(var Te=R-W,ke=Te%2!==0,qe=0,Oe=0,Ye=0,pt=0,at=0;at<F;at++){for(var Ne=-at+qe;Ne<=at-Oe;Ne+=2){var Me=$+Ne,_e;Ne===-at||Ne!==at&&ie[Me-1]<ie[Me+1]?_e=ie[Me+1]:_e=ie[Me-1]+1;for(var Ie=_e-Ne;_e<R&&Ie<W&&_.charAt(_e)===Q.charAt(Ie);)_e++,Ie++;if(ie[Me]=_e,_e>R)Oe+=2;else if(Ie>W)qe+=2;else if(ke){var ue=$+Te-Ne;if(ue>=0&&ue<X&&le[ue]!==-1){var Ve=R-le[ue];if(_e>=Ve)return m(_,Q,_e,Ie)}}}for(var Lt=-at+Ye;Lt<=at-pt;Lt+=2){var ue=$+Lt,Ve;Lt===-at||Lt!==at&&le[ue-1]<le[ue+1]?Ve=le[ue+1]:Ve=le[ue-1]+1;for(var ne=Ve-Lt;Ve<R&&ne<W&&_.charAt(R-Ve-1)===Q.charAt(W-ne-1);)Ve++,ne++;if(le[ue]=Ve,Ve>R)pt+=2;else if(ne>W)Ye+=2;else if(!ke){var Me=$+Te-Lt;if(Me>=0&&Me<X&&ie[Me]!==-1){var _e=ie[Me],Ie=$+_e-Me;if(Ve=R-Ve,_e>=Ve)return m(_,Q,_e,Ie)}}}}return[[i,_],[r,Q]]}function m(_,Q,R,W){var F=_.substring(0,R),$=Q.substring(0,W),X=_.substring(R),ie=Q.substring(W),le=o(F,$),Ce=o(X,ie);return le.concat(Ce)}function p(_,Q){if(!_||!Q||_.charAt(0)!==Q.charAt(0))return 0;for(var R=0,W=Math.min(_.length,Q.length),F=W,$=0;R<F;)_.substring($,F)==Q.substring($,F)?(R=F,$=R):W=F,F=Math.floor((W-R)/2+R);return G(_.charCodeAt(F-1))&&F--,F}function y(_,Q){var R=_.length,W=Q.length;if(R==0||W==0)return 0;R>W?_=_.substring(R-W):R<W&&(Q=Q.substring(0,R));var F=Math.min(R,W);if(_==Q)return F;for(var $=0,X=1;;){var ie=_.substring(F-X),le=Q.indexOf(ie);if(le==-1)return $;X+=le,(le==0||_.substring(F-X)==Q.substring(0,X))&&($=X,X++)}}function S(_,Q){if(!_||!Q||_.slice(-1)!==Q.slice(-1))return 0;for(var R=0,W=Math.min(_.length,Q.length),F=W,$=0;R<F;)_.substring(_.length-F,_.length-$)==Q.substring(Q.length-F,Q.length-$)?(R=F,$=R):W=F,F=Math.floor((W-R)/2+R);return te(_.charCodeAt(_.length-F))&&F--,F}function v(_,Q){var R=_.length>Q.length?_:Q,W=_.length>Q.length?Q:_;if(R.length<4||W.length*2<R.length)return null;function F(Oe,Ye,pt){for(var at=Oe.substring(pt,pt+Math.floor(Oe.length/4)),Ne=-1,Me="",_e,Ie,ue,Ve;(Ne=Ye.indexOf(at,Ne+1))!==-1;){var Lt=p(Oe.substring(pt),Ye.substring(Ne)),ne=S(Oe.substring(0,pt),Ye.substring(0,Ne));Me.length<ne+Lt&&(Me=Ye.substring(Ne-ne,Ne)+Ye.substring(Ne,Ne+Lt),_e=Oe.substring(0,pt-ne),Ie=Oe.substring(pt+Lt),ue=Ye.substring(0,Ne-ne),Ve=Ye.substring(Ne+Lt))}return Me.length*2>=Oe.length?[_e,Ie,ue,Ve,Me]:null}var $=F(R,W,Math.ceil(R.length/4)),X=F(R,W,Math.ceil(R.length/2)),ie;if(!$&&!X)return null;X?$?ie=$[4].length>X[4].length?$:X:ie=X:ie=$;var le,Ce,Te,ke;_.length>Q.length?(le=ie[0],Ce=ie[1],Te=ie[2],ke=ie[3]):(Te=ie[0],ke=ie[1],le=ie[2],Ce=ie[3]);var qe=ie[4];return[le,Ce,Te,ke,qe]}function w(_){for(var Q=!1,R=[],W=0,F=null,$=0,X=0,ie=0,le=0,Ce=0;$<_.length;)_[$][0]==s?(R[W++]=$,X=le,ie=Ce,le=0,Ce=0,F=_[$][1]):(_[$][0]==r?le+=_[$][1].length:Ce+=_[$][1].length,F&&F.length<=Math.max(X,ie)&&F.length<=Math.max(le,Ce)&&(_.splice(R[W-1],0,[i,F]),_[R[W-1]+1][0]=r,W--,W--,$=W>0?R[W-1]:-1,X=0,ie=0,le=0,Ce=0,F=null,Q=!0)),$++;for(Q&&H(_),L(_),$=1;$<_.length;){if(_[$-1][0]==i&&_[$][0]==r){var Te=_[$-1][1],ke=_[$][1],qe=y(Te,ke),Oe=y(ke,Te);qe>=Oe?(qe>=Te.length/2||qe>=ke.length/2)&&(_.splice($,0,[s,ke.substring(0,qe)]),_[$-1][1]=Te.substring(0,Te.length-qe),_[$+1][1]=ke.substring(qe),$++):(Oe>=Te.length/2||Oe>=ke.length/2)&&(_.splice($,0,[s,Te.substring(0,Oe)]),_[$-1][0]=r,_[$-1][1]=ke.substring(0,ke.length-Oe),_[$+1][0]=i,_[$+1][1]=Te.substring(Oe),$++),$++}$++}}var T=/[^a-zA-Z0-9]/,E=/\s/,P=/[\r\n]/,O=/\n\r?\n$/,A=/^\r?\n\r?\n/;function L(_){function Q(Oe,Ye){if(!Oe||!Ye)return 6;var pt=Oe.charAt(Oe.length-1),at=Ye.charAt(0),Ne=pt.match(T),Me=at.match(T),_e=Ne&&pt.match(E),Ie=Me&&at.match(E),ue=_e&&pt.match(P),Ve=Ie&&at.match(P),Lt=ue&&Oe.match(O),ne=Ve&&Ye.match(A);return Lt||ne?5:ue||Ve?4:Ne&&!_e&&Ie?3:_e||Ie?2:Ne||Me?1:0}for(var R=1;R<_.length-1;){if(_[R-1][0]==s&&_[R+1][0]==s){var W=_[R-1][1],F=_[R][1],$=_[R+1][1],X=S(W,F);if(X){var ie=F.substring(F.length-X);W=W.substring(0,W.length-X),F=ie+F.substring(0,F.length-X),$=ie+$}for(var le=W,Ce=F,Te=$,ke=Q(W,F)+Q(F,$);F.charAt(0)===$.charAt(0);){W+=F.charAt(0),F=F.substring(1)+$.charAt(0),$=$.substring(1);var qe=Q(W,F)+Q(F,$);qe>=ke&&(ke=qe,le=W,Ce=F,Te=$)}_[R-1][1]!=le&&(le?_[R-1][1]=le:(_.splice(R-1,1),R--),_[R][1]=Ce,Te?_[R+1][1]=Te:(_.splice(R+1,1),R--))}R++}}function H(_,Q){_.push([s,""]);for(var R=0,W=0,F=0,$="",X="",ie;R<_.length;){if(R<_.length-1&&!_[R][1]){_.splice(R,1);continue}switch(_[R][0]){case r:F++,X+=_[R][1],R++;break;case i:W++,$+=_[R][1],R++;break;case s:var le=R-F-W-1;if(Q){if(le>=0&&ge(_[le][1])){var Ce=_[le][1].slice(-1);if(_[le][1]=_[le][1].slice(0,-1),$=Ce+$,X=Ce+X,!_[le][1]){_.splice(le,1),R--;var Te=le-1;_[Te]&&_[Te][0]===r&&(F++,X=_[Te][1]+X,Te--),_[Te]&&_[Te][0]===i&&(W++,$=_[Te][1]+$,Te--),le=Te}}if(ae(_[R][1])){var Ce=_[R][1].charAt(0);_[R][1]=_[R][1].slice(1),$+=Ce,X+=Ce}}if(R<_.length-1&&!_[R][1]){_.splice(R,1);break}if($.length>0||X.length>0){$.length>0&&X.length>0&&(ie=p(X,$),ie!==0&&(le>=0?_[le][1]+=X.substring(0,ie):(_.splice(0,0,[s,X.substring(0,ie)]),R++),X=X.substring(ie),$=$.substring(ie)),ie=S(X,$),ie!==0&&(_[R][1]=X.substring(X.length-ie)+_[R][1],X=X.substring(0,X.length-ie),$=$.substring(0,$.length-ie)));var ke=F+W;$.length===0&&X.length===0?(_.splice(R-ke,ke),R=R-ke):$.length===0?(_.splice(R-ke,ke,[r,X]),R=R-ke+1):X.length===0?(_.splice(R-ke,ke,[i,$]),R=R-ke+1):(_.splice(R-ke,ke,[i,$],[r,X]),R=R-ke+2)}R!==0&&_[R-1][0]===s?(_[R-1][1]+=_[R][1],_.splice(R,1)):R++,F=0,W=0,$="",X="";break}}_[_.length-1][1]===""&&_.pop();var qe=!1;for(R=1;R<_.length-1;)_[R-1][0]===s&&_[R+1][0]===s&&(_[R][1].substring(_[R][1].length-_[R-1][1].length)===_[R-1][1]?(_[R][1]=_[R-1][1]+_[R][1].substring(0,_[R][1].length-_[R-1][1].length),_[R+1][1]=_[R-1][1]+_[R+1][1],_.splice(R-1,1),qe=!0):_[R][1].substring(0,_[R+1][1].length)==_[R+1][1]&&(_[R-1][1]+=_[R+1][1],_[R][1]=_[R][1].substring(_[R+1][1].length)+_[R+1][1],_.splice(R+1,1),qe=!0)),R++;qe&&H(_,Q)}function G(_){return _>=55296&&_<=56319}function te(_){return _>=56320&&_<=57343}function ae(_){return te(_.charCodeAt(0))}function ge(_){return G(_.charCodeAt(_.length-1))}function we(_){for(var Q=[],R=0;R<_.length;R++)_[R][1].length>0&&Q.push(_[R]);return Q}function di(_,Q,R,W){return ge(_)||ae(W)?null:we([[s,_],[i,Q],[r,R],[s,W]])}function Bt(_,Q,R){var W=typeof R=="number"?{index:R,length:0}:R.oldRange,F=typeof R=="number"?null:R.newRange,$=_.length,X=Q.length;if(W.length===0&&(F===null||F.length===0)){var ie=W.index,le=_.slice(0,ie),Ce=_.slice(ie),Te=F?F.index:null;e:{var ke=ie+X-$;if(Te!==null&&Te!==ke||ke<0||ke>X)break e;var qe=Q.slice(0,ke),Oe=Q.slice(ke);if(Oe!==Ce)break e;var Ye=Math.min(ie,ke),pt=le.slice(0,Ye),at=qe.slice(0,Ye);if(pt!==at)break e;var Ne=le.slice(Ye),Me=qe.slice(Ye);return di(pt,Ne,Me,Ce)}e:{if(Te!==null&&Te!==ie)break e;var _e=ie,qe=Q.slice(0,_e),Oe=Q.slice(_e);if(qe!==le)break e;var Ie=Math.min($-_e,X-_e),ue=Ce.slice(Ce.length-Ie),Ve=Oe.slice(Oe.length-Ie);if(ue!==Ve)break e;var Ne=Ce.slice(0,Ce.length-Ie),Me=Oe.slice(0,Oe.length-Ie);return di(le,Ne,Me,ue)}}if(W.length>0&&F&&F.length===0)e:{var pt=_.slice(0,W.index),ue=_.slice(W.index+W.length),Ye=pt.length,Ie=ue.length;if(X<Ye+Ie)break e;var at=Q.slice(0,Ye),Ve=Q.slice(X-Ie);if(pt!==at||ue!==Ve)break e;var Ne=_.slice(Ye,$-Ie),Me=Q.slice(Ye,X-Ie);return di(pt,Ne,Me,ue)}return null}function It(_,Q,R,W){return o(_,Q,R,W,!0)}It.INSERT=r,It.DELETE=i,It.EQUAL=s,t.exports=It}),se={};B(se,{CoreViewer:()=>Jf,HOOKS:()=>Qe,Navigation:()=>eb,PageProgression:()=>fe,PageSide:()=>He,PageViewMode:()=>rR,Profiler:()=>Xn,ReadyState:()=>Ae,UserAgentBaseCss:()=>bm,UserAgentPageCss:()=>fm,UserAgentTocCss:()=>ym,UserAgentXml:()=>gm,ValidationTxt:()=>mm,VivliostylePolyfillCss:()=>vm,VivliostyleViewportCss:()=>pm,VivliostyleViewportScreenCss:()=>hm,ZoomType:()=>iR,getHooksForName:()=>Je,isDebug:()=>V,pageProgressionOf:()=>me,plugin:()=>Hr,printHTML:()=>sR,profile:()=>jT,profiler:()=>Qt,registerHook:()=>De,removeHook:()=>gt,setDebug:()=>K}),n.exports=M(se);var V=!1;function K(e){V=e}var fe=(e=>(e.LTR="ltr",e.RTL="rtl",e))(fe||{});function me(e){switch(e){case"ltr":return"ltr";case"rtl":return"rtl";default:throw new Error(`unknown PageProgression: ${e}`)}}var He=(e=>(e.LEFT="left",e.RIGHT="right",e))(He||{}),Ae=(e=>(e.LOADING="loading",e.INTERACTIVE="interactive",e.COMPLETE="complete",e))(Ae||{}),zt=(e=>(e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e))(zt||{}),Ze=class{constructor(e){this.opt_console=e,f(this,"listeners",{})}consoleDebug(e){this.opt_console?this.opt_console.debug?this.opt_console.debug(...e):this.opt_console.log(...e):console.debug(...e)}consoleInfo(e){this.opt_console?this.opt_console.info?this.opt_console.info(...e):this.opt_console.log(...e):console.info(...e)}consoleWarn(e){this.opt_console?this.opt_console.warn?this.opt_console.warn(...e):this.opt_console.log(...e):console.warn(...e)}consoleError(e){this.opt_console?this.opt_console.error?this.opt_console.error(...e):this.opt_console.log(...e):console.error(...e)}triggerListeners(e,t){let i=this.listeners[e];i&&i(t)}addListener(e,t){this.listeners[e]=t}debug(...e){let t=Ge(arguments);this.consoleDebug(Ct(t)),this.triggerListeners(1,t)}info(...e){let t=Ge(arguments);this.consoleInfo(Ct(t)),this.triggerListeners(2,t)}warn(...e){let t=Ge(arguments);this.consoleWarn(Ct(t)),this.triggerListeners(3,t)}error(...e){let t=Ge(arguments);this.consoleError(Ct(t)),this.triggerListeners(4,t)}};function Ge(e){let t=Array.from(e),i=null;return t[0]instanceof Error&&(i=t.shift()),{error:i,messages:t}}function Ct(e){let t=e.error,i=t&&(t.frameTrace||t.stack),r=[].concat(e.messages);return t&&(r.length>0&&(r=r.concat([`
`])),r=r.concat([t.toString()]),i&&(r=r.concat([`
`]).concat(i))),r}var ee=new Ze,Qe=(e=>(e.SIMPLE_PROPERTY="SIMPLE_PROPERTY",e.PREPROCESS_SINGLE_DOCUMENT="PREPROCESS_SINGLE_DOCUMENT",e.PREPROCESS_TEXT_CONTENT="PREPROCESS_TEXT_CONTENT",e.PREPROCESS_ELEMENT_STYLE="PREPROCESS_ELEMENT_STYLE",e.POLYFILLED_INHERITED_PROPS="POLYFILLED_INHERITED_PROPS",e.CONFIGURATION="CONFIGURATION",e.RESOLVE_TEXT_NODE_BREAKER="RESOLVE_TEXT_NODE_BREAKER",e.RESOLVE_FORMATTING_CONTEXT="RESOLVE_FORMATTING_CONTEXT",e.RESOLVE_LAYOUT_PROCESSOR="RESOLVE_LAYOUT_PROCESSOR",e.POST_LAYOUT_BLOCK="POST_LAYOUT_BLOCK",e))(Qe||{}),At={};function De(e,t,i){if(!Qe[e])ee.warn(new Error(`Skipping unknown plugin hook '${e}'.`));else{let r=At[e];r||(r=At[e]=[]),i?r.unshift(t):r.push(t)}}function gt(e,t){if(!Qe[e])ee.warn(new Error(`Ignoring unknown plugin hook '${e}'.`));else{let i=At[e];if(i){let r=i.indexOf(t);r>=0&&i.splice(r,1)}}}function Je(e){return At[e]||[]}var Hr={registerHook:De,removeHook:gt},Xn=class{constructor(e){this.performanceInstance=e,f(this,"timestamps",{}),f(this,"registerTiming"),f(this,"registerStartTiming"),f(this,"registerEndTiming"),this.registerTiming=Fi,this.registerStartTiming=this.registerStartTiming=Fi,this.registerEndTiming=this.registerEndTiming=Fi}forceRegisterStartTiming(e,t){Kn.call(this,e,"start",t)}forceRegisterEndTiming(e,t){Kn.call(this,e,"end",t)}printTimings(){let e=this.timestamps,t="";Object.keys(e).forEach(i=>{let r=e[i],s=r.length;for(let o=0;o<s;o++){let u=r[o];t+=i,s>1&&(t+=`(${o})`),t+=` => start: ${u.start}, end: ${u.end}, duration: ${u.end-u.start}
`}}),ee.info(t)}disable(){this.registerTiming=Fi,this.registerStartTiming=this.registerStartTiming=Fi,this.registerEndTiming=this.registerEndTiming=Fi}enable(){this.registerTiming=Kn,this.registerStartTiming=this.registerStartTiming=wa,this.registerEndTiming=this.registerEndTiming=MT}isEnabled(){return this.registerStartTiming===wa}};function Fi(){}function Kn(e,t,i){i||(i=this.performanceInstance.now());let r=this.timestamps[e];r||(r=this.timestamps[e]=[]);let s,o=r.length;for(let u=o-1;u>=0&&(s=r[u],!(s&&!s[t]));u--)s=null;s||(s={},r.push(s)),s[t]=i}function wa(e,t){this.registerTiming(e,"start",t)}function MT(e,t){this.registerTiming(e,"end",t)}var DT={now:Date.now},WT=window&&window.performance,Qt=new Xn(WT||DT);Qt.forceRegisterStartTiming("load_vivliostyle");var jT={profiler:{registerStartTiming:Qt.registerStartTiming,registerEndTiming:Qt.registerEndTiming,printTimings:Qt.printTimings,disable:Qt.disable,enable:Qt.enable}},Ca=/^[\s\p{Zs}\p{P}\p{Mn}]*[\p{L}\p{N}]\p{Mn}*(?:[\s\p{Zs}]*\p{P}\p{Mn}*)*/u,zi="data-adapt-eloff",qT={};function Bl(e){return JSON.parse(e)}function Mi(e){let t=e.match(/^([^#]*)/);return t?t[1]:e}function VT(e){let t=e.match(/^([^#?]*)/);return t?t[1]:e}var Ur=window.location.href;function lp(e){Ur=e}var kr=window.location.href;function dp(e){kr=e}function et(e,t){if(/^data:/i.test(t))return e||t;if(!t||e.match(/^\w{2,}:/))return e.toLowerCase().match("^javascript:")?"#":(e.match(/^\w{2,}:\/\/[^\/]+$/)&&(e=`${e}/`),e);t.match(/^\w{2,}:\/\/[^\/]+$/)&&(t=`${t}/`);let i;if(e.match(/^\/\//))return i=t.match(/^(\w{2,}:)\/\//),i?i[1]+e:e;if(e.match(/^\//))return i=t.match(/^(\w{2,}:\/\/[^\/]+)\//),i?i[1]+e:e;if(e.match(/^\.(\/|$)/)&&(e=e.substr(2)),t=VT(t),e.match(/^#/))return t+e;let r=t.lastIndexOf("/");if(r<0)return e;let s=t.substr(0,r+1)+e,o="";for(i=s.match(/^([^?#]*)([?#].*)$/),i&&(s=i[1],o=i[2]);r=s.indexOf("/../"),!(r<=0);){let u=s.lastIndexOf("/",r-1);if(u<=0)break;s=s.substr(0,u)+s.substr(r+3)}return s.replace(/\/(\.\/)+/g,"/")+o}function Zn(e){let t;return(t=/^(https?:)\/\/github\.com\/([^/]+\/[^/]+)\/(blob\/|tree\/|raw\/)?(.*)$/.exec(e))?e=`${t[1]}//raw.githubusercontent.com/${t[2]}/${t[3]?"":"master/"}${t[4]}`:(t=/^(https?:)\/\/www\.aozora\.gr\.jp\/(cards\/[^/]+\/files\/[^/.]+\.html)$/.exec(e))?e=`${t[1]}//raw.githubusercontent.com/aozorabunko/aozorabunko/master/${t[2]}`:(t=/^(https?:)\/\/gist\.github\.com\/([^/]+\/\w+)(\/|$)(raw(\/|$))?(.*)$/.exec(e))?e=`${t[1]}//gist.githubusercontent.com/${t[2]}/raw/${t[6]}`:(t=/^(https?:)\/\/gist\.github\.com\/([^/]+\/\w+)(?:#|%23)file-(.*)-(\w+)$/.exec(e))?e=`${t[1]}//gist.githubusercontent.com/${t[2]}/raw/${t[3]}.${t[4]}`:(t=/^(https?:)\/\/(?:[^/.]+\.)?jsbin\.com\/(?!(?:blog|help)\b)(\w+)((\/\d+)?).*$/.exec(e))&&(e=`${t[1]}//output.jsbin.com/${t[2]}${t[3]}/`),e}function up(e){return e==null?e:e.toString()}var HT=class{constructor(){f(this,"queue",[null])}length(){return this.queue.length-1}add(e){let t=this.queue.length;for(;t>1;){let i=Math.floor(t/2),r=this.queue[i];if(r.compare(e)>0){this.queue[t]=e;return}this.queue[t]=r,t=i}this.queue[1]=e}peek(){return this.queue[1]}remove(){let e=this.queue[1],t=this.queue.pop(),i=this.queue.length;if(i>1){let r=1;for(;;){let s=r*2;if(s>=i)break;if(this.queue[s].compare(t)>0)s+1<i&&this.queue[s+1].compare(this.queue[s])>0&&s++;else if(s+1<i&&this.queue[s+1].compare(t)>0)s++;else break;this.queue[r]=this.queue[s],r=s}this.queue[r]=t}return e}},cp=["","-webkit-","-moz-"],Gr={};function Fl(e,t){return CSS.supports(e+t,"unset")}function UT(e){let t=Gr[e];if(t||t===null)return t;switch(e){case"behavior":case"template":case"ua-list-item-count":case"x-first-pseudo":return Gr[e]=null,null;case"text-combine-upright":if(Fl("-webkit-","text-combine")&&!Fl("","text-combine-upright"))return Gr[e]=["-webkit-text-combine"],["-webkit-text-combine"];break}for(let i of cp)if(Fl(i,e))return t=[i+e],Gr[e]=t,t;return ee.warn("Property not supported by the browser: ",e),Gr[e]=null,null}function j(e,t,i){let r=e?.style;if(!r)return;if(t.startsWith("--")){r.setProperty(t,i||" ");return}let s=UT(t);if(s)for(let o of s){switch(o){case"-webkit-text-combine":switch(i){case"all":i="horizontal";break}break;case"text-combine-upright":switch(i){case"all":r.setProperty("text-indent","0");break}break}r.setProperty(o,i)}}function Di(e,t,i){try{let r=Gr[t];return e.style.getPropertyValue(r?r[0]:t)}catch{}return i||""}function zl(e){let t=e.getAttributeNS("http://www.w3.org/XML/1998/namespace","lang");return!t&&e.namespaceURI=="http://www.w3.org/1999/xhtml"&&(t=e.getAttribute("lang")),t}var Wi=class{constructor(){f(this,"list",[])}append(e){return this.list.push(e),this}clear(){this.list=[]}toString(){let e=this.list.join("");return this.list=[e],e}};function hp(e){return`\\${e.charCodeAt(0).toString(16)} `}function rr(e){return e.replace(/[^-_a-zA-Z0-9\u0080-\uFFFF]/g,hp)}function Qn(e){return e.replace(/[\u0000-\u001F"\\]/g,hp)}function pp(e){return e.replace(/[\s+&?=#\u007F-\uFFFF]+/g,encodeURIComponent)}function mp(e){return!!e.match(/^[a-zA-Z\u009E\u009F\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u024F\u037B-\u037D\u0386\u0388-\u0482\u048A-\u0527]$/)}function GT(e,t){return t=typeof t=="string"?t:"\\u",t+(65536|e.charCodeAt(0)).toString(16).substr(1)}function gp(e,t){function i(r){return GT(r,t)}return e.replace(/[^-a-zA-Z0-9_]/g,i)}function nr(e){return gp(e)}function $T(e,t){return t=typeof t=="string"?t:"\\u",e.indexOf(t)===0?String.fromCharCode(parseInt(e.substring(t.length),16)):e}function YT(e,t){t=typeof t=="string"?t:"\\u";function i(s){return $T(s,t)}let r=new RegExp(`${nr(t)}[0-9a-fA-F]{4}`,"g");return e.replace(r,i)}function sr(e,t){let i=0,r=e;for(;;){if(i<=r,i==0||t(i-1),r==e||t(r),i==r)return i;let s=i+r>>1;t(s)?r=s:i=s+1}}function fp(e,t){return e-t}function bp(e,t){let i={};for(let r of e){let s=t(r);s&&!i[s]&&(i[s]=r)}return i}function XT(e){let t={};for(let i=0;i<e.length;i++)t[e[i]]=!0;return t}function Ml(e,t){let i={};for(let r of e){let s=t(r);s&&(i[s]?i[s].push(r):i[s]=[r])}return i}function KT(e,t){let i={};for(let r in e)i[r]=t(e[r],r);return i}var Dl=class{constructor(){f(this,"listeners",{})}dispatchEvent(e){let t=this.listeners[e.type];if(t){e.target=this,e.currentTarget=this;for(let i=0;i<t.length;i++)t[i](e)}}addEventListener(e,t,i){if(i)return;let r=this.listeners[e];r?r.includes(t)||r.push(t):this.listeners[e]=[t]}removeEventListener(e,t,i){if(i)return;let r=this.listeners[e];if(r){let s=r.indexOf(t);s>=0&&r.splice(s,1)}}},Er={audio:!0,canvas:!0,embed:!0,iframe:!0,img:!0,math:!0,object:!0,picture:!0,svg:!0,video:!0};function yp(e){if(e.nodeType==1){let t=e.getAttribute("id");if(t)return t}return null}function ZT(e){return`^${e}`}function vp(e){return e.replace(/[\[\]\(\),=;^]/g,ZT)}function QT(e){return e.substr(1)}function Wl(e){return e&&e.replace(/\^[\[\]\(\),=;^]/g,QT)}function JT(e){let t=[];do{let i=e.match(/^(\^,|[^,])*/),r=Wl(i[0]);if(e=e.substr(i[0].length+1),!e&&!t.length)return r;t.push(r)}while(e);return t}function Sp(e){let t={};for(;e;){let i=e.match(/^;([^;=]+)=(([^;]|\^;)*)/);if(!i)return t;t[i[1]]=JT(i[2]),e=e.substr(i[0].length)}return t}var xp=class{appendTo(e){e.append("!")}applyTo(e){return!1}},wp=class{constructor(e,t,i){this.index=e,this.id=t,this.sideBias=i}appendTo(e){e.append("/"),e.append(this.index.toString()),(this.id||this.sideBias)&&(e.append("["),this.id&&e.append(this.id),this.sideBias&&(e.append(";s="),e.append(this.sideBias)),e.append("]"))}applyTo(e){if(e.node.nodeType!=1)throw new Error("E_CFI_NOT_ELEMENT");let t=e.node,i=t.children,r=i.length,s,o=Math.floor(this.index/2)-1;if(o<0||r==0)s=t.firstChild,e.node=s||t;else{if(s=i[Math.min(o,r-1)],this.index&1){let u=s.nextSibling;!u||u.nodeType==1?e.after=!0:s=u}e.node=s}if(this.id&&(e.after||this.id!=yp(e.node))){let u=t.ownerDocument.getElementById(this.id);u?e.node=u:ee.warn("E_CFI_ID_MISMATCH:",this.id)}return e.sideBias=this.sideBias,!0}},Cp=class{constructor(e,t,i,r){this.offset=e,this.textBefore=t,this.textAfter=i,this.sideBias=r}applyTo(e){if(this.offset>0&&!e.after){let t=this.offset,i=e.node;for(;;){let r=i.nodeType;if(r==1)break;let s=i.nextSibling;if(3<=r&&r<=5){let o=i.textContent.length;if(t<=o)break;if(!s){t=o;break}t-=o}if(!s){t=0;break}i=s}e.node=i,e.offset=t}return e.sideBias=this.sideBias,!0}appendTo(e){e.append(":"),e.append(this.offset.toString()),(this.textBefore||this.textAfter||this.sideBias)&&(e.append("["),(this.textBefore||this.textAfter)&&(this.textBefore&&e.append(vp(this.textBefore)),e.append(","),this.textAfter&&e.append(vp(this.textAfter))),this.sideBias&&(e.append(";s="),e.append(this.sideBias)),e.append("]"))}},kp=class nT{constructor(){f(this,"steps",null)}fromString(t){let i=t.match(/^#?epubcfi\((.*)\)$/);if(!i)throw new Error("E_CFI_NOT_CFI");let r=decodeURIComponent(i[1]),s=0,o=[];for(;;){let u;switch(r.charAt(s)){case"/":{if(s++,i=r.substr(s).match(/^(0|[1-9][0-9]*)(\[(.*?)(;([^\]]|\^\])*)?\])?/),!i)throw new Error("E_CFI_NUMBER_EXPECTED");s+=i[0].length;let c=parseInt(i[1],10),m=i[3];u=Sp(i[4]),o.push(new wp(c,m,up(u.s)));break}case":":{if(s++,i=r.substr(s).match(/^(0|[1-9][0-9]*)(\[((([^\];,]|\^[\];,])*)(,(([^\];,]|\^[\];,])*))?)(;([^]]|\^\])*)?\])?/),!i)throw new Error("E_CFI_NUMBER_EXPECTED");s+=i[0].length;let c=parseInt(i[1],10),m=i[4];m&&(m=Wl(m));let p=i[7];p&&(p=Wl(p)),u=Sp(i[10]),o.push(new Cp(c,m,p,up(u.s)));break}case"!":s++,o.push(new xp);break;case"~":case"@":case"":this.steps=o;return;default:throw new Error("E_CFI_PARSE_ERROR")}}}navigate(t){let i={node:t.documentElement,offset:0,after:!1,sideBias:null,ref:null};for(let r=0;r<this.steps.length;r++)if(!this.steps[r].applyTo(i)){i.ref=new nT,i.ref.steps=this.steps.slice(r+1);break}return i}trim(t,i){return t.replace(/\s+/g," ").match(i?/^[ -\uD7FF\uE000-\uFFFF]{0,8}/:/[ -\uD7FF\uE000-\uFFFF]{0,8}$/)[0].replace(/^\s/,"").replace(/\s$/,"")}prependPathFromNode(t,i,r,s){let o=[],u=t.parentNode,c="",m="";for(;t;){switch(t.nodeType){case 3:case 4:case 5:{let p=t.textContent,y=p.length;r?(i+=y,c||(c=p)):(i>y&&(i=y),r=!0,c=p.substr(0,i),m=p.substr(i)),t=t.previousSibling;continue}case 8:t=t.previousSibling;continue}break}for((i>0||c||m)&&(c=this.trim(c,!1),m=this.trim(m,!0),o.push(new Cp(i,c,m,s)),s=null);u&&!(!u||u.nodeType==9);){let p=r?null:yp(t),y=r?1:0;for(;t;)t.nodeType==1&&(y+=2),t=t.previousSibling;o.push(new wp(y,p,s)),s=null,t=u,u=u.parentNode,r=!1}o.reverse(),this.steps?(o.push(new xp),this.steps=o.concat(this.steps)):this.steps=o}toString(){if(!this.steps)return"";let t=new Wi;t.append("epubcfi(");for(let i=0;i<this.steps.length;i++)this.steps[i].appendTo(t);return t.append(")"),t.toString().replace(/%/g,"%25")}};function Ep(){return{fontFamily:"serif",lineHeight:1.25,margin:8,hyphenate:!1,columnWidth:25,horizontal:!1,nightMode:!1,spreadView:!1,pageBorder:1,enabledMediaTypes:{vivliostyle:!0,print:!0},defaultPaperSize:void 0}}function Tp(e){return{fontFamily:e.fontFamily,lineHeight:e.lineHeight,margin:e.margin,hyphenate:e.hyphenate,columnWidth:e.columnWidth,horizontal:e.horizontal,nightMode:e.nightMode,spreadView:e.spreadView,pageBorder:e.pageBorder,enabledMediaTypes:Object.assign({},e.enabledMediaTypes),defaultPaperSize:e.defaultPaperSize?Object.assign({},e.defaultPaperSize):void 0}}var e1=Ep(),Pp={PENDING:{}};function Ap(e,t,i,r){let s=Math.min((e-0)/i,(t-0)/r);return`matrix(${s},0,0,${s},0,0)`}function jl(e){return`"${Qn(`${e}`)}"`}function t1(e){return rr(`${e}`)}function ql(e,t){return e?`${rr(e)}.${rr(t)}`:rr(t)}var Np=0,Vl=class{constructor(e,t){if(this.parent=e,this.resolver=t,f(this,"scopeKey"),f(this,"children",[]),f(this,"zero"),f(this,"one"),f(this,"_true"),f(this,"_false"),f(this,"values",{}),f(this,"funcs",{}),f(this,"builtIns",{}),this.scopeKey=`S${Np++}`,this.zero=new ft(this,0),this.one=new ft(this,1),this._true=new ft(this,!0),this._false=new ft(this,!1),e&&e.children.push(this),!e){let i=this.builtIns;i.floor=Math.floor,i.ceil=Math.ceil,i.round=Math.round,i.sqrt=Math.sqrt,i.min=Math.min,i.max=Math.max,i.letterbox=Ap,i["css-string"]=jl,i["css-name"]=t1,i.typeof=r=>typeof r,this.defineBuiltInName("page-width",function(){return this.pageWidth()}),this.defineBuiltInName("page-height",function(){return this.pageHeight()}),this.defineBuiltInName("pref-font-family",function(){return this.pref.fontFamily}),this.defineBuiltInName("pref-night-mode",function(){return this.pref.nightMode}),this.defineBuiltInName("pref-hyphenate",function(){return this.pref.hyphenate}),this.defineBuiltInName("pref-margin",function(){return this.pref.margin}),this.defineBuiltInName("pref-line-height",function(){return this.pref.lineHeight}),this.defineBuiltInName("pref-column-width",function(){return this.pref.columnWidth*this.fontSize}),this.defineBuiltInName("pref-horizontal",function(){return this.pref.horizontal}),this.defineBuiltInName("pref-spread-view",function(){return this.pref.spreadView}),this.defineBuiltInName("pub-title",function(){return jl(this.pubTitle?this.pubTitle:"")}),this.defineBuiltInName("doc-title",function(){return jl(this.docTitle?this.docTitle:"")})}}defineBuiltInName(e,t){this.values[e]=new dt(this,t,e)}defineName(e,t){this.values[e]=t}defineFunc(e,t){this.funcs[e]=t}defineBuiltIn(e,t){this.builtIns[e]=t}};function i1(e){switch(e?.toLowerCase()){case"px":case"in":case"pt":case"pc":case"cm":case"mm":case"q":return!0;default:return!1}}function Ip(e){switch(e?.toLowerCase()){case"vw":case"vh":case"vi":case"vb":case"vmin":case"vmax":case"pvw":case"pvh":case"pvi":case"pvb":case"pvmin":case"pvmax":return!0;default:return!1}}function r1(e){switch(e?.toLowerCase()){case"em":case"ex":case"rem":case"lh":case"rlh":return!0;default:return!1}}function n1(e){switch(e?.toLowerCase()){case"rem":case"rlh":return!0;default:return!1}}var Ue={px:1,in:96,pt:4/3,pc:96/6,cm:96/2.54,mm:96/25.4,q:96/2.54/40,em:16,rem:16,ex:8,lh:20,rlh:20,dppx:1,dpi:1/96,dpcm:2.54/96};function Op(e){switch(e){case"q":return!CSS.supports("font-size","1q");case"lh":return!CSS.supports("line-height","1lh");case"rem":case"rlh":return!0;default:return!1}}var Hl=class{constructor(e,t,i,r){this.rootScope=e,this.viewportWidth=t,this.viewportHeight=i,f(this,"actualPageWidth",null),f(this,"pageWidth"),f(this,"actualPageHeight",null),f(this,"pageHeight"),f(this,"initialFontSize"),f(this,"rootFontSize",null),f(this,"isRelativeRootFontSize",null),f(this,"fontSize"),f(this,"rootLineHeight",null),f(this,"pref"),f(this,"scopes",{}),f(this,"pageAreaWidth",null),f(this,"pageAreaHeight",null),f(this,"pageVertical",null),f(this,"pubTitle",null),f(this,"docTitle",null),this.pageWidth=function(){return this.actualPageWidth?this.actualPageWidth:this.pref.spreadView?Math.floor(t/2)-this.pref.pageBorder:t},this.pageHeight=function(){return this.actualPageHeight?this.actualPageHeight:i},this.initialFontSize=r,this.fontSize=function(){return this.rootFontSize?this.rootFontSize:r},this.pref=e1}getScopeContext(e){let t=this.scopes[e.scopeKey];return t||(t={},this.scopes[e.scopeKey]=t),t}clearScope(e){this.scopes[e.scopeKey]={};for(let t=0;t<e.children.length;t++)this.clearScope(e.children[t])}queryUnitSize(e,t,i){if(Ip(e)){let r=this.pageWidth()/100,s=this.pageHeight()/100,o=this.pageAreaWidth!=null?this.pageAreaWidth/100:r,u=this.pageAreaHeight!=null?this.pageAreaHeight/100:s,c=i??this.pageVertical;switch(e){case"vw":return o;case"vh":return u;case"vi":return c?u:o;case"vb":return c?o:u;case"vmin":return o<u?o:u;case"vmax":return o>u?o:u;case"pvw":return r;case"pvh":return s;case"pvi":return c?s:r;case"pvb":return c?r:s;case"pvmin":return r<s?r:s;case"pvmax":return r>s?r:s}}return e=="em"||e=="rem"?t?this.initialFontSize:this.fontSize():e=="ex"?Ue.ex*(t?this.initialFontSize:this.fontSize())/Ue.em:e=="lh"||e=="rlh"?this.rootLineHeight:Ue[e]}evalName(e,t){do{let i=e.values[t];if(i||e.resolver&&(i=e.resolver.call(this,t,!1),i))return i;e=e.parent}while(e);throw new Error(`Name '${t}' is undefined`)}evalCall(e,t,i,r){do{let s=e.funcs[t];if(s||e.resolver&&(s=e.resolver.call(this,t,!0),s))return s;let o=e.builtIns[t];if(o){if(r)return e.zero;let u=Array(i.length);for(let c=0;c<i.length;c++)u[c]=i[c].evaluate(this);return new ft(e,o.apply(this,u))}e=e.parent}while(e);throw new Error(`Function '${t}' is undefined`)}evalMediaName(e,t){let i=e==="all"||!!this.pref.enabledMediaTypes[e];return t?!i:i}evalMediaTest(e,t){let i="",r=e.match(/^(min|max)-(.*)$/);r&&(i=r[1],e=r[2]);let s=null,o=null;switch(e){case"width":case"height":case"device-width":case"device-height":case"color":t&&(s=t.evaluate(this));break}switch(e){case"width":o=this.pageWidth();break;case"height":o=this.pageHeight();break;case"device-width":o=window.screen.availWidth;break;case"device-height":o=window.screen.availHeight;break;case"color":o=window.screen.pixelDepth;break}if(o!=null&&s!=null)switch(i){case"min":return o>=Number(s);case"max":return o<=Number(s);default:return o==s}else if(o!=null&&t==null)return o!==0;return!1}evalSupportsTest(e,t,i){return!1}queryVal(e,t){let i=e&&this.scopes[e.scopeKey];return i?i[t]:void 0}storeVal(e,t,i){this.getScopeContext(e)[t]=i}},hi=class{constructor(e){this.scope=e,f(this,"key"),this.scope=e,this.key=`_${Np++}`}toString(){let e=new Wi;return this.appendTo(e,0),e.toString()}appendTo(e,t){throw new Error("F_ABSTRACT")}evaluateCore(e){throw new Error("F_ABSTRACT")}expand(e,t){return this}dependCore(e,t,i){return e===this}dependOuter(e,t,i){let r=i[this.key];if(r!=null)return r===Pp.PENDING?!1:r;{i[this.key]=Pp.PENDING;let s=this.dependCore(e,t,i);return i[this.key]=s,s}}depend(e,t){return this.dependOuter(e,t,{})}evaluate(e){let t=e.queryVal(this.scope,this.key);return typeof t<"u"||(t=this.evaluateCore(e),this.scope&&e.storeVal(this.scope,this.key,t)),t}isMediaName(){return!1}},Rp=class extends hi{constructor(e,t){super(e),this.val=t}getOp(){throw new Error("F_ABSTRACT")}evalPrefix(e){throw new Error("F_ABSTRACT")}evaluateCore(e){let t=this.val.evaluate(e);return this.evalPrefix(t)}dependCore(e,t,i){return e===this||this.val.dependOuter(e,t,i)}appendTo(e,t){10<t&&e.append("("),e.append(this.getOp()),this.val.appendTo(e,10),10<t&&e.append(")")}expand(e,t){let i=this.val.expand(e,t);return i===this.val?this:new this.constructor(this.scope,i)}},ka=class extends hi{constructor(e,t,i){super(e),this.lhs=t,this.rhs=i}getPriority(){throw new Error("F_ABSTRACT")}getOp(){throw new Error("F_ABSTRACT")}evalInfix(e,t){throw new Error("F_ABSTRACT")}evaluateCore(e){let t=this.lhs.evaluate(e),i=this.rhs.evaluate(e);return this.evalInfix(t,i)}dependCore(e,t,i){return e===this||this.lhs.dependOuter(e,t,i)||this.rhs.dependOuter(e,t,i)}appendTo(e,t){let i=this.getPriority();i<=t&&e.append("("),this.lhs.appendTo(e,i),e.append(this.getOp()),this.rhs.appendTo(e,i),i<=t&&e.append(")")}expand(e,t){let i=this.lhs.expand(e,t),r=this.rhs.expand(e,t);return i===this.lhs&&r===this.rhs?this:new this.constructor(this.scope,i,r)}},Lp=class extends ka{constructor(e,t,i){super(e,t,i)}getPriority(){return 1}},$r=class extends ka{constructor(e,t,i){super(e,t,i)}getPriority(){return 2}},_p=class extends ka{constructor(e,t,i){super(e,t,i)}getPriority(){return 3}},Ul=class extends ka{constructor(e,t,i){super(e,t,i)}getPriority(){return 4}},ar=class extends Rp{constructor(e,t){super(e,t)}getOp(){return"!"}evalPrefix(e){return!e}},s1=class extends ar{constructor(e,t){super(e,t)}getOp(){return"not "}},Yr=class extends Rp{constructor(e,t){super(e,t)}getOp(){return"-"}evalPrefix(e){return-e}},Gl=class extends Lp{constructor(e,t,i){super(e,t,i)}getOp(){return"&&"}evaluateCore(e){return this.lhs.evaluate(e)&&this.rhs.evaluate(e)}},a1=class extends Gl{constructor(e,t,i){super(e,t,i)}getOp(){return" and "}},$l=class extends Lp{constructor(e,t,i){super(e,t,i)}getOp(){return"||"}evaluateCore(e){return this.lhs.evaluate(e)||this.rhs.evaluate(e)}},o1=class extends $l{constructor(e,t,i){super(e,t,i)}getOp(){return", "}},l1=class extends $l{constructor(e,t,i){super(e,t,i)}getOp(){return" or "}},d1=class extends $r{constructor(e,t,i){super(e,t,i)}getOp(){return"<"}evalInfix(e,t){return e<t}},u1=class extends $r{constructor(e,t,i){super(e,t,i)}getOp(){return"<="}evalInfix(e,t){return e<=t}},c1=class extends $r{constructor(e,t,i){super(e,t,i)}getOp(){return">"}evalInfix(e,t){return e>t}},Yl=class extends $r{constructor(e,t,i){super(e,t,i)}getOp(){return">="}evalInfix(e,t){return e>=t}},Xl=class extends $r{constructor(e,t,i){super(e,t,i)}getOp(){return"=="}evalInfix(e,t){return e==t}},h1=class extends $r{constructor(e,t,i){super(e,t,i)}getOp(){return"!="}evalInfix(e,t){return e!=t}},Bp=class extends _p{constructor(e,t,i){super(e,t,i)}getOp(){return"+"}evalInfix(e,t){return e+t}},Fp=class extends _p{constructor(e,t,i){super(e,t,i)}getOp(){return" - "}evalInfix(e,t){return e-t}},Kl=class extends Ul{constructor(e,t,i){super(e,t,i)}getOp(){return"*"}evalInfix(e,t){return e*t}},zp=class extends Ul{constructor(e,t,i){super(e,t,i)}getOp(){return"/"}evalInfix(e,t){return e/t}},Mp=class extends Ul{constructor(e,t,i){super(e,t,i)}getOp(){return"%"}evalInfix(e,t){return e%t}},Jn=class extends hi{constructor(e,t,i){var r;super(e),this.num=t,f(this,"unit"),this.unit=(r=i?.toLowerCase())!=null?r:""}appendTo(e,t){e.append(this.num.toString()),e.append(rr(this.unit))}evaluateCore(e){return this.num*e.queryUnitSize(this.unit,!1)}},lt=class extends hi{constructor(e,t){super(e),this.qualifiedName=t}appendTo(e,t){e.append(this.qualifiedName)}evaluateCore(e){return e.evalName(this.scope,this.qualifiedName).evaluate(e)}dependCore(e,t,i){return e===this||t.evalName(this.scope,this.qualifiedName).dependOuter(e,t,i)}},Dp=class extends hi{constructor(e,t,i){super(e),this.not=t,this.name=i}appendTo(e,t){this.not&&e.append("not "),e.append(rr(this.name))}evaluateCore(e){return e.evalMediaName(this.name,this.not)}isMediaName(){return!0}},dt=class extends hi{constructor(e,t,i){super(e),this.fn=t,this.str=i}appendTo(e,t){e.append(this.str)}evaluateCore(e){return this.fn.call(e)}};function p1(e,t){e.append("(");for(let i=0;i<t.length;i++)i&&e.append(","),t[i].appendTo(e,0);e.append(")")}function m1(e,t,i){let r=t;for(let s=0;s<t.length;s++){let o=t[s].expand(e,i);if(t!==r)r[s]=o;else if(o!==t[s]){r=Array(t.length);for(let u=0;u<s;u++)r[u]=t[u];r[s]=o}}return r}var es=class sT extends hi{constructor(t,i,r){super(t),this.qualifiedName=i,this.params=r}appendTo(t,i){t.append(this.qualifiedName),p1(t,this.params)}evaluateCore(t){return t.evalCall(this.scope,this.qualifiedName,this.params,!1).expand(t,this.params).evaluate(t)}dependCore(t,i,r){if(t===this)return!0;for(let s=0;s<this.params.length;s++)if(this.params[s].dependOuter(t,i,r))return!0;return i.evalCall(this.scope,this.qualifiedName,this.params,!0).dependOuter(t,i,r)}expand(t,i){let r=m1(t,this.params,i);return r===this.params?this:new sT(this.scope,this.qualifiedName,r)}},g1=class aT extends hi{constructor(t,i,r,s){super(t),this.cond=i,this.ifTrue=r,this.ifFalse=s}appendTo(t,i){i>0&&t.append("("),this.cond.appendTo(t,0),t.append("?"),this.ifTrue.appendTo(t,0),t.append(":"),this.ifFalse.appendTo(t,0),i>0&&t.append(")")}evaluateCore(t){return this.cond.evaluate(t)?this.ifTrue.evaluate(t):this.ifFalse.evaluate(t)}dependCore(t,i,r){return t===this||this.cond.dependOuter(t,i,r)||this.ifTrue.dependOuter(t,i,r)||this.ifFalse.dependOuter(t,i,r)}expand(t,i){let r=this.cond.expand(t,i),s=this.ifTrue.expand(t,i),o=this.ifFalse.expand(t,i);return r===this.cond&&s===this.ifTrue&&o===this.ifFalse?this:new aT(this.scope,r,s,o)}},ft=class extends hi{constructor(e,t){super(e),this.val=t}appendTo(e,t){switch(typeof this.val){case"number":case"boolean":e.append(this.val.toString());break;case"string":e.append('"'),e.append(Qn(this.val)),e.append('"');break;default:throw new Error("F_UNEXPECTED_STATE")}}evaluateCore(e){return this.val}},Wp=class oT extends hi{constructor(t,i,r){super(t),this.name=i,this.value=r}appendTo(t,i){t.append("("),t.append(Qn(this.name.name)),t.append(":"),this.value.appendTo(t,0),t.append(")")}evaluateCore(t){return t.evalMediaTest(this.name.name,this.value)}dependCore(t,i,r){return t===this||this.value.dependOuter(t,i,r)}expand(t,i){let r=this.value.expand(t,i);return r===this.value?this:new oT(this.scope,this.name,r)}},f1=class extends hi{constructor(e,t,i,r){super(e),this.name=t,this.value=i,this.isFunc=r}appendTo(e,t){this.isFunc&&e.append(this.name),e.append("("),!this.isFunc&&this.name&&(e.append(this.name),e.append(":")),e.append(this.value),e.append(")")}evaluateCore(e){return e.evalSupportsTest(this.name,this.value,this.isFunc)}},jp=class extends hi{constructor(e,t){super(e),this.index=t}appendTo(e,t){e.append("$"),e.append(this.index.toString())}expand(e,t){let i=t[this.index];if(!i)throw new Error(`Parameter missing: ${this.index}`);return i}};function pi(e,t,i){return t===e._false||t===e.zero||i==e._false||i==e.zero?e._false:t===e._true||t===e.one?i:i===e._true||i===e.one?t:new Gl(e,t,i)}function ve(e,t,i){return t===e.zero?i:i===e.zero?t:new Bp(e,t,i)}function Be(e,t,i){return t===e.zero?new Yr(e,i):i===e.zero?t:new Fp(e,t,i)}function Ea(e,t,i){return t===e.zero||i===e.zero?e.zero:t===e.one?i:i===e.one?t:new Kl(e,t,i)}function Zl(e,t,i){return t===e.zero?e.zero:i===e.one?t:new zp(e,t,i)}var ji=class{visitValues(e){for(let t=0;t<e.length;t++)e[t].visit(this);return null}visitEmpty(e){return null}visitSlash(e){return null}visitStr(e){return null}visitIdent(e){return null}visitNumeric(e){return null}visitNum(e){return null}visitInt(e){return this.visitNum(e)}visitHexColor(e){return null}visitURL(e){return null}visitURange(e){return null}visitSpaceList(e){return this.visitValues(e.values),null}visitCommaList(e){return this.visitValues(e.values),null}visitFunc(e){return this.visitValues(e.values),null}visitExpr(e){return null}},Xr=class extends ji{constructor(){super(),f(this,"error",!1)}visitValues(e){let t=null;for(let i=0;i<e.length;i++){let r=e[i],s=r.visit(this);if(this.error)return[];if(t)t[i]=s;else if(r!==s){t=new Array(e.length);for(let o=0;o<i;o++)t[o]=e[o];t[i]=s}}return t||e}visitEmpty(e){return e}visitStr(e){return e}visitIdent(e){return e}visitSlash(e){return e}visitNumeric(e){return e}visitNum(e){return e}visitInt(e){return e}visitHexColor(e){return e}visitURL(e){return e}visitURange(e){return e}visitSpaceList(e){let t=this.visitValues(e.values);return this.error?he:t===e.values?e:new Ke(t)}visitCommaList(e){let t=this.visitValues(e.values);return this.error?he:t===e.values?e:new Mt(t)}visitFunc(e){let t=this.visitValues(e.values);return this.error?he:t===e.values?e:new Kr(e.name,t)}visitExpr(e){return e}},Rt=class{toString(){let e=new Wi;return this.appendTo(e,!0),e.toString()}stringValue(){let e=new Wi;return this.appendTo(e,!1),e.toString()}toExpr(e,t){return null}appendTo(e,t){e.append("[error]")}isExpr(){return!1}isNumeric(){return!1}isNum(){return!1}isIdent(){return!1}isSpaceList(){return!1}visit(e){return this}},qp=class lT extends Rt{static get instance(){return this.empty||(this.empty=new lT),this.empty}constructor(){super()}toExpr(t,i){return new ft(t,"")}appendTo(t,i){}visit(t){return t.visitEmpty(this)}};f(qp,"empty");var b1=qp,he=b1.instance,Vp=class dT extends Rt{static get instance(){return this.slash||(this.slash=new dT),this.slash}constructor(){super()}toExpr(t,i){return new ft(t,"/")}appendTo(t,i){t.append("/")}visit(t){return t.visitSlash(this)}};f(Vp,"slash");var y1=Vp,Ta=y1.instance,bt=class extends Rt{constructor(e){super(),this.str=e}toExpr(e,t){return new ft(e,this.str)}appendTo(e,t){t?(e.append('"'),e.append(Qn(this.str)),e.append('"')):e.append(this.str)}visit(e){return e.visitStr(this)}},Ql={},Jt=class extends Rt{constructor(e){if(super(),this.name=e,Ql[e])throw new Error("E_INVALID_CALL");Ql[e]=this}toExpr(e,t){return new ft(e,this.name)}appendTo(e,t){t?e.append(rr(this.name)):e.append(this.name)}visit(e){return e.visitIdent(this)}isIdent(){return!0}};function J(e){let t=Ql[e];return t||(t=new Jt(e)),t}var U=class extends Rt{constructor(e,t){var i;super(),this.num=e,f(this,"unit"),this.unit=(i=t?.toLowerCase())!=null?i:""}toExpr(e,t){return this.num==0?e.zero:t&&this.unit=="%"?this.num==100?t:new Kl(e,t,new ft(e,this.num/100)):new Jn(e,this.num,this.unit)}appendTo(e,t){e.append(this.num.toString()),e.append(this.unit)}visit(e){return e.visitNumeric(this)}isNumeric(){return!0}},or=class extends Rt{constructor(e){super(),this.num=e}toExpr(e,t){return this.num==0?e.zero:this.num==1?e.one:new ft(e,this.num)}appendTo(e,t){e.append(this.num.toString())}visit(e){return e.visitNum(this)}isNum(){return!0}},Tr=class extends or{constructor(e){super(e)}visit(e){return e.visitInt(this)}},Hp=class extends Rt{constructor(e){super(),this.hex=e}appendTo(e,t){e.append("#"),e.append(this.hex)}visit(e){return e.visitHexColor(this)}},mi=class extends Rt{constructor(e){super(),this.url=e}appendTo(e,t){e.append('url("'),e.append(Qn(this.url)),e.append('")')}visit(e){return e.visitURL(this)}},Up=class extends Rt{constructor(e){super(),this.urangeText=e}appendTo(e,t){e.append(this.urangeText)}visit(e){return e.visitURange(this)}};function Jl(e,t,i,r){var s,o;let u=t.length;if(u>0){(s=t[0])==null||s.appendTo(e,r);for(let c=1;c<u;c++)e.append(i),(o=t[c])==null||o.appendTo(e,r)}}var Ke=class extends Rt{constructor(e){super(),this.values=e}appendTo(e,t){Jl(e,this.values," ",t)}visit(e){return e.visitSpaceList(this)}isSpaceList(){return!0}},Mt=class extends Rt{constructor(e){super(),this.values=e}appendTo(e,t){Jl(e,this.values,",",t)}visit(e){return e.visitCommaList(this)}},Kr=class extends Rt{constructor(e,t){super(),this.name=e,this.values=t}appendTo(e,t){e.append(rr(this.name)),e.append("("),Jl(e,this.values,",",t),e.append(")")}visit(e){return e.visitFunc(this)}},re=class extends Rt{constructor(e){super(),this.expr=e}toExpr(){return this.expr}appendTo(e,t){this.expr instanceof ft||this.expr instanceof Jn?this.expr.appendTo(e,0):(e.append("-epubx-expr("),this.expr.appendTo(e,0),e.append(")"))}visit(e){return e.visitExpr(this)}isExpr(){return!0}},ts=class extends Rt{constructor(e){super(),this.text=e}appendTo(e,t){e.append(this.text||" ")}};function Dt(e,t){if(e){if(e.isNumeric()){let i=e;return t.queryUnitSize(i.unit,!1)*i.num}if(e.isNum())return e.num}return 0}function Gp(e,t){return new U(Dt(e,t),"px")}var N={absolute:J("absolute"),all:J("all"),always:J("always"),anywhere:J("anywhere"),auto:J("auto"),avoid:J("avoid"),balance:J("balance"),balance_all:J("balance-all"),block:J("block"),block_end:J("block-end"),block_start:J("block-start"),both:J("both"),bottom:J("bottom"),border_box:J("border-box"),break_all:J("break-all"),break_word:J("break-word"),clip:J("clip"),crop:J("crop"),cross:J("cross"),column:J("column"),discard:J("discard"),exclusive:J("exclusive"),_false:J("false"),fixed:J("fixed"),flex:J("flex"),flow_root:J("flow-root"),footnote:J("footnote"),footer:J("footer"),grid:J("grid"),header:J("header"),hidden:J("hidden"),horizontal_tb:J("horizontal-tb"),inherit:J("inherit"),initial:J("initial"),inline:J("inline"),inline_block:J("inline-block"),inline_end:J("inline-end"),inline_start:J("inline-start"),inside:J("inside"),keep:J("keep"),landscape:J("landscape"),left:J("left"),line:J("line"),list_item:J("list-item"),ltr:J("ltr"),manual:J("manual"),max_content:J("max-content"),min_content:J("min-content"),none:J("none"),normal:J("normal"),oeb_page_foot:J("oeb-page-foot"),oeb_page_head:J("oeb-page-head"),outside:J("outside"),padding_box:J("padding-box"),page:J("page"),relative:J("relative"),revert:J("revert"),right:J("right"),same:J("same"),scale:J("scale"),snap_block:J("snap-block"),snap_inline:J("snap-inline"),solid:J("solid"),spread:J("spread"),_static:J("static"),rtl:J("rtl"),table:J("table"),table_caption:J("table-caption"),table_cell:J("table-cell"),table_footer_group:J("table-footer-group"),table_header_group:J("table-header-group"),table_row:J("table-row"),top:J("top"),transparent:J("transparent"),unset:J("unset"),vertical_lr:J("vertical-lr"),vertical_rl:J("vertical-rl"),visible:J("visible"),_true:J("true")},$p=new U(100,"%"),is=new U(100,"pvw"),rs=new U(100,"pvh"),$e=new U(0,"px"),q3=new Up("U+0-10FFFF"),Yp={"font-size":1,"line-height":2,color:3};function Ee(e){return e===N.inherit||e===N.initial||e===N.revert||e===N.unset}function Xp(e,t){let i=Yp[e]||Number.MAX_VALUE,r=Yp[t]||Number.MAX_VALUE;return i-r}function qi(e){return e?.length>2&&e.startsWith("--")}var oi=class{constructor(e,t,i,r){this.x1=e,this.y1=t,this.x2=i,this.y2=r}},lr=class{constructor(e,t){this.x=e,this.y=t}},ed=class{constructor(e,t,i,r){this.left=e,this.top=t,this.right=i,this.bottom=r}},Kp=class{constructor(e,t,i,r){this.low=e,this.high=t,this.winding=i,this.shapeId=r}},Vi=class{constructor(e,t,i,r){this.y1=e,this.y2=t,this.x1=i,this.x2=r,f(this,"left",null),f(this,"right",null)}};function v1(e,t){return e.low.y-t.low.y||e.low.x-t.low.x}var Pa=class uT{constructor(t){this.points=t}addSegments(t,i){let r=this.points,s=r.length,o=r[s-1];for(let u=0;u<s;u++){let c=r[u],m;o.y<c.y?m=new Kp(o,c,1,i):m=new Kp(c,o,-1,i),t.push(m),o=c}}withOffset(t,i){let r=[];for(let s of this.points)r.push(new lr(s.x+t,s.y+i));return new uT(r)}};function Zp(e,t,i,r){let s=[];for(let o=0;o<20;o++){let u=o*2*Math.PI/20;s.push(new lr(e+i*Math.sin(u),t+r*Math.cos(u)))}return new Pa(s)}function td(e,t,i,r){return new Pa([new lr(e,t),new lr(i,t),new lr(i,r),new lr(e,r)])}var Aa=class{constructor(e,t,i,r){this.x=e,this.winding=t,this.shapeId=i,this.lowOrHigh=r}};function Qp(e,t){let i=e.low.x+(e.high.x-e.low.x)*(t-e.low.y)/(e.high.y-e.low.y);if(isNaN(i))throw new Error("Bad intersection");return i}function S1(e,t,i,r){let s,o,u,c;t.high.y<i&&ee.warn("Error: inconsistent segment (1)"),t.low.y<=i?(s=Qp(t,i),o=t.winding):(s=t.low.x,o=0),t.high.y>=r?(u=Qp(t,r),c=t.winding):(u=t.high.x,c=0),s<u?(e.push(new Aa(s,o,t.shapeId,-1)),e.push(new Aa(u,c,t.shapeId,1))):(e.push(new Aa(u,c,t.shapeId,-1)),e.push(new Aa(s,o,t.shapeId,1)))}function x1(e,t,i){let r=t+i,s=Array(r),o=Array(r),u;for(u=0;u<=r;u++)s[u]=0,o[u]=0;let c=[],m=!1,p=e.length;for(let y=0;y<p;y++){let S=e[y];s[S.shapeId]+=S.winding,o[S.shapeId]+=S.lowOrHigh;let v=!1;for(u=0;u<t;u++)if(s[u]&&!o[u]){v=!0;break}if(v){for(u=t;u<=r;u++)if(s[u]||o[u]){v=!1;break}}m!=v&&(c.push(S.x),m=v)}return c}function w1(e,t){return t?Math.ceil(e/t)*t:e}function Jp(e,t){return t?Math.floor(e/t)*t:e}function C1(e){return new lr(e.y,-e.x)}function Na(e){return new oi(e.y1,-e.x2,e.y2,-e.x1)}function em(e){return new oi(-e.y2,e.x1,-e.y1,e.x2)}function tm(e){return new Pa(e.points.map(t=>C1(t)))}function k1(e,t,i,r,s,o){o&&(e=Na(e),t=t.map(A=>tm(A)),i=i.map(A=>tm(A)));let u=t.length,c=i?i.length:0,m=[],p=[],y,S,v;for(y=0;y<u;y++)t[y].addSegments(p,y);for(y=0;y<c;y++)i[y].addSegments(p,y+u);let w=p.length;p.sort(v1);let T=0;for(;p[T].shapeId>=u;)T++;let E=p[T].low.y;E>e.y1&&m.push(new Vi(e.y1,E,e.x2,e.x2));let P=0,O=[];for(;P<w&&(v=p[P]).low.y<E;)v.high.y>E&&O.push(v),P++;for(;P<w||O.length>0;){let A=e.y2,L=Math.min(w1(Math.ceil(E+r),s),e.y2);for(S=0;S<O.length&&A>L;S++)v=O[S],v.low.x==v.high.x?v.high.y<A&&(A=Math.max(Jp(v.high.y,s),L)):v.low.x!=v.high.x&&(A=L);for(A>e.y2&&(A=e.y2);P<w&&(v=p[P]).low.y<A;){if(v.high.y<E){P++;continue}if(v.low.y<L)v.low.y==v.high.y&&v.low.y==E||(O.push(v),A=L),P++;else{let te=Jp(v.low.y,s);te<A&&(A=te);break}}let H=[];for(S=0;S<O.length;S++)S1(H,O[S],E,A);H.sort((te,ae)=>te.x-ae.x||te.lowOrHigh-ae.lowOrHigh);let G=x1(H,u,c);if(G.length==0)m.push(new Vi(E,A,e.x2,e.x2));else{let te=0,ae=e.x1;for(S=0;S<G.length;S+=2){let ge=Math.max(e.x1,G[S]),we=Math.min(e.x2,G[S+1])-ge;we>te&&(te=we,ae=ge)}te==0?m.push(new Vi(E,A,e.x2,e.x2)):m.push(new Vi(E,A,Math.max(ae,e.x1),Math.min(ae+te,e.x2)))}if(A==e.y2)break;for(E=A,S=O.length-1;S>=0;S--)O[S].high.y<=A&&O.splice(S,1)}return im(e,m),m}function im(e,t){let i=t.length-1,r=new Vi(e.y2,e.y2,e.x1,e.x2);for(;i>=0;){let s=r;r=t[i],(r.y2-r.y1<1||r.x1==s.x1&&r.x2==s.x2)&&(s.y1=r.y1,t.splice(i,1),r=s),i--}}function rm(e,t){let i=0,r=e.length;for(;i<r;){let s=Math.floor((i+r)/2);t>=e[s].y2?i=s+1:r=s}return i}function E1(e,t){if(!e.length)return t;let i=t.y1,r,s;for(s=0;s<e.length&&(r=e[s],!(r.y2>t.y1&&r.x1-.1<=t.x1&&r.x2+.1>=t.x2));s++)i=Math.max(i,r.y2);let o=i;for(;s<e.length&&(r=e[s],!(r.y1>=t.y2||r.x1-.1>t.x1||r.x2+.1<t.x2));s++)o=r.y2;return s===e.length?o=t.y2:o=Math.min(o,t.y2),o<=i?null:new oi(t.x1,i,t.x2,o)}function T1(e,t){if(!e.length)return t;let i=t.y2,r,s;for(s=e.length-1;s>=0&&(r=e[s],!(s===e.length-1&&r.y2<t.y2))&&!(r.y1<t.y2&&r.x1-.1<=t.x1&&r.x2+.1>=t.x2);s--)i=Math.min(i,r.y1);let o=Math.min(i,r.y2);for(;s>=0&&(r=e[s],!(r.y2<=t.y1||r.x1-.1>t.x1||r.x2+.1<t.x2));s--)o=r.y1;return o=Math.max(o,t.y1),i<=o?null:new oi(t.x1,o,t.x2,i)}function P1(e,t,i,r){let s=i.y1,o=i.x2-i.x1,u=i.y2-i.y1,c=rm(t,s);for(;;){let m=s+u;if(m>e.y2)return!1;let p=e.x1,y=e.x2;for(let S=c;S<t.length&&t[S].y1<m;S++){let v=t[S];v.x1>p&&(p=v.x1),v.x2<y&&(y=v.x2)}if(p+o<=y||c>=t.length)return r=="left"?(i.x1=p,i.x2=p+o):(i.x1=y-o,i.x2=y),i.y2+=s-i.y1,i.y1=s,!0;s=t[c].y2,c++}}function A1(e,t,i,r,s){for(r||(r=[new Vi(i.y1,i.y2,i.x1,i.x2)]);r.length>0&&r[0].y2<=e.y1;)r.shift();if(r.length==0)return;r[0].y1<e.y1&&(r[0].y1=e.y1);let o,u=t.length==0?e.y1:t[t.length-1].y2;u<e.y2&&t.push(new Vi(u,e.y2,e.x1,e.x2));let c=rm(t,r[0].y1);for(let m of r){if(c==t.length)break;for(t[c].y1<m.y1&&(o=t[c],c++,t.splice(c,0,new Vi(m.y1,o.y2,o.x1,o.x2)),o.y2=m.y1);c<t.length&&(o=t[c++],o.y2>m.y2&&(t.splice(c,0,new Vi(m.y2,o.y2,o.x1,o.x2)),o.y2=m.y2),m.x1!=m.x2&&(s=="left"?o.x1=Math.min(m.x2,e.x2):o.x2=Math.max(m.x1,e.x1)),o.y2!=m.y2););}im(e,t)}var N1=class extends ji{constructor(){super(),f(this,"propSet",{})}visitIdent(e){return this.propSet[e.name]=!0,e}visitSpaceList(e){return this.visitValues(e.values),e}};function I1(e){if(e){let t=new N1;try{return e.visit(t),t.propSet}catch(i){ee.warn(i,"toSet:")}}return{}}var O1=class extends ji{constructor(e){super(),this.value=e}visitInt(e){return this.value=e.num,e}};function nm(e,t){if(e){let i=new O1(t);try{return e.visit(i),i.value}catch(r){ee.warn(r,"toInt: ")}}return t}var R1=class extends ji{constructor(){super(),f(this,"collect",!1),f(this,"coords",[]),f(this,"name",null)}visitNumeric(e){return this.collect&&this.coords.push(e),null}visitNum(e){return this.collect&&e.num==0&&this.coords.push(new U(0,"px")),null}visitSpaceList(e){return this.visitValues(e.values),null}visitFunc(e){return this.collect||(this.collect=!0,this.visitValues(e.values),this.collect=!1,this.name=e.name.toLowerCase()),null}getShape(e,t,i,r,s){if(this.coords.length>0){let o=[];switch(this.coords.forEach((u,c)=>{if(u.unit=="%"){let m=c%2==0?i:r;c==3&&this.name=="circle"&&(m=Math.sqrt((i*i+r*r)/2)),o.push(u.num*m/100)}else o.push(u.num*s.queryUnitSize(u.unit,!1))}),this.name){case"polygon":if(o.length%2==0){let u=[];for(let c=0;c<o.length;c+=2)u.push(new lr(e+o[c],t+o[c+1]));return new Pa(u)}break;case"rectangle":if(o.length==4)return td(e+o[0],t+o[1],e+o[0]+o[2],t+o[1]+o[3]);break;case"ellipse":if(o.length==4)return Zp(e+o[0],t+o[1],o[2],o[3]);break;case"circle":if(o.length==3)return Zp(e+o[0],t+o[1],o[2],o[2]);break}}return null}};function sm(e,t,i,r,s,o){if(e){let u=new R1;try{return e.visit(u),u.getShape(t,i,r,s,o)}catch(c){ee.warn(c,"toShape:")}}return td(t,i,t+r,i+s)}var L1=class extends ji{constructor(e){super(),this.reset=e,f(this,"counters",{}),f(this,"name",null)}visitIdent(e){return this.name=e.toString(),this.reset?this.counters[this.name]=0:this.counters[this.name]=(this.counters[this.name]||0)+1,e}visitInt(e){return this.name&&(this.counters[this.name]+=e.num-(this.reset?0:1)),e}visitSpaceList(e){return this.visitValues(e.values),e}};function ns(e,t){let i=new L1(t);try{e.visit(i)}catch(r){ee.warn(r,"toCounters:")}return i.counters}var _1=class extends Xr{constructor(e,t){super(),this.baseUrl=e,this.transformer=t}visitURL(e){return new mi(this.transformer.transformURL(e.url,this.baseUrl))}};function id(e){let t={};return Object.keys(e).forEach(i=>{t[i]=Array.from(e[i])}),t}function ss(e,t){if(t==="content"){let i=e.cloneNode(!0);return i.querySelectorAll("[data-adapt-pseudo]").forEach(r=>r.remove()),i.textContent||""}else{let i=e.querySelector(`[data-adapt-pseudo="${t}"]`);return i&&i.textContent||""}}var B1=class{constructor(e,t){this.targetId=e,this.resolved=t,f(this,"pageCounters",null),f(this,"spineIndex",-1),f(this,"pageIndex",-1)}equals(e){return this===e?!0:e?this.targetId===e.targetId&&this.resolved===e.resolved&&this.spineIndex===e.spineIndex&&this.pageIndex===e.pageIndex:!1}isResolved(){return this.resolved}resolve(){this.resolved=!0}unresolve(){this.resolved=!1}},F1=class{constructor(e,t){this.counterStore=e,this.baseURL=t}countersOfId(e,t){e=this.counterStore.documentURLTransformer.transformFragment(e,this.baseURL),this.counterStore.countersById[e]=t}getExprContentListener(){return this.counterStore.getExprContentListener()}},z1=class{constructor(e,t,i,r){this.counterStore=e,this.baseURL=t,this.rootScope=i,this.pageScope=r,f(this,"styler",null),f(this,"namedStringValues",{}),f(this,"runningElements",{})}setStyler(e){this.styler=e}getFragment(e){let t=e.match(/^[^#]*#(.*)$/);return t?t[1]:null}getTransformedId(e){let t=this.counterStore.documentURLTransformer.transformURL(et(e,this.baseURL),this.baseURL);return t.charAt(0)==="#"&&(t=t.substring(1)),t}getPageCounterVal(e,t){let i=()=>{let o=this.counterStore.currentPageCounters[e];return o&&o.length?o[o.length-1]:null},r=new dt(this.pageScope,()=>t(i()),`page-counter-${e}`),s=o=>t(o[o.length-1]);return this.counterStore.registerPageCounterExpr(e,s,r),r}getPageCountersVal(e,t){let i=()=>this.counterStore.currentPageCounters[e]||[],r=new dt(this.pageScope,()=>t(i()),`page-counters-${e}`);return this.counterStore.registerPageCounterExpr(e,t,r),r}getTargetCounters(e,t,i){let r=this.counterStore.countersById[t];return!r&&i&&e&&(this.styler.styleUntilIdIsReached(e),r=this.counterStore.countersById[t]),r||null}getTargetPageCounters(e){return this.counterStore.currentPage.elementsById[e]?this.counterStore.currentPageCounters:this.counterStore.pageCountersById[e]||null}getTargetPageText(e,t){if(this.counterStore.currentPage.elementsById[e]){let i=this.counterStore.currentPage.elementsById[e];if(i&&i.length>0){let r=i[0];return t==="before"||t==="after"?ss(r,t):ss(r,"content")}return""}else{if(e in this.counterStore.pageTextById){let i=this.counterStore.pageTextById[e];return i[t]!==void 0?i[t]:i.content||""}return null}}getTargetCounterVal(e,t,i){let r=this.getFragment(e),s=this.getTransformedId(e),o=this.getTargetCounters(r,s,!1);if(o&&o[t]){let c=o[t];return new ft(this.rootScope,i(c[c.length-1]||null))}let u=new dt(this.pageScope,()=>{if(o=this.getTargetCounters(r,s,!0),o)if(o[t]){let c=o[t];return i(c[c.length-1]||null)}else{let c=this.getTargetPageCounters(s);if(c)if(this.counterStore.resolveReference(s),c[t]){let m=c[t];return i(m[m.length-1]||null)}else return i(0);else return this.counterStore.saveReferenceOfCurrentPage(s,!1),"??"}else return this.counterStore.saveReferenceOfCurrentPage(s,!1),"??"},`target-counter-${t}-of-${e}`);return this.counterStore.registerTargetCounterExpr(t,i,u,s),u}getTargetCountersVal(e,t,i){let r=this.getFragment(e),s=this.getTransformedId(e);return new dt(this.pageScope,()=>{let o=this.getTargetPageCounters(s);if(o){this.counterStore.resolveReference(s);let u=o[t]||[],c=this.getTargetCounters(r,s,!0)[t]||[];return i(u.concat(c))}else return this.counterStore.saveReferenceOfCurrentPage(s,!1),"??"},`target-counters-${t}-of-${e}`)}getTargetTextVal(e,t){let i=this.getTransformedId(e),r=new dt(this.pageScope,()=>{if(t==="first-letter"){let o=this.getTargetPageText(i,"before"),u=this.getTargetPageText(i,"content"),c=this.getTargetPageText(i,"after");if(o===null&&u===null&&c===null)return this.counterStore.saveReferenceOfCurrentPage(i,!1),"??";let m=(o??"")+(u??"")+(c??"");this.counterStore.resolveReference(i);let p=m.match(Ca);return p?p[0]:""}let s=this.getTargetPageText(i,t);return s!==null?(this.counterStore.resolveReference(i),s):(this.counterStore.saveReferenceOfCurrentPage(i,!1),"??")},`target-text-${t}-of-${e}`);return this.counterStore.registerTargetTextExpr(t,r,i),r}getNamedStringVal(e,t){return new dt(this.pageScope,()=>this.getRunningValue(this.namedStringValues,e,t),`named-string-${t}-${e}`)}getRunningElementVal(e,t){return new dt(this.pageScope,()=>this.getRunningValue(this.runningElements,e,t),`running-element-${t}-${e}`)}getRunningValue(e,t,i){let r=e[t];if(!r)return"";let s=Object.keys(r).map(v=>parseInt(v,10)).sort(fp),o=this.counterStore.currentPage,u=o.isBlankPage?o.offset-1:o.offset,c=o.isBlankPage?u:Math.max(u,...Array.from(o.container.querySelectorAll(`[${zi}]`)).map(v=>parseInt(v.getAttribute(zi),10))),m=-1,p=-1,y=-1,S=-1;for(let v=0;v<s.length;v++){let w=s[v],T=v>0?s[v-1]:-1,E=v<s.length-1?s[v+1]:-1;if(w>c)break;if(w>=u){if(m<0&&(m=w,S=-1),p<0)if(w===u)p=w;else{T<m&&(p=T);let P=o.container.querySelector(`[${zi}="${w}"]`);if(!P)p<0&&(p=w);else{let O=o.container.querySelector(`[${zi}="${u}"]`);if(O||(O=o.container.querySelector(`[${zi}="0"]`)),O){for(let A=O;A;A=A.firstElementChild)if(A===P){p=w;break}}}}y=w}else(E>c||E<0)&&(m=p=y=S=w)}return r[{first:m,start:p,last:y,"first-except":S}[i]]||""}setNamedString(e,t,i){let r=this.namedStringValues[e]||(this.namedStringValues[e]={});r[i]=t}setRunningElement(e,t){let i=this.runningElements[e]||(this.runningElements[e]={});i[t]=String(t)}},M1=class{constructor(e){this.documentURLTransformer=e,f(this,"countersById",{}),f(this,"pageCountersById",{}),f(this,"pageTextById",{}),f(this,"currentPageCounters",{}),f(this,"previousPageCounters",{}),f(this,"currentPageCountersStack",[]),f(this,"pageIndicesById",{}),f(this,"currentPage",null),f(this,"newReferencesOfCurrentPage",[]),f(this,"referencesToSolve",[]),f(this,"referencesToSolveStack",[]),f(this,"unresolvedReferences",{}),f(this,"resolvedReferences",{}),f(this,"pagesCounterExprs",[]),f(this,"pageCounterExprs",[]),f(this,"targetCounterExprs",[]),f(this,"targetTextExprs",[]),this.currentPageCounters.page=[0]}createCounterListener(e){return new F1(this,e)}createCounterResolver(e,t,i){return new z1(this,e,t,i)}setCurrentPage(e){this.currentPage=e}definePageCounter(e,t){this.currentPageCounters[e]?this.currentPageCounters[e].push(t):this.currentPageCounters[e]=[t]}forceSetPageCounter(e){let t=this.currentPageCounters.page;!t||!t.length?this.currentPageCounters.page=[e]:t[t.length-1]=e}updatePageCounters(e,t){this.previousPageCounters=id(this.currentPageCounters);let i,r=e["counter-reset"];if(r){let u=r.evaluate(t);u&&(i=ns(u,!0))}if(i)for(let u in i)this.definePageCounter(u,i[u]);let s,o=e["counter-increment"];if(o){let u=o.evaluate(t);u&&(s=ns(u,!1))}s?"page"in s||(s.page=1):(s={},s.page=1);for(let u in s){this.currentPageCounters[u]||this.definePageCounter(u,0);let c=this.currentPageCounters[u];c[c.length-1]+=s[u]}}pushPageCounters(e){this.currentPageCountersStack.push(this.currentPageCounters),this.currentPageCounters=id(e)}popPageCounters(){this.currentPageCounters=this.currentPageCountersStack.pop()}resolveReference(e){let t=this.unresolvedReferences[e],i=this.resolvedReferences[e];i||(i=this.resolvedReferences[e]=[]);let r=!1;for(let s=0;s<this.referencesToSolve.length;){let o=this.referencesToSolve[s];if(o.targetId===e){if(o.resolve(),this.referencesToSolve.splice(s,1),t){let u=t.indexOf(o);u>=0&&t.splice(u,1)}i.push(o),r=!0}else s++}r||this.saveReferenceOfCurrentPage(e,!0)}saveReferenceOfCurrentPage(e,t){if(!this.newReferencesOfCurrentPage.some(i=>i.targetId===e)){let i=new B1(e,t);this.newReferencesOfCurrentPage.push(i)}}finishPage(e,t){let i=Object.keys(this.currentPage.elementsById);if(i.length>0){let o=id(this.currentPageCounters);i.forEach(u=>{this.pageCountersById[u]=o;let c=this.currentPage.elementsById[u];if(c&&c.length>0){let p=c[0];this.pageTextById[u]={content:ss(p,"content"),before:ss(p,"before"),after:ss(p,"after")}}let m=this.pageIndicesById[u];if(m&&m.pageIndex<t){let p=this.resolvedReferences[u];if(p){let y=this.unresolvedReferences[u];y||(y=this.unresolvedReferences[u]=[]);let S;for(;S=p.shift();)S.unresolve(),y.push(S)}}this.pageIndicesById[u]={spineIndex:e,pageIndex:t}})}let r=this.previousPageCounters,s;for(;s=this.newReferencesOfCurrentPage.shift();){s.pageCounters=r,s.spineIndex=e,s.pageIndex=t;let o;s.isResolved()?(o=this.resolvedReferences[s.targetId],o||(o=this.resolvedReferences[s.targetId]=[])):(o=this.unresolvedReferences[s.targetId],o||(o=this.unresolvedReferences[s.targetId]=[])),o.every(u=>!s.equals(u))&&o.push(s)}this.currentPage=null}getUnresolvedRefsToPage(e){let t=[];Object.keys(e.elementsById).forEach(s=>{let o=this.unresolvedReferences[s];o&&(t=t.concat(o))}),t.sort((s,o)=>s.spineIndex-o.spineIndex||s.pageIndex-o.pageIndex);let i=[],r=null;return t.forEach(s=>{!r||r.spineIndex!==s.spineIndex||r.pageIndex!==s.pageIndex?(r={spineIndex:s.spineIndex,pageIndex:s.pageIndex,pageCounters:s.pageCounters,refs:[s]},i.push(r)):r.refs.push(s)}),i}pushReferencesToSolve(e){this.referencesToSolveStack.push(this.referencesToSolve),this.referencesToSolve=e}popReferencesToSolve(){this.referencesToSolve=this.referencesToSolveStack.pop()}registerPageCounterExpr(e,t,i){e==="pages"?this.pagesCounterExprs.push({expr:i,format:t}):this.pageCounterExprs.push({expr:i,format:t})}registerTargetCounterExpr(e,t,i,r){this.targetCounterExprs.push({name:e,expr:i,format:t,transformedId:r})}registerTargetTextExpr(e,t,i){this.targetTextExprs.push({pseudoElement:e,expr:t,transformedId:i})}getExprContentListener(){return this.exprContentListener.bind(this)}exprContentListener(e,t,i){if(e instanceof dt){if(e.str=="viv-leader"){let o=i.createElementNS("http://www.w3.org/1999/xhtml","span");return o.textContent=t,o.setAttribute("data-viv-leader",e.key),o.setAttribute("data-viv-leader-value",t),o}else if(e.str.startsWith("running-element-")){let o=t&&i.querySelectorAll(`[${zi}="${t}"]`);if(!o||o.length===0)return null;let u=o[o.length-1].cloneNode(!0);return this.fixPageCounterInRunningElement(u),u.style.position="",u.style.visibility="",u}else if(e.str.startsWith("target-counter-")){let o=i.createElementNS("http://www.w3.org/1999/xhtml","span");return o.textContent=t,o.setAttribute(sd,e.key),o}else if(e.str.startsWith("target-text-")){let o=i.createElementNS("http://www.w3.org/1999/xhtml","span");return o.textContent=t,o.setAttribute(ad,e.key),o}}let r=this.pagesCounterExprs.findIndex(o=>o.expr===e)>=0,s=!r&&this.pageCounterExprs.findIndex(o=>o.expr===e)>=0;if(r||s){let o=i.createElementNS("http://www.w3.org/1999/xhtml","span");return o.textContent=t,o.setAttribute(r?rd:nd,e.key),o}else return null}fixPageCounterInRunningElement(e){let t=e.querySelectorAll(`[${nd}]`);for(let s of t){let o=s.getAttribute(nd),u=this.pageCounterExprs.find(y=>y.expr.key===o),c=(u?.expr).str,m=c?.replace(/^page-counters?-/,""),p=this.currentPageCounters[m];p&&(s.textContent=u.format(p))}let i=e.querySelectorAll(`[${sd}]`);for(let s of i)s.setAttribute(am,!0);let r=e.querySelectorAll(`[${ad}]`);for(let s of r)s.setAttribute(om,!0)}finishLastPage(e){var t;let i=e.root.querySelectorAll(`[${rd}]`),r=e.contentContainer.childElementCount;for(let u of i){let c=u.getAttribute(rd),m=this.pagesCounterExprs.findIndex(p=>p.expr.key===c);m>=0,u.textContent=this.pagesCounterExprs[m].format([r])}let s=e.root.querySelectorAll(`[${am}]`);for(let u of s){let c=u.getAttribute(sd),m=this.targetCounterExprs.find(p=>p.expr.key===c);if(m&&m.transformedId){let p=this.pageCountersById[m.transformedId];if(p){let y=p[m.name];y&&(u.textContent=m.format(y[y.length-1]))}}}let o=e.root.querySelectorAll(`[${om}]`);for(let u of o){let c=u.getAttribute(ad),m=this.targetTextExprs.find(p=>p.expr.key===c);if(m&&m.transformedId){let p=this.pageTextById[m.transformedId];p&&(u.textContent=(t=p[m.pseudoElement])!=null?t:"")}}}createLayoutConstraint(e){return new D1(this,e)}},rd="data-vivliostyle-pages-counter",nd="data-vivliostyle-page-counter",sd="data-vivliostyle-target-counter",ad="data-vivliostyle-target-text",am="data-vivliostyle-target-counter-in-running",om="data-vivliostyle-target-text-in-running",D1=class{constructor(e,t){this.counterStore=e,this.pageIndex=t}allowLayout(e){if(!e||e.after)return!0;let t=e.viewNode;if(!t||t.nodeType!==1)return!0;let i=t.getAttribute("data-vivliostyle-id")||t.getAttribute("id")||t.getAttribute("name");if(!i||!this.counterStore.resolvedReferences[i]&&!this.counterStore.unresolvedReferences[i])return!0;let r=this.counterStore.pageIndicesById[i];return r?this.pageIndex>=r.pageIndex:!0}};function W1(e){if(e=e.substr(1),e.match(/^[^0-9a-fA-F\n\r]$/))return e;let t=parseInt(e,16);return isNaN(t)?"":t===0||t>=55296&&t<=57343||t>1114111?"\uFFFD":String.fromCodePoint(t)}function Pr(e){return e.replace(/\\([0-9a-fA-F]{1,6}(\r\n|[ \n\r\t\f])?|[^0-9a-fA-F\n\r])/g,W1)}var j1=class{constructor(){f(this,"type"),f(this,"precededBySpace",!1),f(this,"num",0),f(this,"text",""),f(this,"position",0),this.type=0}toString(){switch(this.type){case 10:return"(";case 11:return")";case 12:return"{";case 13:return"}";case 14:return"[";case 15:return"]";case 16:return",";case 17:return";";case 18:return":";case 19:return"/";case 21:return"%";case 22:return"?";case 23:return"+";case 24:return"-";case 25:return"||";case 26:return"&&";case 31:return"!";case 32:return"$";case 33:return"^";case 34:return"|";case 35:return"~";case 36:return"*";case 37:return">";case 38:return"<";case 39:return"=";case 41:return"!=";case 42:return"$=";case 43:return"^=";case 44:return"|=";case 45:return"~=";case 46:return"*=";case 47:return">=";case 48:return"<=";case 49:return"==";case 50:return"::";case 51:return"<!--";case 52:return"-->";case 3:return this.num.toString()+this.text;case 4:case 5:return this.num.toString();case 20:return"@"+this.text;case 7:return"#"+this.text;case 6:return this.text+"(";case 9:return"."+this.text;case 0:return"/*EOF*/";default:return this.text}}};function yt(e,t){let i=Array(128),r;for(r=0;r<128;r++)i[r]=e;for(i[NaN]=e==35?35:72,r=0;r<t.length;r+=2)i[t[r]]=t[r+1];return i}var Hi=[72,72,72,72,72,72,72,72,72,1,1,72,1,1,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,1,4,34,6,7,8,9,33,10,11,12,13,14,15,16,17,2,2,2,2,2,2,2,2,2,2,18,19,20,21,22,23,24,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,25,29,26,30,3,72,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,27,31,28,32,72];Hi[NaN]=80;var Ni=[43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,52,43,43,43,43,39,43,43,39,39,39,39,39,39,39,39,39,39,43,43,43,43,43,43,43,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,43,44,43,43,39,43,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,43,43,43,43,43];Ni[NaN]=43;var q1=[72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,78,59,72,59,59,59,59,59,59,59,59,59,59,72,72,72,72,72,72,72,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,72,61,72,72,78,72,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,72,72,72,72,72];Ni[NaN]=43;var lm=[35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,57,59,35,58,58,58,58,58,58,58,58,58,58,35,35,35,35,35,35,35,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,35,61,35,35,60,35,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,35,35,35,35,35];lm[NaN]=35;var dm=[45,45,45,45,45,45,45,45,45,73,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,73,45,45,45,45,45,45,45,53,45,45,45,45,45,45,45,39,39,39,39,39,39,39,39,39,39,45,45,45,45,45,45,45,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,45,44,45,45,39,45,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,45,45,45,45,45];dm[NaN]=45;var od=[37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,41,37,37,37,37,37,37,37,37,42,37,39,39,39,39,39,39,39,39,39,39,37,37,37,37,37,37,37,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,37,37,37,37,40,37,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,37,37,37,37,37];od[NaN]=37;var ld=[38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,41,38,38,38,38,38,38,38,38,38,38,39,39,39,39,39,39,39,39,39,39,38,38,38,38,38,38,38,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,38,38,38,38,40,38,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,38,38,38,38,38];ld[NaN]=38;var Ar=yt(35,[61,36]),V1=yt(35,[58,77]),H1=yt(35,[61,36,124,50]),U1=yt(35,[38,51]),G1=yt(35,[42,54]),$1=yt(39,[42,55]),Y1=yt(54,[42,55,47,56]),X1=yt(62,[62,82]),K1=yt(35,[61,36,33,70]),Z1=yt(62,[45,71]),Q1=yt(63,[45,81]),dd=yt(76,[10,72,13,72]),J1=yt(39,[39,46,10,72,13,72,92,48]),eP=yt(39,[34,46,10,72,13,72,92,49]),tP=yt(39,[39,47,10,74,13,74,92,48]),iP=yt(39,[34,47,10,74,13,74,92,49]),um=yt(64,[9,39,32,39,34,66,39,65,41,72,10,39,13,39]),rP=yt(39,[41,67,9,79,10,79,13,79,32,79,92,75,40,72,91,72,93,72,123,72,125,72,NaN,67]),nP=yt(39,[39,68,10,74,13,74,92,75,NaN,67]),sP=yt(39,[34,68,10,74,13,74,92,75,NaN,67]),aP=yt(72,[9,39,10,39,13,39,32,39,41,69]),oP=15,ki=class{constructor(e,t){this.input=e,this.handler=t,f(this,"indexMask"),f(this,"buffer"),f(this,"tail",0),f(this,"curr",0),f(this,"position",0),this.indexMask=oP,this.buffer=Array(this.indexMask+1);for(let i=0;i<=this.indexMask;i++)this.buffer[i]=new j1}token(){return this.tail==this.curr&&this.fillBuffer(),this.buffer[this.curr]}nthToken(e){return(this.tail-this.curr&this.indexMask)<=e&&this.fillBuffer(),this.buffer[this.curr+e&this.indexMask]}consume(){this.curr=this.curr+1&this.indexMask}fillBuffer(){let e=this.tail,t=this.curr,i=this.indexMask;if(e>=t?t+=i:t--,t==e)throw new Error("F_CSSTOK_INTERNAL");let r=Hi,s=this.input,o=this.position,u=this.buffer,c=0,m=0,p="",y=0,S=!1,v=u[e],w=-9;for(;;){let T=s.charCodeAt(o);switch(r[T]||r[65]){case 72:p=s.substring(m,o),isNaN(T)?c=0:c=54,r=Hi;break;case 1:o++,S=!0;continue;case 2:m=o++,r=od;continue;case 3:c=1,m=o++,r=Ni;continue;case 4:m=o++,c=31,r=Ar;continue;case 33:c=2,m=++o,r=J1;continue;case 34:c=2,m=++o,r=eP;continue;case 6:m=++o,c=7,r=Ni;continue;case 7:m=o++,c=32,r=Ar;continue;case 8:m=o++,c=21;break;case 9:m=o++,c=32,r=U1;continue;case 10:m=o++,c=10;break;case 11:m=o++,c=11;break;case 12:m=o++,c=36,r=Ar;continue;case 13:m=o++,c=23;break;case 14:m=o++,c=16;break;case 15:c=24,m=o++,r=lm;continue;case 16:m=o++,r=q1;continue;case 78:m=o++,c=9,r=Ni;continue;case 17:m=o++,c=19,r=G1;continue;case 18:m=o++,c=18,r=V1;continue;case 77:o++,c=50;break;case 19:m=o++,c=17;break;case 20:m=o++,c=38,r=K1;continue;case 21:m=o++,c=39,r=Ar;continue;case 22:m=o++,c=37,r=Ar;continue;case 23:m=o++,c=22;break;case 24:m=++o,c=20,r=Ni;continue;case 25:m=o++,c=14;break;case 26:m=o++,c=15;break;case 27:m=o++,c=12;break;case 28:m=o++,c=13;break;case 29:m=o++,w=m,c=1,r=dd;continue;case 30:m=o++,c=33,r=Ar;continue;case 31:m=o++,c=34,r=H1;continue;case 32:m=o++,c=35,r=Ar;continue;case 35:break;case 36:o++,c=c+41-31;break;case 37:c=5,y=parseInt(s.substring(m,o),10);break;case 38:c=4,y=parseFloat(s.substring(m,o));break;case 39:o++;continue;case 40:c=3,y=parseFloat(s.substring(m,o)),m=o++,r=Ni;continue;case 41:c=3,y=parseFloat(s.substring(m,o)),p="%",m=o++;break;case 42:o++,r=ld;continue;case 43:if(p=Pr(s.substring(m,o)),c===27&&T===63||c===1&&p.toLowerCase()==="u"&&/^(\bu\+[?0-9a-f]+(-[?0-9a-f]+)?|,|\s+|\/\*([^*]|\*[^/])*\*\/)+[;}]/i.test(s.substring(o-1))){c=27,o++;continue}break;case 44:w=o++,r=dd;continue;case 45:p=Pr(s.substring(m,o));break;case 46:p=s.substring(m,o),o++;break;case 47:p=Pr(s.substring(m,o)),o++;break;case 48:w=o,o+=2,r=tP;continue;case 49:w=o,o+=2,r=iP;continue;case 50:o++,c=25;break;case 51:o++,c=26;break;case 52:if(p=s.substring(m,o),c==1){if(o++,p.toLowerCase()=="url"){r=um;continue}c=6}break;case 53:if(p=Pr(s.substring(m,o)),c==1){if(o++,p.toLowerCase()=="url"){r=um;continue}c=6}break;case 54:r=$1,o++;continue;case 55:r=Y1,o++;continue;case 56:r=Hi,o++;continue;case 57:r=X1,o++,s[o]!==">"&&(c=1,r=Ni);continue;case 81:c=51,p=s.substring(m,++o),r=Hi;break;case 82:c=52,p=s.substring(m,++o),r=Hi;break;case 58:c=5,r=od,o++;continue;case 59:c=4,r=ld,o++;continue;case 60:c=1,r=Ni,o++;continue;case 61:c=1,r=dd,w=o++;continue;case 62:o--;break;case 63:o-=2;break;case 64:m=o++,r=rP;continue;case 65:m=++o,r=nP;continue;case 66:m=++o,r=sP;continue;case 67:c=8,p=Pr(s.substring(m,o)),o++;break;case 69:o++;break;case 70:r=Z1,o++;continue;case 71:r=Q1,o++;continue;case 79:if(o-w<8&&s.substring(w+1,o+1).match(/^[0-9a-fA-F]{0,6}(\r\n|[\n\r])|[ \t]$/)){o++;continue}case 68:c=8,p=Pr(s.substring(m,o)),o++,r=aP;continue;case 74:if(o++,o-w<9&&s.substring(w+1,o).match(/^[0-9a-fA-F]{0,6}(\r\n|[\n\r])$/))continue;c=54,p="E_CSS_UNEXPECTED_NEWLINE",r=Hi;break;case 73:if(o-w<9&&s.substring(w+1,o+1).match(/^[0-9a-fA-F]{0,6}[ \t]$/)){o++,r=Ni;continue}p=Pr(s.substring(m,o));break;case 75:w=o++;continue;case 76:o++,r=dm;continue;default:if(r!==Hi){c=54,p="E_CSS_UNEXPECTED_STATE";break}m=o,c=0}if(v.type=c,v.precededBySpace=S,v.num=y,v.text=p,v.position=m,e++,e>=t)break;r=Hi,S=!1,v=u[e&i]}this.position=o,this.tail=e&i}},ut=null,ud=null;function cd(){return ut}function Z(e){if(!ut)throw new Error("E_TASK_NO_CONTEXT");ut.name||(ut.name=e);let t=ut,i=new Ia(t,t.top,e);return t.top=i,i.state=1,i}function lP(e){return new cP(e||new uP)}function q(e){return new hd(e)}function Zr(e,t,i){let r=Z(e);r.handler=i;try{t(r)}catch(s){r.task.raise(s,r)}return r.result()}function dP(e,t){return(ut?ut.getScheduler():ud||lP()).run(e,t)}var uP=class{currentTime(){return new Date().valueOf()}setTimeout(e,t){return setTimeout(e,t)}clearTimeout(e){clearTimeout(e)}},cP=class{constructor(e){this.timer=e,f(this,"timeout",1),f(this,"slice",25),f(this,"sliceOverTime",0),f(this,"queue"),f(this,"wakeupTime",null),f(this,"timeoutToken",null),f(this,"inTimeSlice",!1),f(this,"order",0),this.queue=new HT,ud||(ud=this)}setSlice(e){this.slice=e}setTimeout(e){this.timeout=e}isTimeSliceOver(){return this.timer.currentTime()>=this.sliceOverTime}arm(){if(this.inTimeSlice)return;let e=this.queue.peek().scheduledTime,t=this.timer.currentTime();if(this.timeoutToken!=null){if(t+this.timeout>this.wakeupTime)return;this.timer.clearTimeout(this.timeoutToken)}let i=e-t;i<=this.timeout&&(i=this.timeout),this.wakeupTime=t+i,this.timeoutToken=this.timer.setTimeout(()=>{this.timeoutToken=null,this.doTimeSlice()},i)}schedule(e,t){let i=e,r=this.timer.currentTime();i.order=this.order++,i.scheduledTime=r+(t||0),this.queue.add(i),this.arm()}doTimeSlice(){this.timeoutToken!=null&&(this.timer.clearTimeout(this.timeoutToken),this.timeoutToken=null),this.inTimeSlice=!0;try{let e=this.timer.currentTime();for(this.sliceOverTime=e+this.slice;this.queue.length();){let t=this.queue.peek();if(t.scheduledTime>e||(this.queue.remove(),t.canceled||t.resumeInternal(),e=this.timer.currentTime(),e>=this.sliceOverTime))break}}catch(e){ee.error(e)}this.inTimeSlice=!1,this.queue.length()&&this.arm()}run(e,t){let i=new hP(this,t||"");i.top=new Ia(i,null,"bootstrap"),i.top.state=1,i.top.then(()=>{let s=()=>{i.running=!1;for(let o of i.callbacks)try{o()}catch(u){ee.error(u)}};try{e().then(o=>{i.result=o,s()})}catch(o){i.raise(o),s()}});let r=ut;return ut=i,this.schedule(i.top.suspend("bootstrap")),ut=r,i}},cm=class{constructor(e){this.task=e,f(this,"scheduledTime",0),f(this,"order",0),f(this,"result",null),f(this,"canceled",!1)}compare(e){let t=e;return t.scheduledTime-this.scheduledTime||t.order-this.order}getTask(){return this.task}schedule(e,t){this.result=e,this.task.scheduler.schedule(this,t)}resumeInternal(){let e=this.task;if(this.task=null,e&&e.continuation==this){e.continuation=null;let t=ut;return ut=e,e.top.finish(this.result),ut=t,!0}return!1}cancel(){this.canceled=!0}},hP=class{constructor(e,t){this.scheduler=e,this.name=t,f(this,"callbacks",[]),f(this,"exception",null),f(this,"running",!0),f(this,"result",null),f(this,"waitTarget",null),f(this,"top",null),f(this,"continuation",null)}getName(){return this.name}interrupt(e){if(this.raise(e||new Error("E_TASK_INTERRUPT")),this!==ut&&this.continuation){this.continuation.cancel();let t=new cm(this);this.waitTarget="interrupt",this.continuation=t,this.scheduler.schedule(t)}}getScheduler(){return this.scheduler}isRunning(){return this.running}whenDone(e){this.callbacks.push(e)}join(){let e=Z("Task.join");if(!this.running)e.finish(this.result);else{let t=e.suspend(this);this.whenDone(()=>{t.schedule(this.result)})}return e.result()}unwind(){for(;this.top&&!this.top.handler;)this.top=this.top.parent;if(this.top&&this.top.handler&&this.exception){let e=this.exception;this.exception=null,this.top.handler(this.top,e)}else this.exception&&ee.error(this.exception,"Unhandled exception in task",this.name)}raise(e,t){if(this.fillStack(e),t){let i=this.top;for(;i&&i!=t;)i=i.parent;i==t&&(this.top=i)}this.exception=e,this.unwind()}fillStack(e){let t=e.frameTrace;if(!t){t=e.stack?`${e.stack}
	---- async ---
`:"";for(let i=this.top;i;i=i.parent)t+="	",t+=i.getName(),t+=`
`;e.frameTrace=t}}},hd=class cT{constructor(t){this.value=t}then(t){t(this.value)}thenAsync(t){return t(this.value)}thenReturn(t){return new cT(t)}thenFinish(t){t.finish(this.value)}isPending(){return!1}get(){return this.value}},pP=class{constructor(e){this.frame=e}then(e){this.frame.then(e)}thenAsync(e){if(this.isPending()){let t=new Ia(this.frame.task,this.frame.parent,"AsyncResult.thenAsync");return t.state=1,this.frame.parent=t,this.frame.then(i=>{e(i).then(r=>{t.finish(r)})}),t.result()}else return e(this.frame.res)}thenReturn(e){return this.isPending()?this.thenAsync(()=>new hd(e)):new hd(e)}thenFinish(e){this.isPending()?this.then(t=>{e.finish(t)}):e.finish(this.frame.res)}isPending(){return this.frame.state==1}get(){if(this.isPending())throw new Error("Result is pending");return this.frame.res}},Ia=class{constructor(e,t,i){this.task=e,this.parent=t,this.name=i,f(this,"res",null),f(this,"state"),f(this,"callback",null),f(this,"handler",null),this.state=0}checkEnvironment(){if(!ut)throw new Error("F_TASK_NO_CONTEXT");if(this!==ut.top)throw new Error("F_TASK_NOT_TOP_FRAME")}result(){return new pP(this)}finish(e){this.checkEnvironment(),ut&&!ut.exception&&(this.res=e),this.state=2;let t=this.parent;if(ut&&(ut.top=t),this.callback){try{this.callback(e)}catch(i){this.task.raise(i,t)}this.state=3}}getTask(){return this.task}getName(){return this.name}getScheduler(){return this.task.scheduler}then(e){switch(this.state){case 1:if(this.callback)throw new Error("F_TASK_FRAME_ALREADY_HAS_CALLBACK");this.callback=e;break;case 2:{let t=this.task,i=this.parent;try{e(this.res),this.state=3}catch(r){this.state=3,t.raise(r,i)}break}case 3:throw new Error("F_TASK_DEAD_FRAME");default:throw new Error(`F_TASK_UNEXPECTED_FRAME_STATE ${this.state}`)}}timeSlice(){let e=Z("Frame.timeSlice");return e.getScheduler().isTimeSliceOver()?(ee.debug("-- time slice --"),e.suspend().schedule(!0)):e.finish(!0),e.result()}sleep(e){let t=Z("Frame.sleep");return t.suspend().schedule(!0,e),t.result()}loop(e){let t=Z("Frame.loop"),i=r=>{try{for(;r;){let s=e();if(s.isPending()){s.then(i);return}else s.then(o=>{r=o})}t.finish(!0)}catch(s){t.task.raise(s,t)}};return i(!0),t.result()}loopWithFrame(e){let t=ut;if(!t)throw new Error("E_TASK_NO_CONTEXT");return this.loop(()=>{let i;do{let r=new mP(t,t.top);t.top=r,r.state=1,e(r),i=r.result()}while(!i.isPending()&&i.get());return i})}suspend(e){if(this.checkEnvironment(),this.task.continuation)throw new Error("E_TASK_ALREADY_SUSPENDED");let t=new cm(this.task);return this.task.continuation=t,ut=null,this.task.waitTarget=e||null,t}},mP=class extends Ia{constructor(e,t){super(e,t,"loop")}continueLoop(){this.finish(!0)}breakLoop(){this.finish(!1)}},as=class{constructor(e,t){this.fetch=e,f(this,"name"),f(this,"arrived",!1),f(this,"resource",null),f(this,"task",null),f(this,"piggybacks",[]),this.name=t}start(){this.task||(this.task=cd().getScheduler().run(()=>{let e=Z("Fetcher.run");return this.fetch().then(t=>{let i=this.piggybacks;if(this.arrived=!0,this.resource=t,this.task=null,this.piggybacks=[],i)for(let r=0;r<i.length;r++)try{i[r](t)}catch(s){ee.error(s,"Error:")}e.finish(t)}),e.result()},this.name))}piggyback(e){this.arrived?e(this.resource):this.piggybacks.push(e)}get(){return this.arrived?q(this.resource):(this.start(),this.task.join())}hasArrived(){return this.arrived}},Oa=e=>{if(e.length==0)return q(!0);if(e.length==1)return e[0].get().thenReturn(!0);let t=Z("waitForFetches"),i=0;return t.loop(()=>{for(;i<e.length;){let r=e[i++];if(!r.hasArrived())return r.get().thenReturn(!0)}return q(!1)}).then(()=>{t.finish(!0)}),t.result()},hm=`
@media screen {
  [data-vivliostyle-viewer-viewport] {
    background: #aaaaaa;
  }

  [data-vivliostyle-page-container] {
    background: white;
    z-index: 0;
  }

  [data-vivliostyle-viewer-viewport] {
    box-sizing: border-box;
    display: flex;
    overflow: auto;
    position: relative;
  }

  [data-vivliostyle-outer-zoom-box] {
    margin: auto;
    overflow: hidden;
    flex: none;
  }

  [data-vivliostyle-viewer-viewport] [data-vivliostyle-spread-container] {
    display: flex;
    flex: none;
    justify-content: center;
    transform-origin: left top;
  }

  [data-vivliostyle-viewer-viewport][data-vivliostyle-page-progression="ltr"]
    [data-vivliostyle-spread-container] {
    flex-direction: row;
  }

  [data-vivliostyle-viewer-viewport][data-vivliostyle-page-progression="rtl"]
    [data-vivliostyle-spread-container] {
    flex-direction: row-reverse;
  }

  [data-vivliostyle-viewer-viewport] [data-vivliostyle-page-container] {
    margin: 0 auto;
    flex: none;
    transform-origin: center top;
  }

  [data-vivliostyle-viewer-viewport][data-vivliostyle-spread-view="true"]
    [data-vivliostyle-spread-container]
    [data-vivliostyle-page-container][data-vivliostyle-page-side="left"] {
    margin-right: 1px;
    transform-origin: right top;
  }

  [data-vivliostyle-viewer-viewport][data-vivliostyle-spread-view="true"]
    [data-vivliostyle-spread-container]
    [data-vivliostyle-page-container][data-vivliostyle-page-side="right"] {
    margin-left: 1px;
    transform-origin: left top;
  }

  [data-vivliostyle-viewer-viewport][data-vivliostyle-spread-view="true"]
    [data-vivliostyle-spread-container]
    [data-vivliostyle-page-container][data-vivliostyle-unpaired-page="true"] {
    margin-left: auto;
    margin-right: auto;
    transform-origin: center top;
  }
}
`,pm=`
[data-vivliostyle-layout-box] {
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  z-index: -1;
  transform-origin: left top;
}

[data-vivliostyle-debug] [data-vivliostyle-layout-box] {
  right: auto;
  bottom: auto;
  overflow: visible;
  z-index: auto;
}

[data-vivliostyle-spread-container] {
  transform: scale(var(--viv-outputScale,1));
  transform-origin: left top;
}

/* Emulate high pixel ratio using zoom & transform:scale() */
@supports (zoom: 8) {
  [data-vivliostyle-layout-box] {
    zoom: calc(var(--viv-outputPixelRatio,1) / var(--viv-devicePixelRatio,1));
    transform: scale(calc(var(--viv-devicePixelRatio,1) / var(--viv-outputPixelRatio,1)));
  }
  [data-vivliostyle-spread-container] {
    zoom: calc(var(--viv-outputPixelRatio,1) / var(--viv-devicePixelRatio,1));
    transform: scale(calc(var(--viv-outputScale,1) * var(--viv-devicePixelRatio,1) / var(--viv-outputPixelRatio,1)));
  }
  /* Workaround for Chromium's default border etc. widths not zoomed but scaled down */
  [data-vivliostyle-spread-container] :where([style*=border],[style*=outline],[style*=rule]) {
    border-width: medium;
    outline-width: medium;
    column-rule-width: medium;
  }
  [data-vivliostyle-spread-container] ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }
  [data-vivliostyle-spread-container] ::-webkit-scrollbar-track {
    background-color: #f4f4f4;
  }
  [data-vivliostyle-spread-container] ::-webkit-scrollbar-thumb {
    border-radius: 4px;
    background: #c7c7c7;
  }
  [data-vivliostyle-spread-container] ::-webkit-scrollbar-thumb:hover {
    background: #7d7d7d;
  }
}

[data-vivliostyle-page-container] {
  position: relative;
}

[data-vivliostyle-bleed-box] {
  position: relative;
  overflow: hidden;
  background-origin: content-box !important;
}

[data-vivliostyle-page-box] ~ [data-vivliostyle-page-box] {
  display: none;
}

[data-vivliostyle-toc-box] {
  position: absolute;
  left: 3px;
  top: 3px;
  overflow: scroll;
  overflow-x: hidden;
  background: rgba(248, 248, 248, 0.9);
  border-radius: 2px;
  box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.4);
}

@media print {
  [data-vivliostyle-toc-box] {
    display: none;
  }

  [data-vivliostyle-outer-zoom-box],
  [data-vivliostyle-spread-container] {
    width: 100% !important;
    height: 100% !important;
  }

  [data-vivliostyle-spread-container] {
    --viv-outputScale: 1 !important;
    --viv-devicePixelRatio: 1 !important;
    zoom: normal !important;
    transform: none !important;
    print-color-adjust: exact;
  }

  @supports (zoom: 8) {
    [data-vivliostyle-spread-container] [data-vivliostyle-page-container] {
      zoom: var(--viv-outputPixelRatio,1);
      /* transform: scale(calc(1 / var(--viv-outputPixelRatio,1))); */
      /* Use matrix instead of scale (Workaround for issue #1555) */
      transform: matrix(calc(1 / var(--viv-outputPixelRatio,1)), 0, 5e-324, calc(1 / var(--viv-outputPixelRatio,1)), 0, 0);
      transform-origin: left top;
    }
  }

  [data-vivliostyle-spread-container] [data-vivliostyle-page-container] {
    display: block !important;
    max-height: 100vh;
  }

  [data-vivliostyle-spread-container] [data-vivliostyle-page-container]:not(:last-child) {
    break-after: page;
  }

  /* Gecko-only hack, see https://bugzilla.mozilla.org/show_bug.cgi?id=267029#c17 */
  @-moz-document url-prefix()  {
    [data-vivliostyle-spread-container] [data-vivliostyle-page-container]:nth-last-child(n + 2) {
      top: -1px;
      margin-top: 1px;
      margin-bottom: -1px;
    }
    /* Workaround Gecko problem on page break */
    [data-vivliostyle-spread-container] [data-vivliostyle-page-container] {
      break-after: auto !important;
      height: 100% !important;
    }
  }
}
`,mm=`
/*
 * Copyright 2013 Google, Inc.
 * Copyright 2015 Daishinsha Inc.
 * Copyright 2019 Vivliostyle Foundation
 *
 * CSS property validation.
 */
NUM = POS_NUM | ZERO | NEGATIVE;
NNEG_NUM = POS_NUM | ZERO;
INT = POS_INT | ZERO | NEGATIVE;
NNEG_INT = POS_INT | ZERO;
PERCENTAGE = POS_PERCENTAGE | ZERO | NEGATIVE;
STRICT_PERCENTAGE = POS_PERCENTAGE | ZERO_PERCENTAGE | NEGATIVE;
NNEG_PERCENTAGE = POS_PERCENTAGE | ZERO;
LENGTH = POS_LENGTH | ZERO | NEGATIVE;
NNEG_LENGTH = POS_LENGTH | ZERO;
PLENGTH = LENGTH | PERCENTAGE;
PPLENGTH = POS_LENGTH | ZERO | POS_PERCENTAGE;
ALENGTH = LENGTH | auto;
APLENGTH = PLENGTH | auto;
PAPLENGTH = PPLENGTH | auto;
ANGLE = POS_ANGLE | ZERO | NEGATIVE;
LENGTH_OR_NUM = LENGTH | NUM;
ANGLE_OR_NUM = ANGLE | NUM;
MIN_MAX_FIT_CONTENT = min-content | max-content | fit-content;
BG_POSITION_TERM = PLENGTH | left | center | right | top | bottom;
URI_OR_NONE = URI | none;
IMAGE = URI | IMAGE_FUNCTION | none;
background-attachment = COMMA( [scroll | fixed | local]+ );
background-color = COLOR;
background-image = COMMA( IMAGE+ );
background-position = COMMA( SPACE(BG_POSITION_TERM{1,4})+ ); /* relaxed */
background-repeat = COMMA( [repeat | repeat-x | repeat-y | no-repeat]+ );
border-collapse = collapse | separate;
BORDER_SIDE_COLOR = COLOR;
BORDER_SIDE_STYLE = none | hidden | dotted | dashed | solid | double | groove | ridge | inset | outset;
BORDER_SIDE_WIDTH = thin: 1px | medium: 3px | thick: 5px | NNEG_LENGTH;
border-spacing = LENGTH LENGTH?;
border-top-color = BORDER_SIDE_COLOR;
border-right-color = BORDER_SIDE_COLOR;
border-bottom-color = BORDER_SIDE_COLOR;
border-left-color = BORDER_SIDE_COLOR;
border-top-style = BORDER_SIDE_STYLE;
border-right-style = BORDER_SIDE_STYLE;
border-bottom-style = BORDER_SIDE_STYLE;
border-left-style = BORDER_SIDE_STYLE;
border-top-width = BORDER_SIDE_WIDTH;
border-right-width = BORDER_SIDE_WIDTH;
border-bottom-width = BORDER_SIDE_WIDTH;
border-left-width = BORDER_SIDE_WIDTH;
BORDER_RADIUS = PLENGTH{1,2};
border-top-left-radius = BORDER_RADIUS;
border-top-right-radius = BORDER_RADIUS;
border-bottom-right-radius = BORDER_RADIUS;
border-bottom-left-radius = BORDER_RADIUS;
border-image-source = IMAGE;
border-image-slice = [NUM | PERCENTAGE]{1,4} || fill; /* relaxed */
border-image-width = [NUM | PLENGTH | auto]{1,4};
border-image-outset = [NUM | LENGTH]{1,4};
border-image-repeat = [ stretch | repeat | round | space ]{1,2};
bottom = APLENGTH;
caption-side = top | bottom;
clip = rect(ALENGTH{4}) | rect(SPACE(ALENGTH{4})) | auto;
color = COLOR;
LIST_STYLE_TYPE = IDENT;
TYPE_OR_UNIT_IN_ATTR = string | color | url | integer | number | length | angle | time | frequency;
ATTR = attr(SPACE(IDENT TYPE_OR_UNIT_IN_ATTR?) [ STRING | IDENT | COLOR | INT | NUM | PLENGTH | ANGLE | POS_TIME | FREQUENCY]?);
CONTENT_LIST = [ STRING | URI | counter(IDENT LIST_STYLE_TYPE?) |
    counters(IDENT STRING LIST_STYLE_TYPE?) | ATTR |
    target-counter([ STRING | URI ] IDENT LIST_STYLE_TYPE?) |
    target-counter(ATTR IDENT LIST_STYLE_TYPE?) |
    target-counters([ STRING | URI ] IDENT STRING LIST_STYLE_TYPE?) |
    target-counters(ATTR IDENT STRING LIST_STYLE_TYPE?) |
    target-text([ STRING | URI ] [content | before | after | first-letter]?) |
    target-text(ATTR [content | before | after | first-letter]?) |
    leader([ dotted | solid | space ] | STRING ) |
    open-quote | close-quote | no-open-quote | no-close-quote |
    content([ text | before | after | first-letter ]?) |
    string(IDENT [first | start | last | first-except]?) |
    element(IDENT [first | start | last | first-except]?) ]+;
CONTENT = normal | none | CONTENT_LIST;
content = CONTENT;
COUNTER = [ IDENT INT? ]+ | none;
counter-increment = COUNTER;
counter-reset = COUNTER;
counter-set = COUNTER;
cursor = COMMA(URI* [ auto | crosshair | default | pointer | move | e-resize | ne-resize | nw-resize |
    n-resize | se-resize | sw-resize | s-resize | w-resize | text | wait | help | progress ]);
direction = ltr | rtl;
display = inline | block | list-item | inline-block | table | inline-table | table-row-group |
    table-header-group | table-footer-group | table-row | table-column-group | table-column |
    table-cell | table-caption | none | oeb-page-head | oeb-page-foot | flex | inline-flex |
    ruby | ruby-base | ruby-text | ruby-base-container | ruby-text-container | run-in | compact | marker |
    flow-root | grid | inline-grid | contents;
empty-cells = show | hide;
FAMILY = SPACE(IDENT+) | STRING;
FAMILY_LIST = COMMA( FAMILY+ );
font-family = FAMILY_LIST;
font-size = xx-small | x-small | small | medium | large | x-large | xx-large | larger | smaller | PPLENGTH;
font-style = normal | italic | oblique;
font-weight = normal | bold | bolder | lighter | POS_NUM;
height = PAPLENGTH | MIN_MAX_FIT_CONTENT;
left = APLENGTH;
letter-spacing = normal | LENGTH_OR_NUM;
line-height = normal | POS_NUM | PPLENGTH;
list-style-image = IMAGE;
list-style-position = inside | outside;
list-style-type = LIST_STYLE_TYPE;
margin-right = APLENGTH;
margin-left = APLENGTH;
margin-top = APLENGTH;
margin-bottom = APLENGTH;
NPLENGTH = none | PLENGTH;
max-height = NPLENGTH | MIN_MAX_FIT_CONTENT;
max-width = NPLENGTH | MIN_MAX_FIT_CONTENT;
min-height = APLENGTH | MIN_MAX_FIT_CONTENT;
min-width = APLENGTH | MIN_MAX_FIT_CONTENT;
orphans = POS_INT;
outline-offset = LENGTH;
outline-color = COLOR | invert;
outline-style = BORDER_SIDE_STYLE;
outline-width = BORDER_SIDE_WIDTH;
overflow = visible | hidden | scroll | auto | clip;
padding-right = PPLENGTH;
padding-left = PPLENGTH;
padding-top = PPLENGTH;
padding-bottom = PPLENGTH;
PAGE_BREAK = auto | always | avoid | left | right | recto | verso;
page-break-after = PAGE_BREAK;
page-break-before = PAGE_BREAK;
page-break-inside = avoid | auto;
position = static | relative | absolute | fixed | running(IDENT);
quotes = [STRING STRING]+ | none | auto;
right = APLENGTH;
table-layout = auto | fixed;
text-align = left | right | center | justify | start | end | match-parent | inside | outside;
text-indent = PLENGTH;
text-transform = capitalize | uppercase | lowercase | none;
top = APLENGTH;
vertical-align = baseline | sub | super | top | text-top | middle | bottom | text-bottom | PLENGTH;
visibility = visible | hidden | collapse;
white-space = normal | pre | nowrap | pre-wrap | pre-line | break-spaces;
widows = POS_INT;
width = PAPLENGTH | MIN_MAX_FIT_CONTENT;
word-spacing = normal | LENGTH_OR_NUM;
z-index = auto | INT;

[epub,moz,webkit]hyphens = auto | manual | none;
[webkit]hyphenate-character = auto | STRING;

/* css-logical */
margin-block-start = APLENGTH;
margin-block-end = APLENGTH;
margin-inline-start = APLENGTH;
margin-inline-end = APLENGTH;
padding-block-start = APLENGTH;
padding-block-end = APLENGTH;
padding-inline-start = APLENGTH;
padding-inline-end = APLENGTH;
border-block-start-color = BORDER_SIDE_COLOR;
border-block-end-color = BORDER_SIDE_COLOR;
border-inline-start-color = BORDER_SIDE_COLOR;
border-inline-end-color = BORDER_SIDE_COLOR;
border-block-start-style = BORDER_SIDE_STYLE;
border-block-end-style = BORDER_SIDE_STYLE;
border-inline-start-style = BORDER_SIDE_STYLE;
border-inline-end-style = BORDER_SIDE_STYLE;
border-block-start-width = BORDER_SIDE_WIDTH;
border-block-end-width = BORDER_SIDE_WIDTH;
border-inline-start-width = BORDER_SIDE_WIDTH;
border-inline-end-width = BORDER_SIDE_WIDTH;
block-start = APLENGTH;
block-end = APLENGTH;
inline-start = APLENGTH;
inline-end = APLENGTH;
block-size = PAPLENGTH | MIN_MAX_FIT_CONTENT;
inline-size = PAPLENGTH | MIN_MAX_FIT_CONTENT;
max-block-size = NPLENGTH | MIN_MAX_FIT_CONTENT;
max-inline-size = NPLENGTH | MIN_MAX_FIT_CONTENT;
min-block-size = APLENGTH | MIN_MAX_FIT_CONTENT;
min-inline-size = APLENGTH | MIN_MAX_FIT_CONTENT;

margin-inside = auto | APLENGTH;
margin-outside = auto | APLENGTH;
padding-inside = PPLENGTH;
padding-outside = PPLENGTH;
border-inside-color = BORDER_SIDE_COLOR;
border-outside-color = BORDER_SIDE_COLOR;
border-inside-style = BORDER_SIDE_STYLE;
border-outside-style = BORDER_SIDE_STYLE;
border-inside-width = BORDER_SIDE_WIDTH;
border-outside-width = BORDER_SIDE_WIDTH;
inside = APLENGTH;
outside = APLENGTH;

SHAPE = auto | rectangle( PLENGTH{4} ) |  ellipse( PLENGTH{4} ) |  circle( PLENGTH{3} ) |
    polygon( SPACE(PLENGTH+)+ );
[epubx]shape-inside = SHAPE;
[epubx,webkit]shape-outside = SHAPE;
[epubx]wrap-flow = auto | both | start | end | maximum | clear | around /* epub al */;

TRANSFORM_FUNCTION = matrix(NUM{6}) | translate(PLENGTH{1,2}) | translateX(PLENGTH) | translateY(PLENGTH) |
 scale(NUM{1,2}) | scaleX(NUM) | scaleY(NUM) | rotate(ANGLE) | skewX(ANGLE) | skewY(ANGLE);
[epub]transform = none | TRANSFORM_FUNCTION+;
[epub]transform-origin = [[[ top | bottom | left | right] PLENGTH?] | center | PLENGTH]{1,2}; /* relaxed */

BOX = border-box | padding-box | content-box;
SHADOW = SPACE(inset || LENGTH{2,4} || COLOR); /* relaxed */
[webkit]background-size = COMMA( SPACE( [PLENGTH | auto ]{1,2} | cover | contain)+ );
[webkit]background-origin = COMMA( BOX+ );
[webkit]background-clip = COMMA( BOX+ );
[webkit]box-shadow = none | COMMA( SHADOW+ );
text-shadow = none |  COMMA( SHADOW+ );
[webkit]box-decoration-break = slice | clone;
FILTER_FUNCTION = blur(LENGTH) | brightness(NUM | PERCENTAGE) | contrast(NUM | PERCENTAGE) | drop-shadow(SPACE(LENGTH{2,3} COLOR?))
                | grayscale(NUM | PERCENTAGE) | hue-rotate(ANGLE) | invert(NUM | PERCENTAGE) | opacity(NUM | PERCENTAGE)
                | saturate(NUM | PERCENTAGE) | sepia(NUM | PERCENTAGE);
FILTER_FUNCTION_LIST = FILTER_FUNCTION+;
[webkit]filter = none | FILTER_FUNCTION_LIST;

opacity = NUM;

[moz,webkit]column-width = LENGTH | auto;
[moz,webkit]column-count = INT | auto;
[moz,webkit]column-gap = LENGTH | normal;
[moz,webkit]column-rule-color = COLOR;
[moz,webkit]column-rule-style = BORDER_SIDE_STYLE;
[moz,webkit]column-rule-width = BORDER_SIDE_WIDTH;
BREAK = auto | avoid | avoid-page | page | left | right | recto | verso | avoid-column | column | avoid-region | region;
break-before = BREAK;
break-after = BREAK;
break-inside = auto | avoid | avoid-page | avoid-column | avoid-region;
[webkit]column-span = none | auto | all;
[moz]column-fill = auto | balance | balance-all;
margin-break = auto | keep | discard;

src = COMMA([SPACE(URI format(STRING+)?) | local(FAMILY)]+); /* for font-face */

[epubx,webkit]flow-from = IDENT;
[epubx,webkit]flow-into = IDENT;
[epubx]flow-linger = INT | none;
[epubx]flow-priority = INT;
[epubx]flow-options = none | [ exclusive || last || static ];
[epubx]page = INT | auto | IDENT; /* page: IDENT is for CSS Paged Media */
[epubx]min-page-width = LENGTH;
[epubx]min-page-height = LENGTH;
[epubx]required = true | false;
[epubx]enabled = true | false;
[epubx]conflicting-partitions = COMMA(IDENT+);
[epubx]required-partitions = COMMA(IDENT+);
[epubx]snap-height = LENGTH | none;
[epubx]snap-width = LENGTH | none;
[epubx]flow-consume = all | some;
[epubx]utilization = NUM;
[epubx]text-zoom = font-size | scale;

[adapt]template = URI_OR_NONE | footnote;
[adapt]behavior = IDENT;

/* CSS Fonts */
COMMON_LIG_VALUES        = [ common-ligatures | no-common-ligatures ];
DISCRETIONARY_LIG_VALUES = [ discretionary-ligatures | no-discretionary-ligatures ];
HISTORICAL_LIG_VALUES    = [ historical-ligatures | no-historical-ligatures ];
CONTEXTUAL_ALT_VALUES    = [ contextual | no-contextual ];
font-variant-ligatures = normal | none | [ COMMON_LIG_VALUES || DISCRETIONARY_LIG_VALUES || HISTORICAL_LIG_VALUES || CONTEXTUAL_ALT_VALUES ];
font-variant-caps = normal | small-caps | all-small-caps | petite-caps | all-petite-caps | unicase | titling-caps;
NUMERIC_FIGURE_VALUES   = [ lining-nums | oldstyle-nums ];
NUMERIC_SPACING_VALUES  = [ proportional-nums | tabular-nums ];
NUMERIC_FRACTION_VALUES = [ diagonal-fractions | stacked-fractions ];
font-variant-numeric = normal | [ NUMERIC_FIGURE_VALUES || NUMERIC_SPACING_VALUES || NUMERIC_FRACTION_VALUES || ordinal || slashed-zero ];
EAST_ASIAN_VARIANT_VALUES = [ jis78 | jis83 | jis90 | jis04 | simplified | traditional ];
EAST_ASIAN_WIDTH_VALUES   = [ full-width | proportional-width ];
font-variant-east-asian = normal | [ EAST_ASIAN_VARIANT_VALUES || EAST_ASIAN_WIDTH_VALUES || ruby ];
font-variant_css2 = normal | small-caps; /* for font shorthand */
font-size-adjust = none | NNEG_NUM;
[webkit]font-kerning = auto | normal | none;
font-feature-settings = COMMA( normal | SPACE( STRING [ on | off | INT ]? )+ );
FONT_STRETCH_CSS3_VALUES = normal | wider | narrower | ultra-condensed | extra-condensed | condensed | semi-condensed | semi-expanded | expanded | extra-expanded | ultra-expanded;
font-stretch = FONT_STRETCH_CSS3_VALUES | PERCENTAGE;
font-stretch_css3 = FONT_STRETCH_CSS3_VALUES; /* for font shorthand */
font-display = [ auto | block | swap | fallback | optional ];
unicode-range = COMMA( URANGE+ );

/* CSS Images */
image-resolution = RESOLUTION;
object-fit = fill | contain | cover | none | scale-down;
object-position = COMMA( SPACE(BG_POSITION_TERM{1,4})+ ); /* relaxed */

/* CSS Paged Media */
PAGE_SIZE = a10 | a9 | a8 | a7 | a6 | a5 | a4 | a3 | a2 | a1 | a0
          | b10 | b9 | b8 | b7 | b6 | b5 | b4 | b3 | b2 | b1 | b0
          | c10 | c9 | c8 | c7 | c6 | c5 | c4 | c3 | c2 | c1 | c0
          | jis-b10 | jis-b9 | jis-b8 | jis-b7 | jis-b6 | jis-b5 | jis-b4 | jis-b3 | jis-b2 | jis-b1 | jis-b0
          | letter | legal | ledger;
bleed = auto | LENGTH;
marks = none | [ crop || cross ];
size = POS_LENGTH{1,2} | auto | [ PAGE_SIZE || [ portrait | landscape ] ];
crop-offset = auto | LENGTH;
crop-marks-line-color = auto | COLOR;

/* CSS Page Floats */
clear = none | left | right | top | bottom | inline-start | inline-end | block-start | block-end | inside | outside | both | all | same | column | region | page;
float-reference = inline | column | region | page;
float = none | footnote | [ block-start || block-end || inline-start || inline-end || snap-block || snap-inline || left || right || top || bottom || inside || outside ];
float-min-wrap-block = PPLENGTH;

/* CSS Ruby */
ruby-align = start | center | space-between | space-around;
ruby-position = over | under | inter-character;

/* CSS Size Adjust */
[moz,webkit]text-size-adjust = auto | none | POS_PERCENTAGE;

/* CSS Text */
[webkit]line-break = auto | loose | normal | strict | anywhere;
overflow-wrap = normal | break-word | anywhere;
[moz]tab-size = NNEG_INT | NNEG_LENGTH;
[moz]text-align-last = auto | start | end | left | right | center | justify | inside | outside;
text-justify = auto | none | inter-word | inter-character;
word-break = normal | keep-all | break-all | break-word;
text-spacing-trim = auto | normal | space-all | trim-both | trim-auto |
    [[ trim-start | space-start | space-first ] ||
     [ trim-end | space-end | allow-end ] ||
     [ trim-adjacent | space-adjacent ]];
text-autospace = normal | auto | no-autospace |
    [[ ideograph-alpha || ideograph-numeric || punctuation ] || [ insert | replace ]];
hanging-punctuation = none | [ first || [ force-end | allow-end ] || last ];

/* CSS Text Decoration */
[webkit]text-decoration-color = COLOR;
[webkit]text-decoration-line = none | [ underline || overline || line-through || blink ];
[webkit]text-decoration-skip = none | [ objects || spaces || ink || edges || box-decoration ];
[webkit]text-decoration-style = solid | double | dotted | dashed | wavy;
[webkit]text-decoration-thickness = from-font | APLENGTH;
[epub,webkit]text-emphasis-color = COLOR;
[webkit]text-emphasis-position = [ over | under ] [ right | left ];
[epub,webkit]text-emphasis-style = none | [[ filled | open ] || [ dot | circle | double-circle | triangle | sesame ]] | STRING;
[webkit]text-underline-position = auto | [ under || [ left | right ]];

/* CSS Transforms */
[webkit]backface-visibility = visible | hidden;

/* CSS UI */
[moz,webkit]box-sizing = content-box | padding-box | border-box;
text-overflow = [clip | ellipsis | STRING]{1,2};

/* CSS Writing Modes */
[epub,webkit]text-combine = none | horizontal;
text-combine-upright = none | all; /* relaxed */
[epub,webkit]text-orientation = mixed | upright | sideways-right | sideways-left | sideways | use-glyph-orientation /* the following values are kept for backward-compatibility */ | vertical-right | rotate-right | rotate-left | rotate-normal | auto;
unicode-bidi = normal | embed | isolate | bidi-override | isolate-override | plaintext;
[epub,webkit]writing-mode = horizontal-tb | vertical-rl | lr-tb | rl-tb | tb-rl | lr | rl | tb;

/* CSS Flex box */
FLEX_BASIS = content | PAPLENGTH;
flex-direction = row | row-reverse | column | column-reverse;
flex-wrap = nowrap | wrap | wrap-reverse;
order = INT;
flex-grow = NNEG_NUM;
flex-shrink = NNEG_NUM;
flex-basis = FLEX_BASIS;
flex = none | [ [ NNEG_NUM NNEG_NUM? ] || FLEX_BASIS ];
justify-content = flex-start | flex-end | center | space-between | space-around;
align-items = flex-start | flex-end | center | baseline | stretch;
align-self = auto | flex-start | flex-end | center | baseline | stretch;
align-content = flex-start | flex-end | center | space-between | space-around | stretch;

/* Pointer Events */
touch-action = auto | none | [ pan-x || pan-y ] | manipulation;

/* SVG 2 */
OPACITY_VALUE = NUM | PERCENTAGE;
DASH_ARRAY = COMMA( SPACE( [ LENGTH | PERCENTAGE | NUM ]+ )+ );
PAINT = none | child | child(INT) | COLOR | SPACE( URI [none | COLOR]? ) | context-fill | context-stroke;
color-interpolation = auto | sRGB | linearRGB;
color-rendering = auto | optimizeSpeed | optimizeQuality;
fill = PAINT;
fill-opacity = OPACITY_VALUE;
fill-rule = nonzero | evenodd;
glyph-orientation-vertical = auto | NUM | ANGLE;
image-rendering = auto | optimizeSpeed | optimizeQuality | crisp-edges | pixelated;
marker-start = none | URI;
marker-mid = none | URI;
marker-end = none | URI;
pointer-events = bounding-box | visiblePainted | visibleFill | visibleStroke | visible | painted | fill | stroke | all | none;
paint-order = normal | [ fill || stroke || markers ];
shape-rendering = auto | optimizeSpeed | crispEdges | geometricPrecision;
stop-color = COLOR;
stop-opacity = OPACITY_VALUE;
stroke = PAINT;
stroke-dasharray = none | DASH_ARRAY;
stroke-dashoffset = PERCENTAGE | LENGTH_OR_NUM;
stroke-linecap = butt | round | square;
stroke-linejoin = miter | round | bevel;
stroke-miterlimit = NUM;
stroke-opacity = OPACITY_VALUE;
stroke-width = PERCENTAGE | LENGTH_OR_NUM;
text-anchor = start | middle | end;
text-rendering = auto | optimizeSpeed | optimizeLegibility | geometricPrecision;
vector-effect = none | SPACE( [ non-scaling-stroke | non-scaling-size | non-rotation | fixed-position ]+ [ viewport | screen ]? );

/* SVG 1.1 */
alignment-baseline = auto | baseline | before-edge | text-before-edge | middle | central | after-edge | text-after-edge | ideographic | alphabetic | hanging | mathematical;
baseline-shift = baseline | sub | super | PERCENTAGE | LENGTH_OR_NUM;
dominant-baseline = auto | use-script | no-change | reset-size | ideographic | alphabetic | hanging | mathematical | central | middle | text-after-edge | text-before-edge;
mask = none | URI;

/* css-masking-1 */
SHAPE_RADIUS = PLENGTH | closest-side | farthest-side;
FILL_RULE = nonzero | evenodd;
SHAPE_BOX = BOX | margin-box;
GEOMETRY_BOX = SHAPE_BOX | fill-box | stroke-box | view-box;
BASIC_SHAPE =
    inset( SPACE( PLENGTH{1,4} [ round PLENGTH{1,4} [ SLASH PLENGTH{1,4} ]? ]? ) )
  | circle(  SPACE( [SHAPE_RADIUS]?    [at BG_POSITION_TERM{1,4}]? ) )
  | ellipse( SPACE( SHAPE_RADIUS{2}? [at BG_POSITION_TERM{1,4}]? ) )
  | polygon( FILL_RULE? COMMA( SPACE( PLENGTH{2} )+ )+ );
[webkit]clip-path = none | URI | [ BASIC_SHAPE || GEOMETRY_BOX ];
clip-rule = nonzero | evenodd;

/* filters */
flood-color = COLOR;
flood-opacity = OPACITY_VALUE;
lighting-color = COLOR;

/* compositing-1 */
BLEND_MODE = normal | multiply | screen | overlay | darken | lighten | color-dodge | color-burn | hard-light | soft-light | difference | exclusion | hue | saturation | color | luminosity;
mix-blend-mode = BLEND_MODE;
isolation = auto | isolate;
background-blend-mode = COMMA( BLEND_MODE+ );

/* CSS GCPM */
string-set = COMMA( SPACE( IDENT CONTENT_LIST )+ | none );
footnote-policy = auto | line;

/* CSS Repeated Headers and Footers */
[viv]repeat-on-break = auto | none | header | footer;

/* Compatibility */
[webkit]text-fill-color = COLOR;
[webkit]text-stroke-color = COLOR;
[webkit]text-stroke-width = BORDER_SIDE_WIDTH;

DEFAULTS

background-attachment: scroll;
background-color: transparent;
background-image: none;
background-repeat: repeat;
background-position: 0% 0%;
background-clip: border-box;
background-origin: padding-box;
background-size: auto;
border-top-color: currentColor;
border-right-color: currentColor;
border-bottom-color: currentColor;
border-left-color: currentColor;
border-top-style: none;
border-right-style: none;
border-bottom-style: none;
border-left-style: none;
border-top-width: 3px;
border-right-width: 3px;
border-bottom-width: 3px;
border-left-width: 3px;
border-top-left-radius: 0;
border-top-right-radius: 0;
border-bottom-right-radius: 0;
border-bottom-left-radius: 0;
border-image-source: none;
border-image-slice: 100%;
border-image-width: 1;
border-image-outset: 0;
border-image-repeat: stretch;
column-count: auto;
column-gap: normal;
column-width: auto;
column-rule-color: currentColor;
column-rule-style: none;
column-rule-width: 3px;
column-fill: balance;
outline-color: currentColor;
outline-style: none;
outline-width: 3px;
flex-direction: row;
flex-wrap: nowrap;
font-family: serif;
font-style: normal;
font-size: medium;
font-size-adjust: none;
font-kerning: auto;
font-feature-settings: normal;
font-variant-ligatures: normal;
font-variant-caps: normal;
font-variant-numeric: normal;
font-variant-east-asian: normal;
font-weight: normal;
font-stretch: normal;
line-height: normal;
list-style-image: none;
list-style-position: outside;
list-style-type: disc;
margin-bottom: auto;
margin-left: auto;
margin-right: auto;
margin-top: auto;
padding-bottom: auto;
padding-left: auto;
padding-right: auto;
padding-top: auto;
text-autospace: normal;
text-emphasis-color: currentColor;
text-emphasis-style: none;
text-spacing-trim: normal;
text-stroke-color: currentColor;
text-stroke-width: 0;
marker-start: none;
marker-mid: none;
marker-end: none;

/* css-logical */
border-block-start-color: currentColor;
border-block-end-color: currentColor;
border-inline-start-color: currentColor;
border-inline-end-color: currentColor;
border-inside-color: currentColor;
border-outside-color: currentColor;
border-block-start-style: none;
border-block-end-style: none;
border-inline-start-style: none;
border-inline-end-style: none;
border-inside-style: none;
border-outside-style: none;
border-block-start-width: 3px;
border-block-end-width: 3px;
border-inline-start-width: 3px;
border-inline-end-width: 3px;
border-inside-width: 3px;
border-outside-width: 3px;

SHORTHANDS

all = ALL;
background = COMMA background-image [background-position [ / background-size ]] background-repeat
     background-attachment [background-origin background-clip] background-color; /* background-color is a special case, see the code */
border-top = border-top-width border-top-style border-top-color;
border-right = border-right-width border-right-style border-right-color;
border-bottom = border-bottom-width border-bottom-style border-bottom-color;
border-left = border-left-width border-left-style border-left-color;
border-inside = border-inside-width border-inside-style border-inside-color;
border-outside = border-outside-width border-outside-style border-outside-color;
border-width = INSETS border-top-width border-right-width border-bottom-width border-left-width;
border-style = INSETS border-top-style border-right-style border-bottom-style border-left-style;
border-color = INSETS border-top-color border-right-color border-bottom-color border-left-color;
border = border-width border-style border-color;
border-image = border-image-source border-image-slice [ / border-image-width [ / border-image-outset ] ]
     border-image-repeat;
border-radius = INSETS_SLASH border-top-left-radius border-top-right-radius
     border-bottom-right-radius border-bottom-left-radius;
[moz,webkit]columns = column-width column-count;
[moz,webkit]column-rule = column-rule-width column-rule-style column-rule-color;
flex-flow = flex-direction flex-wrap;
oeb-column-number = column-count;
outline = outline-width outline-style outline-color;
list-style = list-style-position list-style-type list-style-image;
margin = INSETS margin-top margin-right margin-bottom margin-left;
padding = INSETS padding-top padding-right padding-bottom padding-left;
font = FONT font-style font-variant_css2 font-weight font-stretch_css3 /* font-size line-height font-family are special-cased */;
font-variant = font-variant-ligatures font-variant-caps font-variant-numeric font-variant-east-asian;
[epub,webkit]text-emphasis = text-emphasis-style text-emphasis-color;
marker = INSETS marker-start marker-mid marker-end;
[webkit]text-stroke = text-stroke-width text-stroke-color;
text-decoration = text-decoration-line text-decoration-color text-decoration-style text-decoration-thickness;
text-spacing = TEXT_SPACING text-autospace text-spacing-trim;

/* css-logical */
margin-block = INSETS margin-block-start margin-block-end;
margin-inline = INSETS margin-inline-start margin-inline-end;
padding-block = INSETS padding-block-start padding-block-end;
padding-inline = INSETS padding-inline-start padding-inline-end;
border-block-width = INSETS border-block-start-width border-block-end-width;
border-block-style = INSETS border-block-start-style border-block-end-style;
border-block-color = INSETS border-block-start-color border-block-end-color;
border-inline-width = INSETS border-inline-start-width border-inline-end-width;
border-inline-style = INSETS border-inline-start-style border-inline-end-style;
border-inline-color = INSETS border-inline-start-color border-inline-end-color;
border-block = border-block-width border-block-style border-block-color;
border-inline = border-inline-width border-inline-style border-inline-color;
border-block-start = border-block-start-width border-block-start-style border-block-start-color;
border-block-end = border-block-end-width border-block-end-style border-block-end-color;
border-inline-start = border-inline-start-width border-inline-start-style border-inline-start-color;
border-inline-end = border-inline-end-width border-inline-end-style border-inline-end-color;
inset-block-start = block-start;
inset-block-end = block-end;
inset-inline-start = inline-start;
inset-inline-end = inline-end;
inset-inside = inside;
inset-outside = outside;
inset-block = INSETS block-start block-end;
inset-inline = INSETS inline-start inline-end;
inset = INSETS top right bottom left;

/* old names  */
word-wrap = overflow-wrap;
[adapt,webkit]margin-before = margin-block-start;
[adapt,webkit]margin-after = margin-block-end;
[adapt,webkit]margin-start = margin-inline-start;
[adapt,webkit]margin-end = margin-inline-end;
[adapt,webkit]padding-before = padding-block-start;
[adapt,webkit]padding-after = padding-block-end;
[adapt,webkit]padding-start = padding-inline-start;
[adapt,webkit]padding-end = padding-inline-end;
[adapt,webkit]border-before-color = border-block-start-color;
[adapt,webkit]border-after-color = border-block-end-color;
[adapt,webkit]border-start-color = border-inline-start-color;
[adapt,webkit]border-end-color = border-inline-end-color;
[adapt,webkit]border-before-style = border-block-start-style;
[adapt,webkit]border-after-style = border-block-end-style;
[adapt,webkit]border-start-style = border-inline-start-style;
[adapt,webkit]border-end-style = border-inline-end-style;
[adapt,webkit]border-before-width = border-block-start-width;
[adapt,webkit]border-after-width = border-block-end-width;
[adapt,webkit]border-start-width = border-inline-start-width;
[adapt,webkit]border-end-width = border-inline-end-width;
[adapt,webkit]before = block-start;
[adapt,webkit]after = block-end;
[adapt,webkit]start = inline-start;
[adapt,webkit]end = inline-end;

`,gm=`
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:s="http://www.pyroxy.com/ns/shadow">
<head>
<style><![CDATA[

.-vivliostyle-footnote-content {
  float: footnote;
}

.-vivliostyle-table-cell-container {
  display: block;
}

]]></style>
</head>
<body>

<s:template id="footnote"><s:content/><s:include class="-vivliostyle-footnote-content"/></s:template>

<s:template id="table-cell"><div data-vivliostyle-flow-root="true" class="-vivliostyle-table-cell-container"><s:content/></div></s:template>

</body>
</html>`,fm=`
@namespace "http://www.w3.org/1999/xhtml";

:root {
  hyphens: -epubx-expr(pref-hyphenate? "auto": "manual");
}
:root[data-vivliostyle-epub-spine-properties~="page-spread-left"] {
  break-before: left;
}
:root[data-vivliostyle-epub-spine-properties~="page-spread-right"] {
  break-before: right;
}

@-adapt-footnote-area {
  display: block;
  margin-block-start: 0.5em;
  margin-block-end: 0.5em;
}

@-adapt-footnote-area ::before {
  display: block;
  border-block-start-width: 1px;
  border-block-start-style: solid;
  border-block-start-color: black;
  margin-block-end: 0.4em;
  margin-inline-start: 0;
  margin-inline-end: 60%;
}

/* default page master */
@-epubx-page-master :background-host {
  @-epubx-partition :layout-host {
    -epubx-flow-from: body;
    top: -epubx-expr(header.margin-bottom-edge);
    bottom: -epubx-expr(page-height - footer.margin-top-edge);
    left: 0px;
    right: 0px;
    column-width: 25em;
  }
  @-epubx-partition footer :oeb-page-foot {
    writing-mode: horizontal-tb;
    -epubx-flow-from: oeb-page-foot;
    bottom: 0px;
    left: 0px;
    right: 0px;
  }
  @-epubx-partition header :oeb-page-head {
    writing-mode: horizontal-tb;
    -epubx-flow-from: oeb-page-head;
    top: 0px;
    left: 0px;
    right: 0px;
  }
}

@page {
  @top-left-corner {
    text-align: right;
    vertical-align: middle;
  }
  @top-left {
    text-align: left;
    vertical-align: middle;
  }
  @top-center {
    text-align: center;
    vertical-align: middle;
  }
  @top-right {
    text-align: right;
    vertical-align: middle;
  }
  @top-right-corner {
    text-align: left;
    vertical-align: middle;
  }
  @left-top {
    text-align: center;
    vertical-align: top;
  }
  @left-middle {
    text-align: center;
    vertical-align: middle;
  }
  @left-bottom {
    text-align: center;
    vertical-align: bottom;
  }
  @right-top {
    text-align: center;
    vertical-align: top;
  }
  @right-middle {
    text-align: center;
    vertical-align: middle;
  }
  @right-bottom {
    text-align: center;
    vertical-align: bottom;
  }
  @bottom-left-corner {
    text-align: right;
    vertical-align: middle;
  }
  @bottom-left {
    text-align: left;
    vertical-align: middle;
  }
  @bottom-center {
    text-align: center;
    vertical-align: middle;
  }
  @bottom-right {
    text-align: right;
    vertical-align: middle;
  }
  @bottom-right-corner {
    text-align: left;
    vertical-align: middle;
  }
}

@media print {
  @page {
    margin: 10%;
  }
}
`,bm=`
@namespace "http://www.w3.org/1999/xhtml";
@namespace m "http://www.w3.org/1998/Math/MathML";
@namespace epub "http://www.idpf.org/2007/ops";

html,
address,
blockquote,
body,
dd,
div,
dl,
dt,
fieldset,
form,
frame,
frameset,
h1,
h2,
h3,
h4,
h5,
h6,
noframes,
ol,
p,
ul,
center,
dir,
hr,
menu,
pre,
details,
dialog,
legend,
listing,
optgroup,
option,
plaintext,
search,
xmp,
article,
section,
nav,
aside,
hgroup,
footer,
header,
figure,
figcaption,
main {
  display: block;
}
li {
  display: list-item;
}
head {
  display: none !important;
}
table {
  display: table;
}
tr {
  display: table-row;
}
thead {
  display: table-header-group;
  break-after: avoid;
}
tbody {
  display: table-row-group;
}
tfoot {
  display: table-footer-group;
  break-before: avoid;
}
col {
  display: table-column;
}
colgroup {
  display: table-column-group;
}
td,
th {
  display: table-cell;
}
caption {
  display: table-caption;
  text-align: center;
}
th {
  font-weight: bolder;
  text-align: center;
}
*[hidden],
link,
style,
script {
  display: none;
}
h1 {
  font-size: 2em;
  margin-block: 0.67em;
}
h2 {
  font-size: 1.5em;
  margin-block: 0.83em;
}
h3 {
  font-size: 1.17em;
  margin-block: 1em;
}
h4 {
  font-size: 1em;
  margin-block: 1.33em;
}
h5 {
  font-size: 0.83em;
  margin-block: 1.67em;
}
h6 {
  font-size: 0.67em;
  margin-block: 2.33em;
}
h1,
h2,
h3,
h4,
h5,
h6 {
  font-weight: bold;
  break-after: avoid;
}
p,
blockquote,
figure,
ul,
ol,
dl,
dir,
menu {
  margin-block: 1em;
}
b,
strong {
  font-weight: bolder;
}
blockquote,
figure {
  margin-inline: 40px;
}
i,
cite,
dfn,
em,
var,
address {
  font-style: italic;
}
pre,
tt,
code,
kbd,
samp {
  font-family: monospace;
  text-spacing: none;
  hanging-punctuation: none;
}
listing,
plaintext,
xmp,
pre {
  white-space: pre;
}
pre[wrap] {
  white-space: pre-wrap;
}
button,
textarea,
input,
select {
  display: inline-block;
}
big {
  font-size: 1.17em;
}
small,
sub,
sup {
  font-size: 0.83em;
}
sub {
  vertical-align: sub;
}
sup {
  vertical-align: super;
}
table {
  box-sizing: border-box;
  border-spacing: 2px;
  border-collapse: separate;
  text-indent: initial;
}
thead,
tbody,
tfoot,
table > tr {
  vertical-align: middle;
}
tr,
td,
th {
  vertical-align: inherit;
}
s,
strike,
del {
  text-decoration: line-through;
}
hr {
  border-style: inset;
  border-width: 1px;
  margin-block: 0.5em;
}
hr[color],
hr[noshade] {
  border-style: solid;
}
ol,
ul,
dir,
menu {
  padding-inline-start: 40px;
}
dd {
  margin-inline-start: 40px;
}
ol ul,
ul ol,
ul ul,
ol ol {
  margin-block: 0;
}
u,
ins {
  text-decoration: underline;
}
center {
  text-align: center;
}
q::before {
  content: open-quote;
}
q::after {
  content: close-quote;
}

ruby {
  display: ruby;
}
rp {
  display: none;
}
rbc {
  display: ruby-base-container;
}
rtc {
  display: ruby-text-container;
}
rb {
  display: ruby-base;
  white-space: nowrap;
}
rt {
  display: ruby-text;
}
rtc,
rt {
  text-emphasis: none;
  white-space: nowrap;
  line-height: 1;
}
rtc,
rt {
  font-size: 50%;
}
rtc:lang(zh-TW),
rt:lang(zh-TW) {
  font-size: 30%;
}
rtc > rt,
rtc > rt:lang(zh-TW) {
  font-size: 100%;
}

/* Bidi settings */
bdo[dir="ltr"] {
  direction: ltr;
  unicode-bidi: bidi-override;
}
bdo[dir="rtl"] {
  direction: rtl;
  unicode-bidi: bidi-override;
}
*[dir="ltr"] {
  direction: ltr;
  unicode-bidi: isolate;
}
*[dir="rtl"] {
  direction: rtl;
  unicode-bidi: isolate;
}

/* MathML */
m|math[display="block"] {
  display: block;
  display: block math;
}

/*------------------ epub-specific ---------------------*/

a[epub|type="noteref"],
a[epub\\:type="noteref"] {
  font-size: 0.75em;
  vertical-align: super;
  line-height: 0.01;
}

a[epub|type="noteref"]:href-epub-type(footnote, aside),
a[epub\\:type="noteref"]:href-epub-type(footnote, aside) {
  -adapt-template: footnote;
  text-decoration: none;
}

aside[epub|type="footnote"],
aside[epub\\:type="footnote"] {
  display: none;
}

aside[epub|type="footnote"]:footnote-content,
aside[epub\\:type="footnote"]:footnote-content {
  display: block;
  margin: 0.25em;
  font-size: 1.2em;
  line-height: 1.2;
}

epub|trigger {
  display: none;
}

epub|switch {
  display: inline;
}

epub|default {
  display: inline;
}

epub|case {
  display: none;
}

epub|case[required-namespace::supported] {
  display: inline;
}

epub|case[required-namespace::supported] ~ epub|case {
  display: none;
}

epub|case[required-namespace::supported] ~ epub|default {
  display: none;
}
`,ym=`
@namespace "http://www.w3.org/1999/xhtml";

*:not([data-vivliostyle-role=doc-toc],
  [data-vivliostyle-role=doc-toc] *,
  :has([data-vivliostyle-role=doc-toc]),
  :is(h1,h2,h3,h4,h5,h6):has(+:not(nav)[data-vivliostyle-role=doc-toc])) {
  display: none;
}

[hidden] {
  display: revert;
}

[data-vivliostyle-role=doc-toc] li a {
  -adapt-behavior: toc-node-anchor;
}

[data-vivliostyle-role=doc-toc] li {
  -adapt-behavior: toc-node;
}

[data-vivliostyle-role=doc-toc] li > :not(ul,ol):first-child {
  -adapt-behavior: toc-node-first-child;
}

[data-vivliostyle-role=doc-toc] :is(ol,ul),
[data-vivliostyle-role=doc-toc]:is(ol,ul) {
  -adapt-behavior: toc-container;
}
`,vm=`
[data-viv-margin-discard~="block-start"] {
  margin-block-start: 0 !important;
}
[data-viv-margin-discard~="block-end"] {
  margin-block-end: 0 !important;
}
[data-viv-margin-discard~="inline-start"] {
  margin-inline-start: 0 !important;
}
[data-viv-margin-discard~="inline-end"] {
  margin-inline-end: 0 !important;
}

[data-viv-box-break~="inline-start"]:not([data-viv-box-break~="clone"]) {
  margin-inline-start: 0 !important;
  padding-inline-start: 0 !important;
  border-inline-start-width: 0 !important;
  border-start-start-radius: 0 !important;
  border-end-start-radius: 0 !important;
}
[data-viv-box-break~="inline-end"]:not([data-viv-box-break~="clone"]) {
  margin-inline-end: 0 !important;
  padding-inline-end: 0 !important;
  border-inline-end-width: 0 !important;
  border-start-end-radius: 0 !important;
  border-end-end-radius: 0 !important;
}
[data-viv-box-break~="block-start"]:not([data-viv-box-break~="clone"]):not(table[style*="border-collapse: collapse"]:has(>thead)) {
  margin-block-start: 0 !important;
  padding-block-start: 0 !important;
  border-block-start-width: 0 !important;
  border-start-start-radius: 0 !important;
  border-start-end-radius: 0 !important;
}
[data-viv-box-break~="block-end"]:not([data-viv-box-break~="clone"]):not(table[style*="border-collapse: collapse"]:has(>tfoot)) {
  margin-block-end: 0 !important;
  padding-block-end: 0 !important;
  border-block-end-width: 0 !important;
  border-end-start-radius: 0 !important;
  border-end-end-radius: 0 !important;
}
[data-viv-box-break~="block-start"][data-viv-box-break~="text-start"] {
  text-indent: 0 !important;
}
[data-viv-box-break~="block-end"][data-viv-box-break~="text-end"][data-viv-box-break~="justify"] {
  text-align-last: justify !important;
}
[data-viv-box-break~="block-end"][data-viv-box-break~="text-end"][data-viv-box-break~="justify"] > * {
  text-align-last: auto;
}
[data-viv-box-break~="block-end"][data-viv-box-break~="text-end"]:not([data-viv-box-break~="justify"]) {
  text-align-last: auto !important;
}

span.viv-anonymous-block {
  display: block;
}

[data-vivliostyle-page-container] {
  text-spacing-trim: space-all;
  text-autospace: no-autospace;
}
viv-ts-open.viv-ts-auto > viv-ts-inner,
viv-ts-open.viv-ts-trim > viv-ts-inner {
  margin-inline-start: -0.5em;
}
viv-ts-close.viv-ts-auto > viv-ts-inner,
viv-ts-close.viv-ts-trim > viv-ts-inner {
  letter-spacing: -0.5em;
}
viv-ts-close.viv-hang-end > viv-ts-inner,
viv-ts-close.viv-hang-last > viv-ts-inner {
  letter-spacing: -1em;
}
viv-ts-open.viv-ts-auto::before,
viv-ts-close.viv-ts-auto::after,
viv-ts-close.viv-hang-end::after {
  content: " ";
  font-family: Courier, monospace;
  word-spacing: normal;
  letter-spacing: -0.11em;
  line-height: 0;
  text-orientation: mixed;
  visibility: hidden;
}
viv-ts-close.viv-hang-end:not(.viv-hang-hw)::after {
  letter-spacing: 0.4em;
}
viv-ts-close.viv-hang-hw > viv-ts-inner {
  letter-spacing: -0.5em;
}
viv-ts-open.viv-hang-first > viv-ts-inner {
  display: inline-block;
  line-height: 1;
  inline-size: 1em;
  text-indent: 0;
  text-align: end;
  text-align-last: end;
  margin-inline-start: -1em;
}
viv-ts-thin-sp::after {
  content: " ";
  font-family: Times, serif;
  word-spacing: normal;
  letter-spacing: -0.125em;
  line-height: 0;
  text-orientation: mixed;
  visibility: hidden;
}
[style*=text-decoration] :is(viv-ts-thin-sp, viv-ts-close.viv-ts-auto)::after {
  visibility: visible;
}

span[data-viv-leader] {
  text-combine-upright: none;
  text-orientation: mixed;
  white-space: pre;
}
`;function Ra(e,t,i){let r=Z("fetchFromURL"),s={method:i||"GET",mode:"cors"},o=r.suspend(),u={status:0,statusText:"",url:e,contentType:null,responseText:null,responseXML:null,responseBlob:null};return fetch(e,s).then(c=>{var m;return u.status=c.status,u.url=c.url,u.statusText=c.statusText,u.contentType=(m=c.headers.get("Content-Type"))==null?void 0:m.replace(/;.*$/,"").toLowerCase(),c.ok?t==="blob"?c.blob():t==="arraybuffer"?c.arrayBuffer():t==="json"?c.json():/\/aozorabunko\/[^/]+\/cards\/[^/]+\/files\/[^/.]+\.html$/.test(e)?(u.contentType="text/html",c.arrayBuffer().then(p=>new TextDecoder("Shift_JIS").decode(p))):(/^data:,(<|%3c)/i.test(e)&&(u.contentType="text/html"),c.text()):c.text()}).then(c=>{t==="blob"&&c instanceof Blob?u.responseBlob=c:t==="arraybuffer"&&c instanceof ArrayBuffer?u.responseBlob=Sm([c]):t==="json"?u.responseText=JSON.stringify(c):typeof c=="string"&&(u.responseText=c),o.schedule(u)}).catch(c=>{ee.warn(c,`Error fetching ${e}`),o.schedule(u)}),r.result()}function Sm(e,t){let i=t||"application/octet-stream";return new Blob(e,{type:i})}function gP(e){let t=Z("readBlob"),i=new FileReader,r=t.suspend(i);return i.addEventListener("load",()=>{r.schedule(i.result)},!1),i.readAsArrayBuffer(e),t.result()}function fP(e){return URL.createObjectURL(e)}var pd=class{constructor(e,t){this.parser=e,this.type=t,f(this,"resources",{}),f(this,"fetchers",{})}load(e,t,i){e=Mi(e);let r=this.resources[e];return typeof r<"u"?q(r):this.fetch(e,t,i).get()}fetchInner(e,t,i){let r=Z("fetch"),s=e.endsWith("?viv-toc-box");s&&(e=e.replace("?viv-toc-box",""));let o=et("user-agent.xml",kr),u=!s&&e===o;return u&&(e=`data:application/xml,${encodeURIComponent(gm)}`),Ra(e,this.type).then(c=>{if(c.status>=400&&t)throw new Error((i||`Failed to fetch required resource: ${e}`)+` (${c.status}${c.statusText?" "+c.statusText:""})`);s?(e+="?viv-toc-box",c.url+="?viv-toc-box"):u&&(c.url=e=o),this.parser(c,this).then(m=>{delete this.fetchers[e],this.resources[e]=m,r.finish(m)})}),r.result()}fetch(e,t,i){if(e=Mi(e),this.resources[e])return null;let r=this.fetchers[e];return r||(r=new as(()=>this.fetchInner(e,t,i),`Fetch ${e}`),this.fetchers[e]=r,r.start()),r}get(e){return this.resources[Mi(e)]}delete(e){delete this.resources[Mi(e)]}};function bP(e,t){let i=e.responseText;return q(i?Bl(i):null)}function yP(){return new pd(bP,"text")}function Qr(e,t,i){let r=new as(()=>{let s=Z("loadElement"),o=s.suspend(e),u=!1,c=m=>{u||(u=!0,o.schedule(m?m.type:"timeout"))};return e.addEventListener("load",c,!1),e.addEventListener("error",c,!1),e.addEventListener("abort",c,!1),e.namespaceURI=="http://www.w3.org/2000/svg"?(t&&e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t),setTimeout(c,300)):e.localName==="script"?setTimeout(c,3e3):t&&(e.src=t,i&&(e.alt=i)),s.result()},`loadElement ${t||e.localName}`);return r.start(),r}var xm=0,vP=16777216,wm=33554432,Cm=50331648,km=67108864,SP=83886080,xP=100663296,md=class{constructor(e){this.scope=e,f(this,"flavor"),this.flavor="Author"}getCurrentToken(){return null}getScope(){return this.scope}error(e,t){}startStylesheet(e){this.flavor=e}tagSelector(e,t){}classSelector(e){}pseudoclassSelector(e,t){}pseudoelementSelector(e,t){}idSelector(e){}attributeSelector(e,t,i,r){}descendantSelector(){}childSelector(){}adjacentSiblingSelector(){}followingSiblingSelector(){}nextSelector(){}startSelectorRule(){}startFontFaceRule(){}startFootnoteRule(e){}startViewportRule(){}startDefineRule(){}startRegionRule(){}startPageRule(){}startPageMarginBoxRule(e){}startWhenRule(e){}startMediaRule(e){this.startWhenRule(e)}startFlowRule(e){}startPageTemplateRule(){}startPageMasterRule(e,t,i){}startPartitionRule(e,t,i){}startPartitionGroupRule(e,t,i){}startRuleBody(){}property(e,t,i){}endRule(){}startFuncWithSelector(e){}endFuncWithSelector(){}pushSelectorText(e){}getImportantSpecificity(){switch(this.flavor){case"UA":return xm;case"User":return xP;default:return SP}}getBaseSpecificity(){switch(this.flavor){case"UA":return xm;case"User":return vP;default:return wm}}},wP=class extends md{constructor(){super(null),f(this,"stack",[]),f(this,"tokenizer",null),f(this,"slave",null)}pushHandler(e){this.stack.push(this.slave),this.slave=e}popHandler(){this.slave=this.stack.pop()}getCurrentToken(){return this.tokenizer?this.tokenizer.token():null}getScope(){return this.slave.getScope()}error(e,t){this.slave.error(e,t)}errorMsg(e,t){var i;ee.warn(e,(i=t?.toString())!=null?i:"")}startStylesheet(e){super.startStylesheet(e),this.stack.length>0&&(this.slave=this.stack[0],this.stack=[]),this.slave.startStylesheet(e)}tagSelector(e,t){this.slave.tagSelector(e,t)}classSelector(e){this.slave.classSelector(e)}pseudoclassSelector(e,t){this.slave.pseudoclassSelector(e,t)}pseudoelementSelector(e,t){this.slave.pseudoelementSelector(e,t)}idSelector(e){this.slave.idSelector(e)}attributeSelector(e,t,i,r){this.slave.attributeSelector(e,t,i,r)}descendantSelector(){this.slave.descendantSelector()}childSelector(){this.slave.childSelector()}adjacentSiblingSelector(){this.slave.adjacentSiblingSelector()}followingSiblingSelector(){this.slave.followingSiblingSelector()}nextSelector(){this.slave.nextSelector()}startSelectorRule(){this.slave.startSelectorRule()}startFontFaceRule(){this.slave.startFontFaceRule()}startFootnoteRule(e){this.slave.startFootnoteRule(e)}startViewportRule(){this.slave.startViewportRule()}startDefineRule(){this.slave.startDefineRule()}startRegionRule(){this.slave.startRegionRule()}startPageRule(){this.slave.startPageRule()}startPageMarginBoxRule(e){this.slave.startPageMarginBoxRule(e)}startWhenRule(e){this.slave.startWhenRule(e)}startFlowRule(e){this.slave.startFlowRule(e)}startPageTemplateRule(){this.slave.startPageTemplateRule()}startPageMasterRule(e,t,i){this.slave.startPageMasterRule(e,t,i)}startPartitionRule(e,t,i){this.slave.startPartitionRule(e,t,i)}startPartitionGroupRule(e,t,i){this.slave.startPartitionGroupRule(e,t,i)}startRuleBody(){this.slave.startRuleBody()}property(e,t,i){this.slave.property(e,t,i)}endRule(){this.slave.endRule()}startFuncWithSelector(e){this.slave.startFuncWithSelector(e)}endFuncWithSelector(){this.slave.endFuncWithSelector()}pushSelectorText(e){this.slave.pushSelectorText(e)}},Em=class extends md{constructor(e,t,i){super(e),this.owner=t,this.topLevel=i,f(this,"depth",0),t&&(this.flavor=t.flavor)}getCurrentToken(){var e;return(e=this.owner)==null?void 0:e.getCurrentToken()}error(e,t){var i;(i=this.owner)==null||i.errorMsg(e,t)}startRuleBody(){this.depth++}endRule(){--this.depth==0&&!this.topLevel&&this.owner.popHandler()}},os=class extends Em{constructor(e,t,i){super(e,t,i)}report(e){this.error(e,this.getCurrentToken())}reportAndSkip(e){this.report(e),this.owner.pushHandler(new Em(this.scope,this.owner,!1))}startSelectorRule(){this.reportAndSkip("E_CSS_UNEXPECTED_SELECTOR")}startFontFaceRule(){this.reportAndSkip("E_CSS_UNEXPECTED_FONT_FACE")}startFootnoteRule(e){this.reportAndSkip("E_CSS_UNEXPECTED_FOOTNOTE")}startViewportRule(){this.reportAndSkip("E_CSS_UNEXPECTED_VIEWPORT")}startDefineRule(){this.reportAndSkip("E_CSS_UNEXPECTED_DEFINE")}startRegionRule(){this.reportAndSkip("E_CSS_UNEXPECTED_REGION")}startPageRule(){this.reportAndSkip("E_CSS_UNEXPECTED_PAGE")}startWhenRule(e){this.reportAndSkip("E_CSS_UNEXPECTED_WHEN")}startFlowRule(e){this.reportAndSkip("E_CSS_UNEXPECTED_FLOW")}startPageTemplateRule(){this.reportAndSkip("E_CSS_UNEXPECTED_PAGE_TEMPLATE")}startPageMasterRule(e,t,i){this.reportAndSkip("E_CSS_UNEXPECTED_PAGE_MASTER")}startPartitionRule(e,t,i){this.reportAndSkip("E_CSS_UNEXPECTED_PARTITION")}startPartitionGroupRule(e,t,i){this.reportAndSkip("E_CSS_UNEXPECTED_PARTITION_GROUP")}startFuncWithSelector(e){this.reportAndSkip("E_CSS_UNEXPECTED_SELECTOR_FUNC")}endFuncWithSelector(){this.reportAndSkip("E_CSS_UNEXPECTED_END_SELECTOR_FUNC")}property(e,t,i){this.error("E_CSS_UNEXPECTED_PROPERTY",this.getCurrentToken())}},tt=[],La=[],We=[],it=[],gi=[],ei=[],rt=[],vt=[],Fe=[],kt=[],Wt=[],Et=[],nt=[],Jr=55,en=56,_a=57;tt[1]=28,tt[36]=29,tt[7]=29,tt[9]=29,tt[14]=29,tt[18]=29,tt[50]=29,tt[20]=30,tt[13]=27,tt[0]=200,La[1]=46,La[0]=200,ei[1]=2,ei[36]=4,ei[7]=6,ei[9]=8,ei[14]=10,ei[18]=14,ei[50]=42,We[37]=11,We[23]=12,We[35]=56,We[1]=1,We[36]=3,We[7]=5,We[9]=7,We[14]=9,We[12]=13,We[18]=55,We[50]=58,We[16]=41,it[37]=11,it[23]=12,it[35]=56,it[1]=1,it[36]=3,it[7]=5,it[9]=7,it[14]=9,it[18]=55,gi[1]=2,gi[36]=4,gi[7]=6,gi[9]=8,gi[18]=14,gi[50]=42,gi[14]=10,gi[12]=13,rt[1]=15,rt[7]=16,rt[4]=17,rt[5]=18,rt[3]=19,rt[2]=20,rt[8]=21,rt[27]=57,rt[16]=22,rt[19]=23,rt[6]=24,rt[11]=25,rt[17]=26,rt[13]=48,rt[31]=47,rt[23]=54,rt[0]=44,vt[1]=31,vt[4]=32,vt[5]=32,vt[3]=33,vt[2]=34,vt[10]=40,vt[6]=38,vt[31]=36,vt[24]=36,vt[32]=35,Fe[1]=45,Fe[16]=37,Fe[37]=37,Fe[38]=37,Fe[47]=37,Fe[48]=37,Fe[39]=37,Fe[49]=37,Fe[41]=37,Fe[26]=37,Fe[25]=37,Fe[23]=37,Fe[24]=37,Fe[19]=37,Fe[21]=37,Fe[36]=37,Fe[18]=37,Fe[22]=37,Fe[11]=39,Fe[12]=43,Fe[17]=49,kt[0]=200,kt[12]=50,kt[13]=51,kt[14]=50,kt[15]=51,kt[10]=50,kt[11]=51,kt[17]=53,Wt[0]=200,Wt[12]=50,Wt[13]=52,Wt[14]=50,Wt[15]=51,Wt[10]=50,Wt[11]=51,Wt[17]=53,Et[0]=200,Et[12]=50,Et[13]=51,Et[14]=50,Et[15]=51,Et[10]=50,Et[11]=51,nt[11]=0,nt[16]=0,nt[22]=1,nt[18]=1,nt[26]=2,nt[25]=2,nt[38]=3,nt[37]=3,nt[48]=3,nt[47]=3,nt[39]=3,nt[49]=3,nt[41]=3,nt[23]=4,nt[24]=4,nt[36]=5,nt[19]=5,nt[21]=5,nt[0]=6,nt[Jr]=2,nt[en]=2;var ls=class{constructor(e,t,i,r){this.actions=e,this.tokenizer=t,this.handler=i,this.baseURL=r,f(this,"valStack",[]),f(this,"namespacePrefixToURI",{}),f(this,"defaultNamespaceURI",null),f(this,"propName",null),f(this,"propImportant",!1),f(this,"exprContext"),f(this,"result",null),f(this,"importReady",!1),f(this,"importURL",null),f(this,"importCondition",null),f(this,"errorBrackets",[]),f(this,"ruleStack",[]),f(this,"regionRule",!1),f(this,"pageRule",!1),f(this,"inStyleDeclaration",!1),this.exprContext=2}extractVals(e,t){let i=[],r=this.valStack;for(;t<r.length&&(i.push(r[t++]),t!==r.length);){if(r[t++]!==e)throw new Error("Unexpected state");t===r.length&&i.push(he)}return i}valStackReduce(e,t){let i=this.valStack,r=i.length,s=0,o;do if(o=i[--r],e===")"&&o instanceof ts){if(o.text===")")s++;else if(o.text==="("){if(s===0)return null;s--}}while(typeof o<"u"&&typeof o!="string");let u=i.length-(r+1);if(u>1&&i.splice(r+1,u,new Ke(i.slice(r+1,i.length))),e==",")return null;r++;do o=i[--r];while(typeof o<"u"&&(typeof o!="string"||o==","));if(u=i.length-(r+1),o=="("){e!=")"&&t.type!==0&&(this.handler.error("E_CSS_MISMATCHED_C_PAR",t),this.actions=Wt);let m=new Kr(i[r-1],this.extractVals(",",r+1));if(i.splice(r-1,u+2,m),m.name==="var"){let p=m.values[0]instanceof Jt&&m.values[0].name;(!qi(p)||p===this.propName)&&(this.handler.error(`E_CSS_INVALID_VAR ${m.toString()}`,t),this.actions=Wt)}return m}if(e!=";"||r>=0)return this.handler.error("E_CSS_UNEXPECTED_VAL_END",t),this.actions=Wt,null;if(u>1)return new Mt(this.extractVals(",",r+1));let c=i[0];return c instanceof Rt?c:c?new ts(c.toString()):he}exprError(e,t){this.actions=this.propName?Wt:kt,ee.warn(e,t.toString())}exprStackReduce(e,t){let i=this.valStack,r=this.handler,s=i.pop(),o;for(;;){let u=i.pop();if(e==11){let c=[s];for(;u==16;)c.unshift(i.pop()),u=i.pop();if(typeof u=="string"){if(u=="{"){for(;c.length>=2;){let m=c.shift(),p=c.shift(),y=new o1(r.getScope(),m,p);c.unshift(y)}return i.push(new re(c[0])),!0}else if(u=="("){let m=i.pop(),p=i.pop();s=new es(r.getScope(),ql(p,m),c),e=0;continue}}if(u==10){s.isMediaName()&&(s=new Wp(r.getScope(),s,null)),e=0;continue}}else if(typeof u=="string"){i.push(u);break}if(u<0)if(u==-31)s=new ar(r.getScope(),s);else if(u==-24)s=new Yr(r.getScope(),s);else if(u==-_a)s=new s1(r.getScope(),s);else return this.exprError("F_UNEXPECTED_STATE",t),!1;else{if(nt[e]>nt[u]){i.push(u);break}switch(o=i.pop(),u){case 26:s=new Gl(r.getScope(),o,s);break;case Jr:s=new a1(r.getScope(),o,s);break;case en:s=new l1(r.getScope(),o,s);break;case 25:s=new $l(r.getScope(),o,s);break;case 38:s=new d1(r.getScope(),o,s);break;case 37:s=new c1(r.getScope(),o,s);break;case 48:s=new u1(r.getScope(),o,s);break;case 47:s=new Yl(r.getScope(),o,s);break;case 39:case 49:s=new Xl(r.getScope(),o,s);break;case 41:s=new h1(r.getScope(),o,s);break;case 23:s=new Bp(r.getScope(),o,s);break;case 24:s=new Fp(r.getScope(),o,s);break;case 36:s=new Kl(r.getScope(),o,s);break;case 19:s=new zp(r.getScope(),o,s);break;case 21:s=new Mp(r.getScope(),o,s);break;case 18:if(i.length>1)switch(i[i.length-1]){case 22:i.pop(),s=new g1(r.getScope(),i.pop(),o,s);break;case 10:if(o.isMediaName())s=new Wp(r.getScope(),o,s);else return this.exprError("E_CSS_MEDIA_TEST",t),!1;break}else return this.exprError("E_CSS_EXPR_COND",t),!1;break;case 22:if(e!=18)return this.exprError("E_CSS_EXPR_COND",t),!1;case 10:return i.push(o),i.push(u),i.push(s),!1;default:return this.exprError("F_UNEXPECTED_STATE",t),!1}}}return i.push(s),!1}readSupportsTest(e){let t=e.type===6,i=this.tokenizer,r,s;if(t)s=e.text,r=e.position+s.length+1;else if(e.type===10){let y=i.nthToken(1),S=i.nthToken(2);if(y.type===1&&S.type===18)i.consume(),i.consume(),s=y.text,r=S.position+1;else{if(y.type===10||y.type===6||y.type===1&&y.text.toLowerCase()==="not"&&(S.type===10||S.type===6))return null;r=e.position+1}}else return null;let o=0,u,c=0;for(;o>=0;)switch(i.consume(),u=i.token(),u.type){case 11:o--;break;case 10:case 6:o++;break;case 16:o===0&&c++;break;case 0:return this.exprError("E_CSS_UNEXPECTED_EOF",u),null}i.consume();let m=u.position,p=t&&s==="selector"&&c>0?"":i.input.substring(r,m).trim();return new f1(this.handler.getScope(),s,p,t)}readPseudoParams(){let e=[];for(;;){let t=this.tokenizer.token();switch(t.type){case 1:e.push(t.text);break;case 23:e.push("+");break;case 4:case 5:e.push(t.num);break;default:return e}this.tokenizer.consume()}}readNthPseudoParams(){let e=!1,t=this.tokenizer.token();if(t.type===23)e=!0,this.tokenizer.consume(),t=this.tokenizer.token();else if(t.type===1&&(t.text==="even"||t.text==="odd"))return this.tokenizer.consume(),[2,t.text==="odd"?1:0];switch(t.type){case 3:if(e&&t.num<0)return null;case 1:if(e&&t.text.charAt(0)==="-")return null;if(t.text==="n"||t.text==="-n"){if(e&&t.precededBySpace)return null;let i=t.text==="-n"?-1:1;t.type===3&&(i=t.num);let r=0;this.tokenizer.consume(),t=this.tokenizer.token();let s=t.type===24,o=t.type===23||s;if(o&&(this.tokenizer.consume(),t=this.tokenizer.token()),t.type===5){if(r=t.num,1/r===-1/0){if(r=0,o)return null}else if(r<0){if(o)return null}else if(r>=0&&!o)return null;this.tokenizer.consume()}else if(o)return null;return[i,s&&r>0?-r:r]}else if(t.text==="n-"||t.text==="-n-"){if(e&&t.precededBySpace)return null;let i=t.text==="-n-"?-1:1;if(t.type===3&&(i=t.num),this.tokenizer.consume(),t=this.tokenizer.token(),t.type===5)return t.num<0||1/t.num===-1/0?null:(this.tokenizer.consume(),[i,t.num])}else{let i=t.text.match(/^n(-[0-9]+)$/);if(i)return e&&t.precededBySpace?null:(this.tokenizer.consume(),[t.type===3?t.num:1,parseInt(i[1],10)]);if(i=t.text.match(/^-n(-[0-9]+)$/),i)return this.tokenizer.consume(),[-1,parseInt(i[1],10)]}return null;case 5:return e&&(t.precededBySpace||t.num<0)?null:(this.tokenizer.consume(),[0,t.num])}return null}makeCondition(e,t){let i=this.handler.getScope();if(!i)return null;if(t=t||i._true,e){let r=e.split(/\s+/);for(let s of r)switch(s){case"vertical":t=pi(i,t,new ar(i,new lt(i,"pref-horizontal")));break;case"horizontal":t=pi(i,t,new lt(i,"pref-horizontal"));break;case"day":t=pi(i,t,new ar(i,new lt(i,"pref-night-mode")));break;case"night":t=pi(i,t,new lt(i,"pref-night-mode"));break;default:t=i._false}}return t===i._true?null:new re(t)}isInsidePropertyOnlyRule(){switch(this.ruleStack[this.ruleStack.length-1]){case"[selector]":case"font-face":case"-epubx-flow":case"-epubx-viewport":case"-epubx-define":case"-adapt-footnote-area":return!0}return!1}runParser(e,t,i,r,s,o){let u=this.handler,c=this.tokenizer,m=this.valStack,p,y,S,v,w,T,E,P=null;for(i&&(this.inStyleDeclaration=!0),r&&(this.exprContext=2,this.valStack.push("{"));e>0;--e){if(p=c.token(),s&&P===null&&(P=p.position-1,c.input[P]==="("&&P++),this.actions===rt&&this.errorBrackets.length>0&&(p.type===this.errorBrackets[this.errorBrackets.length-1]||p.type===17||p.type===31)){if(p.type===this.errorBrackets[this.errorBrackets.length-1]&&(this.errorBrackets.pop(),p.type===11&&this.valStackReduce(")",p))){c.consume();continue}m.push(new ts(p.toString())),c.consume();continue}switch(this.actions[p.type]){case 28:if(!this.inStyleDeclaration||c.nthToken(1).type!=18){this.isInsidePropertyOnlyRule()?(u.error("E_CSS_COLON_EXPECTED",c.nthToken(1)),this.actions=Wt):(this.actions=ei,u.startSelectorRule());continue}this.propName=p.text,this.propImportant=!1,c.consume(),c.consume(),this.actions=rt,m.splice(0,m.length);continue;case 46:if(c.nthToken(1).type!=18){this.actions=Wt,u.error("E_CSS_COLON_EXPECTED",c.nthToken(1));continue}this.propName=p.text,this.propImportant=!1,c.consume(),c.consume(),this.actions=rt,m.splice(0,m.length);continue;case 29:this.actions=ei,u.startSelectorRule();continue;case 1:if(!p.precededBySpace){this.actions=Et,u.error("E_CSS_SPACE_EXPECTED",p);continue}u.descendantSelector();case 2:if(c.nthToken(1).type==34)if(c.consume(),c.consume(),S=this.namespacePrefixToURI[p.text],S!=null)switch(p=c.token(),p.type){case 1:u.tagSelector(S,p.text),s?this.actions=it:this.actions=We,c.consume();break;case 36:u.tagSelector(S,null),s?this.actions=it:this.actions=We,c.consume();break;default:this.actions=kt,u.error("E_CSS_NAMESPACE",p)}else this.actions=kt,u.error("E_CSS_UNDECLARED_PREFIX",p);else u.tagSelector(this.defaultNamespaceURI,p.text),s?this.actions=it:this.actions=We,c.consume();continue;case 3:if(!p.precededBySpace){this.actions=Et,u.error("E_CSS_SPACE_EXPECTED",p);continue}u.descendantSelector();case 4:if(c.nthToken(1).type==34)switch(c.consume(),c.consume(),p=c.token(),p.type){case 1:u.tagSelector(null,p.text),s?this.actions=it:this.actions=We,c.consume();break;case 36:u.tagSelector(null,null),s?this.actions=it:this.actions=We,c.consume();break;default:this.actions=kt,u.error("E_CSS_NAMESPACE",p)}else u.tagSelector(this.defaultNamespaceURI,null),s?this.actions=it:this.actions=We,c.consume();continue;case 5:p.precededBySpace&&u.descendantSelector();case 6:if(!p.text){u.error("E_CSS_SYNTAX",p),c.consume();continue}u.idSelector(p.text),s?this.actions=it:this.actions=We,c.consume();continue;case 7:p.precededBySpace&&u.descendantSelector();case 8:u.classSelector(p.text),s?this.actions=it:this.actions=We,c.consume();continue;case 55:p.precededBySpace&&u.descendantSelector();case 14:c.consume(),p=c.token();e:switch(p.type){case 1:u.pseudoclassSelector(p.text,null),c.consume(),s?this.actions=it:this.actions=We;continue;case 6:switch(v=p.text,c.consume(),v){case"is":case"not":case"where":case"has":this.actions=ei,u.startFuncWithSelector(v),this.runParser(Number.POSITIVE_INFINITY,!1,!1,!1,!0,v==="has")?this.actions=We:this.actions=Et;continue;case"lang":case"href-epub-type":if(p=c.token(),p.type===1){E=[p.text],c.consume(),v==="href-epub-type"&&c.token().type===16&&(c.consume(),p=c.token(),p.type===1&&(E.push(p.text),c.consume()));break}else break e;case"nth-child":case"nth-of-type":case"nth-last-child":case"nth-last-of-type":case"nth":if(E=this.readNthPseudoParams(),E)break;break e;default:E=this.readPseudoParams()}if(p=c.token(),p.type==11){u.pseudoclassSelector(v,E),c.consume(),s?this.actions=it:this.actions=We;continue}break}u.error("E_CSS_PSEUDOCLASS_SYNTAX",p),this.actions=kt;continue;case 58:p.precededBySpace&&u.descendantSelector();case 42:switch(c.consume(),p=c.token(),p.type){case 1:u.pseudoelementSelector(p.text,null),s?this.actions=it:this.actions=We,c.consume();continue;case 6:if(v=p.text,c.consume(),v=="nth-fragment"){if(E=this.readNthPseudoParams(),E===null)break}else E=this.readPseudoParams();if(p=c.token(),p.type==11){u.pseudoelementSelector(v,E),s?this.actions=it:this.actions=We,c.consume();continue}break}u.error("E_CSS_PSEUDOELEM_SYNTAX",p),this.actions=kt;continue;case 9:p.precededBySpace&&u.descendantSelector();case 10:if(c.consume(),p=c.token(),p.type==1)v=p.text,c.consume();else if(p.type==36)v=null,c.consume();else if(p.type==34)v="";else{this.actions=Et,u.error("E_CSS_ATTR",p),c.consume();continue}if(p=c.token(),p.type==34){if(S=v&&this.namespacePrefixToURI[v],S===void 0){this.actions=Et,u.error("E_CSS_UNDECLARED_PREFIX",p),c.consume();continue}if(c.consume(),p=c.token(),p.type!=1){this.actions=Et,u.error("E_CSS_ATTR_NAME_EXPECTED",p);continue}v=p.text,c.consume(),p=c.token()}else S="";switch(p.type){case 39:case 45:case 44:case 43:case 42:case 46:case 50:w=p.type,c.consume(),p=c.token();break;case 15:u.attributeSelector(S,v,0,null),s?this.actions=it:this.actions=We,c.consume();continue;default:this.actions=Et,u.error("E_CSS_ATTR_OP_EXPECTED",p);continue}switch(p.type){case 1:case 2:u.attributeSelector(S,v,w,p.text),c.consume(),p=c.token();break;default:this.actions=Et,u.error("E_CSS_ATTR_VAL_EXPECTED",p);continue}if(p.type!=15){this.actions=Et,u.error("E_CSS_ATTR",p);continue}s?this.actions=it:this.actions=We,c.consume();continue;case 11:u.childSelector(),this.actions=gi,c.consume();continue;case 12:u.adjacentSiblingSelector(),this.actions=gi,c.consume();continue;case 56:u.followingSiblingSelector(),this.actions=gi,c.consume();continue;case 13:this.regionRule?(this.ruleStack.push("-epubx-region"),this.regionRule=!1):this.pageRule?(this.ruleStack.push("page"),this.pageRule=!1,this.inStyleDeclaration=!0):(this.ruleStack.push("[selector]"),this.inStyleDeclaration=!0),u.startRuleBody(),this.actions=tt,c.consume();continue;case 41:u.nextSelector(),this.actions=ei,c.consume();continue;case 15:m.push(J(p.text)),c.consume();continue;case 16:w=parseInt(p.text,16),m.push(new Hp(p.text)),c.consume();continue;case 17:m.push(new or(p.num)),c.consume();continue;case 18:m.push(new Tr(p.num)),c.consume();continue;case 19:m.push(new U(p.num,p.text)),c.consume();continue;case 20:m.push(new bt(p.text)),c.consume();continue;case 21:m.push(new mi(et(p.text,this.baseURL))),c.consume();continue;case 57:m.push(new Up(p.text)),c.consume();continue;case 22:this.valStackReduce(",",p),m.push(","),c.consume();continue;case 23:m.push(Ta),c.consume();continue;case 24:v=p.text.toLowerCase(),v=="-epubx-expr"||v=="env"?(this.actions=vt,this.exprContext=0,m.push("{")):(m.push(v),m.push("("),this.errorBrackets.length>0&&this.errorBrackets.push(11)),c.consume();continue;case 25:this.valStackReduce(")",p),c.consume();continue;case 47:if(c.consume(),p=c.token(),y=c.nthToken(1),p.type==1&&p.text.toLowerCase()=="important"&&(y.type==17||y.type==0||y.type==13)){c.consume(),this.propImportant=!0;continue}this.exprError("E_CSS_SYNTAX",p);continue;case 54:switch(y=c.nthToken(1),y.type){case 4:case 3:case 5:if(!y.precededBySpace){c.consume();continue}}m.push(new ts("+")),c.consume();continue;case 26:c.consume();case 48:T=this.valStackReduce(";",p),T&&this.propName&&u.property(this.propName,T,this.propImportant),this.actions=i?La:tt;continue;case 44:for(c.consume();m.length>0;){let O=m.length;if(T=this.valStackReduce(";",p),!T||m.length===O)break}return t?(this.result=T,!0):(this.propName&&T&&u.property(this.propName,T,this.propImportant),!0);case 31:if(y=c.nthToken(1),y.type==9)c.nthToken(2).type==10&&!c.nthToken(2).precededBySpace?(m.push(p.text,y.text,"("),c.consume()):(m.push(new lt(u.getScope(),ql(p.text,y.text))),this.actions=Fe),c.consume();else{if(this.exprContext==2||this.exprContext==3)p.text.toLowerCase()=="not"?(c.consume(),m.push(new Dp(u.getScope(),!0,y.text))):(p.text.toLowerCase()=="only"&&(c.consume(),p=y),m.push(new Dp(u.getScope(),!1,p.text)));else if(this.exprContext===4&&p.text.toLowerCase()==="not"&&m[m.length-1]!==Jr&&m[m.length-1]!==en&&(y.type===10||y.type===6)){m.push(-_a),c.consume();continue}else m.push(new lt(u.getScope(),p.text));this.actions=Fe}c.consume();continue;case 38:if(this.exprContext===4){m.push(this.readSupportsTest(p)),this.actions=Fe;continue}m.push(null,p.text,"("),c.consume();continue;case 32:m.push(new ft(u.getScope(),p.num)),c.consume(),this.actions=Fe;continue;case 33:v=p.text,v=="%"&&(this.propName&&this.propName.match(/height|^(top|bottom)$/)?v="vh":v="vw"),m.push(new Jn(u.getScope(),p.num,v)),c.consume(),this.actions=Fe;continue;case 34:m.push(new ft(u.getScope(),p.text)),c.consume(),this.actions=Fe;continue;case 35:c.consume(),p=c.token(),p.type!=5||p.precededBySpace?this.exprError("E_CSS_SYNTAX",p):(m.push(new jp(u.getScope(),p.num)),c.consume(),this.actions=Fe);continue;case 36:m.push(-p.type),c.consume();continue;case 37:this.actions=vt,this.exprStackReduce(p.type,p),m.push(p.type),c.consume();continue;case 45:p.text.toLowerCase()==="and"&&m[m.length-2]!==en&&m[m.length-2]!==-_a?(this.actions=vt,this.exprStackReduce(Jr,p),m.push(Jr),c.consume()):p.text.toLowerCase()==="or"&&m[m.length-2]!==Jr&&m[m.length-2]!==-_a?(this.actions=vt,this.exprStackReduce(en,p),m.push(en),c.consume()):this.exprError("E_CSS_SYNTAX",p);continue;case 39:this.exprStackReduce(p.type,p)&&(this.actions=rt),c.consume();continue;case 43:this.exprStackReduce(11,p)&&(this.propName||this.exprContext==3?this.exprError("E_CSS_UNEXPECTED_BRC",p):(this.exprContext==1?u.startWhenRule(m.pop()):u.startMediaRule(m.pop()),this.ruleStack.push("media"),u.startRuleBody(),this.actions=tt)),c.consume();continue;case 49:if(this.exprStackReduce(11,p))return this.propName||this.exprContext!=3?(this.exprError("E_CSS_UNEXPECTED_SEMICOL",p),this.actions=tt,c.consume(),!1):(this.importCondition=m.pop(),this.importReady=!0,this.actions=tt,c.consume(),!1);c.consume();continue;case 40:if(this.exprContext===4){let O=this.readSupportsTest(p);if(O){m.push(O),this.actions=Fe;continue}}m.push(p.type),c.consume();continue;case 27:if(this.actions=tt,c.consume(),u.endRule(),this.inStyleDeclaration=!1,this.ruleStack.length)switch(this.ruleStack.pop(),this.ruleStack[this.ruleStack.length-1]){case"page":case"-epubx-page-master":case"-epubx-partition-group":this.inStyleDeclaration=!0}continue;case 30:switch(v=p.text.toLowerCase(),v){case"import":if(c.consume(),p=c.token(),p.type==2||p.type==8){if(this.importURL=p.text,c.consume(),p=c.token(),p.type==17||p.type==0)return this.importReady=!0,c.consume(),!1;this.propName=null,this.exprContext=3,this.actions=vt,m.push("{");continue}u.error("E_CSS_IMPORT_SYNTAX",p),this.actions=kt;continue;case"namespace":switch(c.consume(),p=c.token(),p.type){case 1:if(v=p.text,c.consume(),p=c.token(),(p.type==2||p.type==8)&&c.nthToken(1).type==17){this.namespacePrefixToURI[v]=p.text,c.consume(),c.consume();continue}break;case 2:case 8:if(c.nthToken(1).type==17){this.defaultNamespaceURI=p.text,c.consume(),c.consume();continue}break}u.error("E_CSS_NAMESPACE_SYNTAX",p),this.actions=kt;continue;case"charset":if(c.consume(),p=c.token(),p.type==2&&c.nthToken(1).type==17){v=p.text.toLowerCase(),v!="utf-8"&&v!="utf-16"&&u.error(`E_CSS_UNEXPECTED_CHARSET ${v}`,p),c.consume(),c.consume();continue}u.error("E_CSS_CHARSET_SYNTAX",p),this.actions=kt;continue;case"font-face":case"-epubx-page-template":case"-epubx-define":case"-epubx-viewport":if(c.nthToken(1).type==12){switch(c.consume(),c.consume(),v){case"font-face":u.startFontFaceRule(),this.inStyleDeclaration=!0;break;case"-epubx-page-template":u.startPageTemplateRule();break;case"-epubx-define":u.startDefineRule(),this.inStyleDeclaration=!0;break;case"-epubx-viewport":u.startViewportRule(),this.inStyleDeclaration=!0;break}this.ruleStack.push(v),u.startRuleBody();continue}break;case"-adapt-footnote-area":switch(c.consume(),p=c.token(),p.type){case 12:c.consume(),u.startFootnoteRule(null),this.ruleStack.push(v),u.startRuleBody(),this.inStyleDeclaration=!0;continue;case 50:if(c.consume(),p=c.token(),p.type==1&&c.nthToken(1).type==12){v=p.text,c.consume(),c.consume(),u.startFootnoteRule(v),this.ruleStack.push("-adapt-footnote-area"),u.startRuleBody(),this.inStyleDeclaration=!0;continue}break}break;case"-epubx-region":c.consume(),u.startRegionRule(),this.regionRule=!0,this.actions=ei;continue;case"page":c.consume(),u.startPageRule(),this.pageRule=!0,this.actions=gi;continue;case"top-left-corner":case"top-left":case"top-center":case"top-right":case"top-right-corner":case"right-top":case"right-middle":case"right-bottom":case"bottom-right-corner":case"bottom-right":case"bottom-center":case"bottom-left":case"bottom-left-corner":case"left-bottom":case"left-middle":case"left-top":if(c.consume(),p=c.token(),p.type==12){c.consume(),u.startPageMarginBoxRule(v),this.ruleStack.push(v),u.startRuleBody(),this.inStyleDeclaration=!0;continue}break;case"-epubx-when":c.consume(),this.propName=null,this.exprContext=1,this.actions=vt,m.push("{");continue;case"media":c.consume(),this.propName=null,this.exprContext=2,this.actions=vt,m.push("{");continue;case"supports":c.consume(),this.propName=null,this.exprContext=4,this.actions=vt,m.push("{");continue;case"-epubx-flow":if(c.nthToken(1).type==1&&c.nthToken(2).type==12){u.startFlowRule(c.nthToken(1).text),c.consume(),c.consume(),c.consume(),this.ruleStack.push(v),u.startRuleBody(),this.inStyleDeclaration=!0;continue}break;case"-epubx-page-master":case"-epubx-partition":case"-epubx-partition-group":{c.consume(),p=c.token();let O=null,A=null,L=[];for(p.type==1&&(O=p.text,c.consume(),p=c.token()),p.type==18&&c.nthToken(1).type==1&&(A=c.nthToken(1).text,c.consume(),c.consume(),p=c.token());p.type==6&&p.text.toLowerCase()=="class"&&c.nthToken(1).type==1&&c.nthToken(2).type==11;)L.push(c.nthToken(1).text),c.consume(),c.consume(),c.consume(),p=c.token();if(p.type==12){switch(c.consume(),v){case"-epubx-page-master":u.startPageMasterRule(O,A,L);break;case"-epubx-partition":u.startPartitionRule(O,A,L);break;case"-epubx-partition-group":u.startPartitionGroupRule(O,A,L);break}this.ruleStack.push(v),u.startRuleBody(),this.inStyleDeclaration=!0;continue}break}case"":u.error(`E_CSS_UNEXPECTED_AT${v}`,p),this.actions=Et;continue;default:u.error(`E_CSS_AT_UNKNOWN ${v}`,p),this.actions=kt;continue}u.error(`E_CSS_AT_SYNTAX ${v}`,p),this.actions=kt;continue;case 50:this.errorBrackets.push(p.type+1),c.consume();continue;case 52:if(this.errorBrackets.length==0){this.actions=tt;continue}case 51:if(s&&this.errorBrackets.length==0&&p.type==11)return c.consume(),u.endFuncWithSelector(),!0;this.errorBrackets.length>0&&this.errorBrackets[this.errorBrackets.length-1]==p.type&&this.errorBrackets.pop(),this.errorBrackets.length==0&&p.type==13&&(this.actions=tt),c.consume();continue;case 53:this.errorBrackets.length==0&&(this.actions=tt),c.consume();continue;case 200:return!0;default:if(r)return this.exprStackReduce(11,p)?(this.result=m.pop(),!0):!1;if(s){switch(p.type){case 16:case 11:if(this.actions===ei)u.error("E_CSS_SYNTAX",p);else{let O=c.input.substring(P,p.position);u.pushSelectorText(O),P=p.position+1}if(p.type===16){u.nextSelector(),this.actions=ei,c.consume();continue}else return u.endFuncWithSelector(),c.consume(),!0;case 37:case 23:case 35:if(o){this.actions=We;continue}break;case 12:case 14:case 10:this.errorBrackets.push(p.type+1);break}u.error("E_CSS_SYNTAX",p),c.consume(),this.actions=Et;continue}if(this.actions!==kt&&this.actions!==Et&&this.actions!==Wt){if(p.type==54)u.error("E_CSS_SYNTAX",p);else if(this.actions===rt){switch(p.type){case 10:case 12:case 14:this.errorBrackets.push(p.type+1);break}m.push(new ts(p.toString())),c.consume();continue}else if(p.type===12&&this.actions==vt&&m.length>0){u.startMediaRule(m.pop()),this.ruleStack.push("media"),u.startRuleBody(),this.actions=tt,c.consume();continue}else{if(p.type===17&&this.actions==vt)return this.actions=tt,c.consume(),!1;u.error("E_CSS_SYNTAX",p)}this.isInsidePropertyOnlyRule()?this.actions=Wt:this.actions=Et;continue}c.consume();continue}}return!1}},Tm=class extends md{constructor(e){super(null),this.scope=e}error(e,t){ee.warn(e,t.toString())}getScope(){return this.scope}};function CP(e,t,i,r,s){let o=Z("parseStylesheet"),u=new ls(tt,e,t,i),c=null;return s&&(c=EP(new ki(s,t),t,i)),c=u.makeCondition(r,c&&c.toExpr()),c&&(t.startMediaRule(c),t.startRuleBody()),o.loop(()=>{for(;!u.runParser(100,!1,!1,!1,!1);){if(u.importReady){let p=et(u.importURL,i);u.importCondition&&(t.startMediaRule(u.importCondition),t.startRuleBody());let y=Z("parseStylesheet.import");return Pm(p,t,null,null).then(()=>{u.importCondition&&t.endRule(),u.importReady=!1,u.importURL=null,u.importCondition=null,y.finish(!0)}),y.result()}let m=o.timeSlice();if(m.isPending)return m}return q(!1)}).then(()=>{c&&t.endRule(),o.finish(!0)}),o.result()}function gd(e,t,i,r,s){return Zr("parseStylesheetFromText",o=>{let u=new ki(e,t);CP(u,t,i,r,s).thenFinish(o)},(o,u)=>{ee.warn(u,`Failed to parse stylesheet text: ${e}`),o.finish(!1)})}function Pm(e,t,i,r){return Zr("parseStylesheetFromURL",s=>{Ra(e).then(o=>{o.responseText?gd(o.responseText,t,e,i,r).then(u=>{u||ee.warn(`Failed to parse stylesheet from ${e}`),s.finish(!0)}):s.finish(!0)})},(s,o)=>{ee.warn(o,"Exception while fetching and parsing:",e),s.finish(!0)})}function tn(e,t,i){let r=new ls(rt,t,new Tm(e),i);return r.runParser(Number.POSITIVE_INFINITY,!0,!1,!1,!1),r.result}function kP(e,t,i){new ls(La,e,t,i).runParser(Number.POSITIVE_INFINITY,!1,!0,!1,!1)}function EP(e,t,i){let r=new ls(vt,e,t,i);return r.runParser(Number.POSITIVE_INFINITY,!1,!1,!0,!1),r.result}var TP={"z-index":!0,"column-count":!0,"flow-linger":!0,opacity:!0,page:!0,"flow-priority":!0,utilization:!0};function PP(e){return!!TP[e]}function AP(e,t,i){if(t instanceof dt&&t.str==="viv-leader")return new re(t);let r=t.evaluate(e);switch(typeof r){case"number":return PP(i)?r==Math.round(r)?new Tr(r):new or(r):new U(r,"px");case"string":return r?tn(t.scope,new ki(r,null),""):he;case"boolean":return r?N._true:N._false;case"undefined":return he}throw new Error("E_UNEXPECTED")}function Am(e,t){let i={};return Object.keys(e).forEach(r=>{let s=i[r]={},o=e[r];Object.keys(o).forEach(u=>{s[u]=o[u].map(c=>{let m=t?c.logical:c.physical,p=t?c.physical:c.logical;return{regexp:new RegExp(`(-?)${m}(-?)`),to:`$1${p}$2`}})})}),i}function Nm(e,t,i,r){let s=r[t];if(!s)throw new Error(`unknown writing-mode: ${t}`);let o=s[i||"ltr"];if(!o)throw new Error(`unknown direction: ${i}`);for(let u of o){let c=e.replace(u.regexp,u.to);if(c!==e)return c}return e}var Im={"horizontal-tb":{ltr:[{logical:"inline-start",physical:"left"},{logical:"inline-end",physical:"right"},{logical:"block-start",physical:"top"},{logical:"block-end",physical:"bottom"},{logical:"inline-size",physical:"width"},{logical:"block-size",physical:"height"}],rtl:[{logical:"inline-start",physical:"right"},{logical:"inline-end",physical:"left"},{logical:"block-start",physical:"top"},{logical:"block-end",physical:"bottom"},{logical:"inline-size",physical:"width"},{logical:"block-size",physical:"height"}]},"vertical-rl":{ltr:[{logical:"inline-start",physical:"top"},{logical:"inline-end",physical:"bottom"},{logical:"block-start",physical:"right"},{logical:"block-end",physical:"left"},{logical:"inline-size",physical:"height"},{logical:"block-size",physical:"width"}],rtl:[{logical:"inline-start",physical:"bottom"},{logical:"inline-end",physical:"top"},{logical:"block-start",physical:"right"},{logical:"block-end",physical:"left"},{logical:"inline-size",physical:"height"},{logical:"block-size",physical:"width"}]},"vertical-lr":{ltr:[{logical:"inline-start",physical:"top"},{logical:"inline-end",physical:"bottom"},{logical:"block-start",physical:"left"},{logical:"block-end",physical:"right"},{logical:"inline-size",physical:"height"},{logical:"block-size",physical:"width"}],rtl:[{logical:"inline-start",physical:"bottom"},{logical:"inline-end",physical:"top"},{logical:"block-start",physical:"left"},{logical:"block-end",physical:"right"},{logical:"inline-size",physical:"height"},{logical:"block-size",physical:"width"}]}},NP=Am(Im,!0);function Om(e,t,i){return Nm(e,t,i||null,NP)}var IP=Am(Im,!1);function Rm(e,t,i){return Nm(e,t,i||null,IP)}var OP={"horizontal-tb":[{logical:"line-left",physical:"left"},{logical:"line-right",physical:"right"},{logical:"over",physical:"top"},{logical:"under",physical:"bottom"}],"vertical-rl":[{logical:"line-left",physical:"top"},{logical:"line-right",physical:"bottom"},{logical:"over",physical:"right"},{logical:"under",physical:"left"}],"vertical-lr":[{logical:"line-left",physical:"top"},{logical:"line-right",physical:"bottom"},{logical:"over",physical:"right"},{logical:"under",physical:"left"}]};function RP(e,t){let i=OP[t];if(!i)throw new Error(`unknown writing-mode: ${t}`);for(let r=0;r<i.length;r++)if(i[r].physical===e)return i[r].logical;return e}function fd(e,t,i){var r;let s=t,o={width:s.style.width,height:s.style.height};function u(v){return e.getElementComputedStyle(t).getPropertyValue(v)}let c=u("writing-mode")!=="horizontal-tb",m=c?"height":"width",p=c?"width":"height";function y(v,w){s.style[v]=w;let T=u(v);return s.style[v]=o[v],T}let S={};for(let v of i){let w;switch(v){case"max-content inline size":w=y(m,"max-content");break;case"min-content inline size":w=y(m,"min-content");break;case"fit-content inline size":w=y(m,"fit-content");break;case"max-content block size":w=y(p,"max-content");break;case"min-content block size":w=y(p,"min-content");break;case"fit-content block size":w=y(p,"fit-content");break;case"max-content width":w=y("width","max-content");break;case"max-content height":w=y("height","max-content");break;case"min-content width":w=y("width","min-content");break;case"min-content height":w=y("height","min-content");break;case"fit-content width":w=y("width","fit-content");break;case"fit-content height":w=y("height","fit-content");break}w==="0px"&&t.childNodes.length===1&&((r=t.firstElementChild)==null?void 0:r.localName)==="img"&&!t.firstElementChild.complete&&(w="1px"),S[v]=parseFloat(w)}return S}function ds(e){var t,i;return((t=e?.style)==null?void 0:t["box-decoration-break"])==="clone"||((i=e?.style)==null?void 0:i["-webkit-box-decoration-break"])==="clone"}function Lm(e){let t=e.getAttribute("data-viv-box-break");return t?t.split(" "):[]}function _m(e,t){e.setAttribute("data-viv-box-break",t.join(" "))}function li(e,t){let i=Lm(e);i.includes(t)||(i.push(t),_m(e,i))}function LP(e){let t=e.getAttribute("data-viv-margin-discard");return t?t.split(" "):[]}function _P(e,t){e.setAttribute("data-viv-margin-discard",t.join(" "))}function bd(e,t){let i=LP(e);i.includes(t)||(i.push(t),_P(e,i))}function BP(e){let t=e.name,i=e.value;switch(t){case"page-break-before":case"page-break-after":case"page-break-inside":return{name:t.replace(/^page-/,""),value:i===N.always?N.page:i,important:e.important};default:return e}}var yd={page:!0,left:!0,right:!0,recto:!0,verso:!0,column:!0,region:!0};function jt(e){return!!yd[e]}var FP={left:!0,right:!0,recto:!0,verso:!0};function us(e){return!!FP[e]}var zP={avoid:!0,"avoid-page":!0,"avoid-column":!0,"avoid-region":!0};function Ba(e){return!!zP[e]}function qt(e,t){if(e)if(t){if(us(t))return t;if(us(e))return e;{let i=jt(e),r=jt(t);if(i&&r)switch(t){case"column":return e;case"region":return e==="column"?t:e;default:return t}else return r?t:i?e:Ba(t)?t:Ba(e)?e:t}}else return e;else return t}function Bm(e){return jt(e)?e:"auto"}De("SIMPLE_PROPERTY",BP);var cs=k(Y());function MP(e,t){return(0,cs.default)(e,t,0)}function Fm(e){return e.reduce((t,i)=>i[0]===cs.default.DELETE?t:t+i[1],"")}function DP(e,t){return zm(e,t,1)}function WP(e,t){return zm(e,t,-1)}function zm(e,t,i){let r=0,s=0;return e.some(o=>{for(let u=0;u<o[1].length;u++){switch(o[0]*i){case cs.default.INSERT:r++;break;case cs.default.DELETE:r--,s++;break;case cs.default.EQUAL:s++;break}if(s>t)return!0}return!1}),Math.max(Math.min(t,s-1)+r,0)}var vd;(e=>{function t(i){return i&&i.formattingContextType==="Block"}e.isInstanceOfBlockFormattingContext=t})(vd||(vd={}));var rn;(e=>{let t;(i=>(i.INLINE="inline",i.COLUMN="column",i.REGION="region",i.PAGE="page"))(t=e.FloatReference||(e.FloatReference={}))})(rn||(rn={}));var Fa;(e=>{function t(i){return i&&i.flagmentLayoutConstraintType=="AfterIfContinue"}e.isInstanceOfAfterIfContinuesLayoutConstraint=t})(Fa||(Fa={}));var Nr;(e=>{function t(r){return r?r.formattingContextType==="RepetitiveElementsOwner"||dr.isInstanceOfTableFormattingContext(r):!1}e.isInstanceOfRepetitiveElementsOwnerFormattingContext=t;function i(r){return r?r.flagmentLayoutConstraintType==="RepetitiveElementsOwner"||dr.isInstanceOfTableRowLayoutConstraint(r):!1}e.isInstanceOfRepetitiveElementsOwnerLayoutConstraint=i})(Nr||(Nr={}));var dr;(e=>{function t(r){return r&&r.formattingContextType==="Table"}e.isInstanceOfTableFormattingContext=t;function i(r){return r&&r.flagmentLayoutConstraintType==="TableRow"}e.isInstanceOfTableRowLayoutConstraint=i})(dr||(dr={}));var Ui;(e=>{let t;(r=>(r[r.IGNORE=0]="IGNORE",r[r.NEWLINE=1]="NEWLINE",r[r.PRESERVE=2]="PRESERVE"))(t=e.Whitespace||(e.Whitespace={}));let i;(r=>(r[r.NONE=0]="NONE",r[r.CONTENT=1]="CONTENT",r[r.ROOTLESS=2]="ROOTLESS",r[r.ROOTED=3]="ROOTED"))(i=e.ShadowType||(e.ShadowType={}))})(Ui||(Ui={}));var jP={transform:!0,"transform-origin":!0},qP={top:!0,bottom:!0,left:!0,right:!0},Sd=class{constructor(e,t,i){this.target=e,this.name=t,this.value=i}},VP={show:function(e){e.style.visibility="visible"},hide:function(e){e.style.visibility="hidden"},play:function(e){e.currentTime=0,e.play()},pause:function(e){e.pause()},resume:function(e){e.play()},mute:function(e){e.muted=!0},unmute:function(e){e.muted=!1}};function HP(e,t){let i=VP[t];return i?()=>{for(let r=0;r<e.length;r++)try{i(e[r])}catch{}}:null}var xd=class xa extends Dl{constructor(t,i){super(),this.container=t,this.bleedBox=i,f(this,"pageAreaElement",null),f(this,"delayedItems",[]),f(this,"hrefHandler"),f(this,"elementsById",{}),f(this,"dimensions",{width:0,height:0}),f(this,"isFirstPage",!1),f(this,"isLastPage",!1),f(this,"isBlankPage",!1),f(this,"isAutoPageWidth",!0),f(this,"isAutoPageHeight",!0),f(this,"spineIndex",0),f(this,"position",null),f(this,"offset",-1),f(this,"side",null),f(this,"fetchers",[]),f(this,"marginBoxes",{top:{},bottom:{},left:{},right:{}}),f(this,"pageType",null),this.hrefHandler=r=>{let s=r.currentTarget,o=s.getAttribute("href")||s.getAttributeNS("http://www.w3.org/1999/xlink","href");if(o){let u={type:"hyperlink",target:null,currentTarget:null,anchorElement:s,href:o,preventDefault(){r.preventDefault()}};this.dispatchEvent(u)}}}setAutoPageWidth(t){this.isAutoPageWidth=t,t?this.container.setAttribute(xa.AUTO_PAGE_WIDTH_ATTRIBUTE,"true"):this.container.removeAttribute(xa.AUTO_PAGE_WIDTH_ATTRIBUTE)}setAutoPageHeight(t){this.isAutoPageHeight=t,t?this.container.setAttribute(xa.AUTO_PAGE_HEIGHT_ATTRIBUTE,"true"):this.container.removeAttribute(xa.AUTO_PAGE_HEIGHT_ATTRIBUTE)}registerElementWithId(t,i){let r=this.elementsById[i];r?r.push(t):this.elementsById[i]=[t]}finish(t,i){Object.keys(this.elementsById).forEach(o=>{let u=this.elementsById[o];for(let c=0;c<u.length;)this.container.contains(u[c])?c++:u.splice(c,1);u.length===0&&delete this.elementsById[o]});let r=this.delayedItems;for(let o=0;o<r.length;o++){let u=r[o];u.target===this.container&&u.name==="transform"&&!this.isAutoPageWidth&&!this.isAutoPageHeight||j(u.target,u.name,u.value.toString())}let s=i.getElementClientRect(this.container);this.dimensions.width=s.width,this.dimensions.height=s.height;for(let o=0;o<t.length;o++){let u=t[o],c=this.elementsById[u.ref],m=this.elementsById[u.observer];if(c&&m){let p=HP(c,u.action);if(p)for(let y=0;y<m.length;y++)m[y].addEventListener(u.event,p,!1)}}}};f(xd,"AUTO_PAGE_WIDTH_ATTRIBUTE","data-vivliostyle-auto-page-width"),f(xd,"AUTO_PAGE_HEIGHT_ATTRIBUTE","data-vivliostyle-auto-page-height");var Mm=xd,nn="data-adapt-spec",Yt=Ui.Whitespace;function Dm(e){switch(e){case"normal":case"nowrap":return Yt.IGNORE;case"pre-line":return Yt.NEWLINE;case"pre":case"pre-wrap":case"break-spaces":return Yt.PRESERVE;default:return null}}function Tt(e,t){if(!e)return!0;if(e.nodeType==1)return!1;let i=e.textContent;switch(t){case Yt.PRESERVE:return i.length==0;case Yt.NEWLINE:return!!i.match(/^[ \t]*$/);case Yt.IGNORE:default:return!!i.match(/^[ \t\r\n\f]*$/)}}var UP=class{constructor(e,t){this.flowName=e,this.parentFlowName=t,f(this,"forcedBreakOffsets",[]),f(this,"formattingContext",null)}},GP=class{constructor(e,t,i,r,s,o,u,c,m){this.flowName=e,this.element=t,this.startOffset=i,this.priority=r,this.linger=s,this.exclusive=o,this.repeated=u,this.last=c,this.breakBefore=m,f(this,"startPage",-1)}isBetter(e){return this.exclusive?!e.exclusive||this.priority>e.priority?!0:this.last:!1}};function $P(e,t){return e.top-t.top}function YP(e,t){return t.right-e.right}function Wm(e,t){var i,r;return e===t?!0:!e||!t?!1:(e.node===t.node||!!e.shadowContext&&!!t.shadowContext&&e.shadowType===Ui.ShadowType.ROOTLESS&&t.shadowType===Ui.ShadowType.ROOTLESS&&((i=e.node)==null?void 0:i.outerHTML)===((r=t.node)==null?void 0:r.outerHTML))&&e.shadowType===t.shadowType&&Cd(e.shadowContext,t.shadowContext)&&Cd(e.nodeShadow,t.nodeShadow)&&Wm(e.shadowSibling,t.shadowSibling)}function ur(e,t){if(e===t)return!0;if(!e||!t||e.offsetInNode!==t.offsetInNode||e.after!==t.after||e.steps.length!==t.steps.length)return!1;for(let i=0;i<e.steps.length;i++)if(!Wm(e.steps[i],t.steps[i]))return!1;return!0}function XP(e){return{steps:[{node:e,shadowType:fi.NONE,shadowContext:null,nodeShadow:null,shadowSibling:null,formattingContext:null,fragmentIndex:0}],offsetInNode:0,after:!1,preprocessedTextContent:null}}function za(e,t){return{steps:[{node:e.sourceNode,shadowType:fi.NONE,shadowContext:e.shadowContext,nodeShadow:null,shadowSibling:null,formattingContext:null,fragmentIndex:t??e.fragmentIndex}],offsetInNode:0,after:!1,preprocessedTextContent:e.preprocessedTextContent}}function Ma(e,t){let i=new hs(e.node,t,0);return i.shadowType=e.shadowType,i.shadowContext=e.shadowContext,i.nodeShadow=e.nodeShadow,i.shadowSibling=e.shadowSibling?Ma(e.shadowSibling,t.copy()):null,i.formattingContext=e.formattingContext,i.fragmentIndex=e.fragmentIndex+1,i}var fi=Ui.ShadowType,wd=class{constructor(e,t,i,r,s,o,u){this.owner=e,this.root=t,this.xmldoc=i,this.parentShadow=r,this.type=o,this.styler=u,f(this,"subShadow",null),s&&(s.subShadow=this)}equals(e){return e?this.owner===e.owner&&this.xmldoc===e.xmldoc&&this.type===e.type&&Cd(this.parentShadow,e.parentShadow):!1}};function Cd(e,t){return e===t||!!e&&!!t&&e.equals(t)}var KP=class{constructor(e,t){this.outer=e,this.count=t}},hs=class hT{constructor(t,i,r){this.sourceNode=t,this.parent=i,this.boxOffset=r,f(this,"offsetInNode",0),f(this,"after",!1),f(this,"shadowType"),f(this,"shadowContext"),f(this,"nodeShadow",null),f(this,"shadowSibling",null),f(this,"shared",!1),f(this,"inline",!0),f(this,"overflow",!1),f(this,"breakPenalty"),f(this,"display",null),f(this,"floatReference"),f(this,"floatSide",null),f(this,"clearSide",null),f(this,"floatMinWrapBlock",null),f(this,"columnSpan",null),f(this,"verticalAlign","baseline"),f(this,"captionSide","top"),f(this,"inlineBorderSpacing",0),f(this,"blockBorderSpacing",0),f(this,"flexContainer",!1),f(this,"whitespace"),f(this,"hyphenateCharacter"),f(this,"breakWord"),f(this,"establishesBFC",!1),f(this,"containingBlockForAbsolute",!1),f(this,"breakBefore",null),f(this,"breakAfter",null),f(this,"viewNode",null),f(this,"clearSpacer",null),f(this,"inheritedProps"),f(this,"vertical"),f(this,"direction"),f(this,"firstPseudo"),f(this,"lang",null),f(this,"preprocessedTextContent",null),f(this,"formattingContext"),f(this,"repeatOnBreak",null),f(this,"pluginProps",{}),f(this,"fragmentIndex",1),f(this,"afterIfContinues",null),f(this,"footnotePolicy",null),f(this,"pageType"),this.shadowType=fi.NONE,this.shadowContext=i?i.shadowContext:null,this.breakPenalty=i?i.breakPenalty:0,this.floatReference=rn.FloatReference.INLINE,this.whitespace=i?i.whitespace:Yt.IGNORE,this.hyphenateCharacter=i?i.hyphenateCharacter:null,this.breakWord=i?i.breakWord:!1,this.inheritedProps=i?i.inheritedProps:{},this.vertical=i?i.vertical:!1,this.direction=i?i.direction:"ltr",this.firstPseudo=i?i.firstPseudo:null,this.formattingContext=i?i.formattingContext:null,this.pageType=i?i.pageType:null}resetView(){this.inline=!0,this.breakPenalty=this.parent?this.parent.breakPenalty:0,this.viewNode=null,this.clearSpacer=null,this.offsetInNode=0,this.after=!1,this.display=null,this.floatReference=rn.FloatReference.INLINE,this.floatSide=null,this.clearSide=null,this.floatMinWrapBlock=null,this.columnSpan=null,this.verticalAlign="baseline",this.flexContainer=!1,this.whitespace=this.parent?this.parent.whitespace:Yt.IGNORE,this.hyphenateCharacter=this.parent?this.parent.hyphenateCharacter:null,this.breakWord=this.parent?this.parent.breakWord:!1,this.breakBefore=null,this.breakAfter=null,this.nodeShadow=null,this.establishesBFC=!1,this.containingBlockForAbsolute=!1,this.vertical=this.parent?this.parent.vertical:!1,this.nodeShadow=null,this.preprocessedTextContent=null,this.formattingContext=this.parent?this.parent.formattingContext:null,this.repeatOnBreak=null,this.pluginProps={},this.fragmentIndex=1,this.afterIfContinues=null,this.footnotePolicy=null}cloneItem(){let t=new hT(this.sourceNode,this.parent,this.boxOffset);return t.offsetInNode=this.offsetInNode,t.after=this.after,t.nodeShadow=this.nodeShadow,t.shadowType=this.shadowType,t.shadowContext=this.shadowContext,t.shadowSibling=this.shadowSibling,t.inline=this.inline,t.breakPenalty=this.breakPenalty,t.display=this.display,t.floatReference=this.floatReference,t.floatSide=this.floatSide,t.clearSide=this.clearSide,t.floatMinWrapBlock=this.floatMinWrapBlock,t.columnSpan=this.columnSpan,t.verticalAlign=this.verticalAlign,t.captionSide=this.captionSide,t.inlineBorderSpacing=this.inlineBorderSpacing,t.blockBorderSpacing=this.blockBorderSpacing,t.establishesBFC=this.establishesBFC,t.containingBlockForAbsolute=this.containingBlockForAbsolute,t.flexContainer=this.flexContainer,t.whitespace=this.whitespace,t.hyphenateCharacter=this.hyphenateCharacter,t.breakWord=this.breakWord,t.breakBefore=this.breakBefore,t.breakAfter=this.breakAfter,t.viewNode=this.viewNode,t.clearSpacer=this.clearSpacer,t.firstPseudo=this.firstPseudo,t.vertical=this.vertical,t.overflow=this.overflow,t.preprocessedTextContent=this.preprocessedTextContent,t.formattingContext=this.formattingContext,t.repeatOnBreak=this.repeatOnBreak,t.pluginProps=Object.create(this.pluginProps),t.fragmentIndex=this.fragmentIndex,t.afterIfContinues=this.afterIfContinues,t.footnotePolicy=this.footnotePolicy,t}modify(){return this.shared?this.cloneItem():this}copy(){let t=this;do{if(t.shared)break;t.shared=!0,t=t.parent}while(t);return this}clone(){let t=this.cloneItem(),i=t,r;for(;(r=i.parent)!=null;)r=r.cloneItem(),i.parent=r,i=r;return t}toNodePositionStep(){var t;return{node:this.sourceNode,shadowType:this.shadowType,shadowContext:this.shadowContext,nodeShadow:this.nodeShadow,shadowSibling:this.shadowSibling?this.shadowSibling.toNodePositionStep():null,formattingContext:this.formattingContext,fragmentIndex:((t=this.viewNode)==null?void 0:t.parentNode)===null?0:this.fragmentIndex}}toNodePosition(){var t,i,r;let s=this,o=[];s.shadowType===Ui.ShadowType.ROOTLESS&&(s.floatReference!==rn.FloatReference.INLINE||s.floatSide==="footnote")&&(r=(i=(t=s.shadowContext)==null?void 0:t.styler)==null?void 0:i.style)!=null&&r._pseudos&&(s=s.parent);do(!s.firstPseudo||!s.parent||s.parent.firstPseudo===s.firstPseudo)&&o.push(s.toNodePositionStep()),s=s.parent;while(s);let u=this.preprocessedTextContent?WP(this.preprocessedTextContent,this.offsetInNode):this.offsetInNode;return{steps:o,offsetInNode:u,after:this.after,preprocessedTextContent:this.preprocessedTextContent}}isInsideBFC(){let t=this.parent;for(;t;){if(t.establishesBFC)return!0;t=t.parent}return!1}getContainingBlockForAbsolute(){let t=this.parent;for(;t;){if(t.containingBlockForAbsolute)return t;t=t.parent}return null}belongsTo(t){return this.formattingContext===t&&!!this.parent&&this.parent.formattingContext===t}},cr=class pT{constructor(t){this.primary=t,f(this,"floats",null)}clone(){let t=new pT(this.primary);if(this.floats){t.floats=[];for(let i=0;i<this.floats.length;++i)t.floats[i]=this.floats[i]}return t}isSamePosition(t){if(!t)return!1;if(this===t)return!0;if(!ur(this.primary,t.primary))return!1;if(this.floats){if(!t.floats||this.floats.length!==t.floats.length)return!1;for(let i=0;i<this.floats.length;i++)if(!ur(this.floats[i],t.floats[i]))return!1}else if(t.floats)return!1;return!0}},ZP=class mT{constructor(t,i){this.chunkPosition=t,this.flowChunk=i}clone(){return new mT(this.chunkPosition.clone(),this.flowChunk)}isSamePosition(t){return!!t&&(this===t||this.chunkPosition.isSamePosition(t.chunkPosition))}},QP=class gT{constructor(){f(this,"positions",[]),f(this,"startBreakType",null),f(this,"breakAfter",null)}clone(){let t=new gT,i=this.positions,r=t.positions;for(let s=0;s<i.length;s++)r[s]=i[s].clone();return t.startBreakType=this.startBreakType,t.breakAfter=this.breakAfter,t}isSamePosition(t){if(this===t)return!0;if(!t||this.positions.length!==t.positions.length)return!1;for(let i=0;i<this.positions.length;i++)if(!this.positions[i].isSamePosition(t.positions[i]))return!1;return!0}hasContent(t){return this.positions.length>0&&this.positions[0].flowChunk.startOffset<=t}},JP=class fT{constructor(){f(this,"page",0),f(this,"flows",{}),f(this,"flowPositions",{}),f(this,"isBlankPage",!1),f(this,"highestSeenOffset",0),f(this,"highestSeenNode"),f(this,"lookupPositionOffset")}clone(){let t=new fT;t.page=this.page,t.isBlankPage=this.isBlankPage,t.highestSeenNode=this.highestSeenNode,t.highestSeenOffset=this.highestSeenOffset,t.lookupPositionOffset=this.lookupPositionOffset,t.flows=this.flows;for(let i in this.flowPositions)t.flowPositions[i]=this.flowPositions[i].clone();return t}isSamePosition(t){if(this===t)return!0;if(!t||this.page!==t.page)return!1;let i=Object.keys(this.flowPositions),r=Object.keys(t.flowPositions);if(i.length!==r.length)return!1;for(let s of i)if(!this.flowPositions[s].isSamePosition(t.flowPositions[s]))return!1;return!0}hasContent(t,i){let r=this.flowPositions[t];return r?r.hasContent(i):!1}startSideOfFlow(t){var i;let r=(i=this.flowPositions[t])==null?void 0:i.startBreakType;return r&&us(r)?r:"any"}firstFlowChunkOfFlow(t){let i=this.flowPositions[t];if(!i)return null;let r=i.positions[0];return r?r.flowChunk:null}},jm=class{constructor(e){this.element=e,f(this,"left",0),f(this,"top",0),f(this,"marginLeft",0),f(this,"marginRight",0),f(this,"marginTop",0),f(this,"marginBottom",0),f(this,"borderLeft",0),f(this,"borderRight",0),f(this,"borderTop",0),f(this,"borderBottom",0),f(this,"paddingLeft",0),f(this,"paddingRight",0),f(this,"paddingTop",0),f(this,"paddingBottom",0),f(this,"width",0),f(this,"height",0),f(this,"originX",0),f(this,"originY",0),f(this,"exclusions",null),f(this,"innerShape",null),f(this,"computedBlockSize",0),f(this,"snapWidth",0),f(this,"snapHeight",0),f(this,"snapOffsetX",0),f(this,"snapOffsetY",0),f(this,"vertical",!1),f(this,"rtl",!1),f(this,"borderBoxSizing",!1)}getInsetTop(){return this.marginTop+(this.borderBoxSizing?0:this.borderTop+this.paddingTop)}getInsetBottom(){return this.marginBottom+(this.borderBoxSizing?0:this.borderBottom+this.paddingBottom)}getInsetLeft(){return this.marginLeft+(this.borderBoxSizing?0:this.borderLeft+this.paddingLeft)}getInsetRight(){return this.marginRight+(this.borderBoxSizing?0:this.borderRight+this.paddingRight)}getInsetBefore(){return this.vertical?this.getInsetRight():this.getInsetTop()}getInsetAfter(){return this.vertical?this.getInsetLeft():this.getInsetBottom()}getInsetStart(){return this.vertical?this.getInsetTop():this.getInsetLeft()}getInsetEnd(){return this.vertical?this.getInsetBottom():this.getInsetRight()}getBeforeEdge(e){return this.vertical?e.right:e.top}getAfterEdge(e){return this.vertical?e.left:e.bottom}getStartEdge(e){return this.vertical?this.rtl?e.bottom:e.top:this.rtl?e.right:e.left}getEndEdge(e){return this.vertical?this.rtl?e.top:e.bottom:this.rtl?e.left:e.right}getInlineSize(e){return this.vertical?e.bottom-e.top:e.right-e.left}getBoxSize(e){return this.vertical?e.right-e.left:e.bottom-e.top}getBoxDir(){return this.vertical?-1:1}getInlineDir(){return this.rtl?-1:1}copyFrom(e){this.element=e.element,this.left=e.left,this.top=e.top,this.marginLeft=e.marginLeft,this.marginRight=e.marginRight,this.marginTop=e.marginTop,this.marginBottom=e.marginBottom,this.borderLeft=e.borderLeft,this.borderRight=e.borderRight,this.borderTop=e.borderTop,this.borderBottom=e.borderBottom,this.paddingLeft=e.paddingLeft,this.paddingRight=e.paddingRight,this.paddingTop=e.paddingTop,this.paddingBottom=e.paddingBottom,this.width=e.width,this.height=e.height,this.originX=e.originX,this.originY=e.originY,this.innerShape=e.innerShape,this.exclusions=e.exclusions,this.computedBlockSize=e.computedBlockSize,this.snapWidth=e.snapWidth,this.snapHeight=e.snapHeight,this.vertical=e.vertical,this.rtl=e.rtl,this.borderBoxSizing=e.borderBoxSizing}setVerticalPosition(e,t){this.top=e,this.height=t,j(this.element,"top",`${e}px`),j(this.element,"height",`${t}px`)}setHorizontalPosition(e,t){this.left=e,this.width=t,j(this.element,"left",`${e}px`),j(this.element,"width",`${t}px`)}setBlockPosition(e,t){if(this.vertical){let i=t+this.marginLeft+this.marginRight+(this.borderBoxSizing?0:this.paddingLeft+this.paddingRight+this.borderLeft+this.borderRight);this.setHorizontalPosition(e+i*this.getBoxDir(),t)}else this.setVerticalPosition(e,t)}setInlinePosition(e,t){if(this.vertical)if(this.rtl){let i=t+this.marginTop+this.marginBottom+(this.borderBoxSizing?0:this.paddingTop+this.paddingBottom+this.borderTop+this.borderBottom);this.setVerticalPosition(e+i*this.getInlineDir(),t)}else this.setVerticalPosition(e,t);else if(this.rtl){let i=t+this.marginLeft+this.marginRight+(this.borderBoxSizing?0:this.paddingLeft+this.paddingRight+this.borderLeft+this.borderRight);this.setHorizontalPosition(e+i*this.getInlineDir(),t)}else this.setHorizontalPosition(e,t)}clear(){let e=this.element,t;for(;t=e.lastChild;)e.removeChild(t)}getInnerShape(){let e=this.getInnerRect();return this.innerShape?this.innerShape.withOffset(e.x1,e.y1):td(e.x1,e.y1,e.x2,e.y2)}getInnerRect(){let e=this.originX+this.left+this.getInsetLeft(),t=this.originY+this.top+this.getInsetTop();return new oi(e,t,e+this.width,t+this.height)}getPaddingRect(){let e=this.originX+this.left+this.marginLeft+this.borderLeft,t=this.originY+this.top+this.marginTop+this.borderTop,i=this.paddingLeft+this.width+this.paddingRight,r=this.paddingTop+this.height+this.paddingBottom;return new oi(e,t,e+i,t+r)}getOuterShape(e,t){let i=this.getOuterRect();return sm(e,i.x1,i.y1,i.x2-i.x1,i.y2-i.y1,t)}getOuterRect(){let e=this.originX+this.left,t=this.originY+this.top,i=this.getInsetLeft()+this.width+this.getInsetRight(),r=this.getInsetTop()+this.height+this.getInsetBottom();return new oi(e,t,e+i,t+r)}},Da=class extends ji{constructor(e,t,i,r){super(),this.elem=e,this.context=t,this.rootContentValue=i,this.exprContentListener=r}visitStrInner(e,t){var i;if(!t){if(((i=this.elem.lastChild)==null?void 0:i.nodeType)===3){this.elem.lastChild.textContent+=e;return}t=this.elem.ownerDocument.createTextNode(e)}this.elem.appendChild(t)}visitStr(e){return this.visitStrInner(e.str),null}visitURL(e){if(this.rootContentValue.url)this.elem.setAttribute("src",e.url);else{let t=this.elem.ownerDocument.createElementNS("http://www.w3.org/1999/xhtml","img");t.setAttribute("src",e.url),this.elem.appendChild(t)}return null}visitSpaceList(e){return this.visitValues(e.values),null}visitExpr(e){let t=e.toExpr(),i=t.evaluate(this.context);if(typeof i=="string"){t instanceof lt&&(i=tn(t.scope,new ki(i,null),"").stringValue()),this.elem.ownerDocument;let r=this.exprContentListener(t,i,this.elem.ownerDocument);!r&&i&&t instanceof dt&&t.str.startsWith("running-element-")&&(i=""),this.visitStrInner(i,r)}return null}};function hr(e){return e!=null&&e!==he&&e!==N.normal&&e!==N.none&&!Ee(e)}var st=rn.FloatReference;function eA(e){switch(e){case"inline":return st.INLINE;case"column":return st.COLUMN;case"region":return st.REGION;case"page":return st.PAGE;default:throw new Error(`Unknown float-reference: ${e}`)}}function sn(e){switch(e){case st.INLINE:return!1;case st.COLUMN:case st.REGION:case st.PAGE:return!0;default:throw new Error(`Unknown float-reference: ${e}`)}}function qm(e,t,i,r){let s=t?"vertical-rl":"horizontal-tb";if((e==="top"||e==="bottom")&&(e=Rm(e,s,i)),e==="block-start"&&(e="inline-start"),e==="block-end"&&(e="inline-end"),e==="inline-start"||e==="inline-end"){let o=Om(e,s,i),u=RP(o,s);u==="line-left"?e="left":u==="line-right"&&(e="right")}else e==="inside"?e=r==="left"?"right":"left":e==="outside"&&(e=r==="left"?"left":"right");return e!=="left"&&e!=="right"&&(ee.warn(`Invalid float value: ${e}. Fallback to left.`),e="left"),e}var Vm=class{constructor(e,t,i,r,s,o){this.nodePosition=e,this.floatReference=t,this.floatSide=i,this.clearSide=r,this.flowName=s,this.floatMinWrapBlock=o,f(this,"order",null),f(this,"id",null)}getOrder(){if(this.order===null)throw new Error("The page float is not yet added");return this.order}getId(){if(!this.id)throw new Error("The page float is not yet added");return this.id}isAllowedOnContext(e){return e.isAnchorAlreadyAppeared(this.getId())}isAllowedToPrecede(e){return!1}},tA=class{constructor(){f(this,"floats",[]),f(this,"nextPageFloatIndex",0)}nextOrder(){return this.nextPageFloatIndex++}createPageFloatId(e){return`pf${e}`}addPageFloat(e){if(this.floats.findIndex(t=>ur(t.nodePosition,e.nodePosition))>=0)throw new Error("A page float with the same source node is already registered");{let t=e.order=this.nextOrder();e.id=this.createPageFloatId(t),this.floats.push(e)}}findPageFloatByNodePosition(e){let t=this.floats.findIndex(i=>ur(i.nodePosition,e));return t>=0?this.floats[t]:null}findPageFloatById(e){let t=this.floats.findIndex(i=>i.id===e);return t>=0?this.floats[t]:null}},Hm=class{constructor(e,t,i,r,s,o){this.floatReference=e,this.floatSide=t,this.clearSide=i,this.continuations=r,this.area=s,this.continues=o}hasFloat(e){return this.continuations.some(t=>t.float===e)}findNotAllowedFloat(e){for(let t=this.continuations.length-1;t>=0;t--){let i=this.continuations[t].float;if(!i.isAllowedOnContext(e))return i}return null}getOuterShape(){return this.area.getOuterShape(null,null)}getOuterRect(){return this.area.getOuterRect()}getOrder(){let e=this.continuations.map(t=>t.float);return Math.min.apply(null,e.map(t=>t.getOrder()))}shouldBeStashedBefore(e){return this.getOrder()<e.getOrder()}addContinuations(e){e.forEach(t=>{this.continuations.push(t)})}getFlowName(){let e=this.continuations[0].float.flowName;return this.continuations.every(t=>t.float.flowName===e),e}},Um=class{constructor(e,t){this.float=e,this.nodePosition=t}equals(e){return e?this===e?!0:this.float===e.float&&ur(this.nodePosition,e.nodePosition):!1}},ps=class{constructor(e,t,i,r,s,o,u){this.parent=e,this.floatReference=t,this.container=i,this.flowName=r,this.generatingNodePosition=s,f(this,"children",[]),f(this,"writingMode"),f(this,"direction"),f(this,"invalidated",!1),f(this,"floatStore"),f(this,"forbiddenFloats",[]),f(this,"floatFragments",[]),f(this,"stashedFloatFragments",[]),f(this,"floatAnchors",{}),f(this,"floatsDeferredToNext",[]),f(this,"floatsDeferredFromPrevious"),f(this,"layoutConstraints",[]),f(this,"locked",!1),e&&e.children.push(this),this.writingMode=o||e&&e.writingMode||N.horizontal_tb,this.direction=u||e&&e.direction||N.ltr,this.floatStore=e?e.floatStore:new tA;let c=this.getPreviousSibling();this.floatsDeferredFromPrevious=c?[].concat(c.floatsDeferredToNext):[]}getParent(e){if(!this.parent)throw new Error(`No PageFloatLayoutContext for ${e}`);return this.parent}getPreviousSiblingOf(e,t,i,r){let s=this.children.indexOf(e);s<0&&(s=this.children.length);for(let o=s-1;o>=0;o--){let u=this.children[o];if(u.floatReference===t&&u.flowName===i&&ur(u.generatingNodePosition,r)||(u=u.getPreviousSiblingOf(null,t,i,r),u))return u}return null}getPreviousSibling(){let e=this,t=this.parent,i;for(;t;){if(i=t.getPreviousSiblingOf(e,this.floatReference,this.flowName,this.generatingNodePosition),i)return i;e=t,t=t.parent}return null}getContainer(e){return!e||e===this.floatReference?this.container:this.getParent(e).getContainer(e)}setContainer(e){this.container=e,this.reattachFloatFragments()}addPageFloat(e){this.floatStore.addPageFloat(e)}getPageFloatLayoutContext(e){return e===this.floatReference?this:this.getParent(e).getPageFloatLayoutContext(e)}findPageFloatByNodePosition(e){return this.floatStore.findPageFloatByNodePosition(e)}forbid(e){let t=e.getId(),i=e.floatReference;i===this.floatReference?this.forbiddenFloats.includes(t)||(this.forbiddenFloats.push(t),new an().findByFloat(e).forbid(e,this)):this.getParent(i).forbid(e)}isForbidden(e){let t=e.getId(),i=e.floatReference;return i===this.floatReference?this.forbiddenFloats.includes(t):this.getParent(i).isForbidden(e)}addPageFloatFragment(e,t){let i=e.floatReference;i!==this.floatReference?this.getParent(i).addPageFloatFragment(e,t):this.floatFragments.includes(e)||(this.floatFragments.push(e),this.floatFragments.sort((r,s)=>r.getOrder()-s.getOrder())),t||this.invalidate()}removePageFloatFragment(e,t){let i=e.floatReference;if(i!==this.floatReference)this.getParent(i).removePageFloatFragment(e,t);else{let r=this.floatFragments.indexOf(e);if(r>=0){let s=this.floatFragments.splice(r,1)[0],o=s.area&&s.area.element;o&&o.parentNode&&o.parentNode.removeChild(o),t||this.invalidate()}}}findPageFloatFragment(e){if(e.floatReference!==this.floatReference)return this.getParent(e.floatReference).findPageFloatFragment(e);let t=this.floatFragments.findIndex(i=>i.hasFloat(e));return t>=0?this.floatFragments[t]:null}hasFloatFragments(e){return this.floatFragments.length>0&&(!e||this.floatFragments.some(e))?!0:this.parent?this.parent.hasFloatFragments(e):!1}hasContinuingFloatFragmentsInFlow(e){return this.hasFloatFragments(t=>t.continues&&t.getFlowName()===e)}registerPageFloatAnchor(e,t){this.floatAnchors[e.getId()]=t}collectPageFloatAnchors(){let e=Object.assign({},this.floatAnchors);return this.children.reduce((t,i)=>Object.assign(t,i.collectPageFloatAnchors()),e)}isAnchorAlreadyAppeared(e){if(this.getDeferredPageFloatContinuations().some(i=>i.float.getId()===e))return!0;let t=this.collectPageFloatAnchors()[e];return t&&this.container&&this.container.element?this.container.element.contains(t):!1}deferPageFloat(e){let t=e.float;if(t.floatReference===this.floatReference){let i=this.floatsDeferredToNext.findIndex(r=>r.float===t);i>=0?this.floatsDeferredToNext.splice(i,1,e):this.floatsDeferredToNext.push(e)}else this.getParent(t.floatReference).deferPageFloat(e)}hasPrecedingFloatsDeferredToNext(e,t){if(!t&&e.floatReference!==this.floatReference)return this.getParent(e.floatReference).hasPrecedingFloatsDeferredToNext(e,!1);let i=e.getOrder();return this.floatsDeferredToNext.some(r=>r.float.getOrder()<i&&!e.isAllowedToPrecede(r.float))?!0:this.parent?this.parent.hasPrecedingFloatsDeferredToNext(e,!0):!1}getLastFollowingFloatInFragments(e){let t=e.getOrder(),i=null;if(this.floatFragments.forEach(r=>{r.continuations.forEach(s=>{let o=s.float,u=o.getOrder();u>t&&(!i||u>i.getOrder())&&(i=o)})}),this.parent){let r=this.parent.getLastFollowingFloatInFragments(e);r&&(!i||r.getOrder()>i.getOrder())&&(i=r)}return i}getDeferredPageFloatContinuations(e){e=e||this.flowName;let t=this.floatsDeferredFromPrevious.filter(i=>!e||i.float.flowName===e);return this.parent&&(t=this.parent.getDeferredPageFloatContinuations(e).concat(t)),t.sort((i,r)=>i.float.getOrder()-r.float.getOrder())}getPageFloatContinuationsDeferredToNext(e){e=e||this.flowName;let t=this.floatsDeferredToNext.filter(i=>!e||i.float.flowName===e);return this.parent?this.parent.getPageFloatContinuationsDeferredToNext(e).concat(t):t}getFloatsDeferredToNextInChildContexts(){let e=[],t=[];for(let i=this.children.length-1;i>=0;i--){let r=this.children[i];t.includes(r.flowName)||(t.push(r.flowName),e=e.concat(r.floatsDeferredToNext.map(s=>s.float)),e=e.concat(r.getFloatsDeferredToNextInChildContexts()))}return e}checkAndForbidNotAllowedFloat(){if(this.checkAndForbidFloatFollowingDeferredFloat())return!0;for(let e=this.floatFragments.length-1;e>=0;e--){let t=this.floatFragments[e],i=t.findNotAllowedFloat(this);if(i)return this.locked?this.invalidate():(this.removePageFloatFragment(t),this.forbid(i),this.removeEndFloatFragments(t.floatSide)),!0}return this.floatReference===st.REGION&&this.parent.locked?this.parent.checkAndForbidNotAllowedFloat():!1}checkAndForbidFloatFollowingDeferredFloat(){let e=this.getFloatsDeferredToNextInChildContexts(),t=this.floatFragments.reduce((i,r)=>i.concat(r.continuations.map(s=>s.float)),[]);t.sort((i,r)=>r.getOrder()-i.getOrder());for(let i of t){let r=i.getOrder();if(e.some(s=>!i.isAllowedToPrecede(s)&&r>s.getOrder())){if(this.locked)this.invalidate();else{this.forbid(i);let s=this.findPageFloatFragment(i);this.removePageFloatFragment(s)}return!0}}return!1}finish(){if(!this.checkAndForbidNotAllowedFloat()){for(let e=this.floatsDeferredToNext.length-1;e>=0;e--)if(!this.floatsDeferredToNext[e].float.isAllowedOnContext(this)){if(this.locked){this.invalidate();return}this.floatsDeferredToNext.splice(e,1)}this.floatsDeferredFromPrevious.forEach(e=>{this.floatsDeferredToNext.findIndex(t=>e.equals(t))>=0||this.floatFragments.some(t=>t.hasFloat(e.float))||this.floatsDeferredToNext.push(e)})}}hasSameContainerAs(e){return!!this.container&&!!e.container&&this.container.element===e.container.element}invalidate(){this.invalidated=!0,!this.locked&&(this.container&&(this.children.forEach(e=>{this.hasSameContainerAs(e)&&e.floatFragments.forEach(t=>{let i=t.area.element;i&&i.parentNode&&i.parentNode.removeChild(i)})}),this.container.clear()),this.children.forEach(e=>{e.layoutConstraints.splice(0)}),this.children.splice(0),Object.keys(this.floatAnchors).forEach(e=>{delete this.floatAnchors[e]}))}detachChildren(){let e=this.children.splice(0);return e.forEach(t=>{t.floatFragments.forEach(i=>{let r=i.area.element;r&&r.parentNode&&r.parentNode.removeChild(r)})}),e}attachChildren(e){e.forEach(t=>{this.children.push(t),t.reattachFloatFragments()})}isInvalidated(){return this.invalidated||!!this.parent&&this.parent.isInvalidated()}validate(){this.invalidated=!1}toLogical(e){let t=this.writingMode.toString(),i=this.direction.toString();if(e==="inside"||e==="outside"){let r=!!this.container.element.closest("[data-vivliostyle-page-side='left']");e=e==="inside"?r?"right":"left":r?"left":"right"}return Rm(e,t,i)}toPhysical(e){let t=this.writingMode.toString(),i=this.direction.toString();return Om(e,t,i)}toLogicalFloatSides(e){let t=e.split(" "),i=[];for(let u of t){let c=this.toLogical(u);i.includes(c)||i.push(c)}let r=[],s=!1,o=!1;for(let u=0;u<i.length;u++){let c=i[u];c.includes("block")?s||(i.slice(u+1).some(m=>m.includes("block"))?(r.push("snap-block"),s=!0):r.push(c)):c.includes("inline")&&(o||(i.slice(u+1).some(m=>m.includes("inline"))?(r.push("snap-inline"),o=!0):r.push(c)))}return r}removeEndFloatFragments(e){let t=this.toLogicalFloatSides(e)[0];if(t==="block-end"||t==="inline-end"){let i=0;for(;i<this.floatFragments.length;){let r=this.floatFragments[i];this.toLogicalFloatSides(r.floatSide)[0]===t?this.removePageFloatFragment(r):i++}}}stashEndFloatFragments(e){let t=e.floatReference;if(t!==this.floatReference){this.getParent(t).stashEndFloatFragments(e);return}let i=this.toLogicalFloatSides(e.floatSide)[0];if(i==="block-end"||i==="snap-block"||i==="inline-end"||i==="snap-inline"){let r=0;for(;r<this.floatFragments.length;){let s=this.floatFragments[r],o=this.toLogicalFloatSides(s.floatSide)[0];(o===i||i==="snap-block"&&o==="block-end"||i==="snap-inline"&&o==="inline-end")&&s.shouldBeStashedBefore(e)?(this.stashedFloatFragments.push(s),this.floatFragments.splice(r,1)):r++}}}restoreStashedFragments(e){if(e!==this.floatReference){this.getParent(e).restoreStashedFragments(e);return}this.stashedFloatFragments.forEach(t=>{this.addPageFloatFragment(t,!0)}),this.stashedFloatFragments.splice(0)}discardStashedFragments(e){if(e!==this.floatReference){this.getParent(e).discardStashedFragments(e);return}this.stashedFloatFragments.splice(0)}getStashedFloatFragments(e){return e===this.floatReference?this.stashedFloatFragments.concat().sort((t,i)=>i.getOrder()-t.getOrder()):this.getParent(e).getStashedFloatFragments(e)}getLimitValue(e,t,i,r,s){this.container;let o=this.toLogical(e),u=this.toPhysical(e),c=t&&this.toLogical(t),m=t&&this.toPhysical(t),p=this.getLimitValueInner(o,c,i,r,s);if(this.parent&&this.parent.container){let y=this.parent.getLimitValue(u,m,i,r,s);switch(u){case"top":return Math.max(p,y);case"left":return Math.max(p,y);case"bottom":return Math.min(p,y);case"right":return Math.min(p,y);default:}}return p}getLimitValueInner(e,t,i,r,s){this.container;let o=this.getLimitValuesInner(i,r,s,e,t);switch(e){case"block-start":return this.container.vertical?o.right:o.top;case"block-end":return this.container.vertical?o.left:o.bottom;case"inline-start":return this.container.vertical?this.container.rtl?o.bottom:o.top:this.container.rtl?o.right:o.left;case"inline-end":return this.container.vertical?this.container.rtl?o.top:o.bottom:this.container.rtl?o.left:o.right;default:throw new Error(`Unknown logical side: ${e}`)}}getLimitValuesInner(e,t,i,r,s){this.container;let o=this.container.originX,u=this.container.originY,c=this.container.getPaddingRect(),m={top:c.y1-u,left:c.x1-o,bottom:c.y2-u,right:c.x2-o,floatMinWrapBlockStart:0,floatMinWrapBlockEnd:0};function p(S,v,w){return S.unit==="%"?w*S.num/100:e.convertLengthToPx(S,v,t)}let y=this.floatFragments;return y.length>0&&(m=y.reduce((S,v)=>{if(i&&!i(v,this))return S;let[w,T]=this.toLogicalFloatSides(v.floatSide);if(T&&(r&&T.includes("block")===r.includes("block")&&T!==r||s&&T.includes("block")===s.includes("block")&&T!==s))return S;let E=v.area,P=v.continuations[0].float.floatMinWrapBlock,O=S.top,A=S.left,L=S.bottom,H=S.right,G=S.floatMinWrapBlockStart,te=S.floatMinWrapBlockEnd;switch(w){case"inline-start":E.vertical?O=Math.max(O,E.top+E.height):A=Math.max(A,E.left+E.width);break;case"block-start":E.vertical?(P&&E.left<H&&(G=p(P,E.rootViewNodes[0],c.x2-c.x1)),H=Math.min(H,E.left)):(P&&E.top+E.height>O&&(G=p(P,E.rootViewNodes[0],c.y2-c.y1)),O=Math.max(O,E.top+E.height));break;case"inline-end":E.vertical?L=Math.min(L,E.top):H=Math.min(H,E.left);break;case"block-end":E.vertical?(P&&E.left+E.width>A&&(te=p(P,E.rootViewNodes[0],c.x2-c.x1)),A=Math.max(A,E.left+E.width)):(P&&E.top<L&&(te=p(P,E.rootViewNodes[0],c.y2-c.y1)),L=Math.min(L,E.top));break;default:throw new Error(`Unknown logical float side: ${w}`)}return{top:O,left:A,bottom:L,right:H,floatMinWrapBlockStart:G,floatMinWrapBlockEnd:te}},m)),m.left+=o,m.right+=o,m.top+=u,m.bottom+=u,m}setFloatAreaDimensions(e,t,i,r,s,o,u){if(t!==this.floatReference)return this.getParent(t).setFloatAreaDimensions(e,t,i,r,s,o,u);let c=this.toLogicalFloatSides(i);if(c[0]==="snap-block"){if(!u["block-start"]&&!u["block-end"])return null}else if(c[0].includes("block")&&!u[c[0]])return null;e.clientLayout;let m=c.find(G=>G.includes("inline")&&u[G==="inline-start"?"inline-end":"inline-start"]),p=c.find(G=>G.includes("block")),y=this.getLimitValue("block-start",m,e.layoutContext,e.clientLayout),S=this.getLimitValue("block-end",m,e.layoutContext,e.clientLayout),v=this.getLimitValue("inline-start",p,e.layoutContext,e.clientLayout),w=this.getLimitValue("inline-end",p,e.layoutContext,e.clientLayout),T=e.vertical?e.originX:e.originY,E=e.vertical?e.originY:e.originX;y=e.vertical?Math.min(y,e.left+e.getInsetLeft()+e.width+e.getInsetRight()+T):Math.max(y,e.top+T),S=e.vertical?Math.max(S,e.left+T):Math.min(S,e.top+e.getInsetTop()+e.height+e.getInsetBottom()+T);function P(G,te){let ae=G(e.bands,te);return ae?(e.vertical&&(ae=em(ae)),y=e.vertical?Math.min(y,ae.x2):Math.max(y,ae.y1),S=e.vertical?Math.max(S,ae.x1):Math.min(S,ae.y2),!0):o}let O,A,L,H;if(s){let G=e.vertical?Na(new oi(S,v,y,w)):new oi(v,y,w,S);if((c[0]==="block-start"||c[0]==="snap-block"||c[0]==="inline-start"||c[0]==="snap-inline")&&!P(E1,G)||(c[0]==="block-end"||c[0]==="snap-block"||c[0]==="inline-end"||c[0]==="snap-inline")&&!P(T1,G)||(L=(S-y)*e.getBoxDir(),O=L-e.getInsetBefore()-e.getInsetAfter(),H=(w-v)*e.getInlineDir(),A=H-e.getInsetStart()-e.getInsetEnd(),!o&&(O<=0||A<=0)))return null}else{O=e.computedBlockSize,L=O+e.getInsetBefore()+e.getInsetAfter();let G=(S-y)*e.getBoxDir();if(c[0]==="snap-block"){if(r===null)c[0]="block-start";else{let ae=this.container.getPaddingRect(),ge=this.container.getBoxDir()*(r-(this.container.vertical?ae.x2:ae.y1)),we=this.container.getBoxDir()*((this.container.vertical?ae.x1:ae.y2)-r-L);ge<=we?c[0]="block-start":c[0]="block-end"}if(!u[c[0]])if(u["block-end"])c[0]="block-end";else return null}else if(c[0]==="snap-inline")if(r===null)c[0]="inline-start";else if(u["inline-start"])c[0]="inline-start";else if(u["inline-end"])c[0]="inline-end";else return null;if(!o&&G<L)return null;c[0]==="inline-start"||c[0]==="inline-end"||c[1]?A=fd(e.clientLayout,e.element,["fit-content inline size"])["fit-content inline size"]:e.adjustContentRelativeSize?A=e.getContentInlineSize():A=e.vertical?e.height:e.width,H=A+e.getInsetStart()+e.getInsetEnd();let te=(w-v)*e.getInlineDir();if(!o&&te<H)return null}return y-=T,S-=T,v-=E,w-=E,c.some(G=>G==="inline-start"||G==="snap-inline")||c.length===1&&(c[0]==="block-start"||c[0]==="snap-block")?e.setInlinePosition(v,A):(c.some(G=>G==="inline-end")||c.length===1&&c[0]==="block-end")&&e.setInlinePosition(w-H*e.getInlineDir(),A),c.some(G=>G==="block-start"||G==="snap-block")||c.length===1&&(c[0]==="inline-start"||c[0]==="snap-inline")?e.setBlockPosition(y,O):(c.some(G=>G==="block-end")||c.length===1&&c[0]==="inline-end")&&e.setBlockPosition(S-L*e.getBoxDir(),O),c.join(" ")}getFloatFragmentExclusions(){let e=this.floatFragments.map(t=>t.getOuterShape());return this.parent?this.parent.getFloatFragmentExclusions().concat(e):e}reattachFloatFragments(){let e=this.container.element&&this.container.element.parentNode;e&&this.floatFragments.forEach(t=>{e.appendChild(t.area.element)})}getMaxReachedAfterEdge(){let e=this.getContainer().vertical;return this.floatFragments.reduce((t,i)=>{let r=i.getOuterRect();return e?Math.min(t,r.x1):Math.max(t,r.y2)},e?1/0:0)}getBlockStartEdgeOfBlockEndFloats(){let e=this.getContainer().vertical;return this.floatFragments.filter(t=>t.floatSide==="block-end").reduce((t,i)=>{let r=i.getOuterRect();return e?Math.max(t,r.x2):Math.min(t,r.y1)},e?0:1/0)}getPageFloatClearEdge(e,t){function i(p){return y=>p.isAnchorAlreadyAppeared(y.float.getId())}function r(p,y){return e==="inline-start"&&(p.floatSide.includes("inline-end")||p.floatSide==="block-end")||e==="inline-end"&&(p.floatSide.includes("inline-start")||p.floatSide==="block-start")?!1:p.continuations.some(i(y))}let s=t.getPaddingRect(),o=t.vertical?s.x1:s.y2,u=this;for(;u;){if(u.floatsDeferredToNext.some(i(u)))return o;u=u.parent}function c(p){return p.floatFragments.some(y=>r(y,p))||p.children.some(y=>c(y))}if(e==="column"||e==="region"||e==="page"){for(u=this;u;u=u.parent)if(u.floatReference===e){if(c(u))return o;break}}t.clientLayout;let m=this.getLimitValue("block-start",null,t.layoutContext,t.clientLayout,r);return this.getLimitValue("block-end",null,t.layoutContext,t.clientLayout,r)*t.getBoxDir()<o*t.getBoxDir()?o:m}getPageFloatPlacementCondition(e,t,i){if(e.floatReference!==this.floatReference)return this.getParent(e.floatReference).getPageFloatPlacementCondition(e,t,i);let r={"block-start":!0,"block-end":!0,"inline-start":!0,"inline-end":!0};if(!i)return r;let s=this.toLogicalFloatSides(t)[0],o=this.toLogical(i),u;o==="all"?u=["block-start","block-end","inline-start","inline-end"]:o==="both"?u=["inline-start","inline-end"]:o==="same"?s==="snap-block"?u=["block-start","block-end"]:u=[s]:u=[o];let c=e.getOrder();function m(S){return v=>(!S||v.floatSide.includes(S))&&v.getOrder()<c}function p(S,v){return S.children.some(w=>w.floatFragments.some(m(v))||p(w,v))}function y(S,v){let w=S.parent;return!!w&&(w.floatFragments.some(m(v))||y(w,v))}if(i==="column"||i==="region"||i==="page"){for(let S=this;S;S=S.parent)if(S.floatReference===i){(S.floatFragments.some(m(null))||p(S,null))&&(r["block-start"]=!1,r["block-end"]=!1,r["inline-start"]=!1,r["inline-end"]=!1);break}return r}return u.forEach(S=>{switch(S){case"block-start":r[S]=!p(this,S);break;case"block-end":r[S]=!y(this,S);break;case"inline-start":case"inline-end":r[S]=!this.floatFragments.some(m(S));break;default:throw new Error(`Unexpected side: ${S}`)}}),r}getLayoutConstraints(){return(this.parent?this.parent.getLayoutConstraints():[]).concat(this.layoutConstraints)}addLayoutConstraint(e,t){t===this.floatReference?this.layoutConstraints.push(e):this.getParent(t).addLayoutConstraint(e,t)}isColumnFullWithPageFloats(e){let t=e.layoutContext,i=e.clientLayout,r=this,s=null;for(;r&&r.container;){let u=r.getLimitValuesInner(t,i);s?e.vertical?(u.right<s.right&&(s.right=u.right,s.floatMinWrapBlockStart=u.floatMinWrapBlockStart),u.left>s.left&&(s.left=u.left,s.floatMinWrapBlockEnd=u.floatMinWrapBlockEnd)):(u.top>s.top&&(s.top=u.top,s.floatMinWrapBlockStart=u.floatMinWrapBlockStart),u.bottom<s.bottom&&(s.bottom=u.bottom,s.floatMinWrapBlockEnd=u.floatMinWrapBlockEnd)):s=u,r=r.parent}let o=Math.max(s.floatMinWrapBlockStart,s.floatMinWrapBlockEnd);return(e.vertical?s.right-s.left:s.bottom-s.top)<=o}getMaxBlockSizeOfPageFloats(){let e=this.getContainer().vertical;return this.floatFragments.length?Math.max.apply(null,this.floatFragments.map(t=>{let i=t.area;return e?i.width:i.height})):0}lock(){this.locked=!0}unlock(){this.locked=!1}isLocked(){return this.locked}},ms=[],an=class{static register(e){ms.push(e)}findByNodeContext(e){for(let t=ms.length-1;t>=0;t--){let i=ms[t];if(i.appliesToNodeContext(e))return i}throw new Error(`No PageFloatLayoutStrategy found for ${e}`)}findByFloat(e){for(let t=ms.length-1;t>=0;t--){let i=ms[t];if(i.appliesToFloat(e))return i}throw new Error(`No PageFloatLayoutStrategy found for ${e}`)}},iA=class{appliesToNodeContext(e){return sn(e.floatReference)}appliesToFloat(e){return!0}createPageFloat(e,t,i){let r=e.floatReference;e.floatSide;let s=e.floatSide,o=e.toNodePosition();return i.resolveFloatReferenceFromColumnSpan(r,e.columnSpan,e).thenAsync(u=>{r=u,t.flowName;let c=new Vm(o,r,s,e.clearSide,t.flowName,e.floatMinWrapBlock);return t.addPageFloat(c),q(c)})}createPageFloatFragment(e,t,i,r,s){let o=e[0].float;return new Hm(o.floatReference,t,i,e,r,s)}findPageFloatFragment(e,t){return t.findPageFloatFragment(e)}adjustPageFloatArea(e,t,i){}forbid(e,t){}};an.register(new iA);var rA=Hm,kd=class bT extends Vm{constructor(t,i,r,s,o){super(t,i,"block-end",null,r,o),this.footnotePolicy=s}isAllowedToPrecede(t){return!(t instanceof bT)}},Gm=class extends rA{constructor(e,t,i,r){super(e,"block-end",null,t,i,r)}getOrder(){return 1/0}shouldBeStashedBefore(e){return e instanceof kd?!0:this.getOrder()<e.getOrder()}},nA=class{constructor(e){this.footnote=e}allowLayout(e){let t=e.toNodePosition();return!ur(t,this.footnote.nodePosition)}},sA=class{appliesToNodeContext(e){return e.floatSide==="footnote"}appliesToFloat(e){return e instanceof kd}createPageFloat(e,t,i){let r=st.REGION,s=t.getPageFloatLayoutContext(r);t.getPageFloatLayoutContext(st.PAGE).hasSameContainerAs(s)&&(r=st.PAGE);let o=e.toNodePosition();t.flowName;let u=new kd(o,r,t.flowName,e.footnotePolicy,e.floatMinWrapBlock);return t.addPageFloat(u),q(u)}createPageFloatFragment(e,t,i,r,s){let o=e[0].float;return new Gm(o.floatReference,e,r,s)}findPageFloatFragment(e,t){let i=t.getPageFloatLayoutContext(e.floatReference).floatFragments.filter(r=>r instanceof Gm);return i.length<=1,i[0]||null}adjustPageFloatArea(e,t,i){e.isFootnote=!0,e.adjustContentRelativeSize=!1;let r=e.element;e.vertical=i.layoutContext.applyFootnoteStyle(t.vertical,i.layoutContext.nodeContext&&i.layoutContext.nodeContext.direction==="rtl",r),e.convertPercentageSizesToPx(r),i.setComputedInsets(r,e),i.setComputedWidthAndHeight(r,e)}forbid(e,t){let i=e;switch(i.footnotePolicy){case N.line:{let r=new nA(i);t.addLayoutConstraint(r,i.floatReference);break}}}};an.register(new sA);var aA="data-vivliostyle-flow-root";function oA(e){return e.getAttribute(aA)==="true"}function $m(e){let t=e?.toString()||"block",i;switch(t){case"inline-flex":i="flex";break;case"inline-grid":i="grid";break;case"inline-table":i="table";break;case"inline":case"table-row-group":case"table-column":case"table-column-group":case"table-header-group":case"table-footer-group":case"table-row":case"table-cell":case"table-caption":case"inline-block":i="block";break;default:i=t}return J(i)}function Ed(e){return e===N.absolute||e===N.fixed}function Td(e){return e instanceof Kr&&e.name==="running"}function Ym(e,t,i,r){return e===N.none||(Ed(t)?(i=N.none,e=$m(e)):(i&&i!==N.none&&!Ee(i)||r)&&(e=$m(e))),{display:e,position:t,float:i}}function Xm(e,t,i,r){return Ym(e,t,i,r).display===N.block}function Ir(e){switch(e.toString()){case"inline":case"inline-block":case"inline-list-item":case"inline-flex":case"inline-grid":case"ruby":case"inline-table":return!0;default:return!1}}function Km(e){switch(e.toString()){case"ruby-base":case"ruby-text":case"ruby-base-container":case"ruby-text-container":return!0;default:return!1}}function lA(e,t,i,r,s,o,u){return s=s||o||N.horizontal_tb,!!u||!!i&&i!==N.none&&!Ee(i)||Ed(t)||e===N.inline_block||e===N.table_cell||e===N.table_caption||e==N.flex||e==N.grid||e==N.flow_root||(e===N.block||e===N.list_item)&&!!r&&r!==N.visible&&r!==N.clip&&!Ee(r)||!!o&&s!==o}function dA(e){return e===N.relative||e===N.absolute||e===N.fixed}var Or=1e5;function uA(e){j(e.element,"column-count","1"),j(e.element,"column-width",`${e.vertical?e.height:e.width}px`),j(e.element,"column-gap",`${Or-(e.vertical?e.height:e.width)}px`),j(e.element,"column-fill","auto")}function Wa(e,t){let i=t?e.bottom:Math.max(Math.abs(e.left),Math.abs(e.right));return Math.round(i/Or)}function Pd(e,t){let i=Wa(e,t);if(i===0)return 0;let r=t?e.top:Math.min(Math.abs(e.left),Math.abs(e.right)),s=Math.round(r/Or),o=i*Or,u=s*Or;return t?(e.top-=u,e.bottom-=o,e.right-=u,e.left-=o):e.left<-Or/2?(e.right+=u,e.left+=o,e.top+=u,e.bottom+=o):(e.left-=u,e.right-=o,e.top+=u,e.bottom+=o),e.width=e.right-e.left,e.height=e.bottom-e.top,s}function Zm(e,t){for(let i=0;i<e.length;i++)Pd(e[i],t)}function gs(e,t,i){var r;let s=e.getElementClientRect(t),o=Pd(s,i);if(o===1){let u=e.getElementComputedStyle(t);if(u.display==="table-cell"||t.className==="-vivliostyle-table-cell-container"&&(r=t.parentElement)!=null&&r.parentElement&&(u=e.getElementComputedStyle(t.parentElement.parentElement)).display==="table-cell"){let c=t.closest("[data-vivliostyle-column]"),m=i?"width":"height",p=c&&parseFloat(Di(c,m));if(p){let y=p,S=o,v=parseFloat(u.paddingBlockEnd),w=parseFloat(u.borderBlockEndWidth),T=Math.ceil(v+w);for(;T-- >0&&S===o&&--y>0;){j(c,m,`${y}px`);let E=e.getElementClientRect(t);if(S=Pd(E,i),S<o||S===o&&(i?E.right>s.right:E.top<s.top))return c.setAttribute("data-vivliostyle-column-height-adjusted","true"),E}j(c,m,`${p}px`)}}}return s}function cA(e,t){var i,r;if(e.nodeType===1){let s=e;((i=s.style)==null?void 0:i.breakAfter)==="column"&&(s.style.breakAfter="")}if(t.nodeType===1){let s=t;((r=s.style)==null?void 0:r.breakBefore)==="column"&&(s.style.breakBefore="")}}function Qm(e){for(let t=e.nodeType===1?e:e.parentElement;t;t=t.parentElement){let i=t.style;if(!i||t.hasAttribute("data-vivliostyle-column"))break;if(!isNaN(parseFloat(i.columnCount))||!isNaN(parseFloat(i.columnWidth)))return t;if(i.position==="absolute")break}return null}function hA(e){var t;if(e.nodeType!==1)return;let i=e,r=i.style,s=r?.breakBefore==="column",o=i.previousElementSibling,u=o&&((t=o.style)==null?void 0:t.breakAfter)==="column";if(!s&&!u)return;let c=Qm(i);if(!c)return;let m=c.ownerDocument.defaultView.getComputedStyle(c),{writingMode:p,direction:y,columnGap:S,fontSize:v}=m,w=p==="vertical-rl"||p==="vertical-lr",T=y==="rtl",E=(parseFloat(S)||parseFloat(v)||16)/2,P=c.getBoundingClientRect(),O=i.getBoundingClientRect();(w?O.top>P.bottom+E:T?O.right<P.left-E:O.left>P.right+E)&&(s&&(r.breakBefore=""),u&&o&&(o.style.breakAfter=""),r.marginBlockStart=`${Or}px`)}function on(e,t,i,r){let s=e.viewNode;if(!s)return NaN;let o=s.nodeType===1?s:s.parentElement;if(o&&o.namespaceURI==="http://www.w3.org/1999/xhtml"){let u=o.style;if(o.localName==="br"||o.localName==="wbr"||u&&Ir(u.display)&&/^([\d\.]|super|(text-)?top)/.test(u.verticalAlign))return NaN}if(s===o){if(e.after||!e.inline){if(e.after&&!e.inline&&o.querySelector("ruby")){let c=o.parentNode,m=o.nextSibling;c.removeChild(o),c.insertBefore(o,m)}let u=gs(t,o,r);if(u.left===0&&u.top===0&&u.right===0&&u.bottom===0)return NaN;if(u.right>=u.left&&u.bottom>=u.top)return e.after?r?u.left:u.bottom:r?u.right:u.top}return NaN}else{let u=NaN,c=s.ownerDocument.createRange(),m=s.textContent.length;if(!m)return NaN;e.after&&(i+=m),i>=m&&(i=m-1),c.setStart(s,i),c.setEnd(s,i+1);let p=t.getRangeClientRects(c);return Zm(p,r),p=p.filter(y=>y.right>y.left&&y.bottom>y.top),p.length?(r?u=Math.min.apply(null,p.map(y=>y.left)):u=Math.max.apply(null,p.map(y=>y.bottom)),u):NaN}}function Ad(e,t,i){let r=t.clientLayout.getElementClientRect(e),s=t.getComputedMargin(e);return i?r.width+s.left+s.right:r.height+s.top+s.bottom}function ln(e){for(;e;){if(e.parentNode===e.ownerDocument)return!1;e=e.parentNode}return!0}function Jm(e,t){var i;if(e)for(let r=e.lastChild,s=r;r!==t;r=s)s=r.previousSibling,!(r.nodeType===1&&r.hasAttribute("data-vivliostyle-float-box-moved")&&((i=t.style)==null?void 0:i.display)==="inline")&&e.removeChild(r)}function Nd(e){return!!e.getAttribute(nn)}function fs(e){var t;if(e?.nodeType!==1)return!1;let i=e;if(Nd(i))return!0;let r=(t=i.style)==null?void 0:t.position;return r==="absolute"||r==="fixed"}function dn(e){let t=e?.viewNode;return t?.nodeType===1&&Nd(t)}function pA(e){return e!=="inline"&&(Ir(e)||Km(e))}function eg(e){var t;for(let i=e.parent;i;i=i.parent)if((i.display!=="inline"||i.vertical!==((t=i.parent)==null?void 0:t.vertical))&&Ir(i.display))return i;return null}var Id=class{calculateOffset(e){return un(this.getNodeContext(),e.collectElementsOffset())}breakPositionChosen(e){}getNodeContext(){return null}};function un(e,t){return{current:t.reduce((i,r)=>i+r.calculateOffset(e),0),minimum:t.reduce((i,r)=>i+r.calculateMinimumOffset(e),0)}}var bs=class extends Id{constructor(e,t,i,r){super(),this.position=e,this.breakOnEdge=t,this.overflows=i,this.computedBlockSize=r,f(this,"overflowIfRepetitiveElementsDropped"),f(this,"isEdgeUpdated",!1),f(this,"edge",0),this.overflowIfRepetitiveElementsDropped=i}findAcceptableBreak(e,t){return this.updateOverflows(e),t<this.getMinBreakPenalty()?null:e.findEdgeBreakPosition(this)}getMinBreakPenalty(){if(!this.isEdgeUpdated)throw new Error("EdgeBreakPosition.prototype.updateEdge not called");let e=this.isFirstContentOfRepetitiveElementsOwner()&&!this.overflowIfRepetitiveElementsDropped;return(Ba(this.breakOnEdge)?1:0)+(this.overflows&&!e?3:0)+(this.position.parent?this.position.parent.breakPenalty:0)}updateEdge(e){var t;let i=e.calculateClonedPaddingBorder(this.position);if(this.edge=on(this.position,e.clientLayout,0,e.vertical)+i,!this.position.after&&!this.position.inline){let r=e.parseComputedLength(e.clientLayout.getElementComputedStyle(this.position.viewNode).marginBlockStart);this.edge-=(e.vertical?-1:1)*r}else if(this.position.after&&((t=this.position.shadowContext)==null?void 0:t.root.id)==="table-cell"){let r=e.element.parentElement,s=r?.closest("table, [style*='display: table;']");if(s){let o=s.style.borderCollapse==="collapse",u=0,c=0;for(let m=r;m;m=m.parentElement){let p=e.clientLayout.getElementComputedStyle(m);if((m===r||m===s&&!o)&&(u+=e.parseComputedLength(p.paddingBlockEnd)),m===s&&!o&&(u+=e.parseComputedLength(p.borderSpacing.replace(/^\S+ (\S+)$/,"$1"))),o?c=Math.max(c,e.parseComputedLength(p.borderBlockEndWidth)):(m===r||m===s)&&(c+=e.parseComputedLength(p.borderBlockEndWidth)),m===s)break}this.edge+=(e.vertical?-1:1)*(u+c)}}this.isEdgeUpdated=!0}updateOverflows(e){this.isEdgeUpdated||this.updateEdge(e);let t=this.edge,i=this.calculateOffset(e);this.overflowIfRepetitiveElementsDropped=e.isOverflown(t+(e.vertical?-1:1)*i.minimum),this.overflows=this.position.overflow=e.isOverflown(t+(e.vertical?-1:1)*i.current)}getNodeContext(){return this.position}isFirstContentOfRepetitiveElementsOwner(){let e=this.getNodeContext();if(!e||!e.parent)return!1;let{formattingContext:t}=e.parent;if(!Nr.isInstanceOfRepetitiveElementsOwnerFormattingContext(t))return!1;let i=t.getRepetitiveElements();return i?i.isFirstContentNode(e):!1}},ys=class{find(e){let t=Je("RESOLVE_LAYOUT_PROCESSOR");for(let i=0;i<t.length;i++){let r=t[i](e);if(r)return r}throw new Error(`No processor found for a formatting context: ${e.getName()}`)}},cn=class{layout(e,t,i){return t.isFloatNodeContext(e)?t.layoutFloatOrFootnote(e):t.isBreakable(e)?t.layoutBreakableBlock(e):t.layoutUnbreakable(e)}createEdgeBreakPosition(e,t,i,r){return new bs(e.copy(),t,i,r)}startNonInlineElementNode(e){return!1}afterNonInlineElementNode(e,t){return!1}clearOverflownViewNodes(e,t,i,r){var s;if(!i.viewNode||!i.viewNode.parentNode||i.shadowType===Ui.ShadowType.ROOTLESS&&dn(i))return;let o=i.viewNode;((s=o.parentElement)==null?void 0:s.localName)==="viv-ts-inner"&&(o=o.parentElement.parentElement);let u=o.parentNode;Jm(u,o),r&&u.removeChild(o)}finishBreak(e,t,i,r){let s=i||t.viewNode!=null&&t.viewNode.nodeType==1&&!t.after;return e.clearOverflownViewNodes(t,s),r&&e.layoutContext.processFragmentedBlockEdge(t),q(!0)}},Od=class{constructor(e){this.parent=e,f(this,"formattingContextType","Block")}getName(){return"Block formatting context (BlockFormattingContext)"}isFirstTime(e,t){return t}getParent(){return this.parent}saveState(){}restoreState(e){}},Rd=new cn,mA=vd.isInstanceOfBlockFormattingContext;De("RESOLVE_FORMATTING_CONTEXT",(e,t,i,r,s,o)=>{let u=e.parent;return!u&&e.formattingContext||u&&e.formattingContext!==u.formattingContext?null:e.establishesBFC||!e.formattingContext&&Xm(i,r,s,o)?new Od(u?u.formattingContext:null):null}),De("RESOLVE_LAYOUT_PROCESSOR",e=>e instanceof Od?Rd:null);var Ld=class{constructor(){f(this,"initialBreakPositions",null),f(this,"initialStateOfFormattingContext",null),f(this,"initialPosition"),f(this,"initialFragmentLayoutConstraints")}layout(e,t){return this.prepareLayout(e,t),this.tryLayout(e,t)}tryLayout(e,t){let i=Z("AbstractLayoutRetryer.tryLayout");this.saveState(e,t);let r=this.resolveLayoutMode(e);return r.doLayout(e,t).then(s=>{let o=r.accept(s,t);o=r.postLayout(s,this.initialPosition,t,o),o?i.finish(s):(this.initialPosition,this.clearNodes(this.initialPosition),this.restoreState(e,t),this.tryLayout(this.initialPosition,t).thenFinish(i))}),i.result()}prepareLayout(e,t){}clearNodes(e){let t=e.viewNode||e.parent.viewNode,i;for(;i=t.lastChild;)t.removeChild(i);let r;for(;r=t.nextSibling;)r.parentNode.removeChild(r)}saveState(e,t){this.initialPosition=e.copy(),this.initialBreakPositions=[].concat(t.breakPositions),this.initialFragmentLayoutConstraints=[].concat(t.fragmentLayoutConstraints),e.formattingContext&&(this.initialStateOfFormattingContext=e.formattingContext.saveState())}restoreState(e,t){t.breakPositions=this.initialBreakPositions,t.fragmentLayoutConstraints=this.initialFragmentLayoutConstraints,e.formattingContext&&e.formattingContext.restoreState(this.initialStateOfFormattingContext)}},gA=class{initialState(e){return{nodeContext:e,atUnforcedBreak:!1,break:!1}}startNonDisplayableNode(e){}afterNonDisplayableNode(e){}startIgnoredTextNode(e){}afterIgnoredTextNode(e){}startNonElementNode(e){}afterNonElementNode(e){}startInlineElementNode(e){}afterInlineElementNode(e){}startNonInlineElementNode(e){}afterNonInlineElementNode(e){}finish(e){}},_d=class{constructor(e,t){this.strategy=e,this.layoutContext=t}iterate(e){let t=this.strategy,i=t.initialState(e),r=Z("LayoutIterator");return r.loopWithFrame(s=>{let o;for(;i.nodeContext;){i.nodeContext.viewNode?i.nodeContext.viewNode.nodeType!==1?Tt(i.nodeContext.viewNode,i.nodeContext.whitespace)?i.nodeContext.after?o=t.afterIgnoredTextNode(i):o=t.startIgnoredTextNode(i):i.nodeContext.after?o=t.afterNonElementNode(i):o=t.startNonElementNode(i):i.nodeContext.inline?i.nodeContext.after?o=t.afterInlineElementNode(i):o=t.startInlineElementNode(i):i.nodeContext.after?o=t.afterNonInlineElementNode(i):o=t.startNonInlineElementNode(i):i.nodeContext.after?o=t.afterNonDisplayableNode(i):o=t.startNonDisplayableNode(i);let u=(o&&o.isPending()?o:q(!0)).thenAsync(()=>i.break?q(null):this.layoutContext.nextInTree(i.nodeContext,i.atUnforcedBreak));if(u.isPending()){u.then(c=>{i.break?s.breakLoop():(i.nodeContext=c,s.continueLoop())});return}else if(i.break){s.breakLoop();return}else i.nodeContext=u.get()}t.finish(i),s.breakLoop()}).then(()=>{r.finish(i.nodeContext)}),r.result()}},vs=class extends gA{constructor(e){super(),this.leadingEdge=e}startNonInlineBox(e){}endEmptyNonInlineBox(e){}endNonInlineBox(e){}initialState(e){return{nodeContext:e,atUnforcedBreak:!!this.leadingEdge&&e.after,break:!1,leadingEdge:this.leadingEdge,breakAtTheEdge:null,onStartEdges:!1,leadingEdgeContexts:[],lastAfterNodeContext:null}}processForcedBreak(e,t){let i=!e.leadingEdge&&jt(e.breakAtTheEdge);if(i){let r=e.nodeContext=e.leadingEdgeContexts[0]||e.nodeContext;r.viewNode.parentNode.removeChild(r.viewNode),t.pageBreakType=e.breakAtTheEdge}return i}saveEdgeAndProcessOverflow(e,t){let i=t.checkOverflowAndSaveEdgeAndBreakPosition(e.lastAfterNodeContext,null,!0,e.breakAtTheEdge);return i&&(e.nodeContext=(e.lastAfterNodeContext||e.nodeContext).modify(),e.nodeContext.overflow=!0),i}processLayoutConstraint(e,t,i){let r=e.nodeContext,s=!t.allowLayout(r);return s&&(i.checkOverflowAndSaveEdgeAndBreakPosition(e.lastAfterNodeContext,null,!1,e.breakAtTheEdge),r=e.nodeContext=r.modify(),r.overflow=!0),s}startNonElementNode(e){e.onStartEdges=!1}startNonInlineElementNode(e){return e.leadingEdgeContexts.push(e.nodeContext.copy()),e.breakAtTheEdge=qt(e.breakAtTheEdge,e.nodeContext.breakBefore),e.onStartEdges=!0,this.startNonInlineBox(e)}afterNonInlineElementNode(e){let t,i;return e.onStartEdges?(t=this.endEmptyNonInlineBox(e),i=t&&t.isPending()?t:q(!0),i=i.thenAsync(()=>(e.break||(e.leadingEdgeContexts=[],e.leadingEdge=!1,e.atUnforcedBreak=!1,e.breakAtTheEdge=null),q(!0)))):(t=this.endNonInlineBox(e),i=t&&t.isPending()?t:q(!0)),i.thenAsync(()=>(e.break||(e.onStartEdges=!1,e.lastAfterNodeContext=e.nodeContext.copy(),e.breakAtTheEdge=qt(e.breakAtTheEdge,e.nodeContext.breakAfter)),q(!0)))}},Bd=[];function fA(){Bd=[]}function tg(e,t,i){return e-=i,t===0?e===0:e%t===0&&e/t>=0}var bA=class{constructor(e){this.matchers=e}matches(){return this.matchers.some(e=>e.matches())}},yA=class{constructor(e){this.matchers=e}matches(){return this.matchers.every(e=>e.matches())}},ig=class _l{constructor(t,i,r){this.elementOffset=t,this.a=i,this.b=r}static registerFragmentIndex(t,i,r){let s=_l.fragmentIndices;(!s[t]||s[t].priority<=r)&&(s[t]={fragmentIndex:i,priority:r})}static clearFragmentIndices(){_l.fragmentIndices={}}matches(){let t=_l.fragmentIndices[this.elementOffset];return t!=null&&t.fragmentIndex!=null&&tg(t.fragmentIndex,this.a,this.b)}};f(ig,"fragmentIndices",{});var ja=ig,qa=class{static buildViewConditionMatcher(e,t){let i=t.split("_");return i[0]=="NFS"?new ja(e,parseInt(i[1],10),parseInt(i[2],10)):(`${t}`,null)}static buildAllMatcher(e){return new yA(e)}static buildAnyMatcher(e){return new bA(e)}},rg={"border-collapse":!0,"border-spacing":!0,"caption-side":!0,"clip-rule":!0,color:!0,"color-interpolation":!0,"color-rendering":!0,cursor:!0,direction:!0,"empty-cells":!0,fill:!0,"fill-opacity":!0,"fill-rule":!0,"font-kerning":!0,"font-size":!0,"font-size-adjust":!0,"font-family":!0,"font-feature-settings":!0,"font-style":!0,"font-stretch":!0,"font-variant-ligatures":!0,"font-variant-caps":!0,"font-variant-numeric":!0,"font-variant-east-asian":!0,"font-weight":!0,"glyph-orientation-vertical":!0,"hanging-punctuation":!0,hyphens:!0,"hyphenate-character":!0,"hyphenate-limit-chars":!0,"hyphenate-limit-last":!0,"image-rendering":!0,"image-resolution":!0,"letter-spacing":!0,"line-break":!0,"line-height":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,marker:!0,"marker-end":!0,"marker-mid":!0,"marker-start":!0,orphans:!0,"overflow-wrap":!0,"paint-order":!0,"pointer-events":!0,quotes:!0,"ruby-align":!0,"ruby-position":!0,"shape-rendering":!0,stroke:!0,"stroke-dasharray":!0,"stroke-dashoffset":!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-miterlimit":!0,"stroke-opacity":!0,"stroke-width":!0,"tab-size":!0,"text-align":!0,"text-align-last":!0,"text-anchor":!0,"text-autospace":!0,"text-decoration-skip":!0,"text-decoration-skip-ink":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-fill-color":!0,"text-combine-upright":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-rendering":!0,"text-shadow":!0,"text-size-adjust":!0,"text-spacing-trim":!0,"text-stroke-color":!0,"text-stroke-width":!0,"text-transform":!0,"text-underline-offset":!0,"text-underline-position":!0,"text-wrap":!0,"text-wrap-mode":!0,"text-wrap-style":!0,visibility:!0,"white-space":!0,widows:!0,"word-break":!0,"word-spacing":!0,"writing-mode":!0},vA=["image-resolution","orphans","widows"];function SA(){return Je("POLYFILLED_INHERITED_PROPS").reduce((e,t)=>e.concat(t()),[].concat(vA))}var xA={"http://www.idpf.org/2007/ops":!0,"http://www.w3.org/1999/xhtml":!0,"http://www.w3.org/2000/svg":!0,"http://www.w3.org/1998/Math/MathML":!0},Fd=["margin-%","padding-%","border-%-width","border-%-style","border-%-color","%"],wA=["max-%","min-%","%"],ng=(()=>{let e=["left","right","top","bottom"],t={width:!0,height:!0,"max-width":!0,"max-height":!0,"min-width":!0,"min-height":!0};for(let i=0;i<Fd.length;i++)for(let r=0;r<e.length;r++){let s=Fd[i].replace("%",e[r]);t[s]=!0}return t})();function hn(e,t){let i={};for(let r of Fd)for(let s in e){let o=r.replace("%",s),u=r.replace("%",e[s]);i[o]=u,i[u]=o}for(let r of wA)for(let s in t){let o=r.replace("%",s),u=r.replace("%",t[s]);i[o]=u,i[u]=o}return i}var sg=hn({"block-start":"right","block-end":"left","inline-start":"top","inline-end":"bottom"},{"block-size":"width","inline-size":"height"}),ag=hn({"block-start":"top","block-end":"bottom","inline-start":"left","inline-end":"right"},{"block-size":"height","inline-size":"width"}),CA=hn({"block-start":"right","block-end":"left","inline-start":"bottom","inline-end":"top"},{"block-size":"width","inline-size":"height"}),kA=hn({"block-start":"top","block-end":"bottom","inline-start":"right","inline-end":"left"},{"block-size":"height","inline-size":"width"}),EA=hn({inside:"right",outside:"left"},{}),TA=hn({inside:"left",outside:"right"},{}),xe=class tp{constructor(t,i){this.value=t,this.priority=i}getBaseValue(){return this}filterValue(t){let i=this.value.visit(t);return i===this.value?this:new tp(i,this.priority)}increaseSpecificity(t){return t==0?this:new tp(this.value,this.priority+t)}evaluate(t,i,r,s){return i&&qi(i)?this.value:Ka(t,this.value,i,r,s)}isEnabled(t){return!0}},zd=class ip extends xe{constructor(t,i,r){super(t,i),this.condition=r}getBaseValue(){return new xe(this.value,this.priority)}filterValue(t){let i=this.value.visit(t);return i===this.value?this:new ip(i,this.priority,this.condition)}increaseSpecificity(t){return t==0?this:new ip(this.value,this.priority+t,this.condition)}isEnabled(t){try{return!!this.condition.evaluate(t)}catch(i){ee.warn(i)}return!1}};function Md(e,t,i){return(!t||i.priority>=t.priority)&&i.isEnabled(e)?i.getBaseValue():t}function Gi(e,t,i,r){if(e)if(!i)delete e[t];else{let s=e[t];(!s||i.priority>=s.priority)&&(r?i.isEnabled(r)&&(e[t]=i.getBaseValue()):e[t]=i)}}var og={"region-id":!0,"fragment-selector-id":!0};function PA(e){return!!og[e]}function Dd(e){return e.charAt(0)==="_"&&e!=="_viewConditionalStyles"}function pn(e){return e.charAt(0)!=="_"&&!og[e]}function Ss(e){return!!rg[e]||qi(e)}function Nt(e,t){return e[t]}function Rr(e,t,i){i?e[t]=i:delete e[t]}function Ei(e,t){return e[t]}function Va(e,t){let i=e[t];return i||(i={},e[t]=i),i}var lg=e=>{let t=e._viewConditionalStyles;return t||(t=[],e._viewConditionalStyles=t),t};function dg(e,t){return e[t]}function ug(e,t){let i=e[t];return i||(i=[],e[t]=i),i}function Ha(e,t,i,r,s,o,u){var c,m;if([{id:s,styleKey:"_pseudos"},{id:o,styleKey:"_regions"}].forEach(p=>{if(p.id){let y=Va(t,p.styleKey);t=y[p.id],t||(t={},y[p.id]=t)}}),u){let p=lg(t);t={},p.push({styles:t,matcher:u})}for(let p in i)if(!Dd(p))if(PA(p)){let y=dg(i,p),S=ug(t,p);Array.prototype.push.apply(S,y)}else{let y=Nt(i,p);if(!y.isEnabled(e))continue;let S=y.increaseSpecificity(r);Gi(t,p,S,e);let v=(m=(c=e.style)==null?void 0:c.validatorSet.shorthands[p])==null?void 0:m.propList;if(v)for(let w of v){let T=new xe(he,S.priority);Gi(t,w,T,e)}}}function AA(e,t){let i={};for(let r=0;r<t.length;r++)Ha(e,i,t[r],0,null,null,null);return i}function cg(e,t){if(e.length>0){e.sort((r,s)=>s.getPriority()-r.getPriority());let i=null;for(let r=e.length-1;r>=0;r--)i=e[r],i.chained=t,t=i;return i}return t}var NA=class extends Xr{constructor(e,t){super(),this.props=e,this.context=t,f(this,"propName","")}setPropName(e){this.propName=e}getFontSize(){let e=Nt(this.props,"font-size");if(!e.value.isNumeric())return Ue.em;let t=e.value;if(!i1(t.unit))throw new Error("Unexpected state");return t.num*Ue[t.unit]}visitNumeric(e){return this.context,this.propName==="font-size"?hg(e,this.getFontSize(),this.context):e.unit==="em"||e.unit==="ex"||e.unit==="rem"||e.unit==="lh"||e.unit==="rlh"?Wd(e,this.getFontSize(),this.context):e}visitExpr(e){return this.propName=="font-size"?Ka(this.context,e,this.propName).visit(this):e}};function Wd(e,t,i){let r=e.unit,s=e.num;if(r==="em"||r==="ex"){let o=Ue[r]/Ue.em;return new U(s*o*t,"px")}else return r==="rem"?new U(s*i.fontSize(),"px"):r==="rlh"?new U(s*i.rootLineHeight,"px"):e}function hg(e,t,i){e=Wd(e,t,i);let r=e.unit,s=e.num;return r==="px"?e:r==="%"?new U(s/100*t,"px"):new U(s*i.queryUnitSize(r,!1),"px")}var mn=class{apply(e){}mergeWith(e){return new IA([this,e])}clone(){return this}},Ua=class extends mn{constructor(e){super(),this.conditionItem=e}apply(e){e.pushConditionItem(this.conditionItem.fresh(e))}},IA=class yT extends mn{constructor(t){super(),this.list=t}apply(t){for(let i=0;i<this.list.length;i++)this.list[i].apply(t)}mergeWith(t){return this.list.push(t),this}clone(){return new yT([].concat(this.list))}},jd=class extends mn{constructor(e,t,i,r,s){super(),this.style=e,this.specificity=t,this.pseudoelement=i,this.regionId=r,this.viewConditionId=s}apply(e){Ha(e.context,e.currentStyle,this.style,this.specificity,this.pseudoelement,this.regionId,e.buildViewConditionMatcher(this.viewConditionId))}},je=class extends mn{constructor(){super(),f(this,"chained",null)}apply(e){this.chained.apply(e)}getPriority(){return 0}makePrimary(e){return!1}},OA=class extends je{constructor(e){super(),this.className=e}apply(e){e.currentClassNames.includes(this.className)&&this.chained.apply(e)}getPriority(){return 10}makePrimary(e){return this.chained&&e.insertInTable(e.classes,this.className,this.chained),!0}},RA=class extends je{constructor(e){super(),this.id=e}apply(e){(e.currentId==this.id||e.currentXmlId==this.id)&&this.chained.apply(e)}getPriority(){return 11}makePrimary(e){return this.chained&&e.insertInTable(e.ids,this.id,this.chained),!0}},pg=class extends je{constructor(e){super(),this.localName=e}apply(e){e.currentLocalName==this.localName&&this.chained.apply(e)}getPriority(){return 8}makePrimary(e){return this.chained&&e.insertInTable(e.tags,this.localName,this.chained),!0}},LA=class extends je{constructor(e,t){super(),this.ns=e,this.localName=t}apply(e){e.currentLocalName==this.localName&&e.currentNamespace==this.ns&&this.chained.apply(e)}getPriority(){return 8}makePrimary(e){if(this.chained){let t=e.nsPrefix[this.ns];t||(t=`ns${e.nsCount++}:`,e.nsPrefix[this.ns]=t);let i=t+this.localName;e.insertInTable(e.nstags,i,this.chained)}return!0}},_A=class extends je{constructor(e,t){super(),this.epubTypePatt=e,this.targetLocalName=t}apply(e){let t=e.currentElement;if(t instanceof HTMLAnchorElement&&t.hash&&t.href==t.baseURI.replace(/#.*$/,"")+t.hash){let i=t.hash.substring(1),r=t.ownerDocument.getElementById(i);if(r&&(!this.targetLocalName||r.localName==this.targetLocalName)){let s=r.getAttributeNS("http://www.idpf.org/2007/ops","type")||r.getAttribute("epub:type");s&&s.match(this.epubTypePatt)&&this.chained.apply(e)}}}},BA=class extends je{constructor(e){super(),this.ns=e}apply(e){e.currentNamespace==this.ns&&this.chained.apply(e)}};function Ga(e,t,i,r){if(!e)return!1;if(t!==null)return r(e,t,i);for(let s of e.getAttributeNames())if((s===i||s.endsWith(`:${i}`))&&r(e,s===i?"":e.lookupNamespaceURI(s.split(":")[0]),i))return!0;return!1}var mg=class extends je{constructor(e,t){super(),this.ns=e,this.name=t}apply(e){Ga(e.currentElement,this.ns,this.name,(t,i,r)=>t.hasAttributeNS(i,r))&&this.chained.apply(e)}},FA=class extends je{constructor(e,t,i){super(),this.ns=e,this.name=t,this.value=i}apply(e){Ga(e.currentElement,this.ns,this.name,(t,i,r)=>t.getAttributeNS(i,r)==this.value)&&this.chained.apply(e)}getPriority(){return this.name=="type"&&this.ns=="http://www.idpf.org/2007/ops"?9:0}makePrimary(e){return this.name=="type"&&this.ns=="http://www.idpf.org/2007/ops"?(this.chained&&e.insertInTable(e.epubtypes,this.value,this.chained),!0):!1}},zA=class extends je{constructor(e,t){super(),this.ns=e,this.name=t}apply(e){Ga(e.currentElement,this.ns,this.name,(t,i,r)=>!!xA[t.getAttributeNS(i,r)])&&this.chained.apply(e)}getPriority(){return 0}makePrimary(e){return!1}},xs=class extends je{constructor(e,t,i){super(),this.ns=e,this.name=t,this.regexp=i}apply(e){Ga(e.currentElement,this.ns,this.name,(t,i,r)=>{var s;return!!((s=t.getAttributeNS(i,r))!=null&&s.match(this.regexp))})&&this.chained.apply(e)}},MA=class extends je{constructor(e){super(),this.langRegExp=e}apply(e){e.lang.match(this.langRegExp)&&this.chained.apply(e)}},gg=class extends je{constructor(){super()}apply(e){e.isFirst&&this.chained.apply(e)}getPriority(){return 6}},DA=class extends je{constructor(){super()}apply(e){e.isRoot&&this.chained.apply(e)}getPriority(){return 12}},ws=class extends je{constructor(e,t){super(),this.a=e,this.b=t}matchANPlusB(e){return tg(e,this.a,this.b)}},WA=class extends ws{constructor(e,t){super(e,t)}apply(e){this.matchANPlusB(e.currentSiblingOrder)&&this.chained.apply(e)}getPriority(){return 5}},qd=class extends ws{constructor(e,t){super(e,t)}apply(e){let t=e.currentSiblingTypeCounts[e.currentNamespace][e.currentLocalName];this.matchANPlusB(t)&&this.chained.apply(e)}getPriority(){return 5}},Vd=class extends ws{constructor(e,t){super(e,t)}apply(e){let t=e.currentFollowingSiblingOrder;t===null&&(t=e.currentFollowingSiblingOrder=e.currentElement.parentNode.childElementCount-e.currentSiblingOrder+1),this.matchANPlusB(t)&&this.chained.apply(e)}getPriority(){return 4}},Hd=class extends ws{constructor(e,t){super(e,t)}apply(e){let t=e.currentFollowingSiblingTypeCounts;if(!t[e.currentNamespace]){let i=e.currentElement;do{let r=i.namespaceURI,s=i.localName,o=t[r];o||(o=t[r]={}),o[s]=(o[s]||0)+1}while(i=i.nextElementSibling)}this.matchANPlusB(t[e.currentNamespace][e.currentLocalName])&&this.chained.apply(e)}getPriority(){return 4}},jA=class extends je{constructor(){super()}apply(e){let t=e.currentElement.firstChild;for(;t;){switch(t.nodeType){case Node.ELEMENT_NODE:return;case Node.TEXT_NODE:if(t.length>0)return}t=t.nextSibling}this.chained.apply(e)}getPriority(){return 4}},qA=class extends je{constructor(){super()}apply(e){e.currentElement.disabled===!1&&this.chained.apply(e)}getPriority(){return 5}},VA=class extends je{constructor(){super()}apply(e){e.currentElement.disabled===!0&&this.chained.apply(e)}getPriority(){return 5}},HA=class extends je{constructor(){super()}apply(e){let t=e.currentElement;(t.selected===!0||t.checked===!0)&&this.chained.apply(e)}getPriority(){return 5}},Vt=class extends je{constructor(e){super(),this.condition=e}apply(e){if(e.conditions[this.condition])try{e.dependentConditions.push(this.condition),this.chained.apply(e)}finally{e.dependentConditions.pop()}}getPriority(){return 5}},UA=class vT extends mn{constructor(){super(),f(this,"applied",!1)}apply(t){this.applied=!0}clone(){let t=new vT;return t.applied=this.applied,t}},Ud=class extends je{constructor(e){super(),f(this,"checkAppliedAction"),f(this,"firstActions",[]),this.checkAppliedAction=new UA;for(let t of e)this.firstActions.push(cg(t,this.checkAppliedAction))}apply(e){for(let t of this.firstActions)if(t.apply(e),this.checkAppliedAction.applied)break;this.checkAppliedAction.applied===this.positive()&&this.chained.apply(e),this.checkAppliedAction.applied=!1}getPriority(){return Math.max(...this.firstActions.map(e=>e instanceof je?e.getPriority():0))}positive(){return!0}relational(){return!1}},GA=class extends Ud{positive(){return!1}},$A=class extends Ud{constructor(e){super([]),this.selectorTexts=e}apply(e){for(let t of this.selectorTexts){let i,r;/^\s*[+~]/.test(t)?(r=e.currentElement.parentNode,i=`:scope > :nth-child(${Array.from(r.children).indexOf(e.currentElement)+1}) ${t}`):(r=e.currentElement,i=`:scope ${t}`);try{if(r.querySelector(i)){this.checkAppliedAction.apply(e);break}}catch{}}this.checkAppliedAction.applied&&this.chained.apply(e),this.checkAppliedAction.applied=!1}relational(){return!0}},$a=class{constructor(e,t,i){this.condition=e,this.viewConditionId=t,this.viewCondition=i}increment(e){e.increment(this.condition,this.viewCondition)}decrement(e){e.decrement(this.condition,this.viewCondition)}buildViewConditionMatcher(e){return e.buildViewConditionMatcher(this.viewConditionId)}},YA=class ST extends $a{constructor(t,i,r){super(t,i,r)}fresh(t){return new ST(this.condition,this.viewConditionId,this.buildViewConditionMatcher(t))}push(t,i){return i==0&&this.increment(t),!1}pop(t,i){return i==0?(this.decrement(t),!0):!1}},XA=class xT extends $a{constructor(t,i,r){super(t,i,r)}fresh(t){return new xT(this.condition,this.viewConditionId,this.buildViewConditionMatcher(t))}push(t,i){return i==0?this.increment(t):i==1&&this.decrement(t),!1}pop(t,i){return i==0?(this.decrement(t),!0):(i==1&&this.increment(t),!1)}},KA=class wT extends $a{constructor(t,i,r){super(t,i,r),f(this,"fired",!1)}fresh(t){return new wT(this.condition,this.viewConditionId,this.buildViewConditionMatcher(t))}push(t,i){return this.fired?(this.decrement(t),!0):!1}pop(t,i){return this.fired?(this.decrement(t),!0):(i==0&&(this.fired=!0,this.increment(t)),!1)}},ZA=class CT extends $a{constructor(t,i,r){super(t,i,r),f(this,"fired",!1)}fresh(t){return new CT(this.condition,this.viewConditionId,this.buildViewConditionMatcher(t))}push(t,i){return this.fired&&(i==-1?this.increment(t):i==0&&this.decrement(t)),!1}pop(t,i){if(this.fired){if(i==-1)return this.decrement(t),!0;i==0&&this.increment(t)}else i==0&&(this.fired=!0,this.increment(t));return!1}},QA=class{constructor(e,t){this.afterprop=e,this.element=t}fresh(e){return this}push(e,t){return!1}pop(e,t){return t==0?(e.processPseudoelementProps(this.afterprop,this.element),!0):!1}},JA=class{constructor(e){this.lang=e}fresh(e){return this}push(e,t){return!1}pop(e,t){return t==0?(e.lang=this.lang,!0):!1}},eN=class{constructor(e){this.oldQuotes=e}fresh(e){return this}push(e,t){return!1}pop(e,t){return t==0?(e.quotes=this.oldQuotes,!0):!1}},tN=class extends Xr{constructor(e){super(),this.element=e}createValueFromString(e,t){switch(t){case"url":return e?new mi(e):new mi("about:invalid");case"string":default:return e?new bt(e):new bt("")}}visitFunc(e){if(e.name!=="attr")return super.visitFunc(e);let t="string",i=null,r=null;if(e.values[0]instanceof Ke){let s=e.values[0].values;s.length>=2&&(t=s[1].stringValue()),i=s[0].stringValue()}else i=e.values[0].stringValue();return e.values.length>1?r=this.createValueFromString(e.values[1].stringValue(),t):r=this.createValueFromString(null,t),this.element&&this.element.hasAttribute(i)?this.createValueFromString(this.element.getAttribute(i),t):r}};function Cs(e){if(hr(e)){if(e instanceof bt)return e.stringValue();if(e instanceof Ke)return e.values.map(t=>Cs(t)).join("")}return""}var Gd=class extends Xr{constructor(e,t,i){super(),this.cascade=e,this.element=t,this.counterResolver=i}visitIdent(e){let t=this.cascade,i=t.quotes,r=Math.floor(i.length/2)-1;switch(e.name){case"open-quote":{let s=i[2*Math.min(r,t.quoteDepth)];return t.quoteDepth++,s}case"close-quote":return t.quoteDepth>0&&t.quoteDepth--,i[2*Math.min(r,t.quoteDepth)+1];case"no-open-quote":return t.quoteDepth++,new bt("");case"no-close-quote":return t.quoteDepth>0&&t.quoteDepth--,new bt("")}return e}format(e,t){let i=!1,r=!1,s;(s=t.match(/^upper-(.*)/))!=null?(i=!0,t=s[1]):(s=t.match(/^lower-(.*)/))!=null&&(r=!0,t=s[1]);let o="";return fg[t]?o=rN(fg[t],e):bg[t]?o=sN(bg[t],e):yg[t]!=null?o=yg[t]:t=="decimal-leading-zero"?(o=`${e}`,o.length==1&&(o=`0${o}`)):t=="cjk-ideographic"||t=="trad-chinese-informal"?o=oN(e,aN):o=`${e}`,i?o.toUpperCase():r?o.toLowerCase():o}visitFuncCounter(e){let t=e[0].toString(),i=e.length>1?e[1].stringValue():"decimal",r=this.cascade.counters[t];if(r&&r.length){let s=r&&r.length&&r[r.length-1]||0;return new bt(this.format(s,i))}else{let s=new re(this.counterResolver.getPageCounterVal(t,o=>this.format(o||0,i)));return new Ke([s])}}visitFuncCounters(e){let t=e[0].toString(),i=e[1].stringValue(),r=e.length>2?e[2].stringValue():"decimal",s=this.cascade.counters[t],o=new Wi;if(s&&s.length)for(let c=0;c<s.length;c++)c>0&&o.append(i),o.append(this.format(s[c],r));let u=new re(this.counterResolver.getPageCountersVal(t,c=>{let m=[];if(c.length)for(let y=0;y<c.length;y++)m.push(this.format(c[y],r));let p=o.toString();return p.length&&m.push(p),m.length?m.join(i):this.format(0,r)}));return new Ke([u])}visitFuncTargetCounter(e){let t=e[0],i;t instanceof mi?i=t.url:i=t.stringValue();let r=e[1].toString(),s=e.length>2?e[2].stringValue():"decimal",o=new re(this.counterResolver.getTargetCounterVal(i,r,u=>this.format(u||0,s)));return new Ke([o])}visitFuncTargetCounters(e){let t=e[0],i;t instanceof mi?i=t.url:i=t.stringValue();let r=e[1].toString(),s=e[2].stringValue(),o=e.length>3?e[3].stringValue():"decimal",u=new re(this.counterResolver.getTargetCountersVal(i,r,c=>{let m=c.map(p=>this.format(p,o));return m.length?m.join(s):this.format(0,o)}));return new Ke([u])}visitFuncTargetText(e){let t=e[0],i;t instanceof mi?i=t.url:i=t.stringValue();let r=e.length>1?e[1].stringValue():"content",s=new re(this.counterResolver.getTargetTextVal(i,r));return new Ke([s])}visitFuncString(e){let t=e.length>0?e[0].stringValue():"",i=e.length>1?e[1].stringValue():"first";return new re(this.counterResolver.getNamedStringVal(t,i))}visitFuncElement(e){let t=e.length>0?e[0].stringValue():"",i=e.length>1?e[1].stringValue():"first";return new re(this.counterResolver.getRunningElementVal(t,i))}visitFuncContent(e){var t,i,r,s,o,u;let c=e.length>0?e[0].stringValue():"text",m="";switch(c){case"text":m=this.element.textContent;break;case"before":case"after":{let p=Ei(this.cascade.currentStyle,"_pseudos"),y=(i=(t=p?.[c])==null?void 0:t.content)==null?void 0:i.value;m=Cs(y)}break;case"first-letter":{let p=Ei(this.cascade.currentStyle,"_pseudos"),y=(Cs((s=(r=p?.before)==null?void 0:r.content)==null?void 0:s.value)||this.element.textContent||Cs((u=(o=p?.after)==null?void 0:o.content)==null?void 0:u.value)).match(Ca);m=y?y[0]:""}break}return new bt(m)}visitFuncLeader(e){let t="";if(e[0]instanceof Jt)switch(e[0].stringValue()){case"dotted":t=".";break;case"solid":t="_";break;case"space":t=" ";break}else e[0]instanceof bt&&(t=e[0].stringValue());return t.length==0?new bt(""):new re(new dt(null,()=>t,"viv-leader"))}visitFunc(e){switch(e.name){case"counter":if(e.values.length<=2)return this.visitFuncCounter(e.values);break;case"counters":if(e.values.length<=3)return this.visitFuncCounters(e.values);break;case"target-counter":if(e.values.length<=3)return this.visitFuncTargetCounter(e.values);break;case"target-counters":if(e.values.length<=4)return this.visitFuncTargetCounters(e.values);break;case"target-text":if(e.values.length>=1&&e.values.length<=2)return this.visitFuncTargetText(e.values);break;case"string":if(e.values.length<=2)return this.visitFuncString(e.values);break;case"element":if(e.values.length<=2)return this.visitFuncElement(e.values);break;case"content":if(e.values.length<=1)return this.visitFuncContent(e.values);break;case"leader":if(e.values.length<=1)return this.visitFuncLeader(e.values);break}return e}},iN=(e,t,i)=>{let r=t.filter(m=>m.after&&m.viewNode.nodeType===1&&m.viewNode.getAttribute("data-viv-leader"));for(let m of r){let p=function(R){L==="rtl"?T.textContent=(R.startsWith("\u200F")?"":"\u200F")+R+(R.endsWith("\u200F")?"":"\u200F"):T.textContent=R},y=function(){let R=i.clientLayout.getElementClientRect(E);return G.left>R.left||G.right<R.right||G.top>R.top||G.bottom<R.bottom},S=function(){let R,W;if(p(O),y())R=1,W=O.length/P.length;else{R=O.length/P.length,W=R;for(let F=0;F<16;F++){let $=O;for(let X=0;X<1<<F;X++)$+=P;if(p($),y()){W+=1<<F;break}}}for(let F=0;F<16;F++){let $="",X=Math.floor((R+W)/2);for(let ie=0;ie<X;ie++)$+=P;if(p($),y())W=X;else{if(R==X)return;R=X}}p(P)},v=function(R){let W=0,F=E.parentElement;for(;F&&F!==w.viewNode;)W+=i.getComputedInsets(F)[R],F=F.parentElement;return W};var s=p,o=y,u=S,c=v;let w=m.parent;for(;w&&w.inline;)w=w.parent;let T=m.viewNode,E=T.parentElement,P=T.getAttribute("data-viv-leader-value"),O=T.textContent||P,{writingMode:A,direction:L,marginInlineEnd:H}=i.clientLayout.getElementComputedStyle(E);T.style.marginInlineStart="1px",p(P),E.style.display="inline-block",E.style.textIndent="0";let G=i.clientLayout.getElementClientRect(w.viewNode),te=i.clientLayout.getElementClientRect(E),ae=i.parseComputedLength(H),ge=0,we=[],di=null,Bt=E.parentElement.nextSibling;for(;Bt;){if(Bt.nodeType!==1){Bt=Bt.nextSibling;continue}let R=Bt,W=i.clientLayout.getElementComputedStyle(R),F=W.display,$=W.float,X=W.position;if($!=="none"||X==="absolute"||X==="fixed"){Bt=Bt.nextSibling;continue}if(F==="inline"||F==="inline-block"||F==="inline-flex"||F==="inline-grid"||F==="inline-table")we.push(R),di=R;else if(F==="block"||F==="flex"||F==="grid"||F==="table"||F==="list-item")break;Bt=Bt.nextSibling}if(we.length>0&&E.parentElement){let R=i.clientLayout.getElementClientRect(E.parentElement),W=i.clientLayout.getElementClientRect(di);A==="vertical-rl"||A==="vertical-lr"?ge=W.bottom-R.bottom:ge=W.right-R.right}A==="vertical-rl"||A==="vertical-lr"?(L==="rtl"?G.top+=ae:G.bottom-=ae,G.left=te.left,G.right=te.right,G.top=Math.min(te.top,G.top),G.bottom=Math.max(te.bottom,G.bottom),ge>0&&(L==="rtl"?G.top+=ge:G.bottom-=ge)):(L==="rtl"?G.left+=ae:G.right-=ae,G.top=te.top,G.bottom=te.bottom,G.left=Math.min(te.left,G.left),G.right=Math.max(te.right,G.right),ge>0&&(L==="rtl"?G.left+=ge:G.right-=ge)),S();let It=i.clientLayout.getElementClientRect(E);L=="rtl"?E.style.float="left":E.style.float="right";let _=i.clientLayout.getElementClientRect(E),Q=0;L=="rtl"?A=="vertical-rl"||A=="vertical-lr"?Q=It.top-_.top-v("top"):Q=It.left-_.left-v("left"):A=="vertical-rl"||A=="vertical-lr"?Q=_.bottom-It.bottom-v("bottom"):Q=_.right-It.right-v("right"),Q-=ge,Q=Math.max(0,Q-.1),E.style.float="",T.style.marginInlineStart=`${Q}px`}};De("POST_LAYOUT_BLOCK",iN);var fg={roman:[4999,1e3,"M",900,"CM",500,"D",400,"CD",100,"C",90,"XC",50,"L",40,"XL",10,"X",9,"IX",5,"V",4,"IV",1,"I"],armenian:[9999,9e3,"\u0584",8e3,"\u0583",7e3,"\u0582",6e3,"\u0581",5e3,"\u0580",4e3,"\u057F",3e3,"\u057E",2e3,"\u057D",1e3,"\u057C",900,"\u057B",800,"\u057A",700,"\u0579",600,"\u0578",500,"\u0577",400,"\u0576",300,"\u0575",200,"\u0574",100,"\u0573",90,"\u0572",80,"\u0571",70,"\u0570",60,"\u056F",50,"\u056E",40,"\u056D",30,"\u056C",20,"\u056B",10,"\u056A",9,"\u0569",8,"\u0568",7,"\u0567",6,"\u0566",5,"\u0565",4,"\u0564",3,"\u0563",2,"\u0562",1,"\u0561"],georgian:[19999,1e4,"\u10F5",9e3,"\u10F0",8e3,"\u10EF",7e3,"\u10F4",6e3,"\u10EE",5e3,"\u10ED",4e3,"\u10EC",3e3,"\u10EB",2e3,"\u10EA",1e3,"\u10E9",900,"\u10E8",800,"\u10E7",700,"\u10E6",600,"\u10E5",500,"\u10E4",400,"\u10F3",300,"\u10E2",200,"\u10E1",100,"\u10E0",90,"\u10DF",80,"\u10DE",70,"\u10DD",60,"\u10F2",50,"\u10DC",40,"\u10DB",30,"\u10DA",20,"\u10D9",10,"\u10D8",9,"\u10D7",8,"\u10F1",7,"\u10D6",6,"\u10D5",5,"\u10D4",4,"\u10D3",3,"\u10D2",2,"\u10D1",1,"\u10D0"],hebrew:[999,400,"\u05EA",300,"\u05E9",200,"\u05E8",100,"\u05E7",90,"\u05E6",80,"\u05E4",70,"\u05E2",60,"\u05E1",50,"\u05E0",40,"\u05DE",30,"\u05DC",20,"\u05DB",19,"\u05D9\u05D8",18,"\u05D9\u05D7",17,"\u05D9\u05D6",16,"\u05D8\u05D6",15,"\u05D8\u05D5",10,"\u05D9",9,"\u05D8",8,"\u05D7",7,"\u05D6",6,"\u05D5",5,"\u05D4",4,"\u05D3",3,"\u05D2",2,"\u05D1",1,"\u05D0"]},bg={latin:"a-z",alpha:"a-z",greek:"\u03B1-\u03C1\u03C3-\u03C9",russian:"\u0430-\u0438\u043A-\u0449\u044D-\u044F"},yg={square:"\u25A0",disc:"\u2022",circle:"\u25E6",none:""};function rN(e,t){let i=e[0];if(t>i||t<=0||t!=Math.round(t))return"";let r="";for(let s=1;s<e.length;s+=2){let o=e[s],u=Math.floor(t/o);if(u>20)return"";for(t-=u*o;u>0;)r+=e[s+1],u--}return r}function nN(e){let t=[],i=0;for(;i<e.length;)if(e.substr(i+1,1)=="-"){let r=e.charCodeAt(i),s=e.charCodeAt(i+2);i+=3;for(let o=r;o<=s;o++)t.push(String.fromCharCode(o))}else t.push(e.substr(i++,1));return t}function sN(e,t){if(t<=0||t!=Math.round(t))return"";let i=nN(e),r="";do{t--;let s=t%i.length;r=i[s]+r,t=(t-s)/i.length}while(t>0);return r}var aN={formal:!1,digits:"\u96F6\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D",markers:"\u5341\u767E\u5343",negative:"\u8CA0"};function oN(e,t){if(e>9999||e<-9999)return`${e}`;if(e==0)return t.digits.charAt(0);let i=new Wi;if(e<0&&(i.append(t.negative),e=-e),e<10)i.append(t.digits.charAt(e));else if(!t.formal&&e<=19)i.append(t.markers.charAt(0)),e!=0&&i.append(t.digits.charAt(e-10));else{let r=Math.floor(e/1e3);r&&(i.append(t.digits.charAt(r)),i.append(t.markers.charAt(2)));let s=Math.floor(e/100)%10;s&&(i.append(t.digits.charAt(s)),i.append(t.markers.charAt(1)));let o=Math.floor(e/10)%10;o&&(i.append(t.digits.charAt(o)),i.append(t.markers.charAt(0)));let u=e%10;u&&i.append(t.digits.charAt(u))}return i.toString()}var $d=1/1048576;function gn(e,t){for(let i in e)t[i]=e[i].clone()}var lN=class kT{constructor(){f(this,"nsCount",0),f(this,"nsPrefix",{}),f(this,"tags",{}),f(this,"nstags",{}),f(this,"epubtypes",{}),f(this,"classes",{}),f(this,"ids",{}),f(this,"pagetypes",{}),f(this,"order",0)}clone(){let t=new kT;t.nsCount=this.nsCount;for(let i in this.nsPrefix)t.nsPrefix[i]=this.nsPrefix[i];return gn(this.tags,t.tags),gn(this.nstags,t.nstags),gn(this.epubtypes,t.epubtypes),gn(this.classes,t.classes),gn(this.ids,t.ids),gn(this.pagetypes,t.pagetypes),t.order=this.order,t}insertInTable(t,i,r){let s=t[i];s&&(r=s.mergeWith(r)),t[i]=r}createInstance(t,i,r,s){return new dN(this,t,i,r,s)}nextOrder(){return this.order+=$d}},dN=class{constructor(e,t,i,r,s){this.context=t,this.counterListener=i,this.counterResolver=r,f(this,"code"),f(this,"stack",[[],[]]),f(this,"conditions",{}),f(this,"currentElement",null),f(this,"currentElementOffset",null),f(this,"currentStyle",null),f(this,"currentClassNames",null),f(this,"currentLocalName",""),f(this,"currentNamespace",""),f(this,"currentId",""),f(this,"currentXmlId",""),f(this,"currentNSTag",""),f(this,"currentEpubTypes",null),f(this,"currentPageType",null),f(this,"previousPageType",null),f(this,"firstPageType",null),f(this,"isFirst",!0),f(this,"isRoot",!0),f(this,"counters",{}),f(this,"counterScoping",[{}]),f(this,"quotes"),f(this,"quoteDepth",0),f(this,"lang",""),f(this,"siblingOrderStack",[0]),f(this,"currentSiblingOrder",0),f(this,"siblingTypeCountsStack",[{}]),f(this,"currentSiblingTypeCounts"),f(this,"currentFollowingSiblingOrder",null),f(this,"followingSiblingOrderStack"),f(this,"followingSiblingTypeCountsStack",[{}]),f(this,"currentFollowingSiblingTypeCounts"),f(this,"viewConditions",{}),f(this,"dependentConditions",[]),f(this,"elementStack"),this.code=e,this.quotes=[new bt("\u201C"),new bt("\u201D"),new bt("\u2018"),new bt("\u2019")],this.currentSiblingTypeCounts=this.siblingTypeCountsStack[0],this.followingSiblingOrderStack=[this.currentFollowingSiblingOrder],this.currentFollowingSiblingTypeCounts=this.siblingTypeCountsStack[0]}pushConditionItem(e){this.stack[this.stack.length-1].push(e)}increment(e,t){this.conditions[e]=(this.conditions[e]||0)+1,t&&(this.viewConditions[e]?this.viewConditions[e].push(t):this.viewConditions[e]=[t])}decrement(e,t){this.conditions[e]--,this.viewConditions[e]&&(this.viewConditions[e]=this.viewConditions[e].filter(i=>i!==t),this.viewConditions[e].length===0&&delete this.viewConditions[e])}buildViewConditionMatcher(e){let t=null;e&&(this.currentElementOffset,t=qa.buildViewConditionMatcher(this.currentElementOffset,e));let i=this.dependentConditions.map(r=>{let s=this.viewConditions[r];return s&&s.length>0?s.length===1?s[0]:qa.buildAnyMatcher([].concat(s)):null}).filter(r=>r);return i.length<=0?t:t===null?i.length===1?i[0]:qa.buildAllMatcher(i):qa.buildAllMatcher([t].concat(i))}applyAction(e,t){let i=e[t];i&&i.apply(this)}pushRule(e,t,i){this.currentElement=null,this.currentElementOffset=null,this.currentStyle=i,this.currentNamespace="",this.currentLocalName="",this.currentId="",this.currentXmlId="",this.currentClassNames=e,this.currentNSTag="",this.currentEpubTypes=Yd,this.currentPageType=t,this.applyActions()}defineCounter(e,t){let i=this.counterScoping[this.counterScoping.length-1];i||(i={},this.counterScoping[this.counterScoping.length-1]=i),this.counters[e]?(i[e]&&this.counters[e].pop(),this.counters[e].push(t)):this.counters[e]=[t],i[e]=!0}pushCounters(e){var t,i,r,s,o,u,c;let m=N.inline,p=e.display;if(p&&(m=p.evaluate(this.context)),m===N.none){this.currentElement.setAttribute("data-viv-display-none","true"),this.counterScoping.push(null);return}else if(this.currentElement.closest("[data-viv-display-none]")){this.counterScoping.push(null);return}let y=N.inline,S=e.float;S&&(y=S.evaluate(this.context));let v=null,w=null,T=null,E=e["counter-reset"];if(E){let A=E.evaluate(this.context);A&&(v=ns(A,!0))}let P=e["counter-set"];if(P){let A=P.evaluate(this.context);A&&(T=ns(A,!1))}let O=e["counter-increment"];if(O){let A=O.evaluate(this.context);A&&(w=ns(A,!1))}if((this.currentLocalName=="ol"||this.currentLocalName=="ul")&&this.currentNamespace=="http://www.w3.org/1999/xhtml"&&(v||(v={}),v["list-item"]=((i=(t=this.currentElement)==null?void 0:t.start)!=null?i:1)-1),m===N.list_item&&(w||(w={}),w["list-item"]=(r=w["list-item"])!=null?r:1,/^\s*[-+]?\d/.test((o=(s=this.currentElement)==null?void 0:s.getAttribute("value"))!=null?o:"")&&(T||(T={}),T["list-item"]=this.currentElement.value)),((u=this.currentElement)==null?void 0:u.parentNode.nodeType)===Node.DOCUMENT_NODE&&(v||(v={}),v.footnote===void 0&&(v.footnote=0)),y===N.footnote&&(w||(w={}),w.footnote===void 0)){let A=(c=this.currentStyle["counter-increment"])==null?void 0:c.value;(!A||!(A===N.footnote||A instanceof Ke&&A.values.includes(N.footnote)))&&(w.footnote=1)}if(v)for(let A in v)this.defineCounter(A,v[A]);if(w)for(let A in w){this.counters[A]||this.defineCounter(A,0);let L=this.counters[A];L[L.length-1]+=w[A]}if(T)for(let A in T)if(!this.counters[A])this.defineCounter(A,T[A]);else{let L=this.counters[A];L[L.length-1]=T[A]}if(m===N.list_item){let A=this.counters["list-item"],L=A[A.length-1];e["ua-list-item-count"]=new xe(new or(L),0)}this.counterScoping.push(null)}popCounters(){let e=this.counterScoping.pop();if(e)for(let t in e){let i=this.counters[t];i&&(i.length==1?delete this.counters[t]:i.pop())}}setNamedStrings(e){let t=e["string-set"];if(!t)return;t=t.filterValue(new Gd(this,this.currentElement,this.counterResolver));let i=t.value instanceof Mt?t.value.values:[t.value];for(let r of i)if(r instanceof Ke){let s=r.values[0].stringValue(),o=r.values.slice(1).map(u=>Cs(u)).join("");this.counterResolver.setNamedString(s,o,this.currentElementOffset)}delete e["string-set"]}setRunningElement(e){let t=e.position;if(t?.value instanceof Kr&&t.value.name==="running"){let i=t.value.values[0].stringValue();this.counterResolver.setRunningElement(i,this.currentElementOffset)}}processPseudoelementProps(e,t){this.pushCounters(e);let i=e.content;i&&(e.content=i.filterValue(new Gd(this,t,this.counterResolver))),this.popCounters()}pushElement(e,t,i,r){var s,o;this.currentPageType=null,this.currentElement=t,this.currentElementOffset=r,this.currentStyle=i,this.currentNamespace=t.namespaceURI,this.currentLocalName=t.localName;let u=this.code.nsPrefix[this.currentNamespace];u?this.currentNSTag=u+this.currentLocalName:this.currentNSTag="",this.currentId=t.getAttribute("id"),this.currentXmlId=t.getAttributeNS("http://www.w3.org/XML/1998/namespace","id");let c=t.getAttribute("class");c?this.currentClassNames=c.split(/\s+/):this.currentClassNames=Yd;let m=t.getAttributeNS("http://www.idpf.org/2007/ops","type");m?this.currentEpubTypes=m.split(/\s+/):this.currentEpubTypes=Yd;let p=zl(t);p&&(this.stack[this.stack.length-1].push(new JA(this.lang)),this.lang=p.toLowerCase());let y=this.isRoot,S=this.siblingOrderStack;this.currentSiblingOrder=++S[S.length-1],S.push(0);let v=this.siblingTypeCountsStack,w=this.currentSiblingTypeCounts=v[v.length-1],T=w[this.currentNamespace];T||(T=w[this.currentNamespace]={}),T[this.currentLocalName]=(T[this.currentLocalName]||0)+1,v.push({});let E=this.followingSiblingOrderStack;E[E.length-1]!==null?this.currentFollowingSiblingOrder=--E[E.length-1]:this.currentFollowingSiblingOrder=null,E.push(null);let P=this.followingSiblingTypeCountsStack,O=this.currentFollowingSiblingTypeCounts=P[P.length-1];O&&O[this.currentNamespace]&&O[this.currentNamespace][this.currentLocalName]--,P.push({}),this.applyActions(),this.applyVarFilter([this.currentStyle],e,t),this.applyCalcFilter(this.currentStyle,this.context),this.applyAttrFilter(t);let A=i.quotes,L=null;if(A){let te=A.evaluate(this.context);te&&(L=new eN(this.quotes),te===N.none?this.quotes=[new bt(""),new bt("")]:te===N.auto||te===N.initial?this.quotes=[new bt("\u201C"),new bt("\u201D"),new bt("\u2018"),new bt("\u2019")]:te instanceof Ke&&(this.quotes=te.values))}this.pushCounters(this.currentStyle);let H=this.currentId||this.currentXmlId||t.getAttribute("name")||"";if(y||H){let te={};Object.keys(this.counters).forEach(ae=>{te[ae]=Array.from(this.counters[ae])}),this.counterListener.countersOfId(H,te)}let G=Ei(this.currentStyle,"_pseudos");if(G){let te=!0;for(let ae of uN){ae||(te=!1);let ge=G[ae];ge&&((ae==="before"||ae==="after")&&!hr((s=ge.content)==null?void 0:s.value)||(ae==="footnote-call"||ae==="footnote-marker")&&((o=Nt(this.currentStyle,"float"))==null?void 0:o.value)!==N.footnote?delete G[ae]:te?this.processPseudoelementProps(ge,t):this.stack[this.stack.length-2].push(new QA(ge,t)))}}this.setNamedStrings(this.currentStyle),this.setRunningElement(this.currentStyle),L&&this.stack[this.stack.length-2].push(L)}applyAttrFilterInner(e,t){for(let i in t)pn(i)&&!qi(i)&&(t[i]=t[i].filterValue(e))}applyAttrFilter(e){let t=new tN(e),i=this.currentStyle,r=Ei(i,"_pseudos");for(let s in r)this.applyAttrFilterInner(t,r[s]);this.applyAttrFilterInner(t,i)}applyVarFilter(e,t,i){var r,s,o;let u=e[0],c=new vN(e,t,i),m=32,p={};for(let y in u)if(Dd(y)){let S=Ei(u,y);for(let v in S)this.applyVarFilter([S[v],...e],t,i)}else if(pn(y)){let S=Nt(u,y),v=S.value;for(let w=0;;w++){if(w>=m){v=he;break}let T=v.visit(c);if(c.error){v=he,c.error=!1;break}if(T===v)break;v=T}if(v!==S.value){let w=t.validatorSet,T=(r=w?.shorthands[y])==null?void 0:r.clone();if(T)if(Ee(v)){for(let E of T.propList){let P=new xe(v,S.priority),O=Nt(u,E);Rr(p,E,Md(this.context,O,P))}delete u[y]}else{let E=tn(t.scope,new ki(v.toString(),null),"");if(E&&(E.visit(T),!T.error)){for(let P of T.propList){let O=new xe((o=(s=T.values[P])!=null?s:w.defaultValues[P])!=null?o:N.initial,S.priority),A=Nt(u,P);Rr(p,P,Md(this.context,A,O))}delete u[y]}}else u[y]=new xe(v,S.priority)}if(p[y]){let w=Nt(u,y);w&&w.value!==he&&Gi(p,y,w,this.context)}}for(let y in p)u[y]=p[y]}applyCalcFilter(e,t){let i=new Eg(t);for(let r in e)if(Dd(r)){let s=Ei(e,r);for(let o in s)this.applyCalcFilter(s[o],t)}else if(pn(r)&&!qi(r)){let s=Nt(e,r),o=s.value.visit(i);o!==s.value&&(e[r]=new xe(o,s.priority))}}applyActions(){let e;for(e=0;e<this.currentClassNames.length;e++)this.applyAction(this.code.classes,this.currentClassNames[e]);for(e=0;e<this.currentEpubTypes.length;e++)this.applyAction(this.code.epubtypes,this.currentEpubTypes[e]);this.applyAction(this.code.ids,this.currentId),this.applyAction(this.code.tags,this.currentLocalName),this.currentLocalName!=""&&this.applyAction(this.code.tags,"*"),this.applyAction(this.code.nstags,this.currentNSTag),this.currentPageType!==null&&(this.applyAction(this.code.pagetypes,this.currentPageType),this.applyAction(this.code.pagetypes,"*")),this.stack.push([]);for(let t=1;t>=-1;--t){let i=this.stack[this.stack.length-t-2];for(e=0;e<i.length;)i[e].push(this,t)?i.splice(e,1):e++}this.isFirst=!0,this.isRoot=!1}pop(){for(let e=1;e>=-1;--e){let t=this.stack[this.stack.length-e-2],i=0;for(;i<t.length;)t[i].pop(this,e)?t.splice(i,1):i++}this.stack.pop(),this.isFirst=!1}popRule(){this.pop()}popElement(e){this.siblingOrderStack.pop(),this.siblingTypeCountsStack.pop(),this.followingSiblingOrderStack.pop(),this.followingSiblingTypeCountsStack.pop(),this.pop(),this.popCounters()}},Yd=[],uN=["before","transclusion-before","footnote-call","footnote-marker","inner","first-letter","first-line","","transclusion-after","after"],Xd=null;function cN(e){Xd=e}var ks=class extends os{constructor(e,t,i,r,s,o,u){super(e,t,u),this.condition=i,this.regionId=s,this.validatorSet=o,f(this,"chain",null),f(this,"specificity",0),f(this,"elementStyle",null),f(this,"conditionCount",0),f(this,"pseudoelement",null),f(this,"footnoteContent",!1),f(this,"cascade"),f(this,"state"),f(this,"viewConditionId",null),f(this,"insideSelectorRule"),f(this,"invalid",!1),this.cascade=r?r.cascade:Xd?Xd.clone():new lN,this.state=0}insertNonPrimary(e){this.cascade.insertInTable(this.cascade.tags,"*",e)}processChain(e){let t=cg(this.chain,e);t!==e&&t.makePrimary(this.cascade)||this.insertNonPrimary(t)}isInsideSelectorRule(e){return this.state!=0?(this.reportAndSkip(e),!0):!1}tagSelector(e,t){!t&&!e||(t&&(this.specificity+=1),t&&e?this.chain.push(new LA(e,t.toLowerCase())):t?this.chain.push(new pg(t.toLowerCase())):this.chain.push(new BA(e)))}invalidSelector(e){ee.warn(e),this.chain.push(new Vt("")),this.setInvalid()}setInvalid(){this.invalid=!0;for(let e=this;e instanceof Es;e=e.parent)e.parent.invalid=!0}classSelector(e){if(this.pseudoelement){this.invalidSelector(`::${this.pseudoelement} followed by .${e}`);return}this.specificity+=256,this.chain.push(new OA(e))}pseudoclassSelector(e,t){if(this.pseudoelement){this.invalidSelector(`::${this.pseudoelement} followed by :${e}`);return}switch(e.toLowerCase()){case"enabled":this.chain.push(new qA);break;case"disabled":this.chain.push(new VA);break;case"checked":this.chain.push(new HA);break;case"root":case"scope":this.chain.push(new DA);break;case"link":this.chain.push(new pg("a")),this.chain.push(new mg("","href"));break;case"-adapt-href-epub-type":case"href-epub-type":if(t&&t.length>=1&&typeof t[0]=="string"){let i=t[0],r=new RegExp(`(^|\\s)${nr(i)}($|\\s)`),s=t[1];this.chain.push(new _A(r,s))}else this.chain.push(new Vt(""));break;case"-adapt-footnote-content":case"footnote-content":this.footnoteContent=!0;break;case"visited":case"active":case"hover":case"focus":this.chain.push(new Vt(""));break;case"lang":if(t&&t.length==1&&typeof t[0]=="string"){let i=t[0];this.chain.push(new MA(new RegExp(`^${nr(i.toLowerCase())}($|-)`)))}else this.chain.push(new Vt(""));break;case"nth-child":case"nth-last-child":case"nth-of-type":case"nth-last-of-type":{let i=hN[e.toLowerCase()];t&&t.length==2?this.chain.push(new i(t[0],t[1])):this.chain.push(new Vt(""));break}case"first-child":this.chain.push(new gg);break;case"last-child":this.chain.push(new Vd(0,1));break;case"first-of-type":this.chain.push(new qd(0,1));break;case"last-of-type":this.chain.push(new Hd(0,1));break;case"only-child":this.chain.push(new gg),this.chain.push(new Vd(0,1));break;case"only-of-type":this.chain.push(new qd(0,1)),this.chain.push(new Hd(0,1));break;case"empty":this.chain.push(new jA);break;case"before":case"after":case"first-line":case"first-letter":this.pseudoelementSelector(e,t);return;default:this.invalidSelector(`Unknown pseudo-class :${e}`);return}this.specificity+=256}pseudoelementSelector(e,t){switch(e){case"before":case"after":case"first-line":case"first-letter":case"footnote-call":case"footnote-marker":case"inner":case"after-if-continues":if(!this.pseudoelement)this.pseudoelement=e;else{this.invalidSelector(`Double pseudo-element ::${this.pseudoelement}::${e}`);return}break;case"first-n-lines":if(t&&t.length==1&&typeof t[0]=="number"){let i=Math.round(t[0]);if(i>0&&i==t[0]){if(!this.pseudoelement)this.pseudoelement=`first-${i}-lines`;else{this.invalidSelector(`Double pseudo-element ::${this.pseudoelement}::${e}`);return}break}}this.chain.push(new Vt(""));break;case"nth-fragment":t&&t.length==2?this.viewConditionId=`NFS_${t[0]}_${t[1]}`:this.chain.push(new Vt(""));break;default:this.invalidSelector(`Unknown pseudo-element ::${e}`);return}this.specificity+=1}idSelector(e){this.specificity+=65536,this.chain.push(new RA(e))}attributeSelector(e,t,i,r){this.specificity+=256,t=t.toLowerCase(),r=r||"";let s;switch(i){case 0:s=new mg(e,t);break;case 39:s=new FA(e,t,r);break;case 45:!r||r.match(/\s/)?s=new Vt(""):s=new xs(e,t,new RegExp(`(^|\\s)${nr(r)}($|\\s)`));break;case 44:s=new xs(e,t,new RegExp(`^${nr(r)}($|-)`));break;case 43:r?s=new xs(e,t,new RegExp(`^${nr(r)}`)):s=new Vt("");break;case 42:r?s=new xs(e,t,new RegExp(`${nr(r)}$`)):s=new Vt("");break;case 46:r?s=new xs(e,t,new RegExp(nr(r))):s=new Vt("");break;case 50:if(r=="supported")s=new zA(e,t);else{this.invalidSelector(`Unsupported :: attr selector op: ${r}`);return}break;default:this.invalidSelector(`Unsupported attr selector: ${i}`);return}this.chain.push(s)}descendantSelector(){let e=`d${Ya++}`;this.processChain(new Ua(new YA(e,this.viewConditionId,null))),this.chain=[new Vt(e)],this.viewConditionId=null}childSelector(){let e=`c${Ya++}`;this.processChain(new Ua(new XA(e,this.viewConditionId,null))),this.chain=[new Vt(e)],this.viewConditionId=null}adjacentSiblingSelector(){let e=`a${Ya++}`;this.processChain(new Ua(new KA(e,this.viewConditionId,null))),this.chain=[new Vt(e)],this.viewConditionId=null}followingSiblingSelector(){let e=`f${Ya++}`;this.processChain(new Ua(new ZA(e,this.viewConditionId,null))),this.chain=[new Vt(e)],this.viewConditionId=null}nextSelector(){this.finishChain(),this.pseudoelement=null,this.footnoteContent=!1,this.specificity=0,this.chain=[]}startSelectorRule(){this.isInsideSelectorRule("E_CSS_UNEXPECTED_SELECTOR")||(this.state=1,this.elementStyle={},this.pseudoelement=null,this.specificity=0,this.footnoteContent=!1,this.chain=[],this.invalid=!1)}error(e,t){super.error(e,t),this.state==1&&(this.state=0),this.setInvalid()}startStylesheet(e){super.startStylesheet(e),this.state=0}startRuleBody(){this.finishChain(),super.startRuleBody(),this.state==1&&(this.state=0)}endRule(){super.endRule(),this.insideSelectorRule=0}finishChain(){this.chain&&(this.processChain(this.makeApplyRuleAction(this.specificity)),this.chain=null,this.pseudoelement=null,this.viewConditionId=null,this.footnoteContent=!1,this.specificity=0)}makeApplyRuleAction(e){let t=this.regionId;return this.footnoteContent&&(t?t="xxx-bogus-xxx":t="footnote"),new jd(this.elementStyle,e,this.pseudoelement,t,this.viewConditionId)}special(e,t){let i;this.condition?i=new zd(t,0,this.condition):i=new xe(t,0),ug(this.elementStyle,e).push(i)}property(e,t,i){this.validatorSet.validatePropertyAndHandleShorthand(e,t,i,this)}invalidPropertyValue(e,t){this.report(`E_INVALID_PROPERTY_VALUE ${e}: ${t.toString()}`)}unknownProperty(e,t){this.report(`E_INVALID_PROPERTY ${e}: ${t.toString()}`)}simpleProperty(e,t,i){e=="display"&&(t===N.oeb_page_head||t===N.oeb_page_foot)&&(this.simpleProperty("flow-options",new Ke([N.exclusive,N._static]),i),this.simpleProperty("flow-into",t,i),t=N.block),Je("SIMPLE_PROPERTY").forEach(o=>{let u=o({name:e,value:t,important:i});e=u.name,t=u.value,i=u.important});let r=(i?this.getImportantSpecificity():this.getBaseSpecificity())+this.cascade.nextOrder(),s=this.condition?new zd(t,r,this.condition):new xe(t,r);Gi(this.elementStyle,e,s)}finish(){return this.cascade}startFuncWithSelector(e){let t;switch(e){case"is":t=new Es(this);break;case"not":t=new pN(this);break;case"where":t=new mN(this);break;case"has":t=new gN(this);break}t&&(t.startSelectorRule(),this.owner.pushHandler(t))}},hN={"nth-child":WA,"nth-of-type":qd,"nth-last-child":Vd,"nth-last-of-type":Hd},Ya=0,Es=class ET extends ks{constructor(t){super(t.scope,t.owner,t.condition,t,t.regionId,t.validatorSet,!1),this.parent=t,f(this,"parentChain"),f(this,"chains",[]),f(this,"maxSpecificity",0),f(this,"selectorTexts",[]),this.parentChain=t.chain}nextSelector(){this.chain&&this.chains.push(this.chain),this.maxSpecificity=Math.max(this.maxSpecificity,this.specificity),this.chain=[],this.pseudoelement=null,this.viewConditionId=null,this.footnoteContent=!1,this.specificity=0}endFuncWithSelector(){this.chain&&this.chains.push(this.chain),this.chains.length>0?(this.maxSpecificity=Math.max(this.maxSpecificity,this.specificity),this.parentChain.push(this.relational()?new $A(this.selectorTexts):this.positive()?new Ud(this.chains):new GA(this.chains)),this.increasingSpecificity()&&(this.parent.specificity+=this.maxSpecificity)):this.parentChain.push(new Vt("")),this.owner.popHandler()}startRuleBody(){this.reportAndSkip("E_CSS_UNEXPECTED_RULE_BODY")}error(t,i){super.error(t,i),this.chain=null,this.pseudoelement=null,this.viewConditionId=null,this.footnoteContent=!1,this.specificity=0;let r=!1;for(let s=this;s instanceof ET;s=s.parent)if(s.forgiving()){r=!0;break}r||this.owner.popHandler()}pushSelectorText(t){this.chain&&this.relational()&&this.selectorTexts.push(t)}positive(){return!0}increasingSpecificity(){return!0}forgiving(){return!0}relational(){return!1}},pN=class extends Es{positive(){return!1}forgiving(){return!1}},mN=class extends Es{increasingSpecificity(){return!1}},gN=class extends Es{relational(){return!0}},fN=class extends os{constructor(e,t){super(e,t,!1)}property(e,t,i){if(this.scope.values[e])this.error(`E_CSS_NAME_REDEFINED ${e}`,this.getCurrentToken());else{let r=e.match(/height|^(top|bottom)$/)?"vh":"vw",s=new Jn(this.scope,100,r);this.scope.defineName(e,t.toExpr(this.scope,s))}}},Xa=class extends os{constructor(e,t,i,r,s,o){super(e,t,!1),this.condition=i,this.elementStyle=r,this.validatorSet=s,this.ruleType=o,f(this,"order"),this.order=0}property(e,t,i){i?ee.warn("E_IMPORTANT_NOT_ALLOWED"):this.validatorSet.validatePropertyAndHandleShorthand(e,t,i,this)}invalidPropertyValue(e,t){ee.warn("E_INVALID_PROPERTY_VALUE",`${e}:`,t.toString())}unknownProperty(e,t){ee.warn("E_INVALID_PROPERTY",`${e}:`,t.toString())}simpleProperty(e,t,i){let r=i?this.getImportantSpecificity():this.getBaseSpecificity();r+=this.order,this.order+=$d;let s=this.condition?new zd(t,r,this.condition):new xe(t,r);Gi(this.elementStyle,e,s)}},bN=class extends Tm{constructor(e,t){super(e),this.validatorSet=t,f(this,"elementStyle",{}),f(this,"order",0)}property(e,t,i){this.validatorSet.validatePropertyAndHandleShorthand(e,t,i,this)}invalidPropertyValue(e,t){ee.warn("E_INVALID_PROPERTY_VALUE",`${e}:`,t.toString())}unknownProperty(e,t){ee.warn("E_INVALID_PROPERTY",`${e}:`,t.toString())}simpleProperty(e,t,i){let r=i?km:Cm;r+=this.order,this.order+=$d;let s=new xe(t,r);Gi(this.elementStyle,e,s)}};function vg(e,t){let i=lg(e);i&&i.forEach(r=>{r.matcher.matches()&&t(r.styles)})}function Kd(e,t,i){vg(i,r=>{Ts(e,r,t)})}function yN(e,t,i,r){let s=new bN(e,t),o=new ki(r,s);try{kP(o,s,i)}catch(u){ee.warn(u,"Style attribute parse error:")}return s.elementStyle}function Sg(e,t,i){let r=e["writing-mode"];if(r){let s=r.evaluate(t,"writing-mode");if(s&&s!==N.inherit&&s!==N.revert&&s!==N.unset)return s===N.vertical_rl}return i}function xg(e,t,i){let r=e.direction;if(r){let s=r.evaluate(t,"direction");if(s&&s!==N.inherit&&s!==N.revert&&s!==N.unset)return s===N.rtl}return i}function wg(e,t,i,r,s){let o={};for(let u in e)pn(u)&&(o[u]=Nt(e,u));return Kd(o,t,e),Cg(e,i,r,(u,c)=>{Ts(o,c,t),Kd(o,t,c)}),o}function Cg(e,t,i,r){let s=Ei(e,"_regions");if((t||i)&&s){if(i){let o=["footnote"];t?t=t.concat(o):t=o}for(let o of t){let u=s[o];u&&r(o,u)}}}function Ts(e,t,i){for(let r in t)if(pn(r)){let s=Nt(t,r),o=e[r];e[r]=Md(i,o,s)}}var kg=(e,t,i,r,s,o)=>{var u,c;let m=i?r?CA:sg:r?kA:ag,p=s?EA:TA;for(let y in e){let S=e[y];if(!S)continue;let v=(u=m[y])!=null?u:m[p[y]],w=(c=p[y])!=null?c:p[m[y]],T=v??w,E;if(T){let P=e[T];if(P&&P.priority>S.priority||v&&w&&v!==w&&(T=w,P=e[T],P&&P.priority>S.priority))continue;E=ng[v]?v:ng[w]?w:y}else E=y,y.startsWith("text-align")&&(S.value===N.inside||S.value===N.outside)&&(S=new xe(s===(S.value===N.inside)?N.right:N.left,S.priority));t[E]=o(y,S)}},vN=class extends Xr{constructor(e,t,i){super(),this.elementStyles=e,this.styler=t,this.element=i}getVarValue(e){var t,i,r,s,o;let u=(t=this.element)!=null?t:this.styler.root;if((i=this.elementStyles)!=null&&i.length){for(let c of this.elementStyles){let m=(r=c[e])==null?void 0:r.value;if(m)return m}this.element&&(u=this.element.parentElement)}for(;u;u=u.parentElement){let c=(o=(s=this.styler.getStyle(u,!1))==null?void 0:s[e])==null?void 0:o.value;if(c)return c}return null}visitFunc(e){if(e.name!=="var")return super.visitFunc(e);let t=e.values[0]instanceof Jt&&e.values[0].name;return!t||!qi(t)?(this.error=!0,he):this.getVarValue(t)||(e.values.length<2?(this.error=!0,he):e.values.length===2?e.values[1]:new Mt(e.values.slice(1)))}},Eg=class extends Xr{constructor(e,t,i,r){super(),this.context=e,this.resolveViewportUnit=t,this.percentRef=i,this.vertical=r}visitFunc(e){let t=super.visitFunc(e);if(e.name!=="calc")return t;let i=t.toString().replace(/^calc\b/,"-epubx-expr");if(/\d(%|em|ex|cap|ch|ic|lh|p?v[whbi]|p?vmin|p?vmax)\W|\Wvar\(\s*--/i.test(i))return t;let r=tn(this.context.rootScope,new ki(i,null),"");if(r instanceof re)try{let s=r.expr.evaluate(this.context);typeof s=="number"&&!isNaN(s)&&(/\d(px|in|pt|pc|cm|mm|q|rem|rlh)\W/i.test(i)?t=new U(s,"px"):/\d[a-z]/i.test(i)||(t=new or(s)))}catch(s){ee.warn(s)}return t}visitNumeric(e){return this.resolveViewportUnit&&(Ip(e.unit)||n1(e.unit))?new U(e.num*this.context.queryUnitSize(e.unit,!1,this.vertical),"px"):typeof this.percentRef=="number"&&e.unit==="%"?new U(e.num*this.percentRef/100,"px"):e}};function Ka(e,t,i,r,s){try{if(t instanceof re)return t.expr instanceof dt&&(t.expr.str.startsWith("named-string-")||t.expr.str.startsWith("running-element-"))?t:AP(e,t.expr,i);if(t instanceof U||t instanceof Kr||t instanceof Ke||t instanceof Mt)return t.visit(new Eg(e,!0,r,s))}catch(o){return ee.warn(o),he}return t}var Tg={first:!1,forceEnd:!1,allowEnd:!1,last:!1};function Pg(e){let t=e instanceof Rt?e:typeof e=="string"?J(e):N.none;if(t===N.none)return Tg;let i=t instanceof Ke?t.values:[t],r=Object.create(Tg);for(let s of i)if(s instanceof Jt)switch(s.name){case"first":r.first=!0;break;case"force-end":r.forceEnd=!0,r.allowEnd=!1;break;case"allow-end":r.forceEnd=!1,r.allowEnd=!0;break;case"last":r.last=!0;break}return r}function Ag(e){return!e.first&&!e.last&&!e.forceEnd&&!e.allowEnd}var SN={trimStart:!1,spaceFirst:!1,trimEnd:!1,allowEnd:!1,trimAdjacent:!1},Ng={trimStart:!1,spaceFirst:!1,trimEnd:!1,allowEnd:!0,trimAdjacent:!0},Ig={trimStart:!0,spaceFirst:!1,trimEnd:!0,allowEnd:!1,trimAdjacent:!0};function Og(e){let t=e instanceof Rt?e:typeof e=="string"?J(e):N.normal;if(t===N.normal)return Ng;if(t===N.auto)return Ig;let i=t instanceof Ke?t.values:[t],r=Object.create(Ng);for(let s of i)if(s instanceof Jt)switch(s.name){case"trim-both":case"trim-auto":return Ig;case"space-all":return SN;case"trim-start":r.trimStart=!0,r.spaceFirst=!1;break;case"space-start":r.trimStart=!1,r.spaceFirst=!1;break;case"space-first":r.trimStart=!1,r.spaceFirst=!0;break;case"trim-end":r.trimEnd=!0,r.allowEnd=!1;break;case"space-end":r.trimEnd=!1,r.allowEnd=!1;break;case"allow-end":r.trimEnd=!1,r.allowEnd=!0;break;case"trim-adjacent":r.trimAdjacent=!0;break;case"space-adjacent":r.trimAdjacent=!1;break}return r}var Zd={ideographAlpha:!1,ideographNumeric:!1},xN={ideographAlpha:!0,ideographNumeric:!0};function Rg(e){let t=e instanceof Rt?e:typeof e=="string"?J(e):N.normal;if(t===N.normal||t===N.auto)return xN;if(t===N.none)return Zd;let i=t instanceof Ke?t.values:[t],r=Object.create(Zd);for(let s of i)if(s instanceof Jt)switch(s.name){case"no-autospace":return Zd;case"ideograph-alpha":r.ideographAlpha=!0;break;case"ideograph-numeric":r.ideographNumeric=!0;break}return r}function Lg(e,t){return!e.ideographAlpha&&!e.ideographNumeric&&!t.trimStart&&!t.spaceFirst&&!t.trimEnd&&!t.allowEnd&&!t.trimAdjacent}function _g(e){return e?(e=e.toLowerCase(),/^zh\b.*-(hant|tw|hk)\b/.test(e)?"zh-hant":/^zh\b/.test(e)?"zh-hans":/^ja\b/.test(e)?"ja":/^ko\b/.test(e)?"ko":e):null}var wN=class{getPolyfilledInheritedProps(){return["hanging-punctuation","text-autospace","text-spacing-trim"]}preprocessSingleDocument(e){e.body&&this.preprocessForTextSpacing(e.body)}preprocessForTextSpacing(e){var t;let i=e.ownerDocument.createNodeIterator(e,NodeFilter.SHOW_TEXT);for(let r=i.nextNode();r;r=i.nextNode()){if(r.parentElement.namespaceURI!=="http://www.w3.org/1999/xhtml"||((t=r.parentElement.dataset)==null?void 0:t.mathTypeset)==="true")continue;let s=r.textContent.replace(/(?![()\[\]{}])[\p{Ps}\p{Pe}\p{Pf}\p{Pi}\u3000]\p{M}*(?=\P{M})|.(?=(?![()\[\]{}])[\p{Ps}\p{Pe}\p{Pf}\p{Pi}\u3000])|(?!\p{P})[\p{sc=Han}\u3041-\u30FF\u31C0-\u31FF]\p{M}*(?=(?![\p{sc=Han}\u3041-\u30FF\u31C0-\u31FF\uFF01-\uFF60])[\p{L}\p{Nd}])|(?![\p{sc=Han}\u3041-\u30FF\u31C0-\u31FF\uFF01-\uFF60])[\p{L}\p{Nd}]\p{M}*(?=(?!\p{P})[\p{sc=Han}\u3041-\u30FF\u31C0-\u31FF])/gsu,"$&\0").split("\0");if(s.length>1){let o=s.length-1;for(let u=0;u<o;u++)r.parentNode.insertBefore(document.createTextNode(s[u]),r);r.textContent=s[o]}}}processGeneratedContent(e,t,i,r,s,o){s=_g(s);let u=Rg(t),c=Og(i),m=Pg(r);if(Ag(m)&&Lg(u,c))return;this.preprocessForTextSpacing(e);let p=e.style.whiteSpace;(o?e.offsetHeight:e.offsetWidth)===0&&(e.style.whiteSpace="pre");let y=e.ownerDocument.createNodeIterator(e,NodeFilter.SHOW_TEXT),S=null,v=null;for(let w=y.nextNode();w;w=v){v=y.nextNode();let T=!S,E=!S||/\n$/.test(S.textContent),P=!v||/^\n/.test(v.textContent),O=!v;this.processTextSpacing(w,T||E,T,E,P,O,S,v,u,c,m,s,o),S=w}e.style.whiteSpace=p}postLayoutBlock(e,t){var i,r,s,o,u,c,m;let p=!e||e.fragmentIndex===1&&v(),y=p||w();function S(O){var A;if(O?.nodeType!==1)return!1;let L=O;if(L.hasAttribute(nn))return!0;let{position:H,float:G}=(A=L.style)!=null?A:{};return H==="absolute"||H==="fixed"||G&&G!=="none"}function v(){let O=t[0];for(let A=O;;A=A.parent)if(!A||!A.inline){if(A?.fragmentIndex!==1)return!1;break}if(!O.inline)return!0;for(let A=O.viewNode.previousSibling;A;A=A.previousSibling)if(!Tt(A,O.whitespace)&&!S(A))return!1;return!0}function w(){var O,A;let L=t[0],H;for(;L&&L.inline&&(H=(O=L.viewNode)==null?void 0:O.previousSibling,!(H&&(H.nodeType===3&&/^[ \t\r\n\f]*$/.test(H.textContent)&&L.whitespace!==Yt.PRESERVE&&(H=H.previousSibling),H)));)L=L.parent;for(;H;){if(H.nodeType===1){if(H.localName==="br")return!0;let G=(A=H.style)==null?void 0:A.display;if(G&&G!=="inline")return!/^(inline|ruby)\b/.test(G)}else if(H.nodeType===3){if(L.whitespace===Yt.PRESERVE){if(/\n$/.test(H.textContent))return!0}else if(L.whitespace===Yt.NEWLINE&&/\n[ \t\r\n\f]*$/.test(H.textContent))return!0}H=H.lastChild}return!1}let T=-1;for(let O=0;O<t.length;O++){let A=t[O];if(!A.after&&A.inline&&!A.display&&A.parent&&A.viewNode.parentNode&&A.viewNode.nodeType===Node.TEXT_NODE&&!Tt(A.viewNode,A.whitespace)){let L=function(W){var F,$,X;if(((F=W.viewNode)==null?void 0:F.nodeType)===1)return W.viewNode.localName==="br";if((($=W.viewNode)==null?void 0:$.nodeType)===3){if(W.whitespace===Yt.PRESERVE){if(/\n$/.test(W.viewNode.textContent))return!0}else if(W.whitespace===Yt.NEWLINE&&/\n[ \t\r\n\f]*$/.test(W.viewNode.textContent))return!0;if(((X=W.viewNode.previousElementSibling)==null?void 0:X.localName)==="br")return Tt(W.viewNode,W.whitespace)}return!1},H=function(W){var F,$,X;if(((F=W.viewNode)==null?void 0:F.nodeType)===1)return W.viewNode.localName==="br";if((($=W.viewNode)==null?void 0:$.nodeType)===3){if(W.whitespace===Yt.PRESERVE){if(/^\n/.test(W.viewNode.textContent))return!0}else if(W.whitespace===Yt.NEWLINE&&/^[ \t\r\n\f]*\n/.test(W.viewNode.textContent))return!0;if(((X=W.viewNode.nextElementSibling)==null?void 0:X.localName)==="br")return Tt(W.viewNode,W.whitespace)}return!1};var E=L,P=H;let G=_g((o=(r=(i=A.lang)!=null?i:A.parent.lang)!=null?r:e?.lang)!=null?o:(s=e?.parent)==null?void 0:s.lang),te=Rg(A.inheritedProps["text-autospace"]),ae=Og(A.inheritedProps["text-spacing-trim"]),ge=Pg(A.inheritedProps["hanging-punctuation"]);if(Ag(ge)&&Lg(te,ae)||/\b(flex|grid)\b/.test(A.parent.display))continue;T<0&&(T=O);let we=null,di=null,Bt=O===T,It=O===T&&p,_=O===T&&y,Q=!1,R=!1;for(let W=O-1;W>=0;W--){let F=t[W];if(L(F)){_=!0;break}if(!F.display&&F.viewNode.nodeType===Node.TEXT_NODE&&F.viewNode.textContent.length>0){we=F.viewNode;break}if(F.display&&!/^(inline|ruby)\b/.test(F.display)||((u=F.viewNode)==null?void 0:u.nodeType)===1&&(F.viewNode.localName==="br"||Er[F.viewNode.localName]))break;W===0&&(Bt=!0,p&&(It=!0,_=!0))}for(let W=O+1;W<t.length;W++){let F=t[W];if(H(F)){Q=!0;break}if(F.viewNode!==A.viewNode&&!F.display&&F.viewNode.nodeType===Node.TEXT_NODE&&F.viewNode.textContent.length>0){di=F.viewNode;break}if(F.display&&!/^(inline|ruby)\b/.test(F.display)||((c=F.viewNode)==null?void 0:c.nodeType)===1&&(F.viewNode.localName==="br"||Er[F.viewNode.localName])){W===t.length-1&&S(F.viewNode)&&(R=!0);break}if(W===t.length-1){Q=!0,R=!0;for(let $=F.viewNode.nextSibling;$;$=$.nextSibling)if(!S($)){R=!1;break}}}if(((m=A.parent)==null?void 0:m.display)==="inline-block"){if(!It){let W=A.parent.viewNode.firstChild;for(;Tt(W,A.whitespace);)W=W.nextSibling;A.viewNode===W&&(It=!0)}if(!R){let W=A.parent.viewNode.lastChild;for(;Tt(W,A.whitespace);)W=W.previousSibling;A.viewNode===W&&(R=!0)}}if(this.processTextSpacing(A.viewNode,Bt,It,_,Q,R,we,di,te,ae,ge,G,A.vertical)>0)break}}}processTextSpacing(e,t,i,r,s,o,u,c,m,p,y,S,v){let w=e.textContent,T=e.ownerDocument,E=0,P,O,A;function L(){if(t)return!0;if(!u)return!1;P||(P=T.createRange(),P.selectNode(e));let R=P.getClientRects()[0];O||(O=T.createRange(),O.selectNode(u));let W=O.getClientRects(),F=W[W.length-1];return!R||!F?!1:(E||(E=Wa(F,v)),v?R.top<F.top+F.height-R.width||R.left+R.width<F.left+R.width/10||R.left>F.left+F.width-R.width/10:R.left<F.left+F.width-R.height||R.top>F.top+F.height-R.height/10||R.top+R.height<F.top+R.height/10)}function H(){if(!c)return!1;P||(P=T.createRange(),P.selectNode(e));let R=P.getClientRects()[0];E||(E=Wa(R,v)),A||(A=T.createRange(),A.selectNode(c));let W=A.getClientRects()[0];return!R||!W?!1:v?R.top+R.height>W.top+R.width||R.left>W.left+W.width-R.width/10||R.left+R.width<W.left+R.width/10:R.left+R.width>W.left+R.height||R.top+R.height<W.top+R.height/10||R.top>W.top+W.height-R.height/10}let G=!1,te=!1,ae=!1,ge=!1,we;if(i&&y.first&&/^[\p{Ps}\p{Pf}\p{Pi}'"\u3000]\p{M}*$/u.test(w)?(we="viv-ts-open",G=!0,te=!0):o&&y.last&&/^[\p{Pe}\p{Pf}\p{Pi}'"]\p{M}*$/u.test(w)?(we="viv-ts-close",G=!0,ae=!0):(y.forceEnd||y.allowEnd)&&/^[]\p{M}*$/u.test(w)?(we="viv-ts-close",G=!0,ge=!0):(p.trimStart||p.spaceFirst||p.trimAdjacent)&&/^[]\p{M}*$/u.test(w)?(we="viv-ts-open",G=!0):(p.trimEnd||p.allowEnd||p.trimAdjacent)&&(/^[]\p{M}*$/u.test(w)||S==="zh-hans"&&/^[]\p{M}*$/u.test(w)||S!=="zh-hant"&&/^[]\p{M}*$/u.test(w))&&(we="viv-ts-close",G=!0),G){let R=function(ie){let le=parseFloat(T.defaultView.getComputedStyle(ie).fontSize)*.7;return(v?ie.offsetHeight:ie.offsetWidth)>le},W=function(){return v?F.offsetLeft:F.offsetTop};var di=R,Bt=W;if(e.parentElement.localName==="viv-ts-inner")return 0;let F=T.createElement(we),$=T.createElement("viv-ts-inner");F.appendChild($),e.parentNode.insertBefore(F,e),$.appendChild(e);let X=R($);if(X||te||ae||ge){if(we==="viv-ts-open"){if(te)F.className="viv-hang-first";else if(i||r)p.trimStart?F.className="viv-ts-trim":F.className="viv-ts-space";else if(!(p.trimStart||p.spaceFirst)&&L())F.className="viv-ts-space";else if(p.trimAdjacent&&u&&/[\p{Ps}\p{Pi}\p{Pe}\p{Pf}\u00B7\u2027\u30FB\u3000]\p{M}*$/u.test(u.textContent)&&(!/[\p{Pe}\p{Pf}]\p{M}*$/u.test(u.textContent)||u.parentElement.localName==="viv-ts-inner"&&R(u.parentElement)))F.className="viv-ts-trim";else if((p.trimStart||p.spaceFirst)&&L()){let ie=W();F.className="viv-ts-auto",ie===W()&&!L()&&(F.className="viv-ts-trim")}}else if(we==="viv-ts-close"){if(ae)F.className=X?"viv-hang-last":"viv-hang-last viv-hang-hw";else if(o||s){let ie=W();ge?(F.className=X?y.allowEnd&&p.allowEnd?"viv-ts-auto":"viv-hang-end":"viv-hang-end viv-hang-hw",y.allowEnd&&ie===W()&&(p.trimEnd?F.className="viv-ts-trim":p.allowEnd?(F.className="viv-hang-end",ie===W()&&(F.className="")):F.className="viv-ts-space")):p.trimEnd?F.className="viv-ts-trim":p.allowEnd?(F.className="viv-ts-auto",ie===W()&&(F.className="")):F.className="viv-ts-space"}else if(c&&/^[\p{Pe}\p{Pf}\u00B7\u2027\u30FB\u3000]/u.test(c.textContent))X&&p.trimAdjacent&&(F.className="viv-ts-trim");else if(ge){let ie=H(),le=ie&&y.allowEnd;le||(F.className=X?"viv-hang-end":"viv-hang-end viv-hang-hw"),X?le&&p.trimEnd?F.className="viv-ts-auto":!le&&!H()?F.className="":!ie&&y.allowEnd&&(p.trimEnd?(F.className="viv-ts-auto",H()||(F.className="viv-hang-end")):(F.className="viv-ts-space",H()||(p.allowEnd?(F.className="viv-ts-auto",H()||(F.className="viv-hang-end")):F.className="viv-hang-end"))):!ie&&!H()&&(F.className="")}else if(p.trimEnd||p.allowEnd)if(H())p.allowEnd?F.className="viv-ts-space":F.className="viv-ts-auto";else{let ie=W();F.className="viv-ts-auto",ie===W()&&(F.className="")}}}}let It=!1;function _(R){var W;let F=(W=R?.ownerDocument.defaultView)==null?void 0:W.getComputedStyle(R);return!!F&&(F.textOrientation==="upright"||F.textCombineUpright==="all"||F["-webkit-text-combine"]==="horizontal")}function Q(R,W){if(R.nodeType===1){let X=T.defaultView.getComputedStyle(R);if(parseFloat(X.marginInlineEnd)||parseFloat(X.borderInlineEndWidth)||parseFloat(X.paddingInlineEnd))return!0}let F=R.parentElement;if(F&&!F.contains(W))return Q(F,W);if(W.nodeType===1){let X=T.defaultView.getComputedStyle(W);if(parseFloat(X.marginInlineStart)||parseFloat(X.borderInlineStartWidth)||parseFloat(X.paddingInlineStart))return!0}let $=W.parentElement;return $&&!$.contains(R)?Q(R,$):!1}return(m.ideographAlpha||m.ideographNumeric)&&(u&&/^(?!\p{P})[\p{sc=Han}\u3041-\u30FF\u31C0-\u31FF]/u.test(w)&&(m.ideographAlpha&&/(?![\p{sc=Han}\u3041-\u30FF\u31C0-\u31FF\uFF01-\uFF60])\p{L}\p{M}*$/u.test(u.textContent)||m.ideographNumeric&&/(?![\uFF01-\uFF60])\p{Nd}\p{M}*$/u.test(u.textContent))&&!(v&&_(u.parentElement))&&!Q(u,e)&&(e.parentNode.insertBefore(T.createElement("viv-ts-thin-sp"),e),It=!0),c&&/(?!\p{P})[\p{sc=Han}\u3041-\u30FF\u31C0-\u31FF]\p{M}*$/u.test(w)&&(m.ideographAlpha&&/^(?![\p{sc=Han}\u3041-\u30FF\u31C0-\u31FF\uFF01-\uFF60])\p{L}/u.test(c.textContent)||m.ideographNumeric&&/^(?![\uFF01-\uFF60])\p{Nd}/u.test(c.textContent))&&!(v&&_(c.parentElement))&&!Q(e,c)&&(e.parentNode.insertBefore(T.createElement("viv-ts-thin-sp"),e.nextSibling),It=!0)),E}registerHooks(){De("POLYFILLED_INHERITED_PROPS",this.getPolyfilledInheritedProps.bind(this)),De("PREPROCESS_SINGLE_DOCUMENT",this.preprocessSingleDocument.bind(this)),De("POST_LAYOUT_BLOCK",this.postLayoutBlock.bind(this),!0)}},Qd=new wN;Qd.registerHooks();function CN(e){Qd.preprocessForTextSpacing(e)}function kN(e,t,i,r,s,o){Qd.processGeneratedContent(e,t,i,r,s,o)}var Za=new DOMParser().parseFromString('<root xmlns="http://www.pyroxy.com/ns/shadow"/>',"text/xml"),EN=["footnote-marker","first-5-lines","first-4-lines","first-3-lines","first-2-lines","first-line","first-letter","before","","after"],Jd="data-adapt-pseudo";function fn(e){return e.getAttribute(Jd)||""}function eu(e,t){e.setAttribute(Jd,t)}var Bg=class{constructor(e,t,i,r,s){this.element=e,this.style=t,this.styler=i,this.context=r,this.exprContentListener=s,f(this,"contentProcessed",{})}getStyle(e,t){let i=fn(e);this.styler&&i&&i.match(/after$/)&&(this.style=this.styler.getStyle(this.element,!0),this.styler=null);let r=Ei(this.style,"_pseudos")[i]||{};if(i.match(/^first-/)&&!r["x-first-pseudo"]){let s=1,o;i=="first-letter"?s=0:(o=i.match(/^first-([0-9]+)-lines$/))!=null&&(s=o[1]-0),r["x-first-pseudo"]=new xe(new Tr(s),0)}return r}processContent(e,t,i){let r=fn(e);if(!this.contentProcessed[r]){this.contentProcessed[r]=!0;let s=t.content;s&&hr(s)&&(s.visit(new Da(e,this.context,s,this.exprContentListener)),CN(e))}}},V3=Fa.isInstanceOfAfterIfContinuesLayoutConstraint,TN=ja.registerFragmentIndex,H3=ja.clearFragmentIndices,PN=class{constructor(e,t){this.sourceNode=e,this.styler=t}createElement(e,t){let i=t.viewNode.ownerDocument.createElement("div"),r=new tu(e,i,t),s=r.getColumn().pageBreakType;return r.getColumn().pageBreakType=null,r.layout(this.createNodePositionForPseudoElement(),!0).thenAsync(()=>{this.styler.contentProcessed["after-if-continues"]=!1,r.getColumn().pageBreakType=s;let o=i.firstChild;return j(o,"display","block"),q(o)})}createNodePositionForPseudoElement(){let e=Za.createElementNS("http://www.w3.org/1999/xhtml","div");eu(e,"after-if-continues");let t=this.createShadowContext(e),i={steps:[{node:e,shadowType:t.type,shadowContext:t,nodeShadow:null,shadowSibling:null}],offsetInNode:0,after:!1,preprocessedTextContent:null};return new cr(i)}createShadowContext(e){return new wd(this.sourceNode,e,null,null,null,Ui.ShadowType.ROOTED,this.styler)}},AN=class TT{constructor(t,i,r){this.nodeContext=t,this.afterIfContinues=i,this.pseudoElementHeight=r,f(this,"flagmentLayoutConstraintType","AfterIfContinue")}allowLayout(t,i,r){return!(i&&!t||t&&t.overflow)}nextCandidate(t){return!1}postLayout(t,i,r,s){}finishBreak(t,i){return this.getRepetitiveElements().affectTo(t)?this.afterIfContinues.createElement(i,this.nodeContext).thenAsync(r=>(this.nodeContext.viewNode.appendChild(r),q(!0))):q(!0)}getRepetitiveElements(){return new NN(this.nodeContext,this.pseudoElementHeight)}equalsTo(t){return t instanceof TT?this.afterIfContinues==t.afterIfContinues:!1}getPriorityOfFinishBreak(){return 9}},NN=class{constructor(e,t){this.nodeContext=e,this.pseudoElementHeight=t}calculateOffset(e){return this.affectTo(e)?this.pseudoElementHeight:0}calculateMinimumOffset(e){return this.calculateOffset(e)}affectTo(e){if(!e)return!1;let t=e.shadowContext?e.shadowContext.owner:e.sourceNode;if(t===this.nodeContext.sourceNode)return!!e.after;for(let i=t.parentNode;i;i=i.parentNode)if(i===this.nodeContext.sourceNode)return!0;return!1}};function Fg(e,t){if(!e||!e.afterIfContinues||e.after||t.isFloatNodeContext(e))return q(e);let i=e.afterIfContinues;return i.createElement(t,e).thenAsync(r=>{let s=ON(e,t,r);return t.fragmentLayoutConstraints.push(new AN(e,i,s)),q(e)})}function zg(e,t){return e.thenAsync(i=>Fg(i,t))}function IN(e,t){let i=Z("processAfterIfContinuesOfAncestors"),r=e;return i.loop(()=>{if(r!==null){let s=Fg(r,t);return r=r.parent,s.thenReturn(!0)}else return q(!1)}).then(()=>{i.finish(!0)}),i.result()}function ON(e,t,i){let r=e.viewNode;r.appendChild(i);let s=Ad(i,t,e.vertical);return r.removeChild(i),s}var RN=class{constructor(e){this.constraints=e}allowLayout(e){return this.constraints.every(t=>t.allowLayout(e))}},Qa=class extends Id{constructor(e,t){super(),this.checkPoints=e,this.penalty=t,f(this,"alreadyEvaluated",!1),f(this,"breakNodeContext",null)}findAcceptableBreak(e,t){return t<this.getMinBreakPenalty()?null:(this.alreadyEvaluated||(this.breakNodeContext=e.findBoxBreakPosition(this,t>0),this.alreadyEvaluated=!!this.breakNodeContext||t>0||!!e.pseudoParent),this.breakNodeContext)}getMinBreakPenalty(){return this.penalty}getNodeContext(){return this.alreadyEvaluated?this.breakNodeContext:this.checkPoints[this.checkPoints.length-1]}},Ja=class extends jm{constructor(e,t,i,r,s){super(e),this.layoutContext=t,this.clientLayout=i,this.layoutConstraint=r,this.pageFloatLayoutContext=s,f(this,"last"),f(this,"viewDocument"),f(this,"flowRootFormattingContext",null),f(this,"isFloat",!1),f(this,"isFootnote",!1),f(this,"startEdge",0),f(this,"endEdge",0),f(this,"beforeEdge",0),f(this,"afterEdge",0),f(this,"footnoteEdge",0),f(this,"box",null),f(this,"chunkPositions",null),f(this,"bands",null),f(this,"overflown",!1),f(this,"breakPositions",null),f(this,"pageBreakType",null),f(this,"forceNonfitting",!0),f(this,"leftFloatEdge",0),f(this,"rightFloatEdge",0),f(this,"bottommostFloatTop",0),f(this,"stopAtOverflow",!0),f(this,"lastAfterPosition",null),f(this,"fragmentLayoutConstraints",[]),f(this,"pseudoParent",null),f(this,"nodeContextOverflowingDueToRepetitiveElements",null),f(this,"blockDistanceToBlockEndFloats",NaN),f(this,"breakAtTheEdgeBeforeFloat",null),e.setAttribute("data-vivliostyle-column","true"),this.last=e.lastChild,this.viewDocument=e.ownerDocument,s.setContainer(this)}getTopEdge(){return this.vertical?this.rtl?this.endEdge:this.startEdge:this.beforeEdge}getBottomEdge(){return this.vertical?this.rtl?this.startEdge:this.endEdge:this.afterEdge}getLeftEdge(){return this.vertical?this.afterEdge:this.rtl?this.endEdge:this.startEdge}getRightEdge(){return this.vertical?this.beforeEdge:this.rtl?this.startEdge:this.endEdge}isFloatNodeContext(e){return!!e.floatSide&&(!this.isFloat||!!e.parent)}stopByOverflow(e){return this.stopAtOverflow&&!!e&&e.overflow}isOverflown(e){return this.vertical?e<this.footnoteEdge:e>this.footnoteEdge}getExclusions(){let e=this.pageFloatLayoutContext.getFloatFragmentExclusions();return this.exclusions.concat(e)}openAllViews(e){let t=Z("openAllViews"),i=e.steps;this.layoutContext.setViewRoot(this.element,this.isFootnote);let r=i.length-1,s=null;return t.loop(()=>{for(;r>=0;){let o=s,u=i[r];if(s=Ma(u,o),r===i.length-1&&!s.formattingContext&&(s.formattingContext=this.flowRootFormattingContext),r==0&&(s.offsetInNode=this.calculateOffsetInNodeForNodeContext(e),s.after=e.after,s.preprocessedTextContent=e.preprocessedTextContent,s.after))break;let c=this.layoutContext.setCurrent(s,r==0&&s.offsetInNode==0);if(r--,c.isPending())return c}return q(!1)}).then(()=>{t.finish(s)}),t.result()}calculateOffsetInNodeForNodeContext(e){return e.preprocessedTextContent?DP(e.preprocessedTextContent,e.offsetInNode):e.offsetInNode}maybePeelOff(e,t){var i,r;if(e.firstPseudo&&e.inline&&!e.after&&e.firstPseudo.count==0&&e.viewNode.nodeType!=1){let s=e.viewNode.textContent,o=s.match(Ca),u=o?o[0].length:0;if(!o&&((i=e.sourceNode)==null?void 0:i.nodeType)===3&&((r=e.sourceNode.nextSibling)==null?void 0:r.nodeType)===3&&s===e.sourceNode.textContent){let c=s+e.sourceNode.nextSibling.textContent,m=c.match(Ca);if(m){let p=m[0];u=p.length,e.sourceNode.textContent=p,e.viewNode.textContent=p,e.sourceNode.nextSibling.textContent=c.substr(u)}}return this.layoutContext.peelOff(e,u)}return q(e)}buildViewToNextBlockEdge(e,t){let i=!1,r=Z("buildViewToNextBlockEdge");return r.loopWithFrame(s=>{var o;if(e.viewNode&&!dn(e)&&((o=e.viewNode.parentElement)==null?void 0:o.namespaceURI)==="http://www.w3.org/1999/xhtml"&&(t.push(e.copy()),t.length>1e3)){let u=e.viewNode.nodeType===1?e.viewNode:e.viewNode.parentElement,c=this.clientLayout.getElementClientRect(u);if(Wa(c,this.vertical)>=2){s.breakLoop();return}}this.maybePeelOff(e,0).then(u=>{let c=u;c!==e&&(e=c,dn(e)||t.push(e.copy())),this.nextInTree(e).then(m=>{if(e=m,!e){s.breakLoop();return}(i||!this.layoutConstraint.allowLayout(e))&&(i=!0,e=e.modify(),e.overflow=!0),this.isFloatNodeContext(e)&&(sn(e.floatReference)||e.floatSide==="footnote")?this.layoutFloatOrFootnote(e).then(p=>{if(e=p,this.pageFloatLayoutContext.isInvalidated()&&(e=null),!e){s.breakLoop();return}s.continueLoop()}):e.inline?s.continueLoop():s.breakLoop()})})}).then(()=>{r.finish(e)}),r.result()}nextInTree(e,t){let i=this.layoutContext.nextInTree(e,t);return zg(i,this)}buildDeepElementView(e){if(!e.viewNode)return q(e);let t=[],i=e.sourceNode,r=Z("buildDeepElementView");return r.loopWithFrame(s=>{e.viewNode&&e.inline&&!dn(e)?t.push(e.copy()):(t.length>0&&this.postLayoutBlock(e,t),t=[]),this.maybePeelOff(e,0).then(o=>{let u=o;if(u!==e){let c=u;for(;c&&c.sourceNode!=i;)c=c.parent;if(c==null){e=u,s.breakLoop();return}dn(u)||t.push(u.copy())}this.nextInTree(u).then(c=>{e=c,!e||e.sourceNode==i?s.breakLoop():this.layoutConstraint.allowLayout(e)?s.continueLoop():(e=e.modify(),e.overflow=!0,this.stopAtOverflow?s.breakLoop():s.continueLoop())})})}).then(()=>{t.length>0&&this.postLayoutBlock(e,t),r.finish(e)}),r.result()}createFloat(e,t,i,r){let s=this.viewDocument.createElement("div");return this.vertical?(r>=this.height&&(r-=.1),r<1&&(r=0),j(s,"height",`${i}px`),j(s,"width",`${r}px`)):(i>=this.width&&(i-=.1),i<1&&(i=0),j(s,"width",`${i}px`),j(s,"height",`${r}px`)),j(s,"float",t),j(s,"clear",t),this.element.insertBefore(s,e),s}killFloats(){let e=this.element.firstChild;for(;e;){let t=e.nextSibling;if(e.nodeType==1){let i=e,r=i.style.cssFloat;if(r=="left"||r=="right"||r==="none")this.element.removeChild(i);else break}e=t}}createFloats(){let e=this.element.firstChild,t=this.bands,i=this.vertical?this.getTopEdge():this.getLeftEdge(),r=this.vertical?this.getBottomEdge():this.getRightEdge(),s=null;for(let o of t){let u=o.y2-o.y1;o.left=this.createFloat(e,"left",o.x1-i,u),o.right=this.createFloat(e,"right",r-o.x2,u),o.x1<r&&o.x2>i?s=o:s||j(o.right,"float","none")}if(s){let o=t[t.length-1],u=this.vertical?-this.getLeftEdge():this.getBottomEdge();s!==o&&o.y2>=u&&(this.footnoteEdge=this.vertical?-s.y2:s.y2)}}calculateEdge(e,t,i,r){let s;if(e&&ln(e.viewNode))return NaN;if(e&&e.after&&!e.inline&&(s=on(e,this.clientLayout,0,this.vertical),!isNaN(s)))return s;e=t[i];let o=r-e.boxOffset;for(;;){if(s=on(e,this.clientLayout,o,this.vertical),!isNaN(s))return s;if(o>0){o--;continue}if(i--,i<0)return this.beforeEdge;e=t[i],e.viewNode.nodeType!=1&&(o=e.viewNode.textContent.length)}}parseComputedLength(e){let t=e.match(/^(-?[0-9]*(\.[0-9]*)?)px$/);return t?this.clientLayout.adjustLengthValue(parseFloat(t[0])):0}getComputedMargin(e){let t=this.clientLayout.getElementComputedStyle(e),i=new ed(0,0,0,0);return t&&(i.left=this.parseComputedLength(t.marginLeft),i.top=this.parseComputedLength(t.marginTop),i.right=this.parseComputedLength(t.marginRight),i.bottom=this.parseComputedLength(t.marginBottom)),i}getComputedPaddingBorder(e){let t=this.clientLayout.getElementComputedStyle(e),i=new ed(0,0,0,0);return t&&(i.left=this.parseComputedLength(t.borderLeftWidth)+this.parseComputedLength(t.paddingLeft),i.top=this.parseComputedLength(t.borderTopWidth)+this.parseComputedLength(t.paddingTop),i.right=this.parseComputedLength(t.borderRightWidth)+this.parseComputedLength(t.paddingRight),i.bottom=this.parseComputedLength(t.borderBottomWidth)+this.parseComputedLength(t.paddingBottom)),i}getComputedInsets(e){let t=this.clientLayout.getElementComputedStyle(e),i=new ed(0,0,0,0);if(t){if(t.boxSizing=="border-box")return this.getComputedMargin(e);i.left=this.parseComputedLength(t.marginLeft)+this.parseComputedLength(t.borderLeftWidth)+this.parseComputedLength(t.paddingLeft),i.top=this.parseComputedLength(t.marginTop)+this.parseComputedLength(t.borderTopWidth)+this.parseComputedLength(t.paddingTop),i.right=this.parseComputedLength(t.marginRight)+this.parseComputedLength(t.borderRightWidth)+this.parseComputedLength(t.paddingRight),i.bottom=this.parseComputedLength(t.marginBottom)+this.parseComputedLength(t.borderBottomWidth)+this.parseComputedLength(t.paddingBottom)}return i}setComputedInsets(e,t){let i=this.clientLayout.getElementComputedStyle(e);i&&(t.marginLeft=this.parseComputedLength(i.marginLeft),t.borderLeft=this.parseComputedLength(i.borderLeftWidth),t.paddingLeft=this.parseComputedLength(i.paddingLeft),t.marginTop=this.parseComputedLength(i.marginTop),t.borderTop=this.parseComputedLength(i.borderTopWidth),t.paddingTop=this.parseComputedLength(i.paddingTop),t.marginRight=this.parseComputedLength(i.marginRight),t.borderRight=this.parseComputedLength(i.borderRightWidth),t.paddingRight=this.parseComputedLength(i.paddingRight),t.marginBottom=this.parseComputedLength(i.marginBottom),t.borderBottom=this.parseComputedLength(i.borderBottomWidth),t.paddingBottom=this.parseComputedLength(i.paddingBottom))}setComputedWidthAndHeight(e,t){let i=this.clientLayout.getElementComputedStyle(e);i&&(t.width=this.parseComputedLength(i.width),t.height=this.parseComputedLength(i.height))}layoutUnbreakable(e){return this.buildDeepElementView(e)}layoutFloat(e){let t=Z("layoutFloat"),i=e.viewNode,r=qm(e.floatSide,e.vertical,e.direction,this.layoutContext.page.side);return j(i,"float","none"),j(i,"display","inline-block"),j(i,"vertical-align","top"),this.buildDeepElementView(e).then(s=>{let o=this.clientLayout.getElementClientRect(i),u=this.getComputedMargin(i),c=new oi(o.left-u.left,o.top-u.top,o.right+u.right,o.bottom+u.bottom),m=this.rtl?this.endEdge:this.startEdge,p=this.rtl?this.startEdge:this.endEdge,y=e.parent;for(;y&&y.inline;)y=y.parent;if(y){let L=y.viewNode.ownerDocument.createElement("div");L.style.left="0px",L.style.top="0px",this.vertical?(L.style.bottom="0px",L.style.width="1px"):(L.style.right="0px",L.style.height="1px"),y.viewNode.appendChild(L);let H=this.clientLayout.getElementClientRect(L);m=Math.max(this.rtl?this.getEndEdge(H):this.getStartEdge(H),m),p=Math.min(this.rtl?this.getStartEdge(H):this.getEndEdge(H),p),y.viewNode.removeChild(L);let G=this.vertical?c.y2-c.y1:c.x2-c.x1;r=="left"?p=Math.max(p,m+G):m=Math.min(m,p-G),y!==e.parent&&!e.firstPseudo&&(y.viewNode.appendChild(i),i.setAttribute("data-vivliostyle-float-box-moved","true"))}let S=new oi(m,this.getBoxDir()*this.beforeEdge,p,this.getBoxDir()*this.afterEdge),v=c;this.vertical&&(v=Na(c));let w=this.getBoxDir();if(v.y1<this.bottommostFloatTop*w){let L=v.y2-v.y1;v.y1=this.bottommostFloatTop*w,v.y2=v.y1+L}P1(S,this.bands,v,r),this.vertical&&(c=em(v));let T=this.getComputedInsets(i);j(i,"width",`${c.x2-c.x1-T.left-T.right}px`),j(i,"height",`${c.y2-c.y1-T.top-T.bottom}px`),j(i,"position","absolute"),e.display,j(i,"display",e.display);let E,P=null;if(y&&(y.containingBlockForAbsolute?P=y:P=y.getContainingBlockForAbsolute()),P){let L=P.viewNode.ownerDocument.createElement("div");L.style.position="absolute",P.vertical?L.style.right="0":L.style.left="0",L.style.top="0",P.viewNode.appendChild(L),E=this.clientLayout.getElementClientRect(L),P.viewNode.removeChild(L)}else E={left:this.getLeftEdge()-this.paddingLeft,right:this.getRightEdge()+this.paddingRight,top:this.getTopEdge()-this.paddingTop};(P?P.vertical:this.vertical)?j(i,"right",`${E.right-c.x2}px`):j(i,"left",`${c.x1-E.left}px`),j(i,"top",`${c.y1-E.top}px`),e.clearSpacer&&(e.clearSpacer.parentNode.removeChild(e.clearSpacer),e.clearSpacer=null);let O=this.vertical?c.x1:c.y2,A=this.vertical?c.x2:c.y1;!this.isOverflown(O)||this.breakPositions.length==0?(this.killFloats(),S=new oi(this.getLeftEdge(),this.getTopEdge(),this.getRightEdge(),this.getBottomEdge()),this.vertical&&(S=Na(S)),A1(S,this.bands,v,null,r),this.createFloats(),r=="left"?this.leftFloatEdge=O:this.rightFloatEdge=O,this.bottommostFloatTop=A,this.updateMaxReachedAfterEdge(O),t.finish(s)):(e=e.modify(),e.overflow=!0,t.finish(e))}),t.result()}setupFloatArea(e,t,i,r,s,o){let u=this.pageFloatLayoutContext,c=u.getContainer(t),m=e.element;c.element.parentNode.appendChild(m),e.isFloat=!0,e.originX=c.originX,e.originY=c.originY,e.vertical=c.vertical,e.rtl=c.rtl,e.marginLeft=e.marginRight=e.marginTop=e.marginBottom=0,e.borderLeft=e.borderRight=e.borderTop=e.borderBottom=0,e.paddingLeft=e.paddingRight=e.paddingTop=e.paddingBottom=0,e.exclusions=(c.exclusions||[]).concat(),e.forceNonfitting=!u.hasFloatFragments(),e.innerShape=null;let p=c.getPaddingRect();e.setHorizontalPosition(p.x1-c.originX,p.x2-p.x1),e.setVerticalPosition(p.y1-c.originY,p.y2-p.y1),s.adjustPageFloatArea(e,c,this),e.init();let y=!!u.setFloatAreaDimensions(e,t,i,r,!0,!u.hasFloatFragments(),o);return y?(e.killFloats(),e.init()):c.element.parentNode.removeChild(m),y}createPageFloatArea(e,t,i,r,s){let o=this.element.ownerDocument.createElement("div");j(o,"position","absolute");let u=this.pageFloatLayoutContext.getPageFloatLayoutContext(e.floatReference),c=new ps(null,st.COLUMN,null,this.pageFloatLayoutContext.flowName,e.nodePosition,null,null),m=u.getContainer(),p=new BN(t,o,this.layoutContext.clone(),this.clientLayout,this.layoutConstraint,c,m);return c.setContainer(p),this.setupFloatArea(p,e.floatReference,t,i,r,s)?p:null}layoutSinglePageFloatFragment(e,t,i,r,s,o,u){let c=this.pageFloatLayoutContext;e=(u?u.continuations:[]).concat(e);let m=e[0].float,p=c.getPageFloatPlacementCondition(m,t,i),y=this.createPageFloatArea(m,t,o,s,p),S={floatArea:y,pageFloatFragment:null,newPosition:null};if(!y)return q(S);let v=Z("layoutSinglePageFloatFragment"),w=!1,T=0;return v.loopWithFrame(E=>{if(T>=e.length){E.breakLoop();return}let P=e[T],O=new cr(P.nodePosition);y.layout(O,!0).then(A=>{S.newPosition=A,!A||r?(T++,E.continueLoop()):(w=!0,E.breakLoop())})}).then(()=>{if(!w){let E=c.setFloatAreaDimensions(y,m.floatReference,t,o,!1,r,p);if(!E)w=!0;else{let P=s.createPageFloatFragment(e,E,i,y,!!S.newPosition);c.addPageFloatFragment(P,!0),S.pageFloatFragment=P}}v.finish(S)}),v.result()}layoutPageFloatInner(e,t,i,r){let s=this.pageFloatLayoutContext,o=e.float;s.stashEndFloatFragments(o);function u(m,p){p?s.removePageFloatFragment(p,!0):m&&m.element.parentNode.removeChild(m.element),s.restoreStashedFragments(o.floatReference),s.deferPageFloat(e)}let c=Z("layoutPageFloatInner");return this.layoutSinglePageFloatFragment([e],o.floatSide,o.clearSide,!s.hasFloatFragments(),t,i,r).then(m=>{let p=m.floatArea,y=m.pageFloatFragment,S=m.newPosition;y?this.layoutStashedPageFloats(o.floatReference,[r]).then(v=>{if(v){if(s.addPageFloatFragment(y),s.discardStashedFragments(o.floatReference),S){let w=new Um(o,S.primary);s.deferPageFloat(w)}c.finish(!0)}else u(p,y),c.finish(!1)}):(u(p,y),c.finish(!1))}),c.result()}layoutStashedPageFloats(e,t){let i=this.pageFloatLayoutContext,r=i.getStashedFloatFragments(e),s=[],o=[],u=!1,c=Z("layoutStashedPageFloats"),m=0;return c.loopWithFrame(p=>{if(m>=r.length){p.breakLoop();return}let y=r[m];if(t.includes(y)){m++,p.continueLoop();return}let S=new an().findByFloat(y.continuations[0].float);this.layoutSinglePageFloatFragment(y.continuations,y.floatSide,y.clearSide,!1,S,null).then(v=>{let w=v.floatArea;w&&s.push(w);let T=v.pageFloatFragment;T?(o.push(T),m++,p.continueLoop()):(u=!0,p.breakLoop())})}).then(()=>{u?(o.forEach(p=>{i.removePageFloatFragment(p,!0)}),s.forEach(p=>{let y=p.element;y&&y.parentNode&&y.parentNode.removeChild(y)})):r.forEach(p=>{let y=p.area.element;y&&y.parentNode&&y.parentNode.removeChild(y)}),c.finish(!u)}),c.result()}setFloatAnchorViewNode(e){let t=e.viewNode.parentNode,i=t.ownerDocument.createElement("span");i.setAttribute(nn,"1"),e.floatSide==="footnote"&&this.layoutContext.applyPseudoelementStyle(e,"footnote-call",i),t.appendChild(i),t.removeChild(e.viewNode);let r=e.modify();return r.after=!0,r.viewNode=i,r}resolveFloatReferenceFromColumnSpan(e,t,i){let r=Z("resolveFloatReferenceFromColumnSpan"),s=this.pageFloatLayoutContext,o=s.getPageFloatLayoutContext(st.REGION);return s.getContainer().width<o.getContainer().width&&e===st.COLUMN?t===N.auto?this.buildDeepElementView(i.copy()).then(u=>{let c=u.viewNode,m=fd(this.clientLayout,c,["min-content inline size"])["min-content inline size"],p=this.getComputedMargin(c);this.vertical?m+=p.top+p.bottom:m+=p.left+p.right,m>this.width?r.finish(st.REGION):r.finish(e)}):t===N.all?r.finish(st.REGION):r.finish(e):r.finish(e),r.result()}layoutPageFloat(e){let t=this.pageFloatLayoutContext,i=new an().findByNodeContext(e),r,s=t.findPageFloatByNodePosition(e.toNodePosition());return s?r=q(s):r=i.createPageFloat(e,t,this),r.thenAsync(o=>{let u=za(e,0),c=this.setFloatAnchorViewNode(e),m=i.findPageFloatFragment(o,t),p=new Um(o,u);if(m&&m.hasFloat(o))return t.registerPageFloatAnchor(o,c.viewNode),q(c);if(t.isForbidden(o)||t.hasPrecedingFloatsDeferredToNext(o))return t.deferPageFloat(p),t.registerPageFloatAnchor(o,c.viewNode),q(c);if(this.nodeContextOverflowingDueToRepetitiveElements)return q(null);{let y=on(c,this.clientLayout,0,this.vertical);return this.isOverflown(y)?q(c):this.layoutPageFloatInner(p,i,y,m).thenAsync(S=>S?q(null):(t.registerPageFloatAnchor(o,c.viewNode),q(c)))}})}processLineStyling(e,t,i){let r=Z("processLineStyling"),s=i.concat([]);i.splice(0,i.length);let o=0,u=e.firstPseudo;return u.count==0&&(u=u.outer),r.loopWithFrame(c=>{if(!u){c.breakLoop();return}let m=this.findLinePositions(s),p=u.count-o;if(m.length<=p){c.breakLoop();return}let y=this.findAcceptableBreakInside(s,m[p-1],!0);if(y==null){c.breakLoop();return}this.finishBreak(y,!1,!1).then(()=>{o+=p,this.layoutContext.peelOff(y,0).then(S=>{e=S,u=e.firstPseudo,s=[],this.buildViewToNextBlockEdge(e,s).then(v=>{t=v,c.continueLoop()})})})}).then(()=>{Array.prototype.push.apply(i,s),r.finish(t)}),r.result()}isLoneImage(e){return e.length!=2&&this.breakPositions.length>0?!1:e[0].sourceNode==e[1].sourceNode&&Er[e[0].sourceNode.localName]}getTrailingMarginEdgeAdjustment(e){let t=0,i=0;for(let r=e.length-1;r>=0;r--){let s=e[r];if(!s.after||!s.viewNode||s.viewNode.nodeType!=1)break;let o=this.getComputedMargin(s.viewNode),u=this.vertical?-o.left:o.bottom;u>0?t=Math.max(t,u):i=Math.min(i,u)}return t+i}layoutBreakableBlock(e){let t=Z("layoutBreakableBlock"),i=[];return this.buildViewToNextBlockEdge(e,i).then(r=>{let s=i.length-1;if(s<0){t.finish(r);return}this.postLayoutBlock(r,i);let o=this.calculateEdge(r,i,s,i[s].boxOffset),u=!1;if(!r||!ln(r.viewNode)){let m=un(r,this.collectElementsOffset());u=this.isOverflown(o+(this.vertical?-1:1)*m.minimum),this.isOverflown(o+(this.vertical?-1:1)*m.current)&&!this.nodeContextOverflowingDueToRepetitiveElements&&(this.nodeContextOverflowingDueToRepetitiveElements=r)}r==null&&(o+=this.getTrailingMarginEdgeAdjustment(i)),this.updateMaxReachedAfterEdge(o);let c;e.firstPseudo?c=this.processLineStyling(e,r,i):c=q(r),c.then(m=>{i.length>0&&(this.saveBoxBreakPosition(i),u&&!this.isLoneImage(i)&&m&&(m=m.modify(),m.overflow=!0)),t.finish(m)})}),t.result()}postLayoutBlock(e,t){Je("POST_LAYOUT_BLOCK").forEach(i=>{i(e,t,this)})}findEndOfLine(e,t,i){let r=this.vertical?e-1:e+1,s=0,o=t[0].boxOffset,u=s,c=t.length-1,m=t[c].boxOffset,p;for(;o<m;){p=o+Math.ceil((m-o)/2),u=s;let y=c;for(;u<y;){let v=u+Math.ceil((y-u)/2);t[v].boxOffset>p?y=v-1:u=v}let S=this.calculateEdge(null,t,u,p);if(this.vertical?S<=r:S>=r){for(m=p-1;t[u].boxOffset==p;)u--;c=u}else i&&this.updateMaxReachedAfterEdge(S),o=p,s=u}return{nodeContext:t[u],index:o,checkPointIndex:u}}findAcceptableBreakInside(e,t,i){var r,s,o;let u=this.findEndOfLine(t,e,!0),c=u.nodeContext;if(u.checkPointIndex===0&&u.index===c.boxOffset)return null;let m=c.viewNode;if(m.nodeType!=1&&((r=m.parentElement)==null?void 0:r.localName)!=="viv-ts-inner"){let p=m;c=this.resolveTextNodeBreaker(c).breakTextNode(p,c,u.index,e,u.checkPointIndex,i)}else{let p=eg(c);if(p){if(((s=this.breakPositions)==null?void 0:s[0])instanceof Qa&&p!=null&&p.viewNode.contains(this.breakPositions[0].checkPoints[0].viewNode))return null;for(c=p;!c.after&&c.inline&&c.parent;){let y=(o=c.viewNode)==null?void 0:o.previousSibling;for(;y&&(Tt(y,c.parent.whitespace)||fs(y));)y=y.previousSibling;if(y)break;c=c.parent}}}return this.clearOverflownViewNodes(c,!1),c}resolveTextNodeBreaker(e){return Je("RESOLVE_TEXT_NODE_BREAKER").reduce((t,i)=>i(e)||t,eo.instance)}getRangeBoxes(e,t){let i=[],r=e.ownerDocument.createRange(),s=!1,o=e,u=null,c=!1,m=!0;for(;m;){let p=!0;do{let y=null;o==t&&(t.nodeType===1?m=!(!t.firstChild||s):m=!1);let S=o.nodeType===1?o:null;S?s?s=!1:Nd(S)?p=!c:!S.firstChild||Er[S.localName]||/^r(uby|[bt]c?)$/.test(S.localName)||pA(this.clientLayout.getElementComputedStyle(S).display)?(p=!c,p?(S.localName==="ruby"&&o.firstChild&&(o=o.firstChild),r.setStartBefore(o),c=!0,u=o):/^r(uby|tc?)$/.test(S.localName)||(u=o),o.contains(t)&&(m=!1)):y=o.firstChild:(c||(o.parentNode==null?m=!1:(r.setStartBefore(o),c=!0)),u=o),y||(y=o.nextSibling,y||(s=!0,y=o.parentNode)),o=y}while(p&&m);if(c){r.setEndAfter(u);let y=this.clientLayout.getRangeClientRects(r);Zm(y,this.vertical);for(let S=0;S<y.length;S++)i.push(y[S]);c=!1}}return i}findLinePositions(e){let t=[],i=this.getRangeBoxes(e[0].viewNode,e[e.length-1].viewNode);i.sort(this.vertical?YP:$P);let r=0,s=0,o=0,u=0,c=0,m=this.getBoxDir();for(;;){if(c<i.length){let p=i[c],y=1;if(u>0){let S=Math.max(this.getBoxSize(p),1);m*this.getBeforeEdge(p)<m*r?y=m*(this.getAfterEdge(p)-r)/S:m*this.getAfterEdge(p)>m*s?y=m*(s-this.getBeforeEdge(p))/S:y=1}if(u==0||y>=.6||y>=.2&&this.getStartEdge(p)>=o-1){o=this.getEndEdge(p),this.vertical?(r=u==0?p.right:Math.max(r,p.right),s=u==0?p.left:Math.min(s,p.left)):(r=u==0?p.top:Math.min(r,p.top),s=u==0?p.bottom:Math.max(s,p.bottom)),u++,c++;continue}}if(u>0&&(t.push(s),u=0),c>=i.length)break}return t.sort(fp),this.vertical&&t.reverse(),t}calculateClonedPaddingBorder(e){let t=0;for(let i=e;i;i=i.parent)if(!i.inline&&ds(i.viewNode)){let r=this.getComputedPaddingBorder(i.viewNode);t+=i.vertical?-r.left:r.bottom,i.display==="table"&&(t+=(i.vertical?-1:1)*i.blockBorderSpacing)}return t}getOffsetByRepetitiveElements(e){let t;return e?t=e.calculateOffset(this):t=un(null,this.collectElementsOffset()),t.current}findBoxBreakPosition(e,t){let i=this.element.parentNode,r=this.element.nextSibling;i.removeChild(this.element),i.insertBefore(this.element,r);let s=e.checkPoints,o=s[0];for(;o.parent&&o.inline;)o=o.parent;let u,c;t?(u=1,c=1):(u=Math.max((o.inheritedProps.widows||2)-0,1),c=Math.max((o.inheritedProps.orphans||2)-0,1));let m=this.calculateClonedPaddingBorder(o),p=this.findLinePositions(s),y=this.footnoteEdge-m,S=this.getBoxDir(),v=this.getOffsetByRepetitiveElements(e);y-=S*v;let w=this.findFirstOverflowingEdgeAndCheckPoint(s);isNaN(w.edge)&&(w.edge=S*(1/0));let T=sr(p.length,A=>{let L=p[A];return this.vertical?L<y||L<=w.edge:L>y||L>=w.edge}),E=T<=0;E&&(T=sr(p.length,A=>this.vertical?p[A]<y:p[A]>y));let P=s[s.length-1].viewNode;if(P?.parentElement.localName==="viv-ts-inner"&&(P=P.parentElement.parentElement),(T===p.length&&P.nextSibling||T>=p.length-1&&P.parentElement.querySelector(".MJXc-display"))&&(u=0),T=Math.min(p.length-u,T),T<c)return null;y=p[T-1];let O;if(E?O=w.checkPoint:O=this.findAcceptableBreakInside(e.checkPoints,y,t),O){let A=this.getAfterEdgeOfBlockContainer(O);!isNaN(A)&&S*(y-A)>0&&(y=A),this.computedBlockSize=S*(y-this.beforeEdge)+v}return O}getAfterEdgeOfBlockContainer(e){let t=e;do t=t.parent;while(t&&t.inline);return t?(t=t.copy().modify(),t.after=!0,on(t,this.clientLayout,0,this.vertical)):NaN}findFirstOverflowingEdgeAndCheckPoint(e){let t=e.findIndex(r=>r.overflow);if(t<0)return{edge:NaN,checkPoint:null};let i=e[t];return{edge:this.calculateEdge(null,e,t,i.boxOffset),checkPoint:i}}findEdgeBreakPosition(e){return this.computedBlockSize=e.computedBlockSize+this.getOffsetByRepetitiveElements(e),e.position}finishBreak(e,t,i){e.formattingContext;let r=new ys().find(e.formattingContext).finishBreak(this,e,t,i);return r||(r=Rd.finishBreak(this,e,t,i)),r}findAcceptableBreakPosition(){let e=null,t=null,i=0,r=0;do{i=r,r=Number.MAX_VALUE;for(let s=this.breakPositions.length-1;s>=0&&!t;--s){e=this.breakPositions[s],t=e.findAcceptableBreak(this,i);let o=e.getMinBreakPenalty();o>i&&(r=Math.min(r,o))}}while(r>i&&!t&&this.forceNonfitting);return{breakPosition:t?e:null,nodeContext:t}}doFinishBreak(e,t,i,r){if(this.pageFloatLayoutContext.isInvalidated()||this.pageBreakType||!t)return q(e);let s=Z("doFinishBreak"),o=!1;if(!e){if(this.forceNonfitting)return ee.warn("Could not find any page breaks?!!"),this.skipTailEdges(t).then(u=>{u?(u=u.modify(),u.overflow=!1,this.finishBreak(u,o,!0).then(()=>{s.finish(u)})):s.finish(u)}),s.result();e=i,o=!0,this.computedBlockSize=r}return this.finishBreak(e,o,!0).then(()=>{s.finish(e)}),s.result()}isBreakable(e){for(let t=e;t;t=t.parent)if(fs(t.viewNode))return!1;if(e.after)return!0;switch(e.sourceNode.namespaceURI){case"http://www.w3.org/2000/svg":return!1}return!e.flexContainer}zeroIndent(e){let t=e.toString();return t==""||t=="auto"||!!t.match(/^0+(.0*)?[^0-9]/)}checkOverflowAndSaveEdge(e,t){if(!e)return!1;for(let o=e;o;o=o.parent)if(fs(o.viewNode))return!1;if(ln(e.viewNode))return!1;let i=on(e,this.clientLayout,0,this.vertical),r=un(e,this.collectElementsOffset()),s=this.isOverflown(i+(this.vertical?-1:1)*r.minimum);if(this.isOverflown(i+(this.vertical?-1:1)*r.current)&&!this.nodeContextOverflowingDueToRepetitiveElements)this.nodeContextOverflowingDueToRepetitiveElements=e;else if(t){let o=i+this.getTrailingMarginEdgeAdjustment(t),u=this.footnoteEdge-this.getBoxDir()*r.current;i=this.vertical?Math.min(i,Math.max(o,u)):Math.max(i,Math.min(o,u))}return this.updateMaxReachedAfterEdge(i),s}checkOverflowAndSaveEdgeAndBreakPosition(e,t,i,r){if(!e||ln(e.viewNode))return!1;let s=this.checkOverflowAndSaveEdge(e,t);return(i||!s)&&this.saveEdgeBreakPosition(e,r,s),s}applyClearance(e){if(!e.viewNode.parentNode||e.floatReference!==st.INLINE)return!1;let t=this.getComputedMargin(e.viewNode),i=e.viewNode.ownerDocument.createElement("div");this.vertical?(i.style.bottom="0px",i.style.width="1px",i.style.marginRight=`${t.right}px`):(i.style.right="0px",i.style.height="1px",i.style.marginTop=`${t.top}px`),e.viewNode.parentNode.insertBefore(i,e.viewNode);let r=this.clientLayout.getElementClientRect(i),s=this.getBeforeEdge(r),o=this.getBoxDir(),u=e.clearSide==="same"?e.floatSide:e.clearSide,c=/^(top|bottom|inside|outside|(block|inline)-(start|end))$/.test(u)?qm(u,e.vertical,e.direction,this.layoutContext.page.side):u,m=c==="left"||c==="right"?e.direction==="rtl"==(c==="left")?"inline-end":"inline-start":c,p=this.pageFloatLayoutContext.getPageFloatClearEdge(m,this);switch(c){case"left":p=o*Math.max(p*o,this.leftFloatEdge*o);break;case"right":p=o*Math.max(p*o,this.rightFloatEdge*o);break;default:p=o*Math.max(p*o,Math.max(this.rightFloatEdge*o,this.leftFloatEdge*o))}if(s*o>=p*o)return e.viewNode.parentNode.removeChild(i),!1;{let y=Math.max(1,(p-s)*o);this.vertical?i.style.width=`${y}px`:i.style.height=`${y}px`,r=this.clientLayout.getElementClientRect(i);let S=this.getAfterEdge(r);if(!e.floatSide)if(this.vertical){let v=S-t.right-p;v>0==t.right>=0&&(v+=t.right),i.style.marginLeft=`${v}px`}else{let v=p-(S+t.top);v>0==t.top>=0&&(v+=t.top),i.style.marginBottom=`${v}px`}return e.clearSpacer=i,!0}}isBFC(e){return!!(mA(e)||Nr.isInstanceOfRepetitiveElementsOwnerFormattingContext(e))}skipEdges(e,t,i){var r;let s=e.after?(r=e.parent)==null?void 0:r.formattingContext:e.formattingContext;if(s&&!this.isBFC(s))return q(e);let o=Z("skipEdges"),u=!i&&t&&e&&e.after,c=i,m=null,p=[],y=[],S=!1;function v(){return!!i||!t&&jt(c)&&!w()}function w(){var E;if(!m||e.floatSide)return!1;for(let P=m;P!=null&&P.parent;P=P.parent){let O=P.after?P.viewNode:(E=P.viewNode)==null?void 0:E.previousSibling;for(;O&&(Tt(O,P.parent.whitespace)||fs(O));)O=O.previousSibling;if(O)return!1}return!0}let T=()=>{e=p[0]||e,e.viewNode.parentNode.removeChild(e.viewNode),this.pageBreakType=c};return o.loopWithFrame(E=>{for(var P;e;){e.formattingContext;let O=new ys().find(e.formattingContext);do{if(!e.viewNode)break;if(e.inline&&e.viewNode.nodeType!=1){if(Tt(e.viewNode,e.whitespace))break;if(!e.after){v()?T():this.checkOverflowAndSaveEdgeAndBreakPosition(m,null,!0,c)?(e=(this.stopAtOverflow&&m||e).modify(),e.overflow=!0):(e=e.modify(),e.breakBefore=c),E.breakLoop();return}}if(!e.after){if(e.floatSide&&(this.breakAtTheEdgeBeforeFloat=Ba(c)?c:null),O&&O.startNonInlineElementNode(e))break;if(e.clearSide&&this.applyClearance(e)&&t&&this.breakPositions.length===0&&this.saveEdgeBreakPosition(e.copy(),c,!1),!e.inline&&!e.repeatOnBreak&&(m?eg(m):this.breakPositions[this.breakPositions.length-1]instanceof Qa)&&this.saveEdgeBreakPosition(e.copy(),c,!1),!this.isBFC(e.formattingContext)||Nr.isInstanceOfRepetitiveElementsOwnerFormattingContext(e.formattingContext)||this.isFloatNodeContext(e)||e.flexContainer||!e.nodeShadow&&!e.sourceNode.firstElementChild&&Tt(e.sourceNode.firstChild,e.whitespace)){p.push(e.copy()),c=qt(c,e.breakBefore),v()?T():(this.checkOverflowAndSaveEdgeAndBreakPosition(m,null,!0,c)||!this.layoutConstraint.allowLayout(e))&&(e=(this.stopAtOverflow&&m||e).modify(),e.overflow=!0),E.breakLoop();return}}if(e.viewNode.nodeType!=1)break;let L=e.viewNode.style;if(e.after){L.columnFill==="balance"&&L.getPropertyValue("--viv--saved-column-fill")==="auto"&&(L.columnFill="auto",L.removeProperty("--viv--saved-column-fill")),e.floatSide&&(c=c??this.breakAtTheEdgeBeforeFloat,this.breakAtTheEdgeBeforeFloat=null);let H=e.sourceNode;if(H.localName==="svg"||H.localName==="math"||H.getAttribute("data-math-typeset")==="true"){S=!1,m=e.copy(),y.push(m),c=qt(null,e.breakAfter),this.checkOverflowAndSaveEdgeAndBreakPosition(m,null,!this.stopAtOverflow,c);break}if(e.inline||O&&O.afterNonInlineElementNode(e,this.stopAtOverflow))break;if(S){if(v()){T(),E.breakLoop();return}p=[],t=!1,u=!1,c=null}S=!1,m=e.copy(),y.push(m),c=qt(c,e.breakAfter),L&&!(this.zeroIndent(L.paddingBottom)&&this.zeroIndent(L.borderBottomWidth))&&(y=[m])}else{if(p.push(e.copy()),c=qt(c,e.breakBefore),m&&jt(c)&&cA(m.viewNode,e.viewNode),(e.pageType!=((P=e.parent)==null?void 0:P.pageType)||!jt(c))&&!this.layoutConstraint.allowLayout(e)&&(this.checkOverflowAndSaveEdgeAndBreakPosition(m,null,!this.stopAtOverflow,c),e=e.modify(),e.overflow=!0,this.stopAtOverflow)){E.breakLoop();return}let H=e.viewNode.localName;if(Er[H]){v()?T():this.checkOverflowAndSaveEdgeAndBreakPosition(m,null,!0,c)&&(e=(this.stopAtOverflow&&m||e).modify(),e.overflow=!0),E.breakLoop();return}L&&!(this.zeroIndent(L.paddingTop)&&this.zeroIndent(L.borderTopWidth))&&(u=!1,y=[]),S=!0}}while(!1);let A=this.nextInTree(e,u);if(A.isPending()){A.then(L=>{e=L,E.continueLoop()});return}else e=A.get()}this.checkOverflowAndSaveEdgeAndBreakPosition(m,y,!this.stopAtOverflow,c)?m&&this.stopAtOverflow&&(e=m.modify(),e.overflow=!0):jt(c)&&(this.pageBreakType=c),E.breakLoop()}).then(()=>{m&&(this.lastAfterPosition=m.toNodePosition()),o.finish(e)}),o.result()}skipTailEdges(e){let t=e.copy(),i=Z("skipEdges"),r=null,s=!1;return i.loopWithFrame(o=>{for(;e;){do{if(!e.viewNode)break;if(e.inline&&e.viewNode.nodeType!=1){if(Tt(e.viewNode,e.whitespace))break;if(!e.after){jt(r)&&(this.pageBreakType=r),o.breakLoop();return}}if(!e.after&&(this.isFloatNodeContext(e)||e.flexContainer)){r=qt(r,e.breakBefore),jt(r)&&(this.pageBreakType=r),o.breakLoop();return}if(e.viewNode.nodeType!=1)break;let c=e.viewNode.style;if(e.after){if(s){if(jt(r)){this.pageBreakType=r,o.breakLoop();return}r=null}s=!1,r=qt(r,e.breakAfter)}else{r=qt(r,e.breakBefore);let m=e.viewNode.localName;if(Er[m]){jt(r)&&(this.pageBreakType=r),o.breakLoop();return}if(c&&!(this.zeroIndent(c.paddingTop)&&this.zeroIndent(c.borderTopWidth))){o.breakLoop();return}}s=!0}while(!1);let u=this.layoutContext.nextInTree(e);if(u.isPending()){u.then(c=>{e=c,o.continueLoop()});return}else e=u.get()}t=null,o.breakLoop()}).then(()=>{i.finish(t)}),i.result()}layoutFloatOrFootnote(e){return sn(e.floatReference)||e.floatSide==="footnote"?this.layoutPageFloat(e):this.layoutFloat(e)}layoutNext(e,t,i){let r=Z("layoutNext");return this.skipEdges(e,t,i||null).then(s=>{if(e=s,!e||this.pageBreakType||this.stopByOverflow(e))r.finish(e);else{let o=e.formattingContext;new ys().find(o).layout(e,this,t).thenFinish(r)}}),r.result()}clearOverflownViewNodes(e,t){if(e)for(let i=e.parent;e;e=i,i=i?i.parent:null){let r=(i||e).formattingContext;new ys().find(r).clearOverflownViewNodes(this,i,e,t),t=!1}}initGeom(){let e=this.element.ownerDocument.createElement("div");e.style.position="absolute",e.style.top=`${this.paddingTop}px`,e.style.right=`${this.paddingRight}px`,e.style.bottom=`${this.paddingBottom}px`,e.style.left=`${this.paddingLeft}px`,this.element.appendChild(e);let t=this.clientLayout.getElementClientRect(e);this.element.removeChild(e);let i=this.originX+this.left+this.getInsetLeft(),r=this.originY+this.top+this.getInsetTop();this.box=new oi(i,r,i+this.width,r+this.height),this.startEdge=t?this.vertical?this.rtl?t.bottom:t.top:this.rtl?t.right:t.left:0,this.endEdge=t?this.vertical?this.rtl?t.top:t.bottom:this.rtl?t.left:t.right:0,this.beforeEdge=t?this.vertical?t.right:t.top:0,this.afterEdge=t?this.vertical?t.left:t.bottom:0,this.leftFloatEdge=this.beforeEdge,this.rightFloatEdge=this.beforeEdge,this.bottommostFloatTop=this.beforeEdge,this.footnoteEdge=this.afterEdge,this.bands=k1(this.box,[this.getInnerShape()],this.getExclusions(),8,this.snapHeight,this.vertical),this.createFloats()}init(){this.chunkPositions=[],j(this.element,"width",`${this.width}px`),j(this.element,"height",`${this.height}px`),this.initGeom(),this.computedBlockSize=0,this.overflown=!1,this.pageBreakType=null,this.lastAfterPosition=null}saveEdgeBreakPosition(e,t,i){e.formattingContext;let r=e.copy(),s=new ys().find(e.formattingContext),o=this.calculateClonedPaddingBorder(r),u=s.createEdgeBreakPosition(r,t,i,this.computedBlockSize+o);this.breakPositions.push(u)}saveBoxBreakPosition(e){let t=e[0].breakPenalty;if(t){let r=e[0];for(;r.parent&&r.inline;)r=r.parent;t=r.breakPenalty}let i=new Qa(e,t);this.breakPositions.push(i)}updateMaxReachedAfterEdge(e){if(!isNaN(e)){let t=this.getBoxDir()*(e-this.beforeEdge);this.computedBlockSize=Math.max(t,this.computedBlockSize)}}layout(e,t,i){if(this.chunkPositions.push(e),e.primary.after&&(this.lastAfterPosition=e.primary),this.stopAtOverflow&&this.overflown)return q(e);if(this.isFullWithPageFloats())return e.primary.after&&e.primary.steps.length===1?q(null):q(e);this.element.hasAttribute("data-vivliostyle-column")&&uA(this);let r=Z("layout");return this.openAllViews(e.primary).then(s=>{let o=null;if(s.viewNode)o=s.copy();else{let c=m=>{m.nodeContext.viewNode&&(o=m.nodeContext,this.layoutContext.removeEventListener("nextInTree",c))};this.layoutContext.addEventListener("nextInTree",c)}let u=new LN(t,i);u.layout(s,this).then(c=>{this.doFinishBreak(c,u.context.overflownNodeContext,o,u.initialComputedBlockSize).then(m=>{let p=null;this.pseudoParent?p=q(null):p=this.doFinishBreakOfFragmentLayoutConstraints(m),p.then(()=>{if(this.pageFloatLayoutContext.isInvalidated()){r.finish(null);return}if(!m)r.finish(null);else{this.overflown=!0;let y=new cr(m.toNodePosition());r.finish(y)}})})})}),r.result()}isFullWithPageFloats(){return this.pageFloatLayoutContext.isColumnFullWithPageFloats(this)}getMaxBlockSizeOfPageFloats(){return this.pageFloatLayoutContext.getMaxBlockSizeOfPageFloats()}doFinishBreakOfFragmentLayoutConstraints(e){let t=Z("doFinishBreakOfFragmentLayoutConstraints"),i=[].concat(this.fragmentLayoutConstraints);i.sort((s,o)=>s.getPriorityOfFinishBreak()-o.getPriorityOfFinishBreak());let r=0;return t.loop(()=>r<i.length?i[r++].finishBreak(e,this).thenReturn(!0):q(!1)).then(()=>{t.finish(!0)}),t.result()}doLayout(e,t,i){let r=Z("doLayout"),s=null;return this.breakPositions=[],this.nodeContextOverflowingDueToRepetitiveElements=null,r.loopWithFrame(o=>{for(;e;){let u=!0;if(this.layoutNext(e,t,i||null).then(c=>{if(t=!1,i=null,this.nodeContextOverflowingDueToRepetitiveElements&&this.stopAtOverflow?(this.pageBreakType=null,e=this.nodeContextOverflowingDueToRepetitiveElements,e.overflow=!0):e=c,this.pageFloatLayoutContext.isInvalidated())o.breakLoop();else if(this.pageBreakType)o.breakLoop();else if(e&&this.stopByOverflow(e)){s=e;let m=this.findAcceptableBreakPosition();e=m.nodeContext,m.breakPosition&&m.breakPosition.breakPositionChosen(this),o.breakLoop()}else u?u=!1:o.continueLoop()}),u){u=!1;return}}this.computedBlockSize+=this.getOffsetByRepetitiveElements(),o.breakLoop()}).then(()=>{r.finish({nodeContext:e,overflownNodeContext:s})}),r.result()}redoLayout(){let e=this.chunkPositions,t=this.element.lastChild;for(;t!=this.last;){let u=t.previousSibling;this.element===t.parentNode&&this.layoutContext.isPseudoelement(t)||this.element.removeChild(t),t=u}this.killFloats(),this.init();let i=Z("redoLayout"),r=0,s=null,o=!0;return i.loopWithFrame(u=>{if(r<e.length){let c=e[r++];this.layout(c,o).then(m=>{o=!1,m?(s=m,u.breakLoop()):u.continueLoop()});return}u.breakLoop()}).then(()=>{i.finish(s)}),i.result()}saveDistanceToBlockEndFloats(){let e=this.pageFloatLayoutContext.getBlockStartEdgeOfBlockEndFloats();e>0&&isFinite(e)&&(this.blockDistanceToBlockEndFloats=this.getBoxDir()*(e-this.beforeEdge-this.computedBlockSize))}collectElementsOffset(){let e=[];for(let t=this;t;t=t.pseudoParent)t.fragmentLayoutConstraints.forEach(i=>{if(Nr.isInstanceOfRepetitiveElementsOwnerLayoutConstraint(i)){let r=i.getRepetitiveElements();e.push(r)}if(Fa.isInstanceOfAfterIfContinuesLayoutConstraint(i)){let r=i.getRepetitiveElements();e.push(r)}dr.isInstanceOfTableRowLayoutConstraint(i)&&i.getElementsOffsetsForTableCell(this).forEach(r=>{e.push(r)})});return e}},tu=class{constructor(e,t,i){f(this,"startNodeContexts",[]),f(this,"column"),this.column=Object.create(e),this.column.element=t,this.column.layoutContext=e.layoutContext.clone(),this.column.stopAtOverflow=!1,this.column.flowRootFormattingContext=i.formattingContext,this.column.pseudoParent=e;let r=this.column.calculateClonedPaddingBorder(i);this.column.footnoteEdge=this.column.footnoteEdge-r;let s=this;this.column.openAllViews=function(o){return Ja.prototype.openAllViews.call(this,o).thenAsync(u=>(s.startNodeContexts.push(u.copy()),q(u)))}}layout(e,t){return this.column.layout(e,t)}findAcceptableBreakPosition(e){let t=this.column.findAcceptableBreakPosition();if(e){let i=this.startNodeContexts[0].copy(),r=new bs(i,null,i.overflow,0);if(r.findAcceptableBreak(this.column,0),!t.nodeContext)return{breakPosition:r,nodeContext:i}}return t}finishBreak(e,t,i){return this.column.finishBreak(e,t,i)}doFinishBreakOfFragmentLayoutConstraints(e){this.column.doFinishBreakOfFragmentLayoutConstraints(e)}isStartNodeContext(e){let t=this.startNodeContexts[0];return t.viewNode===e.viewNode&&t.after===e.after&&t.offsetInNode===e.offsetInNode}isLastAfterNodeContext(e){return ur(e.toNodePosition(),this.column.lastAfterPosition)}getColumnElement(){return this.column.element}getColumn(){return this.column}},eo=class{breakTextNode(e,t,i,r,s,o){if(t.after)t.offsetInNode=e.length;else{let u=i-t.boxOffset,c=e.data;c.charCodeAt(u)==173?u=this.breakAfterSoftHyphen(e,c,u,t):u=this.breakAfterOtherCharacter(e,c,u,t),u>0&&(t=this.updateNodeContext(t,u,e))}return t}breakAfterSoftHyphen(e,t,i,r){let s=/[\u0620\u0626\u0628\u062A-\u062E\u0633-\u0647\u0649\u064A\u066E\u066F\u0678-\u0687\u069A-\u06BF\u06C1\u06C2\u06CC\u06CE\u06D0\u06D1\u06FA-\u06FC\u06FF\u0712-\u0714\u071A-\u071D\u071F-\u0727\u0729\u072B\u072D\u072E\u074E-\u0758\u075C-\u076A\u076D-\u0770\u0772\u0775-\u0777\u077A-\u077F\u07CA-\u07EA\u07FA\u0841-\u0845\u0848\u084A-\u0853\u0855\u0860\u0862-\u0865\u0868\u0883-\u0886\u0889-\u088D\u08A0-\u08A9\u08AF\u08B0\u08B3-\u08B8\u08BA-\u08C8\u1807\u180A\u1820-\u1878\u1887-\u18A8\u18AA\u200D\uA840-\uA871\u{10AC0}-\u{10AC4}\u{10AD3}-\u{10AD6}\u{10AD8}-\u{10ADC}\u{10ADE}-\u{10AE0}\u{10AEB}-\u{10AEE}\u{10B80}\u{10B82}\u{10B86}-\u{10B88}\u{10B8A}\u{10B8B}\u{10B8D}\u{10B90}\u{10BAD}\u{10BAE}\u{10D01}-\u{10D21}\u{10D23}\u{10EC3}\u{10EC4}\u{10F30}-\u{10F32}\u{10F34}-\u{10F44}\u{10F51}-\u{10F53}\u{10F70}-\u{10F73}\u{10F76}-\u{10F81}\u{10FB0}\u{10FB2}\u{10FB3}\u{10FB8}\u{10FBB}\u{10FBC}\u{10FBE}\u{10FBF}\u{10FC1}\u{10FC4}\u{10FCA}\u{1E900}-\u{1E943}]\p{Mn}*$/u.test(t.slice(0,i))?"\u200D":"";if(e.replaceData(i,t.length-i,r.breakWord?"":s+Mg(r)),s){let o=r.preprocessedTextContent[0][1];r.preprocessedTextContent[0][1]=o.slice(0,i+1)+s+o.slice(i+1)}return i+1}breakAfterOtherCharacter(e,t,i,r){let s=t.charAt(i);i++;let o=t.charAt(i);return e.replaceData(i,t.length-i,!r.breakWord&&mp(s)&&mp(o)?Mg(r):""),i}updateNodeContext(e,t,i){return e=e.modify(),e.offsetInNode+=t,e.breakBefore=null,e}};f(eo,"instance"),eo.instance=new eo;function Mg(e){return e.hyphenateCharacter||e.parent&&e.parent.hyphenateCharacter||"-"}var LN=class extends Ld{constructor(e,t){super(),this.leadingEdge=e,f(this,"breakAfter"),f(this,"initialPageBreakType",null),f(this,"initialComputedBlockSize",0),f(this,"initialOverflown",!1),f(this,"context",{overflownNodeContext:null}),this.breakAfter=t||null}resolveLayoutMode(e){return new _N(this.leadingEdge,this.breakAfter,this.context)}prepareLayout(e,t){t.fragmentLayoutConstraints=[],t.pseudoParent||fA()}clearNodes(e){super.clearNodes(e);let t=e;for(;t;){let i=t.viewNode;i&&Jm(i.parentNode,i),t=t.parent}}saveState(e,t){super.saveState(e,t),this.initialPageBreakType=t.pageBreakType,this.initialComputedBlockSize=t.computedBlockSize,this.initialOverflown=t.overflown}restoreState(e,t){super.restoreState(e,t),t.pageBreakType=this.initialPageBreakType,t.computedBlockSize=this.initialComputedBlockSize,t.overflown=this.initialOverflown}},_N=class{constructor(e,t,i){this.leadingEdge=e,this.breakAfter=t,this.context=i}doLayout(e,t){let i=Z("DefaultLayoutMode.doLayout");return IN(e,t).then(()=>{t.doLayout(e,this.leadingEdge,this.breakAfter).then(r=>{this.context.overflownNodeContext=r.overflownNodeContext,i.finish(r.nodeContext)})}),i.result()}accept(e,t){return t.pageFloatLayoutContext.isInvalidated()||t.pageBreakType||t.fragmentLayoutConstraints.length<=0?!0:t.fragmentLayoutConstraints.every(i=>i.allowLayout(e,this.context.overflownNodeContext,t))}postLayout(e,t,i,r){return r||(r=!i.fragmentLayoutConstraints.some(s=>s.nextCandidate(e))),i.fragmentLayoutConstraints.forEach(s=>{s.postLayout(r,e,t,i)}),r}},BN=class extends Ja{constructor(e,t,i,r,s,o,u){super(t,i,r,s,o),this.floatSide=e,this.parentContainer=u,f(this,"rootViewNodes",[]),f(this,"floatMargins",[]),f(this,"adjustContentRelativeSize",!0)}openAllViews(e){return super.openAllViews(e).thenAsync(t=>(t&&this.fixFloatSizeAndPosition(t),q(t)))}convertPercentageSizesToPx(e){let t=this.parentContainer.getPaddingRect(),i=t.x2-t.x1,r=t.y2-t.y1;function s(o,u){o.forEach(c=>{let m=Di(e,c);if(m&&m.charAt(m.length-1)==="%"){let p=parseFloat(m),y=u*p/100;j(e,c,`${y}px`)}})}s(["width","max-width","min-width"],i),s(["height","max-height","min-height"],r),s(["margin-top","margin-right","margin-bottom","margin-left","padding-top","padding-right","padding-bottom","padding-left"],this.vertical?r:i),["margin-top","margin-right","margin-bottom","margin-left"].forEach(o=>{Di(e,o)==="auto"&&j(e,o,"0")})}fixFloatSizeAndPosition(e){for(;e.parent;)e=e.parent;e.viewNode.nodeType;let t=e.viewNode;if(this.rootViewNodes.push(t),this.adjustContentRelativeSize&&this.convertPercentageSizesToPx(t),this.floatMargins.push(this.getComputedMargin(t)),this.adjustContentRelativeSize){let i=this.floatSide;if(this.parentContainer.vertical){if(i==="block-end"||i==="left"){let r=Di(t,"height");r!==""&&r!=="auto"&&j(t,"margin-top","auto")}}else if(i==="block-end"||i==="bottom"){let r=Di(t,"width");r!==""&&r!=="auto"&&j(t,"margin-left","auto")}}}getContentInlineSize(){return Math.max.apply(null,this.rootViewNodes.map((e,t)=>{let i=this.clientLayout.getElementClientRect(e),r=this.floatMargins[t];return this.vertical?r.top+i.height+r.bottom:r.left+i.width+r.right}))}},Lr=class{constructor(e,t){this.parent=e,this.rootSourceNode=t,f(this,"formattingContextType","RepetitiveElementsOwner"),f(this,"isRoot",!1),f(this,"repetitiveElements",null)}getName(){return"Repetitive elements owner formatting context (RepetitiveElementsOwnerFormattingContext)"}isFirstTime(e,t){return t}getParent(){return this.parent}getRepetitiveElements(){return this.repetitiveElements}getRootViewNode(e){let t=this.getRootNodeContext(e);return t?t.viewNode:null}getRootNodeContext(e){do if(!e.belongsTo(this)&&e.sourceNode===this.rootSourceNode)return e;while(e=e.parent);return null}initializeRepetitiveElements(e){this.repetitiveElements||Bd.some(t=>t.root===this.rootSourceNode?(this.repetitiveElements=t.elements,!0):!1)||(this.repetitiveElements=new FN(e,this.rootSourceNode),Bd.push({root:this.rootSourceNode,elements:this.repetitiveElements}))}saveState(){}restoreState(e){}},FN=class{constructor(e,t){this.vertical=e,this.ownerSourceNode=t,f(this,"headerSourceNode",null),f(this,"footerSourceNode",null),f(this,"headerViewNode",null),f(this,"footerViewNode",null),f(this,"headerNodePosition",null),f(this,"footerNodePosition",null),f(this,"headerHeight",0),f(this,"footerHeight",0),f(this,"isSkipHeader",!1),f(this,"isSkipFooter",!1),f(this,"enableSkippingFooter",!0),f(this,"enableSkippingHeader",!0),f(this,"doneInitialLayout",!1),f(this,"firstContentSourceNode",null),f(this,"lastContentSourceNode",null),f(this,"affectedNodeCache",[]),f(this,"afterLastContentNodeCache",[]),f(this,"allowInsert",!1),f(this,"allowInsertRepeatitiveElements")}setHeaderNodeContext(e){this.headerNodePosition||(this.headerNodePosition=za(e,0),this.headerSourceNode=e.sourceNode,this.headerViewNode=e.viewNode)}setFooterNodeContext(e){this.footerNodePosition||(this.footerNodePosition=za(e,0),this.footerSourceNode=e.sourceNode,this.footerViewNode=e.viewNode)}updateHeight(e){this.headerViewNode&&(this.headerHeight=Ad(this.headerViewNode,e,this.vertical),this.headerViewNode=null),this.footerViewNode&&(this.footerHeight=Ad(this.footerViewNode,e,this.vertical),this.footerViewNode=null)}prepareLayoutFragment(){this.isSkipHeader=this.isSkipFooter=!1,this.enableSkippingFooter=!0,this.enableSkippingHeader=!0}appendHeaderToFragment(e,t,i){return!this.headerNodePosition||this.isSkipHeader?q(!0):this.appendElementToFragment(this.headerNodePosition,e,t,i)}appendFooterToFragment(e,t,i){return!this.footerNodePosition||this.isSkipFooter?q(!0):this.appendElementToFragment(this.footerNodePosition,e,t,i)}appendElementToFragment(e,t,i,r){let s=t.viewNode.ownerDocument,o=t.viewNode,u=s.createElement("div");o.appendChild(u);let c=new tu(r,u,t),m=c.getColumn().pageBreakType;return c.getColumn().pageBreakType=null,this.allowInsertRepeatitiveElements=!0,c.layout(new cr(e),!0).thenAsync(()=>(this.allowInsertRepeatitiveElements=!1,o.removeChild(u),this.moveChildren(u,o,i),c.getColumn().pageBreakType=m,q(!0)))}moveChildren(e,t,i){if(t)for(;e.firstChild;){let r=e.firstChild;e.removeChild(r),r.setAttribute(nn,"1"),i?t.insertBefore(r,i):t.appendChild(r)}}calculateOffset(e){let t=0;return e&&!this.affectTo(e)||((!this.isSkipFooter||e&&this.isAfterLastContent(e))&&(t+=this.footerHeight),this.isSkipHeader||(t+=this.headerHeight)),t}calculateMinimumOffset(e){let t=0;return e&&!this.affectTo(e)||(!this.enableSkippingFooter&&e&&this.isAfterLastContent(e)&&(t+=this.footerHeight),this.enableSkippingHeader||(t+=this.headerHeight)),t}isAfterLastContent(e){return this.findResultFromCache(e,this.afterLastContentNodeCache,t=>this.isAfterNodeContextOf(this.lastContentSourceNode,e,!1))}affectTo(e){return this.findResultFromCache(e,this.affectedNodeCache,t=>this.isAfterNodeContextOf(this.ownerSourceNode,e,!0))}findResultFromCache(e,t,i){let r=t.filter(s=>s.nodeContext.sourceNode===e.sourceNode&&s.nodeContext.after===e.after);if(r.length>0)return r[0].result;{let s=i(e);return t.push({nodeContext:e,result:s}),s}}isAfterNodeContextOf(e,t,i){let r=[];for(let s=e;s;s=s.parentNode){if(t.sourceNode===s)return t.after;r.push(s)}for(let s=t.sourceNode;s;s=s.parentNode){let o=r.indexOf(s);if(o>=0)return i?o===0:!1;for(let u=s;u;u=u.previousElementSibling)if(r.includes(u))return!0}return t.after}isFirstContentNode(e){return e&&this.firstContentSourceNode===e.sourceNode}isEnableToUpdateState(){return!!(!this.isSkipFooter&&this.enableSkippingFooter&&this.footerNodePosition||!this.isSkipHeader&&this.enableSkippingHeader&&this.headerNodePosition)}updateState(){!this.isSkipFooter&&this.enableSkippingFooter&&this.footerNodePosition?this.isSkipFooter=!0:!this.isSkipHeader&&this.enableSkippingHeader&&this.headerNodePosition&&(this.isSkipHeader=!0)}preventSkippingHeader(){this.isSkipHeader=!1,this.enableSkippingHeader=!1}preventSkippingFooter(){this.isSkipFooter=!1,this.enableSkippingFooter=!1}isHeaderRegistered(){return!!this.headerNodePosition}isFooterRegistered(){return!!this.footerNodePosition}isHeaderSourceNode(e){return this.headerSourceNode===e}isFooterSourceNode(e){return this.footerSourceNode===e}},Dg=class{constructor(e){this.formattingContext=e}accept(e,t){return!!e}postLayout(e,t,i,r){let s=this.formattingContext.getRepetitiveElements();return s&&(i.clientLayout,s.doneInitialLayout||(s.updateHeight(i),s.doneInitialLayout=!0)),r}},Wg=class{constructor(e){this.formattingContext=e}accept(e,t){return!0}postLayout(e,t,i,r){return r}},zN=class extends Dg{constructor(e,t){super(e),this.processor=t}doLayout(e,t){return this.processor.doInitialLayout(e,t)}accept(e,t){return!1}},MN=class extends Wg{constructor(e,t){super(e),this.processor=t}doLayout(e,t){return!e.belongsTo(this.formattingContext)&&!e.after&&t.fragmentLayoutConstraints.unshift(new iu(e)),this.processor.doLayout(e,t)}},iu=class PT{constructor(t){f(this,"flagmentLayoutConstraintType","RepetitiveElementsOwner"),f(this,"nodeContext");let i=$i(t.formattingContext);this.nodeContext=i.getRootNodeContext(t)}allowLayout(t,i,r){let s=this.getRepetitiveElements();return!s||ln(this.nodeContext.viewNode)||!s.isEnableToUpdateState()?!0:!(i&&!t||t&&t.overflow)}nextCandidate(t){let i=this.getRepetitiveElements();return i&&i.isEnableToUpdateState()?(i.updateState(),!0):!1}postLayout(t,i,r,s){let o=this.getRepetitiveElements();o&&t&&s.stopAtOverflow&&(i==null||o.isAfterLastContent(i))&&o.preventSkippingFooter()}finishBreak(t,i){let r=$i(this.nodeContext.formattingContext),s=this.getRepetitiveElements();if(!s)return q(!0);let o=this.nodeContext;return VN(r,o,i).thenAsync(()=>HN(r,o,i).thenAsync(()=>(s.prepareLayoutFragment(),q(!0))))}getRepetitiveElements(){return $i(this.nodeContext.formattingContext).getRepetitiveElements()}equalsTo(t){return t instanceof PT?$i(this.nodeContext.formattingContext)===$i(t.nodeContext.formattingContext):!1}getPriorityOfFinishBreak(){return 10}},DN=class extends Ld{constructor(e,t){super(),this.formattingContext=e,this.processor=t}resolveLayoutMode(e){let t=this.formattingContext.getRepetitiveElements();return!e.belongsTo(this.formattingContext)&&!t.doneInitialLayout?new zN(this.formattingContext,this.processor):(!e.belongsTo(this.formattingContext)&&!e.after&&t&&t.preventSkippingHeader(),new MN(this.formattingContext,this.processor))}},WN=class extends vs{constructor(e,t){super(),this.formattingContext=e,this.column=t}startNonInlineElementNode(e){let t=this.formattingContext,i=e.nodeContext,r=t.getRepetitiveElements();if(i.parent&&t.rootSourceNode===i.parent.sourceNode){switch(i.repeatOnBreak){case"header":if(r.isHeaderRegistered())i.repeatOnBreak="none";else return r.setHeaderNodeContext(i),q(!0);break;case"footer":if(r.isFooterRegistered())i.repeatOnBreak="none";else return r.setFooterNodeContext(i),q(!0);break}r.firstContentSourceNode||(r.firstContentSourceNode=i.sourceNode)}return vs.prototype.startNonInlineElementNode.call(this,e)}afterNonInlineElementNode(e){let t=this.formattingContext,i=e.nodeContext;return i.sourceNode===t.rootSourceNode&&(t.getRepetitiveElements().lastContentSourceNode=e.lastAfterNodeContext&&e.lastAfterNodeContext.sourceNode,e.break=!0),i.repeatOnBreak==="header"||i.repeatOnBreak==="footer"?q(!0):vs.prototype.afterNonInlineElementNode.call(this,e)}},jN=class extends cn{layout(e,t,i){if(t.isFloatNodeContext(e))return t.layoutFloatOrFootnote(e);let r=$i(e.formattingContext);return r.getRootViewNode(e)?(i&&jg(e.parent,t),e.belongsTo(r)?cn.prototype.layout.call(this,e,t,i):new DN(r,this).layout(e,t)):t.buildDeepElementView(e)}startNonInlineElementNode(e){let t=UN(e).getRepetitiveElements();return t&&!t.allowInsertRepeatitiveElements&&(t.isHeaderSourceNode(e.sourceNode)||t.isFooterSourceNode(e.sourceNode))&&e.viewNode.parentNode.removeChild(e.viewNode),!1}doInitialLayout(e,t){let i=$i(e.formattingContext),r=Z("BlockLayoutProcessor.doInitialLayout");return this.layoutEntireBlock(e,t).thenFinish(r),r.result()}layoutEntireBlock(e,t){let i=$i(e.formattingContext),r=new WN(i,t);return new _d(r,t.layoutContext).iterate(e)}doLayout(e,t){let i=$i(e.formattingContext),r=Z("doLayout"),s=t.layoutContext.nextInTree(e,!1);return zg(s,t).then(o=>{let u=o;r.loopWithFrame(c=>{for(;u;){let m=!0;if(t.layoutNext(u,!1).then(p=>{u=p,t.pageFloatLayoutContext.isInvalidated()||t.pageBreakType||u&&t.stopByOverflow(u)||u&&u.after&&u.sourceNode==i.rootSourceNode?c.breakLoop():m?m=!1:c.continueLoop()}),m){m=!1;return}}c.breakLoop()}).then(()=>{r.finish(u)})}),r.result()}finishBreak(e,t,i,r){return cn.prototype.finishBreak.call(this,e,t,i,r)}clearOverflownViewNodes(e,t,i,r){cn.prototype.clearOverflownViewNodes(e,t,i,r)}};function qN(e,t){for(let i=e;i;i=i.parent){let r=i.formattingContext;r&&r instanceof Lr&&!i.belongsTo(r)&&t(r,i)}}function jg(e,t){e&&qN(e.after?e.parent:e,(i,r)=>{dr.isInstanceOfTableFormattingContext(i)||t.fragmentLayoutConstraints.push(new iu(r))})}function VN(e,t,i){let r=e.getRepetitiveElements();if(r){let s=e.getRootNodeContext(t);if(s.viewNode){let o=s.viewNode.firstChild;return r.appendHeaderToFragment(s,o,i)}}return q(!0)}function HN(e,t,i){let r=e.getRepetitiveElements();if(r&&!r.isSkipFooter){let s=e.getRootNodeContext(t);if(s.viewNode)return r.appendFooterToFragment(s,null,i)}return q(!0)}function UN(e){let t=e.formattingContext;return!t||!(t instanceof Lr)?null:t}function $i(e){return e instanceof Lr,e}var GN=new jN;De("RESOLVE_LAYOUT_PROCESSOR",e=>e instanceof Lr&&!dr.isInstanceOfTableFormattingContext(e)?GN:null);var qg=class{constructor(e,t){this.rowIndex=e,this.sourceNode=t,f(this,"cells",[])}addCell(e){this.cells.push(e)}getMinimumHeight(){return Math.min.apply(null,this.cells.map(e=>e.height))}},$N=class{constructor(e,t,i){this.rowIndex=e,this.columnIndex=t,f(this,"viewElement"),f(this,"colSpan"),f(this,"rowSpan"),f(this,"height",0),f(this,"anchorSlot",null),this.viewElement=i,this.colSpan=i.colSpan||1,this.rowSpan=i.rowSpan||1}setHeight(e){this.height=e}setAnchorSlot(e){this.anchorSlot=e}},YN=class{constructor(e,t,i){this.rowIndex=e,this.columnIndex=t,this.cell=i}},XN=class{constructor(e,t,i){this.column=e,this.cellNodeContext=i,f(this,"pseudoColumn"),f(this,"empty",!1),this.pseudoColumn=new tu(e,t,i)}findAcceptableBreakPosition(){let e=this.cellNodeContext.viewNode,{verticalAlign:t,alignContent:i}=e.style;t!=="top"&&t!=="baseline"&&j(e,"vertical-align","top"),i&&i!=="normal"&&j(e,"align-content","normal");let r=this.pseudoColumn.findAcceptableBreakPosition(!0);return j(e,"vertical-align",t),i&&i!=="normal"&&j(e,"align-content",i),r}},KN=class{constructor(e,t){this.viewNode=e,this.side=t}},ZN=class extends bs{constructor(e,t,i,r){super(e,t,i,r),f(this,"formattingContext"),f(this,"acceptableCellBreakPositions",null),f(this,"rowIndex",null),this.formattingContext=e.formattingContext}findAcceptableBreak(e,t){let i=super.findAcceptableBreak(e,t);return t<this.getMinBreakPenalty()?null:this.getAcceptableCellBreakPositions().every(r=>!!r.nodeContext)?i:null}getMinBreakPenalty(){let e=super.getMinBreakPenalty();this.getAcceptableCellBreakPositions().forEach(i=>{e+=i.breakPosition.getMinBreakPenalty()});let t=this.getCellFragments();return e+=Math.max(0,...t.map(i=>i.cellNodeContext.breakPenalty)),e}getAcceptableCellBreakPositions(){if(!this.acceptableCellBreakPositions){let e=this.formattingContext,t=this.getCellFragments();this.acceptableCellBreakPositions=t.map(i=>i.findAcceptableBreakPosition())}return this.acceptableCellBreakPositions}getRowIndex(){return this.rowIndex!=null?this.rowIndex:this.rowIndex=this.formattingContext.findRowIndexBySourceNode(this.position.sourceNode)}getCellFragments(){return this.formattingContext.getRowSpanningCellsOverflowingTheRow(this.getRowIndex()).map(this.formattingContext.getCellFragmentOfCell,this.formattingContext)}},QN=class extends Id{constructor(e,t,i){super(),this.rowIndex=e,this.beforeNodeContext=t,this.formattingContext=i,f(this,"acceptableCellBreakPositions",null)}findAcceptableBreak(e,t){if(this!==e.breakPositions[0]&&t<this.getMinBreakPenalty())return null;let i=this.getCellFragments(),r=this.getAcceptableCellBreakPositions(),s=r.every(o=>!!o.nodeContext)&&r.some((o,u)=>{let c=i[u].pseudoColumn,m=o.nodeContext;return!c.isStartNodeContext(m)&&!c.isLastAfterNodeContext(m)});return this.beforeNodeContext.overflow=r.some(o=>o.nodeContext&&o.nodeContext.overflow),s?this.beforeNodeContext:null}getMinBreakPenalty(){let e=this.formattingContext.getRowByIndex(this.rowIndex),t=this.beforeNodeContext.breakPenalty,i=this.getAcceptableCellBreakPositions(),r=this.getCellFragments();t+=Math.max(0,...r.map(o=>o.cellNodeContext.breakPenalty));let s=i.some((o,u)=>o.breakPosition instanceof Qa&&r[u].cellNodeContext.sourceNode.rowSpan>1);return i.forEach((o,u)=>{let c=o.breakPosition.getMinBreakPenalty();s&&o.breakPosition instanceof bs&&o.breakPosition.overflows&&c>=3&&(r[u].column.checkOverflowAndSaveEdge(o.nodeContext,null)||(c-=3)),t+=c}),t}getAcceptableCellBreakPositions(){if(!this.acceptableCellBreakPositions){let e=this.getCellFragments();this.acceptableCellBreakPositions=e.map(t=>t.findAcceptableBreakPosition())}return this.acceptableCellBreakPositions}getCellFragments(){return this.formattingContext.getCellsFallingOnRow(this.rowIndex).map(this.formattingContext.getCellFragmentOfCell,this.formattingContext)}},bn=class extends Lr{constructor(e,t){super(e,t),this.tableSourceNode=t,f(this,"formattingContextType","Table"),f(this,"vertical",!1),f(this,"columnCount",-1),f(this,"tableWidth",0),f(this,"captions",[]),f(this,"colGroups",null),f(this,"colWidths",null),f(this,"inlineBorderSpacing",0),f(this,"rows",[]),f(this,"slots",[]),f(this,"cellFragments",[]),f(this,"lastRowViewNode",null),f(this,"cellBreakPositions",[]),f(this,"repetitiveElements",null)}getName(){return"Table formatting context (Table.TableFormattingContext)"}isFirstTime(e,t){if(!t)return t;switch(e.display){case"table-row":return this.cellBreakPositions.length===0;case"table-cell":return!this.cellBreakPositions.some(i=>i.cellNodePosition.steps[0].node===e.sourceNode);default:return t}}getParent(){return this.parent}finishFragment(){this.cellFragments=[]}addRow(e,t){this.rows[e]=t}getRowSlots(e){let t=this.slots[e];return t||(t=this.slots[e]=[]),t}addCell(e,t){let i=this.rows[e];i||(this.addRow(e,new qg(e,null)),i=this.rows[e]),i.addCell(t);let r=e+t.rowSpan,s=this.getRowSlots(e),o=0;for(;s[o];)o++;for(;e<r;e++){s=this.getRowSlots(e);for(let u=o;u<o+t.colSpan;u++){let c=s[u]=new YN(e,u,t);t.anchorSlot||t.setAnchorSlot(c)}}}getRowByIndex(e){return this.rows[e]}findRowIndexBySourceNode(e){return this.rows.findIndex(t=>e===t.sourceNode)}addCellFragment(e,t,i){let r=this.cellFragments[e];r||(r=this.cellFragments[e]=[]),r[t]=i}getCellsFallingOnRow(e){return this.getRowSlots(e).reduce((t,i)=>i.cell!==t[t.length-1]?t.concat(i.cell):t,[])}getRowSpanningCellsOverflowingTheRow(e){return this.getCellsFallingOnRow(e).filter(t=>t.rowIndex+t.rowSpan-1>e)}getCellFragmentOfCell(e){return this.cellFragments[e.rowIndex]&&this.cellFragments[e.rowIndex][e.columnIndex]}getColumnCount(){return this.columnCount<0&&(this.columnCount=Math.max.apply(null,this.rows.map(e=>e.cells.reduce((t,i)=>t+i.colSpan,0)))),this.columnCount}updateCellSizes(e){this.rows.forEach(t=>{t.cells.forEach(i=>{let r=gs(e,i.viewElement,this.vertical);i.viewElement=null,i.setHeight(this.vertical?r.width:r.height)})})}findCellFromColumn(e){if(!e)return null;let t=null,i=0,r=0;e:for(i=0;i<this.cellFragments.length;i++)if(this.cellFragments[i]){for(r=0;r<this.cellFragments[i].length;r++)if(this.cellFragments[i][r]&&e===this.cellFragments[i][r].pseudoColumn.getColumn()){t=this.rows[i].cells[r];break e}}if(!t)return null;for(;i<this.slots.length;i++)for(;r<this.slots[i].length;r++){let s=this.slots[i][r];if(s.cell===t)return{rowIndex:s.rowIndex,columnIndex:s.columnIndex}}return null}collectElementsOffsetOfUpperCells(e){let t=[];return this.slots.reduce((i,r,s)=>{if(s>=e.rowIndex)return i;let o=r[e.columnIndex]&&this.getCellFragmentOfCell(r[e.columnIndex].cell);return!o||t.includes(o)||(this.collectElementsOffsetFromColumn(o.pseudoColumn.getColumn(),i),t.push(o)),i},[])}collectElementsOffsetOfHighestColumn(){let e=[];return this.rows.forEach(t=>{t.cells.forEach((i,r)=>{e[r]||(e[r]={collected:[],elements:[]});let s=e[r],o=this.getCellFragmentOfCell(i);!o||s.collected.includes(o)||(this.collectElementsOffsetFromColumn(o.pseudoColumn.getColumn(),s.elements),s.collected.push(o))})}),[new JN(e.map(t=>t.elements))]}collectElementsOffsetFromColumn(e,t){e.fragmentLayoutConstraints.forEach(i=>{if(Nr.isInstanceOfRepetitiveElementsOwnerLayoutConstraint(i)){let r=i.getRepetitiveElements();t.push(r)}dr.isInstanceOfTableRowLayoutConstraint(i)&&i.getElementsOffsetsForTableCell(null).forEach(r=>{t.push(r)})})}saveState(){return[].concat(this.cellBreakPositions)}restoreState(e){this.cellBreakPositions=e}},JN=class{constructor(e){this.repeatitiveElementsInColumns=e}calculateOffset(e){return this.calculateMaxOffsetOfColumn(e,t=>t.current)}calculateMinimumOffset(e){return this.calculateMaxOffsetOfColumn(e,t=>t.minimum)}calculateMaxOffsetOfColumn(e,t){let i=0;return this.repeatitiveElementsInColumns.forEach(r=>{let s=un(e,r);i=Math.max(i,t(s))}),i}};function bi(e){return e instanceof bn,e}function eI(e){return e==="table-row-group"||e==="table-header-group"||e==="table-footer-group"}function tI(e){return e==="table"||e==="inline-table"}function Vg(e){return eI(e)||tI(e)}function Hg(e,t,i){let r=e.nodeContext,s=r.display,o=r.parent?r.parent.display:null,u=!1;if(o==="inline-table"&&!(r.formattingContext instanceof bn)){for(let c=r.parent;c;c=c.parent)if(c.formattingContext instanceof bn){u=c.formattingContext===t;break}}return u||s==="table-row"&&!Vg(o)||s==="table-cell"&&o!=="table-row"&&!Vg(o)||r.formattingContext instanceof bn&&r.formattingContext!==t?i.buildDeepElementView(r).thenAsync(c=>(e.nodeContext=c,q(!0))):null}var iI=class extends vs{constructor(e,t){super(),this.formattingContext=e,this.column=t,f(this,"rowIndex",-1),f(this,"columnIndex",0),f(this,"inRow",!1),f(this,"checkPoints",[]),f(this,"inHeaderOrFooter",!1)}startNonInlineElementNode(e){let t=this.formattingContext,i=Hg(e,t,this.column);if(i)return i;this.postLayoutBlockContents(e);let r=e.nodeContext,s=r.display,o=t.getRepetitiveElements();switch(s){case"table":t.inlineBorderSpacing=r.inlineBorderSpacing;break;case"table-caption":{let u=new KN(r.viewNode,r.captionSide);t.captions.push(u);break}case"table-header-group":return o.isHeaderRegistered()||(this.inHeaderOrFooter=!0,o.setHeaderNodeContext(r)),q(!0);case"table-footer-group":return o.isFooterRegistered()||(this.inHeaderOrFooter=!0,o.setFooterNodeContext(r)),q(!0);case"table-row":this.inHeaderOrFooter||(this.inRow=!0,this.rowIndex++,r.sourceNode,this.columnIndex=0,t.addRow(this.rowIndex,new qg(this.rowIndex,r.sourceNode)),o.firstContentSourceNode||(o.firstContentSourceNode=r.sourceNode));break}return super.startNonInlineElementNode(e)}afterNonInlineElementNode(e){let t=this.formattingContext,i=e.nodeContext,r=i.display,s=this.column.clientLayout;if(this.postLayoutBlockContents(e),i.sourceNode===t.tableSourceNode){let o=s.getElementComputedStyle(t.getRootViewNode(i));t.tableWidth=parseFloat(o[t.vertical?"height":"width"]),t.getRepetitiveElements().lastContentSourceNode=e.lastAfterNodeContext&&e.lastAfterNodeContext.sourceNode,e.break=!0}else switch(r){case"table-header-group":case"table-footer-group":if(this.inHeaderOrFooter)return this.inHeaderOrFooter=!1,q(!0);break;case"table-row":this.inHeaderOrFooter||(t.lastRowViewNode=i.viewNode,this.inRow=!1);break;case"table-cell":if(!this.inHeaderOrFooter){this.inRow||(this.rowIndex++,this.columnIndex=0,this.inRow=!0);let o=i.viewNode;t.addCell(this.rowIndex,new $N(this.rowIndex,this.columnIndex,o)),this.columnIndex++}break}return super.afterNonInlineElementNode(e)}startNonElementNode(e){this.registerCheckPoint(e)}afterNonElementNode(e){this.registerCheckPoint(e)}startInlineElementNode(e){this.registerCheckPoint(e)}afterInlineElementNode(e){this.registerCheckPoint(e)}registerCheckPoint(e){let t=e.nodeContext;t&&t.viewNode&&!dn(t)&&this.checkPoints.push(t.clone())}postLayoutBlockContents(e){this.checkPoints.length>0&&this.column.postLayoutBlock(e.nodeContext,this.checkPoints),this.checkPoints=[]}},Ug=class AT extends vs{constructor(t,i){super(!0),this.formattingContext=t,this.column=i,f(this,"inRow",!1),f(this,"currentRowIndex",-1),f(this,"currentColumnIndex",0),f(this,"originalStopAtOverflow"),f(this,"inHeader"),f(this,"inFooter"),this.originalStopAtOverflow=i.stopAtOverflow,i.stopAtOverflow=!1}resetColumn(){this.column.stopAtOverflow=this.originalStopAtOverflow}getColSpanningCellWidth(t){let i=this.formattingContext.colWidths,r=0;for(let s=0;s<t.colSpan;s++)r+=i[t.anchorSlot.columnIndex+s];return r+=this.formattingContext.inlineBorderSpacing*(t.colSpan-1),r}layoutCell(t,i,r){let s=t.rowIndex,o=t.columnIndex,u=t.colSpan,c=i.viewNode,m=i.verticalAlign;u>1&&(j(c,"box-sizing","border-box"),j(c,this.formattingContext.vertical?"height":"width",`${this.getColSpanningCellWidth(t)}px`));let p=c.ownerDocument.createElement("div");c.appendChild(p);let y=new XN(this.column,p,i);return this.formattingContext.addCellFragment(s,o,y),r.primary.steps.length===1&&r.primary.after&&(y.empty=!0),y.pseudoColumn.layout(r,!0).thenReturn(!0)}hasBrokenCellAtSlot(t){let i=this.formattingContext.cellBreakPositions[0];return i?i.cell.anchorSlot.columnIndex===t:!1}extractRowSpanningCellBreakPositions(){let t=this.formattingContext.cellBreakPositions;if(t.length===0)return[];let i=[],r=0;do{let s=t[r],o=s.cell.rowIndex;if(o<this.currentRowIndex){let u=i[o];u||(u=i[o]=[]),u.push(s),t.splice(r,1)}else r++}while(r<t.length);return i}layoutRowSpanningCellsFromPreviousFragment(t){let i=this.formattingContext,r=this.extractRowSpanningCellBreakPositions(),s=r.reduce(S=>S+1,0);if(s===0)return q(!0);let o=this.column.layoutContext,u=t.nodeContext;u.viewNode.parentNode.removeChild(u.viewNode);let c=Z("layoutRowSpanningCellsFromPreviousFragment"),m=q(!0),p=0,y=[];return r.forEach(S=>{m=m.thenAsync(()=>{let v=Ma(S[0].cellNodePosition.steps[1],u.parent);return o.setCurrent(v,!1).thenAsync(()=>{let w=q(!0),T=0;function E(P){for(;T<P;){if(!y.includes(T)){let O=v.viewNode.ownerDocument.createElement("td");j(O,"padding","0"),v.viewNode.appendChild(O)}T++}}return S.forEach(P=>{w=w.thenAsync(()=>{let O=P.cell;E(O.anchorSlot.columnIndex);let A=P.cellNodePosition,L=Ma(A.steps[0],v);return L.offsetInNode=A.offsetInNode,L.after=A.after,L.fragmentIndex=A.steps[0].fragmentIndex+1,o.setCurrent(L,!1).thenAsync(()=>{let H=P.breakChunkPosition;for(let G=0;G<O.colSpan;G++)y.push(T+G);return T+=O.colSpan,this.layoutCell(O,L,H).thenAsync(()=>(L.viewNode.rowSpan=O.rowIndex+O.rowSpan-this.currentRowIndex+s-p,q(!0)))})})}),w.thenAsync(()=>(E(i.getColumnCount()),p++,q(!0)))})})}),m.then(()=>{o.setCurrent(u,!0,t.atUnforcedBreak).then(()=>{c.finish(!0)})}),c.result()}startTableRow(t){if(this.inHeader||this.inFooter)return q(!0);let i=t.nodeContext,r=this.formattingContext;return this.currentRowIndex<0?(i.sourceNode,this.currentRowIndex=r.findRowIndexBySourceNode(i.sourceNode)):this.currentRowIndex++,this.currentColumnIndex=0,this.inRow=!0,this.layoutRowSpanningCellsFromPreviousFragment(t).thenAsync(()=>(this.registerCellFragmentIndex(),this.column.checkOverflowAndSaveEdgeAndBreakPosition(t.lastAfterNodeContext,null,!0,t.breakAtTheEdge)&&r.getRowSpanningCellsOverflowingTheRow(this.currentRowIndex-1).length===0&&(this.resetColumn(),i.overflow=!0,t.break=!0),q(!0)))}registerCellFragmentIndex(){this.formattingContext.getRowByIndex(this.currentRowIndex).cells.forEach(t=>{let i=this.formattingContext.cellBreakPositions[t.columnIndex];if(i&&i.cell.anchorSlot.columnIndex==t.anchorSlot.columnIndex){let r=i.cellNodePosition.steps[0],s=this.column.layoutContext.xmldoc.getElementOffset(r.node);TN(s,r.fragmentIndex+1,1)}})}startTableCell(t){if(this.inHeader||this.inFooter)return q(!0);let i=t.nodeContext;this.inRow||(this.currentRowIndex<0?this.currentRowIndex=0:this.currentRowIndex++,this.currentColumnIndex=0,this.inRow=!0);let r=this.formattingContext.getRowByIndex(this.currentRowIndex).cells[this.currentColumnIndex];if(!r)return t.break=!0,q(!0);let s=i.copy().modify();s.after=!0,t.nodeContext=s;let o=Z("startTableCell"),u;if(this.hasBrokenCellAtSlot(r.anchorSlot.columnIndex)){let c=this.formattingContext.cellBreakPositions.shift();i.fragmentIndex=c.cellNodePosition.steps[0].fragmentIndex+1,u=q(c.breakChunkPosition)}else u=this.column.nextInTree(i,t.atUnforcedBreak).thenAsync(c=>{c.viewNode&&i.viewNode.removeChild(c.viewNode);let m=za(c,0);return q(new cr(m))});return u.then(c=>{this.layoutCell(r,i,c).then(()=>{this.afterNonInlineElementNode(t),this.currentColumnIndex++,o.finish(!0)})}),o.result()}startNonInlineBox(t){let i=Hg(t,bi(this.formattingContext),this.column);if(i)return i;let r=t.nodeContext,s=this.formattingContext.getRepetitiveElements(),o=r.display;return o==="table-header-group"&&s&&s.isHeaderSourceNode(r.sourceNode)?(this.inHeader=!0,q(!0)):o==="table-footer-group"&&s&&s.isFooterSourceNode(r.sourceNode)?(this.inFooter=!0,q(!0)):o==="table-row"?this.startTableRow(t):o==="table-cell"?this.startTableCell(t):q(!0)}endNonInlineBox(t){let i=t.nodeContext;if(i.display==="table-row"&&(this.inRow=!1,!this.inHeader&&!this.inFooter)){let r=i.copy().modify();r.after=!1;let s=new QN(this.currentRowIndex,r,this.formattingContext);this.column.breakPositions.push(s)}return q(!0)}afterNonInlineElementNode(t){let i=t.nodeContext,r=this.formattingContext.getRepetitiveElements(),s=i.display;if(s==="table-header-group"?r&&!r.allowInsertRepeatitiveElements&&r.isHeaderSourceNode(i.sourceNode)?(this.inHeader=!1,i.viewNode.parentNode.removeChild(i.viewNode)):j(i.viewNode,"display","table-row-group"):s==="table-footer-group"&&(r&&!r.allowInsertRepeatitiveElements&&r.isFooterSourceNode(i.sourceNode)?(this.inFooter=!1,i.viewNode.parentNode.removeChild(i.viewNode)):j(i.viewNode,"display","table-row-group")),s&&AT.ignoreList[s])i.viewNode.parentNode.removeChild(i.viewNode);else if(i.sourceNode===this.formattingContext.tableSourceNode)i.overflow=this.column.checkOverflowAndSaveEdge(i,null),this.resetColumn(),t.break=!0;else return super.afterNonInlineElementNode(t);return q(!0)}};f(Ug,"ignoreList",{"table-caption":!0,"table-column-group":!0,"table-column":!0});var rI=Ug,Ps=[];function nI(e){let t=Ps.findIndex(r=>r.root===e),i=Ps[t];return i?i.tableLayoutOption:null}function sI(e){let t=Ps.findIndex(i=>i.root===e);t>=0&&Ps.splice(t,1)}var Gg=class{layoutEntireTable(e,t){let i=bi(e.formattingContext),r=new iI(i,t);return new _d(r,t.layoutContext).iterate(e)}getColumnWidths(e,t,i,r){let s=e.ownerDocument,o=s.createElement("tr"),u=[];for(let m=0;m<t;m++){let p=s.createElement("td");o.appendChild(p),u.push(p)}e.parentNode.insertBefore(o,e.nextSibling);let c=u.map(m=>{let p=gs(r,m,i),y=i?p.height:p.width;return Math.ceil(y)});return e.parentNode.removeChild(o),c}getColGroupElements(e){let t=[],i=e.firstElementChild;for(;i;)i.localName==="colgroup"&&t.push(i),i=i.nextElementSibling;return t}normalizeAndGetColElements(e){let t=[];return e.forEach(i=>{let r=i.span;i.removeAttribute("span");let s=i.firstElementChild;for(;s;){if(s.localName==="col"){let o=s.span;for(s.removeAttribute("span"),r-=o;o-- >1;){let u=s.cloneNode(!0);i.insertBefore(u,s),t.push(u)}t.push(s)}s=s.nextElementSibling}for(;r-- >0;)s=i.ownerDocument.createElement("col"),i.appendChild(s),t.push(s)}),t}addMissingColElements(e,t,i,r){if(e.length<i){let s=r.ownerDocument.createElement("colgroup");t.push(s);for(let o=e.length;o<i;o++){let u=r.ownerDocument.createElement("col");s.appendChild(u),e.push(u)}}}normalizeColGroups(e,t,i){let r=e.vertical,s=e.lastRowViewNode;if(!s)return;e.lastRowViewNode=null;let o=s.ownerDocument.createDocumentFragment(),u=e.getColumnCount();if(!(u>0)){e.colGroups=o;return}let c=e.colWidths=this.getColumnWidths(s,u,r,i.clientLayout),m=this.getColGroupElements(t),p=this.normalizeAndGetColElements(m);this.addMissingColElements(p,m,u,t),p.forEach((y,S)=>{j(y,r?"height":"width",`${c[S]}px`)}),m.forEach(y=>{o.appendChild(y.cloneNode(!0))}),e.colGroups=o}doInitialLayout(e,t){let i=bi(e.formattingContext);i.vertical=e.vertical,i.initializeRepetitiveElements(e.vertical),e.sourceNode;let r=nI(e.sourceNode);sI(e.sourceNode);let s=Z("TableLayoutProcessor.doInitialLayout"),o=e.copy();return this.layoutEntireTable(e,t).then(u=>{let c=u.viewNode,m=gs(t.clientLayout,c,t.vertical),p=t.vertical?m.left:m.bottom;if(p+=(t.vertical?-1:1)*un(e,t.collectElementsOffset()).current,!t.isOverflown(p)&&(!r||!r.calculateBreakPositionsInside)){t.breakPositions.push(new dI(o)),s.finish(u);return}this.normalizeColGroups(i,c,t),i.updateCellSizes(t.clientLayout),s.finish(null)}),s.result()}addCaptions(e,t,i){let r=e.captions;r.forEach((s,o)=>{s&&(t.insertBefore(s.viewNode,i),s.side==="top"&&(r[o]=null))})}addColGroups(e,t,i){e.colGroups&&this.getColGroupElements(t).length===0&&(t.insertBefore(e.colGroups.cloneNode(!0),i),j(t,"table-layout","fixed"),j(t,e.vertical?"height":"width",`${e.tableWidth}px`))}removeColGroups(e,t){if(e.colGroups&&t){let i=this.getColGroupElements(t);i&&i.forEach(r=>{t.removeChild(r)})}}doLayout(e,t){let i=bi(e.formattingContext),r=i.getRootViewNode(e),s=r.firstChild;this.addCaptions(i,r,s),this.addColGroups(i,r,s);let o=new rI(i,t),u=new _d(o,t.layoutContext),c=Z("TableFormattingContext.doLayout");return u.iterate(e).thenFinish(c),c.result()}layout(e,t,i){let r=bi(e.formattingContext),s=r.getRootViewNode(e),o=Z("TableFormattingContext.layout"),u;return s?(i&&jg(e.parent,t),u=new oI(r,this).layout(e,t)):u=t.buildDeepElementView(e),u.then(c=>{o.finish(c),t.element.hasAttribute("data-vivliostyle-column-height-adjusted")&&(j(t.element,"width",`${t.width}px`),j(t.element,"height",`${t.height}px`),t.element.removeAttribute("data-vivliostyle-column-height-adjusted"))}),o.result()}createEdgeBreakPosition(e,t,i,r){return new ZN(e,t,i,r)}startNonInlineElementNode(e){return!1}afterNonInlineElementNode(e,t){return ru(e),!1}finishBreak(e,t,i,r){let s=bi(t.formattingContext);if(t.display==="table-row"){t.sourceNode;let o=s.findRowIndexBySourceNode(t.sourceNode);s.cellBreakPositions=[];let u;if(t.after?u=s.getRowSpanningCellsOverflowingTheRow(o):u=s.getCellsFallingOnRow(o),u.length){let c=Z("TableLayoutProcessor.finishBreak"),m=0;return c.loopWithFrame(p=>{if(m===u.length){p.breakLoop();return}let y=u[m++],S=s.getCellFragmentOfCell(y),v=S.findAcceptableBreakPosition().nodeContext,w=S.cellNodeContext,T=w.toNodePosition(),E=new cr(v.toNodePosition());s.cellBreakPositions.push({cellNodePosition:T,breakChunkPosition:E,cell:y});let P=w.viewNode;S.column.layoutContext.processFragmentedBlockEdge(S.cellNodeContext),o<y.rowIndex+y.rowSpan-1&&(P.rowSpan=o-y.rowIndex+1),S.empty?p.continueLoop():S.pseudoColumn.finishBreak(v,!1,!0).then(()=>{aI(S,s,v),p.continueLoop()})}).then(()=>{e.clearOverflownViewNodes(t,!1),e.layoutContext.processFragmentedBlockEdge(t),ru(t),s.finishFragment(),c.finish(!0)}),c.result()}}return ru(t),s.finishFragment(),Rd.finishBreak(e,t,i,r)}clearOverflownViewNodes(e,t,i,r){cn.prototype.clearOverflownViewNodes(e,t,i,r)}};function aI(e,t,i){let r=t.getRepetitiveElements();if(!r||!(r.isHeaderRegistered()||r.isFooterRegistered()))return;let s=t.vertical,o=e.column,u=e.pseudoColumn.getColumnElement(),c=e.cellNodeContext.viewNode,m=gs(o.clientLayout,c,s),p=o.getComputedPaddingBorder(c);if(s){let y=m.right-o.footnoteEdge-r.calculateOffset(i)-p.right;j(u,"max-width",`${y}px`)}else{let y=o.footnoteEdge-r.calculateOffset(i)-m.top-p.top;j(u,"max-height",`${y}px`)}}function ru(e){let t=e.display==="table-row"?e.viewNode.parentElement:e.display==="table"?e.viewNode.querySelector("tbody"):null;if(!t)return;let i;try{i=t.querySelectorAll(":scope>tr:has(>:empty):not(:has(>:not([rowspan]:not([rowspan='1']),:empty)))")}catch{return}if(i.length===0)return;let r=Array.from(i).reduce((S,v)=>{let w=v.getBoundingClientRect(),T=e.vertical?w.width:w.height;return S+T},0),s=i[i.length-1],o=Array.from(t.children).indexOf(s),u=Array.from(s.children).reduce((S,v)=>{let w=v.rowSpan;return w>1&&o+w<t.childElementCount?Math.max(S,w):S},0),c=u?t.children[o+u-1]:t.lastElementChild;if(c!=t.lastElementChild&&c.querySelector(":scope>*>div>div")){for(let S=c;S&&S!==t.lastElementChild;S=S.nextElementSibling)if(S.querySelector(":scope>[rowspan]:not([rowspan='1'])")){c=S;break}}let m=c.getBoundingClientRect(),p=e.vertical?m.width:m.height,y=r+p;j(c,e.vertical?"width":"height",`${y}px`)}var oI=class extends Ld{constructor(e,t){super(),this.tableFormattingContext=e,this.processor=t}resolveLayoutMode(e){let t=this.tableFormattingContext.getRepetitiveElements();return!t||!t.doneInitialLayout?new lI(this.tableFormattingContext,this.processor):(e.sourceNode===this.tableFormattingContext.tableSourceNode&&!e.after&&t&&t.preventSkippingHeader(),new cI(this.tableFormattingContext,this.processor))}clearNodes(e){super.clearNodes(e);let t=this.tableFormattingContext.getRootViewNode(e);this.processor.removeColGroups(this.tableFormattingContext,t)}restoreState(e,t){super.restoreState(e,t),this.tableFormattingContext.finishFragment()}},lI=class extends Dg{constructor(e,t){super(e),this.processor=t}doLayout(e,t){return this.processor.doInitialLayout(e,t)}},dI=class extends bs{constructor(e){super(e,null,e.overflow,0)}getMinBreakPenalty(){if(!this.isEdgeUpdated)throw new Error("EdgeBreakPosition.prototype.updateEdge not called");return(this.overflows?3:0)+(this.position.parent?this.position.parent.breakPenalty:0)}breakPositionChosen(e){e.fragmentLayoutConstraints.push(new uI(this.position.sourceNode))}},uI=class NT{constructor(t){this.tableRootNode=t,f(this,"flagmentLayoutConstraintType","EntireTable")}allowLayout(t,i,r){return t.overflow,!1}nextCandidate(t){return!0}postLayout(t,i,r,s){i.sourceNode,Ps.push({root:i.sourceNode,tableLayoutOption:{calculateBreakPositionsInside:!0}})}finishBreak(t,i){return q(!0)}equalsTo(t){return t instanceof NT&&t.tableRootNode===this.tableRootNode}getPriorityOfFinishBreak(){return 0}},cI=class extends Wg{constructor(e,t){super(e),this.processor=t}doLayout(e,t){let i=this.formattingContext.getRepetitiveElements();if(i&&!i.isAfterLastContent(e)){let r=new hI(e);t.fragmentLayoutConstraints.some(s=>r.equalsTo(s))||t.fragmentLayoutConstraints.unshift(r)}return this.processor.doLayout(e,t)}},hI=class IT extends iu{constructor(t){super(t),f(this,"flagmentLayoutConstraintType","TableRow"),f(this,"cellFragmentLayoutConstraints",[])}allowLayout(t,i,r){let s=this.getRepetitiveElements();return!s||r.pseudoParent||ln(this.nodeContext.viewNode)||!s.isEnableToUpdateState()?!0:!(i&&!t||t&&t.overflow)}nextCandidate(t){let i=bi(this.nodeContext.formattingContext);return this.collectCellFragmentLayoutConstraints(t,i).some(r=>r.constraints.some(s=>s.nextCandidate(t)))?!0:super.nextCandidate(t)}postLayout(t,i,r,s){let o=bi(this.nodeContext.formattingContext);if(this.cellFragmentLayoutConstraints=this.collectCellFragmentLayoutConstraints(i,o),this.cellFragmentLayoutConstraints.forEach(u=>{u.constraints.forEach(c=>{c.postLayout(t,u.breakPosition,r,s)})}),!t){let u=o.getRootViewNode(this.nodeContext);new Gg().removeColGroups(o,u),this.removeDummyRowNodes(r)}super.postLayout(t,i,r,s)}finishBreak(t,i){let r=bi(this.nodeContext.formattingContext),s=Z("finishBreak"),o=this.cellFragmentLayoutConstraints.reduce((c,m)=>c.concat(m.constraints.map(p=>({constraint:p,breakPosition:m.breakPosition}))),[]),u=0;return s.loop(()=>{if(u<o.length){let c=o[u++];return c.constraint.finishBreak(c.breakPosition,i).thenReturn(!0)}else return q(!1)}).then(()=>{s.finish(!0)}),s.result().thenAsync(()=>super.finishBreak(t,i))}removeDummyRowNodes(t){if(!(!t||t.display!=="table-row"||!t.viewNode))for(;t.viewNode.previousElementSibling;){let i=t.viewNode.previousElementSibling;i.parentNode&&i.parentNode.removeChild(i)}}collectCellFragmentLayoutConstraints(t,i){return this.getCellFragemnts(t,i).map(r=>({constraints:r.fragment.pseudoColumn.getColumn().fragmentLayoutConstraints,breakPosition:r.breakPosition}))}getCellFragemnts(t,i){let r=Number.MAX_VALUE;t&&t.display==="table-row"&&(t.sourceNode,r=i.findRowIndexBySourceNode(t.sourceNode)+1),r=Math.min(i.cellFragments.length,r);let s=[];for(let o=0;o<r;o++)i.cellFragments[o]&&i.cellFragments[o].forEach(u=>{u&&s.push({fragment:u,breakPosition:u.findAcceptableBreakPosition().nodeContext})});return s}getElementsOffsetsForTableCell(t){let i=bi(this.nodeContext.formattingContext),r=i.findCellFromColumn(t);return r?i.collectElementsOffsetOfUpperCells(r):i.collectElementsOffsetOfHighestColumn()}equalsTo(t){return t instanceof IT?bi(this.nodeContext.formattingContext)===bi(t.nodeContext.formattingContext):!1}},pI=new Gg;function mI(e,t,i,r,s,o){if(!t)return null;if(i===N.table){let u=e.parent;return new bn(u?u.formattingContext:null,e.sourceNode)}return null}function gI(e){return e instanceof bn?pI:null}De("RESOLVE_FORMATTING_CONTEXT",mI),De("RESOLVE_LAYOUT_PROCESSOR",gI);function $g(e){return e.reduce((t,i)=>t+i,0)/e.length}function fI(e){let t=$g(e);return $g(e.map(i=>{let r=i-t;return r*r}))}var bI=class{constructor(e,t){this.layoutResult=e,this.penalty=t}};function As(e){return e.vertical?e.width:e.height}function Ns(e,t){e.vertical?e.width=t:e.height=t}var Yg=class{constructor(e,t,i){this.layoutContainer=e,this.columnGenerator=t,this.regionPageFloatLayoutContext=i,f(this,"originalContainerBlockSize"),this.originalContainerBlockSize=As(e)}balanceColumns(e){let t=Z("ColumnBalancer#balanceColumns");this.preBalance(e),this.savePageFloatLayoutContexts(e),this.layoutContainer.clear();let i=[this.createTrialResult(e)];return t.loopWithFrame(r=>{if(!this.hasNextCandidate(i)){r.breakLoop();return}this.updateCondition(i),this.columnGenerator().then(s=>{if(this.savePageFloatLayoutContexts(s),this.layoutContainer.clear(),!s){r.breakLoop();return}i.push(this.createTrialResult(s)),r.continueLoop()})}).then(()=>{let r=i.reduce((s,o)=>o.penalty<s.penalty?o:s,i[0]);this.restoreContents(r.layoutResult),this.postBalance(),t.finish(r.layoutResult)}),t.result()}createTrialResult(e){let t=this.calculatePenalty(e);return new bI(e,t)}preBalance(e){}postBalance(){Ns(this.layoutContainer,this.originalContainerBlockSize)}savePageFloatLayoutContexts(e){let t=this.regionPageFloatLayoutContext.detachChildren();e&&(e.columnPageFloatLayoutContexts=t)}restoreContents(e){let t=this.layoutContainer.element;e.columns.forEach(i=>{t.appendChild(i.element)}),e.columnPageFloatLayoutContexts,this.regionPageFloatLayoutContext.attachChildren(e.columnPageFloatLayoutContexts)}},nu=1;function Xg(e){let t=e[e.length-1];if(t.penalty===0)return!1;let i=e[e.length-2];if(i&&t.penalty>=i.penalty)return!1;let r=t.layoutResult.columns,s=Math.max.apply(null,r.map(u=>u.computedBlockSize)),o=Math.max.apply(null,r.map(u=>u.getMaxBlockSizeOfPageFloats()));return s>o+nu}function Kg(e,t){var i;let r=e[e.length-1].layoutResult.columns,s=Math.max.apply(null,r.map(o=>isNaN(o.blockDistanceToBlockEndFloats)?o.computedBlockSize:o.computedBlockSize-o.blockDistanceToBlockEndFloats+nu))-nu;if(s<As(t)?Ns(t,s):Ns(t,As(t)-1),t.vertical){let o=parseFloat((i=t.element.style)==null?void 0:i.width);t.originX=o-t.width}}var yI=class extends Yg{constructor(e,t,i,r){super(i,e,t),this.columnCount=r,f(this,"originalPosition",null),f(this,"foundUpperBound",!1)}preBalance(e){let t=e.columns.reduce((i,r)=>i+r.computedBlockSize,0);Ns(this.layoutContainer,t/this.columnCount),this.originalPosition=e.position}checkPosition(e){return this.originalPosition?this.originalPosition.isSamePosition(e):e===null}calculatePenalty(e){if(!this.checkPosition(e.position))return 1/0;let t=e.columns;return Zg(t)?1/0:Math.max.apply(null,t.map(i=>i.computedBlockSize))}hasNextCandidate(e){if(e.length===1)return!0;if(this.foundUpperBound)return Xg(e);{let t=e[e.length-1];return this.checkPosition(t.layoutResult.position)&&!Zg(t.layoutResult.columns)?(this.foundUpperBound=!0,!0):As(this.layoutContainer)<this.originalContainerBlockSize}}updateCondition(e){if(this.foundUpperBound)Kg(e,this.layoutContainer);else{let t=Math.min(this.originalContainerBlockSize,As(this.layoutContainer)+this.originalContainerBlockSize*.1);Ns(this.layoutContainer,t)}}};function Zg(e){if(e.length<=1)return!1;let t=e[e.length-1].computedBlockSize,i=e.slice(0,e.length-1),r=6;return i.every(s=>t>s.computedBlockSize+r)}var vI=class extends Yg{constructor(e,t,i){super(i,e,t)}calculatePenalty(e){if(e.columns.every(i=>i.computedBlockSize===0))return 1/0;let t=e.columns.filter(i=>!i.pageBreakType).map(i=>i.computedBlockSize);return fI(t)}hasNextCandidate(e){return Xg(e)}updateCondition(e){Kg(e,this.layoutContainer)}};function SI(e,t,i,r,s,o,u){if(t===N.auto)return null;{let c=u.positions.length===0,m=o[o.length-1],p=!!(m&&m.pageBreakType);return c||p?new yI(i,r,s,e):t===N.balance_all?new vI(i,r,s):(N.balance,null)}}var su=class{constructor(e,t,i){f(this,"endStuckFixed"),f(this,"endFixed"),f(this,"endSlipped"),this.endStuckFixed=e,this.endFixed=t,this.endSlipped=i}},xI=class{constructor(){f(this,"map",[])}getMaxFixed(){return this.map.length==0?0:this.map[this.map.length-1].endFixed}getMaxSlipped(){return this.map.length==0?0:this.map[this.map.length-1].endSlipped}addStuckRange(e){if(this.map.length==0)this.map.push(new su(e,e,e));else{let t=this.map[this.map.length-1],i=t.endSlipped+e-t.endFixed;t.endFixed==t.endStuckFixed?(t.endFixed=e,t.endStuckFixed=e,t.endSlipped=i):this.map.push(new su(e,e,i))}}addSlippedRange(e){this.map.length==0?this.map.push(new su(e,0,0)):this.map[this.map.length-1].endFixed=e}slippedByFixed(e){let t=sr(this.map.length,r=>e<=this.map[r].endFixed),i=this.map[t];return i.endSlipped-Math.max(0,i.endStuckFixed-e)}fixedBySlipped(e){let t=sr(this.map.length,r=>e<=this.map[r].endSlipped),i=this.map[t];return i.endStuckFixed-(i.endSlipped-e)}},wI=class rp{constructor(t,i,r,s,o,u,c,m){if(this.context=t,this.style=i,this.offset=r,this.isRoot=s,this.flowChunk=o,this.atBlockStart=u,this.atFlowStart=c,this.isParentBoxDisplayed=m,f(this,"flowName"),f(this,"isBlockValue",null),f(this,"hasBoxValue",null),f(this,"styleValues",{}),f(this,"beforeBox",null),f(this,"afterBox",null),f(this,"breakBefore",null),this.flowName=o.flowName,this.hasBox()){let p=i._pseudos;if(p&&p.before){let y=new rp(t,p.before,r,!1,o,this.isBlock(),c,!0),S=y.styleValue("content");hr(S)&&(this.beforeBox=y,this.breakBefore=y.breakBefore)}}this.breakBefore=qt(this.getBreakValue("before"),this.breakBefore),this.atFlowStart&&jt(this.breakBefore)&&(o.breakBefore=qt(o.breakBefore,this.breakBefore))}buildAfterPseudoElementBox(t,i,r){if(this.hasBox()){let s=this.style._pseudos;if(s&&s.after){let o=new rp(this.context,s.after,t,!1,this.flowChunk,i,r,!0),u=o.styleValue("content");hr(u)&&(this.afterBox=o)}}}styleValue(t,i){if(!(t in this.styleValues)){let r=this.style[t];this.styleValues[t]=r?r.evaluate(this.context,t):i||null}return this.styleValues[t]}displayValue(){return this.styleValue("display",N.inline)}isBlock(){if(this.isBlockValue===null){let t=this.displayValue(),i=this.styleValue("position"),r=this.styleValue("float");this.isBlockValue=Xm(t,i,r,this.isRoot)}return this.isBlockValue}hasBox(){return this.hasBoxValue===null&&(this.hasBoxValue=this.isParentBoxDisplayed&&this.displayValue()!==N.none&&!Td(this.styleValue("position"))),this.hasBoxValue}getBreakValue(t){let i=null;if(this.isBlock()){let r=this.styleValue(`break-${t}`);r&&(i=r.toString())}return i}},CI=class{constructor(e){this.context=e,f(this,"stack",[]),f(this,"atBlockStart",!0),f(this,"atFlowStart",!0),f(this,"atStartStack",[])}empty(){return this.stack.length===0}lastBox(){return this.stack[this.stack.length-1]}lastFlowName(){let e=this.lastBox();return e?e.flowChunk.flowName:null}isCurrentBoxDisplayed(){return this.stack.every(e=>e.displayValue()!==N.none)}push(e,t,i,r){let s=this.lastBox();r&&s&&r.flowName!==s.flowName&&this.atStartStack.push({atBlockStart:this.atBlockStart,atFlowStart:this.atFlowStart});let o=r||s.flowChunk,u=this.atFlowStart||!!r,c=this.isCurrentBoxDisplayed(),m=new wI(this.context,e,t,i,o,u||this.atBlockStart,u,c);return this.stack.push(m),this.atBlockStart=m.hasBox()?!m.beforeBox&&m.isBlock():this.atBlockStart,this.atFlowStart=m.hasBox()?!m.beforeBox&&u:this.atFlowStart,m}encounteredTextNode(e){let t=this.lastBox();if((e.nodeType===Node.TEXT_NODE||e.nodeType===Node.CDATA_SECTION_NODE)&&(this.atBlockStart||this.atFlowStart)&&t.hasBox()){let i=t.styleValue("white-space",N.normal).toString(),r=Dm(i);r&&!Tt(e,r)&&(this.atBlockStart=!1,this.atFlowStart=!1)}}pop(e){let t=this.stack.pop();if(t.buildAfterPseudoElementBox(e,this.atBlockStart,this.atFlowStart),this.atFlowStart&&t.afterBox){let r=t.afterBox.getBreakValue("before");t.flowChunk.breakBefore=qt(t.flowChunk.breakBefore,r)}let i=this.lastBox();if(i)if(i.flowName===t.flowName)t.hasBox()&&(this.atBlockStart=this.atFlowStart=!1);else{let r=this.atStartStack.pop();this.atBlockStart=r.atBlockStart,this.atFlowStart=r.atFlowStart}return t}nearestBlockStartOffset(e){if(!e.atBlockStart)return e.offset;let t=this.stack.length-1,i=this.stack[t];for(i===e&&(t--,i=this.stack[t]);t>=0;){if(i.flowName!==e.flowName)return e.offset;if(!i.atBlockStart||i.isRoot)return i.offset;e=i,i=this.stack[--t]}throw new Error("No block start offset found!")}},Qg=class{constructor(e,t,i,r,s,o,u,c){this.xmldoc=e,this.scope=i,this.context=r,this.primaryFlows=s,this.validatorSet=o,this.counterListener=u,f(this,"root"),f(this,"cascadeHolder"),f(this,"last"),f(this,"rootStyle",{}),f(this,"styleMap",{}),f(this,"flows",{}),f(this,"flowChunks",[]),f(this,"flowListener",null),f(this,"flowToReach",null),f(this,"idToReach",null),f(this,"cascade"),f(this,"offsetMap"),f(this,"primary",!0),f(this,"primaryStack",[]),f(this,"rootBackgroundAssigned",!1),f(this,"rootLayoutAssigned",!1),f(this,"lastOffset"),f(this,"breakBeforeValues",{}),f(this,"boxStack"),f(this,"bodyReached",!0),this.root=e.root,this.cascadeHolder=t,this.last=this.root,this.cascade=t.createInstance(r,u,c,e.lang),this.offsetMap=new xI;let m=e.getElementOffset(this.root);this.lastOffset=m,this.boxStack=new CI(r),this.offsetMap.addStuckRange(m);let p=this.getAttrStyle(this.root);switch(this.cascade.pushElement(this,this.root,p,m),this.postprocessTopStyle(p,!1),this.root.namespaceURI){case"http://www.w3.org/1999/xhtml":this.bodyReached=!1;break}this.primaryStack.push(!0),this.styleMap={},this.styleMap[`e${m}`]=p,this.lastOffset++,this.replayFlowElementsFromOffset(-1)}hasProp(e,t,i){let r=e[i];return r&&r.evaluate(this.context)!==t[i]}transferPropsToRoot(e,t){for(let i in t){let r=e[i];if(r)this.rootStyle[i]=r,delete e[i];else{let s=t[i];s&&(this.rootStyle[i]=new xe(s,wm))}}}postprocessTopStyle(e,t){var i;if(t)for(let r of["writing-mode","direction"])e[r]&&!(t&&this.rootStyle[r])&&(this.rootStyle[r]=e[r]);else for(let r in e)Ss(r)&&(this.rootStyle[r]=e[r]);if(!this.rootBackgroundAssigned){let r=this.hasProp(e,this.validatorSet.backgroundProps,"background-color")?e["background-color"].evaluate(this.context):null,s=this.hasProp(e,this.validatorSet.backgroundProps,"background-image")?e["background-image"].evaluate(this.context):null;(r&&!Ee(r)||s&&!Ee(s))&&(this.transferPropsToRoot(e,this.validatorSet.backgroundProps),this.rootBackgroundAssigned=!0)}if(!this.rootLayoutAssigned){for(let r=0;r<Jg.length;r++)if(this.hasProp(e,this.validatorSet.layoutProps,Jg[r])){this.transferPropsToRoot(e,this.validatorSet.layoutProps),this.rootLayoutAssigned=!0;break}}if(!t){let r=e["font-size"],s=!0;if(r&&!Ee(r.value)){let c=r.evaluate(this.context);if(c instanceof U){let m=c.num;switch(c.unit){case"em":case"rem":m*=this.context.initialFontSize;break;case"ex":m*=this.context.initialFontSize*Ue.ex/Ue.em;break;case"%":m*=this.context.initialFontSize/100;break;case"lh":case"rlh":m*=this.context.initialFontSize*Ue.lh/Ue.em;break;default:{let p=Ue[c.unit];p&&(m*=p),s=!1}}this.context.rootFontSize=m,this.context.isRelativeRootFontSize=s}}let o=(i=this.context.rootFontSize)!=null?i:this.context.initialFontSize,u=e["line-height"];if(u&&!Ee(u.value)){let c=u.evaluate(this.context);if(c instanceof or)this.context.rootLineHeight=c.num*o;else if(c instanceof U){let m=c.num;switch(c.unit){case"em":case"rem":m*=o;break;case"ex":m*=o*Ue.ex/Ue.em;break;case"%":m*=o/100;break;case"lh":case"rlh":m*=this.context.initialFontSize*Ue.lh/Ue.em;break;default:{let p=Ue[c.unit];p&&(m*=p)}}this.context.rootLineHeight=m}}else this.context.rootLineHeight=this.context.fontSize()*Ue.lh/Ue.em}}getTopContainerStyle(){let e=0;for(;!this.bodyReached&&(e+=5e3,this.styleUntil(e,0)!=Number.POSITIVE_INFINITY););return this.rootStyle}getAttrStyle(e){if(e.style instanceof CSSStyleDeclaration){let t=e.getAttribute("style");if(t)return yN(this.scope,this.validatorSet,this.xmldoc.url,t)}return{}}getReachedOffset(){return this.lastOffset}replayFlowElementsFromOffset(e){if(e>=this.lastOffset)return;let t=this.context,i=this.xmldoc.getElementOffset(this.root);if(e<i){let o=this.getStyle(this.root,!1),u=Nt(o,"flow-into"),c=u?u.evaluate(t,"flow-into").toString():"body",m=this.encounteredFlowElement(c,o,this.root,i);this.boxStack.empty()&&this.boxStack.push(o,i,!0,m)}let r=this.xmldoc.getNodeByOffset(e),s=this.xmldoc.getNodeOffset(r,0,!1);if(!(s>=this.lastOffset))for(;;){if(r.nodeType!=1)s+=r.textContent.length;else{let u=r,c=this.getStyle(u,!1),m=c["flow-into"];if(m){let p=m.evaluate(t,"flow-into").toString();this.encounteredFlowElement(p,c,u,s)}s++}if(s>=this.lastOffset)break;let o=r.firstChild;if(o==null){for(;o=r.nextSibling,!o;)if(r=r.parentNode,r===this.root)return}r=o}}resetFlowChunkStream(e){this.flowListener=e;for(let t=0;t<this.flowChunks.length;t++)this.flowListener.encounteredFlowChunk(this.flowChunks[t],this.flows[this.flowChunks[t].flowName])}styleUntilFlowIsReached(e){this.flowToReach=e;let t=0;for(;!(this.flowToReach==null||(t+=5e3,this.styleUntil(t,0)==Number.POSITIVE_INFINITY)););}styleUntilIdIsReached(e){if(!e)return;this.idToReach=e;let t=0;for(;!(!this.idToReach||(t+=5e3,this.styleUntil(t,0)===Number.POSITIVE_INFINITY)););this.idToReach=null}encounteredFlowElement(e,t,i,r){let s=0,o=Number.POSITIVE_INFINITY,u=!1,c=!1,m=!1,p=t["flow-options"];if(p){let E=I1(p.evaluate(this.context,"flow-options"));u=!!E.exclusive,c=!!E.static,m=!!E.last}let y=t["flow-linger"];y&&(o=nm(y.evaluate(this.context,"flow-linger"),Number.POSITIVE_INFINITY));let S=t["flow-priority"];S&&(s=nm(S.evaluate(this.context,"flow-priority"),0));let v=this.breakBeforeValues[r]||null,w=this.flows[e];if(!w){let E=this.boxStack.lastFlowName();w=this.flows[e]=new UP(e,E)}let T=new GP(e,i,r,s,o,u,c,m,v);return this.flowChunks.push(T),this.flowToReach==e&&(this.flowToReach=null),this.flowListener&&this.flowListener.encounteredFlowChunk(T,w),T}registerForcedBreakOffset(e,t,i){if(jt(e)){let s=this.flows[i].forcedBreakOffsets;(s.length===0||s[s.length-1]<t)&&s.push(t)}let r=this.breakBeforeValues[t];this.breakBeforeValues[t]=qt(r,e)}styleUntil(e,t){let i=-1,r;if(e<=this.lastOffset&&(r=this.offsetMap.slippedByFixed(e),i=r+t,i<this.offsetMap.getMaxSlipped()))return this.offsetMap.fixedBySlipped(i);if(this.last==null)return Number.POSITIVE_INFINITY;let s=this.context;for(;;){let o=this.last.firstChild;if(o==null)for(;;){if(this.last.nodeType==1){this.cascade.popElement(this.last),this.primary=this.primaryStack.pop();let u=this.boxStack.pop(this.lastOffset),c=null;if(u.afterBox){let m=u.afterBox.getBreakValue("before");this.registerForcedBreakOffset(m,u.afterBox.atBlockStart?this.boxStack.nearestBlockStartOffset(u):u.afterBox.offset,u.flowName),c=u.afterBox.getBreakValue("after")}c=qt(c,u.getBreakValue("after")),this.registerForcedBreakOffset(c,this.lastOffset,u.flowName)}if(o=this.last.nextSibling,o)break;if(this.last=this.last.parentNode,this.last===this.root)return this.last=null,e<this.lastOffset&&(i<0&&(r=this.offsetMap.slippedByFixed(e),i=r+t),i<=this.offsetMap.getMaxSlipped())?this.offsetMap.fixedBySlipped(i):Number.POSITIVE_INFINITY}if(this.last=o,this.last.nodeType!=1)this.lastOffset+=this.last.textContent.length,this.boxStack.encounteredTextNode(this.last),this.primary?this.offsetMap.addStuckRange(this.lastOffset):this.offsetMap.addSlippedRange(this.lastOffset);else{let u=this.last,c=this.getAttrStyle(u);this.primaryStack.push(this.primary),this.cascade.pushElement(this,u,c,this.lastOffset);let m=u.getAttribute("id")||u.getAttributeNS("http://www.w3.org/XML/1998/namespace","id");m&&m===this.idToReach&&(this.idToReach=null),!this.bodyReached&&u.localName=="body"&&u.parentNode==this.root&&(this.postprocessTopStyle(c,!0),this.bodyReached=!0);let p,y=c["flow-into"];if(y){let v=y.evaluate(s,"flow-into").toString(),w=this.encounteredFlowElement(v,c,u,this.lastOffset);this.primary=!!this.primaryFlows[v],p=this.boxStack.push(c,this.lastOffset,u===this.root,w)}else p=this.boxStack.push(c,this.lastOffset,u===this.root),u===this.xmldoc.body&&(p.breakBefore=qt(p.flowChunk.breakBefore,p.breakBefore));let S=this.boxStack.nearestBlockStartOffset(p);if(S===0){let v=c.page,w=v&&!Ee(v.value)&&v.value.toString();w&&w.toLowerCase()!=="auto"&&(this.cascade.firstPageType=w)}if(this.registerForcedBreakOffset(p.breakBefore,S,p.flowName),p.beforeBox){let v=p.beforeBox.getBreakValue("after");this.registerForcedBreakOffset(v,p.beforeBox.atBlockStart?S:p.offset,p.flowName)}if(this.primary&&p.displayValue()===N.none&&(this.primary=!1),this.styleMap[`e${this.lastOffset}`]=c,this.lastOffset++,this.primary?this.offsetMap.addStuckRange(this.lastOffset):this.offsetMap.addSlippedRange(this.lastOffset),this.bodyReached&&S===0)continue;if(e<this.lastOffset&&(i<0&&(r=this.offsetMap.slippedByFixed(e),i=r+t),i<=this.offsetMap.getMaxSlipped()))return this.offsetMap.fixedBySlipped(i)}}}getStyle(e,t){let i=this.xmldoc.getElementOffset(e),r=`e${i}`;return t&&(i=this.xmldoc.getNodeOffset(e,0,!0)),this.lastOffset<=i&&this.styleUntil(i,0),this.styleMap[r]}processContent(e,t,i){}},Jg=["column-count","column-width","column-fill"],yn=class{constructor(e){this.validator=e,f(this,"success",null),f(this,"failure",null),f(this,"code",0)}isSpecial(){return this.code!=0}markAsStartGroup(){this.code=-1}isStartGroup(){return this.code==-1}markAsEndGroup(){this.code=-2}isEndGroup(){return this.code==-2}markAsStartAlternate(e){this.code=2*e+1}isStartAlternate(){return this.code>0&&this.code%2!=0}markAsEndAlternate(e){this.code=2*e+2}isEndAlternate(){return this.code>0&&this.code%2==0}getAlternate(){return Math.floor((this.code-1)/2)}},_r=class{constructor(e,t){this.where=e,this.success=t,f(this,"what",-1)}},Is=class OT{constructor(){f(this,"nodes",[]),f(this,"connections",[]),f(this,"match",[]),f(this,"nomatch",[]),f(this,"error",[]),f(this,"emptyHead",!0)}connect(t,i){for(let r=0;r<t.length;r++)this.connections[t[r]].what=i;t.splice(0,t.length)}clone(){let t=new OT;for(let i=0;i<this.nodes.length;i++){let r=this.nodes[i],s=new yn(r.validator);s.code=r.code,t.nodes.push(s)}for(let i=0;i<this.connections.length;i++){let r=this.connections[i],s=new _r(r.where,r.success);s.what=r.what,t.connections.push(s)}return t.match.push(...this.match),t.nomatch.push(...this.nomatch),t.error.push(...this.error),t}addSpecialToArr(t,i,r){let s=this.nodes.length,o=new yn(lf);r>=0?i?o.markAsStartAlternate(r):o.markAsEndAlternate(r):i?o.markAsStartGroup():o.markAsEndGroup(),this.nodes.push(o),this.connect(t,s);let u=new _r(s,!0),c=new _r(s,!1);t.push(this.connections.length),this.connections.push(c),t.push(this.connections.length),this.connections.push(u)}endSpecialGroup(){let t=[this.match,this.nomatch,this.error];for(let i=0;i<t.length;i++)this.addSpecialToArr(t[i],!1,-1)}startSpecialGroup(){if(this.nodes.length)throw new Error("invalid call");this.addSpecialToArr(this.match,!0,-1)}endClause(t){this.addSpecialToArr(this.match,!1,t)}startClause(t){if(this.nodes.length)throw new Error("invalid call");let i=new yn(lf);i.markAsStartAlternate(t),this.nodes.push(i);let r=new _r(0,!0),s=new _r(0,!1);this.nomatch.push(this.connections.length),this.connections.push(s),this.match.push(this.connections.length),this.connections.push(r)}addPrimitive(t){let i=this.nodes.length;this.nodes.push(new yn(t));let r=new _r(i,!0),s=new _r(i,!1);this.connect(this.match,i),this.emptyHead?(this.nomatch.push(this.connections.length),this.emptyHead=!1):this.error.push(this.connections.length),this.connections.push(s),this.match.push(this.connections.length),this.connections.push(r)}isSimple(){return this.nodes.length==1&&!this.nodes[0].isSpecial()}isPrimitive(){return this.isSimple()&&this.nodes[0].validator instanceof ct}addGroup(t,i){if(t.nodes.length==0)return;let r=this.nodes.length;if(i==4&&r==1&&t.isPrimitive()&&this.isPrimitive()){this.nodes[0].validator=this.nodes[0].validator.combine(t.nodes[0].validator);return}for(let o=0;o<t.nodes.length;o++)this.nodes.push(t.nodes[o]);i==4?(this.emptyHead=!0,this.connect(this.nomatch,r)):this.connect(this.match,r);let s=this.connections.length;for(let o=0;o<t.connections.length;o++){let u=t.connections[o];u.where+=r,u.what>=0&&(u.what+=r),this.connections.push(u)}for(let o=0;o<t.match.length;o++)this.match.push(t.match[o]+s);if(i==3&&this.connect(this.match,r),i==2||i==3)for(let o=0;o<t.nomatch.length;o++)this.match.push(t.nomatch[o]+s);else if(this.emptyHead){for(let o=0;o<t.nomatch.length;o++)this.nomatch.push(t.nomatch[o]+s);this.emptyHead=t.emptyHead}else for(let o=0;o<t.nomatch.length;o++)this.error.push(t.nomatch[o]+s);for(let o=0;o<t.error.length;o++)this.error.push(t.error[o]+s);t.nodes=null,t.connections=null}finish(t,i){let r=this.nodes.length;this.nodes.push(t),this.nodes.push(i),this.connect(this.match,r),this.connect(this.nomatch,r+1),this.connect(this.error,r+1);for(let s of this.connections)s.success?this.nodes[s.where].success=this.nodes[s.what]:this.nodes[s.where].failure=this.nodes[s.what];for(let s=0;s<r;s++)if(this.nodes[s].failure==null||this.nodes[s].success==null)throw new Error("Invalid validator state");return this.nodes[0]}},kI=1,ef=2,tf=4,Br=8,to=16,au=32,io=64,rf=128,Os=256,Rs=512,ou=1024,nf=2048,sf=4096,af=8192,of=class extends ji{constructor(){super()}validateForShorthand(e,t){let i=e[t].visit(this);return i?[i]:null}},ct=class RT extends of{constructor(t,i,r){super(),this.allowed=t,this.idents=i,this.units=r}visitEmpty(t){return this.allowed&kI?t:null}visitSlash(t){return this.allowed&nf?t:null}visitStr(t){return this.allowed&ef?t:null}visitIdent(t){return this.idents[t.name.toLowerCase()]||(this.allowed&tf||this.allowed&io&&CSS.supports("color",t.name)?t:null)}visitNumeric(t){return t.num==0&&!(this.allowed&Rs)?t.unit=="%"&&this.allowed&ou?t:null:t.num<0&&!(this.allowed&Os)?null:this.units[t.unit]?t:null}visitNum(t){return t.num==0?this.allowed&Rs?t:null:t.num<=0&&!(this.allowed&Os)?null:this.allowed&to?t:null}visitInt(t){return t.num==0?this.allowed&Rs?t:null:t.num<=0&&!(this.allowed&Os)?null:this.allowed&(au|to)?t:this.idents[`${t.num}`]||null}visitHexColor(t){return this.allowed&io&&/^([0-9A-F]{3,4}|([0-9A-F]{2}){3,4})$/i.test(t.hex)?t:null}visitURL(t){return this.allowed&rf?t:null}visitURange(t){return this.allowed&sf?t:null}visitSpaceList(t){return null}visitCommaList(t){return null}visitFunc(t){return this.allowed&io&&CSS.supports("color",t.toString())||this.allowed&af&&CSS.supports("background-image",t.toString())||t.name==="calc"&&this.allowed&(Br|to|au|Os|Rs|ou)?t:null}visitExpr(t){return this.allowed&2046?t:null}combine(t){let i={},r={};for(let s in this.idents)i[s]=this.idents[s];for(let s in t.idents)i[s]=t.idents[s];for(let s in this.units)r[s]=this.units[s];for(let s in t.units)r[s]=t.units[s];return new RT(this.allowed|t.allowed,i,r)}},Re={},lf=new ct(0,Re,Re),lu=class extends of{constructor(e){super(),f(this,"successTerminal"),f(this,"failureTerminal"),f(this,"first"),this.successTerminal=new yn(null),this.failureTerminal=new yn(null),this.first=e.finish(this.successTerminal,this.failureTerminal)}validateList(e,t,i){let r=t?[]:e,s=this.first,o=i,u=null,c=null;for(;s!==this.successTerminal&&s!==this.failureTerminal;){if(o>=e.length){s=s.failure;continue}let m=e[o],p=m;if(s.isSpecial()){let y=!0;s.isStartGroup()?(u?u.push(c):u=[c],c=[]):s.isEndGroup()?u.length>0?c=u.pop():c=null:s.isEndAlternate()?c[s.getAlternate()]="taken":y=c[s.getAlternate()]==null,s=y?s.success:s.failure}else{if(o==0&&!t&&s.validator instanceof Ls&&this instanceof Ls){if(p=new Ke(e).visit(s.validator),p){o=e.length,s=s.success;continue}}else if(o==0&&!t&&s.validator instanceof du&&this instanceof Ls){if(p=new Mt(e).visit(s.validator),p){o=e.length,s=s.success;continue}}else p=m.visit(s.validator);if(!p){s=s.failure;continue}if(p!==m&&e===r){r=[];for(let y=0;y<o;y++)r[y]=e[y]}e!==r&&(r[o-i]=p),o++,s=s.success}}return s===this.successTerminal&&(t?r.length>0:o==e.length)?r:null}validateSingle(e){let t=null,i=this.first;for(;i!==this.successTerminal&&i!==this.failureTerminal;){if(!e){i=i.failure;continue}if(i.isSpecial()){i=i.success;continue}if(t=e.visit(i.validator),!t){i=i.failure;continue}e=null,i=i.success}return i===this.successTerminal?t:null}visitEmpty(e){return this.validateSingle(e)}visitSlash(e){return this.validateSingle(e)}visitStr(e){return this.validateSingle(e)}visitIdent(e){return this.validateSingle(e)}visitNumeric(e){return this.validateSingle(e)}visitNum(e){return this.validateSingle(e)}visitInt(e){return this.validateSingle(e)}visitHexColor(e){return this.validateSingle(e)}visitURL(e){return this.validateSingle(e)}visitURange(e){return this.validateSingle(e)}visitSpaceList(e){return null}visitCommaList(e){return null}visitFunc(e){return this.validateSingle(e)}visitExpr(e){return null}},Ls=class extends lu{constructor(e){super(e)}visitSpaceList(e){let t=this.validateList(e.values,!1,0);return t===e.values?e:t?new Ke(t):null}visitCommaList(e){let t=this.first,i=!1;for(;t;){if(t.validator instanceof du){i=!0;break}t=t.failure}if(i){let r=this.validateList(e.values,!1,0);return r===e.values?e:r?new Mt(r):null}return null}validateForShorthand(e,t){return this.validateList(e,!0,t)}},du=class extends lu{constructor(e){super(e)}visitSpaceList(e){return this.validateSingle(e)}visitCommaList(e){let t=this.validateList(e.values,!1,0);return t===e.values?e:t?new Mt(t):null}validateForShorthand(e,t){let i=this.first,r;for(;i!==this.failureTerminal;){if(r=i.validator.validateForShorthand(e,t),r)return r;i=i.failure}return null}},EI=class extends lu{constructor(e,t){super(t),this.name=e}validateSingle(e){return null}visitFunc(e){if(e.name.toLowerCase()!=this.name)return null;let t=this.validateList(e.values,!1,0);return t===e.values?e:t?new Kr(e.name,t):null}},df=class{tryParse(e,t,i){return t}success(e,t){}},uf=class extends df{constructor(e,t){super(),this.name=t,f(this,"validator"),this.validator=e.validators[this.name]}tryParse(e,t,i){if(i.values[this.name])return t;let r=this.validator.validateForShorthand(e,t);if(r){let s=r.length,o=s>1?new Ke(r):r[0];return this.success(o,i),t+s}return t}success(e,t){t.values[this.name]=e}},TI=class extends uf{constructor(e,t){super(e,t[0]),this.names=t}success(e,t){for(let i=0;i<this.names.length;i++)t.values[this.names[i]]=e}},PI=class extends df{constructor(e,t){super(),this.nodes=e,this.slash=t}tryParse(e,t,i){let r=t;if(this.slash)if(e[t]==Ta){if(++t==e.length)return r}else return r;let s=this.nodes[0].tryParse(e,t,i);if(s==t)return r;t=s;for(let o=1;o<this.nodes.length&&t<e.length&&(s=this.nodes[o].tryParse(e,t,i),s!=t);o++)t=s;return t}},uu=class extends ji{constructor(){super(...arguments),f(this,"syntax",null),f(this,"propList",null),f(this,"error",!1),f(this,"values",{}),f(this,"validatorSet",null)}setOwner(e){this.validatorSet=e}syntaxNodeForProperty(e){return new uf(this.validatorSet,e)}clone(){let e=new this.constructor;return e.syntax=this.syntax,e.propList=this.propList,e.validatorSet=this.validatorSet,e}init(e,t){this.syntax=e,this.propList=t}finish(e,t){var i,r;if(!this.error){for(let s of this.propList)t.simpleProperty(s,(r=(i=this.values[s])!=null?i:this.validatorSet.defaultValues[s])!=null?r:N.initial,e);return!0}return!1}propagateDefaultingValue(e,t,i){for(let r of this.propList)i.simpleProperty(r,e,t)}validateList(e){return this.error=!0,0}validateSingle(e){return this.validateList([e]),null}visitEmpty(e){return this.validateSingle(e)}visitStr(e){return this.validateSingle(e)}visitIdent(e){return this.validateSingle(e)}visitNumeric(e){return this.validateSingle(e)}visitNum(e){return this.validateSingle(e)}visitInt(e){return this.validateSingle(e)}visitHexColor(e){return this.validateSingle(e)}visitURL(e){return this.validateSingle(e)}visitSpaceList(e){return this.validateList(e.values),null}visitCommaList(e){return this.error=!0,null}visitFunc(e){return this.validateSingle(e)}visitExpr(e){return this.validateSingle(e)}},vn=class extends uu{constructor(){super()}validateList(e){let t=0,i=0;for(;t<e.length;){let r=this.syntax[i].tryParse(e,t,this);if(r>t){t=r,i=0;continue}if(++i==this.syntax.length){this.error=!0;break}}return t}},cf=class extends uu{constructor(){super()}validateList(e){if(e.length>this.syntax.length||e.length==0)return this.error=!0,0;for(let t=0;t<this.syntax.length;t++){let i=t;for(;i>=e.length;)i=i==1?0:i-2;if(this.syntax[t].tryParse(e,i,this)!=i+1)return this.error=!0,0}return e.length}createSyntaxNode(){return new TI(this.validatorSet,this.propList)}},AI=class extends uu{constructor(){super()}validateList(e){let t=e.length;for(let i=0;i<e.length;i++)if(e[i]===Ta){t=i;break}if(t>this.syntax.length||e.length==0)return this.error=!0,0;for(let i=0;i<this.syntax.length;i++){let r=i;for(;r>=t;)r=r==1?0:r-2;let s;if(t+1<e.length)for(s=t+i+1;s>=e.length;)s=s-(s==t+2?1:2);else s=r;let o=[e[r],e[s]];if(this.syntax[i].tryParse(o,0,this)!=2)return this.error=!0,0}return e.length}},NI=class extends vn{constructor(){super()}mergeIn(e,t){var i,r;for(let s of this.propList){let o=(r=(i=t[s])!=null?i:this.validatorSet.defaultValues[s])!=null?r:N.initial,u=e[s];u||(u=[],e[s]=u),u.push(o)}}visitCommaList(e){let t={};for(let i=0;i<e.values.length;i++)if(this.values={},e.values[i]instanceof Mt?this.error=!0:(e.values[i].visit(this),this.mergeIn(t,this.values),this.values["background-color"]&&i!=e.values.length-1&&(this.error=!0)),this.error)return null;this.values={};for(let i in t)i=="background-color"?this.values[i]=t[i].pop():this.values[i]=new Mt(t[i]);return null}},II=class extends vn{constructor(){super()}init(e,t){super.init(e,t),this.propList.push("font-family","line-height","font-size","font-stretch","font-variant-ligatures","font-variant-caps","font-variant-numeric","font-variant-east-asian")}validateList(e){let t=super.validateList(e),i=this.values["font-variant_css2"];i&&(delete this.values["font-variant_css2"],this.values["font-variant-caps"]=i);let r=this.values["font-stretch_css3"];if(r&&(delete this.values["font-stretch_css3"],this.values["font-stretch"]=r),t+2>e.length)return this.error=!0,t;this.error=!1;let s=this.validatorSet.validators;if(!e[t].visit(s["font-size"]))return this.error=!0,t;if(this.values["font-size"]=e[t++],e[t]===Ta){if(t++,t+2>e.length)return this.error=!0,t;if(!e[t].visit(s["line-height"]))return this.error=!0,t;this.values["line-height"]=e[t++]}let o=t==e.length-1?e[t]:new Ke(e.slice(t,e.length));return o.visit(s["font-family"])?(this.values["font-family"]=o,e.length):(this.error=!0,t)}visitCommaList(e){if(e.values[0].visit(this),this.error)return null;let t=[this.values["font-family"]];for(let r=1;r<e.values.length;r++)t.push(e.values[r]);let i=new Mt(t);return i.visit(this.validatorSet.validators["font-family"])?this.values["font-family"]=i:this.error=!0,null}visitIdent(e){let t=this.validatorSet.systemFonts[e.name];if(t)for(let i in t)this.values[i]=t[i];else this.error=!0;return null}},OI=class extends vn{validateList(e){if(e.length===1&&e[0]instanceof Jt)switch(e[0].name.toLowerCase()){case"normal":e=[this.validatorSet.defaultValues["text-autospace"],this.validatorSet.defaultValues["text-spacing-trim"]];break;case"auto":e=[N.auto,N.auto];break;case"none":e=[J("no-autospace"),J("space-all")];break}return super.validateList(e)}},RI=["unicode-bidi","direction","margin-block-start","margin-block-end","margin-inline-start","margin-inline-end","padding-block-start","padding-block-end","padding-inline-start","padding-inline-end","border-block-start-color","border-block-end-color","border-inline-start-color","border-inline-end-color","border-block-start-style","border-block-end-style","border-inline-start-style","border-inline-end-style","border-block-start-width","border-block-end-width","border-inline-start-width","border-inline-end-width","block-start","block-end","inline-start","inline-end","block-size","inline-size","max-block-size","max-inline-size","min-block-size","min-inline-size","behavior","bleed","conflicting-partitions","crop-offset","crop-marks-line-color","enabled","flow-consume","flow-from","flow-into","flow-linger","flow-options","flow-priority","font-display","font-size-adjust","font-stretch_css3","font-variant_css2","glyph-orientation-vertical","marks","min-page-height","min-page-width","repeat-on-break","required","required-partitions","ruby-align","shape-inside","snap-height","snap-width","template","text-decoration-skip","text-justify","text-zoom","unicode-range","utilization","wrap-flow"],LI=class extends vn{constructor(){super()}init(e,t){super.init(e,t);for(let i in this.validatorSet.validators)RI.includes(i)||this.propList.push(i)}validateList(e){return this.error=!0,0}},hf={SIMPLE:vn,INSETS:cf,INSETS_SLASH:AI,COMMA:NI,FONT:II,TEXT_SPACING:OI,ALL:LI},_I=class{constructor(){f(this,"validators",{}),f(this,"prefixes",{}),f(this,"defaultValues",{}),f(this,"namedValidators",{}),f(this,"systemFonts",{}),f(this,"shorthands",{}),f(this,"layoutProps",{}),f(this,"backgroundProps",{})}addReplacement(e,t){let i;if(t.type==3)i=new U(t.num,t.text);else if(t.type==7)i=new Hp(t.text);else if(t.type==1)i=J(t.text);else throw new Error("unexpected replacement");if(e.isPrimitive()){let r=e.nodes[0].validator.idents;for(let s in r)r[s]=i;return e}throw new Error("unexpected replacement")}newGroup(e,t){let i=new Is;if(e=="||"){for(let s=0;s<t.length;s++){let o=new Is;o.startClause(s),o.addGroup(t[s],1),o.endClause(s),i.addGroup(o,s==0?1:4)}let r=new Is;return r.startSpecialGroup(),r.addGroup(i,3),r.endSpecialGroup(),r}else{let r;switch(e){case" ":r=1;break;case"|":case"||":r=4;break;default:throw new Error("unexpected op")}for(let s=0;s<t.length;s++)i.addGroup(t[s],s==0?1:r);return i}}addCounts(e,t,i){let r=new Is;for(let s=0;s<t;s++)r.addGroup(e.clone(),1);if(i==Number.POSITIVE_INFINITY)r.addGroup(e,3);else for(let s=t;s<i;s++)r.addGroup(e.clone(),2);return r}primitive(e){let t=new Is;return t.addPrimitive(e),t}newFunc(e,t){let i;switch(e){case"COMMA":i=new du(t);break;case"SPACE":i=new Ls(t);break;default:i=new EI(e.toLowerCase(),t);break}return this.primitive(i)}initBuiltInValidators(){this.namedValidators.COLOR=this.primitive(new ct(io,Re,Re)),this.namedValidators.IMAGE_FUNCTION=this.primitive(new ct(af,Re,Re)),this.namedValidators.POS_INT=this.primitive(new ct(au,Re,Re)),this.namedValidators.POS_NUM=this.primitive(new ct(to,Re,Re)),this.namedValidators.POS_PERCENTAGE=this.primitive(new ct(Br,Re,{"%":he})),this.namedValidators.NEGATIVE=this.primitive(new ct(Os,Re,Re)),this.namedValidators.ZERO=this.primitive(new ct(Rs,Re,Re)),this.namedValidators.ZERO_PERCENTAGE=this.primitive(new ct(ou,Re,Re)),this.namedValidators.POS_LENGTH=this.primitive(new ct(Br,Re,{em:he,ex:he,ch:he,rem:he,lh:he,rlh:he,vw:he,vh:he,vi:he,vb:he,vmin:he,vmax:he,pvw:he,pvh:he,pvi:he,pvb:he,pvmin:he,pvmax:he,cm:he,mm:he,in:he,px:he,pt:he,pc:he,q:he})),this.namedValidators.POS_ANGLE=this.primitive(new ct(Br,Re,{deg:he,grad:he,rad:he,turn:he})),this.namedValidators.POS_TIME=this.primitive(new ct(Br,Re,{s:he,ms:he})),this.namedValidators.FREQUENCY=this.primitive(new ct(Br,Re,{Hz:he,kHz:he})),this.namedValidators.RESOLUTION=this.primitive(new ct(Br,Re,{dpi:he,dpcm:he,dppx:he})),this.namedValidators.URI=this.primitive(new ct(rf,Re,Re)),this.namedValidators.URANGE=this.primitive(new ct(sf,Re,Re)),this.namedValidators.IDENT=this.primitive(new ct(tf,Re,Re)),this.namedValidators.STRING=this.primitive(new ct(ef,Re,Re)),this.namedValidators.SLASH=this.primitive(new ct(nf,Re,Re));let e={"font-family":J("sans-serif")};this.systemFonts.caption=e,this.systemFonts.icon=e,this.systemFonts.menu=e,this.systemFonts["message-box"]=e,this.systemFonts["small-caption"]=e,this.systemFonts["status-bar"]=e}isBuiltIn(e){return!!e.match(/^[A-Z_0-9]+$/)}readNameAndPrefixes(e,t){let i=e.token();if(i.type==0)return null;let r={"":!0};if(i.type==14){do{if(e.consume(),i=e.token(),i.type!=1)throw new Error("Prefix name expected");r[i.text]=!0,e.consume(),i=e.token()}while(i.type==16);if(i.type!=15)throw new Error("']' expected");e.consume(),i=e.token()}if(i.type!=1)throw new Error("Property name expected");if(t==2?i.text=="SHORTHANDS":i.text=="DEFAULTS")return e.consume(),null;let s=i.text;if(e.consume(),t!=2){if(e.token().type!=39)throw new Error("'=' expected");this.isBuiltIn(s)||(this.prefixes[s]=r)}else if(e.token().type!=18)throw new Error("':' expected");return s}parseValidators(e){for(;;){let t=this.readNameAndPrefixes(e,1);if(!t)return;let i=[],r=[],s="",o,u=!0,c=()=>{if(i.length==0)throw new Error("No values");return i.length==1?i[0]:this.newGroup(s,i)},m=y=>{if(u)throw new Error(`'${y}': unexpected`);if(s&&s!=y)throw new Error(`mixed operators: '${y}' and '${s}'`);s=y,u=!0},p=null;for(;!p;){e.consume();let y=e.token();switch(y.type){case 1:if(u||m(" "),this.isBuiltIn(y.text)){let S=this.namedValidators[y.text];if(!S)throw new Error(`'${y.text}' unexpected`);i.push(S.clone())}else{let S={};S[y.text.toLowerCase()]=J(y.text),i.push(this.primitive(new ct(0,S,Re)))}u=!1;break;case 5:{let S={};S[`${y.num}`]=new Tr(y.num),i.push(this.primitive(new ct(0,S,Re))),u=!1;break}case 34:m("|");break;case 25:m("||");break;case 14:u||m(" "),r.push({vals:i,op:s,b:"["}),s="",i=[],u=!0;break;case 6:u||m(" "),r.push({vals:i,op:s,b:"(",fn:y.text}),s="",i=[],u=!0;break;case 15:{o=c();let S=r.pop();if(S.b!="[")throw new Error("']' unexpected");i=S.vals,i.push(o),s=S.op,u=!1;break}case 11:{o=c();let S=r.pop();if(S.b!="(")throw new Error("')' unexpected");i=S.vals,i.push(this.newFunc(S.fn,o)),s=S.op,u=!1;break}case 18:if(u)throw new Error("':' unexpected");e.consume(),i.push(this.addReplacement(i.pop(),e.token()));break;case 22:if(u)throw new Error("'?' unexpected");i.push(this.addCounts(i.pop(),0,1));break;case 36:if(u)throw new Error("'*' unexpected");i.push(this.addCounts(i.pop(),0,Number.POSITIVE_INFINITY));break;case 23:if(u)throw new Error("'+' unexpected");i.push(this.addCounts(i.pop(),1,Number.POSITIVE_INFINITY));break;case 12:{if(e.consume(),y=e.token(),y.type!=5)throw new Error("<int> expected");let S=y.num,v=S;if(e.consume(),y=e.token(),y.type==16){if(e.consume(),y=e.token(),y.type!=5)throw new Error("<int> expected");v=y.num,e.consume(),y=e.token()}if(y.type!=13)throw new Error("'}' expected");i.push(this.addCounts(i.pop(),S,v));break}case 17:if(p=c(),r.length>0)throw new Error(`unclosed '${r.pop().b}'`);break;default:throw new Error("unexpected token")}}e.consume(),this.isBuiltIn(t)?this.namedValidators[t]=p:p.isSimple()?this.validators[t]=p.nodes[0].validator:this.validators[t]=new Ls(p)}}parseDefaults(e){for(;;){let t=this.readNameAndPrefixes(e,2);if(!t)return;let i=[];for(;;){e.consume();let r=e.token();if(r.type==17){e.consume();break}switch(r.type){case 1:i.push(J(r.text));break;case 4:i.push(new or(r.num));break;case 5:i.push(new Tr(r.num));break;case 3:i.push(new U(r.num,r.text));break;default:throw new Error("unexpected token")}}this.defaultValues[t]=i.length>1?new Ke(i):i[0]}}parseShorthands(e){for(;;){let t=this.readNameAndPrefixes(e,3);if(!t)return;let i=e.nthToken(1),r;i.type==1&&hf[i.text]?(r=new hf[i.text],e.consume()):r=new vn,r.setOwner(this);let s=!1,o=[],u=!1,c=[],m=[];for(;!s;)switch(e.consume(),i=e.token(),i.type){case 1:if(this.validators[i.text])o.push(r.syntaxNodeForProperty(i.text)),i.text.includes("_")||m.push(i.text);else if(this.shorthands[i.text]instanceof cf){let p=this.shorthands[i.text];o.push(p.createSyntaxNode()),m.push(...p.propList)}else throw new Error(`'${i.text}' is neither a simple property nor an inset shorthand`);break;case 19:if(o.length>0||u)throw new Error("unexpected slash");u=!0;break;case 14:c.push({slash:u,syntax:o}),o=[],u=!1;break;case 15:{let p=new PI(o,u),y=c.pop();o=y.syntax,u=y.slash,o.push(p);break}case 17:s=!0,e.consume();break;default:throw new Error("unexpected token")}r.init(o,m),this.shorthands[t]=r}}parse(e){let t=new ki(e,null);this.parseValidators(t),this.parseDefaults(t),this.parseShorthands(t),this.backgroundProps=this.makePropSet(["background"]),this.layoutProps=this.makePropSet(["margin","border","padding","columns","column-gap","column-rule","column-fill"])}makePropSet(e){var t;let i={};for(let r of e){let s=this.shorthands[r],o=s?s.propList:[r];for(let u of o)i[u]=(t=this.defaultValues[u])!=null?t:N.initial}return i}validatePropertyAndHandleShorthand(e,t,i,r){if(qi(e)||r.ruleType==="font-face"||FI(t)){r.simpleProperty(e,t,i);return}let s="",o=e;e=e.toLowerCase();let u=e.match(/^-([a-z]+)-([-a-z0-9]+)$/);u&&(s=u[1],e=u[2]);let c=this.prefixes[e];if(!c||!c[s]){CSS.supports(o,t.toString())?r.simpleProperty(o,t,i):s&&!cp.includes(`-${s}-`)||r.unknownProperty(o,t);return}let m=this.validators[e];if(m){let p=Ee(t)||t.isExpr()?t:t.visit(m);p?r.simpleProperty(e,p,i):!s&&CSS.supports(e,t.toString())?r.simpleProperty(e,t,i):r.invalidPropertyValue(o,t)}else{let p=this.shorthands[e].clone();Ee(t)?p.propagateDefaultingValue(t,i,r):(t.visit(p),p.finish(i,r)||r.invalidPropertyValue(o,t))}}};function pf(){let e=new _I;return e.initBuiltInValidators(),e.parse(mm),e}var BI=class extends ji{constructor(){super(...arguments),f(this,"varFound",!1)}visitFunc(e){return e.name==="var"?this.varFound=!0:this.varFound||this.visitValues(e.values),null}};function FI(e){let t=new BI;return e.visit(t),t.varFound}var U3=`OTTO${new Date().valueOf()}`;function cu(e){return Object.keys(e).filter(t=>!["src","font-family","font-display"].includes(t)).sort()}function zI(e){let t=new Wi;for(let i of cu(e))t.append(`${i}:${e[i].toString()};`);return t.toString()}function MI(e,t){let i={};for(let r in e)i[r]=Nt(e,r).evaluate(t,r);return i}var mf=class{constructor(e){this.properties=e,f(this,"fontTraitKey"),f(this,"src"),f(this,"blobURLs",[]),f(this,"blobs",[]),f(this,"family"),this.fontTraitKey=zI(this.properties),this.src=this.properties.src?this.properties.src.toString():null;let t=this.properties["font-family"];this.family=t?t.stringValue():null}traitsEqual(e){return this.fontTraitKey==e.fontTraitKey}makeAtRule(e,t){let i=new Wi;i.append(`@font-face {
  font-family: `),i.append(this.family),i.append(`;
  `);for(let r of cu(this.properties))i.append(r),i.append(": "),this.properties[r].appendTo(i,!0),i.append(`;
  `);if(t){i.append('src: url("');let r=fP(t);i.append(r),this.blobURLs.push(r),this.blobs.push(t),i.append('")')}else i.append("src: "),i.append(e);return i.append(`;
}
`),i.toString()}},DI=class{constructor(e){this.deobfuscator=e,f(this,"familyMap",{})}registerFamily(e,t){let i=e.family,r=this.familyMap[i],s=t.family;if(r){if(r!=s)throw new Error(`E_FONT_FAMILY_INCONSISTENT ${e.family}`)}else this.familyMap[i]=s}filterFontFamily(e){if(e instanceof Mt){let t=e.values,i=[];for(let r of t){let s=this.familyMap[r.stringValue()];s&&i.push(J(s)),i.push(r)}return new Mt(i)}else{let t=this.familyMap[e.stringValue()];return t?new Mt([J(t),e]):e}}},WI=class{constructor(e,t,i){this.head=e,this.body=t,f(this,"srcURLMap",{}),f(this,"familyPrefix"),f(this,"familyCounter",0),this.familyPrefix=i||"Fnt_"}getViewFontFamily(e,t){let i=e.family,r=t.familyMap[i];return r||(r=this.familyPrefix+ ++this.familyCounter,t.familyMap[i]=r,r)}initFont(e,t,i){let r=Z("initFont"),s=e.src,o={};for(let p of cu(e.properties))o[p]=e.properties[p];let u=this.getViewFontFamily(e,i);o["font-family"]=J(u);let c=new mf(o),m=this.head.ownerDocument.createElement("style");return m.textContent=c.makeAtRule(s,t),this.head.appendChild(m),ee.debug("Load font:",s),r.finish(c),r.result()}loadFont(e,t){let i=e.src,r=e.family+";"+i,s=this.srcURLMap[r];return s?s.piggyback(o=>{let u=o;u.traitsEqual(e)?(t.registerFamily(e,u),ee.debug("Found already-loaded font:",i)):ee.warn("E_FONT_FACE_INCOMPATIBLE",e.src)}):(s=new as(()=>{let o=Z("loadFont"),u=i.replace(/^url\("([^"]+)"\).*$/,"$1"),c=t.deobfuscator?t.deobfuscator(u):null;return c?Ra(u,"blob").then(m=>{if(!m.responseBlob){o.finish(null);return}c(m.responseBlob).then(p=>{this.initFont(e,p,t).thenFinish(o)})}):this.initFont(e,null,t).thenFinish(o),o.result()},`loadFont ${i}`),this.srcURLMap[r]=s,s.start()),s}findOrLoadFonts(e,t){let i=[];for(let r of e){if(!r.src||!r.family){ee.warn("E_FONT_FACE_INVALID");continue}i.push(this.loadFont(r,t))}return Oa(i).thenAsync(()=>this.waitFontLoading())}waitFontLoading(){let e=this.head.ownerDocument.fonts,t=0;if(e.forEach(r=>{r.status==="unloaded"&&(t++,r.load().catch(s=>{}))}),t===0)return q(!0);let i=Z("waitFontLoading");return i.loop(()=>i.sleep(20).thenAsync(()=>e.status==="loading"?q(!0):q(!1))).thenFinish(i),i.result()}},jI=1,ro=class{constructor(e,t,i,r,s){this.name=t,this.pseudoName=i,this.classes=r,this.parent=s,f(this,"specified",{}),f(this,"children",[]),f(this,"pageMaster",null),f(this,"index",0),f(this,"key"),f(this,"_scope"),this._scope=e,this.key=`p${jI++}`,s&&(this.index=s.children.length,s.children.push(this))}get scope(){return this._scope}createInstance(e){throw new Error("E_UNEXPECTED_CALL")}clone(e){throw new Error("E_UNEXPECTED_CALL")}copySpecified(e){let t=this.specified,i=e.specified;for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}cloneChildren(e){for(let t=0;t<this.children.length;t++)this.children[t].clone({parent:e})}},qI=class extends ro{constructor(e){super(e,null,null,[],null),this.specified.width=new xe(is,0),this.specified.height=new xe(rs,0)}},gf=class extends Vl{constructor(e,t){super(e,r),this.pageMaster=t;let i=this;function r(s,o){let u=s.match(/^([^.]+)\.([^.]+)$/);if(u){let c=i.pageMaster.keyMap[u[1]];if(c){let m=this.lookupInstance(c);if(m)return o?m.resolveFunc(u[2]):m.resolveName(u[2])}}return null}}},ff=class LT extends ro{constructor(t,i,r,s,o,u,c){super(t,i,r,s,o),this.condition=u,this.specificity=c,f(this,"keyMap",{}),t instanceof gf||(this._scope=new gf(t,this)),this.pageMaster=this,this.specified.width=new xe(is,0),this.specified.height=new xe(rs,0),this.specified["wrap-flow"]=new xe(N.auto,0),this.specified.position=new xe(N.relative,0),this.specified.overflow=new xe(N.visible,0)}createInstance(t){return new pu(t,this)}clone(t){let i=new LT(this.scope,this.name,t.pseudoName||this.pseudoName,this.classes,this.parent,this.condition,this.specificity);return this.copySpecified(i),this.cloneChildren(i),i}resetScope(){this.scope.pageMaster=this}},bf=class _T extends ro{constructor(t,i,r,s,o){super(t,i,r,s,o),this.pageMaster=o.pageMaster,i&&(this.pageMaster.keyMap[i]=this.key),this.specified["wrap-flow"]=new xe(N.auto,0)}createInstance(t){return new GI(t,this)}clone(t){let i=new _T(t.parent.scope,this.name,this.pseudoName,this.classes,t.parent);return this.copySpecified(i),this.cloneChildren(i),i}},_s=class BT extends ro{constructor(t,i,r,s,o){super(t,i,r,s,o),this.pageMaster=o.pageMaster,i&&(this.pageMaster.keyMap[i]=this.key)}createInstance(t){return new Sn(t,this)}clone(t){let i=new BT(t.parent.scope,this.name,this.pseudoName,this.classes,t.parent);return this.copySpecified(i),this.cloneChildren(i),i}};function VI(e,t,i){return!t||Ee(t)?new ft(e,i):t.toExpr(e,e.zero)}function ze(e,t,i){return!t||t===N.auto||Ee(t)?null:t.toExpr(e,i)}function HI(e,t,i){return!t||t===N.normal||Ee(t)?null:t.toExpr(e,i)}function ti(e,t,i){return!t||t===N.auto||Ee(t)?e.zero:t.toExpr(e,i)}function yf(e,t,i){return!t||Ee(t)?e.zero:t===N.auto?null:t.toExpr(e,i)}function Ii(e,t,i,r){return!t||i===N.none||Ee(t)?e.zero:t.toExpr(e,r)}function vf(e,t,i){return!t||Ee(t)?i:t===N._true?e._true:t===N._false?e._false:t.toExpr(e,e.zero)}var no=class{constructor(e,t){this.parentInstance=e,this.pageBox=t,f(this,"cascaded",{}),f(this,"style",{}),f(this,"autoWidth",null),f(this,"autoHeight",null),f(this,"children",[]),f(this,"isAutoWidth",!1),f(this,"isAutoHeight",!1),f(this,"isTopDependentOnAutoHeight",!1),f(this,"isRightDependentOnAutoWidth",!1),f(this,"calculatedWidth",0),f(this,"calculatedHeight",0),f(this,"pageMasterInstance",null),f(this,"namedValues",{}),f(this,"namedFuncs",{}),f(this,"vertical",!1),f(this,"rtl",!1),f(this,"suppressEmptyBoxGeneration",!1),f(this,"borderBoxSizing",!1),e&&e.children.push(this)}reset(){this.calculatedWidth=0,this.calculatedHeight=0}addNamedValues(e,t){let i=this.resolveName(e),r=this.resolveName(t);if(!i||!r)throw new Error("E_INTERNAL");return ve(this.pageBox.scope,i,r)}resolveName(e){let t=this.namedValues[e];if(t)return t;let i=this.style[e];switch(i&&(t=i.toExpr(this.pageBox.scope,this.pageBox.scope.zero)),e){case"margin-left-edge":t=this.resolveName("left");break;case"margin-top-edge":t=this.resolveName("top");break;case"margin-right-edge":t=this.addNamedValues("border-right-edge","margin-right");break;case"margin-bottom-edge":t=this.addNamedValues("border-bottom-edge","margin-bottom");break;case"border-left-edge":t=this.addNamedValues("margin-left-edge","margin-left");break;case"border-top-edge":t=this.addNamedValues("margin-top-edge","margin-top");break;case"border-right-edge":t=this.addNamedValues("padding-right-edge","border-right-width");break;case"border-bottom-edge":t=this.addNamedValues("padding-bottom-edge","border-bottom-width");break;case"padding-left-edge":t=this.addNamedValues("border-left-edge","border-left-width");break;case"padding-top-edge":t=this.addNamedValues("border-top-edge","border-top-width");break;case"padding-right-edge":t=this.addNamedValues("right-edge","padding-right");break;case"padding-bottom-edge":t=this.addNamedValues("bottom-edge","padding-bottom");break;case"left-edge":t=this.addNamedValues("padding-left-edge","padding-left");break;case"top-edge":t=this.addNamedValues("padding-top-edge","padding-top");break;case"right-edge":t=this.addNamedValues("left-edge","width");break;case"bottom-edge":t=this.addNamedValues("top-edge","height");break}if(!t){let r;if(e=="extent")r=this.vertical?"width":"height";else if(e=="measure")r=this.vertical?"height":"width";else{let s=this.vertical?sg:ag;r=e;for(let o in s)r=r.replace(o,s[o])}r!=e&&(t=this.resolveName(r))}return t&&(this.namedValues[e]=t),t}resolveFunc(e){let t=this.namedFuncs[e];if(t)return t;switch(e){case"columns":{let i=this.pageBox.scope,r=new jp(i,0),s=this.resolveName("column-count"),o=this.resolveName("column-width"),u=this.resolveName("column-gap");t=Be(i,Ea(i,new es(i,"min",[r,s]),ve(i,o,u)),u);break}}return t&&(this.namedFuncs[e]=t),t}initEnabled(){let e=this.pageBox.scope,t=this.style,i=vf(e,t.enabled,e._true),r=ze(e,t.page,e.zero);if(r){let u=new lt(e,"page-number");i=pi(e,i,new Xl(e,r,u))}let s=ze(e,t["min-page-width"],e.zero);s&&(i=pi(e,i,new Yl(e,new lt(e,"page-width"),s)));let o=ze(e,t["min-page-height"],e.zero);o&&(i=pi(e,i,new Yl(e,new lt(e,"page-height"),o))),i=this.boxSpecificEnabled(i),t.enabled=new re(i)}boxSpecificEnabled(e){return e}initHorizontal(){let e=this.pageBox.scope,t=this.style,i=this.parentInstance?this.parentInstance.style.width.toExpr(e,null):null,r=ze(e,t.left,i),s=ze(e,t["margin-left"],i),o=Ii(e,t["border-left-width"],t["border-left-style"],i),u=ti(e,t["padding-left"],i),c=ze(e,t.width,i),m=ze(e,t["max-width"],i),p=ti(e,t["padding-right"],i),y=Ii(e,t["border-right-width"],t["border-right-style"],i),S=ze(e,t["margin-right"],i),v=ze(e,t.right,i),w=ve(e,o,u),T=ve(e,o,p);if(r&&v&&c){let O=Be(e,i,ve(e,c,ve(e,ve(e,r,w),T)));s?S?v=Be(e,O,S):S=Be(e,O,ve(e,v,s)):(O=Be(e,O,v),S?s=Be(e,O,S):(s=Ea(e,O,new ft(e,.5)),S=s))}else{s||(s=e.zero),S||(S=e.zero),!r&&!v&&!c&&(r=e.zero),!r&&!c?(c=this.autoWidth,this.isAutoWidth=!0):!r&&!v?r=e.zero:!c&&!v&&(c=this.autoWidth,this.isAutoWidth=!0);let O=Be(e,i,ve(e,ve(e,s,w),ve(e,S,T)));this.isAutoWidth&&(m||(m=Be(e,O,r||v)),!this.vertical&&(ze(e,t["column-width"],null)||ze(e,t["column-count"],null))&&(c=m,this.isAutoWidth=!1)),r?c?v||(v=Be(e,O,ve(e,r,c))):c=Be(e,O,ve(e,r,v)):r=Be(e,O,ve(e,v,c))}let E=t["snap-width"]||(this.parentInstance?this.parentInstance.style["snap-width"]:null),P=ti(e,E,i);t.left=new re(r),t["margin-left"]=new re(s),t["border-left-width"]=new re(o),t["padding-left"]=new re(u),t.width=new re(c),t["max-width"]=new re(m||c),t["padding-right"]=new re(p),t["border-right-width"]=new re(y),t["margin-right"]=new re(S),t.right=new re(v),t["snap-width"]=new re(P)}initVertical(){let e=this.pageBox.scope,t=this.style,i=this.parentInstance?this.parentInstance.style.width.toExpr(e,null):null,r=this.parentInstance?this.parentInstance.style.height.toExpr(e,null):null,s=ze(e,t.top,r),o=ze(e,t["margin-top"],i),u=Ii(e,t["border-top-width"],t["border-top-style"],i),c=ti(e,t["padding-top"],i),m=ze(e,t.height,r),p=ze(e,t["max-height"],r),y=ti(e,t["padding-bottom"],i),S=Ii(e,t["border-bottom-width"],t["border-bottom-style"],i),v=ze(e,t["margin-bottom"],i),w=ze(e,t.bottom,r),T=ve(e,u,c),E=ve(e,S,y);if(s&&w&&m){let A=Be(e,r,ve(e,m,ve(e,ve(e,s,T),E)));o?v?w=Be(e,A,o):v=Be(e,A,ve(e,w,o)):(A=Be(e,A,w),v?o=Be(e,A,v):(o=Ea(e,A,new ft(e,.5)),v=o))}else{o||(o=e.zero),v||(v=e.zero),!s&&!w&&!m&&(s=e.zero),!s&&!m?(m=this.autoHeight,this.isAutoHeight=!0):!s&&!w?s=e.zero:!m&&!w&&(m=this.autoHeight,this.isAutoHeight=!0);let A=Be(e,r,ve(e,ve(e,o,T),ve(e,v,E)));this.isAutoHeight&&(p||(p=Be(e,A,s||w)),this.vertical&&(ze(e,t["column-width"],null)||ze(e,t["column-count"],null))&&(m=p,this.isAutoHeight=!1)),s?m?w||(w=Be(e,A,ve(e,s,m))):m=Be(e,A,ve(e,w,s)):s=Be(e,A,ve(e,w,m))}let P=t["snap-height"]||(this.parentInstance?this.parentInstance.style["snap-height"]:null),O=ti(e,P,i);t.top=new re(s),t["margin-top"]=new re(o),t["border-top-width"]=new re(u),t["padding-top"]=new re(c),t.height=new re(m),t["max-height"]=new re(p||m),t["padding-bottom"]=new re(y),t["border-bottom-width"]=new re(S),t["margin-bottom"]=new re(v),t.bottom=new re(w),t["snap-height"]=new re(O)}initColumns(){let e=this.pageBox.scope,t=this.style,i=ze(e,t[this.vertical?"height":"width"],null),r=ze(e,t["column-width"],i),s=ze(e,t["column-count"],null),o=HI(e,t["column-gap"],null);o||(o=new Jn(e,1,"em")),r&&!s&&(s=new es(e,"floor",[Zl(e,ve(e,i,o),ve(e,r,o))]),s=new es(e,"max",[e.one,s])),s||(s=e.one),r=Be(e,Zl(e,ve(e,i,o),s),o),t["column-width"]=new re(r),t["column-count"]=new re(s),t["column-gap"]=new re(o)}depends(e,t,i){return this.style[e].toExpr(this.pageBox.scope,null).depend(t,i)}init(e){var t;e.registerInstance(this.pageBox.key,this);let i=this.pageBox.scope,r=this.style,s=this.parentInstance?this.parentInstance.getActiveRegions(e):null,o=wg(this.cascaded,e,s,!1,null);this.vertical=Sg(o,e,this.parentInstance?this.parentInstance.vertical:!1),this.rtl=xg(o,e,this.parentInstance?this.parentInstance.rtl:!1),this.borderBoxSizing=((t=o["box-sizing"])==null?void 0:t.value)===N.border_box;let u=!!(e instanceof xu&&e.currentLayoutPosition&&new lt(i,"left-page").evaluate(e));kg(o,r,this.vertical,this.rtl,u,(c,m)=>m.value),this.autoWidth=new dt(i,()=>this.calculatedWidth,"autoWidth"),this.autoHeight=new dt(i,()=>this.calculatedHeight,"autoHeight"),this.initHorizontal(),this.initVertical(),this.initColumns(),this.initEnabled()}getProp(e,t){var i,r;let s=this.style[t];return!s&&Ss(t)&&this.pageMasterInstance instanceof xn&&(t==="font-size"&&e.isRelativeRootFontSize&&e.rootFontSize?s=new U(e.rootFontSize,"px"):s=(r=((i=e.styler)==null?void 0:i.rootStyle)[t])==null?void 0:r.value),s&&(s=Ka(e,s,t)),s}getPropAsNumber(e,t){var i,r;let s=this.style[t];if(s){let o=/\b(height|top|bottom)\b/.test(t)?(i=e.pageAreaHeight)!=null?i:e.pageHeight():(r=e.pageAreaWidth)!=null?r:e.pageWidth();s=Ka(e,s,t,o)}return Dt(s,e)}getSpecial(e,t){let i=dg(this.cascaded,t);if(i){let r=[];for(let s=0;s<i.length;s++){let o=i[s].evaluate(e,"");o&&o!==he&&r.push(o)}if(r.length)return r}return null}getActiveRegions(e){let t=this.getSpecial(e,"region-id");if(t){let i=[];for(let r=0;r<t.length;r++)i[r]=t[r].toString();return i}return null}propagateProperty(e,t,i,r){this.propagatePropertyToElement(e,t.element,i,r)}propagatePropertyToElement(e,t,i,r){let s=this.getProp(e,i);s&&(s.isNumeric()&&Op(s.unit)&&(s=Gp(s,e)),i==="font-family"&&(s=r.filterFontFamily(s)),(i.startsWith("background")||i==="z-index")&&t.parentElement.hasAttribute("data-vivliostyle-bleed-box")&&(t=t.parentElement),j(t,i,s.toString()))}propagateDelayedProperty(e,t,i,r){let s=this.getProp(e,i);s&&r.push(new Sd(t.element,i,s))}assignLeftPosition(e,t){let i=this.getPropAsNumber(e,"left"),r=this.getPropAsNumber(e,"margin-left"),s=this.getPropAsNumber(e,"padding-left"),o=this.getPropAsNumber(e,"border-left-width"),u=this.getPropAsNumber(e,"width");t.setHorizontalPosition(i,u),j(t.element,"margin-left",`${r}px`),j(t.element,"padding-left",`${s}px`),j(t.element,"border-left-width",`${o}px`),t.marginLeft=r,t.borderLeft=o,t.paddingLeft=s}assignRightPosition(e,t){let i=this.getPropAsNumber(e,"right"),r=this.getPropAsNumber(e,"snap-height"),s=this.getPropAsNumber(e,"margin-right"),o=this.getPropAsNumber(e,"padding-right"),u=this.getPropAsNumber(e,"border-right-width");if(j(t.element,"margin-right",`${s}px`),j(t.element,"padding-right",`${o}px`),j(t.element,"border-right-width",`${u}px`),t.marginRight=s,t.borderRight=u,this.vertical&&r>0){let c=i+t.getInsetRight(),m=c-Math.floor(c/r)*r;m>0&&(t.snapOffsetX=r-m,o+=t.snapOffsetX)}t.paddingRight=o,t.snapWidth=r}assignTopPosition(e,t){let i=this.getPropAsNumber(e,"snap-height"),r=this.getPropAsNumber(e,"top"),s=this.getPropAsNumber(e,"margin-top"),o=this.getPropAsNumber(e,"padding-top"),u=this.getPropAsNumber(e,"border-top-width");if(t.top=r,t.marginTop=s,t.borderTop=u,t.snapHeight=i,!this.vertical&&i>0){let c=r+t.getInsetTop(),m=c-Math.floor(c/i)*i;m>0&&(t.snapOffsetY=i-m,o+=t.snapOffsetY)}t.paddingTop=o,j(t.element,"top",`${r}px`),j(t.element,"margin-top",`${s}px`),j(t.element,"padding-top",`${o}px`),j(t.element,"border-top-width",`${u}px`)}assignBottomPosition(e,t){let i=this.getPropAsNumber(e,"margin-bottom"),r=this.getPropAsNumber(e,"padding-bottom"),s=this.getPropAsNumber(e,"border-bottom-width"),o=this.getPropAsNumber(e,"height")-t.snapOffsetY;j(t.element,"height",`${o}px`),j(t.element,"margin-bottom",`${i}px`),j(t.element,"padding-bottom",`${r}px`),j(t.element,"border-bottom-width",`${s}px`),t.height=o-t.snapOffsetY,t.marginBottom=i,t.borderBottom=s,t.paddingBottom=r}assignBeforePosition(e,t){this.vertical?this.assignRightPosition(e,t):this.assignTopPosition(e,t)}assignAfterPosition(e,t){this.vertical?this.assignLeftPosition(e,t):this.assignBottomPosition(e,t)}assignStartEndPosition(e,t){this.vertical?(this.assignTopPosition(e,t),this.assignBottomPosition(e,t)):(this.assignRightPosition(e,t),this.assignLeftPosition(e,t))}sizeWithMaxHeight(e,t){j(t.element,"border-top-width","0px");let i=this.getPropAsNumber(e,"max-height");this.isTopDependentOnAutoHeight?t.setVerticalPosition(0,i):(this.assignTopPosition(e,t),i-=t.snapOffsetY,t.height=i,j(t.element,"height",`${i}px`))}sizeWithMaxWidth(e,t){j(t.element,"border-left-width","0px");let i=this.getPropAsNumber(e,"max-width");if(this.isRightDependentOnAutoWidth)t.setHorizontalPosition(0,i);else{this.assignRightPosition(e,t),i-=t.snapOffsetX,t.width=i;let r=this.getPropAsNumber(e,"right");j(t.element,"right",`${r}px`),j(t.element,"width",`${i}px`)}}prepareContainer(e,t,i,r,s){(!this.parentInstance||this.vertical!=this.parentInstance.vertical)&&j(t.element,"writing-mode",this.vertical?"vertical-rl":"horizontal-tb"),(!this.parentInstance||this.rtl!=this.parentInstance.rtl)&&j(t.element,"direction",this.rtl?"rtl":"ltr"),(this.vertical?this.isAutoWidth:this.isAutoHeight)?this.vertical?this.sizeWithMaxWidth(e,t):this.sizeWithMaxHeight(e,t):(this.assignBeforePosition(e,t),this.assignAfterPosition(e,t)),(this.vertical?this.isAutoHeight:this.isAutoWidth)?this.vertical?this.sizeWithMaxHeight(e,t):this.sizeWithMaxWidth(e,t):this.assignStartEndPosition(e,t);for(let o=0;o<Sf.length;o++)this.propagateProperty(e,t,Sf[o],r)}transferContentProps(e,t,i,r){for(let s=0;s<wf.length;s++)this.propagateProperty(e,t,wf[s],r);if(this.style["text-overflow"]){let s=t.element.firstElementChild;j(s,"text-overflow","inherit"),j(s,"overflow","inherit")}}transferSingleUriContentProps(e,t,i){let r=()=>{var o,u;let c=(u=(o=this.cascaded.width)!=null?o:this.cascaded[this.vertical?"block-size":"inline-size"])==null?void 0:u.value;return!!c&&c!==N.auto&&!Ee(c)},s=()=>{var o,u;let c=(u=(o=this.cascaded.height)!=null?o:this.cascaded[this.vertical?"inline-size":"block-size"])==null?void 0:u.value;return!!c&&c!==N.auto&&!Ee(c)};for(let o=0;o<Cf.length;o++){let u=Cf[o];if(u==="width"||u==="height"){if(u==="width"&&!r()||u==="height"&&!s())continue;j(t,u,"100%");continue}this.propagatePropertyToElement(e,t,u,i)}}finishContainer(e,t,i,r,s,o,u){this.vertical?this.calculatedWidth=t.computedBlockSize+t.snapOffsetX:this.calculatedHeight=t.computedBlockSize+t.snapOffsetY;let c=(this.vertical||!r)&&this.isAutoHeight,m=(!this.vertical||!r)&&this.isAutoWidth,p=null;if((m||c)&&(m&&j(t.element,"width","auto"),c&&j(t.element,"height","auto"),p=o.getElementClientRect(r?r.element:t.element),m&&(this.calculatedWidth=Math.ceil(p.right-p.left-t.paddingLeft-t.borderLeft-t.paddingRight-t.borderRight),this.vertical&&(this.calculatedWidth+=t.snapOffsetX)),c&&(this.calculatedHeight=p.bottom-p.top-t.paddingTop-t.borderTop-t.paddingBottom-t.borderBottom,this.vertical||(this.calculatedHeight+=t.snapOffsetY))),(this.vertical?this.isAutoHeight:this.isAutoWidth)&&this.assignStartEndPosition(e,t),(this.vertical?this.isAutoWidth:this.isAutoHeight)&&((this.vertical?this.isRightDependentOnAutoWidth:this.isTopDependentOnAutoHeight)&&this.assignBeforePosition(e,t),this.assignAfterPosition(e,t)),s>1){let y=this.getPropAsNumber(e,"column-rule-width"),S=this.getProp(e,"column-rule-style"),v=this.getProp(e,"column-rule-color");if(y>0&&S&&S!=N.none&&v!=N.transparent){let w=this.getPropAsNumber(e,"column-gap"),T=this.vertical?t.height:t.width,E=this.vertical?"border-top":"border-left";for(let P=1;P<s;P++){let O=this.vertical?(T+w)*P/s-w/2+t.paddingTop-y/2:(T+w)*P/s-w/2+t.paddingLeft-y/2,A=this.vertical?t.width+t.paddingLeft+t.paddingRight:t.height+t.paddingTop+t.paddingBottom,L=t.element.ownerDocument.createElement("div");j(L,"position","absolute"),j(L,this.vertical?"left":"top","0px"),j(L,this.vertical?"top":"left",`${O}px`),j(L,this.vertical?"height":"width","0px"),j(L,this.vertical?"width":"height",`${A}px`),j(L,E,`${y}px ${S.toString()}${v?` ${v.toString()}`:""}`),t.element.insertBefore(L,t.element.firstChild)}}}for(let y=0;y<xf.length;y++)this.propagateProperty(e,t,xf[y],u);for(let y=0;y<kf.length;y++)this.propagateDelayedProperty(e,t,kf[y],i.delayedItems)}applyCascadeAndInit(e,t){let i=this.cascaded,r=this.pageBox.specified;for(let o in r)this instanceof xn&&this.pageBox.pseudoName=="vivliostyle-page-rule-master"&&(o==="writing-mode"||o==="direction")||pn(o)&&Rr(i,o,Nt(r,o));if(this.pageBox.pseudoName==hu)for(let o in t)(o.match(/^background-/)||o=="writing-mode")&&(i[o]=t[o]);if(this.pageBox.pseudoName=="layout-host")for(let o in t)!o.match(/^background-/)&&o!="writing-mode"&&(i[o]=t[o]);e.pushRule(this.pageBox.classes,null,i);let s=i.content;s&&(i.content=s.filterValue(new Gd(e,null,e.counterResolver))),this.init(e.context);for(let o of this.pageBox.children)o.createInstance(this).applyCascadeAndInit(e,t);e.popRule()}resolveAutoSizing(e){this.isAutoWidth&&(this.isRightDependentOnAutoWidth=this.depends("right",this.autoWidth,e)||this.depends("margin-right",this.autoWidth,e)||this.depends("border-right-width",this.autoWidth,e)||this.depends("padding-right",this.autoWidth,e)),this.isAutoHeight&&(this.isTopDependentOnAutoHeight=this.depends("top",this.autoHeight,e)||this.depends("margin-top",this.autoHeight,e)||this.depends("border-top-width",this.autoHeight,e)||this.depends("padding-top",this.autoHeight,e));for(let t of this.children)t.resolveAutoSizing(e)}},Sf=["border-left-style","border-right-style","border-top-style","border-bottom-style","border-left-color","border-right-color","border-top-color","border-bottom-color","box-sizing","outline-style","outline-color","outline-width","overflow","visibility"],xf=["border-top-left-radius","border-top-right-radius","border-bottom-right-radius","border-bottom-left-radius","border-start-start-radius","border-start-end-radius","border-end-start-radius","border-end-end-radius","border-image-source","border-image-slice","border-image-width","border-image-outset","border-image-repeat","background-attachment","background-color","background-image","background-repeat","background-position","background-clip","background-origin","background-size","box-shadow","opacity","z-index","background-blend-mode","isolation","mix-blend-mode","filter"],wf=["color","font-family","font-size","font-style","font-weight","line-height","letter-spacing","text-align","text-align-last","text-decoration","text-indent","text-transform","white-space","text-wrap","text-wrap-mode","text-wrap-style","word-spacing","font-feature-settings","font-kerning","font-size-adjust","font-variant-ligatures","font-variant-caps","font-variant-numeric","font-variant-east-asian","font-stretch","text-combine-upright","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-fill-color","text-orientation","text-shadow","text-stroke-color","text-stroke-width","text-underline-offset","text-underline-position","text-overflow"],Cf=["width","height","image-resolution","object-fit","object-position"],kf=["transform","transform-origin"],hu="background-host",UI=class extends no{constructor(e){super(null,e)}applyCascadeAndInit(e,t){super.applyCascadeAndInit(e,t),this.children.sort((i,r)=>r.pageBox.specificity-i.pageBox.specificity||i.pageBox.index-r.pageBox.index)}},pu=class extends no{constructor(e,t){super(e,t),this.pageMasterInstance=this}boxSpecificEnabled(e){let t=this.pageBox.pageMaster;return t.condition&&(e=pi(t.scope,e,t.condition)),e}adjustPageLayout(e,t,i){}},GI=class extends no{constructor(e,t){super(e,t),this.pageMasterInstance=e.pageMasterInstance}},Sn=class extends no{constructor(e,t){super(e,t),this.pageMasterInstance=e.pageMasterInstance}processPartitionList(e,t,i){let r=null;if(t instanceof Jt&&(r=[t]),t instanceof Mt&&(r=t.values),r){let s=this.pageBox.scope;for(let o=0;o<r.length;o++)if(r[o]instanceof Jt){let u=ql(r[o].name,"enabled"),c=new lt(s,u);i&&(c=new ar(s,c)),e=pi(s,e,c)}}return e}boxSpecificEnabled(e){let t=this.pageBox.scope,i=this.style,r=vf(t,i.required,t._false)!==t._false;if(r||this.isAutoHeight){let s=VI(t,i["flow-from"],"body"),o=new es(t,"has-content",[s]);e=pi(t,e,o)}if(e=this.processPartitionList(e,i["required-partitions"],!1),e=this.processPartitionList(e,i["conflicting-partitions"],!0),r){let s=this.pageMasterInstance.style.enabled,o=s?s.toExpr(t,null):t._true;o=pi(t,o,e),this.pageMasterInstance.style.enabled=new re(o)}return e}prepareContainer(e,t,i,r,s){var o;this.pageBox.pageMaster instanceof Nf||(j(t.element,"overflow","hidden"),t.element.setAttribute("data-vivliostyle-page-partition",(o=this.pageBox.name)!=null?o:"")),super.prepareContainer(e,t,i,r,s)}},mu=class extends os{constructor(e,t,i,r){super(e,t,!1),this.target=i,this.validatorSet=r}property(e,t,i){this.validatorSet.validatePropertyAndHandleShorthand(e,t,i,this)}unknownProperty(e,t){this.report(`E_INVALID_PROPERTY ${e}: ${t.toString()}`)}invalidPropertyValue(e,t){this.report(`E_INVALID_PROPERTY_VALUE ${e}: ${t.toString()}`)}simpleProperty(e,t,i){this.target.specified[e]=new xe(t,i?Cm:km)}},Ef=class extends mu{constructor(e,t,i,r){super(e,t,i,r)}},$I=class FT extends mu{constructor(t,i,r,s){super(t,i,r,s),r.specified.width=new xe($p,0),r.specified.height=new xe($p,0)}startPartitionRule(t,i,r){let s=new _s(this.scope,t,i,r,this.target),o=new Ef(this.scope,this.owner,s,this.validatorSet);this.owner.pushHandler(o)}startPartitionGroupRule(t,i,r){let s=new bf(this.scope,t,i,r,this.target),o=new FT(this.scope,this.owner,s,this.validatorSet);this.owner.pushHandler(o)}},YI=class extends mu{constructor(e,t,i,r){super(e,t,i,r)}startPartitionRule(e,t,i){let r=new _s(this.scope,e,t,i,this.target),s=new Ef(this.scope,this.owner,r,this.validatorSet);this.owner.pushHandler(s)}startPartitionGroupRule(e,t,i){let r=new bf(this.scope,e,t,i,this.target),s=new $I(this.scope,this.owner,r,this.validatorSet);this.owner.pushHandler(s)}};function Tf(e){var t,i;let r=(t=e["writing-mode"])==null?void 0:t.value,s=(i=e.direction)==null?void 0:i.value;return r===N.vertical_lr||r!==N.vertical_rl&&s!==N.rtl?"ltr":"rtl"}var XI={a10:{width:new U(26,"mm"),height:new U(37,"mm")},a9:{width:new U(37,"mm"),height:new U(52,"mm")},a8:{width:new U(52,"mm"),height:new U(74,"mm")},a7:{width:new U(74,"mm"),height:new U(105,"mm")},a6:{width:new U(105,"mm"),height:new U(148,"mm")},a5:{width:new U(148,"mm"),height:new U(210,"mm")},a4:{width:new U(210,"mm"),height:new U(297,"mm")},a3:{width:new U(297,"mm"),height:new U(420,"mm")},a2:{width:new U(420,"mm"),height:new U(594,"mm")},a1:{width:new U(594,"mm"),height:new U(841,"mm")},a0:{width:new U(841,"mm"),height:new U(1189,"mm")},b10:{width:new U(31,"mm"),height:new U(44,"mm")},b9:{width:new U(44,"mm"),height:new U(62,"mm")},b8:{width:new U(62,"mm"),height:new U(88,"mm")},b7:{width:new U(88,"mm"),height:new U(125,"mm")},b6:{width:new U(125,"mm"),height:new U(176,"mm")},b5:{width:new U(176,"mm"),height:new U(250,"mm")},b4:{width:new U(250,"mm"),height:new U(353,"mm")},b3:{width:new U(353,"mm"),height:new U(500,"mm")},b2:{width:new U(500,"mm"),height:new U(707,"mm")},b1:{width:new U(707,"mm"),height:new U(1e3,"mm")},b0:{width:new U(1e3,"mm"),height:new U(1414,"mm")},c10:{width:new U(28,"mm"),height:new U(40,"mm")},c9:{width:new U(40,"mm"),height:new U(57,"mm")},c8:{width:new U(57,"mm"),height:new U(81,"mm")},c7:{width:new U(81,"mm"),height:new U(114,"mm")},c6:{width:new U(114,"mm"),height:new U(162,"mm")},c5:{width:new U(162,"mm"),height:new U(229,"mm")},c4:{width:new U(229,"mm"),height:new U(324,"mm")},c3:{width:new U(324,"mm"),height:new U(458,"mm")},c2:{width:new U(458,"mm"),height:new U(648,"mm")},c1:{width:new U(648,"mm"),height:new U(917,"mm")},c0:{width:new U(917,"mm"),height:new U(1297,"mm")},"jis-b10":{width:new U(32,"mm"),height:new U(45,"mm")},"jis-b9":{width:new U(45,"mm"),height:new U(64,"mm")},"jis-b8":{width:new U(64,"mm"),height:new U(91,"mm")},"jis-b7":{width:new U(91,"mm"),height:new U(128,"mm")},"jis-b6":{width:new U(128,"mm"),height:new U(182,"mm")},"jis-b5":{width:new U(182,"mm"),height:new U(257,"mm")},"jis-b4":{width:new U(257,"mm"),height:new U(364,"mm")},"jis-b3":{width:new U(364,"mm"),height:new U(515,"mm")},"jis-b2":{width:new U(515,"mm"),height:new U(728,"mm")},"jis-b1":{width:new U(728,"mm"),height:new U(1030,"mm")},"jis-b0":{width:new U(1030,"mm"),height:new U(1456,"mm")},letter:{width:new U(8.5,"in"),height:new U(11,"in")},legal:{width:new U(8.5,"in"),height:new U(14,"in")},ledger:{width:new U(11,"in"),height:new U(17,"in")}},KI=new U(.24,"pt"),G3=new U(3,"mm"),ZI=new U(10,"mm"),QI=new U(13,"mm");function so(e){let t={width:is,height:rs,bleed:$e,bleedOffset:$e,cropOffset:$e},i=e.size;if(!(!i||i.value===N.auto)){let p=i.value,y,S;if(p.isSpaceList()?(y=p.values[0],S=p.values[1]):(y=p,S=null),y.isNumeric())t.width=y,t.height=S||y;else{let v=y.name&&XI[y.name.toLowerCase()];v&&(S&&S===N.landscape?(t.width=v.height,t.height=v.width):(t.width=v.width,t.height=v.height))}}let r=e.marks,s=e.bleed,o=r&&!Ee(r.value)?r.value:N.none,u=s&&!Ee(s.value)?s.value:N.auto;if(u===N.auto){if(o!==N.none){let p=!1;o.isSpaceList()?p=o.values.some(y=>y===N.crop):p=o===N.crop,p&&(t.bleed=new U(6,"pt"))}}else u.isNumeric()&&(t.bleed=u);let c=e["crop-offset"],m=c&&!Ee(c.value)?c.value:N.auto;return m===N.auto?o!==N.none&&(t.bleedOffset=QI):m.isNumeric()&&(t.cropOffset=m),t}function Pf(e,t){let i={},r=Math.max(0,e.bleed.num)*t.queryUnitSize(e.bleed.unit,!1),s=!e.cropOffset.num&&e.bleedOffset.num?e.bleedOffset.num*t.queryUnitSize(e.bleedOffset.unit,!1):Math.max(0,e.cropOffset.num*t.queryUnitSize(e.cropOffset.unit,!1)-r),o=r+s,u=e.width;u===is?t.pref.defaultPaperSize?i.pageWidth=t.pref.defaultPaperSize.width*t.queryUnitSize("px",!1):i.pageWidth=(t.pref.spreadView?Math.floor(t.viewportWidth/2)-t.pref.pageBorder:t.viewportWidth)-o*2:i.pageWidth=u.num*t.queryUnitSize(u.unit,!1);let c=e.height;return c===rs?t.pref.defaultPaperSize?i.pageHeight=t.pref.defaultPaperSize.height*t.queryUnitSize("px",!1):i.pageHeight=t.viewportHeight-o*2:i.pageHeight=c.num*t.queryUnitSize(c.unit,!1),i.bleed=r,i.bleedOffset=s,i.cropOffset=o,i}function Af(e,t,i){let r=e.createElementNS("http://www.w3.org/2000/svg","svg");return r.setAttribute("width",t),r.setAttribute("height",i),r.style.position="absolute",r}function Bs(e,t,i,r){r=r||"polyline";let s=e.createElementNS("http://www.w3.org/2000/svg",r);return s.setAttribute("stroke",i===N.auto?"#010101":i.toString()),s.setAttribute("stroke-width",t),s.setAttribute("fill","none"),s}var gu=(e=>(e.TOP_LEFT="top left",e.TOP_RIGHT="top right",e.BOTTOM_LEFT="bottom left",e.BOTTOM_RIGHT="bottom right",e))(gu||{});function JI(e,t,i,r,s,o,u){let c=s;c<=o+2*Ue.mm&&(c=o+s/2);let m=Math.max(s,c),p=o+m+i/2,y=Af(e,p,p),S=[[0,o+s],[s,o+s],[s,o+s-c]],v=S.map(E=>[E[1],E[0]]);(t==="top right"||t==="bottom right")&&(S=S.map(E=>[o+m-E[0],E[1]]),v=v.map(E=>[o+m-E[0],E[1]])),(t==="bottom left"||t==="bottom right")&&(S=S.map(E=>[E[0],o+m-E[1]]),v=v.map(E=>[E[0],o+m-E[1]]));let w=Bs(e,i,r);w.setAttribute("points",S.map(E=>E.join(",")).join(" ")),y.appendChild(w);let T=Bs(e,i,r);return T.setAttribute("points",v.map(E=>E.join(",")).join(" ")),y.appendChild(T),t.split(" ").forEach(E=>{y.style[E]=`${u}px`}),y}var Fs=(e=>(e.TOP="top",e.BOTTOM="bottom",e.LEFT="left",e.RIGHT="right",e))(Fs||{});function eO(e,t,i,r,s,o){let u=s*2,c,m;t==="top"||t==="bottom"?(c=u,m=s):(c=s,m=u);let p=Af(e,c,m),y=Bs(e,i,r);y.setAttribute("points",`0,${m/2} ${c},${m/2}`),p.appendChild(y);let S=Bs(e,i,r);S.setAttribute("points",`${c/2},0 ${c/2},${m}`),p.appendChild(S);let v=Bs(e,i,r,"circle");v.setAttribute("cx",c/2),v.setAttribute("cy",m/2),v.setAttribute("r",s/4),p.appendChild(v);let w;switch(t){case"top":w="bottom";break;case"bottom":w="top";break;case"left":w="right";break;case"right":w="left";break}return Object.keys(Fs).forEach(T=>{let E=Fs[T];E===t?p.style[E]=`${o}px`:E!==w&&(p.style[E]="0",p.style[`margin-${E}`]="auto")}),p}function tO(e,t,i,r){let s=!1,o=!1,u=e.marks;if(u){let E=u.value;E instanceof Ke?E.values.forEach(P=>{P===N.crop?s=!0:P===N.cross&&(o=!0)}):E===N.crop?s=!0:E===N.cross&&(o=!0)}let c=t.bleed;if(!s&&!o)return;let m=i.container,p=m.ownerDocument,y=Dt(KI,r),S=Math.max(0,t.bleedOffset-Dt(ZI,r)),v=t.bleedOffset-S,w=e["crop-marks-line-color"],T=w&&!Ee(w.value)?w.value:N.auto;s&&Object.keys(gu).forEach(E=>{let P=gu[E],O=JI(p,P,y,T,v,c,S);m.appendChild(O)}),o&&Object.keys(Fs).forEach(E=>{let P=Fs[E],O=eO(p,P,y,T,v,S);m.appendChild(O)})}var fu=(()=>{let e=["left","right","top","bottom","before","after","start","end","block-start","block-end","inline-start","inline-end","inside","outside"],t={width:!0,height:!0,"block-size":!0,"inline-size":!0,margin:!0,padding:!0,border:!0,outline:!0,"outline-width":!0,"outline-style":!0,"outline-color":!0,"border-radius":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-bottom-right-radius":!0,"border-bottom-left-radius":!0,"border-start-start-radius":!0,"border-start-end-radius":!0,"border-end-start-radius":!0,"border-end-end-radius":!0,"box-shadow":!0,"box-sizing":!0};return e.forEach(i=>{t[`margin-${i}`]=!0,t[`padding-${i}`]=!0,t[`border-${i}-width`]=!0,t[`border-${i}-style`]=!0,t[`border-${i}-color`]=!0}),t})(),bu={"top-left-corner":{order:1,isInTopRow:!0,isInBottomRow:!1,isInLeftColumn:!0,isInRightColumn:!1,positionAlongVariableDimension:null},"top-left":{order:2,isInTopRow:!0,isInBottomRow:!1,isInLeftColumn:!1,isInRightColumn:!1,positionAlongVariableDimension:"start"},"top-center":{order:3,isInTopRow:!0,isInBottomRow:!1,isInLeftColumn:!1,isInRightColumn:!1,positionAlongVariableDimension:"center"},"top-right":{order:4,isInTopRow:!0,isInBottomRow:!1,isInLeftColumn:!1,isInRightColumn:!1,positionAlongVariableDimension:"end"},"top-right-corner":{order:5,isInTopRow:!0,isInBottomRow:!1,isInLeftColumn:!1,isInRightColumn:!0,positionAlongVariableDimension:null},"right-top":{order:6,isInTopRow:!1,isInBottomRow:!1,isInLeftColumn:!1,isInRightColumn:!0,positionAlongVariableDimension:"start"},"right-middle":{order:7,isInTopRow:!1,isInBottomRow:!1,isInLeftColumn:!1,isInRightColumn:!0,positionAlongVariableDimension:"center"},"right-bottom":{order:8,isInTopRow:!1,isInBottomRow:!1,isInLeftColumn:!1,isInRightColumn:!0,positionAlongVariableDimension:"end"},"bottom-right-corner":{order:9,isInTopRow:!1,isInBottomRow:!0,isInLeftColumn:!1,isInRightColumn:!0,positionAlongVariableDimension:null},"bottom-right":{order:10,isInTopRow:!1,isInBottomRow:!0,isInLeftColumn:!1,isInRightColumn:!1,positionAlongVariableDimension:"end"},"bottom-center":{order:11,isInTopRow:!1,isInBottomRow:!0,isInLeftColumn:!1,isInRightColumn:!1,positionAlongVariableDimension:"center"},"bottom-left":{order:12,isInTopRow:!1,isInBottomRow:!0,isInLeftColumn:!1,isInRightColumn:!1,positionAlongVariableDimension:"start"},"bottom-left-corner":{order:13,isInTopRow:!1,isInBottomRow:!0,isInLeftColumn:!0,isInRightColumn:!1,positionAlongVariableDimension:null},"left-bottom":{order:14,isInTopRow:!1,isInBottomRow:!1,isInLeftColumn:!0,isInRightColumn:!1,positionAlongVariableDimension:"end"},"left-middle":{order:15,isInTopRow:!1,isInBottomRow:!1,isInLeftColumn:!0,isInRightColumn:!1,positionAlongVariableDimension:"center"},"left-top":{order:16,isInTopRow:!1,isInBottomRow:!1,isInLeftColumn:!0,isInRightColumn:!1,positionAlongVariableDimension:"start"}},iO=(()=>{let e=bu;return Object.keys(e).sort((t,i)=>e[t].order-e[i].order)})(),yu="vivliostyle-page-rule-master",zs="_marginBoxes",Nf=class extends ff{constructor(e,t,i){super(e,null,yu,[],t,null,0),f(this,"pageMarginBoxes",{});let r=so(i),s=new rO(this.scope,this,i,r);this.createPageMarginBoxes(i),this.applySpecified(i,r)}createPageMarginBoxes(e){let t=e[zs];t&&iO.forEach(i=>{t[i]&&(this.pageMarginBoxes[i]=new sO(this.scope,this,i,e))})}applySpecified(e,t){this.specified.position=new xe(N.relative,0),this.specified.width=new xe(t.width,0),this.specified.height=new xe(t.height,0);for(let i in e)!fu[i]&&i!=="background-clip"&&(this.specified[i]=e[i])}createInstance(e){return new xn(e,this)}},rO=class extends _s{constructor(e,t,i,r){super(e,null,null,[],t),this.pageSize=r;let s=new nO(this.scope,this);this.applySpecified(i)}applySpecified(e){this.specified["wrap-flow"]=new xe(N.auto,0),this.specified["z-index"]=new xe(new Tr(0),0),this.specified.position=new xe(N.absolute,0),this.specified.overflow=new xe(N.visible,0);for(let t in fu)fu.hasOwnProperty(t)&&(this.specified[t]=e[t])}createInstance(e){return new oO(e,this)}},nO=class extends _s{constructor(e,t){super(e,null,null,[],t),this.specified["flow-from"]=new xe(J("body"),0)}createInstance(e){return new Of(e,this)}},sO=class extends _s{constructor(e,t,i,r){super(e,null,null,[],t),this.marginBoxName=i,this.applySpecified(r)}applySpecified(e){let t=e[zs][this.marginBoxName];for(let i in e){let r=e[i],s=t[i];(rg[i]||s&&s.value===N.inherit)&&(this.specified[i]=r)}for(let i in t)if(Object.prototype.hasOwnProperty.call(t,i)){let r=t[i];r&&r.value!==he&&r.value!==N.inherit&&r.value!==N.unset&&r.value!==N.revert&&(this.specified[i]=r)}}createInstance(e){return new Rf(e,this)}},xn=class extends pu{constructor(e,t){super(e,t),f(this,"pageAreaDimension",null),f(this,"pageMarginBoxInstances",{})}applyCascadeAndInit(e,t){let i=this.cascaded;for(let r in t)if(Object.prototype.hasOwnProperty.call(t,r))switch(r){case"writing-mode":case"direction":i[r]=t[r]}super.applyCascadeAndInit(e,t)}initHorizontal(){let e=this.style;e.left=$e,e["margin-left"]=$e,e["border-left-width"]=$e,e["padding-left"]=$e,e["padding-right"]=$e,e["border-right-width"]=$e,e["margin-right"]=$e,e.right=$e}initVertical(){let e=this.style;e.top=$e,e["margin-top"]=$e,e["border-top-width"]=$e,e["padding-top"]=$e,e["padding-bottom"]=$e,e["border-bottom-width"]=$e,e["margin-bottom"]=$e,e.bottom=$e}setPageAreaDimension(e){this.pageAreaDimension=e;let t=this.style;t.width=new re(e.borderBoxWidth),t.height=new re(e.borderBoxHeight),t["padding-left"]=new re(e.marginLeft),t["padding-right"]=new re(e.marginRight),t["padding-top"]=new re(e.marginTop),t["padding-bottom"]=new re(e.marginBottom)}adjustPageLayout(e,t,i){let r=t.marginBoxes,s={start:this.pageAreaDimension.marginLeft,end:this.pageAreaDimension.marginRight,extent:this.pageAreaDimension.borderBoxWidth},o={start:this.pageAreaDimension.marginTop,end:this.pageAreaDimension.marginBottom,extent:this.pageAreaDimension.borderBoxHeight};this.sizeMarginBoxesAlongVariableDimension(r.top,!0,s,e,i),this.sizeMarginBoxesAlongVariableDimension(r.bottom,!0,s,e,i),this.sizeMarginBoxesAlongVariableDimension(r.left,!1,o,e,i),this.sizeMarginBoxesAlongVariableDimension(r.right,!1,o,e,i)}sizeMarginBoxesAlongVariableDimension(e,t,i,r,s){let o="start",u="center",c="end",m=this.pageBox.scope,p={},y={},S={};for(let L in e){let H=bu[L];if(H){let G=e[L],te=this.pageMarginBoxInstances[L],ae=new ao(G,te.style,t,m,s);p[H.positionAlongVariableDimension]=G,y[H.positionAlongVariableDimension]=te,S[H.positionAlongVariableDimension]=ae}}let v={start:i.start.evaluate(r),end:i.end.evaluate(r),extent:i.extent.evaluate(r)},w=this.getSizesOfMarginBoxesAlongVariableDimension(S,v.extent),T=!1,E={};Object.keys(p).forEach(L=>{let H=L,G=ze(m,y[H].style[t?"max-width":"max-height"],i.extent);if(G){let te=G.evaluate(r);if(w[H]>te){let ae=S[H]=new If(p[H],y[H].style,t,m,s,te);E[H]=ae.getOuterSize(),T=!0}}}),T&&(w=this.getSizesOfMarginBoxesAlongVariableDimension(S,v.extent),T=!1,[o,u,c].forEach(L=>{var H;w[L]=(H=E[L])!=null?H:w[L]}));let P={};Object.keys(p).forEach(L=>{let H=L,G=ze(m,y[H].style[t?"min-width":"min-height"],i.extent);if(G){let te=G.evaluate(r);if(w[H]<te){let ae=S[H]=new If(p[H],y[H].style,t,m,s,te);P[H]=ae.getOuterSize(),T=!0}}}),T&&(w=this.getSizesOfMarginBoxesAlongVariableDimension(S,v.extent),[o,u,c].forEach(L=>{w[L]=P[L]||w[L]}));let O=v.start+v.extent,A=v.start+(v.start+v.extent);[o,u,c].forEach(L=>{let H=w[L];if(H!=null){let G=p[L],te=0;switch(L){case o:te=t?G.left:G.top;break;case u:te=(A-H)/2;break;case c:te=O-H;break}t?G.setHorizontalPosition(te,H-G.getInsetLeft()-G.getInsetRight()):G.setVerticalPosition(te,H-G.getInsetTop()-G.getInsetBottom())}})}getSizesOfMarginBoxesAlongVariableDimension(e,t){var i;let r=e.start,s=e.center,o=e.end,u={};if(s){let c=[r,o],m=new aO(c),p=this.distributeAutoMarginBoxSizes(s,m,t);p.xSize!=null&&(u.center=p.xSize);let y=(i=p.xSize)!=null?i:s.getOuterSize(),S=Math.max((t-y)/2,0);r&&(u.start=r.hasAutoSize()?S:r.getOuterSize()),o&&(u.end=o.hasAutoSize()?S:o.getOuterSize())}else{let c=this.distributeAutoMarginBoxSizes(r,o,t);c.xSize!=null&&(u.start=c.xSize),c.ySize!=null&&(u.end=c.ySize)}return u}distributeAutoMarginBoxSizes(e,t,i){let r={xSize:null,ySize:null};if(e instanceof ao&&e.minMaxFitContent&&(r.xSize=e.getOuterSize()),t instanceof ao&&t.minMaxFitContent&&(r.ySize=t.getOuterSize()),e&&t)if(e.hasAutoSize()&&t.hasAutoSize()){let s=e.getOuterMaxContentSize(),o=t.getOuterMaxContentSize();if(s>0&&o>0){let u=s+o;if(u<i)r.xSize=i*s/u;else{let c=e.getOuterMinContentSize(),m=t.getOuterMinContentSize(),p=c+m;p<i?r.xSize=c+(i-p)*(s-c)/(u-p):p>0&&(r.xSize=i*c/p)}r.xSize>0&&(r.ySize=i-r.xSize)}else s>0?r.xSize=i:o>0&&(r.ySize=i)}else e.hasAutoSize()?r.xSize=Math.max(i-t.getOuterSize(),0):t.hasAutoSize()&&(r.ySize=Math.max(i-e.getOuterSize(),0));else e?e.hasAutoSize()&&(r.xSize=i):t&&t.hasAutoSize()&&(r.ySize=i);return r}prepareContainer(e,t,i,r,s){t.element.setAttribute("data-vivliostyle-page-box",!0),super.prepareContainer(e,t,i,r,s)}},ao=class{constructor(e,t,i,r,s){this.container=e,this.isHorizontal=i,this.clientLayout=s,f(this,"hasAutoSize_"),f(this,"size",null),f(this,"minMaxFitContent",null);let o=t[i?"width":"height"];if(this.hasAutoSize_=!o||o===N.auto||Ee(o),this.minMaxFitContent=o instanceof Jt&&(o.name==="min-content"||o.name==="max-content"||o.name==="fit-content")?o.name:null,this.minMaxFitContent){let u=this.getSize();if(this.isHorizontal){let c=u[this.minMaxFitContent==="min-content"?"min-content width":this.minMaxFitContent==="max-content"?"max-content width":"fit-content width"];this.container.setHorizontalPosition(this.container.left,c)}else{let c=u[this.minMaxFitContent==="min-content"?"min-content height":this.minMaxFitContent==="max-content"?"max-content height":"fit-content height"];this.container.setVerticalPosition(this.container.top,c)}}}hasAutoSize(){return this.hasAutoSize_}getSize(){if(!this.size){let e=this.isHorizontal?["max-content width","min-content width","fit-content width"]:["max-content height","min-content height","fit-content height"];this.size=fd(this.clientLayout,this.container.element,e)}return this.size}getOuterMaxContentSize(){let e=this.getSize();return this.isHorizontal?this.container.getInsetLeft()+e["max-content width"]+this.container.getInsetRight():this.container.getInsetTop()+e["max-content height"]+this.container.getInsetBottom()}getOuterMinContentSize(){let e=this.getSize();return this.isHorizontal?this.container.getInsetLeft()+e["min-content width"]+this.container.getInsetRight():this.container.getInsetTop()+e["min-content height"]+this.container.getInsetBottom()}getOuterSize(){return this.isHorizontal?this.container.getInsetLeft()+this.container.width+this.container.getInsetRight():this.container.getInsetTop()+this.container.height+this.container.getInsetBottom()}},aO=class{constructor(e){this.params=e}hasAutoSize(){return this.params.some(e=>{var t;return(t=e?.hasAutoSize())!=null?t:!1})}getOuterMaxContentSize(){let e=this.params.map(t=>{var i;return(i=t?.getOuterMaxContentSize())!=null?i:0});return Math.max.apply(null,e)*e.length}getOuterMinContentSize(){let e=this.params.map(t=>{var i;return(i=t?.getOuterMinContentSize())!=null?i:0});return Math.max.apply(null,e)*e.length}getOuterSize(){let e=this.params.map(t=>{var i;return(i=t?.getOuterSize())!=null?i:0});return Math.max.apply(null,e)*e.length}},If=class extends ao{constructor(e,t,i,r,s,o){super(e,t,i,r,s),f(this,"fixedSize"),this.fixedSize=o}hasAutoSize(){return!1}getOuterMaxContentSize(){return this.getOuterSize()}getOuterMinContentSize(){return this.getOuterSize()}getOuterSize(){return this.isHorizontal?this.container.getInsetLeft()+this.fixedSize+this.container.getInsetRight():this.container.getInsetTop()+this.fixedSize+this.container.getInsetBottom()}},oO=class extends Sn{constructor(e,t){super(e,t),f(this,"borderBoxWidth",null),f(this,"borderBoxHeight",null),f(this,"contentBoxWidth",null),f(this,"contentBoxHeight",null),f(this,"marginTop",null),f(this,"marginRight",null),f(this,"marginBottom",null),f(this,"marginLeft",null)}applyCascadeAndInit(e,t){for(let i in t)i.match(/^background-/)&&(this.cascaded[i]=t[i]);super.applyCascadeAndInit(e,t),this.parentInstance.setPageAreaDimension({borderBoxWidth:this.borderBoxWidth,borderBoxHeight:this.borderBoxHeight,marginTop:this.marginTop,marginRight:this.marginRight,marginBottom:this.marginBottom,marginLeft:this.marginLeft})}initHorizontal(){let e=this.resolvePageBoxDimensions({start:"left",end:"right",extent:"width"});this.borderBoxWidth=e.borderBoxExtent,this.contentBoxWidth=e.contentBoxExtent,this.marginLeft=e.marginStart,this.marginRight=e.marginEnd}initVertical(){let e=this.resolvePageBoxDimensions({start:"top",end:"bottom",extent:"height"});this.borderBoxHeight=e.borderBoxExtent,this.contentBoxHeight=e.contentBoxExtent,this.marginTop=e.marginStart,this.marginBottom=e.marginEnd}resolvePageBoxDimensions(e){let t=this.style,i=this.pageBox.pageSize,r=this.pageBox.scope,s=e.start,o=e.end,u=e.extent,c=i[u].toExpr(r,null),m=ze(r,t[u],c),p=ze(r,t[`margin-${s}`],c),y=ze(r,t[`margin-${o}`],c),S=ti(r,t[`padding-${s}`],c),v=ti(r,t[`padding-${o}`],c),w=Ii(r,t[`border-${s}-width`],t[`border-${s}-style`],c),T=Ii(r,t[`border-${o}-width`],t[`border-${o}-style`],c),E=ve(r,ve(r,w,S),ve(r,T,v)),P,O,A;return m?(this.borderBoxSizing?(O=m,A=Be(r,O,E)):(A=m,O=ve(r,A,E)),P=Be(r,c,O),!p&&!y?(p=Ea(r,P,new ft(r,.5)),y=p):p?y=Be(r,P,p):p=Be(r,P,y)):(p||(p=r.zero),y||(y=r.zero),P=ve(r,p,y),O=Be(r,c,P),A=Be(r,O,E),m=this.borderBoxSizing?O:A),t[s]=new re(p),t[o]=new re(y),t[`margin-${s}`]=$e,t[`margin-${o}`]=$e,t[`border-${s}-width`]=new re(w),t[`border-${o}-width`]=new re(T),t[`padding-${s}`]=new re(S),t[`padding-${o}`]=new re(v),t[u]=new re(m),t[`max-${u}`]=new re(m),{borderBoxExtent:O,contentBoxExtent:A,marginStart:p,marginEnd:y}}prepareContainer(e,t,i,r,s){t.element.setAttribute("data-vivliostyle-page-area-container",!0),super.prepareContainer(e,t,i,r,s),j(t.element,"position","relative"),j(t.element,"inset",""),j(t.element,"display","flow-root")}},Of=class extends Sn{constructor(e,t){super(e,t)}applyCascadeAndInit(e,t){for(let i in t)i.match(/^column.*$/)&&(this.cascaded[i]=t[i]);super.applyCascadeAndInit(e,{})}initHorizontal(){let e=this.style,t=this.parentInstance.style,i=this.pageBox.scope;e.left=t["padding-left"],e.width=new re(this.parentInstance.contentBoxWidth),e["margin-left"]=new re(new Yr(i,t.left.toExpr(i,null))),e["margin-right"]=new re(new Yr(i,t.right.toExpr(i,null))),e["border-left-width"]=t.left,e["border-right-width"]=t.right,e["border-left-style"]=N.solid,e["border-right-style"]=N.solid,e["border-left-color"]=N.transparent,e["border-right-color"]=N.transparent}initVertical(){let e=this.style,t=this.parentInstance.style,i=this.pageBox.scope;e.top=t["padding-top"],e.height=new re(this.parentInstance.contentBoxHeight),e["margin-top"]=new re(new Yr(i,t.top.toExpr(i,null))),e["margin-bottom"]=new re(new Yr(i,t.bottom.toExpr(i,null))),e["border-top-width"]=t.top,e["border-bottom-width"]=t.bottom,e["border-top-style"]=N.solid,e["border-bottom-style"]=N.solid,e["border-top-color"]=N.transparent,e["border-bottom-color"]=N.transparent}prepareContainer(e,t,i,r,s){t.element.setAttribute("data-vivliostyle-page-area",!0),i.pageAreaElement=t.element,super.prepareContainer(e,t,i,r,s),e.pageAreaWidth=parseFloat(i.pageAreaElement.style.width),e.pageAreaHeight=parseFloat(i.pageAreaElement.style.height),j(t.element,"position","relative"),j(t.element,"inset",""),j(t.element,"display","flow-root")}},Rf=class extends Sn{constructor(e,t){super(e,t),f(this,"boxInfo"),f(this,"suppressEmptyBoxGeneration",!0);let i=t.marginBoxName;this.boxInfo=bu[i];let r=e;r.pageMarginBoxInstances[i]=this}prepareContainer(e,t,i,r,s){t.element.setAttribute("data-vivliostyle-page-margin-box",this.pageBox.marginBoxName),this.applyVerticalAlign(e,t.element),super.prepareContainer(e,t,i,r,s)}applyVerticalAlign(e,t){j(t,"display","flex"),j(t,"flex-flow",this.vertical?this.rtl?"row-reverse":"row":"column");let i=this.getProp(e,"vertical-align"),r=null;i===J("middle")?r="center":i===J("top")?r="flex-start":i===J("bottom")&&(r="flex-end"),r&&j(t,"justify-content",r);let s=this.getProp(e,"content");if(this.vertical||s instanceof mi||s instanceof re&&s.expr instanceof dt&&s.expr.str.startsWith("running-element-")){let o="center";(this.boxInfo.isInTopRow||this.boxInfo.isInBottomRow)&&(this.boxInfo.isInLeftColumn||this.boxInfo.positionAlongVariableDimension==="end"?o=this.vertical||this.rtl?"start":"end":(this.boxInfo.isInRightColumn||this.boxInfo.positionAlongVariableDimension==="start")&&(o=this.vertical||this.rtl?"end":"start")),j(t,"align-items",o)}}positionAlongVariableDimension(e,t){let i=this.style,r=this.pageBox.scope,s=e.start,o=e.end,u=e.extent,c=s==="left",m=c?t.borderBoxWidth:t.borderBoxHeight,p=ze(r,i[u],m),y=c?t.marginLeft:t.marginTop;if(this.boxInfo.positionAlongVariableDimension==="start")i[s]=new re(y);else if(p){let S=ti(r,i[`margin-${s}`],m),v=ti(r,i[`margin-${o}`],m),w=ti(r,i[`padding-${s}`],m),T=ti(r,i[`padding-${o}`],m),E=Ii(r,i[`border-${s}-width`],i[`border-${s}-style`],m),P=Ii(r,i[`border-${o}-width`],i[`border-${o}-style`],m),O=ve(r,p,ve(r,this.borderBoxSizing?r.zero:ve(r,ve(r,w,T),ve(r,E,P)),ve(r,S,v)));switch(this.boxInfo.positionAlongVariableDimension){case"center":i[s]=new re(ve(r,y,Zl(r,Be(r,m,O),new ft(r,2))));break;case"end":i[s]=new re(Be(r,ve(r,y,m),O));break}}}positionAndSizeAlongFixedDimension(e,t){let i=this.style,r=this.pageBox.scope,s=this.borderBoxSizing,o=e.inside,u=e.outside,c=e.extent,m=t[`margin${u.charAt(0).toUpperCase()}${u.substring(1)}`],p=yf(r,i[`margin-${o}`],m),y=yf(r,i[`margin-${u}`],m),S=ti(r,i[`padding-${o}`],m),v=ti(r,i[`padding-${u}`],m),w=Ii(r,i[`border-${o}-width`],i[`border-${o}-style`],m),T=Ii(r,i[`border-${u}-width`],i[`border-${u}-style`],m),E=ze(r,i[c],m),P=null;function O(A){if(P)return P;P={extent:E?E.evaluate(A):null,marginInside:p?p.evaluate(A):null,marginOutside:y?y.evaluate(A):null};let L=m.evaluate(A),H=0;return s||[w,S,v,T].forEach(G=>{G&&(H+=G.evaluate(A))}),(P.marginInside===null||P.marginOutside===null)&&H+P.extent+P.marginInside+P.marginOutside>L&&(P.marginInside===null&&(P.marginInside=0),P.marginOutside===null&&(P.marginOutside=0)),P.extent!==null&&P.marginInside!==null&&P.marginOutside!==null&&(P.marginOutside=null),P.extent===null?(P.extent=L-H-P.marginInside-P.marginOutside,P.marginInside===null&&(P.marginInside=0),P.marginOutside===null&&(P.marginOutside=0)):typeof P.extent=="number"&&(P.marginInside===null&&typeof P.marginOutside=="number"?P.marginInside=L-H-P.extent-P.marginOutside:typeof P.marginInside=="number"&&P.marginOutside===null?P.marginOutside=L-H-P.extent-P.marginInside:P.marginInside=P.marginOutside=(L-H-P.extent)/2),P}i[c]=new re(new dt(r,function(){let A=O(this).extent;return A===null?"auto":A},c)),i[`margin-${o}`]=new re(new dt(r,function(){let A=O(this).marginInside;return A===null?"auto":A},`margin-${o}`)),i[`margin-${u}`]=new re(new dt(r,function(){let A=O(this).marginOutside;return A===null?"auto":A},`margin-${u}`)),o==="left"?i.left=new re(ve(r,t.marginLeft,t.borderBoxWidth)):o==="top"&&(i.top=new re(ve(r,t.marginTop,t.borderBoxHeight)))}initHorizontal(){let e=this.parentInstance.pageAreaDimension;this.boxInfo.isInLeftColumn?this.positionAndSizeAlongFixedDimension({inside:"right",outside:"left",extent:"width"},e):this.boxInfo.isInRightColumn?this.positionAndSizeAlongFixedDimension({inside:"left",outside:"right",extent:"width"},e):this.positionAlongVariableDimension({start:"left",end:"right",extent:"width"},e)}initVertical(){let e=this.parentInstance.pageAreaDimension;this.boxInfo.isInTopRow?this.positionAndSizeAlongFixedDimension({inside:"bottom",outside:"top",extent:"height"},e):this.boxInfo.isInBottomRow?this.positionAndSizeAlongFixedDimension({inside:"top",outside:"bottom",extent:"height"},e):this.positionAlongVariableDimension({start:"top",end:"bottom",extent:"height"},e)}finishContainer(e,t,i,r,s,o,u){super.finishContainer(e,t,i,r,s,o,u);let c=i.marginBoxes,m=this.pageBox.marginBoxName,p=this.boxInfo;!p.isInLeftColumn&&!p.isInRightColumn?p.isInTopRow?c.top[m]=t:p.isInBottomRow&&(c.bottom[m]=t):!p.isInTopRow&&!p.isInBottomRow&&(p.isInLeftColumn?c.left[m]=t:p.isInRightColumn&&(c.right[m]=t));let y=this.parentInstance.pageAreaDimension,S=this.getProp(e,"width"),v=S instanceof Jt&&(S.name==="min-content"||S.name==="max-content"||S.name==="fit-content")?S.name:null,w=this.getPropAsNumber(e,"min-width"),T=this.getPropAsNumber(e,"max-width");if(v||w||T){v&&j(t.element,"width",v),w&&j(t.element,"min-width",`${w}px`),T&&j(t.element,"max-width",`${T}px`);let L=this.getProp(e,"margin-left"),H=this.getProp(e,"margin-right");if(p.isInLeftColumn){let G=y.borderBoxWidth.evaluate(e)+y.marginRight.evaluate(e);j(t.element,"right",`${G}px`),(L===N.auto||H!==N.auto)&&j(t.element,"margin-left","auto"),H===N.auto&&j(t.element,"margin-right","auto")}else p.isInRightColumn&&(j(t.element,"right","0"),(H===N.auto||L!==N.auto)&&j(t.element,"margin-right","auto"),L===N.auto&&j(t.element,"margin-left","auto"))}let E=this.getProp(e,"height"),P=E instanceof Jt&&(E.name==="min-content"||E.name==="max-content"||E.name==="fit-content")?E.name:null,O=this.getPropAsNumber(e,"min-height"),A=this.getPropAsNumber(e,"max-height");if(P||O||A){P&&j(t.element,"height",P),O&&j(t.element,"min-height",`${O}px`),A&&j(t.element,"max-height",`${A}px`);let L=this.getProp(e,"margin-top"),H=this.getProp(e,"margin-bottom");if(p.isInTopRow){let G=y.borderBoxHeight.evaluate(e)+y.marginBottom.evaluate(e);j(t.element,"bottom",`${G}px`),(L===N.auto||H!==N.auto)&&j(t.element,"margin-top","auto"),H===N.auto&&j(t.element,"margin-bottom","auto")}else p.isInBottomRow&&(j(t.element,"bottom","0"),(H===N.auto||L!==N.auto)&&j(t.element,"margin-bottom","auto"),L===N.auto&&j(t.element,"margin-top","auto"))}}},lO=class{constructor(e,t,i,r,s){this.cascadeInstance=e,this.pageScope=t,this.rootPageBoxInstance=i,this.context=r,this.docElementStyle=s,f(this,"pageMasterCache",{}),this.definePageProgression()}definePageProgression(){let e=this.pageScope,t=this.context,i=t.isVersoFirstPage,r=new lt(e,"page-number"),s=new Xl(e,new Mp(e,r,new ft(e,2)),i?e.one:e.zero);e.defineName("recto-page",new ar(e,s)),e.defineName("verso-page",s),(t.pageProgression||Tf(this.docElementStyle))==="ltr"?(e.defineName("left-page",s),e.defineName("right-page",new ar(e,s))):(e.defineName("left-page",new ar(e,s)),e.defineName("right-page",s))}getCascadedPageStyle(e){let t={};return this.cascadeInstance.pushRule([],e,t),this.cascadeInstance.popRule(),t}getPageRulePageMaster(e,t){let i=e.pageBox;if(Object.keys(t).length===0)return i.resetScope(),e;let r=this.makeCacheKey(t,i),s=this.pageMasterCache[r];return s||(i.pseudoName===hu?s=this.generatePageRuleMaster(t):s=this.generateCascadedPageMaster(t,i),this.pageMasterCache[r]=s),s.pageBox.resetScope(),s}makeCacheKey(e,t){var i;let r=this.makeCascadeValueObjectKey(e),s=((i=this.context.currentLayoutPosition)==null?void 0:i.page)%2;return`${t.key}^${r}^${s}`}makeCascadeValueObjectKey(e){let t=[];for(let i in e)if(Object.prototype.hasOwnProperty.call(e,i)){let r=e[i],s;r instanceof xe?s=`${r.value}`:s=this.makeCascadeValueObjectKey(r),t.push(i+s+(r.priority||""))}return t.sort().join("^")}generatePageRuleMaster(e){let t=new Nf(this.pageScope,this.rootPageBoxInstance.pageBox,e).createInstance(this.rootPageBoxInstance);return t.applyCascadeAndInit(this.cascadeInstance,this.docElementStyle),t.resolveAutoSizing(this.context),t}generateCascadedPageMaster(e,t){let i=t.clone({pseudoName:yu}),r=i.specified,s=e.size;if(s&&!Ee(s.value)){let u=so(e),c=s.priority;Gi(r,"width",new xe(u.width,c),this.context),Gi(r,"height",new xe(u.height,c),this.context)}["counter-reset","counter-increment"].forEach(u=>{r[u]&&(e[u]=r[u])});let o=i.createInstance(this.rootPageBoxInstance);return o.applyCascadeAndInit(this.cascadeInstance,this.docElementStyle),o.resolveAutoSizing(this.context),o}},dO=class extends je{constructor(e){super(),this.pageType=e}apply(e){e.currentPageType===this.pageType&&this.chained.apply(e)}getPriority(){return 3}makePrimary(e){return this.chained&&e.insertInTable(e.pagetypes,this.pageType,this.chained),!0}},uO=class extends je{constructor(e){super(),this.scope=e}apply(e){new lt(this.scope,"page-number").evaluate(e.context)===1&&this.chained.apply(e)}getPriority(){return 2}},cO=class extends je{constructor(e){super(),this.scope=e}apply(e){new lt(this.scope,"blank-page").evaluate(e.context)&&this.chained.apply(e)}getPriority(){return 2}},hO=class extends je{constructor(e){super(),this.scope=e}apply(e){new lt(this.scope,"left-page").evaluate(e.context)&&this.chained.apply(e)}getPriority(){return 1}},pO=class extends je{constructor(e){super(),this.scope=e}apply(e){new lt(this.scope,"right-page").evaluate(e.context)&&this.chained.apply(e)}getPriority(){return 1}},mO=class extends je{constructor(e){super(),this.scope=e}apply(e){new lt(this.scope,"recto-page").evaluate(e.context)&&this.chained.apply(e)}getPriority(){return 1}},gO=class extends je{constructor(e){super(),this.scope=e}apply(e){new lt(this.scope,"verso-page").evaluate(e.context)&&this.chained.apply(e)}getPriority(){return 1}},fO=class extends ws{constructor(e,t,i){super(t,i),this.scope=e,this.a=t,this.b=i}apply(e){let t=e.context,i=t.layoutPositionAtPageStart.page;t.blankPageAtStart&&i--,i&&this.matchANPlusB(i)&&this.chained.apply(e)}getPriority(){return 2}},bO=class extends jd{constructor(e,t){super(e,t,null,null,null)}apply(e){yO(e.context,e.currentStyle,this.style,this.specificity,e)}};function yO(e,t,i,r,s){Ha(e,t,i,r,null,null,null);let o=i[zs];if(o){let u=Va(t,zs);for(let c in o)if(o.hasOwnProperty(c)){let m=u[c];m||(m={},u[c]=m),Ha(e,m,o[c],r,null,null,null)}}}var vO=class extends ks{constructor(e,t,i,r,s){super(e,t,i?.condition,i,null,r,!1),this.pageProps=s,f(this,"currentPageSelectors",[]),f(this,"currentNamedPageSelector",""),f(this,"currentPseudoPageClassSelectors",[])}startPageRule(){this.startSelectorRule()}tagSelector(e,t){this.currentNamedPageSelector=t,t&&(this.chain.push(new dO(t)),this.specificity+=65536)}pseudoclassSelector(e,t){if(e=e.toLowerCase(),t)switch(e){case"nth":{let[i,r]=t;this.currentPseudoPageClassSelectors.push(`:${e}(${i}n${r<0?r:"+"+r})`),this.chain.push(new fO(this.scope,i,r)),this.specificity+=256}break;default:this.reportAndSkip(`E_INVALID_PAGE_SELECTOR :${e}(${t.join("")})`);break}else switch(this.currentPseudoPageClassSelectors.push(`:${e}`),e){case"first":this.chain.push(new uO(this.scope)),this.specificity+=256;break;case"blank":this.chain.push(new cO(this.scope)),this.specificity+=256;break;case"left":this.chain.push(new hO(this.scope)),this.specificity+=1;break;case"right":this.chain.push(new pO(this.scope)),this.specificity+=1;break;case"recto":this.chain.push(new mO(this.scope)),this.specificity+=1;break;case"verso":this.chain.push(new gO(this.scope)),this.specificity+=1;break;default:this.reportAndSkip(`E_INVALID_PAGE_SELECTOR :${e}`);break}}finishSelector(){let e;!this.currentNamedPageSelector&&!this.currentPseudoPageClassSelectors.length?e=null:e=[this.currentNamedPageSelector].concat(this.currentPseudoPageClassSelectors.sort()),this.currentPageSelectors.push({selectors:e,specificity:this.specificity}),this.currentNamedPageSelector="",this.currentPseudoPageClassSelectors=[]}nextSelector(){this.finishSelector(),super.nextSelector()}startRuleBody(){this.finishSelector(),super.startRuleBody()}simpleProperty(e,t,i){if((e==="bleed"||e==="marks")&&!this.currentPageSelectors.some(o=>o.selectors===null))return;super.simpleProperty(e,t,i);let r=Nt(this.elementStyle,e),s=this.pageProps;if(e==="bleed"||e==="marks")s[""]||(s[""]={}),Object.keys(s).forEach(o=>{Rr(s[o],e,r)});else if(e==="size"){let o=s[""];this.currentPageSelectors.forEach(u=>{let c=new xe(r.value,r.priority+u.specificity),m=u.selectors?u.selectors.join(""):"",p=s[m];p?Gi(p,e,c):(p=s[m]={},Rr(p,e,c),o&&["bleed","marks"].forEach(y=>{o[y]&&Rr(p,y,o[y])}))})}}insertNonPrimary(e){this.cascade.insertInTable(this.cascade.pagetypes,"*",e)}makeApplyRuleAction(e){return new bO(this.elementStyle,e)}startPageMarginBoxRule(e){let t=Va(this.elementStyle,zs),i=t[e];i||(i={},t[e]=i);let r=new SO(this.scope,this.owner,this.validatorSet,i);this.owner.pushHandler(r)}},SO=class extends os{constructor(e,t,i,r){super(e,t,!1),this.validatorSet=i,this.boxStyle=r}property(e,t,i){this.validatorSet.validatePropertyAndHandleShorthand(e,t,i,this)}invalidPropertyValue(e,t){this.report(`E_INVALID_PROPERTY_VALUE ${e}: ${t.toString()}`)}unknownProperty(e,t){this.report(`E_INVALID_PROPERTY ${e}: ${t.toString()}`)}simpleProperty(e,t,i){let r=i?this.getImportantSpecificity():this.getBaseSpecificity(),s=new xe(t,r);Rr(this.boxStyle,e,s)}},Yi=!0;function xO(e){Yi=e}var Fr=[];function Lf(e,t){return e===t||(e.src||t.src?e.src===t.src:e.textContent===t.textContent)}function _f(e){let t=Array.from(e.querySelectorAll("body > :not(script):not(link):not(style) ~ script"));return Array.from(e.querySelectorAll("head > script, body > script")).filter(i=>!t.includes(i))}function vu(e,t,i){var r,s;if(!Yi||!(i!=null&&i.inHead)&&!(i!=null&&i.atEnd)&&_f(e.ownerDocument).includes(e))return q(!1);let o=e.textContent,u=e.src,c=e.type==="module",m=(c||u)&&e.async,p=c&&!m||u&&e.defer,y=!(i!=null&&i.atEnd)&&(i?.forceDefer||p||m);if(Bf(t)||(t.onload=null),y)return Fr.some(v=>Lf(v,e))||Fr.push(e),q(!0);if(u.includes("/mathjax")){let v=t.document.head.querySelector("script[src*='MathJax.js']:not([data-vivliostyle-scripting])");if(v){if(u.includes("/mathjax@3"))t.document.head.removeChild(v),(s=(r=t.MathJax)==null?void 0:r.version)!=null&&s.startsWith("2.")&&delete t.MathJax;else if(u.includes("/MathJax.js"))return q(!0)}}for(let v of t.document.head.getElementsByTagName("script"))v.hasAttribute("data-vivliostyle-scripting")&&Lf(v,e)&&t.document.head.removeChild(v);let S=t.document.createElement("script");S.textContent=o,u&&(S.src=u),S.async=m,S.defer=p,S.setAttribute("data-vivliostyle-scripting","true");for(let v of e.attributes)["src","async","defer"].includes(v.name)||S.setAttribute(v.name,v.value);if(ee.debug("script:",u),u){let v=Qr(S);return t.document.head.appendChild(S),Oa([v])}else return t.document.head.appendChild(S),q(!0)}function wO(e,t){var i;let r={},s=u=>{var c;let m=(c=u["font-family"])==null?void 0:c.value;if(m)if(m.values)for(let y of m.values)r[y.stringValue()]=!0;else r[m.stringValue()]=!0;let p=u._marginBoxes;if(p)for(let y of Object.values(p))s(y)},o=u=>{if(u instanceof jd)s(u.style);else if(u instanceof mn||Array.isArray(u))for(let c of Object.values(u))o(c)};for(let u of Object.values(t.cascade.code))for(let c of Object.values(u??{}))o(c);for(let u of e.querySelectorAll("[style]"))(i=u.style)!=null&&i.fontFamily&&(r[u.style.fontFamily]=!0);return Object.keys(r).join(",")}function CO(e,t,i){var r;let s=(r=t.document.querySelector("[data-vivliostyle-textcontent]"))!=null?r:t.document.createElement("div");return s.style.position="fixed",s.style.fontSize="0",s.setAttribute("data-vivliostyle-textcontent","true"),s.setAttribute("aria-hidden","true"),s.style.fontFamily=wO(e,i),s.textContent=e.documentElement.textContent,t.document.body.appendChild(s),s}function kO(e,t,i){if(!Yi)return q(!1);let r=_f(e);if(r.length===0)return q(!1);let s=r.some(y=>!(y.async||y.defer||y.type==="module")),o=s?CO(e,t,i):null,u=t.document.fonts,c=t.$,m=!1,p=Z("loadScripts");return p.loop(()=>{if(r.length===0)return s?p.sleep(20).thenAsync(()=>{var S,v;return u.status==="loading"||t.document.documentElement.classList.contains("wf-loading")||(S=t.FontJSON)!=null&&S.Font&&(v=t.ret)!=null&&v.readyState&&t.ret.readyState<4?q(!0):q(!1)}):q(!1);let y=r.shift();return vu(y,t,{inHead:!0,forceDefer:m}).thenAsync(()=>(!m&&t.$!==c&&(Fr.push(y),m=!0),r.length===0&&s&&(ee.debug("dispatchEvent: DOMContentLoaded (document)"),t.document.dispatchEvent(new Event("DOMContentLoaded"))),q(!0)))}).then(()=>{o&&o.remove(),p.finish(!0)}),p.result()}function EO(e){if(!Yi)return q(!1);let t=Z("loadScripts");return t.loop(()=>Fr.length===0?q(!1):vu(Fr.shift(),e,{atEnd:!0}).thenReturn(Fr.length>0)).then(()=>{ee.debug("dispatchEvent: DOMContentLoaded (window)"),e.dispatchEvent(new Event("DOMContentLoaded")),ee.debug("dispatchEvent: load (window)"),e.dispatchEvent(new Event("load")),t.finish(!0)}),t.result()}function Bf(e){return Yi?Fr.length>0||!!e.document.head.querySelector("script[data-vivliostyle-scripting]"):!1}var TO=(e,t,i)=>e.replace(/[uU][rR][lL]\(\s*"((\\([^0-9a-fA-F]+|[0-9a-fA-F]+\s*)|[^"\r\n])+)"/gm,(r,s)=>`url("${i.transformURL(s,t)}"`).replace(/[uU][rR][lL]\(\s*'((\\([^0-9a-fA-F]+|[0-9a-fA-F]+\s*)|[^'\r\n])+)'/gm,(r,s)=>`url('${i.transformURL(s,t)}'`).replace(/[uU][rR][lL]\(\s*((\\([^0-9a-fA-F]+|[0-9a-fA-F]+\s*)|[^"'\r\n\)\s])+)/gm,(r,s)=>`url(${i.transformURL(s,t)}`),PO={};function AO(e){e.addEventListener("load",()=>{e.contentWindow.navigator.epubReadingSystem={name:"adapt",version:"0.1",layoutStyle:"paginated",hasFeature:function(t,i){switch(t){case"mouse-events":return!0}return!1}}},!1)}var Ff=class np extends Dl{constructor(t,i,r,s,o,u,c,m,p,y,S,v,w){super(),this.flowName=t,this.context=i,this.viewport=r,this.styler=s,this.regionIds=o,this.xmldoc=u,this.docFaces=c,this.footnoteStyle=m,this.stylerProducer=p,this.page=y,this.customRenderer=S,this.fallbackMap=v,this.documentURLTransformer=w,f(this,"document"),f(this,"exprContentListener"),f(this,"nodeContext",null),f(this,"viewRoot",null),f(this,"isFootnote",!1),f(this,"sourceNode",null),f(this,"offsetInNode",0),f(this,"viewNode",null),this.document=r.document,this.exprContentListener=s.counterListener.getExprContentListener()}clone(){return new np(this.flowName,this.context,this.viewport,this.styler,this.regionIds,this.xmldoc,this.docFaces,this.footnoteStyle,this.stylerProducer,this.page,this.customRenderer,this.fallbackMap,this.documentURLTransformer)}createPseudoelementShadow(t,i,r,s,o,u,c,m){let p=this.getPseudoMap(r,this.regionIds,this.isFootnote,this.nodeContext,u);if(!p)return m;let y=[],S=Za.createElementNS("http://www.pyroxy.com/ns/shadow","root"),v=S;for(let T of EN){let E;if(T){if(!p[T]||T=="footnote-marker"&&!(i&&this.isFootnote))continue;if(T.match(/^first-/)){let P=s.display;if(!P||P===N.inline)continue;let O=t.firstElementChild;if(O&&Tt(O.previousSibling)){let A=o.getStyle(O,!1);if(A){let L=Nt(A,"display");if(L!=null&&L.value&&L.value!==N.inline)continue}}}if(T==="before"||T==="after"){let P=p[T].content;if(!P||!hr(P.value))continue}y.push(T),E=Za.createElementNS("http://www.w3.org/1999/xhtml","span"),eu(E,T)}else E=Za.createElementNS("http://www.pyroxy.com/ns/shadow","content");v.appendChild(E),T.match(/^first-/)&&(v=E)}if(!y.length)return m;let w=new Bg(t,r,o,u,this.exprContentListener);return new wd(t,S,null,c,m,fi.ROOTLESS,w)}getPseudoMap(t,i,r,s,o){let u=Ei(t,"_pseudos");if(!u)return null;let c={};for(let m in u){let p=c[m]={};Ts(p,u[m],o),Kd(p,o,u[m]),Cg(u[m],i,r,(y,S)=>{Ts(p,S,o),vg(S,v=>{Ts(p,v,o)})})}return c}createRefShadow(t,i,r,s,o){let u=Z("createRefShadow");return this.xmldoc.store.load(t).then(c=>{let m=c;if(m){let p=m.getElement(t);if(p){let y=this.stylerProducer.getStylerForDoc(m);o=new wd(r,p,m,s,o,i,y)}}u.finish(o)}),u.result()}createShadows(t,i,r,s,o,u,c){let m=Z("createShadows"),p=null,y=s.template,S;if(y instanceof mi||y===N.footnote){let v=y instanceof mi?y.url:et("user-agent.xml#footnote",kr);S=this.createRefShadow(v,fi.ROOTLESS,t,c,p)}else S=q(p);return S.then(v=>{let w=null;if(t.namespaceURI=="http://www.pyroxy.com/ns/shadow"&&t.localName=="include"){let E=t.getAttribute("href"),P=null;E?P=c?c.xmldoc:this.xmldoc:c&&(c.owner.namespaceURI=="http://www.w3.org/1999/xhtml"?E=c.owner.getAttribute("href"):E=c.owner.getAttributeNS("http://www.w3.org/1999/xlink","href"),P=c.parentShadow?c.parentShadow.xmldoc:this.xmldoc),E&&(E=et(E,P.url),w=this.createRefShadow(E,fi.ROOTED,t,c,v))}w==null&&(w=q(v));let T=null;w.then(E=>{if(s.display===N.table_cell){let P=et("user-agent.xml#table-cell",kr);T=this.createRefShadow(P,fi.ROOTLESS,t,c,E)}else T=q(E);T.then(P=>{P=this.createPseudoelementShadow(t,i,r,s,o,u,c,P),m.finish(P)})})}),m.result()}setViewRoot(t,i){this.viewRoot=t,this.isFootnote=i}computeStyle(t,i,r,s){var o;let u=this.context,c=wg(r,u,this.regionIds,this.isFootnote,this.nodeContext),m=!((o=this.nodeContext)!=null&&o.parent);m&&(!c["writing-mode"]&&this.styler.rootStyle["writing-mode"]&&(c["writing-mode"]=this.styler.rootStyle["writing-mode"]),!c.direction&&this.styler.rootStyle.direction&&(c.direction=this.styler.rootStyle.direction));let p=t;t=Sg(c,u,t);let y=!m&&t!==p;i=xg(c,u,i);let S=(O,A)=>{let L;y&&(t?/^(min-|max-)?(height|inline-size)$/.test(O)&&(L=u.pageAreaHeight):/^(min-|max-)?(width|inline-size)$/.test(O)&&(L=u.pageAreaWidth));let H=A.evaluate(u,O,L,t);return O=="font-family"&&(H=this.docFaces.filterFontFamily(H)),H},v=!!new lt(u.style.pageScope,"left-page").evaluate(u);if(kg(c,s,t,i,v,S),y){let O=s[t?"height":"width"];(!O||O===N.auto)&&(s[t?"height":"width"]=N.max_content)}if(Td(s.position))return s.position=N.fixed,s.visibility=N.hidden,t;let w=s.position,T=s.float,E=s.display||(this.sourceNode.namespaceURI==="http://www.w3.org/1999/xhtml"?N.inline:void 0),P=Ym(E,w,T,this.sourceNode===this.xmldoc.root);return["display","position","float"].forEach(O=>{P[O]&&(s[O]=P[O])}),t}inheritFromSourceParent(t){let i=this.nodeContext.sourceNode,r=[],s=null,o=this.nodeContext.shadowContext,u=-1;for(;i&&i.nodeType==1;){let S=o&&o.root==i;if(!S||o.type==fi.ROOTLESS){let v=(o?o.styler:this.styler).getStyle(i,!1);r.push(v),s=s||zl(i)}S?(i=o.owner,o=o.parentShadow):(i=i.parentNode,u++)}let c=u===0,m=this.context.queryUnitSize("em",c),p={"font-size":new xe(new U(m,"px"),0)},y=new NA(p,this.context);for(let S=r.length-1;S>=0;--S){let v=r[S],w=[];for(let P in v)Ss(P)&&w.push(P);w.sort(Xp);let T,E;for(let P of w){y.setPropName(P);let O=Nt(v,P),A=O;Ee(O.value)||(P==="font-size"&&S===r.length-1&&this.context.isRelativeRootFontSize&&this.context.rootFontSize?A=new xe(new U(this.context.rootFontSize,"px"),O.priority):P==="line-height"&&S===r.length-1&&this.context.rootLineHeight&&O.value instanceof U&&(O.value.unit==="lh"||O.value.unit==="rlh")?A=new xe(new U(this.context.rootLineHeight,"px"),O.priority):S===0&&O.value instanceof U&&O.value.unit==="lh"?A=new xe(new U(O.value.num*this.getLineHeightUnitSize(P,T,E),"px"),O.priority):qi(P)||(A=O.filterValue(y)),P==="font-size"?T=A.value:P==="line-height"&&(E=A.value),p[P]=A)}}for(let S in t)Ss(S)||(p[S]=t[S]);return{lang:s,elementStyle:p}}resolveURL(t){return t=et(t,this.xmldoc.url),this.fallbackMap[t]||t}inheritLangAttribute(){this.nodeContext.lang=zl(this.nodeContext.sourceNode)||this.nodeContext.parent&&this.nodeContext.parent.lang||this.nodeContext.lang}transferPolyfilledInheritedProps(t){let i=SA().filter(r=>t[r]);if(i.length){let r=this.nodeContext.inheritedProps;if(this.nodeContext.parent){r=this.nodeContext.inheritedProps={};for(let s in this.nodeContext.parent.inheritedProps)r[s]=this.nodeContext.parent.inheritedProps[s]}i.forEach(s=>{let o=t[s];if(o){if(Ee(o))o===N.initial&&(r[s]=void 0);else if(o instanceof Tr)r[s]=o.num;else if(o instanceof Jt)r[s]=o.name;else if(o instanceof U){let u=o;switch(u.unit){case"dpi":case"dpcm":case"dppx":r[s]=u.num*Ue[u.unit];break;default:r[s]=o}}else r[s]=o;["widows","orphans"].includes(s)||delete t[s]}})}}resolveFormattingContext(t,i,r,s,o,u){let c=Je("RESOLVE_FORMATTING_CONTEXT");for(let m=0;m<c.length;m++){let p=c[m](t,i,r,s,o,u);if(p){t.formattingContext=p;return}}}createElementView(t,i){var r,s,o,u;let c=!0,m=Z("createElementView"),p=this.sourceNode,y=this.nodeContext.shadowContext?this.nodeContext.shadowContext.styler:this.styler,S=y.getStyle(p,!1);if(!this.nodeContext.shadowContext){let H=this.xmldoc.getElementOffset(p);ja.registerFragmentIndex(H,this.nodeContext.fragmentIndex,0)}let v={};if(!this.nodeContext.parent){let H=this.inheritFromSourceParent(S);S=H.elementStyle,this.nodeContext.lang=H.lang}let w=S.position,T=S.float,E=S["float-reference"],P=T&&!Ee(T.value)&&T.value!==N.none&&E&&!Ee(E.value)?eA(E.value.toString()):null;if(this.nodeContext.parent&&(Td(w?.value)||P&&sn(P))){let H=this.inheritFromSourceParent(S);S=H.elementStyle,this.nodeContext.lang=H.lang}this.nodeContext.vertical=this.computeStyle(this.nodeContext.vertical,this.nodeContext.direction==="rtl",S,v),P&&sn(P)&&v.display===N.block&&(v.display=N.flow_root),y.processContent(p,v,(s=this.nodeContext.viewNode)!=null?s:(r=this.nodeContext.parent)==null?void 0:r.viewNode),this.transferPolyfilledInheritedProps(v),this.inheritLangAttribute(),v.direction&&(this.nodeContext.direction=v.direction.toString());let O=v["flow-into"];if(O&&O.toString()!=this.flowName)return m.finish(!1),m.result();if(Yi&&p.localName==="script"&&p.namespaceURI==="http://www.w3.org/1999/xhtml")return vu(p,this.viewport.window).thenFinish(m),m.result();let A=v.display;if(Ee(A)&&(A===N.initial||A===N.unset?A=N.inline:A===N.inherit?A=((o=this.nodeContext.parent)==null?void 0:o.display)&&J((u=this.nodeContext.parent)==null?void 0:u.display):A=null),A===N.none)return m.finish(!1),m.result();let L=this.nodeContext.parent==null;return this.nodeContext.flexContainer=A===N.flex,this.createShadows(p,L,S,v,y,this.context,this.nodeContext.shadowContext).then(H=>{var G,te;this.nodeContext.nodeShadow=H;let ae=v.position,ge=v.float,we=v.clear,di=this.nodeContext.vertical?N.vertical_rl:N.horizontal_tb,Bt=this.nodeContext.parent?this.nodeContext.parent.vertical?N.vertical_rl:N.horizontal_tb:di,It=oA(p),_=v["column-count"],Q=v["column-width"],R=_&&_!==N.auto&&!Ee(_)||Q&&Q!==N.auto&&!Ee(Q);this.nodeContext.establishesBFC=lA(A,ae,ge,v.overflow,di,Bt,R||It),this.nodeContext.containingBlockForAbsolute=dA(ae),this.nodeContext.isInsideBFC()&&ge!==N.footnote&&!(P&&sn(P))&&(ge=null,we=null);let W=ge instanceof Ke||ge===N.left||ge===N.right||ge===N.top||ge===N.bottom||ge===N.inline_start||ge===N.inline_end||ge===N.block_start||ge===N.block_end||ge===N.snap_block||ge===N.snap_inline||ge===N.inside||ge===N.outside||ge===N.footnote;ge&&(delete v.float,ge===N.footnote&&(this.isFootnote?(W=!1,v.display=N.block):v.display=N.inline)),we&&(we===N.inherit&&this.nodeContext.parent&&this.nodeContext.parent.clearSide&&(we=J(this.nodeContext.parent.clearSide)),(we===N.left||we===N.right||we===N.top||we===N.bottom||we===N.inline_start||we===N.inline_end||we===N.block_start||we===N.block_end||we===N.inside||we===N.outside||we===N.both||we===N.all||we===N.same||we===N.column||we===N.region||we===N.page)&&(delete v.clear,v.display&&v.display!=N.inline&&(this.nodeContext.clearSide=we.toString())));let F=A===N.list_item&&v["ua-list-item-count"],$=v["break-inside"];(W||$&&!Ee($)&&$!==N.auto)&&this.nodeContext.breakPenalty++,A&&A!==N.inline&&Ir(A)&&this.nodeContext.breakPenalty++,this.nodeContext.inline=!W&&!A||Ir(A)||Km(A),this.nodeContext.display=A?A.toString():"inline",this.nodeContext.floatSide=W?ge.toString():null,this.nodeContext.floatReference=P||st.INLINE;let X=v["float-min-wrap-block"];this.nodeContext.floatMinWrapBlock=X&&!Ee(X)?X:null;let ie=this.isInsideNonRootMultiColumn();!L&&R&&v["column-fill"]===N.auto&&(v["--viv--saved-column-fill"]=N.auto,v["column-fill"]=N.balance);let le=v["column-span"];if(this.nodeContext.columnSpan=!ie&&le&&!Ee(le)?le:null,!this.nodeContext.inline){let ne=v["break-after"];ne&&!Ee(ne)&&!(ie&&ne===N.column)&&(this.nodeContext.breakAfter=ne.toString(),yd[this.nodeContext.breakAfter]&&(v["break-after"]=N.column));let ii=v["break-before"];ii&&!Ee(ii)&&!(ie&&ii===N.column)&&(this.nodeContext.breakBefore=ii.toString(),yd[this.nodeContext.breakBefore]&&(v["break-before"]=N.column),this.nodeContext.fragmentIndex!==1&&(this.nodeContext.breakBefore=null));let yi=v.page,ri=yi&&!Ee(yi)&&yi.toString();!ri&&!this.nodeContext.parent&&(this.nodeContext.shadowContext||A===N.table_header_group||A===N.table_footer_group)&&(ri=this.styler.cascade.currentPageType),!ri||ri.toLowerCase()==="auto"?ri=this.nodeContext.pageType:this.nodeContext.pageType=ri,this.styler.cascade.currentPageType!==ri&&!(!ri&&v.position===N.fixed)&&(this.nodeContext.fragmentIndex===1&&!us(this.nodeContext.breakBefore)&&(this.nodeContext.breakBefore="page"),ri!==this.styler.cascade.previousPageType&&(this.styler.cascade.previousPageType=this.styler.cascade.currentPageType),this.styler.cascade.currentPageType=ri)}this.nodeContext.verticalAlign=v["vertical-align"]&&v["vertical-align"].toString()||"baseline",this.nodeContext.captionSide=v["caption-side"]&&v["caption-side"].toString()||"top";let Ce=v["border-collapse"];if(!Ce||Ce===J("separate")){let ne=v["border-spacing"],ii,yi;ne&&(ne instanceof Ke?(ii=ne.values[0],yi=ne.values[1]):ii=yi=ne,ii.isNumeric()&&(this.nodeContext.inlineBorderSpacing=Dt(ii,this.context)),yi.isNumeric()&&(this.nodeContext.blockBorderSpacing=Dt(yi,this.context)))}let Te=v["footnote-policy"];this.nodeContext.footnotePolicy=Te&&!Ee(Te)?Te:null;let ke=v["x-first-pseudo"];if(ke){let ne=this.nodeContext.parent?this.nodeContext.parent.firstPseudo:null;this.nodeContext.firstPseudo=new KP(ne,ke.num)}this.nodeContext.inline||this.processAfterIfcontinues(p,S,y,this.context);let qe=v["white-space"];if(qe){let ne=Dm(qe.toString());ne!==null&&(this.nodeContext.whitespace=ne)}let Oe=v["hyphenate-character"];Oe&&Oe instanceof bt&&(this.nodeContext.hyphenateCharacter=Oe.str);let Ye=v["word-break"],pt=v["line-break"],at=v["overflow-wrap"];(Ye===N.break_all||pt===N.anywhere||at===N.break_word||at===N.anywhere)&&(this.nodeContext.breakWord=!0),this.resolveFormattingContext(this.nodeContext,t,A,ae,ge,L),this.nodeContext.parent&&this.nodeContext.parent.formattingContext&&(t=this.nodeContext.parent.formattingContext.isFirstTime(this.nodeContext,t)),this.nodeContext.inline||(this.nodeContext.repeatOnBreak=this.processRepeatOnBreak(v),this.findAndProcessRepeatingElements(p,y));let Ne=!1,Me=null,_e=[],Ie=p.namespaceURI,ue=p.localName,Ve=ue;if(Ie=="http://www.w3.org/1999/xhtml"?(ue=="html"||ue=="body"||ue=="script"||ue=="link"||ue=="meta"?ue="div":ue=="vide_"?ue="video":ue=="audi_"?ue="audio":ue=="object"&&(Ne=!!this.customRenderer),p.getAttribute(Jd)&&(te=(G=S.content)==null?void 0:G.value)!=null&&te.url&&(ue="img")):Ie=="http://www.idpf.org/2007/ops"?(ue="span",Ie="http://www.w3.org/1999/xhtml"):Ie=="http://www.pyroxy.com/ns/shadow"?(Ie="http://www.w3.org/1999/xhtml",ue=this.nodeContext.inline?"span":"div"):Ne=!!this.customRenderer,F)t?ue="li":(ue="div",A=N.block,v.display=A);else if(ue=="body"||ue=="li")ue="div";else if(ue=="q")ue="span";else if(ue=="a"){let ne=v["hyperlink-processing"];ne&&ne.toString()!="normal"&&(ue="span")}v.behavior&&v.behavior.toString()!="none"&&this.customRenderer&&(Ne=!0),p.dataset&&p.getAttribute("data-math-typeset")==="true"&&(Ne=!0);let Lt;if(Ne){let ne=this.nodeContext.parent?this.nodeContext.parent.viewNode:null;Lt=this.customRenderer(p,ne,v)}else Lt=q(null);Lt.then(ne=>{if(ne)Ne&&(c=ne.getAttribute("data-adapt-process-children")=="true");else if(v.display===N.none){m.finish(!1);return}else ne=this.createElement(Ie,ue);ue!=Ve&&(ne.setAttribute("data-vivliostyle-original-tag",Ve),(Ve==="html"||Ve==="body")&&(ne.role="presentation")),ue=="a"&&ne.addEventListener("click",this.page.hrefHandler,!1),Me&&(this.applyPseudoelementStyle(this.nodeContext,"inner",Me),ne.appendChild(Me)),ne.localName=="iframe"&&ne.namespaceURI=="http://www.w3.org/1999/xhtml"&&AO(ne);let ii=this.nodeContext.inheritedProps["image-resolution"],yi=[],ri=v.width,ku=v.height,aR=p.getAttribute("width"),oR=p.getAttribute("height"),Eu=ri===N.auto||!ri&&!aR,Tu=ku===N.auto||!ku&&!oR,tb=p.attributes,lR=tb.length,po=null,ib=null;for(let Xt=0;Xt<lR;Xt++){let Oi=tb[Xt],ni=Oi.namespaceURI,Le=Oi.localName,St=Oi.nodeValue;if(ni){if(ni=="http://www.w3.org/2000/xmlns/")continue;ni=="http://www.w3.org/1999/xlink"&&Le=="href"&&(St=this.documentURLTransformer.transformURL(this.resolveURL(St),this.xmldoc.url))}else{if(!Yi&&Le.match(/^on/)||Le=="style")continue;if((Le=="id"||Le=="name")&&t){let Ot=this.documentURLTransformer.transformFragment(St,this.xmldoc.url);ne.setAttribute(Le,St),ne.setAttribute("data-vivliostyle-id",Ot);let wn=ne.ownerDocument.createElement("a");wn.setAttribute(Le,Ot),wn.setAttribute(nn,"1"),ne.appendChild(wn),this.page.registerElementWithId(ne,Ot);continue}if(Le=="src"||Le=="href"||Le=="poster")St=this.resolveURL(St),Le==="href"&&(St=this.documentURLTransformer.transformURL(St,this.xmldoc.url));else if(Le=="srcset")St=St.split(",").map(Ot=>this.resolveURL(Ot.trim())).join(",");else if(Le==="data"&&Ne&&ue==="object"&&ne.hasAttribute("data"))continue;if(Le==="poster"&&ue==="video"&&Ie==="http://www.w3.org/1999/xhtml"&&Eu&&Tu){let Ot=new Image,wn=Qr(Ot,St);_e.push(wn),yi.push({image:Ot,element:ne,fetcher:wn})}}if(Ie=="http://www.w3.org/2000/svg"&&/^[A-Z\-]+$/.test(Le)&&(Le=Le.toLowerCase()),this.isSVGUrlAttribute(Le)&&(St=TO(St,this.xmldoc.url,this.documentURLTransformer)),ni){let Ot=PO[ni];Ot&&(Le=`${Ot}:${Le}`)}if(Le=="src"&&!ni&&(ue=="img"||ue=="input")&&Ie=="http://www.w3.org/1999/xhtml")po=St;else if(Le=="alt"&&!ni&&ue=="img"&&Ie=="http://www.w3.org/1999/xhtml")ib=St;else if(Le=="href"&&ue=="image"&&Ie=="http://www.w3.org/2000/svg"&&ni=="http://www.w3.org/1999/xlink")this.page.fetchers.push(Qr(ne,St));else if(ni)ne.setAttributeNS(ni,Le,St);else try{ne.setAttribute(Le,St)}catch(Ot){ee.warn(Ot)}}if(po){let Xt=ue==="input"?new Image:ne,Oi=Qr(Xt,po,ib);Xt!==ne&&(ne.src=po);let ni=()=>{var Le,St;if(v.position===N.fixed)return!0;for(let Ot=(Le=this.nodeContext.parent)==null?void 0:Le.viewNode;Ot&&Ot!==this.viewRoot;Ot=Ot.parentElement)if(((St=Ot.style)==null?void 0:St.position)==="fixed")return!0;return!1};!Eu&&!Tu&&!(()=>{let Le=this.nodeContext.vertical?ri:ku;return Le instanceof U&&Le.unit==="%"})()&&!ni()?this.page.fetchers.push(Oi):(Eu&&Tu&&ii&&ii!==1&&yi.push({image:Xt,element:ne,fetcher:Oi}),_e.push(Oi))}delete v.content;let Pu=v["list-style-image"];if(Pu&&Pu instanceof mi){let Xt=Pu.url;_e.push(Qr(new Image,Xt))}if(this.preprocessElementStyle(v),this.applyComputedStyles(ne,v),this.nodeContext.inline)t||(li(ne,"inline-start"),ds(ne)&&li(ne,"clone"));else if(t){if(!Ed(v.position)){let Xt=v["margin-break"],Oi=this.getBreakTypeAt(this.nodeContext),ni=Oi!==null,Le=Oi==="auto";(Xt===N.discard&&ni||Xt!==N.keep&&Le&&!this.nodeContext.floatSide)&&bd(ne,"block-start")}}else{let Xt=this.nodeContext.vertical?"width":"height";Di(ne,Xt)&&j(ne,Xt,this.nodeContext.display==="table-row"?"0.01px":""),li(ne,"block-start"),ds(ne)&&li(ne,"clone"),bd(ne,"block-start")}F&&ne.setAttribute("value",v["ua-list-item-count"].stringValue()),this.viewNode=ne,_e.length?Oa(_e).then(()=>{ii>0&&this.modifyElemDimensionWithImageResolution(yi,ii,v,this.nodeContext.vertical),m.finish(c)}):m.timeSlice().then(()=>{m.finish(c)})})}),m.result()}isInsideNonRootMultiColumn(){var t;let i=(t=this.nodeContext.parent)==null?void 0:t.viewNode;return!!(i&&Qm(i))}getBreakTypeAt(t){var i,r,s,o,u;if(this.isInsideTable(t))return null;for(let m=t;m&&!m.after;m=m.parent){if(jt(m.breakBefore))return m.breakBefore;if(m.fragmentIndex===1&&!m.parent)return m.sourceNode===m.sourceNode.ownerDocument.documentElement?"page":null;if((i=m.parent)!=null&&i.floatSide)return null;let p=(r=m.parent)==null?void 0:r.viewNode;if(p){let y=this.viewport.window.getComputedStyle(p),S=parseFloat(y.paddingBlockStart),v=parseFloat(y.borderBlockStartWidth);if(S||v)return null;let w=p?.firstChild;for(;w&&(Tt(w,m.parent.whitespace)||!m.floatSide&&fs(w));)w=w.nextSibling;if(w&&w!==m.viewNode)return null}}let c=(u=(o=(s=this.context)==null?void 0:s.currentLayoutPosition)==null?void 0:o.flowPositions[this.flowName])==null?void 0:u.startBreakType;return jt(c)?c:"auto"}isInsideTable(t){for(let i=t;i&&!i.after;i=i.parent)if(i.display&&i.display.startsWith("table"))return!0;return!1}processAfterIfcontinues(t,i,r,s){let o=this.getPseudoMap(i,this.regionIds,this.isFootnote,this.nodeContext,s);if(o&&o["after-if-continues"]&&o["after-if-continues"].content){let u=new Bg(t,i,r,s,this.exprContentListener);this.nodeContext.afterIfContinues=new PN(t,u)}}isSVGUrlAttribute(t){return np.SVG_URL_ATTRIBUTES.includes(t.toLowerCase())}modifyElemDimensionWithImageResolution(t,i,r,s){t.forEach(o=>{if(o.fetcher.get().get()==="load"){let u=o.image,c=u.width/i,m=u.height/i,p=o.element;if(c>0&&m>0){if(r["box-sizing"]===N.border_box&&(r["border-left-style"]!==N.none&&(c+=Dt(r["border-left-width"],this.context)),r["border-right-style"]!==N.none&&(c+=Dt(r["border-right-width"],this.context)),r["border-top-style"]!==N.none&&(m+=Dt(r["border-top-width"],this.context)),r["border-bottom-style"]!==N.none&&(m+=Dt(r["border-bottom-width"],this.context))),i>1){let y=r["max-width"]||N.none,S=r["max-height"]||N.none;if(y===N.none&&S===N.none)j(p,"max-width",`${c}px`);else if(y!==N.none&&S===N.none)j(p,"width",`${c}px`);else if(y===N.none&&S!==N.none)j(p,"height",`${m}px`);else{y.isNumeric(),S.isNumeric();let v=y,w=S;v.unit!=="%"?j(p,"max-width",`${Math.min(c,Dt(v,this.context))}px`):w.unit!=="%"?j(p,"max-height",`${Math.min(m,Dt(w,this.context))}px`):s?j(p,"height",`${m}px`):j(p,"width",`${c}px`)}}else if(i<1){let y=r["min-width"]||$e,S=r["min-height"]||$e;y.isNumeric(),y.isNumeric();let v=y,w=S;v.num===0&&w.num===0?j(p,"min-width",`${c}px`):v.num!==0&&w.num===0?j(p,"width",`${c}px`):v.num===0&&w.num!==0?j(p,"height",`${m}px`):v.unit!=="%"?j(p,"min-width",`${Math.max(c,Dt(v,this.context))}px`):w.unit!=="%"?j(p,"min-height",`${Math.max(m,Dt(w,this.context))}px`):s?j(p,"height",`${m}px`):j(p,"width",`${c}px`)}}}})}preprocessElementStyle(t){Je("PREPROCESS_ELEMENT_STYLE").forEach(i=>{i(this.nodeContext,t)})}findAndProcessRepeatingElements(t,i){for(let r=t.firstChild;r;r=r.nextSibling){if(r.nodeType!==1)continue;let s={},o=i.getStyle(r,!1);if(this.computeStyle(this.nodeContext.vertical,this.nodeContext.direction==="rtl",o,s),!this.processRepeatOnBreak(s))continue;if(this.nodeContext.formattingContext instanceof Lr&&!this.nodeContext.belongsTo(this.nodeContext.formattingContext))return;let u=this.nodeContext.parent,c=u&&u.formattingContext;this.nodeContext.formattingContext=new Lr(c,this.nodeContext.sourceNode),this.nodeContext.formattingContext.initializeRepetitiveElements(this.nodeContext.vertical);return}}processRepeatOnBreak(t){let i=t["repeat-on-break"];return i!==N.none&&((i===N.auto||Ee(i))&&(t.display===N.table_header_group?i=N.header:t.display===N.table_footer_group?i=N.footer:i=N.none),i&&i!==N.none)?i.toString():null}createTextNodeView(){let t=Z("createTextNodeView");return this.preprocessTextContent().then(()=>{let i=this.offsetInNode||0,r=Fm(this.nodeContext.preprocessedTextContent).substr(i);this.viewNode=document.createTextNode(r),t.finish(!0)}),t.result()}preprocessTextContent(){if(this.nodeContext.preprocessedTextContent!=null)return q(!0);let t,i=t=this.sourceNode.textContent,r=Z("preprocessTextContent"),s=Je("PREPROCESS_TEXT_CONTENT"),o=0;return r.loop(()=>o>=s.length?q(!1):s[o++](this.nodeContext,i).thenAsync(u=>(i=u,q(!0)))).then(()=>{this.nodeContext.preprocessedTextContent=MP(t,i),r.finish(!0)}),r.result()}createNodeView(t,i){let r=Z("createNodeView"),s,o=!0;return this.sourceNode.nodeType==1?s=this.createElementView(t,i):this.sourceNode.nodeType==8?(this.viewNode=null,s=q(!0)):s=this.createTextNodeView(),s.then(u=>{var c,m;if(o=u,this.nodeContext.viewNode=this.viewNode,this.viewNode){let p=(v,w)=>v?.nodeType===1&&fn(v)===w,y=this.nodeContext.parent,S=y?p(this.viewNode,"after")&&p(y.viewNode,"first-letter")&&(c=y.viewNode)!=null&&c.hasChildNodes()?y.parent.viewNode:y.viewNode:this.viewRoot;if(S&&(this.nodeContext.inline&&!(this.viewNode.nodeType===3&&Tt(this.viewNode))&&!S.hasChildNodes()&&Lm(S).includes("block-start")&&li(S,"text-start"),S.appendChild(this.viewNode),hA(this.viewNode),this.viewNode.nodeType===1&&this.viewNode.hasAttribute("data-vivliostyle-id"))){let v=this.viewNode,w=v.querySelector(":scope > a:empty[id^='viv-id-']");if(w&&(v.closest("[style*='position: absolute']")||/(table|flex|grid|ruby)/.test(v.style.display))){let T=w.getAttribute("id");w.ownerDocument.querySelectorAll(`a[id="${T}"]`).forEach(P=>{var O;(O=P.parentElement)==null||O.removeChild(P)});let E=S.closest("[data-vivliostyle-bleed-box]");(m=E?.parentElement)==null||m.insertBefore(w,E)}}}r.finish(o)}),r.result()}setCurrent(t,i,r){return this.nodeContext=t,t?(this.sourceNode=t.sourceNode,this.offsetInNode=t.offsetInNode):(this.sourceNode=null,this.offsetInNode=-1),this.viewNode=null,this.nodeContext?this.createNodeView(i,!!r):q(!0)}processShadowContent(t){if(t.shadowContext==null||t.sourceNode.localName!="content"||t.sourceNode.namespaceURI!="http://www.pyroxy.com/ns/shadow")return t;let i=t.boxOffset,r=t.shadowContext,s=t.parent,o,u,c=r.subShadow||r.parentShadow;r.subShadow?(o=r.root,u=r.type,u==fi.ROOTLESS&&(o=o.firstChild)):(o=r.owner.firstChild,u=fi.ROOTLESS);let m=t.sourceNode.nextSibling;if(m?(t.sourceNode=m,t.resetView()):t.shadowSibling?t=t.shadowSibling:o?t=null:(t=t.parent.modify(),t.after=!0),o){let p=new hs(o,s,i);return p.shadowContext=c,p.shadowType=u,p.shadowSibling=t,p}return t.boxOffset=i,t}nextPositionInTree(t){let i=t.boxOffset+1;if(t.after){if(!t.parent)return null;if(t.shadowType!=fi.ROOTED){let r=t.sourceNode.nextSibling;if(r)return t=t.modify(),t.boxOffset=i,t.sourceNode=r,t.resetView(),this.processShadowContent(t)}return t.shadowSibling?(t=t.shadowSibling.modify(),t.boxOffset=i,t):(t=t.parent.modify(),t.boxOffset=i,t.after=!0,t)}else{if(t.nodeShadow){let s=t.nodeShadow.root;if(t.nodeShadow.type==fi.ROOTLESS&&(s=s.firstChild),s){let o=new hs(s,t,i);return o.shadowContext=t.nodeShadow,o.shadowType=t.nodeShadow.type,this.processShadowContent(o)}}let r=t.sourceNode.firstChild;if(r)return this.processShadowContent(new hs(r,t,i));if(t.sourceNode.nodeType!=1){let s=Fm(t.preprocessedTextContent);i+=s.length-1-t.offsetInNode}return t=t.modify(),t.boxOffset=i,t.after=!0,t}}isTransclusion(t,i,r){let s=Nt(i,"hyperlink-processing");if(!s)return!1;let o=s.evaluate(this.context,"hyperlink-processing");return o?o.toString()==r:!1}nextInTree(t,i){let r=this.nextPositionInTree(t);if(!r||r.after)return q(r);let s=Z("nextInTree");return this.setCurrent(r,!0,i).then(o=>{(!r.viewNode||!o)&&(r=r.modify(),r.after=!0,r.viewNode||(r.inline=!0)),this.dispatchEvent({type:"nextInTree",nodeContext:r}),s.finish(r)}),s.result()}addImageFetchers(t){if(t instanceof Mt){let i=t.values;for(let r=0;r<i.length;r++)this.addImageFetchers(i[r])}else if(t instanceof mi){let i=t.url;this.page.fetchers.push(Qr(new Image,i))}}applyComputedStyles(t,i){var r,s,o;let u=i["background-image"];u&&this.addImageFetchers(u);let c=i.position===N.relative,m=((r=this.nodeContext)==null?void 0:r.parent)===null&&((s=this.sourceNode)==null?void 0:s.parentElement)===null&&!!((o=this.viewRoot)!=null&&o.parentElement),p=Object.keys(i);p.sort(Xp);let y,S;for(let v of p){if(IO[v])continue;let w=i[v];if(!(!w||w===he&&!qi(v))){if(w=w.visit(new _1(this.xmldoc.url,this.documentURLTransformer)),w instanceof U&&Op(w.unit)&&(w.unit==="lh"?w=new U(w.num*this.getLineHeightUnitSize(v,y,S),"px"):w=Gp(w,this.context)),v==="font-size"?y=w:v==="line-height"&&(S=w),jP[v]||c&&qP[v]){this.page.delayedItems.push(new Sd(t,v,w));continue}m&&this.page.pageAreaElement&&Ss(v)?j(this.page.pageAreaElement.parentElement.parentElement,v,w.toString()):j(t,v,w.toString())}}}getLineHeightUnitSize(t,i,r){var s,o,u,c;let m=Ue.lh/Ue.em,p=((o=(s=this.nodeContext.parent)==null?void 0:s.viewNode)==null?void 0:o.nodeType)===1?this.viewport.window.getComputedStyle(this.nodeContext.parent.viewNode):null,y=p?parseFloat(p.fontSize):this.context.fontSize(),S=p?p.lineHeight==="normal"?y*m:parseFloat(p.lineHeight):this.context.rootLineHeight;if(t==="line-height"||t==="font-size")return S;let v=null;if(r){if(r instanceof or||r instanceof U&&(r.unit==="em"||r.unit==="%"))v=r instanceof U&&r.unit==="%"?r.num/100:r.num;else if(r instanceof U)return r.num*this.context.queryUnitSize(r.unit,!1)}else for(let w=(u=this.nodeContext.parent)==null?void 0:u.viewNode;;w=w.parentNode){if(!w||w.nodeType!==1){v=m;break}let T=(c=w?.style)==null?void 0:c.lineHeight;if(T){/^[0-9.]+$/.test(T)&&(v=parseFloat(T)),T==="normal"&&(v=m);break}}return v!==null?i instanceof U?v*hg(i,y,this.context).num:v*y:S}applyPseudoelementStyle(t,i,r){if(t.after)return;let s=this.sourceNode,o=(t.shadowContext?t.shadowContext.styler:this.styler).getStyle(s,!1),u=Ei(o,"_pseudos");if(!u||(o=u[i],!o))return;let c={};t.vertical=this.computeStyle(t.vertical,t.direction==="rtl",o,c);let m=c.content;hr(m)&&(m.visit(new Da(r,this.context,m,this.exprContentListener)),delete c.content),this.applyComputedStyles(r,c)}peelOff(t,i){let r=Z("peelOff"),s=t.firstPseudo,o=t.offsetInNode,u=t.after;if(i>0){let S=t.viewNode.textContent;t.viewNode.textContent=S.substr(0,i),o+=i}else if(!u&&t.viewNode&&o==0){let S=t.viewNode.parentNode;S&&S.removeChild(t.viewNode)}let c=t.boxOffset+i,m=[];for(;t.firstPseudo===s;)m.push(t),t=t.parent;let p=m.pop(),y=p.shadowSibling;return r.loop(()=>{for(;m.length>0;){p=m.pop(),t=new hs(p.sourceNode,t,c),m.length==0&&(t.offsetInNode=o,t.after=u),t.shadowType=p.shadowType,t.shadowContext=p.shadowContext,t.nodeShadow=p.nodeShadow,t.shadowSibling=p.shadowSibling?p.shadowSibling:y,y=null;let S=this.setCurrent(t,!1);if(S.isPending())return S}return q(!1)}).then(()=>{r.finish(t)}),r.result()}createElement(t,i){return t=="http://www.w3.org/1999/xhtml"?this.document.createElement(i):this.document.createElementNS(t,i)}applyFootnoteStyle(t,i,r){let s={},o=Ei(this.footnoteStyle,"_pseudos");if(t=this.computeStyle(t,i,this.footnoteStyle,s),o&&o.before){let u={},c=this.createElement("http://www.w3.org/1999/xhtml","span");eu(c,"before"),r.appendChild(c),this.computeStyle(t,i,o.before,u),delete u.content,this.applyComputedStyles(c,u)}return delete s.content,this.applyComputedStyles(r,s),t}processFragmentedBlockEdge(t){var i,r,s;let o=!t.inline&&t.after?t.parent:t,u=!1;if(t.inline&&t.after&&!t.shadowContext&&((i=t.sourceNode.nextSibling)==null?void 0:i.nodeType)===1){let m=t.sourceNode.nextSibling,p=(r=Nt(this.styler.getStyle(m,!1),"display"))==null?void 0:r.value.toString();u=p&&!Ir(p)||m.getAttribute("data-math-typeset")==="true"&&/^\s*(\$\$|\\\[)/.test(m.textContent)}let c=0;for(let m=o;m;m=m.parent){if(((s=m.viewNode)==null?void 0:s.nodeType)!==1)continue;let p=m.viewNode;if(p.style)if(m.inline){if(li(p,"inline-end"),ds(p)){let y=m.vertical?p.offsetWidth:p.offsetHeight;li(p,"clone"),(m.vertical?p.offsetWidth:p.offsetHeight)>y&&this.fixClonedBoxDecorationOverflow(p)}}else{let y=this.nodeContext.vertical?"width":"height";if(Di(p,y)&&j(p,y,""),li(p,"block-end"),!c++&&m!==o){let{textAlign:S}=this.viewport.window.getComputedStyle(p);if(S==="justify"&&!u){let v=this.createChildAnonymousBlockIfNeeded(p);v?v!==p?_m(v,["block-start","text-start","block-end","text-end","justify"]):(li(p,"text-end"),li(p,"justify")):li(p,"text-end")}else li(p,"text-end")}ds(p)&&li(p,"clone"),bd(p,"block-end")}}}fixClonedBoxDecorationOverflow(t){let i=this.viewport.window.getComputedStyle(t),r=parseFloat(i.paddingInlineEnd),s=parseFloat(i.borderInlineEndWidth),o=-(r+s);isNaN(o)||(t.style.marginInlineEnd=`${o}px`)}createChildAnonymousBlockIfNeeded(t){let i=o=>{let{display:u,position:c,float:m}=this.viewport.window.getComputedStyle(o);if(o.localName==="ruby"||Er[o.localName])return!1;if(o.localName==="br")return!0;if((u==="inline"||u==="contents")&&o.hasChildNodes()){let p=o.lastElementChild;if(p&&(!p.nextSibling||p.nextSibling===o.lastChild&&Tt(p.nextSibling))){let y=i(p);if(y||y===null)return y}for(let y=p?.previousElementSibling;y;y=y.previousElementSibling){let S=i(y);if(S||S===null)return null}return!1}if(u==="none"||c==="absolute"||c==="fixed"||m&&m!=="none"||o.hasAttribute(nn)){let p=o.previousElementSibling;return p&&(p.nextSibling===o||p.nextSibling===o.previousSibling&&Tt(p.nextSibling))?i(p):!1}return!(!u||Ir(u))},r=null;for(let o=t.lastElementChild;o;o=o.previousElementSibling){let u=i(o);if(u){r=o;break}if(u===null)return null}if(!r)return t;if(r===t.lastElementChild&&(!r.nextSibling||r.nextSibling===t.lastChild&&Tt(r.nextSibling)))return null;let s=t.ownerDocument.createElement("span");s.className="viv-anonymous-block";for(let o=r.nextSibling,u=null;o;o=u)u=o.nextSibling,s.appendChild(o);return t.appendChild(s),s}convertLengthToPx(t,i,r){let s=t.num,o=t.unit;if(r1(o)){let u=i;for(;u&&u.nodeType!==1;)u=u.parentNode;let c=parseFloat(r.getElementComputedStyle(u)["font-size"]);return this.context,Wd(t,c,this.context).num}else{let u=this.context.queryUnitSize(o,!1);return u?s*u:t}}isSameNodePositionStep(t,i){if(t.shadowContext){if(!i.shadowContext)return!1;let r=t.node.nodeType===1?t.node:t.node.parentElement,s=i.node.nodeType===1?i.node:i.node.parentElement;return t.shadowContext.owner===i.shadowContext.owner&&fn(r)===fn(s)}else return t.node===i.node}isSameNodePosition(t,i){return t.offsetInNode===i.offsetInNode&&t.after==i.after&&t.steps.length===i.steps.length&&t.steps.every((r,s)=>{let o=i.steps[s];return this.isSameNodePositionStep(r,o)})}isPseudoelement(t){return!!fn(t)}};f(Ff,"SVG_URL_ATTRIBUTES",["color-profile","clip-path","cursor","filter","marker","marker-start","marker-end","marker-mid","fill","stroke","mask"]);var NO=Ff,IO={"float-min-wrap-block":!0,"float-reference":!0,"flow-into":!0,"flow-linger":!0,"flow-options":!0,"flow-priority":!0,"footnote-policy":!0,"margin-break":!0,page:!0},oo=null,OO=class{constructor(e){f(this,"layoutBox"),f(this,"window"),f(this,"scaleRatio"),this.layoutBox=e.layoutBox,this.window=e.window,this.scaleRatio=e.scaleRatio}scaleRect(e){return oo?{left:e.left*this.scaleRatio,top:e.top*this.scaleRatio,right:e.right*this.scaleRatio,bottom:e.bottom*this.scaleRatio,width:e.width*this.scaleRatio,height:e.height*this.scaleRatio}:e}subtractOffsets(e,t){let i=t.left,r=t.top;return{left:e.left-i,top:e.top-r,right:e.right-i,bottom:e.bottom-r,width:e.width,height:e.height}}getRangeClientRects(e){let t=e.getClientRects(),i=this.layoutBox.getBoundingClientRect();return Array.from(t).map(r=>this.scaleRect(this.subtractOffsets(r,i)))}getElementClientRect(e){let t=e.getBoundingClientRect();if(t.left===0&&t.top===0&&t.right===0&&t.bottom===0)return t;let i=this.layoutBox.getBoundingClientRect();return this.scaleRect(this.subtractOffsets(t,i))}getElementComputedStyle(e){return this.window.getComputedStyle(e,null)}adjustLengthValue(e){let t=64*(this.scaleRatio||1);return Math.floor(e*t)/t}},lo=class{constructor(e,t,i,r,s,o){this.window=e,this.fontSize=t,this.pixelRatio=i,f(this,"document"),f(this,"root"),f(this,"outerZoomBox"),f(this,"contentContainer"),f(this,"layoutBox"),f(this,"width"),f(this,"height"),f(this,"scaleRatio",1),this.document=e.document,this.root=r||this.document.body;let u=this.root.firstElementChild;u||(u=this.document.createElement("div"),u.setAttribute("data-vivliostyle-outer-zoom-box","true"),u.role="presentation",this.root.appendChild(u));let c=u.firstElementChild;c||(c=this.document.createElement("div"),c.setAttribute("data-vivliostyle-spread-container","true"),c.role="presentation",u.appendChild(c)),i>0&&CSS.supports("zoom","8")&&(j(this.root,"--viv-outputPixelRatio",`${i}`),j(this.root,"--viv-devicePixelRatio",`${e.devicePixelRatio}`),this.scaleRatio=i/e.devicePixelRatio,oo===null&&(oo=!("currentCSSZoom"in c)),oo&&j(this.root,"--viv-scaleRectRatio",`${this.scaleRatio}`));let m=u.nextElementSibling;m||(m=this.document.createElement("div"),m.setAttribute("data-vivliostyle-layout-box","true"),m.role="presentation",this.root.appendChild(m)),this.outerZoomBox=u,this.contentContainer=c,this.layoutBox=m,this.width=s||parseFloat(e.getComputedStyle(this.root).width)||this.root.offsetWidth||e.innerWidth,this.height=o||parseFloat(e.getComputedStyle(this.root).height)||this.root.offsetHeight||e.innerHeight;let p={width:794,height:1056},y=!e.outerWidth&&!e.outerHeight||/Headless/.test(navigator.userAgent)||navigator.webdriver&&e.innerWidth===800&&e.innerHeight===600;(!this.width||!s&&y)&&(this.width=p.width),(!this.height||!o&&y)&&(this.height=p.height)}resetZoom(){j(this.outerZoomBox,"width",""),j(this.outerZoomBox,"height",""),j(this.contentContainer,"width",""),j(this.contentContainer,"height",""),j(this.contentContainer,"transform","")}zoom(e,t,i){j(this.root,"--viv-outputScale",`${i}`),j(this.outerZoomBox,"width",`${e*i}px`),j(this.outerZoomBox,"height",`${t*i}px`),j(this.contentContainer,"width",`${e}px`),j(this.contentContainer,"height",`${t}px`)}clear(){let e=this.root;for(;e.lastChild;)e.removeChild(e.lastChild)}},zf=class{constructor(e,t,i){this.store=e,this.url=t,this.document=i,f(this,"lang",null),f(this,"totalOffset",-1),f(this,"root"),f(this,"body"),f(this,"head"),f(this,"last"),f(this,"lastOffset",1),f(this,"idMap"),this.root=i.documentElement;let r=null,s=null;if(this.root.namespaceURI=="http://www.w3.org/1999/xhtml"){for(let o=this.root.firstChild;o;o=o.nextSibling){if(o.nodeType!=1)continue;let u=o;if(u.namespaceURI=="http://www.w3.org/1999/xhtml")switch(u.localName){case"head":s=u;break;case"body":r=u;break}}this.lang=this.root.getAttribute("lang")}this.body=r,this.head=s,this.last=this.root,this.last.setAttribute(zi,"0")}doc(){return new Wf([this.document])}getElementOffset(e){let t=e.getAttribute(zi);if(t)return parseInt(t,10);let i=this.lastOffset,r=this.last;for(;r!=e;){let s=r.firstChild;if(!s){for(;s=r.nextSibling,!s;)if(r=r.parentNode,r==null)throw new Error("Internal error")}r=s,s.nodeType==1?(s.setAttribute(zi,i.toString()),++i):i+=s.textContent.length}return this.lastOffset=i,this.last=e,i-1}getNodeOffset(e,t,i){let r=0,s=e,o=null;if(s.nodeType==1){if(!i)return this.getElementOffset(s)}else{if(r=t,o=s.previousSibling,!o)return s=s.parentNode,r+=1,this.getElementOffset(s)+r;s=o}for(;;){for(;s.lastChild;)s=s.lastChild;if(s.nodeType==1)break;if(r+=s.textContent.length,o=s.previousSibling,!o){s=s.parentNode;break}s=o}return r+=1,this.getElementOffset(s)+r}getTotalOffset(){return this.totalOffset<0&&(this.totalOffset=this.getNodeOffset(this.root,0,!0)),this.totalOffset}getNodeByOffset(e){let t,i=this.root;for(;;){if(t=this.getElementOffset(i),t>=e)return i;let c=i.children;if(!c)break;let m=sr(c.length,p=>{let y=c[p];return this.getElementOffset(y)>e});if(m==0)break;i=c[m-1]}let r=t+1,s=i,o=s.firstChild||s.nextSibling,u=null;for(;;){if(o){if(o.nodeType==1||(s=o,u=s,r+=o.textContent.length,r>e&&!/^\s*$/.test(o.textContent)))break}else if(s=s.parentNode,!s)break;o=s.nextSibling}return o&&u&&/^\s*$/.test(u.textContent)&&(u=o),u||i}buildIdMap(e){let t=e.getAttribute("id");t&&!this.idMap[t]&&(this.idMap[t]=e);let i=e.getAttributeNS("http://www.w3.org/XML/1998/namespace","id");i&&!this.idMap[i]&&(this.idMap[i]=e);for(let r=e.firstElementChild;r;r=r.nextElementSibling)this.buildIdMap(r)}getElement(e){let t=e.match(/([^#]*)#(.+)$/);if(!t||t[1]&&t[1]!=this.url)return null;let i=t[2],r=this.document.getElementById(i);return!r&&this.document.getElementsByName&&(r=this.document.getElementsByName(i)[0]),r||(this.idMap||(this.idMap={},this.buildIdMap(this.document.documentElement)),r=this.idMap[i]),r}},Su=(e=>(e.TEXT_HTML="text/html",e.TEXT_XML="text/xml",e.APPLICATION_XML="application/xml",e.APPLICATION_XHTML_XML="application/xhtml+xml",e.IMAGE_SVG_XML="image/svg+xml",e))(Su||{});function uo(e,t,i){let r=i||new DOMParser,s;try{s=r.parseFromString(e,t)}catch{}if(s){let o=s.documentElement,u="parsererror";if(o.localName===u)return null;for(let c=o.firstElementChild;c;c=c.nextElementSibling)if(c.localName===u)return null}else return null;return s}function RO(e){let t=e.contentType;if(t){let r=Object.keys(Su);for(let s=0;s<r.length;s++)if(Su[r[s]]===t)return t;if(t.match(/\+xml$/))return"application/xml"}let i=e.url.match(/\.([^./]+)$/);if(i)switch(i[1]){case"html":case"htm":return"text/html";case"xhtml":case"xht":return"application/xhtml+xml";case"svg":case"svgz":return"image/svg+xml";case"opf":case"xml":return"application/xml"}return null}function Mf(e,t){let i=e.responseXML;if(!i){let s=new DOMParser,o=e.responseText;if(o){let u=RO(e);if(i=uo(o,u||"application/xml",s),i&&!u){let c=i.documentElement;c.localName.toLowerCase()==="html"&&!c.namespaceURI?i=uo(o,"text/html",s):c.localName.toLowerCase()==="svg"&&i.contentType!=="image/svg+xml"&&(i=uo(o,"image/svg+xml",s))}i||(i=uo(o,"text/html",s))}}let r=i?new zf(t,e.url,i):null;return q(r)}function LO(){return new pd(Mf,"document")}var _O=class sp{constructor(t){this.fn=t}check(t){return this.fn(t)}withAttribute(t,i){return new sp(r=>this.check(r)&&r.nodeType==1&&r.getAttribute(t)==i)}withChild(t,i){return new sp(r=>{if(!this.check(r))return!1;let s=new Wf([r]);return s=s.child(t),i&&(s=s.predicate(i)),s.size()>0})}},Df=new _O(e=>!0),Wf=class ap{constructor(t){this.nodes=t}asArray(){return this.nodes}size(){return this.nodes.length}predicate(t){let i=[];for(let r of this.nodes)t.check(r)&&i.push(r);return new ap(i)}forEachNode(t){let i=[],r=s=>{i.push(s)};for(let s=0;s<this.nodes.length;s++)t(this.nodes[s],r);return new ap(i)}forEach(t){let i=[];for(let r=0;r<this.nodes.length;r++)i.push(t(this.nodes[r]));return i}forEachNonNull(t){let i=[];for(let r=0;r<this.nodes.length;r++){let s=t(this.nodes[r]);s!=null&&i.push(s)}return i}child(t){return this.forEachNode((i,r)=>{for(let s=i.firstChild;s;s=s.nextSibling)s.nodeType==1&&s.localName==t&&r(s)})}childElements(){return this.forEachNode((t,i)=>{for(let r=t.firstChild;r;r=r.nextSibling)r.nodeType==1&&i(r)})}attribute(t){return this.forEachNonNull(i=>i.nodeType==1?i.getAttribute(t):null)}textContent(){return this.forEach(t=>t.textContent)}},BO=new as(()=>{let e=Z("uaStylesheetBase"),t=pf(),i=et("user-agent-base.css",kr),r=new ks(null,null,null,null,null,t,!0);return r.startStylesheet("UA"),cN(r.cascade),gd(bm,r,i,null,null).thenFinish(e),e.result()},"uaStylesheetBaseFetcher");function FO(){return BO.get()}var zO=class{constructor(e,t,i,r,s,o,u,c,m,p){this.store=e,this.rootScope=t,this.pageScope=i,this.cascade=r,this.rootBox=s,this.fontFaces=o,this.footnoteProps=u,this.flowProps=c,this.viewportProps=m,this.pageProps=p,f(this,"fontDeobfuscator"),f(this,"validatorSet"),this.fontDeobfuscator=e.fontDeobfuscator,this.validatorSet=e.validatorSet,this.pageScope.defineBuiltIn("has-content",function(y){y=y;let S=this,v=S.currentLayoutPosition,w=v.firstFlowChunkOfFlow(y);return S.matchPageSide(v.startSideOfFlow(y))&&v.hasContent(y,S.lookupOffset)&&!!w&&!S.flowChunkIsAfterParentFlowForcedBreak(w)}),this.pageScope.defineName("page-number",new dt(this.pageScope,function(){let y=this;return y.pageNumberOffset+y.currentLayoutPosition.page},"page-number")),this.pageScope.defineName("blank-page",new dt(this.pageScope,function(){return this.currentLayoutPosition?.isBlankPage},"blank-page"))}sizeViewport(e,t,i,r){if(this.viewportProps.length){let s=new Hl(this.rootScope,e,t,i),o=AA(s,this.viewportProps),u=o.width,c=o.height,m=o["text-zoom"],p=1;if(u&&c||m){let y=Ue.em;if((m?m.evaluate(s,"text-zoom"):null)===N.scale&&(p=y/i,i=y,e*=p,t*=p),u&&c){let S=Dt(u.evaluate(s,"width"),s),v=Dt(c.evaluate(s,"height"),s);if(S>0&&v>0)return{width:r&&r.spreadView?(S+r.pageBorder)*2:S,height:v,fontSize:i}}}}return{width:e,height:t,fontSize:i}}},xu=class extends Hl{constructor(e,t,i,r,s,o,u,c,m,p,y,S,v){super(e.rootScope,r.width,r.height,r.fontSize),this.style=e,this.xmldoc=t,this.viewport=r,this.clientLayout=s,this.fontMapper=o,this.customRenderer=u,this.fallbackMap=c,this.pageNumberOffset=m,this.documentURLTransformer=p,this.counterStore=y,f(this,"lang"),f(this,"primaryFlows",{body:!0}),f(this,"rootPageBoxInstance",null),f(this,"styler",null),f(this,"stylerMap",null),f(this,"currentLayoutPosition",null),f(this,"layoutPositionAtPageStart",null),f(this,"lookupOffset",0),f(this,"faces"),f(this,"pageBoxInstances",{}),f(this,"pageManager",null),f(this,"rootPageFloatLayoutContext"),f(this,"pageBreaks",{}),f(this,"pageProgression",null),f(this,"isVersoFirstPage",!1),f(this,"blankPageAtStart",!1),f(this,"pageSheetSize",{}),f(this,"pageSheetHeight",0),f(this,"pageSheetWidth",0),this.lang=t.lang||i,this.faces=new DI(this.style.fontDeobfuscator),this.rootPageFloatLayoutContext=new ps(null,null,null,null,null,null,null),this.pageProgression=S||null,this.isVersoFirstPage=!!v;for(let w in e.flowProps){let T=e.flowProps[w],E=Nt(T,"flow-consume");E&&(E.evaluate(this,"flow-consume")==N.all?this.primaryFlows[w]=!0:delete this.primaryFlows[w])}}init(){let e=Z("StyleInstance.init"),t=this.counterStore.createCounterListener(this.xmldoc.url),i=this.counterStore.createCounterResolver(this.xmldoc.url,this.style.rootScope,this.style.pageScope);this.styler=new Qg(this.xmldoc,this.style.cascade,this.style.rootScope,this,this.primaryFlows,this.style.validatorSet,t,i),i.setStyler(this.styler),this.styler.resetFlowChunkStream(this),this.stylerMap={},this.stylerMap[this.xmldoc.url]=this.styler;let r=this.styler.getTopContainerStyle();this.pageProgression||(this.pageProgression=Tf(r)),this.matchStartPageSide(this.styler.breakBeforeValues[0])||(this.pageNumberOffset===0?this.isVersoFirstPage=!0:this.blankPageAtStart=!0);let s=this.style.rootBox;this.rootPageBoxInstance=new UI(s);let o=this.style.cascade.createInstance(this,t,i,this.lang);this.styler.cascade.currentPageType=this.styler.cascade.firstPageType,this.rootPageBoxInstance.applyCascadeAndInit(o,r),this.rootPageBoxInstance.resolveAutoSizing(this),this.pageManager=new lO(o,this.style.pageScope,this.rootPageBoxInstance,this,r);let u=[];for(let m of this.style.fontFaces){if(m.condition&&!m.condition.evaluate(this))continue;let p=MI(m.properties,this),y=new mf(p);u.push(y)}this.fontMapper.findOrLoadFonts(u,this.faces).then(()=>{kO(this.xmldoc.document,this.viewport.window,this.styler).thenFinish(e)});let c=this.style.pageProps;return c[""]||(c[""]={}),Object.keys(c).forEach(m=>{let p=c[m];this.styler.cascade.applyVarFilter([p],this.styler,null),this.styler.cascade.applyCalcFilter(p,this.styler.context);let y=Pf(so(p),this);this.pageSheetSize[m]={width:y.pageWidth+y.cropOffset*2,height:y.pageHeight+y.cropOffset*2}}),e.result()}matchStartPageSide(e){let t=this.pageNumberOffset%2==(this.isVersoFirstPage?1:0),i=this.pageProgression=="ltr";switch(e){case"left":return t!==i;case"right":return t===i;case"recto":return t;case"verso":return!t;default:return!0}}getStylerForDoc(e){let t=this.stylerMap[e.url];if(!t){let i=this.style.store.getStyleForDoc(e),r=new Hl(i.rootScope,this.pageWidth(),this.pageHeight(),this.initialFontSize),s=this.counterStore.createCounterListener(e.url),o=this.counterStore.createCounterResolver(e.url,i.rootScope,i.pageScope);t=new Qg(e,i.cascade,i.rootScope,r,this.primaryFlows,i.validatorSet,s,o),this.stylerMap[e.url]=t}return t}registerInstance(e,t){this.pageBoxInstances[e]=t}lookupInstance(e){return this.pageBoxInstances[e]}encounteredFlowChunk(e,t){let i=this.currentLayoutPosition;if(i){i.flows[e.flowName]?t=i.flows[e.flowName]:i.flows[e.flowName]=t;let r=i.flowPositions[e.flowName];r||(r=new QP,i.flowPositions[e.flowName]=r);let s=XP(e.element),o=new cr(s),u=new ZP(o,e);r.positions.push(u)}}evalSupportsTest(e,t,i){if(i)return e==="selector"?this.evalSupportsSelector(t):!1;if(!e)return!1;let r=!0;class s{unknownProperty(m,p){r=!1}invalidPropertyValue(m,p){r=!1}simpleProperty(m,p,y){}}let o=new s,u=tn(this.style.rootScope,new ki(t,null),"");return u?(this.xmldoc.store.validatorSet.validatePropertyAndHandleShorthand(e,u,!1,o),r):!1}evalSupportsSelector(e){let t=new jf(null),i=new ki(e+"{}",t);return new ls(tt,i,t,"").runParser(Number.POSITIVE_INFINITY,!1,!1,!1,!1)?!t.cascadeParserHandler.invalid:!1}getConsumedOffset(e){let t=Number.POSITIVE_INFINITY;for(let i=0;i<e.positions.length;i++){let r=e.positions[i].chunkPosition.primary,s=r.steps[0].node,o=r.offsetInNode,u=r.after,c=0;for(;s.ownerDocument!=this.xmldoc.document;)c++,s=r.steps[c].node,u=!1,o=0;let m=this.xmldoc.getNodeOffset(s,o,u);m<t&&(t=m)}return t}getPosition(e,t){if(!e)return 0;let i=Number.POSITIVE_INFINITY;for(let r in this.primaryFlows){let s=e.flowPositions[r];if(!t&&(!s||s.positions.length==0)&&this.currentLayoutPosition&&(this.styler.styleUntilFlowIsReached(r),s=this.currentLayoutPosition.flowPositions[r],e!=this.currentLayoutPosition&&s&&(s=s.clone(),e.flowPositions[r]=s)),s){let o=this.getConsumedOffset(s);o<i&&(i=o)}}return i}dumpLocation(e){ee.debug("Location - page",this.currentLayoutPosition.page),ee.debug("  current:",e),ee.debug("  lookup:",this.lookupOffset);for(let t in this.currentLayoutPosition.flowPositions){let i=this.currentLayoutPosition.flowPositions[t];for(let r of i.positions)ee.debug("  Chunk",`${t}:`,r.flowChunk.startOffset)}}matchPageSide(e){switch(e){case"left":case"right":case"recto":case"verso":return new lt(this.style.pageScope,`${e}-page`).evaluate(this);default:return!0}}updateStartSide(e){for(let t in e.flowPositions){let i=e.flowPositions[t];if(i&&i.positions.length>0){let r=i.positions[0].flowChunk;if(this.getConsumedOffset(i)===r.startOffset){let s=i.positions[0].flowChunk.breakBefore,o=i.startBreakType;i.startBreakType=Bm(qt(o,s))}}}}selectPageMaster(e){let t=this.currentLayoutPosition,i=this.getPosition(t);if(i==Number.POSITIVE_INFINITY)return null;let r=this.rootPageBoxInstance.children,s;for(let o=0;o<r.length;o++){if(s=r[o],s.pageBox.pseudoName===yu)continue;let u=1;s.pageBox.pseudoName===hu&&!(this.actualPageWidth&&this.actualPageHeight)&&(u=1/0);let c=s.getProp(this,"utilization");c&&c.isNum()&&(u=c.num);let m=this.queryUnitSize("em",!1),p=this.pageWidth()*this.pageHeight(),y=Math.ceil(u*p/(m*m)),S=this.styler.cascade.currentPageType;this.lookupOffset=this.styler.styleUntil(i,y),this.styler.cascade.currentPageType=S,this.updateStartSide(t),this.layoutPositionAtPageStart=t.clone(),this.initLingering(),this.clearScope(this.style.pageScope);let v=s.getProp(this,"enabled");if(!v||v===N._true){if(t.page===1&&this.blankPageAtStart){s.style={};let w=e.size;e={},w&&(e.size=w)}return this.pageManager.getPageRulePageMaster(s,e)}}throw new Error("No enabled page masters")}flowChunkIsAfterParentFlowForcedBreak(e){let t=this.layoutPositionAtPageStart.flows,i=t[e.flowName].parentFlowName;if(i){let r=e.startOffset,s=t[i].forcedBreakOffsets;if(!s.length||r<s[0])return!1;let o=sr(s.length,p=>s[p]>r)-1,u=s[o],c=this.layoutPositionAtPageStart.flowPositions[i],m=this.getConsumedOffset(c);return u<m?!1:m<u?!0:!this.matchPageSide(c.startBreakType)}return!1}setFormattingContextToColumn(e,t){let i=this.currentLayoutPosition.flows[t];i.formattingContext||(i.formattingContext=new Od(null)),e.flowRootFormattingContext=i.formattingContext}layoutDeferredPageFloats(e){let t=e.pageFloatLayoutContext,i=t.getDeferredPageFloatContinuations(),r=c=>{if(c.floatReference!==st.PAGE)return!1;let m=this.layoutPositionAtPageStart.flowPositions.body,p=m&&this.getConsumedOffset(m),y=this.xmldoc.getNodeOffset(c.nodePosition.steps[0].node,0,!1);return y!=null&&p!=null&&y>p},s=Z("layoutDeferredPageFloats"),o=!1,u=0;return s.loopWithFrame(c=>{if(u===i.length){c.breakLoop();return}let m=i[u++],p=m.float;if(r(p)){c.breakLoop();return}let y=new an().findByFloat(p),S=y.findPageFloatFragment(p,t);if(S&&S.hasFloat(p)){c.continueLoop();return}else if(t.isForbidden(p)||t.hasPrecedingFloatsDeferredToNext(p)){t.deferPageFloat(m),c.breakLoop();return}e.layoutPageFloatInner(m,y,null,S).then(v=>{if(!v){c.breakLoop();return}let w=t.parent.isInvalidated();if(w){c.breakLoop();return}else t.isInvalidated()&&!w&&(o=!0,t.validate());c.continueLoop()})}).then(()=>{o&&t.invalidate(),s.finish(!0)}),s.result()}getLastAfterPositionIfDeferredFloatsExists(e,t){if(e.pageFloatLayoutContext.getPageFloatContinuationsDeferredToNext().length>0)if(e.lastAfterPosition){let i;return t?(i=t.clone(),i.primary=e.lastAfterPosition):i=new cr(e.lastAfterPosition),i}else return null;else return null}layoutColumn(e,t){let i=this.currentLayoutPosition.flowPositions[t];if(!i||!this.matchPageSide(i.startBreakType))return q(!0);this.setFormattingContextToColumn(e,t),e.init(),this.primaryFlows[t]&&e.bands.length>0&&(e.forceNonfitting=!1);let r=Z("layoutColumn");return this.layoutDeferredPageFloats(e).then(()=>{if(e.pageFloatLayoutContext.isInvalidated()){r.finish(!0);return}let s=[],o=[],u=!0;r.loopWithFrame(c=>{if(e.pageFloatLayoutContext.hasContinuingFloatFragmentsInFlow(t)){c.breakLoop();return}for(;i.positions.length-o.length>0;){let m=0;for(;o.includes(m);)m++;let p=i.positions[m];if(p.flowChunk.startOffset>this.lookupOffset||this.flowChunkIsAfterParentFlowForcedBreak(p.flowChunk))break;for(let v=m+1;v<i.positions.length;v++){if(o.includes(v))continue;let w=i.positions[v];if(w.flowChunk.startOffset>this.lookupOffset||this.flowChunkIsAfterParentFlowForcedBreak(w.flowChunk))break;w.flowChunk.isBetter(p.flowChunk)&&(p=w,m=v)}let y=p.flowChunk,S=!0;if(e.layout(p.chunkPosition,u,i.breakAfter).then(v=>{if(e.pageFloatLayoutContext.isInvalidated()){c.breakLoop();return}if(u=!1,p.flowChunk.repeated&&(v===null||y.exclusive)&&s.push(m),y.exclusive){o.push(m),c.breakLoop();return}else{let w=!!v||!!e.pageBreakType,T=this.getLastAfterPositionIfDeferredFloatsExists(e,v);if(e.pageBreakType&&T?(p.chunkPosition=T,i.breakAfter=e.pageBreakType,e.pageBreakType=null):(o.push(m),(v||T)&&(p.chunkPosition=v||T,s.push(m)),i.startBreakType=Bm(e.pageBreakType)),w){c.breakLoop();return}}e.forceNonfitting=!1,S?S=!1:c.continueLoop()}),S){S=!1;return}}c.breakLoop()}).then(()=>{if(!e.pageFloatLayoutContext.isInvalidated()){i.positions=i.positions.filter((m,p)=>s.includes(p)||!o.includes(p)),i.breakAfter==="column"&&(i.breakAfter=null),e.saveDistanceToBlockEndFloats();let c=e.pageFloatLayoutContext.getMaxReachedAfterEdge();e.updateMaxReachedAfterEdge(c)}r.finish(!0)})}),r.result()}createLayoutConstraint(e){let t=this.currentLayoutPosition.page-1,i=this.counterStore.createLayoutConstraint(t);return new RN([i].concat(e.getLayoutConstraints()))}createAndLayoutColumn(e,t,i,r,s,o,u,c,m,p,y,S,v,w){let T=e.vertical?e.isAutoWidth&&e.isRightDependentOnAutoWidth:e.isAutoHeight&&e.isTopDependentOnAutoHeight,E=s.element,P=new ps(c,st.COLUMN,null,u,null,null,null),O=this.currentLayoutPosition.clone(),A=Z("createAndLayoutColumn"),L;return A.loopWithFrame(H=>{let G=this.createLayoutConstraint(P);if(m>1){let te=this.viewport.document.createElement("div");if(j(te,"position","absolute"),E.appendChild(te),L=new Ja(te,v,this.clientLayout,G,P),L.forceNonfitting=w,L.vertical=s.vertical,L.rtl=s.rtl,L.snapHeight=s.snapHeight,L.snapWidth=s.snapWidth,s.vertical){let ae=(s.rtl?m-o-1:o)*(y+p)+s.paddingTop,ge=parseFloat(E.style.width);L.setHorizontalPosition(s.paddingLeft+ge-s.width,s.width),L.setVerticalPosition(ae,y)}else{let ae=(s.rtl?m-o-1:o)*(y+p)+s.paddingLeft;L.setVerticalPosition(s.paddingTop,s.height),L.setHorizontalPosition(ae,y)}L.originX=t,L.originY=i}else L=new Ja(E,v,this.clientLayout,G,P),L.copyFrom(s);L.exclusions=T?[]:r.concat(),L.innerShape=S,P.setContainer(L),(L.vertical?L.height:L.width)>=0?this.layoutColumn(L,u).then(()=>{P.isInvalidated()||P.finish(),L.pageFloatLayoutContext.isInvalidated()&&!c.isInvalidated()?(L.pageFloatLayoutContext.validate(),this.currentLayoutPosition=O.clone(),L.element!==E&&E.removeChild(L.element),H.continueLoop()):H.breakLoop()}):(P.finish(),H.breakLoop())}).then(()=>{A.finish(L)}),A.result()}setPagePageFloatLayoutContextContainer(e,t,i){(t instanceof Of||t instanceof pu&&!(t instanceof xn))&&e.setContainer(i)}getRegionPageFloatLayoutContext(e,t,i,r){t instanceof Sn;let s=t.getProp(this,"writing-mode")||null,o=t.getProp(this,"direction")||null;return new ps(e,st.REGION,i,r,null,s,o)}layoutFlowColumnsWithBalancing(e,t,i,r,s,o,u,c,m){let p=this.currentLayoutPosition.clone(),y=this.getRegionPageFloatLayoutContext(o,t,u,c),S=!0,v=()=>(this.currentLayoutPosition=p.clone(),this.layoutFlowColumns(e,t,i,r,s,o,y,u,c,m,S).thenAsync(w=>q(w?{columns:w,position:this.currentLayoutPosition}:null)));return v().thenAsync(w=>{if(!w)return q(null);if(m<=1)return q(w.columns);let T=t.getProp(this,"column-fill")||N.balance,E=this.currentLayoutPosition.flowPositions[c],P=SI(m,T,v,y,u,w.columns,E);return P?(S=!1,o.lock(),y.lock(),P.balanceColumns(w).thenAsync(O=>(o.unlock(),o.validate(),y.unlock(),this.currentLayoutPosition=O.position,q(O.columns)))):q(w.columns)})}layoutFlowColumns(e,t,i,r,s,o,u,c,m,p,y){let S=Z("layoutFlowColumns"),v=this.currentLayoutPosition.clone(),w=t.getPropAsNumber(this,"column-gap"),T=p>1?t.getPropAsNumber(this,"column-width"):c.vertical?c.height:c.width,E=t.getActiveRegions(this),P=t.getProp(this,"shape-inside"),O=sm(P,0,0,c.width,c.height,this),A=new NO(m,this,this.viewport,this.styler,E,this.xmldoc,this.faces,this.style.footnoteProps,this,e,this.customRenderer,this.fallbackMap,this.documentURLTransformer),L=0,H=null,G=[];return S.loopWithFrame(te=>{this.createAndLayoutColumn(t,i,r,s,c,L++,m,u,p,w,T,O,A,y).then(ae=>{if(o.isInvalidated()){G=null,te.breakLoop();return}if((ae.pageBreakType&&ae.pageBreakType!=="column"||L===p)&&!u.isInvalidated()&&u.finish(),u.isInvalidated()){L=0,this.currentLayoutPosition=v.clone(),u.validate(),u.isLocked()?(G=null,te.breakLoop()):te.continueLoop();return}H=ae,G[L-1]=H,H.pageBreakType&&H.pageBreakType!="column"&&(L=p,H.pageBreakType!="region"&&(this.pageBreaks[m]=!0)),L<p?te.continueLoop():te.breakLoop()})}).then(()=>{S.finish(G)}),S.result()}layoutContainer(e,t,i,r,s,o,u){t.reset();let c=t.getProp(this,"enabled");if(c&&c!==N._true)return q(!0);let m=Z("layoutContainer"),p=t.getProp(this,"wrap-flow")===N.auto,y=t.getProp(this,"flow-from"),S=this.viewport.document.createElement("div");S.role=t instanceof Rf?"complementary":"presentation";let v=t.getProp(this,"position");j(S,"position",v?v.name:"absolute");let w=t instanceof xn;t instanceof Sn?i.appendChild(S):i.insertBefore(S,i.firstChild);let T=new jm(S);T.vertical=t.vertical,T.rtl=t.rtl,T.borderBoxSizing=t.borderBoxSizing,T.exclusions=o,t.prepareContainer(this,T,e,this.faces,this.clientLayout),t instanceof xn&&(T.width<=0||T.height<=0)&&ee.warn("Negative or zero page area size"),T.originX=r,T.originY=s,r+=T.left+T.marginLeft+T.borderLeft,s+=T.top+T.marginTop+T.borderTop,this.setPagePageFloatLayoutContextContainer(u,t,T);let E,P=!1;if(!y||!y.isIdent()){let O=t.getProp(this,"content");if(O instanceof re&&O.expr instanceof dt&&O.expr.str.startsWith("running-element-"))O.visit(new Da(S,this,O,this.counterStore.getExprContentListener()));else if(O&&hr(O)){let A="span";O.url&&(A="img");let L=this.viewport.document.createElement(A);O.visit(new Da(L,this,O,this.counterStore.getExprContentListener())),S.appendChild(L),A=="img"&&t.transferSingleUriContentProps(this,L,this.faces),t.transferContentProps(this,T,e,this.faces),A=="span"&&kN(L,t.getProp(this,"text-autospace"),t.getProp(this,"text-spacing-trim"),t.getProp(this,"hanging-punctuation"),this.lang,t.vertical)}else t.suppressEmptyBoxGeneration&&(i.removeChild(S),P=!0);P||t.finishContainer(this,T,e,null,1,this.clientLayout,this.faces),E=q(!0)}else if(this.pageBreaks[y.toString()])u.isInvalidated()||t.finishContainer(this,T,e,null,1,this.clientLayout,this.faces),E=q(!0);else{let O=Z("layoutContainer.inner"),A=y.toString(),L=t.getPropAsNumber(this,"column-count");this.layoutFlowColumnsWithBalancing(e,t,r,s,o,u,T,A,L).then(H=>{if(!u.isInvalidated()){let G=H[0];G.element===S&&(T=G),T.computedBlockSize=Math.max.apply(null,H.map(ae=>ae.computedBlockSize)),t.finishContainer(this,T,e,G,L,this.clientLayout,this.faces);let te=this.currentLayoutPosition.flowPositions[A];te&&te.breakAfter==="region"&&(te.breakAfter=null)}O.finish(!0)}),E=O.result()}return E.then(()=>{if(u.isInvalidated()){m.finish(!0);return}if(!t.isAutoHeight||Math.floor(T.computedBlockSize)>0){if(!P&&!p){let A=t.getProp(this,"shape-outside"),L=T.getOuterShape(A,this);o.push(L)}}else if(t.children.length==0){i.removeChild(S),m.finish(!0);return}let O=w?0:t.children.length-1;m.loop(()=>{for(;O>=0&&O<t.children.length;){let A=t.children[w?O++:O--],L=this.layoutContainer(e,A,S,r,s,o,u);if(L.isPending())return L.thenAsync(()=>q(!u.isInvalidated()));if(u.isInvalidated())break}return q(!1)}).then(()=>{m.finish(!0)})}),m.result()}processLinger(){let e=this.currentLayoutPosition.page;for(let t in this.currentLayoutPosition.flowPositions){let i=this.currentLayoutPosition.flowPositions[t];for(let r=i.positions.length-1;r>=0;r--){let s=i.positions[r];s.flowChunk.startPage>=0&&s.flowChunk.startPage+s.flowChunk.linger-1<=e&&i.positions.splice(r,1)}}}initLingering(){let e=this.currentLayoutPosition.page;for(let t in this.currentLayoutPosition.flowPositions){let i=this.currentLayoutPosition.flowPositions[t];for(let r=i.positions.length-1;r>=0;r--){let s=i.positions[r];s.flowChunk.startPage<0&&s.flowChunk.startOffset<this.lookupOffset&&(s.flowChunk.startPage=e)}}}noMorePrimaryFlows(e){for(let t in this.primaryFlows){let i=e.flowPositions[t];if(i&&i.positions.length>0)return!1}return!0}layoutNextPage(e,t){var i;let r=e.container===e.bleedBox;this.pageBreaks={},t?(this.currentLayoutPosition=t.clone(),this.styler.replayFlowElementsFromOffset(t.highestSeenOffset)):(this.currentLayoutPosition=new JP,this.styler.replayFlowElementsFromOffset(-1)),this.lang&&e.bleedBox.setAttribute("lang",this.lang),t=this.currentLayoutPosition;let s=1e4;if(t.page>s)throw new Error(`Too many pages generated (over ${s} pages)`);let o=t.startSideOfFlow("body");t.isBlankPage=us(o)&&this.matchPageSide(o),e.isBlankPage=t.isBlankPage,t.page++,e.pageType==null&&(e.pageType=(i=e.isBlankPage?this.styler.cascade.previousPageType:this.styler.cascade.currentPageType)!=null?i:"",this.styler.cascade.previousPageType=this.styler.cascade.currentPageType),this.clearScope(this.style.pageScope),this.layoutPositionAtPageStart=t.clone();let u=r?{}:this.pageManager.getCascadedPageStyle(e.pageType);if(this.styler.cascade.applyVarFilter([u],this.styler,null),this.styler.cascade.applyCalcFilter(u,this.styler.context),!r){let w=new lt(this.style.pageScope,"left-page");e.side=w.evaluate(this)?"left":"right",e.container.setAttribute("data-vivliostyle-page-side",e.side)}let c=this.selectPageMaster(u);if(!c)return q(null);let m=0;if(!r){e.setAutoPageWidth(c.pageBox.specified.width.value===is),e.setAutoPageHeight(c.pageBox.specified.height.value===rs),this.counterStore.setCurrentPage(e),this.counterStore.updatePageCounters(u,this);let w=Pf(so(u),this);this.setPageSizeAndBleed(w,e),tO(u,w,e,this),m=w.bleedOffset+w.bleed}let p=!r&&c.getProp(this,"writing-mode")||N.horizontal_tb;this.pageVertical=p!=N.horizontal_tb;let y=c.getProp(this,"direction")||N.ltr,S=new ps(this.rootPageFloatLayoutContext,st.PAGE,null,null,null,p,y),v=Z("layoutNextPage");return v.loopWithFrame(w=>{this.layoutContainer(e,c,e.bleedBox,m,m,[],S).then(()=>{S.isInvalidated()||S.finish(),S.isInvalidated()?(this.currentLayoutPosition=this.layoutPositionAtPageStart.clone(),S.validate(),w.continueLoop()):w.breakLoop()})}).then(()=>{c.adjustPageLayout(this,e,this.clientLayout),r||(this.processLinger(),t=this.currentLayoutPosition,Object.keys(t.flowPositions).forEach(T=>{let E=t.flowPositions[T],P=E.breakAfter;P&&(P==="page"||!this.matchPageSide(P))&&(E.breakAfter=null)})),this.currentLayoutPosition=this.layoutPositionAtPageStart=null,t.highestSeenOffset=this.styler.getReachedOffset();let w=this.style.store.getTriggersForDoc(this.xmldoc);e.finish(w,this.clientLayout),this.noMorePrimaryFlows(t)&&(t=null),v.finish(t)}),v.result()}setPageSizeAndBleed(e,t){this.actualPageWidth=e.pageWidth,this.actualPageHeight=e.pageHeight,this.pageSheetWidth=e.pageWidth+e.cropOffset*2,this.pageSheetHeight=e.pageHeight+e.cropOffset*2,t.container.style.width=`${this.pageSheetWidth}px`,t.container.style.height=`${this.pageSheetHeight}px`,t.bleedBox.style.left=`${e.bleedOffset}px`,t.bleedBox.style.width=`${e.pageWidth}px`,t.bleedBox.style.top=`${e.bleedOffset}px`,t.bleedBox.style.height=`${e.pageHeight}px`,t.bleedBox.style.padding=`${e.bleed}px`}},MO=class op extends ks{constructor(t,i,r,s){super(t.rootScope,t,i,r,s,t.validatorSet,!r),this.masterHandler=t,f(this,"insideRegion",!1)}startPageTemplateRule(){}startPageMasterRule(t,i,r){let s=new ff(this.masterHandler.pageScope,t,i,r,this.masterHandler.rootBox,this.condition,this.owner.getBaseSpecificity());this.masterHandler.pushHandler(new YI(s.scope,this.masterHandler,s,this.validatorSet))}startWhenRule(t){let i=t.expr;this.condition!=null&&(i=pi(this.scope,this.condition,i)),this.masterHandler.pushHandler(new op(this.masterHandler,i,this,this.regionId))}startDefineRule(){this.masterHandler.pushHandler(new fN(this.scope,this.owner))}startFontFaceRule(){let t={};this.masterHandler.fontFaces.push({properties:t,condition:this.condition}),this.masterHandler.pushHandler(new Xa(this.scope,this.owner,null,t,this.masterHandler.validatorSet,"font-face"))}startFlowRule(t){let i=this.masterHandler.flowProps[t];i||(i={},this.masterHandler.flowProps[t]=i),this.masterHandler.pushHandler(new Xa(this.scope,this.owner,null,i,this.masterHandler.validatorSet))}startViewportRule(){let t={};this.masterHandler.viewportProps.push(t),this.masterHandler.pushHandler(new Xa(this.scope,this.owner,this.condition,t,this.masterHandler.validatorSet))}startFootnoteRule(t){let i=this.masterHandler.footnoteProps;if(t){let r=Va(i,"_pseudos");i=r[t],i||(i={},r[t]=i)}this.masterHandler.pushHandler(new Xa(this.scope,this.owner,null,i,this.masterHandler.validatorSet))}startRegionRule(){this.insideRegion=!0,this.startSelectorRule()}startPageRule(){let t=new vO(this.masterHandler.pageScope,this.masterHandler,this,this.validatorSet,this.masterHandler.pageProps);this.masterHandler.pushHandler(t),t.startPageRule()}startRuleBody(){if(ks.prototype.startRuleBody.call(this),this.insideRegion){this.insideRegion=!1;let t=`R${this.masterHandler.regionCount++}`;this.special("region-id",J(t)),this.endRule();let i=new op(this.masterHandler,this.condition,this,t);this.masterHandler.pushHandler(i),i.startRuleBody()}}},jf=class extends wP{constructor(e){super(),this.validatorSet=e,f(this,"rootScope"),f(this,"pageScope"),f(this,"rootBox"),f(this,"cascadeParserHandler"),f(this,"regionCount",0),f(this,"fontFaces",[]),f(this,"footnoteProps",{}),f(this,"flowProps",{}),f(this,"viewportProps",[]),f(this,"pageProps",{}),this.rootScope=new Vl(null),this.pageScope=new Vl(this.rootScope),this.rootBox=new qI(this.rootScope),this.cascadeParserHandler=new MO(this,null,null,null),this.slave=this.cascadeParserHandler}};function DO(e,t){return t.parseOPSResource(e)}var WO=class extends pd{constructor(e){super(DO,"document"),this.fontDeobfuscator=e,f(this,"styleByKey",{}),f(this,"styleFetcherByKey",{}),f(this,"styleByDocURL",{}),f(this,"triggersByDocURL",{}),f(this,"validatorSet",null),f(this,"styleSheets",[]),f(this,"triggerSingleDocumentPreprocessing",!1)}init(e,t){this.setStyleSheets(e,t);let i=Z("OPSDocStore.init");return this.validatorSet=pf(),FO().then(()=>{this.triggerSingleDocumentPreprocessing=!0,i.finish(!0)}),i.result()}getStyleForDoc(e){return this.styleByDocURL[e.url]}getTriggersForDoc(e){return this.triggersByDocURL[e.url]}setStyleSheets(e,t){this.clearStyleSheets(),e&&e.forEach(this.addAuthorStyleSheet,this),t&&t.forEach(this.addUserStyleSheet,this)}clearStyleSheets(){this.styleSheets.splice(0)}addAuthorStyleSheet(e){let t=e.url;t&&(t=et(Zn(t),Ur)),this.styleSheets.push({url:t,text:e.text,flavor:"Author",classes:null,media:null})}addUserStyleSheet(e){let t=e.url;t&&(t=et(Zn(t),Ur)),this.styleSheets.push({url:t,text:e.text,flavor:"User",classes:null,media:null})}parseOPSResource(e){let t=Z("OPSDocStore.load"),i=e.url,r=i.endsWith("?viv-toc-box");return Mf(e,this).then(s=>{var o;if(!s){t.finish(null);return}if(this.triggerSingleDocumentPreprocessing){let v=Je("PREPROCESS_SINGLE_DOCUMENT");for(let w=0;w<v.length;w++)try{v[w](s.document)}catch(T){ee.warn("Error during single document preprocessing:",T)}}let u=[],c=s.document.getElementsByTagNameNS("http://www.idpf.org/2007/ops","trigger");for(let v=0;v<c.length;v++){let w=c[v],T=w.getAttributeNS("http://www.w3.org/2001/xml-events","observer"),E=w.getAttributeNS("http://www.w3.org/2001/xml-events","event"),P=w.getAttribute("action"),O=w.getAttribute("ref");T&&E&&P&&O&&u.push({observer:T,event:E,action:P,ref:O})}this.triggersByDocURL[i]=u;let m=[];if(m.push({url:et("user-agent-page.css",kr),text:fm,flavor:"UA",classes:null,media:null}),r)m.push({url:et("user-agent-toc.css",kr),text:ym,flavor:"UA",classes:null,media:null});else{let v=s.document.querySelectorAll("style, link, meta");for(let w of v){let T=w.namespaceURI,E=w.localName;if(T=="http://www.w3.org/1999/xhtml")if(E=="style"){let P=w.getAttribute("class"),O=w.getAttribute("media"),A=w.getAttribute("title");m.push({url:i,text:w.textContent,flavor:"Author",classes:A?P:null,media:O})}else if(E=="link"){let P=w.getAttribute("href"),O=(o=w.getAttribute("rel"))==null?void 0:o.split(/\s+/),A=w.getAttribute("class"),L=w.getAttribute("media");if(P&&O!=null&&O.includes("stylesheet")&&(!O.includes("alternate")||A)){let H=et(P,i),G=w.getAttribute("title");m.push({url:H,text:null,classes:G?A:null,media:L,flavor:"Author"})}}else E=="meta"&&w.getAttribute("name")=="viewport"&&m.push({url:i,text:this.processViewportMeta(w),flavor:"Author",classes:null,media:null})}for(let w=0;w<this.styleSheets.length;w++)m.push(this.styleSheets[w])}let p="";for(let v=0;v<m.length;v++)p+=m[v].url,p+="^",m[v].text&&(p+=m[v].text),p+="^";let y=this.styleByKey[p];if(y){this.styleByDocURL[i]=y,t.finish(s);return}let S=this.styleFetcherByKey[p];S||(S=new as(()=>{let v=Z("fetchStylesheet"),w=0,T=new jf(this.validatorSet);return v.loop(()=>{if(w<m.length){let E=m[w++];return T.startStylesheet(E.flavor),E.text!==null?gd(E.text,T,E.url,E.classes,E.media).thenReturn(!0):Pm(E.url,T,E.classes,E.media)}return q(!1)}).then(()=>{let E=T.cascadeParserHandler.finish();y=new zO(this,T.rootScope,T.pageScope,E,T.rootBox,T.fontFaces,T.footnoteProps,T.flowProps,T.viewportProps,T.pageProps),this.styleByKey[p]=y,delete this.styleFetcherByKey[p],v.finish(y)}),v.result()},`FetchStylesheet ${i}`),this.styleFetcherByKey[p]=S,S.start()),S.get().then(v=>{this.styleByDocURL[i]=v,t.finish(s)})}),t.result()}processViewportMeta(e){return""}},Ms="\u25B8",qf="\u25BE",jO="\u25B9";function wu(e){let t=Array.from(e.querySelectorAll("nav[*|type],nav[epub\\:type]"));if(t.length>0||(t=Array.from(e.querySelectorAll("[role=doc-toc]")),t.length>0))return t;let i="nav,.toc,#toc,#table-of-contents,#contents,[role=directory]";for(let r of e.querySelectorAll(i)){if(t.find(o=>o.contains(r)))continue;let s=r;/^h[1-6]$/.test(s.localName)&&(s.previousElementSibling?s=s.nextElementSibling:s=s.parentElement),s&&s.querySelector("li a[href]")&&t.push(s)}return t}function qO(e){let t=wu(e),i=[];for(let r of t)for(let s of r.querySelectorAll("li a[href]"))i.push(s);return i}var VO=class{constructor(e,t,i,r,s,o,u,c,m,p){this.store=e,this.url=t,this.lang=i,this.clientLayout=r,this.fontMapper=s,this.rendererFactory=u,this.fallbackMap=c,this.documentURLTransformer=m,this.counterStore=p,f(this,"pref"),f(this,"page",null),f(this,"instance",null),this.pref=Tp(o),this.pref.spreadView=!1}setAutoHeight(e,t){if(t--!=0){for(let i=e.firstChild;i;i=i.nextSibling)if(i.nodeType==1){let r=i;Di(r,"height","auto")!="auto"&&(j(r,"height","auto"),this.setAutoHeight(r,t)),Di(r,"position","static")=="absolute"&&(j(r,"position","relative"),this.setAutoHeight(r,t))}}}makeCustomRenderer(e){let t=this.rendererFactory.makeCustomRenderer(e);return(i,r,s)=>{let o=s.behavior;if(o)switch(o.toString()){case"toc-node-anchor":s.color=N.inherit,s["text-decoration"]=N.none;break;case"toc-node":s.display=N.block,s.margin=$e,s.padding=$e,s["padding-inline-start"]=new U(1.25,"em");break;case"toc-node-first-child":s.display=N.inline_block,s.margin=new U(.2,"em"),s["vertical-align"]=N.top,s.color=N.inherit,s["text-decoration"]=N.none;break;case"toc-container":s.padding=$e;break}if(!o||o.toString()!="toc-node"&&o.toString()!="toc-container")return t(i,r,s);let u=i.firstChild;u&&u.nodeType!==1&&Tt(u)&&i.replaceChild(i.ownerDocument.createComment(u.textContent),u);let c=r.getAttribute("data-adapt-class");if(c=="toc-node"){let p=r.firstChild;p.textContent!=Ms&&(p.textContent=Ms,j(p,"cursor","pointer"),p.addEventListener("click",HO,!1),p.setAttribute("role","button"),p.setAttribute("aria-expanded","false"),r.setAttribute("aria-expanded","false"),r.style.height!=="0px"&&(p.tabIndex=0))}let m=r.ownerDocument.createElement("div");if(m.setAttribute("data-adapt-process-children","true"),o.toString()=="toc-node"){let p=r.ownerDocument.createElement("div");if(p.textContent=jO,j(p,"margin","0.2em 0 0 -1em"),j(p,"margin-inline-start","-1em"),j(p,"margin-inline-end","0"),j(p,"display","inline-block"),j(p,"width","1em"),j(p,"text-align","center"),j(p,"vertical-align","top"),j(p,"cursor","default"),j(p,"font-family","Menlo,sans-serif"),m.appendChild(p),j(m,"overflow","hidden"),m.setAttribute("data-adapt-class","toc-node"),m.setAttribute("role","treeitem"),c=="toc-node"||c=="toc-container"){j(m,"height","0px");let y=i.firstElementChild;y&&y.localName==="a"&&(y.tabIndex=-1)}else r.setAttribute("role","tree")}else c=="toc-node"&&(m.setAttribute("data-adapt-class","toc-container"),m.setAttribute("role","group"),m.setAttribute("aria-hidden","true"));return q(m)}}showTOC(e,t,i,r,s){if(this.page)return q(this.page);let o=Z("showTOC"),u=new Mm(e,e);this.page=u;let c=Mi(this.url)+"?viv-toc-box";return this.store.load(c).then(m=>{for(let w of wu(m.document))w.setAttribute("data-vivliostyle-role","doc-toc");let p=this.store.getStyleForDoc(m),y=p.sizeViewport(i,1e5,s);t=new lo(t.window,y.fontSize,0,t.root,y.width,y.height);let S=this.makeCustomRenderer(m),v=new xu(p,m,this.lang,t,this.clientLayout,this.fontMapper,S,this.fallbackMap,0,this.documentURLTransformer,this.counterStore);this.instance=v,v.pref=this.pref,v.init().then(()=>{v.layoutNextPage(u,null).then(()=>{this.setAutoHeight(e,2),o.finish(u)})})}),o.result()}hideTOC(){this.page&&(this.page.container.style.visibility="hidden",this.page.container.setAttribute("aria-hidden","true"))}isTOCVisible(){return!!this.page&&this.page.container.style.visibility==="visible"}getTOC(){if(!this.page)return[];function e(r){if(!r)return[];let s=r.querySelectorAll(":scope > [role=treeitem] > a[href]");return Array.from(s).map(t)}function t(r){let s=new URL(r.href),[,o]=s.hash.match(/^#?(.*)$/),u=r.innerText,c=r.parentElement.querySelector("[role=group]"),m=e(c);return{id:o,title:u,children:m}}let i=this.page.container.querySelector("[role=tree]");return e(i)}};function HO(e){let t=e.target,i=t.textContent==Ms;t.textContent=i?qf:Ms;let r=t.parentNode;t.setAttribute("aria-expanded",i?"true":"false"),r.setAttribute("aria-expanded",i?"true":"false");let s=r.firstChild;for(;s;){if(s.nodeType===1){let o=s,u=o.getAttribute("data-adapt-class");if(u==="toc-container"){if(o.setAttribute("aria-hidden",i?"false":"true"),o.firstChild){s=o.firstChild;continue}}else if(u==="toc-node"&&(o.style.height=i?"auto":"0px",o.children.length>=2&&(o.children[1].tabIndex=i?0:-1),o.children.length>=3&&(o.children[0].tabIndex=i?0:-1,!i))){let c=o.children[0];if(c.textContent==qf){c.textContent=Ms,c.setAttribute("aria-expanded","false"),o.setAttribute("aria-expanded","false"),s=o.children[2];continue}}}for(;!s.nextSibling&&s.parentNode!==r;)s=s.parentNode;s=s.nextSibling}e.stopPropagation()}var Vf=class extends WO{constructor(){super(null),f(this,"plainXMLStore"),f(this,"jsonStore"),f(this,"opfByURL",{}),f(this,"primaryOPFByEPubURL",{}),f(this,"deobfuscators",{}),f(this,"documents",{}),this.fontDeobfuscator=this.makeDeobfuscatorFactory(),this.plainXMLStore=LO(),this.jsonStore=yP()}makeDeobfuscatorFactory(){return e=>this.deobfuscators[e]}loadAsPlainXML(e,t,i){return this.plainXMLStore.load(e,t,i)}startLoadingAsPlainXML(e){this.plainXMLStore.fetch(e)}loadAsJSON(e,t,i){return this.jsonStore.load(e,t,i)}loadPubDoc(e){let t=Z("loadPubDoc");return Ra(e,null,"HEAD").then(i=>{if(i.status>=400)this.loadEPUBDoc(e).then(r=>{if(r){t.finish(r);return}ee.error(`Failed to fetch a source document from ${e} (${i.status}${i.statusText?" "+i.statusText:""})`),t.finish(null)});else if(!i.status&&!i.responseXML&&!i.responseText&&!i.responseBlob&&!i.contentType&&/\/[^/.]+(?:[#?]|$)/.test(e)&&(e=e.replace(/([#?]|$)/,"/$1")),i.contentType=="application/oebps-package+xml"||/\.opf(?:[#?]|$)/.test(e)){let[,r,s]=e.match(/^((?:.*\/)?)([^/]*)$/);this.loadOPF(r,s).thenFinish(t)}else i.contentType=="application/ld+json"||i.contentType=="application/webpub+json"||i.contentType=="application/audiobook+json"||i.contentType=="application/json"||/\.json(?:ld)?(?:[#?]|$)/.test(e)?this.loadAsJSON(e,!0).then(r=>{if(!r){this.reportLoadError(e),t.finish(null);return}let s=new co(this,e);s.initWithWebPubManifest(r,void 0,e).then(()=>{t.finish(s)})}):this.loadWebPub(e).then(r=>{if(r){t.finish(r);return}this.loadEPUBDoc(e).then(s=>{if(s){t.finish(s);return}ee.error(`Failed to load ${e}.`),t.finish(null)})})}),t.result()}loadEPUBDoc(e){let t=Z("loadEPUBDoc");e.endsWith("/")||(e=e+"/"),this.startLoadingAsPlainXML(e+"META-INF/encryption.xml");let i=e+"META-INF/container.xml";return this.loadAsPlainXML(i).then(r=>{if(r){let s=r.doc().child("container").child("rootfiles").child("rootfile").attribute("full-path");for(let o of s)if(o){this.loadOPF(e,o).thenFinish(t);return}}t.finish(null)}),t.result()}loadOPF(e,t){let i=e+t,r=this.opfByURL[i];if(r)return q(r);let s=Z("loadOPF");return this.loadAsPlainXML(i,!0,`Failed to fetch EPUB OPF ${i}`).then(o=>{o?(r=new co(this,e),this.opfByURL[i]=r,this.primaryOPFByEPubURL[e]=r,this.plainXMLStore.resources[e+"META-INF/container.xml"]?this.loadAsPlainXML(e+"META-INF/encryption.xml").then(u=>{r.initWithXMLDoc(o,u).then(()=>{s.finish(r)})}):r.initWithXMLDoc(o,null).then(()=>{s.finish(r)})):this.reportLoadError(i)}),s.result()}loadWebPub(e){let t=Z("loadWebPub");return this.load(e).then(i=>{if(!i)this.reportLoadError(e);else if(i.document.querySelector("a[href='META-INF/'],a[href$='/META-INF/']"))t.finish(null);else{let r=i.document,s=new co(this,e),o=r.querySelector("link[rel='publication'],link[rel='manifest'][type='application/webpub+json']");if(o){let u=o.getAttribute("href");if(/^#/.test(u)){let c=Bl(r.getElementById(u.substr(1)).textContent);s.initWithWebPubManifest(c,r).then(()=>{t.finish(s)})}else{let c=et(o.getAttribute("href"),e);this.loadAsJSON(c,!0,`Failed to fetch Publication Manifest ${c}`).then(m=>{s.initWithWebPubManifest(m,r,c).then(()=>{t.finish(s)})})}}else s.initWithWebPubManifest({},r).then(()=>{s.toc&&s.toc.src===i.url&&wu(r).length===0&&(s.toc=null),t.finish(s)})}}),t.result()}addDocument(e,t){let i=Z("EPUBDocStore.load"),r=Mi(e);return(this.documents[r]=this.parseOPSResource({status:200,statusText:"",url:r,contentType:t.contentType,responseText:null,responseXML:t,responseBlob:null})).thenFinish(i),i.result()}reportLoadError(e){let t=r=>r.replace(/([^:/?#]|^)[/?#].*/,"$1"),i=()=>{let r=t(e);return!(r===t(Ur)||Object.keys(this.resources).find(s=>this.resources[s]&&t(s)===r)||!/^https?:?\/\/[^/]/.test(e)||/\.(xhtml|xht|xml|opf)$/i.test(e))};e.startsWith("data:")?ee.error(`Failed to load ${e}. Invalid data.`):e.startsWith("http:")&&Ur.startsWith("https:")?ee.error(`Failed to load ${e}. Mixed Content ("http:" content on "https:" context) is not allowed.`):i()?ee.error(`Failed to load ${e}. This may be caused by the server not allowing cross-origin resource sharing (CORS).`):ee.error(`Failed to load ${e}. The target resource is invalid.`)}load(e){let t=Mi(e),i=this.documents[t];if(i)return i.isPending()?i:q(i.get());{let r=Z("EPUBDocStore.load");return i=super.load(t,!0,`Failed to fetch a source document from ${t}`),i.then(s=>{s?r.finish(s):this.reportLoadError(t)}),r.result()}}processViewportMeta(e){let t=e.getAttribute("content");if(!t)return"";let i={},r;for(;(r=t.match(/^,?\s*([-A-Za-z_.][-A-Za-z_0-9.]*)\s*=\s*([-+A-Za-z_0-9.]*)\s*/))!=null;)t=t.substr(r[0].length),i[r[1]]=r[2];let s=i.width-0,o=i.height-0;if(s&&o){let u=!!Object.values(this.primaryOPFByEPubURL).find(c=>c.prePaginated);return`@-epubx-viewport{width:${s}px;height:${o}px;}`+(u?`@page{size:${s}px ${o}px;margin:0;}`:"@page{margin:0;}")}return""}},Hf=class{constructor(){f(this,"id",null),f(this,"src",""),f(this,"mediaType",null),f(this,"title",null),f(this,"itemRefElement",null),f(this,"spineIndex",-1),f(this,"compressedSize",0),f(this,"compressed",null),f(this,"epage",0),f(this,"epageCount",0),f(this,"startPage",null),f(this,"skipPagesBefore",null),f(this,"itemProperties"),this.itemProperties=qT}initWithElement(e,t){this.id=e.getAttribute("id"),this.src=et(e.getAttribute("href"),t),this.mediaType=e.getAttribute("media-type");let i=e.getAttribute("properties");i&&(this.itemProperties=XT(i.split(/\s+/)))}initWithParam(e){this.spineIndex=e.index,this.id=`item${e.index+1}`,this.src=e.url,this.startPage=e.startPage,this.skipPagesBefore=e.skipPagesBefore}};function UO(e){return e.id}function GO(e){return t=>{let i=Z("deobfuscator");return $O("SHA-1",e).then(r=>{let s=t.slice(0,1040),o=t.slice(1040,t.size);gP(s).then(u=>{let c=new DataView(u);for(let m=0;m<c.byteLength;m++){let p=c.getUint8(m);p^=r[m%20],c.setUint8(m,p)}i.finish(Sm([c,o]))})}),i.result()}}function $O(e,t){let i=Z("makeDigest"),r=i.suspend();return window.crypto.subtle.digest(e,new TextEncoder().encode(t)).then(s=>{r.schedule(new Uint8Array(s))}),i.result()}var pr={dcterms:"http://purl.org/dc/terms/",marc:"http://id.loc.gov/vocabulary/",media:"http://www.idpf.org/epub/vocab/overlays/#",rendition:"http://www.idpf.org/vocab/rendition/#",onix:"http://www.editeur.org/ONIX/book/codelists/current.html#",xsd:"http://www.w3.org/2001/XMLSchema#",opf:"http://www.idpf.org/2007/opf"},Ds="http://idpf.org/epub/vocab/package/meta/#",ht={language:`${pr.dcterms}language`,title:`${pr.dcterms}title`,creator:`${pr.dcterms}creator`,layout:`${pr.rendition}layout`,titleType:`${Ds}title-type`,displaySeq:`${Ds}display-seq`,alternateScript:`${Ds}alternate-script`,role:`${Ds}role`};function YO(e,t){let i={};return(r,s)=>{var o,u,c,m,p,y;let S,v,w=r.r||i,T=s.r||i;if(e==ht.title&&(S=((o=w[ht.titleType])==null?void 0:o[0].v)=="main",v=((u=T[ht.titleType])==null?void 0:u[0].v)=="main",S!=v))return S?-1:1;let E=parseInt((c=w[ht.displaySeq])==null?void 0:c[0].v,10);isNaN(E)&&(E=Number.MAX_VALUE);let P=parseInt((m=T[ht.displaySeq])==null?void 0:m[0].v,10);return isNaN(P)&&(P=Number.MAX_VALUE),E!=P?E-P:e!=ht.language&&t&&(S=((p=w[ht.language]||w[ht.alternateScript])==null?void 0:p[0].v)==t,v=((y=T[ht.language]||T[ht.alternateScript])==null?void 0:y[0].v)==t,S!=v)?S?-1:1:r.o-s.o}}function XO(e,t){let i;if(!t)i=pr;else{i={};for(let v in pr)i[v]=pr[v];let S;for(;(S=t.match(/^\s*([A-Z_a-z\u007F-\uFFFF][-.A-Z_a-z0-9\u007F-\uFFFF]*):\s*(\S+)/))!=null;)t=t.substr(S[0].length),i[S[1]]=S[2]}let r=S=>{if(S){let v=S.match(/^\s*(([^:]*):)?(\S+)\s*$/);if(v){let w=v[2]?i[v[2]]:Ds;if(w)return w+v[3]}}return null},s=1,o=e.childElements().forEachNonNull(S=>{if(S.localName=="meta"){let v=r(S.getAttribute("property"));if(v)return{name:v,value:S.textContent,id:S.getAttribute("id"),order:s++,refines:S.getAttribute("refines"),lang:null,scheme:r(S.getAttribute("scheme")),role:null}}else if(S.namespaceURI=="http://purl.org/dc/elements/1.1/")return{name:pr.dcterms+S.localName,order:s++,lang:S.getAttribute("xml:lang"),value:S.textContent,id:S.getAttribute("id"),refines:null,scheme:null,role:S.getAttribute("role")||S.getAttribute("opf:role")};return null}),u=Ml(o,S=>S.refines),c=S=>KT(S,(v,w)=>v.map(T=>{let E={v:T.value,o:T.order};T.scheme&&(E.s=T.scheme);let P=u[`#${T.id}`]||[];if(P.length||T.lang||T.role){T.lang&&P.push({name:ht.language,value:T.lang,lang:null,id:null,refines:T.id,scheme:null,order:T.order,role:null}),T.role&&P.push({name:ht.role,value:T.role,lang:null,id:null,refines:T.id,scheme:null,order:T.order,role:null});let O=Ml(P,A=>A.name);E.r=c(O)}return E})),m=c(Ml(o,S=>S.refines?null:S.name)),p=null;m[ht.language]&&(p=m[ht.language][0].v);let y=S=>{for(let v in S){let w=S[v];w.sort(YO(v,p));for(let T=0;T<w.length;T++){let E=w[T].r;E&&y(E)}}};return y(m),m}function KO(){let e=window.MathJax;return e?e.Hub:null}var Uf={"application/xhtml+xml":!0,"image/jpeg":!0,"image/png":!0,"image/svg+xml":!0,"image/gif":!0,"audio/mp3":!0},Cu="viv-id-",co=class{constructor(e,t){this.store=e,this.pubURL=t,f(this,"opfXML",null),f(this,"encXML",null),f(this,"items",null),f(this,"spine",null),f(this,"itemMap",null),f(this,"itemMapByPath",null),f(this,"uid",null),f(this,"bindings",{}),f(this,"lang",null),f(this,"epageCount",0),f(this,"prePaginated",!1),f(this,"epageIsRenderedPage",!0),f(this,"epageCountCallback",null),f(this,"metadata",{}),f(this,"toc",null),f(this,"cover",null),f(this,"fallbackMap",{}),f(this,"pageProgression",null),f(this,"documentURLTransformer"),this.documentURLTransformer=this.createDocumentURLTransformer()}createDocumentURLTransformer(){let e=this;class t{transformFragment(r,s){let o=s+(r?`#${r}`:"");return Cu+gp(o,":")}transformURL(r,s){let o=r.match(/^([^#]*)#?(.*)$/);if(o){let u=o[1]||s.replace(/\?viv-toc-box$/,""),c=decodeURIComponent(o[2]);if(u&&e.spine.some(m=>m.src===u))return`#${this.transformFragment(c,u)}`}return r}restoreURL(r){r.charAt(0)==="#"&&(r=r.substring(1)),r.indexOf(Cu)===0&&(r=r.substring(Cu.length));let s=YT(r,":").match(/^([^#]*)#?(.*)$/);return s?[s[1],s[2]]:[]}}return new t}getMetadata(){return this.metadata}getPathFromURL(e){if(e.startsWith("data:"))return e===this.pubURL?"":e;if(this.pubURL){let t=et("",this.pubURL);return e===t||e+"/"===t?"":(t.charAt(t.length-1)!="/"&&(t+="/"),e.substr(0,t.length)==t?decodeURIComponent(e.substr(t.length)):null)}else return e}initWithXMLDoc(e,t){this.opfXML=e,this.encXML=t;let i=e.doc().child("package"),r=i.attribute("unique-identifier")[0];if(r){let m=e.getElement(`${e.url}#${r}`);m&&(this.uid=m.textContent.replace(/[ \n\r\t]/g,""))}let s={};this.items=i.child("manifest").child("item").asArray().map(m=>{let p=new Hf,y=m;p.initWithElement(y,e.url);let S=y.getAttribute("fallback");return S&&!Uf[p.mediaType]&&(s[p.src]=S),!this.toc&&p.itemProperties.nav&&(this.toc=p),!this.cover&&p.itemProperties["cover-image"]&&(this.cover=p),p}),this.itemMap=bp(this.items,UO),this.itemMapByPath=bp(this.items,m=>this.getPathFromURL(m.src));for(let m in s){let p=m;for(;;){let y=this.itemMap[s[p]];if(!y)break;if(Uf[y.mediaType]){this.fallbackMap[m]=y.src;break}p=y.src}}this.spine=i.child("spine").child("itemref").asArray().map((m,p)=>{let y=m,S=y.getAttribute("idref"),v=this.itemMap[S];return v&&(v.itemRefElement=y,v.spineIndex=p),v});let o=i.child("spine").attribute("page-progression-direction")[0];o&&(this.pageProgression=me(o));let u=t?t.doc().child("encryption").child("EncryptedData").predicate(Df.withChild("EncryptionMethod",Df.withAttribute("Algorithm","http://www.idpf.org/2008/embedding"))).child("CipherData").child("CipherReference").attribute("URI"):[],c=i.child("bindings").child("mediaType").asArray();for(let m=0;m<c.length;m++){let p=c[m].getAttribute("handler"),y=c[m].getAttribute("media-type");y&&p&&this.itemMap[p]&&(this.bindings[y]=this.itemMap[p].src)}if(this.metadata=XO(i.child("metadata"),i.attribute("prefix")[0]),this.metadata[ht.language]&&(this.lang=this.metadata[ht.language][0].v),this.metadata[ht.layout]&&(this.prePaginated=this.metadata[ht.layout][0].v==="pre-paginated"),u.length>0&&this.uid){let m=GO(this.uid);for(let p=0;p<u.length;p++)this.store.deobfuscators[this.pubURL+u[p]]=m}return this.prePaginated&&this.assignAutoPages(),q(!0)}assignAutoPages(){let e=0;for(let t of this.spine){let i=this.prePaginated?1:Math.ceil(t.compressedSize/1024);t.epage=e,t.epageCount=i,e+=i}this.epageCount=e,this.epageCountCallback&&this.epageCountCallback(this.epageCount)}setEPageCountMode(e){this.epageIsRenderedPage=e||this.prePaginated}countEPages(e){if(this.epageCountCallback=e,this.epageIsRenderedPage)return this.prePaginated&&this.epageCount==0&&this.assignAutoPages(),q(!0);let t=0,i=0,r=Z("countEPages");return r.loopWithFrame(s=>{if(i===this.spine.length){s.breakLoop();return}let o=this.spine[i++];o.epage=t,this.store.load(o.src).then(u=>{let c=1800,m=u.lang||this.lang;m&&m.match(/^(ja|ko|zh)/)&&(c/=3),o.epageCount=Math.ceil(u.getTotalOffset()/c),t+=o.epageCount,this.epageCount=t,this.epageCountCallback&&this.epageCountCallback(this.epageCount),s.continueLoop()})}).thenFinish(r),r.result()}initWithChapters(e,t){this.itemMap={},this.itemMapByPath={},this.items=[],this.spine=this.items;let i=this.opfXML=new zf(null,"",new DOMParser().parseFromString("<spine></spine>","text/xml"));return e.forEach(r=>{let s=new Hf;s.initWithParam(r),s.id;let o=i.document.createElement("itemref");o.setAttribute("idref",s.id),i.root.appendChild(o),s.itemRefElement=o,this.itemMap[s.id]=s;let u=this.getPathFromURL(r.url);u==null&&(u=r.url),this.itemMapByPath[u]=s,this.items.push(s)}),t?this.store.addDocument(e[0].url,t):q(null)}initWithWebPubManifest(e,t,i){var r,s,o,u;e.readingProgression&&(this.pageProgression=e.readingProgression),this.metadata===void 0&&(this.metadata={});let c=e.name||((r=e.metadata)==null?void 0:r.title)||t?.title;c&&(this.metadata[ht.title]=(Array.isArray(c)?c:[c]).map(E=>{var P;return{v:(P=E.value)!=null?P:E}}));let m=e.author||e.creator||((s=e.metadata)==null?void 0:s.author)||Array.from((o=t?.querySelectorAll("meta[name='author'], meta[name='DC.Creator']"))!=null?o:[]).map(E=>E.content);m&&m.length!==0&&(this.metadata[ht.creator]=(Array.isArray(m)?m:[m]).map(E=>{var P;return{v:(P=E.name)!=null?P:E}}));let p=e.inLanguage||((u=e.metadata)==null?void 0:u.language)||t?.documentElement.lang||t?.documentElement.getAttribute("xml:lang");p&&(this.metadata[ht.language]=(Array.isArray(p)?p:[p]).map(E=>({v:E})));let y=this.getPathFromURL(this.pubURL);if(!e.readingOrder&&t&&y!==null){e.readingOrder=[encodeURI(y)];for(let E of qO(t)){let P=E.getAttribute("href");if(/^(https?:)?\/\//.test(P)||/\.(jpe?g|png|gif|pdf|svg|mml)([#?]|$)/.test(P))continue;let O=Mi(et(P,this.pubURL)),A=this.getPathFromURL(O),L=A!==null?encodeURI(A):O;e.readingOrder.indexOf(L)==-1&&e.readingOrder.push(L)}}let S=[],v=0,w=-1;[e.readingOrder,e.resources].forEach(E=>{E instanceof Array&&E.forEach(P=>{let O=E===e.readingOrder,A=typeof P=="string"?P:P.url||P.href,L=typeof P=="string"?"":P.encodingFormat||P.href&&P.type||"";if(O||L==="text/html"||L==="application/xhtml+xml"||!L&&P.rel!=="stylesheet"&&/(^|\/)([^/]+\.(x?html|htm|xht)|[^/.]*)([#?]|$)/.test(A)){let H=i?i.replace(/\/[^/]+$/,"/"):this.pubURL,G={url:et(Zn(A),H),index:v++,startPage:null,skipPagesBefore:null};P.rel==="contents"&&w===-1&&(w=G.index),S.push(G)}})});let T=Z("initWithWebPubManifest");return this.initWithChapters(S).then(()=>{var E,P;w!==-1&&(this.toc=this.items[w]),this.toc||(this.toc=i?(E=this.items)==null?void 0:E[0]:this.itemMapByPath[y]);let O=(P=e.readingOrder)==null?void 0:P.length;O&&O<this.items.length&&this.items.splice(O),T.finish(!0)}),T.result()}getCFI(e,t){let i=this.spine[e],r=Z("getCFI");return this.store.load(i.src).then(s=>{let o=s.getNodeByOffset(t),u=null;if(o){let c=s.getNodeOffset(o,0,!1),m=t-c,p=new kp;p.prependPathFromNode(o,m,!1,null),i.itemRefElement&&p.prependPathFromNode(i.itemRefElement,0,!1,null),u=p.toString()}r.finish(u)}),r.result()}resolveFragment(e){return Zr("resolveFragment",t=>{if(!e){t.finish(null);return}let i=new kp;i.fromString(e);let r;if(this.opfXML){let s=i.navigate(this.opfXML.document);if(s.node.nodeType!=1||s.after||!s.ref){t.finish(null);return}let o=s.node,u=o.getAttribute("idref");if(o.localName!="itemref"||!u||!this.itemMap[u]){t.finish(null);return}r=this.itemMap[u],i=s.ref}else r=this.spine[0];this.store.load(r.src).then(s=>{let o=i.navigate(s.document),u=s.getNodeOffset(o.node,o.offset,o.after);t.finish({spineIndex:r.spineIndex,offsetInItem:u,pageIndex:-1})})},(t,i)=>{ee.warn(i,"Cannot resolve fragment:",e),t.finish(null)})}resolveEPage(e){return Zr("resolveEPage",t=>{if(e<=0){t.finish({spineIndex:0,offsetInItem:0,pageIndex:-1});return}if(this.epageIsRenderedPage){let s=this.spine.findIndex(c=>c.epage==0&&c.epageCount==0||c.epage<=e&&c.epage+c.epageCount>e);s==-1&&(s=this.spine.length-1);let o=this.spine[s];(!o||o.epageCount==0)&&(o=this.spine[--s]);let u=Math.floor(e-o.epage);t.finish({spineIndex:s,offsetInItem:-1,pageIndex:u});return}let i=sr(this.spine.length,s=>{let o=this.spine[s];return o.epage+o.epageCount>e});i==this.spine.length&&i--;let r=this.spine[i];this.store.load(r.src).then(s=>{e-=r.epage,e>r.epageCount&&(e=r.epageCount);let o=0;if(e>0){let u=s.getTotalOffset();o=Math.round(u*e/r.epageCount),o==u&&o--}t.finish({spineIndex:i,offsetInItem:o,pageIndex:-1})})},(t,i)=>{ee.warn(i,"Cannot resolve epage:",e),t.finish(null)})}getEPageFromPosition(e){let t=this.spine[e.spineIndex];if(this.epageIsRenderedPage){let r=t.epage+e.pageIndex;return q(r)}if(e.offsetInItem<=0)return q(t.epage);let i=Z("getEPage");return this.store.load(t.src).then(r=>{let s=r.getTotalOffset(),o=Math.min(s,e.offsetInItem);i.finish(t.epage+o*t.epageCount/s)}),i.result()}},ho=(e,t)=>({page:e,position:{spineIndex:e.spineIndex,pageIndex:t,offsetInItem:e.offset}}),ZO=class{constructor(e,t,i,r,s){this.opf=e,this.viewport=t,this.fontMapper=i,this.pageSheetSizeReporter=s,f(this,"spineItems",[]),f(this,"spineItemLoadingContinuations",[]),f(this,"pref"),f(this,"clientLayout"),f(this,"counterStore"),f(this,"tocAutohide",!1),f(this,"tocVisible",!1),f(this,"tocView"),this.pref=Tp(r),this.clientLayout=new OO(t),this.counterStore=new M1(e.documentURLTransformer)}getPage(e){let t=this.spineItems[e.spineIndex];return t?t.pages[e.pageIndex]:null}getCurrentPageProgression(e){if(this.opf.pageProgression)return this.opf.pageProgression;{let t=this.spineItems[e?e.spineIndex:0];return t?t.instance.pageProgression:null}}finishPageContainer(e,t,i){t.container.style.display="none",t.container.style.visibility="visible",t.container.style.position="",t.container.style.top="",t.container.style.left="",t.container.setAttribute("data-vivliostyle-page-side",t.side);let r=e.pages[i];if(t.isFirstPage=e.item.spineIndex==0&&i==0,e.pages[i]=t,this.opf.epageIsRenderedPage){if(i==0&&e.item.spineIndex>0){let s=this.opf.spine[e.item.spineIndex-1];e.item.epage=s.epage+s.epageCount}e.item.epageCount=e.pages.length,this.opf.epageCount=this.opf.spine.reduce((s,o)=>s+o.epageCount,0),this.opf.epageCountCallback&&this.opf.epageCountCallback(this.opf.epageCount)}if(r)e.instance.viewport.contentContainer.replaceChild(t.container,r.container),r.dispatchEvent({type:"replaced",target:null,currentTarget:null,preventDefault:null,newPage:t});else{let s=null;if(i>0)s=e.pages[i-1].container.nextElementSibling;else for(let o=e.item.spineIndex+1;o<this.spineItems.length;o++){let u=this.spineItems[o];if(u&&u.pages[0]){s=u.pages[0].container;break}}e.instance.viewport.contentContainer.insertBefore(t.container,s)}this.pageSheetSizeReporter({width:e.instance.pageSheetWidth,height:e.instance.pageSheetHeight},e.instance.pageSheetSize,e.item.spineIndex,e.instance.pageNumberOffset+i)}renderSinglePage(e,t){let i=Z("renderSinglePage"),r=e.pages[t?t.page:0],s=this.makePage(e,t);return r&&(s.pageType=r.pageType),e.instance.layoutNextPage(s,t).then(o=>{t=o;let u=t?t.page-1:e.layoutPositions.length-1;this.finishPageContainer(e,s,u),this.counterStore.finishPage(s.spineIndex,u);let c=null;if(t){let m=e.layoutPositions[t.page];e.layoutPositions[t.page]=t,m&&e.pages[t.page]&&(t.isSamePosition(m)||(c=this.renderSinglePage(e,t)))}c||(c=q(!0)),c.then(()=>{let m=this.counterStore.getUnresolvedRefsToPage(s),p=0;i.loopWithFrame(y=>{if(p++,p>m.length){y.breakLoop();return}let S=m[p-1];if(S.refs=S.refs.filter(v=>!v.isResolved()),S.refs.length===0){y.continueLoop();return}this.getPageViewItem(S.spineIndex).then(v=>{if(!v){y.continueLoop();return}let{currentPageType:w,previousPageType:T}=v.instance.styler.cascade,E=v.instance.scopes;v.instance.scopes={},this.counterStore.pushPageCounters(S.pageCounters),this.counterStore.pushReferencesToSolve(S.refs);let P=v.layoutPositions[S.pageIndex];this.renderSinglePage(v,P).then(O=>{v.instance.styler.cascade.currentPageType=w,v.instance.styler.cascade.previousPageType=T,v.instance.scopes=E,this.counterStore.popPageCounters(),this.counterStore.popReferencesToSolve();let A=O.pageAndPosition.position;A.spineIndex===s.spineIndex&&A.pageIndex===u&&(s=O.pageAndPosition.page),y.continueLoop()})})}).then(()=>{s.container.parentElement||(s=e.pages[u]),s.isLastPage=!t&&e.item.spineIndex===this.opf.spine.length-1,s.isLastPage&&(this.viewport,this.counterStore.finishLastPage(this.viewport)),s.container.setAttribute("data-vivliostyle-page-index",u),s.container.setAttribute("data-vivliostyle-spine-index",s.spineIndex),i.finish({pageAndPosition:ho(s,u),nextLayoutPosition:t})})})}),i.result()}normalizeSeekPosition(e,t){let i=e.pageIndex,r=-1;if(i<0){r=e.offsetInItem;let s=sr(t.layoutPositions.length,o=>t.instance.getPosition(t.layoutPositions[o],!0)>r);s===t.layoutPositions.length?t.complete?i=t.layoutPositions.length-1:i=Number.POSITIVE_INFINITY:i=s-1}else i===Number.POSITIVE_INFINITY&&e.offsetInItem!==-1&&(r=e.offsetInItem);return{spineIndex:e.spineIndex,pageIndex:i,offsetInItem:r}}findPage(e,t){let i=Z("findPage");return this.getPageViewItem(e.spineIndex).then(r=>{if(!r){i.finish(null);return}let s=null,o;i.loopWithFrame(u=>{let c=this.normalizeSeekPosition(e,r);o=c.pageIndex,s=r.pages[o],s?u.breakLoop():r.complete?(o=r.layoutPositions.length-1,s=r.pages[o],u.breakLoop()):t?this.renderPage(c).then(m=>{m&&(s=m.page,o=m.position.pageIndex),u.breakLoop()}):i.sleep(100).then(()=>{u.continueLoop()})}).then(()=>{i.finish(ho(s,o))})}),i.result()}renderPage(e){let t=Z("renderPage");return this.getPageViewItem(e.spineIndex).then(i=>{if(!i){t.finish(null);return}let r=this.normalizeSeekPosition(e,i),s=r.pageIndex,o=r.offsetInItem,u=i.pages[s];if(u){t.finish(ho(u,s));return}t.loopWithFrame(c=>{if(s<i.layoutPositions.length){c.breakLoop();return}if(i.complete){s=i.layoutPositions.length-1,c.breakLoop();return}let m=i.layoutPositions[i.layoutPositions.length-1];this.renderSinglePage(i,m).then(p=>{let y=p.pageAndPosition.page;if(m=p.nextLayoutPosition,m){if(o>=0&&i.instance.getPosition(m)>o){u=y,s=i.layoutPositions.length-2,c.breakLoop();return}c.continueLoop()}else u=y,s=p.pageAndPosition.position.pageIndex,i.complete=!0,c.breakLoop()})}).then(()=>{u=u||i.pages[s];let c=i.layoutPositions[s];if(u){t.finish(ho(u,s));return}this.renderSinglePage(i,c).then(m=>{m.nextLayoutPosition||(i.complete=!0),t.finish(m.pageAndPosition)})})}),t.result()}renderAllPages(){let e=Z("renderAllPages");return this.renderPagesUpto({spineIndex:this.opf.spine.length-1,pageIndex:Number.POSITIVE_INFINITY,offsetInItem:-1},!1).then(t=>{e.loopWithFrame(i=>{this.spineItems.some(r=>r?.pages.some(s=>s?.fetchers.some(o=>!o.arrived)))?e.sleep(100).then(()=>{i.continueLoop()}):i.breakLoop()}).then(()=>{e.finish(t)})}),e.result()}renderPagesUpto(e,t){let i=Z("renderPagesUpto");e||(e={spineIndex:0,pageIndex:0,offsetInItem:0});let r=e.spineIndex,s=e.pageIndex,o=0;t&&(o=r);let u;return i.loopWithFrame(c=>{let m={spineIndex:o,pageIndex:o===r?s:Number.POSITIVE_INFINITY,offsetInItem:o===r?e.offsetInItem:-1};this.renderPage(m).then(p=>{u=p,++o>r?c.breakLoop():c.continueLoop()})}).then(()=>{i.finish(u)}),i.result()}firstPage(e,t){return this.findPage({spineIndex:0,pageIndex:0,offsetInItem:-1},t)}lastPage(e,t){return this.findPage({spineIndex:this.opf.spine.length-1,pageIndex:Number.POSITIVE_INFINITY,offsetInItem:-1},t)}nextPage(e,t){let i=e.spineIndex,r=e.pageIndex,s=Z("nextPage");return this.getPageViewItem(i).then(o=>{if(!o){s.finish(null);return}if(o.complete&&r==o.layoutPositions.length-1){if(i>=this.opf.spine.length-1){s.finish(null);return}i++,r=0;let u=this.spineItems[i],c=u&&u.pages[0],m=o.pages[o.pages.length-1];c&&m&&c.side==m.side&&(u.pages.forEach(p=>{p.container&&p.container.remove()}),this.spineItems[i]=null,this.spineItemLoadingContinuations[i]=null)}else r++;this.findPage({spineIndex:i,pageIndex:r,offsetInItem:-1},t).thenFinish(s)}),s.result()}previousPage(e,t){let i=e.spineIndex,r=e.pageIndex;if(r==0){if(i==0)return q(null);i--,r=Number.POSITIVE_INFINITY}else r--;return this.findPage({spineIndex:i,pageIndex:r,offsetInItem:-1},t)}isRectoPage(e,t){let i=e.side==="left",r=this.getCurrentPageProgression(t)==="ltr";return!i&&r||i&&!r}getSpread(e,t){let i=this.getPage(e);if(!i)return q({left:null,right:null});let r=Z("getSpread"),s=i.side==="left",o;return this.isRectoPage(i,e)?o=this.previousPage(e,t):o=this.nextPage(e,t),o.then(u=>{let c=this.getPage(e),m=u&&u.page;m&&m.side===c.side&&(m=null),s?r.finish({left:c,right:m}):r.finish({left:m,right:c})}),r.result()}nextSpread(e,t){let i=this.getPage(e);if(!i)return q(null);let r=this.isRectoPage(i,e),s=this.nextPage(e,t);return r?s:s.thenAsync(o=>{if(o){if(o.page.side===i.side)return s;let u=this.nextPage(o.position,t);return u.thenAsync(c=>c?u:s)}else return q(null)})}previousSpread(e,t){let i=this.getPage(e);if(!i)return q(null);let r=this.isRectoPage(i,e),s=this.previousPage(e,t),o=i.container.previousElementSibling;return r?s.thenAsync(u=>u?u.page.side===i.side||u.page.container!==o?s:this.previousPage(u.position,t):q(null)):s}navigateToEPage(e,t,i){let r=Z("navigateToEPage");return this.opf.resolveEPage(e).then(s=>{s?this.findPage(s,i).thenFinish(r):r.finish(null)}),r.result()}navigateToFragment(e,t,i){let r=Z("navigateToCFI");return this.opf.resolveFragment(e).then(s=>{s?this.findPage(s,i).thenFinish(r):r.finish(null)}),r.result()}navigateTo(e,t,i){ee.debug("Navigate to",e);let r=this.opf.getPathFromURL(Mi(e));if(!r){if(this.opf.opfXML&&e.match(/^#epubcfi\(/))r=this.opf.getPathFromURL(this.opf.opfXML.url);else if(e.charAt(0)==="#"){let u=this.opf.documentURLTransformer.restoreURL(e);this.opf.opfXML?(r=this.opf.getPathFromURL(u[0]),r==null&&(r=u[0])):r=u[0],e=u[0]+(u[1]?`#${u[1]}`:"")}if(r==null)return q(null)}let s=this.opf.itemMapByPath[r];if(!s){if(this.opf.opfXML&&r==this.opf.getPathFromURL(this.opf.opfXML.url)){let u=e.indexOf("#");if(u>=0)return this.navigateToFragment(e.substr(u+1),t,i)}return q(null)}let o=Z("navigateTo");return this.getPageViewItem(s.spineIndex).then(u=>{if(!u){o.finish(null);return}let c=u.xmldoc.getElement(e);this.findPage({spineIndex:s.spineIndex,pageIndex:-1,offsetInItem:c?u.xmldoc.getElementOffset(c):0},i).thenFinish(o)}),o.result()}makePage(e,t){let i=e.instance.viewport,r=i.document.createElement("div");r.setAttribute("data-vivliostyle-page-container","true"),r.role="presentation",V||(r.style.visibility="hidden"),i.layoutBox.appendChild(r);let s=i.document.createElement("div");s.setAttribute("data-vivliostyle-bleed-box","true"),s.role="presentation",r.appendChild(s);let o=new Mm(r,s);if(o.spineIndex=e.item.spineIndex,o.position=t,o.offset=e.instance.getPosition(t),o.offset===0&&!(e.instance.blankPageAtStart&&e.pages.length===0)){let u=this.opf.documentURLTransformer.transformFragment("",e.item.src);s.setAttribute("id",u),o.registerElementWithId(s,u)}if(i!==this.viewport){let u=Ap(this.viewport.width,this.viewport.height,i.width,i.height),c=tn(null,new ki(u,null),"");o.delayedItems.push(new Sd(r,"transform",c))}return o}makeObjectView(e,t,i,r){let s=t.getAttribute("data"),o=null;if(s){s=et(s,e.url);let u=t.getAttribute("media-type");if(!u){let c=this.opf.getPathFromURL(s);if(c){let m=this.opf.itemMapByPath[c];m&&(u=m.mediaType)}}if(u){let c=this.opf.bindings[u];if(c){o=this.viewport.document.createElement("iframe"),o.style.border="none";let m=pp(s),p=pp(u),y=new Wi;y.append(c),y.append("?src="),y.append(m),y.append("&type="),y.append(p);for(let w=t.firstChild;w;w=w.nextSibling)if(w.nodeType==1){let T=w;if(T.localName=="param"&&T.namespaceURI=="http://www.w3.org/1999/xhtml"){let E=T.getAttribute("name"),P=T.getAttribute("value");E&&P&&(y.append("&"),y.append(encodeURIComponent(E)),y.append("="),y.append(encodeURIComponent(P)))}}o.setAttribute("src",y.toString());let S=t.getAttribute("width");S&&o.setAttribute("width",S);let v=t.getAttribute("height");v&&o.setAttribute("height",v)}}}return o||(o=this.viewport.document.createElement("object"),s&&o.setAttribute("data",s),o.setAttribute("data-adapt-process-children","true")),q(o)}makeMathJaxView(e,t,i,r){let s=KO();if(s){let o=i.ownerDocument,u=o.createElement("span");i.appendChild(u);let c=o.importNode(t,!0);this.resolveURLsInMathML(c,e),u.appendChild(c);let m=s.queue;m.Push(["Typeset",s,u]);let p=Z("makeMathJaxView"),y=p.suspend();return m.Push(()=>{y.schedule(u)}),p.result()}return q(null)}resolveURLsInMathML(e,t){if(e!=null){if(e.nodeType===1&&e.tagName==="mglyph"){let i=Array.from(e.attributes);for(let r of i){if(r.name!=="src")continue;let s=et(r.nodeValue,t.url);r.namespaceURI?e.setAttributeNS(r.namespaceURI,r.name,s):e.setAttribute(r.name,s)}}e.firstChild&&this.resolveURLsInMathML(e.firstChild,t),e.nextSibling&&this.resolveURLsInMathML(e.nextSibling,t)}}makeCustomRenderer(e){return(t,i,r)=>t.localName=="object"&&t.namespaceURI=="http://www.w3.org/1999/xhtml"?this.makeObjectView(e,t,i,r):t.namespaceURI=="http://www.w3.org/1998/Math/MathML"?this.makeMathJaxView(e,t,i,r):t.dataset&&t.dataset.mathTypeset=="true"?this.makeMathJaxView(e,t,i,r):q(null)}getPageViewItem(e){if(e===-1||e>=this.opf.spine.length)return q(null);let t=this.spineItems[e];if(t)return q(t);let i=Z("getPageViewItem"),r=this.spineItemLoadingContinuations[e];if(r){let u=i.suspend();return r.push(u),i.result()}else r=this.spineItemLoadingContinuations[e]=[];let s=this.opf.spine[e],o=this.opf.store;return o.load(s.src).then(u=>{var c;let m=s.itemRefElement.getAttribute("properties");m&&u.root.setAttribute("data-vivliostyle-epub-spine-properties",m),s.title=u.document.title;let p=o.getStyleForDoc(u),y=this.makeCustomRenderer(u),S=this.viewport,v=p.sizeViewport(S.width,S.height,S.fontSize,this.pref);(v.width!=S.width||v.height!=S.height||v.fontSize!=S.fontSize)&&(S=new lo(S.window,v.fontSize,S.pixelRatio,S.root,v.width,v.height));let w=(c=this.spineItems[0])==null?void 0:c.instance.isVersoFirstPage,T=this.spineItems[e-1],E,P;if(s.startPage!==null)E=s.startPage-1,P=E;else{if(e>0&&(!T||!T.complete))E=s.epage||e,!this.opf.prePaginated&&E%2==(w?1:0)&&E++,P=E;else{E=T?T.instance.pageNumberOffset+T.pages.length:0;let L=this.counterStore.currentPageCounters.page;P=!L||!L.length?E:L[L.length-1]}s.skipPagesBefore!==null&&(E+=s.skipPagesBefore,P+=s.skipPagesBefore)}this.counterStore.forceSetPageCounter(P);let O=new xu(p,u,this.opf.lang,S,this.clientLayout,this.fontMapper,y,this.opf.fallbackMap,E,this.opf.documentURLTransformer,this.counterStore,this.opf.pageProgression,w);O.pref=this.pref;let A=this.opf.metadata&&this.opf.metadata[ht.title];O.pubTitle=A&&A[0]&&A[0].v||"",O.docTitle=s.title||"",O.init().then(()=>{!this.opf.pageProgression&&O.pageProgression&&(this.opf.pageProgression=O.pageProgression),t={item:s,xmldoc:u,instance:O,layoutPositions:[null],pages:[],complete:!1},this.spineItems[e]=t,i.finish(t),r.forEach(L=>{L.schedule(t)})})}),i.result()}removeRenderedPages(){let e=this.spineItems;for(let t of e)t&&t.pages.splice(0);this.viewport.clear()}hasAutoSizedPages(){let e=this.spineItems;for(let t of e)if(t){let i=t.pages;for(let r of i)if(r.isAutoPageWidth&&r.isAutoPageHeight)return!0}return!1}hasPages(){return this.spineItems.some(e=>e&&e.pages.length>0)}showTOC(e){let t=this.opf,i=t.toc;if(this.tocAutohide=e,!i)return q(null);if(this.tocVisible=!0,this.tocView&&this.tocView.page)return this.tocView.page.container.style.visibility="visible",this.tocView.page.container.setAttribute("aria-hidden","false"),q(this.tocView.page);let r=Z("showTOC");this.tocView||(this.tocView=new VO(t.store,i.src,t.lang,this.clientLayout,this.fontMapper,this.pref,this,t.fallbackMap,t.documentURLTransformer,this.counterStore));let s=this.viewport,o=Math.min(344,Math.round(.67*s.width)-16),u=s.height-6,c=s.document.createElement("div");return s.root.appendChild(c),V||(c.style.visibility="hidden"),c.style.width=`${o+16}px`,c.style.maxHeight=`${u}px`,c.setAttribute("data-vivliostyle-toc-box","true"),c.setAttribute("role","navigation"),this.tocView.showTOC(c,s,o,u,this.viewport.fontSize).then(m=>{c.style.visibility="visible",c.setAttribute("aria-hidden","false"),r.finish(m)}),r.result()}hideTOC(){this.tocVisible=!1,this.tocView&&this.tocView.hideTOC()}isTOCVisible(){return this.tocVisible&&!!this.tocView&&this.tocView.isTOCVisible()}},Gf="data-vivliostyle-viewer-status",QO="data-vivliostyle-spread-view",$f=(e=>(e.SINGLE_PAGE="singlePage",e.SPREAD="spread",e.AUTO_SPREAD="autoSpread",e))($f||{}),JO=class{constructor(e,t,i,r){this.window=e,this.viewportElement=t,this.instanceId=i,this.callbackFn=r,f(this,"fontMapper"),f(this,"kick"),f(this,"sendCommand"),f(this,"resizeListener"),f(this,"hyperlinkListener"),f(this,"pageRuleStyleElement"),f(this,"pageSheetSizeAlreadySet",!1),f(this,"renderTask",null),f(this,"actions"),f(this,"readyState"),f(this,"packageURL"),f(this,"opf"),f(this,"touchActive"),f(this,"touchX"),f(this,"touchY"),f(this,"needResize"),f(this,"resized"),f(this,"needRefresh"),f(this,"viewportSize"),f(this,"currentPage"),f(this,"currentSpread"),f(this,"pagePosition"),f(this,"fontSize"),f(this,"zoom"),f(this,"fitToScreen"),f(this,"pageViewMode"),f(this,"waitForLoading"),f(this,"renderAllPages"),f(this,"pref"),f(this,"pageSizes"),f(this,"pixelRatio"),f(this,"pixelRatioLimit"),f(this,"viewport"),f(this,"opfView");let s=t.ownerDocument,o=(u,c)=>{let m=s.getElementById(u);return m||(m=s.createElement("style"),m.id=u,c&&(m.textContent=c),s.head.appendChild(m)),m};o("vivliostyle-viewport-screen-css",hm),o("vivliostyle-viewport-css",pm),o("vivliostyle-polyfill-css",vm),t.setAttribute("data-vivliostyle-viewer-viewport",!0),V&&t.setAttribute("data-vivliostyle-debug",!0),t.setAttribute(Gf,"loading"),this.fontMapper=new WI(s.head,t),this.init(),this.kick=()=>{},this.sendCommand=()=>{},this.resizeListener=()=>{this.needResize=!0,this.resized=!0,this.kick()},this.pageReplacedListener=this.pageReplacedListener.bind(this),this.hyperlinkListener=u=>{},this.pageRuleStyleElement=o("vivliostyle-page-rules"),this.actions={loadPublication:this.loadPublication,loadXML:this.loadXML,configure:this.configure,moveTo:this.moveTo,toc:this.showTOC},this.addLogListeners()}init(){this.readyState="loading",this.packageURL=[],this.opf=null,this.touchActive=!1,this.touchX=0,this.touchY=0,this.needResize=!1,this.resized=!1,this.needRefresh=!1,this.viewportSize=null,this.currentPage=null,this.currentSpread=null,this.pagePosition=null,this.fontSize=16,this.zoom=1,this.fitToScreen=!1,this.pageViewMode="singlePage",this.waitForLoading=!1,this.renderAllPages=!0,this.pref=Ep(),this.pageSizes=[],this.pixelRatioLimit=/Chrome/.test(navigator.userAgent)?16:0,this.pixelRatio=Math.min(8,this.pixelRatioLimit)}addLogListeners(){let e=zt;ee.addListener(e.DEBUG,t=>{this.callback({t:"debug",content:t})}),ee.addListener(e.INFO,t=>{this.callback({t:"info",content:t})}),ee.addListener(e.WARN,t=>{this.callback({t:"warn",content:t})}),ee.addListener(e.ERROR,t=>{this.callback({t:"error",content:t})})}callback(e){e.i=this.instanceId,this.callbackFn(e)}setReadyState(e){this.readyState!==e&&(this.readyState=e,this.viewportElement.setAttribute(Gf,e),this.callback({t:"readystatechange"}))}loadPublication(e){Qt.registerStartTiming("beforeRender"),this.setReadyState("loading");let t=e.url,i=e.fragment,r=e.authorStyleSheet,s=e.userStyleSheet;this.viewport=null;let o=Z("loadPublication");return this.configure(e).then(()=>{let u=new Vf;u.init(r,s).then(()=>{let c=et(Zn(t),this.window.location.href);this.packageURL=[c],u.loadPubDoc(c).then(m=>{m?(this.opf=m,this.render(i).then(()=>{o.finish(!0)})):o.finish(!1)})})}),o.result()}loadXML(e){Qt.registerStartTiming("beforeRender"),this.setReadyState("loading");let t=e.url,i=e.document,r=e.fragment,s=e.authorStyleSheet,o=e.userStyleSheet;this.viewport=null;let u=Z("loadXML");return this.configure(e).then(()=>{let c=new Vf;c.init(s,o).then(()=>{let m=t.map((p,y)=>({url:et(Zn(p.url),this.window.location.href),index:y,startPage:p.startPage,skipPagesBefore:p.skipPagesBefore}));this.packageURL=m.map(p=>p.url),this.opf=new co(c,""),this.opf.initWithChapters(m,i).then(()=>{this.render(r).then(()=>{u.finish(!0)})})})}),u.result()}render(e){this.cancelRenderingTask();let t;return e?t=this.opf.resolveFragment(e).thenAsync(i=>(this.pagePosition=i,q(!0))):t=q(!0),t.thenAsync(()=>(Qt.registerEndTiming("beforeRender"),this.resize()))}resolveLength(e){let t=parseFloat(e),i=/[a-z]+$/,r;if(typeof e=="string"&&(r=e.match(i))){let s=r[0];if(s==="em"||s==="rem")return t*this.fontSize;if(s==="ex")return t*Ue.ex*this.fontSize/Ue.em;let o=Ue[s];if(o)return t*o}return t}configure(e){if(typeof e.autoresize=="boolean"&&(e.autoresize?(this.viewportSize=null,this.window.addEventListener("resize",this.resizeListener,!1),this.needResize=!0):this.window.removeEventListener("resize",this.resizeListener,!1)),typeof e.fontSize=="number"){let t=e.fontSize;t>=5&&t<=72&&this.fontSize!=t&&(this.fontSize=t,this.needResize=!0)}if(typeof e.viewport=="object"&&e.viewport){let t=e.viewport,i={marginLeft:this.resolveLength(t["margin-left"])||0,marginRight:this.resolveLength(t["margin-right"])||0,marginTop:this.resolveLength(t["margin-top"])||0,marginBottom:this.resolveLength(t["margin-bottom"])||0,width:this.resolveLength(t.width)||0,height:this.resolveLength(t.height)||0};(i.width>=200||i.height>=200)&&(this.window.removeEventListener("resize",this.resizeListener,!1),this.viewportSize=i,this.needResize=!0)}if(typeof e.hyphenate=="boolean"&&(this.pref.hyphenate=e.hyphenate,this.needResize=!0),typeof e.horizontal=="boolean"&&(this.pref.horizontal=e.horizontal,this.needResize=!0),typeof e.nightMode=="boolean"&&(this.pref.nightMode=e.nightMode,this.needResize=!0),typeof e.lineHeight=="number"&&(this.pref.lineHeight=e.lineHeight,this.needResize=!0),typeof e.columnWidth=="number"&&(this.pref.columnWidth=e.columnWidth,this.needResize=!0),typeof e.fontFamily=="string"&&(this.pref.fontFamily=e.fontFamily,this.needResize=!0),typeof e.load=="boolean"&&(this.waitForLoading=e.load),typeof e.renderAllPages=="boolean"&&(this.renderAllPages=e.renderAllPages),typeof e.userAgentRootURL=="string"&&(lp(e.userAgentRootURL.replace(/resources\/?$/,"")),dp(e.userAgentRootURL)),typeof e.rootURL=="string"&&(lp(e.rootURL),dp(`${Ur}resources/`)),typeof e.pageViewMode=="string"&&e.pageViewMode!==this.pageViewMode&&(this.pageViewMode=e.pageViewMode,this.needResize=!0),typeof e.pageBorder=="number"&&e.pageBorder!==this.pref.pageBorder&&(this.viewport=null,this.pref.pageBorder=e.pageBorder,this.needResize=!0),typeof e.zoom=="number"&&e.zoom!==this.zoom&&(this.zoom=e.zoom,this.needRefresh=!0),typeof e.fitToScreen=="boolean"&&e.fitToScreen!==this.fitToScreen&&(this.fitToScreen=e.fitToScreen,this.needRefresh=!0),typeof e.defaultPaperSize=="object"&&typeof e.defaultPaperSize.width=="number"&&typeof e.defaultPaperSize.height=="number"&&(this.viewport=null,this.pref.defaultPaperSize=e.defaultPaperSize,this.needResize=!0),typeof e.allowScripts=="boolean"&&e.allowScripts!==Yi&&(xO(e.allowScripts),this.needResize=!0),typeof e.pixelRatio=="number"){let t=Math.min(e.pixelRatio,this.pixelRatioLimit);t!==this.pixelRatio&&(this.pixelRatio=t,this.needResize=!0)}return this.configurePlugins(e),q(!0)}configurePlugins(e){Je("CONFIGURATION").forEach(t=>{let i=t(e);this.needResize=i.needResize||this.needResize,this.needRefresh=i.needRefresh||this.needRefresh})}pageReplacedListener(e){let t=this.currentPage,i=this.currentSpread,r=e.target;i?(i.left===r||i.right===r)&&this.showCurrent(e.newPage):t===e.target&&this.showCurrent(e.newPage)}forCurrentPages(e){let t=[];this.currentPage&&t.push(this.currentPage),this.currentSpread&&(t.push(this.currentSpread.left),t.push(this.currentSpread.right)),t.forEach(i=>{i&&e(i)})}removePageListeners(){this.forCurrentPages(e=>{e.removeEventListener("hyperlink",this.hyperlinkListener,!1),e.removeEventListener("replaced",this.pageReplacedListener,!1)})}hidePages(){this.removePageListeners(),this.forCurrentPages(e=>{j(e.container,"display","none")}),this.currentPage=null,this.currentSpread=null}showSinglePage(e){e.addEventListener("hyperlink",this.hyperlinkListener,!1),e.addEventListener("replaced",this.pageReplacedListener,!1),j(e.container,"visibility","visible"),j(e.container,"display","block")}showPage(e){this.hidePages(),this.currentPage=e,e.container.style.marginLeft="",e.container.style.marginRight="",this.showSinglePage(e)}showSpread(e){if(this.hidePages(),this.currentSpread=e,e.left&&e.right){let t=parseFloat(e.left.container.style.width),i=parseFloat(e.right.container.style.width);t&&i&&t!==i&&(t<i?e.left.container.style.marginLeft=`${i-t}px`:e.right.container.style.marginRight=`${t-i}px`)}e.left&&(this.showSinglePage(e.left),e.right?e.left.container.removeAttribute("data-vivliostyle-unpaired-page"):e.left.container.setAttribute("data-vivliostyle-unpaired-page",!0)),e.right&&(this.showSinglePage(e.right),e.left?e.right.container.removeAttribute("data-vivliostyle-unpaired-page"):e.right.container.setAttribute("data-vivliostyle-unpaired-page",!0))}reportPosition(){let e=Z("reportPosition");return this.pagePosition,this.opf.getCFI(this.pagePosition.spineIndex,this.pagePosition.offsetInItem).then(t=>{let i=this.currentPage;(this.waitForLoading&&i.fetchers.length>0?Oa(i.fetchers):q(!0)).then(()=>{this.sendLocationNotification(i,t).thenFinish(e)})}),e.result()}createViewport(){let e=this.viewportElement;if(this.viewportSize){let t=this.viewportSize;return e.style.marginLeft=`${t.marginLeft}px`,e.style.marginRight=`${t.marginRight}px`,e.style.marginTop=`${t.marginTop}px`,e.style.marginBottom=`${t.marginBottom}px`,new lo(this.window,this.fontSize,this.pixelRatio,e,t.width,t.height)}else return new lo(this.window,this.fontSize,this.pixelRatio,e)}resolveSpreadView(e,t){switch(this.pageViewMode){case"singlePage":return!1;case"spread":return!0;case"autoSpread":default:return(e.width-this.pref.pageBorder)/e.height>=(t?t.width*2/t.height:1.45)&&(!!t||e.width>800)}}updateSpreadView(e){this.pref.spreadView=e,this.viewportElement.setAttribute(QO,e.toString())}sizeIsGood(){var e;let t=this.createViewport(),i=((e=this.opfView)==null?void 0:e.hasPages())&&!this.opfView.hasAutoSizedPages(),r=this.resolveSpreadView(t,this.resized&&i?this.pageSizes[0]:null);this.resized=!1;let s=this.pref.spreadView!==r;return this.updateSpreadView(r),this.pixelRatio&&this.opfView&&this.pixelRatio/this.window.devicePixelRatio!==this.opfView.clientLayout.scaleRatio||this.viewportSize||!this.viewport||this.viewport.fontSize!=this.fontSize?!1:!s&&t.width==this.viewport.width&&t.height==this.viewport.height||!s&&t.width==this.viewport.width&&t.height!=this.viewport.height&&/Android|iPhone|iPad|iPod/.test(navigator.userAgent)?!0:i?(this.viewport.width=t.width,this.viewport.height=t.height,this.needRefresh=!0,!0):!1}setPageSize(e,t,i,r){this.pageSizes[r]=e,this.setPageSizePageRules(t,i,r),r===0&&this.pageViewMode==="autoSpread"&&!this.opfView.hasAutoSizedPages()&&this.updateSpreadView(this.resolveSpreadView(this.viewport,e))}setPageSizePageRules(e,t,i){var r,s;if(this.pageRuleStyleElement&&(!this.pageSheetSizeAlreadySet||this.pageSizes[i].width!==((r=this.pageSizes[i-1])==null?void 0:r.width)||this.pageSizes[i].height!==((s=this.pageSizes[i-1])==null?void 0:s.height))){let u=function(T){let E=T*.75;return Math.ceil(E)};var o=u;let c=Math.max(...this.pageSizes.map(T=>T.width)),m=Math.max(...this.pageSizes.map(T=>T.height)),p=u(c),y=u(m),S=p*((this.pixelRatio||1)-1)+2,v=y*((this.pixelRatio||1)-1)+2,w=`@page {size: ${p}pt ${y}pt; margin: 0 ${-S}pt ${-v}pt 0;}`;this.pageRuleStyleElement.textContent=w,this.pageSheetSizeAlreadySet=!0}}removePageSizePageRules(){this.pageRuleStyleElement&&(this.pageRuleStyleElement.textContent="",this.pageSheetSizeAlreadySet=!1)}reset(){let e=!1,t=!1;this.opfView&&(e=this.opfView.tocVisible,t=this.opfView.tocAutohide,this.opfView.removeRenderedPages()),this.pageSizes=[],this.removePageSizePageRules(),this.viewport=this.createViewport(),this.viewport.resetZoom(),this.opfView=new ZO(this.opf,this.viewport,this.fontMapper,this.pref,this.setPageSize.bind(this)),e&&this.sendCommand({a:"toc",v:"show",autohide:t})}showCurrent(e,t){this.needRefresh=!1,this.removePageListeners();let i=this.resolveSpreadView(this.viewport,e.dimensions);return i!==this.pref.spreadView&&this.updateSpreadView(i),i?this.opfView.getSpread(this.pagePosition,t).thenAsync(r=>!r.left&&!r.right?q(null):r.left&&r.right&&(!this.resolveSpreadView(this.viewport,r.left.dimensions)||!this.resolveSpreadView(this.viewport,r.right.dimensions))?(this.updateSpreadView(!1),this.showPage(e),this.setPageZoom(e),this.currentPage=e,q(null)):(this.showSpread(r),this.setSpreadZoom(r),this.currentPage=e.side==="left"?r.left:r.right,q(null))):(this.showPage(e),this.setPageZoom(e),this.currentPage=e,q(null))}setPageZoom(e){let t=this.getAdjustedZoomFactor(e.dimensions);this.viewport.zoom(e.dimensions.width,e.dimensions.height,t)}setSpreadZoom(e){let t=this.getSpreadDimensions(e);this.viewport.zoom(t.width,t.height,this.getAdjustedZoomFactor(t))}getAdjustedZoomFactor(e){return this.fitToScreen?this.calculateZoomFactorToFitInsideViewPort(e):this.zoom}getSpreadDimensions(e){let t=0,i=0;return e.left&&(t+=e.left.dimensions.width,i=e.left.dimensions.height),e.right&&(t+=e.right.dimensions.width,i=Math.max(i,e.right.dimensions.height)),e.left&&e.right&&(t+=this.pref.pageBorder*2,t+=Math.abs(e.left.dimensions.width-e.right.dimensions.width)),{width:t,height:i}}queryZoomFactor(e){if(!this.currentPage)throw new Error("no page exists.");switch(e){case"fit inside viewport":{let t;return this.pref.spreadView?(this.currentSpread,t=this.getSpreadDimensions(this.currentSpread)):t=this.currentPage.dimensions,this.calculateZoomFactorToFitInsideViewPort(t)}default:throw new Error(`unknown zoom type: ${e}`)}}calculateZoomFactorToFitInsideViewPort(e){if(!this.viewport)return this.zoom;let t=this.viewport.width/e.width,i=this.viewport.height/e.height;return Math.min(t,i)}cancelRenderingTask(){this.renderTask&&this.renderTask.interrupt(new Xf),this.renderTask=null}resize(){if(this.needResize=!1,this.needRefresh=!1,this.sizeIsGood())return q(!0);this.setReadyState("loading"),this.cancelRenderingTask();let e=cd().getScheduler().run(()=>Zr("resize",t=>{if(!this.opf){t.finish(!1);return}this.renderTask=e,Qt.registerStartTiming("render (resize)"),this.reset(),this.pagePosition&&(this.pagePosition.pageIndex==0&&this.pagePosition.offsetInItem==0||(this.pagePosition.pageIndex=-1)),this.opf.setEPageCountMode(this.renderAllPages),this.opfView.renderPagesUpto(this.pagePosition,!this.renderAllPages).then(i=>{if(!i){t.finish(!1);return}this.pagePosition=i.position,this.showCurrent(i.page,!0).then(()=>{this.setReadyState("interactive"),this.opf.countEPages(r=>{let s={t:"nav",epageCount:r,first:this.currentPage.isFirstPage,last:this.currentPage.isLastPage,metadata:this.opf.metadata,docTitle:this.opf.spine[this.pagePosition.spineIndex].title};(this.currentPage.isFirstPage||this.pagePosition.pageIndex==0&&this.opf.spine[this.pagePosition.spineIndex].epage)&&(s.epage=this.opf.spine[this.pagePosition.spineIndex].epage),this.callback(s)}).then(()=>{this.reportPosition().then(r=>{(this.renderAllPages?this.opfView.renderAllPages():q(null)).then(()=>{this.renderTask===e&&(this.renderTask=null),Qt.registerEndTiming("render (resize)"),Yi&&Bf(this.window)?EO(this.window).then(()=>{this.renderAllPages&&this.setReadyState("complete"),this.callback({t:"loaded"}),t.finish(r)}):(this.renderAllPages&&this.setReadyState("complete"),this.callback({t:"loaded"}),t.finish(r))})})})})})},(t,i)=>{if(i instanceof Xf)Qt.registerEndTiming("render (resize)"),ee.debug(i.message);else throw i}));return q(!0)}sendLocationNotification(e,t){let i=Z("sendLocationNotification"),r={t:"nav",first:e.isFirstPage,last:e.isLastPage,metadata:this.opf.metadata,docTitle:this.opf.spine[e.spineIndex].title};return this.opf.getEPageFromPosition(this.pagePosition).then(s=>{r.epage=s,r.epageCount=this.opf.epageCount,t&&(r.cfi=t),this.callback(r),i.finish(!0)}),i.result()}getCurrentPageProgression(){return this.opfView?this.opfView.getCurrentPageProgression(this.pagePosition):null}moveTo(e){var t;let i;if(this.readyState!=="complete"&&e.where!=="next"&&this.setReadyState("loading"),typeof e.where=="string"){let s;switch(e.where){case"next":s=this.pref.spreadView?this.opfView.nextSpread:this.opfView.nextPage;break;case"previous":s=this.pref.spreadView?this.opfView.previousSpread:this.opfView.previousPage;break;case"last":s=this.opfView.lastPage;break;case"first":s=this.opfView.firstPage;break;default:return q(!0)}s&&(i=()=>s.call(this.opfView,this.pagePosition,!this.renderAllPages))}else if(typeof e.epage=="number"){let s=e.epage;i=()=>this.opfView.navigateToEPage(s,this.pagePosition,!this.renderAllPages)}else if(typeof e.url=="string"){let s=e.url;i=()=>this.opfView.navigateTo(s,this.pagePosition,!this.renderAllPages)}else if(typeof((t=e.position)==null?void 0:t.spineIndex)=="number"){let s=e.position;i=()=>this.opfView.findPage(s,!this.renderAllPages)}else return q(!0);if(!this.opfView)return q(!0);let r=Z("moveTo");return i.call(this.opfView).then(s=>{let o;if(s){this.pagePosition=s.position;let u=Z("moveTo.showCurrent");o=u.result(),this.showCurrent(s.page,!this.renderAllPages).then(()=>{this.reportPosition().thenFinish(u)})}else o=q(!0);o.then(u=>{this.readyState==="loading"&&this.setReadyState("interactive"),r.finish(u)})}),r.result()}showTOC(e){let t=!!e.autohide,i=e.v,r=this.opfView.isTOCVisible(),s=t!=this.opfView.tocAutohide&&i!="hide";if(r){if(i=="show"&&!s)return q(!0)}else if(i=="hide")return q(!0);if(r&&i!="show")return this.opfView.hideTOC(),q(!0);{let o=Z("showTOC");return this.opfView.showTOC(t).then(u=>{if(u){if(s&&(u.listeners={}),t){let c=()=>{this.opfView.hideTOC()};u.addEventListener("hyperlink",c,!1)}u.addEventListener("hyperlink",this.hyperlinkListener,!1)}o.finish(!0)}),o.result()}}runCommand(e){let t=e.a||"";return Zr("runCommand",i=>{let r=this.actions[t];r?r.call(this,e).then(()=>{this.callback({t:"done",a:t}),i.finish(!0)}):(ee.error("No such action:",t),i.finish(!0))},(i,r)=>{ee.error(r,"Error during action:",t),i.finish(!0)})}initEmbed(e){let t=Kf(e),i=null,r=this;dP(()=>{let s=Z("commandLoop"),o=cd().getScheduler();return r.hyperlinkListener=u=>{let c=u,m=c.href.charAt(0)==="#"||r.packageURL.some(p=>c.href.substr(0,p.length)==p);if(m){u.preventDefault();let p={t:"hyperlink",href:c.href,internal:m};o.run(()=>(r.callback(p),q(!0)))}},s.loopWithFrame(u=>{if(r.needResize)r.resize().then(()=>{u.continueLoop()});else if(r.needRefresh)r.currentPage&&r.showCurrent(r.currentPage,!this.renderAllPages).then(()=>{u.continueLoop()});else if(t){let c=t;t=null,r.runCommand(c).then(()=>{u.continueLoop()})}else{let c=Z("waitForCommand");i=c.suspend(this),c.result().then(()=>{u.continueLoop()})}}).thenFinish(s),s.result()}),r.kick=()=>{let s=i;s&&(i=null,s.schedule(!0))},r.sendCommand=s=>t?!1:(t=Kf(s),r.kick(),!0),this.window.adapt_command=r.sendCommand}},Yf=(e=>(e.FIT_INSIDE_VIEWPORT="fit inside viewport",e))(Yf||{}),Xf=class zT extends Error{constructor(){super(),f(this,"name","RenderingCanceledError"),f(this,"message","Page rendering has been canceled"),f(this,"stack"),Object.setPrototypeOf(this,zT.prototype),this.stack=new Error().stack}};function Kf(e){return typeof e=="string"?Bl(e):e}var Zf=fe;function eR(){return{autoResize:!0,fontSize:16,pageBorderWidth:1,renderAllPages:!0,pageViewMode:"autoSpread",zoom:1,fitToScreen:!1,defaultPaperSize:void 0,allowScripts:!0,pixelRatio:8}}function Qf(e){let t={};return Object.keys(e).forEach(i=>{let r=e[i];switch(i){case"autoResize":t.autoresize=r;break;case"pageBorderWidth":t.pageBorder=r;break;default:t[i]=r}}),t}var Jf=class{constructor(e,t){this.settings=e,f(this,"initialized",!1),f(this,"adaptViewer_"),f(this,"options"),f(this,"eventTarget"),f(this,"readyState"),K(e.debug),this.adaptViewer_=new JO(e.window||window,e.viewportElement,"main",this.dispatcher.bind(this)),this.options=eR(),t&&this.setOptions(t),this.eventTarget=new Dl,Object.defineProperty(this,"readyState",{get(){return this.adaptViewer_.readyState}})}setOptions(e){let t=Object.assign({a:"configure"},Qf(e));this.adaptViewer_.sendCommand(t),Object.assign(this.options,e)}dispatcher(e){let t={type:e.t},i=e;Object.keys(i).forEach(r=>{r!=="t"&&(t[r]=i[r])}),this.eventTarget.dispatchEvent(t)}addListener(e,t){this.eventTarget.addEventListener(e,t,!1)}removeListener(e,t){this.eventTarget.removeEventListener(e,t,!1)}loadDocument(e,t,i){if(!e||(Array.isArray(e)?!e[0]||typeof e[0]!="string"&&!e[0].url:typeof e!="string"&&!e.url)){this.eventTarget.dispatchEvent({type:"error",content:{error:new Error("No URL specified")}});return}this.loadDocumentOrPublication(e,null,t,i)}loadPublication(e,t,i){if(!e){this.eventTarget.dispatchEvent({type:"error",content:{error:new Error("No URL specified")}});return}this.loadDocumentOrPublication(null,e,t,i)}loadDocumentOrPublication(e,t,i,r){let s=i||{};function o(p){if(p)return p.map(y=>({url:y.url||null,text:y.text||null}))}let u=o(s.authorStyleSheet),c=o(s.userStyleSheet);r&&Object.assign(this.options,r);let m=Object.assign({a:e?"loadXML":"loadPublication",userAgentRootURL:this.settings.userAgentRootURL,url:tR(e)||t,document:s.documentObject,fragment:s.fragment,authorStyleSheet:u,userStyleSheet:c},Qf(this.options));this.initialized?this.adaptViewer_.sendCommand(m):(this.initialized=!0,this.adaptViewer_.initEmbed(m))}getCurrentPageProgression(){return this.adaptViewer_.getCurrentPageProgression()}resolveNavigation(e){switch(e){case"left":return this.getCurrentPageProgression()===Zf.LTR?"previous":"next";case"right":return this.getCurrentPageProgression()===Zf.LTR?"next":"previous";default:return e}}navigateToPage(e,t){e==="epage"?this.adaptViewer_.sendCommand({a:"moveTo",epage:t}):this.adaptViewer_.sendCommand({a:"moveTo",where:this.resolveNavigation(e)})}navigateToInternalUrl(e){this.adaptViewer_.sendCommand({a:"moveTo",url:e})}navigateToPosition(e){var t,i;this.adaptViewer_.sendCommand({a:"moveTo",position:{spineIndex:e.spineIndex,pageIndex:(t=e.pageIndex)!=null?t:-1,offsetInItem:(i=e.offsetInItem)!=null?i:-1}})}isTOCVisible(){return this.adaptViewer_.opfView&&this.adaptViewer_.opfView.opf&&this.adaptViewer_.opfView.opf.toc?!!this.adaptViewer_.opfView.isTOCVisible():null}showTOC(e,t){let i=e==null?"toggle":e?"show":"hide";this.adaptViewer_.sendCommand({a:"toc",v:i,autohide:t})}queryZoomFactor(e){return this.adaptViewer_.queryZoomFactor(e)}getPageSizes(){return this.adaptViewer_.pageSizes}getTOC(){var e,t;return(t=(e=this.adaptViewer_.opfView)==null?void 0:e.tocView)==null?void 0:t.getTOC()}getMetadata(){return this.adaptViewer_.opf.getMetadata()}getCover(){return this.adaptViewer_.opf.cover}};function tR(e){function t(r){return typeof r=="number"?r:null}function i(r){return typeof r=="string"?{url:r,startPage:null,skipPagesBefore:null}:{url:r.url,startPage:t(r.startPage),skipPagesBefore:t(r.skipPagesBefore)}}return Array.isArray(e)?e.map(i):e?[i(e)]:null}var eb=(e=>(e.PREVIOUS="previous",e.NEXT="next",e.LEFT="left",e.RIGHT="right",e.FIRST="first",e.LAST="last",e.EPAGE="epage",e))(eb||{}),iR=Yf,rR=$f;Qt.forceRegisterEndTiming("load_vivliostyle");var nR=class{constructor(e,{title:t="",printCallback:i=u=>u.print(),errorCallback:r=null,hideIframe:s=!0,removeIframe:o=!0}){f(this,"htmlDoc"),f(this,"title"),f(this,"printCallback"),f(this,"errorCallback"),f(this,"hideIframe"),f(this,"removeIframe"),f(this,"iframe"),f(this,"iframeWin"),f(this,"window"),this.htmlDoc=e,this.title=t,this.printCallback=i,this.errorCallback=r,this.hideIframe=s,this.removeIframe=o}init(){this.iframe=document.createElement("iframe"),this.hideIframe&&(this.iframe.style.width="0",this.iframe.style.height="0",this.iframe.style.borderWidth="0"),this.window=window,this.window.printInstance=this,this.iframe.srcdoc=`
      <!DOCTYPE html>
      <html data-vivliostyle-paginated="true">
        <head>
          <meta charset='utf-8'/>
          <meta name='viewport' content='width=device-width, initial-scale=1.0'/>
          <title>${this.title}</title>
          <style>
            html[data-vivliostyle-paginated] {
              width: 100%;
              height: 100%;
            }
            html[data-vivliostyle-paginated] body,
            html[data-vivliostyle-paginated] [data-vivliostyle-viewer-viewport] {
              width: 100% !important;
              height: 100% !important;
            }
            html[data-vivliostyle-paginated],
            html[data-vivliostyle-paginated] body {
              margin: 0;
              padding: 0;
            }
          </style>
          <style id='vivliostyle-page-rules'></style>
        </head>
        <body onload='parent.printInstance.runInIframe(window)'>
          <div id="vivliostyle-viewer-viewport"></div>
        </body>
      </html>`,document.body.appendChild(this.iframe)}runInIframe(e){return this.iframeWin=e,this.preparePrint().then(()=>this.browserPrint()).then(()=>this.cleanUp())}preparePrint(){this.iframeWin.document.title=this.title;let e=new Blob([this.htmlDoc],{type:"text/html"}),t=URL.createObjectURL(e),i=new Jf({viewportElement:this.iframeWin.document.body.firstElementChild,window:this.iframeWin,debug:!0});return new Promise(r=>{i.addListener("readystatechange",()=>{i.readyState==="complete"&&r()}),this.errorCallback&&i.addListener("error",s=>{var o,u;let c=(u=(o=s.content.error)==null?void 0:o.toString())!=null?u:s.content.messages.join(`
`);this.errorCallback(c)}),i.loadDocument({url:t})})}browserPrint(){this.printCallback(this.iframeWin)}cleanUp(){delete this.window.printInstance,this.removeIframe&&this.iframe.parentElement.removeChild(this.iframe)}};function sR(e,t){new nR(e,t).init()}}),j3=D3(W3()),TH=j3.printHTML;})();
