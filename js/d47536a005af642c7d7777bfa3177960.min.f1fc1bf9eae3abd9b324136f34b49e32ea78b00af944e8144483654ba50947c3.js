(()=>{n=class _El{constructor(e){this.element=document.createElement(e)}id(e){return this.element.id=e,this}class(e){return this.element.classList.add(e),this}attrs(e){for(const[t,n]of Object.entries(e))this.element.setAttribute(t,n);return this}text(e){return this.element.innerText=e,this}html(e){return this.element.innerHTML=e,this}handle(e,t){return this.element.addEventListener(e,t),this}addTo(e){return e instanceof _El?e.element.appendChild(this.element):e.appendChild(this.element),this.element}},Oe=async(e=100)=>new Promise(t=>setTimeout(t,e)),U=class{constructor(e={}){if(this.inputEl=null,this.clearEl=null,this.instance=null,this.searchID=0,this.debounceTimeoutMs=e.debounceTimeoutMs??300,e.inputElement){if(e.containerElement){console.warn(`[Pagefind Input component]: inputElement and containerElement both supplied. Ignoring the container option.`);return}this.initExisting(e.inputElement)}else if(e.containerElement)this.initContainer(e.containerElement);else{console.error(`[Pagefind Input component]: No selector supplied for containerElement or inputElement`);return}this.inputEl.addEventListener("input",async e=>{if(this.instance&&typeof e?.target?.value=="string"){this.updateState(e.target.value);const t=++this.searchID;if(await Oe(this.debounceTimeoutMs),t!==this.searchID)return null;this.instance?.triggerSearch(e.target.value)}}),this.inputEl.addEventListener("keydown",e=>{e.key==="Escape"&&(++this.searchID,this.inputEl.value="",this.instance?.triggerSearch(""),this.updateState("")),e.key==="Enter"&&e.preventDefault()}),this.inputEl.addEventListener("focus",()=>{this.instance?.triggerLoad()})}initContainer(e){const t=document.querySelector(e);if(!t){console.error(`[Pagefind Input component]: No container found for ${e} selector`);return}if(t.tagName==="INPUT")console.warn(`[Pagefind Input component]: Encountered input element for ${e} when a container was expected`),console.warn(`[Pagefind Input component]: Treating containerElement option as inputElement and proceeding`),this.initExisting(e);else{t.innerHTML="";let e=0;for(;document.querySelector(`#pfmod-input-${e}`);)e+=1;const s=new n("form").class("pagefind-modular-input-wrapper").attrs({role:"search","aria-label":"Search this site",action:"javascript:void(0);"});new n("label").attrs({for:`pfmod-input-${e}`,"data-pfmod-sr-hidden":"true"}).text("Search this site").addTo(s),this.inputEl=new n("input").id(`pfmod-input-${e}`).class("pagefind-modular-input").attrs({autocapitalize:"none",enterkeyhint:"search"}).addTo(s),this.clearEl=new n("button").class("pagefind-modular-input-clear").attrs({"data-pfmod-suppressed":"true"}).text("Clear").handle("click",()=>{this.inputEl.value="",this.instance.triggerSearch(""),this.updateState("")}).addTo(s),s.addTo(t)}}initExisting(e){const t=document.querySelector(e);if(!t){console.error(`[Pagefind Input component]: No input element found for ${e} selector`);return}if(t.tagName!=="INPUT"){console.error(`[Pagefind Input component]: Expected ${e} to be an <input> element`);return}this.inputEl=t}updateState(e){this.clearEl&&(e&&e?.length?this.clearEl.removeAttribute("data-pfmod-suppressed"):this.clearEl.setAttribute("data-pfmod-suppressed","true"))}register(e){this.instance=e,this.instance.on("search",(e)=>{this.inputEl&&document.activeElement!==this.inputEl&&(this.inputEl.value=e,this.updateState(e))})}focus(){this.inputEl&&this.inputEl.focus()}},M=e=>{if(e instanceof Element)return[e];if(Array.isArray(e)&&e.every(e=>e instanceof Element))return e;if(typeof e=="string"||e instanceof String){let t=document.createElement("div");return t.innerHTML=e,[...t.childNodes]}return console.error(`[Pagefind ResultList component]: Expected template function to return an HTML element or string, got ${typeof e}`),[]},ce=()=>{const e=(e=30)=>". ".repeat(Math.floor(10+Math.random()*e));return`<li class="pagefind-modular-list-result">
    <div class="pagefind-modular-list-thumb" data-pfmod-loading></div>
    <div class="pagefind-modular-list-inner">
        <p class="pagefind-modular-list-title" data-pfmod-loading>${e(30)}</p>
        <p class="pagefind-modular-list-excerpt" data-pfmod-loading>${e(40)}</p>
    </div>
</li>`},Z=(e,t)=>{let s=new n("li").class("pagefind-modular-list-result");if(t){let t=new n("div").class("pagefind-modular-list-thumb").addTo(s);e?.meta?.image&&new n("img").class("pagefind-modular-list-image").attrs({src:e.meta.image,alt:e.meta.image_alt||e.meta.title}).addTo(t)}let o=new n("div").class("pagefind-modular-list-inner").addTo(s),i=new n("p").class("pagefind-modular-list-title").addTo(o);return new n("a").class("pagefind-modular-list-link").text(e.meta?.title).attrs({href:e.meta?.url||e.url}).addTo(i),new n("p").class("pagefind-modular-list-excerpt").html(e.excerpt).addTo(o),s.element},N=e=>{if(!(e instanceof HTMLElement))return null;const t=window.getComputedStyle(e).overflowY,n=t!=="visible"&&t!=="hidden";return n?e:N(e.parentNode)},Ee=class{constructor(e={}){this.rawResult=e.result,this.placeholderNodes=e.placeholderNodes,this.resultFn=e.resultFn,this.intersectionEl=e.intersectionEl,this.showImages=e.showImages,this.result=null,this.waitForIntersection()}waitForIntersection(){if(!this.placeholderNodes?.length)return;let e={root:this.intersectionEl,rootMargin:"0px",threshold:.01},t=new IntersectionObserver((e,t)=>{if(this.result!==null)return;e?.[0]?.isIntersecting&&(this.load(),t.disconnect())},e);t.observe(this.placeholderNodes[0])}async load(){if(!this.placeholderNodes?.length)return;this.result=await this.rawResult.data();const e=this.resultFn(this.result,this.showImages),t=M(e);for(;this.placeholderNodes.length>1;)this.placeholderNodes.pop().remove();this.placeholderNodes[0].replaceWith(...t)}},q=class{constructor(e){if(this.intersectionEl=document.body,this.containerEl=null,this.results=[],this.placeholderTemplate=e.placeholderTemplate??ce,this.resultTemplate=e.resultTemplate??Z,this.showImages=e.showImages??!0,e.containerElement)this.initContainer(e.containerElement);else{console.error(`[Pagefind ResultList component]: No selector supplied for containerElement`);return}}initContainer(e){const t=document.querySelector(e);if(!t){console.error(`[Pagefind ResultList component]: No container found for ${e} selector`);return}this.containerEl=t}append(e){for(const t of e)this.containerEl.appendChild(t)}register(e){e.on("results",e=>{if(!this.containerEl)return;this.containerEl.innerHTML="",this.intersectionEl=N(this.containerEl),this.results=e.results.map(e=>{let t=M(this.placeholderTemplate());return this.append(t),new Ee({result:e,placeholderNodes:t,resultFn:this.resultTemplate,intersectionEl:this.intersectionEl,showImages:this.showImages})})}),e.on("loading",()=>{if(!this.containerEl)return;this.containerEl.innerHTML=""})}},Y=class{constructor(e={}){if(this.instance=null,this.wrapper=null,this.pillContainer=null,this.available={},this.selected=["All"],this.total=0,this.filterMemo="",this.filter=e.filter,this.ordering=e.ordering??null,this.alwaysShow=e.alwaysShow??!1,this.selectMultiple=e.selectMultiple??!1,!this.filter?.length){console.error(`[Pagefind FilterPills component]: No filter option supplied, nothing to display`);return}if(e.containerElement)this.initContainer(e.containerElement);else{console.error(`[Pagefind FilterPills component]: No selector supplied for containerElement`);return}}initContainer(e){const s=document.querySelector(e);if(!s){console.error(`[Pagefind FilterPills component]: No container found for ${e} selector`);return}s.innerHTML="";const o=`pagefind_modular_filter_pills_${this.filter}`,t=new n("div").class("pagefind-modular-filter-pills-wrapper").attrs({role:"group","aria-labelledby":o});this.alwaysShow||t.attrs({"data-pfmod-hidden":!0}),new n("div").id(o).class("pagefind-modular-filter-pills-label").attrs({"data-pfmod-sr-hidden":!0}).text(`Filter results by ${this.filter}`).addTo(t),this.pillContainer=new n("div").class("pagefind-modular-filter-pills").addTo(t),this.wrapper=t.addTo(s)}update(){const e=this.available.map(e=>e[0]).join("~");e==this.filterMemo?this.updateExisting():(this.renderNew(),this.filterMemo=e)}pushFilters(){const e=this.selected.filter(e=>e!=="All");this.instance.triggerFilter(this.filter,e)}pillInner(e,t){return this.total?`<span aria-label="${e}" data-pfmod-pill-count="${t}">${e} (${t})</span>`:`<span aria-label="${e}">${e}</span>`}renderNew(){this.available.forEach(([e,t])=>{new n("button").class("pagefind-modular-filter-pill").html(this.pillInner(e,t)).attrs({"aria-pressed":this.selected.includes(e),type:"button"}).handle("click",()=>{e==="All"?this.selected=["All"]:this.selected.includes(e)?this.selected=this.selected.filter(t=>t!==e):this.selectMultiple?this.selected.push(e):this.selected=[e],this.selected?.length?this.selected?.length>1&&(this.selected=this.selected.filter(e=>e!=="All")):this.selected=["All"],this.update(),this.pushFilters()}).addTo(this.pillContainer)})}updateExisting(){const e=[...this.pillContainer.childNodes];this.available.forEach(([t,n],s)=>{e[s].innerHTML=this.pillInner(t,n),e[s].setAttribute("aria-pressed",this.selected.includes(t))})}register(e){this.instance=e,this.instance.on("filters",e=>{if(!this.pillContainer)return;this.selectMultiple?e=e.available:e=e.total;let t=e[this.filter];if(!t){console.warn(`[Pagefind FilterPills component]: No possible values found for the ${this.filter} filter`);return}this.available=Object.entries(t),Array.isArray(this.ordering)?this.available.sort((e,t)=>{const n=this.ordering.indexOf(e[0]),s=this.ordering.indexOf(t[0]);return(n===-1?1/0:n)-(s===-1?1/0:s)}):this.available.sort((e,t)=>e[0].localeCompare(t[0])),this.available.unshift(["All",this.total]),this.update()}),e.on("results",e=>{if(!this.pillContainer)return;this.total=e?.unfilteredResultCount||0,this.available?.[0]?.[0]==="All"&&(this.available[0][1]=this.total),this.total||this.alwaysShow?this.wrapper.removeAttribute("data-pfmod-hidden"):this.wrapper.setAttribute("data-pfmod-hidden","true"),this.update()})}},te=async(e=50)=>await new Promise(t=>setTimeout(t,e));try{document?.currentScript&&document.currentScript.tagName.toUpperCase()==="SCRIPT"&&(z=new URL(document.currentScript.src).pathname.match(/^(.*\/)(?:pagefind-)?modular-ui.js.*$/)[1])}catch{z="/pagefind/"}we=class{constructor(e={}){this.__pagefind__=null,this.__initializing__=null,this.__searchID__=0,this.__hooks__={search:[],filters:[],loading:[],results:[]},this.components=[],this.searchTerm="",this.searchFilters={},this.searchResult={},this.availableFilters=null,this.totalFilters=null,this.options={bundlePath:e.bundlePath??z,mergeIndex:e.mergeIndex??[]},delete e.bundlePath,delete e.resetStyles,delete e.processResult,delete e.processTerm,delete e.debounceTimeoutMs,delete e.mergeIndex,delete e.translations,this.pagefindOptions=e}add(e){e?.register?.(this),this.components.push(e)}on(e,t){if(!this.__hooks__[e]){const t=Object.keys(this.__hooks__).join(", ");console.error(`[Pagefind Composable]: Unknown event type ${e}. Supported events: [${t}]`);return}if(typeof t!="function"){console.error(`[Pagefind Composable]: Expected callback to be a function, received ${typeof t}`);return}this.__hooks__[e].push(t)}triggerLoad(){this.__load__()}triggerSearch(e){this.searchTerm=e,this.__dispatch__("search",e,this.searchFilters),this.__search__(e,this.searchFilters)}triggerSearchWithFilters(e,t){this.searchTerm=e,this.searchFilters=t,this.__dispatch__("search",e,t),this.__search__(e,t)}triggerFilters(e){this.searchFilters=e,this.__dispatch__("search",this.searchTerm,e),this.__search__(this.searchTerm,e)}triggerFilter(e,t){this.searchFilters=this.searchFilters||{},this.searchFilters[e]=t,this.__dispatch__("search",this.searchTerm,this.searchFilters),this.__search__(this.searchTerm,this.searchFilters)}__dispatch__(e,...t){this.__hooks__[e]?.forEach(e=>e?.(...t))}async __clear__(){this.__dispatch__("results",{results:[],unfilteredTotalCount:0}),this.availableFilters=await this.__pagefind__.filters(),this.totalFilters=this.availableFilters,this.__dispatch__("filters",{available:this.availableFilters,total:this.totalFilters})}async __search__(e,t){this.__dispatch__("loading"),await this.__load__();const s=++this.__searchID__;if(!e||!e.length)return this.__clear__();const n=await this.__pagefind__.search(e,{filters:t});n&&this.__searchID__===s&&(n.filters&&Object.keys(n.filters)?.length&&(this.availableFilters=n.filters,this.totalFilters=n.totalFilters,this.__dispatch__("filters",{available:this.availableFilters,total:this.totalFilters})),this.searchResult=n,this.__dispatch__("results",this.searchResult))}async __load__(){if(this.__initializing__){for(;!this.__pagefind__;)await te(50);return}if(this.__initializing__=!0,!this.__pagefind__){let e;try{e=await import(`${this.options.bundlePath}pagefind.js`)}catch(e){console.error(e),console.error([`Pagefind couldn't be loaded from ${this.options.bundlePath}pagefind.js`,`You can configure this by passing a bundlePath option to PagefindComposable Instance`].join(`
`)),document?.currentScript&&document.currentScript.tagName.toUpperCase()==="SCRIPT"?console.error(`[DEBUG: Loaded from ${document.currentScript?.src??"bad script location"}]`):console.error("no known script location")}await e.options(this.pagefindOptions||{});for(const t of this.options.mergeIndex){if(!t.bundlePath)throw new Error("mergeIndex requires a bundlePath parameter");const n=t.bundlePath;delete t.bundlePath,await e.mergeIndex(n,t)}this.__pagefind__=e}this.availableFilters=await this.__pagefind__.filters(),this.totalFilters=this.availableFilters,this.__dispatch__("filters",{available:this.availableFilters,total:this.totalFilters})}},e=e=>typeof e=="string",l=()=>{let t,n;const e=new Promise((e,s)=>{t=e,n=s});return e.resolve=t,e.reject=n,e},O=e=>e==null?"":""+e,he=(e,t,n)=>{e.forEach(e=>{t[e]&&(n[e]=t[e])})},re=/###/g,b=e=>e&&e.indexOf("###")>-1?e.replace(re,"."):e,j=t=>!t||e(t),c=(t,n,s)=>{const i=e(n)?n.split("."):n;let o=0;for(;o<i.length-1;){if(j(t))return{};const e=b(i[o]);!t[e]&&s&&(t[e]=new s),Object.prototype.hasOwnProperty.call(t,e)?t=t[e]:t={},++o}return j(t)?{}:{obj:t,k:b(i[o])}},_=(e,t,n)=>{const{obj:a,k:r}=c(e,t,Object);if(a!==0[0]||t.length===1){a[r]=n;return}let i=t[t.length-1],s=t.slice(0,t.length-1),o=c(e,s,Object);for(;o.obj===0[0]&&s.length;)i=`${s[s.length-1]}.${i}`,s=s.slice(0,s.length-1),o=c(e,s,Object),o?.obj&&typeof o.obj[`${o.k}.${i}`]!="undefined"&&(o.obj=0[0]);o.obj[`${o.k}.${i}`]=n},fe=(e,t,n)=>{const{obj:o,k:i}=c(e,t,Object);o[i]=o[i]||[],o[i].push(n)},h=(e,t)=>{const{obj:n,k:s}=c(e,t);return n?Object.prototype.hasOwnProperty.call(n,s)?n[s]:0[0]:0[0]},pe=(e,t,n)=>{const s=h(e,n);return s!==0[0]?s:h(t,n)},C=(t,n,s)=>{for(const o in n)o!=="__proto__"&&o!=="constructor"&&(o in t?e(t[o])||t[o]instanceof String||e(n[o])||n[o]instanceof String?s&&(t[o]=n[o]):C(t[o],n[o],s):t[o]=n[o]);return t},a=e=>e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&"),Ce={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},Me=t=>e(t)?t.replace(/[&<>"'/]/g,e=>Ce[e]):t,ye=class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==0[0])return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}},ue=[" ",",","?","!",";"],de=new ye(20),ae=(e,t,n)=>{t=t||"",n=n||"";const o=ue.filter(e=>t.indexOf(e)<0&&n.indexOf(e)<0);if(o.length===0)return!0;const i=de.getRegExp(`(${o.map(e=>e==="?"?"\\?":e).join("|")})`);let s=!i.test(e);if(!s){const t=e.indexOf(n);t>0&&!i.test(e.substring(0,t))&&(s=!0)}return s},m=(e,t,n=".")=>{if(!e)return 0[0];if(e[t])return Object.prototype.hasOwnProperty.call(e,t)?e[t]:0[0];const o=t.split(n);let s=e;for(let e=0;e<o.length;){if(!s||typeof s!="object")return 0[0];let t,i="";for(let a=e;a<o.length;++a)if(a!==e&&(i+=n),i+=o[a],t=s[i],t!==0[0]){if(["string","number","boolean"].indexOf(typeof t)>-1&&a<o.length-1)continue;e+=a-e+1;break}s=t}return s},r=e=>e?.replace("_","-"),Q={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console?.[e]?.apply?.(console,t)}},K=class _Logger{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||Q,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(t,n,s,o){return o&&!this.debug?null:(e(t[0])&&(t[0]=`${s}${this.prefix} ${t[0]}`),this.logger[n](t))}create(e){return new _Logger(this.logger,{...{prefix:`${this.prefix}:${e}:`},...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new _Logger(this.logger,e)}},s=new K,u=class{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(e=>{this.observers[e]||(this.observers[e]=new Map);const n=this.observers[e].get(t)||0;this.observers[e].set(t,n+1)}),this}off(e,t){if(!this.observers[e])return;if(!t){delete this.observers[e];return}this.observers[e].delete(t)}emit(e,...t){if(this.observers[e]){const n=Array.from(this.observers[e].entries());n.forEach(([e,n])=>{for(let s=0;s<n;s++)e(...t)})}if(this.observers["*"]){const n=Array.from(this.observers["*"].entries());n.forEach(([n,s])=>{for(let o=0;o<s;o++)n.apply(n,[e,...t])})}}},H=class extends u{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===0[0]&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===0[0]&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(t,n,s,o={}){const a=o.keySeparator!==0[0]?o.keySeparator:this.options.keySeparator,c=o.ignoreJSONStructure!==0[0]?o.ignoreJSONStructure:this.options.ignoreJSONStructure;let i;t.indexOf(".")>-1?i=t.split("."):(i=[t,n],s&&(Array.isArray(s)?i.push(...s):e(s)&&a?i.push(...s.split(a)):i.push(s)));const r=h(this.data,i);return!r&&!n&&!s&&t.indexOf(".")>-1&&(t=i[0],n=i[1],s=i.slice(2).join(".")),r||!c||!e(s)?r:m(this.data?.[t]?.[n],s,a)}addResource(e,t,n,s,o={silent:!1}){const a=o.keySeparator!==0[0]?o.keySeparator:this.options.keySeparator;let i=[e,t];n&&(i=i.concat(a?n.split(a):n)),e.indexOf(".")>-1&&(i=e.split("."),s=t,t=i[1]),this.addNamespaces(t),_(this.data,i,s),o.silent||this.emit("added",e,t,n,s)}addResources(t,n,s,o={silent:!1}){for(const o in s)(e(s[o])||Array.isArray(s[o]))&&this.addResource(t,n,o,s[o],{silent:!0});o.silent||this.emit("added",t,n,s)}addResourceBundle(e,t,n,s,o,i={silent:!1,skipCopy:!1}){let a=[e,t];e.indexOf(".")>-1&&(a=e.split("."),s=n,n=t,t=a[1]),this.addNamespaces(t);let r=h(this.data,a)||{};i.skipCopy||(n=JSON.parse(JSON.stringify(n))),s?C(r,n,o):r={...r,...n},_(this.data,a,r),i.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==0[0]}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e),n=t&&Object.keys(t)||[];return!!n.find(e=>t[e]&&Object.keys(t[e]).length>0)}toJSON(){return this.data}},I={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,s,o){return e.forEach(e=>{t=this.processors[e]?.process(t,n,s,o)??t}),t}},B=Symbol("i18next/PATH_KEY");function Te(){const n=[],e=Object.create(null);let t;return e.get=(s,o)=>(t?.revoke?.(),o===B?n:(n.push(o),t=Proxy.revocable(s,e),t.proxy)),Proxy.revocable(Object.create(null),e).proxy}function $(e,t){const{[B]:n}=e(Te());return n.join(t?.keySeparator??".")}W={},f=t=>!e(t)&&typeof t!="boolean"&&typeof t!="number",V=class _Translator extends u{constructor(e,t={}){super(),he(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===0[0]&&(this.options.keySeparator="."),this.logger=s.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const n={...t};if(e==null)return!1;const s=this.resolve(e,n);if(s?.res===0[0])return!1;const o=f(s.res);return n.returnObjects!==!1||!o}extractFromKey(t,n){let s=n.nsSeparator!==0[0]?n.nsSeparator:this.options.nsSeparator;s===0[0]&&(s=":");const i=n.keySeparator!==0[0]?n.keySeparator:this.options.keySeparator;let o=n.ns||this.options.defaultNS||[];const a=s&&t.indexOf(s)>-1,r=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!ae(t,s,i);if(a&&!r){const a=t.match(this.interpolator.nestingRegexp);if(a&&a.length>0)return{key:t,namespaces:e(o)?[o]:o};const n=t.split(s);(s!==i||s===i&&this.options.ns.indexOf(n[0])>-1)&&(o=n.shift()),t=n.join(i)}return{key:t,namespaces:e(o)?[o]:o}}translate(t,n,s){let o=typeof n=="object"?{...n}:n;if(typeof o!="object"&&this.options.overloadTranslationOptionHandler&&(o=this.options.overloadTranslationOptionHandler(arguments)),typeof o=="object"&&(o={...o}),o||(o={}),t==null)return"";typeof t=="function"&&(t=$(t,{...this.options,...o})),Array.isArray(t)||(t=[String(t)]);const g=o.returnDetails!==0[0]?o.returnDetails:this.options.returnDetails,b=o.keySeparator!==0[0]?o.keySeparator:this.options.keySeparator,{key:a,namespaces:m}=this.extractFromKey(t[t.length-1],o),l=m[m.length-1];let h=o.nsSeparator!==0[0]?o.nsSeparator:this.options.nsSeparator;h===0[0]&&(h=":");const u=o.lng||this.language,k=o.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u?.toLowerCase()==="cimode")return k?g?{res:`${l}${h}${a}`,usedKey:a,exactUsedKey:a,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(o)}:`${l}${h}${a}`:g?{res:a,usedKey:a,exactUsedKey:a,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(o)}:a;const c=this.resolve(t,o);let i=c?.res;const w=c?.usedKey||a,O=c?.exactUsedKey||a,E=["[object Number]","[object Function]","[object RegExp]"],j=o.joinArrays!==0[0]?o.joinArrays:this.options.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject,v=o.count!==0[0]&&!e(o.count),p=_Translator.hasDefaultValue(o),C=v?this.pluralResolver.getSuffix(u,o.count,o):"",x=o.ordinal&&v?this.pluralResolver.getSuffix(u,o.count,{ordinal:!1}):"",_=v&&!o.ordinal&&o.count===0,d=_&&o[`defaultValue${this.options.pluralSeparator}zero`]||o[`defaultValue${C}`]||o[`defaultValue${x}`]||o.defaultValue;let r=i;y&&!i&&p&&(r=d);const A=f(r),S=Object.prototype.toString.apply(r);if(y&&r&&A&&E.indexOf(S)<0&&!(e(j)&&Array.isArray(r))){{if(!o.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(w,r,{...o,ns:m}):`key '${a} (${this.language})' returned an object instead of string.`;return g?(c.res=e,c.usedParams=this.getUsedParamsDetails(o),c):e}if(b){const t=Array.isArray(r),e=t?[]:{},n=t?O:w;for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)){const s=`${n}${b}${t}`;p&&!i?e[t]=this.translate(s,{...o,defaultValue:f(d)?d[t]:0[0],...{joinArrays:!1,ns:m}}):e[t]=this.translate(s,{...o,...{joinArrays:!1,ns:m}}),e[t]===s&&(e[t]=r[t])}i=e}}}else if(y&&e(j)&&Array.isArray(i))i=i.join(j),i&&(i=this.extendTranslation(i,t,o,s));else{let r=!1,e=!1;!this.isValidLookup(i)&&p&&(r=!0,i=d),this.isValidLookup(i)||(e=!0,i=a);const m=o.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,f=m&&e?0[0]:i,n=p&&d!==i&&this.options.updateMissing;if(e||r||n){if(this.logger.log(n?"updateKey":"missingKey",u,l,a,n?d:i),b){const e=this.resolve(a,{...o,keySeparator:!1});e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const t=this.languageUtils.getFallbackCodes(this.options.fallbackLng,o.lng||this.language);if(this.options.saveMissingTo==="fallback"&&t&&t[0])for(let n=0;n<t.length;n++)e.push(t[n]);else this.options.saveMissingTo==="all"?e=this.languageUtils.toResolveHierarchy(o.lng||this.language):e.push(o.lng||this.language);const s=(e,t,s)=>{const a=p&&s!==i?s:f;this.options.missingKeyHandler?this.options.missingKeyHandler(e,l,t,a,n,o):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(e,l,t,a,n,o),this.emit("missingKey",e,l,t,i)};this.options.saveMissing&&(this.options.saveMissingPlurals&&v?e.forEach(e=>{const t=this.pluralResolver.getSuffixes(e,o);_&&o[`defaultValue${this.options.pluralSeparator}zero`]&&t.indexOf(`${this.options.pluralSeparator}zero`)<0&&t.push(`${this.options.pluralSeparator}zero`),t.forEach(t=>{s([e],a+t,o[`defaultValue${t}`]||d)})}):s(e,a,d))}i=this.extendTranslation(i,t,o,c,s),e&&i===a&&this.options.appendNamespaceToMissingKey&&(i=`${l}${h}${a}`),(e||r)&&this.options.parseMissingKeyHandler&&(i=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}${h}${a}`:a,r?i:0[0],o))}return g?(c.res=i,c.usedParams=this.getUsedParamsDetails(o),c):i}extendTranslation(t,n,s,o,i){if(this.i18nFormat?.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...s},s.lng||this.language||o.usedLng,o.usedNS,o.usedKey,{resolved:o});else if(!s.skipInterpolation){s.interpolation&&this.interpolator.init({...s,...{interpolation:{...this.options.interpolation,...s.interpolation}}});const r=e(t)&&(s?.interpolation?.skipOnVariables!==0[0]?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let c;if(r){const e=t.match(this.interpolator.nestingRegexp);c=e&&e.length}let a=s.replace&&!e(s.replace)?s.replace:s;if(this.options.interpolation.defaultVariables&&(a={...this.options.interpolation.defaultVariables,...a}),t=this.interpolator.interpolate(t,a,s.lng||this.language||o.usedLng,s),r){const e=t.match(this.interpolator.nestingRegexp),n=e&&e.length;c<n&&(s.nest=!1)}!s.lng&&o&&o.res&&(s.lng=this.language||o.usedLng),s.nest!==!1&&(t=this.interpolator.nest(t,(...e)=>i?.[0]===e[0]&&!s.context?(this.logger.warn(`It seems you are nesting recursively key: ${e[0]} in key: ${n[0]}`),null):this.translate(...e,n),s)),s.interpolation&&this.interpolator.reset()}const a=s.postProcess||this.options.postProcess,r=e(a)?[a]:a;return t!=null&&r?.length&&s.applyPostProcessor!==!1&&(t=I.handle(r,t,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...o,usedParams:this.getUsedParamsDetails(s)},...s}:s,this)),t}resolve(t,n={}){let s,i,a,r,o;return e(t)&&(t=[t]),t.forEach(t=>{if(this.isValidLookup(s))return;const h=this.extractFromKey(t,n),c=h.key;i=c;let u=h.namespaces;this.options.fallbackNS&&(u=u.concat(this.options.fallbackNS));const l=n.count!==0[0]&&!e(n.count),m=l&&!n.ordinal&&n.count===0,f=n.context!==0[0]&&(e(n.context)||typeof n.context=="number")&&n.context!=="",d=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);u.forEach(e=>{if(this.isValidLookup(s))return;o=e,!W[`${d[0]}-${e}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(o)&&(W[`${d[0]}-${e}`]=!0,this.logger.warn(`key "${i}" for languages "${d.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),d.forEach(t=>{if(this.isValidLookup(s))return;r=t;const o=[c];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(o,c,t,e,n);else{let e;l&&(e=this.pluralResolver.getSuffix(t,n.count,n));const i=`${this.options.pluralSeparator}zero`,s=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(l&&(n.ordinal&&e.indexOf(s)===0&&o.push(c+e.replace(s,this.options.pluralSeparator)),o.push(c+e),m&&o.push(c+i)),f){const t=`${c}${this.options.contextSeparator||"_"}${n.context}`;o.push(t),l&&(n.ordinal&&e.indexOf(s)===0&&o.push(t+e.replace(s,this.options.pluralSeparator)),o.push(t+e),m&&o.push(t+i))}}let i;for(;i=o.pop();)this.isValidLookup(s)||(a=i,s=this.getResource(t,e,i,n))})})}),{res:s,usedKey:i,exactUsedKey:a,usedLng:r,usedNS:o}}isValidLookup(e){return e!==0[0]&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,n,s={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,n,s):this.resourceStore.getResource(e,t,n,s)}getUsedParamsDetails(t={}){const o=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],s=t.replace&&!e(t.replace);let n=s?t.replace:t;if(s&&typeof t.count!="undefined"&&(n.count=t.count),this.options.interpolation.defaultVariables&&(n={...this.options.interpolation.defaultVariables,...n}),!s){n={...n};for(const e of o)delete n[e]}return n}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,t.length)&&0[0]!==e[n])return!0;return!1}},P=class{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=s.create("languageUtils")}getScriptPartFromCode(e){if(e=r(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2?null:(t.pop(),t[t.length-1].toLowerCase()==="x"?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(e=r(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(t){if(e(t)&&t.indexOf("-")>-1){let e;try{e=Intl.getCanonicalLocales(t)[0]}catch{}return e&&this.options.lowerCaseLng&&(e=e.toLowerCase()),e?e:this.options.lowerCaseLng?t.toLowerCase():t}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(e=>{if(t)return;const n=this.formatLanguageCode(e);(!this.options.supportedLngs||this.isSupportedCode(n))&&(t=n)}),!t&&this.options.supportedLngs&&e.forEach(e=>{if(t)return;const s=this.getScriptPartFromCode(e);if(this.isSupportedCode(s))return t=s;const n=this.getLanguagePartFromCode(e);if(this.isSupportedCode(n))return t=n;t=this.options.supportedLngs.find(e=>{if(e===n)return e;if(e.indexOf("-")<0&&n.indexOf("-")<0)return;if(e.indexOf("-")>0&&n.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===n)return e;if(e.indexOf(n)===0&&n.length>1)return e})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(t,n){if(!t)return[];if(typeof t=="function"&&(t=t(n)),e(t)&&(t=[t]),Array.isArray(t))return t;if(!n)return t.default||[];let s=t[n];return s||(s=t[this.getScriptPartFromCode(n)]),s||(s=t[this.formatLanguageCode(n)]),s||(s=t[this.getLanguagePartFromCode(n)]),s||(s=t.default),s||[]}toResolveHierarchy(t,n){const i=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],t),o=[],s=e=>{if(!e)return;this.isSupportedCode(e)?o.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`)};return e(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(t))):e(t)&&s(this.formatLanguageCode(t)),i.forEach(e=>{o.indexOf(e)<0&&s(this.formatLanguageCode(e))}),o}},R={zero:0,one:1,two:2,few:3,many:4,other:5},L={select:e=>e===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})},X=class{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=s.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const o=r(e==="dev"?"en":e),i=t.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:o,type:i});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let n;try{n=new Intl.PluralRules(o,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),L;if(!e.match(/-|_/))return L;const s=this.languageUtils.getLanguagePartFromCode(e);n=this.getRule(s,t)}return this.pluralRulesCache[s]=n,n}needsPlural(e,t={}){let n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),n?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,n={}){return this.getSuffixes(e,n).map(e=>`${t}${e}`)}getSuffixes(e,t={}){let n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),n?n.resolvedOptions().pluralCategories.sort((e,t)=>R[e]-R[t]).map(e=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${e}`):[]}getSuffix(e,t,n={}){const s=this.getRule(e,n);return s?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,n))}},g=(t,n,s,o=".",i=!0)=>{let a=pe(t,n,s);return!a&&i&&e(s)&&(a=m(t,s,o),a===0[0]&&(a=m(n,s,o))),a},p=e=>e.replace(/\$/g,"$$$$"),J=class{constructor(e={}){this.logger=s.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(e=>e),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:c,escapeValue:d,useRawValueToEscape:s,prefix:o,prefixEscaped:b,suffix:r,suffixEscaped:f,formatSeparator:h,unescapeSuffix:l,unescapePrefix:u,nestingPrefix:n,nestingPrefixEscaped:m,nestingSuffix:t,nestingSuffixEscaped:p,nestingOptionsSeparator:g,maxReplaces:v,alwaysFormat:i}=e.interpolation;this.escape=c!==0[0]?c:Me,this.escapeValue=d===0[0]||d,this.useRawValueToEscape=s!==0[0]&&s,this.prefix=o?a(o):b||"{{",this.suffix=r?a(r):f||"}}",this.formatSeparator=h||",",this.unescapePrefix=l?"":u||"-",this.unescapeSuffix=this.unescapePrefix?"":l||"",this.nestingPrefix=n?a(n):m||a("$t("),this.nestingSuffix=t?a(t):p||a(")"),this.nestingOptionsSeparator=g||",",this.maxReplaces=v||1e3,this.alwaysFormat=i!==0[0]&&i,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>e?.source===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(t,n,s,o){let a,i,r;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=e=>{if(e.indexOf(this.formatSeparator)<0){const t=g(n,c,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(t,0[0],s,{...o,...n,interpolationkey:e}):t}const t=e.split(this.formatSeparator),i=t.shift().trim(),a=t.join(this.formatSeparator).trim();return this.format(g(n,c,i,this.options.keySeparator,this.options.ignoreJSONStructure),a,s,{...o,...n,interpolationkey:i})};this.resetRegExp();const l=o?.missingInterpolationHandler||this.options.missingInterpolationHandler,d=o?.interpolation?.skipOnVariables!==0[0]?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,h=[{regex:this.regexpUnescape,safeValue:e=>p(e)},{regex:this.regexp,safeValue:e=>p(this.escapeValue?this.escape(e):e)}];return h.forEach(n=>{for(r=0;a=n.regex.exec(t);){const s=a[1].trim();if(i=u(s),i===0[0])if(typeof l=="function"){const n=l(t,a,o);i=e(n)?n:""}else if(o&&Object.prototype.hasOwnProperty.call(o,s))i="";else if(d){i=a[0];continue}else this.logger.warn(`missed to pass in variable ${s} for interpolating ${t}`),i="";else!e(i)&&!this.useRawValueToEscape&&(i=O(i));const c=n.safeValue(i);if(t=t.replace(a[0],c),d?(n.regex.lastIndex+=i.length,n.regex.lastIndex-=a[0].length):n.regex.lastIndex=0,r++,r>=this.maxReplaces)break}}),t}nest(t,n,s={}){let i,a,o;const r=(e,t)=>{const s=this.nestingOptionsSeparator;if(e.indexOf(s)<0)return e;const i=e.split(new RegExp(`${s}[ ]*{`));let n=`{${i[1]}`;e=i[0],n=this.interpolate(n,o);const r=n.match(/'/g),a=n.match(/"/g);((r?.length??0)%2===0&&!a||a.length%2!==0)&&(n=n.replace(/'/g,'"'));try{o=JSON.parse(n),t&&(o={...t,...o})}catch(t){return this.logger.warn(`failed parsing options string in nesting for key ${e}`,t),`${e}${s}${n}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,e};for(;i=this.nestingRegexp.exec(t);){let c=[];o={...s},o=o.replace&&!e(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;const l=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(l!==-1&&(c=i[1].slice(l).split(this.formatSeparator).map(e=>e.trim()).filter(Boolean),i[1]=i[1].slice(0,l)),a=n(r.call(this,i[1].trim(),o),o),a&&i[0]===t&&!e(a))return a;e(a)||(a=O(a)),a||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${t}`),a=""),c.length&&(a=c.reduce((e,t)=>this.format(e,t,s.lng,{...s,interpolationkey:i[1].trim()}),a.trim())),t=t.replace(i[0],a),this.regexp.lastIndex=0}return t}},ee=e=>{let n=e.toLowerCase().trim();const t={};if(e.indexOf("(")>-1){const o=e.split("(");n=o[0].toLowerCase().trim();const s=o[1].substring(0,o[1].length-1);if(n==="currency"&&s.indexOf(":")<0)t.currency||(t.currency=s.trim());else if(n==="relativetime"&&s.indexOf(":")<0)t.range||(t.range=s.trim());else{const e=s.split(";");e.forEach(e=>{if(e){const[o,...i]=e.split(":"),n=i.join(":").trim().replace(/^'+|'+$/g,""),s=o.trim();t[s]||(t[s]=n),n==="false"&&(t[s]=!1),n==="true"&&(t[s]=!0),isNaN(n)||(t[s]=parseInt(n,10))}})}}return{formatName:n,formatOptions:t}},D=e=>{const t={};return(n,s,o)=>{let a=o;o&&o.interpolationkey&&o.formatParams&&o.formatParams[o.interpolationkey]&&o[o.interpolationkey]&&(a={...a,[o.interpolationkey]:0[0]});const c=s+JSON.stringify(a);let i=t[c];return i||(i=e(r(s),o),t[c]=i),i(n)}},ne=e=>(t,n,s)=>e(r(n),s)(t),se=class{constructor(e={}){this.logger=s.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const n=t.cacheInBuiltFormats?D:ne;this.formats={number:n((e,t)=>{const n=new Intl.NumberFormat(e,{...t});return e=>n.format(e)}),currency:n((e,t)=>{const n=new Intl.NumberFormat(e,{...t,style:"currency"});return e=>n.format(e)}),datetime:n((e,t)=>{const n=new Intl.DateTimeFormat(e,{...t});return e=>n.format(e)}),relativetime:n((e,t)=>{const n=new Intl.RelativeTimeFormat(e,{...t});return e=>n.format(e,t.range||"day")}),list:n((e,t)=>{const n=new Intl.ListFormat(e,{...t});return e=>n.format(e)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=D(t)}format(e,t,n,s={}){const o=t.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(e=>e.indexOf(")")>-1)){const e=o.findIndex(e=>e.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,e)].join(this.formatSeparator)}const i=o.reduce((e,t)=>{const{formatName:o,formatOptions:i}=ee(t);if(this.formats[o]){let t=e;try{const a=s?.formatParams?.[s.interpolationkey]||{},r=a.locale||a.lng||s.locale||s.lng||n;t=this.formats[o](e,r,{...i,...s,...a})}catch(e){this.logger.warn(e)}return t}return this.logger.warn(`there was no format function for ${o}`),e},e);return i}},oe=(e,t)=>{e.pending[t]!==0[0]&&(delete e.pending[t],e.pendingCount--)},ie=class extends u{constructor(e,t,n,o={}){super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=o,this.logger=s.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=o.maxParallelReads||10,this.readingCalls=0,this.maxRetries=o.maxRetries>=0?o.maxRetries:5,this.retryTimeout=o.retryTimeout>=1?o.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(n,o.backend,o)}queueLoad(e,t,n,s){const i={},o={},r={},a={};return e.forEach(e=>{let s=!0;t.forEach(t=>{const r=`${e}|${t}`;!n.reload&&this.store.hasResourceBundle(e,t)?this.state[r]=2:this.state[r]<0||(this.state[r]===1?o[r]===0[0]&&(o[r]=!0):(this.state[r]=1,s=!1,o[r]===0[0]&&(o[r]=!0),i[r]===0[0]&&(i[r]=!0),a[t]===0[0]&&(a[t]=!0)))}),s||(r[e]=!0)}),(Object.keys(i).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(i),pending:Object.keys(o),toLoadLanguages:Object.keys(r),toLoadNamespaces:Object.keys(a)}}loaded(e,t,n){const a=e.split("|"),o=a[0],i=a[1];t&&this.emit("failedLoading",o,i,t),!t&&n&&this.store.addResourceBundle(o,i,n,0[0],0[0],{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const s={};this.queue.forEach(n=>{fe(n.loaded,[o],i),oe(n,e),t&&n.errors.push(t),n.pendingCount===0&&!n.done&&(Object.keys(n.loaded).forEach(e=>{s[e]||(s[e]={});const t=n.loaded[e];t.length&&t.forEach(t=>{s[e][t]===0[0]&&(s[e][t]=!0)})}),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())}),this.emit("loaded",s),this.queue=this.queue.filter(e=>!e.done)}read(e,t,n,s=0,o=this.retryTimeout,i){if(!e.length)return i(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:n,tried:s,wait:o,callback:i});return}this.readingCalls++;const a=(a,r)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}if(a&&r&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,n,s+1,o*2,i)},o);return}i(a,r)},r=this.backend[n].bind(this.backend);if(r.length===2){try{const n=r(e,t);n&&typeof n.then=="function"?n.then(e=>a(null,e)).catch(a):a(null,n)}catch(e){a(e)}return}return r(e,t,a)}prepareLoading(t,n,s={},o){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),o&&o();e(t)&&(t=this.languageUtils.toResolveHierarchy(t)),e(n)&&(n=[n]);const i=this.queueLoad(t,n,s,o);if(!i.toLoad.length)return i.pending.length||o(),null;i.toLoad.forEach(e=>{this.loadOne(e)})}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e,t=""){const o=e.split("|"),n=o[0],s=o[1];this.read(n,s,"read",0[0],0[0],(o,i)=>{o&&this.logger.warn(`${t}loading namespace ${s} for language ${n} failed`,o),!o&&i&&this.logger.log(`${t}loaded namespace ${s} for language ${n}`,i),this.loaded(e,o,i)})}saveMissing(e,t,n,s,o,i={},a=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(n==null||n==="")return;if(this.backend?.create){const c={...i,isUpdate:o},r=this.backend.create.bind(this.backend);if(r.length<6)try{let o;r.length===5?o=r(e,t,n,s,c):o=r(e,t,n,s),o&&typeof o.then=="function"?o.then(e=>a(null,e)).catch(a):a(null,o)}catch(e){a(e)}else r(e,t,n,s,a,c)}if(!e||!e[0])return;this.store.addResource(e[0],t,n,s)}},T=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let n={};if(typeof t[1]=="object"&&(n=t[1]),e(t[1])&&(n.defaultValue=t[1]),e(t[2])&&(n.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const e=t[3]||t[2];Object.keys(e).forEach(t=>{n[t]=e[t]})}return n},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),v=t=>(e(t.ns)&&(t.ns=[t.ns]),e(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),e(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs?.indexOf?.("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t),d=()=>{},le=e=>{const t=Object.getOwnPropertyNames(Object.getPrototypeOf(e));t.forEach(t=>{typeof e[t]=="function"&&(e[t]=e[t].bind(e))})},F=class _I18n extends u{constructor(e={},t){if(super(),this.options=v(e),this.services={},this.logger=s,this.modules={external:[]},le(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(t={},n){this.isInitializing=!0,typeof t=="function"&&(n=t,t={}),t.defaultNS==null&&t.ns&&(e(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const i=T();this.options={...i,...this.options,...v(t)},this.options.interpolation={...i.interpolation,...this.options.interpolation},t.keySeparator!==0[0]&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==0[0]&&(this.options.userDefinedNsSeparator=t.nsSeparator);const o=e=>e?typeof e=="function"?new e:e:null;if(!this.options.isClone){this.modules.logger?s.init(o(this.modules.logger),this.options):s.init(null,this.options);let t;this.modules.formatter?t=this.modules.formatter:t=se;const n=new P(this.options);this.store=new H(this.options.resources,this.options);const e=this.services;e.logger=s,e.resourceStore=this.store,e.languageUtils=n,e.pluralResolver=new X(n,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix});const a=this.options.interpolation.format&&this.options.interpolation.format!==i.interpolation.format;a&&this.logger.deprecate(`init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting`),t&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(e.formatter=o(t),e.formatter.init&&e.formatter.init(e,this.options),this.options.interpolation.format=e.formatter.format.bind(e.formatter)),e.interpolator=new J(this.options),e.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},e.backendConnector=new ie(o(this.modules.backend),e.resourceStore,e,this.options),e.backendConnector.on("*",(e,...t)=>{this.emit(e,...t)}),this.modules.languageDetector&&(e.languageDetector=o(this.modules.languageDetector),e.languageDetector.init&&e.languageDetector.init(e,this.options.detection,this.options)),this.modules.i18nFormat&&(e.i18nFormat=o(this.modules.i18nFormat),e.i18nFormat.init&&e.i18nFormat.init(this)),this.translator=new V(this.services,this.options),this.translator.on("*",(e,...t)=>{this.emit(e,...t)}),this.modules.external.forEach(e=>{e.init&&e.init(this)})}if(this.format=this.options.interpolation.format,n||(n=d),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&e[0]!=="dev"&&(this.options.lng=e[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");const c=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];c.forEach(e=>{this[e]=(...t)=>this.store[e](...t)});const u=["addResource","addResources","addResourceBundle","removeResourceBundle"];u.forEach(e=>{this[e]=(...t)=>(this.store[e](...t),this)});const a=l(),r=()=>{const e=(e,t)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),a.resolve(t),n(e,t)};if(this.languages&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initAsync?r():setTimeout(r,0),a}loadResources(t,n=d){let s=n;const o=e(t)?t:this.language;if(typeof t=="function"&&(s=t),!this.options.resources||this.options.partialBundledLanguages){if(o?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return s();const e=[],t=t=>{if(!t)return;if(t==="cimode")return;const n=this.services.languageUtils.toResolveHierarchy(t);n.forEach(t=>{if(t==="cimode")return;e.indexOf(t)<0&&e.push(t)})};if(o)t(o);else{const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.forEach(e=>t(e))}this.options.preload?.forEach?.(e=>t(e)),this.services.backendConnector.load(e,this.options.ns,e=>{!e&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),s(e)})}else s(null)}reloadResources(e,t,n){const s=l();return typeof e=="function"&&(n=e,e=0[0]),typeof t=="function"&&(n=t,t=0[0]),e||(e=this.languages),t||(t=this.options.ns),n||(n=d),this.services.backendConnector.reload(e,t,e=>{s.resolve(),n(e)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&I.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!e||!this.languages)return;if(["cimode","dev"].indexOf(e)>-1)return;for(let e=0;e<this.languages.length;e++){const t=this.languages[e];if(["cimode","dev"].indexOf(t)>-1)continue;if(this.store.hasLanguageSomeTranslations(t)){this.resolvedLanguage=t;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}changeLanguage(t,n){this.isLanguageChangingTo=t;const o=l();this.emit("languageChanging",t);const i=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=0[0],this.setResolvedLanguage(e)},a=(e,s)=>{s?this.isLanguageChangingTo===t&&(i(s),this.translator.changeLanguage(s),this.isLanguageChangingTo=0[0],this.emit("languageChanged",s),this.logger.log("languageChanged",s)):this.isLanguageChangingTo=0[0],o.resolve((...e)=>this.t(...e)),n&&n(e,(...e)=>this.t(...e))},s=n=>{!t&&!n&&this.services.languageDetector&&(n=[]);const o=e(n)?n:n&&n[0],s=this.store.hasLanguageSomeTranslations(o)?o:this.services.languageUtils.getBestMatchFromCodes(e(n)?[n]:n);s&&(this.language||i(s),this.translator.language||this.translator.changeLanguage(s),this.services.languageDetector?.cacheUserLanguage?.(s)),this.loadResources(s,e=>{a(e,s)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?s(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(t),o}getFixedT(t,n,s){const o=(e,t,...n)=>{let i;typeof t!="object"?i=this.options.overloadTranslationOptionHandler([e,t].concat(n)):i={...t},i.lng=i.lng||o.lng,i.lngs=i.lngs||o.lngs,i.ns=i.ns||o.ns,i.keyPrefix!==""&&(i.keyPrefix=i.keyPrefix||s||o.keyPrefix);const r=this.options.keySeparator||".";let a;return i.keyPrefix&&Array.isArray(e)?a=e.map(e=>(typeof e=="function"&&(e=$(e,{...this.options,...t})),`${i.keyPrefix}${r}${e}`)):(typeof e=="function"&&(e=$(e,{...this.options,...t})),a=i.keyPrefix?`${i.keyPrefix}${r}${e}`:e),this.t(a,i)};return e(t)?o.lng=t:o.lngs=t,o.ns=n,o.keyPrefix=s,o}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],o=!!this.options&&this.options.fallbackLng,i=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const s=(e,t)=>{const n=this.services.backendConnector.state[`${e}|${t}`];return n===-1||n===0||n===2};if(t.precheck){const e=t.precheck(this,s);if(e!==0[0])return e}return!!this.hasResourceBundle(n,e)||!!(!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages)||!!(s(n,e)&&(!o||s(i,e)))}loadNamespaces(t,n){const s=l();return this.options.ns?(e(t)&&(t=[t]),t.forEach(e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}),this.loadResources(e=>{s.resolve(),n&&n(e)}),s):(n&&n(),Promise.resolve())}loadLanguages(t,n){const s=l();e(t)&&(t=[t]);const o=this.options.preload||[],i=t.filter(e=>o.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e));return i.length?(this.options.preload=o.concat(i),this.loadResources(e=>{s.resolve(),n&&n(e)}),s):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const t=new Intl.Locale(e);if(t&&t.getTextInfo){const e=t.getTextInfo();if(e&&e.direction)return e.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=this.services?.languageUtils||new P(T());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(n.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){return new _I18n(e,t)}cloneInstance(e={},t=d){const o=e.forkResourceStore;o&&delete e.forkResourceStore;const s={...this.options,...e,...{isClone:!0}},n=new _I18n(s);(e.debug!==0[0]||e.prefix!==0[0])&&(n.logger=n.logger.clone(e));const i=["store","services","language"];if(i.forEach(e=>{n[e]=this[e]}),n.services={...this.services},n.services.utils={hasLoadedNamespace:n.hasLoadedNamespace.bind(n)},o){const e=Object.keys(this.store.data).reduce((e,t)=>(e[t]={...this.store.data[t]},e[t]=Object.keys(e[t]).reduce((n,s)=>(n[s]={...e[t][s]},n),e[t]),e),{});n.store=new H(e,s),n.services.resourceStore=n.store}return n.translator=new V(n.services,s),n.translator.on("*",(e,...t)=>{n.emit(e,...t)}),n.init(s,t),n.translator.options=s,n.translator.backendConnector.services.utils={hasLoadedNamespace:n.hasLoadedNamespace.bind(n)},n}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}},t=F.createInstance(),t.createInstance=F.createInstance;var Oe,N,Ee,a,q,Y,te,z,we,e,l,Ce,Me,ye,ue,de,ae,s,r,u,O,he,re,c,b,j,_,M,fe,h,m,f,p,g,Fe,A,L,R,Se,Ae,ke,i,k,xe,o,E,P,H,I,B,U,ce,pe,C,V,W,K,X,Q,Z,J,ee,D,ne,se,oe,ie,d,v,T,le,t,n,S,F,_e,je,be,ve,ge,w,x,me,y,G,Ge=t.createInstance,Ye=t.dir,qe=t.init,Ke=t.loadResources,Ue=t.reloadResources,Pe=t.use,Be=t.changeLanguage,$e=t.getFixedT,Re=t.t,Xe=t.exists,He=t.setDefaultNamespace,Ie=t.hasLoadedNamespace,We=t.loadNamespaces,Ve=t.loadLanguages,{slice:Le,forEach:Ne}=[];function De(e){return Ne.call(Le.call(arguments,1),t=>{if(t)for(const n in t)e[n]===0[0]&&(e[n]=t[n])}),e}function ze(e){if(typeof e!="string")return!1;const t=[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i];return t.some(t=>t.test(e))}S=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Fe=function(e,t){let o=arguments.length>2&&arguments[2]!==0[0]?arguments[2]:{path:"/"};const n=o,i=encodeURIComponent(t);let s=`${e}=${i}`;if(n.maxAge>0){const e=n.maxAge-0;if(Number.isNaN(e))throw new Error("maxAge should be a Number");s+=`; Max-Age=${Math.floor(e)}`}if(n.domain){if(!S.test(n.domain))throw new TypeError("option domain is invalid");s+=`; Domain=${n.domain}`}if(n.path){if(!S.test(n.path))throw new TypeError("option path is invalid");s+=`; Path=${n.path}`}if(n.expires){if(typeof n.expires.toUTCString!="function")throw new TypeError("option expires is invalid");s+=`; Expires=${n.expires.toUTCString()}`}if(n.httpOnly&&(s+="; HttpOnly"),n.secure&&(s+="; Secure"),n.sameSite){const e=typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite;switch(e){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return n.partitioned&&(s+="; Partitioned"),s},A={create(e,t,n,s){let o=arguments.length>4&&arguments[4]!==0[0]?arguments[4]:{path:"/",sameSite:"strict"};n&&(o.expires=new Date,o.expires.setTime(o.expires.getTime()+n*60*1e3)),s&&(o.domain=s),document.cookie=Fe(e,t,o)},read(e){const t=`${e}=`,n=document.cookie.split(";");for(let s=0;s<n.length;s++){let e=n[s];for(;e.charAt(0)===" ";)e=e.substring(1,e.length);if(e.indexOf(t)===0)return e.substring(t.length,e.length)}return null},remove(e,t){this.create(e,"",-1,t)}},Se={name:"cookie",lookup(e){let{lookupCookie:t}=e;return t&&typeof document!="undefined"?A.read(t)||0[0]:0[0]},cacheUserLanguage(e,t){let{lookupCookie:n,cookieMinutes:s,cookieDomain:o,cookieOptions:i}=t;n&&typeof document!="undefined"&&A.create(n,e,s,o,i)}},Ae={name:"querystring",lookup(e){let{lookupQuerystring:n}=e,t;if(typeof window!="undefined"){let{search:s}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(s=window.location.hash.substring(window.location.hash.indexOf("?")));const o=s.substring(1),e=o.split("&");for(let s=0;s<e.length;s++){const o=e[s].indexOf("=");if(o>0){const i=e[s].substring(0,o);i===n&&(t=e[s].substring(o+1))}}}return t}},ke={name:"hash",lookup(e){let{lookupHash:s,lookupFromHashIndex:n}=e,t;if(typeof window!="undefined"){const{hash:e}=window.location;if(e&&e.length>2){const o=e.substring(1);if(s){const e=o.split("&");for(let n=0;n<e.length;n++){const o=e[n].indexOf("=");if(o>0){const i=e[n].substring(0,o);i===s&&(t=e[n].substring(o+1))}}}if(t)return t;if(!t&&n>-1){const t=e.match(/\/([a-zA-Z-]*)/g);if(!Array.isArray(t))return 0[0];const s=typeof n=="number"?n:0;return t[s]?.replace("/","")}}}return t}},i=null,k=()=>{if(i!==null)return i;try{if(i=typeof window!="undefined"&&window.localStorage!==null,!i)return!1;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{i=!1}return i},xe={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;return t&&k()?window.localStorage.getItem(t)||0[0]:0[0]},cacheUserLanguage(e,t){let{lookupLocalStorage:n}=t;n&&k()&&window.localStorage.setItem(n,e)}},o=null,E=()=>{if(o!==null)return o;try{if(o=typeof window!="undefined"&&window.sessionStorage!==null,!o)return!1;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{o=!1}return o},_e={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;return t&&E()?window.sessionStorage.getItem(t)||0[0]:0[0]},cacheUserLanguage(e,t){let{lookupSessionStorage:n}=t;n&&E()&&window.sessionStorage.setItem(n,e)}},je={name:"navigator",lookup(){const t=[];if(typeof navigator!="undefined"){const{languages:e,userLanguage:n,language:s}=navigator;if(e)for(let n=0;n<e.length;n++)t.push(e[n]);n&&t.push(n),s&&t.push(s)}return t.length>0?t:0[0]}},be={name:"htmlTag",lookup(e){let{htmlTag:s}=e,n;const t=s||(typeof document!="undefined"?document.documentElement:null);return t&&typeof t.getAttribute=="function"&&(n=t.getAttribute("lang")),n}},ve={name:"path",lookup(e){let{lookupFromPathIndex:t}=e;if(typeof window=="undefined")return 0[0];const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(!Array.isArray(n))return 0[0];const s=typeof t=="number"?t:0;return n[s]?.replace("/","")}},ge={name:"subdomain",lookup(e){let{lookupFromSubdomainIndex:t}=e;const s=typeof t=="number"?t+1:1,n=typeof window!="undefined"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);return n?n[s]:0[0]}},x=!1;try{document.cookie,x=!0}catch{}w=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],x||w.splice(1,1),me=()=>({order:w,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e}),y=class{constructor(e){let t=arguments.length>1&&arguments[1]!==0[0]?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&arguments[0]!==0[0]?arguments[0]:{languageUtils:{}},t=arguments.length>1&&arguments[1]!==0[0]?arguments[1]:{},n=arguments.length>2&&arguments[2]!==0[0]?arguments[2]:{};this.services=e,this.options=De(t,this.options||{},me()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=e=>e.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(Se),this.addDetector(Ae),this.addDetector(xe),this.addDetector(_e),this.addDetector(je),this.addDetector(be),this.addDetector(ve),this.addDetector(ge),this.addDetector(ke)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let t=arguments.length>0&&arguments[0]!==0[0]?arguments[0]:this.options.order,e=[];return t.forEach(t=>{if(this.detectors[t]){let n=this.detectors[t].lookup(this.options);n&&typeof n=="string"&&(n=[n]),n&&(e=e.concat(n))}}),e=e.filter(e=>e!=null&&!ze(e)).map(e=>this.options.convertDetectedLanguage(e)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?e:e.length>0?e[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&arguments[1]!==0[0]?arguments[1]:this.options.caches;if(!t)return;if(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1)return;t.forEach(t=>{this.detectors[t]&&this.detectors[t].cacheUserLanguage(e,this.options)})}},y.type="languageDetector",translations={en:{"search-filter":{section:"Section",tag:"Tag",type:"Entity type"},"search-sections":{collections:"Collections",home:"Homepage",iiif:"IIIF",links:"Links",post:"Blog"}},de:{"search-filter":{section:"Bereich",tag:"Schlagwort",type:"Entit\xE4tstyp"},"search-sections":{collections:"Sammlungen",home:"Startseite",iiif:"IIIF",links:"Links",post:"Blog"}}},G=class extends Y{pillInner(e,n){let s=e;return t.exists(`search-sections:${e}`)&&(s=t.t(`search-sections:${e}`)),this.total?`<span aria-label="${s}" data-filter-count="${n}">${s} (${n})</span>`:`<span aria-label="${s}">${s}</span>`}},t.use(y).init({debug:!1,fallbackLng:"de",resources:translations,supportedLngs:["de","en"]}),window.addEventListener("DOMContentLoaded",e=>{const r="/index/",i=new URLSearchParams(window.location.search),o=i.get("q"),s="#search-box",c=document.querySelector("#search-filter");let a=!1;document.querySelector(s).addEventListener("input",e=>{const t=e.target.value;i.set("q",t),history.replaceState(null,null,"?"+i.toString())}),document.querySelector(".search-button").addEventListener("click",e=>{const t=new KeyboardEvent("keydown",{key:"Enter",code:"Enter",which:13,keyCode:13});document.querySelector(s).dispatchEvent(t)});const n=new we({bundlePath:r});n.add(new U({inputElement:s})),n.on("filters",e=>{if(!a){for(const[s,l]of Object.entries(e.available)){let i=s;t.exists(`search-filter:${s}`)&&(i=t.t(`search-filter:${s}`));const a=`search-filter-${s}`,o=document.createElement("fieldset"),r=document.createElement("legend");r.innerText=i,o.id=a,o.classList.add(s),o.classList.add("search-filter-single"),c.appendChild(o),n.add(new G({containerElement:`#${a}`,filter:s,selectMultiple:!0,alwaysShow:!1})),o.appendChild(r)}a=!0}}),n.add(new q({containerElement:"#search-results"})),document.querySelector(s).focus(),o!==null&&o!==""?(document.querySelector(s).value=o,n.triggerSearch(o)):n.triggerLoad()})})()